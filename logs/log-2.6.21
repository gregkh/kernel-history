commit de46c33745f5e2ad594c72f2cf5f490861b16ce1
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 25 20:08:32 2007 -0700

    Linux 2.6.21
    
    .. ok, enough waffling about it already. "Just do it!"
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2fb90b128aaf7758e3de22119515fb11174d4f23
Merge: 707abb7... 5a68b2e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 25 13:51:45 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [PARPORT] SUNBPP: Fix OOPS when debugging is enabled.
      [SPARC] openprom: Switch to ref counting PCI API

commit 707abb7986293b24b83dba163ffc79d8895236f9
Merge: cbc31a4... 1194ed0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 25 13:51:21 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [NETLINK]: Infinite recursion in netlink.

commit cbc31a475a7f7748bd0a4e536533868e7cff8645
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Apr 25 13:01:21 2007 -0700

    packet: fix error handling
    
    The packet driver is assuming (reasonably) that the (undocumented)
    request.errors is an errno.  But it is in fact some mysterious bitfield.  When
    things go wrong we return weird positive numbers to the VFS as pointers and it
    goes oops.
    
    Thanks to William Heimbigner for reporting and diagnosis.
    
    (It doesn't oops, but this driver still doesn't work for William)
    
    Cc: William Heimbigner <icxcnika@mar.tar.cc>
    Cc: Peter Osterlund <petero2@telia.com>
    Cc: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1194ed0a3eb8076c8fbfe310f1ccbf229e8647de
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Wed Apr 25 13:07:28 2007 -0700

    [NETLINK]: Infinite recursion in netlink.
    
    Reply to NETLINK_FIB_LOOKUP messages were misrouted back to kernel,
    which resulted in infinite recursion and stack overflow.
    
    The bug is present in all kernel versions since the feature appeared.
    
    The patch also makes some minimal cleanup:
    
    1. Return something consistent (-ENOENT) when fib table is missing
    2. Do not crash when queue is empty (does not happen, but yet)
    3. Put result of lookup
    
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5044eed48886b105a123333fe7ca97c6bd496120
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Wed Apr 25 11:53:48 2007 +0200

    cfq-iosched: fix alias + front merge bug
    
    There's a really rare and obscure bug in CFQ, that causes a crash in
    cfq_dispatch_insert() due to rq == NULL.  One example of the resulting
    oops is seen here:
    
    	http://lkml.org/lkml/2007/4/15/41
    
    Neil correctly diagnosed the situation for how this can happen: if two
    concurrent requests with the exact same sector number (due to direct IO
    or aliasing between MD and the raw device access), the alias handling
    will add the request to the sortlist, but next_rq remains NULL.
    
    Read the more complete analysis at:
    
    	http://lkml.org/lkml/2007/4/25/57
    
    This looks like it requires md to trigger, even though it should
    potentially be possible to due with O_DIRECT (at least if you edit the
    kernel and doctor some of the unplug calls).
    
    The fix is to move the ->next_rq update to when we add a request to the
    rbtree. Then we remove the possibility for a request to exist in the
    rbtree code, but not have ->next_rq correctly updated.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a23cf14b161b8deeb0f701d577a0e8be6365e247
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Wed Apr 25 11:13:49 2007 +0900

    IPv6: fix Routing Header Type 0 handling thinko
    
    Oops, thinko.  The test for accempting a RH0 was exatly the wrong way
    around.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 12145387a042e8aa4439485f8976e6992a529b12
Merge: 6f4c5bd... 68c9f75...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 24 18:20:32 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [BNX2]: Fix occasional NETDEV WATCHDOG on 5709.
      [IPV6]: Disallow RH0 by default.
      [XFRM]: beet: fix pseudo header length value
      [TCP]: Congestion control initialization.

commit 68c9f75a0539db583db074059d54deb607d1a475
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Apr 24 15:35:53 2007 -0700

    [BNX2]: Fix occasional NETDEV WATCHDOG on 5709.
    
    Tweak a register setting to prevent the tx mailbox from halting.
    
    Update version to 1.5.8.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0bcbc92629044b5403719f77fb015e9005b1f504
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Apr 24 14:58:30 2007 -0700

    [IPV6]: Disallow RH0 by default.
    
    A security issue is emerging.  Disallow Routing Header Type 0 by default
    as we have been doing for IPv4.
    Note: We allow RH2 by default because it is harmless.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f4c5bdef2943d9ec074be32c437ca897016aaad
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Apr 24 21:42:20 2007 +0100

    [MIPS] Fix oprofile logic to physical counter remapping
    
    This did cause oprofile to fail on non-multithreaded systems with more
    than 2 processors such as the BCM1480.
    
    Reported by Manish Lachwani (mlachwani@mvista.com).
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 89d8ab6993e1d9f3c482ee8c862c03c528f696aa
Merge: d80a792... 5efb764...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 24 11:05:20 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      drivers/net/hamradio/baycom_ser_fdx build fix
      usb-net/pegasus: fix pegasus carrier detection
      sis900: Allocate rx replacement buffer before rx operation
      [netdrvr] depca: handle platform_device_add() failure

commit 5efb764c8653c187912669629c14bb47242a5d05
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Apr 24 12:51:03 2007 -0400

    drivers/net/hamradio/baycom_ser_fdx build fix
    
    sparc64:
    
    drivers/net/hamradio/baycom_ser_fdx.c: In function `ser12_open':
    drivers/net/hamradio/baycom_ser_fdx.c:417: error: `NR_IRQS' undeclared (first us
    e in this function)
    drivers/net/hamradio/baycom_ser_fdx.c:417: error: (Each undeclared identifier is
     reported only once
    drivers/net/hamradio/baycom_ser_fdx.c:417: error: for each function it appears i
    n.)
    
    Cc: Folkert van Heusden <folkert@vanheusden.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c43c49bd61fdb9bb085ddafcaadb17d06f95ec43
Author: Dan Williams <dcbw@redhat.com>
Date:   Tue Apr 24 10:20:06 2007 -0400

    usb-net/pegasus: fix pegasus carrier detection
    
    Broken by 4a1728a28a193aa388900714bbb1f375e08a6d8e which switched the
    return semantics of read_mii_word() but didn't fix usage of
    read_mii_word() to conform to the new semantics.
    
    Setting carrier to off based on the NO_CARRIER flag is also incorrect as
    that flag only triggers on TX failure and therefore isn't correct when
    no frames are being transmitted.  Since there is already a 2*HZ MII
    carrier check going on, defer to that.
    
    Add a TRUST_LINK_STATUS feature flag for adapters where the LINK_STATUS
    flag is actually correct, and use that rather than the NO_CARRIER flag.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b748d9e3b80dc7e6ce6bf7399f57964b99a4104c
Author: Neil Horman <nhorman@tuxdriver.com>
Date:   Fri Apr 20 09:54:58 2007 -0400

    sis900: Allocate rx replacement buffer before rx operation
    
    	The sis900 driver appears to have a bug in which the receive routine
    passes the skbuff holding the received frame to the network stack before
    refilling the buffer in the rx ring.  If a new skbuff cannot be allocated, the
    driver simply leaves a hole in the rx ring, which causes the driver to stop
    receiving frames and become non-recoverable without an rmmod/insmod according to
    reporters.  This patch reverses that order, attempting to allocate a replacement
    buffer first, and receiving the new frame only if one can be allocated.  If no
    skbuff can be allocated, the current skbuf in the rx ring is recycled, dropping
    the current frame, but keeping the NIC operational.
    
    Signed-off-by: Neil Horman <nhorman@tuxdriver.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d91c088b39e3c66d309938de858775bb90fd1ead
Author: Andrea Righi <a.righi@cineca.it>
Date:   Tue Apr 24 12:40:57 2007 -0400

    [netdrvr] depca: handle platform_device_add() failure
    
    The following patch fixes a kernel bug in depca_platform_probe().
    
    We don't use a dynamic pointer for pldev->dev.platform_data, so it seems
    that the correct way to proceed if platform_device_add(pldev) fails is
    to explicitly set the pldev->dev.platform_data pointer to NULL, before
    calling the platform_device_put(pldev), or it will be kfree'ed by
    platform_device_release().
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d80a7920731a964b8c3492667a8069e5385ec794
Merge: 32bd33e... 8689b51...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 24 09:36:53 2007 -0700

    Merge branch 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6
    
    * 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6:
      [PATCH] i386: Fix some warnings added by earlier patch
      [PATCH] x86-64: Always flush all pages in change_page_attr
      [PATCH] x86: Remove noreplacement option
      [PATCH] x86-64: make GART PTEs uncacheable

commit 32bd33e21eeab63e7265bb3cba9ed94ab1ab816e
Merge: 4bf3631... 01abc2a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 24 09:32:07 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6:
      Revert "adjust legacy IDE resource setting (v2)"

commit 4bf3631cdb012591667ab927fcd7719d92837833
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Apr 23 14:41:21 2007 -0700

    8250: fix possible deadlock between serial8250_handle_port() and serial8250_interrupt()
    
    Commit 40b36daa introduced possibility that serial8250_backup_timeout() ->
    serial8250_handle_port() locks port.lock without disabling irqs, thus
    allowing deadlock against interrupt handler (port.lock is acquired in
    serial8250_interrupt()).
    
    Spotted by lockdep.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c5408b88ecb8b7127334a34c55d4e0174434f4ec
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Mon Apr 23 14:41:20 2007 -0700

    fault injection: add entry to MAINTAINERS
    
    Add maintainer for fault injection support.
    
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 98f85d30ced96ac466f30419de8b3fac341ebe75
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Apr 23 14:41:20 2007 -0700

    Char: icom, mark __init as __devinit
    
    Two functions are called from __devinit context, but they are marked as
    __init. Fix this.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9b7f375505f5611efb562065b57814b28a81abc3
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Apr 23 14:41:17 2007 -0700

    reiserfs: fix xattr root locking/refcount bug
    
    The listxattr() and getxattr() operations are only protected by a read
    lock.  As a result, if either of these operations run in parallel, a race
    condition exists where the xattr_root will end up being cached twice, which
    results in the leaking of a reference and a BUG() on umount.
    
    This patch refactors get_xa_root(), __get_xa_root(), and create_xa_root(),
    into one get_xa_root() function that takes the appropriate locking around
    the entire critical section.
    
    Reported, diagnosed and tested by Andrea Righi <a.righi@cineca.it>
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Cc: Andrea Righi <a.righi@cineca.it>
    Cc: Vladimir V. Saveliev <vs@namesys.com>
    Cc: Edward Shishkin <edward@namesys.com>
    Cc: Alex Zarochentsev <zam@namesys.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1a641fceb6bb6b0930db1aadbda1aaf5711d65d6
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Apr 23 14:41:16 2007 -0700

    hwmon/w83627ehf: Don't redefine REGION_OFFSET
    
    On ia64, kernel headers define REGION_OFFSET so we can't use that.
    Reported by Andrew Morton.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: David Hubbard <david.c.hubbard@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 179fb0c726fa34a1ecbb9385a01c704babb9c0ab
Author: Olaf Hering <olaf@aepfle.de>
Date:   Mon Apr 23 14:41:15 2007 -0700

    do not truncate irq number for icom adapter
    
    irq values are u32, not u8. Large irq numbers will be truncated,
    free_irq may free a different irq.
    
    Remove incorrectly sized struct member and use the one from pci_dev.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 91fcd412e957f433e9f1abeb0b1926dbeb66ca80
Author: Bastian Blank <bastian@waldi.eu.org>
Date:   Mon Apr 23 14:41:14 2007 -0700

    Allow reading tainted flag as user
    
    The commit 34f5a39899f3f3e815da64f48ddb72942d86c366 restricted reading
    of the tainted value. The attached patch changes this back to a
    write-only check and restores the read behaviour of older versions.
    
    Signed-off-by: Bastian Blank <bastian@waldi.eu.org>
    Cc: Theodore Ts'o <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 94e22e13ad063c614b458a019b428ffc118e5c06
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Apr 23 14:41:13 2007 -0700

    acpi-thermal: fix mod_timer() interval
    
    Use relative time, not absolute.  Discovered by Jung-Ik (John) Lee
    <jilee@google.com>.
    
    Cc: Jung-Ik (John) Lee <jilee@google.com>
    Acked-by: Len Brown <lenb@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c959df9f01cfb2f43b4d1f58631ee1e9c50541b6
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Mon Apr 23 14:41:11 2007 -0700

    v9fs: don't use primary fid when removing file
    
    v9fs_insert uses v9fs_fid_lookup (which also locks the fid) to get the
    primary fid associated with the dentry and destroys the v9fs_fid struct
    after removing the file.  If another process called v9fs_fid_lookup on the
    same dentry, it may wait undefinitely for the fid's lock (as the struct is
    freed).
    
    This patch changes v9fs_remove to use a cloned fid, so the primary fid is
    not locked and freed.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@hera.kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f51a5a9de86a948b9a30daab90fb003f51446dcd
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Mon Apr 23 14:41:10 2007 -0700

    ieee1394: update MAINTAINERS database
    
      - update Ben's address
      - replace Ben's contact by mine as raw1394's 2nd contact
      - eth1394's and pcilynx's maintenance doesn't really differ from that
        of other parts of the stack like video1394
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Acked-by: Ben Collins <ben.collins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0e8c7d0fd5b4999675c7d5cd95d0eb7106b756b3
Author: Christoph Lameter <clameter@sgi.com>
Date:   Mon Apr 23 14:41:09 2007 -0700

    page migration: fix NR_FILE_PAGES accounting
    
    NR_FILE_PAGES must be accounted for depending on the zone that the page
    belongs to.  If we replace the page in the radix tree then we may have to
    shift the count to another zone.
    
    Suggested-by: Ethan Solomita <solo@google.com>
    Eventually-typed-in-by: Christoph Lameter <clameter@sgi.com>
    Cc: Martin Bligh <mbligh@mbligh.org>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 10ccaf4b7121fb839442be7e079baa8fd0b28caf
Author: Miguel Ojeda <maxextreme@gmail.com>
Date:   Mon Apr 23 14:41:09 2007 -0700

    Fix spelling in drivers/video/Kconfig
    
    Signed-off-by: Miguel Ojeda Sandonis <maxextreme@gmail.com>
    Cc: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 39a3bfdd3779636018ca0e2b8fe0a32378eed67b
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Apr 23 14:41:08 2007 -0700

    Add mbuesch to .mailmap
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 671d40f4aa20d31121695e33393c9bd87053f4fa
Author: Alexey Dobriyan <adobriyan@sw.ru>
Date:   Mon Apr 23 14:41:07 2007 -0700

    paride drivers: initialize spinlocks
    
    pcd_lock and pf_spin_lock are passed to blk_init_queue() which, seeing them
    as valid lock pointer, sets it as ->queue_lock.
    
    The problem is that pcd_lock and pf_spin_lock aren't initialized anywhere.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@sw.ru>
    Cc: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f318a63ba018d1f30521b733e86fc2d0207e496b
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Apr 23 14:41:06 2007 -0700

    MAINTAINERS: use lists.linux-foundation.org
    
    Update various mailing list addresses to use "lists.linux-foundation.org"
    instead of "lists.osdl.org", to help phase out the old addresses.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7e40f2ab0a7e36706ee78b78b3792f08f208cd44
Author: Balbir Singh <balbir@in.ibm.com>
Date:   Mon Apr 23 14:41:05 2007 -0700

    Taskstats fix the structure members alignment issue
    
    We broke the the alignment of members of taskstats to the 8 byte boundary
    with the CSA patches.  In the current kernel, the taskstats structure is
    not suitable for use by 32 bit applications in a 64 bit kernel.
    
    On x86_64
    
    Offsets of taskstats' members (64 bit kernel, 64 bit application)
    
    @taskstats'offsetof[@taskstats'indices] = (
            0,      # version
            4,      # ac_exitcode
            8,      # ac_flag
            9,      # ac_nice
            16,     # cpu_count
            24,     # cpu_delay_total
            32,     # blkio_count
            40,     # blkio_delay_total
            48,     # swapin_count
            56,     # swapin_delay_total
            64,     # cpu_run_real_total
            72,     # cpu_run_virtual_total
            80,     # ac_comm
            112,    # ac_sched
            113,    # ac_pad
            116,    # ac_uid
            120,    # ac_gid
            124,    # ac_pid
            128,    # ac_ppid
            132,    # ac_btime
            136,    # ac_etime
            144,    # ac_utime
            152,    # ac_stime
            160,    # ac_minflt
            168,    # ac_majflt
            176,    # coremem
            184,    # virtmem
            192,    # hiwater_rss
            200,    # hiwater_vm
            208,    # read_char
            216,    # write_char
            224,    # read_syscalls
            232,    # write_syscalls
            240,    # read_bytes
            248,    # write_bytes
            256,    # cancelled_write_bytes
        );
    
    Offsets of taskstats' members (64 bit kernel, 32 bit application)
    
    @taskstats'offsetof[@taskstats'indices] = (
            0,      # version
            4,      # ac_exitcode
            8,      # ac_flag
            9,      # ac_nice
            12,     # cpu_count
            20,     # cpu_delay_total
            28,     # blkio_count
            36,     # blkio_delay_total
            44,     # swapin_count
            52,     # swapin_delay_total
            60,     # cpu_run_real_total
            68,     # cpu_run_virtual_total
            76,     # ac_comm
            108,    # ac_sched
            109,    # ac_pad
            112,    # ac_uid
            116,    # ac_gid
            120,    # ac_pid
            124,    # ac_ppid
            128,    # ac_btime
            132,    # ac_etime
            140,    # ac_utime
            148,    # ac_stime
            156,    # ac_minflt
            164,    # ac_majflt
            172,    # coremem
            180,    # virtmem
            188,    # hiwater_rss
            196,    # hiwater_vm
            204,    # read_char
            212,    # write_char
            220,    # read_syscalls
            228,    # write_syscalls
            236,    # read_bytes
            244,    # write_bytes
            252,    # cancelled_write_bytes
        );
    
    This is one way to solve the problem without re-arranging structure members
    is to pack the structure.  The patch adds an __attribute__((aligned(8))) to
    the taskstats structure members so that 32 bit applications using taskstats
    can work with a 64 bit kernel.
    
    Using __attribute__((packed)) would break the 64 bit alignment of members.
    
    The fix was tested on x86_64. After the fix, we got
    
    Offsets of taskstats' members (64 bit kernel, 64 bit application)
    
    @taskstats'offsetof[@taskstats'indices] = (
            0,      # version
            4,      # ac_exitcode
            8,      # ac_flag
            9,      # ac_nice
            16,     # cpu_count
            24,     # cpu_delay_total
            32,     # blkio_count
            40,     # blkio_delay_total
            48,     # swapin_count
            56,     # swapin_delay_total
            64,     # cpu_run_real_total
            72,     # cpu_run_virtual_total
            80,     # ac_comm
            112,    # ac_sched
            113,    # ac_pad
            120,    # ac_uid
            124,    # ac_gid
            128,    # ac_pid
            132,    # ac_ppid
            136,    # ac_btime
            144,    # ac_etime
            152,    # ac_utime
            160,    # ac_stime
            168,    # ac_minflt
            176,    # ac_majflt
            184,    # coremem
            192,    # virtmem
            200,    # hiwater_rss
            208,    # hiwater_vm
            216,    # read_char
            224,    # write_char
            232,    # read_syscalls
            240,    # write_syscalls
            248,    # read_bytes
            256,    # write_bytes
            264,    # cancelled_write_bytes
        );
    
    Offsets of taskstats' members (64 bit kernel, 32 bit application)
    
    @taskstats'offsetof[@taskstats'indices] = (
            0,      # version
            4,      # ac_exitcode
            8,      # ac_flag
            9,      # ac_nice
            16,     # cpu_count
            24,     # cpu_delay_total
            32,     # blkio_count
            40,     # blkio_delay_total
            48,     # swapin_count
            56,     # swapin_delay_total
            64,     # cpu_run_real_total
            72,     # cpu_run_virtual_total
            80,     # ac_comm
            112,    # ac_sched
            113,    # ac_pad
            120,    # ac_uid
            124,    # ac_gid
            128,    # ac_pid
            132,    # ac_ppid
            136,    # ac_btime
            144,    # ac_etime
            152,    # ac_utime
            160,    # ac_stime
            168,    # ac_minflt
            176,    # ac_majflt
            184,    # coremem
            192,    # virtmem
            200,    # hiwater_rss
            208,    # hiwater_vm
            216,    # read_char
            224,    # write_char
            232,    # read_syscalls
            240,    # write_syscalls
            248,    # read_bytes
            256,    # write_bytes
            264,    # cancelled_write_bytes
        );
    
    Signed-off-by: Balbir Singh <balbir@linux.vnet.ibm.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Cc: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fc83815c3afe1bd8d0f0961a668a96caabb049be
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Apr 23 14:41:04 2007 -0700

    Char: mxser, fix TIOCMIWAIT
    
    There was schedule() missing in the TIOCMIWAIT ioctl. Solve it by moving
    the code to the wait_event_interruptible.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Jan Yenya Kasprzak <kas@fi.muni.cz>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b446a4a5757fe1287bf3472efcdde6b59dfd63ad
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Apr 23 14:41:03 2007 -0700

    Char: mxser_new, fix TIOCMIWAIT
    
    There was schedule() missing in the TIOCMIWAIT ioctl.  Solve it by moving
    the code to the wait_event_interruptible.
    
    Cc: Jan Yenya Kasprzak <kas@fi.muni.cz>
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 67d2bc58afdd5168dce54ae06f5f30038c59f498
Author: Jan Yenya Kasprzak <kas@fi.muni.cz>
Date:   Mon Apr 23 14:41:02 2007 -0700

    Char: mxser_new, fix recursive locking
    
    Signed-off-by: Jan Yenya Kasprzak <kas@fi.muni.cz>
    Acked-by: Jiri Slaby <jirislaby@gmail.com>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3d124cbba316737af8f3a6959edb95bbd130a4d8
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon Apr 23 14:41:02 2007 -0700

    fix OOM killing processes wrongly thought MPOL_BIND
    
    I only have CONFIG_NUMA=y for build testing: surprised when trying a memhog
    to see lots of other processes killed with "No available memory
    (MPOL_BIND)".  memhog is killed correctly once we initialize nodemask in
    constrained_alloc().
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Acked-by: Christoph Lameter <clameter@sgi.com>
    Acked-by: William Lee Irwin III <bill.irwin@oracle.com>
    Acked-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fdc30b3d448bf86dd45f9df3e8ac0d36a3bdd9b2
Author: Taku Izumi <izumi2005@soft.fujitsu.com>
Date:   Mon Apr 23 14:41:00 2007 -0700

    Fix possible NULL pointer access in 8250 serial driver
    
    I encountered the following kernel panic.  The cause of this problem was
    NULL pointer access in check_modem_status() in 8250.c.  I confirmed this
    problem is fixed by the attached patch, but I don't know this is the
    correct fix.
    
    sadc[4378]: NaT consumption 2216203124768 [1]
    Modules linked in: binfmt_misc dm_mirror dm_mod thermal processor fan
    container button sg e100 eepro100 mii ehci_hcd ohci_hcd
    
        Pid: 4378, CPU 0, comm: sadc
        psr : 00001210085a2010 ifs : 8000000000000289 ip : [<a000000100482071>]
        Not tainted
        ip is at check_modem_status+0xf1/0x360
    
        Call Trace:
        [<a000000100013940>] show_stack+0x40/0xa0
        [<a0000001000145a0>] show_regs+0x840/0x880
        [<a0000001000368e0>] die+0x1c0/0x2c0
        [<a000000100036a30>] die_if_kernel+0x50/0x80
        [<a000000100037c40>] ia64_fault+0x11e0/0x1300
        [<a00000010000bdc0>] ia64_leave_kernel+0x0/0x280
        [<a000000100482070>] check_modem_status+0xf0/0x360
        [<a000000100482300>] serial8250_get_mctrl+0x20/0xa0
        [<a000000100478170>] uart_read_proc+0x250/0x860
        [<a0000001001c16d0>] proc_file_read+0x1d0/0x4c0
        [<a0000001001394b0>] vfs_read+0x1b0/0x300
        [<a000000100139cd0>] sys_read+0x70/0xe0
        [<a00000010000bc20>] ia64_ret_from_syscall+0x0/0x20
        [<a000000000010620>] __kernel_syscall_via_break+0x0/0x20
    
    Fix the possible NULL pointer access in check_modem_status() in 8250.c.  The
    check_modem_status() would access 'info' member of uart_port structure, but it
    is not initialized before uart_open() is called.  The check_modem_status() can
    be called through /proc/tty/driver/serial before uart_open() is called.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Taku Izumi <izumi2005@soft.fujitsu.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 650a7c974f1b91de9732c0f720e792837f8abfd6
Author: David Rientjes <rientjes@google.com>
Date:   Mon Apr 23 21:36:13 2007 -0700

    oom: kill all threads that share mm with killed task
    
    oom_kill_task() calls __oom_kill_task() to OOM kill a selected task.
    When finding other threads that share an mm with that task, we need to
    kill those individual threads and not the same one.
    
    (Bug introduced by f2a2a7108aa0039ba7a5fe7a0d2ecef2219a7584)
    
    Acked-by: William Lee Irwin III <bill.irwin@oracle.com>
    Acked-by: Christoph Lameter <clameter@engr.sgi.com>
    Cc: Nick Piggin <npiggin@suse.de>
    Cc: Andrew Morton <akpm@osdl.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: David Rientjes <rientjes@google.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8689b517be3e3f65f8ba20490beccca13c5879fa
Author: Andi Kleen <ak@suse.de>
Date:   Tue Apr 24 13:05:37 2007 +0200

    [PATCH] i386: Fix some warnings added by earlier patch
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 90767bd13febfdf8a5f5077e2bb975f79d6b919c
Author: Andi Kleen <ak@suse.de>
Date:   Tue Apr 24 13:05:37 2007 +0200

    [PATCH] x86-64: Always flush all pages in change_page_attr
    
    change_page_attr on x86-64 only flushed the TLB for pages that got
    reverted. That's not correct: it has to be flushed in all cases.
    
    This bug was added in some earlier changes.
    
    Just flush all pages for now.
    
    This could be done more efficiently, but for this late in the release
    this seem to be the best fix.
    
    Pointed out by Jan Beulich
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 9ce883becb83190061369940de9c415595836c9b
Author: Andi Kleen <ak@suse.de>
Date:   Tue Apr 24 13:05:37 2007 +0200

    [PATCH] x86: Remove noreplacement option
    
    noreplacement is dangerous on modern systems because it will not replace the
    context switch FNSAVE with SSE aware FXSAVE. But other places in the kernel still assume
    SSE and do FXSAVE and the CPU will then access FXSAVE information with
    FNSAVE and cause corruption.
    
    Easiest way to avoid this is to remove the option. It was mostly for paranoia
    reasons anyways and alternative()s have been stable for some time.
    
    Thanks to Jeremy F. for reporting and helping debug it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit cf6387daf8858bdcb3e123034ca422e8979d73f1
Author: Joachim Deguara <joachim.deguara@amd.com>
Date:   Tue Apr 24 13:05:36 2007 +0200

    [PATCH] x86-64: make GART PTEs uncacheable
    
    This patches fixes the silent data corruption problems being seen using the
    GART iommu where 4kB of data where incorrect (seen mostly on Nvidia CK804
    systems).  This fix, to mark the memory regin the GART PTEs reside on as
    uncacheable, also brings the code in line with the AGP specification.
    
    Signed-off-by: Joachim Deguara <joachim.deguara@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 5a68b2e346f043820e2ba0cde57cc75b4561c124
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Apr 23 23:33:17 2007 -0700

    [PARPORT] SUNBPP: Fix OOPS when debugging is enabled.
    
    The debugging code would dereference __iomem pointers instead
    of going through sbus_{read,write}{b,w,l}().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7e9f33461521180ef2c148c0b77eeb412d18ffae
Author: Alan Cox <alan@redhat.com>
Date:   Mon Apr 23 22:50:53 2007 -0700

    [SPARC] openprom: Switch to ref counting PCI API
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 05d224468a273a9ee773a0e9d34227ee7f2c0840
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Apr 23 22:39:02 2007 -0700

    [XFRM]: beet: fix pseudo header length value
    
    draft-nikander-esp-beet-mode-07.txt is not entirely clear on how the length
    value of the pseudo header should be calculated, it states "The Header Length
    field contains the length of the pseudo header, IPv4 options, and padding in
    8 octets units.", but also states "Length in octets (Header Len + 1) * 8".
    draft-nikander-esp-beet-mode-08-pre1.txt [1] clarifies this, the header length
    should not include the first 8 byte.
    
    This change affects backwards compatibility, but option encapsulation didn't
    work until very recently anyway.
    
    [1] http://users.piuha.net/jmelen/BEET/draft-nikander-esp-beet-mode-08-pre1.txt
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4d4d3d1e8807d6aa9822eeedf7fe8500e1b7e38d
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon Apr 23 22:32:11 2007 -0700

    [TCP]: Congestion control initialization.
    
    Change to defer congestion control initialization.
    
    If setsockopt() was used to change TCP_CONGESTION before
    connection is established, then protocols that use sequence numbers
    to keep track of one RTT interval (vegas, illinois, ...) get confused.
    
    Change the init hook to be called after handshake.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 01abc2aa0f447bce2f6beb06dd0607ba0f01c5bb
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Mon Apr 23 23:19:36 2007 +0200

    Revert "adjust legacy IDE resource setting (v2)"
    
    This reverts commit ed8ccee0918ad063a4741c0656fda783e02df627.
    
    It causes hang on boot for some users and we don't yet know why:
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7562
    
    http://lkml.org/lkml/2007/4/20/404
    http://lkml.org/lkml/2007/3/25/113
    
    Just reverse it for 2.6.21-final, having broken X server is somehow
    better than unbootable system.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit c445a31cd7f469d77acc37538ab43a99530968b8
Author: S.Caglar Onur <caglar@pardus.org.tr>
Date:   Sun Apr 22 00:52:48 2007 +0300

    Add missing USRobotics Wireless Adapter (Model 5423) id into zd1211rw
    
    USRobotics Wireless Adapter (Model 5423) works well with current
    zd1211rw driver also (i have tested 2.6.18, 2.6.20 and 2.6.21-rc7).
    
    It just needs its ID added to the list of devices.
    
    Signed-off-by: S.Caglar Onur <caglar@pardus.org.tr>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 66c7d2f1d9cb19e46717b26fb49550b5e82985fe
Merge: 36e82df... c3b99f0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 23 11:13:19 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SUNHME]: Fix module unload.
      [SUNLANCE]: Fix module unload.
      [SUNQE]: Fix MAC address assignment.
      [SBUS] vfc_dev.c: kzalloc

commit 36e82dfda526e2dea26060e8766bda5a8110c4e6
Merge: 0f85102... 7c5050e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 23 11:13:00 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [PPP]: Fix skbuff.c:BUG due incorrect logic in process_input_packet()

commit c3b99f0db9b2ef4292ef774bae1ea0d6f1e8d82a
Author: Marcel van Nies <morcles@gmail.com>
Date:   Sat Apr 21 15:34:55 2007 -0700

    [SUNHME]: Fix module unload.
    
    Signed-off-by: Marcel van Nies <morcles@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9f9b6693ed8254177bafcb823b0ea3659d61adb0
Author: Marcel van Nies <morcles@gmail.com>
Date:   Sat Apr 21 15:34:10 2007 -0700

    [SUNLANCE]: Fix module unload.
    
    Signed-off-by: Marcel van Nies <morcles@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d0dc1129c2e5a5a0e53940cad44333e6bd2f9af3
Author: Marcel van Nies <morcles@gmail.com>
Date:   Sat Apr 21 15:31:58 2007 -0700

    [SUNQE]: Fix MAC address assignment.
    
    The MAC address assignment at module loading is simply forgotten.
    The bug at module unloading is caused by an incorrect call.
    
    The bug at module unloading does not only happen for sunqe,
    sunlance and sunhme (sbus) suffer from it too.
    
    I've tested this on my SS20.
    
    Signed-off-by: Marcel van Nies <morcles@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2e6679a0aa352e6b74f6385c49cd4dca3dc7201f
Author: Vignesh Babu <vignesh.babu@wipro.com>
Date:   Tue Apr 17 12:42:09 2007 -0700

    [SBUS] vfc_dev.c: kzalloc
    
    Replacing kmalloc/memset combination with kzalloc.
    
    Signed-off-by: Vignesh Babu <vignesh.babu@wipro.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f851021c0f91e5073fa89f26b5ac68e23df8e11
Merge: ea8df8c... 8929fea...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Apr 20 22:58:16 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6:
      ide/Kconfig: add missing range check for IDE_MAX_HWIFS
      hpt366: fix kernel oops with HPT302N
      ide/pci/delkin_cb.c: add new PCI ID

commit ea8df8c5e609a53f4d03d133baea9561412f4303
Merge: 241c39b... 1d464c2...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Apr 20 22:57:51 2007 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Fix wrong checksum for split TCP packets on 64-bit MIPS
      [MIPS] Fix BUG(), BUG_ON() handling
      [MIPS] Retry {save,restore}_fp_context if failed in atomic context.
      [MIPS] Disallow CpU exception in kernel again.
      [MIPS] Add missing silicon revisions for BCM112x

commit 241c39b9ac4bf847013aa06cce6d4d61426a2006
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Apr 20 16:12:55 2007 -0400

    RPC: Fix the TCP resend semantics for NFSv4
    
    Fix a regression due to the patch "NFS: disconnect before retrying NFSv4
    requests over TCP"
    
    The assumption made in xprt_transmit() that the condition
    	"req->rq_bytes_sent == 0 and request is on the receive list"
    should imply that we're dealing with a retransmission is false.
    Firstly, it may simply happen that the socket send queue was full
    at the time the request was initially sent through xprt_transmit().
    Secondly, doing this for each request that was retransmitted implies
    that we disconnect and reconnect for _every_ request that happened to
    be retransmitted irrespective of whether or not a disconnection has
    already occurred.
    
    Fix is to move this logic into the call_status request timeout handler.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2b82f190c81bf1524447c021df4e9ce8ef379bd5
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Apr 20 16:12:50 2007 -0400

    NFS: Fix race in nfs_set_page_dirty
    
    Protect nfs_set_page_dirty() against races with nfs_inode_add_request.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 612c9384fd0486686699f7d49b774f0c7a79c511
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Apr 20 16:12:45 2007 -0400

    NFS: Fix the 'desynchronized value of nfs_i.ncommit' error
    
    Redirtying a request that is already marked for commit will screw up the
    accounting for NR_UNSTABLE_NFS as well as nfs_i.ncommit.
    Ensure that all requests on the commit queue are labelled with the
    PG_NEED_COMMIT flag, and avoid moving them onto the dirty list inside
    nfs_page_mark_flush().
    
    Also inline nfs_mark_request_dirty() into nfs_page_mark_flush() for
    atomicity reasons. Avoid dropping the spinlock until we're done marking the
    request in the radix tree and have added it to the ->dirty list.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6d677e3504cd173b2ff7fc393ee4241b3c0f92a6
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Apr 20 16:12:40 2007 -0400

    NFS: Don't clear PG_writeback until after we've processed unstable writes
    
    Ensure that we don't release the PG_writeback lock until after the page has
    either been redirtied, or queued on the nfs_inode 'commit' list.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8e821cad12e80cd1a8a3fbadf91f62f17f32549e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Apr 20 16:12:34 2007 -0400

    NFS: clean up the unstable write code
    
    Get rid of the inlined #ifdefs.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7ab77e03c1f665d5dee78f1248fffd11fa0c5154
Author: Dave Jones <davej@redhat.com>
Date:   Fri Apr 20 15:58:00 2007 -0400

    Longhaul - Revert ACPI C3 on Longhaul ver. 2
    
    Support for Longhaul ver.  2 broke driver for VIA C3 Eden 600MHz with
    Samuel 2 core.  Processor is not able to switch frequency anymore.  I
    don't know much about this issue at the moment, but until (if ever) I
    will know why, this part should be reversed.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a993800655ee516b6f6a6fc4c2ee13fedfb0590b
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Apr 20 08:55:52 2007 +0200

    cfq-iosched: fix sequential write regression
    
    We have a 10-15% performance regression for sequential writes on TCQ/NCQ
    enabled drives in 2.6.21-rcX after the CFQ update went in.  It has been
    reported by Valerie Clement <valerie.clement@bull.net> and the Intel
    testing folks.  The regression is because of CFQ's now more aggressive
    queue control, limiting the depth available to the device.
    
    This patches fixes that regression by allowing a greater depth when only
    one queue is busy.  It has been tested to not impact sync-vs-async
    workloads too much - we still do a lot better than 2.6.20.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8929fea39cb0ab3e455fe00e7eb6806c32155cd2
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Fri Apr 20 22:16:58 2007 +0200

    ide/Kconfig: add missing range check for IDE_MAX_HWIFS
    
    ide_hwif_to_major[] has only 10 entries as there are 10 major numbers
    reserved for IDE (if somebody needs more it shouldn't be hard to fix).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 38b66f8444050c7cdfad759b8b556338e1fcb4da
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Fri Apr 20 22:16:58 2007 +0200

    hpt366: fix kernel oops with HPT302N
    
    The driver crashes the kernel on HPT302N chips due to the missing initializer
    for 'hpt302n.settings' having been unfortunately overlooked so far. :-<
    
    Much thanks to Mike Mattie for pin-pointing the reason of crash.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 2571b16dde15dacf0e338cc5fe8fb3142122eb5a
Author: Mark Lord <mlord@pobox.com>
Date:   Fri Apr 20 22:16:58 2007 +0200

    ide/pci/delkin_cb.c: add new PCI ID
    
    Add PCI ID for a newer variant of cardbus CF/IDE adapter card.
    
    Signed-off-by: Mark Lord <mlord@pobox.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 1d464c26b5625215c4b35fb336c8f3c57d248c2e
Author: Dave Johnson <djohnson+linux-mips@sw.starentnetworks.com>
Date:   Wed Apr 18 10:39:41 2007 -0400

    [MIPS] Fix wrong checksum for split TCP packets on 64-bit MIPS
    
    I've traced down an off-by-one TCP checksum calculation error under
    the following conditions:
    
    1) The TCP code needs to split a full-sized packet due to a reduced
       MSS (typically due to the addition of TCP options mid-stream like
       SACK).
       _AND_
    2) The checksum of the 2nd fragment is larger than the checksum of the
       original packet.  After subtraction this results in a checksum for
       the 1st fragment with bits 16..31 set to 1. (this is ok)
       _AND_
    3) The checksum of the 1st fragment's TCP header plus the previously
       32bit checksum of the 1st fragment DOES NOT cause a 32bit overflow
       when added together.  This results in a checksum of the TCP header
       plus TCP data that still has the upper 16 bits as 1's.
       _THEN_
    4) The TCP+data checksum is added to the checksum of the pseudo IP
       header with csum_tcpudp_nofold() incorrectly (the bug).
    
    The problem is the checksum of the TCP+data is passed to
    csum_tcpudp_nofold() as an 32bit unsigned value, however the assembly
    code acts on it as if it is a 64bit unsigned value.
    
    This causes an incorrect 32->64bit extension if the sum has bit 31
    set.  The resulting checksum is off by one.
    
    This problems is data and TCP header dependent due to #2 and #3
    above so it doesn't occur on every TCP packet split.
    
    Signed-off-by: Dave Johnson <djohnson+linux-mips@sw.starentnetworks.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ba755f8ec80fdbf2b5212622eabf7355464c6327
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Apr 12 20:02:54 2007 +0900

    [MIPS] Fix BUG(), BUG_ON() handling
    
    With commit 63dc68a8cf60cb110b147dab1704d990808b39e2, kernel can not
    handle BUG() and BUG_ON() properly since get_user() returns false for
    kernel code.  Use __get_user() to skip unnecessary access_ok().  This
    patch also make BRK_BUG code encoded in the TNE instruction.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit faea62346444ce5b1dba8fb5291d95b676522c42
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Apr 16 23:19:44 2007 +0900

    [MIPS] Retry {save,restore}_fp_context if failed in atomic context.
    
    The save_fp_context()/restore_fp_context() might sleep on accessing
    user stack and therefore might lose FPU ownership in middle of them.
    
    If these function failed due to "in_atomic" test in do_page_fault,
    touch the sigcontext area in non-atomic context and retry these
    save/restore operation.
    
    This is a replacement of a (broken) fix which was titled "Allow CpU
    exception in kernel partially".
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5323180db75d562a287cb2020b07c9422df13df6
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sat Apr 14 02:37:26 2007 +0900

    [MIPS] Disallow CpU exception in kernel again.
    
    The commit 4d40bff7110e9e1a97ff8c01bdd6350e9867cc10 ("Allow CpU
    exception in kernel partially") was broken.  The commit was to fix
    theoretical problem but broke usual case.  Revert it for now.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9a9943575ade643368849e2c963094ac637867e0
Author: Mark Mason <mmason@upwardaccess.com>
Date:   Fri Apr 13 10:32:25 2007 -0700

    [MIPS] Add missing silicon revisions for BCM112x
    
    Recent versions of the BCM112X processors aren't recognized by Linux
    (preventing Linux from booting on those processors).  This patch adds
    support for those that are missing.
    
    Signed-off-by: Mark Mason <mason@broadcom.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 46fcc86dd71d70211e965102fb69414c90381880
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Apr 19 18:21:01 2007 -0700

    Revert "e1000: fix NAPI performance on 4-port adapters"
    
    This reverts commit 60cba200f11b6f90f35634c5cd608773ae3721b7.  It's been
    linked to lockups of the e1000 hardware, see for example
    
    	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=229603
    
    but it's likely that the commit itself is not really introducing the
    bug, but just allowing an unrelated problem to rear its ugly head (ie
    one current working theory is that the code exposes us to a hardware
    race condition by decreasing the amount of time we spend in each NAPI
    poll cycle).
    
    We'll revert it until root cause is known.  Intel has a repeatable
    reproduction on two different machines and bus traces of the hardware
    doing something bad.
    
    Acked-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: David S. Miller <davem@davemloft.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Dave Jones <davej@redhat.com>
    Cc: Auke Kok <auke-jan.h.kok@intel.com>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2b858bd02ffca71391161f5709588fc70da79531
Merge: 93cd791... f3769e9...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Apr 19 17:25:28 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      pata_sis: Fix oops on boot

commit f3769e9db11df38c211881a5f11b2e38a8e4477a
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Thu Apr 19 11:09:52 2007 +0100

    pata_sis: Fix oops on boot
    
    A small number of SiS setups require special handling (not many judging
    by how long this dumb bug survived). A couple of Fedora 7 devel testers
    hit an Oops on pata_sis loading which is caused by terminal confusion
    between chipset as 'the chipset we have found' and chipset as 'array
    iterator'
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7c5050e3e49f6d89af0d63111611693d9625d1f5
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Apr 19 13:05:52 2007 -0700

    [PPP]: Fix skbuff.c:BUG due incorrect logic in process_input_packet()
    
    From: Paul Mackerras <paulus@samba.org>
    
    This fixes:
    
    Subject: kernel BUG at net/core/skbuff.c in linux-2.6.21-rc6
    
    process_input_packet() treats the case where the first byte is 0xff
    (PPP_ALLSTATIONS) but the second byte is 0x03 (PPP_UI) as indicating a
    packet with a PPP protocol number of 0xff.  Arguably that's wrong
    since PPP protocol 0xff is reserved, and the RFC does envision the
    possibility of receiving frames where the control field has values
    other than 0x03.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93cd791e02bbdb504aba024a14fdc07fe246bc71
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Apr 11 14:48:03 2007 -0700

    sky2: version 1.14
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2adf4f65a70f94cbb3bb4dffd4bbc70cc383071
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Apr 11 14:48:02 2007 -0700

    sky2: no jumbo on Yukon FE
    
    The Yukon FE (100mbit only) chips do not support large packets.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b628ed986d681c708aec64418c2c7f6a6b715855
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Apr 11 14:48:01 2007 -0700

    sky2: EC-U performance and jumbo support
    
    The Yukon EC Ultra chips have transmit settings for store and
    forward and PCI buffering. By setting these appropriately, normal
    performance goes from 750Mbytes/sec to 940Mbytes/sec (non-jumbo).
    
    It is also possible to do Jumbo mode, but it means turning off
    TSO and checksum offload so the performance gets worse. There isn't
    enough buffering for checksum offload to work.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4f44d8ba09280a7f0887ab60277940d6c72f2b43
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Apr 11 14:48:00 2007 -0700

    sky2: disable ASF on all chip types
    
    Need to make sure and disable ASF on all chip types. Otherwise, there may be
    random reboots.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 40b01727a5a65597160f1738d3fbe63de902f0cb
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Apr 11 14:47:59 2007 -0700

    sky2: handle descriptor errors
    
    There should never be descriptor error unless hardware or driver is buggy.
    But if an error occurs, print useful information, clear irq, and recover.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0a17e4c252ce951615f3c1fccae6d6262c8d4187
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Apr 11 14:47:58 2007 -0700

    sky2: disable support for 88E8056
    
    This device is having all sorts of problems that lead to data corruption
    and system instability.  It gets receive status and data out of order,
    it generates descriptor and TSO errors, etc.
    
    Until the problems are resolved, it should not be used by anyone
    who cares about there system.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bf41a7c5d94a3d197002bdf11892529b47a63e99
Author: Dave Jiang <djiang@mvista.com>
Date:   Thu Apr 12 10:57:06 2007 -0700

    gianfar needs crc32 lib dependency
    
    Gianfar needs crc32 to be selected to compile.
    
    Signed-off-by: Dave Jiang <djiang@mvista.com>
    
    --
     drivers/net/Kconfig |    1 +
     1 files changed, 1 insertions(+), 0 deletions(-)
    --
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 33bdeec80649f2eab36039f63d69c65378493cbe
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Mon Apr 16 22:54:13 2007 -0700

    spidernet: Fix problem sending IP fragments
    
    The basic structure of "normal" UDP/IP/Ethernet
    frames (that actually work):
     - It starts with the Ethernet header (dest MAC, src MAC, etc.)
     - The next part is occupied by the IP header (version info, length of
    packet, id=0, fragment offset=0, checksum, from / to address, etc.)
     - Then comes the UDP header (src / dest port, length, checksum)
     - Actual payload
     - Ethernet checksum
    
    Now what's different for IP fragment:
     - The IP header has id set to some value (same for all fragments),
    offset is set appropriately (i.e. 0 for first fragment, following
    according to size of other fragments), size is the length of the frame.
     - UDP header is unchanged. I.e. length is according to full UDP
    datagram, not just the part within the actual frame! But this is only
    true within the first frame: all following frames don't have a valid
    UDP-header at all.
    
    The spidernet silicon seems to be quite intelligent: It's able to
    compute (IP / UDP / Ethernet) checksums on the fly and tests if frames
    are conforming to RFC -- at least conforming to RFC on complete frames.
    
    But IP fragments are different as explained above:
    I.e. for IP fragments containing part of a UDP datagram it sees
    incompatible length in the headers for IP and UDP in the first frame
    and, thus, skips this frame. But the content *is* correct for IP
    fragments. For all following frames it finds (most probably) no valid
    UDP header at all. But this *is* also correct for IP fragments.
    
    The Linux IP-stack seems to be clever in this point. It expects the
    spidernet to calculate the checksum (since the module claims to be able
    to do so) and marks the skb's for "normal" frames accordingly
    (ip_summed set to CHECKSUM_HW).
    But for the IP fragments it does not expect the driver to be capable to
    handle the frames appropriately. Thus all checksums are allready
    computed. This is also flaged within the skb (ip_summed set to
    CHECKSUM_NONE).
    
    Unfortunately the spidernet driver ignores that hints. It tries to send
    the IP fragments of UDP datagrams as normal UDP/IP frames. Since they
    have different structure the silicon detects them the be not
    "well-formed" and skips them.
    
    The following one-liner against 2.6.21-rc2 changes this behavior. If the
    IP-stack claims to have done the checksumming, the driver should not
    try to checksum (and analyze) the frame but send it as is.
    
    Signed-off-by: Norbert Eicker <n.eicker@fz-juelich.de>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1ca03cbc2057f61390e8e8a3234dc0bb0a8fe57a
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Apr 17 11:06:36 2007 -0700

    cxgb3 - PHY interrupts and GPIO pins.
    
    Remove assumption that PHY interrupts use GPIOs 3 and 5.
    Deal with PHY interrupts connected to any GPIO pins.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 606fcd0b94f7531f52a9b07008a4461213cbcd27
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Apr 17 11:06:30 2007 -0700

    cxgb3 - Fix low memory conditions
    
    Reuse the incoming skb when a clientless abort req is recieved.
    
    The release of RDMA connections HW resources might be deferred in
    low memory situations.
    Ensure that no further activity is passed up to the RDMA driver
    for these connections.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 895e1fc7226e6732bc77138955b6c7dfa279f57a
Merge: ac57b3a... 6b8d0f9...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Apr 19 09:49:59 2007 -0700

    Merge branch 'linus' of git://git.kernel.org/pub/scm/linux/kernel/git/avi/kvm
    
    * 'linus' of git://git.kernel.org/pub/scm/linux/kernel/git/avi/kvm:
      KVM: Fix off-by-one when writing to a nonpae guest pde

commit 6b8d0f9b180cb93513bb65f705b299370f0357a1
Author: Avi Kivity <avi@qumranet.com>
Date:   Wed Apr 18 11:18:18 2007 +0300

    KVM: Fix off-by-one when writing to a nonpae guest pde
    
    Nonpae guest pdes are shadowed by two pae ptes, so we double the offset
    twice: once to account for the pte size difference, and once because we
    need to shadow pdes for a single guest pde.
    
    But when writing to the upper guest pde we also need to truncate the
    lower bits, otherwise the multiply shifts these bits into the pde index
    and causes an access to the wrong shadow pde.  If we're at the end of the
    page (accessing the very last guest pde) we can even overflow into the
    next host page and oops.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit ac57b3a9ce280763296f99e32187a0b4384d9389
Author: Denis Lunev <den@openvz.org>
Date:   Wed Apr 18 17:05:58 2007 -0700

    [NETLINK]: Don't attach callback to a going-away netlink socket
    
    There is a race between netlink_dump_start() and netlink_release()
    that can lead to the situation when a netlink socket with non-zero
    callback is freed.
    
    Here it is:
    
    CPU1:                           CPU2
    netlink_release():              netlink_dump_start():
    
                                    sk = netlink_lookup(); /* OK */
    
    netlink_remove();
    
    spin_lock(&nlk->cb_lock);
    if (nlk->cb) { /* false */
      ...
    }
    spin_unlock(&nlk->cb_lock);
    
                                    spin_lock(&nlk->cb_lock);
                                    if (nlk->cb) { /* false */
                                             ...
                                    }
                                    nlk->cb = cb;
                                    spin_unlock(&nlk->cb_lock);
                                    ...
    sock_orphan(sk);
    /*
     * proceed with releasing
     * the socket
     */
    
    The proposal it to make sock_orphan before detaching the callback
    in netlink_release() and to check for the sock to be SOCK_DEAD in
    netlink_dump_start() before setting a new callback.
    
    Signed-off-by: Denis Lunev <den@openvz.org>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: Pavel Emelianov <xemul@openvz.org>
    Acked-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bfb6709d0b239af5e3ce5859aae926e1b79ba84b
Author: Olaf Kirch <olaf.kirch@oracle.com>
Date:   Wed Apr 18 15:07:22 2007 -0700

    [IrDA]: Correctly handling socket error
    
    This patch fixes an oops first reported in mid 2006 - see
    http://lkml.org/lkml/2006/8/29/358 The cause of this bug report is that
    when an error is signalled on the socket, irda_recvmsg_stream returns
    without removing a local wait_queue variable from the socket's sk_sleep
    queue. This causes havoc further down the road.
    
    In response to this problem, a patch was made that invoked sock_orphan on
    the socket when receiving a disconnect indication. This is not a good fix,
    as this sets sk_sleep to NULL, causing applications sleeping in recvmsg
    (and other places) to oops.
    
    This is against the latest net-2.6 and should be considered for -stable
    inclusion.
    
    Signed-off-by: Olaf Kirch <olaf.kirch@oracle.com>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d0cf0d9940ef27b46fcbbd9e0cc8427c30fe05eb
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Wed Apr 18 14:11:06 2007 -0700

    [SCTP]: Do not interleave non-fragments when in partial delivery
    
    The way partial delivery is currently implemnted, it is possible to
    intereleave a message (either from another steram, or unordered) that
    is not part of partial delivery process.  The only way to this is for
    a message to not be a fragment and be 'in order' or unorderd for a
    given stream.  This will result in bypassing the reassembly/ordering
    queues where things live duing partial delivery, and the
    message will be delivered to the socket in the middle of partial delivery.
    
    This is a two-fold problem, in that:
    1.  the app now must check the stream-id and flags which it may not
    be doing.
    2.  this clearing partial delivery state from the association and results
    in ulp hanging.
    
    This patch is a band-aid over a much bigger problem in that we
    don't do stream interleave.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fefaa75e0451c76225863644be01e4fd70884153
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Apr 17 21:48:10 2007 -0700

    [IPSEC] af_key: Fix thinko in pfkey_xfrm_policy2msg()
    
    Make sure to actually assign the determined mode to
    rq->sadb_x_ipsecrequest_mode.
    
    Noticed by Joe Perches.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 80d74d5123bf3aecd32302809c4e61bb8a16786b
Merge: 245d95a... 19bb350...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 17 16:51:32 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [BRIDGE]: Unaligned access when comparing ethernet addresses
      [SCTP]: Unmap v4mapped addresses during SCTP_BINDX_REM_ADDR operation.
      [SCTP]: Fix assertion (!atomic_read(&sk->sk_rmem_alloc)) failed message
      [NET]: Set a separate lockdep class for neighbour table's proxy_queue
      [NET]: Fix UDP checksum issue in net poll mode.
      [KEY]: Fix conversion between IPSEC_MODE_xxx and XFRM_MODE_xxx.
      [NET]: Get rid of alloc_skb_from_cache

commit 245d95a423664761d9399656098523db6988e9cc
Merge: 71bfa15... 608d826...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 17 16:50:59 2007 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/mthca: Fix data corruption after FMR unmap on Sinai

commit 71bfa15142177279ec63c0e400314bb81f3d7122
Merge: 080dfbe... 1714f9b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 17 16:44:05 2007 -0700

    Merge branch 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6
    
    * 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6:
      [PATCH] x86: Fix potential overflow in perfctr reservation
      [PATCH] x86: Fix gcc 4.2 _proxy_pda workaround

commit 080dfbe176c8dd87fc8f27e2941f31171b738f60
Author: Olof Johansson <olof@lixom.net>
Date:   Tue Apr 17 00:32:29 2007 -0700

    Minor bug fixes to i2c-pasemi
    
    * Last write during i2c_xfer is of the wrong byte (off-by-1).
    * Read length is wrong for some of the reads (mistakenly used the PEC
      version)
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 56a3b5ebee0be7af723bfad56def48ebf899b7fb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 17 00:32:28 2007 -0700

    i2c-pasemi: Depend on PPC_PASEMI again
    
    Looks like a local change I made to be able to test-compile the i2c-pasemi
    driver leaked upstream.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 33725ad36d48c09e9537d3d7e680471c298539a9
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 17 00:32:27 2007 -0700

    hwmon/w83627ehf: Fix the fan5 clock divider write
    
    Users have been complaining about the w83627ehf driver flooding their logs
    with debug messages like:
    
    w83627ehf 9191-0a10: Increasing fan 4 clock divider from 64 to 128
    
    or:
    
    w83627ehf 9191-0290: Increasing fan 4 clock divider from 4 to 8
    
    The reason is that we failed to actually write the LSB of the encoded clock
    divider value for that fan, causing the next read to report the same old value
    again and again.
    
    Additionally, the fan number was improperly reported, making the bug harder to
    find.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 93da28790c17345f4db10358dfb19b4c241d8ba3
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Tue Apr 17 00:32:26 2007 -0700

    Provide dummy devm_ioport_* if !HAS_IOPORT
    
    Provide an dummy implementation of devm_ioport_map() and
    devm_ioport_unmap() to allow drivers (eg, pata_platform) to build for
    platforms where CONFIG_NO_IOPORT is selected.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 30f3deeee81cf22546da1b0b89a937bb991dea23
Author: Neil Brown <neilb@suse.de>
Date:   Mon Apr 16 22:53:25 2007 -0700

    knfsd: use a spinlock to protect sk_info_authunix
    
    sk_info_authunix is not being protected properly so the object that it
    points to can be cache_put twice, leading to corruption.
    
    We borrow svsk->sk_defer_lock to provide the protection.  We should
    probably rename that lock to have a more generic name - later.
    
    Thanks to Gabriel for reporting this.
    
    Cc: Greg Banks <gnb@melbourne.sgi.com>
    Cc: Gabriel Barazer <gabriel@oxeva.fr>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 94256dd680f837dc14dd7d1377c5326fb3362721
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Apr 16 22:53:25 2007 -0700

    drivers/macintosh/smu.c: fix locking snafu
    
    It got its lock and unlock backwards.
    
    Fixes http://bugzilla.kernel.org/show_bug.cgi?id=8334
    
    (obviously, this code could be using plain old spin_lock_irq(), too)
    
    Cc: <matthias.kaehlcke@gmail.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 07a0cfec30848319cc86f21cce0d2efeca593e1a
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Mon Apr 16 22:53:24 2007 -0700

    ufs proper handling of zero link case
    
    This patch should fix or partly fix this bug:
    http://bugzilla.kernel.org/show_bug.cgi?id=8276
    
    The problem is:
    
    - if we see "zero link case" during reading inode operation, we call
      ufs_error(which remount fs readonly), but not "mark" inode as bad (1)
    
    - in readonly case we do not fill some data structures, which are used in
      read and write case (2)
    
    - VFS call ufs_delete_inode if link count is zero (3)
    
    so (1)->(3)->(2) cause oops, this patch should fix such scenario
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Cc: Jim Paris <jim@jtan.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3d2c5b415ccd6c322e18adaed3a5b21f7ec555ef
Author: Ben Dooks <ben-linux-arm@fluff.org>
Date:   Mon Apr 16 22:53:22 2007 -0700

    spi: fix use of set_cs in spi_s3c24xx driver
    
    It turns out that the last patch to change set_cs to be kept in the
    controller's structure instead of the platform data was an incomplete
    change, and did not change the references to platfrom data in the setup
    xfer code.  (This can prevent an oops.)
    
    Reported-by: <Ling.Alex@iac.com.tw>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 88ed39b064575b4f42ecb737ec2daa66717de173
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Mon Apr 16 22:53:21 2007 -0700

    alpha: build fixes - force architecture
    
    Override compiler .arch directive for generic kernel build.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7fc1a1abc1eca1278d6d37ec54b72005d15b5c1e
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Mon Apr 16 22:53:21 2007 -0700

    alpha: more fixes for specific machine types
    
    arch/alpha/kernel/sys_sx164.c
    
    	Earlier firmware revisions need MVI fix as well.
    
    arch/alpha/kernel/sys_nautilus.c
    
    	On UP1500 firmware reports wrong AGP IRQ (10 instead of 5).
    	This causes interrupt storm if there is a PCI device that
    	uses IRQ 5.
    
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1b75b05b73cdefd1d10074e9dad60812f9731a5e
Author: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
Date:   Mon Apr 16 22:53:17 2007 -0700

    alpha: fixes for specific machine types
    
    Files:
    
    arch/alpha/kernel/core_mcpcia.c
    arch/alpha/kernel/sys_rawhide.c
    include/asm-alpha/core_mcpcia.h
    
    	Determine correct hose configuration; RAWHIDE family can have
            2 or 4 hoses, so make sure non-existent hoses are ignored.
    
    arch/alpha/kernel/err_titan.c
    
    	Supply a needed #include <asm/irq_regs.h>
    
    arch/alpha/kernel/module.c
    
    	Add some useful output to the relocation overflow messages.
    
    arch/alpha/kernel/sys_noritake.c
    
    	Supply necessary noritake_end_irq() to correct interrupt handling.
    	This fixes a problem first noted by hangs during boot probing with
    	a DE500-BA TULIP NIC present.
    
    arch/alpha/kernel/sys_sio.c
    
    	Correct saving of original PIRQ register (PCI IRQ routing);
    	change default PIRQ setting to leave PCI IRQs 9 and 14 free to
    	be used for sound (Multia) and IDE (any), respectively.
    
    include/asm-alpha/io.h
    
    	Supply the "isa_virt_to_bus" routine.
    
    Signed-off-by: Jay Estabrook <jay.estabrook@hp.com>
    Signed-off-by: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8a93258ce302c2b597289770cb7de8dba7c6c219
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Apr 16 22:53:16 2007 -0700

    fix bogon in /dev/mem mmap'ing on nommu
    
    While digging through my MAP_FIXED changes, I found that rather obvious
    bug in /dev/mem mmap implementation for nommu archs. get_unmapped_area()
    is expected to return an address, not a pfn.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-By: David Howells <dhowells@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 112654208bd6f092e064973b8fa680e37ffa74a6
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Mon Apr 16 22:53:15 2007 -0700

    kernel-doc: fix plist.h comments
    
    Make kernel-doc comments match macro names.
    Correct parameter names in a few places.
    Remove '#' from beginning of kernel-doc comment macro names.
    Remove extra (erroneous) blank lines in kernel-doc.
    
    Warning(plist.h:100): Cannot understand  * #PLIST_HEAD_INIT - static struct plist_head initializer on line 100 - I thought it was a doc line
    Warning(plist.h:112): Cannot understand  * #PLIST_NODE_INIT - static struct plist_node initializer on line 112 - I thought it was a doc line
    Warning(plist.h:103): No description found for parameter '_lock'
    Warning(plist.h:129): No description found for parameter 'lock'
    Warning(plist.h:158): No description found for parameter 'pos'
    Warning(plist.h:169): No description found for parameter 'pos'
    Warning(plist.h:169): No description found for parameter 'n'
    Warning(plist.h:179): No description found for parameter 'mem'
    
    This still leaves one warning & one error that need attention:
    Error(plist.h:219): cannot understand prototype: '('
    Warning(plist.h): no structured comments found
    
    Acked-by: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Cc: Daniel Walker <dwalker@mvista.com>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c4bbafda70a0fc95c6595bffd6825ef264050d01
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Apr 16 22:53:13 2007 -0700

    exec.c: fix coredump to pipe problem and obscure "security hole"
    
    The patch checks for "|" in the pattern not the output and doesn't nail a
    pid on to a piped name (as it is a program name not a file)
    
    Also fixes a very very obscure security corner case.  If you happen to have
    decided on a core pattern that starts with the program name then the user
    can run a program called "|myevilhack" as it stands.  I doubt anyone does
    this.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Confirmed-by: Christopher S. Aker <caker@theshore.net>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c4b7e8754e3198eb5392568e523da6440143c2cd
Author: Don Zickus <dzickus@redhat.com>
Date:   Mon Apr 16 22:53:12 2007 -0700

    allow vmsplice to work in 32-bit mode on ppc64
    
    Trivial change to pass vmsplice arguments through the compat layer on
    pp64.
    
    Signed-off-by: Don Zickus <dzickus@redhat.com>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 19bb3506e27096eea5f7b71b89621ad1203ed318
Author: Evgeny Kravtsunov <emkravts@openvz.org>
Date:   Tue Apr 17 12:31:24 2007 -0700

    [BRIDGE]: Unaligned access when comparing ethernet addresses
    
    compare_ether_addr() implicitly requires that the addresses
    passed are 2-bytes aligned in memory.
    
    This is not true for br_stp_change_bridge_id() and
    br_stp_recalculate_bridge_id() in which one of the addresses
    is unsigned char *, and thus may not be 2-bytes aligned.
    
    Signed-off-by: Evgeny Kravtsunov <emkravts@openvz.org>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: Pavel Emelianov <xemul@openvz.org>

commit 0304ff8a2d5f57defb011c7f261b4c1b3eff96d1
Author: Paolo Galtieri <pgaltieri@mvista.com>
Date:   Tue Apr 17 12:52:36 2007 -0700

    [SCTP]: Unmap v4mapped addresses during SCTP_BINDX_REM_ADDR operation.
    
    During the sctp_bindx() call to add additional addresses to the
    endpoint, any v4mapped addresses are converted and stored as regular
    v4 addresses.  However, when trying to remove these addresses, the
    v4mapped addresses are not converted and the operation fails.  This
    patch unmaps the addresses on during the remove operation as well.
    
    Signed-off-by: Paolo Galtieri <pgaltieri@mvista.com>
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ea2bc483ff5caada7c4aa0d5fbf87d3a6590273d
Author: Tsutomu Fujii <t-fujii@nb.jp.nec.com>
Date:   Tue Apr 17 12:49:53 2007 -0700

    [SCTP]: Fix assertion (!atomic_read(&sk->sk_rmem_alloc)) failed message
    
    In current implementation, LKSCTP does receive buffer accounting for
    data in sctp_receive_queue and pd_lobby. However, LKSCTP don't do
    accounting for data in frag_list when data is fragmented. In addition,
    LKSCTP doesn't do accounting for data in reasm and lobby queue in
    structure sctp_ulpq.
    When there are date in these queue, assertion failed message is printed
    in inet_sock_destruct because sk_rmem_alloc of oldsk does not become 0
    when socket is destroyed.
    
    Signed-off-by: Tsutomu Fujii <t-fujii@nb.jp.nec.com>
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2ecba71717c4f60671175fd26083c35a4b9ad58
Author: Pavel Emelianov <xemul@sw.ru>
Date:   Tue Apr 17 12:45:31 2007 -0700

    [NET]: Set a separate lockdep class for neighbour table's proxy_queue
    
    Otherwise the following calltrace will lead to a wrong
    lockdep warning:
    
      neigh_proxy_process()
        `- lock(neigh_table->proxy_queue.lock);
      arp_redo /* via tbl->proxy_redo */
      arp_process
      neigh_event_ns
      neigh_update
      skb_queue_purge
        `- lock(neighbor->arp_queue.lock);
    
    This is not a deadlock actually, as neighbor table's proxy_queue
    and the neighbor's arp_queue are different queues.
    
    Lockdep thinks there is a deadlock as both queues are initialized
    with skb_queue_head_init() and thus have a common class.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e7d7fa57323dfb48fb09464cf4542daa7ce8a72
Author: Aubrey Li <aubreylee@gmail.com>
Date:   Tue Apr 17 12:40:20 2007 -0700

    [NET]: Fix UDP checksum issue in net poll mode.
    
    In net poll mode, the current checksum function doesn't consider the
    kind of packet which is padded to reach a specific minimum length. I
    believe that's the problem causing my test case failed. The following
    patch fixed this issue.
    
    Signed-off-by: Aubrey Li <aubreylee@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 55569ce256ce29f4624f0007213432c1ed646584
Author: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
Date:   Tue Apr 17 12:32:20 2007 -0700

    [KEY]: Fix conversion between IPSEC_MODE_xxx and XFRM_MODE_xxx.
    
    We should not blindly convert between IPSEC_MODE_xxx and XFRM_MODE_xxx just
    by incrementing / decrementing because the assumption is not true any longer.
    
    Signed-off-by: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
    Singed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit b4dfa0b1fb39c7ffe74741d60668825de6a47b69
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Apr 17 12:28:27 2007 -0700

    [NET]: Get rid of alloc_skb_from_cache
    
    Since this was added originally for Xen, and Xen has recently (~2.6.18)
    stopped using this function, we can safely get rid of it.  Good timing
    too since this function has started to bit rot.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f29e35e2d4cdbc3e8785982314e54ec5df4ad37
Author: Badari Pulavarty <pbadari@gmail.com>
Date:   Fri Apr 13 08:13:42 2007 -0700

    cache_k8_northbridges() overflows beyond allocation
    
    cache_k8_northbridges() is storing config values to incorrect locations
    (in flush_words) and also its overflowing beyond the allocation, causing
    slab verification failures.
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 608d8268be392444f825b4fc8fc7c8b509627129
Author: Michael S. Tsirkin <mst@dev.mellanox.co.il>
Date:   Mon Apr 16 17:04:55 2007 +0300

    IB/mthca: Fix data corruption after FMR unmap on Sinai
    
    In mthca_arbel_fmr_unmap(), the high bits of the key are masked off.
    This gets rid of the effect of adjust_key(), which makes sure that
    bits 3 and 23 of the key are equal when the Sinai throughput
    optimization is enabled, and so it may happen that an FMR will end up
    with bits 3 and 23 in the key being different.  This causes data
    corruption, because when enabling the throughput optimization, the
    driver promises the HCA firmware that bits 3 and 23 of all memory keys
    will always be equal.
    
    Fix by re-applying adjust_key() after masking the key.
    
    Thanks to Or Gerlitz for reproducing the problem, and Ariel Shahar for
    help in debug.
    
    Signed-off-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1d00e832f0d65039abdebf83054b323a9aa05687
Merge: 94a0550... 1af1e32...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 16 13:21:11 2007 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 4313/1: S3C24XX: Update s3c2410 defconfig to 2.6.21-rc6
      [ARM] Update mach-types

commit 1af1e32adef775dfc103f9679417009f2cf838ab
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Apr 9 10:15:20 2007 +0100

    [ARM] 4313/1: S3C24XX: Update s3c2410 defconfig to 2.6.21-rc6
    
    Update defconfig to the latest kernel version
    and enable the h1940 LED driver
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4c467e758a55e455264a994646b789ddb625fcaa
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 8 09:57:26 2007 +0100

    [ARM] Update mach-types
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1714f9bfc92d6ee67e84127332a1fae27772acfe
Author: Andi Kleen <ak@suse.de>
Date:   Mon Apr 16 10:30:27 2007 +0200

    [PATCH] x86: Fix potential overflow in perfctr reservation
    
    While reviewing this code again I found a potential overflow of the bitmap.
    The p4 oprofile can theoretically set bits beyond the reservation bitmap for
    specific configurations. Avoid that by sizing the bitmaps properly.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 08269c6d38e003adb12f55c6d795daa89bdc1bae
Author: Andi Kleen <ak@suse.de>
Date:   Mon Apr 16 10:30:27 2007 +0200

    [PATCH] x86: Fix gcc 4.2 _proxy_pda workaround
    
    Due to an over aggressive optimizer gcc 4.2 cannot optimize away _proxy_pda
    in all cases (counter intuitive, but true).  This breaks loading of some
    modules.
    
    The earlier workaround to just export a dummy symbol didn't work unfortunately
    because the module code ignores exports with 0 value.
    
    Make it 1 instead.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 94a05509a9e11806acd797153d03019706e466f1
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Apr 15 16:50:57 2007 -0700

    Linux 2.6.21-rc7
    
    I tend to prefer to not have to cut an -rc7, but we still have some
    network device driver and suspend issues. So here's -rc7.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit eb4cac10d9f7b006da842e2d37414d13e1333781
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sun Apr 15 16:21:49 2007 -0400

    NFS: Fix a list corruption problem
    
    We must remove the request from whatever list it is currently on before we
    can add it to the dirty list.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0492c371372ef5eac3a952509391dea231b0de89
Author: Zachary Amsden <zach@vmware.com>
Date:   Thu Apr 12 19:28:46 2007 -0700

    Fix VMI relocation processing logic error
    
    Fix logic error in VMI relocation processing.  NOPs would always cause
    a BUG_ON to fire because the != RELOCATION_NONE in the first if clause
    precluding the == VMI_RELOCATION_NOP in the second clause.  Make these
    direct equality tests and just warn for unsupported relocation types
    (which should never happen), falling back to native in that case.
    
    Thanks to Anthony Liguori for noting this!
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5a6d41b32a17ca902ef50fdfa170d7f23264bad5
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Apr 14 19:10:12 2007 -0400

    NFS: Ensure PG_writeback is cleared when writeback fails
    
    If the writebacks are cancelled via nfs_cancel_dirty_list, or due to the
    memory allocation failing in nfs_flush_one/nfs_flush_multi, then we must
    ensure that the PG_writeback flag is cleared.
    
    Also ensure that we actually own the PG_writeback flag whenever we
    schedule a new writeback by making nfs_set_page_writeback() return the
    value of test_set_page_writeback().
    The PG_writeback page flag ends up replacing the functionality of the
    PG_FLUSHING nfs_page flag, so we rip that out too.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 60fa3f769f7651a60125a0f44e3ffe3246d7cf39
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Apr 14 19:11:52 2007 -0400

    NFS: Fix two bugs in the O_DIRECT write code
    
    Do not flag an error if the COMMIT call fails and we decide to resend the
    writes. Let the resend flag the error if it fails.
    
    If a write has failed, then nfs_direct_write_result should not attempt to
    send a commit. It should just exit asap and return the error to the user.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Cc: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e1552e199857109d4b25b9163eff4646726eee3d
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Apr 14 19:07:28 2007 -0400

    NFS: Fix an Oops in nfs_setattr()
    
    It looks like nfs_setattr() and nfs_rename() also need to test whether the
    target is a regular file before calling nfs_wb_all()...
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c9c57929d23e44f258d1b6e7f089e72c85f0bd1c
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Fri Apr 13 16:28:20 2007 -0700

    failsafe mechanism to HPET clock calibration
    
    Provide a failsafe mechanism to avoid kernel spinning forever at
    read_hpet_tsc during early kernel bootup.
    
    This failsafe mechanism was originally introduced in commit
    2f7a2a79c3ebb44f8b1b7d9b4fd3a650eb69e544, but looks like the hpet split
    from time.c lost it again.
    
    This reintroduces the failsafe mechanism
    
    Signed-off-by: Ravikiran Thirumalai <kiran@scalex86.org>
    Signed-off-by: Shai Fultheim <shai@scalex86.org>
    Cc: Jack Steiner <steiner@sgi.com>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ff99e40230d5cdf5e48bcdb4938d0626624bc4cb
Merge: 2951157... 8d3ee2c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Apr 14 21:41:12 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SCSI] QLOGICPTI: Do not unmap DMA unless we actually mapped something.

commit 2951157f054039fa4f19b4c05fbf206b7f9d2eec
Merge: d791d41... 6e3b2bb...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Apr 14 21:35:52 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6:
      [SCSI] 3w-xxxx: fix oops caused by incorrect REQUEST_SENSE handling

commit 8d3ee2cb0ab59f78fdc801ede7db15ef47387bd0
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Apr 14 10:29:10 2007 -0700

    [SCSI] QLOGICPTI: Do not unmap DMA unless we actually mapped something.
    
    We only map DMA when cmd->request_bufflen is non-zero for non-sg
    buffers, we thus should make the same check when unmapping.
    
    Based upon a report from Pasi Pirhonen.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6e3b2bbb197eb12b2bef35bcf2ac3bd6a5facab2
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Apr 6 11:14:56 2007 -0500

    [SCSI] 3w-xxxx: fix oops caused by incorrect REQUEST_SENSE handling
    
    3w-xxxx emulates a REQUEST_SENSE response by simply returning nothing.
    Unfortunately, it's assuming that the REQUEST_SENSE command is
    implemented with use_sg == 0, which is no longer the case.  The oops
    occurs because it's clearing the scatterlist in request_buffer instead
    of the memory region.
    
    This is fixed by using tw_transfer_internal() to transfer correctly to
    the scatterlist.
    
    Acked-by: adam radford <aradford@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d791d413fd8527aa6b130882cc84d52aee0fe980
Author: Olaf Kirch <olaf.kirch@oracle.com>
Date:   Fri Apr 13 01:18:44 2007 -0400

    DVB: dvb-usb-remote - fix oops when changing keymap
    
    DVB USB remotes do not support changing keycode maps but set
    input_dev->keycodesize and input_dev->keycodemax without setting
    input_dev->keycode. This causes kernel oops when user tries to
    look up (or change) current keymap.
    
    While the proper fix would be to make remotes handle keymap changes
    we'll just remove keycodemax and keycodesize initialization so
    EVIOCGKEYCODE and EVIOCSKEYCODE will simply return -EINVAL.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=8312
    
    Signed-off-by: Olaf Kirch <olaf.kirch@oracle.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b1847a041aba157bdf1643bd151e98dc44366b1c
Merge: 2918cd8... 24fc6f0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Apr 13 18:20:39 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Fix inline directive in pci_iommu.c
      [SPARC64]: Fix arg passing to compat_sys_ipc().
      [SPARC]: Fix section mismatch warnings in pci.c and pcic.c
      [SUNRPC]: Make sure on-stack cmsg buffer is properly aligned.
      [SPARC]: avoid CHILD_MAX and OPEN_MAX constants
      [SPARC64]: Fix SBUS IOMMU allocation code.

commit 2918cd81f58aa9748acf961240c006394f474047
Merge: 8a06597... 49688c8...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Apr 13 18:20:16 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [NETFILTER] arp_tables: Fix unaligned accesses.
      [IPV6] SNMP: Fix {In,Out}NoRoutes statistics.
      [IPSEC] XFRM_USER: kernel panic when large security contexts in ACQUIRE
      [VLAN]: Allow VLAN interface on top of bridge interface
      [PKTGEN]: Add try_to_freeze()
      [NETFILTER]: ipt_ULOG: use put_unaligned

commit 49688c843101ba6275756505e81af45ef50f87d7
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Apr 13 16:37:54 2007 -0700

    [NETFILTER] arp_tables: Fix unaligned accesses.
    
    There are two device string comparison loops in arp_packet_match().
    The first one goes byte-by-byte but the second one tries to be
    clever and cast the string to a long and compare by longs.
    
    The device name strings in the arp table entries are not guarenteed
    to be aligned enough to make this value, so just use byte-by-byte
    for both cases.
    
    Based upon a report by <drraid@gmail.com>.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 612f09e8495ba656032f89147ab999ef2be9c360
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Apr 13 16:18:02 2007 -0700

    [IPV6] SNMP: Fix {In,Out}NoRoutes statistics.
    
    A packet which is being discarded because of no routes in the
    forwarding path should not be counted as OutNoRoutes but as
    InNoRoutes.
    Additionally, on this occasion, a packet whose destinaion is
    not valid should be counted as InAddrErrors separately.
    
    Based on patch from Mitsuru Chinen <mitch@linux.vnet.ibm.com>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 661697f728d75302e1f661a58db2fcba71d5cbc9
Author: Joy Latten <latten@austin.ibm.com>
Date:   Fri Apr 13 16:14:35 2007 -0700

    [IPSEC] XFRM_USER: kernel panic when large security contexts in ACQUIRE
    
    When sending a security context of 50+ characters in an ACQUIRE
    message, following kernel panic occurred.
    
    kernel BUG in xfrm_send_acquire at net/xfrm/xfrm_user.c:1781!
    cpu 0x3: Vector: 700 (Program Check) at [c0000000421bb2e0]
        pc: c00000000033b074: .xfrm_send_acquire+0x240/0x2c8
        lr: c00000000033b014: .xfrm_send_acquire+0x1e0/0x2c8
        sp: c0000000421bb560
       msr: 8000000000029032
      current = 0xc00000000fce8f00
      paca    = 0xc000000000464b00
        pid   = 2303, comm = ping
    kernel BUG in xfrm_send_acquire at net/xfrm/xfrm_user.c:1781!
    enter ? for help
    3:mon> t
    [c0000000421bb650] c00000000033538c .km_query+0x6c/0xec
    [c0000000421bb6f0] c000000000337374 .xfrm_state_find+0x7f4/0xb88
    [c0000000421bb7f0] c000000000332350 .xfrm_tmpl_resolve+0xc4/0x21c
    [c0000000421bb8d0] c0000000003326e8 .xfrm_lookup+0x1a0/0x5b0
    [c0000000421bba00] c0000000002e6ea0 .ip_route_output_flow+0x88/0xb4
    [c0000000421bbaa0] c0000000003106d8 .ip4_datagram_connect+0x218/0x374
    [c0000000421bbbd0] c00000000031bc00 .inet_dgram_connect+0xac/0xd4
    [c0000000421bbc60] c0000000002b11ac .sys_connect+0xd8/0x120
    [c0000000421bbd90] c0000000002d38d0 .compat_sys_socketcall+0xdc/0x214
    [c0000000421bbe30] c00000000000869c syscall_exit+0x0/0x40
    --- Exception: c00 (System Call) at 0000000007f0ca9c
    SP (fc0ef8f0) is in userspace
    
    We are using size of security context from xfrm_policy to determine
    how much space to alloc skb and then putting security context from
    xfrm_state into skb. Should have been using size of security context
    from xfrm_state to alloc skb. Following fix does that
    
    Signed-off-by: Joy Latten <latten@austin.ibm.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 279e172a580d415b83eba4f9fbbc77b08e546553
Author: Jerome Borsboom <j.borsboom@erasmusmc.nl>
Date:   Fri Apr 13 16:12:47 2007 -0700

    [VLAN]: Allow VLAN interface on top of bridge interface
    
    When a VLAN interface is created on top of a bridge interface and
    netfilter is enabled to see the bridged packets, the packets can be
    corrupted when passing through the netfilter code. This is caused by the
    VLAN driver not setting the 'protocol' and 'nh' members of the sk_buff
    structure. In general, this is no problem as the VLAN interface is mostly
    connected to a physical ethernet interface which does not use the
    'protocol' and 'nh' members. For a bridge interface, however, these
    members do matter.
    
    Signed-off-by: Jerome Borsboom <j.borsboom@erasmusmc.nl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 24fc6f00b64985773b5abd592c4cb2e30bad7584
Author: Tom 'spot' Callaway <tcallawa@redhat.com>
Date:   Fri Apr 13 13:35:35 2007 -0700

    [SPARC64]: Fix inline directive in pci_iommu.c
    
    While building a test kernel for the new esp driver (against
    git-current), I hit this bug. Trivial fix, put the inline declaration
    in the right place. :)
    
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5c7aa6ffae514bfeb7ec0f249dde949863d895ac
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Apr 13 13:27:08 2007 -0700

    [SPARC64]: Fix arg passing to compat_sys_ipc().
    
    Do not sign extend args using the sys32_ipc stub, that is
    buggy and unnecessary.
    
    Based upon an excellent report by Mikael Pettersson.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8a065975c1c00d1ab3293c1adf6f89988bb1b03b
Merge: 0ea41a2... 1ca1977...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Apr 12 15:44:52 2007 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      RDMA/cxgb3: Add set_tcb_rpl_handler

commit 0ea41a26baa7ef10bc8de72f9ed571dc677780bc
Merge: 6a04de6... 7a6491d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Apr 12 15:38:30 2007 -0700

    Merge branch 'for_linus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc
    
    * 'for_linus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc:
      [PPC] Fix compilation and linking errors of mpc86xads build.
      [PPC] Fix compilation and linking errors of mpc885ads build.
      [PPC] MPC8272 ADS compile fixed, defconfig refreshed.

commit 6a04de6dbe1772d98fddf5099738d6f508e86e21
Author: Wu, Bryan <bryan.wu@analog.com>
Date:   Wed Apr 11 23:28:47 2007 -0700

    [PATCH] nommu: fix bug ip_conntrack does not work on nommu
    
    num_physpages is not exported out in mm/nommu.c, so the ip_conntrack module
    link will fail.
    
    Signed-off-by: Bryan Wu <bryan.wu@analog.com>
    Acked-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c3724b129b5a1a1789a2dc5348685a236ae02479
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Wed Apr 11 23:28:46 2007 -0700

    [PATCH] autofs4: fix race in unhashed dentry code
    
    Commit f50b6f8691cae2e0064c499dd3ef3f31142987f0 introduced a race in
    autofs4 between autofs_lookup_unhashed() and autofs_dentry_release().
    
    autofs_dentry_release() ends up clearing the ->dentry and ->inode members
    of autofs_info before removing it from the rehash list.  The list is
    protected by the rehash lock in both functions, but since
    autofs_dentry_release() starts tearing the autofs_info struct down before
    removing it from the list, autofs_lookup_unhashed() can get a autofs_info
    with a NULL dentry.
    
    This patch moves the clearing of ->dentry and ->inode after the removal
    from the rehash list.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Acked-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6d205f120547043de663315698dcf5f0eaa31b5c
Author: Vladimir Saveliev <vs@namesys.com>
Date:   Wed Apr 11 23:28:44 2007 -0700

    [PATCH] reiserfs: fix key decrementing
    
    This patch fixes a bug in function decrementing a key of stat data item.
    
    Offset of reiserfs keys are compared as signed values.  To set key offset
    to maximal possible value maximal signed value has to be used.
    
    This bug is responsible for severe reiserfs filesystem corruption which
    shows itself as warning vs-13060.  reiserfsck fixes this corruption by
    filesystem tree rebuilding.
    
    Signed-off-by: Vladimir Saveliev <vs@namesys.com>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 505fa2c4a2f125a70951926dfb22b9cf273994f1
Author: Neil Brown <neilb@suse.de>
Date:   Wed Apr 11 23:28:44 2007 -0700

    [PATCH] md: fix calculation for size of filemap_attr array in md/bitmap
    
    If 'num_pages' were ever 1 more than a multiple of 8 (32bit platforms)
    or of 16 (64 bit platforms).  filemap_attr would be allocated one
    'unsigned long' shorter than required.  We need a round-up in there.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b6550777a32f7204f87475beb4f40d054fb8d4b4
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Wed Apr 11 23:28:43 2007 -0700

    [PATCH] cciss: unregister from SCSI before tearing down device resources
    
    We must unregister from SCSI before we unmap device resources and unhook
    the IRQ handler.  Otherwise, SCSI may send us more requests, and we won't
    be able to handle them.
    
    I see the following oops during every reboot of my HP DL360:
    
        ...
        Unmounting local filesystems...done.
        Rebooting... Completed flushing cache on controller 0
        BUG: unable to handle kernel paging request at virtual address f8808040
         printing eip:
        c02dc72b
        *pde = 02120067
        *pte = 00000000
        Oops: 0002 [#1]
        SMP
        Modules linked in:
        CPU:    1
        EIP:    0060:[<c02dc72b>]    Not tainted VLI
        EFLAGS: 00010046   (2.6.21-rc6 #1)
        EIP is at SA5_submit_command+0xb/0x20
        eax: f8808000   ebx: f7a00000   ecx: f79f0000   edx: 37a00000
        esi: f79f0000   edi: 00000000   ebp: 00000000   esp: dd717a44
        ds: 007b   es: 007b   fs: 00d8  gs: 0000  ss: 0068
        Process khelper (pid: 1427, ti=dd716000 task=c2260a70 task.ti=dd716000)
        Stack: c02df2c0 f7a00000 f7a00000 00d41008 c02df691 00000000 00000010 00000002
    	   00000001 f79f0000 f7fff844 c1398420 00000000 00000000 00001000 230a3020
    	   69666564 5420656e 50434f49 465f544b 4853554c 44414552 0a312009 66656423
        Call Trace:
         [<c02df2c0>] start_io+0x80/0x120
         [<c02df691>] do_cciss_request+0x331/0x350
         [<c014242a>] mempool_alloc+0x2a/0xe0
         [<c020ad71>] blk_alloc_request+0x61/0x80
         [<c020b02e>] get_request+0x15e/0x1e0
         [<c01595e0>] cache_alloc_refill+0xb0/0x1e0
         [<c021049d>] as_update_rq+0x2d/0x80
         [<c0210d28>] as_add_request+0x68/0x90
         [<c0207f99>] elv_insert+0x119/0x160
         [<c020bd0b>] __make_request+0xcb/0x320
         [<c0122ee0>] lock_timer_base+0x20/0x50
         [<c0123096>] del_timer+0x56/0x60
         [<c020a7b8>] blk_remove_plug+0x38/0x70
         [<c020a815>] __generic_unplug_device+0x25/0x30
         [<c020a835>] generic_unplug_device+0x15/0x30
        ...
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1668be71ccae5a9610fc8a224bd80fbe852f93ae
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Apr 11 23:28:42 2007 -0700

    [PATCH] doc: gpio.txt describes open-drain emulation
    
    Update the GPIO docs to describe the idiom whereby open drain signals are
    emulated by toggling the GPIO direction.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fe20e581a72979917e35d5146458ceba79be391f
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Wed Apr 11 23:28:41 2007 -0700

    [PATCH] fix kernel oops with badly formatted module option
    
    Catch malformed kernel parameter usage of "param = value".  Spaces are not
    supported, but don't cause a kernel fault on such usage, just report an
    error.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Acked-by: Larry Finger <Larry.Finger@lwfinger.net>
    Acked-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 09fe3ef46c5a2cc65d173df9518013e208eb3ba3
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Thu Apr 12 14:45:32 2007 -0700

    [PKTGEN]: Add try_to_freeze()
    
    The pktgen module prevents suspend-to-disk.  Fix.
    
    Acked-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 01102e7ca2e71ec0c300d41a1f3e594235b733ee
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 12 14:27:03 2007 -0700

    [NETFILTER]: ipt_ULOG: use put_unaligned
    
    Use put_unaligned to fix warnings about unaligned accesses.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6b45da1299f1f2e92a1446cfa400be53fdc5c99
Author: Robert Reif <reif@earthlink.net>
Date:   Thu Apr 12 13:47:37 2007 -0700

    [SPARC]: Fix section mismatch warnings in pci.c and pcic.c
    
    Fix section mismatch in arch/sparc/kernel/pcic.c and
    arch/sparc64/kernel/pci.c.
    
    Signed-off-by: Robert Reif <reif@earthlink.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc375ea7efcda0450b7cba9b3514e76d2e1cea79
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Apr 12 13:35:59 2007 -0700

    [SUNRPC]: Make sure on-stack cmsg buffer is properly aligned.
    
    Based upon a report from Meelis Roos.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1d51c69fb6e61054cd6cc485f9bef77d19d82751
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Apr 12 13:13:42 2007 -0700

    [SPARC]: avoid CHILD_MAX and OPEN_MAX constants
    
    I don't figure anyone really cares about SunOS syscall emulation, and I
    certainly don't.  But I'm getting rid of uses of the OPEN_MAX and CHILD_MAX
    compile-time constant, and these are almost the only ones.  OPEN_MAX is a
    bogus constant with no meaning about anything.  The RLIMIT_NOFILE resource
    limit is what sysconf (_SC_OPEN_MAX) actually wants to return.
    
    The CHILD_MAX cases weren't actually using anything I want to get rid of,
    but I noticed that they are there and are wrong too.  The CHILD_MAX value
    is not really unlimited as a -1 return from sysconf indicates.  The
    RLIMIT_NPROC resource limit is what sysconf (_SC_CHILD_MAX) wants to return.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7a6491dffb5bf86ae86c90895c0f40aacceb7083
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Tue Apr 10 21:52:04 2007 +0400

    [PPC] Fix compilation and linking errors of mpc86xads build.
    
    Fix compilation of mpc866ads_setup.c
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit fa76abac9271e314c02aff9b407116b783e0ccbb
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Tue Apr 10 21:52:02 2007 +0400

    [PPC] Fix compilation and linking errors of mpc885ads build.
    
    Fix compilation of mpc885ads_setup.c
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 1ca19770c5ba90d041ba4d06976c77048d330cc8
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Thu Apr 12 07:56:34 2007 -0500

    RDMA/cxgb3: Add set_tcb_rpl_handler
    
    As of commit 6cdbd77e ("cxgb3 - missing CPL hanler and register
    setting."), the cxgb3 ethernet NIC driver no longer handles SET_TCB
    replies, so we need to do it in the iWARP driver.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Acked-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6df7d40682242b52c3ed1ea4bbdb594c2d8737c5
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Tue Apr 10 21:51:53 2007 +0400

    [PPC] MPC8272 ADS compile fixed, defconfig refreshed.
    
    Fix compilation of mpc8272ads_setup.c
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 2f3a2efd85b698e51e90f06a37d85066725fb4c4
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Apr 11 21:38:45 2007 -0700

    [SPARC64]: Fix SBUS IOMMU allocation code.
    
    There are several IOMMU allocator bugs.  Instead of trying to fix this
    overly complicated code, just mirror the PCI IOMMU arena allocator
    which is very stable and well stress tested.
    
    I tried to make the code as identical as possible so we can switch
    sun4u PCI and SBUS over to a common piece of IOMMU code.  All that
    will be need are two callbacks, one to do a full IOMMU flush and one
    to do a streaming buffer flush.
    
    This patch gets rid of a lot of hangs and mysterious crashes on SBUS
    sparc64 systems, at least for me.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 80584ff3b99c36ead7e130e453b3a48b18072d18
Merge: 73aba63... 2213217...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 11 15:44:45 2007 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] mpc52xx_pic: fix main interrupt masking

commit 73aba63c5d62f4f504c6469c7c56311a0c818b20
Merge: 29ac8ca... cec34dd...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 11 15:40:45 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      myri10ge: update driver version to 1.3.0-1.233
      myri10ge: more Intel chipsets providing aligned PCIe completions
      myri10ge: fix management of the firmware 4KB boundary crossing restriction
      cxgb3 - missing CPL hanler and register setting.
      cxgb3 - MAC watchdog update
      cxgb3 - avoid deadlock with mac watchdog
      skge: fix wake on lan
      sky2: phy workarounds for Yukon EC-U A1
      sky2: turn on clocks when doing resume
      sky2: turn carrier off when down
      skge: turn carrier off when down
      [PATCH] bcm43xx: Fix PPC machine checks and match loopback gain specs
      [PATCH] bcm43xx: Fix 802.11b/g scan limits to match regulatory reqs
      [PATCH] zd1211rw: Fix E2P_PHY_REG patching
      [PATCH] zd1211rw: Reject AL2230S devices

commit 29ac8cabd225eaccb2918846f2f2f4e4d99030bd
Merge: c48ea60... 2ea547d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 11 15:40:03 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      USB: Nikon D80 unusual device patch
      EHCI: fix remote wakeup regression in 2.6.21-rc

commit c48ea60359a303f3faf5991205b0cdb58dfe6eed
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Apr 11 01:37:18 2007 -0400

    [PATCH] PM: use kobject_name() to access kobject names
    
    Noone should use kobj.name directly since it may contain garbage.
    Objects with longer names have them stored in separately allocated
    memory pointed to by kobj->k_name.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2ea547d2dec97b279ba90c7768960856f2116c79
Author: Emil Larsson <emil@swip.net>
Date:   Thu Mar 29 22:48:46 2007 -0700

    USB: Nikon D80 unusual device patch
    
    the Nikon D80 camera will not work without an UNUSUAL_DEV entry embodied
    in the attached patch (made against 2.6.20.3). Hope you find it helpful,
    or if not, pass it along to someone who does.
    
    From: Emil Larsson <emil@swip.net>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 61e8b858abe38c1042135065c59f7d339194b50b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Apr 9 11:52:31 2007 -0400

    EHCI: fix remote wakeup regression in 2.6.21-rc
    
    There is one significant difference between the behavior of root hubs
    (as embodied in host controller hardware) and external hubs: When a
    remote-wakeup signal is received, an external hub sends an interrupt
    message at the _end_ of the resume sequence but a root hub generates
    and interrupt at the _beginning_ of the resume sequence.  The host
    system must poll for the end of the sequence.
    
    When ehci-hcd was converted to interrupt-driven operation instead of
    using polling, the remaining need for this particular poll was
    overlooked.  This patch (as894) fixes the problem.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 22132178b26c907d19f661a4ae7fd265962d417e
Author: Domen Puncer <domen.puncer@telargo.com>
Date:   Wed Apr 11 00:27:49 2007 +0200

    [POWERPC] mpc52xx_pic: fix main interrupt masking
    
    The bit setting was off by one.
    Tested with RTC and GPIO_WKUP interrupts.
    
    Signed-off-by: Domen Puncer <domen.puncer@telargo.com>
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cec34dda71bd8bb1df61579d6a1440723baec9f7
Merge: 4b2281c... ec759a2...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 11 11:55:45 2007 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 4b2281c7aa6a6e2615b35f8cebd93656dc6d714c
Author: Brice Goglin <brice@myri.com>
Date:   Tue Apr 10 21:22:19 2007 +0200

    myri10ge: update driver version to 1.3.0-1.233
    
    Update the myri10ge driver version number to 1.3.0-1.233.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f19baaeaadf9d77bcc6c122500c70b27c5bbc7a4
Author: Brice Goglin <brice@myri.com>
Date:   Tue Apr 10 21:21:39 2007 +0200

    myri10ge: more Intel chipsets providing aligned PCIe completions
    
    Add the Intel 5000 southbridge (aka Intel 6310/6311/6321ESB) PCIe ports
    and the Intel E30x0 chipsets to the whitelist of aligned PCIe completion.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ae8509b1876e6e1074edc9846296e80983e30502
Author: Brice Goglin <brice@myri.com>
Date:   Tue Apr 10 21:21:08 2007 +0200

    myri10ge: fix management of the firmware 4KB boundary crossing restriction
    
    Simpler way of dealing with the firmware 4KB boundary crossing
    restriction for rx buffers.  This fixes a variety of memory
    corruption issues when using an "uncommon" MTU with a 16KB
    page size.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6cdbd77e8883aac2e24f8b19b91e5b1c839213a0
Author: Divy Le Ray <divy@chelsio.com>
Date:   Mon Apr 9 20:10:33 2007 -0700

    cxgb3 - missing CPL hanler and register setting.
    
    Remove specific CPL handler.
    Add missing CPL handler.
    Add missing register setting when the interface is brought up.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 59cf81076a85e1df273155298c462574b49cc0fe
Author: Divy Le Ray <divy@chelsio.com>
Date:   Mon Apr 9 20:10:27 2007 -0700

    cxgb3 - MAC watchdog update
    
    The MAC watchdog was failing if the peer interface was brought down.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f2d961c9827bab4b64a1b4ea30c68cf5ab2b2330
Author: Divy Le Ray <divy@chelsio.com>
Date:   Mon Apr 9 20:10:22 2007 -0700

    cxgb3 - avoid deadlock with mac watchdog
    
    Fix a deadlock when the interface s configured down and
    the watchdog tack is sleeping on rtnl_lock.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 692412b31ffb5df00197ea591dd635fc07506c02
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon Apr 9 15:32:45 2007 -0700

    skge: fix wake on lan
    
    Need to rework wake on lan code to setup properly and get activated
    on shutdown (and suspend), not when ethtool is run.
    
    This does not need to go to stable queue because wake on lan
    was not even included in 2.6.20 (or earlier versions).
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9467a8fc89844ff2ea9c6d13460dddb3b674cc37
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Sat Apr 7 16:02:28 2007 -0700

    sky2: phy workarounds for Yukon EC-U A1
    
    The workaround Yukon EC-U wasn't comparing with correct
    version and wasn't doing correct setup. Without it, 88e8056
    throws all sorts of errors.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1ad5b4a5c224c5f98f9745adbcf99899624c8138
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Sat Apr 7 16:02:27 2007 -0700

    sky2: turn on clocks when doing resume
    
    Some of these chips are disabled until clock is enabled.
    This fixes:
         http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=404107
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9a87240c67565578a9533101b930ef4a975be333
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Sat Apr 7 16:02:26 2007 -0700

    sky2: turn carrier off when down
    
    Driver needs to turn off carrier when down.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e5b9ddd9a0f95e133db7b43d05978f24cd6f1369
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Sat Apr 7 16:02:25 2007 -0700

    skge: turn carrier off when down
    
    Driver needs to turn off carrier when down, otherwise it can
    confuse bonding and bridging and looks like carrier is on immediately
    when it is brought back up.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ab7ffea520948115a51a9931e1bb4c818aa8e35
Author: David Howells <dhowells@redhat.com>
Date:   Tue Apr 10 15:10:45 2007 +0100

    [PATCH] FRV: Update the FRV arch MAINTAINER record to get a hit on "grep -i frv"
    
    Update the FRV arch MAINTAINER record to get a hit on "grep -i frv".  Whilst
    FR-V is technically correct, it's normally thought of as FRV.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ff78b20235f84966c4b7962ce94e800adecc5383
Author: Cliff Brake <cbrake@bec-systems.com>
Date:   Mon Apr 9 23:50:50 2007 -0400

    [PATCH] Input: ucb1400 - set up driver's name to show in sysfs
    
    The UCB1400 is missing a name parameter in the device_driver struct.
    This causes missing information in the /sys tree and seems to cause
    other problems with the AC97 functionality. This was tested on a PXA270
    system.
    
    Signed-off-by: Cliff Brake <cbrake@bec-systems.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0bce0b7a3b25b33220be77dcaf3dc4585641100c
Merge: c3474be... 52ea071...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:24:56 2007 -0700

    Merge branch 'for-2.6.21' of master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * 'for-2.6.21' of master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] intel_agp: fix G965 GTT size detect

commit c3474be4ddcae0256a13cbbe35d849c153c4ec4b
Merge: 5a92d63... 199c116...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:24:36 2007 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6:
      ieee1394: change deprecation status of dv1394

commit 5a92d635bec814fb53595fc80488765bc0d4ff0e
Merge: e676853... 6371ea3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:23:52 2007 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband:
      IPoIB/cm: Fix DMA direction typo
      IB/iser: Don't defer connection failure notification to workqueue

commit e676853c8c3f77166c03f1eea7dab6e854eeb819
Merge: 8bd51cc... 8da7d1b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:23:36 2007 -0700

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/hid
    
    * 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/jikos/hid:
      HID: Do not discard truncated input reports

commit 8bd51cce98aa80ff8b56d34a0e48316c5f887818
Merge: 9631eb0... a7a832d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:22:31 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6:
      ide: add "optical" to sysfs "media" attribute
      ide: ugly messages trying to open CD drive with no media present
      ide: correctly prevent IDE timer expiry function to run if request was already handled

commit 9631eb0bc18bc1fd1cc84e535260d67ed6a36865
Merge: b4dfd6b... 50c9cc2...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:22:16 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [NETFILTER]: ipt_CLUSTERIP: fix oops in checkentry function
      [TCP]: slow_start_after_idle should influence cwnd validation too
      [SC92031]: Fix priv->lock context
      [NET_SCHED]: cls_tcindex: fix compatibility breakage

commit b4dfd6bc35f6c1e0fcbb4268c523b3939955d3af
Merge: 90f30ec... 2e0d232...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Apr 10 17:21:57 2007 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] SGI Altix : fix pcibr_dmamap_ate32() bug
      [IA64] Fix CPU freq displayed in /proc/cpuinfo
      [IA64] Fix wrong assumption about irq and vector in msi_ia64.c
      [IA64] BTE error timer fix

commit a7a832de9e9624bcf069a5369c3c38ba2f44d460
Author: Danny Kukawka <dkukawka@suse.de>
Date:   Tue Apr 10 22:39:14 2007 +0200

    ide: add "optical" to sysfs "media" attribute
    
    Add "optical" to sysfs "media" attribute as already in /proc
    
    Signed-off-by: Danny Kukawka <dkukawka@suse.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 76ca1af10e28021e1894c5703da42b5e7bff1771
Author: Stuart Hayes <stuart_hayes@dell.com>
Date:   Tue Apr 10 22:38:43 2007 +0200

    ide: ugly messages trying to open CD drive with no media present
    
    I get the following error messages when trying to open a CD device
    (specifically, the Teac CD-ROM CD-224E) that has no media present:
    
    hda: packet command error: status=3D0x51 { DriveReady SeekComplete Error }
    hda: packet command error: error=3D0x54 { AbortedCommand LastFailedSense=0x05 }
    ide: failed opcode was: unknown
    
    This happens when a "start stop unit" command (0x1b 0 0 0 3 0 0 0 0 0)
    is sent to the drive to try to close the CD-ROM tray, but this drive
    doesn't have that capability (it's a slim portable-type CD-ROM), so it
    reports sense key 5 (illegal request) with asc/ascq 24/0.  This is
    exactly how SFF8090i says it should respond.
    
    But ide-cd.c (in cdrom_decode_status() ) just sees sense key 5 and spews
    out an error.  It then goes on to request sense data, and
    cdrom_log_sense() understands this error and doesn't log it.
    
    The patch, for kernel 2.6.20.4, suppresses this error message.
    
    Signed-off-by: Stuart Hayes <stuart_hayes@dell.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 23450319e2890986c247ec0aa1442f060e657e6d
Author: Suleiman Souhlal <suleiman@google.com>
Date:   Tue Apr 10 22:38:37 2007 +0200

    ide: correctly prevent IDE timer expiry function to run if request was already handled
    
    It is possible for the timer expiry function to run even though the
    request has already been handled: ide_timer_expiry() only checks that
    the handler is not NULL, but it is possible that we have handled a
    request (thus clearing the handler) and then started a new request
    (thus starting the timer again, and setting a handler).
    
    A simple way to exhibit this is to set the DMA timeout to 1 jiffy and
    run dd: The kernel will panic after a few minutes because
    ide_timer_expiry() tries to add a timer when it's already active.
    
    To fix this, we simply add a request generation count that gets
    incremented at every interrupt, and check in ide_timer_expiry() that
    we have not already handled a new interrupt before running the expiry
    function.
    
    Signed-off-by: Suleiman Souhlal <suleiman@google.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 50c9cc2e540aeaab78ab548a8d42568977c6844f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Apr 10 13:26:48 2007 -0700

    [NETFILTER]: ipt_CLUSTERIP: fix oops in checkentry function
    
    The clusterip_config_find_get() already increases entries reference
    counter, so there is no reason to do it twice in checkentry() callback.
    
    This causes the config to be freed before it is removed from the list,
    resulting in a crash when adding the next rule.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ec759a2b383b50950be37fbe470c4cc2ca18e2ce
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sat Apr 7 14:11:03 2007 -0500

    [PATCH] bcm43xx: Fix PPC machine checks and match loopback gain specs
    
    The specifications for loopback_gain calculation and for G PHY
    initialization have been updated. This patch implements them and
    fixes a machine check error that occurs for PPC architecture with a
    phy->rev of 1.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 81e880064dd32b3efdc41ad4cc2416c4744693ee
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sat Apr 7 13:54:35 2007 -0500

    [PATCH] bcm43xx: Fix 802.11b/g scan limits to match regulatory reqs
    
    In 802.11b/g mode, bcm43xx actively scans channels 1-14 no matter what
    locale has been set, either in the sprom or by the locale option. This
    behaviorviolates regulatory rules everywhere in the world except
    Japan. This patch changes the default range to the correct value if the
    locale has been set, and to channels 1-13 if no locale has been set.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 92b3e2e9253a9f4c9224071842fd263c334dece0
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Apr 3 23:17:37 2007 +0100

    [PATCH] zd1211rw: Fix E2P_PHY_REG patching
    
    Due to conflicting/confusing defines in the vendor driver, we were
    reading E2P_PHY_REG from the wrong location.
    
    CR157 patching was slightly incorrect in that the vendor driver only
    patches in an 8-bit value, whereas we were patching 24 bits.
    
    Additionally, CR157 patching was happening on both zd1211 and zd1211b,
    but this should only happen on zd1211.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6371ea3d48e17d4638a91a4a1e0364e56204e418
Author: Michael S. Tsirkin <mst@dev.mellanox.co.il>
Date:   Tue Apr 10 18:32:42 2007 +0300

    IPoIB/cm: Fix DMA direction typo
    
    Receive buffers need to be mapped with DMA_FROM_DEVICE.  Incorrectly
    mapping with DMA_TO_DEVICE causes a hard lock on ppc64 machines with
    an IOMMU.
    
    This fixes <https://bugs.openfabrics.org/show_bug.cgi?id=431>
    
    Signed-off-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ae6ead4623bfbc57f3945ff86f27e51811e2e91b
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun Mar 11 19:54:11 2007 +0000

    [PATCH] zd1211rw: Reject AL2230S devices
    
    zd1211rw currently detects AL2230S-based devices as AL2230, and hence
    programs the RF incorrectly. Transmit silently fails on this
    misconfiguration.
    
    After this patch, AL2230S devices are rejected with an error message, to
    avoid any confusion with an apparent driver bug.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 52ea0718ea506df0915eacedb439e65c5f214e0e
Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
Date:   Tue Apr 10 09:42:48 2007 +0800

    [AGPGART] intel_agp: fix G965 GTT size detect
    
    On G965, I810_PGETBL_CTL is a mmio offset, but we wrongly take it
    as pci config space offset in detecting GTT size. This one line patch
    fixs this.
    
    Signed-off-by: Wang Zhenyu <zhenyu.z.wang@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 15d33c070ddde99f7368e6b17b71d22c866f97d9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Apr 9 13:23:14 2007 -0700

    [TCP]: slow_start_after_idle should influence cwnd validation too
    
    For the cases that slow_start_after_idle are meant to deal
    with, it is almost a certainty that the congestion window
    tests will think the connection is application limited and
    we'll thus decrease the cwnd there too.  This defeats the
    whole point of setting slow_start_after_idle to zero.
    
    So test it there too.
    
    We do not cancel out the entire tcp_cwnd_validate() function
    so that if the sysctl is changed we still have the validation
    state maintained.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 699784b7614ce61b16a075445b8e5b6c379c5086
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Apr 9 11:51:15 2007 -0700

    [SC92031]: Fix priv->lock context
    
    The spin_lock calls made in dev->open and dev->close must disable
    BH since open/close are made in process context.  Conversely, the
    call in dev->hard_start_xmit does not need to disable BH since it
    is already executing with BH disabled.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb8a954f27ed8fb8f57e80e6b63d837cfdcad689
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Apr 9 11:42:25 2007 -0700

    [NET_SCHED]: cls_tcindex: fix compatibility breakage
    
    Userspace uses an integer for TCA_TCINDEX_SHIFT, the kernel was changed
    to expect and use a u16 value in 2.6.11, which broke compatibility on
    big endian machines. Change back to use int.
    
    Reported by Ole Reinartz <ole.reinartz@gmx.de>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 90f30eccf41302a2542f5d374af243061902bd98
Merge: c2481cc... 4598af3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 9 11:45:18 2007 -0700

    Merge branch 'for-2.6.21' of master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * 'for-2.6.21' of master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] intel_agp: PCI id update for Intel 965GM

commit 199c1167f5e8123a9b0a9ab1e8b78a6aa4b2733f
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Thu Mar 22 00:40:06 2007 +0100

    ieee1394: change deprecation status of dv1394
    
    Nobody ported ffmpeg from dv1394 to rawiso yet, and there is no
    justification to remove dv1394 right now.
    
    Nevertheless, a strong deprecation of this ABI makes a lot of sense,
    especially as Kristian H's drivers shape up to be an attractive
    alternative to the existing ones.  But we don't have a schedule at the
    moment.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit c2481cc4a8727141474472cb1301fce989ce0865
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sun Apr 8 16:04:04 2007 -0700

    [PATCH] i386: irqbalance_disable() section fix
    
    WARNING: arch/i386/kernel/built-in.o - Section mismatch: reference to .init.text:irqbalance_disable from .text between 'quirk_intel_irqbalance' (at offset 0x80a5) and 'i8237A_suspend'
    
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c993c7355df55283bc9a539652be44cd81b8c6dd
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sun Apr 8 16:04:03 2007 -0700

    [PATCH] x86_64 early quirks: fix early_qrk[] section tag
    
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:nvidia_bugs from .data between 'early_qrk' (at offset 0x8428) and 'enable_cpu_hotplug'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:via_bugs from .data between 'early_qrk' (at offset 0x8438) and 'enable_cpu_hotplug'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:ati_bugs from .data between 'early_qrk' (at offset 0x8448) and 'enable_cpu_hotplug'
    
    The compiler is putting it into .data because the __initdata is in the wrong
    place.
    
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b6d2cccb55b518956a7de75182757276a2057869
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Apr 8 16:04:02 2007 -0700

    [PATCH] omap_cf: oops-on-suspend fix
    
    Convert omap_cf into a platform_driver ...  this resolves oopsing during
    suspend/resume.
    
    Evidently folk haven't tried suspend/resume on an OSK (the main platform
    for this driver) since September or so, which is when platform_device
    learned about suspend_late()/resume_early() and stopped being able to
    suspend/resume without a platform_driver.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 49f19710512c825aaea73b9207b3a848027cda1d
Author: Zachary Amsden <zach@vmware.com>
Date:   Sun Apr 8 16:04:01 2007 -0700

    [PATCH] Proper fix for highmem kmap_atomic functions for VMI for 2.6.21
    
    Since lazy MMU batching mode still allows interrupts to enter, it is
    possible for interrupt handlers to try to use kmap_atomic, which fails when
    lazy mode is active, since the PTE update to highmem will be delayed.  The
    best workaround is to issue an explicit flush in kmap_atomic_functions
    case; this is the only way nested PTE updates can happen in the interrupt
    handler.
    
    Thanks to Jeremy Fitzhardinge for noting the bug and suggestions on a fix.
    
    This patch gets reverted again when we start 2.6.22 and the bug gets fixed
    differently.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a5bfffac645a7b2d8119f8bbae34df5c94832799
Author: Timo Savola <tsavola@movial.fi>
Date:   Sun Apr 8 16:04:00 2007 -0700

    [PATCH] fuse: validate rootmode mount option
    
    If rootmode isn't valid, we hit the BUG() in fuse_init_inode.  Now
    EINVAL is returned.
    
    Signed-off-by: Timo Savola <tsavola@movial.fi>
    Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4598af33d9143942f00cf7692b247027aba35316
Author: Wang Zhenyu <zhenyu.z.wang@intel.com>
Date:   Mon Apr 9 08:51:36 2007 +0800

    [AGPGART] intel_agp: PCI id update for Intel 965GM
    
    Update PCI id info for Intel 965GM chipset.
    
    Signed-off-by: Wang Zhenyu <zhenyu.z.wang@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit d354d2f4a6fc1b722c2e464a8b3cfd2f6afb304b
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Apr 7 10:18:33 2007 -0700

    sched.c: Remove unused variable 'relative'
    
    Getting rid of the p->children printout in show_task() left behind an
    unused variable.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 35f6f753b79705bc4b62da5dcc218d75ffa88370
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Apr 6 21:18:06 2007 +0200

    [PATCH] sched: get rid of p->children use in show_task()
    
    the p->parent PID printout gives us all the information about the
    task tree that we need - the eldest_child()/older_sibling()/
    younger_sibling() printouts are mostly historic and i do not
    remember ever having used those fields. (IMO in fact they confuse
    the SysRq-T output.) So remove them.
    
    This code has sentimental value though, those fields and
    printouts are one of the oldest ones still surviving from
    Linux v0.95's kernel/sched.c:
    
            if (p->p_ysptr || p->p_osptr)
                    printk("   Younger sib=%d, older sib=%d\n\r",
                            p->p_ysptr ? p->p_ysptr->pid : -1,
                            p->p_osptr ? p->p_osptr->pid : -1);
            else
                    printk("\n\r");
    
    written 15 years ago, in early 1992.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7f30e49ee1c2c1e95ce9d2ccce5221ddb793dd60
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 7 14:59:41 2007 +0900

    [PATCH] irq-devres: fix failure path of devm_request_irq()
    
    devres should be deallocated with devres_free() not kfree().  This bug
    corrupts slab on IRQ request failure.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 995f054f2a342f8505fed4f8395d12c0f5966414
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Apr 7 12:05:00 2007 +0200

    [PATCH] high-res timers: resume fix
    
    Soeren Sonnenburg reported that upon resume he is getting
    this backtrace:
    
     [<c0119637>] smp_apic_timer_interrupt+0x57/0x90
     [<c0142d30>] retrigger_next_event+0x0/0xb0
     [<c0104d30>] apic_timer_interrupt+0x28/0x30
     [<c0142d30>] retrigger_next_event+0x0/0xb0
     [<c0140068>] __kfifo_put+0x8/0x90
     [<c0130fe5>] on_each_cpu+0x35/0x60
     [<c0143538>] clock_was_set+0x18/0x20
     [<c0135cdc>] timekeeping_resume+0x7c/0xa0
     [<c02aabe1>] __sysdev_resume+0x11/0x80
     [<c02ab0c7>] sysdev_resume+0x47/0x80
     [<c02b0b05>] device_power_up+0x5/0x10
    
    it turns out that on resume we mistakenly re-enable interrupts too
    early.  Do the timer retrigger only on the current CPU.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Soeren Sonnenburg <kernel@nn7.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bbef618190fb484b28b7d441e6fc5d524027c4fa
Merge: a21bd69... b8fa2f3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Apr 6 18:15:30 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [TG3]: Fix crash during tg3_init_one().
      [IPV6]: Revert recent change to rt6_check_dev().
      [XFRM]: beet: fix IP option decapsulation
      [XFRM]: beet: fix beet mode decapsulation
      [XFRM]: beet: use IPOPT_NOP for option padding
      [XFRM]: beet: fix IP option encapsulation

commit b8fa2f3a82069304acac1f9e957d491585f4f49a
Author: Michael Chan <mchan@broadcom.com>
Date:   Fri Apr 6 17:35:37 2007 -0700

    [TG3]: Fix crash during tg3_init_one().
    
    The driver will crash when the chip has been initialized by EFI before
    tg3_init_one().  In this case, the driver will call tg3_chip_reset()
    before allocating consistent memory.
    
    The bug is fixed by checking for tp->hw_status before accessing it
    during tg3_chip_reset().
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2e0d232bff31973f58c33412b45fce51b6770698
Author: Mike Habeck <habeck@sgi.com>
Date:   Fri Apr 6 12:04:39 2007 -0500

    [IA64] SGI Altix : fix pcibr_dmamap_ate32() bug
    
    On a SGI Altix TIOCP based PCI bus we need to include the ATE_PIO attribute
    bit if we're mapping a 32bit MSI address.
    
    Signed-off-by: Mike Habeck <habeck@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8a3a78d1498c4c13c3ec235a4b6338624b6ef68d
Author: Venki Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Fri Apr 6 10:04:49 2007 -0700

    [IA64] Fix CPU freq displayed in /proc/cpuinfo
    
    My patch: git commit=95235ca2c20ac0b31a8eb39e2d599bcc3e9c9a10 introduced a bug
    in IA64 cpuinfo output.
    
    Patch changed the proc_freq from 1HZ resolution to 1KHz resolution, but left
    format string unchanged at " %lu.%06lu". Below is the fix.
    
    Thanks to Bjorn for catching this.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9438a1218eceb1b3891d242da01bc3cc82cb7342
Author: Ishimatsu Yasuaki <isimatu.yasuaki@jp.fujitsu.com>
Date:   Fri Apr 6 16:51:12 2007 +0900

    [IA64] Fix wrong assumption about irq and vector in msi_ia64.c
    
    This patch fixes a wrong assumption in ia64 MSI code that IRQ equals
    vector.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Yasuaki Ishimatsu <isimatu.yasuaki@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit fbff71e1ec1c4695d51d496a53228ecdcb6361eb
Author: Russ Anderson <rja@sgi.com>
Date:   Fri Mar 30 17:13:18 2007 -0500

    [IA64] BTE error timer fix
    
    The bte recovery_timer was not being set correctly.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 161980f4c6b846625efe6227420175cb41477de3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Apr 6 11:42:27 2007 -0700

    [IPV6]: Revert recent change to rt6_check_dev().
    
    This reverts a0d78ebf3a0e33a1aeacf2fc518ad9273d6a1c2f
    
    It causes pings to link-local addresses to fail.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a21bd69e1509b43823c317c3bf3f7ffa99884356
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Apr 5 19:36:56 2007 -0700

    Linux 2.6.21-rc6
    
    .. perfect? Ahh, sure.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 254d0d24e31c3df64ccfff349c9aa9d1e5989819
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 5 16:03:33 2007 -0700

    [XFRM]: beet: fix IP option decapsulation
    
    Beet mode looks for the beet pseudo header after the outer IP header,
    which is wrong since that is followed by the ESP header. Additionally
    it needs to adjust the packet length after removing the pseudo header
    and point the data pointer to the real data location.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4b1e840629562953d81c9fe0a3a67473f3d993c
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 5 15:59:41 2007 -0700

    [XFRM]: beet: fix beet mode decapsulation
    
    Beet mode decapsulation fails to properly set up the skb pointers, which
    only works by accident in combination with CONFIG_NETFILTER, since in that
    case the skb is fixed up in xfrm4_input before passing it to the netfilter
    hooks.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 04fef9893a1fa5d429522e09bc9591736408f2e8
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 5 15:54:39 2007 -0700

    [XFRM]: beet: use IPOPT_NOP for option padding
    
    draft-nikander-esp-beet-mode-07.txt states "The padding MUST be filled
    with NOP options as defined in Internet Protocol [1] section 3.1
    Internet header format.", so do that.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5027c9a896fbe05367fb893a274deca5114bfd0
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Apr 5 15:54:02 2007 -0700

    [XFRM]: beet: fix IP option encapsulation
    
    Beet mode calculates an incorrect value for the transport header location
    when IP options are present, resulting in encapsulation errors.
    
    The correct location is 4 or 8 bytes before the end of the original IP
    header, depending on whether the pseudo header is padded.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1d426d6418d1914b592c9c307c02e488d9182fa8
Author: Erez Zilber <erezz@voltaire.com>
Date:   Sun Apr 1 12:53:43 2007 +0200

    IB/iser: Don't defer connection failure notification to workqueue
    
    When a connection is terminated asynchronously from the iSCSI layer's
    perspective, iSER needs to notify the iSCSI layer that the connection
    has failed.  This is done using a workqueue (switched to from the iSER
    tasklet context).  Meanwhile, the connection object (that holds the
    work struct) is released.  If the workqueue function wasn't called
    yet, it will be called later with a NULL pointer, which will crash the
    kernel.
    
    The context switch (tasklet to workqueue) is not required, and
    everything can be done from the iSER tasklet. This eliminates the NULL
    work struct bug (and simplifies the code).
    
    Signed-off-by: Erez Zilber <erezz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8da7d1bae512aee155ef02f7ab1266358842e1fd
Author: Adam Kropelin <akropel1@rochester.rr.com>
Date:   Thu Apr 5 16:06:30 2007 +0200

    HID: Do not discard truncated input reports
    
    Truncated reports should not be discarded since it prevents buggy
    devices from communicating with userspace.
    
    Prior to the regession introduced in 2.6.20, a shorter-than-expected
    report in hid_input_report() was passed thru after having the missing
    bytes cleared. This behavior was established over a few patches in the
    2.6.early-teens days, including commit
    cd6104572bca9e4afe0dcdb8ecd65ef90b01297b.
    
    This patch restores the previous behavior and fixes the regression.
    
    Signed-off-by: Adam Kropelin <akropel1@rochester.rr.com>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 4c4d51a7316b164ba08af61aa0c124a88bc60450
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Apr 5 00:07:39 2007 -0700

    [IPSEC]: Reject packets within replay window but outside the bit mask
    
    Up until this point we've accepted replay window settings greater than
    32 but our bit mask can only accomodate 32 packets.  Thus any packet
    with a sequence number within the window but outside the bit mask would
    be accepted.
    
    This patch causes those packets to be rejected instead.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 60e5c166413f17d5ef00b4c1f398dbd44291309a
Author: Mitsuru Chinen <mitch@linux.vnet.ibm.com>
Date:   Wed Apr 4 23:54:59 2007 -0700

    [IPv6]: Exclude truncated packets from InHdrErrors statistics
    
    Incoming trancated packets are counted as not only InTruncatedPkts but
    also InHdrErrors. They should be counted as InTruncatedPkts only.
    
    Signed-off-by: Mitsuru Chinen <mitch@linux.vnet.ibm.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 75559c167bddc1254db5bcff032ad5eed8bd6f4a
Author: Jean Delvare <jdelvare@suse.de>
Date:   Wed Apr 4 23:52:46 2007 -0700

    [APPLETALK]: Fix a remotely triggerable crash
    
    When we receive an AppleTalk frame shorter than what its header says,
    we still attempt to verify its checksum, and trip on the BUG_ON() at
    the end of function atalk_sum_skb() because of the length mismatch.
    
    This has security implications because this can be triggered by simply
    sending a specially crafted ethernet frame to a target victim,
    effectively crashing that host. Thus this qualifies, I think, as a
    remote DoS. Here is the frame I used to trigger the crash, in npg
    format:
    
    <Appletalk Killer>
    {
    # Ethernet header -----
    
      XX XX XX XX XX XX  # Destination MAC
      00 00 00 00 00 00  # Source MAC
      00 1D              # Length
    
    # LLC header -----
    
      AA AA 03
      08 00 07 80 9B  # Appletalk
    
    # Appletalk header -----
    
      00 1B        # Packet length (invalid)
      00 01        # Fake checksum
      00 00 00 00  # Destination and source networks
      00 00 00 00  # Destination and source nodes and ports
    
    # Payload -----
    
      0C 0D 0E 0F 10 11 12 13
      14
    }
    
    The destination MAC address must be set to those of the victim.
    
    The severity is mitigated by two requirements:
    * The target host must have the appletalk kernel module loaded. I
      suspect this isn't so frequent.
    * AppleTalk frames are non-IP, thus I guess they can only travel on
      local networks. I am no network expert though, maybe it is possible
      to somehow encapsulate AppleTalk packets over IP.
    
    The bug has been reported back in June 2004:
      http://bugzilla.kernel.org/show_bug.cgi?id=2979
    But it wasn't investigated, and was closed in July 2006 as both
    reporters had vanished meanwhile.
    
    This code was new in kernel 2.6.0-test5:
      http://git.kernel.org/?p=linux/kernel/git/tglx/history.git;a=commitdiff;h=7ab442d7e0a76402c12553ee256f756097cae2d2
    And not modified since then, so we can assume that vanilla kernels
    2.6.0-test5 and later, and distribution kernels based thereon, are
    affected.
    
    Note that I still do not know for sure what triggered the bug in the
    real-world cases. The frame could have been corrupted by the kernel if
    we have a bug hiding somewhere. But more likely, we are receiving the
    faulty frame from the network.
    
    Signed-off-by: Jean Delvare <jdelvare@suse.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 58e949139014a852a83b5ef071136b1f50c86ad1
Author: Maciej Zenczykowski <maze@google.com>
Date:   Wed Apr 4 19:08:27 2007 -0700

    [PATCH] ia64: desc_empty thinko/typo fix
    
    Just a one-byter for an ia64 thinko/typo - already fixed for i386 and x86_64.
    
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ba6e8564f459211117ce300eae2c7fdd23befe34
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Wed Apr 4 19:08:25 2007 -0700

    [PATCH] Fix build error on zs serial driver
    
    drivers/tc/zs.c:73:24: error: asm/dec/tc.h: No such file or directory
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Acked-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 98de9e3ba23422b5c45b91c93aec1cb1e17514dc
Author: john stultz <johnstul@us.ibm.com>
Date:   Wed Apr 4 19:08:24 2007 -0700

    [PATCH] fix jiffies clocksource inittime
    
    In debugging a problem w/ the -rt tree, I noticed that on systems that mark
    the tsc as unstable before it is registered, the TSC would still be
    selected and used for a short period of time.  Digging in it looks to be a
    result of the mix of the clocksource list changes and my clocksource
    initialization changes.
    
    With the -rt tree, using a bad TSC, even for a short period of time can
    results in a hang at boot.  I was not able to reproduce this hang w/
    mainline, but I'm not completely certain that someone won't trip on it.
    
    This patch resolves the issue by initializing the jiffies clocksource
    earlier so a bad TSC won't get selected just because nothing else is yet
    registered.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7f42d3b8a72ab585f3166a269276c8cca12088af
Author: Mike Miller <mikem@beardog.cca.cpqcorp.net>
Date:   Wed Apr 4 19:08:23 2007 -0700

    [PATCH] cciss: add init of drv->cylinders back to cciss_geometry_inquiry
    
    This patch adds initialization of drv->cylinders back into the failing case in
    cciss_geometry_inquiry. I inadvertently removed it in one my 2TB updates.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2363cc0264c42636e9e7622f78dde5c2f66beb8e
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Apr 4 19:08:22 2007 -0700

    [PATCH] remove protection of LANANA-reserved majors
    
    Revert all this.  It can cause device-mapper to receive a different major from
    earlier kernels and it turns out that the Amanda backup program (via GNU tar,
    apparently) checks major numbers on files when performing incremental backups.
    
    Which is a bit broken of Amanda (or tar), but this feature isn't important
    enough to justify the churn.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c75fd0ee6e1750e6e527ed1d4aeee66739d9ad79
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Wed Apr 4 19:08:21 2007 -0700

    [PATCH] swsusp: fix memory shrinker
    
    Fix a bug in the swsusp's memory shrinker that causes some systems using
    highmem to refuse to suspend to disk if image_size is set above 1/2 of
    available RAM.
    
    Special thanks to Jiri Slaby for reporting the problem and assistance in
    debugging it.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Jiri Slaby <jirislaby@gmail.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 418106d6248618bca1add65168a82974c72206db
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Apr 4 19:08:21 2007 -0700

    [PATCH] net/sunrpc/svcsock.c: fix a check
    
    The return value of kernel_recvmsg() should be assigned to "err", not
    compared with the random value of a never initialized "err" (and the "< 0"
    check wrongly always returned false since == comparisons never have a
    result < 0).
    
    Spotted by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5792a2856a63cdc568e08a7d6f9b2413d9217b3e
Author: Neil Brown <neilb@suse.de>
Date:   Wed Apr 4 19:08:18 2007 -0700

    [PATCH] md: avoid a deadlock when removing a device from an md array via sysfs
    
    A device can be removed from an md array via e.g.
      echo remove > /sys/block/md3/md/dev-sde/state
    
    This will try to remove the 'dev-sde' subtree which will deadlock
    since
      commit e7b0d26a86943370c04d6833c6edba2a72a6e240
    
    With this patch we run the kobject_del via schedule_work so as to
    avoid the deadlock.
    
    Cc: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 456a09dce9ca9b0013cabcda918aee851a04471d
Author: Thomas Bittermann <t.bittermann@online.de>
Date:   Wed Apr 4 22:20:54 2007 +0200

    [PATCH] kernel/time.c: add missing symbol exports
    
    This patch adds 2 missing symbol exports: jiffies_to_timeval() and
    timeval_to_jiffies().  The (not yet merged) dm-raid4-5 module will need
    them, and they used to be indirectly exported by virtue of being inline
    functions.
    
    Commit 8b9365d753d9870bb6451504c13570b81923228f ("[PATCH] Uninline
    jiffies.h functions") uninlined them, and thus modules now need them
    explicitly exported to use them.
    
    Signed-off-by: Thomas Bittermann <t.bittermann@online.de>
    Acked-by: Andrew Morton <akpm@linux-foundation.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: john stultz <johnstul@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8d00647f2cf0780497274a4b0ab0e66509579459
Merge: 9274982... 8c3ce5b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 4 10:11:16 2007 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] cio: Fix handling of interrupt for csch().
      [S390] page_mkclean data corruption.

commit 927498217c104aab27b81c785ce3a489491a8964
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Apr 3 00:07:30 2007 -0600

    [PATCH] net: Ignore sysfs network device rename bugs.
    
    The generic networking code ensures that no two networking devices
    have the same name, so  there is no time except when sysfs has
    implementation bugs that device_rename when called from
    dev_change_name will fail.
    
    The current error handling for errors from device_rename in
    dev_change_name is wrong and results in an unusable and unrecoverable
    network device if device_rename is happens to return an error.
    
    This patch removes the buggy error handling.  Which confines the mess
    when device_rename hits a problem to sysfs, instead of propagating it
    the rest of the network stack.  Making linux a little more robust.
    
    Without this patch you can observe what happens when sysfs has a bug
    when CONFIG_SYSFS_DEPRECATED is not set and you attempt to rename
    a real network device to a name like (broken_parity_status, device,
    modalias, power, resource2, subsystem_vendor, class,  driver, irq,
    msi_bus, resource, subsystem, uevent, config, enable, local_cpus,
    numa_node, resource0, subsystem_device, vendor)
    
    Greg has a patch that fixes the sysfs bugs but he doesn't trust it
    for a 2.6.21 timeframe.  This patch which just ignores errors should
    be safe and it keeps the system from going completely wacky.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e94a40c508dbdce872c79a13b35830c050d71e23
Author: David Howells <dhowells@redhat.com>
Date:   Mon Apr 2 23:46:28 2007 +0100

    [PATCH] SLAB: Mention slab name when listing corrupt objects
    
    Mention the slab name when listing corrupt objects.  Although the function
    that released the memory is mentioned, that is frequently ambiguous as such
    functions often release several pieces of memory.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bb4899dbef2650288d20251a736243472f050d8b
Merge: 36e337d... 6f23a31...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 4 08:44:40 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      libata: Limit ATAPI DMA to R/W commands only for TORiSAN DVD drives (take 3)
      libata: Limit max sector to 128 for TORiSAN DVD drives (take 3)
      libata: Clear tf before doing request sense (take 3)
      libata: reorder HSM_ST_FIRST for easier decoding (take 3)
      libata bugfix: preserve LBA bit for HDIO_DRIVE_TASK
      2.6.21 fix lba48 bug in libata fill_result_tf()

commit 36e337d0244ddcf4317f7d7c1144b9adfc8e5e3a
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Apr 2 22:05:29 2007 -0600

    [PATCH] libata: add NCQ blacklist entries from Silicon Image Windows driver (v2)
    
    This adds some NCQ blacklist entries taken from the Silicon Image 3124/3132
    Windows driver .inf files. There are some confirming reports of problems
    with these drives under Linux (for example http://lkml.org/lkml/2007/3/4/178)
    so let's disable NCQ on these drives.
    
     [ I'm personally starting to wonder whether we shouldn't disable NCQ by
       default, and perhaps have a white-list. There seems to be a *lot* of
       drives that do this wrong..   - Linus ]
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Acked-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b6d3d16e26da996d301aec0bbce5c26a0cdcf6ac
Merge: 348e3fd... 1371fa6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Apr 4 08:36:01 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      r8169: fix suspend/resume for down interface
      r8169: issue request_irq after the private data are completely initialized
      b44: fix IFF_ALLMULTI handling of CAM slots
      cxgb3 - Firwmare update
      cxgb3 - Tighten xgmac workaround
      cxgb3 - detect NIC only adapters
      cxgb3 - Safeguard TCAM size usage

commit 8c3ce5bece2e6e233c1d05b460883046d020fbf9
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Wed Apr 4 14:37:11 2007 +0200

    [S390] cio: Fix handling of interrupt for csch().
    
    Wipe internal irb if the clear function bit is set before accumulating
    bits from the irb in order to follow hardware behaviour.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 6e1beb3c22496f6e1f1feba8ae74da16f131684c
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Apr 4 14:37:10 2007 +0200

    [S390] page_mkclean data corruption.
    
    The git commit c2fda5fed81eea077363b285b66eafce20dfd45a which
    added the page_test_and_clear_dirty call to page_mkclean and the
    git commit 7658cc289288b8ae7dd2c2224549a048431222b3 which fixes
    the "nasty and subtle race in shared mmap'ed page writeback"
    problem in clear_page_dirty_for_io cause data corruption on s390.
    
    The effect of the two changes is that for every call to
    clear_page_dirty_for_io a page_test_and_clear_dirty is done. If
    the per page dirty bit is set set_page_dirty is called. Strangly
    clear_page_dirty_for_io is called for not-uptodate pages, e.g.
    over this call-chain:
    
     [<000000000007c0f2>] clear_page_dirty_for_io+0x12a/0x130
     [<000000000007c494>] generic_writepages+0x258/0x3e0
     [<000000000007c692>] do_writepages+0x76/0x7c
     [<00000000000c7a26>] __writeback_single_inode+0xba/0x3e4
     [<00000000000c831a>] sync_sb_inodes+0x23e/0x398
     [<00000000000c8802>] writeback_inodes+0x12e/0x140
     [<000000000007b9ee>] wb_kupdate+0xd2/0x178
     [<000000000007cca2>] pdflush+0x162/0x23c
    
    The bad news now is that page_test_and_clear_dirty might claim
    that a not-uptodate page is dirty since SetPageUptodate which
    resets the per page dirty bit has not yet been called. The page
    writeback that follows clobbers the data on disk.
    
    The simplest solution to this problem is to move the call to
    page_test_and_clear_dirty under the "if (page_mapped(page))".
    If a file backed page is mapped it is uptodate.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 6f23a31d1cbe791a1ce86ffa9b23251ab0a1ef45
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Apr 2 11:39:25 2007 +0800

    libata: Limit ATAPI DMA to R/W commands only for TORiSAN DVD drives (take 3)
    
    patch 4/4:
    
      Limit ATAPI DMA to R/W commands only for TORiSAN DRD-N216 DVD-ROM drives
      (http://bugzilla.kernel.org/show_bug.cgi?id=6710)
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 18d6e9d51891f91af4e7351cbab3cb180bb9f430
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Apr 2 11:34:15 2007 +0800

    libata: Limit max sector to 128 for TORiSAN DVD drives (take 3)
    
    patch 3/4:
      The TORiSAN drive locks up when max sector == 256.
      Limit max sector to 128 for the TORiSAN DRD-N216 drives.
      (http://bugzilla.kernel.org/show_bug.cgi?id=6710)
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 56287768e31268969abd94b38b931a29d1ced1ce
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Apr 2 11:30:46 2007 +0800

    libata: Clear tf before doing request sense (take 3)
    
    patch 2/4:
      Clear tf before doing request sense.
    
    This fixes the AOpen 56X/AKH timeout problem.
    (http://bugzilla.kernel.org/show_bug.cgi?id=8244)
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7152764700559b6a4041fdaba345df9a5cd962f0
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Apr 2 11:28:52 2007 +0800

    libata: reorder HSM_ST_FIRST for easier decoding (take 3)
    
    patch 1/4:
      Reorder HSM_ST_FIRST, such that the task state transition is easier decoded with human eyes.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 277239f228654fc03affdf2aa0e7a3969f420415
Author: Mark Lord <mlord@pobox.com>
Date:   Fri Mar 30 17:45:52 2007 -0400

    libata bugfix: preserve LBA bit for HDIO_DRIVE_TASK
    
    Preserve the LBA bit in the DevSel/Head register for HDIO_DRIVE_TASK.
    
    Signed-off-by:  Mark Lord <mlord@pobox.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4742d54fa4b391342dfb8f34de14d51da101fb39
Author: Mark Lord <liml@rtr.ca>
Date:   Mon Apr 2 16:20:35 2007 -0400

    2.6.21 fix lba48 bug in libata fill_result_tf()
    
    Current 2.6.21 libata does the following:
    
    void ata_tf_read(struct ata_port *ap, struct ata_taskfile *tf)
    {
            struct ata_ioports *ioaddr = &ap->ioaddr;
    
            tf->command = ata_check_status(ap);
    	...
            if (tf->flags & ATA_TFLAG_LBA48) {
                    iowrite8(tf->ctl | ATA_HOB, ioaddr->ctl_addr);
                    tf->hob_feature = ioread8(ioaddr->error_addr);
                    ...
            }
    }
    ...
    static void fill_result_tf(struct ata_queued_cmd *qc)
    {
            struct ata_port *ap = qc->ap;
    
            ap->ops->tf_read(ap, &qc->result_tf);
            qc->result_tf.flags = qc->tf.flags;
    }
    
    Based on this, those last two statements fill_result_tf()
    appear to me to be in the wrong order, in that the tf->flags
    are uninitialized at the point where tf_read() is invoked.
    So for lba48 commands, tf_read() won't be reading back the
    full lba48 register contents..
    
    Correct?
    
    This patch corrects fill_result_tf() so that the flags
    get copied to result_tf before they are used by tf_read().
    
    Signed-off-by:  Mark Lord <mlord@pobox.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1371fa6db0bbb8e23f988a641f5ae7361bc629dd
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Mon Apr 2 23:01:11 2007 +0200

    r8169: fix suspend/resume for down interface
    
    The PM hooks are no-op if the r8169 interface is down (i.e. !IFF_UP).
    However, as the chipset is enabled, the device will not work after a
    suspend/resume cycle. The patch always issue the required PCI suspend
    sequence and removes the module unload/reload workaround.
    
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 99f252b097a3bd6280047ba2175b605671da4a23
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Mon Apr 2 22:59:59 2007 +0200

    r8169: issue request_irq after the private data are completely initialized
    
    The irq handler schedules a NAPI poll request unconditionally as soon as
    the status register is not clean. It has been there - and wrong - for
    ages but a recent timing change made it apparently easier to trigger.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Cc: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cda22aa94d3fe3942476b3652b8b92c653b96ee3
Author: Bill Helfinstine <bhelf@flitterfly.whirpon.com>
Date:   Sun Apr 1 13:10:28 2007 -0400

    b44: fix IFF_ALLMULTI handling of CAM slots
    
    If you set the IFF_ALLMULTI flag on a b44 device, or if you join more than
    B44_MCAST_TABLE_SIZE multicast groups, the device will stop receiving unicast
    messages.  This is because the __b44_set_mac_addr call sets the zeroth CAM
    entry to the MAC address of the device, and then the loop at line 1722
    proceeds to overwrite it unless the value of i is set by the __b44_load_mcast
    call.  However, when IFF_ALLMULTI is set, that call is bypassed, leaving i set
    to zero.
    
    Fixed by starting the loop at 1 to make it skip the CAM entry for the MAC
    address.
    
    Signed-off-by: Bill Helfinstine <bhelf@flitterfly.whirpon.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7f672cf5b2382310d530469f1f78f69bf48adedc
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Mar 31 00:23:30 2007 -0700

    cxgb3 - Firwmare update
    
    Introduce FW micro version.
    Bump up FW version to 3.3.0
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6d6dabac382604db22ff51c5e0d25af18529ac8b
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Mar 31 00:23:24 2007 -0700

    cxgb3 - Tighten xgmac workaround
    
    Run the watchdog task when the link is up.
    Flush the XGMAC Tx FIFO when the link drops.
    
    Also remove a statistics update that should have gone
    in the previous modification of xgmac.c.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8ac3ba68e25a73594646ec30b7c482b364644c92
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Mar 31 00:23:19 2007 -0700

    cxgb3 - detect NIC only adapters
    
    Differentiate NIC only adapters from RNICs.
    Initialize offload capabilities for RNICs only.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9f238486f5438b2e44f760b11fa3a08714c1ddb6
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Mar 31 00:23:13 2007 -0700

    cxgb3 - Safeguard TCAM size usage
    
    Ensure that the TCAM active region size is at least 16.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 348e3fd19487534d9d4dd70c3ad0b751afd35792
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Apr 3 01:41:49 2007 -0600

    [PATCH] msi: synchronously mask and unmask msi-x irqs.
    
    This is a simplified and actually more comprehensive form of a bug
    fix from Mitch Williams <mitch.a.williams@intel.com>.
    
    When we mask or unmask a msi-x irqs the writes may be posted because
    we are writing to memory mapped region.  This means the mask and
    unmask don't happen immediately but at some unspecified time in the
    future.  Which is out of sync with how the mask/unmask logic work
    for ioapic irqs.
    
    The practical result is that we get very subtle and hard to track down
    irq migration bugs.
    
    This patch performs a read flush after writes to the MSI-X table for mask
    and unmask operations.  Since the SMP affinity is set while the interrupt
    is masked, and since it's unmasked immediately after, no additional flushes
    are required in the various affinity setting routines.
    
    The testing by Mitch Williams on his especially problematic system should
    still be valid as I have only simplified the code, not changed the
    functionality.
    
    We currently have 7 drivers: cciss, mthca, cxgb3, forceth, s2io,
    pcie/portdrv_core, and qla2xxx in 2.6.21 that are affected by this
    problem when the hardware they driver is plugged into the right slot.
    
    Given the difficulty of reproducing this bug and tracing it down to
    anything that even remotely resembles a cause, even if people are
    being affected we aren't likely to see many meaningful bug reports, and
    the people who see this bug aren't likely to be able to reproduce this
    bug in a timely fashion.  So it is best to get this problem fixed
    as soon as we can so people don't have problems.
    
    Then if people do have a kernel message stating "No irq for vector" we
    will know it is yet another novel cause that needs a complete new
    investigation.
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Mitch Williams <mitch.a.williams@intel.com>
    Acked-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 59117d3f4e3f5a7980353d2f476e516c758ce921
Merge: 856fc00... 8cc574a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 2 15:23:08 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SCSI]: Fix scsi_send_eh_cmnd scatterlist handling
      [SPARC]: Add unsigned to unused bit field in a.out.h

commit 856fc004b82ae31846b3037558ec1b2a6286e629
Merge: 5c0efdb... 8456507...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 2 15:22:20 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [TCP]: Do receiver-side SWS avoidance for rcvbuf < MSS.
      [BNX2]: Fix nvram write logic.
      [IPv6]: Fix incorrect length check in rawv6_sendmsg()
      [NET_SCHED]: cls_basic: fix memory leak in basic_destroy
      [NET]: Change "not found" return value for rule lookup

commit 8cc574a3c5cea70229f243a6b57fd69e60491d82
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Apr 2 14:21:55 2007 -0700

    [SCSI]: Fix scsi_send_eh_cmnd scatterlist handling
    
    This fixes a regression caused by commit:
    
    2dc611de5a3fd955cd0298c50691d4c05046db97
    
    The sense buffer code in scsi_send_eh_cmnd was changed to use
    alloc_page() and a scatter list, but the sense data copy was not
    updated to match so what we actually get in the sense buffer is total
    grabage starting with the kernel address of the struct page we got.
    Basically the stack frame of scsi_send_eh_cmd() is what ends up
    in the sense buffer.
    
    Depending upon how pointers look on a given platform, you can
    end up getting sr_ioctl.c errors when you mount a cdrom.  If
    the CDROM gives a check condition for GPCMD_GET_CONFIGURATION issued
    by drivers/cdrom/cdrom.c:cdrom_mmc_profile(), sr_ioctl will
    spit out this error message in sr_do_ioctl() with the way pointers
    are on sparc64:
    
    		default:
    			printk(KERN_ERR "%s: CDROM (ioctl) error, command: ", cd->cdi.name);
    			__scsi_print_command(cgc->cmd);
    			scsi_print_sense_hdr("sr", &sshdr);
    			err = -EIO;
    
    This is the error Tom Callaway reported in:
    
    http://marc.info/?l=linux-sparc&m=117407453208101&w=2
    
    Anyways, fix this by using page_address(sgl.page) which is OK
    because we know this is low-mem due to GFP_ATOMIC.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: Christoph Hellwig <hch@lst.de>

commit d80f0a4beb15d817bfbb18a29e5ffc1d9dc353ea
Author: Robert Reif <reif@earthlink.net>
Date:   Wed Mar 28 14:21:08 2007 -0700

    [SPARC]: Add unsigned to unused bit field in a.out.h
    
    Add unsigned to unused bit field in a.out.h to make sparse happy.
    
    [ I took care of the sparc64 side as well -DaveM ]
    
    Signed-off-by: Robert Reif <reif@earthlink.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84565070e442583ec67fb08a5962c80203e491c3
Author: John Heffner <jheffner@psc.edu>
Date:   Mon Apr 2 13:56:32 2007 -0700

    [TCP]: Do receiver-side SWS avoidance for rcvbuf < MSS.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5c0efdbc1b1891857659594741a4cb6405b63126
Merge: 9a5ee4c... 1489f90...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 2 13:52:10 2007 -0700

    Merge branch 'master' of ssh://master.kernel.org/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * 'master' of ssh://master.kernel.org/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (5496): Pluto2: fix incorrect TSCR register setting
      V4L/DVB (5495): Tda10086: fix DiSEqC message length

commit c873879c4db31bab414655e191cf56019b48c751
Author: Michael Chan <mchan@broadcom.com>
Date:   Fri Mar 30 14:53:06 2007 -0700

    [BNX2]: Fix nvram write logic.
    
    The nvram dword alignment logic was broken when writing less than 4
    bytes on a non-aligned offset.  It was missing logic to round the
    length to 4 bytes.
    
    The page erase code is also moved so that it is only called when
    using non-buffered flash for better code clarity.
    
    Update version to 1.5.7.
    
    Based on initial patch from Tony Cureington <tony.cureington@hp.com>.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b59e139bbd5c789700aa9cefe7eb6590bc516b86
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 30 14:45:35 2007 -0700

    [IPv6]: Fix incorrect length check in rawv6_sendmsg()
    
    In article <20070329.142644.70222545.davem@davemloft.net> (at Thu, 29 Mar 2007 14:26:44 -0700 (PDT)), David Miller <davem@davemloft.net> says:
    
    > From: Sridhar Samudrala <sri@us.ibm.com>
    > Date: Thu, 29 Mar 2007 14:17:28 -0700
    >
    > > The check for length in rawv6_sendmsg() is incorrect.
    > > As len is an unsigned int, (len < 0) will never be TRUE.
    > > I think checking for IPV6_MAXPLEN(65535) is better.
    > >
    > > Is it possible to send ipv6 jumbo packets using raw
    > > sockets? If so, we can remove this check.
    >
    > I don't see why such a limitation against jumbo would exist,
    > does anyone else?
    >
    > Thanks for catching this Sridhar.  A good compiler should simply
    > fail to compile "if (x < 0)" when 'x' is an unsigned type, don't
    > you think :-)
    
    Dave, we use "int" for returning value,
    so we should fix this anyway, IMHO;
    we should not allow len > INT_MAX.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Acked-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31ba548f9683c5c5809567549b404404b6017088
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Mar 30 13:36:23 2007 -0700

    [NET_SCHED]: cls_basic: fix memory leak in basic_destroy
    
    tp->root is not freed on destruction.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 83886b6b636173b206f475929e58fac75c6f2446
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Fri Mar 30 13:34:27 2007 -0700

    [NET]: Change "not found" return value for rule lookup
    
    This changes the "not found" error return for the lookup
    function to -ESRCH so that it can be distinguished from
    the case where a rule or route resulting in -ENETUNREACH
    has been found during the search.
    
    It fixes a bug where if DECnet was compiled with routing
    support, but no routes were added to the routing table,
    it was failing to fall back to endnode routing.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9a5ee4cc9ef8de5185114237a81f5f395e21d8fd
Merge: b6a8b31... a369a71...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Apr 2 11:41:55 2007 -0700

    Merge branch 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6
    
    * 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6:
      [PATCH] x86: Don't probe for DDC on VBE1.2
      [PATCH] x86-64: Increase NMI watchdog probing timeout
      [PATCH] x86-64: Let oprofile reserve MSR on all CPUs
      [PATCH] x86-64: Disable local APIC timer use on AMD systems with C1E

commit b6a8b316c667f914c198a2de62e6729f359b7931
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Apr 2 14:25:31 2007 +0200

    [PATCH] i386: fix file_read_actor() and pipe_read() for original i386 systems
    
    The __copy_to_user_inatomic() calls in file_read_actor() and pipe_read()
    are broken on original i386 machines, where WP-works-ok == false, as
    __copy_to_user_inatomic() on such systems calls functions which might
    sleep and/or contain cond_resched() calls inside of a kmap_atomic()
    region.
    
    The original check for WP-works-ok was in access_ok(), but got moved
    during the 2.5 series to fix a race vs. swap.
    
    Return the number of bytes to copy in the case where we are in an atomic
    region, so the non atomic code pathes in file_read_actor() and
    pipe_read() are taken.
    
    This could be optimized to avoid the kmap_atomicby moving the check for
    WP-works-ok into fault_in_pages_writeable(), but this is more intrusive
    and can be done later.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f991519c197534811046e5e47389b6fafcdf1e48
Author: Michal Januszewski <spock@gentoo.org>
Date:   Sun Apr 1 23:49:51 2007 -0700

    [PATCH] vt: fix potential race in VT_WAITACTIVE handler
    
    On a multiprocessor machine the VT_WAITACTIVE ioctl call may return 0 if
    fg_console has already been updated in redraw_screen() but the console
    switch itself hasn't been completed.  Fix this by checking fg_console in
    vt_waitactive() with the console sem held.
    
    Signed-off-by: Michal Januszewski <spock@gentoo.org>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1d64b9cb1dc2a7cd521444e3d908adeccd026356
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sun Apr 1 23:49:49 2007 -0700

    [PATCH] Fix microcode-related suspend problem
    
    Fix the regression resulting from the recent change of suspend code
    ordering that causes systems based on Intel x86 CPUs using the microcode
    driver to hang during the resume.
    
    The problem occurs since the microcode driver uses request_firmware() in
    its CPU hotplug notifier, which is called after tasks has been frozen and
    hangs.  It can be fixed by telling the microcode driver to use the
    microcode stored in memory during the resume instead of trying to load it
    from disk.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Adrian Bunk <bunk@stusta.de>
    Cc: Tigran Aivazian <tigran@aivazian.fsnet.co.uk>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: Maxim <maximlevitsky@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0c84ce268b69855919b6ac7edc8f11caf21e9c88
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Sun Apr 1 23:49:48 2007 -0700

    [PATCH] driver core: fix built-in drivers sysfs links
    
    built-in drivers had broken sysfs links that caused bootup hangs for
    certain driver unregistry sequences.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bcd9b89c02295b075fda4bdb666f6641f8212226
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Apr 1 23:49:47 2007 -0700

    [PATCH] rtc-cmos lockdep fix, irq updates
    
    Lockdep reported cmos_suspend() and cmos_resume() calling rtc_update_irq()
    with IRQs enabled; not allowed.
    
    Also fix problems seen on some hardware, whereby false alarm IRQs could be
    reported (primarily to userspace); and update two comments to match changes
    in ACPI.  Those make up most of this patch, by volume.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a2b091dbfb355d0cd35756c6ace0988c9855f3f7
Author: Petr Vandrovec <petr@vandrovec.name>
Date:   Sun Apr 1 23:49:46 2007 -0700

    [PATCH] Correctly report PnP 64bit resources
    
    Change PnP resource handling code to use proper type for resource start and
    length.  Fixes bogus regions reported in /proc/iomem.
    
    I've also made some pointer constant, as they are constant...
    
    Signed-off-by: Petr Vandrovec <petr@vandrovec.name>
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7479d2b90b103f84d956a7177b3f99cbd472b345
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sun Apr 1 23:49:44 2007 -0700

    [PATCH] revert "retries in ext4_prepare_write() violate ordering requirements"
    
    Revert b46be05004abb419e303e66e143eed9f8a6e9f3f.  Same reasoning as for ext3.
    
    Cc: Kirill Korotaev <dev@openvz.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Andrey Savochkin <saw@sw.ru>
    Cc: <linux-ext4@vger.kernel.org>
    Cc: Dmitriy Monakhov <dmonakhov@openvz.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1aa9b4b9bc10a0cf6e6109c2997d759a76e840e5
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sun Apr 1 23:49:43 2007 -0700

    [PATCH] revert "retries in ext3_prepare_write() violate ordering requirements"
    
    Revert e92a4d595b464c4aae64be39ca61a9ffe9c8b278.
    
    Dmitry points out
    
    "When we block_prepare_write() failed while ext3_prepare_write() we jump to
     "failure" label and call ext3_prepare_failure() witch search last mapped bh
     and invoke commit_write untill it.  This is wrong!!  because some bh from
     begining to the last mapped bh may be not uptodate.  As a result we commit to
     disk not uptodate page content witch contains garbage from previous usage."
    
    and
    
    "Unexpected file size increasing."
    
       Call trace the same as it was in first issue but result is different.
       For example we have file with i_size is zero.  we want write two blocks ,
       but fs has only one free block.
    
       ->ext3_prepare_write(...from == 0, to == 2048)
         retry:
         ->block_prepare_write() == -ENOSPC# we failed but allocated one block here.
         ->ext3_prepare_failure()
           ->commit_write( from == 0, to == 1024) # after this i_size becomes 1024 :)
         if (ret == -ENOSPC && ext3_should_retry_alloc(inode->i_sb, &retries))
            goto retry;
    
       Finally when all retries will be spended ext3_prepare_failure return
       -ENOSPC, but i_size was increased and later block trimm procedures can't
       help here.
    
    We don't appear to have the horsepower to fix these issues, so let's put
    things back the way they were for now.
    
    Cc: Kirill Korotaev <dev@openvz.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Ken Chen <kenneth.w.chen@intel.com>
    Cc: Andrey Savochkin <saw@sw.ru>
    Cc: <linux-ext4@vger.kernel.org>
    Cc: Dmitriy Monakhov <dmonakhov@openvz.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 03221702608c60b470fc86a23bdf4bc30e5bd59f
Author: Brian Pomerantz <bapper@piratehaven.org>
Date:   Sun Apr 1 23:49:41 2007 -0700

    [PATCH] fix page leak during core dump
    
    When the dump cannot occur most likely because of a full file system and
    the page to be written is the zero page, the call to page_cache_release()
    is missed.
    
    Signed-off-by: Brian Pomerantz <bapper@mvista.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: David Howells <dhowells@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2400ff77e7025bf6ffb71afdcbfbdd9aa47dfc36
Author: Simon Horman <horms@verge.net.au>
Date:   Sun Apr 1 23:49:40 2007 -0700

    [PATCH] CPUSETS: add mems to basic usage documentation
    
    It seems that there must be at least one node in mems and at least one CPU
    in cpus in order to be able to assign tasks to a cpuset.  This makes sense.
     And I think it would also make sense to include a mems setting in the
    basic usage section of the documentation.
    
    I also wonder if something logged to dmsg, explaining why a write failed,
    would be a good enhancement.  I ended up having rummage arround in cpuset.c
    in order to work out why my configuration was failing.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Acked-by: Paul Jackson <pj@sgi.com>
    Cc: Paul Menage <menage@google.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bf703c3f199342da440a30798b6120f391741ffe
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Apr 1 23:49:38 2007 -0700

    [PATCH] drivers/mfd/sm501.c: fix an off-by-one
    
    Fix an off-by-one spotted by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Ben Dooks <ben-linux@fluff.org>
    Cc: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 10fa1155a2c3282f421a74fedfad1957e8bdc86c
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sun Apr 1 23:49:37 2007 -0700

    [PATCH] uml: fix unreasonably long udelay
    
    Currently we have a confused udelay implementation.
    
    * __const_udelay does not accept usecs but xloops in i386 and x86_64
    * our implementation requires usecs as arg
    * it gets a xloops count when called by asm/arch/delay.h
    
    Bugs related to this (extremely long shutdown times) where reported by some
    x86_64 users, especially using Device Mapper.
    
    To hit this bug, a compile-time constant time parameter must be passed -
    that's why UML seems to work most times.  Fix this with a simple udelay
    implementation.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 05565b65a5309e3e5c86db1975b57f75661bee8f
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sun Apr 1 23:49:35 2007 -0700

    [PATCH] proc: fix linkage with CONFIG_SYSCTL=y, CONFIG_PROC_SYSCTL=n
    
    We're using #ifdef CONFIG_SYSCTL, but we should be using CONFIG_PROC_SYSCTL,
    so we get
    
     fs/built-in.o: In function `proc_root_init':
     /usr/src/linux/fs/proc/root.c:83: undefined reference to `proc_sys_init'
    
    Fix that up and remove an ifdef-in-C.
    
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Helge Hafting <helgehaf@aitel.hist.no>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1489f90a49f0603a393e1800d729050f6e332bec
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Mon Apr 2 10:44:35 2007 -0300

    V4L/DVB (5496): Pluto2: fix incorrect TSCR register setting
    
    The ADEF bits in the TSCR register have different meanings in read and
    write mode. For this reason ADEF has to be reset on every
    read-modify-write operation.
    This patch introduces a special write function for this register, which
    takes care of it.
    
    Thanks to Holger Magnussen for pointing my nose at this problem.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d420cb44693b8370cbf06c3e31b4b5dec66c9f86
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Sun Apr 1 19:29:16 2007 -0300

    V4L/DVB (5495): Tda10086: fix DiSEqC message length
    
    Setting the message length to zero means to send one byte, so you need a
    subtraction instead of an addition.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a369a7100da3b4f5c2269be25160653d2c7013fc
Author: Zwane Mwaikambo <zwane@infradead.org>
Date:   Mon Apr 2 12:14:12 2007 +0200

    [PATCH] x86: Don't probe for DDC on VBE1.2
    
    VBE1.2 doesn't support function 15h (DDC) resulting in a 'hang' whilst
    uncompressing kernel with some video cards. Make sure we check VBE version
    before fiddling around with DDC.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=1458
    
    Opened: 2003-10-30 09:12 Last update: 2007-02-13 22:03
    
    Much thanks to Tobias Hain for help in testing and investigating the bug.
    Tested on;
    
    i386, Chips & Technologies 65548 VESA VBE 1.2
    CONFIG_VIDEO_SELECT=Y
    CONFIG_FIRMWARE_EDID=Y
    
    Untested on x86_64.
    
    Signed-off-by: Zwane Mwaikambo <zwane@infradead.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 0fb2ebfcb5f0b1916ed5ff260ec953ef616fec7c
Author: Andi Kleen <ak@suse.de>
Date:   Mon Apr 2 12:14:12 2007 +0200

    [PATCH] x86-64: Increase NMI watchdog probing timeout
    
    A 4 core Opteron needs longer than 10 ticks for this.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 89e07569e4e4e935b2cec18e9d94f131aecb2e40
Author: Andi Kleen <ak@suse.de>
Date:   Mon Apr 2 12:14:12 2007 +0200

    [PATCH] x86-64: Let oprofile reserve MSR on all CPUs
    
    The MSR reservation is per CPU and oprofile would only allocate them
    on the CPU it was initialized on. Change this to handle all CPUs.
    
    This also fixes a warning about unprotected use of smp_processor_id()
    in preemptible kernels.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 3556ddfa9284a86a59a9b78fe5894430f6ab4eef
Author: Andi Kleen <ak@suse.de>
Date:   Mon Apr 2 12:14:12 2007 +0200

    [PATCH] x86-64: Disable local APIC timer use on AMD systems with C1E
    
    AMD dual core laptops with C1E do not run the APIC timer correctly
    when they go idle. Previously the code assumed this only happened
    on C2 or deeper.  But not all of these systems report support C2.
    
    Use a AMD supplied snippet to detect C1E being enabled and then disable
    local apic timer use.
    
    This supercedes an earlier workaround using DMI detection of specific systems.
    
    Thanks to Mark Langsdorf for the detection snippet.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 2e175a90047a2dbc76fde169c990164895b25dfc
Merge: c21b1e4... 398e692...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Apr 1 14:43:57 2007 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 4298/1: fix memory barriers for DMA coherent and SMP platforms
      [ARM] 4295/2: Fix error-handling in pxaficp_ir.c (version 2)
      [ARM] Fix __NR_kexec_load
      [ARM] Export dma_channel_active()
      [ARM] 4296/1: ixp4xx: compile fix
      [ARM] 4289/1: AT91: SAM9260 NAND flash timing

commit 398e692fd5cecdd25d311b47bbae69f7bac3a3cb
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Mar 31 12:03:20 2007 +0100

    [ARM] 4298/1: fix memory barriers for DMA coherent and SMP platforms
    
    This patch:
    - Switches mb/rmb/wmb back to being full-blown DMBs on ARM SMP systems,
      since mb/rmb/wmb are required to order Normal memory accesses as well.
    - Enables the use of DMB and ISB on XSC3 (which is an ARMv5TE ISA core
      but conforms to the ARMv6 memory ordering model and supports the
      various ARMv6 barriers.)
    - Makes DMA coherent platforms (only ixp23xx at the moment) map
      mb/rmb/wmb to dmb(), as on DMA coherent platforms, DMA consistent
      mappings are done as Normal mappings, which are weakly ordered.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Acked-by: David Howells <dhowells@redhat.com>
    Acked-by: Catalin Marinas <catalin.marinas@arm.com>
    Acked-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Acked-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9a4d93d49d140c196020a1bae339efcf211cac03
Author: Guennadi Liakhovetski <gl@dsa-ac.de>
Date:   Fri Mar 30 08:49:55 2007 +0100

    [ARM] 4295/2: Fix error-handling in pxaficp_ir.c (version 2)
    
    This patch addresses the following issues with the pxa2xx FIr driver:
    
    1. increment overrun error counter and not frame error counter on ICSR1_ROR bit set in ICSR1.
    2. drop frames reported with the frame error from the IC.
    3. when resetting the receiver and preparing it for the next DMA in pxa_irda_fir_irq() actually clear the Rx FIFO. See description in Table 11-2 in PXA270 Developer's Manual of the RXE bit.
    
    Correction added in version 2: clearing the IC Rx FIFO also has to be done in pxa_irda_fir_dma_tx_irq()
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6c330ba72c45007a9ef681396925c22d11029008
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Apr 1 22:35:01 2007 +0100

    [ARM] Fix __NR_kexec_load
    
    It's __NR_kexec_load, not __NR_sys_kexec_load
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c21b1e4d9b0c263a35f67eed2b025d053566c557
Author: Jan Beulich <jbeulich@novell.com>
Date:   Thu Mar 29 10:27:14 2007 +0100

    [PATCH] kbuild: fix dependency generation
    
    Commit 2e3646e51b2d6415549b310655df63e7e0d7a080 changed the way the
    split config tree is built, but failed to also adjust fixdep accordingly
    - if changing a config option from or to m, files referencing the
    respective CONFIG_..._MODULE (but not the corresponding CONFIG_...)
    didn't get rebuilt.
    
    The problem is that trisate symbol are represent with three different
    symbols:
        SYMBOL=n => no symbol defined
        SYMBOL=y => CONFIG_SYMBOL defined to '1'
        SYMBOL=m => CONFIG_SYMBOL_MODULE defined to '1'
    
    But conf_split_config do not distingush between the =y and =m case, so
    only the =y case is honoured.
    
    This is fixed in fixdep so when a CONFIG symbol with _MODULE is found we
    skip that part and only look for the CONFIG_SYMBOL version.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f5ef2abcbeb5b0be23f7cc610a024b2406e3d8e6
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Apr 1 10:54:13 2007 -0700

    driver core: do not wait unnecessarily in driver_unregister()
    
    Ingo reported that built-in drivers suffered bootup hangs with certain
    driver unregistry sequences, due to sysfs breakage.
    
    Do the minimal fix for v2.6.21: only wait if the driver is a module.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ec14d7964bc3c89fb24c95af00d39033afc32f8e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Mar 31 21:36:53 2007 +0100

    [ARM] Export dma_channel_active()
    
    dma_channel_active() is used by some modules and is part of our
    DMA API, so export it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 755948cfca16c71b16e8ff4a9d4dd31b1c0bf923
Merge: beff804... 9f11672...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 30 20:40:56 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6:
      [CRYPTO] api: Flush the current page right than the next
      [CRYPTO] api: Use the right value when advancing scatterwalk_copychunks

commit 9f1167272890c210399e6b8a32d7cf7295713f5d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Mar 31 12:58:20 2007 +1000

    [CRYPTO] api: Flush the current page right than the next
    
    On platforms where flush_dcache_page is needed we're currently flushing
    the next page right than the one we've just processed.  This patch fixes
    the off-by-one error.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit beff804d8dd360ccb4dd0096c9fd77a93fe9049e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Mar 31 12:14:37 2007 +1000

    [PATCH] crypto api: Use the right value when advancing scatterwalk_copychunks
    
    In the scatterwalk_copychunks loop, We should be advancing by
    len_this_page and not nbytes.  The latter is the total length.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c35e584c087381aaa5f1ed40a28b978535c18fb2
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Mar 31 03:20:27 2007 +0200

    [PATCH] uml: fix static linking for real
    
    There was a typo in commit 7632fc8f809a97f9d82ce125e8e3e579390ce2e5,
    preventing it from working - 32bit binaries crashed hopelessly before
    the below fix and work perfectly now.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4ee531a3e661207d4b2174486b0f86017a3adb82
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Mar 31 12:16:20 2007 +1000

    [CRYPTO] api: Use the right value when advancing scatterwalk_copychunks
    
    In the scatterwalk_copychunks loop, We should be advancing by
    len_this_page and not nbytes.  The latter is the total length.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit a5bd1786fb30abe663b904f6d79bba413e9ba883
Merge: 9644292... 4e381a4...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 30 11:49:37 2007 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6:
      Revert "ACPI: parse 2nd MADT by default"

commit 4e381a4f06e3c7b350b55a2636b9d45691780eba
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 30 14:16:10 2007 -0400

    Revert "ACPI: parse 2nd MADT by default"
    
    This reverts commit 09fe58356d148ff66901ddf639e725ca1a48a0af.
    http://bugzilla.kernel.org/show_bug.cgi?id=8283
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 964429252a88cbb4eccd9f024a00813e10d16c71
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Mar 30 09:27:58 2007 +0200

    [PATCH] Maxtor 6B250S0/BANC1B70 hangs with NCQ
    
    I've seen this several times on this drive, completely reproducible.
    
    Once it has hung, power needs to be cut from the drive to recover it, a
    simple reboot is not enough.  So I'd suggest disabling NCQ on this
    drive.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
    Acked-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6b8777b46823fb0b42fba69b5311682124e5a71c
Author: Vladimir Barinov <vbarinov@ru.mvista.com>
Date:   Thu Mar 29 16:29:20 2007 +0100

    [ARM] 4296/1: ixp4xx: compile fix
    
    Fix compilation fail for ixp4xx platforms for the case when CONFIG_IXP4XX_INDIRECT_PCI is set. That is due to the check_signature() is appeared in include/linux/io.h.
    
    Signed-off-by: Vladimir Barinov <vbarinov@ru.mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce20269d1e97030afa476e12b99d2437e748d225
Merge: 9754c5f... 8a1e97e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 29 20:30:12 2007 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] SMTC: Fix recursion in instant IPI replay code.
      [MIPS] BCM1480: Fix setting of irq affinity.
      [MIPS] do_page_fault() needs to use raw_smp_processor_id().
      [MIPS] SMTC: Fix false trigger of debug code on single VPE.
      [MIPS] SMTC: irq_{enter,leave} and kstats keeping for relayed timer ints.
      [MIPS] lockdep: Deal with interrupt disable hazard in TRACE_IRQFLAGS
      [MIPS] lockdep: Handle interrupts in R3000 style c0_status register.
      [MIPS] MV64340: Add missing prototype for mv64340_irq_init().
      [MIPS] MT: MIPS_MT_SMTC_INSTANT_REPLAY currently conflicts with PREEMPT.
      [MIPS] EV64120: Include <asm/irq.h> to fix warning.
      [MIPS] Ocelot: Fix warning.
      [MIPS] Ocelot: Give PMON_v1_setup a proper prototype.

commit 9754c5f6cbbd8893a29f139204e87a59eb342ca9
Merge: efab03d... dbfc2f6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 29 20:25:03 2007 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] Fix arch/ia64/pci/pci.c:571: warning: `return' with a value
      [IA64] Speed up boot - skip unnecessary clock calibration
      [IA64] bugfix stack layout upside-down
      [IA64] Fix possible invalid memory access in ia64_setup_msi_irq()

commit 8a1e97ee2e025f116765c92409a3cf8f6cb07ad6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 29 23:42:42 2007 +0100

    [MIPS] SMTC: Fix recursion in instant IPI replay code.
    
    local_irq_restore -> raw_local_irq_restore -> irq_restore_epilog ->
    	smtc_ipi_replay -> smtc_ipi_dq -> spin_unlock_irqrestore ->
    	_spin_unlock_irqrestore -> local_irq_restore
    
    The recursion does abort when there is no more IPI queued for a CPU, so
    this isn't usually fatal which is why we got away with this for so long
    until this was discovered by code inspection.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6c9fde4bfff11b2fd93b4e518ae7ecb25a9244e4
Author: Mark Mason <mmason@upwardaccess.com>
Date:   Mon Mar 26 13:28:26 2007 -0700

    [MIPS] BCM1480: Fix setting of irq affinity.
    
    Signed-off-by: Mark Mason <mason@broadcom.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d6f703602fee8f8bd5c108af927a420cb8cb0d36
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 29 22:30:01 2007 +0100

    [MIPS] do_page_fault() needs to use raw_smp_processor_id().
    
    Original patch posted by Deepak Saxena <dsaxena@plexity.net>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 20bb25d10fe5569df8f3f186a36e5548582854d9
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 27 15:19:58 2007 +0100

    [MIPS] SMTC: Fix false trigger of debug code on single VPE.
    
    Make smtc_setup_irq() update the list of interrupts which need to be
    watched by the debug code itself.  Also there is no need to initialize the
    IPI swint when running with a single VPE, so don't initialize it.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ae036b790891565c5b4b64e616ed497138d1f8d6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 27 15:11:54 2007 +0100

    [MIPS] SMTC: irq_{enter,leave} and kstats keeping for relayed timer ints.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit fe99f1b184efb75c50dd8cbdfff99b559c2cb3b3
Author: Chris Dearman <chris@mips.com>
Date:   Mon Mar 26 14:48:50 2007 +0100

    [MIPS] lockdep: Deal with interrupt disable hazard in TRACE_IRQFLAGS
    
    Between the mtc0 or di instruction that disables interrupts and the
    following hazard barrier a processor may still take interrupts.  If an
    interrupt is taken after interrupts are disabled but before the state
    is updated it will appear to restore_all that it is incorrectly returning
    with interrupts disabled.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cbde5ebc972c0577741a69c85d5e5afad19d813b
Author: Chris Dearman <chris@mips.com>
Date:   Mon Mar 26 14:47:06 2007 +0100

    [MIPS] lockdep: Handle interrupts in R3000 style c0_status register.
    
    Check the IEP bit for R3000 style processors when checking to see if
    interrupts will be reenabled in restore_all.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit eb541cb24078eae83b9ef0573af36347d8dc01ee
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 26 09:30:32 2007 +0100

    [MIPS] MV64340: Add missing prototype for mv64340_irq_init().
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 619af723ac1fe75262441453c9d35870593822e2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 26 15:13:57 2007 +0100

    [MIPS] MT: MIPS_MT_SMTC_INSTANT_REPLAY currently conflicts with PREEMPT.
    
    So until MIPS_MT_SMTC_INSTANT_REPLAY has been rewritten to solve this
    issue, don't allow selecting it with PREEMPT.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit af2944ac5488f8d7e5f109f8a55f98d072ec377c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 26 09:22:00 2007 +0100

    [MIPS] EV64120: Include <asm/irq.h> to fix warning.
    
    arch/mips/pci/pci-ev64120.c:10: warning: implicit declaration of function 'allocate_irqno'
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9486d594baf268e46a01ada5c8c50dcf5d066748
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 26 09:14:24 2007 +0100

    [MIPS] Ocelot: Fix warning.
    
    Remove unused variable.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 448f283c11ac66793c7231bcbd729a417a9f9a04
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 26 08:59:52 2007 +0100

    [MIPS] Ocelot: Give PMON_v1_setup a proper prototype.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit dbfc2f6f95c7e62b9a379d9a34f8427f1d844ee1
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Mar 29 15:41:37 2007 -0700

    [IA64] Fix arch/ia64/pci/pci.c:571: warning: `return' with a value
    
    Typo/thinko in bba6f6fc68e74d4572028646f61dd3505a68747e
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ead6caae1e52a982bf09137c9b5382e9e2d52fdb
Author: Jack Steiner <steiner@sgi.com>
Date:   Tue Mar 27 14:30:19 2007 -0500

    [IA64] Speed up boot - skip unnecessary clock calibration
    
    Skip clock calibration if cpu being brought online is exactly the same
    speed, stepping, etc., as the previous cpu. This significantly reduces
    the time to boot very large systems.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 83d2cd3de48a7fb73838c45145780cfa9b1f61fd
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Fri Mar 23 12:17:46 2007 +0900

    [IA64] bugfix stack layout upside-down
    
    ia64 expects following vm layout:
    
    == low memory
    [register-stack grows up]
    [memory-stack grows down]
    == high memory
    
    But the code assigns the base of the register stack at the
    maximum stack size offset from the fixed address where the
    stack *might* start.  Stack randomization will result in the
    memory stack starting at a lower address than this, and if the
    user has set a low stack limit with "ulimit -s", then you can
    end up with the register stack above the memory stack (or if
    you were very unlucky right on top of it!).
    
    Fix: Calculate the base address for the register stack starting
    from the actual address of the memory stack.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8a3a0ee736b9a0150c9d894f2c6cc836a62125a1
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon Mar 26 09:38:42 2007 +0900

    [IA64] Fix possible invalid memory access in ia64_setup_msi_irq()
    
    The following 'if' statement in ia64_setup_msi_irq() always fails even
    if create_irq() returns <0 value, because variable 'irq' is defined as
    unsigned int. It would cause invalid memory access.
    
            irq = create_irq();
            if (irq < 0)
                    return irq;
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit efab03d998da03f67836ffc664b04e0400f85448
Merge: 9415fdd... d8d7920...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 29 13:22:07 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      NetXen: Fix hardware access for ppc architecture.
      sis190: new PHY support
      atl1: save mac address on remove

commit 9415fddd99e12d57640774a3043a809140245c40
Merge: 297640e... c01003c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 29 13:15:13 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IFB]: Fix crash on input device removal
      [BNX2]: Fix link interrupt problem.

commit 297640e89ea21e314bdda45468e5f78c978dae16
Author: Timur Tabi <timur@freescale.com>
Date:   Mon Mar 26 14:25:42 2007 -0500

    [POWERPC] qe: ucc_slow.guemr is in the wrong place
    
    The definition of struct ucc_slow puts the guemr register immediately after the
    utpt register, when it should be at offset 0x90.  This patch adds the missing
    0x52-byte padding.
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 7f013bc9d05825b19433bc0deb1f5f4d2103726e
Author: Chuck Meade <chuckmeade@mindspring.com>
Date:   Tue Mar 27 10:46:10 2007 -0400

    [POWERPC] qe: Fix QUICC Engine SDMA setup errors
    
    Correct the alignment of the internal buffer used by the QUICC Engine
    SDMA controller to 4Kbytes.  Correct the shift direction in the logic
    that sets up the SDMR register for the QUICC Engine SDMA controller.
    
    Signed-off-by: Chuck Meade <chuckmeade@mindspring.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit c01003c20563d1e75ec9828d21743919d2b43977
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 29 11:46:52 2007 -0700

    [IFB]: Fix crash on input device removal
    
    The input_device pointer is not refcounted, which means the device may
    disappear while packets are queued, causing a crash when ifb passes packets
    with a stale skb->dev pointer to netif_rx().
    
    Fix by storing the interface index instead and do a lookup where neccessary.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 399afa4fc9238fbae42116cf25a54671c0e8f56e
Author: Maxim Levitsky <maximlevitsky@gmail.com>
Date:   Thu Mar 29 15:46:48 2007 +0200

    [PATCH] Add suspend/resume for HPET
    
    This adds support of suspend/resume on i386 for HPET, which fixes a
    number of timer-related failures around STR.
    
    Signed-off-by: Maxim Levitsky <maximlevitsky@gmail.com>
    Acked-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Acked-by: Jeff Chua <jeff.chua.linux@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 22c8c65d24b37cef1d28583c7a7ffbf84f840e7a
Merge: a76c0b9... d9993c3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 29 08:23:52 2007 -0700

    Merge branch 'for-linus' of git://git.kernel.dk/data/git/linux-2.6-block
    
    * 'for-linus' of git://git.kernel.dk/data/git/linux-2.6-block:
      [PATCH] splice: partial write fix

commit a76c0b976310bbb1b6eaecaaae465af194134477
Author: Carsten Otte <cotte@de.ibm.com>
Date:   Thu Mar 29 01:20:39 2007 -0700

    [PATCH] mm: fix xip issue with /dev/zero
    
    Fix the bug, that reading into xip mapping from /dev/zero fills the user
    page table with ZERO_PAGE() entries.  Later on, xip cannot tell which pages
    have been ZERO_PAGE() filled by access to a sparse mapping, and which ones
    origin from /dev/zero.  It will unmap ZERO_PAGE from all mappings when
    filling the sparse hole with data.  xip does now use its own zeroed page
    for its sparse mappings.  Please apply.
    
    Signed-off-by: Carsten Otte <cotte@de.ibm.com>
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 90ed52ebe48181d3c5427b3bd1d24f659e7575ad
Author: Hugh Dickins <hugh@veritas.com>
Date:   Thu Mar 29 01:20:38 2007 -0700

    [PATCH] holepunch: fix mmap_sem i_mutex deadlock
    
    sys_madvise has down_write of mmap_sem, then madvise_remove calls
    vmtruncate_range which takes i_mutex and i_alloc_sem: no, we can easily devise
    deadlocks from that ordering.
    
    madvise_remove drop mmap_sem while calling vmtruncate_range: luckily, since
    madvise_remove doesn't split or merge vmas, it's easy to handle this case with
    a NULL prev, without restructuring sys_madvise.  (Though sad to retake
    mmap_sem when it's unlikely to be needed, and certainly down_read is
    sufficient for MADV_REMOVE, unlike the other madvices.)
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Miklos Szeredi <mszeredi@suse.cz>
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Cc: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 16a100190d39592d1d56ff5a0b978b20288c3427
Author: Hugh Dickins <hugh@veritas.com>
Date:   Thu Mar 29 01:20:37 2007 -0700

    [PATCH] holepunch: fix disconnected pages after second truncate
    
    shmem_truncate_range has its own truncate_inode_pages_range, to free any pages
    racily instantiated while it was in progress: a SHMEM_PAGEIN flag is set when
    this might have happened.  But holepunching gets no chance to clear that flag
    at the start of vmtruncate_range, so it's always set (unless a truncate came
    just before), so holepunch almost always does this second
    truncate_inode_pages_range.
    
    shmem holepunch has unlikely swap<->file races hereabouts whatever we do
    (without a fuller rework than is fit for this release): I was going to skip
    the second truncate in the punch_hole case, but Miklos points out that would
    make holepunch correctness more vulnerable to swapoff.  So keep the second
    truncate, but follow it by an unmap_mapping_range to eliminate the
    disconnected pages (freed from pagecache while still mapped in userspace) that
    it might have left behind.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Miklos Szeredi <mszeredi@suse.cz>
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Cc: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ae7000630e3c05b6f7e3dfc76472f1bca6c1788
Author: Hugh Dickins <hugh@veritas.com>
Date:   Thu Mar 29 01:20:36 2007 -0700

    [PATCH] holepunch: fix shmem_truncate_range punch locking
    
    Miklos Szeredi observes that during truncation of shmem page directories,
    info->lock is released to improve latency (after lowering i_size and
    next_index to exclude races); but this is quite wrong for holepunching, which
    receives no such protection from i_size or next_index, and is left vulnerable
    to races with shmem_unuse, shmem_getpage and shmem_writepage.
    
    Hold info->lock throughout when holepunching?  No, any user could prevent
    rescheduling for far too long.  Instead take info->lock just when needed: in
    shmem_free_swp when removing the swap entries, and whenever removing a
    directory page from the level above.  But so long as we remove before
    scanning, we can safely skip taking the lock at the lower levels, except at
    misaligned start and end of the hole.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Miklos Szeredi <mszeredi@suse.cz>
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a2646d1e6c8d2239d8054a7d342eb9775a1d273a
Author: Hugh Dickins <hugh@veritas.com>
Date:   Thu Mar 29 01:20:35 2007 -0700

    [PATCH] holepunch: fix shmem_truncate_range punching too far
    
    Miklos Szeredi observes BUG_ON(!entry) in shmem_writepage() triggered in rare
    circumstances, because shmem_truncate_range() erroneously removes partially
    truncated directory pages at the end of the range: later reclaim on pages
    pointing to these removed directories triggers the BUG.  Indeed, and it can
    also cause data loss beyond the hole.
    
    Fix this as in the patch proposed by Miklos, but distinguish between "limit"
    (how far we need to search: ignore truncation's next_index optimization in the
    holepunch case - if there are races it's more consistent to act on the whole
    range specified) and "upper_limit" (how far we can free directory pages:
    generally we must be careful to keep partially punched pages, but can relax at
    end of file - i_size being held stable by i_mutex).
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Miklos Szeredi <mszeredi@suse.cs>
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 96fac9dc95b91fc198bfbf4ba90263b06eff023d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 29 01:20:34 2007 -0700

    [PATCH] Wire up DEC serial drivers in Kconfig
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 35dc8457822aedbc89afa9f69e7fa494b3da7b02
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Thu Mar 29 01:20:34 2007 -0700

    [PATCH] drivers/isdn/gigaset: mark some static data as const (v2)
    
    Mark some static arrays as const that aren't and shouldn't be modified, and
    remove incorrect static attribute from some variables.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 75e8defbe4236a358b1396bc6d9a1231e5eca225
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Thu Mar 29 01:20:33 2007 -0700

    [PATCH] uml: hostfs variable renaming
    
    * rename name to host_root_path
    * rename data to req_root.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 622e696938c6a9c5357d2ec4a07ed2f27d56925a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Mar 29 01:20:32 2007 -0700

    [PATCH] uml: fix compilation problems
    
    Fix a few miscellaneous compilation problems -
    	an assignment with mismatched types in ldt.c
    	a missing include in mconsole.h which needs a definition of uml_pt_regs
    	I missed removing an include of user_util.h in hostfs
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit af84eab208916acad91f6342bbd57bc865caf150
Author: Jason Lunz <lunz@falooley.org>
Date:   Thu Mar 29 01:20:31 2007 -0700

    [PATCH] uml: fix LVM crash
    
    Permit lvm to create logical volumes without crashing UML.
    
    When device-mapper's DM_DEV_CREATE_CMD ioctl is called to create a new device,
    dev_create()->dm_create()->alloc_dev()-> blk_queue_bounce_limit(md->queue,
    BLK_BOUNCE_ANY) is called.
    
    blk_queue_bounce_limit(BLK_BOUNCE_ANY) calls init_emergency_isa_pool() if
    blk_max_pfn < blk_max_low_pfn.  This is the case on UML, but
    init_emergency_isa_pool() hits BUG_ON(!isa_page_pool) because there doesn't
    seem to be a dma zone on UML for mempool_create() to allocate from.
    
    Most architectures seem to have max_low_pfn == max_pfn, but UML doesn't
    because of the uml_reserved chunk it keeps for itself.  From what I can see,
    max_pfn and max_low_pfn don't get much use after the bootmem-allocator stops
    being used anyway, except that they initialize the block layer's
    blk_max_low_pfn/blk_max_pfn.
    
    This ensures init_emergency_isa_pool() doesn't crash uml in this situation by
    setting max_low_pfn == max_pfn in mem_init().
    
    Signed-off-by: Jason Lunz <lunz@falooley.org>
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Alasdair G Kergon <agk@redhat.com>
    Cc: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3076212f8d3d9fe4d7b11c6b560c0f424edfcb4e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Mar 29 01:20:30 2007 -0700

    [PATCH] uml: irq locking fixes
    
    As the comment immediately preceding this points out, this list is changed in
    irq context, so it needs to be protected with spin_lock_irqsave in process
    context when it is processed.
    
    Sometimes, gcc should just compile the comments and forget the code.
    
    The IRQ side of this was better, in the sense that it blocked and unblocked
    interrupts, but it still should have saved and restored them.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 602ed87ecd93a857dc687afb938d2c0f45552986
Author: Miklos Szeredi <mszeredi@suse.cz>
Date:   Thu Mar 29 01:20:29 2007 -0700

    [PATCH] uml: fix pte bit collision
    
    _PAGE_PROTNONE conflicts with the lowest bit of pgoff.  This causes all sorts
    of weirdness when nonlinear mappings are used.
    
    Took me a good half day to track this down.
    
    Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Acked-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d40f6d71da81deb66c4fa54b46e22977cdb8b451
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Mar 29 01:20:28 2007 -0700

    [PATCH] uml: fix device unplug crash
    
    Fix a NULL dereference when unplugging a device.  The default value of
    err_msg wants to be "" in case the driver doesn't modify it.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2a9529a0c890007ade5425b75272c3def283f8b1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Mar 29 01:20:27 2007 -0700

    [PATCH] uml: fix I/O hang when multiple devices are in use
    
    Commit 62f96cb01e8de7a5daee472e540f726db2801499 introduced per-devices
    queues and locks, which was fine as far as it went, but left in place a
    global which controlled access to submitting requests to the host.  This
    should have been made per-device as well, since it causes I/O hangs when
    multiple block devices are in use.
    
    This patch fixes that by replacing the global with an activity flag in the
    device structure in order to tell whether the queue is currently being run.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cb3fecc2f29056e89658e7eb371e7f9be66cda6d
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Thu Mar 29 01:20:25 2007 -0700

    [PATCH] bluetooth hid quirks: mightymouse quirk
    
    I have a bugreport that scrollwheel of bluetooth version of apple
    mightymouse doesn't work.  The USB version of mightymouse works, as there
    is a quirk for handling scrollwheel in hid/usbhid for it.
    
    Now that bluetooth git tree is hooked to generic hid layer, it could easily
    use the quirks which are already present in generic hid parser, hid-input,
    etc.
    
    Below is a simple patch against bluetooth git tree, which adds quirk
    handling to current bluetooth hidp code, and sets quirk flags for device
    0x05ac/0x030c, which is the bluetooth version of the apple mightymouse.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e6d1fc3d83317678a57db1c1deb2fc0bede73aaf
Author: Salyzyn, Mark <mark_salyzyn@adaptec.com>
Date:   Thu Mar 29 01:20:24 2007 -0700

    [PATCH] adaptec MAINTAINERS updates
    
    The IPS and DPT_I2O drivers are missing, so here is my 'hand coded'
    addition to deal with overlap to the patch below (apply both). I
    selected Maintained rather than supported for the ips and dpt_i2o driver
    due to their legacy nature.
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 14e9d5730adfca26452b3a2838a80af6950556f5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Mar 28 23:38:16 2007 -0600

    [PATCH] pid: Properly detect orphaned process groups in exit_notify
    
    In commit 0475ac0845f9295bc5f69af45f58dff2c104c8d1 when converting the
    orphaned process group handling to use struct pid I made a small
    mistake.  I accidentally replaced an == with a !=.
    
    Besides just being a dumb thing to do apparently this has a bad side
    effect.  The improper orphaned process group detection causes kwin to
    die after a suspend/resume cycle.
    
    I'm amazed this patch has been around as long as it has without anyone
    else noticing something funny going on.
    
    And the following people deserve credit for spotting and helping
    to reproduce this.
    
    Thanks to: Sid Boyce <g3vbv@blueyonder.co.uk>
    Thanks to: "Michael Wu"
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c97beb4710bc673867207d7d729f2ace4ca1f197
Author: Yinghai Lu <yinghai.lu@amd.com>
Date:   Wed Mar 28 23:10:29 2007 -0600

    [PATCH] x86_64 irq: Fix comments after changing IRQ0_VECTOR from 0x20 to 0x30
    
    Signed-off-by: Yinghai Lu <yinghai.lu@amd.com>
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d9993c37ef87c758d4a6e63972395b1cf8a4cb7b
Author: Dmitriy Monakhov <dmonakhov@sw.ru>
Date:   Thu Mar 29 14:24:09 2007 +0200

    [PATCH] splice: partial write fix
    
    Currently if partial write has happened while ->commit_write() then page
    wasn't marked as accessed and rebalanced.
    
    Signed-off-by: Monakhov Dmitriy <dmonakhov@openvz.org>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit d8d79201eb391ae0eca05f9e51f1f94ab42b6b4e
Author: Adhiraj Joshi <adhiraj@netxen.com>
Date:   Fri Mar 23 07:21:24 2007 -0800

    NetXen: Fix hardware access for ppc architecture.
    
    NetXen: Fix for hardware access on big endian machine.
    
    Signed-off-by: Adhiraj Joshi <adhiraj@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bd7a44488975759da10b5f25bcebec19930a5328
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu Mar 29 00:18:50 2007 +0200

    sis190: new PHY support
    
    Reported to work on the WinFast 761GXK8MB-RS motherboard.
    
    Plain 10/100 Mbps.
    
    Signed-off-by: Paul Gibbons <paul@pkami.e7even.com>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8c754a04ff11a9c1107c134ad5a858e9dc08c1de
Author: Chris Snook <csnook@redhat.com>
Date:   Wed Mar 28 20:51:51 2007 -0400

    atl1: save mac address on remove
    
    Some atl1 boards get their MAC address written directly to the register
    by the BIOS during POST, rather than storing it in EEPROM that's
    accessible to the driver.  If the MAC register on one of these boards
    is changed and then the module is unloaded, the permanent MAC address
    will be forgotten until the box is rebooted.  We should save the
    permanent address during removal if we've been messing with it.
    
    Signed-off-by: Chris Snook <csnook@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2848e647402719d4a8d03141361caed60f2668da
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Mar 26 11:02:48 2007 +0100

    [ARM] 4289/1: AT91: SAM9260 NAND flash timing
    
    Fix the NAND flash timings on the AT91SAM9260.
    
    The current timings lead to the detection of a number of bad blocks.
    These timings are now set the same as on the AT91SAM9263.
    
    Patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit db8b22550d4b83f0910d27a34d05aa16f7f7159f
Author: Michael Chan <mchan@broadcom.com>
Date:   Wed Mar 28 14:17:36 2007 -0700

    [BNX2]: Fix link interrupt problem.
    
    bnx2_has_work()'s logic is flawed and can cause the driver to miss
    a link event.  The fix is to compare the status block's attn_bits
    and attn_bits_ack to determine if there is a link event.
    
    Update version to 1.5.6.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 190a4408ecb577391ea5fbd1f90148a6992a5756
Author: Jean-Christophe Dubois <jdubois@mc.com>
Date:   Wed Mar 28 11:07:41 2007 +0100

    [POWERPC] Fix dcr_unmap()
    
    Fix a bug in dcr_unmap().
    
    At unmap time the DCR offset need to be added instead of substracted.
    
    Signed-off-by: Jean-Christophe Dubois <jdubois@mc.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e5c465f5d957ab581bc79d3ce981281fe73021a3
Merge: d0a9af8... 2f5bf1f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 14:02:03 2007 -0700

    Merge branch 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2
    
    * 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2:
      ocfs2_dlm: Check for migrateable lockres in dlm_empty_lockres()
      ocfs2_dlm: Fix lockres ref counting bug

commit d0a9af809124c432297a7c4a3bcf98cbfdb4036a
Merge: c203b33... a717751...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 14:01:21 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [VIDEO]: Fix section mismatch in cg3.c
      [SPARC]: sparc64 gcc-4.2.0 20070317 -Werror failure
      [VIDEO] ffb: Fix two DAC handling bugs.
      [SPARC32]: Fix SMP build regression
      [DRM]: Delete sparc64 FFB driver code that never gets built.

commit c203b33d2ee34594f6656c033cddd4f5860eb06c
Merge: a26b5fc... 39ebc02...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 14:00:27 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [DCCP] getsockopt: Fix DCCP_SOCKOPT_[SEND,RECV]_CSCOV

commit a26b5fce06b92b2f02967d4c845fa628024e5414
Merge: bba6f6f... 3104a21...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 14:00:01 2007 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/iser: Handle aborting a command after it is sent
      IB/mthca: Fix thinko in init_mr_table()
      RDMA/cxgb3: Fix resource leak in cxio_hal_init_ctrl_qp()

commit bba6f6fc68e74d4572028646f61dd3505a68747e
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Mar 28 15:36:09 2007 +0200

    [PATCH] MSI-X: fix resume crash
    
    So I think the right solution is to simply make pci_enable_device just
    flip enable bits and move the rest of the work someplace else.
    
    However a thorough cleanup is a little extreme for this point in the
    release cycle, so I think a quick hack that makes the code not stomp the
    irq when msi irq's are enabled should be the first fix.  Then we can
    later make the code not change the irqs at all.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4dfc896e90359df04c80da5ab08ec31e87846c43
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Wed Mar 28 18:12:34 2007 +0200

    [PATCH] oprofile: fix potential deadlock on oprofilefs_lock
    
    nmi_cpu_setup() is called from hardirq context and acquires oprofilefs_lock.
    alloc_event_buffer() and oprofilefs_ulong_from_user() acquire this lock
    without disabling irqs, which could deadlock.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6faee84b006af55bab9908741dd76916c8450be2
Merge: 2ba302c... b863f46...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 13:53:40 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6:
      sh: Trivial fix for hp6xx build.
      sh: Fixup __cmpxchg() compile breakage with gcc4.
      sh: Kill bogus GCC4 symbol exports.

commit 2ba302c633754520c990a8c1d161ff304eda6002
Merge: 4db43e6... 7acfaf3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 13:46:00 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      ata: NCQ is broken on Maxtor 6L250S0
      pata_pdc202xx_old: LBA48 bug
      libata: IDENTIFY backwards for drive side cable detection
      ahci.c: walkaround for SB600 SATA internal error issue
      [libata] Disable ACPI by default; fix namespace problems

commit 4db43e677ec2dcfb6129d5e557ed4795f9e4a031
Merge: 935c631... a9c87a1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 28 13:45:13 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      SUN3/3X Lance trivial fix improved
      mv643xx_eth: Fix use of uninitialized port_num field
      forcedeth: fix tx timeout
      forcedeth: fix nic poll
      qla3xxx: bugfix: Jumbo frame handling.
      qla3xxx: bugfix: Dropping interrupt under heavy network load.
      qla3xxx: bugfix: Multi segment sends were getting whacked.
      qla3xxx: bugfix: Add tx control block memset.
      atl1: remove unnecessary crc inversion
      myri10ge: correctly detect when TSO should be used
      [PATCH] WE-22 : prevent information leak on 64 bit
      [PATCH] wext: Add missing ioctls to 64<->32 conversion
      [PATCH] bcm43xx: Fix machine check on PPC for version 1 PHY
      [PATCH] bcm43xx: fix radio_set_tx_iq
      [PATCH] bcm43xx: Fix code for confusion between PHY revision and PHY version

commit 935c631db827cc3a96df4dcc6fec374b994fdbd1
Author: Ingo Molnar <mingo@elte.hu>
Date:   Wed Mar 28 13:17:18 2007 +0200

    [PATCH] hrtimers: fix reprogramming SMP race
    
    hrtimer_start() incorrectly set the 'reprogram' flag to enqueue_hrtimer(),
    which should only be 1 if the hrtimer is queued to the current CPU.
    
    Doing otherwise could result in a reprogramming of the current CPU's
    clockevents device, with a timer that is not queued to it - resulting in a
    bogus next expiry value.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a71775147f6ae2a2901e7b917c0a76df353f8801
Author: Robert Reif <reif@earthlink.net>
Date:   Wed Mar 28 12:50:56 2007 -0700

    [VIDEO]: Fix section mismatch in cg3.c
    
    Fix section mismatch warning by moving data into __devinitdata section.
    Add __devinit to initialization functions.
    
    Signed-off-by: Robert Reif <reif@earthlink.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 39ebc0276bada8bb70e067cb6d0eb71839c0fb08
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Wed Mar 28 11:54:32 2007 -0700

    [DCCP] getsockopt: Fix DCCP_SOCKOPT_[SEND,RECV]_CSCOV
    
    We were only checking if there was enough space to put the int, but
    left len as specified by the (malicious) user, sigh, fix it by setting
    len to sizeof(val) and transfering just one int worth of data, the one
    asked for.
    
    Also check for negative len values.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b863f46e6a523276b77dd128ec268f8c509b4554
Author: Kristoffer Ericson <kristoffer_e1@hotmail.com>
Date:   Wed Mar 28 19:45:59 2007 +0900

    sh: Trivial fix for hp6xx build.
    
    The IRQ3 define was removed when asm-sh/irq.h was cleaned up,
    this updates the hp6xx header to use the IRQ number directly.
    
    Signed-off-by: Kristoffer Ericson <kristoffer_e1@hotmail.com>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 310f7963c24ab8fa56a539fa060dd84560ce26e9
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Mar 28 17:26:19 2007 +0900

    sh: Fixup __cmpxchg() compile breakage with gcc4.
    
    As reported by Manuel:
    
    When I build linux with GCC-4.x and enable
    CONFIG_CC_OPTIMIZE_FOR_SIZE linking fails with this error:
    
      LD      .tmp_vmlinux1
      kernel/built-in.o: In function '__cmpxchg_called_with_bad_pointer'
      make[1]: *** [.tmp_vmlinux1] Error 1
      make: *** [_all] Error 2
    
    This ended up being an inlining problem, fixed by explicitly
    including linux/compiler.h and grabbing the definitions from there.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 9c5b406b9a857a67caf778f096bfc7f4e6b0401a
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Mar 28 17:24:47 2007 +0900

    sh: Kill bogus GCC4 symbol exports.
    
    __sdivsi3_i4i, __udiv_qrnnd_16, and __udivsi3_i4i don't exist
    outside of the ST compiler, so kill them off.
    
    This causes compile failures with other GCC4 compilers.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit a9c87a10db08f53c5220f273d518390cbaeb55c8
Merge: c14bac6... c2805fb...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Mar 28 02:21:18 2007 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit c14bac628b9fad6fd4dad8fbb9e864c61a8924c9
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Mon Mar 26 21:47:26 2007 -0800

    SUN3/3X Lance trivial fix improved
    
    This patch adds checking for allocated DVMA memory and granted IRQ line.
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fadac4060c0456ce0a190ee581746ae8663f84e1
Author: Gabriel Paubert <paubert@iram.es>
Date:   Fri Mar 23 12:03:52 2007 -0700

    mv643xx_eth: Fix use of uninitialized port_num field
    
    In this driver, the default ethernet address is first set by by calling
    eth_port_uc_addr_get() which reads the relevant registers of the
    corresponding port as initially set by firmware. However that function
    used the port_num field accessed through the private area of net_dev
    before it was set.
    
    The result was that one board I have ended up with the unicast address
    set to 00:00:00:00:00:00 (only port 1 is connected on this board). The
    problem appeared after commit 84dd619e4dc3b0b1c40dafd98c90fd950bce7bc5.
    
    This patch fixes the bug by setting mp->port_num prior to calling
    eth_port_uc_get_addr().
    
    Signed-off-by: Gabriel Paubert <paubert@iram.es>
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3ba4d093fe8a26f5f2da94411bf8732fa6e9da86
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Fri Mar 23 05:50:02 2007 -0500

    forcedeth: fix tx timeout
    
    The tx timeout routine was waking the tx queue conditionally. However,
    it must call it unconditionally since the dev_watchdog has halted the tx
    queue before calling the timeout function.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fcc5f2665c81e087fb95143325ed769a41128d50
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Fri Mar 23 05:49:37 2007 -0500

    forcedeth: fix nic poll
    
    The nic poll routine was missing the call to the optimized irq routine.
    This patch adds the missing call for the optimized path.
    
    See http://bugzilla.kernel.org/show_bug.cgi?id=7950 for more information.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b3b1514c90ab534ec6c9e4452953069f85aacf4d
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Mar 26 13:43:00 2007 -0700

    qla3xxx: bugfix: Jumbo frame handling.
    
    Fixed rx checksum bits. Turn on TCP processing for rx checksum.
    Fixed max frame length register write.  It wasn't getting set
    in multi-port system. Set rx buffer queue length properly
    for jumbo frames.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f67cac0190623a3cde4d783c7c7205691aa02cc2
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Mar 26 13:42:59 2007 -0700

    qla3xxx: bugfix: Dropping interrupt under heavy network load.
    
    Update the rx queue pointer when exiting NAPI poll rather than
    at the end of each iteration.  Remove unnecessary PCI flushes
    that occurred after every write.  Now write all regs and
    flush once.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b6967eb9cbf38643fc1b5432c36f610a9c565579
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Mar 26 13:42:58 2007 -0700

    qla3xxx: bugfix: Multi segment sends were getting whacked.
    
    The proper header length was not being used.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d8a759ff414141c8a0f6683e9f35b895b5f23b57
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Mar 26 13:42:57 2007 -0700

    qla3xxx: bugfix: Add tx control block memset.
    
    This was removed in a previous patch to increase performance, but
    caused a transmit error for the 4032 chip.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit de815a14e9d03df0560e6ef689d1da32553878b7
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Tue Mar 27 19:43:49 2007 -0500

    atl1: remove unnecessary crc inversion
    
    The original vendor driver contained a private ether_crc_le() function
    that produced an inverted crc.  When we changed to the kernel version of
    ether_crc_le(), we neglected to undo the inversion.  Let's do it now.
    Discovered by and patch proffered by Jose Alberto Reguero.
    
    Signed-off-by: Jose Alberto Reguero <jareguero@telefonica.net>
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 917690cd035b422b1ac933ac160d26016aa454ac
Author: Brice Goglin <brice@myri.com>
Date:   Tue Mar 27 21:54:53 2007 +0200

    myri10ge: correctly detect when TSO should be used
    
    Correctly detect when TSO should be used on transmit by looking at the
    skb->gso_size rather than seeing if the frame was larger than our MTU.
    The old method causes problems when a host with a large (jumbo) MTU is
    sending to a host with a small (standard) MTU.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7acfaf3037ff19b749117a286f0f24e201ada0ec
Author: Paul Rolland <rol@as2917.net>
Date:   Mon Mar 26 21:43:44 2007 -0800

    ata: NCQ is broken on Maxtor 6L250S0
    
    With this applied, my machine has stopped all those painful messages.
    dmesg now says :
    
    root@riri:/Kernels# dmesg | grep LBA
    ata1.00: 490234752 sectors, multi 0: LBA48 NCQ (not used)
    ata2.00: 640 sectors, multi 1: LBA
    ata3.00: 490234752 sectors, multi 0: LBA48 NCQ (not used)
    
    Signed-off-by: Paul Rolland <rol@as2917.net>
    Acked-by: Alan Cox <alan@redhat.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5e5188108bcf9ab2e6f87b4b54924354040b0aa7
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri Mar 23 18:57:23 2007 +0000

    pata_pdc202xx_old: LBA48 bug
    
    In LBA48 mode we have to help the controller to get anything to work. The
    chip provides a register giving word counts meant for ATAPI use which we
    can use. However we need to load the count in words not bytes..
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8c3c52a8f00536ce55dafa055b4a211f878f3901
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Mar 22 22:24:19 2007 +0900

    libata: IDENTIFY backwards for drive side cable detection
    
    For drive side cable detection to work correctly, drives need to be
    identified backwards such that the slave device releases PDIAG- before
    the mater drive tries to detect cable type.  ata_bus_probe() was fixed
    by commit f31f0cc2f0b7527072d94d02da332d9bb8d7d94c but the new EH path
    wasn't fixed.  This patch makes new EH path do IDENTIFY backwards.
    
    ata_dev_configure() for new devices are still performed master first.
    This is to keep the detection messages in forward order.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 55a61604cd1354e1783364e1c901034f2f474b7d
Author: Conke Hu <conke.hu@gmail.com>
Date:   Tue Mar 27 18:33:05 2007 +0800

    ahci.c: walkaround for SB600 SATA internal error issue
    
       There is a HW issue in ATI SB600 SATA that PxSERR.E should not be
    set on some conditions, for example, when there is no media in SATA
    CD/DVD drive or media is not ready, AHCI controller fails to execute
    ATAPI commands and reports PORT_IRQ_TF_ERR, but ATI SB600 SATA
    controller sets PxSERR.E at the
    same time, which is not necessary.
        This patch is just to ignore the INTERNAL ERROR in such case.
    Without this patch, ahci error handler will report many errors as
    below:
        ----------- cut from dmesg -----------
    ata9: soft resetting port
    ata9: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
    ata9.00: configured for UDMA/33
    ata9: EH complete
    ata9.00: exception Emask 0x40 SAct 0x0 SErr 0x800 action 0x2
    ata9.00: (irq_stat 0x40000001)
    ata9.00: cmd a0/00:00:00:00:20/00:00:00:00:00/a0 tag 0 cdb 0x0 data 0
            res 51/24:03:00:00:20/00:00:00:00:00/a0 Emask 0x40 (internal error)
    ata9: soft resetting port
    ata9: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
    ata9.00: configured for UDMA/33
    ata9: EH complete
    ata9.00: exception Emask 0x40 SAct 0x0 SErr 0x800 action 0x2
    ata9.00: (irq_stat 0x40000001)
    ata9.00: cmd a0/01:00:00:00:00/00:00:00:00:00/a0 tag 0 cdb 0x43 data 12 in
            res 51/24:03:00:00:00/00:00:00:00:00/a0 Emask 0x40 (internal error)
        -------- end cut ---------
    
    Signed-off-by: Conke Hu <conke.hu@amd.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d7d0dad62a641c156386288a747c1a2f6bb2e42d
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Mar 28 01:57:37 2007 -0400

    [libata] Disable ACPI by default; fix namespace problems
    
    Not yet ready to turn on ATA ACPI by default, for either PATA or SATA.
    
    Also, rename the global-scope module parameter variable 'noacpi' to
    something more libata-specific, reducing the potential for namespace
    collision.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit de326dbe0c8b61b81aab32970236ee9ee47d782a
Merge: 28defbe... 53aadcc...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 27 17:56:42 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPV6]: Set IF_READY if the device is up and has carrier
      [NET_SCHED]: sch_htb/sch_hfsc: fix oops in qlen_notify
      [NET]: Remove dead net/sched/Makefile entry for sch_hpfq.o.

commit 28defbea64622f69d65a6079bf800cedb9915a5f
Author: Zach Brown <zach.brown@oracle.com>
Date:   Tue Mar 27 15:44:01 2007 -0700

    [PATCH] aio: remove bare user-triggerable error printk
    
    The user can generate console output if they cause do_mmap() to fail
    during sys_io_setup().  This was seen in a regression test that does
    exactly that by spinning calling mmap() until it gets -ENOMEM before
    calling io_setup().
    
    We don't need this printk at all, just remove it.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 53aadcc90931dfa150f76ce9a5f9e8f3e43d57df
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 27 14:31:52 2007 -0700

    [IPV6]: Set IF_READY if the device is up and has carrier
    
    We still need to set the IF_READY flag in ipv6_add_dev for the case
    where all addresses (including the link-local) are deleted and then
    recreated.  In that case the IPv6 device too will be destroyed and
    then recreated.
    
    In order to prevent the original problem, we simply ensure that
    the device is up before setting IF_READY.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c38c83cb705a41e30a99545ae2314c00e3b9bf1c
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Mar 27 14:04:24 2007 -0700

    [NET_SCHED]: sch_htb/sch_hfsc: fix oops in qlen_notify
    
    During both HTB and HFSC class deletion the class is removed from the
    class hash before calling qdisc_tree_decrease_qlen. This makes the
    ->get operation in qdisc_tree_decrease_qlen fail, so it passes a NULL
    pointer to ->qlen_notify, causing an oops.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2805fbb8630abb95d94ce7adc3f97976f7e0367
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Mar 23 00:31:16 2007 +0000

    [PATCH] WE-22 : prevent information leak on 64 bit
    
     	Johannes Berg discovered that kernel space was leaking to
    userspace on 64 bit platform. He made a first patch to fix that. This
    is an improved version of his patch.
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ed4bb1063171b2f44a40b0a9c400dedb0590dce6
Author: Jean Tourrilhes <jt@hpl.hp.com>
Date:   Fri Mar 23 00:26:49 2007 +0000

    [PATCH] wext: Add missing ioctls to 64<->32 conversion
    
     	Johannes Berg and Michael Buesch noticed that the WPA ioctls
    were missing from the 64<->32 bit conversion. This means that when
    using a 32 bits userspace on a 64 bit kernel, those ioctls fail.
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 83b5db89c851f9a2080e2e43427346269ab84447
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Mar 25 08:45:54 2007 -0500

    [PATCH] bcm43xx: Fix machine check on PPC for version 1 PHY
    
    Recent changes in the specs that were introduced in commit
    740ac4fb08866d702be90f167665d03759bd27d0 were incorrect and resulted in machine check
    errors on the PPC architecture for G PHY's with a revision number equal to 1. The
    two offending changes are reverted.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 7265c5d10dd893b91aab15735ed9346a0e07bf07
Author: Stefano Brivio <stefano.brivio@polimi.it>
Date:   Fri Mar 23 20:21:39 2007 +0100

    [PATCH] bcm43xx: fix radio_set_tx_iq
    
    Fix a duplicated leftshift in bcm43xx_radio_set_tx_iq. data_high values are
    already leftshifted. Thanks to Michael Buesch for spotting this.
    
    Signed-off-by: Stefano Brivio <stefano.brivio@polimi.it>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit be10d3860ef07ff43f240fbc0c0b72df1a5fe3df
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sat Mar 17 11:28:21 2007 -0500

    [PATCH] bcm43xx: Fix code for confusion between PHY revision and PHY version
    
    There are several places where the PHY version and revision were interchanged.
    These are changed in the specifications on 2/13/07 and now use "analog" instead
    instead of "version" to help reduce confusion.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d459094083c3a23b31514bbe31cc3f4c21ed4445
Merge: d0d87aa... bb9ba31...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 27 10:06:30 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6:
      [SCSI] gdth: fix oops in gdth_copy_cmd()
      [SCSI] mptsas: Fix oops for insmod during kexec
      [SCSI] lpfc: avoid double-free during PCI error failure

commit d0d87aae795bfad0a9f8cc1e8faff5a016e71ad4
Merge: 5158074... 09d4895...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 27 09:23:59 2007 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (5472): Isl6421: don't reference freed memory
      V4L/DVB (5441): Saa7146: Fix allocation of clipping memory
      V4L/DVB (5421): Fix suspend/resume in msp3400 and tuner
      V4L/DVB (5415): Msp_attach must return 0 if no msp3400 was found.
      V4L/DVB (5408): Fix SECAM handling on saa7115
      V4L/DVB (5400): Core: fix several locking related problems
      V4L/DVB (5390): Radio: Fix error in Kbuild file
      V4L/DVB (5332): Ir_rc5_timer_end decoder lockup fix

commit 5158074971220eeaa0677942a4bad3b3439a9638
Merge: 436ce71... 6d9658d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 27 09:22:05 2007 -0700

    Merge git://kvm.qumranet.com/home/avi/kvm
    
    * git://kvm.qumranet.com/home/avi/kvm:
      KVM: always reload segment selectors
      KVM: Prevent system selectors leaking into guest on real->protected mode transition on vmx

commit 436ce71638eceb0f9dd7608157807c37b29c3db7
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Tue Mar 27 12:09:13 2007 +0200

    [PATCH] Revert "swsusp: disable nonboot CPUs before entering platform suspend"
    
    This reverts commit 94985134b7b46848267ed6b734320db01c974e72 and
    insteads removes the WARN_ON() that caused that commit in the first
    place.
    
    The problem is that we call disable_nonboot_cpus() in swsusp before
    powering down the system in order to avoid triggering the WARN_ON()
    in arch/x86_64/kernel/acpi/sleep.c:init_low_mapping() and this doesn't
    work well on Thomas' system.
    
    So instead, remove the WARN_ON() in arch/x86_64/kernel/acpi/sleep.c:
    init_low_mapping(), which triggers every time during the suspend to disk
    in the platform mode, as the potential problem it is related to doesn't
    seem to occur in practice.
    
    [ I think we might want to disallow the case of multiple users of that
      mm, or something.  Normally, playing with the current process page
      tables on the current CPU should be fine as long as we don't have
      other threads using those tables at the same time..
    
      Anyway, not pretty, but better than the warning or the lockup - Linus ]
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c7f6d15ff2664467a2cb669abcabb5ffaf719b2d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 27 09:08:26 2007 +0200

    [PATCH] i386: Fix bogus return value in hpet_next_event()
    
    The clockevents / tick management code expects an error value, when the
    event is already expired. hpet_next_event() returns 1 in that case.
    
    Fix it to return the proper -ETIME error code.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e0ab0bb6d2b77917f4c31f157b2690602a5608f9
Merge: 5c46010... 40bee44...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 27 09:05:49 2007 -0700

    Merge branch 'for-linus' of git://git.kernel.dk/data/git/linux-2.6-block
    
    * 'for-linus' of git://git.kernel.dk/data/git/linux-2.6-block:
      Export __splice_from_pipe()
      2/2 splice: dont readpage
      1/2 splice: dont steal
      make elv_register() output atomic
      block: blk_max_pfn is somtimes wrong

commit 5c46010af210712c8a390c7fe50ff05448983061
Author: Mika Kukkonen <mikukkon@iki.fi>
Date:   Mon Mar 26 21:32:33 2007 -0800

    [PATCH] Fix kernel build with EMBEDDED & PROC_FS & !PROC_SYSCTL
    
    Without attached patch against current -git I get following with
    !PROC_SYSCTL (with EMBEDDED and PROC_FS set):
    
        CC      init/version.o
        LD      init/built-in.o
        LD      vmlinux
      fs/built-in.o: In function `do_proc_sys_lookup':
      proc_sysctl.c:(.text+0x26583): undefined reference to `sysctl_head_next'
      fs/built-in.o: In function `proc_sys_revalidate':
      proc_sysctl.c:(.text+0x265bb): undefined reference to `sysctl_head_finish'
      fs/built-in.o: In function `proc_sys_readdir':
      proc_sysctl.c:(.text+0x26720): undefined reference to `sysctl_head_next'
      proc_sysctl.c:(.text+0x267d8): undefined reference to `sysctl_head_finish'
      proc_sysctl.c:(.text+0x268e7): undefined reference to `sysctl_head_next'
      proc_sysctl.c:(.text+0x26910): undefined reference to `sysctl_head_finish'
      fs/built-in.o: In function `proc_sys_write':
      proc_sysctl.c:(.text+0x2695d): undefined reference to `sysctl_perm'
      proc_sysctl.c:(.text+0x2699c): undefined reference to `sysctl_head_finish'
      fs/built-in.o: In function `proc_sys_read':
      proc_sysctl.c:(.text+0x269e9): undefined reference to `sysctl_perm'
      proc_sysctl.c:(.text+0x26a25): undefined reference to `sysctl_head_finish'
      fs/built-in.o: In function `proc_sys_permission':
      proc_sysctl.c:(.text+0x26ad1): undefined reference to `sysctl_perm'
      proc_sysctl.c:(.text+0x26adb): undefined reference to `sysctl_head_finish'
      fs/built-in.o: In function `proc_sys_lookup':
      proc_sysctl.c:(.text+0x26b39): undefined reference to `sysctl_head_finish'
      make: *** [vmlinux] Virhe 1
    
    All those functions are in fs/proc/proc_sysctl.c, which has no CONFIG_
    #define's in it, so the patch makes the compilation of that file to depend
    on CONFIG_PROC_SYSCTL (the simplest choice).
    
    Acked-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b8f2f5165c3eb22d7b19405d80fd82339507a950
Author: Markus Lidel <Markus.Lidel@shadowconnect.com>
Date:   Mon Mar 26 21:32:32 2007 -0800

    [PATCH] I2O: remove Markus from MAINTAINERS
    
    Because i don't have much time lately and my responses are pretty slow
    it's probably best to remove me from MAINTAINERS to give someone else
    the chance to jump in.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a28d193cbf01375974683c13e99a52ef489e5eb0
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Mon Mar 26 21:32:31 2007 -0800

    [PATCH] ipcns: fix !CONFIG_IPC_NS behavior
    
    When CONFIG_IPC_NS=n, clone(CLONE_NEWIPC) claims success, but did not actually
    clone a new IPC namespace.
    
    Fix this to return -EINVAL so the caller knows his request was denied.
    
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d1985ad1da28eac507d855af8099f6010c51b167
Author: Vasily Averin <vvs@sw.ru>
Date:   Mon Mar 26 21:32:30 2007 -0800

    [PATCH] i2o: block IO errors on i2o disk
    
    I2O subsystem has been broken in mainstream several months ago (after
    2.6.18).  Commit 4aff5e2333c9a1609662f2091f55c3f6fffdad36 from Jens
    Axboe split struct request ->flags into two parts: cmd_type and
    cmd_flags.
    
    In i2o layer this patch has replaced flag REQ_SPECIAL by the according
    cmd_type.  However i2o has used REQ_SPECIAL not as command type but as
    driver-specific flag for the debug purposes.  As result all i2o requests
    have type "special" now, are not processed to the hardware and fail with
    I/O error:
    
       i2o/hda:<3>Buffer I/O error on device i2o/hda, logical block 0
      Buffer I/O error on device i2o/hda, logical block 0
      Buffer I/O error on device i2o/hda, logical block 0
       unable to read partition table
      block-osm: device added (TID: 207): i2o/hda
    
    The following patch removes the extra debug checks without any drawbacks and
    restores the normal driver's work.
    
    Signed-off-by:	Vasily Averin <vvs@sw.ru>
    Acked-by: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Cc: Jens Axboe <jens.axboe@oracle.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 88f45005ce8ec97fc3a2aac3c0e9e645ed83a64a
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Mon Mar 26 21:32:28 2007 -0800

    [PATCH] Fix struct device member name in PCMCIA au1000_generic
    
      drivers/pcmcia/au1000_generic.c: In function 'au1x00_pcmcia_socket_probe':
      drivers/pcmcia/au1000_generic.c:375: error: 'struct device' has no member named 'dev'
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Cc: Takashi Iwai <tiwai@suse.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 74b9a297866d0416edd0be5014cb0810de049c6a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 26 21:32:27 2007 -0800

    [PATCH] drivers/eisa/pci_eisa.c:pci_eisa_init() should be init
    
      WARNING: drivers/built-in.o - Section mismatch: reference to .init.text:eisa_root_register from .text between 'pci_eisa_init' (at offset 0xabf670) and 'virtual_eisa_release'
    
    AFAIK a PCI to EISA bridge isn't anything hotpluggable, so
    pci_eisa_init() can become __init.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d62ac21aa075c8ddf3d02a98d28afce635e77e8e
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Mar 26 21:32:26 2007 -0800

    [PATCH] ntp: avoid time_offset overflows
    
    I've been seeing some odd NTP behavior recently on a few boxes and
    finally narrowed it down to time_offset overflowing when converted to
    SHIFT_UPDATE units (which was a side effect from my HZfreeNTP patch).
    
    This patch converts time_offset from a long to a s64 which resolves the
    issue.
    
    [tglx@linutronix.de: signedness fixes]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b92c4f922b2e8c70f8790d42e45bb9401c57be63
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Mar 26 21:32:25 2007 -0800

    [PATCH] uml: use correct register file size everywhere
    
    This patch uses MAX_REG_NR consistently to refer to the register file size.
     FRAME_SIZE isn't sufficient because on x86_64, it is smaller than the
    ptrace register file size.  MAX_REG_NR was introduced as a consistent way
    to get the number of registers, but wasn't used everywhere it should be.
    
    When this causes a problem, it makes PTRACE_SETREGS fail on x86_64 because
    of a corrupted segment register value in the known-good register file.  The
    patch also adds a register dump at that point in case there are any future
    problems here.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7632fc8f809a97f9d82ce125e8e3e579390ce2e5
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Mar 26 21:32:24 2007 -0800

    [PATCH] uml: fix static linking
    
    During a static link, ld has started putting a .note section in the
    .uml.setup.init section.  This has the result that the UML setups begin
    with 32 bytes of garbage and UML crashes immediately on boot.
    
    This patch creates a specific .note section for ld to drop this stuff
    into.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e9d5a461157c1244475bc400fcac7f871608715e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 26 21:32:23 2007 -0800

    [PATCH] drivers/spi/: fix section mismatches
    
      WARNING: drivers/built-in.o - Section mismatch: reference to .init.text:spi_register_master from .text between 'spi_bitbang_start' (at offset 0x84e11a) and 'bitbang_work'
      WARNING: drivers/built-in.o - Section mismatch: reference to .init.text:spi_alloc_master from .text between 'butterfly_attach' (at offset 0x84e681) and 'at25_remove'
      WARNING: drivers/built-in.o - Section mismatch: reference to .init.text:spi_new_device from .text between 'butterfly_attach' (at offset 0x84e7e4) and 'at25_remove'
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 78d832f62643ac6209beccbfb29228314423935e
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Mon Mar 26 21:32:22 2007 -0800

    [PATCH] utsns: fix !CONFIG_UTS_NS behavior
    
    When CONFIG_UTS_NS=n, clone(CLONE_NEWUTS) quietly refuses.  So correctly does
    not unshare a new uts namespace, but also does not return -EINVAL.
    
    Fix this to return -EINVAL so the caller knows his request was denied.
    
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 62b3e920ed7612f318126f9c9b37c6a8dcd4199e
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Mar 26 21:32:21 2007 -0800

    [PATCH] tty: minor merge correction
    
    Its now used.. because we added the new definitions so enabled all the
    goodies on i386
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d75e26a8298f84bca66374e98fa69049f26083ba
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Mar 26 21:32:20 2007 -0800

    [PATCH] uml: fix epoll
    
    UML/x86_64 needs the same packing of struct epoll_event as x86_64.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Davide Libenzi <davidel@xmailserver.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3899210ad9850e3b8909674c92dccbd3caaf9750
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Mar 26 21:32:19 2007 -0800

    [PATCH] ISDN: fix BChannel_bh() call from isar_bh()
    
    isar_bh() bh handler calls another (compatible) bh handler - BChannel_bh()
    - but passes struct BCState* instead of struct work_struct*, which seems
    wrong.
    
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ff100d76ff76477a2ead3aac94d04f2e891f44e
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Mar 26 21:32:19 2007 -0800

    [PATCH] correct slow acpi_pm rating
    
    On Bob's machine clocksource is selecting PIT over the ACPI PM timer,
    because he has the PIIX4 bug.  That bug drops the ACPI PM timers rating
    to the same as the PIT, so that's why you're getting the PIT.
    
    Realistically, the PIT is much slower then even the triple read ACPI PM,
    so the de-ranking code is probably dropping it too far.
    
    So don't drop ACPI PM quite so low if we see the PIIX4 bug.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Bob Tracy <rct@gherkin.frus.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d340d89087534e8b12e1b6ed1c1569dd892b5465
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Mar 26 21:32:15 2007 -0800

    [PATCH] generic_serial: fix decoding of baud rate
    
    Commit d720bc4b8fc5d6d179ef094908d4fbb5e436ffad partially removed a
    private implementation of baud speed decoding.  However it doesn't seem
    to be complete: after the speed is decoded, it is still being used as an
    index to a local speed table (array overrun, no doubt).
    
    This was found by Graham Murray who noticed it caused a 2.6.19 regression
    with the SX driver: https://bugs.gentoo.org/170554
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5e55e2f5fc95b355d8aa649f346cff69904c8ade
Author: Neil Brown <neilb@suse.de>
Date:   Mon Mar 26 21:32:14 2007 -0800

    [PATCH] md: convert compile time warnings into runtime warnings
    
    ...  still not sure why we need this ....
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 041ae52e265fc432ea5525b1c66720385c2d11f0
Author: Neil Brown <neilb@suse.de>
Date:   Mon Mar 26 21:32:14 2007 -0800

    [PATCH] md: clear the congested_fn when stopping a raid5
    
    If this mddev and queue got reused for another array that doesn't register a
    congested_fn, this function would get called incorretly.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3d37890baa4ca962f8a6b77525b8f3d0698eee09
Author: Neil Brown <neilb@suse.de>
Date:   Mon Mar 26 21:32:13 2007 -0800

    [PATCH] md: allow raid4 arrays to be reshaped
    
    All that is missing the the function pointers in raid4_pers.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 79f6523a16b2010969418f8df25fe61498dec66b
Author: J. Bruce Fields <bfields@fieldses.org>
Date:   Mon Mar 26 21:32:10 2007 -0800

    [PATCH] knfsd: nfsd4: remove superfluous cancel_delayed_work() call
    
    This cancel_delayed_work call is called from a function that is only called
    from a piece of code that immediate follows a cancel and destruction of the
    workqueue, so it's clearly a mistake.
    
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 21315edd4877b593d5bf17a601a48fc836b8ba58
Author: Bruce Fields <bfields@citi.umich.edu>
Date:   Mon Mar 26 21:32:09 2007 -0800

    [PATCH] knfsd: nfsd4: demote "clientid in use" printk to a dprintk
    
    The reused clientid here is a more of a problem for the client than the
    server, and the client can report the problem itself if it's serious.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 54c044094947826105317dadd01deca083627ea1
Author: Bruce Fields <bfields@citi.umich.edu>
Date:   Mon Mar 26 21:32:09 2007 -0800

    [PATCH] knfsd: nfsd4: fix inheritance flags on v4 ace derived from posix default ace
    
    A regression introduced in the last set of acl patches removed the
    INHERIT_ONLY flag from aces derived from the posix acl.  Fix.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 598b9a56373f0596ed48f7af730706aaee998d5f
Author: Neil Brown <neilb@suse.de>
Date:   Mon Mar 26 21:32:08 2007 -0800

    [PATCH] knfsd: allow nfsd READDIR to return 64bit cookies
    
    ->readdir passes lofft_t offsets (used as nfs cookies) to
    nfs3svc_encode_entry{,_plus}, but when they pass it on to encode_entry it
    becomes an 'off_t', which isn't good.
    
    So filesystems that returned 64bit offsets would lose.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ec28297a562f2b022115b9eb82e4ea724d996240
Author: Venki Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Mar 26 12:03:19 2007 -0700

    [PATCH] Fix maxcpus=1 trigerring BUG() in cpufreq
    
    Ingo reported it on lkml in the thread
      "2.6.21-rc5: maxcpus=1 crash in cpufreq: kernel BUG at drivers/cpufreq/cpufreq.c:82!"
    
    This check added to remove_dev  is symmetric to one in add_dev and handles
    callbacks for offline cpus cleanly.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6d9658df07789a124e5c1f8677afcd7773439f3e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sun Mar 11 13:52:33 2007 +0100

    KVM: always reload segment selectors
    
    failed VM entry on VMX might still change %fs or %gs, thus make sure
    that KVM always reloads the segment selectors. This is crutial on both
    x86 and x86_64: x86 has __KERNEL_PDA in %fs on which things like
    'current' depends and x86_64 has 0 there and needs MSR_GS_BASE to work.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>

commit 6af11b9e827aac1d664ccd31e94f122c7698416b
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Mar 19 13:18:10 2007 +0200

    KVM: Prevent system selectors leaking into guest on real->protected mode transition on vmx
    
    Intel virtualization extensions do not support virtualizing real mode.  So
    kvm uses virtualized vm86 mode to run real mode code.  Unfortunately, this
    virtualized vm86 mode does not support the so called "big real" mode, where
    the segment selector and base do not agree with each other according to the
    real mode rules (base == selector << 4).
    
    To work around this, kvm checks whether a selector/base pair violates the
    virtualized vm86 rules, and if so, forces it into conformance.  On a
    transition back to protected mode, if we see that the guest did not touch
    a forced segment, we restore it back to the original protected mode value.
    
    This pile of hacks breaks down if the gdt has changed in real mode, as it
    can cause a segment selector to point to a system descriptor instead of a
    normal data segment.  In fact, this happens with the Windows bootloader
    and the qemu acpi bios, where a protected mode memcpy routine issues an
    innocent 'pop %es' and traps on an attempt to load a system descriptor.
    
    "Fix" by checking if the to-be-restored selector points at a system segment,
    and if so, coercing it into a normal data segment.  The long term solution,
    of course, is to abandon vm86 mode and use emulation for big real mode.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 09d4895488d4df5c58b739573846f514ceabc911
Author: Thomas Viehweger <Thomas.Viehweger@marconi.com>
Date:   Thu Mar 22 11:20:32 2007 -0300

    V4L/DVB (5472): Isl6421: don't reference freed memory
    
    After freeing a block there should be no reference to this block.
    
    Signed-off-by: Thomas Viehweger <Thomas.Viehweger@marconi.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7a7cd1920969dd9da4e0d99aab573b3eba24c799
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Tue Mar 13 23:44:57 2007 -0300

    V4L/DVB (5441): Saa7146: Fix allocation of clipping memory
    
    Olaf Hering pointed out that SAA7146_CLIPPING_MEM would become
    very large for PAGE_SIZE > 4K.
    In fact, the number of clipping windows is limited to 16,
    and calculate_clipping_registers_rect() does not use more
    than 256 bytes. SAA7146_CLIPPING_MEM adjusted accordingly.
    
    Thanks-to: Olaf Hering <olaf@aepfle.de>
    Acked-by: Michael Hunold <hunold@linuxtv.org>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 21b48a70f7e26906d522c81b22228b375b450a8f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Mar 12 19:20:15 2007 -0300

    V4L/DVB (5421): Fix suspend/resume in msp3400 and tuner
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3284b4e077cb2322754ea7455b8f8af7ce3777b8
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Mar 10 20:21:07 2007 -0300

    V4L/DVB (5415): Msp_attach must return 0 if no msp3400 was found.
    
    Returning -1 causes the probe to stop, but it should just continue
    instead.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a9aaec4e83e687d23b78b38e331bbd6a10b96380
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Mar 13 13:41:49 2007 -0300

    V4L/DVB (5408): Fix SECAM handling on saa7115
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c278850206fd9df0bb62a72ca0b277fe20c5a452
Author: Simon Arlott <simon@fire.lp0.eu>
Date:   Sat Mar 10 06:21:25 2007 -0300

    V4L/DVB (5400): Core: fix several locking related problems
    
    Fix several instances of dvb-core functions using mutex_lock_interruptible
    and returning -ERESTARTSYS where the calling function will either never
    retry or never check the return value.
    These cause a race condition with dvb_dmxdev_filter_free and
    dvb_dvr_release, both of which are filesystem release functions whose
    return value is ignored and will never be retried.  When this happens it
    becomes impossible to open dvr0 again (-EBUSY) since it has not been
    released properly.
    
    Signed-off-by: Simon Arlott <simon@fire.lp0.eu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Acked-By: Johannes Stezenbach <js@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b10fece583fdfdb3d2f29b0da3896ec58b8fe122
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Wed Mar 7 18:19:46 2007 -0300

    V4L/DVB (5390): Radio: Fix error in Kbuild file
    
    All the radio drivers need video_dev, but they were depending on
    VIDEO_DEV!=n.  That meant that one could try to compile the driver into
    the kernel when VIDEO_DEV=m, which will not work.  If video_dev is a
    module, then the radio drivers must be modules too.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 726cf56f24cbadaad1719724a30c29eb92911524
Author: Vincent Penne <ziggy@sashipa.com>
Date:   Sun Mar 25 11:58:23 2007 -0300

    V4L/DVB (5332): Ir_rc5_timer_end decoder lockup fix
    
    ir_rc5_timer_end decoder lockup fix
    
    Signed-off-by: Vincent Penne <ziggy@sashipa.com>
    Signed-off-by: Hermann Pitton <hermann-pitton@arcor.de>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7945d5626c4e09eca5eb70f65ae7344e9e246d8f
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Tue Mar 27 01:13:55 2007 -0700

    [SPARC]: sparc64 gcc-4.2.0 20070317 -Werror failure
    
    Compiling 2.6.21-rc5 with gcc-4.2.0 20070317 (prerelease)
    for sparc64 fails as follows:
    
      gcc -Wp,-MD,arch/sparc64/kernel/.time.o.d  -nostdinc -isystem /home/mikpe/pkgs/linux-sparc64/gcc-4.2.0/lib/gcc/sparc64-unknown-linux-gnu/4.2.0/include -D__KERNEL__ -Iinclude  -include include/linux/autoconf.h -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Os -m64 -pipe -mno-fpu -mcpu=ultrasparc -mcmodel=medlow -ffixed-g4 -ffixed-g5 -fcall-used-g7 -Wno-sign-compare -Wa,--undeclared-regs -fomit-frame-pointer  -fno-stack-protector -Wdeclaration-after-statement -Wno-pointer-sign -Werror   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR(time)"  -D"KBUILD_MODNAME=KBUILD_STR(time)" -c -o arch/sparc64/kernel/time.o arch/sparc64/kernel/time.c
    cc1: warnings being treated as errors
    arch/sparc64/kernel/time.c: In function 'kick_start_clock':
    arch/sparc64/kernel/time.c:559: warning: overflow in implicit constant conversion
    make[1]: *** [arch/sparc64/kernel/time.o] Error 1
    make: *** [arch/sparc64/kernel] Error 2
    
    gcc gets unhappy when the MSTK_SET macro's u8 __val variable
    is updated with &= ~0xff (MSTK_YEAR_MASK). Making the constant
    unsigned fixes the problem.
    
    [ I fixed up the sparc32 side as well -DaveM ]
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 40bee44eaef91b6030037c8bb47f909181fb1edc
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Wed Mar 21 13:11:02 2007 +0100

    Export __splice_from_pipe()
    
    Ocfs2 wants to implement it's own splice write actor so that it can better
    manage cluster / page locks. This lets us re-use the rest of splice write
    while only providing our own code where it's actually important.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 08c72591636829d40bd695d43ec6d2a8191b668b
Author: Nick Piggin <npiggin@suse.de>
Date:   Tue Mar 27 08:55:39 2007 +0200

    2/2 splice: dont readpage
    
    Splice does not need to readpage to bring the page uptodate before writing
    to it, because prepare_write will take care of that for us.
    
    Splice is also wrong to SetPageUptodate before the page is actually uptodate.
    This results in the old uninitialised memory leak. This gets fixed as a
    matter of course when removing the readpage logic.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 485ddb4b9741bafb70b22e5c1f9b4f37dc3e85bd
Author: Nick Piggin <npiggin@suse.de>
Date:   Tue Mar 27 08:55:08 2007 +0200

    1/2 splice: dont steal
    
    Stealing pages with splice is problematic because we cannot just insert
    an uptodate page into the pagecache and hope the filesystem can take care
    of it later.
    
    We also cannot just ClearPageUptodate, then hope prepare_write does not
    write anything into the page, because I don't think prepare_write gives
    that guarantee.
    
    Remove support for SPLICE_F_MOVE for now. If we really want to bring it
    back, we might be able to do so with a the new filesystem buffered write
    aops APIs I'm working on. If we really don't want to bring it back, then
    we should decide that sooner rather than later, and remove the flag and
    all the stealing infrastructure before anybody starts using it.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 1ffb96c587fa2af0d690dc3548a4a781c477bfb7
Author: Thibaut VARENE <T-Bone@parisc-linux.org>
Date:   Thu Mar 15 12:59:19 2007 +0100

    make elv_register() output atomic
    
    Booting 2.6.21-rc3-g45592145 I noticed the following on one of my
    machines in the bootlog:
    
    io scheduler noop registered<6>Time: jiffies clocksource has been installed.
    
    io scheduler deadline registered (default)
    
    Looking at block/elevator.c, it appears that elv_register() uses two
    consecutive printks in a non-atomic way, leading to the above glitch. The
    attached trivial patch fixes this issue, by using a single printk.
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit f772b3d9ca135087a70406d8466e57d1cf29237e
Author: Vasily Tarasov <vtaras@openvz.org>
Date:   Tue Mar 27 08:52:47 2007 +0200

    block: blk_max_pfn is somtimes wrong
    
    There is a small problem in handling page bounce.
    
    At the moment blk_max_pfn equals max_pfn, which is in fact not maximum
    possible _number_ of a page frame, but the _amount_ of page frames.  For
    example for the 32bit x86 node with 4Gb RAM, max_pfn = 0x100000, but not
    0xFFFF.
    
    request_queue structure has a member q->bounce_pfn and queue needs bounce
    pages for the pages _above_ this limit.  This routine is handled by
    blk_queue_bounce(), where the following check is produced:
    
    	if (q->bounce_pfn >= blk_max_pfn)
    		return;
    
    Assume, that a driver has set q->bounce_pfn to 0xFFFF, but blk_max_pfn
    equals 0x10000.  In such situation the check above fails and for each bio
    we always fall down for iterating over pages tied to the bio.
    
    I want to notice, that for quite a big range of device drivers (ide, md,
    ...) such problem doesn't happen because they use BLK_BOUNCE_ANY for
    bounce_pfn.  BLK_BOUNCE_ANY is defined as blk_max_pfn << PAGE_SHIFT, and
    then the check above doesn't fail.  But for other drivers, which obtain
    reuired value from drivers, it fails.  For example sata_nv uses
    ATA_DMA_MASK or dev->dma_mask.
    
    I propose to use (max_pfn - 1) for blk_max_pfn.  And the same for
    blk_max_low_pfn.  The patch also cleanses some checks related with
    bounce_pfn.
    
    Signed-off-by: Vasily Tarasov <vtaras@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 37db9a348ad4250bd6009cec1bb108a653d1d220
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 26 23:18:09 2007 -0700

    [VIDEO] ffb: Fix two DAC handling bugs.
    
    The determination of whether the DAC has inverted cursor logic is
    broken, import the version checks the X.org driver uses to fix this.
    
    Next, when we change the timing generator, borrow code from X.org that
    does 10 NOP reads of the timing generator register afterwards to make
    sure the video-enable transition occurs cleanly.
    
    Finally, use macros for the DAC registers and fields in order to
    provide documentation for the next person who reads this code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 74e61dee2a98b5e538ee1448ca803fc0ad8e307f
Author: Robert Reif <reif@earthlink.net>
Date:   Mon Mar 26 19:10:43 2007 -0700

    [SPARC32]: Fix SMP build regression
    
    commit b19cbe2a1695c09c74f83646c4b82b51123b3690 [BRIDGE]: Fix fdb RCU
    race
    
    breaks sparc SMP build because atomic_add_unless is not exported.
    
    This patch exports atomic_add_unless and atomic_cmpxchg.
    
    Signed-off-by: Robert Reif <reif@earthlink.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b82f87f6d40f944a591d8d36c0fed2d4374efcb7
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 26 16:54:39 2007 -0700

    [DRM]: Delete sparc64 FFB driver code that never gets built.
    
    The Kconfig bits were removed long ago, so we should kill off the
    driver too.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f5bf1f2d061dea5146aa283685ce2b00cea2f3d
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Thu Mar 22 17:08:32 2007 -0700

    ocfs2_dlm: Check for migrateable lockres in dlm_empty_lockres()
    
    In dlm_migrate_lockres(), we check upfront whether the lockres is a
    candidate for migration. This patch encapsulates that code in a separate
    function so that dlm_empty_lockres() can also use it during umount. This
    patch addresses the umount process spinning problem.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 78062cb2e54ffe0df811dce5e68b54da9b8c9025
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Thu Mar 22 17:01:07 2007 -0700

    ocfs2_dlm: Fix lockres ref counting bug
    
    During umount, the umount thread migrates the lockres' and the dlm_thread
    frees the empty lockres'. Due to a race, the reference counting on the
    lockres goes awry leading to extra puts.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 3104a2175dc04b7a597acea90f19b033abcfc7d8
Author: Erez Zilber <erezz@voltaire.com>
Date:   Sun Mar 25 12:07:10 2007 +0200

    IB/iser: Handle aborting a command after it is sent
    
    The SCSI midlayer may abort a command that was already sent.  If the
    initiator is still trying to send the command (or data-out PDUs for
    that command), the QP may time out after the midlayer times
    out. Therefore, when aborting the command, iSER may still have
    references for the command's buffers.  When sending these PDUs, the
    sends will complete with an error and their resources will be released
    then.
    
    Signed-off-by: Erez Zilber <erezz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9b2f7bcf0efea98666da56073448647e2b373b67
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Mar 26 16:20:34 2007 -0700

    [NET]: Remove dead net/sched/Makefile entry for sch_hpfq.o.
    
    Remove the worthless net/sched/Makefile entry for the non-existent
    source file sch_hpfq.c.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0264d8853137a9a328d9f0ed29e083dd505512cb
Author: Michael S. Tsirkin <mst@dev.mellanox.co.il>
Date:   Sun Mar 25 11:17:43 2007 +0200

    IB/mthca: Fix thinko in init_mr_table()
    
    Commit c20e20ab ("IB/mthca: Merge MR and FMR space on 64-bit systems")
    swapped the number of MTTs and MPTs when initializing the MR table. As
    a result, we get a kernel oops when the number of MTT segments
    allocated exceeds 0x20000.
    
    Noted by Troy Benjegerdes <troy@scl.ameslab.gov>, and reproduced by
    Dotan Barak <dotanb@mellanox.co.il>.  This fixes
    https://bugs.openfabrics.org/show_bug.cgi?id=490
    
    Signed-off-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ed6ee5178e6d78ba7f79a5ece3f0b70ece531a6a
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Mon Mar 26 17:48:52 2007 -0500

    RDMA/cxgb3: Fix resource leak in cxio_hal_init_ctrl_qp()
    
    This was spotted by the Coverity checker (CID 1554).
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 703071b5b93d88d5acb0edd5b9dd86c69ad970f2
Merge: 6288c33... 09c72ec...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 26 14:51:24 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [SUNGEM]: Fix MAC address setting when interface is up.
      [IPV4] fib_trie: Document locking.
      [NET]: Correct accept(2) recovery after sock_attach_fd()
      [PPP]: Don't leak an sk_buff on interface destruction.
      [NET_SCHED]: Fix ingress locking
      [NET_SCHED]: cls_basic: fix NULL pointer dereference
      [DCCP]: make dccp_write_xmit_timer() static again
      [TG3]: Update version and reldate.
      [TG3]: Exit irq handler during chip reset.
      [TG3]: Eliminate the unused TG3_FLAG_SPLIT_MODE flag.
      [IPV6]: Fix routing round-robin locking.
      [DECNet] fib: Fix out of bound access of dn_fib_props[]
      [IPv4] fib: Fix out of bound access of fib_props[]
      [NET] AX.25 Kconfig and docs updates and fixes
      [NET]: Fix neighbour destructor handling.
      [NET]: Fix fib_rules compatibility breakage
      [SCTP]: Update SCTP Maintainers entry
      [NET]: remove unused header file: drivers/net/wan/lmc/lmc_media.h

commit 6288c338661cc26ea66e7818b0d3862ee163fd1d
Merge: 8b66a45... e675c0d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 26 14:45:56 2007 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] zcrypt: Fix ap_poll_requests counter in lost requests error path.
      [S390] zcrypt: Fix possible dead lock in AP bus module.
      [S390] cio: Device status validity.
      [S390] kprobes: Align probe address.
      [S390] Fix TCP/UDP pseudo header checksum computation.
      [S390] dasd: Work around gcc bug.

commit 09c72ec8ed8f7499d115309a6e19cd5e66808d88
Author: Ruben Vandeginste <snowbender@gmail.com>
Date:   Mon Mar 26 14:43:49 2007 -0700

    [SUNGEM]: Fix MAC address setting when interface is up.
    
    This patch implements set_mac_address for the sungem driver.  This
    allows changing the mac address of the interface, even when the
    interface is up.
    
    Signed-off-by: Ruben Vandeginste <snowbender@gmail.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8b66a454bf09958b474d12981996287d19aa462d
Merge: 55ab975... 3b009c6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 26 14:34:11 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      USB: fix usb-serial/ftdi build warning
      USB: fix usb-serial/generic build warning
      USB: another entry for the quirk list
      USB: remove duplicated device id in airprime driver
      USB: omap_udc: workaround dma_free_coherent() bogosity
      UHCI: Fix problem caused by lack of terminating QH

commit 55ab97569f5e64a1febe02485b2d5dd77c208298
Merge: 04a3952... bf5b4ba...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 26 14:33:50 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6:
      PCI: Fix warning message in PCIE port driver
      PCI: Stop unhiding the SMBus on Toshiba laptops
      PCI: Fix up PCI power management doc
      pci: set pci=bfsort for PowerEdge R900

commit 04a395233089ed160ef87a6c2155e5dedc6f7d15
Author: Russ Cox <rsc@swtch.com>
Date:   Mon Mar 26 11:23:56 2007 -0400

    [PATCH] Add const to pointer qualifiers for __chk_user_ptr and __chk_io_ptr.
    
    Change prototypes for __chk_user_ptr and __chk_io_ptr to take const
    void* instead of void*, so that code can pass "const void *" to them.
    
    (Right now sparse does not warn about passing const void* to void*
    functions, but that is a separate bug that I believe Josh is working on,
    and once sparse does check this, the changed prototypes will be
    necessary.)
    
    Signed-off-by: Russ Cox <rsc@swtch.com>
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Acked-by: Christopher Li <sparse@chrisli.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d562f1f8a92035d5d4681c178fccb991ce57f33a
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Mon Mar 26 14:22:22 2007 -0700

    [IPV4] fib_trie: Document locking.
    
    Paul E. McKenney writes:
    
    > Those of use who dive into networking only occasionally would much
    > appreciate this.  ;-)
    
    No problem here...
    
    Acked-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00db779bfe66b9039a6f34b77fe6184820958362
Merge: 9c88b70... d32b687...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 26 14:21:55 2007 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ericvh/v9fs
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ericvh/v9fs:
      9p: make struct v9fs_cached_file_operations static

commit 3b009c637fee4990265591cc282d0c0f9e3c5384
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Mar 23 12:54:27 2007 -0700

    USB: fix usb-serial/ftdi build warning
    
    Fix annoying build warning:
    
    drivers/usb/serial/ftdi_sio.c:890: warning: enumeration value `FT232RL' not handled in switch
    
    Also add logic to detect FT232R chips (version 6.00, usb 2.0 full speed),
    so that case isn't completely useless.  (NOTE:  FT232RL and FT232RQ are
    the same chip in different packages:  L is SSOP, Q is QFN.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b46d60fc4b2665107a04f75e5381294bfaf20177
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Mar 23 12:51:55 2007 -0700

    USB: fix usb-serial/generic build warning
    
    Fix annoying build warning when CONFIG_USB_SERIAL_GENERIC is undefined.
    
      drivers/usb/serial/generic.c:24: warning: `generic_probe' declared `static' but never defined
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8a61499bc769f3e12c7f866f7283728308fff6ad
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Mar 20 19:32:51 2007 +0100

    USB: another entry for the quirk list
    
    this scanner disconnects upon suspend.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4928245163b1595f0846aa87ddd1d4f682364fe1
Author: Jon K Hellan <jon.kare.hellan@uninett.no>
Date:   Tue Mar 20 12:45:42 2007 +0100

    USB: remove duplicated device id in airprime driver
    
    Both airprime and option now want to handle vendor ID 0x1410,
    device ID 0x1100. Airprime calls it 'ExpressCard34 Qualcomm 3G CDMA'.
    Option calls it 'Novatel Merlin XS620/S640'. Patch attached to remove it
    from airprime.
    
    From: Jon K Hellan <jon.kare.hellan@uninett.no>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8a3c1f573c771e60f67ef172d2392d1a28385b4a
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Mar 21 12:26:32 2007 -0700

    USB: omap_udc: workaround dma_free_coherent() bogosity
    
    Various fixes to omap_udc, noted with some recent testing:
    
     - Cope with some SMP-induced braindamage in ARM's dma_{alloc,free}_coherent()
       implementation: alloc() can be called with IRQs blocked, but since late
       last year that's no longer true for free().  This resolves really NASTY
       problems with logspamming via WARN_ON(), indicating N-page leaks.
    
     - Be more correct in handling GET_STATUS request for RECIP_ENDPOINT ... the
       previous code only handled RECIP_INTERFACE, this version should be correct
       except for (sigh) bulk/interrupt endpoints.
    
     - Provide a better name for the function reporting whether the board has
       vbus sensing wired up.
    
    GET_STATUS requests for endpoint status still acts strangely though, at least
    given one flakey host doesn't always ack the first DATA packet, then the packet
    that gets retransmitted doesn't have data!
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e009f1b202219c62ea7e277adbb953d703dac983
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Mar 19 15:31:42 2007 -0400

    UHCI: Fix problem caused by lack of terminating QH
    
    This patch (as871) fixes a problem introduced by an earlier change.
    It turns out that some systems really do need to have a terminating
    skeleton QH present whenever FSBR is on.  I don't know any way to tell
    which systems do need it and which don't; the easiest answer is to
    have it there always.
    
    This fixes the NumLock-hang bug reported by Jiri Slaby.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9c88b702186d4bb1b28c9bdd5f224f3f8ce2ea51
Merge: 291bc04... 513daad...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 26 14:13:54 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6:
      ide: use correct IDE error recovery
      pdc202xx_new: Enable ATAPI DMA
      ide: cosmetic adaption of drivers/ide/Kconfig concerning SATA
      ide: fix locking for manual DMA enable/disable ("hdparm -d")
      ide: revert "ide: fix drive side 80c cable check, take 2" for now

commit bf5b4ba3d9f37d41d940a92822b534561abf4f4c
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Fri Mar 23 12:15:05 2007 -0400

    PCI: Fix warning message in PCIE port driver
    
    PCIE error output should conform to vendor_id:device_id.
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9208ee8286ea2c0136a4bc58638b0295bad791c8
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Mar 24 16:56:44 2007 +0100

    PCI: Stop unhiding the SMBus on Toshiba laptops
    
    It was found that the Toshiba laptops with hidden Intel SMBus have SMM
    code handling the thermal management which accesses the SMBus. Thus it
    is not safe to unhide it and let Linux access it. We have to leave the
    SMBus hidden. SMM is a pain, really.
    
    This fixes bugs #6315 and #6395, for good this time.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5fabdb94394bef0651479fc14394121c60d5aff7
Author: Jonathan Corbet <corbet@lwn.net>
Date:   Thu Mar 22 16:53:40 2007 -0600

    PCI: Fix up PCI power management doc
    
    Update the documentation of PCI power management functions.
    
    Signed-off-by: Jonathan Corbet <corbet@lwn.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f7a9dae7c41580761e7f6de1d508c010b1b44993
Author: Matt Domsch <Matt_Domsch@dell.com>
Date:   Fri Mar 23 23:58:07 2007 -0500

    pci: set pci=bfsort for PowerEdge R900
    
    This patch automatically enables pci=bfsort for the Dell PowerEdge
    R900.  This is necessary to ensure the onboard NICs enumerate in the
    proper order, similar to the other systems already on the list.
    
    Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 79f4f6428f6ceb9af57330092271bda028c23a96
Author: Alexey Dobriyan <adobriyan@sw.ru>
Date:   Mon Mar 26 14:09:52 2007 -0700

    [NET]: Correct accept(2) recovery after sock_attach_fd()
    
    * d_alloc() in sock_attach_fd() fails leaving ->f_dentry of new file NULL
    * bail out to out_fd label, doing fput()/__fput() on new file
    * but __fput() assumes valid ->f_dentry and dereferences it
    
    Signed-off-by: Alexey Dobriyan <adobriyan@sw.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 291bc047e125ff02c9affe06a7df28bed57b054d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Mar 26 11:21:08 2007 +0200

    [PATCH] clockevents: remove bad designed sysfs support for now
    
    The current sysfs support of clockevents does not obey the "only one
    value per file" rule.
    
    The real fix is not 2.6.21 material. Therefor remove the sysfs support
    for now.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 513daadd152ddbf32cb6d0447ddba3427ce5b8e8
Author: Suleiman Souhlal <suleiman@google.com>
Date:   Mon Mar 26 23:03:20 2007 +0200

    ide: use correct IDE error recovery
    
    IDE error recovery is using IDLE IMMEDIATE if the drive is busy or has DRQ set.
    This violates the ATA spec (can only send IDLEIMMEDIATE when drive is not
    busy) and really hoses up some drives (modern drives will not be able to
    recover using this error handling).  The correct thing to do is issue a SRST
    followed by a SET FEATURES command.  This is what Western Digital recommends
    for error recovery and what Western Digital says Windows does. Italso does
    not violate the ATA spec as far as I can tell.
    
    Bart:
    * port the patch over the current tree
    * undo the recalibration code removal
    * send SET FEATURES command after checking for good drive status
    * don't check whether the current request is of REQ_TYPE_ATA_{CMD,TASK}
      type because we need to send SET FEATURES before handling any requests
    * some pre-ATA4 drives require INITIALIZE DEVICE PARAMETERS command before
      other commands (except IDENTIFY) so send SET FEATURES only if there are
      no pending drive->special requests
    * update comments and patch description
    * any bugs introduced by this patch are mine and not Suleiman's :-)
    
    Signed-off-by: Suleiman Souhlal <suleiman@google.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 362ebd83adb4ff2761b6f49a3570f501c3c7e467
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Mar 26 23:03:19 2007 +0200

    pdc202xx_new: Enable ATAPI DMA
    
    [ bart: the ressurection of 2 years old patch which slipped thru the cracks
      (thanks to Sergei Shtylyov for finding it) ]
    
    These is the patch to turn on pdc202xx_new for ATAPI DMA.  When testing, it
    works fine without the (request_bufflen % 256) workaround as needed in libata.
    ide-scsi filters out (pc->request_transfer % 1024) and use PIO, so the pdc202xx
    ATAPI DMA problem is avoid.  Both ide-cd and ide-scsi won't hit the ATAPI DMA
    problem on pdc202xx_new.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit b43c5f3dbe0c93dc205a7c69f892b94b7037d862
Author: Patrick Ringl <patrick_@freenet.de>
Date:   Mon Mar 26 23:03:19 2007 +0200

    ide: cosmetic adaption of drivers/ide/Kconfig concerning SATA
    
    Since especially Serial ATA has it's own menu point now, I guess we can
    change the description of the deprecated SATA driver as well, since the
    new libATA subsystem is not configured through a SCSI low-level driver
    anymore, but has it's own menu point.
    
    From: Patrick Ringl <patrick_@freenet.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 8799620400b0b1a4729d8be828b5bfb3d2a8db1a
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Mon Mar 26 23:03:19 2007 +0200

    ide: fix locking for manual DMA enable/disable ("hdparm -d")
    
    Since hwif->ide_dma_check and hwif->ide_dma_on never queue any commands
    (ide_config_drive_speed() sets transfer mode using polling and has no error
    recovery) we are safe with setting hwgroup->busy for the time while DMA
    setting for a drive is changed (so it won't race against I/O commands in fly).
    
    I audited briefly all ->ide_dma_check/->ide_dma_on/->tuneproc/->speedproc
    implementations and they all look OK wrt to this change.
    
    This patch finally allowed me to close kernel bugzilla bug #8169
    (once again thanks to Patrick Horn for reporting the issue & testing patches).
    
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit f68d9320cd06fdec19735143b42e5197b63165b4
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Mon Mar 26 23:03:18 2007 +0200

    ide: revert "ide: fix drive side 80c cable check, take 2" for now
    
    "ide: fix drive side 80c cable check, take 2" patch from Tejun Heo (commit
    fab59375b9543f84d1714f7dd00f5d11e531bd3e) fixed 80c bit test (bit13 of word93)
    but we also need to fix master/slave IDENTIFY order (slave device should be
    probed first in order to make it release PDIAG- signal) and we should also
    check for pre-ATA3 slave devices (which may not release PDIAG- signal).
    
    [ Unfortunately the fact that IDE driver doesn't reset devices itself helps
      only a bit as it seems that some BIOS-es reset ATA devices after programming
      the chipset, some BIOS-es can be set to not probe/configure selected devices,
      there may be no BIOS in case of add-on cards etc. ]
    
    Since we are quite late in the release cycle and the required changes will
    affect a lot of systems just revert the fix for now.
    
    [ Please also see libata commit f31f0cc2f0b7527072d94d02da332d9bb8d7d94c. ]
    
    Thanks goes out to Fernando Mitio Yamada for reporting the problem
    and patiently testing patches.
    
    Acked-by: Tejun Heo <htejun@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit e675c0d2bf523a80098c843603ccc091d3720fb4
Author: Ralph Wuerthner <rwuerthn@de.ibm.com>
Date:   Mon Mar 26 20:42:43 2007 +0200

    [S390] zcrypt: Fix ap_poll_requests counter in lost requests error path.
    
    In the unlikely event that an AP device lost requests, don't forget to
    update the ap_poll_requests counter too. Same must happen in case an AP
    device is removed while there are still outstanding requests.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Ralph Wuerthner <rwuerthn@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>

commit c6a48264739e3486f66e5b21a543c9573b713621
Author: Ralph Wuerthner <rwuerthn@de.ibm.com>
Date:   Mon Mar 26 20:42:42 2007 +0200

    [S390] zcrypt: Fix possible dead lock in AP bus module.
    
    If a AP device is unconfigured __ap_poll_all() will call
    device_unregister() in software interrupt context which can cause
    dead locks. To fix this the device will be only marked as unconfigured
    and the device_unregister() call will be done later by either
    ap_scan_bus() or ap_queue_message() in process context.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Ralph Wuerthner <rwuerthn@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>

commit 25c61a1fe8c97d1352a2dc0eda25128b3be0db27
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Mar 26 20:42:41 2007 +0200

    [S390] cio: Device status validity.
    
    Only accumulate device status field in irb if it is valid.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>

commit b70842df77615309d76bcdd63bd289993e0844f2
Author: David Wilder <dwilder@us.ibm.com>
Date:   Mon Mar 26 20:42:40 2007 +0200

    [S390] kprobes: Align probe address.
    
    Running a probe on s390 with a probe address that is not 4 byte aligned
    results in a Kernel BUG.  The problem is that the stura instruction used
    by swap_instruction requires the destination address to be 4 byte aligned.
    As stura only writes 4 bytes, aligning to the next 4 byte aligned address
    results in the breakpoint instruction being stored past the probe address.
    The fix is to align the address backward (to the previous 4 byte aligned
    address) and writing the two byte breakpoint instruction in the appropriate
    bytes.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David Wilder <dwilder@us.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>

commit afbc1e994ddcf3b6fe2dc928ee8dc31a5d0c3118
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 26 20:42:39 2007 +0200

    [S390] Fix TCP/UDP pseudo header checksum computation.
    
    git commit f994aae1bd8e4813d59a2ed64d17585fe42d03fc changed the
    function declaration of csum_tcpudp_nofold. Argument types were
    changed from unsigned long to __be32 (unsigned int). Therefore we
    lost the implicit type conversion that zeroed the upper half of the
    registers that are used to pass parameters. Since the inline assembly
    relied on this we ended up adding random values and wrong checksums
    were created.
    Showed only up on machines with more than 4GB since gcc produced code
    where the registers that are used to pass 'saddr' and 'daddr' previously
    contained addresses before calling this function.
    Fix this by using 32 bit arithmetics and convert code to C, since gcc
    produces better code than these hand-optimized versions.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>

commit 04439694ea82fed62a97fd474147966381201954
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Mon Mar 26 20:42:38 2007 +0200

    [S390] dasd: Work around gcc bug.
    
    gcc incorrectly removes initialization of register 0 in dasd diag
    inline assembly. Use different register to work around this compiler
    bug.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>

commit d32b687e2e16e8174e88f186c3bae39a13e57b3d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 5 02:49:48 2007 +0100

    9p: make struct v9fs_cached_file_operations static
    
    This patch makes te needlessly global struct v9fs_cached_file_operations
    static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>

commit 165de5b7f2719c1984956504128545839762d635
Author: G. Liakhovetski <gl@dsa-ac.de>
Date:   Sun Mar 25 19:04:09 2007 -0700

    [PPP]: Don't leak an sk_buff on interface destruction.
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 035832a2806408ff209a0cb94bd64ea7dcf4d222
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Mar 24 22:13:25 2007 -0700

    [NET_SCHED]: Fix ingress locking
    
    Ingress queueing uses a seperate lock for serializing enqueue operations,
    but fails to properly protect itself against concurrent changes to the
    qdisc tree. Use queue_lock for now since the real fix it quite intrusive.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d3fa76ee6b4a8dd0efda4e78e96f5b19533b3dea
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Mar 24 22:13:06 2007 -0700

    [NET_SCHED]: cls_basic: fix NULL pointer dereference
    
    cls_basic doesn't allocate tp->root before it is linked into the
    active classifier list, resulting in a NULL pointer dereference
    when packets hit the classifier before its ->change function is
    called.
    
    Reported by Chris Madden <chris@reflexsecurity.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c93a882ebe673b5e6da0a70fd433f7517e032d23
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Mar 24 21:01:31 2007 -0700

    [DCCP]: make dccp_write_xmit_timer() static again
    
    dccp_write_xmit_timer() needlessly became global.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20bd7dd4cabfd0d6b6b70b99e88df901480a9841
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Mar 24 20:58:51 2007 -0700

    [TG3]: Update version and reldate.
    
    Update version to 3.75.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d18edcb212d7dc864a59e6aa9b6b9826299e0210
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Mar 24 20:57:11 2007 -0700

    [TG3]: Exit irq handler during chip reset.
    
    On most tg3 chips, the memory enable bit in the PCI command register
    gets cleared during chip reset and must be restored before accessing
    PCI registers using memory cycles.  The chip does not generate
    interrupt during chip reset, but the irq handler can still be called
    because of irq sharing or irqpoll.  Reading a register in the irq
    handler can cause a master abort in this scenario and may result in a
    crash on some architectures.
    
    Use the TG3_FLAG_CHIP_RESETTING flag to tell the irq handler to exit
    without touching any registers.  The checking of the flag is in the
    "slow" path of the irq handler and will not affect normal performance.
    The msi handler is not shared and therefore does not require checking
    the flag.
    
    Thanks to Bernhard Walle <bwalle@suse.de> for reporting the problem.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c46ae05d96f77f349ae60c799acb6ac6ddf07a8
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Mar 24 20:54:37 2007 -0700

    [TG3]: Eliminate the unused TG3_FLAG_SPLIT_MODE flag.
    
    This flag to support multiple PCIX split completions was never used
    because of hardware bugs.  This will make room for a new flag.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f11e6659ce9058928d73ff440f9b40a818d628ab
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Mar 24 20:36:25 2007 -0700

    [IPV6]: Fix routing round-robin locking.
    
    As per RFC2461, section 6.3.6, item #2, when no routers on the
    matching list are known to be reachable or probably reachable we
    do round robin on those available routes so that we make sure
    to probe as many of them as possible to detect when one becomes
    reachable faster.
    
    Each routing table has a rwlock protecting the tree and the linked
    list of routes at each leaf.  The round robin code executes during
    lookup and thus with the rwlock taken as a reader.  A small local
    spinlock tries to provide protection but this does not work at all
    for two reasons:
    
    1) The round-robin list manipulation, as coded, goes like this (with
       read lock held):
    
    	walk routes finding head and tail
    
    	spin_lock();
    	rotate list using head and tail
    	spin_unlock();
    
       While one thread is rotating the list, another thread can
       end up with stale values of head and tail and then proceed
       to corrupt the list when it gets the lock.  This ends up causing
       the OOPS in fib6_add() later onthat many people have been hitting.
    
    2) All the other code paths that run with the rwlock held as
       a reader do not expect the list to change on them, they
       expect it to remain completely fixed while they hold the
       lock in that way.
    
    So, simply stated, it is impossible to implement this correctly using
    a manipulation of the list without violating the rwlock locking
    semantics.
    
    Reimplement using a per-fib6_node round-robin pointer.  This way we
    don't need to manipulate the list at all, and since the round-robin
    pointer can only ever point to real existing entries we don't need
    to perform any locking on the changing of the round-robin pointer
    itself.  We only need to reset the round-robin pointer to NULL when
    the entry it is pointing to is removed.
    
    The idea is from Thomas Graf and it is very similar to how this
    was implemented before the advanced router selection code when in.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a979101106f549f4ed80d6dcbc35077be34d4346
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Mar 24 20:33:27 2007 -0700

    [DECNet] fib: Fix out of bound access of dn_fib_props[]
    
    Fixes a typo which caused fib_props[] to have the wrong size
    and makes sure the value used to index the array which is
    provided by userspace via netlink is checked to avoid out of
    bound access.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0ee18b9b7d3847976c6fb315c06a34fb296de0e
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Mar 24 20:32:54 2007 -0700

    [IPv4] fib: Fix out of bound access of fib_props[]
    
    Fixes a typo which caused fib_props[] to have the wrong size
    and makes sure the value used to index the array which is
    provided by userspace via netlink is checked to avoid out of
    bound access.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 954b2e7f4c37cbcdcf4ca7ac47524f3f6bf30119
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 24 12:54:26 2007 -0700

    [NET] AX.25 Kconfig and docs updates and fixes
    
     o The AX.25 Howto is unmaintained since several years.  I've replaced it
       with a wiki at http://www.linux-ax25.org which provides more uptodate
       information.
     o Change default for AX25_DAMA_SLAVE to Y.  AX25_DAMA_SLAVE only compiles
       in support for DAMA but doesn't activate it.  I hope this gets Linux
       distributions to ship their AX.25 kernels with AX25_DAMA_SLAVE enabled.
       The price for this would be very small.
     o Delete historic changelog from comments, that's what SCM systems are
       meant to do.
     o ---help--- in Kconfig looks so yellingly eye insulting.  Use just help.
     o Rewrite the commented out piece of old Linux 2.4 configuration language
       to Kconfig for consistency.
     o Fixup dependencies.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ecbb416939da77c0d107409976499724baddce7b
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Sat Mar 24 12:52:16 2007 -0700

    [NET]: Fix neighbour destructor handling.
    
    ->neigh_destructor() is killed (not used), replaced with
    ->neigh_cleanup(), which is called when neighbor entry goes to dead
    state. At this point everything is still valid: neigh->dev,
    neigh->parms etc.
    
    The device should guarantee that dead neighbor entries (neigh->dead !=
    0) do not get private part initialized, otherwise nobody will cleanup
    it.
    
    I think this is enough for ipoib which is the only user of this thing.
    Initialization private part of neighbor entries happens in ipib
    start_xmit routine, which is not reached when device is down.  But it
    would be better to add explicit test for neigh->dead in any case.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1701c68c1d1aeb3213d7016593ea9a1d4309417
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sat Mar 24 12:46:02 2007 -0700

    [NET]: Fix fib_rules compatibility breakage
    
    Based upon a patch from Patrick McHardy.
    
    The fib_rules netlink attribute policy introduced in 2.6.19 broke
    userspace compatibilty. When specifying a rule with "from all"
    or "to all", iproute adds a zero byte long netlink attribute,
    but the policy requires all addresses to have a size equal to
    sizeof(struct in_addr)/sizeof(struct in6_addr), resulting in a
    validation error.
    
    Check attribute length of FRA_SRC/FRA_DST in the generic framework
    by letting the family specific rules implementation provide the
    length of an address. Report an error if address length is non
    zero but no address attribute is provided. Fix actual bug by
    checking address length for non-zero instead of relying on
    availability of attribute.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f85813c33ddbf6d11ccfdbcc01f176e24a76bd2
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Fri Mar 23 11:39:51 2007 -0700

    [SCTP]: Update SCTP Maintainers entry
    
    Add Vlad Yasevich as the primary maintainer of SCTP and add a
    link to the project website.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ea3d0d77086d2c2fbe73adcc1ad075ce1f5be0e0
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Thu Mar 22 23:35:08 2007 -0700

    [NET]: remove unused header file: drivers/net/wan/lmc/lmc_media.h
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e0f2e3a06be513352cb4955313ed7e55909acd84
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 25 15:56:23 2007 -0700

    Linux 2.6.21-rc5
    
    .. hopefully most of the fallout of the timer changes is contained now.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 948ac6d71cf868b431adb3139d8dfbd9c4e4a6ca
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sun Mar 25 14:42:51 2007 +0200

    [PATCH] clocksource: Fix thinko in watchdog selection
    
    The watchdog implementation excludes low res / non continuous
    clocksources from being selected as a watchdog reference
    unintentionally.
    
    Allow using jiffies/PIT as a watchdog reference as long as no better
    clocksource is available. This is necessary to detect TSC breakage on
    systems, which have no pmtimer/hpet.
    
    The main goal of the initial patch (preventing to switch to highres/nohz
    when no reliable fallback clocksource is available) is still guaranteed
    by the checks in clocksource_watchdog().
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9501b6cf5541f0d576d566a463f1e7d3eaaab4eb
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sun Mar 25 14:31:17 2007 +0200

    [PATCH] dynticks: fix hrtimer rounding error in next_timer_interrupt
    
    The rework of next_timer_interrupt() fixed the timer wheel bugs, but
    invented a rounding error versus the next hrtimer event. This is caused
    by the conversion of the hrtimer internal representation to relative
    jiffies.
    
    This causes bug #8100:
    http://bugzilla.kernel.org/show_bug.cgi?id=8100
    
    next_timer_interrupt() returns "now" in such a case and causes the code
    in tick_nohz_stop_sched_tick() to trigger the timer softirq, which is
    bogus as no timer is due for expiry. This results in an endless context
    switching between idle and ksoftirqd until a timer is due for expiry.
    
    Modify the hrtimer evaluation so that, it returns now + 1, when the
    conversion results in a delta < 1 jiffie.
    
    It's confirmed to resolve bug #8100
    
    Reported-by: Emil Karlson <jkarlson@cc.hut.fi>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 317ec6cd00f25d05d153a780bc178c5335f320ee
Merge: 0fa7d86... 53698d2...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Mar 24 17:01:45 2007 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 4278/1: configure pxa27x I2C SCL as "input"
      [ARM] 4272/1: Missing symbol h1940_pm_return fix
      [ARM] 4235/1: ns9xxx: declare the clock functions as "const"
      [ARM] 4271/1: iop32x: fix ep80219 detection (support iq80219 platforms)
      [ARM] 4270/2: mach-s3c2443/irq.c off by one error in dma irqs

commit 0fa7d868ca456ddf4f41b700fd9dee186f8f4e12
Author: Patrick Ringl <patrick_@freenet.de>
Date:   Sat Mar 24 23:56:58 2007 +0100

    [PATCH] fix typos in net/ieee80211/Kconfig
    
    This is just a QA / cosmetic fix ..
    
    [ "a modules" => "a module" ]
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f5ae29e284b328e0976789d5c199bbbe80e4b005
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Mar 24 13:21:53 2007 -0400

    [PATCH] cx88-dvb: fix nxt200x rf input switching
    
    After dvb tuner refactoring, the pllbuff has been altered such that the pll
    address is now stored in buf[0].  Instead of sending buf to set_pll_input,
    we should send buf+1.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Cc: Mauro Carvalho Chehab <mchehab@infradead.org>
    Cc: Ivan Andrewjeski <ivan@fiero-gt.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 53698d2537bc8c2b8fedc788b8b927da9a004f9b
Author: Guennadi Liakhovetski <gl@dsa-ac.de>
Date:   Thu Mar 22 13:06:55 2007 +0100

    [ARM] 4278/1: configure pxa27x I2C SCL as "input"
    
    It has been reported by Julian Deng that configuring the pxa27x i2c SCL line as output generates a short negative pulse on it during the call to pxa_gpio_mode(GPIO117_I2CSCL_MD); as it first switches it to output and then configures it for the alternate function. The SCL line is in fact bidirectional and can also be configured as 117 | GPIO_ALT_FN_1_IN, in which case the pulse is not generated. This is exactly what this patch does.
    
    Author: Julian Deng <dengtj@sitek.cn>
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d9a5c0a4e0b4c84850a1a5bbacba3f7858b67037
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Mar 24 23:02:49 2007 +0100

    [PATCH] i386: Prevent early access to TSC to avoid crash on TSCless systems
    
    commit f9690982b8c2f9a2c65acdc113e758ec356676a3 removed the check for
    cpu_khz from sched_clock(), which prevented early access to the TSC by
    non obvious magic.
    
    This is harmless as long as the CPU has a TSC. On TSCless systems this
    results in an illegal instruction trap.
    
    Replace tsc_disabled and tsc_unstable by tsc_enabled, which is only set
    when the tsc is available and not unstable.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8fb303c7f1118b0a82aa08e33429adf9b5ad192c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 24 14:26:13 2007 +0000

    [MIPS] SB1250: Fix bugs/warnings by creative use of volatile.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 41a8198f61d858bcad7ef705d5d3ec3e3a8dea4a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 24 14:09:59 2007 +0000

    [MIPS] SB1: Fix pile of gcc's bogus format string warnings.
    
      CC      arch/mips/mm/cerr-sb1.o
    arch/mips/mm/cerr-sb1.c: In function 'sb1_cache_error':
    arch/mips/mm/cerr-sb1.c:235: warning: format '%010llx' expects type 'long long unsigned int', but argument 2 has type 'uint64_t'
    arch/mips/mm/cerr-sb1.c: In function 'extract_ic':
    arch/mips/mm/cerr-sb1.c:385: warning: format '%016llx' expects type 'long long unsigned int', but argument 3 has type 'uint64_t'
    arch/mips/mm/cerr-sb1.c:385: warning: format '%016llX' expects type 'long long unsigned int', but argument 6 has type 'uint64_t'
    arch/mips/mm/cerr-sb1.c: In function 'extract_dc':
    arch/mips/mm/cerr-sb1.c:523: warning: format '%010llx' expects type 'long long unsigned int', but argument 3 has type 'uint64_t'
    arch/mips/mm/cerr-sb1.c:523: warning: format '%016llX' expects type 'long long unsigned int', but argument 7 has type 'uint64_t'
    arch/mips/mm/cerr-sb1.c:570: warning: format '%016llX' expects type 'long long unsigned int', but argument 3 has type 'uint64_t'
      LD      arch/mips/mm/built-in.o
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bf9f88a2192aaee6f1bbff50175aa68ff107355e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 24 13:28:58 2007 +0000

    [MIPS] Jazz: Fix warning.
    
    arch/mips/jazz/jazzdma.c:70: warning: assignment makes integer from pointer without a cast
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e007566d138167f325a4f382bdb93e5d6552f86c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 24 13:20:15 2007 +0000

    [MIPS] R3000: local_flush_data_cache_page take a pointer argument.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ce486cd810a42572a91cada0be2538e433715449
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 24 13:06:43 2007 +0000

    [MIPS] ARC: Fix warning.
    
    The missing cast did result a warning when calling an 32-bit ARC firmware
    function that takes 5 arguments where the 5th argument is a pointer from a
    64-bit kernel.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7575a49f209190ca640e0da792565a1bcb641f3e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 23 21:36:37 2007 +0000

    [MIPS] Implement flush_anon_page().
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 80e89593e5a574a572f4e45e157733b5ea5ddfdb
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Wed Mar 21 00:56:28 2007 +0900

    [MIPS] SPARSEMEM: The first pfn of zone should be min_low_pfn, not 0.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7605b3906192a171e651076325b1ed1d5ea57ec9
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 20 13:56:50 2007 +0000

    [MIPS] Fix pipeline hazard.
    
    In the the sequence:
            ei
            ..
            mfc0    $x, $status
    
    the mfc0 may not see the SR_IE bit set. This was a deliberate bug in the
    kernel code because we knew this was a safe thing to do on all R2 silicon
    so far but new silicon is changing this.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 83598f1cb06101e972b1f5aaf3408eb729622fa8
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Mar 19 16:49:45 2007 -0700

    [MIPS] Make MIPS udelay() preempt safe under DEBUG_PREEMPT
    
    Signed-off-by: Manish Lachwani <mlachwani@mvista.com>
    Signed-off-by: Deepak Saxena <dsaxena@mvista.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c9d06962233bd0ce9bf46b007900eb88e716e948
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Mar 19 17:36:42 2007 +0100

    [MIPS] Always use virt_to_phys() when translating kernel addresses
    
    This patch fixes two places where we used plain 'x - PAGE_OFFSET' to
    achieve virtual to physical address convertions. This type of convertion
    is no more allowed since commit 6f284a2ce7b8bc49cb8455b1763357897a899abb.
    
    Reported-by: Maxime Bizon <mbizon@freebox.fr>
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    
    [Build fixes for machines that don't use the generic dma-coherence.h]
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f33bc55c472295966e520c9347822fdd8b1082cd
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 23 17:14:37 2007 -0700

    [PATCH] x86_64: avoid sending LOCAL_TIMER_VECTOR IPI to itself
    
    Ray Lee reported, that on an UP kernel with "noapic" command line option
    set, the box locks hard during boot.
    
    Adding some debug printks revealed, that the last action on the box
    before stalling was "Send IPI" - a debug printk which was put into
    smp_send_timer_broadcast_ipi().
    
    It seems that send_IPI_mask(mask, LOCAL_TIMER_VECTOR) fails when
    "noapic" is set on the command line on an UP kernel.
    
    Aside of that it does not make much sense to trigger an interrupt
    instead of calling the function directly on the CPU which gets the
    PIT/HPET interrupt in case of broadcasting.
    
    Reported-by: Ray Lee <ray-lk@madrabbit.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by:  Ray Lee <ray-lk@madrabbit.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6ea65ff79ceb36a1195761be857da1fdf9878450
Author: Roland McGrath <roland@redhat.com>
Date:   Fri Mar 23 14:26:33 2007 -0700

    [PATCH] i386: clear segment register padding in core dumps
    
    The segment register slots in struct pt_regs are padded to 32 bits.
    Some of these are stored with instructions like "pushl %es", which
    leaves the high 16 bits as they were.  So the high bits of these
    fields in struct pt_regs contain kernel stack garbage.  These bits are
    ignored by everything and never leak to user space, except in core
    dumps.  The user struct pt_regs is always at the base of the thread's
    kernel stack and so it seems unlikely the information that leaks from
    here is ever worthwhile so as to be a security concern, but I'm not
    sure about that.  It has been this way for ages; userland consumers of
    core dumps all mask off these high bits themselves.  So it is not urgent.
    
    This change masks off the padding bits of the segment register slots
    in core dumps.  ptrace already masks off these high bits, so this
    makes the values in core dumps consistent with what ptrace would
    report just before the process died.
    
    As I read the processor manuals, the cs and ss values will always be
    padded with zero bits rather than stack garbage.  But unlike "pushl %es",
    this is not simple to test with a userland program.  So I added the two
    instructions rather than wonder if they are really never necessary.
    
    I think that x86_64 does not have this problem (for either 32-bit or
    64-bit processes).  It only uses "mov" instructions from segment
    registers, which zero-extend.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2e7c28382b8426c6b7ac6f147177a664065f95f4
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 23 11:32:31 2007 -0700

    x86-64: add "local_apic_timer_c2_ok" here too
    
    Needed for any architecture that claims ARCH_APICTIMER_STOPS_ON_C3,
    not just i386.
    
    I'm hoping Thomas will clean this up a bit later..
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cad6a84a3913bc2d8a7ebb183e385dd6a2b76438
Merge: 0ab602e... 7a9eeb2...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 23 11:02:45 2007 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6:
      ieee1394: fix oops on "modprobe -r ohci1394" after network class_device conversion

commit 0ab602e5bc13e0ec6d41c0c325f005354d55b953
Merge: 105fd10... 991b555...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 23 11:01:41 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [netdrvr] ewrk3: correct card detection bug
      cxgb3 - fix white spaces in drivers/net/Kconfig
      myri10ge: update driver version to 1.3.0-1.226
      myri10ge: fix management of >4kB allocated pages
      myri10ge: update wcfifo and intr_coal_delay default values
      myri10ge: Serverworks HT2100 provides aligned PCIe completion
      mv643xx_eth: add mv643xx_eth_shutdown function
      SAA9730: Fix large pile of warnings
      Revert "ucc_geth: returns NETDEV_TX_BUSY when BD ring is full"
      cxgb3 - T3B2 pcie config space
      cxgb3 - Fix potential MAC hang
      cxgb3 - Auto-load FW if mismatch detected
      cxgb3 - fix ethtool cmd on multiple queues port
      Fix return code in pci-skeleton.c
      skge: use per-port phy locking
      skge: mask irqs when device down
      skge: deadlock on tx timeout
      [PATCH] airo: Fix an error path memory leak
      [PATCH] bcm43xx: MANUALWLAN fixes

commit 105fd108a66ceff2b0fb710582b97d61ee4c9d40
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Fri Mar 23 00:10:02 2007 -0700

    [PATCH] "ext[34]: EA block reference count racing fix" performance fix
    
    A little mistake in 8a2bfdcbfa441d8b0e5cb9c9a7f45f77f80da465 is making all
    transactions synchronous, which reduces ext3 performance to comical levels.
    
    Cc: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cee9e8c5cb1554e9e85ad764d27b6c808555ed89
Author: Guido Guenther <agx@sigxcpu.org>
Date:   Fri Mar 23 00:10:01 2007 -0700

    [PATCH] rivafb: fix initial brightness
    
    This is the rivafb equivalent of 238576e12fef1d52751c6e08db2d0bdb0e248caf.
    It fixes rivafb having a default backlight brightness of 0 (no picture at
    all) on a PBook 6,1.
    
    Signed-off-by: Guido Guenther <agx@sigxcpu.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6149dd5cfaea9889060f2c039eaf45e2b39f7fb3
Author: Danny Kukawka <dkukawka@suse.de>
Date:   Fri Mar 23 00:10:01 2007 -0700

    [PATCH] add Fujitsu Siemens Tablet PC devices to 8250_pnp.c
    
    Adds device ids of two Fujitsu Siemens Tablet PCs to pnp_dev_table
    
    Signed-off-by: Danny Kukawka <dkukawka@suse.de>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aa289b47231c95abe53a75223906fdfb79ae368e
Author: David Howells <dhowells@redhat.com>
Date:   Fri Mar 23 00:10:00 2007 -0700

    [PATCH] FDPIC: fix the /proc/pid/stat representation of executable boundaries
    
    Fix the /proc/pid/stat representation of executable boundaries.  It should
    show the bounds of the executable, but instead shows the bounds of the
    loader.
    
    Before the patch is applied, the bug can be seen by examining, say, inetd:
    
    	# ps | grep inetd
    	  610         root          0   S   /usr/sbin/inetd -i
    	# cat /proc/610/maps
    	c0bb0000-c0bba788 r-xs 00000000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    	c3180000-c31dede4 r-xs 00000000 00:0b 14582179  /lib/libuClibc-0.9.28.so
    	c328c000-c328ea00 rw-p 00008000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    	c3290000-c329b6c0 rw-p 00000000 00:00 0
    	c32a0000-c32c0000 rwxp 00000000 00:00 0
    	c32d4000-c32d8000 rw-p 00000000 00:00 0
    	c3394000-c3398000 rw-p 00000000 00:00 0
    	c3458000-c345f464 r-xs 00000000 00:0b 16384612  /usr/sbin/inetd
    	c3470000-c34748f8 rw-p 00004000 00:0b 16384612  /usr/sbin/inetd
    	c34cc000-c34d0000 rw-p 00000000 00:00 0
    	c34d4000-c34d8000 rw-p 00000000 00:00 0
    	c34d8000-c34dc000 rw-p 00000000 00:00 0
    	# cat /proc/610/stat
    	610 (inetd) S 1 610 610 0 -1 256 0 0 0 0 0 8 0 0 19 0 1 0 94392000718
    	950272 0 4294967295 3233480704 3233523592 3274440352 3274439976
     	3273467584 0 0 4096 90115 3221712796 0 0 17 0 0 0 0
    
    The code boundaries are 3233480704 to 3233523592, which are:
    
    	(gdb) p/x 3233480704
    	$1 = 0xc0bb0000
    	(gdb) p/x 3233523592
    	$2 = 0xc0bba788
    
    Which corresponds to this line in the maps file:
    
    	c0bb0000-c0bba788 r-xs 00000000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    
    Which is wrong.  After the patch is applied, the maps file is pretty much
    identical (there's some minor shuffling of the location of some of the
    anonymous VMAs), but the stat file is now:
    
    	# cat /proc/610/stat
    	610 (inetd) S 1 610 610 0 -1 256 0 0 0 0 0 7 0 0 18 0 1 0 94392000722
    	950272 0 4294967295 3276111872 3276141668 3274440352 3274439976
    	3273467584 0 0 4096 90115 3221712796 0 0 17 0 0 0 0
    
    The code boundaries are then 3276111872 to 3276141668, which are:
    
    	(gdb) p/x 3276111872
    	$1 = 0xc3458000
    	(gdb) p/x 3276141668
    	$2 = 0xc345f464
    
    And these correspond to this line in the maps file instead:
    
    	c3458000-c345f464 r-xs 00000000 00:0b 16384612  /usr/sbin/inetd
    
    Which is now correct.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0444b3035e5f4981f4d1d96f9f0c3cbada1e6d69
Author: James Morris <jmorris@namei.org>
Date:   Fri Mar 23 00:09:58 2007 -0700

    [PATCH] time: fix formatting in /proc/timer_list
    
    Fix the print formatting of three unsigned long fields in /proc/timer_list,
    which are currently being formatted as signed long.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e585bef815c0315f2730d7bb4e15b82602454efd
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 23 16:08:01 2007 +0100

    [PATCH] i386: add command line option "local_apic_timer_c2_ok"
    
    It turned out that it is almost impossible to trust ACPI, BIOS & Co.
    regarding the C states. This was the reason to switch the local apic
    timer off in C2 state already. OTOH there are sane and well behaving
    systems, which get punished by that decision.
    
    Allow the user to confirm that the local apic timer is trustworthy in C2
    state. This keeps the default behaviour on the safe side.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 296d93cd0205433489b0689533426ce0a8cf2dec
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 23 08:03:47 2007 -0700

    Revert "ACPI: Only use IPI on known broken machines (AMD, Dothan/BaniasPentium M)"
    
    This reverts commit 25496caec111481161e7f06bbfa12a533c43cc6f, which
    broke bootup on at least Ingo's ThinkPad T60.  Need to figure out
    exactly what is wrong before we can re-do the logic.
    
    Requested-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Thomas Renninger <trenn@suse.de>
    Cc: Len Brown <len.brown@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7a9eeb2fa1b3a3a83670b9ba08dd396beedb88f8
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Tue Mar 20 22:43:22 2007 +0100

    ieee1394: fix oops on "modprobe -r ohci1394" after network class_device conversion
    
    The networking subsystem has been converted from class_device to device
    but ieee1394 hasn't.  This results in a 100% reproducible NULL pointer
    dereference if the ohci1394 driver module is unloaded while the eth1394
    module is still loaded.
    http://lkml.org/lkml/2006/11/16/147
    http://lkml.org/lkml/2007/3/14/4
    
    This is a regression in 2.6.21-rc1.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Tested-by: Ismail Dnmez <ismail@pardus.org.tr>

commit 991b5557f7f04602b3b161341dee85971e0b6be6
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 23 02:03:29 2007 -0400

    [netdrvr] ewrk3: correct card detection bug
    
    Arwin Vosselman pointed out:
    > The ewrk3-driver doesn't function with 2.6.16-kernels (used 2.6.16.41 for
    > my tests). Cards will never be detected due to this bug.
    >
    > drivers/net/ewrks3.c:
    > Line 417 reads:
    >
    > if (nicsr == (CSR_TXD | CSR_RXD))
    >
    > that should be:
    >
    > if (nicsr != (CSR_TXD | CSR_RXD))
    >
    > Comparison with the same line in v2.4 shows why:
    >
    > 2.4:
    > if (nicsr == (CSR_TXD | CSR_RXD)){
    >
    > blah, blah
    > ==========
    > 2.6:
    > if (nicsr == (CSR_TXD | CSR_RXD))
    >     return -ENXIO;
    >
    > blah, blah
    > ==========
    >
    > blah,blah will not, but should, be executed in 2.6 with a card being present.
    >
    > The fix mentioned above solves this bug.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 604119a4b22b95e30dea6af3b3bfdc2f07fa4afd
Merge: 194c1fb... 4d88190...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 23 01:51:20 2007 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into tmp

commit 194c1fbe43af532a7921d483bc2a553b2f361256
Author: Divy Le Ray <divy@chelsio.com>
Date:   Wed Mar 21 19:21:00 2007 -0700

    cxgb3 - fix white spaces in drivers/net/Kconfig
    
    Use tabs instead of white spaces for CHELSIO_T3 entry.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2ea34672f8cec20b22ccb6ba78e3fe61b44e734a
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 21 19:47:32 2007 +0100

    myri10ge: update driver version to 1.3.0-1.226
    
    Driver version is now 1.3.0-1.226.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b52a8b7f0aeff5b91921cd53728ac781cdb4cccf
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 21 19:46:57 2007 +0100

    myri10ge: fix management of >4kB allocated pages
    
    Fix management of allocated physical pages when the architecture
    page size is not 4kB since the firmware cannot cross 4K boundary.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f761fae1ae1e6e35ae15fce99d225d08d6cff1e7
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 21 19:45:56 2007 +0100

    myri10ge: update wcfifo and intr_coal_delay default values
    
    Update the default value of 2 module parameters:
    * wcfifo disabled
    * intr_coal_delay 75us
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit aafa70eb56edd1cd5332c978bf9b5e224373c980
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 21 19:45:18 2007 +0100

    myri10ge: Serverworks HT2100 provides aligned PCIe completion
    
    [PATCH 1/4] myri10ge: Serverworks HT2100 provides aligned PCIe completion
    
    Use the regular firmware on Serverworks HT2100 PCIe ports since this
    chipset provides aligned PCIe completion.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d57ab6fdde30816581f7b0a4fe3c015b3f41f9ca
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Mar 20 16:38:04 2007 -0700

    mv643xx_eth: add mv643xx_eth_shutdown function
    
    mv643xx_eth_shutdown is needed for kexec.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 69a43ac0cf40577157111bbe25500e2b98e801ea
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 20 12:40:09 2007 +0000

    SAA9730: Fix large pile of warnings
    
    The SAA9730 driver doesn't quite grok what the difference between an ioport
    and memory mapped I/O is.  It just happened to work on the one Linux
    system the SAA9730 happens to spend it's misserable existence on.
    
    drivers/net/saa9730.c: In function 'evm_saa9730_enable_lan_int':
    drivers/net/saa9730.c:68: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:70: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:72: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'evm_saa9730_disable_lan_int':
    drivers/net/saa9730.c:78: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:80: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'evm_saa9730_clear_lan_int':
    drivers/net/saa9730.c:85: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'evm_saa9730_block_lan_int':
    drivers/net/saa9730.c:91: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'evm_saa9730_unblock_lan_int':
    drivers/net/saa9730.c:97: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'show_saa9730_regs':
    drivers/net/saa9730.c:150: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_allocate_buffers':
    drivers/net/saa9730.c:292: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:295: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:302: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:305: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:312: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_cam_load':
    drivers/net/saa9730.c:329: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:332: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_mii_init':
    drivers/net/saa9730.c:369: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:395: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:403: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:410: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:432: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_control_init':
    drivers/net/saa9730.c:470: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:474: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:478: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:484: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:487: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:490: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:493: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_stop':
    drivers/net/saa9730.c:505: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:508: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:510: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_dma_init':
    drivers/net/saa9730.c:536: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_start':
    drivers/net/saa9730.c:556: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:560: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:564: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:567: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_tx':
    drivers/net/saa9730.c:590: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_rx':
    drivers/net/saa9730.c:664: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:729: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_write':
    drivers/net/saa9730.c:848: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c: In function 'lan_saa9730_set_multicast':
    drivers/net/saa9730.c:943: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    drivers/net/saa9730.c:949: warning: passing argument 2 of 'outl' makes integer from pointer without a cast
    
    Fixed by using writel instead of outl.  42 warnings less.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6f6881b846e3d97ee15f6ab1f6529cd1cc2f4c28
Author: Li Yang <leoli@freescale.com>
Date:   Mon Mar 19 11:58:02 2007 +0800

    Revert "ucc_geth: returns NETDEV_TX_BUSY when BD ring is full"
    
    This reverts commit 18babd38547a042a4bfd4154a014d1ad33373eb0.
    
    Michael Barkowski points out that it's wrong, and I agree.  The
    patch causes a problem rather than fixes one after another
    patch "ucc_geth: Fix BD processing" was applied.  Before that
    patch, current packet should be blocked.  However after the patch
    current packet is ok and we only need to block next.
    
    Reported-by: Michael Barkowski <michael.barkowski@freescale.com>
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e4d08359ffb6580ee7a014d162162b2d18aa4ec0
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sun Mar 18 13:10:17 2007 -0700

    cxgb3 - T3B2 pcie config space
    
    T3B2 does not lose its pcie config space on reset.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fc90664e3438c990d280f179ccb0642711d5c553
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sun Mar 18 13:10:12 2007 -0700

    cxgb3 - Fix potential MAC hang
    
    Under rare conditions, the MAC might hang while generating a pause frame.
    This patch fine tunes the MAC settings to avoid the issue, allows for
    periodic MAC state check, and triggers a recovery if hung.
    
    Also fix one MAC statistics counter for the rev board T3B2.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2e2839627a957714808f98a802d137a7a2a1df46
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sun Mar 18 13:10:06 2007 -0700

    cxgb3 - Auto-load FW if mismatch detected
    
    The driver attempts to upgrade the FW if the card has the wrong version.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 05b97b30b09ed245d376035cddf669532e5cca67
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sun Mar 18 13:10:01 2007 -0700

    cxgb3 - fix ethtool cmd on multiple queues port
    
    Limit ethtool -g/-G to the given port's queues.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5c4851ccb6b12ff29e28b84e7515a18006b19fdf
Author: Anton Blanchard <anton@samba.org>
Date:   Fri Mar 16 17:00:21 2007 -0500

    Fix return code in pci-skeleton.c
    
    We assign the return value of register_netdev to i, but return rc later
    on. Fix it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9cbe330f1fbbc8de15a5914aa6e91d89eb9daac4
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Mar 16 14:01:28 2007 -0700

    skge: use per-port phy locking
    
    Rather than a workqueue and a per-board mutex to control PHY,
    use a tasklet and spinlock. Tasklet is lower overhead and works
    just as well for this.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4ebabfcb1d6af5191ef5c8305717ccbc24979f6c
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Mar 16 14:01:27 2007 -0700

    skge: mask irqs when device down
    
    Wheen a port on the skge driver is not used, it should
    mask off interrupts from theat port.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e3a1b99fb60dab1b39d5022d1d8f47bebfe6d8c6
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Mar 16 14:01:26 2007 -0700

    skge: deadlock on tx timeout
    
    The skge driver will deadlock if gets a transmit timeout
    because the netif_tx_lock() is already held.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 12998096cc48563a04ca751965ba17c3f73a5461
Merge: 37c70d0... 066fcb0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 22 19:47:09 2007 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] Allow reset of file to ATTR_NORMAL when archive bit not set
      [CIFS] Do not negotiate new POSIX_PATH_OPERATIONS_CAP yet
      [CIFS] reset mode when client notices that ATTR_READONLY is no longer set

commit 37c70d0d09747a958ec50aeb11ed1bf896da028c
Merge: 7f52a3a... cddece4...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 22 19:43:02 2007 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6:
      ACPI: IA64: fix %ll build warnings
      ACPI: IA64: fix allnoconfig build
      ACPI: Only use IPI on known broken machines (AMD, Dothan/BaniasPentium M)
      ACPI: ibm-acpi: allow module to load when acpi notifiers can't be set (v2)
      ACPI: parse 2nd MADT by default
      ACPICA: revert "acpi_serialize" changes
      sony-laptop: MAINTAINERS fix entry, add L: and W:
      ACPI: resolve HP nx6125 S3 immediate wakeup regression
      ACPI: Add support to parse 2nd MADT

commit 7f52a3afc4c02db75b3953fcbbb980abc86873a2
Merge: 4edc5db... 4f5fa2f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 22 19:42:42 2007 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] Bypass hcall stats until cpu features have run
      [POWERPC] Avoid hypervisor statistics calculation in real mode
      [POWERPC] Fix atomicity of TIF update in flush_thread()

commit 4edc5db83f574dfcc8be35b7b96760ded543b360
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Mar 22 10:31:19 2007 +0100

    [PATCH] setup_boot_APIC_clock() irq-enable fix
    
    latest -git triggers an irqtrace/lockdep warning of a leaked
    irqs-off condition:
    
      BUG: at kernel/fork.c:1033 copy_process()
    
    after some debugging it turns out that commit ca1b940c accidentally left
    interrupts disabled - which trickled down all the way to the first time
    we fork a kernel thread and triggered the warning.
    
    the fix is to re-enable interrupts in the 'else' branch of
    setup_boot_APIC_clock()'s pmtimers calibration path.
    
    Reported-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@brown.paperbag.linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9c35dd7f8bda1849dcb430be99325504221048df
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Thu Mar 22 00:11:28 2007 -0800

    [PATCH] lockdep: debug_show_all_locks & debug_show_held_locks vs. debug_locks
    
    lockdep's data shouldn't be used when debug_locks == 0 because it's not
    updated after this, so it's more misleading than helpful.
    
    PS: probably lockdep's current-> fields should be reset after it turns
    debug_locks off: so, after printing a bug report, but before return from
    exported functions, but there are really a lot of these possibilities (e.g.
     after DEBUG_LOCKS_WARN_ON), so, something could be missed.  (Of course
    direct use of this fields isn't recommended either.)
    
    Reported-by: Folkert van Heusden <folkert@vanheusden.com>
    Inspired-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b43376927ab0f7b64c4fb304568ecfaea10446e2
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Thu Mar 22 00:11:27 2007 -0800

    [PATCH] Make XFS workqueues nonfreezable
    
    Since freezable workqueues are broken in 2.6.21-rc
    (cf. http://marc.theaimsgroup.com/?l=linux-kernel&m=116855740612755,
    http://marc.theaimsgroup.com/?l=linux-kernel&m=117261312523921&w=2)
    it's better to change the only user of them, which is XFS, to use "normal"
    nonfreezable workqueues.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: David Chinner <dgc@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3a55fd18deab758a2970e0dfcd60a677a920426
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Thu Mar 22 00:11:26 2007 -0800

    [PATCH] lockdep: lockdep_depth vs. debug_locks
    
    lockdep found a bug during a run of workqueue function - this could be also
    caused by a bug from other code running simultaneously.
    
    lockdep really shouldn't be used when debug_locks == 0!
    
    Reported-by: Folkert van Heusden <folkert@vanheusden.com>
    Inspired-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Cc: Ingo Molnar <mingo@elte.hu>
    Acked-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 058560fbd70190ea6b50b5df4d814bc30911d06b
Author: Pavel Machek <pavel@ucw.cz>
Date:   Thu Mar 22 00:11:25 2007 -0800

    [PATCH] fix extra BIOS invocation during resume
    
    It causes extra moon icons blinking on x60, and breaks at least two other
    systems.
    
    During resume, we do not know that "reboot"/"shutdown" method was used, so
    we assume "plaform" and call BIOS, anyway...
    
    This is 2.6.21 material, and should fix 2 or 3 regressions from 2.6.20.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Acked-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 165b239270be610a1e3999cb0d2e4e2c1f2a8fd4
Author: David Howells <dhowells@redhat.com>
Date:   Thu Mar 22 00:11:24 2007 -0800

    [PATCH] NOMMU: make SYSV SHM nattch work correctly
    
    Make the SYSV SHM nattch counter work correctly by forcing multiple VMAs to
    be produced to represent MAP_SHARED segments, even if they overlap exactly.
    
    Using this test program:
    
    	http://people.redhat.com/~dhowells/doshm.c
    
    Run as:
    
    	doshm sysv
    
    I can see nattch going from one before the patch:
    
    	# /doshm sysv
    	Command: sysv
    	shmid: 65536
    	memory: 0xc3700000
    	c0b00000-c0b04000 rw-p 00000000 00:00 0
    	c0bb0000-c0bba788 r-xs 00000000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    	c3180000-c31dede4 r-xs 00000000 00:0b 14582179  /lib/libuClibc-0.9.28.so
    	c3520000-c352278c rw-p 00000000 00:0b 13763417  /doshm
    	c3584000-c35865e8 r-xs 00000000 00:0b 13763417  /doshm
    	c3588000-c358aa00 rw-p 00008000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    	c3590000-c359b6c0 rw-p 00000000 00:00 0
    	c3620000-c3640000 rwxp 00000000 00:00 0
    	c3700000-c37fa000 rw-S 00000000 00:06 1411      /SYSV00000000 (deleted)
    	c3700000-c37fa000 rw-S 00000000 00:06 1411      /SYSV00000000 (deleted)
    	nattch 1
    
    To two after the patch:
    
    	# /doshm sysv
    	Command: sysv
    	shmid: 0
    	memory: 0xc3700000
    	c0bb0000-c0bba788 r-xs 00000000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    	c3180000-c31dede4 r-xs 00000000 00:0b 14582179  /lib/libuClibc-0.9.28.so
    	c3320000-c3340000 rwxp 00000000 00:00 0
    	c3530000-c35325e8 r-xs 00000000 00:0b 13763417  /doshm
    	c3534000-c353678c rw-p 00000000 00:0b 13763417  /doshm
    	c3538000-c353aa00 rw-p 00008000 00:0b 14582157  /lib/ld-uClibc-0.9.28.so
    	c3590000-c359b6c0 rw-p 00000000 00:00 0
    	c35a4000-c35a8000 rw-p 00000000 00:00 0
    	c3700000-c37fa000 rw-S 00000000 00:06 1369      /SYSV00000000 (deleted)
    	c3700000-c37fa000 rw-S 00000000 00:06 1369      /SYSV00000000 (deleted)
    	nattch 2
    
    That's +1 to nattch for each shmat() made.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d56e03cd275486eb8141116a7af2df7457cb0115
Author: David Howells <dhowells@redhat.com>
Date:   Thu Mar 22 00:11:23 2007 -0800

    [PATCH] NOMMU: supply get_unmapped_area() to fix NOMMU SYSV SHM
    
    Supply a get_unmapped_area() to fix NOMMU SYSV SHM support.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-by: Adam Litke <agl@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8da38d7bac802ed2a09a79aaae9961c806a1847c
Author: David Howells <dhowells@redhat.com>
Date:   Thu Mar 22 00:11:22 2007 -0800

    [PATCH] FRV: fix unannotated variable declarations
    
    Fix unannotated variable declarations.  Variables that have allocation
    section annotations (such as __meminitdata) on their definitions must also
    have them on their declarations as not doing so may affect the addressing
    mode used by the compiler and may result in a linker error.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ad62ca2bd89f72e9b80dfaffc463e87bec5e75cb
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Mar 22 00:11:21 2007 -0800

    [PATCH] i386: disable local apic timer via command line or dmi quirk
    
    The local APIC timer stops to work in deeper C-States.  This is handled by
    the ACPI code and a broadcast mechanism in the clockevents / tick managment
    code.
    
    Some systems do not expose the deeper C-States to the kernel, but switch
    into deeper C-States behind the kernels back.  This delays the local apic
    timer interrupts for ever and makes the systems unusable.
    
    Add a command line option to disable the local apic timer and a dmi
    quirk for known broken systems.
    
    Andi sayeth:
    
      While not wrong by itself i think it is still better to use some heuristic
      -- like "has battery in ACPI" With the DMI table if the problem is more wide
      spread we will just continue extending it.
    
      But anyways should be ok now for .21 although I'm not really happy with
      it.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Grudgingly-acked-by: Andi Kleen <ak@suse.de>
    Cc: Len Brown <lenb@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 93c9a7ff50a5b39dbdf80129c5da89e6d6256bea
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Thu Mar 22 00:11:20 2007 -0800

    [PATCH] swsusp: Fix SNAPSHOT_S2RAM ioctl
    
    The SNAPSHOT_S2RAM ioctl does not disable the nonboot CPUs before entering
    the suspend, although it should do this.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit acf11faeb1ba1179f695c83c47716e4f6ffdebd8
Author: Johannes Weiner <hannes-kernel@saeurebad.de>
Date:   Thu Mar 22 00:11:18 2007 -0800

    [PATCH] Documentation/sysrq.txt: added short description for 'Q' (timerlist)
    
    I added the 'Q' to list. A short description in the `Ok, so what can I
    use them for'-section, on when or why to use it would be nice!
    
    Signed-off-by: Johannes Weiner <hannes-kernel@saeurebad.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 47ebea8351061f763089f6c3e2d2403715b510e1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Mar 22 00:11:16 2007 -0800

    [PATCH] drivers/video/s3fb.c: fix a use-before-check
    
    NULL checks should be before the first dereference.
    
    Spotted by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Ondrej Zajicek <santiago@crfreenet.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fffda91e2e7ffcc4f60b8666a59f64f28081ce63
Merge: d6e8823... 0ca9493...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 22 19:34:44 2007 -0700

    Merge branch 'i2c-for-linus' of git://jdelvare.pck.nerim.net/jdelvare-2.6
    
    * 'i2c-for-linus' of git://jdelvare.pck.nerim.net/jdelvare-2.6:
      i2c/ds1374: Check workqueue creation status
      i2c-i801: Restore the device state before leaving
      i2c-amd8111: Missed cleanup

commit d6e8823e7bf423c6850c68f716d2f5f693c97447
Merge: f64cd9d... 848c29f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 22 19:34:09 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [NETFILTER]: nat: avoid rerouting packets if only XFRM policy key changed
      [NETFILTER]: nf_conntrack_netlink: add missing dependency on NF_NAT
      [NET]: fix up misplaced inlines.
      [SCTP]: Correctly reset ssthresh when restarting association
      [BRIDGE]: Fix fdb RCU race
      [NET]: Fix fib_rules dump race
      [XFRM]: ipsecv6 needs a space when printing audit record.
      [X25] x25_forward_call(): fix NULL dereferences
      [SCTP]: Reset some transport and association variables on restart
      [SCTP]: Increment error counters on user requested HBs.
      [SCTP]: Clean up stale data during association restart
      [IrDA]: Calling ppp_unregister_channel() from process context
      [IrDA]: irttp_dup spin_lock initialisation
      [IrDA]: Delay needed when uploading firmware chunks

commit f64cd9de37bfd97c8d23a05a9f50759ff7195212
Merge: 6b3964c... 77d8e1e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 22 19:33:52 2007 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/ipoib: Fix thinko in packet length checks
      IPoIB: Fix use-after-free in path_rec_completion()
      IB/ehca: Make scaling code work without CPU hotplug
      RDMA/cxgb3: Handle build_phys_page_list() failure in iwch_reregister_phys_mem()
      IB/ipath: Check return value of lookup_one_len
      IPoIB: Fix race in detaching from mcast group before attaching
      IPoIB/cm: Fix reaping of stale connections

commit 6b3964cde70cfe6db79d35b42137431ef7d2f7e4
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Mar 22 22:46:18 2007 +0100

    [PATCH] i386: clockevents fix breakage on Geode/Cyrix PIT implementations
    
    The PIT has no dedicated mode for shut down. The only way to disable PIT
    is to put it into one shot mode. AMD implementations of PIT on Geode
    (also observed on Cyrix) are confused by an "empty" transition from
    CLOCK_EVT_MODE_UNUSED to CLOCK_EVT_MODE_SHUTDOWN, which puts the PIT
    into one shot mode momentarily.
    
    I realized after staring helpless at the bug report
    http://bugzilla.kernel.org/show_bug.cgi?id=8027 for quite a while, that
    the only change, which might influence the bogomips calibration, is the
    above transition during the PIT initialization.
    
    Avoiding the unnecessary switch to oneshot and later to periodic mode
    fixes the weird bogomips value and also the resulting slowness.
    
    The fix is confirmed on OLPC and another Geode based box.
    
    Note: this is unrelated to the Dual Core problem discussed here:
    http://lkml.org/lkml/2007/3/17/48
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 066fcb06d3e27c258bc229bb688ced2b16daa6c2
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Mar 23 00:45:08 2007 +0000

    [CIFS] Allow reset of file to ATTR_NORMAL when archive bit not set
    
    When a file had a dos attribute of 0x1 (readonly - but dos attribute
    of archive was not set) - doing chmod 0777 or equivalent would
    try to set a dos attribute of 0 (which some servers ignore)
    rather than ATTR_NORMAL (0x20) which most servers accept.
    Does not affect servers which support the CIFS Unix Extensions.
    
    Acked-by: Prasad Potluri <pvp@us.ibm.com>
    Acked-by: Shirish Pargaonkar <shirishp@us.ibm.com>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 77d8e1efea0e313edc710160c232a6fd2dc9f907
Author: Michael S. Tsirkin <mst@dev.mellanox.co.il>
Date:   Wed Mar 21 15:45:05 2007 +0200

    IB/ipoib: Fix thinko in packet length checks
    
    The packet length checks in ipoib are broken: we add 4 bytes (IPoIB
    encapsulation header) when sending a packet, not 20 bytes (hardware
    address length) to each packet.  Therefore, if connected mode is
    enabled so that the interface MTU is larger than the multicast MTU,
    IPoIB may end up trying to send too-long multicast packets.  For
    example, multicast is broken if a message of size 2048 bytes is sent
    on an interface with UD MTU 2048, because 2048 is bigger than the real
    limit of 2044 but the code tests against the wrong limit of 2060.
    
    This patch fixes <https://bugs.openfabrics.org/show_bug.cgi?id=418>,
    submitted by Scott Weitzenkamp <sweitzen@cisco.com>.
    
    Signed-off-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d04d01b113be5b88418eb30087753c3de0a39fd8
Author: Michael S. Tsirkin <mst@dev.mellanox.co.il>
Date:   Thu Mar 22 14:40:16 2007 -0700

    IPoIB: Fix use-after-free in path_rec_completion()
    
    The connected mode code added the possibility that an neigh struct
    gets freed in the list_for_each_entry() loop in path_rec_completion(),
    which causes a use-after-free.  Fix this by changing to the _safe
    variant of the list walking macro.
    
    This was spotted by the Coverity checker (CID 1567).
    
    Signed-off-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 73b9e9870f5780cb554b68bbcfa47782b27a3e04
Author: Joachim Fenkes <fenkes@de.ibm.com>
Date:   Thu Mar 22 16:52:13 2007 +0100

    IB/ehca: Make scaling code work without CPU hotplug
    
    eHCA scaling code must not depend on register_cpu_notifier() if
    CONFIG_HOTPLUG_CPU is not set, so put all related code into #ifdefs.
    
    Signed-off-by: Joachim Fenkes <fenkes@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d60134718820892853e8be7141ef7f6cdb455ea6
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Thu Mar 22 10:38:20 2007 -0500

    RDMA/cxgb3: Handle build_phys_page_list() failure in iwch_reregister_phys_mem()
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit fae8773b737d03f94ba83f0b78a891f385f35f98
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Wed Mar 21 15:18:14 2007 -0700

    IB/ipath: Check return value of lookup_one_len
    
    This fixes kernel.org bug 8003.
    
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e07832b66285124038a96b25a2056e91a55d8b1e
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Mon Mar 19 14:31:36 2007 -0800

    IPoIB: Fix race in detaching from mcast group before attaching
    
    There's a race between ipoib_mcast_leave() and ipoib_mcast_join_finish()
    where we can try to detach from a multicast group before we've
    attached to it.  Fix this by reordering the code in ipoib_mcast_leave
    to free the multicast group first, which waits for the multicast
    callback thread (which calls ipoib_mcast_join_finish()) to complete
    before detaching from the group.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 60a596dab7c82bdfa5ee7abcee8e0ce385d4ef21
Author: Michael S. Tsirkin <mst@dev.mellanox.co.il>
Date:   Thu Mar 22 14:32:09 2007 -0700

    IPoIB/cm: Fix reaping of stale connections
    
    The sense of the time_after_eq() test in ipoib_cm_stale_task() is
    reversed so that only non-stale connections are reaped.  Fix this by
    changing to time_before_eq().
    
    Noticed by Pradeep Satyanarayana <pradeep@us.ibm.com>.
    
    Signed-off-by: Michael S. Tsirkin <mst@dev.mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 848c29fd648e78fa87d0e399223826ce5dfc1b7a
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 22 12:30:29 2007 -0700

    [NETFILTER]: nat: avoid rerouting packets if only XFRM policy key changed
    
    Currently NAT not only reroutes packets in the OUTPUT chain when the
    routing key changed, but also if only the non-routing part of the
    IPsec policy key changed. This breaks ping -I since it doesn't use
    SO_BINDTODEVICE but IP_PKTINFO cmsg to specify the output device, and
    this information is lost.
    
    Only do full rerouting if the routing key changed, and just do a new
    policy lookup with the old route if only the ports changed.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca8fbb859c42c9a402c5c19fd0588d89ae4988ba
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 22 12:29:57 2007 -0700

    [NETFILTER]: nf_conntrack_netlink: add missing dependency on NF_NAT
    
    NF_CT_NETLINK=y, NF_NAT=m results in:
    
     LD      .tmp_vmlinux1
     net/built-in.o: dans la fonction  nfnetlink_parse_nat_proto :
     nf_conntrack_netlink.c:(.text+0x28db9): rfrence indfinie vers  nf_nat_proto_find_get 
     nf_conntrack_netlink.c:(.text+0x28dd6): rfrence indfinie vers  nf_nat_proto_put 
     net/built-in.o: dans la fonction  ctnetlink_new_conntrack :
     nf_conntrack_netlink.c:(.text+0x29959): rfrence indfinie vers  nf_nat_setup_info 
     nf_conntrack_netlink.c:(.text+0x29b35): rfrence indfinie vers  nf_nat_setup_info 
     nf_conntrack_netlink.c:(.text+0x29cf7): rfrence indfinie vers  nf_nat_setup_info 
     nf_conntrack_netlink.c:(.text+0x29de2): rfrence indfinie vers  nf_nat_setup_info 
     make: *** [.tmp_vmlinux1] Erreur 1
    
    Reported by Kevin Baradon <kevin.baradon@gmail.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6f99a211957910a07437f46ce54dcfb1755cf84
Author: Dave Jones <davej@redhat.com>
Date:   Thu Mar 22 12:27:49 2007 -0700

    [NET]: fix up misplaced inlines.
    
    Turning up the warnings on gcc makes it emit warnings
    about the placement of 'inline' in function declarations.
    Here's everything that was under net/
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 289f42492c0958871b6045050474c752ec99704f
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Thu Mar 22 12:26:25 2007 -0700

    [SCTP]: Correctly reset ssthresh when restarting association
    
    Reset ssthresh to the correct value (peer's a_rwnd) when restarting
    association.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b19cbe2a1695c09c74f83646c4b82b51123b3690
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 22 12:25:20 2007 -0700

    [BRIDGE]: Fix fdb RCU race
    
    br_fdb_get use atomic_inc to increase the refcount of an element found
    on a RCU protected list, which can lead to the following race:
    
    CPU0					CPU1
    
    					br_fdb_get:   rcu_read_lock
    					__br_fdb_get: find element
    fdb_delete:   hlist_del_rcu
    	      br_fdb_put
    br_fdb_put:   atomic_dec_and_test
    	      call_rcu(fdb_rcu_free)	br_fdb_get:   atomic_inc
    						      rcu_read_unlock
    fdb_rcu_free: kmem_cache_free
    
    Use atomic_inc_not_zero instead.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ec25615b9ddd5c584b4066652840581fdb6c5e7a
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Mar 22 12:24:38 2007 -0700

    [NET]: Fix fib_rules dump race
    
    fib_rules_dump needs to use list_for_each_entry_rcu to protect against
    concurrent changes to the rules list.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0ca9493b4c0f4fb7796add422ba5ecc672c9fa16
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Thu Mar 22 19:49:01 2007 +0100

    i2c/ds1374: Check workqueue creation status
    
    Check if workqueue creation failed.  Further usage of NULL pointed
    workqueue is not good I guess ;)
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit a5aaea37858fb56d624227408d1dde4cb78c9a6c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 22 19:49:01 2007 +0100

    i2c-i801: Restore the device state before leaving
    
    Restore the original host configuration on driver unload and on
    suspend. In particular this returns the SMBus master in I2C mode if it
    was originally in I2C mode, which should help with suspend/resume if
    the BIOS expects to find the SMBus master in I2C mode.
    
    This fixes bug #6449 (for real this time.)
    http://bugzilla.kernel.org/show_bug.cgi?id=6449
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Tested-by: Tommi Kyntola <tommi.kyntola@ray.fi>

commit 58791fd81dabdd0552c63625f231d16c9060ec84
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 22 19:49:00 2007 +0100

    i2c-amd8111: Missed cleanup
    
    I missed one cleanup in my previous patch.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 4f5fa2fb1259f506d20e8af447117ec3ec426a53
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Mar 20 14:29:54 2007 -0500

    [POWERPC] Bypass hcall stats until cpu features have run
    
    I noticed that we execute hcalls before cpu feature code has run (eg
    for setting up the bolted kernel region).  This means that we may be
    executing code that is not appropriate for the processor we have.
    Create an unconditional branch that we nop out all the time to fix this.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b4aea36b7956eeebfc56314ce0944db1441255ce
Author: Mohan Kumar M <mohan@in.ibm.com>
Date:   Wed Mar 21 11:21:32 2007 +0530

    [POWERPC] Avoid hypervisor statistics calculation in real mode
    
    kexec invokes plpar_hcall hypervisor call in real mode.  plpar_hcall
    refers to per cpu variables for accounting hypervisor statistics.
    These variables may not be in the RMO region, so accesses to them
    in real mode may result in a data storage exception.
    
    This fixes this problem by using a new plpar_hcall_raw function which
    does not update the hypervisor call statistics.  Thanks to Anton for
    suggesting this idea.
    
    Signed-off-by: Mohan Kumar M <mohan@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8559840c4ca3f2fff73a882803bc8916078fac1f
Merge: 7e2f037... 58a69c3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 21 19:45:50 2007 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] Fix wrong /proc/iomem on SGI Altix
      [IA64] Altix: ioremap vga_console_iobase
      [IA64] Fix typo/thinko in crash.c
      [IA64] Fix get_model_name() for mixed cpu type systems
      [IA64] min_low_pfn and max_low_pfn calculation fix

commit 7e2f037b9226452de60a74e94e5c42d3e54c8637
Merge: 0a14fe6... 7bc301e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 21 19:45:32 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6:
      [CRYPTO] tcrypt: Fix error checking for comp allocation
      [CRYPTO] doc: Fix typo in hash example
      [CRYPTO] api: scatterwalk_copychunks() fails to advance through scatterlist

commit b1dfe1f1457a85b42544ef8b9c83c7cf9d9c3a16
Author: Krzysztof Helt <krzysztof.h1@wp.pl>
Date:   Mon Mar 19 15:10:20 2007 +0100

    [ARM] 4272/1: Missing symbol h1940_pm_return fix
    
    Added missing ifdefs, to make kernel linkable without the PM support.
    
    Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7bc301e97b96597df967f11b9fa9cf391109893a
Author: Sebastian Siewior <linux-crypto@ml.breakpoint.cc>
Date:   Wed Mar 21 08:58:43 2007 +1100

    [CRYPTO] tcrypt: Fix error checking for comp allocation
    
    This patch fixes loading the tcrypt module while deflate isn't available
    at all (isn't build).
    
    Signed-off-by: Sebastian Siewior <linux-crypto@ml.breakpoint.cc>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 58e40308f329275ccf556312a9cd788522f7c224
Author: Johannes Schlumberger <asso@doriath.informatik.uni-erlangen.de>
Date:   Wed Mar 21 08:55:58 2007 +1100

    [CRYPTO] doc: Fix typo in hash example
    
    there is a tiny bug in Documentation/crypto/api-intro.txt.
    The file has the following example code:
    
    struct scatterlist sg[2];
    [...]
    if (crypto_hash_digest(&desc, &sg, 2, result))
    
    which does not match the declaration of crypto_hash_digest() in
    include/linux/crypto.h.
    
    (static inline int crypto_hash_digest(struct hash_desc *desc,
    	struct scatterlist *sg, unsigned int nbytes, u8 *out)
    
    The code in the example passes the address of a pointer (an array actually) as
    the second argument, while the function expects the pointer itself.
    
    I have attached a patch to fix this.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit f70ee5ec8fc59ba2d905e6daf0d395edf6fb461d
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Wed Mar 21 08:50:12 2007 +1100

    [CRYPTO] api: scatterwalk_copychunks() fails to advance through scatterlist
    
    In the loop in scatterwalk_copychunks(), if walk->offset is zero,
    then scatterwalk_pagedone rounds that up to the nearest page boundary:
    
    		walk->offset += PAGE_SIZE - 1;
    		walk->offset &= PAGE_MASK;
    
    which is a no-op in this case, so we don't advance to the next element
    of the scatterlist array:
    
    		if (walk->offset >= walk->sg->offset + walk->sg->length)
    			scatterwalk_start(walk, sg_next(walk->sg));
    
    and we end up copying the same data twice.
    
    It appears that other callers of scatterwalk_{page}done first advance
    walk->offset, so I believe that's the correct thing to do here.
    
    This caused a bug in NFS when run with krb5p security, which would
    cause some writes to fail with permissions errors--for example, writes
    of less than 8 bytes (the des blocksize) at the start of a file.
    
    A git-bisect shows the bug was originally introduced by
    5c64097aa0f6dc4f27718ef47ca9a12538d62860, first in 2.6.19-rc1.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 58a69c367c02a165004a5ce5dd55ce03b59ba43d
Author: Bernhard Walle <bwalle@suse.de>
Date:   Wed Mar 14 19:07:47 2007 +0100

    [IA64] Fix wrong /proc/iomem on SGI Altix
    
    In sn_io_slot_fixup(), the parent is re-set from the bus to
    io(port|mem)_resource because the address is changed in a way that it's not
    child of the bus any more.
    
    However, only the root is set but not the parent/child/sibling relationship in
    the resource tree which causes 'cat /proc/iomem' to stop after this memory
    area. Depding on the poition in the tree the iomem may be nearly completely
    empty.
    
    Signed-off-by: Bernhard Walle <bwalle@suse.de>
    Acked-by: John Keller <jpk@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0bdfc1900705dadef6286d69de7da0feef841734
Author: John Keller <jpk@sgi.com>
Date:   Tue Mar 20 13:50:10 2007 -0500

    [IA64] Altix: ioremap vga_console_iobase
    
    When booting an SN system without specifing a console
    (i.e., no "console=" on boot line), the system will hang during
    boot at the point where /sbin/init is run.
    
    The problem is that vga_console_iobase is not converted to a
    virtual address before storing in io_space[0].mmio_base.
    The conversion was happening in sn_scan_pcdp(), but not in
    setup_vga_console().
    
    Signed-off-by: John Keller <jpk@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 60b548dfe4ad178dbf0fa8c2a50e36aaa42d603a
Author: Jay Lan <jlan@sgi.com>
Date:   Tue Mar 20 13:47:47 2007 -0700

    [IA64] Fix typo/thinko in crash.c
    
    Clearly should be checking for "val == DIE_INIT_SLAVE_ENTER".
    
    Signed-off-by: Jay Lan <jlan@sgi.com>
    Acked-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c5e83e3f42938c0a84047e125edb98d6513f985b
Author: Jack Steiner <steiner@sgi.com>
Date:   Mon Mar 12 08:07:49 2007 -0500

    [IA64] Fix get_model_name() for mixed cpu type systems
    
    If a system consists of mixed processor types, kmalloc()
    can be called before the per-cpu data page is initialized.
    If the slab contains sufficient memory, then kmalloc() works
    ok. However, if the slabs are empty, slab calls the memory
    allocator. This requires per-cpu data (NODE_DATA()) & the
    cpu dies.
    
    Also noted by Russ Anderson who had a very similar patch.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a3f5c338b9f30f328276739d9589beae19254936
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Tue Mar 20 13:41:57 2007 -0700

    [IA64] min_low_pfn and max_low_pfn calculation fix
    
    We have seen bad_pte_print when testing crashdump on an SN machine in
    recent 2.6.20 kernel.  There are tons of bad pte print (pfn < max_low_pfn)
    reports when the crash kernel boots up, all those reported bad pages
    are inside initmem range; That is because if the crash kernel code and
    data happens to be at the beginning of the 1st node. build_node_maps in
    discontig.c will bypass reserved regions with filter_rsvd_memory. Since
    min_low_pfn is calculated in build_node_map, so in this case, min_low_pfn
    will be greater than kernel code and data.
    
    Because pages inside initmem are freed and reused later, we saw
    pfn_valid check fail on those pages.
    
    I think this theoretically happen on a normal kernel. When I check
    min_low_pfn and max_low_pfn calculation in contig.c and discontig.c.
    I found more issues than this.
    
    1. min_low_pfn and max_low_pfn calculation is inconsistent between
    contig.c and discontig.c,
    min_low_pfn is calculated as the first page number of boot memmap in
    contig.c (Why? Though this may work at the most of the time, I don't
    think it is the right logic). It is calculated as the lowest physical
    memory page number bypass reserved regions in discontig.c.
    max_low_pfn is calculated include reserved regions in contig.c. It is
    calculated exclude reserved regions in discontig.c.
    
    2. If kernel code and data region is happen to be at the begin or the
    end of physical memory, when min_low_pfn and max_low_pfn calculation is
    bypassed kernel code and data, pages in initmem will report bad.
    
    3. initrd is also in reserved regions, if it is at the begin or at the
    end of physical memory, kernel will refuse to reuse the memory. Because
    the virt_addr_valid check in free_initrd_mem.
    
    So it is better to fix and clean up those issues.
    Calculate min_low_pfn and max_low_pfn in a consistent way.
    
    Signed-off-by:	Zou Nan hai <nanhai.zou@intel.com>
    Acked-by: Jay Lan <jlan@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9d5cf5adcbb703a4c794232840c25a65a372c357
Author: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
Date:   Fri Feb 23 20:52:19 2007 +0100

    [ARM] 4235/1: ns9xxx: declare the clock functions as "const"
    
    This patch removes some "const"s that I introduced thinking they mean
    the same thing as the "const"s introduced here.  So it fixes three warnings.
    
    Signed-off-by: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cddece4beccaa72dcb57d64a7f1e496b2e61a16b
Merge: b25e844... 25496ca...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 20 11:06:37 2007 -0400

    Pull c2 into release branch

commit b25e84425ee21c5560fcaec15afcf58fe4a0a414
Merge: f5ea908... 09fe583...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 20 11:06:18 2007 -0400

    Pull bugzilla-7465 into release branch

commit f5ea908c8fca3921c1545e6ac52edbbb353640f5
Merge: 54b8c39... a8f4af6...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 20 11:06:00 2007 -0400

    Pull bugzilla-8171 into release branch

commit 54b8c39fbd76a7341b66e49de677ea366737fce7
Merge: 0a14fe6... 0cd4554...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Mar 20 11:05:41 2007 -0400

    Pull misc-for-upstream into release branch

commit 961995582e3752e983dc3906a57546a188007440
Author: Joy Latten <latten@austin.ibm.com>
Date:   Mon Mar 19 18:47:26 2007 -0700

    [XFRM]: ipsecv6 needs a space when printing audit record.
    
    This patch adds a space between printing of the src and dst ipv6 addresses.
    Otherwise, audit or other test tools may fail to process the audit
    record properly because they cannot find the dst address.
    
    Signed-off-by: Joy Latten <latten@austin.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4ce837de96d58509f5f815ab37a46889788e701
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 19 17:04:56 2007 -0700

    [X25] x25_forward_call(): fix NULL dereferences
    
    This patch fixes two NULL dereferences spotted by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 749bf9215ed1a8b6edb4bb03693c2b62c6b9c2a4
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Mar 19 17:02:30 2007 -0700

    [SCTP]: Reset some transport and association variables on restart
    
    If the association has been restarted, we need to reset the
    transport congestion variables as well as accumulated error
    counts and CACC variables.  If we do not, the association
    will use the wrong values and may terminate prematurely.
    
    This was found with a scenario where the peer restarted
    the association when lksctp was in the last HB timeout for
    its association.  The restart happened, but the error counts
    have not been reset and when the timeout occurred, a newly
    restarted association was terminated due to excessive
    retransmits.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb78525ae1b75bfac1da600ceb008aef4d293649
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Mar 19 17:02:03 2007 -0700

    [SCTP]: Increment error counters on user requested HBs.
    
    2960bis states (Section 8.3):
    
       D) Request an on-demand HEARTBEAT on a specific destination transport
          address of a given association.
    
       The endpoint should increment the respective error counter of the
       destination transport address each time a HEARTBEAT is sent to that
       address and not acknowledged within one RTO.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0b58a811461ccf3cf848aba4cc192538fd3b0516
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Mon Mar 19 17:01:17 2007 -0700

    [SCTP]: Clean up stale data during association restart
    
    During association restart we may have stale data sitting
    on the ULP queue waiting for ordering or reassembly.  This
    data may cause severe problems if not cleaned up.  In particular
    stale data pending ordering may cause problems with receive
    window exhaustion if our peer has decided to restart the
    association.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c577c2b99387b5ff8607d42d6eaff9ec024d4773
Author: Samuel Ortiz <samuel@sortiz.org>
Date:   Fri Mar 16 20:31:03 2007 -0700

    [IrDA]: Calling ppp_unregister_channel() from process context
    
    We need to call ppp_unregister_channel() when IrNET disconnects, and this
    must be done from a process context.
    
    Bug reported and patch tested by Guennadi Liakhovetski.
    
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7bb1bbe615de25d955b974cb47d40fa198154bb9
Author: G. Liakhovetski <gl@dsa-ac.de>
Date:   Fri Mar 16 20:30:03 2007 -0700

    [IrDA]: irttp_dup spin_lock initialisation
    
    Without this initialization one gets
    
    kernel BUG at kernel/rtmutex_common.h:80!
    
    This patch should also be included in the -stable kernel.
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2e360d81ea1fe1a7701e05cdefd3a91c11c3b13f
Author: Nigel Williams <nigelw@elder-gods.net>
Date:   Fri Mar 16 20:28:36 2007 -0700

    [IrDA]: Delay needed when uploading firmware chunks
    
    With 42101001.sb firmwares, we need a 10 ms delay between firmware chunks
    upload on irda-usb.
    
    Patch from Nigel Williams <nigelw@elder-gods.net>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0cd4554df0c261f7ba74786e471ccaa0e3725fb9
Author: Len Brown <len.brown@intel.com>
Date:   Mon Mar 19 23:51:36 2007 -0400

    ACPI: IA64: fix %ll build warnings
    
    acpi_integer is 64-bits on all platforms, and so was defined as a u64.
    
    i386 and x86_64 define u64 as unsigned long long.
    ia64 defines u64 as long.
    
    While these are all 64-bits, the kernel build warns about formating
    a "long" with %ll:
    
    drivers/ata/libata-acpi.c:176: warning: long long unsigned int format, acpi_integer arg (arg 5)
    
    So skip using "u64" and define acpi_integer as "unsigned long long"
    to make gcc happy with %ll.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8140a90ec180192b202af086e7a582e5937c5580
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 16 22:00:43 2007 -0400

    ACPI: IA64: fix allnoconfig build
    
    The evils of Kconfig's select bite us once again...
    ia64/Kconfig selects ACPI, which depends on PM.
    But select ignores dependencies, allnoconfig
    chooses CONFIG_PM=n, and thus the menu of sub-options
    under ACPI vanish, which breaks the build.
    
    Manually select PM along with ACPI for now.
    Some day, we should delete them both, or fix select.
    
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0a14fe6e5efd0af0f9c6c01e0433445d615d0110
Merge: a9cf7cd... 24d559c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 19 20:20:56 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: store-init needs trailing membar.

commit a9cf7cd0d7474026d05296c666a0b7f83d798c03
Merge: 62b6e9f... 69806d5...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 19 20:14:23 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      USB: new Novatel device ids for option driver
      USB: berry_charge: correct dbg string for second magic command
      usblp: quirk flag and device entry for Seiko Epson M129C printer
      airprime: USB ID for Novatel EV620 mini PCI-E card
      USB: necessary update for mos7720 driver
      USB: RAZR v3i unusual_devs
      USB: two more device ids for dm9601 usbnet driver
      USB: fix usb-serial regression

commit 62b6e9ff08ced882b36c9583e350699f28912e51
Merge: 8718d75... 7df4246...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 19 20:13:56 2007 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Export except_vec_vi_{mori,lui,ori} as text symbols.
      [MIPS] mips-boards: More liberal check for mips-board console
      [MIPS] Misc fixes for plat_irq_dispatch functions
      [MIPS] Qemu: Fix Symmetric Uniprocessor support.
      [MIPS] VI: TRACE_IRQS_OFF clobbers $v0, so save & restore around call.

commit 8718d75ef23e858a6b947f5b1a43094acf3b6e23
Merge: f32e355... 282c6b9...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 19 20:12:25 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      pata_ixp4xx_cf: fix interrupt
      pata_ixp4xx_cf: fix oops on detach
      libata: kernel-doc fix
      sata_inic162x: kill double region requests
      drivers/ata/Kconfig: PATA_SCC depends on wrong platform
      sata_sil24: Add Adaptec 1220SA PCI ID
      libata: don't whine if ->prereset() returns -ENOENT

commit f32e3555834c4bc95fccba1aa245d95b3a0a0bc8
Merge: 511b00a... 0803c30...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 19 20:05:16 2007 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 4264/1: ldrex/strex syntax errors with recent compilers
      [ARM] Fix breakage caused by 72486f1f8f0a2bc828b9d30cf4690cf2dd6807fc

commit 511b00a3194167bad447d4c81027d6a44920dfd2
Merge: fbeb1f1... 43a867a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 19 20:04:26 2007 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] zcrypt: fix possible race when unloading zcrypt driver modules
      [S390] zcrypt: fix possible dead lock in AP bus module
      [S390] Wire up sys_utimes.
      [S390] reboot from and dump to SCSI under z/VM fails.
      [S390] Wire up compat_sys_epoll_pwait.
      [S390] strlcpy is smart enough
      [S390] memory detection: fix off by one bug.
      [S390] cio: qdio slsb setup

commit 69806d5631b79ed0c442ae5b15c46bcfd8662476
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Mar 19 13:39:51 2007 -0700

    USB: new Novatel device ids for option driver
    
    This moves all of the Novatel device ids to the option driver, where
    they belong.
    
    Thanks to Novatel for providing a list of all supported devices.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 24d559cac4d741d60ec85e927974408020a2f060
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 19 13:27:33 2007 -0700

    [SPARC64]: store-init needs trailing membar.
    
    The manual says that it is required and we actually have crash reports
    where loads see stale data due to not having membars here.
    
    In one case the networking does:
    
    	memset(skb, 0, offsetof(struct sk_buff, truesize));
    
    and then some code later checks skb->nohdr for zero, but it's still
    the value that was there before the memset().
    
    Note that arch/sparc64/lib/xor.S already got this right.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7df4246117cb0adc6c3ed54bdb2d2faf4656d9cd
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 19 15:29:39 2007 +0000

    [MIPS] Export except_vec_vi_{mori,lui,ori} as text symbols.
    
    Otherwise objdump will screw up disassembly.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 43e3c885d0e120a749ec7fe204aaec8f46c1d5b6
Author: Thiemo Seufer <ths@networkno.de>
Date:   Mon Mar 19 00:05:06 2007 +0000

    [MIPS] mips-boards: More liberal check for mips-board console
    
    Allows overriding the MALTA/ATLAS/etc. default console setting with
    non-serial console devices.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 119537c092638bf8a0672415024639353c773bb1
Author: Thiemo Seufer <ths@networkno.de>
Date:   Mon Mar 19 00:13:37 2007 +0000

    [MIPS] Misc fixes for plat_irq_dispatch functions
    
     o adds missing ST0_IM masks, which caused the logging of valid interrupts
       as spurious
     o stops pnx8550 to log every interrupt as spurious
     o adds cause register masks for ip22/ip32, which caused handling of masked
       interrupts
     o removes some superfluous parentheses in the SNI interrupt code
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 72ede9b18967e7a8a62a88f164f003193f6d891f
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Mar 18 01:01:39 2007 +0900

    [MIPS] Qemu: Fix Symmetric Uniprocessor support.
    
    Might be useful for SMP debugging.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    
    [Rewritten Kconfig bits to deal better fit in the usual pattern of doing
    things - Ralf]
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 8c3644350f4105a9b55fbfc6bbba567b79cdf72a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 17 16:21:28 2007 +0000

    [MIPS] VI: TRACE_IRQS_OFF clobbers $v0, so save & restore around call.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 774f78cf3b81c553c087ca0e8740e9cd779df578
Author: Ken L Johnson <ken@novell.com>
Date:   Fri Mar 16 10:17:31 2007 -0600

    USB: berry_charge: correct dbg string for second magic command
    
    I was testing the berry_charge module with my Blackberry 8700c and had
    great success, thanks. Looking at the code for my own learning I noticed
    the following cut and paste error... just a nit.
    
    Signed-off-by: Ken L Johnson <ken@novell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5ec71db59ac07eeac89a54b35a90c181bbd3c445
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Mar 16 15:53:07 2007 -0400

    usblp: quirk flag and device entry for Seiko Epson M129C printer
    
    This patch (as872) adds a device table entry and a new quirk flag to
    the usblp driver for the Seiko Epson Receipt printer.  This printer
    returns Vendor-Specific values for bInterfaceClass and
    bInterfaceSubClass, but the bInterfaceProtocol value is valid and it
    works with usblp.  The new quirks flag tells the driver to ignore the
    Class and SubClass values in the interface descriptor.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e5740b5d75af4ad9423911fe77d687f47e880a4d
Author: Mark Glines <mark@glines.org>
Date:   Wed Mar 14 11:55:28 2007 -0700

    airprime: USB ID for Novatel EV620 mini PCI-E card
    
    Add an ID to recognise the Novatel EV620 wireless adapter.
    http://www.novatelwireless.com/products/expedite/ev620.html
    
    It looks like a mini PCI-Express adapter.  The mPCIE connector includes USB
    pins... the card shows up to the system as a USB device, and powers itself
    from the PCI bus.
    
    The card I have isn't activated yet, so I can't get a PPP session up yet, but
    I have tested basic serial communication successfully in both 2.6.18 and
    2.6.20 kernels, once the product ID was added.  (the driver changed quite a
    bit between the two revs.)  In both drivers, it responds to AT commands and
    such.
    
    Signed-off-by: Mark Glines <mark@glines.org>
    Cc: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e8e30c765c5cfa5219918d3e5017fc563cf7ea03
Author: Oliver Neukum <oneukum@suse.de>
Date:   Wed Mar 14 11:11:08 2007 +0100

    USB: necessary update for mos7720 driver
    
    these devices have a shared interrupt endpoint. For serialcore to pass
    an interrupt endpoint to a subdriver, the subdriver must define and
    _export_ a fitting callback. The mos7720 driver failed to do so. This led
    invariably to an oops upon open. This patch fixes it. The driver is useless
    without it. Please try to get this into 2.6.21 and the stable kernels that
    have this driver.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a7f3dd5d4b74030964c80fb1b7f2131986fe2d67
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Mar 10 15:17:16 2007 -0800

    USB: RAZR v3i unusual_devs
    
    This adds an unusual_devs entry for the Motorola RAZR 3vi.
    
    From: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6dc477f3e4dd456122fdb231a1c57393659b93b5
Author: Jon Dowland <jon@alcopop.org>
Date:   Sun Mar 11 20:03:03 2007 +0000

    USB: two more device ids for dm9601 usbnet driver
    
    This patch for the linux-usb-devel tree adds two more
    product ids to the dm9601 driver. These ids were found on
    rebadged dm9601 devices in the wild.
    
    Signed-off-by: Jon Dowland <jon@alcopop.org>
    Acked-by: Peter Korsgaard <jacmet@sunsite.dk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 521b85ae66ad40a670b27b0596312d347a89b669
Author: Jim Radford <radford@blackbean.org>
Date:   Tue Mar 13 08:30:50 2007 -0700

    USB: fix usb-serial regression
    
    This patch reverts d9a7ecacac5f8274d2afce09aadcf37bdb42b93a since it
    breaks drivers that need to access the ->port[] array in shutdown
    (most of them).
    
    Signed-Off: Jim Radford <radford@blackbean.org>
    Acked-by: Mark Lord <mlord@pobox.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 282c6b9c7a344ce6436bb61a006b9c2a373b9626
Author: Alessandro Zummo <alessandro.zummo@towertech.it>
Date:   Sun Mar 18 15:23:33 2007 +0100

    pata_ixp4xx_cf: fix interrupt
    
     As per compact flash specifications, the default
     irq mode upon cf insertion is pulse mode. this patch fixes
     the driver to cope with that.
    
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2ab302b3579b76b8c575f0858a8e4b82f6dfca52
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Mar 18 04:55:23 2007 +0900

    pata_ixp4xx_cf: fix oops on detach
    
    pata_ixp4xx_cf dodged dont-clear-drvdata-in-LLD bombing run as it used
    platform_set_drvdata() instead of dev_set_drvdata().  This causes OOPS
    on devres host release.  Kill it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cc261267dfbced100eb10832aaabb03bf993745d
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Fri Mar 16 19:55:47 2007 -0700

    libata: kernel-doc fix
    
    Warning(linux-2621-rc3g7/drivers/ata/libata-core.c:842): No description found for parameter 'unknown'
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e1251d01452d2f8e91c898b3828444b279cef047
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 16 01:59:42 2007 +0900

    sata_inic162x: kill double region requests
    
    Regions are requested twice during initialization causing the second
    one to fail.  This is regression introduced during iomap conversion.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit aeb9362a4844d7a4e43c7d4e4ef1461850346b0c
Author: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
Date:   Thu Mar 15 14:32:58 2007 +0900

    drivers/ata/Kconfig: PATA_SCC depends on wrong platform
    
    PATA_SCC depends on PPC_CELLEB. (not PPC_IBM_CELL_BLADE)
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 722d67b6208bd56faa6d731246117a3e4660ce88
Author: Jamie Clark <jamie@metaparadigm.com>
Date:   Tue Mar 13 12:48:00 2007 +0800

    sata_sil24: Add Adaptec 1220SA PCI ID
    
    Add Adaptec 1220SA (SIL3132) to devices claimed by sata_sil24
    Patch generated against 2.6.20.2
    
    Signed-off-by: Jamie Clark <jclark@metaparadigm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4aa9ab67fb9c0dfdb1692f4ec413120832a22ddc
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Mar 12 17:24:08 2007 +0900

    libata: don't whine if ->prereset() returns -ENOENT
    
    ->prereset() returns -ENOENT to tell libata that the port is empty and
    reset sequencing should be stopped.  This is not an error condition.
    Update ata_eh_reset() such that it sets device classes to ATA_DEV_NONE
    and return success in on -ENOENT.  This makes spurious error message
    go away.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 43a867a2d2a119c744bab6dc8d3e1da6809d7141
Author: Ralph Wuerthner <rwuerthn@de.ibm.com>
Date:   Mon Mar 19 13:19:19 2007 +0100

    [S390] zcrypt: fix possible race when unloading zcrypt driver modules
    
    Move try_module_get() call into spin protected block to prevent zcrypt
    driver module unload while submitting a request to driver.
    
    Signed-off-by: Ralph Wuerthner <rwuerthn@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit cf352ce0b9104dc6a1c11df52db9f910f1f6cd2e
Author: Ralph Wuerthner <rwuerthn@de.ibm.com>
Date:   Mon Mar 19 13:19:14 2007 +0100

    [S390] zcrypt: fix possible dead lock in AP bus module
    
    AP bus module uses bus_for_each_dev() in software interrupt context to
    poll for completed requests which might cause dead locks. Solution: use
    private AP device list for polling in software interrupt context.
    
    Signed-off-by: Ralph Wuerthner <rwuerthn@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit fb1c171992041e1d4bfb8c010548fa97f2106827
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 19 13:19:07 2007 +0100

    [S390] Wire up sys_utimes.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit fbb04f38cf85ae8691cf3049ec62636ad968479b
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Mon Mar 19 13:19:03 2007 +0100

    [S390] reboot from and dump to SCSI under z/VM fails.
    
    We used wrong length values for ipl and dump hardware structures.
    Since z/VM checks the ipl parameters more accurately than LPAR,
    the operations fail there.
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 10c16a37e32b74abe088c303f600746e73f5b7e2
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 19 13:18:56 2007 +0100

    [S390] Wire up compat_sys_epoll_pwait.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 20cb9e79b963b8f5142e4dd946baf44a75e7935f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Mar 19 13:18:53 2007 +0100

    [S390] strlcpy is smart enough
    
    strlcpy already accounts for the trailing zero in its length
    computation, so there is no need to substract one to the buffer size.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 257c6e1ce8f875dd02220e90cf38e615e47788fe
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 19 13:18:50 2007 +0100

    [S390] memory detection: fix off by one bug.
    
    diag 260 returns the address of the last addressable byte and not the
    size of memory. Since we want the size we have to add 1 to the return
    value.
    Disable diag 260 for non z/Arch mode since it doesn't work there
    anyway.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit dcc49d460c4052d2fa7ba44e81d3b814b799f802
Author: Ursula Braun <braunu@de.ibm.com>
Date:   Mon Mar 19 13:18:12 2007 +0100

    [S390] cio: qdio slsb setup
    
    Make sure set_slsb problems are handled correctly in
    qdio_do_qdio_fill_input() and qdio_do_qdio_fill_output.
    
    Signed-off-by: Ursula Braun <braunu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit fbeb1f19229baa9ee80f315e9d24635045455082
Merge: 5851fad... 0b3d4ef...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 18 16:07:27 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6:
      serial: Fix sh-sci break interrupt/sysrq handling.
      sh: Fix bogus regs pointer in do_IRQ().
      sh: Fix SH-3 cache entry_mask and way_size calculation.
      sh: Convert struct ioctls to static defines.
      sh: Define missing __NR_readahead.
      sh: Fix PCI BAR address-space wraparound.

commit 5851fadce8824d5d4b8fd02c22ae098401f6489e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Mar 18 12:58:08 2007 +0000

    [PATCH] Fix build error due to not including <linux/errno.h>
    
    Since d9a9cdfb078d755e648d53ec25b7370f84ee5729 <linux/sysfs.h> is using
    ENOSYS without including <linux/errno.h> if CONFIG_SYSFS is disabled.
    
    Fixed by including <linux/errno.h>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d9c1e9a8fff512bb6c43461181d4360f1c8cfd6d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Mar 18 12:45:44 2007 -0600

    [PATCH] tty: Fix two reported pid leaks
    
    These leaks were reported by: Catalin Marinas <catalin.marians@gmail.com>
    and I have been able to very by inspection they are possible.
    
    When converting tty_io.c to store pids as struct pid pointers instead
    of pid_t values it appears I overlooked two places where we stop using
    the pid value.  The very obvious one is in do_tty_hangup, and the one
    the less obvious one in __proc_set_tty.
    
    When looking into the code __proc_set_tty only has pids that need to
    be put because of failures of other parts of the code to properly
    perform hangup processing.   Fixing the leak here in __proc_set_tty
    is easy and obviously correct so I am doing that first.
    
    Fixing the places that should be performing hangup processing is much
    less obviously correct.  So those I'm aiming those patches at -mm.
    for now, so the can age a while before they are merged.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aeb3f6d10ebfd5607f4bd3920b3b730a992ab82c
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Mar 18 01:26:13 2007 -0800

    [PATCH] gpio_direction_output-needs-an-initial-value fix
    
    Build fix:  sa1100/generic.c should already have included <asm/gpio.h>,
    but it didn't ... causing a build problem with a recent patch.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ca1b940ce6495541efe76499b3de39aa5e4941ed
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sun Mar 18 01:26:13 2007 -0800

    [PATCH] i386: trust the PM-Timer calibration of the local APIC timer
    
    When PM-Timer is available for local APIC timer calibration we can skip the
    verification of the calibrated time value.  The resulting error is quite
    small on a bunch of evaluated platforms and is less harming than the
    observed false positives.
    
    We need to keep the verification on systems, which have no PM-Timer to
    avoid bogus local APIC timer calibrations in the range of factor 2-10,
    which can be observed when swicthing off the PM-timer support in the kernel
    configuration.
    
    The wrong calibration values are probably caused by SMM code trying to
    emulate a PS/2 keyboard from a (maybe connected or not) USB keyboard.  This
    prohibits the accurate delivery of PIT interrupts, which are used to
    calibrate the local APIC timer.  Unfortunately we have no way to disable
    this BIOS misfeature in the early boot process.
    
    Add also the dropped cpu_relax() back to the wait loops.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 303cd1535f6257b9fd8214534ca87b1a1567a2c5
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sun Mar 18 01:26:11 2007 -0800

    [PATCH] Fix atomicity of TIF update in flush_thread() for x86_64
    
    Fix atomicity of TIF update in flush_thread() for x86_64
    
    Race :
    
    parent process executing :
    sys_ptrace()
     (lock_kernel())
     (ptrace_get_task_struct(pid))
     arch_ptrace()
       ptrace_detach()
         ptrace_disable(child);
           clear_singlestep(child);
             clear_tsk_thread_flag(child, TIF_SINGLESTEP);
             (which clears the TIF_SINGLESTEP flag atomically from a different
    	  process)
     (put_task_struct(child))
     (unlock_kernel())
    
    And at the same time, in the child process :
    sys_execve()
     do_execve()
       search_binary_handler()
         load_elf_binary()
           flush_old_exec()
             flush_thread()
               doing a non-atomic thread flag update
    
    Signed-off-by: Rebecca Schultz <rschultz@google.com>
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bad77057ed59892bd5c7807dcf0c2500e5ff1fe7
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sun Mar 18 01:26:10 2007 -0800

    [PATCH] machzwd warning fix
    
    drivers/char/watchdog/machzwd.c: In function 'zf_ioctl':
    drivers/char/watchdog/machzwd.c:327: warning: passing argument 1 of 'zf_ping' makes integer from pointer without a cast
    
    Also some coding-style repairs.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Cc: Al Viro <viro@ftp.linux.org.uk>
    Acked-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6a3d039078b337856bd3cfa436be3b1b223440a5
Author: John Keller <jpk@sgi.com>
Date:   Sun Mar 18 01:26:09 2007 -0800

    [PATCH] ia64: platform_kernel_launch_event is noop on generic kernel
    
    Add a missing #define for the platform_kernel_launch_event.  Without this
    fix, a call to platform_kernel_launch_event() becomes a noop on generic
    kernels.  SN systems require this fix to successfully kdump/kexec from
    certain hardware errors.
    
    [bwalle@suse.de: fix it]
    Signed-off-by: John Keller <jpk@sgi.com>
    Cc: Bernhard Walle <bwalle@suse.de>
    Acked-by: Simon Horman <horms@verge.net.au>
    Acked-by: Jay Lan <jlan@sgi.com>
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 647157255915b76ddfbea87ca396ace364d158c5
Author: Bernhard Walle <bwalle@suse.de>
Date:   Sun Mar 18 01:26:08 2007 -0800

    [PATCH] Fix wrong /proc/iomem on SGI Altix
    
    In sn_io_slot_fixup(), the parent is re-set from the bus to
    io(port|mem)_resource because the address is changed in a way that it's not
    child of the bus any more.
    
    However, only the root is set but not the parent/child/sibling relationship
    in the resource tree which causes 'cat /proc/iomem' to stop after this
    memory area.  Depding on the poition in the tree the iomem may be nearly
    completely empty.
    
    Signed-off-by: Bernhard Walle <bwalle@suse.de>
    Cc: John Keller <jpk@sgi.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4f78bb289f4ca57b93385b4df4d0defe5804588b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 18 01:26:07 2007 -0800

    [PATCH] X86_P4_CLOCKMOD must select CPU_FREQ_TABLE
    
    CONFIG_CPU_FREQ=y
    CONFIG_CPU_FREQ_TABLE=m
    CONFIG_X86_P4_CLOCKMOD=y
    
    arch/x86_64/kernel/built-in.o: In function `cpufreq_p4_verify':p4-clockmod.c:(.text.cpufreq_p4_verify+0x8): undefined reference to `cpufreq_frequency_table_verify'
    arch/x86_64/kernel/built-in.o: In function `cpufreq_p4_cpu_exit':p4-clockmod.c:(.text.cpufreq_p4_cpu_exit+0x8): undefined reference to `cpufreq_frequency_table_put_attr'
    arch/x86_64/kernel/built-in.o: In function `cpufreq_p4_cpu_init':p4-clockmod.c:(.text.cpufreq_p4_cpu_init+0x13b): undefined reference to `cpufreq_frequency_table_get_attr'
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Dave Jones <davej@redhat.com>
    Cc: David Rientjes <rientjes@google.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 10bd6b3fc4a4bdeb599495700e97722d18d36609
Merge: 98ae687... 27aba76...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 18 11:08:52 2007 -0700

    Merge branch 'linus' of git://kvm.qumranet.com/home/avi/kvm
    
    * 'linus' of git://kvm.qumranet.com/home/avi/kvm:
      KVM: MMU: Fix host memory corruption on i386 with >= 4GB ram
      KVM: MMU: Fix guest writes to nonpae pde
      KVM: Fix guest sysenter on vmx
      KVM: Unset kvm_arch_ops if arch module loading failed

commit 98ae6878f151b0b508b09a36367c231b707a88cf
Merge: b720a3b... 5f1545b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 18 10:50:44 2007 -0700

    Merge branch 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa
    
    * 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa:
      [ALSA] hda-intel - Fix HDA buffer alignment
      [ALSA] hda-codec - Add model for HP Compaq d5750
      [ALSA] hda-codec - Add support for MacBook Pro 1st generation
      [ALSA] version 1.0.14rc3
      [ALSA] hda-codec - Add model for HP Compaq d5700
      [ALSA] intel8x0 - Fix Oops at kdump crash kernel
      [ALSA] hda-codec - Fix speaker output on MacPro
      [ALSA] hda-codec - more systems for Analog Devices
      [ALSA] hda-intel - Fix codec probe with ATI contorllers
      [ALSA] hda-codec - Add suppoprt for Asus M2N-SLI motherboard
      [ALSA] intel8x0 - Fix speaker output after S2RAM
      [ALSA] ac97 - fix AD shared shared jack control logic
      [ALSA] soc - Fix dependencies in Kconfig files

commit 27aba76615eeb36af84118e8ea6d35ffa51fd1e3
Author: Avi Kivity <avi@qumranet.com>
Date:   Fri Mar 9 13:04:31 2007 +0200

    KVM: MMU: Fix host memory corruption on i386 with >= 4GB ram
    
    PAGE_MASK is an unsigned long, so using it to mask physical addresses on
    i386 (which are 64-bit wide) leads to truncation.  This can result in
    page->private of unrelated memory pages being modified, with disasterous
    results.
    
    Fix by not using PAGE_MASK for physical addresses; instead calculate
    the correct value directly from PAGE_SIZE.  Also fix a similar BUG_ON().
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit ac1b714e78c8f0b252f8d8872e6ce6f898a123b3
Author: Avi Kivity <avi@qumranet.com>
Date:   Thu Mar 8 17:13:32 2007 +0200

    KVM: MMU: Fix guest writes to nonpae pde
    
    KVM shadow page tables are always in pae mode, regardless of the guest
    setting.  This means that a guest pde (mapping 4MB of memory) is mapped
    to two shadow pdes (mapping 2MB each).
    
    When the guest writes to a pte or pde, we intercept the write and emulate it.
    We also remove any shadowed mappings corresponding to the write.  Since the
    mmu did not account for the doubling in the number of pdes, it removed the
    wrong entry, resulting in a mismatch between shadow page tables and guest
    page tables, followed shortly by guest memory corruption.
    
    This patch fixes the problem by detecting the special case of writing to
    a non-pae pde and adjusting the address and number of shadow pdes zapped
    accordingly.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit f5b42c3324494ea3f9bf795e2a7e4d3cbb06c607
Author: Avi Kivity <avi@qumranet.com>
Date:   Tue Mar 6 12:05:53 2007 +0200

    KVM: Fix guest sysenter on vmx
    
    The vmx code currently treats the guest's sysenter support msrs as 32-bit
    values, which breaks 32-bit compat mode userspace on 64-bit guests.  Fix by
    using the native word width of the machine.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit ca45aaae1ef98890ac4e3ee48d65aa22401fd1dc
Author: Avi Kivity <avi@qumranet.com>
Date:   Thu Mar 1 19:21:03 2007 +0200

    KVM: Unset kvm_arch_ops if arch module loading failed
    
    Otherwise, the core module thinks the arch module is loaded, and won't
    let you reload it after you've fixed the bug.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit b720a3be1abd0cb5b9b530c0a1b4044fec4de60e
Merge: 2f8dd85... db2f9f6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Mar 17 17:05:16 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Use Kconfig.preempt

commit 2f8dd8505e005df1711722664d12865cc8b3da4d
Merge: 360afb0... 120b9cf...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Mar 17 17:00:48 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6:
      ide: remove CONFIG_IDEDMA_{ICS,PCI}_AUTO config options
      ide: don't allow DMA to be enabled if CONFIG_IDEDMA_{ICS,PCI}_AUTO=n
      scc_pata: dependency fix
      jmicron: make ide jmicron driver play nice with libata ones
      ide: remove static prototypes from include/asm-mips/mach-au1x00/au1xxx_ide.h
      ide: au1xxx: fix use of mixed declarations and code
      cmd64x: fix recovery time calculation (take 3)

commit 360afb033277688f145030c80fd2853dbfaebba5
Merge: cd05a1f... 92b35e9...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Mar 17 16:57:41 2007 -0700

    Merge branch 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6
    
    * 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6:
      [PATCH] x86: Export _proxy_pda for gcc 4.2
      [PATCH] i386: Don't use the TSC in sched_clock if unstable
      [PATCH] x86-64: fix section mismatch warnings
      [PATCH] i386: Enforce GPLness of VMI ROM
      [PATCH] x86-64: wire up compat sched_rr_get_interval(2)
      [PATCH] i386: Update defconfig
      [PATCH] x86-64: Update defconfig

commit 094f127588679591a871eb20b136f6b2f2796c98
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Fri Mar 16 19:31:06 2007 +0100

    [ARM] 4271/1: iop32x: fix ep80219 detection (support iq80219 platforms)
    
    An iq80219 is a board with an iq31244 layout and an 80219 processor.  It
    breaks the current assumption that all 80219 processors run on ep80219
    platforms.  This patch adds the "force_ep80219" option to the kernel to
    override boot loaders that have passed in the iq31244 id, and adds the
    MACHINE_START definition for ep80219.
    
    [ patch assumes that EP80219 has been added to mach-types ]
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5455a51e6f333d43e0b6b52d1712557475d8eb9d
Author: Graeme Gregory <gg@opensource.wolfsonmicro.com>
Date:   Fri Mar 16 17:11:43 2007 +0100

    [ARM] 4270/2: mach-s3c2443/irq.c off by one error in dma irqs
    
    This patch corrects an error when demuxing the DMA irq's
    DMA1 was used as a base and this should have been DMA0.
    Without this fix we do not process DMA0 irq's and the
    system effectively locks up in a loop trying the process
    the irq it never can.
    
    Signed-off-by: Graeme Gregory <gg@opensource.wolfsonmicro.com>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit db2f9f6d916e0e3d8666fa9c23f1b0bc0c954b2a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Mar 17 15:23:22 2007 -0700

    [SPARC64]: Use Kconfig.preempt
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 120b9cfddff2e398fece07c5e127f3fdbb660441
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Mar 17 21:57:41 2007 +0100

    ide: remove CONFIG_IDEDMA_{ICS,PCI}_AUTO config options
    
    All modern distributions have been setting these options to "y" for ages.
    (additionally "n" cases have been obsoleted for few years).  Therefore use
    DMA by default and remove CONFIG_IDEDMA_{ICS,PCI}_AUTO (also remove no longer
    needed CONFIG_IDEDMA_AUTO).  This fixes DMA support for rare configurations
    where CONFIG_IDEDMA_{ICS,PCI}_AUTO was set to "n" but "hdparm -d 1" was used
    to enable DMA support and which were forced to PIO mode by "ide: don't allow
    DMA to be enabled if CONFIG_IDEDMA_{ICS,PCI}_AUTO=n" patch.  There is no
    functionality loss because "ide=nodma" kernel option is still available.
    
    Cc: Patrick Horn <phrh@yahoo.com>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Russell King <rmk+lkml@arm.linux.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 6f5050a96c9e0521f42a3a1d676c7ad9815f62ad
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Mar 17 21:57:39 2007 +0100

    ide: don't allow DMA to be enabled if CONFIG_IDEDMA_{ICS,PCI}_AUTO=n
    
    For CONFIG_IDEDMA_{ICS,PCI}_AUTO=n and/or "ide=nodma" option the host/device
    are not programmed for DMA and it is also explicitly disabled by ide_set_dma()
    (->ide_dma_check returns "-1").  However the code responsible for manually
    enabling DMA ("hdparm -d 1") has a bug which results in DMA being erroneously
    enabled - ide_set_dma() incorrectly passes "0" return value to set_using_dma().
    This may work if BIOS/firmware configured the host/device for DMA and chipset
    allows independent configuration of DMA/PIO modes but won't work after suspend
    and is generally unsafe on many chipsets (possibly including data corruption
    if the same registers are used for DMA/PIO timings).
    
    This patch fixes kernel bugzilla bug #8169 (piix host driver fixes for
    setting PIO mode exposed the problem described above).  The side-effect of
    the fix is that some rare configuration may be forced to PIO mode when DMA
    mode was previously used - this is addressed by the next patch which removes
    CONFIG_IDEDMA_{PCI,ICS}_AUTO config option completely.
    
    Thanks goes out to Patrick Horn for reporting the issue, narrowing it down
    to the specific commit and testing the fix.  Also thanks to Sergei Shtylyov
    for help in debugging the problem.
    
    Cc: Patrick Horn <phrh@yahoo.com>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Russell King <rmk+lkml@arm.linux.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit a1067db8ebae6817a66fd4e40e34699f402c2544
Author: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
Date:   Sat Mar 17 21:57:25 2007 +0100

    scc_pata: dependency fix
    
    This patch fixes:
    * the dependency of scc_pata on BLK_DEV_IDEDMA_PCI
    * incorrect link to ide-core
    * move scc_pata from ide/ppc to ide/pci
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Cc: Al Viro <viro@ftp.linux.org.uk>,
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit ebbc2031362cfac7f325f051c619dc39ef4892ed
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Mar 17 21:57:25 2007 +0100

    jmicron: make ide jmicron driver play nice with libata ones
    
    When libata is configured, the device is configured such that SATA and
    PATA ports live in separate functions with different programming
    interfaces.  pata_jmicron and ide jmicron drivers can drive only the
    PATA part.
    
    This patch makes jmicron match PCI class code such that it doesn't
    attach itself to the SATA part preventing the proper ahci driver from
    attaching.
    
    This change is suggested by Bartlomiej.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: justin@jmicron.com
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 9c67cd146084040648b72933f138eeb72104be9d
Author: Daniel Mack <daniel@caiaq.de>
Date:   Sat Mar 17 21:57:24 2007 +0100

    ide: remove static prototypes from include/asm-mips/mach-au1x00/au1xxx_ide.h
    
    This patch removes the static prototypes from the au1xxx_ide.h, some of
    them were not even implemented. Also, they caused build breakage since
    they differed from the functions actually implemented in
    drivers/ide/mips/au1xxx-ide.c.
    
    Signed-off-by: Daniel Mack <daniel@caiaq.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 1918fd63de6d222c049cdeae4aa113a6f0593187
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 17 21:57:24 2007 +0100

    ide: au1xxx: fix use of mixed declarations and code
    
    drivers/ide/mips/au1xxx-ide.c:684: warning: ISO C90 forbids mixed declarations and code
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit e277a1aaa97abdc1b0a0b8a8c062e29220b00440
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Mar 17 21:57:24 2007 +0100

    cmd64x: fix recovery time calculation (take 3)
    
    The driver wrongly takes the address setup time into account when calculating
    the PIO recovery time -- this leads to slight overclocking of the PIO modes 0
    and 1 (so, the prayers failed to help, as usual :-).  Rework the code to be
    calculating recovery clock count as a difference between the total cycle count
    and the active count (we don't need to calculate the recovery time itself since
    it's not specified for the PIO modes 0 to 2, and for modes 3 and 4 this formula
    gives enough recovery time anyway in the chip's supported PCI frequency range).
    
    This patch has been inspired by reading the datasheets and looking at what the
    libata driver does; it has been compile-tested only (as usual :-) but anyway,
    the new code gives the same or longer recovery times than the old one...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 25496caec111481161e7f06bbfa12a533c43cc6f
Author: Thomas Renninger <trenn@suse.de>
Date:   Tue Feb 27 12:13:00 2007 -0500

    ACPI: Only use IPI on known broken machines (AMD, Dothan/BaniasPentium M)
    
    Use IPI for blacklisted CPUs, add parameter IPI vs LAPIC
    
    Currently, Linux disables lapic timer for all machines with C2 and higher
    C-state support.
    
    According to Intel only specific Intel models (Banias/Dothan) are broken
    in respect of not waking up from C2 with lapic.
    
    However, I am not sure about the naming of the parameter and how it
    could/should get integrated into the dyntick part
    (CONFIG_GENERIC_CLOCKEVENTS). There, a more fine grained check (TSC
    still running?, ..) is needed? Does this make sense (always use
    CLOCK_EVT_NOTIFY_BROADCAST_ON, but use OFF if forced by use_ipi=0:
    clockevents_notify(use_ipi ? CLOCK_EVT_NOTIFY_BROADCAST_ON :
    CLOCK_EVT_NOTIFY_BROADCAST_OFF, &pr->id);
    
    Signed-off-by: Thomas Renninger <trenn@suse.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cd05a1f818073a623455a58e756c5b419fc98db9
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Mar 17 00:25:52 2007 +0100

    [PATCH] clockevents: Fix suspend/resume to disk hangs
    
    I finally found a dual core box, which survives suspend/resume without
    crashing in the middle of nowhere. Sigh, I never figured out from the
    code and the bug reports what's going on.
    
    The observed hangs are caused by a stale state transition of the clock
    event devices, which keeps the RCU synchronization away from completion,
    when the non boot CPU is brought back up.
    
    The suspend/resume in oneshot mode needs the similar care as the
    periodic mode during suspend to RAM. My assumption that the state
    transitions during the different shutdown/bringups of s2disk would go
    through the periodic boot phase and then switch over to highres resp.
    nohz mode were simply wrong.
    
    Add the appropriate suspend / resume handling for the non periodic
    modes.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 24c4ac070adffe4a21f3a8daf4aee7c98fa6c4f9
Merge: c334ba9... d35690b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 16 19:28:52 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPV6]: ipv6_fl_socklist is inadvertently shared.
      [TCP]: Fix tcp_mem[] initialization.
      [NET]: Copy mac_len in skb_clone() as well
      [IPV4]: Do not disable preemption in trie_leaf_remove().

commit c334ba9e11849f0f23254d82a3305f6174cfbd95
Merge: 4745591... d1acb42...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 16 19:28:33 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Get DEBUG_PAGEALLOC working again.

commit 47455911674d65fba28d43f4135c28ee40c75bac
Merge: 5379058... f510aa3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 16 19:28:15 2007 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Kconfig: Move missplaced NR_CPUS default from SMTC to VSMP.
      [MIPS] Lockdep: Fix recursion bug.
      [MIPS] RTLX: Handle copy_*_user return values.
      [MIPS] RTLX: Protect rtlx_{read,write} with mutex.
      [MIPS] RTLX: Harden against compiler reordering and optimization.
      [MIPS] RTLX: Don't use volatile; it's fragile.
      [MIPS] Lasat: Downgrade 64-bit kernel from experimental to broken.
      [MIPS] Compat: Fix build if CONFIG_SYSVIPC is disabled.
      [CHAR] lcd: Fix two warnings.
      [MIPS] FPU ownership management & preemption fixes
      [MIPS] Check FCSR for pending interrupts, alternative version
      [MIPS] IP27, IP35: Fix warnings.

commit 5379058b718ac6354ba99cc74d10c28d632dc28a
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 16 14:15:57 2007 -0800

    [PATCH] fix MTIME_SEC_MAX on 32-bit
    
    The maximum seconds value we can handle on 32bit is LONG_MAX.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 014efb1df74fe5a30bb10102404428fd4229726e
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Fri Mar 16 13:38:37 2007 -0800

    [PATCH] i386: fix typo in sync_constant_test_bit()'s name
    
    Fix typo in sync_constant_test_bit()'s name, so sync_bitops.h is consistent
    with bitops.h
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6c912a3d3356e5e51917941ce8505531c6fab003
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri Mar 16 13:38:36 2007 -0800

    [PATCH] spi_s3c24xx.c: warning fix
    
    The set_cs field of struct s3c24xx_spi is declared as returning a int but
    the value returned but set_cs is never fixed.  Moreover, the default
    function for set_cs and the set_cs defintion in the platform data are
    returning void.
    
    I'm proposing to change the prototype to void (*set_cs)(...). By doing
    this, I'm also fixing 2 build warnings:
    
      drivers/spi/spi_s3c24xx.c: In function 's3c24xx_spi_probe':
      drivers/spi/spi_s3c24xx.c:330: warning: assignment from incompatible pointer type
      drivers/spi/spi_s3c24xx.c:335: warning: assignment from incompatible pointer type
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d1cabd63262707ad5d6bb730f25b7a2852734595
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Mar 16 13:38:35 2007 -0800

    [PATCH] fix process crash caused by randomisation and 64k pages
    
    This bug was seen on ppc64, but it could have occurred on any
    architecture with a page size of 64k or above.  The problem is that in
    fs/binfmt_elf.c:randomize_stack_top() randomizes the stack to within
    0x7ff pages.  On 4k page machines, this is 8MB; on 64k page boxes, this
    is 128MB.
    
    The problem is that the new binary layout (selected in
    arch_pick_mmap_layout) places the mapping segment 128MB or the stack
    rlimit away from the top of the process memory, whichever is larger.  If
    you chose an rlimit of less than 128MB (most defaults are in the 8Mb
    range) then you can end up having your entire stack randomized away.
    
    The fix is to make randomize_stack_top() only steal at most 8MB, which this
    patch does.  However, I have to point out that even with this, your stack
    rlimit might not be exactly what you get if it's > 128MB, because you're
    still losing the random offset of up to 8MB.
    
    The true fix should be to leave an explicit gap for the randomization plus
    a buffer when determining mmap_base, but that would involve fixing all the
    architectures.
    
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e29e175b0f40cffc86068156733def14a7a533ab
Author: Zilvinas Valinskas <zilvinas@wilibox.com>
Date:   Fri Mar 16 13:38:34 2007 -0800

    [PATCH] initialise pi_lock if CONFIG_RT_MUTEXES=N
    
    Fixes a bogus lockdep warning which causes lockdep to disable itself.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 35ae834fa02ba89cfbd4a80892c0e458fd6d5c0b
Author: Ankita Garg <ankita@in.ibm.com>
Date:   Fri Mar 16 13:38:33 2007 -0800

    [PATCH] oom fix: prevent oom from killing a process with children/sibling unkillable
    
    Looking at oom_kill.c, found that the intention to not kill the selected
    process if any of its children/siblings has OOM_DISABLE set, is not being
    met.
    
    Signed-off-by: Ankita Garg <ankita@in.ibm.com>
    Acked-by: Nick Piggin <npiggin@suse.de>
    Acked-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e5d480ff17f9220cd6198b5c91e8c75329f5594f
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Fri Mar 16 13:38:32 2007 -0800

    [PATCH] change misleading EFI partition support description
    
    Remove the misleading "Presently only useful on the IA-64 platform" text
    from the EFI partition Kconfig.
    
    EFI partitions are also used by Apple on their Intel-based machines and
    thus you need EFI partition support if you (for example) want to attach
    such a machine in target disk mode.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 21778867b1c8e0feb567addb6dc0a7e2ca6ecdec
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Mar 16 13:38:31 2007 -0800

    [PATCH] futex: PI state locking fix
    
    Testing of -rt by IBM uncovered a locking bug in wake_futex_pi(): the PI
    state needs to be locked before we access it.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Chuck Ebbert <cebbert@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d3a7b6df4951170079252402fd0c2dc70cb0ca2a
Author: Marcel Selhorst <tpm@selhorst.net>
Date:   Fri Mar 16 13:38:31 2007 -0800

    [PATCH] tpm_infineon: maintainer
    
    Signed-off-by: Marcel Selhorst <tpm@selhorst.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c2c88f109eebb940ddca17472d2e149560bcf7eb
Author: Bernhard Walle <bwalle@suse.de>
Date:   Fri Mar 16 13:38:30 2007 -0800

    [PATCH] Initialise SAK member for each virtual console to prevent oops
    
    Initialise the SAK member of the vc_cons variable on all virtual terminals,
    not only the first one.  This prevents an oops when trying Sysrq-C on e.g.
    the second virtual terminal:
    
      kernel BUG at kernel/workqueue.c:212!
      invalid opcode: 0000 [1] SMP
      CPU 0
      Modules linked in: i915 drm deflate zlib_deflate twofish twofish_common serpent blowfish des ce
      Pid: 0, comm: swapper Not tainted 2.6.21-rc3-default #15
      RIP: 0010:[<ffffffff8028c955>]  [<ffffffff8028c955>] queue_work+0x32/0x51
      RSP: 0018:ffffffff805fada8  EFLAGS: 00010013
      RAX: ffffffff80683f38 RBX: ffffffff804ae700 RCX: 0000000000000000
      RDX: 0000000000000000 RSI: ffffffff80683f30 RDI: ffff81000134a840
      RBP: 0000000000000001 R08: 0000000000000005 R09: 0000000000000002
      R10: ffffffff805990e0 R11: ffff810037f4c0f0 R12: 000000000000006b
      R13: ffff81007aa23000 R14: 0000000000000001 R15: 0000000000000096
      FS:  0000000000000000(0000) GS:ffffffff804d8000(0000) knlGS:0000000000000000
      CS:  0010 DS: 0018 ES: 0018 CR0: 000000008005003b
      CR2: 00002b72026e9000 CR3: 0000000079175000 CR4: 00000000000006e0
      Process swapper (pid: 0, threadinfo ffffffff8059e000, task ffffffff80490840)
      Stack:  0000000000000096 ffffffff803635db ffffffff805fadf8 0000000000000001
       ffff8100013c2e40 0000000000000025 ffff81007c931c00 ffff81007aa23000
       0000000000000001 ffffffff8035e3ee 0000000000000092 ffff810037cc8000
      Call Trace:
       <IRQ>  [<ffffffff803635db>] __handle_sysrq+0x98/0x129
       [<ffffffff8035e3ee>] kbd_event+0x32e/0x56a
       [<ffffffff8037d502>] input_event+0x422/0x44a
       [<ffffffff80381d71>] atkbd_interrupt+0x449/0x503
       [<ffffffff8037a42d>] serio_interrupt+0x37/0x6f
       [<ffffffff8037affb>] i8042_interrupt+0x1f4/0x20a
       [<ffffffff8026bd20>] smp_send_timer_broadcast_ipi+0x2d/0x4e
       [<ffffffff8020eee5>] handle_IRQ_event+0x25/0x53
       [<ffffffff802a924c>] handle_edge_irq+0xe4/0x128
       [<ffffffff802562ac>] call_softirq+0x1c/0x28
       [<ffffffff802632eb>] do_IRQ+0x6c/0xd3
       [<ffffffff8024f4e7>] mwait_idle+0x0/0x45
       [<ffffffff80255631>] ret_from_intr+0x0/0xa
       <EOI>  [<ffffffff80248a4d>] datagram_poll+0x0/0xc8
       [<ffffffff8024f529>] mwait_idle+0x42/0x45
       [<ffffffff80242c05>] cpu_idle+0x8b/0xae
       [<ffffffff805a8779>] start_kernel+0x2b9/0x2c5
       [<ffffffff805a815e>] _sinittext+0x15e/0x162
    
      Code: 0f 0b eb fe 48 8b 07 48 63 d2 48 f7 d0 48 8b 3c d0 e8 13 ff
      RIP  [<ffffffff8028c955>] queue_work+0x32/0x51
       RSP <ffffffff805fada8>
      Kernel panic - not syncing: Aiee, killing interrupt handler!
    
    Signed-off-by: Bernhard Walle <bwalle@suse.de>
    Acked-by: Eric Biederman <ebiederm@xmission.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7a5e6bc29aca331267dfc9f49129b9432ac84d70
Author: Stefano Brivio <stefano.brivio@polimi.it>
Date:   Fri Mar 16 13:38:29 2007 -0800

    [PATCH] hwmon: Build fix for SENSORS_W83793
    
    We need vid_which_vrm and vid_from_reg in the w83793 module.
    
    Signed-off-by: Stefano Brivio <stefano.brivio@polimi.it>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 634707388baa440d9c9d082cfc4c950500c8952b
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Fri Mar 16 13:38:28 2007 -0800

    [PATCH] nfs: nfs_getattr() can't call nfs_sync_mapping_range() for non-regular files
    
    Looks like we need a check in nfs_getattr() for a regular file. It makes
    no sense to call nfs_sync_mapping_range() on anything else. I think that
    should fix your problem: it will stop the NFS client from interfering
    with dirty pages on that inode's mapping.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Acked-by: Olof Johansson <olof@lixom.net>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 89a09141df6ac1c3821fbe44ca8384eb37692965
Author: Peter Zijlstra <a.p.zijlstra@chello.nl>
Date:   Fri Mar 16 13:38:26 2007 -0800

    [PATCH] nfs: fix congestion control
    
    The current NFS client congestion logic is severly broken, it marks the
    backing device congested during each nfs_writepages() call but doesn't
    mirror this in nfs_writepage() which makes for deadlocks.  Also it
    implements its own waitqueue.
    
    Replace this by a more regular congestion implementation that puts a cap on
    the number of active writeback pages and uses the bdi congestion waitqueue.
    
    Also always use an interruptible wait since it makes sense to be able to
    SIGKILL the process even for mounts without 'intr'.
    
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b74a2f0913694556a027795d2954d30523fac4c5
Author: Suzuki K P <suzuki@in.ibm.com>
Date:   Fri Mar 16 13:38:25 2007 -0800

    [PATCH] fix rescan_partitions to return errors properly
    
    The only error code which comes from the partition checkers is -1, when
    they finds an EIO.  As per the discussion, ENOMEM values were ignored,
    as they might scare the users.
    
    So, with the current code, we end up returning -1 and not EIO for the
    ioctl() calls.  Which doesn't give any clue to the user of what went
    wrong.
    
    Signed-off-by: Suzuki K P <suzuki@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b257bc051f06607beb3004d9a1c297085e728bec
Author: Andrew Johnson <ajohnson@intrinsyc.com>
Date:   Fri Mar 16 13:38:24 2007 -0800

    [PATCH] swsusp: fix suspend when console is in VT_AUTO+KD_GRAPHICS mode
    
    When the console is in VT_AUTO+KD_GRAPHICS mode, switching to the
    SUSPEND_CONSOLE fails, resulting in vt_waitactive() waiting indefinitely or
    until the task is interrupted.  This patch tests if a console switch can
    occur in set_console() and returns early if a console switch is not
    possible.
    
    [akpm@linux-foundation.org: cleanup]
    Signed-off-by: Andrew Johnson <ajohnson@intrinsyc.com>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1174cf730179d8f029b9e93cb9a4d5bfb08d1202
Author: Vasily Averin <vvs@sw.ru>
Date:   Fri Mar 16 13:38:24 2007 -0800

    [PATCH] smbfs: double free memory corruption
    
    smbfs allocates rq_trans2buffer to handle server's multi transaction2 response
    messages.  As struct smb_request may be reused, rq_trans2buffer is freed
    before each new request.  However if last servers's response is not multi but
    single trans2 message then new rq_trans2buffer is not allocated but last
    smb_rput still tries to free it again.
    
    To prevent this issue rq_trans2buffer pointer should be set to NULL after
    kfree.
    
    Signed-off-by: Vasily Averin <vvs@sw.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 833f80627d10d370ea91b96de254850361c3a2fc
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Fri Mar 16 13:38:23 2007 -0800

    [PATCH] bool fbdevs must depend on FB = y
    
    Frame buffer device drivers that cannot be built as modules must depend on
    `FB = y'.  Correct the 3 remaining offenders.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b228b8e5bf96b740a70871c1a248bb65c267f5f2
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Fri Mar 16 13:38:22 2007 -0800

    [PATCH] eCryptfs: fix possible NULL ptr deref in ecryptfs_d_release()
    
    ecryptfs_d_release() first dereferences a pointer (via
    ecryptfs_dentry_to_lower()) and then afterwards checks to see if the
    pointer it just dereferenced is NULL (via ecryptfs_dentry_to_private()).
    
    This patch moves all of the work done on the dereferenced pointer inside a
    block governed by the condition that the pointer is non-NULL.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ad28d94abb1313bdf27e196676292c493f92f824
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 16 13:38:21 2007 -0800

    [PATCH] hrtimer: fix up unlocked access to wall_to_monotonic
    
    commit f4304ab21513b834c8fe3403927c60c2b81a72d7 (HZ free NTP) moved the
    access to wall_to_monotonic in hrtimer_get_softirq_time() out of the
    xtime_lock protection.
    
    Move it back into the seq_lock section.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: John Stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c6ca97d26a7efe9488174336bc67fdaea01aad49
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Fri Mar 16 13:38:20 2007 -0800

    [PATCH] SPI: at25: do not use pointer before assignment
    
    Prevents a potential oops with CONFIG_SPI_DEBUG given flakey hardware or
    incorrect configuration.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 13788ccc41ceea5893f9c747c59bc0b28f2416c2
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Mar 16 13:38:20 2007 -0800

    [PATCH] hrtimer: prevent overrun DoS in hrtimer_forward()
    
    hrtimer_forward() does not check for the possible overflow of
    timer->expires.  This can happen on 64 bit machines with large interval
    values and results currently in an endless loop in the softirq because the
    expiry value becomes negative and therefor the timer is expired all the
    time.
    
    Check for this condition and set the expiry value to the max.  expiry time
    in the future.  The fix should be applied to stable kernel series as well.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d8ad7e0b84bde480d295ef1e0381c0c6050f57b3
Author: Antonino Daplas <adaplas@gmail.com>
Date:   Fri Mar 16 13:38:18 2007 -0800

    [PATCH] savagefb: Fix compile error if debugging is enabled
    
    SavagePrintRegs() requires struct savagefb_par.
    
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5b600464f0514efd49d24182daf0e9d62cf8bb8f
Author: Antonino Daplas <adaplas@gmail.com>
Date:   Fri Mar 16 13:38:18 2007 -0800

    [PATCH] savagefb: Fix black screen on load in Savage IX
    
    This is a hack that seems to kick start the 2D engine of the Savage IX in some
    Toshiba laptops.  Without this, the laptop starts with a black screen and
    occasionally crashes X.
    
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e52e15d3c153b88c4536cf18214fac18481c888a
Author: Ondrej Zajicek <santiago@crfreenet.org>
Date:   Fri Mar 16 13:38:16 2007 -0800

    [PATCH] sstfb: fix pixclock setting on Voodoo 1/2 cards
    
    Pixclock setting in sstfb didn't work with my Voodoo 2 card with ICS 5342 DAC
    (this DAC requires two consecutive writes to one of its registers to program
    pixclock - maybe first write merged with second).
    
    Signed-off-by: Ondrej Zajicek <santiago@crfreenet.org>
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 28735a7253a6c24364765e80a5428b4a151fccc2
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Mar 16 13:38:14 2007 -0800

    [PATCH] gpio_direction_output() needs an initial value
    
    It's been pointed out that output GPIOs should have an initial value, to
    avoid signal glitching ...  among other things, it can be some time before
    a driver is ready.  This patch corrects that oversight, fixing
    
     - documentation
     - platforms supporting the GPIO interface
     - users of that call (just one for now, others are pending)
    
    There's only one user of this call for now since most platforms are still
    using non-generic GPIO setup code, which in most cases already couples the
    initial value with its "set output mode" request.
    
    Note that most platforms are clear about the hardware letting the output
    value be set before the pin direction is changed, but the s3c241x docs are
    vague on that topic ...  so those chips might not avoid the glitches.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Andrew Victor <andrew@sanpeople.com>
    Acked-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Acked-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a836f5856ae46ccb2464ea76031ea05ae967b832
Author: Chris Lesiak <chris.lesiak@licor.com>
Date:   Fri Mar 16 13:38:13 2007 -0800

    [PATCH] spi: destroy workqueue after spi_unregister_master
    
    Fix a bug in the cleanup of an spi_bitbang bus.
    
    The workqueue associated with the bus was destroyed before the call to
    spi_unregister_master.  That meant that spi devices on that bus would be
    unable to do IO in their remove method.  The shutdown flag should have been
    able to prevent a segfault, but was never getting set.  By waiting to
    destroy the workqueue until after the master is unregistered, devices are
    able to do IO in their remove methods.  An added benefit is that neither
    the shutdown flag nor a wait for the queue of messages to empty is needed.
    
    Signed-off-by: Chris Lesiak <chris.lesiak@licor.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 65b8291c4000e5f38fc94fb2ca0cb7e8683c8a1b
Author: Zach Brown <zach.brown@oracle.com>
Date:   Fri Mar 16 13:38:11 2007 -0800

    [PATCH] dio: invalidate clean pages before dio write
    
    This patch fixes a user-triggerable oops that was reported by Leonid
    Ananiev as archived at http://lkml.org/lkml/2007/2/8/337.
    
    dio writes invalidate clean pages that intersect the written region so that
    subsequent buffered reads go to disk to read the new data.  If this fails
    the interface tries to tell the caller that the cache is inconsistent by
    returning EIO.
    
    Before this patch we had the problem where this invalidation failure would
    clobber -EIOCBQUEUED as it made its way from fs/direct-io.c to fs/aio.c.
    Both fs/aio.c and bio completion call aio_complete() and we reference freed
    memory, usually oopsing.
    
    This patch addresses this problem by invalidating before the write so that
    we can cleanly return -EIO before ->direct_IO() has had a chance to return
    -EIOCBQUEUED.
    
    There is a compromise here.  During the dio write we can fault in mmap()ed
    pages which intersect the written range with get_user_pages() if the user
    provided them for the source buffer.  This is a crazy thing to do, but we
    can make it mostly work in most cases by trying the invalidation again.
    The compromise is that we won't return an error if this second invalidation
    fails if it's an AIO write and we have -EIOCBQUEUED.
    
    This was tested by having two processes race performing large O_DIRECT and
    buffered ordered writes.  Within minutes ext3 would see a race between
    ext3_releasepage() and jbd holding a reference on ordered data buffers and
    would cause invalidation to fail, panicing the box.  The test can be found
    in the 'aio_dio_bugs' test group in test.kernel.org/autotest.  After this
    patch the test passes.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Leonid Ananiev <leonid.i.ananiev@linux.intel.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 00e9fa2d6421fbbefb4c02821a1e779a3ce47781
Author: Nick Piggin <npiggin@suse.de>
Date:   Fri Mar 16 13:38:10 2007 -0800

    [PATCH] mm: fix madvise infinine loop
    
    madvise(MADV_REMOVE) can go into an infinite loop or cause an oops if the
    call covers a region from the start of a vma, and extending past that vma.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Cc: Badari Pulavarty <pbadari@us.ibm.com>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0465fc0a1c42e18438d391f3a7e661493a9ad68e
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Fri Mar 16 13:38:09 2007 -0800

    [PATCH] ufs2: tindirect truncate fix
    
    During modification of code to support UFS2 writing, the case with
    "three indirect" blocks in truncate path was missed, this patch fixes
    this situation.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4b25a37e2093146c1f9aa436b832b7d4ef880ca4
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Fri Mar 16 13:38:09 2007 -0800

    [PATCH] ufs: zeroize the rest of block in truncate
    
    This patch fix behaviour in such test scenario:
    
      lseek(fd, BIG_OFFSET)
      write(fd, buf, sizeof(buf))
      truncate(BIG_OFFSET)
      truncate(BIG_OFFSET + sizeof(buf))
      read(fd, buf...)
    
    Because of if file big enough(BIG_OFFSET) we start allocate space by block,
    ordinary block size > page size, so we should zeroize the rest of block in
    truncate(except last framgnet, about which VFS should care), to not get
    garbage, when we extend file.
    
    Also patch corrects conversion from pointer to block to physical block number,
    this helps in case of not common used UFS types.
    
    And add to debug output inode number.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5431bf97ce69065ed07de1ff12543d0800817b83
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Fri Mar 16 13:38:08 2007 -0800

    [PATCH] ufs: prepare write + change blocks on the fly
    
    This fixes "change blocks numbers on the fly" in case when "prepare
    write page" is in the call chain, in this case some buffers may be not
    uptodate and not mapped, we should care to map them and load from disk.
    
    This patch was tested with:
     - ufs regressions simple tests
     - fsx-linux
     - ltp(20060306)
     - untar and build kernel
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2189850f42beff23af32d847bd043cd1d1811a80
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Fri Mar 16 13:38:07 2007 -0800

    [PATCH] ufs2: more correct work with time
    
    This patch corrects work with time in UFS2 case.
    
    1) According to UFS2 disk layout modification/access and so on "time"
       should be hold in two variables one 64bit for seconds and another 32bit for
       nanoseconds,
    
       at now for some unknown reason we suppose that "inode time" holds in
       three variables 32bit for seconds, 32bit for milliseconds and 32bit for
       nanoseconds.
    
    2) We set amount of nanoseconds in "VFS inode" to 0 during read, instead of
       getting values from "on disk inode"(this should close
       http://bugzilla.kernel.org/show_bug.cgi?id=7991).
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Cc: Bjoern Jacke <bjoern@j3e.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 94985134b7b46848267ed6b734320db01c974e72
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Fri Mar 16 13:38:06 2007 -0800

    [PATCH] swsusp: disable nonboot CPUs before entering platform suspend
    
    Prevent the WARN_ON() in arch/x86_64/kernel/acpi/sleep.c:init_low_mapping()
    from triggering by disabling nonboot CPUs before we finally enter the
    platform suspend.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 886c5952950ffed0e8ca3eb9efdc2728bfc144d3
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Fri Mar 16 13:38:06 2007 -0800

    [PATCH] swsusp: Fix resume error path in platform mode
    
    If swsusp is using the platform mode during the resume and the image cannot
    be read, the platform mode should be switched off before software_resume()
    returns.  Make it happen.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 765e3d8a71bbc1f3400667d5cfcfd7b03382d587
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Mar 16 13:38:05 2007 -0800

    [PATCH] rm pointless dmaengine exports
    
    This removes several pointless exports from drivers/dma/dmaengine.c; the
    dma_async_memcpy_*() functions are inlined by <linux/dmaengine.h> so those
    exports are inappropriate.
    
    It also moves the existing EXPORT_SYMBOL declarations next to their functions,
    so it's now trivial to confirm one-to-one correspondence between exports and
    nonstatic symbols.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Acked-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bed31ed9e1cd71d98ff0bc9212100adee523a10a
Author: Andy Isaacson <adi@hexapodia.org>
Date:   Fri Mar 16 13:38:04 2007 -0800

    [PATCH] fix read past end of array in md/linear.c
    
    When iterating through an array, one must be careful to test one's index
    variable rather than another similarly-named variable.
    
    The loop will read off the end of conf->disks[] in the following
    (pathological) case:
    
      % dd bs=1 seek=840716287 if=/dev/zero of=d1 count=1
      % for i in 2 3 4; do dd if=/dev/zero of=d$i bs=1k count=$(($i+150)); done
      % ./vmlinux ubd0=root ubd1=d1 ubd2=d2 ubd3=d3 ubd4=d4
      # mdadm -C /dev/md0 --level=linear --raid-devices=4 /dev/ubd[1234]
    
    adding some printks, I saw this:
    
      [42949374.960000] hash_spacing = 821120
      [42949374.960000] cnt          = 4
      [42949374.960000] min_spacing  = 801
      [42949374.960000] j=0 size=820928 sz=820928
      [42949374.960000] i=0 sz=820928 hash_spacing=820928
      [42949374.960000] j=1 size=64 sz=64
      [42949374.960000] j=2 size=64 sz=128
      [42949374.960000] j=3 size=64 sz=192
      [42949374.960000] j=4 size=1515870810 sz=1515871002
    
    Cc: Gautham R Shenoy <ego@in.ibm.com>
    Acked-by: Neil Brown <neilb@cse.unsw.edu.au>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 48670a1e018a9c0b83dc78e3b71ffb26391ee4b6
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Mar 16 13:38:02 2007 -0800

    [PATCH] reduce pnp syslog spam
    
    Make some normal code paths in PNP stop issuing syslog spam.  Since PNP
    issues calls regardless of device capablities, it's no surprise when some
    of those devices don't support those calls!
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f510aa3bdb095c5253f6bee9e0f5a3a9ac69ded4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 16 21:58:37 2007 +0000

    [MIPS] Kconfig: Move missplaced NR_CPUS default from SMTC to VSMP.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 49edd098e298b1f94748b7eb9c76374eeca7fb93
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 16 16:10:36 2007 +0000

    [MIPS] Lockdep: Fix recursion bug.
    
     trace_hardirqs_off -> atomic_inc -> local_irq_restore -> trace_hardirqs_off
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 46230aa6ea1671690e3e5efa2a961fc0745fe9b5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 16 12:16:27 2007 +0000

    [MIPS] RTLX: Handle copy_*_user return values.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bc4809e939b91c9642f1ddaea732e2d432ee6af6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 15 17:13:47 2007 +0000

    [MIPS] RTLX: Protect rtlx_{read,write} with mutex.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 61dcc6f4d9ed5db71f4f0be9026bdd09f1a7dc06
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 15 17:10:16 2007 +0000

    [MIPS] RTLX: Harden against compiler reordering and optimization.
    
    RTLX communication is based on lock-free shared memory buffers.  It
    happened to be working by luck so far but relies on the optimizer doing
    certain optimizations but no reordering.
    
    Fixed by inserting proper barriers in rtlx_read and rtlx_write, and careful
    pointer dereferencing.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9e34682026572f07328208f7d2b2c611d2001844
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 15 17:08:28 2007 +0000

    [MIPS] RTLX: Don't use volatile; it's fragile.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 080e948c079f7aa7c4dce7f14b046519886ccabc
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 13 08:59:54 2007 +0000

    [MIPS] Lasat: Downgrade 64-bit kernel from experimental to broken.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 65f8ebe0630ffadce19a3ed11c7eb41bc6cfabce
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 10 18:22:25 2007 +0000

    [MIPS] Compat: Fix build if CONFIG_SYSVIPC is disabled.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2c35f813f3e98f70534b5c2d82e5e2079034fc50
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 10 04:56:33 2007 +0000

    [CHAR] lcd: Fix two warnings.
    
    In file included from drivers/char/lcd.c:23:
    include/linux/mc146818rtc.h:104:1: warning: "RTC_IO_EXTENT" redefined
    drivers/char/lcd.c:15:1: warning: this is the location of the previous definition
    drivers/char/lcd.c:35: warning: 'lcd_lock' defined but not used
    
    c316eb1eee2c803c33b1f826fe744c922d2e354f deleted the last code using
    lcd_lock, so delete definition of lcd_lock.
    
    The definition of RTC_IO_EXTENT is unused and probably always was only
    debree copied from drivers/char/rtc.c.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 53dc80287da43b75df2fe2658651d3c5160dad8e
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sat Mar 10 01:07:45 2007 +0900

    [MIPS] FPU ownership management & preemption fixes
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c6a2f4679331206ef5d353fc9a6cda2fa4aef8c6
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sat Mar 10 01:03:48 2007 +0900

    [MIPS] Check FCSR for pending interrupts, alternative version
    
    Commit 6d6671066a311703bca1b91645bb1e04cc983387 is incomplete and misses
    non-r4k CPUs.  This patch reverts the commit and fixes in other way.
    
     o Do FCSR checking in caller of restore_fp_context.
     o Send SIGFPE if the signal handler set any FPU exception bits.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f1dbf8e718ef0ddb196a28bcc71925ac7da881af
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Mar 10 03:26:56 2007 +0000

    [MIPS] IP27, IP35: Fix warnings.
    
    include/asm-mips/mach-ip27/dma-coherence.h:22: warning: 'plat_map_dma_mem' defined but not used
    include/asm-mips/mach-ip27/dma-coherence.h:41: warning: 'plat_unmap_dma_mem' defined but not used
    include/asm-mips/mach-ip32/dma-coherence.h:30: warning: 'plat_map_dma_mem' defined but not used
    include/asm-mips/mach-ip32/dma-coherence.h:63: warning: 'plat_unmap_dma_mem' defined but not used
    
    These functions are meant to be inlined anyway.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d1acb4210aaa9bdc413d276dbc96d0a23ada97ba
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Mar 16 17:20:28 2007 -0700

    [SPARC64]: Get DEBUG_PAGEALLOC working again.
    
    We have to make sure to use base-pagesize TLB entries even during the
    early transition period where we need TLB miss handling but don't have
    the kernel page tables setup yet for the linear region.
    
    Also, it is necessary therefore to not use the 4MB TSB for these
    translations, and instead use the normal kernel TSB.  This allows us
    to also get rid of the 4MB tsb for debug builds which shrinks the
    kernel a little bit.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d35690beda1429544d46c8eb34b2e3a8c37ab299
Author: Masayuki Nakagawa <nakagawa.msy@ncos.nec.co.jp>
Date:   Fri Mar 16 16:14:03 2007 -0700

    [IPV6]: ipv6_fl_socklist is inadvertently shared.
    
    The ipv6_fl_socklist from listening socket is inadvertently shared
    with new socket created for connection.  This leads to a variety of
    interesting, but fatal, bugs. For example, removing one of the
    sockets may lead to the other socket's encountering a page fault
    when the now freed list is referenced.
    
    The fix is to not share the flow label list with the new socket.
    
    Signed-off-by: Masayuki Nakagawa <nakagawa.msy@ncos.nec.co.jp>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53cdcc04c1e85d4e423b2822b66149b6f2e52c2c
Author: John Heffner <jheffner@psc.edu>
Date:   Fri Mar 16 15:04:03 2007 -0700

    [TCP]: Fix tcp_mem[] initialization.
    
    Change tcp_mem initialization function.  The fraction of total memory
    is now a continuous function of memory size, and independent of page
    size.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e6b3b2e34ac2c72fa05b5e4b20bd88d64c298dc
Author: Alexey Dobriyan <adobriyan@sw.ru>
Date:   Fri Mar 16 15:00:46 2007 -0700

    [NET]: Copy mac_len in skb_clone() as well
    
    ANK says: "It is rarely used, that's wy it was not noticed.
    But in the places, where it is used, it should be disaster."
    
    Signed-off-by: Alexey Dobriyan <adobriyan@sw.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5cc4a73a5b5c8374b810d5371e9e7ed05c1e02c
Author: Robert Olsson <robert.olsson@its.uu.se>
Date:   Fri Mar 16 15:00:07 2007 -0700

    [IPV4]: Do not disable preemption in trie_leaf_remove().
    
    Hello, Just discussed this Patrick...
    
    We have two users of trie_leaf_remove, fn_trie_flush and fn_trie_delete
    both are holding RTNL. So there shouldn't be need for this preempt stuff.
    This is assumed to a leftover from an older RCU-take.
    
    > Mhh .. I think I just remembered something - me incorrectly suggesting
    > to add it there while we were talking about this at OLS :) IIRC the
    > idea was to make sure tnode_free (which at that time didn't use
    > call_rcu) wouldn't free memory while still in use in a rcu read-side
    > critical section. It should have been synchronize_rcu of course,
    > but with tnode_free using call_rcu it seems to be completely
    > unnecessary. So I guess we can simply remove it.
    
    Signed-off-by: Robert Olsson <robert.olsson@its.uu.se>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 92b35e910fe14e6e3a5d498157375fb55ea5fd03
Author: Andi Kleen <ak@suse.de>
Date:   Fri Mar 16 21:07:36 2007 +0100

    [PATCH] x86: Export _proxy_pda for gcc 4.2
    
    The symbol is not actually used, but the compiler unforunately generates
    a (unused) reference to it. This can happen even in modules. So export it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 28f36f8fbf5f3718f7095055c1911a67d200dda1
Author: Guillaume Chazarain <guichaz@gmail.com>
Date:   Fri Mar 16 21:07:36 2007 +0100

    [PATCH] i386: Don't use the TSC in sched_clock if unstable
    
    http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=f9690982b8c2f9a2c65acdc113e758ec356676a3
    caused a regression by letting sched_clock use the TSC even when cpufreq
    disabled it. This caused scheduling weirdnesses.
    
    Signed-off-by: Guillaume Chazarain <guichaz@yahoo.fr>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 43999d9e4e3133bfe0a55589037796386b012a68
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Fri Mar 16 21:07:36 2007 +0100

    [PATCH] x86-64: fix section mismatch warnings
    
    Fix the following section mismatch warnings on x86_64:
    (build using defconfig)
    
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:mtrr_bp_init from .text between 'identify_cpu' (at offset 0x65eb) and 'IRQ0x20_interrupt'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data: from .text between 'finish_e820_parsing' (at offset 0x7dc2) and 'early_panic'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:e820_print_map from .text between 'finish_e820_parsing' (at offset 0x7de1) and 'early_panic'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:num_processors from .text between 'acpi_unmap_lsapic' (at offset 0xc88f) and 'acpi_register_ioapic'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:disabled_cpus from .text between 'MP_processor_info' (at offset 0x11f35) and 'mp_register_lapic'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:num_processors from .text between 'MP_processor_info' (at offset 0x11f6e) and 'mp_register_lapic'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:num_processors from .text between 'MP_processor_info' (at offset 0x11f93) and 'mp_register_lapic'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:fix_aperture from .text between 'gart_parse_options' (at offset 0x15517) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:fix_aperture from .text between 'gart_parse_options' (at offset 0x1552c) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:iommu_aperture_allowed from .text between 'gart_parse_options' (at offset 0x1553d) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:iommu_aperture_allowed from .text between 'gart_parse_options' (at offset 0x15552) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:iommu_aperture_allowed from .text between 'gart_parse_options' (at offset 0x15561) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:iommu_aperture_allowed from .text between 'gart_parse_options' (at offset 0x15577) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:fallback_aper_force from .text between 'gart_parse_options' (at offset 0x1558a) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:fallback_aper_order from .text between 'gart_parse_options' (at offset 0x155bf) and 'iommu_full'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:timer_over_8254 from .text between 'ati_bugs' (at offset 0x16344) and 'via_bugs'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:timer_over_8254 from .text between 'ati_bugs' (at offset 0x16356) and 'via_bugs'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:iommu_aperture_allowed from .text between 'via_bugs' (at offset 0x16380) and 'nvidia_bugs'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:iommu_aperture_disabled from .text between 'via_bugs' (at offset 0x16397) and 'nvidia_bugs'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:acpi_use_timer_override from .text between 'nvidia_bugs' (at offset 0x163a7) and 'arch_unregister_cpu'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:nvidia_hpet_check from .text between 'nvidia_bugs' (at offset 0x163b1) and 'arch_unregister_cpu'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data: from .text between 'nvidia_bugs' (at offset 0x163be) and 'arch_unregister_cpu'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data: from .text between 'nvidia_bugs' (at offset 0x163d1) and 'arch_unregister_cpu'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.data:acpi_skip_timer_override from .text between 'nvidia_bugs' (at offset 0x163e1) and 'arch_unregister_cpu'
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:quirk_intel_irqbalance from .text between 'intel_bugs' (at offset 0x1633c) and 'ati_bugs'
    
    But adds:
    WARNING: arch/x86_64/kernel/built-in.o - Section mismatch: reference to .init.text:get_mtrr_state from .text between 'mtrr_bp_init' (at offset 0xb887) and 'ipi_handler'
    
    The warnings does not show up during a normal build due to kbuild
    failing to check for section mismatch in vmlinux.
    To see these warnings run:
    scripts/mod/modpost arch/x86_64/kernel/built-in.o
    
    kbuild will be fixed but the 'noise-level' had to be decresed first.
    There remains a few section mismatch warnigns for x86_64 for areas where I did
    not feel confident.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 302cf930cbcc6ca24d7e00cffde3d93534ea5405
Author: Andi Kleen <ak@suse.de>
Date:   Fri Mar 16 21:07:36 2007 +0100

    [PATCH] i386: Enforce GPLness of VMI ROM
    
    VMI ROMs are pretty intimate to the kernel, so enforce their GPLness.
    
    No \0 tricks checking for now
    
    This rules out BSD/MIT modules for now, sorry -- the trouble is those
    could come without source.
    
    Acked-by: Zachary Amsden <zach@vmware.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit a9bc3bfd1226c3f09cf321374f934b3892929872
Author: Alexandr Andreev <aandreev@openvz.org>
Date:   Fri Mar 16 21:07:36 2007 +0100

    [PATCH] x86-64: wire up compat sched_rr_get_interval(2)
    
    sys32_sched_rr_get_interval() uses compat_timespec but wasn't used itself.
    
    Signed-off-by: Alexandr Andreev <aandreev@openvz.org>
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 33a40bfd4f41af71231192b8024efba79123f198
Author: Andi Kleen <ak@suse.de>
Date:   Fri Mar 16 21:07:36 2007 +0100

    [PATCH] i386: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit e9781093b59e97a6b216415263e3bee710ef3eb0
Author: Andi Kleen <ak@suse.de>
Date:   Fri Mar 16 21:07:35 2007 +0100

    [PATCH] x86-64: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 4d881901b8c2167884d213eb546ffffc9e5e35ac
Author: Michal Schmidt <mschmidt@redhat.com>
Date:   Fri Mar 16 12:42:59 2007 +0100

    [PATCH] airo: Fix an error path memory leak
    
    The airo driver leaks memory if request_irq() fails.
    
    Signed-off-by: Michal Schmidt <mschmidt@redhat.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 21665a69e6c0c3e383eaef417f0ddbd16bdb69e3
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Wed Mar 14 10:32:07 2007 -0500

    [PATCH] bcm43xx: MANUALWLAN fixes
    
    During testing of bcm43xx interference mitigation, two problems were
    discovered:
    
    (1) When the MANUALWLAN mode was set, routines _stack_save and _stack_restore
        generated assertions that were traced to saving ILT registers with addresses
        > 0xFFF. This problem was fixed by adding one bit to the field used for
        the offset, and subtracting one bit from the space used for the id.
    (2) In MANUALWLAN mode, the IRQ XMIT errors are generated. The cause of these
        errors has not yet been located. Any suggestions on debugging this problem
        would be greatly appreciated.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 5f1545bc45a33361d6bb2fb44af7c35bcd733b9d
Author: Joachim Deguara <joachim.deguara@amd.com>
Date:   Fri Mar 16 15:01:36 2007 +0100

    [ALSA] hda-intel - Fix HDA buffer alignment
    
    From the HDA spec it appears that the buffers written to the BDL and
    sent to a codec must be 128 byte aligned (section 4.5.1).  The alignment
    was not happening especially when playing 6 channels.  This patch set
    the alignment of buffers and periods to 128 bytes.
    
    Signed-off-by: Joachim Deguara <joachim.deguara@amd.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f144e7c7272bf527c380bffaa5e789dc28a09d8d
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sat Mar 10 03:23:03 2007 -0500

    [POWERPC] Fix atomicity of TIF update in flush_thread()
    
    Fix atomicity of TIF update in flush_thread() for powerpc
    
    Fixes it correctly with *_ti_thread_flag.
    
    Race :
    
    parent process executing :
    sys_ptrace()
     (lock_kernel())
     (ptrace_get_task_struct(pid))
     arch_ptrace()
       ptrace_detach()
         ptrace_disable(child);
           clear_singlestep(child);
             clear_tsk_thread_flag(child, TIF_SINGLESTEP);
             (which clears the TIF_SINGLESTEP flag atomically from a different
              process)
     (put_task_struct(child))
     (unlock_kernel())
    
    And at the same time, in the child process :
    sys_execve()
     do_execve()
       search_binary_handler()
         load_elf_binary()
           flush_old_exec()
             flush_thread()
               doing a non-atomic thread flag update
    
    Applies on 2.6.20.
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 38e2aff670b681b6cc267aca307633cbcb48864b
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Mar 16 05:12:53 2007 +0000

    [CIFS] Do not negotiate new POSIX_PATH_OPERATIONS_CAP yet
    
    Samba server now expects that clients which send the new
    POSIX_PATH_OPERATIONS_CAP send all opens with this new
    SMB - and expects that clients that could send the new
    posix open/create but don't as indicating that they really
    want Windows semantics on that handle (which allows Samba
    to support clients which want to support both types of
    behaviors on different handles on the same mount)
    
    We will put this capability back in the SetFSInfo
    negotiation with servers like Samba when the
    new POSIXCreate (create/open/mkdir) code is finished.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 96e89afe6da630dc54cfbca33c2c6a7ab9b6c11b
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Thu Mar 15 16:15:06 2007 -0300

    ACPI: ibm-acpi: allow module to load when acpi notifiers can't be set (v2)
    
    This patch allows for ibm-acpi to coexist (with diminished functionality) with
    other drivers like ACPI_BAY.  ibm-acpi will simply disable the functions it is
    not able to register ACPI notifiers for.
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
    Cc: Chris Wedgwood <cw@f00f.org>
    Cc: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit db98e0b434a6265c451ffe94ec0a29b8d0aaf587
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 15 17:20:01 2007 -0700

    Linux 2.6.21-rc4
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b810cdfcf91d76f603fd48023aede48ced8e6bed
Merge: e7b0d26... d2a9003...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 15 15:31:37 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      natsemi: Avoid IntrStatus lossage if RX state machine resets.
      natsemi: Fix NAPI for interrupt sharing
      natsemi: Consistently use interrupt enable/disable functions
      NetXen: Fix softlockup seen during hardware access
      NetXen: Bug fix for Jumbo frames on XG card
      skge: set mac address bonding fix

commit e7b0d26a86943370c04d6833c6edba2a72a6e240
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Mar 15 15:51:28 2007 -0400

    [PATCH] sysfs: reinstate exclusion between method calls and attribute unregistration
    
    This patch (as869) reinstates the mutual exclusion between sysfs
    attribute method calls and attribute unregistration.  The
    previously-reported deadlocks have been fixed, and this exclusion is
    by far the simplest way to avoid races during driver unbinding.
    
    The check for orphaned read-buffers has been moved down slightly, so
    that the remainder of a partially-read buffer will still be available
    to userspace even after the attribute has been unregistered.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Cornelia Huck <cornelia.huck@de.ibm.com>
    Cc: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d9a9cdfb078d755e648d53ec25b7370f84ee5729
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Mar 15 15:50:34 2007 -0400

    [PATCH] sysfs and driver core: add callback helper, used by SCSI and S390
    
    This patch (as868) adds a helper routine for device drivers that need
    to set up a callback to perform some action in a different process's
    context.  This is intended for use by attribute methods that want to
    unregister themselves or their parent device.  Attribute method calls
    are mutually exclusive with unregistration, so such actions cannot be
    taken directly.
    
    Two attribute methods are converted to use the new helper routine: one
    for SCSI device deletion and one for System/390 ccwgroup devices.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Cornelia Huck <cornelia.huck@de.ibm.com>
    Cc: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0803c30c23d39e1db88d06ef59c30fa5ef6c3ada
Author: Stelian Pop <stelian@popies.net>
Date:   Thu Mar 15 16:54:27 2007 +0100

    [ARM] 4264/1: ldrex/strex syntax errors with recent compilers
    
    Trying to build some code using atomic_clear_mask() on a ARM v6
    processor with a recent compiler (tried with gcc version 4.1.1
    (CodeSourcery ARM Sourcery G++ 2006q3-26), but
    all gcc > 4.1 might be affected) results in the following:
    
    /tmp/ccWKLJV8.s: Assembler messages:
    /tmp/ccWKLJV8.s:581: Error: instruction does not accept this addressing
    mode -- `ldrex r0,r3'
    /tmp/ccWKLJV8.s:583: Error: instruction does not accept this addressing
    mode -- `strex r1,r0,r3'
    
    Older gcc (like gcc version 4.0.0 (DENX ELDK 4.1 4.0.0)) have no problem
    with this.
    
    The patch below fixes the compile error. I also verified that gcc-4.0.0 generates identical code using both forms.
    
    Signed-off-by: Stelian Pop <stelian@popies.net>
    Acked-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6ab27c6bf38d5ff71dafeca77b79e7c284804b75
Merge: 8ce5e3e... d108d4f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 15 10:50:54 2007 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid:
      HID: zeroing of bytes in output fields is bogus
      HID: allocate hid_parser in a proper way

commit d2a900365b8963d7ca46f05d8e7176d1be3cc71d
Author: Mark Brown <broonie@sirena.org.uk>
Date:   Wed Mar 14 19:49:15 2007 +0000

    natsemi: Avoid IntrStatus lossage if RX state machine resets.
    
    This patch fixes the poll routine for the natsemi driver so that if the
    driver detects an RX state machine lockup then no interrupts will be
    lost while the driver recovers from that.
    
    Signed-off-by: Mark Brown <broonie@sirena.org.uk>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 069f8256362b7a17da532f0631cee73b4cfee65b
Author: Mark Brown <broonie@sirena.org.uk>
Date:   Wed Mar 14 19:49:14 2007 +0000

    natsemi: Fix NAPI for interrupt sharing
    
    The interrupt status register for the natsemi chips is clear on read and
    was read unconditionally from both the interrupt and from the NAPI poll
    routine, meaning that if the interrupt service routine was called (for
    example, due to a shared interrupt) while a NAPI poll was scheduled
    interrupts could be missed.  This patch fixes that by ensuring that the
    interrupt status register is only read by the interrupt handler when
    interrupts are enabled from the chip.
    
    It also reverts a workaround for this problem from the netpoll hook and
    improves the trace for interrupt events.
    
    Thanks to Sergei Shtylyov <sshtylyov@ru.mvista.com> for spotting the
    issue, Mark Huth <mhuth@mvista.com> for a simpler method and Simon
    Blake <simon@citylink.co.nz> for testing resources.
    
    Signed-off-by: Mark Brown <broonie@sirena.org.uk>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 14fdd90ef2ec1878d6851ec4dd8d5abb2cef098c
Author: Mark Brown <broonie@sirena.org.uk>
Date:   Wed Mar 14 19:49:13 2007 +0000

    natsemi: Consistently use interrupt enable/disable functions
    
    The natsemi drivers include functions for enabling and disabling
    interrupts from the chip but these are not used in all code paths.  This
    patch changes the code paths that touch the interrupt enable register to
    use the functions.  In all cases this adds an extra PCI read to post the
    operation but since none of these are in fast paths this shouldn't be
    too much of a problem.
    
    Signed-off-by: Mark Brown <broonie@sirena.org.uk>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b58ecad8d6ca83e97cd2928a439efb49267539dc
Author: Mithlesh Thukral <mithlesh@netxen.com>
Date:   Tue Mar 13 04:15:06 2007 -0800

    NetXen: Fix softlockup seen during hardware access
    
    NetXen: This will fix a softlock seen on some machines.
    The reason was too much time was spent waiting for hardware access
    to go through.
    
    Signed-off by: Mithlesh Thukral <mithlesh@netxen.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8b902aea40544bc9e4de913b491dc3a3411fd5d0
Author: Mithlesh Thukral <mithlesh@netxen.com>
Date:   Tue Mar 13 04:13:13 2007 -0800

    NetXen: Bug fix for Jumbo frames on XG card
    
    NetXen: Set the MTU for the right port depending upon the port number
    for XG cards.
    
    Signed-off by: Mithlesh Thukral <mithlesh@netxen.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2eb3e621c4e07e9e7200dbb66f0433b4caafb8e7
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon Mar 12 15:16:26 2007 -0700

    skge: set mac address bonding fix
    
    When bonding does fail over it calls set_mac_address.  When this happens
    as the result of another port going down, the phy_mutex that is common to
    both ports is held, so it deadlocks. Setting the address doesn't need to do
    anything that needs the phy_mutex, it already has the RTNL to protect against
    other admin actions.
    
    This change just disables the receiver to avoid any hardware confusion
    while address is changing.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a8a5d06775f54ab2d23ad6455db399c15a664feb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Mar 15 15:10:28 2007 +0100

    [ALSA] hda-codec - Add model for HP Compaq d5750
    
    Added model=hp-3013 for HP Compaq d5750 with ALC260 codec chip.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6f0778d8726ab647ff80c98c1545fdf839f7bcac
Author: Nicolas Boichat <nicolas@boichat.ch>
Date:   Thu Mar 15 12:38:15 2007 +0100

    [ALSA] hda-codec - Add support for MacBook Pro 1st generation
    
    Fix audio on Macbook Pro 1st generation.
    
    Signed-off-by: Nicolas Boichat <nicolas@boichat.ch>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 09fe58356d148ff66901ddf639e725ca1a48a0af
Author: Len Brown <len.brown@intel.com>
Date:   Sun Mar 11 03:32:00 2007 -0400

    ACPI: parse 2nd MADT by default
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7465
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a8f4af6dc6600980885c594f52eecd60edd62013
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 15 04:10:36 2007 -0400

    ACPICA: revert "acpi_serialize" changes
    
    This reverts 977a6226feae3e2c10a4d8227625ff0f04b49239
    and reverts 1ba753acb372c2955a4843302e92e49ce82e2fea
    and updates acpi_ev_queue_notify_request()
    to restore the previous implementation of the
    "acpi_serialize" workaround.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=8171
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8ce5e3e45e01ffab38a9f03900181132b9068543
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 14 17:50:48 2007 -0700

    Disable NMI watchdog by default properly
    
    This reverts commit 6ebf622b2577c50b1f496bd6a5e8739e55ae7b1c and
    replaces it with one that actually works.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4e337adae4e960f64043b9f433c4a825c902616c
Merge: 0bdd0f3... b36c3f8...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 14 15:29:08 2007 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/mfasheh/ocfs2
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/mfasheh/ocfs2:
      ocfs2_dlm: Add missing locks in dlm_empty_lockres
      ocfs2_dlm: Missing get/put lockres in dlm_run_purge_lockres
      configfs: add missing mutex_unlock()
      ocfs2: add some missing address space callbacks
      ocfs2: Concurrent access of o2hb_region->hr_task was not locked
      ocfs2: Proper cleanup in case of error in ocfs2_register_hb_callbacks()

commit 0bdd0f385a44344f83409b9e00797bfe2596faf8
Merge: 6930043... ab97e6c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 14 15:28:31 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog
    
    * master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog:
      [WATCHDOG] i8xx TCO driver - mark for removal

commit 69300436ca382a4753044142ae3a2c8099e70215
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:20:40 2007 +0000

    [PATCH] m68k dma-mapping: gfp_t annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 27d871833e37ce4ef9a4d8a153598da1b429a490
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:20:30 2007 +0000

    [PATCH] paride endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ecb7524c5d85c04d1b396f80bf4c765db5f3f442
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:20:20 2007 +0000

    [PATCH] kill bogus casts in amd64 uaccess.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7ccec1b94e456b01cbef7cfb1bc97e2b76f24ab5
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:20:10 2007 +0000

    [PATCH] atl1 trivial endianness misannotations
    
    NB: driver is choke-full of code that will break on big-endian; as long
    as the hardware is onboard-only we can live with that, but sooner or
    later that'll need fixing.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1be9ab056e94e23a307b8bfaacc38403b3b5a352
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:20:00 2007 +0000

    [PATCH] ANSIfy powerpc floppy.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b87496aa493a540b9c084b16b73f915705ebdbcc
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:19:50 2007 +0000

    [PATCH] hid-core endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 82c05a13c9e0d782941f975eabf6c5a7928cc4d9
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:19:40 2007 +0000

    [PATCH] cifs endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dfdcbcc426616811f069b741394ba8771dc58527
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:19:30 2007 +0000

    [PATCH] C99 initializers, proper use of const in drivers/ps3
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 23f28001f7858f0cbbcc8cc39d7a0a1346ed68e2
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:19:20 2007 +0000

    [PATCH] qeth gfp_t annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4c1f2b316878edcbd3a71f7165190f1c1b008e1e
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:19:10 2007 +0000

    [PATCH] cciss endian annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit edceec3d6737ae2c901d9abc55f791cf3b42c470
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:19:00 2007 +0000

    [PATCH] trivial ATA iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f0f0d0c691e13a67709ab3b43137ff83210c2c10
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:18:50 2007 +0000

    [PATCH] sparc: nr_free_pages() is unsigned long
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit abad95f7367b68ed010a3b9c4ad6ba3c9911c7fa
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:18:40 2007 +0000

    [PATCH] pasemi trivial iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 750b1b815c85557fba018417be52271e4ca6b02f
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:18:30 2007 +0000

    [PATCH] constant should be long
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a31e40f614788bbc07b3eb4fcf47a16299a4fe01
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:18:20 2007 +0000

    [PATCH] dmfe trivial endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 192cd59bd93a97fd7d46f13fa07dbe328ff33257
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:18:09 2007 +0000

    [PATCH] fastcall still doesn't make sense in paravirt
    
    Andi had removed a bunch of those, but one more had creeped in...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 89952d133dfbca785ae37b7da13699e4a5e1fa93
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:17:59 2007 +0000

    [PATCH] misc NULL noise
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0ae24bdedd289f5b1740404273ac5d9e20383f12
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:16:54 2007 +0000

    [PATCH] rtc-cmos needs RTC_ALWAYS_BCD known
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a7124d799a674a276a566d602479c0a370274c8f
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:16:44 2007 +0000

    [PATCH] sparc: have dma-mapping.h include generic/dma-mapping-broken in non-PCI case
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a7c999114ecd0c69bd3970272b64d8842b765b21
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:16:34 2007 +0000

    [PATCH] BLK_DEV_IDE_CELLEB dependency fix
    
    It's bool and it depends on IDE => should depend on IDE=y
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a033f35a2206e28af8109c62b403d940ba89d2b9
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:16:24 2007 +0000

    [PATCH] include of asm/pgtable.h in nfsfh is bogus
    
    not needed and actually breaks build on frv, while we are at it
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 24b29dbcf382b12b58bc33fb4d0abb13d6ddc073
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:16:14 2007 +0000

    [PATCH] m32r dma-mapping.h should simply include generic/dma-mapping-broken.h
    
    ... instead of trying to duplicate its bits
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 62577fa324991146ded3d16e7ef08e7a99d2ec7e
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:16:04 2007 +0000

    [PATCH] fix ipath_dma_free_coherent() prototype
    
    method gets u64, not dma_addr_t
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6df0187efc91867383195a78e262414d8843f1c9
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:15:54 2007 +0000

    [PATCH] stacktrace doesn't work on uml
    
    and no, it's not the case of "let's pull bits from underlying architecture"
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ebf88a9e7bfd7251fa80888c29b60aa4c86e2941
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:05:01 2007 +0000

    [PATCH] zatm __init abuse
    
    zatm_init() and zatm_start() should be __devinit (the former is
    not module init, despite the name - it's a helper for PCI ->probe())
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c537b994505099b7197e7d3125b942ecbcc51eb6
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:04:51 2007 +0000

    [PATCH] (uml) sparse flags for userland glue are missing $(CF)
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bb81e6050fdc0f2303b47d9300db232571e3e42a
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:04:41 2007 +0000

    [PATCH] appldata build fix
    
    PGALLOC_DMA is defined only if we have CONFIG_ZONE_DMA
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d8b3966e4c976dbf5f2fbe693b381305f7911e3d
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:04:31 2007 +0000

    [PATCH] const file_operations fallout
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit abf0437b420b1476b9afd56af69d1a725f51359c
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Wed Mar 14 09:04:21 2007 +0000

    [PATCH] ibmtr probe is __devinit, not __init
    
    used by ->attach() in pcmcia analog
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 04ff97086b1a3237bbd1fe6390fa80fe75207e23
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Mon Mar 12 16:17:58 2007 +0000

    [PATCH] sanitize security_getprocattr() API
    
    have it return the buffer it had allocated
    
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c4823bce033be74c0fcfbcae2f1be0854fdc2e18
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Mon Mar 12 16:17:42 2007 +0000

    [PATCH] fix deadlock in audit_log_task_context()
    
    GFP_KERNEL allocations in non-blocking context; fixed by killing
    an idiotic use of security_getprocattr().
    
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b36c3f84988eebf38acaccc756e05f6b70e333ab
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Mon Mar 12 13:25:44 2007 -0700

    ocfs2_dlm: Add missing locks in dlm_empty_lockres
    
    __dlm_lockres_unused() expects the caller to take the lockres spinlock.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 3fca0894a4b5e52c278421b04435b88e32b423ad
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Mon Mar 12 13:24:34 2007 -0700

    ocfs2_dlm: Missing get/put lockres in dlm_run_purge_lockres
    
    In some circumstances, this was causing us to reference freed memory.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit afdf04ea098139e86147f63aad9c383cad3b6f37
Author: Joel Becker <joel.becker@oracle.com>
Date:   Mon Mar 5 15:49:49 2007 -0800

    configfs: add missing mutex_unlock()
    
    d_alloc() failure in configfs_register_subsystem() would fail to unlock
    the mutex taken above.  Reorganize the exit path to ensure the unlock
    happens.
    
    Reported-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 03f981cf2ec95dd8bc43d2ecccaec4e83c8375e2
Author: Joel Becker <joel.becker@oracle.com>
Date:   Thu Jan 4 14:54:41 2007 -0800

    ocfs2: add some missing address space callbacks
    
    Under load, OCFS2 would crash in invalidate_inode_pages2_range() because
    invalidate_complete_page2() was unable to invalidate a page.  It would
    appear that JBD is holding on to the page.  ext3 has a specific
    ->releasepage() handler to cover this case.
    
    Steal ext3's ->releasepage(), ->invalidatepage(), and ->migratepage(), as
    they appear completely appropriate for OCFS2.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e6c352dbc0f4dc7e3f82feafb9e6207c5814a189
Author: Joel Becker <joel.becker@oracle.com>
Date:   Sat Feb 3 03:04:20 2007 -0800

    ocfs2: Concurrent access of o2hb_region->hr_task was not locked
    
    This means that a build-up and a teardown could race which would result in a
    double-kthread_stop().
    
    Protect the setting and clearing of hr_task with o2hb_live_lock, as it's not
    a common thing and not performance critical.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c24f72cc7ca829bbad0532ddf315ace3ae1c359e
Author: Joel Becker <joel.becker@oracle.com>
Date:   Sat Feb 3 03:14:30 2007 -0800

    ocfs2: Proper cleanup in case of error in ocfs2_register_hb_callbacks()
    
    If ocfs2_register_hb_callbacks() succeeds on its first callback but fails
    its second, it doesn't release the first on the way out. Fix that.
    
    While we're at it, o2hb_unregister_callback() never returns anything but
    0, so let's make it void.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 717aa9fd26ea89631c946bd42562fa07a91f3133
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Mar 14 08:25:52 2007 +0100

    [ALSA] version 1.0.14rc3
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9720b718f6b92fec07b2408ab7ca60d5146f07e2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Mar 13 21:46:23 2007 +0100

    [ALSA] hda-codec - Add model for HP Compaq d5700
    
    Added model=hp-3013 for HP Compaq d5700 desktop with ALC260 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 883be7936747f35479ecf94aebf3daf418b7f449
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Mar 13 21:52:36 2007 +0100

    [ALSA] intel8x0 - Fix Oops at kdump crash kernel
    
    Fixed Oops at crash kernel from intel8x0 driver that is triggered
    from interrupt handler.  Proper irqsave version seems needed for
    kexec/kdump.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0a07acafd6127117db0c20e04302dd8ac9402bc0
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Mar 13 10:40:23 2007 +0100

    [ALSA] hda-codec - Fix speaker output on MacPro
    
    Initialize the first line-out widget as the output pin in stac92xx_init().
    Some devices like MacPro seem to set this widget as INPUT as default,
    and confuses the driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 187689913d92b5b3b595486a0cb82706f9175dc6
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Mar 12 22:20:51 2007 +0100

    [ALSA] hda-codec - more systems for Analog Devices
    
    This patch adds support for more systems using Analog Devices codecs.
        Asus P5B-DLX - AD1988
        Toshiba U205 - AD1981
        Lenovo M55 - AD1986
        Samsung R55 - AD1986
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a9995a3557ebf09721fd111744ff8b6e498797a6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Mar 12 21:30:46 2007 +0100

    [ALSA] hda-intel - Fix codec probe with ATI contorllers
    
    ATI controllers may have up to 4 codecs while ICH up to 3.
    Thus the earlier fix to change AZX_MAX_CODECS to 3 cause a regression
    on some devices that have the audio codec at bit#3.
    Now max codecs is defined according to the driver type, either 3 or 4.
    Currently 4 is set only to ATI chips.  Other might need the same
    change, too.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a64c8cd6e22bbc6a101da5b827e720fff35a5ab9
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Mar 12 11:36:00 2007 +0100

    [ALSA] hda-codec - Add suppoprt for Asus M2N-SLI motherboard
    
    This patch adds a cfg_tbl to the ad1988 code with the Asus M2N-SLI as
    it's first member.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 19bfafb2ed1a59efb979b6725ab7626a94f7e078
Author: Tommi Kyntola <tommi.kyntola@ray.fi>
Date:   Fri Mar 9 16:15:06 2007 +0100

    [ALSA] intel8x0 - Fix speaker output after S2RAM
    
    Fixed the mute speaker problem after S2RAM on some laptops:
    	http://bugme.osdl.org/show_bug.cgi?id=6181
    
    Signed-off-by: Tommi Kyntola <tommi.kyntola@ray.fi>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c26a8de23a4417f556250c4c099b048b26c430be
Author: Randy Cushman <rcushman_linux@earthlink.net>
Date:   Fri Mar 9 11:32:22 2007 +0100

    [ALSA] ac97 - fix AD shared shared jack control logic
    
    This patch fixes the control logic for shared
    Microphone in/Center+LFE out and Line in/Surround out jacks
    for Analog Devices AD1888, AD1980 and AD1985 AC '97 CODECs.
    
    Signed-off-by: Randy Cushman <rcushman_linux@earthlink.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1fc273b88e59092466b6503e46d9227976254e10
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Mar 8 12:53:02 2007 +0100

    [ALSA] soc - Fix dependencies in Kconfig files
    
    Fixed dependencies in Kconfig files of soc drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0b3d4ef6fe43b75d4b2a6fc4b814cf03aa248e13
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Mar 14 13:22:37 2007 +0900

    serial: Fix sh-sci break interrupt/sysrq handling.
    
    The sh-sci sci_br_interrupt() handler was failing to call
    in to uart_handle_break(), which was something that only
    the SH-3 path was doing, fix that up.
    
    Additionally, SUPPORT_SYSRQ seems to have moved down too
    far, move it back to the top so uart_handle_break() and
    friends aren't no-ops.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 3afb209a43a4216ad4f1411922d47a44252926c6
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Mar 14 13:03:35 2007 +0900

    sh: Fix bogus regs pointer in do_IRQ().
    
    SH-3 and SH-4 were trampling the register, and SH-2 wasn't even
    setting it in the first place. This ended up with some rather
    broken behaviour in the sysrq show_regs().
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit baab1087c61d4506f2c9f4cdb7da162160de16c2
Merge: b174ec2... bb8236f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 13 16:57:15 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Add missing HPAGE_MASK masks on address parameters.
      [SPARC]: Hook up missing syscalls.

commit b174ec2c65d7fa13c88085a04670ac015fd9eb2e
Merge: 8b9909d... 0e6ee85...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 13 11:37:38 2007 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] kspd: ioctl needs a translation entry.
      [MIPS] Viper2: Remove defective support.
      [MIPS] Oprofile: Reset all performance registers for MIPS_MT_SMP configs

commit 0e6ee854e7be9f12146c35aa09da3fe366d60f8c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 13 15:10:50 2007 +0000

    [MIPS] kspd: ioctl needs a translation entry.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit aea0e582d3ed9fa966c60b41871381e7f734adf2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 13 13:37:17 2007 +0000

    [MIPS] Viper2: Remove defective support.
    
    A defconfig file and the 10 lines of code (including comments ...) that
    are rotting since lmo commit 6516a42dc8b40c6c00010346dd51496125b16644
    don't quite make proper support, so let's trash it.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 795a22583ba11deb82d57dd70632c7ac390bb8c8
Author: Chris Dearman <chris@mips.com>
Date:   Thu Mar 1 17:58:24 2007 +0000

    [MIPS] Oprofile: Reset all performance registers for MIPS_MT_SMP configs
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 66fb8bd209926140844830762164a44afdbf44ef
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Mar 13 09:54:21 2007 +0000

    [ARM] Fix breakage caused by 72486f1f8f0a2bc828b9d30cf4690cf2dd6807fc
    
    72486f1f8f0a2bc828b9d30cf4690cf2dd6807fc inverted the sense for
    enabling hotplug CPU controls without reference to any other
    architecture other than i386, ia64 and PowerPC.  This left
    everyone else without hotplug CPU control.
    
    Fix ARM for this brain damage.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5b18167d6b7c63e2787cd9a68f0620a9c363fc85
Author: Mattia Dongili <malattia@linux.it>
Date:   Mon Mar 12 21:43:57 2007 +0100

    sony-laptop: MAINTAINERS fix entry, add L: and W:
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit bb8236f2b978e8ed84e8b664882905fb5a7dd6c8
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 12 22:55:39 2007 -0700

    [SPARC64]: Add missing HPAGE_MASK masks on address parameters.
    
    These pte loops all assume the passed in address is HPAGE
    aligned, make sure that is actually true.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 50d266a3a1b6a284aed7e06b599668ec23b28d6f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Mar 12 19:58:18 2007 -0700

    [SPARC]: Hook up missing syscalls.
    
    sys_mbind
    sys_get_mempolicy
    sys_set_mempolicy
    sys_kexec_load
    sys_move_pages
    sys_getcpu
    sys_epoll_pwait
    
    This work is largely a result of David Woodhouse's most
    excellent missing syscalls patch.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8b9909ded6922c33c221b105b26917780cfa497d
Merge: 44a5085... 7b3c384...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 12 18:13:45 2007 -0700

    Merge branch 'merge' of master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] sys_move_pages should be callable from an SPU
      [POWERPC] Wire up sys_epoll_pwait
      [POWERPC] Allocate syscall number for sys_getcpu
      [POWERPC] update cell_defconfig
      [POWERPC] ps3: always make sure were running on a PS3
      [POWERPC] Fix spu SLB invalidations
      [POWERPC] avoid SPU_ACTIVATE_NOWAKE optimization
      [POWERPC] spufs: fix possible memory corruption is spufs_mem_write

commit 44a5085162f3d3231b359784319a207032e09523
Merge: 27d30b0... 54f565e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 12 18:13:02 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC]: Fix TIF_USEDFPU flag atomicity
      [SPARC64]: Fix atomicity of TIF update in flush_thread()
      [BW2]: Fix section mismatch warnings.
      [CG14]: Fix section mismatch warnings.
      [SPARC]: We do not need OLD_GETRLIMIT.

commit 27d30b0f4e0c8e63f48ef400a64fc073b71bfe59
Merge: 2cb8a57... 75e252d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 12 18:12:42 2007 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [XFRM]: Fix missing protocol comparison of larval SAs.
      [WANROUTER]: Delete superfluous source file "net/wanrouter/af_wanpipe.c".
      [IPV4]: Fix warning in ip_mc_rejoin_group.
      [ROSE]: Socket locking is a great invention.
      [ROSE]: Remove ourselves from waitqueue when receiving a signal
      [NetLabel]: parse the CIPSO ranged tag on incoming packets

commit 75e252d981c0e80c14ce90df246e9b1300474c4f
Author: Joy Latten <latten@austin.ibm.com>
Date:   Mon Mar 12 17:14:07 2007 -0700

    [XFRM]: Fix missing protocol comparison of larval SAs.
    
    I noticed that in xfrm_state_add we look for the larval SA in a few
    places without checking for protocol match. So when using both
    AH and ESP, whichever one gets added first, deletes the larval SA.
    It seems AH always gets added first and ESP is always the larval
    SA's protocol since the xfrm->tmpl has it first. Thus causing the
    additional km_query()
    
    Adding the check eliminates accidental double SA creation.
    
    Signed-off-by: Joy Latten <latten@austin.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 54f565ea895b383b67a2d6e31d2e2fcac5e6c345
Author: William Lee Irwin III <wli@holomorphy.com>
Date:   Mon Mar 12 17:08:25 2007 -0700

    [SPARC]: Fix TIF_USEDFPU flag atomicity
    
    From: William Lee Irwin III <wli@holomorphy.com>
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ce0ecd594d78710422599918a608e96dd1ee6024
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Mar 12 17:06:27 2007 -0700

    [WANROUTER]: Delete superfluous source file "net/wanrouter/af_wanpipe.c".
    
    Delete the apparently superfluous source file
    net/wanrouter/af_wanpipe.c.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 08882669e06099eb3e6ac407f552743aeaaec73f
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Mar 12 17:02:37 2007 -0700

    [IPV4]: Fix warning in ip_mc_rejoin_group.
    
    Kill warning about unused variable `in_dev' when CONFIG_IP_MULTICAST
    is not set.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2cb8a57b9851805883dfe92cf5d88a726134a384
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 12 14:58:08 2007 -0800

    [PATCH] Fix vmi time header bug
    
    Some gcc put this function in .init.text because the header didn't
    match.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b6bc5d71499c6e2d403a0624841c280e6edebe43
Author: Zachary Amsden <zach@vmware.com>
Date:   Fri Mar 9 23:00:30 2007 -0800

    [PATCH] Fix VMI and COMPAT_VDSO for 2.6.21
    
    VMI is broken under COMPAT_VDSO, as Xen and other non hardware assisted
    hypervisors will be.  I have been working on a fix for this which works
    for older glibcs that panic when the new relocatable VDSO is used.
    
    However, I believe at this time that the fix is going to be too radical
    to consider at this stage in the release of 2.6.21.  We don't expect
    this config option to be turned on by vendors for new distributions, so
    at this point we are willing to drop support for it when VMI is compiled
    in, and work on a patch for 2.6.22 which more fully addresses the
    problem.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9f35575dfc172f0a93fb464761883c8f49599b7a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Thu Mar 8 13:06:13 2007 -0700

    [PATCH] pci: Repair pci_save/restore_state so we can restore one save many times.
    
    Because we do not reserve space for the pci-x and pci-e state in struct
    pci dev we need to dynamically allocate it.  However because we need
    to support restore being called multiple times after a single save
    it is never safe to free the buffers we have allocated to hold the
    state.
    
    So this patch modifies the save routines to first check to see
    if we have already allocated a state buffer before allocating
    a new one.  Then the restore routines are modified to not free
    the state after restoring it.  Simple and it fixes some subtle
    error path handling bugs, that are hard to test for.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 392ee1e6dd901db6c4504617476f6442ed91f72d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Thu Mar 8 13:04:57 2007 -0700

    [PATCH] msi: Safer state caching.
    
    There are two ways pci_save_state and pci_restore_state are used.  As
    helper functions during suspend/resume, and as helper functions around
    a hardware reset event.  When used as helper functions around a hardware
    reset event there is no reason to believe the calls will be paired, nor
    is there a good reason to believe that if we restore the msi state from
    before the reset that it will match the current msi state.  Since arch
    code may change the msi message without going through the driver, drivers
    currently do not have enough information to even know when to call
    pci_save_state to ensure they will have msi state in sync with the other
    kernel irq reception data structures.
    
    It turns out the solution is straight forward, cache the state in the
    existing msi data structures (not the magic pci saved things) and
    have the msi code update the cached state each time we write to the hardware.
    This means we never need to read the hardware to figure out what the hardware
    state should be.
    
    By modifying the caching in this manner we get to remove our save_state
    routines and only need to provide restore_state routines.
    
    The only fields that were at all tricky to regenerate were the msi and msi-x
    control registers and the way we regenerate them currently is a bit dependent
    upon assumptions on how we use the allow msi registers to be configured and used
    making the code a little bit brittle.  If we ever change what cases we allow
    or how we configure the msi bits we can address the fragility then.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2536b94a2d2e37dd6c14171d6251f63bbda47293
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 12 15:53:33 2007 -0700

    [ROSE]: Socket locking is a great invention.
    
    Especially if you actually try to do it ;-)
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6cee77dbf29e3c4c2cf2ce16621759accc76891e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 12 15:52:52 2007 -0700

    [ROSE]: Remove ourselves from waitqueue when receiving a signal
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 38c8947c1b46e5985df36435a6f21ef6a7e8a4b8
Author: Paul Moore <paul.moore@hp.com>
Date:   Mon Mar 12 14:38:02 2007 -0700

    [NetLabel]: parse the CIPSO ranged tag on incoming packets
    
    Commit 484b366932be0b73a22c74a82748ca10a721643e added support for the CIPSO
    ranged categories tag.  However, it appears that I made a mistake when rebasing
    then patch to the latest upstream sources for submission and dropped the part
    of the patch that actually parses the tag on incoming packets.  This patch
    fixes this mistake by adding the required function call to the
    cipso_v4_skbuff_getattr() function.
    
    I've run this patch over the weekend and have not noticed any problems.
    
    Signed-off-by: Paul Moore <paul.moore@hp.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 529284a0b649499351495949d05fa3359121cbae
Merge: be52146... 1dee790...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 12 12:31:43 2007 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 4263/1: fix IXP4XX_NPE[ABC]_BASE_VIRT address
      [ARM] 4256/1: i.MX/MX1 SDHC fix/workaround of SD card recognition problems
      [ARM] 4255/1: i.MX/MX1 Correct MPU PLL reference clock value.
      [ARM] 4254/1: i.MX/MX1 CPU Frequency scaling honor boot loader set BCLK_DIV.
      [ARM] 4251/1: Fix sharpsl_pm dependency
      [ARM] 4250/1: Fix locomo backlight conversion error/compile failure
      [ARM] 4249/1: Fix tosa compile failure
      [ARM] 4248/1: lh7a40x: fix missing definitions for get_irqnr_preamble
      [ARM] 4247/1: Fix long name for cc9p9360dev
      ARM: OMAP: Fix OMAP2 dss2 so clk_set_parent works
      ARM: OMAP: Fix missing workqueue include in board-h2.c
      ARM: OMAP: Include missing header

commit 1d99967badac599c0d1db0b45c99e073e8e98cd4
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Mon Mar 12 14:49:26 2007 -0400

    ACPI: resolve HP nx6125 S3 immediate wakeup regression
    
    Moving disable GPEs from enter_sleep up into sleep_prepare fixed
    the disabled SCI on S4 on Acer laptops.
    
    However, it caused an immediate S3 resume on the HP nx6125.
    Apparently, on the HP, a GPE was getting re-enabled after
    the prepare, but before the enter.
    
    Close that window by restoring the GPE disable on enter.
    This is redundant in most cases, but closes this window,
    where S3 and S4 paths differ.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>
    Acked-by: Ray Lee <ray-lk@madrabbit.org>

commit 1dee79087c8b0f3239a2979f61ed92c7a5361b08
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Mon Mar 12 12:38:07 2007 +0100

    [ARM] 4263/1: fix IXP4XX_NPE[ABC]_BASE_VIRT address
    
    This fixs address defines for IXP4XX_NPE[ABC]_BASE_VIRT.
    They are defined as (IXP4XX_PERIPHERAL_BASE_PHYS + 0x[678]000) now,
    but they should be defined as (IXP4XX_PERIPHERAL_BASE_VIRT + 0x[678]000). Note PHYS vs VIRT in IXP4XX_PERIPHERAL_BASE...
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2cb3320b3fb788eb95afbfea8686f11bb14e30b0
Author: Pavel Pisa <ppisa@pikron.com>
Date:   Thu Mar 8 00:00:40 2007 +0100

    [ARM] 4256/1: i.MX/MX1 SDHC fix/workaround of SD card recognition problems
    
    The SDHC controllers cannot process shorter transfers.
    They has to be handled as longer ones, but it such case CRC
    error is evaluated. There was a case in the code still,
    where this error is not ignored as it should to be process
    these transfers.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b3c6b76ffb1a8c8d1f12e838a25c1a86f5316e2c
Author: Pavel Pisa <ppisa@pikron.com>
Date:   Wed Mar 7 23:56:16 2007 +0100

    [ARM] 4255/1: i.MX/MX1 Correct MPU PLL reference clock value.
    
    Only System PLL clock source is selectable by CSCR_SYSTEM_SEL
    bit. MPU PLL is driven by 512*CLK32 for each case.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 83b84c4e8c7cf00e26610f03ee59e9be010f527c
Author: Pavel Pisa <ppisa@pikron.com>
Date:   Wed Mar 7 23:52:40 2007 +0100

    [ARM] 4254/1: i.MX/MX1 CPU Frequency scaling honor boot loader set BCLK_DIV.
    
    The minimal bus clock prescaler should be kept at value
    selected by the board / boot loader designer.
    Switching frequency above startup limit could
    lead to the external memory/devices misbehave.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d108d4fe34730135647fe32a4f8091491d3542ea
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Sat Mar 10 22:45:45 2007 +0100

    HID: zeroing of bytes in output fields is bogus
    
    This patch removes bogus zeroing of unused bits in output reports,
    introduced in Simon's patch in commit d4ae650a.
    According to the specification, any sane device should not care
    about values of unused bits.
    
    What is worse, the zeroing is done in a way which is broken and
    might clear certain bits in output reports which are actually
    _used_ - a device that has multiple fields with one value of
    the size 1 bit each might serve as an example of why this is
    bogus - the second call of hid_output_report() would clear the
    first bit of report, which has already been set up previously.
    
    This patch will break LEDs on SpaceNavigator, because this device
    is broken and takes into account the bits which it shouldn't touch.
    The quirk for this particular device will be provided in a separate
    patch.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 47a80edb1d80ae644ea374a016c8e68d43d2671f
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Mar 12 14:55:12 2007 +0100

    HID: allocate hid_parser in a proper way
    
    hid_parser is non-trivially large structure, so it should be allocated
    using vmalloc() to avoid unsuccessful allocations when memory fragmentation
    is too high.
    This structue has a very short life, it's destroyed as soon as the report
    descriptor has been completely parsed.
    
    This should be considered a temporary solution, until the hid_parser is
    rewritten to consume less memory during report descriptor parsing.
    
    Acked-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit ffe1b4e9f436fd7bb784f3bf7ee963c149fbca5f
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 12 16:15:22 2007 +0900

    sh: Fix SH-3 cache entry_mask and way_size calculation.
    
    The code for performing the calculation was only in the SH-4 probe
    path, move it out to the common path so the other parts get this
    right too.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit fbd168461e65e73016c34b2eacd76d87218c8a9f
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Mon Mar 12 16:12:45 2007 +0900

    sh: Convert struct ioctls to static defines.
    
    This fixes up some compile failures for cases where we don't include
    all of the headers. There's not much point in keeping the struct
    references around anyways, most of the others have been converted
    already.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 72a121ba6d1a264b1d42892ec5d3ccd2b2af6b74
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 12 15:55:19 2007 +0900

    sh: Define missing __NR_readahead.
    
    For some reason sh was missing __NR_readahead, even though the
    syscall was wired up, and the slot was reserved. Caught with
    dwmw2's missing syscall checker.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit bb68660943fc0dc2a5fa634243f3c6b7fb715626
Author: Hideo Saito <saito@densan.co.jp>
Date:   Mon Mar 12 14:50:49 2007 +0900

    sh: Fix PCI BAR address-space wraparound.
    
    When a SH7751R system includes a card that has wide range space
    like a graphics card, the pci-pci bridge controller can't set the
    correct address range.
    
    For example, when *lower_limit is 0xfd000000 and bar_size is
    0x4000000, in the following code at arch/sh/drivers/pci/pci-auto.c,
    0x0 is set in bar_value.
    
    pciauto_setup_bars()
    {
    ...
                    bar_value = ((*lower_limit - 1) & ~(bar_size - 1)) + bar_size;
    ...
                    *lower_limit = bar_value + bar_size;
    }
    
    As a result, 0x4000000 is set in *lower_limit, but this value is wrong.
    
    The following patch avoids this problem by checking the range of the
    value and refusing to update the BAR if the calculated value ends up
    being bogus.
    
    Signed-off-by: Hideo Saito <saito@densan.co.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 7b3c384db1ff0f336b59d5062617915e216eaec1
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri Mar 9 11:58:11 2007 +1100

    [POWERPC] sys_move_pages should be callable from an SPU
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4b0092c215fc678e325193cf97ddcb4be6a550c3
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri Mar 9 11:57:10 2007 +1100

    [POWERPC] Wire up sys_epoll_pwait
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4cd723b4a0cc3e061e0a3fd86a1ec9a227f17c0b
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri Mar 9 11:54:57 2007 +1100

    [POWERPC] Allocate syscall number for sys_getcpu
    
    I forgot to do this when wiring up the syscall.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f57e8430bd2546f6dcdf7d58e66b4965e1fd5c56
Merge: be52146... c886c2b...
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Mar 12 15:47:23 2007 +1100

    Merge branch 'cell-merge' of git://git.kernel.org/pub/scm/linux/kernel/git/arnd/cell-2.6 into merge

commit bb9ba31ca3b88fd396e38950d1caedf2f83521c6
Author: Joerg Dorchain <joerg@dorchain.net>
Date:   Tue Mar 6 02:46:54 2007 -0800

    [SCSI] gdth: fix oops in gdth_copy_cmd()
    
    Recent alterations to the gdth_fill_raw_cmd() path no longer set the
    sg_ranz field for zero transfer commands. However, this field is used
    lower down in the function to initialise ha->cmd_len to the size of
    the firmware packet.  If this uninitialised field contains a bogus
    value, ha->cmd_len can become much larger than the actual firmware
    packet and end up oopsing in gdth_copy_cmd() as it tries to copy this
    huge packet to the device (usually because it runs into an unallocated
    page).
    
    The fix is to initialise the sg_ranz field to zero at the start of
    gdth_fill_raw_cmd().
    
    Signed-off-by: Joerg Dorchain <joerg@dorchain.net>
    Acked-by: Achim Leubner <Achim_Leubner@adaptec.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ba76ef246090601b783c1e6190e22b8b149a105f
Author: Judith Lebzelter <judith@linux-foundation.org>
Date:   Fri Mar 9 13:07:44 2007 -0800

    [SCSI] mptsas: Fix oops for insmod during kexec
    
    This fix's an oops during driver load time.   mptsas_probe calls
    mpt_attach(over in mptbase.c).  Inside that call, we read some
    manufacturing config pages to setup some defaults.  While reading the
    config pages, the firmware doesn't complete the reply in time, and we
    have a timeout. The timeout results in hardreset handler being called.
    The hardreset handler calls all the fusion upper layer driver reset
    callback handlers.  The mptsas_ioc_reset function is the callback
    handler in mptsas.c.   So where I'm getting to, is mptsas_ioc_reset is
    getting called before scsi_host_alloc is called, and the pointer ioc->sh
    is NULL as well as the hostdata.
    
    Signed-off-by:  Judith Lebzelter <judith@osdl.org>
    Acked-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5daa49ef05c44ce94bed0bab0f9ba4a9e952863b
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Thu Mar 8 16:19:11 2007 -0600

    [SCSI] lpfc: avoid double-free during PCI error failure
    
    If a PCI error is detected that cannot be recovered from, there
    will be a double call of lpfc_pci_remove_one(), with the second call
    resulting in a null-pointer dereference. The first call occurs in
    lpfc_io_error_detected(), and the second call during pci device
    remove. This patch eliminates the first call; its un-needed.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Acked-by: James Smart <James.Smart@Emulex.Com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ab97e6cf7be77d1a9ae48d1d0eafde0de21805fc
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sun Mar 11 12:59:47 2007 +0000

    [WATCHDOG] i8xx TCO driver - mark for removal
    
    Mark the i8xx TCO driver for removal.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit a1fdcc0d2714b6622e3fd5c00db1635213d6c41a
Author: Len Brown <len.brown@intel.com>
Date:   Sun Mar 11 03:26:14 2007 -0400

    ACPI: Add support to parse 2nd MADT
    
    When a BIOS bug presents multiple APIC/MADTs,
    Linux currently uses the 1st and ignores the 2nd.
    
    But some machines work better if we use the 2nd.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7465
    
    Add a warning and boot parameter "acpi_apic_instance=2"
    to allow parsing the 2nd.
    
    No change to default behaviour in this patch.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit be521466feb3bb1cd89de82a2b1d080e9ebd3cb6
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sat Mar 10 14:22:07 2007 -0800

    Revert "USB: pxa2xx_udc: fix hardcoded irq number"
    
    This reverts commit d2487cb4257dafb686f682285854fe7f02ca29d8.
    
    Russell King points out that it's obviously bogus, and I have to agree.
    Not only does "irq" not even exist in that scope, but we obviously need
    to free the irq that we actually requested, and that's IRQ_USB.
    
    Reported-by: Russell King <rmk@arm.linux.org.uk>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: David Brownell <david-b@pacbell.net>,
    Cc: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c0a79b229ac0e3a96fc00d5be65a498ceb06ef63
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sat Mar 10 00:19:49 2007 -0800

    [SPARC64]: Fix atomicity of TIF update in flush_thread()
    
    Fix atomicity of TIF update in flush_thread() for sparc64
    
    Fixes correctly the race by using *_ti_thread_flag.
    
    Race :
    
    parent process executing :
    sys_ptrace()
     (lock_kernel())
     (ptrace_get_task_struct(pid))
     arch_ptrace()
       ptrace_detach()
         ptrace_disable(child);
           clear_singlestep(child);
             clear_tsk_thread_flag(child, TIF_SINGLESTEP);
             (which clears the TIF_SINGLESTEP flag atomically from a different
              process)
     (put_task_struct(child))
     (unlock_kernel())
    
    And at the same time, in the child process :
    sys_execve()
     do_execve()
       search_binary_handler()
         load_elf_binary()
           flush_old_exec()
             flush_thread()
               doing a non-atomic thread flag update
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 63abdcdc021063bf1cfcddfd3c1a14a761539807
Author: Robert Reif <reif@earthlink.net>
Date:   Thu Mar 8 21:22:35 2007 -0800

    [BW2]: Fix section mismatch warnings.
    
    Fix section mismatch warnings by moving data into __devinitdata section.
    Add __devinit to two initialization functions.
    
    Signed-off-by: Robert Reif <reif@earthlink.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8fdab4763a04f503301b14810b39c536f2277120
Author: Robert Reif <reif@earthlink.net>
Date:   Thu Mar 8 21:22:03 2007 -0800

    [CG14]: Fix section mismatch warnings.
    
    Fix section mismatch warning by moving data into __devinitdata section.
    Add __devinit to an initialization function.
    
    Signed-off-by: Robert Reif <reif@earthlink.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac33d1febb790bd3a2a51cda1239a1482a3c767f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 8 16:23:24 2007 -0800

    [SPARC]: We do not need OLD_GETRLIMIT.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f5c1e2ea71603bc2962041fef9dd902cb8626a1d
Author: Alan Tyson <atyson@hp.com>
Date:   Sat Mar 10 06:05:14 2007 +0000

    [CIFS] reset mode when client notices that ATTR_READONLY is no longer set
    
    Signed-off-by: Alan Tyson <atyson@hp.com>
    Signed-off-by: Jeff Layton <jlayton@redhat.com>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit f47273e5c8f679220091335e0bed79e46237cfda
Merge: f4cd87a... d2b02ed...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 22:04:27 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPV6] fix ipv6_getsockopt_sticky copy_to_user leak
      [IPV6]: Fix for ipv6_setsockopt NULL dereference
      [DCCP]: Initialise write_xmit_timer also on passive sockets
      [IPV4]: Fix rtm_to_ifaddr() error handling.

commit f4cd87aabb51fcc709b0dacc05b718c400c64172
Merge: 271368b... e3a696e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 22:00:51 2007 -0800

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] refresh config files
      [IA64] put kdump_find_rsvd_region in __init
      [IA64] Remove sparse warning from unwind code
      [IA64] add missing syscall trace clear
      [IA64] Cleanup in crash.c
      [IA64] kexec: declare ia64_mca_pal_base in mca.h rather than kexec.h
      [IA64] pci_get_legacy_ide_irq should return irq (not GSI)
      [IA64] whitespace fixes for include/asm-ia64/sal.h
      [IA64] Cache error recovery
      [IA64] Proper handling of TLB errors from duplicate itr.d dropins

commit 271368b69b9e8042063d6c713423e84503bbdaa0
Merge: 117430b... 9e993ef...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 21:58:28 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6:
      kobject: new_device->kref wasn't putted after error in kobject_move()
      driver core: export device_rename
      Remove devfs from MAINTAINERS
      Driver core: add device symlink back to sysfs
      Revert "driver core: refcounting fix"

commit 117430b1fa3ae0b0bd981226bdb0c5412729c1db
Merge: 2695cf4... 128bf5c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 21:58:10 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6:
      pci: fix section mismatch warning
      PCI: aer: fix section mismatch warning
      pcie: fix section mismatch warning
      PCI: allow multiple calls to pcim_pin_device()

commit 2695cf412f07f394587e7901cb3b4e9b66d25051
Merge: 63e34ca... ee17b28...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 21:57:46 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6: (23 commits)
      USB Elan FTDI: check for workqueue creation
      USB: fix spinlock recursion in cdc-acm.c
      USB: fix Unaligned access in EHCI driver
      USB: Product ID for FT232RL in ftdi_sio
      USBNET: DM9501: Add Corega FEther USB-TXC support.
      USB: ipaq.c: Additional devices
      USB: further fix for usb-serial
      USB: fix usb-serial device naming bug
      USB: RTS/DTR signal patch for airprime driver
      USB: ftdi_sio: use port_probe / port_remove thereby fixing access to the latency_timer
      usb-serial: fix shutdown / device_unregister order
      USB: add Additional PIDs in ftdi_sio
      USB: add QL355P power supply ids to fdti_sio
      USB: New device IDs for cp2101 driver
      USB: kill dead code from hub.c
      USB: ratelimit debounce error messages
      USB: pxa2xx_udc: fix hardcoded irq number
      UHCI: fix port resume problem
      USB: set the correct interval for interrupt URBs
      USB: goku_udc: Remove crude cache coherency code
      ...

commit 63e34ca93a62f472144db60fa3b81111c0d15721
Merge: 51e7fff... 9327f46...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:19:50 2007 -0500

    Pull misc-for-upstream into release branch

commit 51e7fff1c2b763da910db3a875eac5b992df91d9
Merge: bdf3aaf... 9e19721...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:19:25 2007 -0500

    Pull bugzilla-8110 into release branch

commit bdf3aaf9519ddd8a026b5e04e713d2fa673532e5
Merge: b252630... 610a3d0...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:19:19 2007 -0500

    Pull bugzilla-8066 into release branch

commit b2526300ab242dc31f9006dbf9a4de40797571bc
Merge: cb2ebc5... df33c77...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:18:53 2007 -0500

    Pull bugzilla-7907 into release branch

commit cb2ebc59ff52cee770cfd6ba5f23a6cc3c214648
Merge: 3dfb737... 7292576...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:18:46 2007 -0500

    Pull bugzilla-7570 into release branch

commit 3dfb737998c265d3c8a15b931dc4d72335ab8255
Merge: 63be2d9... 2f894ef...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:18:35 2007 -0500

    Pull bugzilla-6859 into release branch

commit 63be2d9305a5865580c6faee2c1eb477c09eac18
Merge: 653351b... 362ea08...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:18:22 2007 -0500

    Pull bugzilla-6316 into release branch

commit 653351b0b9c97d4ec93aed499b542cbcd85309ca
Merge: 5cb69bc... 74586fc...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:18:05 2007 -0500

    Pull bugzilla-5966 into release branch

commit 5cb69bcacea70024252138a9cb4229a142a93389
Merge: c207908... c9bf296...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:17:46 2007 -0500

    Pull ibm into release branch

commit c207908fcc451e31d7fbba31541bd04f93787eb4
Merge: a967e12... 3fd0b2d...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Mar 9 23:17:39 2007 -0500

    Pull altix into release branch

commit 9e197219605513c14d3eae41039ecf1b82d1920d
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Wed Mar 7 18:29:35 2007 -0500

    ACPI: ec: fix race in status register access
    
    Delay the read of the EC status register until
    after the event that caused it occurs -- otherwise
    it is possible to read and act on stale status that was
    associated with the previous event.
    
    Do this with a perpetually incrementing "event_count" to detect
    when a new event occurs and it is safe to read status.
    
    There is no workaround for polling mode -- it is inherently
    exposed to reading and acting on stale status, since it
    doesn't have an interrupt to tell it the event completed.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=8110
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ee17b289732e04fdcdd8ce2ce19b18d3e8b08e20
Author: Cyrill Gorcunov <gorcunov@gmail.com>
Date:   Tue Mar 6 02:47:44 2007 -0800

    USB Elan FTDI: check for workqueue creation
    
    Avoid NULL pointer usage if workqueue creation failed.
    
    Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
    Cc: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 834dbca5b6b79ddb7cf56001ea7b6d4481fdf1e7
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Mar 6 10:47:04 2007 +0100

    USB: fix spinlock recursion in cdc-acm.c
    
    this fixes the spinlock recursion issue. The older fix was incomplete.
    
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Acked-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 64543652609fc1a2a816dc38ce4f56eddda9f9a5
Author: Max Dmitrichenko <dmitrmax@gmail.com>
Date:   Tue Mar 6 02:45:01 2007 +0300

    USB: fix Unaligned access in EHCI driver
    
    I get following warnings on spar64:
    Kernel unaligned access at TPC[1000c9e4] ehci_hub_control+0x54c/0x68c [ehci_hcd]
    
    Despite of the comment in the patched code, the type cast used there
    does make unaligned access. The fix was made as it's done in
    ohci-hub.c.
    
    Signed-off-by: Max Dmitrichenko <dmitrmax@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d8b2160683bd1cee759e72a53193484c25a006bd
Author: Gard Spreemann <spreeman@stud.ntnu.no>
Date:   Mon Mar 5 00:03:26 2007 +0100

    USB: Product ID for FT232RL in ftdi_sio
    
    Here is a patch adding the PID for the FT232RL to ftdi_sio. The patch
    generates a warning during compilation because get_ftdi_divisor doesn't
    explicitly handle the FT232RL with this patch, so I guess you don't want
    to use it in its current state. It is all I could come up with with the
    knowledge I have of the drivers at the moment, though, and I hope you
    can have some use for it at least. It works fine with my DLP-TILT with
    an FT232RL.
    
    From: Gard Spreemann <spreeman@stud.ntnu.no>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6438ac2677adee574f06866787e7560430efe2e0
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Mar 2 20:33:55 2007 -0500

    USBNET: DM9501: Add Corega FEther USB-TXC support.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 62d909ced019bcae75402578d5dab4522e959823
Author: Andre Spahlinger <andre@spahlenbach.de>
Date:   Mon Mar 5 19:09:35 2007 +0100

    USB: ipaq.c: Additional devices
    
    Additional devices
    
    Signed-off-by: Andre Spahlinger <uenz@gmx.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a1f721c81251259024323f7ebf37af8e247be5cb
Author: Oliver Neukum <oneukum@suse.de>
Date:   Mon Mar 5 15:23:51 2007 +0100

    USB: further fix for usb-serial
    
    this is a fix for the outstanding usb-serial issues.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c744f99eb662b54488304b8b60e5f4323b7587bf
Author: Oliver Neukum <oneukum@suse.de>
Date:   Mon Feb 26 15:43:00 2007 +0100

    USB: fix usb-serial device naming bug
    
    Am Montag, 26. Februar 2007 15:16 schrieb Craig Schlenter:
    > Hi Greg
    >
    > 34ef50e5b1f96c2d8c0f3d28b7d407743806256c is definitely
    > the source of the problem. Reverting that makes the
    > ftdi port show up as ttyUSB0 again for me and it
    > can actually be opened.
    
    This patch should fix the issue.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Craig Schlenter <craig@codefountain.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf0cb1ae0273f0963a5d54c7ec4dde384863fac8
Author: Martin Schiller <mschiller@tdt.de>
Date:   Thu Mar 1 13:49:48 2007 +0100

    USB: RTS/DTR signal patch for airprime driver
    
    I encountered some problems with the airprime driver in use with a Novatel
    Merlin XU870:
    
    Closing an open Connection to e.g. /dev/ttyUSB0 doesn't reset the
    RTS/DTR lines of the Modem.  Consequently, when I use minicom to
    establish a connection by "ATD*99#" the modem doesn't hang up even if i
    exit minicom and so I cannot reuse the modem unless I remove it and plug
    it in again.
    
    With the attached patch, the RTS/DTR lines are resetted on a close.  The
    code was mainly taken from the option.c driver.

commit 12bdbe03c8db7139de1de5c622cb0609d259cece
Author: Jim Radford <radford@blackbean.org>
Date:   Wed Feb 28 10:10:50 2007 -0800

    USB: ftdi_sio: use port_probe / port_remove thereby fixing access to the latency_timer
    
    Convert all the port specific code in attach / shutdown to use the new
    port_probe / port_register callbacks from device_register /
    device_unregister allowing adding the sysfs attributes to be added at
    the correct time and to the serial port device itself, instead of to
    the unadorned usb device, avoiding a NULL dereference.
    
    Signed-off-by: Jim Radford <radford@blackbean.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9a7ecacac5f8274d2afce09aadcf37bdb42b93a
Author: Jim Radford <radford@blackbean.org>
Date:   Wed Feb 28 08:14:13 2007 -0800

    usb-serial: fix shutdown / device_unregister order
    
    Ensure that the ->port_remove() callbacks get called before the
    ->shutdown() callback which makeing the order symmetric with
    ->attach() being called before ->port_probe().
    
    Signed-off-by: Jim Radford <radford@blackbean.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4eaf60e0114946d82ef523e8c0718831cbdd3414
Author: Thomas Schleusener <thomas@be-schl.de>
Date:   Wed Feb 28 22:50:52 2007 +0100

    USB: add Additional PIDs in ftdi_sio
    
    I've developed some devices with FTDI chips (FT232xx). FTDI was so kind
    to give some own PID's which I can use together with their VID. Some of
    the devices are already very popular here and I have customers from
    universities, institutes .....
    
    I use the FTDI VID 0x0403. My PID's are:
    
    0xff38 - IBS US485 (USB<-->RS422/485 interface)
    0xff39 - IBS PIC-Programmer
    0xff3a - IBS Card reader for PCMCIA SRAM-cards
    0xff3b - IBS PK1 - Particel counter
    0xff3c - IBS RS232 - Monitor
    0xff3d - APP 70 (dust monitoring system)
    0xff3e - IBS PEDO-Modem (RF modem 868.35 MHz)
    0xff3f - future device
    
    The company is "IBS Ing.-Buero Schleusener".
    
    
    From: Thomas Schleusener <thomas@be-schl.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ef31fec01a558538a696a21ef9ecf5f1a6d4a53b
Author: Michael Olberg <michael.olberg@chalmers.se>
Date:   Tue Feb 27 12:57:12 2007 +0100

    USB: add QL355P power supply ids to fdti_sio

commit fc4bd64cbbbea1eabc77d6f1734c0f8fb7e0295f
Author: Jon K Hellan <hellan@acm.org>
Date:   Wed Feb 28 23:04:33 2007 +0100

    USB: New device IDs for cp2101 driver
    
    Here are two new device IDs for the cp2101 driver.
    The diff is with linus's tree as of this evending.
    
    From: Jon K Hellan <hellan@acm.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5bb16d189f5425f3722bc91d9211afe303ee022b
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Mar 1 22:31:24 2007 +0100

    USB: kill dead code from hub.c
    
    this kills residual obsoletet code from hub.c
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7bc4b81dedf54166e967afa8bc03c8bfeb40fd27
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Feb 27 10:25:00 2007 +0100

    USB: ratelimit debounce error messages
    
    flaky hardware can cause a lot of debounce failed messages. To limit
    the performance impact, a ratelimit should be used.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d2487cb4257dafb686f682285854fe7f02ca29d8
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Tue Feb 27 09:20:09 2007 +0000

    USB: pxa2xx_udc: fix hardcoded irq number
    
    This patch changes last use of hardcoded number of irq to
    use platfrom_get_irq.
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 88018158d1253ab4868a2f9204cc390c711fd9b9
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Feb 26 17:16:06 2007 -0500

    UHCI: fix port resume problem
    
    This patch (as863) fixes a problem encountered sometimes when resuming
    a port on a UHCI controller.  The hardware may turn off the
    Resume-Detect bit before turning off the Suspend bit, leading usbcore
    to think that the port is still suspended and the resume has failed.
    The patch makes uhci_finish_suspend() wait until both bits are safely
    off.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 97b9eb91dc131a10342da1f604e5bd8b1316abdb
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Feb 26 14:56:14 2007 -0500

    USB: set the correct interval for interrupt URBs
    
    This patch (as862) fixes a couple of bugs in the way usbcore handles
    intervals for interrupt URBs.  usb_interrupt_msg (and usb_bulk_msg for
    backward compatibility) don't set the interval correctly for
    high-speed devices.  proc_do_submiturb() doesn't set it correctly when
    a bulk URB is submitted to an interrupt endpoint.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 14360ab76ae81012ef09cce37a587e95ab2e1d86
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 26 18:10:15 2007 +0000

    USB: goku_udc: Remove crude cache coherency code
    
    This is deep architecture specific magic and does should not to exist
    in a driver.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0d8c7aeade59e0f54d93122ebd902caea500c0bd
Author: Andrew Nayenko <relan@bk.ru>
Date:   Sun Feb 25 00:40:20 2007 -0800

    USB storage: Nokia 6288 unusual_devs entry
    
    This patch adds an usual_devs entry for the Nokia 6288. Originally from
    Andrew with a re-diff by Phil.
    
    From: Andrew Nayenko <relan@bk.ru>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6160863f99315acdbcd70afa8f4b9e75281249b1
Author: Phil Dibowitz <phil@ipom.com>
Date:   Sat Feb 24 19:23:41 2007 -0800

    USB storage: Removed duplicate supertop unusual_dev entry
    
    This patch removes the duplicate supertop entries that made it into the
    .21 rc kernels.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dee497df6fcc90a3bdaaddc8e352feb0756a61e0
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Feb 24 13:54:56 2007 -0800

    USB: at91_udc, fix more modpost bogosity (rename driver struct)
    
    Rename the driver struct used with at91_udc to prevent yet another
    bogus warning from "modpost".
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9327f46ee28116b17f15f6505edd90f905908d62
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sun Mar 4 13:17:43 2007 -0500

    ACPI: Kconfig: hide ACPI menu when CONFIG_PM=n
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 98fb8fe10f4b88170f578d8c33eaa2315d73b4f7
Author: Julius Volz <julius.volz@s2003.tu-chemnitz.de>
Date:   Tue Feb 20 16:38:40 2007 +0100

    ACPI: video: Fix spelling and grammar mistakes
    
    Correct some of the most obvious spelling and grammar
    mistakes in drivers/acpi/video.c (comments and printk output).
    
    Signed-off-by: Julius Volz <juliusrv@gmail.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5b27b176da6cc83b0f904c7e0aabd9362d70bf70
Author: Anthony Godshall <agodshall@ampro.com>
Date:   Fri Mar 9 21:19:05 2007 -0500

    ACPI: make blacklist more verbose
    
    IMHO, ACPI disabled due to DMI failure or blacklisted year should be noted,
    as is done with other ACPI blacklisting.
    
    This will help people troubleshoot when ACPI isn't working.  Status quo is
    a mysterious "ACPI Disabled" message without explanation on BIOS that
    implements ACPI but not DMI.  This is actually fairly common on embedded
    x86 boards.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f110ef58e6c9bd562999247c5e8a5b8e722fbd11
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 01:07:25 2007 +0100

    asus-laptop: make code static
    
    This patch makes some needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d2b02ed9487ed25832d19534575052e43f8e0c4f
Author: Chris Wright <chrisw@sous-sol.org>
Date:   Fri Mar 9 16:19:17 2007 -0800

    [IPV6] fix ipv6_getsockopt_sticky copy_to_user leak
    
    User supplied len < 0 can cause leak of kernel memory.
    Use unsigned compare instead.
    
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 128bf5cb54dececc5209db65f8ef5d17d74244d9
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Fri Mar 2 23:59:04 2007 +0100

    pci: fix section mismatch warning
    
    drivers/pci/search.c caused following section mismatch warning
    (if compiled with CONFIG_HOTPLUG=n):
    
    WARNING: drivers/pci/built-in.o - Section mismatch: reference to .init.text: from .text.pci_find_bus after 'pci_find_bus' (at offset 0x24)
    
    This was due to pci_find_bus() calling a function marked __devinit.
    Fix was to remove the __devinit from the offending function.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c1996c2778e90f80cb9fc6a52508068f10d39611
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Tue Feb 27 10:22:00 2007 +0100

    PCI: aer: fix section mismatch warning
    
    Fix following section mismatch warning (when compiled with CONFIG_HOTPLUG=n):
    WARNING: drivers/pci/built-in.o - Section mismatch: reference to .init.text:aer_probe from .data between 'aerdrv' (at offset 0x1608) and 'aer_error_handlers'
    
    Warning was fixed by renaming aerdrv to aerdriver so we pass the whitelist.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3603a6a37c5f5c6a2b109fdb48c9456f08aebdd8
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Tue Feb 27 10:19:17 2007 +0100

    pcie: fix section mismatch warning
    
    Fix following section mismatch warning (when compiled with CONFIG_HOTPLUG=n):
    WARNING: drivers/pci/built-in.o - Section mismatch: reference to .init.text:pcie_portdrv_probe from .data between 'pcie_portdrv' (at offset 0xe40) and 'pcie_portdrv_err_handler'
    
    This warning was fixed by renaming pcie_portdrv to pcie_portdriver so we pass
    the whitelist.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7f375f325feacd8a628e00e0d53390a4f6d8abc2
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Feb 25 04:36:01 2007 -0800

    PCI: allow multiple calls to pcim_pin_device()
    
    Sanity check in pcim_pin_device() was too restrictive in that it didn't
    allow multiple calls to the function, which is against the devres
    philosohpy of fire-and-forget.  Track pinned status separately and allow
    pinning multiple times.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Acked-by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9e993efb0da827634778554070f3c3ec4bdade33
Author: Dmitriy Monakhov <dmonakhov@sw.ru>
Date:   Sat Mar 3 16:11:21 2007 +0300

    kobject: new_device->kref wasn't putted after error in kobject_move()
    
    If error happen we jump to "out" label, in this case new_device not yet
    became the parent but it wasn't putted.
    
    Signed-off-by: Monakhov Dmitriy <dmonakhov@openvz.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a2807dbcbd681e1f36e813fb26e2f24d15018b91
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Feb 28 12:38:31 2007 +0100

    driver core: export device_rename
    
    In wireless we'd like to allow renaming of the phy devices we surface in
    sysfs. The base wireless code, however, can be built modular and thus we
    need device_rename exported.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6cc94ef5359453dafc4778f6e5c33b128a2705c9
Author: Joern Engel <joern@lazybastard.org>
Date:   Tue Feb 27 21:38:30 2007 +0000

    Remove devfs from MAINTAINERS
    
    Remove last remaining trace of devfs.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f7f3461d87536bed52bb83bc8fbe6bfd28619fb1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Mar 6 12:55:53 2007 -0800

    Driver core: add device symlink back to sysfs
    
    This moves the device symlink back to sysfs even if
    CONFIG_SYSFS_DEPRECATED is enabled as too many userspace programs (well,
    HAL), still rely on this link to be present.
    
    I will rework the ability for sysfs to change layouts like this in the
    future, but for now, this patch should fix people's network connections.
    
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Cc: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 161e232b8823e230d4fdf8064e606bbdf26f47e2
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Mar 9 15:25:04 2007 -0800

    Revert "driver core: refcounting fix"
    
    This reverts commit 63ce18cfe685115ff8d341bae4c9204a79043cf0.
    
    It was the incorrect fix and causes a reference counting bug whenever
    any driver module is removed from the system. Mike Galbraith
    <efault@gmx.de> is looking for the real fix for his problem.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit df33c77e3981e71afc8727ee5c432ba1a1bba68c
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Fri Mar 9 18:15:33 2007 -0500

    libata-acpi: allow _GTF on SATA, but disable on PATA for now
    
    The ACPI specification states, and BIOS implementations depend on,
    _STM being called before _GTF.
    
    SATA does this, but PATA does not.  So for now, simply
    prevent execution of _GTF on PATA devices.  Longer term we
    should implement ACPI support for PATA devices in libata.
    
    Signed-off-by: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c886c2bf804c029499694adcc0decfdd32a0cd8b
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Sat Mar 10 00:05:39 2007 +0100

    [POWERPC] update cell_defconfig
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit ef596c697a4d80048eccf50530153d7e3330c127
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Sat Mar 10 00:05:38 2007 +0100

    [POWERPC] ps3: always make sure were running on a PS3
    
    Add missing checks to PS3 specific drivers ps3av and sys-manager to verify that
    we are actually running on a PS3 (pointed out by Arnd).
    
    Correct existing checks in other subsystems/drivers to return -ENODEV instead
    of zero.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 94b2a4393c500a620de90c3266d595926302e26b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sat Mar 10 00:05:37 2007 +0100

    [POWERPC] Fix spu SLB invalidations
    
    The SPU code doesn't properly invalidate SPUs SLBs when necessary,
    for example when changing a segment size from the hugetlbfs code. In
    addition, it saves and restores the SLB content on context switches
    which makes it harder to properly handle those invalidations.
    
    This patch removes the saving & restoring for now, something more
    efficient might be found later on. It also adds a spu_flush_all_slbs(mm)
    that can be used by the core mm code to flush the SLBs of all SPEs that
    are running a given mm at the time of the flush.
    
    In order to do that, it adds a spinlock to the list of all SPEs and move
    some bits & pieces from spufs to spu_base.c
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>

commit 50b520d4efbce45281f58112789470ec7965fd33
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Mar 10 00:05:36 2007 +0100

    [POWERPC] avoid SPU_ACTIVATE_NOWAKE optimization
    
    This optimization was added recently but is still buggy,
    so back it out for now.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit aa0ed2bdb663608d5e409faecff3e1e81a3d413a
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Sat Mar 10 00:05:35 2007 +0100

    [POWERPC] spufs: fix possible memory corruption is spufs_mem_write
    
    Due to a buggy unsigned comparison, it was possible to write
    beyond the end of the local store file in spufs under some
    circumstances.
    
    This rewrites the buggy function to look more like
    simple_copy_from_buffer.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Cc: Ulrich Weigand <Ulrich.Weigand@de.ibm.com>

commit a967e127d0233f2472af64597de3f3920872310c
Merge: bb9b813... f194bda...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 14:22:35 2007 -0800

    Merge branch 'merge' of master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] 85xx: Enable CONFIG_SERIAL_8250_SHARE_IRQ
      [POWERPC] Select u-image as default image for Linkstation
      [POWERPC] 83xx: Minor fixes for 834x_mds USB setup code
      [POWERPC] Fix warning in powermac pci.c
      [POWERPC] Fix warning in powermac feature.c
      [POWERPC] Fix warning in prom_parse.c of_irq_map_oldworld()
      [POWERPC] Celleb: bug fix caused by not casting pointer types
      [POWERPC] Add missing newline in xmon help output
      [POWERPC] No DEEPNAP on 970MP 1.0

commit dfee0a725bb027b749ffdd318eb48b91d564b266
Author: Olaf Kirch <olaf.kirch@oracle.com>
Date:   Fri Mar 9 13:55:38 2007 -0800

    [IPV6]: Fix for ipv6_setsockopt NULL dereference
    
    I came across this bug in http://bugzilla.kernel.org/show_bug.cgi?id=8155
    
    Signed-off-by: Olaf Kirch <olaf.kirch@oracle.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aabb601b0f08b909b650f1a7bfa1e8d9b5a8d999
Author: Gerrit Renker <gerrit@erg.abdn.ac.uk>
Date:   Fri Mar 9 13:47:58 2007 -0800

    [DCCP]: Initialise write_xmit_timer also on passive sockets
    
    The TX CCID needs the write_xmit_timer for delaying packet sends. Previously
    this timer was only activated on active (connecting) sockets.
    
    This patch initialises the write_xmit_timer in sync with the other timers, i.e.
    the timer will be ready on any socket. This is used by applications with a
    listening socket which start to stream after receiving an initiation by the
    client.  The write_xmit_timer is stopped when the application closes, as before.
    
    Was tested to work and to remove the timer bug reported on dccp@vger.
    
    Also moved timer initialisation into timer.c (static).
    
    Signed-off-by: Gerrit Renker <gerrit@erg.abdn.ac.uk>
    Acked-by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4e38f41e34ad853651d66227aae23e48457dce0
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri Mar 9 13:43:24 2007 -0800

    [IPV4]: Fix rtm_to_ifaddr() error handling.
    
    Return negative error value (embedded in the pointer) instead of
    returning NULL.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb9b813bb665cdbe7019a4f1e93f7138e7bf59d0
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 9 15:59:56 2007 +0000

    [MIPS] Sibyte: Fix ZBbus profiler
    
     o Fix build error.
     o Handle error returns.
     o Deal with signals received while sleeping.
     o Don't allow to be selected when we're not building the directory with
       the driver anyway.
     o Coding style cleanups.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ca6f5494f5e0ff60675d99b51c4c56921d95fe1d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 9 12:17:32 2007 +0000

    [MIPS] Sibyte: Do not allow enabling LDT support if PCI is disabled.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 30fbc9f77c5a77f5f7f053d29eb92e41f6043406
Merge: 6e96783... 8960909...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 10:38:09 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] DEC: Remove call to register_prom_console.

commit 6e96783f586cc0a64651087cb518209a8577123f
Merge: 8466c83... 0feba82...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 10:34:55 2007 -0800

    Merge git://git.infradead.org/mtd-2.6
    
    * git://git.infradead.org/mtd-2.6:
      [JFFS2] print a message when marking bad block
      [JFFS2] Check for all-zero node headers
      [MTD] [OneNAND] Classify the page data and oob buffer
      [MTD] [OneNAND] Exit the loop when transferring/filling of the oob is finished
      [MTD] [OneNAND] add Nokia Copyright and a credit
      [MTD] [OneNAND] Fix typo & wrong comments
      [MTD] [OneNAND] Use oob buffer instead of main one in oob functions
      [MTD] Correct partition failed erase address
      [JFFS2] Use yield() between GC passes in background thread.
      [MTD] [NAND] Correct misspelled preprocessor variable.
      [MTD] [MAPS] dilnetpc: Fix printk warning
      [MTD] [NOR] Fix oops in cfi_amdstd_sync
      [MTD] ESB2 check for closed ROM window
      [JFFS2] Fix writebuffer recovery in the first page of a block
      [MTD] [NAND] make oobavail public

commit 8466c833799b30ab343c5108cd2e460f9f16c9d8
Merge: 2f8d16a... 0a38f54...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 9 10:12:46 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      ibmtr: Drain rich supply of modpost warnings.
      3c59x: Fix several modpost warnings
      z85230: Fix FIFO handling
      r8169: fix a race between PCI probe and dev_open
      r8169: revert bogus BMCR reset
      sky2: turn off Rx checksum on bad hardware
      mv643xx: Clear pending interrupts before calling request_irq
      myri10ge: add a wc_enabled flag to myri10ge_priv
      myri10ge: prevent 4k rdma on SGI TIOCE chipset
      myri10ge: use pci_map_page to prepare the dmatest buffer
      myri10ge: fix error checking and return value in myri10ge_allocate_rings
      netxen: fix warnings
      via-rhine: set avoid_D3 for broken BIOSes
      [PATCH] bcm43xx: Fix assertion failures in interrupt handler
      [PATCH] bcm43xx: Fix bug in frequency to channel conversion
      [PATCH] bcm43xx: Fix errors in specs to code translation in B6PHY init

commit 0a38f5442053b10c773b6a10a4d67e2293551f12
Merge: 82c00b6... 7d9f3e8...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 9 11:58:11 2007 -0500

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 82c00b62c811142c8e7d3aef92fbf3fc77b83709
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 8 12:53:07 2007 +0000

    ibmtr: Drain rich supply of modpost warnings.
    
    Building ibmtr as a module produces a spectacular pile of modpost warnings:
    
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x450) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x454) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x458) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x45c) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x4e8) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x4ec) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x4f0) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x4f4) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:find_turbo_adapters from .text between 'ibmtr_probe_card' (at offset 0x500) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:find_turbo_adapters from .text between 'ibmtr_probe_card' (at offset 0x504) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:find_turbo_adapters from .text between 'ibmtr_probe_card' (at offset 0x508) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:find_turbo_adapters from .text between 'ibmtr_probe_card' (at offset 0x50c) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x520) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x524) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x528) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_portlist from .text between 'ibmtr_probe_card' (at offset 0x534) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data: from .text between 'ibmtr_probe_card' (at offset 0x540) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data: from .text between 'ibmtr_probe_card' (at offset 0x544) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data: from .text between 'ibmtr_probe_card' (at offset 0x548) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data: from .text between 'ibmtr_probe_card' (at offset 0x54c) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x558) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x55c) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x560) and 'ibmtr_reset_timer'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.text:ibmtr_probe1 from .text between 'ibmtr_probe_card' (at offset 0x564) and 'ibmtr_reset_timer'
    
    Fix by making ibmtr_probe an __init function.
    
    While at it, move move ibmtr_probe_card below ibmtr_probe so the protoype
    for ibmtr_probe can be deleted.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    
     drivers/net/tokenring/ibmtr.c |   25 ++++++++++++-------------
     1 file changed, 12 insertions(+), 13 deletions(-)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 95c408a95f9b16c638566df57c070b408edf1a01
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 8 15:33:16 2007 +0000

    3c59x: Fix several modpost warnings
    
    WARNING: drivers/net/3c59x.o - Section mismatch: reference to .init.text: from .text between 'vortex_eisa_probe' (at offset 0x4580) and 'vortex_eisa_remove'
    WARNING: drivers/net/3c59x.o - Section mismatch: reference to .init.text: from .text between 'vortex_eisa_probe' (at offset 0x4584) and 'vortex_eisa_remove'
    WARNING: drivers/net/3c59x.o - Section mismatch: reference to .init.text: from .text between 'vortex_eisa_probe' (at offset 0x4588) and 'vortex_eisa_remove'
    WARNING: drivers/net/3c59x.o - Section mismatch: reference to .init.text: from .text between 'vortex_eisa_probe' (at offset 0x458c) and 'vortex_eisa_remove'
    
    Fixed by:
    
     o move definition of vortex_eisa_driver below the functions it references.
     o remove now unnecessary prototypes for vortex_eisa_probe and
       vortex_eisa_remove.
     o Make vortex_eisa_probe an __init function.
     o Make vortex_eisa_remove a __devexit function.
     o Wrap vortex_eisa_driver reference to vortex_eisa_remove with
       __devexit_p().
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    
     drivers/net/3c59x.c |   28 +++++++++++++---------------
     1 file changed, 13 insertions(+), 15 deletions(-)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fe79745507593941adb44a6b2e392645c54ca1c2
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Mar 7 16:37:38 2007 +0000

    z85230: Fix FIFO handling
    
    We must exit immediately on a FIFO fill not take the end of packet path
    otherwise each underrun in PIO transmit mode causes a runt packet and the
    data is lost.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2efa53f373ed811d4860904f5205b8a3b376e253
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri Mar 9 00:00:05 2007 +0100

    r8169: fix a race between PCI probe and dev_open
    
    Initialize the timer with the rest of the private-struct.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9e0db8ef4a8c8fd6f3a506259975d7f8db962421
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu Mar 8 23:59:54 2007 +0100

    r8169: revert bogus BMCR reset
    
    Added during bf793295e1090af84972750898bf8470df5e5419
    
    The current code requests a reset but prohibits autoneg, 1000 Mb/s,
    100 Mb/s and full duplex. The 8168 does not like it at all.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 874183072de73a36a958585e3186639fd2634701
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Mar 8 12:42:30 2007 -0800

    sky2: turn off Rx checksum on bad hardware
    
    On Yukon FE, occasional hardware receive checksum errors are seen.
    An early indication of the problem is single bit differences in the two
    checksum engines.  Use this as a detection mechanism to turn off Rx
    checksumming.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 85cf572cd5a1b63d5efd5bd538201bd56cd5ad24
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Wed Mar 7 22:21:23 2007 -0700

    mv643xx: Clear pending interrupts before calling request_irq
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Acked-by: Giridhar Pemmasani <pgiri@yahoo.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 276e26c3160602efea1d0acc9fe7b45bb4c2c8e1
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 7 20:02:32 2007 +0100

    myri10ge: add a wc_enabled flag to myri10ge_priv
    
    Add a wc_enabled flag in the myri10ge_priv instead of relying
    on mtrr >= 0.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4c882dd808b907652c9a8fe4f7d345cb4dee6a92
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 7 20:01:53 2007 +0100

    myri10ge: prevent 4k rdma on SGI TIOCE chipset
    
    Do not use 4k rdma request on SGI TIOCE chipset since this
    bridge does not support it.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 34fdccea93e858aaece3f127628365b546f96857
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 7 20:00:45 2007 +0100

    myri10ge: use pci_map_page to prepare the dmatest buffer
    
    Allocate a specific page and use pci_map_page for dma test instead
    of relying on another existing buffer.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 355c7265f4745a2aa6f0482d466e2271e6b3c61a
Author: Brice Goglin <brice@myri.com>
Date:   Wed Mar 7 19:59:52 2007 +0100

    myri10ge: fix error checking and return value in myri10ge_allocate_rings
    
    Fix a missing error check in myri10ge_allocate_rings() and set status
    to -ENOMEM before all actual allocations so that the error path returns
    what it should.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b8d095d782fa1e97d5dc05c08ba32c8eb28b85e4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 6 20:35:37 2007 +0000

    netxen: fix warnings
    
      CC [M]  drivers/net/netxen/netxen_nic_hw.o
    drivers/net/netxen/netxen_nic_hw.c: In function 'netxen_nic_hw_resources':
    drivers/net/netxen/netxen_nic_hw.c:231: warning: format '%llx' expects type 'long long unsigned int', but argument 2 has type 'dma_addr_t'
    drivers/net/netxen/netxen_nic_hw.c:250: warning: format '%llx' expects type 'long long unsigned int', but argument 2 has type 'dma_addr_t'
    
    u64 is unsigned long so the cast to u64 will result in a warning on the
    printf arguments for 64-bit builds.  So cast to unsigned long long instead.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e84df485c8e059bc9d8d0691ae6a3deafa1f9350
Author: Roger Luethi <rl@hellgate.ch>
Date:   Tue Mar 6 19:57:37 2007 +0100

    via-rhine: set avoid_D3 for broken BIOSes
    
    This patch sets avoid_D3 for BIOSes known to be broken. Said BIOSes fail
    at PXE boot if the chip is in power state D3.
    
    Signed-off-by: Roger Luethi <rl@hellgate.ch>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2f8d16a996da0b9be2536994aa7a825418364471
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 9 19:34:19 2007 +0900

    devres: release resources on device_del()
    
    Some platform devices are driven without driver attached, so managed
    resources can be acquired without driver attached.  Make sure such
    resources are released by calling devres_release_all() in
    device_del().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1aa506e437a94d520f852d39d5d6a6e7f2e01901
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 9 19:36:12 2007 +0900

    libata: fix ata_host_release() free order
    
    host->ops->host_stop() might access ports.  Free ports after
    host_stop.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8ba5e4cbe444f10352756b6c7715bb26bb087680
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Thu Mar 8 18:02:18 2007 -0600

    sata_nv: revert use of notifiers for now
    
    Commit 721449bf0d51213fe3abf0ac3e3561ef9ea7827a added support for using the
    ADMA notifier bits to determine which commands to check for completion.
    However there have been reports that this causes command timeouts in certain
    cases. This is still being investigated. In addition, apparently the notifiers
    won't work if ADMA is disabled on the other port as a result of an ATAPI device
    being connected, and we don't handle this case properly.
    
    For now, just restore the previous behavior of checking all active commands
    to see if they are complete, without relying on the notifiers.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 14d66ab7e2e06d3727719d3e4eec6bf9f70251c3
Author: Petr Vandrovec <petr@vandrovec.name>
Date:   Thu Mar 8 10:12:12 2007 +0100

    Fix simplex adapters with libata
    
    Recently I got my hands on nVidia's MCP61 PM-AM board, and
    it contains IDE chip configured by BIOS with only primary
    channel enabled.  This confuses code which probes for
    device DMA capabilities - it gets 0x60 (happy duplex
    device) from primary channel BMDMA, but 0xFF (nobody here)
    from secondary channel BMDMA.  Due to this code then believes
    that chip is simplex.  I do not address this problem in
    my patch, as I'm not sure how to handle this.  Probably
    ata_pci_init_one should have bitmap of enabled/possible
    interfaces instead of their count, but it looks like
    quite intrusive change, and maybe we do not care - for device
    with only one channel simplex and regular DMA engines are
    same.
    
    But making device simplex pointed out that support for
    DMA on simplex devices is currently broken - ata_dev_xfermask
    tests whether device is simplex and if it is whether DMA
    engine was assigned to this port.  If not then it strips
    out DMA bits from device.  Problem is that code which assigns
    DMA engine to port in ata_set_mode first detect device
    mode and assigns DMA engine to channel only if some DMA
    capable device was found.
    
    And as xfermask stripped out DMA bits, host->simplex_claimed
    is always NULL with current implementation.
    
    By allowing DMA either if simplex_claimed is NULL or if it
    points to current port DMA can be finally used - it gets
    assigned to first port which contains any DMA capable
    device.
    
    Before:
    pata_amd 0000:00:06.0: version 0.2.8
    PCI: Setting latency timer of device 0000:00:06.0 to 64
    ata5: PATA max UDMA/133 cmd 0x000101f0 ctl 0x000103f6 bmdma 0x0001f000 irq 14
    ata6: PATA max UDMA/133 cmd 0x00010170 ctl 0x00010376 bmdma 0x0001f008 irq 15
    scsi4 : pata_amd
    ata5.00: ATAPI, max UDMA/66
    ata5.00: simplex DMA is claimed by other device, disabling DMA
    ata5.00: configured for PIO4
    scsi5 : pata_amd
    ata6: port disabled. ignoring.
    ata6: reset failed, giving up
    scsi 4:0:0:0: CD-ROM            ATAPI    DVD W  DH16W1P   LG12 PQ: 0 ANSI: 5
    
    After:
    pata_amd 0000:00:06.0: version 0.2.8
    PCI: Setting latency timer of device 0000:00:06.0 to 64
    ata5: PATA max UDMA/133 cmd 0x000101f0 ctl 0x000103f6 bmdma 0x0001f000 irq 14
    ata6: PATA max UDMA/133 cmd 0x00010170 ctl 0x00010376 bmdma 0x0001f008 irq 15
    scsi4 : pata_amd
    ata5.00: ATAPI, max UDMA/66
    ata5.00: configured for UDMA/33
    scsi5 : pata_amd
    ata6: port disabled. ignoring.
    ata6: reset failed, giving up
    scsi 4:0:0:0: CD-ROM            ATAPI    DVD W  DH16W1P   LG12 PQ: 0 ANSI: 5
    
    Signed-off-by: Petr Vandrovec <petr@vandrovec.name>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9a2eb709256cd591119edc2809b4fcac7cb8eb6c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Mar 7 16:13:07 2007 +0000

    ata_piix: Remove ugly layering violation
    
    A while ago I modified the libata code so that drivers can return -ENOENT
    for unknown ports not fiddle with the EH flags and print stuff directly.
    Somewhere along the line ata_piix didn't get fully converted.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0feba829ee82a6e43baabe3f0bdf91bd937a67a1
Author: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
Date:   Thu Mar 8 10:35:10 2007 +0200

    [JFFS2] print a message when marking bad block
    
    New bad eraseblock is an event which is important enough to be printed
    about.
    
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8960909ca71da6120cad2fd7ece7dbe32ae05b40
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 8 17:36:13 2007 +0000

    [MIPS] DEC: Remove call to register_prom_console.
    
    Register_prom_console was removed when mips was converted to early printk.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c7258a4477b5ed0243c28ec107b98bb946757448
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Mar 9 11:44:00 2007 +0000

    [JFFS2] Check for all-zero node headers
    
    Due to a poor choice of CRC32 seed, a node header which is all zeroes
    would pass the CRC32 check. Explicitly check for this case, and treat it
    as we do a CRC failure.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d7930085c28d295b573f6862ff863ccbb8a580ce
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 8 18:30:25 2007 -0500

    ACPI: repair nvidia early quirk breakage on x86_64
    
    x86_64 nvidia_bugs() broke when we bailed out on not finding the HPET.
    However, the quirk works by checking for not finding the HPET...
    
    Delete the nvidia_hpet_detected flag and simply test for
    not finding the HPET, which is simple to do now that
    acpi_table_parse returns 1 on failure.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 470bc844361b238bcbe6a07ba47d51fca25f2742
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri Mar 9 10:08:11 2007 +0900

    [MTD] [OneNAND] Classify the page data and oob buffer
    
    Classify the page data and oob buffer
    and it prevents the memory fragementation (writesize + oobsize)
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5bc399e9ef430efd5725b66aa2ad7ad2d81e372b
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri Mar 9 09:41:07 2007 +0900

    [MTD] [OneNAND] Exit the loop when transferring/filling of the oob is finished
    
    When transferring/filling of the oob is finished in OOB_AUTO, we exit the loop
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 81280d5879761f90b3a341d52371d03998730d8e
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Thu Feb 15 09:47:29 2007 +0900

    [MTD] [OneNAND] add Nokia Copyright and a credit
    
    add Nokia Copyright and a credit
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e3da8067b3ef16943c02b64baa84dacca1e423be
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Thu Feb 15 09:36:39 2007 +0900

    [MTD] [OneNAND] Fix typo & wrong comments
    
    Fix typo & wrong comments
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 91014e9bfaaac32ab46ab46251d774468891bafe
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Mon Feb 12 10:34:39 2007 +0900

    [MTD] [OneNAND] Use oob buffer instead of main one in oob functions
    
    In oob functions, it is used main buffer instead of oob one. So fix it.
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d0035aef390194df1433f436038416d2c5b0fc0e
Author: Dave Jones <davej@redhat.com>
Date:   Thu Mar 8 23:47:35 2007 -0500

    [PATCH] build fix for i386 earlyquirk.c
    
    missing close bracket.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 362ea087db9d99bb0cf79479544dfafa9e18c300
Author: Michael Karcher <bugzilla-kernel@mkarcher.dialup.fu-berlin.de>
Date:   Thu Mar 8 23:29:29 2007 -0500

    ACPI: fix parallel port IRQ after resume from S3
    
    The PNPACPI resource flags were broken.
    This would apply to re-enabling a device any-time after boot,
    not just after resume from S3.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=6316
    
    Acked-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c9bf296b6467968ecb9d988e7ed754a19c2e63d9
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Thu Mar 8 05:28:15 2007 -0300

    ACPI: ibm-acpi: improve backlight power handling
    
    Improve the backlight code to emulate as much as possible the power
    management events, as we are unable to really power on or power off the
    backlight.
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a55028ff74356895a50359dd9fb74d523b66723f
Author: Dave Jones <davej@redhat.com>
Date:   Thu Mar 8 19:45:26 2007 -0500

    [PATCH] update 'getting sparse' info.
    
     - point to the sparse webpage
     - use git:// instead of rsync://
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fe69933652562f093ccde600cecf234930c01932
Author: Len Brown <lenb@kernel.org>
Date:   Thu Mar 8 18:28:32 2007 -0500

    [PATCH] ACPI: repair nvidia early quirk breakage on x86_64
    
    x86_64 nvidia_bugs() broke when we bailed out on not finding the HPET.
    However, the quirk works by checking for _not_ finding the HPET...
    
    Delete the nvidia_hpet_detected flag and simply test for
    not finding the HPET, which is simple to do now that
    acpi_table_parse returns 1 on failure.
    
    Signed-off-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit eb9c4f2ef7150ea2144b53811d1cf555d8e27f69
Merge: c5bfdb7... 55c9add...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 8 16:04:11 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IPoIB: Turn on interface's carrier after broadcast group is joined
      RDMA/ucma: Avoid sending reject if backlog is full
      RDMA/cxgb3: Fix MR permission problems
      RDMA/cxgb3: Don't reuse skbs that are non-linear or cloned
      RDMA/cxgb3: Squelch logging AE errors
      RDMA/cxgb3: Stop EP timer when MPA exchange is aborted by peer
      RDMA/cxgb3: Move QP to error on destroy if the state is IDLE
      RDMA/cxgb3: Fixes for "normal close" failures
      RDMA/cxgb3: Fix build on sparc64
      RDMA/cma: Initialize rdma_bind_list in cma_alloc_any_port()
      RDMA/cxgb3: Don't use mm after it's freed in iwch_mmap()
      RDMA/cxgb3: Start ep timer on a MPA reject
      IB/mthca: Fix error path in mthca_alloc_memfree()
      IB/ehca: Fix sync between completion handler and destroy cq
      IPoIB: Only handle async events for one port

commit c5bfdb7261f2c426c730b65ce59440e8de219fda
Merge: 2ef5507... e2eb8d4...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 8 15:09:57 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [SCTP] ipv6: inconsistent lock state ipv6_add_addr/sctp_v6_copy_addrlist

commit 2ef550790ac0d7bb0da1c6432f69f86f55ac1695
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 8 14:48:36 2007 -0800

    [SPARC64]: Fix PARPORT build (again).
    
    Need to provide {claim,release}_dma_lock() for this guy too.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 55c9adde13dfc6b738e0f70c071a0622e52f35ed
Author: Shirley Ma <xma@us.ibm.com>
Date:   Thu Mar 8 14:59:30 2007 -0800

    IPoIB: Turn on interface's carrier after broadcast group is joined
    
    Do netif_carrier_on() right after the IPv4 broadcast multicast group
    is joined, rather than waiting for all of the initial set of multicast
    group joins to finish.  This allows at least IPv4 traffic to limp
    along on broken fabrics where not all multicast groups can be joined.
    
    Signed-off-by: Shirley Ma <xma@us.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e2eb8d452827b8d1f73db384cd7c6482eac29478
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Thu Mar 8 14:43:41 2007 -0800

    [SCTP] ipv6: inconsistent lock state ipv6_add_addr/sctp_v6_copy_addrlist
    
    lockdep found that dev->lock taken from softirq in ipv6_add_addr
    is also taken in sctp_v6_copy_addrlist with softirqs enabled, so
    lockup is possible.
    
    Noticed-by: Simon Arlott <simon@arlott.org>
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca4266359d0c1199af088447f209ab5bcc32a989
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Thu Mar 8 23:13:50 2007 +0000

    [PATCH] libata-acpi: Try and stop all the non PCI devices crashing
    
    For 2.6.20 it mostly used to just not work, for 2.6.21-rc it crashes, this
    seems to be down to luck (bad or good). The libata-acpi code needs to
    avoid doing PCI work on non-PCI devices. This is one hack although it's
    not pretty and perhaps there is a "right" way to check if a struct device
    * is PCI ?
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3a696e03c861f69627185dd235366b9a4403454
Author: Tony Luck <tony.luck@intel.com>
Date:   Thu Mar 8 11:20:17 2007 -0800

    [IA64] refresh config files
    
    Bring defconfig, tiger_defconfig and zx1_defconfig up to date. Also
    sprinkle KEXEC and KDUMP combinations around liberally so that my
    usual regression test builds will see all combinations:
    
     tiger_defconfig gets KEXEC=y, CRASH_DUMP=n
     zx1_defconfig   gets KEXEC=n, CRASH_DUMP=y
     defconfig       gets KEXEC=y, CRASH_DUMP=y
     others remain at     KEXEC=n, CRASH_DUMP=n
    
    Signed-off-by: Tony Luck <tomy.luck@intel.com>

commit 2a3a2827c7cbe464610116cc17ca4fac63245a43
Author: Horms <horms@verge.net.au>
Date:   Tue Mar 6 16:28:50 2007 +0900

    [IA64] put kdump_find_rsvd_region in __init
    
    kdump_find_rsvd_region() is only called by
    reserve_memory() which is in __init, so it seems that
    kdump_find_rsvd_region() should also be in there.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1f0ef4ef60b4ef0a18dfc50938f3a94c5edd66ce
Author: Keith Owens <kaos@sgi.com>
Date:   Thu Mar 1 16:19:00 2007 +1100

    [IA64] Remove sparse warning from unwind code
    
    Running ia64 through sparse gives warnings in the unwind code.
    
      include/asm-ia64/unwind.h:84:17: error: dubious bitfield without explicit `signed' or `unsigned'
    
    Make the bitfield explicitly unsigned.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8e43d75ad0bd8a90933abb005ef57caf63ce8541
Author: Akiyama, Nobuyuki <akiyama.nobuyuk@jp.fujitsu.com>
Date:   Thu Feb 22 22:50:38 2007 +0900

    [IA64] add missing syscall trace clear
    
    The ptrace misses clearing the syscall trace flag.
    The increased syscall overhead is retained after the trace is finished.
    This case happens when strace is terminated by force.
    
    Signed-off-by: Akiyama, Nobuyuki <akiyama.nobuyuk@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0ac1faca4a63fc2f7e608be76127561b88fbcdd9
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Feb 14 16:15:02 2007 +0900

    [IA64] Cleanup in crash.c
    
    Grammatical fixes (s/freezed/frozen/)
    Make some variables static
    Change a C++ "//" comment to "/* ... */"
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 297632544a7a761144636accdb558db9d99a3647
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Feb 14 16:17:47 2007 +0900

    [IA64] kexec: declare ia64_mca_pal_base in mca.h rather than kexec.h
    
    * Kexec adds some code to arch/ia64/kernel/smp.c which needs ia64_mca_pal_base,
      so the kexec patch (actually the kdump patch) declares this
      per-cpu variable in include/asm-ia64/kexec.h.
    
    * ia64_mca_pal_base is defined in arch/ia64/kernel/mca.c, so it
      seems to me that it would make a lot more sense to declare it in
      include/asm-ia64/mca.h.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8621235b2ede3276e9862540f0188e40471a99f7
Author: Yanmin Zhang <yanmin_zhang@linux.intel.com>
Date:   Mon Feb 12 14:12:01 2007 +0800

    [IA64] pci_get_legacy_ide_irq should return irq (not GSI)
    
    Function pci_get_legacy_ide_irq is incorrect on ia64. It should return
    irq vector instead of GSI. The fixed number 14 and 15 are just GSI.
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 860abe8f7254208074cef83dc9ebc4d70ae277a9
Author: Horms <horms@verge.net.au>
Date:   Wed Feb 7 15:49:25 2007 +0900

    [IA64] whitespace fixes for include/asm-ia64/sal.h
    
    * Make use of spaces and tabs consistent
    * Make long line < 80col
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 396e8e76c5eda19184e7b14ba9f1dcd5c4ea8d7e
Author: Russ Anderson <rja@sgi.com>
Date:   Wed Dec 20 11:32:27 2006 -0600

    [IA64] Cache error recovery
    
    Similar to memory error recovery, when a cache error is consumed
    by a user process terminate the user instead of crashing the system.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Acked-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 618b206f0b580d965eb26f704ed23beee2a8c25d
Author: Russ Anderson <rja@sgi.com>
Date:   Thu Dec 14 16:01:41 2006 -0600

    [IA64] Proper handling of TLB errors from duplicate itr.d dropins
    
    Jack Steiner noticed that duplicate TLB DTC entries do not cause a
    linux panic.  See discussion:
    
    http://www.gelato.unsw.edu.au/archives/linux-ia64/0307/6108.html
    
    The current TLB recovery code is recovering from the duplicate itr.d
    dropins, masking the underlying problem.  This change modifies
    the MCA recovery code to look for the TLB check signature of the
    duplicate TLB entry and panic in that case.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 908e0a8a265fe8057604a9a30aec3f0be7bb5ebb
Author: Peter Zijlstra <a.p.zijlstra@chello.nl>
Date:   Wed Mar 7 20:41:30 2007 -0800

    [PATCH] ecryptfs: nested locking annotation
    
    ecryptfs uses a lock_parent() function, which I hope really locks the parents
    and is not abused
    
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Cc: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f70c81d4ddb0d300abc252cb594198d3c797a5e1
Author: Pat Gefre <pfg@sgi.com>
Date:   Wed Mar 7 20:41:29 2007 -0800

    [PATCH] 2.6 Altix: console fix for CONFIG_DEBUG_SHIRQ usage
    
    The sn console driver was snagged by the use of CONFIG_DEBUG_SHIRQ!
    
    The request_irq() immediate call to the interrupt handler caused
    another attempt to lock the port lock - deadlock.
    
    This is a patch to fix that.
    
    Signed-off-by: Patrick Gefre <pfg@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 44f5c4ced6ddee2f5f2e45fa45b93370245d85bd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Mar 7 20:41:26 2007 -0800

    [PATCH] uml: arch_prctl should set thread fs
    
    In my previous x86_64 thread fix, I forgot to initialize thread.arch.fs in
    arch_prctl.  A process calling arch_prctl to set %fs would lose it on the
    next context switch.
    
    It also turns out that you can switch to a process which is in the process
    of exiting and which has lost its mm.  In this case, it's worse than
    useless to try to call arch_prctl on the host process.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9bebff6ca5871e07b665cdaf71028ea21eb0bf0e
Author: Suzuki K P <suzuki@in.ibm.com>
Date:   Wed Mar 7 20:41:24 2007 -0800

    [PATCH] check_partition(): fix error check
    
    Fix inverted check introduced in 57881dd9df40b76dc7fc6a0d13fd75f337accb32 "Fix
    check_partition routines".
    
    Signed-off-by: Suzuki K P <suzuki@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f6dfb4fd7dd94429ef1d5233688aaed2a63f856b
Author: Davide Libenzi <davidel@xmailserver.org>
Date:   Wed Mar 7 20:41:21 2007 -0800

    [PATCH] Add epoll compat_ code to fs/compat.c
    
    IA64 and ARM-OABI are currently using their own version of epoll compat_
    code.
    
    An architecture needs epoll_event translation if alignof(u64) in 32 bit
    mode is different from alignof(u64) in 64 bit mode.  If an architecture
    needs epoll_event translation, it must define struct compat_epoll_event in
    asm/compat.h and set CONFIG_HAVE_COMPAT_EPOLL_EVENT and use
    compat_sys_epoll_ctl and compat_sys_epoll_wait.
    
    All 64 bit architecture should use compat_sys_epoll_pwait.
    
    [sfr: restructure and move to fs/compat.c, remove MIPS version
    of compat_sys_epoll_pwait, use __put_user_unaligned]
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b40df5743ee8aed8674edbbb77b8fd3c8c7a747f
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Wed Mar 7 20:41:18 2007 -0800

    [PATCH] bluetooth: fix socket locking in hci_sock_dev_event()
    
    [Bluetooth] Fix socket locking in hci_sock_dev_event()
    
    hci_sock_dev_event() uses bh_lock_sock() to lock the socket lock.
    This is not deadlock-safe against locking of the same socket lock in
    l2cap_connect_cfm() from softirq context. In addition to that,
    hci_sock_dev_event() doesn't seem to be called from softirq context,
    so it is safe to use lock_sock()/release_sock() instead.
    
    The lockdep warning can be triggered on my T42p simply by switching
    the Bluetooth off by the keyboard button.
    
      =================================
      [ INFO: inconsistent lock state ]
      2.6.21-rc2 #4
      ---------------------------------
      inconsistent {in-softirq-W} -> {softirq-on-W} usage.
      khubd/156 [HC0[0]:SC0[0]:HE1:SE1] takes:
       (slock-AF_BLUETOOTH){-+..}, at: [<e0ca5520>] hci_sock_dev_event+0xa8/0xc5 [bluetooth]
      {in-softirq-W} state was registered at:
        [<c012d1db>] mark_lock+0x59/0x414
        [<e0cef688>] l2cap_connect_cfm+0x4e/0x11f [l2cap]
        [<c012dfd7>] __lock_acquire+0x3e5/0xb99
        [<e0cef688>] l2cap_connect_cfm+0x4e/0x11f [l2cap]
        [<c012e7f2>] lock_acquire+0x67/0x81
        [<e0cef688>] l2cap_connect_cfm+0x4e/0x11f [l2cap]
        [<c036ee72>] _spin_lock+0x29/0x34
        [<e0cef688>] l2cap_connect_cfm+0x4e/0x11f [l2cap]
        [<e0cef688>] l2cap_connect_cfm+0x4e/0x11f [l2cap]
        [<e0ca17c3>] hci_send_cmd+0x126/0x14f [bluetooth]
        [<e0ca4ce4>] hci_event_packet+0x729/0xebd [bluetooth]
        [<e0ca205b>] hci_rx_task+0x2a/0x20f [bluetooth]
        [<e0ca209d>] hci_rx_task+0x6c/0x20f [bluetooth]
        [<c012d7be>] trace_hardirqs_on+0x10d/0x14e
        [<c011ac85>] tasklet_action+0x3d/0x68
        [<c011abba>] __do_softirq+0x41/0x92
        [<c011ac32>] do_softirq+0x27/0x3d
        [<c0105134>] do_IRQ+0x7b/0x8f
        [<c0103dec>] common_interrupt+0x24/0x34
        [<c0103df6>] common_interrupt+0x2e/0x34
        [<c0248e65>] acpi_processor_idle+0x1b3/0x34a
        [<c0248e68>] acpi_processor_idle+0x1b6/0x34a
        [<c010232b>] cpu_idle+0x39/0x4e
        [<c04bab0c>] start_kernel+0x372/0x37a
        [<c04ba42b>] unknown_bootoption+0x0/0x202
        [<ffffffff>] 0xffffffff
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 47c51dff4af25341c575e5089dbb92d61ac69cdf
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:17 2007 -0800

    [PATCH] x86_64: fix 2.6.18 regression - PTRACE_OLDSETOPTIONS should be accepted
    
    Also PTRACE_OLDSETOPTIONS should be accepted, as done by kernel/ptrace.c
    and forced by binary compatibility.  UML/32bit breaks because of this -
    since it is wise enough to use PTRACE_OLDSETOPTIONS to be binary compatible
    with 2.4 host kernels.
    
    Until 2.6.17 (commit f0f2d6536e3515b5b1b7ae97dc8f176860c8c2ce) we had:
    
           default:
                    return sys_ptrace(request, pid, addr, data);
    
    Instead here we have:
            case PTRACE_GET_THREAD_AREA:
    	case ...:
                    return sys_ptrace(request, pid, addr, data);
    
            default:
                    return -EINVAL;
    
    This change was a style change - when a case is added, it must be
    explicitly tested this way.  In this case, not enough testing was done.
    
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit de7b37cd01f145dd3a3ca333fd631e58ec0bdbab
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:14 2007 -0800

    [PATCH] um: fix errno usage
    
    Avoid reusing userspace errno twice - it can be cleared by libc code
    everywhere (in particular printk() does clear it in my setup).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0f97869df672f7f05ce3e8672ca42792d6df852b
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:13 2007 -0800

    [PATCH] uml: activate_fd: return ENOMEM only when appropriate
    
    Avoid returning ENOMEM in case of a duplicate IRQ - ENOMEM was saved into err
    earlier.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ec0ac8ad33189f81324948ee5dc72d3e1dc64682
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:12 2007 -0800

    [PATCH] um: fix confusion irq early reenabling
    
    Fix confusion about call context - comments and code are inconsistent and
    plain wrong, my fault.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b53378856f4ea43182d13658f7c2138971366148
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:11 2007 -0800

    [PATCH] um: mark both consoles as CON_ANYTIME
    
    Since both UML consoles do not use percpu variables, they may be called when
    the cpu is still offline, and they may be marked CON_ANYTIME (this is
    documented in kernel/printk.c, grep for CON_ANYTIME to find mentions of this).
    
    Works well in testing done with lock debug enabled, should be safe but is not
    needed for next release.
    
    This would probably help also stderr_console.c, but this is yet to test.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9ff1d36cf4b8b7dc4efbc83ac617a63020b1125d
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:10 2007 -0800

    [PATCH] um: remove dead code about os_usr1_signal() and os_usr1_process()
    
    os_usr1_signal() is totally unused, os_usr1_process() is used only by TT mode.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 83f4e8afc9a22eabb1c4cb771ffcb3af81734082
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:09 2007 -0800

    [PATCH] um: fix a memory leak in the multicast driver
    
    Memory allocated by mcast_user_init must be freed in the matching mcast_remove.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a6eb0be6d5cc1851deb6619e6f8b1bbd0a0dbab4
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:08 2007 -0800

    [PATCH] uml: hostfs: make hostfs= option work as a jail, as intended.
    
    When a given host directory is specified to be mounted both in hostfs=path1
    and with mount option -o path2, we should give access to path1/path2, but this
    does not happen.  Fix that in the simpler way.
    
    Also, root_ino can be the empty string, since we use %s/%s as format.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bca271136f06514253aa28c24c04fc23b88e971e
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Wed Mar 7 20:41:07 2007 -0800

    [PATCH] uml: hostfs: fix double free
    
    Fix double free in the error path - when name is assigned into root_inode we
    do not own it any more and we must not kfree() it - see patch for details.
    
    Thanks to William Stearns for the initial report.
    
    CC: William Stearns <wstearns@pobox.com>
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0ce3c83a9c22f59937b86c80b478dfbffe54dbab
Merge: eee8abe... 3ca5de6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 8 07:28:30 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/dtor/input
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/dtor/input:
      Input: i8042 - another attempt to fix AUX delivery checks

commit a45570ebf36c5408ce6cbfd3acd39edf1ada5cda
Merge: abc2358... 474844f...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Mar 8 13:34:59 2007 +0000

    Merge branch 'omap-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/tmlind/linux-omap-2.6

commit abc23585b9b625ad58db54ae0d180543db014eb8
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Mar 7 00:45:41 2007 +0100

    [ARM] 4251/1: Fix sharpsl_pm dependency
    
    The sharpsl_pm code depends on some symbols in the APM emulation code.
    Add the dependency for now until a better solution can be found.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2a391a184551d5ffdee73c740a06f6a0a16f7ed5
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Mar 7 00:29:33 2007 +0100

    [ARM] 4250/1: Fix locomo backlight conversion error/compile failure
    
    Fix locomo backlight conversion error and subsequent compile failure
    from commit 599a52d12629394236d785615808845823875868.
    
    Signed-off-by: RIchard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 774830377b79ae4c2e85dea78443b5ae01a97e69
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Mar 7 00:02:15 2007 +0100

    [ARM] 4249/1: Fix tosa compile failure
    
    Fix tosa compile failure from commit
    32f3f49910c7e228839c1cd144dbed8da342703b
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 25613cae00cb66d4cb080c72d53bca0a599e0112
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Mar 6 23:46:36 2007 +0100

    [ARM] 4248/1: lh7a40x: fix missing definitions for get_irqnr_preamble
    
    commit f80dff9da07d81da16e3b842118d47b9febf9c01 missed the needed
    definitions within the #elif blocks in
    include/asm-arm/arch-lh7a40x/entry-macro.S
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce2b5ec3535fd4cf47d9fceeb4bb118479941eaa
Author: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
Date:   Tue Mar 6 13:46:04 2007 +0100

    [ARM] 4247/1: Fix long name for cc9p9360dev
    
    The Product Manager of the cc9p insist on using the correct product names.
    
    Signed-off-by: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 74641d75275936796d239f828b80cb030e9f9b0a
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Thu Mar 8 12:20:12 2007 +0200

    [MTD] Correct partition failed erase address
    
    If an erase operation fails, the address at which the
    failure occurred is returned by the driver.  The MTD
    partition must adjust this address (by subtracting the
    partition offset) before returning to the caller.
    This was not happening, which caused JFFS2 to mark
    the wrong block bad!
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f8a922c7bb4d93bd84b7371a8e2571e667d2afb5
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Mar 8 10:28:30 2007 +0000

    [JFFS2] Use yield() between GC passes in background thread.
    
    The garbage collection thread is strictly an optimisation. Everything it
    does would also be done just-in-time in the context of something in
    userspace trying to access the file system.
    
    Sometimes, however, it's a pessimisation. Especially during early boot
    when it's checksumming nodes and scanning inodes which are shortly going
    to be pulled in by read_inode anyway. We end up building the rbtree of
    node coverage twice for the same inode.
    
    By switching to yield() instead of cond_resched() in the main loop, we
    observe boot times on the OLPC system going down from about 100 seconds to
    60.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 89e2bf61da9d7664293a57100a419f8116252607
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Wed Mar 7 18:33:25 2007 -0500

    [MTD] [NAND] Correct misspelled preprocessor variable.
    
    Replace the apparently misspelled preprocessor variable
    "MTD_NAND_DISKONCHIP_BBTWRITE" with the correct form
    "CONFIG_MTD_NAND_DISKONCHIP_BBTWRITE".
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 99109a6dacfc314a51371d9c3212a55cd7c0c98c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Mar 7 16:36:01 2007 +0000

    [MTD] [MAPS] dilnetpc: Fix printk warning
    
    The type of a resource could be 32 or 64bit depending upon platform or
    option so cast it explicitly.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 83d480917b1af3f8fcffa7a9c8775e0f2dd03395
Author: Vijay Sampath <vsampath@gmail.com>
Date:   Tue Mar 6 02:39:44 2007 -0800

    [MTD] [NOR] Fix oops in cfi_amdstd_sync
    
    The files cfi_cmdset_0002.c and cfi_cmdset_0020.c do not initialize their
    wait queues like is done in cfi_cmdset_0001.c.  This causes an oops when
    the wait queue is accessed.  I have copied the code from cfi_cmdset_0001.c
    that is pertinent to initialization of the wait queue.
    
    Signed-off-by: Vijay Sampath <vsampath@gmail.com>
    Acked-by: Joern Engel <joern@lazybastard.org>
    Acked-by: Josh Boyer <jwboyer@linux.vnet.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit dc164bbb4b5be9df4f249ab33576fa783c363b93
Author: Cyrill Gorcunov <gorcunov@gmail.com>
Date:   Tue Mar 6 02:39:45 2007 -0800

    [MTD] ESB2 check for closed ROM window
    
    Add checking for closed ROM window on Intel ESB2 Southbridge.
    
    Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 180bfb31fef77815d56b875d4f28d353fdc87bf8
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Tue Mar 6 17:01:04 2007 +0300

    [JFFS2] Fix writebuffer recovery in the first page of a block
    
    For the case when nand_write_page fail with -EIO for the first page in an
    eraseblock, jffs2_wbuf_recover ends up producing a BUG in jffs2_block_refile
    as jeb->first_node is not yet set up (it's set up later in jffs2_wbuf_recover).
    This BUG is not really a bug; it's just jffs2_wbuf_recover calling
    jffs2_block_refile with the wrong second parameter.
    This patch takes care of this situation.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1f92267c51a514f35ad5b0fd46cb099c0980b679
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Tue Mar 6 16:56:34 2007 +0300

    [MTD] [NAND] make oobavail public
    
    During the MTD rework the oobavail parameter of mtd_info structure has become
    private. This is not quite correct in terms of integrity and logic. If we have
    means to write to OOB area, then we'd like to know upfront how many bytes out
    of OOB are spare per page to be able to adapt to specific cases.
    The patch inlined adds the public oobavail parameter.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2f894ef9c8b36a35d80709bedca276d2fc691941
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Thu Mar 8 03:42:42 2007 -0500

    ACPI: fix boot hang w/o "noapic" on MSI MS-6390-L
    
    This is a workaround to handle a BIOS bug where the
    programmer exchanged the name and index fields of
    a _PRT entry.  Apparently this BIOS error does not
    confuse Windows and thus it lurks in the field
    on various machines.
    
    boot with "acpi=strict" to disable this workaround
    
    http://bugzilla.kernel.org/show_bug.cgi?id=6859
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 74586fca38109d2fc75daf678635928f64b4ccec
Author: Len Brown <len.brown@intel.com>
Date:   Thu Mar 8 02:48:30 2007 -0500

    ACPI: fix Thinkpad 600/600E/600X interrupts
    
    The root cause of this bug shows that this machine
    could not possibly run an ACPI-aware OS without a
    model specific workaround.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5966
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f194bda4ce7e71cc95535f494a4a5515cd91ed85
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Wed Mar 7 23:14:57 2007 -0600

    [POWERPC] 85xx: Enable CONFIG_SERIAL_8250_SHARE_IRQ
    
    On chip 8250 UARTs share an interrupts on existing 85xx processors.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 49fdf3f078f8f5d84ecd10d62624c9158e755ec7
Author: Segher Boessenkool <segher@kernel.crashing.org>
Date:   Thu Feb 22 23:52:02 2007 +0100

    [POWERPC] Select u-image as default image for Linkstation
    
    Fixes image build error:
    
    ln: accessing `arch/powerpc/boot/zImage': No such file or directory
    make[1]: *** [arch/powerpc/boot/zImage] Error 1
    make: *** [zImage] Error 2
    
    Signed-off-by: Segher Boessenkool <segher@kernel.crashing.org>
    Acked-by: G. Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit aea12b75480c0842028bd1bfe0146d9148db2298
Author: Li Yang <leoli@freescale.com>
Date:   Tue Mar 6 17:11:06 2007 +0800

    [POWERPC] 83xx: Minor fixes for 834x_mds USB setup code
    
    Fix broken node manipulating code, and clarify inaccurate comment.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 3ca5de6dd4ec5a139b2b8f00dce3e4726ca91af1
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Mar 7 23:20:55 2007 -0500

    Input: i8042 - another attempt to fix AUX delivery checks
    
    Do not assume that AUX_LOOP command is broken unless it
    completes successfully but returns wrong (unexpected) data.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7d9f3e85f45e8f636bdd7ce5f0b1704034380175
Author: Pavel Roskin <proski@gnu.org>
Date:   Mon Mar 5 19:28:00 2007 -0600

    [PATCH] bcm43xx: Fix assertion failures in interrupt handler
    
    In the bcm43xx interrupt handler, sanity checks are wrongly done before the
    verification that the interrupt is for the bcm43xx.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d632f9fa38203ad5bac31e46921812216693b14f
Author: Joerg Sommer <joerg@alea.gnuu.de>
Date:   Fri Mar 2 12:32:06 2007 -0600

    [PATCH] bcm43xx: Fix bug in frequency to channel conversion
    
    The frequency to channel routine in bcm43xx requires that the frequency
    be in MHz, but that condition is not always met. This patch does the
    necessary conversion.
    
    Signed-off-by: Joerg Sommer <joerg@alea.gnuu.de>
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 01a597769c7ef4db979c6a23aa97e5d2e53cbc46
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Wed Feb 28 14:54:39 2007 -0600

    [PATCH] bcm43xx: Fix errors in specs to code translation in B6PHY init
    
    There are three errors in the transcription of the latest revision to the
    B6PHY init specifications.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit eee8abe5de9cbd936b51db292c8d3c406b0e79e7
Merge: 06aa5b4... de79059...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 7 19:05:34 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [BRIDGE]: adding new device to bridge should enable if up
      [IPV6]: Do not set IF_READY if device is down
      [IPSEC]: xfrm audit hook misplaced in pfkey_delete and xfrm_del_sa
      [IPSEC]: Add xfrm policy change auditing to pfkey_spdget
      [IPSEC]: xfrm_policy delete security check misplaced
      [CONNECTOR]: Bugfix for cn_call_callback()
      [DCCP]: Revert patch which disables bidirectional mode
      [IPV6]: Handle np->opt being NULL in ipv6_getsockopt_sticky().
      [UDP]: Reread uh pointer after pskb_trim
      [NETFILTER]: nfnetlink_log: fix crash on bridged packet
      [NETFILTER]: nfnetlink_log: zero-terminate prefix
      [NETFILTER]: nf_conntrack_ipv6: fix incorrect classification of IPv6 fragments as ESTABLISHED

commit 06aa5b4aae223ea4d623dc68e85466174bb92c84
Merge: c91a325... b2e569d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 7 19:04:21 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] ARC: Fix several compiler warnings.
      [MIPS] ISA: Fix typo
      [CHAR] ds1286: Fix handling of seconds in RTC_ALM_SET ioctl.

commit c91a32503d9ff8079cc45fa743d428fd705042dd
Merge: 4559214... 3bc207d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 7 19:03:51 2007 -0800

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] fsys_getcpu for IA64
      [IA64] remove duplicate declaration of efi_initialize_iomem_resources
      [IA64] Pick highest possible saved_max_pfn for crash_dump
      [IA64] fix NULL pointer in ia64/irq_chip-mask/unmask function

commit b2e569d876e153365b01525a102b7d90bb309446
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 8 00:47:11 2007 +0000

    [MIPS] ARC: Fix several compiler warnings.
    
      CC      arch/mips/arc/init.o
    arch/mips/arc/init.c: In function 'prom_init':
    arch/mips/arc/init.c:27: warning: ISO C90 forbids mixed declarations and code
    arch/mips/arc/init.c:35: warning: format %08lx expects type long unsigned int, but argument 2 has type 'ULONG'
    arch/mips/arc/init.c:28: warning: unused variable 'c'
    arch/mips/arc/init.c:27: warning: unused variable cnt
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 012390517e3e6734d381ff81c4a7e9817636e2f1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 8 00:45:26 2007 +0000

    [MIPS] ISA: Fix typo
    
    Lost CONFIG_ prefix discovered by Robert P. J. Day <rpjday@mindspring.com>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b35692ebdef0c1cd4a05a58559a94ced54ff9c82
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 8 00:14:25 2007 +0000

    [CHAR] ds1286: Fix handling of seconds in RTC_ALM_SET ioctl.
    
     o Fix use of uninitialized variable sec.
     o Make the RTC_ALM_SET ioctl return -EINVAL for non-zero seconds - the
       DS1286 has no second field for the alarm time.
     o Replace the obscure BIN_TO_BCD macro with BIN2BCD.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3bc207d2b72ea0e6927cccc653c2dc8be593f89f
Author: Fenghua Yu <fenghua.yu@intel.com>
Date:   Mon Feb 12 16:27:10 2007 -0800

    [IA64] fsys_getcpu for IA64
    
    On 1.6GHz Montectio Tiger4, the following performance data is measured with
    kernel built with defconfig which has NUMA configured:
    
    Fastest sys_getcpu: 502 itc counts.
    Fastest fsys_getcpu: 28 itc counts.
    
    fsys_getcpu performance is largly impacted by whether data (node_to_cpu_map
    etc) is in cache. It can take fsys_getcpu up to ~150 itc counts in cold
    cache case.
    
    Signed-off-by: Fenghua Yu <fenghua.yu@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ddbad076303dfc0ed4fcba53907dc175bb6d67b2
Author: Horms <horms@verge.net.au>
Date:   Tue Mar 6 16:20:10 2007 +0900

    [IA64] remove duplicate declaration of efi_initialize_iomem_resources
    
    efi_initialize_iomem_resources() is declared in both include/linux/efi.h
    and arch/ia64/kernel/setup.c. This patch removes the latter.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e55fdf11f3029bcd41b1b9547ad9db12c27eea76
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Mar 7 16:13:25 2007 -0800

    [IA64] Pick highest possible saved_max_pfn for crash_dump
    
    Berhhard Walle noted that on his HP rx8640 he ended up with saved_max_pfn
    smaller than the highest address of system ram in /proc/iomem and proposed
    a patch to base the address on the unrounded and unfiltered EFI memory
    map address.  Simon Horman and Magnus Damm suggested that the whole test
    be moved earlier in the function.  This is the combination of both of
    these patches.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit de79059ecd7cd650f3788ece978a64586921d1f1
Author: Aji Srinivas <Aji_Srinivas@emc.com>
Date:   Wed Mar 7 16:10:53 2007 -0800

    [BRIDGE]: adding new device to bridge should enable if up
    
    One change introduced by the workqueue removal patch is that adding an
    interface that is up to a bridge which is also up does not ever call
    br_stp_enable_port(), leaving the port in DISABLED state until we do
    ifconfig down and up or link events occur.
    
    The following patch to the br_add_if function fixes it.
    This is a regression introduced in 2.6.21.
    
    Submitted-by: Aji_Srinivas@emc.com
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7ababbdc647e67e953d153ddf62cbdc9fe3297e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Mar 7 16:02:40 2007 -0800

    [IPV6]: Do not set IF_READY if device is down
    
    Now that we add the IPv6 device at registration time we don't need
    to set IF_READY in ipv6_add_dev anymore because we will always get
    a NETDEV_UP event later on should the device ever become ready.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 16bec31db751030171b31d7767fa3a5bdbe980ea
Author: Eric Paris <eparis@redhat.com>
Date:   Wed Mar 7 16:02:16 2007 -0800

    [IPSEC]: xfrm audit hook misplaced in pfkey_delete and xfrm_del_sa
    
    Inside pfkey_delete and xfrm_del_sa the audit hooks were not called if
    there was any permission/security failures in attempting to do the del
    operation (such as permission denied from security_xfrm_state_delete).
    This patch moves the audit hook to the exit path such that all failures
    (and successes) will actually get audited.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Acked-by: Venkat Yekkirala <vyekkirala@trustedcs.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 215a2dd3b43e0dc425e81d21de9d961416b1dad4
Author: Eric Paris <eparis@redhat.com>
Date:   Wed Mar 7 16:01:45 2007 -0800

    [IPSEC]: Add xfrm policy change auditing to pfkey_spdget
    
    pfkey_spdget neither had an LSM security hook nor auditing for the
    removal of xfrm_policy structs.  The security hook was added when it was
    moved into xfrm_policy_byid instead of the callers to that function by
    my earlier patch and this patch adds the auditing hooks as well.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Acked-by: Venkat Yekkirala <vyekkirala@trustedcs.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef41aaa0b755f479012341ac11db9ca5b8928d98
Author: Eric Paris <eparis@redhat.com>
Date:   Wed Mar 7 15:37:58 2007 -0800

    [IPSEC]: xfrm_policy delete security check misplaced
    
    The security hooks to check permissions to remove an xfrm_policy were
    actually done after the policy was removed.  Since the unlinking and
    deletion are done in xfrm_policy_by* functions this moves the hooks
    inside those 2 functions.  There we have all the information needed to
    do the security check and it can be done before the deletion.  Since
    auditing requires the result of that security check err has to be passed
    back and forth from the xfrm_policy_by* functions.
    
    This patch also fixes a bug where a deletion that failed the security
    check could cause improper accounting on the xfrm_policy
    (xfrm_get_policy didn't have a put on the exit path for the hold taken
    by xfrm_policy_by*)
    
    It also fixes the return code when no policy is found in
    xfrm_add_pol_expire.  In old code (at least back in the 2.6.18 days) err
    wasn't used before the return when no policy is found and so the
    initialization would cause err to be ENOENT.  But since err has since
    been used above when we don't get a policy back from the xfrm_policy_by*
    function we would always return 0 instead of the intended ENOENT.  Also
    fixed some white space damage in the same area.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Acked-by: Venkat Yekkirala <vyekkirala@trustedcs.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 05e52dd7396514648fba6c275eb7b49eca333c6d
Author: Philipp Reisner <philipp.reisner@linbit.com>
Date:   Wed Mar 7 12:55:39 2007 -0800

    [CONNECTOR]: Bugfix for cn_call_callback()
    
    When system under heavy stress and must allocate new work
    instead of reusing old one, new work must use correct
    completion callback.
    
    Patch is based on Philipp's and Lars' work.
    I only cleaned small stuff (and removed spaces instead of tabs).
    
    Signed-off-by: Philipp Reisner <philipp.reisner@linbit.com>
    Signed-off-by: Lars Ellenberg <lars.ellenberg@linbit.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 151a99317ee9efcfd3e642da62e1edf4f47fcb3e
Author: Gerrit Renker <gerrit@erg.abdn.ac.uk>
Date:   Wed Mar 7 12:53:48 2007 -0800

    [DCCP]: Revert patch which disables bidirectional mode
    
    This reverts an earlier patch which disabled bidirectional mode, meaning that
    a listening (passive) socket was not allowed to write to the other (active)
    end of the connection.
    
    This mode had been disabled when there were problems with CCID3, but it
    imposes a constraint on socket programming and thus hinders deployment.
    
    A change is included to ignore RX feedback received by the TX CCID3 module.
    
    Many thanks to Andre Noll for pointing out this issue.
    
    Signed-off-by: Gerrit Renker <gerrit@erg.abdn.ac.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 286930797d74b2c9a5beae84836044f6a836235f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Mar 7 12:50:46 2007 -0800

    [IPV6]: Handle np->opt being NULL in ipv6_getsockopt_sticky().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d644329bc9f10213a282387dfe4984ff891dd768
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Mar 6 20:26:48 2007 -0800

    [UDP]: Reread uh pointer after pskb_trim
    
    The header may have moved when trimming.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ba5dcee128d9f2877a6d2a5b150c24d90d77dad1
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Mar 6 20:24:53 2007 -0800

    [NETFILTER]: nfnetlink_log: fix crash on bridged packet
    
    physoutdev is only set on purely bridged packet, when nfnetlink_log is used
    in the OUTPUT/FORWARD/POSTROUTING hooks on packets forwarded from or to a
    bridge it crashes when trying to dereference skb->nf_bridge->physoutdev.
    
    Reported by Holger Eitzenberger <heitzenberger@astaro.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 881dbfe8accc9434dd0d7d052505e3dca6ad9b3c
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Mar 6 20:24:35 2007 -0800

    [NETFILTER]: nfnetlink_log: zero-terminate prefix
    
    Userspace expects a zero-terminated string, so include the trailing
    zero in the netlink message.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd63006b8fb5abf2336e145632610c6175a28fea
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Mar 6 20:24:18 2007 -0800

    [NETFILTER]: nf_conntrack_ipv6: fix incorrect classification of IPv6 fragments as ESTABLISHED
    
    The individual fragments of a packet reassembled by conntrack have the
    conntrack reference from the reassembled packet attached, but nfctinfo
    is not copied. This leaves it initialized to 0, which unfortunately is
    the value of IP_CT_ESTABLISHED.
    
    The result is that all IPv6 fragments are tracked as ESTABLISHED,
    allowing them to bypass a usual ruleset which accepts ESTABLISHED
    packets early.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e253eb0c082e71082cc980a0c81582c2bc734605
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Wed Mar 7 14:57:35 2007 -0800

    [IA64] fix NULL pointer in ia64/irq_chip-mask/unmask function
    
    This patch fixes boot failure because irq_desc->mask() is NULL.
    
    - Added mask/unmask functions to ia64's irq desc function table.
    - rename hw_interrupt_type to irq_chip. hw_interrupt_type is old name.
    - Tony: Added same change to arch/ia64/sn/kernel/irq.c as pointed out
      by Eric Biederman ... mask/unmask functions there can be no-op.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 455921451a176d90c5cfef898f061bb6fc83faaf
Merge: 0782588... a9e28d9...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 7 11:27:53 2007 -0800

    Merge branch 'for-linus' of git://www.atmel.no/~hskinnemoen/linux/kernel/avr32
    
    * 'for-linus' of git://www.atmel.no/~hskinnemoen/linux/kernel/avr32:
      avr32: dma-mapping.h
      [AVR32] Don't use kmap() in flush_icache_page()
      [AVR32] Fix bogus ti->flags manipulation in debug handler
      [AVR32] Fix typo in include/asm-avr32/Kbuild
      [AVR32] show_trace: Only walk valid stack addresses
      [AVR32] at32_spi_setup_slaves should be __init

commit 0782588b63d0a4307fd277b35c449a17bc59ccc0
Merge: d694c16... c3f49bc...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 7 10:09:12 2007 -0800

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/steve/gfs2-2.6-fixes
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/steve/gfs2-2.6-fixes:
      [GFS2] Fix bz 229873, alternate test: assertion "!ip->i_inode.i_mapping->nrpages" failed
      [GFS2] build fix
      [GFS2] go_drop_bh is never used, so remove it
      [GFS2] Remove unused variable
      [GFS2] Fix bz 229831, lookup returns wrong inode
      [GFS2] Fix bz 230143, incorrect flushing of rgrps
      [GFS2] pass formal ino in do_filldir_main
      [DLM] fs/dlm/user.c should #include "user.h"
      [GFS2] fix hangup when multiple processes are trying to write to the same file
      [GFS2] NFS filehandle check
      [GFS2] add newline to printk message
      [GFS2] fix locking mistake

commit c3f49bc209b28d2b5f82b78baaa827eb3a4d1891
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Wed Mar 7 09:06:48 2007 +0000

    [GFS2] Fix bz 229873, alternate test: assertion "!ip->i_inode.i_mapping->nrpages" failed
    
    The following removes an incorrect assertion from the GFS2 glops code. This
    fixes Red Hat bz 229873. Thanks to Abhijith Das for testing the patch
    and confirming the fix.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
    Cc: Abhijith Das <adas@redhat.com>

commit 95d97b7dd7d7a7a13d11a38b3ecb64849d2e5086
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Mar 5 23:10:39 2007 -0800

    [GFS2] build fix
    
    fs/gfs2/glock.c:2198: error: 'THIS_MODULE' undeclared here (not in a function)
    
    Cc: Steven Whitehouse <swhiteho@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 631c42e170564108423fa4073531db159f2523ea
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Mar 1 10:36:32 2007 +0000

    [GFS2] go_drop_bh is never used, so remove it
    
    The ->go_drop_bh function is never used, so this removes it and the single
    caller,
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 04b159b132c0d8e92dae8c72f134fd5b13b43deb
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Mar 1 11:14:44 2007 +0000

    [GFS2] Remove unused variable
    
    Remove an unused variable.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 1be3867955731b5cb2dc14060cc46f0882e87873
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Mar 1 10:00:53 2007 +0000

    [GFS2] Fix bz 229831, lookup returns wrong inode
    
    The following patch fixes Red Hat bz 229831. Without this patch its
    possible for the wrong inode to be returned in certain cases. It is a
    pretty unusual event, so that its taken some time to track down. Thanks
    and due to Josef Whiter who did a lot of the testing required to thrack
    this down and fix it.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit cad5b9392754910ee7dbe551eb004010a864c882
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Wed Feb 28 14:03:00 2007 +0000

    [GFS2] Fix bz 230143, incorrect flushing of rgrps
    
    The below patch fixes a problem where we were not flushing rgrps
    correctly. It only occurred in the specific case that a callback was
    received for an rgrp which was dirty and when a journal log flush had
    not already resulted in the rgrp being flushed anyway. This fixes Red
    Hat bz 230143,
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit fb0d3bce8e88cca4abb26076f778f64edcaf19aa
Author: Wendy Cheng <wcheng@redhat.com>
Date:   Wed Feb 28 11:24:25 2007 -0500

    [GFS2] pass formal ino in do_filldir_main
    
    ok, the following is the minimum changes to get NFSD going before we
    settle down this issue .. would appreciate this in the tree so other NFS
    related works can get done in parallel.
    
    Signed-off-by: S. Wendy Cheng <wcheng@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 84c6e8cd359adc34d21e40efcafe09297510b3c8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 26 00:18:42 2007 +0100

    [DLM] fs/dlm/user.c should #include "user.h"
    
    Every file should include the headers containing the prototypes for
    it's global functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit a13cbe375303585fec1425135ed54adb62be41fc
Author: Josef Whiter <jwhiter@redhat.com>
Date:   Fri Feb 23 12:49:51 2007 -0500

    [GFS2] fix hangup when multiple processes are trying to write to the same file
    
    This fixes a problem I encountered while running bonnie++.  When you have one
    thread that opens a file and starts to write to it, and then another thread that
    tries to open and write to the same file, the second thread will loop forever
    trying to grab the inode lock for that inode.  Basically we come in through
    generic_buffered_file_write, which calls gfs2_prepare_write, which then attempts
    to grab the glock.  Because we don't own the lock, gfs2_prepare_write gets
    GLR_TRYFAILED, which returns AOP_TRUNCATED_PAGE to generic_buffered_file_write.
    At this point generic_buffered_file_write loops around again and immediately
    retries the prepare_write.  This means that the second process never gets off of
    the processor in order to allow the process that holds the lock to finish its
    work and let go of the lock.  This patch makes gfs2_glock_nq schedule() if it
    gets back a GLR_TRYFAILED, which resolves this problem.
    
    Signed-off-by: Josef Whiter <jwhiter@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit a7d2b2bdc9a0b55d5b08e15756c7e65c48c4bca5
Author: Wendy Cheng <wcheng@redhat.com>
Date:   Fri Feb 23 00:21:17 2007 -0500

    [GFS2] NFS filehandle check
    
    File handle checking error found in '07 NFS connectathon. The fh_type
    and fh_len are not necessarily identical. Some of the client machines
    could fail mount with stale filehandle without this patch.
    
    Signed-off-by: S. Wendy Cheng <wcheng@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit d5a6751b32c79680da90eaa76919ffe6e5b8a94f
Author: Richard Fearn <richardfearn@gmail.com>
Date:   Sat Feb 17 17:29:15 2007 +0000

    [GFS2] add newline to printk message
    
    Patch for the 2.6.20 stable tree that adds a missing newline to one of
    the printk messages in fs/gfs2/ops_fstype.c.
    
    Signed-off-by: Richard Fearn <richardfearn@gmail.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 2e95b6653bb69c893e6ee1b42b537939c1ea2b9c
Author: Josef Whiter <jwhiter@redhat.com>
Date:   Tue Feb 20 00:03:29 2007 -0500

    [GFS2] fix locking mistake
    
    This patch fixes a locking mistake in the quota code, we do a mutex_lock instead
    of a mutex_unlock.
    
    Signed-off-by: Josef Whiter <jwhiter@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit d694c16bc332c7e706f44e3d10bea06228166a6f
Merge: d04f41e... ccd45ad...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Mar 7 10:08:33 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6:
      sh: Kill off I/O cruft for R7780RP.
      sh: Revert lazy dcache writeback changes.
      sh: Enable SM501 support for RTS7751R2D.
      sh: Use L1_CACHE_BYTES for .data.cacheline_aligned.
      sysctl: Support vdso_enabled sysctl on SH.
      sh: Fix kernel thread stack corruption with preempt.
      doc: Add SH to vdso and earlyprintk in kernel-parameters.txt
      sh: Fix sigmask trampling in signal delivery.
      sh: Clear UBC when not in use.

commit d04f41e35343f1d788551fd3f753f51794f4afcf
Author: Ingo Molnar <mingo@elte.hu>
Date:   Wed Mar 7 18:12:31 2007 +0100

    [PATCH] CPU hotplug: call check_tsc_sync_source() with irqs off
    
    check_tsc_sync_source() depends on being called with irqs disabled (it
    checks whether the TSC is coherent across two specific CPUs). This is
    incidentally true during bootup, but not during cpu hotplug __cpu_up().
    This got found via smp_processor_id() debugging.
    
    disable irqs explicitly and remove the unconditional enabling of
    interrupts. Add touch_nmi_watchdog() to the cpu_online_map busy loop.
    
    this bug is present both on i386 and on x86_64.
    
    Reported-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b5d99e64bc6ec1eef03ed5ffe99088b28f5ad4a4
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 7 11:27:55 2007 +0100

    [POWERPC] Fix warning in powermac pci.c
    
    This fixes a warning due to unused result from pci_enable_device() in
    powermac pci.c
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e71c5c38ed578b4fff3139cc5c76fb5d0544f80c
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 7 11:27:45 2007 +0100

    [POWERPC] Fix warning in powermac feature.c
    
    This fixes a warning due to unused return from pci_enable_device() in
    powermac feature.c core99_ata100_enable() function.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 84532c91206bc6748991fb1ae3ba8a1894d339fa
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Mar 7 11:27:37 2007 +0100

    [POWERPC] Fix warning in prom_parse.c of_irq_map_oldworld()
    
    This function spews a warning due to possible use of an uninitialized
    variable. This can happen on broken device-trees or when called with
    a NULL argument. Makes ure we properly fail instead.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8388374f1cd45ef67039d3ea128d250fac484df3
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Mar 2 16:59:25 2007 +0900

    [POWERPC] Celleb: bug fix caused by not casting pointer types
    
    This fixes a bug caused by changes of pointer type in
    commit f1fda89522c5aaa1bd4ef69605e85e6ee9c85faf.
    
    hose->cfg_addr type is "volatile unsigned int __iomem *", so
    "hose->cfg_addr + X" will not make an intended address.
    
    This patch also adds comments for usage of cfg_addr and cfg_data in
    pci_controller structure.  We use them in irregular way, and the
    original code is short of explanations about them.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c99176a230097b076c2f98e4bf963399fe114ffd
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Mon Feb 26 18:14:06 2007 +0900

    [POWERPC] Add missing newline in xmon help output
    
    My patch to add spu disassembly (af89fb8041562508895c8f3ba04790d7c2f4338c)
    removed a newline from the xmon help that it shouldn't have, put it back.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3546e811f13673f2364c15d966a178e8b670cbce
Author: Olof Johansson <olof@lixom.net>
Date:   Mon Feb 26 00:35:14 2007 -0600

    [POWERPC] No DEEPNAP on 970MP 1.0
    
    970MP rev 1.0 is reported to have nonworking DEEPNAP support, we've had
    bug reports of lockups on those machines. Appearantly Apple used them
    on some dual-core dual-cpu systems. Rev 1.1 is OK, and that's the one
    that all 4-way systems seem to use.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a9e28d9b0b269a68a19e4ff0f6b9473f86b01358
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Fri Mar 2 16:57:46 2007 -0800

    avr32: dma-mapping.h
    
    Added dma_sync_single_range_for_cpu/device to dma-mapping.h in asm-avr32 to
    call dma_sync_single_for_cpu/device.  This patch enables b44 to compile on
    systems with these cpus.  This patch was created with the assumption that
    another method of dma_sync_single_range_for_cpu/device does not exist on these
    architectures.
    
    Signed-off by: Gary Zambrano <zambrano@broadcom.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 28c1d39db83357bad55e3482fe09386429728ded
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Thu Mar 1 16:32:31 2007 +0100

    [AVR32] Don't use kmap() in flush_icache_page()
    
    flush_icache_page() can be called from atomic context, so we can't
    use kmap(). Use page_address() instead.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit a19b4a14053f24e2df93b6bcc72ed1086cce0de4
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Thu Mar 1 10:37:35 2007 +0100

    [AVR32] Fix bogus ti->flags manipulation in debug handler
    
    We should OR in a bitmask, not a bit offset, into ti->flags. This
    might fix some strange behaviour when single stepping.
    
    Also, use set_ti_thread_flag() to manipulate the flags to avoid
    surprises in the future.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit bfa4f55cc8d17e3944a4b5d08e2cce7d5a55a2d6
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Thu Feb 22 18:58:18 2007 +0100

    [AVR32] Fix typo in include/asm-avr32/Kbuild
    
    It's header-y, not headers-y.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 3338368e922a6686a3b3d6f4da07babd224788d4
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Wed Feb 21 13:08:06 2007 +0100

    [AVR32] show_trace: Only walk valid stack addresses
    
    Terminate the frame pointer walk if (a) the address is outside the
    task's kernel stack or (b) if the frame pointer isn't monotonically
    increasing. Without this fix, show_trace() may enter an infinite
    loop, walking through random data anywhere in memory.
    
    Since any address within the kernel stack is guaranteed to be valid,
    we may eliminate the __get_user() calls as well.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 9a596a6236e1b4d6c2e6105bd85eac19c9f4ec4c
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Mon Feb 19 10:38:04 2007 +0100

    [AVR32] at32_spi_setup_slaves should be __init
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 474844f7083b2381db9b3523dc6de9108fc4c732
Author: Richard Woodruff <r-woodruff2@ti.com>
Date:   Fri Jan 26 12:08:51 2007 -0800

    ARM: OMAP: Fix OMAP2 dss2 so clk_set_parent works
    
    This adds the delayed application attribute to the dss2 clock.  DSS2
    can't select the 48MHz APLL with properly with out validating the
    configuration as trigged by this flag.
    
    Signed-off-by: Richard Woodruff <r-woodruff2@ti.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit e6da2aa74ac878ebc5b49c42a0ee94a69884b9af
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Thu Jan 25 16:28:50 2007 -0800

    ARM: OMAP: Fix missing workqueue include in board-h2.c
    
    ARM: OMAP: Fix missing #include <linux/workqueue.h> in
    board-h2.c resulting in
    
    In file included from arch/arm/mach-omap1/board-h2.c:40:
    include/asm/arch/irda.h:27: error: field 'gpio_expa' has
    incomplete type
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 766314867ba908133b8e1338bb2cc39577df3611
Author: Tony Lindgren <tony@atomide.com>
Date:   Tue Dec 12 23:02:43 2006 -0800

    ARM: OMAP: Include missing header
    
    Include missing header for do_div()
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ff24ba74b6d3befbfbafa142582211b5a6095d45
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Wed Mar 7 03:50:11 2007 -0500

    ACPI: ThinkPad Z60m: usb mouse stops working after suspend to RAM
    
    (http://www.mail-archive.com/linux-acpi@vger.kernel.org/msg05270.html):
    
    References : http://lkml.org/lkml/2007/2/21/413
                 http://lkml.org/lkml/2007/2/28/172
    Submitter  : Arkadiusz Miskiewicz <arekm@maven.pl>
    Caused-By  : Konstantin Karasyov <konstantin.a.karasyov@intel.com>
                 commit 0a6139027f3986162233adc17285151e78b39cac
    
    Do not disable power resources on resume even if there are no devices referencing it.
    
    Signed-off-by: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 03d926f82800f32642b32ba547c7a002a371a78f
Author: Bernhard Walle <bwalle@suse.de>
Date:   Tue Mar 6 02:29:44 2007 -0800

    ACPI: Add kernel-parameters hint that acpi=off doesn't work on IA64.
    
    Signed-off-by: Bernhard Walle <bwalle@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8607c673bdd593d4ce439a36412a213a8efb282b
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Mar 6 02:29:42 2007 -0800

    sony-laptop: fix uninitialised variable
    
    drivers/misc/sony-laptop.c: In function 'sony_acpi_add':
    drivers/misc/sony-laptop.c:456: warning: 'result' may be used uninitialized in this function
    
    The compiler seems to actually be telling the truth this time.
    
    Cc: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 610a3d069665ba2b27e42c90129ce640c4d6e515
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Wed Mar 7 00:57:30 2007 -0500

    ACPICA: Fix ACPI Global Lock re-entrancy
    
    patch "Delete recursive feature of ACPI Global Lock"
    broke re-entrancy of the Global Lock.
    The common routine to acquire GL is acpi_ev_acquire_global_lock,
    so check for re-entrancy _must_ be there, and not anywhere else.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=8066#c9
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 08e15e81a40e3241ce93b4a43886f3abda184aa6
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 20:41:20 2007 -0800

    Linux 2.6.21-rc3
    
    .. hopefully most of the resume/suspend problems introduced by the timer
    and other changes are behind us.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2f774456e4b9bc3d4fb3522b2482c7acfa2df197
Merge: 5b3c118... 78ad0b8...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 19:57:46 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Fix floppy build failure.

commit 5b3c1184e78dd7d74eced83b25af88cf1d13e686
Merge: fe1b4ba... 99c72ce...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 19:53:34 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [DCCP]: Set RTO for newly created child socket
      [DCCP]: Correctly split CCID half connections
      [NET]: Fix compat_sock_common_getsockopt typo.
      [NET]: Revert incorrect accept queue backlog changes.
      [INET]: twcal_jiffie should be unsigned long, not int
      [GIANFAR]: Fix compile error in latest git
      [PPPOE]: Use ifindex instead of device pointer in key lookups.
      [NETFILTER]: ip6_route_me_harder should take into account mark
      [NETFILTER]: nfnetlink_log: fix reference counting
      [NETFILTER]: nfnetlink_log: fix module reference counting
      [NETFILTER]: nfnetlink_log: fix possible NULL pointer dereference
      [NETFILTER]: nfnetlink_log: fix NULL pointer dereference
      [NETFILTER]: nfnetlink_log: fix use after free
      [NETFILTER]: nfnetlink_log: fix reference leak
      [NETFILTER]: tcp conntrack: accept SYN|URG as valid
      [NETFILTER]: nf_conntrack/nf_nat: fix incorrect config ifdefs
      [NETFILTER]: conntrack: fix {nf,ip}_ct_iterate_cleanup endless loops

commit fe1b4ba400193176213f95be3ea711a53518a609
Merge: ae5dd8e... 2470b64...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 19:52:50 2007 -0800

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] cio: Call cancel_halt_clear even when actl == 0.
      [S390] cio: Use path verification to check for path state.
      [S390] cio: Fix locking when calling notify function.
      [S390] Fixed handling of access register mode faults.
      [S390] dasd: Use default recovery for SNSS requests
      [S390] check_bugs() should be inline.
      [S390] tape: Compression overwrites crypto setting
      [S390] nss: disable kexec.
      [S390] reipl: move dump_prefix_page out of text section.
      [S390] smp: disable preemption in smp_call_function/smp_call_function_on
      [S390] kprobes breaks BUG_ON

commit ae5dd8e346efc25a5f9cc9d01bc0915c40eb38d9
Merge: 38f3323... 63ed710...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 19:44:13 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      pata_pdc202xx_old: fix data corruption and other problems
      pata_legacy: fix io/irq mismatch
      ahci: RAID mode SATA patch for Intel ICH9M

commit 38f3323037de22bb0089d08be27be01196e7148b
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 19:38:01 2007 -0800

    Revert "[PATCH] LOG2: Alter get_order() so that it can make use of ilog2() on a constant"
    
    This reverts commit 39d61db0edb34d60b83c5e0d62d0e906578cc707.
    
    The commit was buggy in multiple ways:
     - the conversion to ilog2() was incorrect to begin with
     - it tested the wrong #defines, so on all architectures but FRV you'd
       never see the bug except for constant arguments.
     - the new "get_order()" macro used its arguments multiple times, and
       didn't even parenthesize them properly
     - despite the comments, it was not true that you could use it for
       constant initializers, since not all architectures even use the
       generic page.h header file.
    
    All of the problems are individually fixable, but it all boils down to:
    better just revert it, and re-do it from scratch.
    
    Cc: David Howells <dhowells@redhat.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5d6deb940f880140fbcf5ec42e92534e78785e99
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: remove local_bh_count
    
    Remove un-used/un-referenced local_bh_count.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ed35e0d8afd7cd57f5b592e56f2af6794bab5c5
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: use irq_handler_t and rtc_time in prototypes
    
    Use irq_handler_t for passing clock handler routine around.
    And use new rtc_time in place of hwclock_time.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8bb25184b3bed4930f65a138faf1905ca96054af
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: GPIO line defines for the ColdFire 5282
    
    For the Freescale M5282 ColdFire,
    Port UA Pin Assignment Register should set to UART mode.
    Patch submitted by David Wu <davidwu@arcturusnetworks.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 28580df03e18c33dd29af83c23c1d52f3df320f1
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: fix work queues in mcfserial.c driver
    
    Fix work queue code to support new model.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ebfcfef44e4a759dd08a4b5e28848787b5530c0c
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: set GPIO lines for serial ports on 5282 in mcfserial.c
    
    For the Freescale M5282 ColdFire,
    Port UA Pin Assignment Register should set to UART mode.
    Patch submitted by David Wu <davidwu@arcturusnetworks.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8668fb5d8d1bbae1492baf4b8d72b5151a5c4d40
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: use irq_handler_t and remove regs arg for 68328
    
    Remove regs arg from bad interrupt handler.
    Use irq_handler_t type for handler arg of local request_irq().
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ea9acc7823587266a26293a3b74deafc6637427
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: use irq_handler_t for passing handler types in 68328 setup
    
    Use irq_handler_t type for passing around timer interrupt routine
    in 368360 setup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b032fde9097605f9f1099eeca28f3b5b09e55ec0
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Mar 7 11:28:13 2007 +1000

    [PATCH] m68knommu: use irq_handler_t for passing handler types in 68360 setup
    
    Use irq_handler_t type for passing around timer interrupt routine.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ba73b99c34c31ea18b44dcf161c6e1f2838e0fa
Merge: 185d84b... cee87af...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 18:05:10 2007 -0800

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] kexec: Use EFI_LOADER_DATA for ELF core header
      [IA64] permon use-after-free fix
      [IA64] sync compat getdents
      [IA64] always build arch/ia64/lib/xor.o
      [IA64] Remove stack hard limit on ia64
      [IA64] point saved_max_pfn to the max_pfn of the entire system
      Revert "[IA64] swiotlb abstraction (e.g. for Xen)"

commit 185d84b4e1f6febebbe30d785fe31310dcf9632a
Merge: 03154a2... 063ea77...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 18:02:46 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] IP27: Build fix
      [MIPS] Wire up ioprio_set and ioprio_get.
      [MIPS] Fix __raw_read_trylock() to allow multiple readers
      [MIPS] Export __copy_user_inatomic.
      [MIPS] R2 bitops compile fix for gcc < 4.0.
      [MIPS] TX39: Remove redundant tx39_blast_icache() calls
      [MIPS] Cobalt: Fix early printk
      [MIPS] SMTC: De-obscure Malta hooks.
      [MIPS] SMTC: Add fordward declarations for mm_struct and task_struct.
      [MIPS] SMTC: <asm/mips_mt.h> must include <linux/cpumask.h>
      [MIPS] SMTC: <asm/smtc_ipi.h> must include <linux/spinlock.h>
      [MIPS] Atlas, Malta: Fix build warning.

commit 03154a271012031ad6336dc3344679440ba49c24
Author: Mark Gross <mgross@linux.intel.com>
Date:   Tue Mar 6 13:58:45 2007 -0800

    [PATCH] minor updat to tlclk Kconfig entry
    
    The tlclk driver is going on the MPCBL005 so I need to make the Kconfig
    more more generic.  Just some text changes.
    
    Signed-off-by: Mark Gross <mark.gross@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 059819a41d4331316dd8ddcf977a24ab338f4300
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Mar 6 22:12:00 2007 +0100

    [PATCH] Fix buffer overflow in Omnikey CardMan 4040 driver (CVE-2007-0005)
    
    Based on a patch from Don Howard <dhoward@redhat.com>
    
    When calling write() with a buffer larger than 512 bytes, the
    driver's write buffer overflows, allowing to overwrite the EIP and
    execute arbitrary code with kernel privileges.
    
    In read(), there exists a similar problem, but coming from the device.
    A malicous or buggy device sending more than 512 bytes can overflow
    of the driver's read buffer, with the same effects as above.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Harald Welte <laforge@gnumonks.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 266d4f40370757459f8aa063976c932d0de5e59b
Author: Hugh Dickins <hugh@veritas.com>
Date:   Tue Mar 6 19:20:11 2007 +0000

    [PATCH] suspend regression: sysfs deadlock
    
    Suspend deadlocks when trying to unregister /sys/block/sr0.
    
    This comes from Oliver's commit 94bebf4d1b8e7719f0f3944c037a21cfd99a4af7
    "Driver core: fix race in sysfs between sysfs_remove_file() and
    read()/write()".
    
    sysfs_write_file downs buffer->sem while calling flush_write_buffer, and
    flushing that particular write buffer entails downing buffer->sem in
    orphan_all_buffers, resulting in the obvious self-deadlock.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7c368bb1049bde17fc4f8655492478d7f2918da9
Merge: cba5a64... 5ddc322...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 17:34:28 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid:
      HID blacklisting of all Code Mercenaries IOWarrior devices

commit cba5a641ca7887dc371486681dac887869d1c7b7
Merge: 9f6632d... 6185af1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 17:32:45 2007 -0800

    Merge branch 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa
    
    * 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa:
      [ALSA] version 1.0.14rc3
      [ALSA] cmipci - Allow to disable integrated FM port
      [ALSA] hda-codec - Fix logic error in headphone mute for Conexant codecs
      [ALSA] hda-codec - Add missing Mic Boost for AD1986A codec
      [ALSA] ac97 - Add Thinkpad X31 and R40 to AD1981x blacklist
      [ALSA] Add missing sysfs device assignment for ALSA PCI drivers
      [ALSA] hda-codec - Define pin configs for MacBooks
      [ALSA] hda-codec - Add missing Mic Boost controls for ALC262
      [ALSA] soc - WM9712 PCM volume
      [ALSA] soc - Fix WM9712 register cache entry
      [ALSA] hda-codec - Add method for configuring Mac Pro without PCI SSID
      [ALSA] hda-codec - Add LFE support on Dell M90

commit 9f6632d6290785caf9e9f874c0a0cfaf2c178e59
Merge: 8328258... 8a23626...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 17:32:22 2007 -0800

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] cifs_prepare_write was incorrectly rereading page in some cases
      [CIFS] Fix set file size to zero when doing chmod to Samba 3.0.26pre
      [CIFS] Remove some unused functions/declarations
      [CIFS] New file for previous commit
      [CIFS] cifs export operations
      [CIFS] small piece missing from previous patch
      [CIFS] Fix locking problem around some cifs uses of i_size write

commit 8328258e745b80290534c9ab5bede6cd8340ea75
Merge: 205c911... a715dfc...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 17:31:29 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/drzeus/mmc
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/drzeus/mmc:
      sdhci: release irq during suspend
      sdhci: make isr tolerant of read errors
      mmc: require explicit support for high-speed
      ncpfs: make sure server connection survives a kill

commit 205c911da322908abe127b96d2ef2a4a2aa5109a
Merge: c7276fd... f3be974...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Mar 6 17:30:59 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      sis900 warning fixes
      mv643xx_eth: Place explicit port number in mv643xx_eth_platform_data
      pcnet32: Fix PCnet32 performance bug on non-coherent architecutres
      __devinit & __devexit cleanups for de2104x driver
      3c59x: Handle pci_enable_device() failure while resuming
      dmfe: Fix link detection
      dmfe: fix two bugs
      dmfe: trivial/spelling fixes
      revert "drivers/net/tulip/dmfe: support basic carrier detection"
      ucc_geth: returns NETDEV_TX_BUSY when BD ring is full
      ucc_geth: Fix BD processing
      natsemi: netpoll fixes
      bonding: Improve IGMP join processing
      bonding: only receive ARPs for us
      bonding: fix double dev_add_pack

commit 063ea774b021c70fa96139eb601f894aff8941c0
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 6 20:28:02 2007 +0000

    [MIPS] IP27: Build fix
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 08253b39f861e6167aa3acbe155f304ee800ce5a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Mar 6 17:04:49 2007 +0000

    [MIPS] Wire up ioprio_set and ioprio_get.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d52c2d5a626a2cb1848fa7063b3ab79e2752dac7
Author: Dave Johnson <djohnson+linux-mips@sw.starentnetworks.com>
Date:   Mon Mar 5 20:50:27 2007 -0500

    [MIPS] Fix __raw_read_trylock() to allow multiple readers
    
    A deadlock can occur for mixed irq and non-irq rwlock readers if a 2nd
    reader attempts to take lock by looping around __raw_read_trylock().
    
    Signed-off-by: Dave Johnson <djohnson+linux-mips@sw.starentnetworks.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d0c91ae2bb3df9d7bef279d8f400e0c8ddde0b5e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 5 15:54:20 2007 +0000

    [MIPS] Export __copy_user_inatomic.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b961153be981884d9eea4a6752b8169e44857c09
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Mar 5 00:56:15 2007 +0000

    [MIPS] R2 bitops compile fix for gcc < 4.0.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a5664c40750ce423f308dfd01ad4e82ecb7ac127
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Mar 5 00:41:39 2007 +0900

    [MIPS] TX39: Remove redundant tx39_blast_icache() calls
    
    Apply commit 0550d9d13e02b30efa117d47fcadea450bb23d23 to c-tx39.c too.
    And fix a warning in local_tx39_flush_data_cache_page().
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 0a22e0d43b6d6468544dd7559d5f3c4acb8b536e
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Fri Mar 2 12:42:33 2007 +0900

    [MIPS] Cobalt: Fix early printk
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 57a2050c408620613c5715171364de2cc5566f22
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Mar 4 18:27:34 2007 +0000

    [MIPS] SMTC: De-obscure Malta hooks.
    
    Should now be understandable why the thing works ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b3920590b589a1dbb41eb58ef0ed2699f136482a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Mar 4 18:25:51 2007 +0000

    [MIPS] SMTC: Add fordward declarations for mm_struct and task_struct.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 32fac80be6df4a2a09f7093b7f51bb6bc3ebef97
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Mar 4 18:23:48 2007 +0000

    [MIPS] SMTC: <asm/mips_mt.h> must include <linux/cpumask.h>
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 22e651c6ae78bc779e420d3092f962442dd31305
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Mar 4 18:22:56 2007 +0000

    [MIPS] SMTC: <asm/smtc_ipi.h> must include <linux/spinlock.h>
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f76b7ea48afb6daecbbc26f5408a75ac66b1cf23
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Mar 4 17:26:56 2007 +0000

    [MIPS] Atlas, Malta: Fix build warning.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3492856e33da734501f2bdd8656cbfdf61f60330
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Tue Mar 6 11:58:32 2007 -0800

    RDMA/ucma: Avoid sending reject if backlog is full
    
    Change the returned error code to ENOMEM if the connection event
    backlog is full.  This prevents the ib_cm from issuing a reject
    on the connection, which can allow retries to succeed.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit cee87af2a5f75713b98d3e65e43872e547122cd5
Author: Magnus Damm <magnus@valinux.co.jp>
Date:   Tue Mar 6 02:34:26 2007 -0800

    [IA64] kexec: Use EFI_LOADER_DATA for ELF core header
    
    The address where the ELF core header is stored is passed to the secondary
    kernel as a kernel command line option.  The memory area for this header is
    also marked as a separate EFI memory descriptor on ia64.
    
    The separate EFI memory descriptor is at the moment of the type
    EFI_UNUSABLE_MEMORY.  With such a type the secondary kernel skips over the
    entire memory granule (config option, 16M or 64M) when detecting memory.
    If we are lucky we will just lose some memory, but if we happen to have
    data in the same granule (such as an initramfs image), then this data will
    never get mapped and the kernel bombs out when trying to access it.
    
    So this is an attempt to fix this by changing the EFI memory descriptor
    type into EFI_LOADER_DATA.  This type is the same type used for the kernel
    data and for initramfs.  In the secondary kernel we then handle the ELF
    core header data the same way as we handle the initramfs image.
    
    This patch contains the kernel changes to make this happen.  Pretty
    straightforward, we reserve the area in reserve_memory().  The address for
    the area comes from the kernel command line and the size comes from the
    specialized EFI parsing function vmcore_find_descriptor_size().
    
    The kexec-tools-testing code for this can be found here:
    http://lists.osdl.org/pipermail/fastboot/2007-February/005983.html
    
    Signed-off-by: Magnus Damm <magnus@valinux.co.jp>
    Cc: Simon Horman <horms@verge.net.au>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 41d5e5d73ecef4ef56b7b4cde962929a712689b4
Author: Nick Piggin <npiggin@suse.de>
Date:   Tue Mar 6 02:34:25 2007 -0800

    [IA64] permon use-after-free fix
    
    Perfmon associates vmalloc()ed memory with a file descriptor, and installs
    a vma mapping that memory.  Unfortunately, the vm_file field is not filled
    in, so processes with mappings to that memory do not prevent the file from
    being closed and the memory freed.  This results in use-after-free bugs and
    multiple freeing of pages, etc.
    
    I saw this bug on an Altix on SLES9.  Haven't reproduced upstream but it
    looks like the same issue is there.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Cc: Stephane Eranian <eranian@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 50157b09b33c2ec3637d3b317b06a7235c57c7f2
Author: Alexandr Andreev <aandreev@openvz.org>
Date:   Tue Mar 6 02:34:24 2007 -0800

    [IA64] sync compat getdents
    
    Add VERIFY_WRITE check in the beginning like compat_sys_getdents() (EINVAL vs
    EFAULT).
    
    Signed-off-by: Alexandr Andreev <aandreev@openvz.org>
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a27e5a13d5863bb9de0ac80cb4bb3f4442f0aad1
Author: Lee Schermerhorn <Lee.Schermerhorn@hp.com>
Date:   Tue Mar 6 02:34:23 2007 -0800

    [IA64] always build arch/ia64/lib/xor.o
    
    Always build ia64 xor.o because multiple config options now depend on it.
    
    Necessary to build .20-mm* on ia64 when, e.g., CONFIG_ASYNC_TX_DMA is
    defined.  Don't know if '_ASYNC_TX_DMA makes sense on ia64.  If not, maybe
    Kconfig should preclude it.
    
    Could have defined a Kconfig option that defaults to true if MD_RAID456 ||
    ASYNC_TX_DMA to control building of xor.o, but xor.o is only 848 bytes and
    this IS ia64...
    
    Signed-off-by:  Lee Schermerhorn <lee.schermerhorn@hp.com>
    Cc: Bob Picco <bob.picco@hp.com>
    Cc: Eric Whitney <eric.whitney@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d826393cdebe340b3716002bfb1298ab19b57e83
Author: Andreas Schwab <schwab@suse.de>
Date:   Tue Mar 6 02:34:22 2007 -0800

    [IA64] Remove stack hard limit on ia64
    
    Un-Breaks pthreads, since Oct 2003.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f4a570997e71b892805a1e71303d09c327af135f
Author: Horms <horms@verge.net.au>
Date:   Tue Mar 6 02:34:21 2007 -0800

    [IA64] point saved_max_pfn to the max_pfn of the entire system
    
    Make saved_max_pfn point to max_pfn of entire system.
    
    Without this patch is so that vmcore is zero length on ia64.  This is
    because saved_max_pfn was wrongly being set to the max_pfn of the crash
    kernel's address space, rather than the max_pfg on the physical memory of
    the machine - the whole purpose of vmcore is to access physical memory that
    is not part of the crash kernel's addresss space.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Zou Nan hai <nanhai.zou@intel.com>
    Sort-Of-Acked-By: Jay Lan <jlan@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 99c72ce091ec85868a0847e598eb7562dc0d8205
Author: Gerrit Renker <gerrit@erg.abdn.ac.uk>
Date:   Tue Mar 6 14:24:44 2007 -0800

    [DCCP]: Set RTO for newly created child socket
    
    This mirrors a recent change in tcp_open_req_child, whereby the icsk_rto of the
    newly created child socket was not set (but rather on the parent socket). Same
    fix for DCCP.
    
    Signed-off-by: Gerrit Renker <gerrit@erg.abdn.ac.uk>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4d46861be6196d0f1614724590968d8da26af82a
Author: Gerrit Renker <gerrit@erg.abdn.ac.uk>
Date:   Tue Mar 6 14:24:18 2007 -0800

    [DCCP]: Correctly split CCID half connections
    
    This fixes a bug caused by a previous patch, which causes DCCP servers in
    LISTEN state to not receive packets.
    
    This patch changes the logic so that
     * servers in either LISTEN or OPEN state get the RX half connection packets
     * clients in OPEN state get the TX half connection packets
    
    Signed-off-by: Gerrit Renker <gerrit@erg.abdn.ac.uk>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1e51f9513e6b021abcaefd7c76f9b5d682f83232
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Mar 6 13:44:06 2007 -0800

    [NET]: Fix compat_sock_common_getsockopt typo.
    
    This patch fixes a typo in compat_sock_common_getsockopt.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 25667d675454f2cd258c5fa798a2281af1ef2ae9
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Mar 6 13:31:45 2007 -0800

    Revert "[IA64] swiotlb abstraction (e.g. for Xen)"
    
    This reverts commit 51099005ab8e09d68a13fea8d55bc739c1040ca6.

commit e64518f3736971f22d5c22a6bab40891d2db337f
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Mar 6 14:44:07 2007 -0600

    RDMA/cxgb3: Fix MR permission problems
    
    
    Fix memory region permission problems:
    
    - remove useless and redundant iwch_mem_perms enum.
    
    - create ib_to_tpt_access_rights() for mapping ib access rights
      to T3 TPT permissions.
    
    - create ib_to_mwbind_access_rights() for mapping ib access rights
      to T3 MWBIND WR permissions.
    
    - fix up the mem reg code to utilize the new functions.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1f6a849b7ce6c3007088cd437dfc2b9c7cb5d21e
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Mar 6 14:44:05 2007 -0600

    RDMA/cxgb3: Don't reuse skbs that are non-linear or cloned
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8cfccf02bb63b9733e852d475a8be58baaefef8a
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Mar 6 14:44:03 2007 -0600

    RDMA/cxgb3: Squelch logging AE errors
    
    Only print one AE error for a given connection in the kernel log.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit adf376b3708f6111e87916fae083633c1be2f88f
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Mar 6 14:44:01 2007 -0600

    RDMA/cxgb3: Stop EP timer when MPA exchange is aborted by peer
    
    Stop the endpoint timer when the MPA exchange is aborted by the peer.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2df50da00e679439aca08a59cd0b4db484159540
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Mar 6 14:43:58 2007 -0600

    RDMA/cxgb3: Move QP to error on destroy if the state is IDLE
    
    Change iwch_destroy_qp() to always move the QP to ERROR and let
    iwch_modify_qp() decide what to do.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 42e31753546d2186d4a675e7d00daa02ea7c8e85
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Mar 6 14:43:56 2007 -0600

    RDMA/cxgb3: Fixes for "normal close" failures
    
    Fixes for "normal close" failures:
    
    - Start normal close timer when moving to CLOSING state.
    - Handle ABORTING state in close_con_rpl().
    - Stop timer correctly on abort during a normal close.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c3bb1092c80fa2b9117cb0382d136a409496a07f
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Mar 5 15:21:29 2007 -0800

    RDMA/cxgb3: Fix build on sparc64
    
    cxgb3 uses dma_alloc_coherent() et al. thus needs linux/dma-mapping.h
    include in order to build reliably.
    
    Noticed on sparc64.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit cb164b8c6a2bdf995c938e5f157d41465b18e5c3
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Mon Mar 5 12:50:17 2007 -0800

    RDMA/cma: Initialize rdma_bind_list in cma_alloc_any_port()
    
    The struct rdma_bind_list fields for hlist are not being initialized,
    resulting in a corrupted list.  Fix this by using kzalloc() to make
    sure all pointers are NULL.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit aeb100e2466b11e6087ee6f467b712e119213158
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Fri Mar 2 16:06:36 2007 -0600

    RDMA/cxgb3: Don't use mm after it's freed in iwch_mmap()
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 7d526e6b2c5d6bba70fdc1fc2943bdaf9cc6147d
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Mon Mar 5 17:32:46 2007 -0600

    RDMA/cxgb3: Start ep timer on a MPA reject
    
    If the consumer rejects the connection we end up under-referencing the
    endpoint structure.  The fix is to call iwch_ep_disconnect() instead
    of the low level disconnect functions so that the endpoint close timer
    is started correctly.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 64a146513f8f12ba204b7bf5cb7e9505594ead42
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Mar 6 11:21:05 2007 -0800

    [NET]: Revert incorrect accept queue backlog changes.
    
    This reverts two changes:
    
    8488df894d05d6fa41c2bd298c335f944bb0e401
    248f06726e866942b3d8ca8f411f9067713b7ff8
    
    A backlog value of N really does mean allow "N + 1" connections
    to queue to a listening socket.  This allows one to specify
    "0" as the backlog and still get 1 connection.
    
    Noticed by Gerrit Renker and Rick Jones.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7276fde27bca89798f33c0be9543dc108468788
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Tue Mar 6 01:42:24 2007 -0800

    [PATCH] kconfig: Update swsusp description
    
    Update the outdated and inaccurate description of the software suspend in
    Kconfig.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 42a7fc4a6598221f1a547a76cdd45a8ab4d90e93
Author: Greg Banks <gnb@sgi.com>
Date:   Tue Mar 6 01:42:23 2007 -0800

    [PATCH] knfsd: provide sunrpc pool_mode module option
    
    Provide a module param "pool_mode" for sunrpc.ko which allows a sysadmin to
    choose the mode for mapping NFS thread service pools to CPUs.  Values are:
    
    auto	    choose a mapping mode heuristically
    global	    (default, same as the pre-2.6.19 code) a single global pool
    percpu	    one pool per CPU
    pernode	    one pool per NUMA node
    
    Note that since 2.6.19 the hardcoded behaviour has been "auto", this patch
    makes the default "global".
    
    The pool mode can be changed after boot/modprobe using /sys, if the NFS and
    lockd services have been shut down.  A useful side effect of this change is to
    fix a small memory leak when unloading the module.
    
    Signed-off-by: Greg Banks <gnb@melbourne.sgi.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cda1fd4abd773216a888487af0170d0cc3d50454
Author: Neil Brown <neilb@suse.de>
Date:   Tue Mar 6 01:42:22 2007 -0800

    [PATCH] knfsd: fix recently introduced problem with shutting down a busy NFS server
    
    When the last thread of nfsd exits, it shuts down all related sockets.  It
    currently uses svc_close_socket to do this, but that only is immediately
    effective if the socket is not SK_BUSY.
    
    If the socket is busy - i.e.  if a request has arrived that has not yet been
    processes - svc_close_socket is not effective and the shutdown process spins.
    
    So create a new svc_force_close_socket which removes the SK_BUSY flag is set
    and then calls svc_close_socket.
    
    Also change some open-codes loops in svc_destroy to use
    list_for_each_entry_safe.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5a05ed73e1abfd7e0e7d474817245861deaa18af
Author: Neil Brown <neilb@suse.de>
Date:   Tue Mar 6 01:42:22 2007 -0800

    [PATCH] knfsd: remove CONFIG_IPV6 ifdefs from sunrpc server code
    
    They don't really save that much, and aren't worth the hassle.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7a37f5787e76bf1765c1add3a9a7163f841a28bb
Author: Neil Brown <neilb@suse.de>
Date:   Tue Mar 6 01:42:21 2007 -0800

    [PATCH] knfsd: use recv_msg to get peer address for NFSD instead of code-copying
    
    The sunrpc server code needs to know the source and destination address for
    UDP packets so it can reply properly.  It currently copies code out of the
    network stack to pick the pieces out of the skb.  This is ugly and causes
    compile problems with the IPv6 stuff.
    
    So, rip that out and use recv_msg instead.  This is a much cleaner interface,
    but has a slight cost in that the checksum is now checked before the copy, so
    we don't benefit from doing both at the same time.  This can probably be
    fixed.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0e8cd28a084691587549630dce728661401d343b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue Mar 6 01:42:20 2007 -0800

    [PATCH] uml: comment the initialization of a global
    
    Comment the fact that sig_info is initialized early in boot, and thus doesn't
    need any locking.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b4cf95c69a72baf90b8f275294a3ff3d282ffe09
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue Mar 6 01:42:19 2007 -0800

    [PATCH] uml: add a debugging message
    
    Add a debugging message in the case that mapping a stub fails.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7c7a89499a1089a36e40de2db54ff82f5988270d
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue Mar 6 01:42:18 2007 -0800

    [PATCH] uml: fix formatting violations in signal delivery code
    
    Fix a few formatting bugs in the signal code.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3b46e650165f691a30ddede1a79d2df02f3459d7
Author: Jeff Dike <jdike@addtoit.com>
Date:   Tue Mar 6 01:42:17 2007 -0800

    [PATCH] linux/audit.h needs linux/types.h
    
    Include linux/types.h here because we need a definition of __u32.  This file
    appears not be exported verbatim by libc, so I think this doesn't have any
    userspace consequences.
    
    Signed-off-by: Jeff Dike <jdike@linux.intel.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f991633de626a5f16069d00e26b45142e037ce24
Author: Dimitri Gorokhovik <dimitri.gorokhovik@free.fr>
Date:   Tue Mar 6 01:42:17 2007 -0800

    [PATCH] initramfs should not depend on CONFIG_BLOCK
    
    initramfs ended up depending on BLOCK:
    
      INITRAMFS_SOURCE <-- BLK_DEV_INITRD <-- BLOCK
    
    This inhibits use of customized-initramfs-over-ramfs without block layer
    (ramfs would still be enabled), useful in embedded applications.
    
    Move BLK_DEV_INITRD out of 'drivers/block/Kconfig' and into 'init/Kconfig',
    make it unconditional.
    
    Signed-off-by: Dimitri Gorokhovik <dimitri.gorokhovik@free.fr>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit de69fee82c5962fb7bdaf6eb8a81302f418d1a1d
Author: Mike Miller <mikem@beardog.cca.cpqcorp.net>
Date:   Tue Mar 6 01:42:16 2007 -0800

    [PATCH] cciss: add struct pci_driver shutdown support (replaces reboot notifier)
    
    This patch adds support for the struct pci_driver shutdown method to cciss.
     We require notification of an impending reboot or shutdown so that we can
    flush the battery backed write cache (BBWC) on the Smart Array controller.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 97c06978515ed6e071bfd4a5e858837dd2b0edcf
Author: Mike Miller <mikem@beardog.cca.cpqcorp.net>
Date:   Tue Mar 6 01:42:14 2007 -0800

    [PATCH] cciss: fix for 2TB support
    
    This patch changes the way we determine if a logical volume is larger than
    2TB.
    
    The original test looked for a total_size of 0.  Originally we added 1 to the
    total_size.  That would make our read_capacity return size 0 for >2TB lv's.
    We assumed that we could not have a lv size of 0 so it seemed OK until we were
    in a clustered system.  The backup node would see a size of 0 due to the
    reservation on the drive.  That caused the driver to switch to 16-byte CDB's
    which are not supported on older controllers.  After that everything was
    broken.
    
    It may seem petty but I don't see the value in trying to determine if the LBA
    is beyond the 2TB boundary.  That's why when we switch we use 16-byte CDB's
    for all read/write operations.  Please consider this for inclusion.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d6ad67112a78623025632865d716b2f7645874c5
Author: Josh Triplett <josh@freedesktop.org>
Date:   Tue Mar 6 01:42:13 2007 -0800

    [PATCH] Publish rcutorture module parameters via sysfs, read-only
    
    rcutorture's module parameters currently use permissions of 0, so they
    don't show up in /sys/module/rcutorture/parameters.  Change the permissions
    on all module parameters to world-readable (0444).
    
    rcutorture does all of its initialization and thread startup when loaded
    and relies on the parameters not changing during execution, so they should
    not permit writing.  However, reading seems fine.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Cc: "Paul E. McKenney" <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5efee174f8a101cafb1607d2b629bed353701457
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Mar 6 01:42:13 2007 -0800

    [PATCH] geode-aes: use unsigned long for spin_lock_irqsave
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 57bf63d69cb6b7064e6fec5e83da4e1918168282
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Date:   Tue Mar 6 01:42:12 2007 -0800

    [PATCH] fs: nobh_truncate_page() fix
    
    This fixes a regression caused by 22c8ca78f20724676b6006232bf06cc3e9299539.
    
    nobh_prepare_write() no longer marks the page uptodate, so
    nobh_truncate_page() needs to do it.
    
    Signed-off-by: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 90675a27fa3eb0e97f1d040b183cceb44316e669
Author: Daniel Walker <dwalker@mvista.com>
Date:   Tue Mar 6 01:42:11 2007 -0800

    [PATCH] fix vsyscall settimeofday
    
    I've only seen this on x86_64.
    
    The vsyscall state only gets updated when a timer interrupts comes in.  So
    if the time is set long before the next timer, there will be a period when
    a gettimeofday() won't reflect the correct time.
    
    I added an explicit update_vsyscall() during the settimeofday(), that way
    the vsyscall state doesn't get stale.
    
    Signed-off-by: Daniel Walker <dwalker@mvista.com>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7a434814c7a6500b08bf4419ba8712b152d08d08
Author: Peter Zijlstra <a.p.zijlstra@chello.nl>
Date:   Tue Mar 6 01:42:09 2007 -0800

    [PATCH] mqueue: nested locking annotation
    
    Fix http://bugzilla.kernel.org/show_bug.cgi?id=8130
    
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4a6753ca08541437f4c243708d2011b4758e17e8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 6 01:42:08 2007 -0800

    [PATCH] remove arch/i386/kernel/tsc.c:custom_sched_clock
    
    Remove the no longer used custom_sched_clock.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Zachary Amsden <zach@vmware.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f8953856eb8dd62232aee6cacb46993dc2ac4869
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 6 01:42:08 2007 -0800

    [PATCH] highres: do not run the TIMER_SOFTIRQ after switching to highres mode
    
    The TIMER_SOFTIRQ runs the hrtimers during bootup until a usable
    clocksource and clock event sources are registered.  The switch to high
    resolution mode happens inside of the TIMER_SOFTIRQ, but runs the softirq
    afterwards.  That way the tick emulation timer, which was set up in the
    switch to highres might be executed in the softirq context, which is a BUG.
     The rbtree has not to be touched by the softirq after the highres switch.
    
    This BUG was observed by Andres Salomon, who provided the information to
    debug it.
    
    Return early from the softirq, when the switch was sucessful.
    
    [dilinger@debian.org: add debug warning]
    [akpm@linux-foundation.org: make debug warning compile]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andres Salomon <dilinger@debian.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andres Salomon <dilinger@debian.org>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d1d67174b42a02c7d106894df0ed155d595871f7
Author: Andres Salomon <dilinger@debian.org>
Date:   Tue Mar 6 01:42:07 2007 -0800

    [PATCH] hrtimers: hrtimer_clock_base description typo
    
    The description for the hrtimer_clock_base struct describes "hrtimer_base".
     That should be hrtimer_clock_base.
    
    Signed-off-by: Andres Salomon <dilinger@debian.org>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8437fdc7428eac363579bf0cce2526c35573735c
Author: Andres Salomon <dilinger@debian.org>
Date:   Tue Mar 6 01:42:06 2007 -0800

    [PATCH] hrtimers: fix HRTIMER_CB_IRQSAFE_NO_SOFTIRQ description
    
    The description for HRTIMER_CB_IRQSAFE_NO_SOFTIRQ is backwards; "NO
    SOFTIRQ" sounds a whole lot like it means it must not be run in a softirq.
    
    Signed-off-by: Andres Salomon <dilinger@debian.org>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2272b0e03ea5731aca058eaf79c9955b36f0c083
Author: Andres Salomon <dilinger@debian.org>
Date:   Tue Mar 6 01:42:05 2007 -0800

    [PATCH] i386: make x86_64 tsc header require i386 rather than vice-versa
    
    Prior to commit 95492e4646e5de8b43d9a7908d6177fb737b61f0 ([PATCH] x86:
    rewrite SMP TSC sync code), the headers in asm-i386 did not really require
    anything in include/asm-x86_64.  This means that distributions such as
    fedora did not include asm-x86_64 in kernel-devel headers for i386.  Ingo's
    commit changed that, and broke things.  This is easy enough to hack around
    in package builds by just including asm-x86_64 on i386, but that's kind of
    annoying.  If anything, x86_64 should depend upon i386, not the other way
    around.
    
    This patch changes it so that asm-x86_64/tsc.h includes asm-i386/tsc.h,
    rather than vice-versa.
    
    Signed-off-by: Andres Salomon <dilinger@debian.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e585047ef97b4002a7f416b0ca01ab894f7755de
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 6 01:42:04 2007 -0800

    [PATCH] Scheduled removal of SA_xxx interrupt flags fixups 3
    
    The obsolete SA_xxx interrupt flags have been used despite the scheduled
    removal.  Fixup the remaining users.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0de1517e23c2e28d58a6344b97a120596ea200bb
Author: Mark Lord <lkml@rtr.ca>
Date:   Tue Mar 6 01:42:03 2007 -0800

    [PATCH] Fix 2.6.21 rfcomm lockups
    
    Any attempt to open/use a bluetooth rfcomm device locks up
    scheduling completely on my machine.
    
    Interrupts (ping, alt-sysrq) seem to be alive, but nothing else.
    
    This was working fine in 2.6.20, broken now in 2.6.21-rc2-git*
    
    Reverting this change (below) fixes it:
    
    | author    Marcel Holtmann <marcel@holtmann.org>
    |      Sat, 17 Feb 2007 22:58:57 +0000 (23:58 +0100)
    | committer    David S. Miller <davem@sunset.davemloft.net>
    |      Mon, 26 Feb 2007 19:42:41 +0000 (11:42 -0800)
    | commit    c1a3313698895d8ad4760f98642007bf236af2e8
    | tree    337a876f727061362b6a169f8759849c105b8f7a    tree | snapshot
    | parent    f5ffd4620aba9e55656483ae1ef5c79ba81f5403    commit | diff
    | | [Bluetooth] Make use of device_move() for RFCOMM TTY devices
    | | In the case of bound RFCOMM TTY devices the parent is not available
    | before its usage. So when opening a RFCOMM TTY device, move it to
    | the corresponding ACL device as a child. When closing the device,
    | move it back to the virtual device tree.
    | Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    
    The simplest fix for this bug is to prevent sysfs_move_dir()
    from self-deadlocking when (old_parent == new_parent).
    
    This patch prevents total system lockup when using rfcomm devices.
    
    Signed-off-by:  Mark Lord <mlord@pobox.com>
    Acked-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 166f60dde0f3793e67bd0d76952eaa46705bbaa9
Author: James Simmons <jsimmons@infradead.org>
Date:   Tue Mar 6 01:42:02 2007 -0800

    [PATCH] fbdev: fix kconfig error if FB_DDC=n
    
    Fix the following error if FB_DDC=n
    
    Kernel: arch/x86_64/boot/bzImage is ready  (#1)
      Building modules, stage 2.
      MODPOST 229 modules
    WARNING: "fb_ddc_read" [drivers/video/nvidia/nvidiafb.ko] undefined!
    make[1]: *** [__modpost] Error 1
    
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit df470c30da7900a3fbc48e3d34187a3786c1acdb
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Mar 6 01:42:01 2007 -0800

    [PATCH] atyfb: fix kconfig error part 2
    
    Fix implicit declarations and missing code in atyfb.
    
    drivers/video/aty/atyfb_base.c:2137: warning: implicit declaration of function 'a
    ty_ld_lcd'
    drivers/video/aty/atyfb_base.c:2154: warning: implicit declaration of function 'a
    ty_st_lcd'
    atyfb_base.c:(.text+0x33e5c): undefined reference to `aty_ld_lcd'
    atyfb_base.c:(.text+0x33eb2): undefined reference to `aty_st_lcd'
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b9860ecf2553fbc4c3bd66f5df7e82a6d5179775
Author: Dave Jones <davej@redhat.com>
Date:   Tue Mar 6 01:42:00 2007 -0800

    [PATCH] nvidiafb backlight: Fix implicit declaration in nv_backlight
    
    drivers/video/nvidia/nv_backlight.c: In function 'nvidia_bl_init':
    drivers/video/nvidia/nv_backlight.c:103: error: implicit declaration of function 'pmac_has_backlight_type'
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6261d720da40c51af96881ed210fe80f10138a7b
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Mar 6 01:41:58 2007 -0800

    [PATCH] fix build with CONFIG_NO_IDLE_HZ=n
    
    arch/i386/kernel/vmi.c: In function 'vmi_safe_halt':
    arch/i386/kernel/vmi.c:262: warning: implicit declaration of function 'vmi_stop_hz_timer'
    arch/i386/kernel/vmi.c:266: warning: implicit declaration of function 'vmi_account_time_restart_hz_timer'
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6321dd60c76b2e12383bc06046288b15397ed3a0
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Mar 6 08:25:42 2007 +0100

    [PATCH] Save/restore periodic tick information over suspend/resume
    
    The programming of periodic tick devices needs to be saved/restored
    across suspend/resume - otherwise we might end up with a system coming
    up that relies on getting a PIT (or HPET) interrupt, while those devices
    default to 'no interrupts' after powerup. (To confuse things it worked
    to a certain degree on some systems because the lapic gets initialized
    as a side-effect of SMP bootup.)
    
    This suspend / resume thing was dropped unintentionally during the
    last-minute -mm code reshuffling.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6185af1f4254a53563fe6d6af652f5775fc70e25
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Mar 6 14:10:08 2007 +0100

    [ALSA] version 1.0.14rc3
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a715dfc7b9ef15ed5b398b185bd84cc015ff37f6
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Mar 6 13:38:49 2007 +0100

    sdhci: release irq during suspend
    
    Release the device's irq during sleep, as all well-behaved drivers
    should.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 62df67a523acd7a22d936bf946b1889dbd60ca98
Author: Mark Lord <lkml@rtr.ca>
Date:   Tue Mar 6 13:30:13 2007 +0100

    sdhci: make isr tolerant of read errors
    
    The interrupt is shared with another device, which resumes earlier than the
    sdhci controller, and generates an interrupt.
    
    The sdhci interrupt handler runs, sees 0xffffffff in its own device's
    interrupt status, and tries to handle it..  The reason for the 0xffffffff
    is that the device is still suspended, and *all* regs are reading back
    0xffffffff.
    
    Signed-off-by: Mark Lord <mlord@pobox.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit cd9277c011a99769fa371521b460ed57f6d280b1
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Feb 18 12:07:47 2007 +0100

    mmc: require explicit support for high-speed
    
    The new high-speed timings are similar to each other and the old
    system, but not identical. And although things "just work" most of
    the time, sometimes it does not. So we need to start marking which
    hosts are known to fully comply with the new timings.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit c5f93cf19df633a8dbd7adf8130d604eec96e145
Author: Pierre Ossman <ossman@cendio.se>
Date:   Mon Feb 19 11:34:43 2007 +0100

    ncpfs: make sure server connection survives a kill
    
    Use internal buffers instead of the ones supplied by the caller
    so that a caller can be interrupted without having to abort the
    entire ncp connection.
    
    Signed-off-by: Pierre Ossman <ossman@cendio.se>
    Acked-by: Petr Vandrovec <petr@vandrovec.name>

commit f3be97427172856d6865ddfedea84fa3a9f33227
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Mar 6 02:41:55 2007 -0800

    sis900 warning fixes
    
    drivers/net/sis900.c: In function 'sis900_reset_phy':
    drivers/net/sis900.c:972: warning: 'status' may be used uninitialized in this function
    drivers/net/sis900.c: In function 'sis900_check_mode':
    drivers/net/sis900.c:1431: warning: 'status' may be used uninitialized in this function
    drivers/net/sis900.c: In function 'sis900_timer':
    drivers/net/sis900.c:1467: warning: 'status' may be used uninitialized in this function
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 84dd619e4dc3b0b1c40dafd98c90fd950bce7bc5
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Sat Mar 3 06:40:28 2007 -0700

    mv643xx_eth: Place explicit port number in mv643xx_eth_platform_data
    
    We were using the platform_device.id field to identify which ethernet
    port is used for mv643xx_eth device.  This is not generally correct.
    It will be incorrect, for example, if a hardware platform uses a single
    port but not the first port.  Here, we add an explicit port_number field
    to struct mv643xx_eth_platform_data.
    
    This makes the mv643xx_eth_platform_data structure required, but that
    isn't an issue since all users currently provide it already.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b2cbbd8e0e8093fbf115ac2669482b016d781c78
Author: Don Fry <pcnet32@verizon.net>
Date:   Mon Mar 5 18:13:09 2007 -0800

    pcnet32: Fix PCnet32 performance bug on non-coherent architecutres
    
    The PCnet32 driver always passed the the size of the largest possible packet
    to the pci_dma_sync_single_for_cpu and pci_dma_sync_single_for_device.
    This results in a fairly large "colateral damage" in the caches and makes
    the flush operation itself much slower.  On a system with a 40MHz CPU this
    patch increases network bandwidth by about 12%.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Acked-by: Don Fry <pcnet32@verizon.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4c44fd009ae79fc04e2c049f708792ad83400dde
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Tue Mar 6 02:42:00 2007 -0800

    __devinit & __devexit cleanups for de2104x driver
    
    Fixes MODPOST warnings similar to:
    
    WARNING: drivers/net/tulip/de2104x.o - Section mismatch: reference to
    .init.text:de_init_one from .data.rel.local after 'de_driver' (at offset 0x20)
    WARNING: drivers/net/tulip/de2104x.o - Section mismatch: reference to
    .exit.text:de_remove_one from .data.rel.local after 'de_driver' (at offset 0x28)
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e12651539808437a97f3e33c659c3d7b4000e41e
Author: Dmitriy Monakhov <dmonakhov@sw.ru>
Date:   Tue Mar 6 02:41:59 2007 -0800

    3c59x: Handle pci_enable_device() failure while resuming
    
    Handle pci_enable_device() failure while resuming, we can safely exit here.
    
    Signed-off-by: Monakhov Dmitriy <dmonakhov@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cfa51b9dbf5aa385c6d1f8645587fdc4fe8c13fd
Author: Maxim Levitsky <maximlevitsky@gmail.com>
Date:   Tue Mar 6 02:41:53 2007 -0800

    dmfe: Fix link detection
    
    Add link detection
    
    Signed-off-by: Maxim Levitsky <maximlevitsky@gmail.com>
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4dc68f3de5e36d72663bb51b94662d2d5db84125
Author: Maxim Levitsky <maximlevitsky@gmail.com>
Date:   Tue Mar 6 02:41:52 2007 -0800

    dmfe: fix two bugs
    
    Fix a oops on module removal due to deallocating memory before unregistring
    driver Fix a NULL pointer dereference when dev_alloc_skb fails
    
    Signed-off-by: Maxim Levitsky <maximlevitsky@gmail.com>
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f67ba792fa10e3a65226d53dccc1232908d86c20
Author: Maxim Levitsky <maximlevitsky@gmail.com>
Date:   Tue Mar 6 02:41:51 2007 -0800

    dmfe: trivial/spelling fixes
    
    Fix a typo, wrap lines on 80-th column, change KERN_ERR to KERN_INFO for
    link status message
    
    Signed-off-by: Maxim Levitsky <maximlevitsky@gmail.com>
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ead9bffb157a22c1f883beb8d20ba8bf7bc92a58
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Mar 6 02:41:49 2007 -0800

    revert "drivers/net/tulip/dmfe: support basic carrier detection"
    
    Revert 7628b0a8c01a02966d2228bdf741ddedb128e8f8.  Thomas Bachler
    reports:
    
      Commit 7628b0a8c01a02966d2228bdf741ddedb128e8f8 (drivers/net/tulip/dmfe:
      support basic carrier detection) breaks networking on my Davicom DM9009.
      ethtool always reports there is no link.  tcpdump shows incoming packets,
      but TX is disabled.  Reverting the above patch fixes the problem.
    
    Cc: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Cc: Thomas Bachler <thomas@archlinux.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 18babd38547a042a4bfd4154a014d1ad33373eb0
Author: Li Yang <leoli@freescale.com>
Date:   Tue Mar 6 16:54:05 2007 +0800

    ucc_geth: returns NETDEV_TX_BUSY when BD ring is full
    
    Returns NETDEV_TX_BUSY when BD ring is full.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a394f013f05ba083d8547551280e0309ca70b08d
Author: Li Yang <leoli@freescale.com>
Date:   Tue Mar 6 16:53:46 2007 +0800

    ucc_geth: Fix BD processing
    
    Fix broken BD processing code.
    
    Signed-off-by: Michael Barkowski <michael.barkowski@freescale.com>
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6006f7f517b9a754e4c4628755c62872e322c68a
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Tue Mar 6 00:10:08 2007 +0400

    natsemi: netpoll fixes
    
    Fix two issues in this driver's netpoll path: one usual, with spin_unlock_irq()
    enabling interrupts which nobody asks it to do (that has been fixed recently in
    a number of drivers) and one unusual, with poll_controller() method possibly
    causing loss of interrupts due to the interrupt status register being cleared
    by a simple read and the interrpupt handler simply storing it, not accumulating.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a816c7c712ff9f6770168b91facb9bfa9f0acd48
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Wed Feb 28 17:03:37 2007 -0800

    bonding: Improve IGMP join processing
    
    	In active-backup mode, the current bonding code duplicates IGMP
    traffic to all slaves, so that switches are up to date in case of a
    failover from an active to a backup interface.  If bonding then fails
    back to the original active interface, it is likely that the "active
    slave" switch's IGMP forwarding for the port will be out of date until
    some event occurs to refresh the switch (e.g., a membership query).
    
    	This patch alters the behavior of bonding to no longer flood
    IGMP to all ports, and to issue IGMP JOINs to the newly active port at
    the time of a failover.  This insures that switches are kept up to date
    for all cases.
    
    	"GOELLESCH Niels" <niels.goellesch@eurocontrol.int> originally
    reported this problem, and included a patch.  His original patch was
    modified by Jay Vosburgh to additionally remove the existing IGMP flood
    behavior, use RCU, streamline code paths, fix trailing white space, and
    adjust for style.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e245cb71d490e5e516c0ca0688fad7de6c22943d
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Wed Feb 28 17:03:27 2007 -0800

    bonding: only receive ARPs for us
    
    	The ARP validation code only needs ARPs for the bonding device.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c4f283b1f275e5528c13c119e5cfc80cdba55d00
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Wed Feb 28 17:03:20 2007 -0800

    bonding: fix double dev_add_pack
    
    	Bonding can erroneously register the same packet_type to receive
    ARPs (for use by ARP validation): once at device open time, and once via
    sysfs.  Since sysfs can change the validate setting (and thus register
    or unregister) at any time, a flag is needed to synchronize with device
    open in order to avoid double registrations, and the simplest place is
    within the packet_type structure itself.  Double unregister is not an
    issue.
    
    	Bug reported by Ulrich Oelmann <ulrich.oelmann@web.de>.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2f24d159d5ac418c946e0d38ada46345753688b1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 15 18:56:43 2007 +0100

    [ALSA] cmipci - Allow to disable integrated FM port
    
    The driver didn't allow to disable the integrated FM port (if available),
    and this annoyed people who don't want FM port.  Now fm_port=0 disables
    the FM port unconditionally.  fm_port=1 is used for enabling the integrated
    FM port (as default).
    Also fixed the documentation about this option.
    Fix ALSA bug#2491.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit dd87da1c5d3fd1d973d52e468f76fcc72ad69bd5
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Feb 26 16:07:42 2007 +0100

    [ALSA] hda-codec - Fix logic error in headphone mute for Conexant codecs
    
    This patch fixes a logic error introduced in the previous patch.
    Without it, speaker automute mutes the speakers when headphones are
    removed and unmutes when headphones are plugged in.
    This was reported by Gregorio Guidi after getting the earlier patch
    off this mailing list.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit fe8970b47ae191d932f5bac9e225e74db6e188a3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Feb 26 16:00:34 2007 +0100

    [ALSA] hda-codec - Add missing Mic Boost for AD1986A codec
    
    Added the missing 'Mic Boost' switch for AD1986A codec.
    This influences largely on the recording level of mic-input on some boards.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a31e8c7236f40b42f27c275a959ef129257b0bcd
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 22 12:47:25 2007 +0100

    [ALSA] ac97 - Add Thinkpad X31 and R40 to AD1981x blacklist
    
    Added Thinkpad X31 and R40 to AD1981x line/HP-jack-sense blacklist
    for avoiding the harmful mixer controls.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c187c041c6552339e4d8883a1a00c3c489354eca
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Feb 19 15:27:33 2007 +0100

    [ALSA] Add missing sysfs device assignment for ALSA PCI drivers
    
    Added the missing sysfs device assignment for ALSA PCI drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3fc24d850708b8dfd3472b25eac0c32dd7708925
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Feb 16 13:27:18 2007 +0100

    [ALSA] hda-codec - Define pin configs for MacBooks
    
    Define pin configs for MacBook and MacBook Pro with STAC92xx codecs.
    The latter is detected automatically by checking codec SSID now.
    Also, fixed the documentation regarding available modeliof sigmatel
    codec chips.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cc69d12d0a063fd5f25d9b395357be5ba438b0c6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 15 19:29:26 2007 +0100

    [ALSA] hda-codec - Add missing Mic Boost controls for ALC262
    
    Added missing Mic Boost controls for ALC262 codec chip.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 53ae5194e2f70939ceacd8a9be87f356c646759a
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Wed Feb 14 15:23:57 2007 +0100

    [ALSA] soc - WM9712 PCM volume
    
    This patch suggested by Joe Sauer adds PCM playback volume kcontrol for
    the WM9712.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 847c03e8ac30265787909f5710dee4c564a96df5
Author: Joe Sauer <jsauer@vernier.com>
Date:   Wed Feb 14 15:23:11 2007 +0100

    [ALSA] soc - Fix WM9712 register cache entry
    
    This patch by Joe Sauer fixes the WM9712 codec register cache value for
    register 0x08. Value should be 0x0f0f and not 0xf0f0.
    
    Signed-off-by: Joe Sauer <jsauer@vernier.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 081d17c4726131ba9ed763ea24f7235d8205fdf3
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Thu Feb 15 17:46:18 2007 +0100

    [ALSA] hda-codec - Add method for configuring Mac Pro without PCI SSID
    
    This patch adds a switch to configure systems that do not provide
    PCI SSID's for HD Audio like Mac Pro with ALC885.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f0f9674585c7b0b1abe9efb68667cb16c878cc45
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Feb 14 00:59:17 2007 +0100

    [ALSA] hda-codec - Add LFE support on Dell M90
    
    Added LFE support on Dell M90 laptop.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 63ed71019c4437caef65fca1f83c990ae729024f
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sun Mar 4 04:48:08 2007 +0100

    pata_pdc202xx_old: fix data corruption and other problems
    
    Fix wrong "port" calculations in pdc202xx_{configure_piomode,set_dmamode}()
    They were broken for all configurations except one (master device on primary
    channel, no other devices) and as a result device settings + PIO/DMA timings
    were being programmed into the wrong PCI registers.  This could result in
    a large variety of problems including data corruption, hangs etc. (depending
    on devices used and your luck :-).
    
      ap->port_no   ap->devno   used PCI registers   correct PCI registers
                0           0            0x60-0x62               0x60-0x62
                0           1            0x62-0x64               0x64-0x66
                1           0            0x64-0x66               0x68-0x6a
                1           1            0x66-0x68               0x6c-0x6e
    
    Also forward port recent fixes from drivers/ide pdc202xx_old driver:
    
    * fix XFER_MW_DMA0 timings (they were overclocked, use the official ones)
    
    * fix bitmasks for clearing bits of register B:
    
      - when programming DMA mode bit 0x10 of register B was cleared which
        resulted in overclocked PIO timing setting (iff PIO0 was used)
    
      - when programming PIO mode bits 0x18 weren't cleared so suboptimal
        timings were used for PIO1-4 if PIO0 was previously set (bit 0x10)
        and for PIO0/3/4 if PIO1/2 was previously set (bit 0x08)
    
    and finally bump driver version.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8b966dddc29899008fb178a533263afa8d1ad849
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sat Mar 3 20:57:44 2007 +0100

    pata_legacy: fix io/irq mismatch
    
    pata_legacy fails to detect the disk on my old ISA/VLB 486:
    it starts to probe io=0x1f0 ctr=0x3f6 irq=15, complains
    loudly about IDENTIFYs timing out, and finally fails.
    (Sorry I couldn't capture the kernel's boot messages.)
    
    It turns out that the driver's mapping from io to irq in
    legacy_irq[] is wrong: index 0 for io=0x1f0 has irq=15 but
    should have irq=14, and index 1 for io=0x170 has irq=14 but
    should have irq=15. This is confirmed by a comparison with
    include/asm-i386/ide.h:ide_default_irq().
    
    This patch swaps the first two elements in legacy_irq[],
    which makes pata_legacy work on my 486.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8af12cdb7c4aa9ed278ed71a8b5b130f2d8c8920
Author: Jason Gaston <jason.d.gaston@intel.com>
Date:   Fri Mar 2 17:39:46 2007 -0800

    ahci: RAID mode SATA patch for Intel ICH9M
    
    This patch adds the Intel ICH9M RAID controller DID for SATA support.
    
    Signed-off-by:  Jason Gaston <jason.d.gaston@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8a236264f7d6db3f52881d37a86c5a5f704072b0
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Mar 6 00:31:00 2007 +0000

    [CIFS] cifs_prepare_write was incorrectly rereading page in some cases
    
    Noticed by Shaggy.
    
    Signed-off-by: Shaggy <shaggy@us.ibm.com>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 2470b648e17e0216922bb78c7f05b4668402459a
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Mar 5 23:36:02 2007 +0100

    [S390] cio: Call cancel_halt_clear even when actl == 0.
    
    The subchannel may just be status pending, even with actl == 0. We
    must go through the cancel_halt_clear procedure to put the subchannel
    into a defined state.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7c8427c3fa1b2e77c5bd8cf219c1d55dccd0f167
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Mar 5 23:35:59 2007 +0100

    [S390] cio: Use path verification to check for path state.
    
    After I/O has been killed by the common I/O layer, trigger path
    verification which will queue cio_device_nopath_notify itself if it
    finds a device to be without paths.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit ee04bbccdeb11bdbc54015be8dca30a0deeca5e4
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Mar 5 23:35:56 2007 +0100

    [S390] cio: Fix locking when calling notify function.
    
    Make sure we hold the device lock when we modify the ccw device
    structure but always call the notify function without the lock held.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 482b05dd533da162fa8d04c61712fae297bea3e0
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Mon Mar 5 23:35:54 2007 +0100

    [S390] Fixed handling of access register mode faults.
    
    Replaced check_user_space() + __check_access_register with the new
    check_space(). The old functions made wrong assumptions about kernel
    and user space when the kernel and user address spaces are switched
    (kernel in home space, user in primary/secondary space).
    Secondly the user process can switch to the accress register mode if
    it is running in primary or secondary mode. In addition it can load
    an arbitrary value to the access registers. If any other value than
    0 for primary space or 1 for secondary space is loaded and memory
    is accessed using the base register related to the access register,
    the program should be terminated with a SIGSEGV. To achieve that the
    DUALD pointer in the DUCT and the PSALD pointer in the PASTE need
    to point to an array of 8 invalid access-list entries to get a
    ALEN-translation exception if an invalid alet is used.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 046f3e821f146d6c473edb033af15a0604957af8
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Mon Mar 5 23:35:52 2007 +0100

    [S390] dasd: Use default recovery for SNSS requests
    
    For extended error reporting we sometimes have to start an
    Sense Subsystem Status request (SNSS). When this request needs
    to be recovered for some reason, the recovery request will
    fail with 'command reject'.
    Our usual recovery procedure will retry the failed request by
    creating a new request and chaining the failed request from that
    one. SNSS requests, though, must not be chained from anything,
    so the recovery request will fail permanently.
    Use the default recovery for SNSS request, which will just restart
    the original request without further ado.
    
    Signed-off-by: Stefan Weinhuber <wein@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 5ea732fba7cf1ccded5e762f219a892be4d8d8dc
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 5 23:35:50 2007 +0100

    [S390] check_bugs() should be inline.
    
    Don't have functions in header files unless they are inline.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 4925c7e22293dbf2b85351e8c2323ad8282396b3
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Mon Mar 5 23:35:47 2007 +0100

    [S390] tape: Compression overwrites crypto setting
    
    After switching compression on/off with the mt command, tape encryption is no
    longer working. The reason for that is, that the modeset_byte is set to
    the compression value instead of using bitwise and/or bit operations to
    enable/disable the corresponding bit.
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 9c9c17613a78545a4a93b1370924f62eb282c903
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 5 23:35:45 2007 +0100

    [S390] nss: disable kexec.
    
    nss and kexec don't work together since kexec wants to write to the
    read-only text section of the shared kernel image.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit c5dd8586707800cd7bbdefcd675ad7d3c9afcd57
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 5 23:35:43 2007 +0100

    [S390] reipl: move dump_prefix_page out of text section.
    
    Reipl doesn't work on older machines were s390_reset_machine() gets
    called. The reason is that the text section is read-only but the
    variable dump_prefix_page is there. Since s390_reset_machine() writes
    to it we get a protection exception.
    Therefore move dump_prefix_page to the bss section.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 25864162c15e61b494aa619974a4d521270362f7
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 5 23:35:41 2007 +0100

    [S390] smp: disable preemption in smp_call_function/smp_call_function_on
    
    Avoid sprinkling a _lot_ of preempt_disable/preempt_enable pairs.
    This would be necessary for e.g. the iucv driver. Also this way we
    are more consistent with other architectures which disable
    preemption at least for smp_call_function.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit f794c8279d02ccd69429d816eb03fa12c130d06d
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Mar 5 23:35:38 2007 +0100

    [S390] kprobes breaks BUG_ON
    
    The illegal operation handler calls the die notifier with DIE_BPT to
    let kprobes pick up its breakpoint. If kprobes does not find its
    breakpoint it returns NOTIFY_STOP instead of NOTIFY_DONE.
    Since we use stop_machine_run on s390 to arm/disarm the kprobes
    breakpoints the race that kprobe_handler tries to solve by checking
    for the kprobes breakpoints does not exist. Removing the check makes
    BUG_ON working again.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 187f5f84ef14a07dccf5f4503099708d60f6a724
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Mon Mar 5 13:32:48 2007 -0800

    [INET]: twcal_jiffie should be unsigned long, not int
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 122d76bd872d07d428f94c509428a65476e9b1af
Author: Jan Altenberg <jan@linutronix.de>
Date:   Mon Mar 5 13:29:55 2007 -0800

    [GIANFAR]: Fix compile error in latest git
    
    I recognized a compile error in latest git:
    
    /here/workdir/git/drivers/net/gianfar.c: In function `gfar_vlan_rx_kill_vid':
    /here/workdir/git/drivers/net/gianfar.c:1135: error: structure has no member named `vgrp'
    
    This error was introduced in commit:
    
    commit 6d04e3b04b6ab569cabeb5ca28ad1be11777e895
     ...
          [VLAN]: Avoid a 4-order allocation.
    
    
    Signed-off-by: Jan Altenberg <jan@linutronix.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f30e1867cb73602c6ed7f97e15a48e0a0c96cde
Author: Florian Zumbiehl <florz@gmx.de>
Date:   Sun Mar 4 16:03:22 2007 -0800

    [PPPOE]: Use ifindex instead of device pointer in key lookups.
    
    Otherwise we can potentially try to dereference a NULL device
    pointer in some cases.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc5f77434721a84705601e4d448d331c73900759
Author: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
Date:   Sun Mar 4 16:00:32 2007 -0800

    [NETFILTER]: ip6_route_me_harder should take into account mark
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b4d6202b3652f5dbce358b99dee7d7c80b567529
Author: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
Date:   Sun Mar 4 16:00:04 2007 -0800

    [NETFILTER]: nfnetlink_log: fix reference counting
    
    Fix reference counting (memory leak) problem in __nfulnl_send() and callers
    related to packet queueing.
    
    Signed-off-by: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7d90e86d31e8beeb66d6754aece890ac4a579887
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Mar 4 15:59:45 2007 -0800

    [NETFILTER]: nfnetlink_log: fix module reference counting
    
    Count module references correctly: after instance_destroy() there
    might be timer pending and holding a reference for this netlink instance.
    
    Based on patch by Michal Miroslaw <mirq-linux@rere.qmqm.pl>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd16704eba171b32ef0cded3a4f562b33b911066
Author: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
Date:   Sun Mar 4 15:59:20 2007 -0800

    [NETFILTER]: nfnetlink_log: fix possible NULL pointer dereference
    
    Eliminate possible NULL pointer dereference in nfulnl_recv_config().
    
    Signed-off-by: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a497097d35d37b47e885cf15bcaea01f279fe5e6
Author: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
Date:   Sun Mar 4 15:59:01 2007 -0800

    [NETFILTER]: nfnetlink_log: fix NULL pointer dereference
    
    Fix the nasty NULL dereference on multiple packets per netlink message.
    
    BUG: unable to handle kernel NULL pointer dereference at virtual address 00000004
     printing eip:
    f8a4b3bf
    *pde = 00000000
    Oops: 0002 [#1]
    SMP
    Modules linked in: nfnetlink_log ipt_ttl ipt_REDIRECT xt_tcpudp iptable_nat nf_nat nf_conntrack_ipv4 xt_state ipt_ipp2p xt_NFLOG xt_hashlimit ip6_tables iptable_filter xt_multiport xt_mark ipt_set iptable_raw xt_MARK iptable_mangle ip_tables cls_fw cls_u32 sch_esfq sch_htb ip_set_ipmap ip_set ipt_ULOG x_tables dm_snapshot dm_mirror loop e1000 parport_pc parport e100 floppy ide_cd cdrom
    CPU:    0
    EIP:    0060:[<f8a4b3bf>]    Not tainted VLI
    EFLAGS: 00010206   (2.6.20 #5)
    EIP is at __nfulnl_send+0x24/0x51 [nfnetlink_log]
    eax: 00000000   ebx: f2b5cbc0   ecx: c03f5f54   edx: c03f4000
    esi: f2b5cbc8   edi: c03f5f54   ebp: f8a4b3ec   esp: c03f5f30
    ds: 007b   es: 007b   ss: 0068
    Process swapper (pid: 0, ti=c03f4000 task=c03bece0 task.ti=c03f4000)
    Stack: f2b5cbc0 f8a4b401 00000100 c0444080 c012af49 00000000 f6f19100 f6f19000
           c1707800 c03f5f54 c03f5f54 00000123 00000021 c03e8d08 c0426380 00000009
           c0126932 00000000 00000046 c03e9980 c03e6000 0047b007 c01269bd 00000000
    Call Trace:
     [<f8a4b401>] nfulnl_timer+0x15/0x25 [nfnetlink_log]
     [<c012af49>] run_timer_softirq+0x10a/0x164
     [<c0126932>] __do_softirq+0x60/0xba
     [<c01269bd>] do_softirq+0x31/0x35
     [<c0104f6e>] do_IRQ+0x62/0x74
     [<c01036cb>] common_interrupt+0x23/0x28
     [<c0101018>] default_idle+0x0/0x3f
     [<c0101045>] default_idle+0x2d/0x3f
     [<c01010fa>] cpu_idle+0xa0/0xb9
     [<c03fb7f5>] start_kernel+0x1a8/0x1ac
     [<c03fb293>] unknown_bootoption+0x0/0x181
     =======================
    Code: 5e 5f 5b 5e 5f 5d c3 53 89 c3 8d 40 1c 83 7b 1c 00 74 05 e8 2c ee 6d c7 83 7b 14 00 75 04 31 c0 eb 34 83 7b 10 01 76 09 8b 43 18 <66> c7 40 04 03 00 8b 53 34 8b 43 14 b9 40 00 00 00 e8 08 9a 84
    EIP: [<f8a4b3bf>] __nfulnl_send+0x24/0x51 [nfnetlink_log] SS:ESP 0068:c03f5f30
     <0>Kernel panic - not syncing: Fatal exception in interrupt
     <0>Rebooting in 5 seconds..
    
    Panic no more!
    
    Signed-off-by: Micha Mirosaw <mirq-linux@rere.qmqm.pl>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 05f7b7b369e039458a77768619dde123d868c78d
Author: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
Date:   Sun Mar 4 15:58:40 2007 -0800

    [NETFILTER]: nfnetlink_log: fix use after free
    
    Paranoia: instance_put() might have freed the inst pointer when we
    spin_unlock_bh().
    
    Signed-off-by: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed32abeaf3a3da79b63af6a75f0bd0aa7e7eed9e
Author: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
Date:   Sun Mar 4 15:58:15 2007 -0800

    [NETFILTER]: nfnetlink_log: fix reference leak
    
    Stop reference leaking in nfulnl_log_packet(). If we start a timer we
    are already taking another reference.
    
    Signed-off-by: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d3ab4298aa136d07219664d563d8decf0e75693f
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Mar 4 15:57:46 2007 -0800

    [NETFILTER]: tcp conntrack: accept SYN|URG as valid
    
    Some stacks apparently send packets with SYN|URG set. Linux accepts
    these packets, so TCP conntrack should to.
    
    Pointed out by Martijn Posthuma <posthuma@sangine.com>.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e281db5cdfc3ab077ab3e459d098cb4fde0bc57a
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Mar 4 15:57:25 2007 -0800

    [NETFILTER]: nf_conntrack/nf_nat: fix incorrect config ifdefs
    
    The nf_conntrack_netlink config option is named CONFIG_NF_CT_NETLINK,
    but multiple files use CONFIG_IP_NF_CONNTRACK_NETLINK or
    CONFIG_NF_CONNTRACK_NETLINK for ifdefs.
    
    Fix this and reformat all CONFIG_NF_CT_NETLINK ifdefs to only use a line.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ec68e97dedacc1c7fb20a4b23b7fa76bee56b5ff
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Mar 4 15:57:01 2007 -0800

    [NETFILTER]: conntrack: fix {nf,ip}_ct_iterate_cleanup endless loops
    
    Fix {nf,ip}_ct_iterate_cleanup unconfirmed list handling:
    
    - unconfirmed entries can not be killed manually, they are removed on
      confirmation or final destruction of the conntrack entry, which means
      we might iterate forever without making forward progress.
    
      This can happen in combination with the conntrack event cache, which
      holds a reference to the conntrack entry, which is only released when
      the packet makes it all the way through the stack or a different
      packet is handled.
    
    - taking references to an unconfirmed entry and using it outside the
      locked section doesn't work, the list entries are not refcounted and
      another CPU might already be waiting to destroy the entry
    
    What the code really wants to do is make sure the references of the hash
    table to the selected conntrack entries are released, so they will be
    destroyed once all references from skbs and the event cache are dropped.
    
    Since unconfirmed entries haven't even entered the hash yet, simply mark
    them as dying and skip confirmation based on that.
    
    Reported and tested by Chuck Ebbert <cebbert@redhat.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 78ad0b840848bebe266bcc8f1f9be429d2105264
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Mar 4 20:36:18 2007 -0800

    [SPARC64]: Fix floppy build failure.
    
    Just define a local {claim,release}_dma_lock() implementation
    for the floppy driver to use so we don't need to define and
    export to modules the silly dma_spin_lock.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3442e296517aee733d62fc3fe03211598902c7d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 5 14:46:30 2007 +0100

    [PATCH] paravirt: re-enable COMPAT_VDSO
    
    CONFIG_PARAVIRT broke old glibc bootup: it silently turned off the
    selectability of CONFIG_COMPAT_VDSO and thus rendered distro kernels
    unbootable on old-style VDSO glibc setups.
    
    the proper solution is to keep COMPAT_VDSO available - if a hypervisor
    needs any modification of that concept then we'll judge those changes in
    full context, once those changes are submitted.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 227c5fe7993a5430e582dfd4c3acd9484004c6fc
Merge: 6ebf622... 202d4e6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Mar 5 08:25:43 2007 -0800

    Merge branch 'for-linus' of git://git.o-hand.com/linux-rpurdie-backlight
    
    * 'for-linus' of git://git.o-hand.com/linux-rpurdie-backlight:
      backlight: Allow enable/disable of fb backlights, fixing regressions
      backlight: Fix nvidia backlight initial brightness

commit 6ebf622b2577c50b1f496bd6a5e8739e55ae7b1c
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 5 13:20:11 2007 +0100

    [PATCH] disable NMI watchdog by default
    
    there's a new NMI watchdog related problem: KVM crashes on certain
    bzImages because ... we enable the NMI watchdog by default (even if the
    user does not ask for it) , and no other OS on this planet does that so
    KVM doesnt have emulation for that yet. So KVM injects a #GP, which
    crashes the Linux guest:
    
     general protection fault: 0000 [#1]
     PREEMPT SMP
     Modules linked in:
     CPU:    0
     EIP:    0060:[<c011a8ae>]    Not tainted VLI
     EFLAGS: 00000246   (2.6.20-rc5-rt0 #3)
     EIP is at setup_apic_nmi_watchdog+0x26d/0x3d3
    
    and no, i did /not/ request an nmi_watchdog on the boot command line!
    
    Solution: turn off that darn thing! It's a debug tool, not a 'make life
    harder' tool!!
    
    with this patch the KVM guest boots up just fine.
    
    And with this my laptop (Lenovo T60) also stopped its sporadic hard
    hanging (sometimes in acpi_init(), sometimes later during bootup,
    sometimes much later during actual use) as well. It hung with both
    nmi_watchdog=1 and nmi_watchdog=2, so it's generally the fact of NMI
    injection that is causing problems, not the NMI watchdog variant, nor
    any particular bootup code.
    
    [ NMI breaks on some systems, esp in combination with SMM -Arjan ]
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0d05ad2c09af9fb33ae76f9f8d1c4e4d1a9de92c
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 5 13:15:40 2007 +0100

    [PATCH] paravirt: let users decide whether they want VMI
    
    do not use default=y for CONFIG_VMI (we do not do that for any driver or
    special-hardware feature): the overwhelming majority of Linux users does
    not need it, and interested users and distributions can enable it
    as-needed.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e9417fb324f355e8e0b5d78d3b5dc7b90693fdfb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 5 13:13:46 2007 +0100

    [PATCH] paravirt: clarify VMI description
    
    Clarify the description of the CONFIG_VMI option: describe the reality
    that VMI is a VMWare-only interface for now. Once that changes and
    another hypervisor adopts the VMI ABI we can change the text.
    
    As can be seen from the Xen paravirtualization patches submitted to lkml
    the Xen project has chosen its own, non-VMI interface between Xen and
    the para-Linux - so remove Xen from the description.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3f1a73b6dd52f1f279c05263ee79ca14f45d9d25
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Mar 5 12:29:28 2007 +0100

    [PATCH] paravirt: remove NO_IDLE_HZ on x86
    
    Temove the mistaken turning on of NO_IDLE_HZ on x86+PARAVIRT kernels.
    
    It's an obsolete, limited form of dynticks.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8690ba446defe2e2b81803756c099d2943dfd5fd
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Mar 5 01:35:36 2007 -0800

    [PATCH] video/aty/mach64_ct.c: fix bogus delay loop
    
    CT based mach64 cards were reported to hang on sparc64 boxes when
    compiled with gcc-4.1.x and later.
    
    Looking at this piece of code, it's no surprise.  A critical
    delay was implemented as an empty for() loop, and gcc 4.0.x
    and previous did not optimize it away, so we did get a delay.
    
    But gcc-4.1.x and later can optimize it away, and we get crashes.
    
    Use a real udelay() to fix this.  Fix verified on SunBlade100.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8f485612231792373580e8b2fe8ceb3791549aa5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Mar 5 00:30:56 2007 -0800

    [PATCH] arch/i386/kernel/vmi.c must #include <asm/kmap_types.h>
    
      CC      arch/i386/kernel/vmi.o
    /home/bunk/linux/kernel-2.6/linux-2.6.21-rc2-mm1/arch/i386/kernel/vmi.c: In function 'vmi_map_pt_hook':
    /home/bunk/linux/kernel-2.6/linux-2.6.21-rc2-mm1/arch/i386/kernel/vmi.c:387: error: 'KM_PTE0' undeclared (first use in this function)
    /home/bunk/linux/kernel-2.6/linux-2.6.21-rc2-mm1/arch/i386/kernel/vmi.c:387: error: (Each undeclared identifier is reported only once
    /home/bunk/linux/kernel-2.6/linux-2.6.21-rc2-mm1/arch/i386/kernel/vmi.c:387: error: for each function it appears in.)
    /home/bunk/linux/kernel-2.6/linux-2.6.21-rc2-mm1/arch/i386/kernel/vmi.c:387: error: 'KM_PTE1' undeclared (first use in this function)
    make[2]: *** [arch/i386/kernel/vmi.o] Error 1
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 00f8b0c1856447186f4d28a00c9ad955c566371d
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Mon Mar 5 00:30:55 2007 -0800

    [PATCH] usb-storage: do not rebuild when kernel version changes
    
    Replacing use of UTS_RELEASE with utsname()->release avoids that the
    usb-storage driver is recompiled each time the kernel version changes.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f9c99463b0cd05603d125c915e2886d55a686b82
Author: Roland Kletzing <devzero@web.de>
Date:   Mon Mar 5 00:30:54 2007 -0800

    [PATCH] Documentation for io-accounting / reporting via procfs
    
    Add some documentation for the new and very useful io-accounting feature.
    It's being added to Documentation/filesystems/proc.txt
    
    Signed-off-by: Roland Kletzing <devzero@web.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 721c04c65f5905ef64732394f6ae147be0aebf69
Author: Antonino Daplas <adaplas@gmail.com>
Date:   Mon Mar 5 00:30:54 2007 -0800

    [PATCH] atyfb: Fix kconfig error
    
    Fix the following compile error:
    
      MODPOST 327 modules
    WARNING: "aty_st_lcd" [drivers/video/aty/atyfb.ko] undefined!
    WARNING: "aty_ld_lcd" [drivers/video/aty/atyfb.ko] undefined!
    make[1]: *** [__modpost] Error 1
    make: *** [modules] Error 2
    
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6346190b2fc0937bbc319b5f0e329789fb846ae6
Author: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
Date:   Mon Mar 5 00:30:53 2007 -0800

    [PATCH] char/epca.c: remove unused function
    
    "drivers/char/epca.c:2741: warning: 'get_termio' defined but not used"
    
    Signed-off-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e81ce1f7ecdaed2844c75313b09af791d44e6373
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Mar 5 00:30:51 2007 -0800

    [PATCH] timer/hrtimer: take per cpu locks in sane order
    
    Doing something like this on a two cpu system
    
      # echo 0 > /sys/devices/system/cpu/cpu0/online
      # echo 1 > /sys/devices/system/cpu/cpu0/online
      # echo 0 > /sys/devices/system/cpu/cpu1/online
    
    will give me this:
    
      =======================================================
      [ INFO: possible circular locking dependency detected ]
      2.6.21-rc2-g562aa1d4-dirty #7
      -------------------------------------------------------
      bash/1282 is trying to acquire lock:
       (&cpu_base->lock_key){.+..}, at: [<000000000005f17e>] hrtimer_cpu_notify+0xc6/0x240
    
      but task is already holding lock:
       (&cpu_base->lock_key#2){.+..}, at: [<000000000005f174>] hrtimer_cpu_notify+0xbc/0x240
    
      which lock already depends on the new lock.
    
    This happens because we have the following code in kernel/hrtimer.c:
    
      migrate_hrtimers(int cpu)
      [...]
      old_base = &per_cpu(hrtimer_bases, cpu);
      new_base = &get_cpu_var(hrtimer_bases);
      [...]
      spin_lock(&new_base->lock);
      spin_lock(&old_base->lock);
    
    Which means the spinlocks are taken in an order which depends on which cpu
    gets shut down from which other cpu. Therefore lockdep complains that there
    might be an ABBA deadlock. Since migrate_hrtimers() gets only called on
    cpu hotplug it's safe to assume that it isn't executed concurrently on a
    
    The same problem exists in kernel/timer.c: migrate_timers().
    
    As pointed out by Christian Borntraeger one possible solution to avoid
    the locking order complaints would be to make sure that the locks are
    always taken in the same order. E.g. by taking the lock of the cpu with
    the lower number first.
    
    To achieve this we introduce two new spinlock functions double_spin_lock
    and double_spin_unlock which lock or unlock two locks in a given order.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: John Stultz <johnstul@us.ibm.com>
    Cc: Christian Borntraeger <cborntra@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6bb74df481223731af6c7e0ff3adb31f6442cfcd
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Mar 5 00:30:50 2007 -0800

    [PATCH] clocksource init adjustments (fix bug #7426)
    
    This patch resolves the issue found here:
    http://bugme.osdl.org/show_bug.cgi?id=7426
    
    The basic summary is:
    Currently we register most of i386/x86_64 clocksources at module_init
    time. Then we enable clocksource selection at late_initcall time. This
    causes some problems for drivers that use gettimeofday for init
    calibration routines (specifically the es1968 driver in this case),
    where durring module_init, the only clocksource available is the low-res
    jiffies clocksource. This may cause slight calibration errors, due to
    the small sampling time used.
    
    It should be noted that drivers that require fine grained time may not
    function on architectures that do not have better then jiffies
    resolution timekeeping (there are a few). However, this does not
    discount the reasonable need for such fine-grained timekeeping at init
    time.
    
    Thus the solution here is to register clocksources earlier (ideally when
    the hardware is being initialized), and then we enable clocksource
    selection at fs_initcall (before device_initcall).
    
    This patch should probably get some testing time in -mm, since
    clocksource selection is one of the most important issues for correct
    timekeeping, and I've only been able to test this on a few of my own
    boxes.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4540768011352d38afb89d400eacb3e261507b70
Author: David Rientjes <rientjes@google.com>
Date:   Mon Mar 5 00:30:49 2007 -0800

    [PATCH] x86_64: remove unusued 'flags' variable
    
    Removes unused 'flags' variable from setup_IO_APIC_irq().
    
    Signed-off-by: David Rientjes <rientjes@google.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4ff31d7757f57074ccfef352b9d156023914fb2b
Author: Christian Krafft <krafft@de.ibm.com>
Date:   Mon Mar 5 00:30:48 2007 -0800

    [PATCH] ipmi: check, if default ports are accessible on PPC
    
    ipmi_si_intf tries to access default ports, if no device could be found
    elsewhere.  On PPC we have a function to check, if these legacy IO ports
    are accessible.  This patch adds a check for these ports on PPC.  This
    patch fixes a breakage of IPMI module on PPC machines without a BMC.
    
    Signed-off-by: Christian Krafft <krafft@de.ibm.com>
    Acked-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a8fa74ab529f23f812092ece8d7a4766af092332
Author: Dmitriy Monakhov <dmonakhov@openvz.org>
Date:   Mon Mar 5 00:30:47 2007 -0800

    [PATCH] ecryptfs: handle AOP_TRUNCATED_PAGE better
    
    - In fact we don't have to fail if AOP_TRUNCATED_PAGE was returned from
      prepare_write or commit_write. It is beter to retry attempt where it
      is possible.
    
    - Rearange ecryptfs_get_lower_page() error handling logic, make it more clean.
    
    Signed-off-by: Dmitriy Monakhov <dmonakhov@openvz.org>
    Acked-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 82b16528405131eadc18285da982d4806f6db34e
Author: Dmitriy Monakhov <dmonakhov@sw.ru>
Date:   Mon Mar 5 00:30:46 2007 -0800

    [PATCH] ecryptfs: lower root result must be adirectory
    
    - Currently after path_lookup succeed we dot't have any guarantie what
      it is DIR. This must be explicitly demanded.
    - path_lookup can't return negative dentry, So inode check is useless.
    
    Signed-off-by: Dmitriy Monakhov <dmonakhov@openvz.org>
    Acked-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a5f5e43e2b1377392f9afe93aca29b9abf1d6a44
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Mar 5 00:30:45 2007 -0800

    [PATCH] fix "NMI appears to be stuck"
    
      Testing NMI watchdog ... CPU#0: NMI appears to be stuck (54->54)!
      CPU#1: NMI appears to be stuck (0->0)!
    
    Keep the PIT/HPET alive when nmi_watchdog = 1 is given on the command
    line.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6d3baf2eb8bd680b2d4f509bc3dbf4dcd6e27a40
Author: Neil Brown <neilb@suse.de>
Date:   Mon Mar 5 00:30:44 2007 -0800

    [PATCH] md: fix for raid6 reshape
    
    Recent patch for raid6 reshape had a change missing that showed up in
    subsequent review.
    
    Many places in the raid5 code used "conf->raid_disks-1" to mean "number of
    data disks".  With raid6 that had to be changed to "conf->raid_disk -
    conf->max_degraded" or similar.  One place was missed.
    
    This bug means that if a raid6 reshape were aborted in the middle the
    recorded position would be wrong.  On restart it would either fail (as the
    position wasn't on an appropriate boundary) or would leave a section of the
    array unreshaped, causing data corruption.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c6b36e9a3c57b73c7a6bdf787baa55f21195bba9
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:43 2007 -0800

    [PATCH] vmi: smp fixes
    
    Critical fixes for SMP.
    
    Fix a couple functions which needed to be __devinit and fix a bogus parameter
    to AP startup that just so happened to work because the low virtual mapping of
    memory was still established.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 772205f62ebcce2d60bfa5166f56c78044afab7d
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:41 2007 -0800

    [PATCH] vmi: apic ops
    
    Use para_fill instead of directly setting the APIC ops to the result of the
    vmi_get_function call - this allows one to implement a VMI ROM without
    implementing APIC functions, just using the native APIC functions.
    
    While doing this, I realized that there is a lot more cleanup that should have
    been done.  Basically, we should never assume that the ROM implements a
    specific set of functions, and always allow fallback to the native
    implementation.
    
    This is critical for future compatibility.
    
    Signed-off-by: Anthony Liguori <anthony@codemonkey.ws>
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a9eddc952870d29aa9df96ab862327eb6afa23d9
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:41 2007 -0800

    [PATCH] vmi: fix nohz compile
    
    More goo from hrtimers integration.  We do compile and run properly with NO_HZ
    enabled.  There was a period when we didn't because of a missing export, but
    that was since fixed.
    
    And with the clocksource code now firmly in place, we can get rid of code that
    fixes up the wallclock, since this is done in the common infrastructure.  This
    actually fixes a timer bug as well, that was caused by do_settimeofday no
    longer being callable with interrupts disabled due to the use of
    on_each_cpu().
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e30fab3ad34aa8bfb55c9f0337d4a92a0595f41f
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:39 2007 -0800

    [PATCH] vmi: pit override
    
    The time_init_hook in paravirt-ops no longer functions in the correct manner
    after the integration of the hrtimers code.  The problem is that now the call
    path for time initialization is:
    
      time_init :
           late_time_init = hpet_time_init;
    
      late_time_init -> hpet_time_init:
           setup_pit_timer (BAD)
           do_time_init --> (via paravirt.h)
              time_init_hook --> (via arch_hooks.h)
                  time_init_hook (in SUBARCH/setup.c)
    
    If this isn't confusing enough, the paravirt case goes through an indirect
    function pointer in the paravirt-ops table.  The problem is, by the time the
    paravirt hook is called, the pit timer is already enabled.
    
    But paravirt guests have their own timer, and don't want to use the PIT.
    Rather than intensify the struggle for power going on here, just make it all
    nice and simple and just unconditionally do all timer setup in the
    late_time_init hook.  This also has the advantage of enabling timers in the
    same place in all code paths, so everyone has the same bugs and we don't have
    outliers who break other code because they turn on timer too early or too
    late.
    
    So the paravirt-ops time init function is now by default hpet_time_init, which
    is the time init function used for native hardware.  Paravirt guests have the
    chance to override this when they setup the paravirt-ops table, and should
    need no change.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit eda08b1befaabcdfea1a9216ae13f9065e69baa7
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:38 2007 -0800

    [PATCH] vmi: paravirt drop udelay op
    
    Not respecting udelay causes problems with any virtual hardware that is passed
    through to real hardware.  This can be noticed by any device that interacts
    with the real world in real time - like AP startup, which takes real time.  Or
    keyboard LEDs, which should blink in real-time.  Or floppy drives, but only
    when passed through to a real floppy controller on OSes which can't
    sufficiently buffer the floppy commands to emulate a zero latency floppy.  Or
    IDE drives, when connecting to a physical CDROM.
    
    This was mostly a hack to get the kernel to boot faster, but it introduced a
    number of misvirtualization bugs, and Alan and Pavel argued pretty strongly
    against it.  We were the only client, and now want to clean up this cruft.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9a1c13e91f100c12dcad3a1be1b12890bf32f6ff
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:37 2007 -0800

    [PATCH] vmi: fix highpte
    
    Provide a PT map hook for HIGHPTE kernels to designate where they are mapping
    page tables.  This information is required so the physical address of PTE
    updates can be determined; otherwise, the mm layer would have to carry the
    physical address all the way to each PTE modification callsite, which is even
    more hideous that the macros required to provide the proper hooks.
    
    So lets not mess up arch neutral code to achieve this, but keep the horror in
    an #ifdef HIGHPTE in include/asm-i386/pgtable.h.  I had to use macros here
    because some types are not yet defined in all the include paths for this
    header.
    
    This patch is absolutely required for HIGHPTE kernels to operate properly with
    VMI.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1182d8528b620c23d043bccbbef092b42062960a
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:36 2007 -0800

    [PATCH] vmi: cpu cycles fix
    
    In order to share the common code in tsc.c which does CPU Khz calibration, we
    need to make an accurate value of CPU speed available to the tsc.c code.  This
    value loses a lot of precision in a VM because of the timing differences with
    real hardware, but we need it to be as precise as possible so the guest can
    make accurate time calculations with the cycle counters.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6cb9a8350aee789100a365794272ed20cc8f2401
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:35 2007 -0800

    [PATCH] vmi: sched clock paravirt op fix
    
    The custom_sched_clock hook is broken.  The result from sched_clock needs to
    be in nanoseconds, not in CPU cycles.  The TSC is insufficient for this
    purpose, because TSC is poorly defined in a virtual environment, and mostly
    represents real world time instead of scheduled process time (which can be
    interrupted without notice when a virtual machine is descheduled).
    
    To make the scheduler consistent, we must expose a different nature of time,
    that is scheduled time.  So deprecate this custom_sched_clock hack and turn it
    into a paravirt-op, as it should have been all along.  This allows the tsc.c
    code which converts cycles to nanoseconds to be shared by all paravirt-ops
    backends.
    
    It is unfortunate to add a new paravirt-op, but this is a very distinct
    abstraction which is clearly different for all virtual machine
    implementations, and it gets rid of an ugly indirect function which I
    ashamedly admit I hacked in to try to get this to work earlier, and then even
    got in the wrong units.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7507ba34e827ca3c6bbcd34d20a8df8ba365fca6
Author: Zachary Amsden <zach@vmware.com>
Date:   Mon Mar 5 00:30:34 2007 -0800

    [PATCH] vmi: timer fixes round two
    
    Critical bugfixes for the VMI-Timer code.
    
    1) Do not setup a one shot alarm if we are keeping the periodic alarm
       armed.  Additionally, since the periodic alarm can be run at a lower rate
       than HZ, let's fixup the guard to the no-idle-hz mode appropriately.  This
       fixes the bug where the no-idle-hz mode might have a higher interrupt rate
       than the non-idle case.
    
    2) The interrupt handler can no longer adjust xtime due to nested lock
       acquisition.  Drop this.  We don't need to check for wallclock time at
       every tick, it can be done in userspace instead.
    
    3) Add a bypass to disable noidle operation.  This is useful as a last
       minute workaround, or testing measure.
    
    4) The code to skip the IO_APIC timer testing (no_timer_check) should be
       conditional on IO_APIC, not SMP, since UP kernels can have this configured
       in as well.
    
    Signed-off-by: Dan Hecht <dhecht@vmware.com>
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0dc952dc3e6d96d554a19fa7bee3f3b1d55e3cff
Author: Christoph Lameter <clameter@engr.sgi.com>
Date:   Mon Mar 5 00:30:33 2007 -0800

    [PATCH] Page migration: Fix vma flag checking
    
    Currently we do not check for vma flags if sys_move_pages is called to move
    individual pages.  If sys_migrate_pages is called to move pages then we
    check for vm_flags that indicate a non migratable vma but that still
    includes VM_LOCKED and we can migrate mlocked pages.
    
    Extract the vma_migratable check from mm/mempolicy.c, fix it and put it
    into migrate.h so that is can be used from both locations.
    
    Problem was spotted by Lee Schermerhorn
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Lee Schermerhorn <lee.schermerhorn@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1f2b69f9bdce8461341e5fb864568a2ee90079c8
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 5 00:30:31 2007 -0800

    [PATCH] fb: sm501fb off-by-1 sysfs store
    
    Currently sm501fb_crtsrc_store() won't allow the routing to be changed via
    echos from userspace in to the sysfs file.  The reason for this is that the
    strnicmp() for both heads uses a sizeof() for the string length, which ends
    up being strlen() + 1 (\0 in the normal case, but the echo gives a newline,
    which is where the issue occurs), this then causes a mismatch and
    subsequently bails with the -EINVAL.
    
    In addition to this, the hardcoded lengths were then used for the store
    length that was returned, which ended up being erroneous and resulting in a
    write error.  There's also no point in returning anything but the full
    length since it will -EINVAL out on a mismatch well before then anyways.
    
    sizeof("string") is great for making sure you have space in your buffer,
    but rather less so for string comparisons :-)
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 69f7c0a1be84b10a81b6edcce2dbee0cdec26eba
Author: Con Kolivas <kernel@kolivas.org>
Date:   Mon Mar 5 00:30:29 2007 -0800

    [PATCH] sched: remove SMT nice
    
    Remove the SMT-nice feature which idles sibling cpus on SMT cpus to
    facilitiate nice working properly where cpu power is shared.  The idling of
    cpus in the presence of runnable tasks is considered too fragile, easy to
    break with outside code, and the complexity of managing this system if an
    architecture comes along with many logical cores sharing cpu power will be
    unworkable.
    
    Remove the associated per_cpu_gain variable in sched_domains used only by
    this code.
    
    Also:
    
      The reason is that with dynticks enabled, this code breaks without yet
      further tweaks so dynticks brought on the rapid demise of this code.  So
      either we tweak this code or kill it off entirely.  It was Ingo's preference
      to kill it off.  Either way this needs to happen for 2.6.21 since dynticks
      has gone in.
    
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 759b9775c25f5e69aaea8a75c3914019e2dc5539
Author: Hugh Dickins <hugh@veritas.com>
Date:   Mon Mar 5 00:30:28 2007 -0800

    [PATCH] shmem and simple const super_operations
    
    shmem's super_operations were missed from the recent const-ification;
    and simple_fill_super()'s, which can share with get_sb_pseudo()'s.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Acked-by: Josef 'Jeff' Sipek <jsipek@cs.sunysb.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cc2cccaec88d422e628e6b588078e1dbdc241896
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Mar 5 00:30:27 2007 -0800

    [PATCH] schedule wext/rtnl for removal
    
    Since wext is being replaced as fast as we can (it'll probably stick around
    for legacy drivers though) and the wext/netlink stuff was never really
    used, this schedules it for removal.
    
    The removal schedule is tight but there are no users of the code, the main
    user of the wext user interface are the wireless-tools, they only have an
    alpha version using the netlink interface and even that is incomplete.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit de320199c0f425503eef17883a3ba90464bf35ba
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Mar 5 00:30:26 2007 -0800

    [PATCH] dz: remove struct pt_regs references
    
    Remove remaining references to saved registers now that
    uart_handle_sysrq_char() does not want them.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 49015bee4071d56456ef59f1f82be6531615341c
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 5 00:30:22 2007 -0800

    [PATCH] gpio_keys driver shouldn't be ARM-specific
    
    The gpio_keys driver is wrongly ARM-specific; it can't build on
    other platforms with GPIO suport.  This fixes that problem.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Cc: pHilipp Zabel <philipp.zabel@gmail.com>
    Cc: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Richard Purdie <rpurdie@rpsys.net>
    Cc: Ben Nizette <ben.nizette@iinet.net.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0a938b9768d1fc0e12a884a6820a2e15df5a612c
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 5 00:30:18 2007 -0800

    [PATCH] add CONFIG_GENERIC_GPIO
    
    Most drivers using GPIOs already know they are running on a system that
    supports the generic GPIO calls, because of other platform dependencies.
    But the generic GPIO-based LED and input button drivers can't know that.
    
    So this patch adds a Kconfig hook, GENERIC_GPIO, to mark the platforms
    where <asm/gpio.h> will do the right thing.  Currently that's a bunch of
    ARMs, and AVR32; more are on the way.
    
    It also fixes a dependency bug for the gpio button input driver; it was
    wrong to start with, now it covers all platforms with GENERIC_GPIO.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Arnaud Patard <arnaud.patard@rtp-net.org>
    Cc: <raph@8d.com>
    Cc: <msvoboda@ra.rockwell.com>
    Cc: pHilipp Zabel <philipp.zabel@gmail.com>
    Cc: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ad7c311079412541bebaf1c8436d405cc8c6b2c
Author: Tony Breeds <tony@bakeyournoodle.com>
Date:   Mon Mar 5 00:30:14 2007 -0800

    [PATCH] Fix soft lockup with iSeries viocd driver
    
    Fix soft lockup with iSeries viocd driver, caused by eventually calling
    end_that_request_first() with nr_bytes 0.
    
    Some versions of hald do an SG_IO ioctl on the viocd device which becomes a
    request with hard_nr_sectors and hard_cur_sectors set to zero.  Passing zero
    as the number of sectors to end_request() (which calls
    end_that_request_first()) causes an infinite loop when the bio is being freed.
    
    This patch makes sure that the zero is never passed.  It only requires some
    number larger the the request size the terminate the loop.
    
    The lockup is triggered by hald, interrogating the device.
    
    Signed-off-by: Tony Breeds <tony@bakeyournoodle.com>
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>
    Cc: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5fdc2abe39b76822e34e7029ca5f69fe4bea58d4
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Mar 5 00:30:13 2007 -0800

    [PATCH] parport is an orphan
    
    The writing on the wall seem to be that the parport stack is orphaned,
    rather than maintained by four folk ...  and having a webpage that says the
    latest patches are based on a 2.5 kernel.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ad5f1196792653dadf09c07a5fa917092b469c1c
Author: Dmitriy Monakhov <dmonakhov@sw.ru>
Date:   Mon Mar 5 00:30:12 2007 -0800

    [PATCH] ecryptfs: check xattr operation support fix
    
      - ecryptfs_write_inode_size_to_metadata() error code was ignored.
      - i_op->setxattr() must be supported by lower fs because used below.
    
    Signed-off-by: Monakhov Dmitriy <dmonakhov@openvz.org>
    Acked-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 58e0543e8f355b32f0778a18858b255adb7402ae
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Mar 5 00:30:11 2007 -0800

    [PATCH] msi: support masking msi irqs without a mask bit
    
    For devices that do not support msi-x we only support 1 interrupt.  Therefore
    we can disable that one interrupt by disabling the msi capability itself.  If
    we leave the intx interrupts disabled while we have the msi capability
    disabled no interrupts should be delivered from that device.
    
    Devices with just the minimal msi support (and thus hitting this code path)
    include things like the intel e1000 nic, so it looks like is going to be a
    fairly common case and thus important to get right.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Michael Ellerman <michael@ellerman.id.au>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b1cbf4e4dddd708ba268c3a2bf38383a269d490a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Mar 5 00:30:10 2007 -0800

    [PATCH] msi: fix up the msi enable/disable logic
    
    enable/disable_msi_mode have several side effects which keeps them from being
    generally useful.  So this patch replaces them with with two much more
    targeted functions: msi_set_enable and msix_set_enable.
    
    This patch makes pci_dev->msi_enabled and pci_dev->msix_enabled the definitive
    way to test if linux has enabled the msi capability, and has the appropriate
    msi data structures set up.
    
    This patch ensures that while writing the msi messages in save/restore and
    during device initialization we have the msi capability disabled so we don't
    get into races.  The pci spec requires that we do not have the msi capability
    enabled and the msi messages unmasked while we write the messages.  Completely
    disabling the capability is overkill but it is easy :)
    
    Care has been taken so we never have both a msi capability and intx enabled
    simultaneously.  We haven't run into a problem yet but better safe then sorry.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Michael Ellerman <michael@ellerman.id.au>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f5f2b13129a6541debf8851bae843cbbf48298b7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Mar 5 00:30:07 2007 -0800

    [PATCH] msi: sanely support hardware level msi disabling
    
    In some cases when we are not using msi we need a way to ensure that the
    hardware does not have an msi capability enabled.  Currently the code has been
    calling disable_msi_mode to try and achieve that.  However disable_msi_mode
    has several other side effects and is only available when msi support is
    compiled in so it isn't really appropriate.
    
    Instead this patch implements pci_msi_off which disables all msi and msix
    capabilities unconditionally with no additional side effects.
    
    pci_disable_device was redundantly clearing the bus master enable flag and
    clearing the msi enable bit.  A device that is not allowed to perform bus
    mastering operations cannot generate intx or msi interrupt messages as those
    are essentially a special case of dma, and require bus mastering.  So the call
    in pci_disable_device to disable msi capabilities was redundant.
    
    quirk_pcie_pxh also called disable_msi_mode and is updated to use pci_msi_off.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Michael Ellerman <michael@ellerman.id.au>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 58a53b246b4aed95f3f93b45828c8d9f26b1cfcb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Mar 5 00:30:06 2007 -0800

    [PATCH] io_apic.h needs apicdef.h
    
    A -mm patch caused:
    
    In file included from drivers/pci/quirks.c:532:
    include/asm/io_apic.h:61: error: "MAX_IO_APICS" undeclared here (not in a function)
    
    So let's include the needed header.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d5dedf99e4ca9860ce8a1dd42db1cb666c360632
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Mar 5 00:30:04 2007 -0800

    [PATCH] cyclades: return closing_wait
    
    In http://bugzilla.kernel.org/show_bug.cgi?id=8065, Shen points out that the
    cyclades driver forget to return closing_wait to userspace.
    
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Shen <shanlu@cs.uiuc.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ccd45ad405bcb1504bd923bd0487902374c942c8
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 5 20:19:57 2007 +0900

    sh: Kill off I/O cruft for R7780RP.
    
    We don't have any use for these machvec fixups anymore, kill them all
    off and go with the generic instead.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 39e688a94b94eaba768b1494e19e96f828fc2688
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Mar 5 19:46:47 2007 +0900

    sh: Revert lazy dcache writeback changes.
    
    These ended up causing too many problems on older parts,
    revert for now..
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 202d4e602555e68c2bc71775228876b0356785c8
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Mar 3 17:43:52 2007 +0000

    backlight: Allow enable/disable of fb backlights, fixing regressions
    
    Enabling the backlight by default appears to cause problems for many
    users. This patch disables backlight controls unless explicitly
    enabled by users via a module parameter. Since PMAC users are known
    to work, default to enabled in that case.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 238576e12fef1d52751c6e08db2d0bdb0e248caf
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Feb 26 22:06:09 2007 +0000

    backlight: Fix nvidia backlight initial brightness
    
    Fix a mix up when the nvidia driver was converted resulting
    in the backlight having an incorrect initial brightness.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit c87a7111349891043cb0a62b0ba745264d4b600a
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Mar 1 18:47:08 2007 +0900

    sh: Enable SM501 support for RTS7751R2D.
    
    This enables the SM501 drivers for the R2D board. Additional
    work needs to be done to migrate off of the VoyagerGX cchip
    code to make use of the rest of the mfd infrastructure.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 87e29cacb7d09c81b09224bec395f970df958af4
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Mar 1 15:56:31 2007 +0900

    sh: Use L1_CACHE_BYTES for .data.cacheline_aligned.
    
    Previously this was using a hardcoded 32, use L1_CACHE_BYTES for
    cacheline alignment instead.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 5c36e6578d81f79ede871d3e66a0d6beeffeb3dc
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Mar 1 10:07:42 2007 +0900

    sysctl: Support vdso_enabled sysctl on SH.
    
    All of the logic for this was already in place, we just hadn't wired it
    up in the sysctl table.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit e6bcf562e58662b9765748d346e4c076b20e3aa5
Author: Hideo Saito <saito@densan.co.jp>
Date:   Wed Feb 28 18:35:42 2007 +0900

    sh: Fix kernel thread stack corruption with preempt.
    
    When I run a preemptive kernel-2.6.20 for SH7780, a created
    kthread(pdflush) can not exit by do_exit() in kernel_thread_helper. I
    think that the created kthread should have a room for 'struct pt_regs'
    space on the stack top, because __switch_to() will refer to the space as
    follows using 'regs = task_pt_regs(prev)' and next condition may be true.
    
    Signed-off-by: Hideo Saito <saito@densan.co.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit e523d93c8487667552dd29ff756d6ea6bce30851
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 28 18:30:01 2007 +0900

    doc: Add SH to vdso and earlyprintk in kernel-parameters.txt
    
    SH supports both of these options, add it to the docs.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit c8bfa1fdc84af7b5e3c7f825a9f0bc6e8a19f5d5
Author: Ryusuke Sakato <sakato@hsdv.com>
Date:   Fri Feb 23 13:22:56 2007 +0900

    sh: Fix sigmask trampling in signal delivery.
    
    There was a missing return in do_signal() that caused the saved
    sigmask to be written back after having successfully delivered
    the signal.
    
    Signed-off-by: Ryusuke Sakato <sakato@hsdv.com>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 9432f96803139adaff0cd9f4fa38b7fb99cda366
Author: Stuart Menefy <stuart.menefy@st.com>
Date:   Fri Feb 23 13:22:17 2007 +0900

    sh: Clear UBC when not in use.
    
    This takes care of tearing down the UBC so it's not inadvertently
    left configured at the next context switch time. Failure to do
    this results in spurious SIGTRAPs in certain debug sequences.
    
    Signed-off-by: Stuart Menefy <stuart.menefy@st.com>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 20b0f65d35ae45d43f363ace3744a775a752d265
Merge: 70077f2... 8491388...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 4 13:31:00 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6:
      ide: make legacy IDE VLB modules check for the "probe" kernel params (v2)
      ide: remove some obsoleted kernel params (v2)
      ide/pci/delkin_cb.c: pci_module_init to pci_register_driver
      scc_pata: bugfix for checking DMA IRQ status
      ide: remove a ton of pointless #undef REALLY_SLOW_IO
      siimage: DRAC4 note
      adjust legacy IDE resource setting (v2)
      ide: fix pmac breakage
      ide-cs: Update device table
      ide: ide_get_best_pio_mode() returns incorrect IORDY setting (take 2)
      piix/slc90e66: more tuneproc() fixing (take 2)
      ide: fix drive side 80c cable check, take 2
      cmd64x: fix PIO mode setup (take 3)
      alim15x3: fix PIO mode setup

commit 70077f2fab35ed3d73631fc47d8c572b560ecabd
Merge: 85a5d77... 527e1e1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 4 13:25:28 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [libata] pata_jmicron: build fix

commit 85a5d77abea94c3496f63dc3ba72f5f932daa799
Merge: 6d04e3b... af70dbd...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 4 13:22:12 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (5260): Cx88-blackbird: allow usage of both 376836 and 262144 sized firmware images
      V4L/DVB (5366): Pvrusb2: Fix compilation warning for amd64 builds (use %zu instead of %u)

commit 6d04e3b04b6ab569cabeb5ca28ad1be11777e895
Merge: 4227003... 5c15bde...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 4 13:16:49 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [VLAN]: Avoid a 4-order allocation.
      [HDLC] Fix dev->header_cache_update having a random value.
      [NetLabel]: Verify sensitivity level has a valid CIPSO mapping
      [PPPOE]: Key connections properly on local device.
      [AF_UNIX]: Test against sk_max_ack_backlog properly.
      [NET]: Fix bugs in "Whether sock accept queue is full" checking

commit 42270035c6550101f7dc742a630c2590dd2d3ae0
Merge: 2c89a8d... 8d91cba...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 4 13:15:48 2007 -0800

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm: (30 commits)
      [ARM] Acorn: move the i2c bus driver into drivers/i2c
      [ARM] ARM SCSI: Don't try to dma_map_sg too many scatterlist entries
      [ARM] ARM FAS216: don't modify scsi_cmnd request_bufflen
      [ARM] rtc-pcf8583: Final fixes for this RTC on RiscPC
      [ARM] rtc-pcf8583: correct month and year offsets
      [ARM] rtc-pcf8583: don't use BCD_TO_BIN/BIN_TO_BCD
      [ARM] EBSA110: Work around build errors
      [ARM] 4241/1: Define mb() as compiler barrier on a uniprocessor system
      [ARM] 4239/1: S3C24XX: Update kconfig entries for PM
      [ARM] 4238/1: S3C24XX: docs: update suspend and resume
      [ARM] 4237/2: oprofile: Always allow backtraces on ARM
      [ARM] Yet more asm/apm-emulation.h stuff
      ARM: OMAP: Add missing get_irqnr_preamble and arch_ret_to_user for omap2
      ARM: OMAP: Use linux/delay.h not asm/delay.h
      ARM: OMAP: Remove obsolete alsa typedefs
      ARM: OMAP: omap1510->15xx conversions needed for sx1
      ARM: OMAP: Add missing includes to board-nokia770
      ARM: OMAP: Workqueue changes for board-h4.c
      ARM: OMAP: dmtimer.c omap1 register fix
      ARM: OMAP: board-nokia770: correct lcd name
      ...

commit 2c89a8d09f03bc569d3237d97e2293d67c36d75d
Merge: e9cdb1e... 8b4ac6f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Mar 4 13:15:00 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] MTX1: clear PCI errors
      [MIPS] MTX1: add idsel cardbus ressources
      [MIPS] MTX1: remove unneeded settings
      [MIPS] dma_sync_sg_for_cpu is a no-op except for non-coherent R10000s.
      [MIPS] Cobalt: update reserved resources
      [MIPS] SN: PCI fixup needs to include <irq.h>.
      [MIPS] DMA: Fix a bunch of warnings due to missing inline keywords.
      [MIPS] RM: It should be #ifdef CONFIG_FOO not #if CONFIG_FOO ...
      [MIPS] Fix and cleanup the mess that a dozen prom_printf variants are.
      [MIPS] DEC: Remove redeclarations of mips_machgroup and mips_machtype.
      [MIPS] No need to write c0_compare in plat_timer_setup
      [MIPS] Convert to RTC-class ds1742 driver
      [MIPS] Oprofile: Add missing break statements.
      [MIPS] jmr3927: build fix
      [MIPS] SNI: Fix mc146818_decode_year
      [MIPS] Replace sys32_timer_create with the generic compat_sys_timer_create.
      [MIPS] Replace sys32_socketcall with the generic compat_sys_socketcall.
      [MIPS] N32 waitid is the same as o32.

commit 8d91cbad8e6fd5b37bf584740f134508709ba035
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Mar 4 20:40:50 2007 +0000

    [ARM] Acorn: move the i2c bus driver into drivers/i2c
    
    Move the Acorn IOC/IOMD I2C bus driver from drivers/i2c, strip
    out the reminants of the platform specific parts of the old
    PCF8583 RTC code, and remove the old obsolete PCF8583 driver.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 23d046f43a05155e050a68f3ad1f19b672713374
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Mar 4 20:21:38 2007 +0000

    [ARM] ARM SCSI: Don't try to dma_map_sg too many scatterlist entries
    
    An off-by-one bug meant we were always trying to map one too many
    scatterlist entries.  This was mostly harmless prior to the checks
    going in to consistent_sync(), but now causes the kernel to BUG.
    
    Also, powertec.c was missing an assignment to info->ec.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6b4df7ee1f636f0dbf3896235582559c86cb18aa
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Mar 4 20:19:07 2007 +0000

    [ARM] ARM FAS216: don't modify scsi_cmnd request_bufflen
    
    SCSI doesn't want drivers to modify request_bufflen, so keep a
    driver-private copy of this in the scsi_pointer structure instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bb71f99f8daefb4a2c2441298bc127aaff9af947
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Mar 4 20:33:07 2007 +0000

    [ARM] rtc-pcf8583: Final fixes for this RTC on RiscPC
    
    Replace the I2C bus address, as per drivers/acorn/char/pcf8583.c.
    
    Also, since this driver also contains Acorn RiscPC specific code
    for obtaining the current year from the SRAM (and updating the
    platform specific checksum when writing new data back) this is
    NOT a platform independent driver.
    
    Document it as such, and update the dependencies to reflect this
    fact.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0ed8f210e68236f2034f827596f0a8201a907a9f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Mar 4 20:13:13 2007 +0000

    [ARM] rtc-pcf8583: correct month and year offsets
    
    No, today is not 4th April 3907, it's 4th March 2007.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f5e5b734d4c9ccc1f5f68bdf545bdc4b19681d28
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Mar 4 20:12:07 2007 +0000

    [ARM] rtc-pcf8583: don't use BCD_TO_BIN/BIN_TO_BCD
    
    Both BCD_TO_BIN(x) and BIN_TO_BCD(x) have an unexpected side-effect -
    not only do they return the value as expected, they _modify_ their
    argument in the process.
    
    Let's play it safe and avoid these macros.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8b4ac6f316b493fae511921e25c72119f7b03170
Author: Florian Fainelli <florian.fainelli@int-evry.fr>
Date:   Fri Mar 2 22:08:01 2007 +0100

    [MIPS] MTX1: clear PCI errors
    
    This patch clears PCI errors after showing more debug informations.
    
    Signed-off-by: Florian Fainelli <florian.fainelli@int-evry.fr>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit baa545fddd752f46ced034bc3d95778649b67c2d
Author: Florian Fainelli <florian.fainelli@int-evry.fr>
Date:   Fri Mar 2 22:07:48 2007 +0100

    [MIPS] MTX1: add idsel cardbus ressources
    
    Adds cardbus ressources for MTX1 boards which have a PCMCIA controller.
    
    Signed-off-by: Florian Fainelli <florian.fainelli@int-evry.fr>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6fff989157aa0506520637277ec4653306689c25
Author: Florian Fainelli <florian.fainelli@int-evry.fr>
Date:   Fri Mar 2 22:07:41 2007 +0100

    [MIPS] MTX1: remove unneeded settings
    
    This patch removes unnecessary settings at setup time.
    
    Signed-off-by: Florian Fainelli <florian.fainelli@int-evry.fr>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5b648a98db05fd0152349a11a7f7e30b80643977
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Mar 2 11:42:11 2007 +0000

    [MIPS] dma_sync_sg_for_cpu is a no-op except for non-coherent R10000s.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 47d7c44b87df91fdb5d9c2678fc90afd46c14fbe
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Mar 1 22:50:25 2007 +0900

    [MIPS] Cobalt: update reserved resources
    
    This patch has removed unused timer resource.
    Moreover, the name of reserved resources ware changed.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3a1d8217e1f90c0b63654f25f3f2db0a1101a1e1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 1 15:35:54 2007 +0000

    [MIPS] SN: PCI fixup needs to include <irq.h>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a9b6590ced1370537edad8dc60be32c044b2380e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 1 15:30:01 2007 +0000

    [MIPS] DMA: Fix a bunch of warnings due to missing inline keywords.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 07c0d7437c7061fef61e35183781d126cebf138a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 1 15:29:25 2007 +0000

    [MIPS] RM: It should be #ifdef CONFIG_FOO not #if CONFIG_FOO ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 36a885306fdf7bb557c773309c993bfb2d0d693c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 1 11:56:43 2007 +0000

    [MIPS] Fix and cleanup the mess that a dozen prom_printf variants are.
    
    early_printk is a so much saner thing.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ca471c86043f4a8b01cba02ba2d3431fddcaf606
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 1 10:47:23 2007 +0000

    [MIPS] DEC: Remove redeclarations of mips_machgroup and mips_machtype.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 12e4396bf0b1cd62c9d71a06596914c7efa7dbaf
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Mar 1 01:53:13 2007 +0900

    [MIPS] No need to write c0_compare in plat_timer_setup
    
    If R4k counter was used for hpt_timer and interrupt source,
    c0_hpt_timer_init() initializes the c0_compare register.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a0574e04807608998d4d115c07b7bc12bb499a44
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Mar 1 00:40:21 2007 +0900

    [MIPS] Convert to RTC-class ds1742 driver
    
    The generic rtc-ds1742 driver can be used for RBTX4927 and JMR3927
    (with __swizzle_addr trick).  This patch also removes MIPS local
    DS1742 stuff.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 148171b2ac1fb6a1a9f987f8daedc146c810a8ae
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 28 15:34:22 2007 +0000

    [MIPS] Oprofile: Add missing break statements.
    
    This was causing oprofile to fail on R10000, R12000, R14000.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 69f282765735b1df5e27b373e64e5238caca8c49
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Wed Feb 28 01:42:19 2007 +0900

    [MIPS] jmr3927: build fix
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 49fa3c0869677facd846adc928c332b4c20cdc25
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Sat Feb 3 14:06:10 2007 +0100

    [MIPS] SNI: Fix mc146818_decode_year
    
    Big endian RMs uses a different mc146818_decode_year than little endian RMs
    Correct mc146818_decode_year for years before 2000
    
    Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 821d313c257b9b04c3c82f0b303ee259c00dc620
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 27 01:21:17 2007 +0000

    [MIPS] Replace sys32_timer_create with the generic compat_sys_timer_create.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 08274cefdc9efe709540be5d8e7c002346592d6d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 27 01:11:28 2007 +0000

    [MIPS] Replace sys32_socketcall with the generic compat_sys_socketcall.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 440537ef409c7013134116a7ca155d43d25eb492
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 27 00:56:37 2007 +0000

    [MIPS] N32 waitid is the same as o32.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e9cdb1e330d805f4453c1359cebe2bd6a06ce692
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Thu Mar 1 11:28:13 2007 +0200

    KVM: Move kvmfs magic number to <linux/magic.h>
    
    Use the standard magic.h for kvmfs.
    
    Cc: Avi Kivity <avi@qumranet.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 58e690e6fd47a682b49aed3510443d6797a03021
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 26 16:29:43 2007 +0200

    KVM: Fix bogus failure in kvm.ko module initialization
    
    A bogus 'return r' can cause an otherwise successful module load to fail.
    This both denies users the use of kvm, and it also denies them the use of
    their machine, as it leaves a filesystem registered with its callbacks
    pointing into now-freed module memory.
    
    Fix by returning a zero like a good module.
    
    Thanks to Richard Lucassen <mailinglists@lucassen.org> (?) for reporting
    the problem and for providing access to a machine which exhibited it.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit ff990d5952712c2e163b355946c39278da8407a8
Author: Uri Lublin <uril@qumranet.com>
Date:   Thu Feb 22 17:37:32 2007 +0200

    KVM: Remove write access permissions when dirty-page-logging is enabled
    
    Enabling dirty page logging is done using KVM_SET_MEMORY_REGION ioctl.
    If the memory region already exists, we need to remove write accesses,
    so writes will be caught, and dirty pages will be logged.
    
    Signed-off-by: Uri Lublin <uril@qumranet.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 02b27c1f802bfb60cc2cb5b763dde1b6b3479a7e
Author: Uri Lublin <uril@qumranet.com>
Date:   Thu Feb 22 17:15:33 2007 +0200

    kvm: move do_remove_write_access() up
    
    To be called from kvm_vm_ioctl_set_memory_region()
    
    Signed-off-by: Uri Lublin <uril@qumranet.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit cd1a4a982a78e793125db2f386e91dc7c89c9ed1
Author: Uri Lublin <uril@qumranet.com>
Date:   Thu Feb 22 16:43:09 2007 +0200

    KVM: Fix dirty page log bitmap size/access calculation
    
    Since dirty_bitmap is an unsigned long array, the alignment and size need
    to take that into account.
    
    Signed-off-by: Uri Lublin <uril@qumranet.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit ab51a434c5816e1ca3f033791c1cc5c6594998ec
Author: Uri Lublin <uril@qumranet.com>
Date:   Wed Feb 21 18:25:21 2007 +0200

    KVM: Add missing calls to mark_page_dirty()
    
    A few places where we modify guest memory fail to call mark_page_dirty(),
    causing live migration to fail.  This adds the missing calls.
    
    Signed-off-by: Uri Lublin <uril@qumranet.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit f7e6a45ad9224dfe9f0d76a45c43be7ccafe0b82
Author: Avi Kivity <avi@qumranet.com>
Date:   Wed Feb 21 19:47:40 2007 +0200

    KVM: Bump API version
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit bccf2150fe62dda5fb09efa2f64d2a234694eb48
Author: Avi Kivity <avi@qumranet.com>
Date:   Wed Feb 21 18:04:26 2007 +0200

    KVM: Per-vcpu inodes
    
    Allocate a distinct inode for every vcpu in a VM.  This has the following
    benefits:
    
     - the filp cachelines are no longer bounced when f_count is incremented on
       every ioctl()
     - the API and internal code are distinctly clearer; for example, on the
       KVM_GET_REGS ioctl, there is no need to copy the vcpu number from
       userspace and then copy the registers back; the vcpu identity is derived
       from the fd used to make the call
    
    Right now the performance benefits are completely theoretical since (a) we
    don't support more than one vcpu per VM and (b) virtualization hardware
    inefficiencies completely everwhelm any cacheline bouncing effects.  But
    both of these will change, and we need to prepare the API today.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit c5ea76600653b1a242321734435cb1c54778941a
Author: Avi Kivity <avi@qumranet.com>
Date:   Tue Feb 20 18:41:05 2007 +0200

    KVM: Move kvm_vm_ioctl_create_vcpu() around
    
    In preparation of some hacking.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 2c6f5df9793e6f928fc763af3fb535a5e28a1f8a
Author: Avi Kivity <avi@qumranet.com>
Date:   Tue Feb 20 18:27:58 2007 +0200

    KVM: Rename some kvm_dev_ioctl_*() functions to kvm_vm_ioctl_*()
    
    This reflects the changed scope, from device-wide to single vm (previously
    every device open created a virtual machine).
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit f17abe9a44425ff9c9858bc1806cc09d6b5dad1c
Author: Avi Kivity <avi@qumranet.com>
Date:   Wed Feb 21 19:28:04 2007 +0200

    KVM: Create an inode per virtual machine
    
    This avoids having filp->f_op and the corresponding inode->i_fop different,
    which is a little unorthodox.
    
    The ioctl list is split into two: global kvm ioctls and per-vm ioctls.  A new
    ioctl, KVM_CREATE_VM, is used to create VMs and return the VM fd.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 37e29d906c6eb1ece907e509160518b2edc2c083
Author: Avi Kivity <avi@qumranet.com>
Date:   Tue Feb 20 14:07:37 2007 +0200

    KVM: Add internal filesystem for generating inodes
    
    The kvmfs inodes will represent virtual machines and vcpus, as necessary,
    reducing cacheline bouncing due to inodes and filps being shared.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 19d1408dfd683daf1c158bb8fbf54324eb4bf568
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 19 14:37:48 2007 +0200

    KVM: More 0 -> NULL conversions
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 0152527b76b72333121d5a1243f9e091b58d4580
Author: Joerg Roedel <joerg.roedel@amd.com>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: SVM: intercept SMI to handle it at host level
    
    This patch changes the SVM code to intercept SMIs and handle it
    outside the guest.
    
    Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit cd205625e9bf2090d9bd95848ef4b34ad3f1a8b3
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: svm: init cr0 with the wp bit set
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 270fd9b96f5fcb7df15d3ca6166545d4aa0f3ee9
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: Wire up hypercall handlers to a central arch-independent location
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 02e235bc8eebf8a6fef10d46479b3c18f3e9c4f2
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: Add hypercall host support for svm
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit c21415e84334af679630f6450ceb8929a5234fad
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: Add host hypercall support for vmx
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 102d8325a1d2f266d3d0a03fdde948544e72c12d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: add MSR based hypercall API
    
    This adds a special MSR based hypercall API to KVM. This is to be
    used by paravirtual kernels and virtual drivers.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 5972e9535e94bf875eb8eab8a667ba04c7583874
Author: Markus Rechberger <markus.rechberger@amd.com>
Date:   Mon Feb 19 14:37:47 2007 +0200

    KVM: Use page_private()/set_page_private() apis
    
    Besides using an established api, this allows using kvm in older kernels.
    
    Signed-off-by: Markus Rechberger <markus.rechberger@amd.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 9d8f549dc69b1fc65d0b03916c02f12ca49b3ea0
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 19 14:37:46 2007 +0200

    KVM: Use ARRAY_SIZE macro instead of manual calculation.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Dor Laor <dor.laor@qumranet.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit de979caacca51c929d2cc2f0f79611ee4a1bc8a5
Author: Joerg Roedel <joerg.roedel@amd.com>
Date:   Mon Feb 19 14:37:46 2007 +0200

    KVM: vmx: hack set_cr0_no_modeswitch() to actually do modeswitch
    
    The whole thing is rotten, but this allows vmx to boot with the guest reboot
    fix.
    
    Signed-off-by: Markus Rechberger <markus.rechberger@amd.com>
    Signed-off-by: Joerg Roedel <joerg.roedel@amd.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit d27d4aca184ac0ca6b7e32caf79e1c2b91959be9
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 19 14:37:46 2007 +0200

    KVM: Cosmetics
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 43934a38d7cb39ff33baedc7f2c40a2a891116fa
Author: Jeremy Katz <katzj@redhat.com>
Date:   Mon Feb 19 14:37:46 2007 +0200

    KVM: Move virtualization deactivation from CPU_DEAD state to CPU_DOWN_PREPARE
    
    This gives it more chances of surviving suspend.
    
    Signed-off-by: Jeremy Katz <katzj@redhat.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit bf3f8e86c2e22b9bd1375be1bbbd67384dba4342
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 19 14:37:46 2007 +0200

    KVM: mmu: add missing dirty page tracking cases
    
    We fail to mark a page dirty in three cases:
    
    - setting the accessed bit in a pte
    - setting the dirty bit in a pte
    - emulating a write into a pagetable
    
    This fix adds the missing cases.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

commit 849138827c962589ac50496fa7feeb2a2d51b467
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Mar 3 17:48:55 2007 +0100

    ide: make legacy IDE VLB modules check for the "probe" kernel params (v2)
    
    Legacy IDE VLB host drivers didn't check for "probe" options when compiled
    as modules, which was obviously wrong as we don't want module to poke at
    random I/O ports by simply loading it.  Fix it by adding "probe" module param
    to legacy IDE VLB host drivers.
    
    v2:
    * don't obsolete old "ide0=dtc2278/ht6560b/qd65xx/ali14xx/umc8672"
      IDE driver options yet (per Alan Cox's request) and enhance documentation
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit b6209a90eca8c9a464bf9c5b91741fb125185619
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Mar 3 17:48:55 2007 +0100

    ide: remove some obsoleted kernel params (v2)
    
    Remove
    
    * "hdx=serialize"
    * "idex=noautotune"
    * "idex=autotune"
    
    kernel params, they have been obsoleted for ages.
    
    "idex=serialize", "hdx=noautotune" and "hdx=autotune" are still available
    so there is no funcionality loss caused by this patch.
    
    v2:
    
    * fix CONFIG_BLK_DEV_4DRIVES=y build broken by version 1 of the patch
      [ /me wearing brown paper bag ]
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit e76ecf86da99383f59f4c85f594403c5c3c1fe91
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Sat Mar 3 17:48:55 2007 +0100

    ide/pci/delkin_cb.c: pci_module_init to pci_register_driver
    
    Convert pci_module_init() to pci_register_driver().
    
    [ Compile-tested with "allyes", "allmod" & "allno" on i386. ]
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 06a9952b8379c48df972023f648014a82582c23a
Author: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
Date:   Sat Mar 3 17:48:55 2007 +0100

    scc_pata: bugfix for checking DMA IRQ status
    
    On Tuesday 27 February 2007, Akira Iguchi wrote:
    >
    > But since I sent the first patch, I found a bug for checking DMA IRQ status.
    > (http://www.spinics.net/lists/linux-ide/msg06903.html)
    > Then I sent the fixed patch for libata only. So my drivers/ide patch
    > still has same bug and I want to fix it, too.
    >
    > The following patch fixes this bug. Please apply this patch.
    
    From: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 846c11abc7934a523a665a3b702358e6f2998e3e
Author: Alan Cox <alan@redhat.com>
Date:   Sat Mar 3 17:48:54 2007 +0100

    ide: remove a ton of pointless #undef REALLY_SLOW_IO
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 8693d3e47b5cd95e1a513f90bc5e0467ce885e24
Author: Alan Cox <alan@redhat.com>
Date:   Sat Mar 3 17:48:54 2007 +0100

    siimage: DRAC4 note
    
    Revised DRAC4 warning as Jeff suggested, this one includes more info
    about why the problem occurs
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit ed8ccee0918ad063a4741c0656fda783e02df627
Author: Jan Beulich <jbeulich@novell.com>
Date:   Sat Mar 3 17:48:54 2007 +0100

    adjust legacy IDE resource setting (v2)
    
    The change to force legacy mode IDE channels' resources to fixed non-zero
    values confuses (at least some versions of) X, because the values reported
    by the kernel and those readable from PCI config space aren't consistent
    anymore.  Therefore, this patch arranges for the respective BARs to also
    get updated if possible.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 9e5755bce00bb563739aeb0f09932a1907521167
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Mar 3 17:48:54 2007 +0100

    ide: fix pmac breakage
    
    Fix breakage added in the IDE devel tree.
    
    Add header, then fix
    
    drivers/ide/ppc/pmac.c: In function `pmac_ide_setup_dma':
    drivers/ide/ppc/pmac.c:2044: warning: assignment from incompatible pointer type
    drivers/ide/ppc/pmac.c: In function `pmac_ide_dma_host_on':
    drivers/ide/ppc/pmac.c:1989: warning: control reaches end of non-void function
    include/linux/pci.h: In function `pmac_ide_init':
    drivers/ide/ppc/pmac.c:1563: warning: ignoring return value of `pci_register_driver', declared with attribute warn_unused_result
    
    Then add some apparently-long-missing error handling.
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit ed89616786d47093525a5dc039b1f502f5ada954
Author: Magnus Damm <damm@opensource.se>
Date:   Sat Mar 3 17:48:54 2007 +0100

    ide-cs: Update device table
    
    Add CFA devices from I-O Data, Mitsubishi and Viking. Add SanDisk comment.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 81d368e0e2591497106b2543918c79dd6d78277b
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Mar 3 17:48:53 2007 +0100

    ide: ide_get_best_pio_mode() returns incorrect IORDY setting (take 2)
    
    The function ide_get_best_pio_mode() fails to return the correct IORDY setting
    for the explicitly specified modes -- fix this along with the heading comment,
    and also remove the long commented out code.
    
    Also, while at it, correct the misliading comment about the PIO cycle time in
    <linux/ide.h> -- it actually consists of only the active and recovery periods,
    with only some chips also including the address setup time into equation...
    
    [ bart: sl82c105 seems to be currently the only driver affected by this fix ]
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 07af427606667c304a2e965cd51d2c03642e8cae
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Mar 3 17:48:53 2007 +0100

    piix/slc90e66: more tuneproc() fixing (take 2)
    
    The tuneproc() method in both these drivers failed to set the drive's own speed.
    Fix this by renaming the function and "wrapping around it" the new tuneproc()
    method.  Switch back to calling tuneproc() in the PIO fallback code.
    While at it, also convert the rest of the PIO timing code into proper C. :-)
    
    Has been kind of tested on SLC90E66.  I'm too lazy to reboot my box and test
    on ICH4... :-)
    
    [ bart: I quickly tested it on ICH4. ]
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit fab59375b9543f84d1714f7dd00f5d11e531bd3e
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Mar 3 17:48:53 2007 +0100

    ide: fix drive side 80c cable check, take 2
    
    eighty_ninty_three() had word 93 validitity check but not the 80c bit
    test itself (bit 13).  This increases the chance of incorrect wire
    detection especially because host side cable detection is often
    unreliable and we sometimes soley depend on drive side cable
    detection.  Fix it.
    
    [ bart: fix off-by-1 bit name in the patch description ]
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit f92d50e6fd14f6e4601f59aac4cffe617b7b2ce6
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Mar 3 17:48:53 2007 +0100

    cmd64x: fix PIO mode setup (take 3)
    
    The driver's tuneproc() method fails to set the drive's own speed -- fix this
    by renaming the function to cmd64x_tune_pio(), making it return the mode set,
    and "wrapping" the new tuneproc() method around it; while at it, also get rid
    of the non-working prefetch control code (filtering out related argument values
    in the "wrapper"), remove redundant PIO5 mode limitation, make cmdprintk() give
    more sensible mode info, and remove mention about the obsolete /proc/ interface.
    Get rid of the broken config_chipset_for_pio() which always tried to set PIO4,
    switch to always auto-tuning PIO instead.
    Oh, and add the missing PIO5 support to the speedproc() method while at it. :-)
    
    Warning: compile tested only -- getting to the real hardware isn't that easy...
    
    On Tuesday 06 February 2007 22:11, Mikael Pettersson <mikpe@it.uu.se> wrote:
    >
    > Worked fine on my SPARC Ultra5 with a CMD646 IDE controller.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 21b824771309927172247546b0bff0c4e6831875
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Mar 3 17:48:52 2007 +0100

    alim15x3: fix PIO mode setup
    
    The driver's tuneproc() method fails to set the drive's own speed -- fix this
    by renaming the function to ali15x3_tune_pio() and "wrapping" the new tuneproc()
    method around it and making it return the mode set, update the heading comment.
    
    Also, setting PIO mode via the speedproc() method does not work due to passing
    to the tuneproc() method's a mode number not biased by XFER_PIO_0 -- fix this
    along with a typo in the heading comment...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 527e1e1879cb10958b7ad4e04b3877abf54df3bd
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Mar 3 10:36:19 2007 -0500

    [libata] pata_jmicron: build fix
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit af70dbd3346999570db73b3bc3d4f7b7c004f2ea
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Mar 3 10:10:43 2007 -0200

    V4L/DVB (5260): Cx88-blackbird: allow usage of both 376836 and 262144 sized firmware images
    
    This updates the cx88-blackbird driver to be able to use the new cx23416
    firmware image released by Hauppauge Computer Works, while retaining
    compatibility with the older firmware images.
    cx2341x firmware can be downloaded at: http://dl.ivtvdriver.org/ivtv/firmware/
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 48dc30a148b837bcfff0902011633a94789a64fa
Author: Mike Isely <isely@pobox.com>
Date:   Sat Mar 3 10:13:05 2007 -0200

    V4L/DVB (5366): Pvrusb2: Fix compilation warning for amd64 builds (use %zu instead of %u)
    
    Signed-off-by Mike Isely <isely@pobox.com>
    Signed-off-by Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c5eb2a2b65fe411dcfe13264cfa84788a75341fb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Mar 3 11:54:19 2007 +0000

    [ARM] EBSA110: Work around build errors
    
    Work around EBSA110 build errors by selecting NO_IOPORT.  EBSA110
    can't support an IO port to MMIO mapping mechanism because the
    MMIO and IO port spaces have quite different and complex addressing
    requirements.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5c15bdec5c38f4ccf73ef2585fc80a6164de9554
Author: Dan Aloni <da-x@monatomic.org>
Date:   Fri Mar 2 20:44:51 2007 -0800

    [VLAN]: Avoid a 4-order allocation.
    
    This patch splits the vlan_group struct into a multi-allocated struct. On
    x86_64, the size of the original struct is a little more than 32KB, causing
    a 4-order allocation, which is prune to problems caused by buddy-system
    external fragmentation conditions.
    
    I couldn't just use vmalloc() because vfree() cannot be called in the
    softirq context of the RCU callback.
    
    Signed-off-by: Dan Aloni <da-x@monatomic.org>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b5284e5aa94be2f88dc92b29e97aff3da0c45f9f
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Fri Mar 2 15:52:22 2007 -0800

    [HDLC] Fix dev->header_cache_update having a random value.
    
    Switching HDLC devices from Ethernet-framing mode caused stale ethernet
    function assignments within net_device.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6387a8694506841389a6ac55175a8a984ae34e4
Author: Paul Moore <paul.moore@hp.com>
Date:   Fri Mar 2 13:19:02 2007 -0800

    [NetLabel]: Verify sensitivity level has a valid CIPSO mapping
    
    The current CIPSO engine has a problem where it does not verify that
    the given sensitivity level has a valid CIPSO mapping when the "std"
    CIPSO DOI type is used.  The end result is that bad packets are sent
    on the wire which should have never been sent in the first place.
    This patch corrects this problem by verifying the sensitivity level
    mapping similar to what is done with the category mapping.  This patch
    also changes the returned error code in this case to -EPERM to better
    match what the category mapping verification code returns.
    
    Signed-off-by: Paul Moore <paul.moore@hp.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 90719dbeafdb40a15105ff0c899485b43c2a2a55
Author: Florian Zumbiehl <florz@gmx.de>
Date:   Fri Mar 2 13:16:56 2007 -0800

    [PPPOE]: Key connections properly on local device.
    
    It is based on the assumption that an interface's ifindex is basically
    an alias for a local MAC address, so incoming packets now are matched
    to sockets based on remote MAC, session id, and ifindex of the
    interface the packet came in on/the socket was bound to by connect().
    
    For relayed packets, the socket that's used for relaying is selected
    based on destination MAC, session ID and the interface index of the
    interface whose name currently matches the name requested by userspace
    as the relaying source interface.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 248f06726e866942b3d8ca8f411f9067713b7ff8
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Mar 2 12:49:23 2007 -0800

    [AF_UNIX]: Test against sk_max_ack_backlog properly.
    
    This brings things inline with the sk_acceptq_is_full() bug
    fix.  The limit test should be x >= sk_max_ack_backlog.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8488df894d05d6fa41c2bd298c335f944bb0e401
Author: Wei Dong <weid@np.css.fujitsu.com>
Date:   Fri Mar 2 12:37:26 2007 -0800

    [NET]: Fix bugs in "Whether sock accept queue is full" checking
    
    	when I use linux TCP socket, and find there is a bug in function
    sk_acceptq_is_full().
    
    	When a new SYN comes, TCP module first checks its validation. If valid,
    send SYN,ACK to the client and add the sock to the syn hash table. Next
    time if received the valid ACK for SYN,ACK from the client. server will
    accept this connection and increase the sk->sk_ack_backlog -- which is
    done in function tcp_check_req().We check wether acceptq is full in
    function tcp_v4_syn_recv_sock().
    
    Consider an example:
    
     After listen(sockfd, 1) system call, sk->sk_max_ack_backlog is set to
    1. As we know, sk->sk_ack_backlog is initialized to 0. Assuming accept()
    system call is not invoked now.
    
    1. 1st connection comes. invoke sk_acceptq_is_full(). sk-
    >sk_ack_backlog=0 sk->sk_max_ack_backlog=1, function return 0 accept
    this connection. Increase the sk->sk_ack_backlog
    2. 2nd connection comes. invoke sk_acceptq_is_full(). sk-
    >sk_ack_backlog=1 sk->sk_max_ack_backlog=1, function return 0 accept
    this connection. Increase the sk->sk_ack_backlog
    3. 3rd connection comes. invoke sk_acceptq_is_full(). sk-
    >sk_ack_backlog=2 sk->sk_max_ack_backlog=1, function return 1. Refuse
    this connection.
    
    I think it has bugs. after listen system call. sk->sk_max_ack_backlog=1
    but now it can accept 2 connections.
    
    Signed-off-by: Wei Dong <weid@np.css.fujitsu.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb648a0d22908116b4ef168935a160d7f17c4e6d
Merge: 8b45339... 6ffa01d...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Mar 2 17:58:52 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      libata: add CONFIG_PM to libata core layer
      libata: add missing CONFIG_PM in LLDs
      libata: add missing PM callbacks
      pata_qdi: Fix initialisation
      [libata] pata_cmd64x: fix driver description in comments
      [libata] pata_{legacy,sc1200,sl82c105}: add missing hooks
      [libata] change master/slave IDENTIFY order
      libata-core: Fix simplex handling

commit 8b453397da923eae4aeb3b41e49793295e09eedf
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 2 20:21:56 2007 -0500

    [netdrvr] tulip, de2104x: fix typo: s/__sparc_/__sparc__/
    
    Noticed by Doug Nazar (via David Miller).
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ada386bad58f023686b17113496ff626f10773f
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Thu Mar 1 16:31:48 2007 -0700

    mv643xx_eth: move mac_addr inside mv643xx_eth_platform_data
    
    The information contained within platform_data should be self-contained.
    Replace the pointer to a MAC address with the actual MAC address in
    struct mv643xx_eth_platform_data.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 471a567144b91c8f2b7a71a1cf8babe7331590b1
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 28 15:41:39 2007 -0500

    Fix mv643xx_eth compilation.
    
    Commit 908b637fe793165b6aecdc875cdca67c4959a1ad removed ETH_DMA_ALIGN
    but missed a usage of it in a macro, which broke the build.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 63f779261f9aa16a0196c51092bedfdd32493f9d
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Wed Feb 28 16:42:17 2007 -0800

    qla3xxx: bugfix for line omitted in previous patch.
    
    This missing line caused transmit errors on the Qlogic 4032 chip.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e0e20a1a0822aa64335c05013f0966de6a8fc2c6
Author: Mithlesh Thukral <mithlesh@netxen.com>
Date:   Wed Feb 28 05:16:40 2007 -0800

    NetXen: Fix second rmmod failure observed on PowerPC machines.
    
    Signed-off by: Mithlesh Thukral <mithlesh@netxen.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0c25cfe18afffbc88a2bef28732be9e4846153fe
Author: Mithlesh Thukral <mithlesh@netxen.com>
Date:   Wed Feb 28 05:14:07 2007 -0800

    NetXen: Updates, removal of unsupported features and minor bug fixes.
    
    Signed-off-by: Mithlesh Thukral <mithlesh@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d518725fa68c2a90e04bea56a399d3d1c026269d
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Feb 27 19:28:14 2007 -0800

    cxgb3 - Tag driver version
    
    This patch adds a "-ko" tag to the driver version.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4a2e612a3b0cb6502d2317fa3e9d8f22be5db434
Author: Brice Goglin <brice@myri.com>
Date:   Tue Feb 27 17:18:40 2007 +0100

    myri10ge: fix copyright and license
    
    Fix copyright and license ("regents" should not have ever been used).
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c8d64f8a058d6d9fde0291348fa5ac4d29c52da2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 27 18:15:01 2007 +0000

    jmr3927: do not call tc35815_killall().
    
    No need to stop tc35815 before resetting the board.  This fixes the
    build of tc35815 as a module.  This also means there is no caller of
    tc35815_killall left, so remove that function also.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit db7ce76f6b3dfc119ab2f03e5e7784afc9cf2f05
Merge: 43ecf52... 357efd5...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 2 19:40:24 2007 -0500

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 6ffa01d88c9dd45e2ed917b5eeeb494d07efb1ab
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 2 17:32:47 2007 +0900

    libata: add CONFIG_PM to libata core layer
    
    Conditionalize all PM related stuff in libata core layer using
    CONFIG_PM.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 438ac6d5e3f8106a6bd1a5682c508d660294a85d
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 2 17:31:26 2007 +0900

    libata: add missing CONFIG_PM in LLDs
    
    Add missing #ifdef CONFIG_PM conditionals around all PM related parts
    in libata LLDs.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b23ff24436c97fb26428f3a337faf189292cc307
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Mar 2 17:30:01 2007 +0900

    libata: add missing PM callbacks
    
    Some LLDs were missing scsi device PM callbacks while having host/port
    suspend support.  Add missing ones.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 43ecf5295b622e9ec93f5b932949acf1c6e4150c
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Mar 1 18:30:08 2007 -0800

    [AOE]: Add get_unaligned() calls where needed.
    
    Based upon a report by Andrew Walrond.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ab876703dcbe852652db6441f0aadb3d6b75e94
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Mar 1 18:29:14 2007 -0800

    [RADEON]: Fix blanking return value.
    
    If you'll recall, over a year ago, I pointed out that the current
    Radeon driver erroneously returns -EINVAL for valid blanking codes,
    here is a link to that thread:
    
    	http://lkml.org/lkml/2006/1/28/6
    
    No other driver does this, and it confuses the X server into thinking
    that the device does not support blanking properly.
    
    I looked again and there is simply no reason for the Radeon driver to
    return -EINVAL for FB_BLANK_NORMAL.  It claims it wants to do this in
    order to convince fbcon to blank in software, right here:
    
    			if (fb_blank(info, blank))
    				fbcon_generic_blank(vc, info, blank);
    
    to software blank the screen.  But it only causes that to happen
    in the FB_BLANK_NORMAL case.
    
    That makes no sense because the Radeon code does this:
    
    		val |= CRTC_DISPLAY_DIS;
    
    in the FB_BLANK_NORMAL case so should be blanking the hardware, and
    there is therefore no reason to SW blank by returning -EINVAL.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: Antonino Daplas <adaplas@gmail.com>

commit c4c31fe0e2298529afa1357ebd9dad54b44c4e19
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 1 18:10:25 2007 -0800

    [SPARC]: Provide 'get_property()' alias for of_get_property().
    
    Another powerpc compatibility item, this will allow us to share
    more code with them.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6d0f9ea55277a49ef6c86a768acec021451b139
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 1 18:09:18 2007 -0800

    [SPARC]: Provide pci_device_to_OF_node() just like powerpc.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 45bcca67ed6437815305fdef38f441358b6a7756
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Mar 1 18:08:05 2007 -0800

    [SPARC]: Handle unresolvable resources better in of_device.c
    
    Just leave them as zero if we couldn't calculate it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b85cdd490ac52ee039636f809b9b98b1300fcf3d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Feb 28 23:20:12 2007 -0800

    [SPARC]: Fix bus handling in build_device_resources().
    
    We mistakedly modify 'bus' in the innermost loop.  What
    should happen is that at each register index iteration,
    we start with the same 'bus'.
    
    So preserve it's value at the top level, and use a loop
    local variable 'dbus' for iteration.
    
    This bug causes registers other than the first to be
    decoded improperly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cc7c15ec167767b440c1de4dbd2200467b7a493b
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Fri Mar 2 14:56:35 2007 +0000

    pata_qdi: Fix initialisation
    
    The QDI init code contains some bugs which mean it only works if you have
    a test setup that causes both a successful and failed probe. Fix this
    
    Found by Philip Guo
    
    (Who found it working on code analysis tools not running VLB IDE
    controllers)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fb9f8905a8865679f1fb757380b4169571def0ca
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 2 18:17:22 2007 -0500

    [libata] pata_cmd64x: fix driver description in comments
    
    Trivial comment fix, taken out of a larger Alan Cox patch.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bf7551c441d4b7b0de867d21b96881f3911e89b0
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 2 18:09:05 2007 -0500

    [libata] pata_{legacy,sc1200,sl82c105}: add missing hooks
    
    Alan Cox noticed several hooks in pata_* drivers were missing, when
    he authored his ->cable_detect hook patches.  This patch extracts
    just those fixes from Alan's patches, adding the necessary hooks
    (usually ->freeze, ->thaw, and ->post_internal_cmd) to the drivers.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f31f0cc2f0b7527072d94d02da332d9bb8d7d94c
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 2 17:47:28 2007 -0500

    [libata] change master/slave IDENTIFY order
    
    2.6.21-rc has horrible problems with libata and PATA cable types (and
    thus speeds). This occurs because Tejun fixed a pile of other bugs and
    we now do cable detect enforcement for drive side detection properly.
    
    Unfortunately we don't do the process around cable detection right. Tejun
    identified the problem and pointed to the right Annex in the spec, this patch
    implements the needed changes.
    
    The basic requirement is that we have to identify the slave before the
    master.
    
    The patch switches the identify order so that we can do the drive side
    detection correctly.
    
    [NOTE: patch and description extracted from a larger work written
    and signed-off-by Alan Cox]
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 032af1ce16d496b825adde0fa03948785ee16830
Author: Alan Cox <alan@redhat.com>
Date:   Thu Mar 1 17:36:46 2007 +0000

    libata-core: Fix simplex handling
    
    The initial simplex handling code is fooled if you suspend and resume.
    This also causes problems with some single channel controllers which
    claim to be simplex.
    
    The fix is fairly simple, instead of keeping a flag to remember if we
    gave away the simplex channel we remember the actual owner. As the owner
    is always part of the host_set we don't even need a refcount.
    
    Knowing the owner also means we can reassign simplex DMA channels in
    future hotplug code etc if we need to
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    (and a signed-off for the patch I sent before while I remember)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ddc3229488f4cad719f47aecfa1459ebbbde5b3
Author: Robert Marquardt <marquardt@codemercs.com>
Date:   Fri Mar 2 16:01:52 2007 +0100

    HID blacklisting of all Code Mercenaries IOWarrior devices
    
    Put all Code Mercenaries (VID 0x07c0) IOWarriors (PIDs 0x1500 to 0x15ff) on
    the HID blacklist. The range of PIDs has been reserved for IOWarriors. Only
    5 PIDs are really used yet.
    
    Signed-off-by: Robert Marquardt <marquardt@codemercs.com>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 6139dbbb7769c7251e04813f577454c6c9293e15
Merge: 9623b37... 1f4d177...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Mar 2 11:59:16 2007 +0000

    Merge branch 'omap-fixes' of master.kernel.org:/pub/scm/linux/kernel/git/tmlind/linux-omap-2.6

commit 9623b3732d11b0a18d9af3419f680d27ea24b014
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Feb 28 12:30:38 2007 +0100

    [ARM] 4241/1: Define mb() as compiler barrier on a uniprocessor system
    
    Currently, the mb() is defined as a DMB operation on ARMv6, even for
    UP systems. This patch defines mb() as a compiler barrier only. For
    the SMP case, the smp_* variants should be used anyway and the patch
    defines them as DMB.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5bfe8cb62127b5eb799f5724764abe914e49860e
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Feb 28 00:23:20 2007 +0100

    [ARM] 4239/1: S3C24XX: Update kconfig entries for PM
    
    Update help text with location of documentation
    and duplicate the note on the speed of CRC
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 540988eb67f2eee80d0e44bf5f606e388b80500e
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Feb 28 00:16:26 2007 +0100

    [ARM] 4238/1: S3C24XX: docs: update suspend and resume
    
    Remove some of the explicit use of S3C2410 where
    it is generic to all the S3C24XX series. Add more
    info on the CRC code, and add an example of using
    IRQ_EINT0 to resume from suspend
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1b7b56982fdcd9d85effd76f3928cf5d6eb26155
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Feb 27 12:09:33 2007 +0100

    [ARM] 4237/2: oprofile: Always allow backtraces on ARM
    
    Always allow backtrace when using oprofile on ARM, even if a PMU
    isn't present.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 14fca61a9828effbde2c284fbaa3ee22178998e0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 27 12:10:07 2007 +0000

    [ARM] Yet more asm/apm-emulation.h stuff
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1f4d1774133f596a3c4f520859890ad93769e523
Author: Tony Lindgren <tony@atomide.com>
Date:   Thu Mar 1 04:46:43 2007 -0800

    ARM: OMAP: Add missing get_irqnr_preamble and arch_ret_to_user for omap2
    
    Only entries for omap1 were added earlier.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 04fbf6a29182eb4285bb8bb826fc34fe84a62d9c
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Feb 12 10:50:53 2007 -0800

    ARM: OMAP: Use linux/delay.h not asm/delay.h
    
    Use linux/delay.h not asm/delay.h
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 2f4ff76499b9d0fb877b907a7cd5a28e3356ba28
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Feb 12 10:16:43 2007 -0800

    ARM: OMAP: Remove obsolete alsa typedefs
    
    Remove obsolete alsa typedefs
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 99c658a6c018a88b336dbd54d2e552db85348894
Author: Vladimir Ananiev <vovan888@gmail.com>
Date:   Mon Dec 11 13:30:21 2006 -0800

    ARM: OMAP: omap1510->15xx conversions needed for sx1
    
    Convert 1510->15xx in generic omap code, so that sx1 can work.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 193506106d19ad54d56740612bf1be1c68d13bb8
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Thu Jan 25 16:29:42 2007 -0800

    ARM: OMAP: Add missing includes to board-nokia770
    
    Add missing includes to board-nokia770 to make it
    compile again.
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 060ebf97b4d0000e63f7db1c1d12cb3dca5cd446
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Thu Jan 25 16:29:17 2007 -0800

    ARM: OMAP: Workqueue changes for board-h4.c
    
    Workqueue changes for board-h4.c
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 53037f4c1009c9cf5e6c95a616d1952a240f6540
Author: Matthew Percival <matthew@capgo.com>
Date:   Thu Jan 25 16:24:29 2007 -0800

    ARM: OMAP: dmtimer.c omap1 register fix
    
    When I went to use dmtimer7 it did not seem to work.  I noticed that
    the base addresses for dmtimers 7 and 8 were set wrong.  A simple patch
    to correct a small error.  Confirmed to fix the problem on an OSK.
    
    Signed-off-by: Matthew Percival <matthew@capgo.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit e016a40cab504f6e0537fa5bdb3874a2bbefe9dc
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Wed Dec 6 17:14:06 2006 -0800

    ARM: OMAP: board-nokia770: correct lcd name
    
    Some time ago, the 'lcd_lph8923' device was renamed to 'lcd_mipid' but
    the board-nokia770.c file was not updated accordingly, leading to not
    working lcd.
    
    This one-liner fixe the trouble.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit b097f494cc3def2ec39ded3b80a62b9d257e4b01
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Wed Dec 6 17:14:04 2006 -0800

    ARM: OMAP: omap GP timer: HZ != 100
    
    Teach OMAP2 gp timer that HZ isn't always 100.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 2f5c4b6f1ce6595fd977963051a3030911ae4461
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Wed Dec 6 17:14:04 2006 -0800

    ARM: OMAP: Fix warning in mach-omap1
    
    Fix warning
    
    arch/arm/mach-omap1/pm.c: In function 'omap_pm_init':
    arch/arm/mach-omap1/pm.c:765: warning: ignoring return value
    of 'subsys_create_file', declared with attribute
    warn_unused_result
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ef772f2ee31e0993dca2d59d9ee27682d39902fa
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Wed Dec 6 17:14:02 2006 -0800

    ARM: OMAP: Fix CONFIG_DEBUG_LL
    
    Fix broken CONFIG_DEBUG_LL. In case of low level debugging
    reconfigure some clocks early.
    
    See
    
    http://source.mvista.com/git/gitweb.cgi?p=linux-omap-2.6.git;a=commitdiff;h=3bfb289ccc6c4624fd5ff0381546935e105f4093
    
    too.
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit e6687290ae9ba935c1435e2ae54cf2f92e1f5f3b
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Wed Dec 6 17:14:00 2006 -0800

    ARM: OMAP: Fix warning in mach-omap2
    
    Fix warning
    
    arch/arm/mach-omap2/timer-gp.c: In function
    'omap2_gp_timer_init':
    arch/arm/mach-omap2/timer-gp.c:70: warning: implicit
    declaration of function 'setup_irq'
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 2121880e8816b9b50b04e8b3085bbcce229c37d0
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Wed Dec 6 17:14:00 2006 -0800

    ARM: OMAP: Fix warnings in plat-omap
    
    Fix warnings
    
    arch/arm/plat-omap/dmtimer.c: In function
    'omap_dm_timer_modify_idlect_mask':
    arch/arm/plat-omap/dmtimer.c:317: warning: no return
    statement in function returning non-void
    
    arch/arm/plat-omap/mailbox.c: In function 'omap_mbox_init':
    arch/arm/plat-omap/mailbox.c:231: warning: ignoring return
    value of 'class_device_create_file', declared with attribute
    warn_unused_result
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit b286f7ba302816c7176efcd0d458263dd598d7bc
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Wed Dec 6 17:13:57 2006 -0800

    ARM: OMAP: No IRQF_TRIGGER set_type function for IRQ 353 (MPUIO)
    
    No IRQF_TRIGGER set_type function for IRQ 353 (MPUIO)
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 65d873caab8a222954462e4a5a4754796d569820
Author: Marek Vasut <marek.vasut@gmail.com>
Date:   Wed Dec 6 17:13:56 2006 -0800

    ARM: OMAP: OMAP310 Serial
    
    This makes serial usable also on omap310, not only 1510.
    (changing 1510->15xx)
    
    Signed-off-by: Marek Vasut <marek.vasut@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 681e9940da89633bd25a6d155118fa5340260bc5
Author: Timo Teras <timo.teras@solidboot.com>
Date:   Wed Dec 6 17:13:52 2006 -0800

    ARM: OMAP: Proper handling of DMA4_IRQSTATUS_L0
    
    The register bits are reset by writing one. Remove the unneeded reads and
    fix writes to not clear too many bits.
    
    Signed-off-by: Timo Teras <timo.teras@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 6f9c92f1b9930dd400c79872036d1d8636e6e4b9
Author: Dirk Behme <dirk.behme@gmail.com>
Date:   Wed Dec 6 17:13:51 2006 -0800

    ARM: OMAP: Fix warning in clock.c
    
    Fix warning:
    
    arch/arm/mach-omap1/clock.c: In function
    'omap1_clk_enable_generic':
    arch/arm/mach-omap1/clock.c:499: warning: 'return' with no
    value, in function returning non-void
    
    Signed-off-by: Dirk Behme <dirk.behme@gmail.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ef557d76dfbdf74c240f76be15fa90d62f1ae61f
Author: Andrzej Zaborowski <balrog@zabor.org>
Date:   Wed Dec 6 17:13:48 2006 -0800

    ARM: OMAP: correct misc 15xx and non-15xx platform code
    
    Disable accesses to SOFT_REQ_REG2 and ULPD_SOFT_DISABLE_REQ_REG
    registers for 15xx processors that don't have these registers. Enable
    level 2 interrupt handler for processors that identify as OMAP 15xx
    (e.g 310) and not 1510 specifically. Also fix the following compiler
    warning (only visible with CONFIG_OMAP_RESET_CLOCKS):
    
    arch/arm/mach-omap1/clock.c: In function 'omap1_clk_disable_unused':
    arch/arm/mach-omap1/clock.c:634: warning: 'return' with a value, in
    function returning void
    
    Signed-off-by: Andrzej Zaborowski <balrog@zabor.org>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 562aa1d4c6a874373f9a48ac184f662fbbb06a04
Merge: b435086... afb2d55...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 1 19:48:21 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      ahci: improve spurious SDB FIS handling
      ahci/pata_jmicron: match class not function number
      jmicron ATA: reimplement jmicron ATA quirk
      pata_jmicron: drop unnecessary device programming in [re]init
      libata: blacklist FUJITSU MHT2060BH for NCQ
      sata_sil24: kill unused local variable idx in sil24_fill_sg()
      libata: clear drvdata in ata_host_release(), take#2

commit b4350861dd6d5668bb9fe18eec4227d30e9131b0
Merge: 132a69c... 2591466...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 1 17:30:51 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid:
      HID: fix Logitech DiNovo Edge touchwheel and Logic3 /SpectraVideo middle button
      HID: add git tree information to MAINTAINERS
      HID: fix broken Logitech S510 keyboard report descriptor; make extra keys work
      HID: fix possible double-free on error path in hid parser
      HID: hid-debug.c should #include <linux/hid-debug.h>
      HID: fix bug in zeroing the last field byte in output reports
      USB HID: use CONFIG_HID_DEBUG for outputting report descriptor
      USB HID: Fix USB vendor and product IDs endianness for USB HID devices

commit 132a69c6cc3dfa7fa354a88128acee7e6ee7082b
Merge: fb7d404... 74bd7d0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 1 17:28:31 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Fix parport_pc build.
      [SPARC64]: Update defconfig.

commit fb7d4045669b3ea0e92cf45963839a9808b7650c
Merge: 100b425... a9948a7...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 1 17:27:01 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [TCP]: Fix minisock tcp_create_openreq_child() typo.
      [TCP]: Document several sysctls.
      [NET]: Fix kfree(skb)
      [NET]: Handle disabled preemption in gfp_any()
      [BRIDGE]: Fix locking of set path cost.
      [IPV6]: /proc/net/anycast6 unbalanced inet6_dev refcnt
      [IPX]: Remove ancient changelog
      [IPX]: Remove outdated information from Kconfig
      [NET]: Revert socket.h/stat.h ifdef hacks.
      [IPV6]: anycast refcnt fix
      [XFRM] xfrm_user: Fix return values of xfrm_add_sa_expire.

commit 100b425480d3a4c7dff4f99bead457d91ad19caf
Merge: d701d8a... f3502b8...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Mar 1 17:25:23 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (5305): Mark VIDIOC_DBG_S/G_REGISTER as experimental
      V4L/DVB (5271): Add VIDIOC_TRY_ENCODER_CMD and VIDIOC_ENCODER_CMD ioctls.
      V4L/DVB (5270): Add VIDIOC_G_ENC_INDEX ioctl
      V4L/DVB (5276): Cxusb: fix firmware patch for big endian systems
      V4L/DVB (5258): Cafe_ccic: fix compiler warning
      V4L/DVB (5295): Digitv: open nxt6000 i2c_gate for TDED4 tuner handling
      V4L/DVB (5304): Improve chip matching in v4l2_register
      V4L/DVB (5255): Fix cx25840 firmware loading.

commit d701d8a3bc1c0f56fa2759f631f86a320b66f13e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Mar 1 12:40:21 2007 +0000

    [PATCH] Fix sysfs build breakage if !CONFIG_SYSFS
    
    B0rkage introduced by dfa87c824a9a5430008acd1ed2e8111ed164fcbe.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit afb2d552bc4c241c009f5947311a95de426a75d9
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 27 13:24:19 2007 +0900

    ahci: improve spurious SDB FIS handling
    
    Spurious SDB FIS during NCQ might not contain spurious completions.
    It could be spurious TF update or invalid async notification.  Treat
    as HSM violation iff a spurious SDB FIS contains spurious completions;
    otherwise, just whine once about it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e34bb370dec4919b7e8b769d51ad2bc2535b6982
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Feb 26 20:24:03 2007 +0900

    ahci/pata_jmicron: match class not function number
    
    Make jmiron_ata quirk update pdev->class after programming the device
    and update ahci and pata_jmicron such that they match class code
    instead of checking function number manually.  For ahci, it matches
    for vendor and class.  For pata_jmicron, it matches vendor, device and
    class as IDE class isn't as well defined as AHCI class.
    
    This makes jmicron device matching more conventional and script
    friendly.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ee2ae7fb2079c5775d8802cd282140d71632a2d
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Feb 26 20:16:13 2007 +0900

    jmicron ATA: reimplement jmicron ATA quirk
    
    Reimplement jmicron ATA quirk.
    
    * renamed to quirk_jmicron_ata()
    * quirk is invoked only for the affected controllers
    * programming is stricter.  e.g. conf5 bit24 is cleared if
      unnecessary.
    * code factored for readability
    * JMB360 and JMB368 are programmed into proper mode
    
    Verified on JMB360, 363 and 368.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 960627b7adf3645e4969b4bfaf03360caabbe76a
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Feb 26 20:09:02 2007 +0900

    pata_jmicron: drop unnecessary device programming in [re]init
    
    Channel redirect and AHCI mode enable programmings are done via PCI
    quirk for both probe and resume paths.  Drop duplicate and possibly
    unsafe device programming from pata_jmicron().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 516dffdcd8827a40532798602830dfcfc672294c
Author: Adam Litke <agl@us.ibm.com>
Date:   Thu Mar 1 15:46:08 2007 -0800

    [PATCH] Fix get_unmapped_area and fsync for hugetlb shm segments
    
    This patch provides the following hugetlb-related fixes to the recent stacked
    shm files changes:
     - Update is_file_hugepages() so it will reconize hugetlb shm segments.
     - get_unmapped_area must be called with the nested file struct to handle
       the sfd->file->f_ops->get_unmapped_area == NULL case.
     - The fsync f_op must be wrapped since it is specified in the hugetlbfs
       f_ops.
    
    This is based on proposed fixes from Eric Biederman that were debugged and
    tested by me.  Without it, attempting to use hugetlb shared memory segments
    on powerpc (and likely ia64) will kill your box.
    
    Signed-off-by: Adam Litke <agl@us.ibm.com>
    Cc: Eric Biederman <ebiederm@xmission.com>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Acked-by: William Lee Irwin III <bill.irwin@oracle.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 09125ea6179b28790950b7ddb4daba112f6c2b73
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 28 15:21:23 2007 +0900

    libata: blacklist FUJITSU MHT2060BH for NCQ
    
    Blacklist FUJITSU MHT2060BH for NCQ.  On this drive, NCQ works iff
    queue depth is equal to or less than 4.  Just turn it off.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Mike Accetta <maccetta@laurelnetworks.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4fc00cb4d520124e82fdaa5882077075b1f007cc
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Feb 26 16:11:00 2007 +0900

    sata_sil24: kill unused local variable idx in sil24_fill_sg()
    
    Kill unused local variable idx in sil24_fill_sg().
    
    Spotted by Jeff Garzik.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1aa56cca5bfa396c791e93b38e4776ef39b590a7
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 27 22:33:21 2007 +0900

    libata: clear drvdata in ata_host_release(), take#2
    
    Clearing drvdata in ->remove_one causes NULL pointer deference.  Clear
    drvdata only in ata_host_release() after all resources are freed.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7b965e0884cee430ffe5dc81cdb117b9316b0549
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Feb 28 20:13:55 2007 -0800

    [PATCH] VM: invalidate_inode_pages2_range() should not exit early
    
    Fix invalidate_inode_pages2_range() so that it does not immediately exit
    just because a single page in the specified range could not be removed.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5a39e8c6d655b4fe8305ef8cc2d9bbe782bfee5f
Author: Aristeu Sergio Rozanski Filho <aristeu.sergio@gmail.com>
Date:   Wed Feb 28 20:13:53 2007 -0800

    [PATCH] tty_io: fix race in master pty close/slave pty close path
    
    This patch fixes a possible race that leads to double freeing an idr index.
     When the master begin to close, release_dev() is called and then
    pty_close() is called:
    
            if (tty->driver->close)
                    tty->driver->close(tty, filp);
    
    This is done without helding any locks other than BKL.  Inside pty_close(),
    being a master close, the devpts entry will be removed:
    
    #ifdef CONFIG_UNIX98_PTYS
                    if (tty->driver == ptm_driver)
                            devpts_pty_kill(tty->index);
    #endif
    
    But devpts_pty_kill() will call get_node() that may sleep while waiting for
    &devpts_root->d_inode->i_sem.  When this happens and the slave is being
    opened, tty_open() just found the driver and index:
    
            driver = get_tty_driver(device, &index);
            if (!driver) {
                    mutex_unlock(&tty_mutex);
                    return -ENODEV;
            }
    
    This part of the code is already protected under tty_mute.  The problem is
    that the slave close already got an index.  Then init_dev() is called and
    blocks waiting for the same &devpts_root->d_inode->i_sem.
    
    When the master close resumes, it removes the devpts entry, and the
    relation between idr index and the tty is gone.  The master then sleeps
    waiting for the tty_mutex on release_dev().
    
    Slave open resumes and found no tty for that index.  As result, a NULL tty
    is returned and init_dev() doesn't flow to fast_track:
    
            /* check whether we're reopening an existing tty */
            if (driver->flags & TTY_DRIVER_DEVPTS_MEM) {
                    tty = devpts_get_tty(idx);
                    if (tty && driver->subtype == PTY_TYPE_MASTER)
                            tty = tty->link;
            } else {
                    tty = driver->ttys[idx];
            }
            if (tty) goto fast_track;
    
    The result of this, is that a new tty will be created and init_dev() returns
    sucessfull. After returning, tty_mutex is dropped and master close may resume.
    
    Master close finds it's the only use and both sides are closing, then releases
    the tty and the index. At this point, the idr index is free, but slave still
    has it.
    
    Slave open then calls pty_open() and finds that tty->link->count is 0,
    because there's no master and returns error.  Then tty_open() calls
    release_dev() which executes without any warning, as it was a case of last
    slave close when the master is already closed (master->count == 0,
    slave->count == 1).  The tty is then released with the already released idr
    index.
    
    This normally would only issue a warning on idr_remove() but in case of a
    customer's critical application, it's never too simple:
    
    thread1: opens master, gets index X
    thread1: begin closing master
    thread2: begin opening slave with index X
    thread1: finishes closing master, index X released
    thread3: opens master, gets index X, just released
    thread2: fails opening slave, releases index X         <----
    thread4: opens master, gets index X, init_dev() then find an already in use
    	 and healthy tty and fails
    
    If no more indexes are released, ptmx_open() will keep failing, as the
    first free index available is X, and it will make init_dev() fail because
    you're trying to "reopen a master" which isn't valid.
    
    The patch notices when this race happens and make init_dev() fail
    imediately.  The init_dev() function is called with tty_mutex held, so it's
    safe to continue with tty till the end of function because release_dev()
    won't make any further changes without grabbing the tty_mutex.
    
    Without the patch, on some machines it's possible get easily idr warnings
    like this one:
    
    idr_remove called for id=15 which is not allocated.
     [<c02555b9>] idr_remove+0x139/0x170
     [<c02a1b62>] release_mem+0x182/0x230
     [<c02a28e7>] release_dev+0x4b7/0x700
     [<c02a0ea7>] tty_ldisc_enable+0x27/0x30
     [<c02a1e64>] init_dev+0x254/0x580
     [<c02a0d64>] check_tty_count+0x14/0xb0
     [<c02a4f05>] tty_open+0x1c5/0x340
     [<c02a4d40>] tty_open+0x0/0x340
     [<c017388f>] chrdev_open+0xaf/0x180
     [<c017c2ac>] open_namei+0x8c/0x760
     [<c01737e0>] chrdev_open+0x0/0x180
     [<c0167bc9>] __dentry_open+0xc9/0x210
     [<c0167e2c>] do_filp_open+0x5c/0x70
     [<c0167a91>] get_unused_fd+0x61/0xd0
     [<c0167e93>] do_sys_open+0x53/0x100
     [<c0167f97>] sys_open+0x27/0x30
     [<c010303b>] syscall_call+0x7/0xb
    
    using this test application available on:
     http://www.ruivo.org/~aris/pty_sodomizer.c
    
    Signed-off-by: Aristeu Sergio Rozanski Filho <aris@ruivo.org>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Cc: Chuck Ebbert <cebbert@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3a0ee2ce8cc4f962031d7520df960431c2f26a9c
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Wed Feb 28 20:13:51 2007 -0800

    [PATCH] fix memory leak in dma_declare_coherent_memory()
    
    When it goes to free1_out, dev->dma_mem has not been freed.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 17f0cd2f350b90b28301e27fe0e39f34bfe7e730
Author: Karsten Keil <kkeil@suse.de>
Date:   Wed Feb 28 20:13:50 2007 -0800

    [PATCH] Fix buffer overflow and races in capi debug functions
    
    The CAPI trace debug functions were using a fixed size buffer, which can be
    overflowed if wrong formatted CAPI messages were sent to the kernel capi
    layer.  The code was also not protected against multiple callers.  This fix
    bug 8028.
    
    Additionally the patch make the CAPI trace functions optional.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 34bbd704051c9d053d69e90569a3a2365f4c7b50
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Wed Feb 28 20:13:49 2007 -0800

    [PATCH] adapt page_lock_anon_vma() to PREEMPT_RCU
    
    page_lock_anon_vma() uses spin_lock() to block RCU.  This doesn't work with
    PREEMPT_RCU, we have to do rcu_read_lock() explicitely.  Otherwise, it is
    theoretically possible that slab returns anon_vma's memory to the system
    before we do spin_unlock(&anon_vma->lock).
    
    [ Hugh points out that this only matters for PREEMPT_RCU, which isn't merged
      yet, and may never be.  Regardless, this patch is conceptually the
      right thing to do, even if it doesn't matter at this point.  - Linus ]
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Paul McKenney <paulmck@linux.vnet.ibm.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 48dba8ab9b93c3b6b57946bd45ae013402b0b054
Author: Vassili Karpov <av1474@comtv.ru>
Date:   Wed Feb 28 20:13:45 2007 -0800

    [PATCH] Documentation: CPU load calculation description
    
    Describes how/when the information exported to `/proc/stat' is calculated,
    and possible problems with this approach.
    
    Signed-off-by: Vassili Karpov <av1474@comtv.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7355690ead6d61f6344072ae61060f985060da29
Author: Ingo Molnar <mingo@elte.hu>
Date:   Wed Feb 28 20:13:42 2007 -0800

    [PATCH] sched: fix SMT scheduler bug
    
    The SMT scheduler incorrectly skips kernel threads even if they are
    runnable (but they are preempted by a higher-prio user-space task which got
    SMT-delayed by an even higher-priority task running on a sibling CPU).
    
    Fix this for now by only doing the SMT-nice optimization if the
    to-be-delayed task is the only runnable task.  (This should cover most of
    the real-life cases anyway.)
    
    This bug has been in the SMT scheduler since 2.6.17 or so, but has only
    been noticed now by the active check in the dynticks code.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3f555c700b6c90f9ac24bc81a4f509583d906278
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Wed Feb 28 20:13:38 2007 -0800

    [PATCH] ps3: introduce CONFIG_PS3_ADVANCED
    
    ps3: Introduce CONFIG_PS3_ADVANCED, as suggested by Roman Zippel, and use
    it to control questions about PS3 subsystems that may not be obvious for
    the casual user.
    
    This gets rid of the following warning on non-powerpc platforms: |
    drivers/video/Kconfig:1604:warning: 'select' used by config symbol 'FB_PS3'
    refer to undefined symbol 'PS3_PS3AV'
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Acked-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8a2bfdcbfa441d8b0e5cb9c9a7f45f77f80da465
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Wed Feb 28 20:13:35 2007 -0800

    [PATCH] ext[34]: EA block reference count racing fix
    
    There are race issues around ext[34] xattr block release code.
    
    ext[34]_xattr_release_block() checks the reference count of xattr block
    (h_refcount) and frees that xattr block if it is the last one reference it.
     Unlike ext2, the check of this counter is unprotected by any lock.
    ext[34]_xattr_release_block() will free the mb_cache entry before freeing
    that xattr block.  There is a small window between the check for the re
    h_refcount ==1 and the call to mb_cache_entry_free().  During this small
    window another inode might find this xattr block from the mbcache and reuse
    it, racing a refcount updates.  The xattr block will later be freed by the
    first inode without notice other inode is still use it.  Later if that
    block is reallocated as a datablock for other file, then more serious
    problem might happen.
    
    We need put a lock around places checking the refount as well to avoid
    racing issue.  Another place need this kind of protection is in
    ext3_xattr_block_set(), where it will modify the xattr block content in-
    the-fly if the refcount is 1 (means it's the only inode reference it).
    
    This will also fix another issue: the xattr block may not get freed at all
    if no lock is to protect the refcount check at the release time.  It is
    possible that the last two inodes could release the shared xattr block at
    the same time.  But both of them think they are not the last one so only
    decreased the h_refcount without freeing xattr block at all.
    
    We need to call lock_buffer() after ext3_journal_get_write_access() to
    avoid deadlock (because the later will call lock_buffer()/unlock_buffer
    () as well).
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Cc: Andreas Gruenbacher <agruen@suse.de>
    Cc: <linux-ext4@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1463fdbcc797dfcb8574ababbd39cf6205f6ed00
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Feb 28 20:13:33 2007 -0800

    [PATCH] uml: pte_mkread fix
    
    Fix the fact that pte_mkread set _PAGE_RW instead of _PAGE_USER (the logic is
    copied from i386 in most place, so it is really as bad as you're thinking).
    
    Thus currently page tables are more permissive than they should.
    
    Such a change may trigger other latent bugs, so be careful with this.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 14251809b1921b1216568700f1be2f91a1cbb5c7
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Feb 28 20:13:31 2007 -0800

    [PATCH] uml: host VDSO fix
    
    This fixes a problem seen by a number of people running UML on newer host
    kernels.  init would hang with an infinite segfault loop.
    
    It turns out that the host kernel was providing a AT_SYSINFO_EHDR of
    0xffffe000, which faked UML into believing that the host VDSO page could be
    reused.  However, AT_SYSINFO pointed into the middle of the address space, and
    was unmapped as a result.  Because UML was providing AT_SYSINFO_EHDR and
    AT_SYSINFO to its own processes, these would branch to nowhere when trying to
    use the VDSO.
    
    The fix is to also check the location of AT_SYSINFO when deciding whether to
    use the host's VDSO.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cf2775f175128fc9fd7ffb88981e068d27bc85db
Author: Allan Graves <allan.graves@gmail.com>
Date:   Wed Feb 28 20:13:29 2007 -0800

    [PATCH] uml: enable RAW
    
    Add the RAW device driver options to the UML Kconfig.char file so that you may
    use them in UML.
    
    Signed-off-by: Allan Graves <allan.graves@gmail.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 77904fd64eb9131c337dd068e4196d25c2f9de7e
Author: David Howells <dhowells@redhat.com>
Date:   Wed Feb 28 20:13:26 2007 -0800

    [PATCH] FRV: Missing error defs
    
    linux/irq.h uses EINVAL but does not #include linux/errno.h.  This results in
    the compiler spitting out errors on some files.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 232ea4d69d81169453344b7d05203425c88d973b
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Feb 28 20:13:21 2007 -0800

    [PATCH] throttle_vm_writeout(): don't loop on GFP_NOFS and GFP_NOIO allocations
    
    throttle_vm_writeout() is designed to wait for the dirty levels to subside.
    But if the caller holds IO or FS locks, we might be holding up that writeout.
    
    So change it to take a single nap to give other devices a chance to clean some
    memory, then return.
    
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Cc: Kumar Gala <galak@kernel.crashing.org>
    Cc: Pete Zaitcev <zaitcev@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b1a316f6f9c54d668df4304ddf935595501ccb25
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Wed Feb 28 20:13:17 2007 -0800

    [PATCH] ACPI: make bay depend on dock
    
    Since the bay driver depends on the dock driver for proper notification,
    make this driver depend on the dock driver.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Acked-by: Len Brown <lenb@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d1af65d13f3625543916a85c86d02826df910fcf
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Feb 28 20:13:13 2007 -0800

    [PATCH] Bug in MM_RB debugging
    
    The code is seemingly trying to make sure that rb_next() brings us to
    successive increasing vma entries.
    
    But the two variables, prev and pend, used to perform these checks, are
    never advanced.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Cc: Andrea Arcangeli <andrea@novell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 04a51e66adcdc0de6ffaa488934ce3ffb3818ecf
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Feb 28 20:13:11 2007 -0800

    [PATCH] uml: add back accidentally removed error
    
    In the 2.6.20 hang patch, I accidentally threw out an error message.
    This puts it back.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit af727902212343211627da14d17c85592feb0e18
Author: Jeff Dike <jdike@addtoit.com>
Date:   Wed Feb 28 20:13:06 2007 -0800

    [PATCH] uml: fix host LDT lookup initialization locking, try 2
    
    Add some locking to host_ldt_entries to prevent racing when reading LDT
    information from the host.
    
    The locking is somewhat more careful than my previous attempt.  Now, only
    the check of host_ldt_entries is locked.  The lock is dropped immediately
    afterwards, and if the LDT needs initializing, that (and the memory
    allocations needed) proceed outside the lock.
    
    Also fixed some style violations.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dae9f8e63cbb532e8c4b9c54bda0bf511af9c01c
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Wed Feb 28 20:13:01 2007 -0800

    [PATCH] drivers/isdn/gigaset: build asyncdata.o into the gigaset module (fix)
    
    a) Remove #define acrobatics that have become unnecessary by the move of
       asyncdata.o into the common part.
    
    b) Correct the rule for building the common part into the kernel when
       some or all hardware specific parts are built as modules.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Cc: Adrian Bunk <bunk@stusta.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 65dc8145711d1c20aecbb1a8a4a518f7c68611b8
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Wed Feb 28 20:12:57 2007 -0800

    [PATCH] eCryptfs: no path_release() after path_lookup() error
    
    Dmitriy Monakhov wrote:
    > if path_lookup() return non zero code we don't have to worry about
    > 'nd' parameter, but ecryptfs_read_super does path_release(&nd) after
    > path_lookup has failed, and dentry counter becomes negative
    
    Do not do a path_release after a path_lookup error.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Cc: Dmitriy Monakhov <dmonakhov@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ed6d896de3a57bdfb38cffaa748612f112c2a75
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Wed Feb 28 20:12:52 2007 -0800

    [PATCH] eCryptfs: remove unnecessary flush_dcache_page()
    
    Remove unnecessary flush_dcache_page() call. Thanks to Dmitriy
    Monakhov for pointing this out.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Cc: Dmitriy Monakhov <dmonakhov@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a8d547d5cf3df447d1527f2e66ba578e88011999
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Wed Feb 28 20:12:47 2007 -0800

    [PATCH] eCryptfs: set O_LARGEFILE when opening lower file
    
    O_LARGEFILE should be set here when opening the lower file.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Cc: Dmitriy Monakhov <dmonakhov@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e109ebd1eed2b91e3c9bb3b42cc27961f0dc22b3
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Feb 28 20:12:40 2007 -0800

    [PATCH] rtc_cmos oops fix
    
    Fix an oops on the rtc_device_unregister() path by waiting until the last
    moment before nulling the rtc->ops vector.  Fix some potential oopses by
    having the rtc_class_open()/rtc_class_close() interface increase the RTC's
    reference count while an RTC handle is available outside the RTC framework.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0478e62e8a04154b7bdc0dfd33ffbcabc5446e9c
Author: Antonino Daplas <adaplas@gmail.com>
Date:   Wed Feb 28 20:12:37 2007 -0800

    [PATCH] MAINTAINERS: Update email address
    
    adaplas@pol.net is still alive, but is choking on the traffic.
    
    Signed-off-by: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 244474b216d319d7317a610fb5d6e194c5ef1460
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Wed Feb 28 20:12:35 2007 -0800

    [PATCH] add -mm testing in SubmitChecklist
    
    Add -mm testing to SubmitChecklist.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1499993cc7bfd568f471bd697499cff394e46822
Author: Sam Ravnborg <sam@ravnborg.org>
Date:   Wed Feb 28 20:12:31 2007 -0800

    [PATCH] fix section mismatch warning in lockdep
    
    lockdep_init() is marked __init but used in several places
    outside __init code. This causes following warnings:
    $ scripts/mod/modpost kernel/lockdep.o
    WARNING: kernel/built-in.o - Section mismatch: reference to .init.text:lockdep_init from .text.lockdep_init_map after 'lockdep_init_map' (at offset 0x105)
    WARNING: kernel/built-in.o - Section mismatch: reference to .init.text:lockdep_init from .text.lockdep_reset_lock after 'lockdep_reset_lock' (at offset 0x35)
    WARNING: kernel/built-in.o - Section mismatch: reference to .init.text:lockdep_init from .text.__lock_acquire after '__lock_acquire' (at offset 0xb2)
    
    The warnings are less obviously due to heavy inlining by gcc - this is not
    altered.
    
    Fix the section mismatch warnings by removing the __init marking, which
    seems obviously wrong.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5409bae07a63630ba5a40f3f00b7f3e6d7eceedd
Author: Nick Piggin <nickpiggin@yahoo.com.au>
Date:   Wed Feb 28 20:12:27 2007 -0800

    [PATCH] Rename PG_checked to PG_owner_priv_1
    
    Rename PG_checked to PG_owner_priv_1 to reflect its availablilty as a
    private flag for use by the owner/allocator of the page.  In the case of
    pagecache pages (which might be considered to be owned by the mm),
    filesystems may use the flag.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 93a6fefe2f6fc380870c0985b246bec7f37a06f7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 28 20:12:23 2007 -0800

    [PATCH] fix the SYSCTL=n compilation
    
    /home/bunk/linux/kernel-2.6/linux-2.6.20-mm2/kernel/sysctl.c:1411: error: conflicting types for 'register_sysctl_table'
    /home/bunk/linux/kernel-2.6/linux-2.6.20-mm2/include/linux/sysctl.h:1042: error: previous declaration of 'register_sysctl_table' was here
    make[2]: *** [kernel/sysctl.o] Error 1
    
    Caused by commit 0b4d414714f0d2f922d39424b0c5c82ad900a381.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c1e16aa2792a129d8920e22210ef21eb62a0f80a
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Wed Feb 28 20:12:19 2007 -0800

    [PATCH] Fix posix-cpu-timer breakage caused by stale p->last_ran value
    
    Problem description at:
    http://bugzilla.kernel.org/show_bug.cgi?id=8048
    
    Commit b18ec80396834497933d77b81ec0918519f4e2a7
        [PATCH] sched: improve migration accuracy
    optimized the scheduler time calculations, but broke posix-cpu-timers.
    
    The problem is that the p->last_ran value is not updated after a context
    switch.  So a subsequent call to current_sched_time() calculates with a
    stale p->last_ran value, i.e.  accounts the full time, which the task was
    scheduled away.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ae73fc093a8cae4d92e22ab8b635e3590e80785d
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Wed Feb 28 20:12:16 2007 -0800

    [PATCH] eCryptfs: resolve lower page unlocking problem
    
    eCryptfs lower file handling code has several issues:
      - Retval from prepare_write()/commit_write() wasn't checked to equality
        to AOP_TRUNCATED_PAGE.
      - In some places page wasn't unmapped and unlocked after error.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 05fb6bf0b29552b64dc86f405a484de2514e0ac2
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Wed Feb 28 20:12:13 2007 -0800

    [PATCH] kernel-doc fixes for 2.6.20-git15 (non-drivers)
    
    Fix kernel-doc warnings in 2.6.20-git15 (lib/, mm/, kernel/, include/).
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 328d24403d6a6b856722facd39d7b6ccb429353b
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Wed Feb 28 20:12:10 2007 -0800

    [PATCH] kernel-doc: allow space after __attribute__
    
    Allow space(s) between "__attribute__" and "((blah))" so that
    kernel-doc does not complain like:
    
    Warning(/tester/linsrc/linux-2.6.20-git15//kernel/timer.c:939): No description found for parameter 'read_persistent_clock(void'
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9d6346311418d12e90cca9384e5fbbe2ffa18efb
Author: Daniel Walker <dwalker@mvista.com>
Date:   Wed Feb 28 20:12:07 2007 -0800

    [PATCH] update timekeeping_is_continuous comment
    
    Signed-off-by: Daniel Walker <dwalker@mvista.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 28936117af849b8c2fca664a41ea7651a0d99591
Author: David Howells <dhowells@redhat.com>
Date:   Wed Feb 28 20:12:03 2007 -0800

    [PATCH] FRV: Add some missng lazy MMU hooks for NOMMU mode
    
    Add some missing lazy MMU hooks for NOMMU mode.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fa6427542cfd2811f48186c68057273c6537f261
Author: David Howells <dhowells@redhat.com>
Date:   Wed Feb 28 20:11:58 2007 -0800

    [PATCH] FRV: No ZONE_DMA
    
    FRV does not require a ZONE_DMA, so all DMA'able pages that aren't highmem
    should be in ZONE_NORMAL.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f416885ef4950501dd3858d1afa1137a0c2905c5
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 28 20:11:53 2007 -0800

    [PATCH] md: add support for reshape of a raid6
    
    i.e. one or more drives can be added and the array will re-stripe
    while on-line.
    
    Most of the interesting work was already done for raid5.  This just extends it
    to raid6.
    
    mdadm newer than 2.6 is needed for complete safety, however any version of
    mdadm which support raid5 reshape will do a good enough job in almost all
    cases (an 'echo repair > /sys/block/mdX/md/sync_action' is recommended after a
    reshape that was aborted and had to be restarted with an such a version of
    mdadm).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b4c4c7b8095298ff4ce20b40bf180ada070812d0
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 28 20:11:48 2007 -0800

    [PATCH] md: restart a (raid5) reshape that has been aborted due to a read/write error
    
    An error always aborts any resync/recovery/reshape on the understanding that
    it will immediately be restarted if that still makes sense.  However a reshape
    currently doesn't get restarted.  With this patch it does.
    
    To avoid restarting when it is not possible to do work, we call into the
    personality to check that a reshape is ok, and strengthen raid5_check_reshape
    to fail if there are too many failed devices.
    
    We also break some code out into a separate function: remove_and_add_spares as
    the indent level for that code was getting crazy.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d1b5380c7f794da16e815c34e54ee7641db8a288
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 28 20:11:42 2007 -0800

    [PATCH] md: clean out unplug and other queue function on md shutdown
    
    The mddev and queue might be used for another array which does not set these,
    so they need to be cleared.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7dd5e7c3dbe8c4ffb507ddc0ea8fab07c8b11b0b
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 28 20:11:35 2007 -0800

    [PATCH] md: move warning about creating a raid array on partitions of the one device
    
    md tries to warn the user if they e.g.  create a raid1 using two partitions of
    the same device, as this does not provide true redundancy.
    
    However it also warns if a raid0 is created like this, and there is nothing
    wrong with that.
    
    At the place where the warning is currently printer, we don't necessarily know
    what level the array will be, so move the warning from the point where the
    device is added to the point where the array is started.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a723406c4aeedb9dc5d54fb81130d13c757f41bc
Author: H. Peter Anvin <hpa@anvin.org>
Date:   Wed Feb 28 20:11:25 2007 -0800

    [PATCH] md: RAID6: clean up CPUID and FPU enter/exit code
    
    - Use kernel_fpu_begin() and kernel_fpu_end()
    - Use boot_cpu_has() for feature testing even in userspace
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 64a742bc61f9115b0bb270fa081e5b5b9c35dcd0
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 28 20:11:18 2007 -0800

    [PATCH] md: fix raid10 recovery problem.
    
    There are two errors that can lead to recovery problems with raid10
    when used in 'far' more (not the default).
    
    Due to a '>' instead of '>=' the wrong block is located which would result in
    garbage being written to some random location, quite possible outside the
    range of the device, causing the newly reconstructed device to fail.
    
    The device size calculation had some rounding errors (it didn't round when it
    should) and so recovery would go a few blocks too far which would again cause
    a write to a random block address and probably a device error.
    
    The code for working with device sizes was fairly confused and spread out, so
    this has been tided up a bit.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5a243e0e97edce27c12f87354fd987526ba1ce95
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 28 20:11:12 2007 -0800

    [PATCH] Fix failure paths in modules init in umem.c
    
    If register_blkdev() or alloc-disk fail in mm_init() after
    pci_register_driver() succeeds, then mm_pci_driver is not unregistered
    properly:
    
    Cc: Philip Guo <pg@cs.stanford.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9540f75b2bcfcc29ddcd839c3547a5f380bef323
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 28 20:11:06 2007 -0800

    [PATCH] drivers/video/sm501fb.c: make 4 functions static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9b83a6a8523a8a96b6353174b193c5c93e16c6c3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 28 20:11:03 2007 -0800

    [PATCH] mm/{,tiny-}shmem.c cleanups
    
    shmem_{nopage,mmap} are no longer used in ipc/shm.c
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit de01bad2f5dec2977143aa242e7eba71d11a4363
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 28 20:11:01 2007 -0800

    [PATCH] make ipc/shm.c:shm_nopage() static
    
    shm_nopage() can become static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5357fc1450bda771a4a57b82f83c14ca9f5b9221
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 28 20:10:58 2007 -0800

    [PATCH] arch/arm26/kernel/entry.S: remove dead code
    
    CONFIG_ALIGNMENT_TRAP is never set on arm26.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Ian Molton <spyro@f2s.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 88171cfed5810a2354eb1977883589a05ce8d304
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Mar 1 13:17:14 2007 -0800

    IB/mthca: Fix error path in mthca_alloc_memfree()
    
    The garbled logic in mthca_alloc_memfree() causes it to return 0, even
    if it fails to allocate all doorbell records.  Fix it to return -ENOMEM
    when it fails.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 31726798bd8fbef6244b28cf962f4a4c45793dea
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Wed Feb 28 18:01:02 2007 +0100

    IB/ehca: Fix sync between completion handler and destroy cq
    
    This patch fixes two issues reported by Roland Dreier and Christoph Hellwig:
    
    - Mismatched sync/locking between completion handler and destroy cq We
      introduced a counter nr_events per cq to track number of irq events
      seen. This counter is incremented when an event queue entry is seen
      and decremented after completion handler has been called regardless
      if scaling code is active or not. Note that nr_callbacks tracks
      number of events assigned to a cpu and both counters can potentially
      diverge.
    
      The sync between running completion handler and destroy cq is done
      by using the global spin lock ehca_cq_idr_lock.
    
    - Replace yield by wait_event on the counter above to become zero.
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f3502b8a1995aceb2242389aa6dbea1a6756f78b
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Feb 23 21:16:01 2007 -0300

    V4L/DVB (5305): Mark VIDIOC_DBG_S/G_REGISTER as experimental
    
    Move VIDIOC_DBG_S/G_REGISTER from the internal ioctl list to the
    public ioctls, but mark it as experimental for now.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ada6ecd2bf1d97e1f3bac6d5af4c7c4390a0a5af
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Feb 18 14:56:22 2007 -0300

    V4L/DVB (5271): Add VIDIOC_TRY_ENCODER_CMD and VIDIOC_ENCODER_CMD ioctls.
    
    Add support for starting, stopping, pausing and resuming an MPEG (or similar
    compressed stream) encoder.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit db6eb5b334a0f095290b99096f68ff24ab6df1aa
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Feb 18 14:05:02 2007 -0300

    V4L/DVB (5270): Add VIDIOC_G_ENC_INDEX ioctl
    
    The VIDIOC_G_ENC_INDEX ioctl can obtain the MPEG index from an MPEG
    encoder.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1d1370a48ca285ebe197ecd3197a8d5f161bc291
Author: Jin-Bong lee <jinbong.lee@samsung.com>
Date:   Tue Feb 20 23:10:34 2007 -0300

    V4L/DVB (5276): Cxusb: fix firmware patch for big endian systems
    
    Without this patch, the device will not be detected after firmware download
    on big endian systems.
    
    Signed-off-by: Jin-Bong lee <jinbong.lee@samsung.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b9109b758231c6c7fd8a5094099e8195d43b583a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 19:31:45 2007 -0300

    V4L/DVB (5258): Cafe_ccic: fix compiler warning
    
    Fix the following warning:
    drivers/media/video/cafe_ccic.c: In function `cafe_vidioc_reqbufs':
    drivers/media/video/cafe_ccic.c:1197: warning: 'ret' might be used uninitialized in this function
    Probably not a real bug, but the warning can be avoided easily.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2fe22dcdc79b8dd34e61a3f1231caffd6180a626
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Wed Feb 21 21:47:15 2007 -0300

    V4L/DVB (5295): Digitv: open nxt6000 i2c_gate for TDED4 tuner handling
    
    dvb-pll normally opens the i2c gate before attempting to communicate with
    the pll, but the code for this device is not using dvb-pll.  This should
    be cleaned up in the future, but for now, just open the i2c gate at the
    appropriate place in order to fix this driver bug.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f3d092b84a855c44914fea0648695bef7d751266
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Feb 23 20:55:14 2007 -0300

    V4L/DVB (5304): Improve chip matching in v4l2_register
    
    The chip matching in struct v4l2_register for VIDIOC_DBG_G/S_REGISTER
    was rather primitive. It could not be extended to other busses besides
    i2c and it lacked a way to.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d55c7aec666658495e5b57a6b194c8c2a1ac255f
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Thu Feb 15 03:40:34 2007 -0300

    V4L/DVB (5255): Fix cx25840 firmware loading.
    
    Due to changes in the i2c handling in 2.6.20 this cx25840 bug surfaced,
    causing the firmware load to fail for the ivtv driver. The correct
    sequence is to first attach the i2c client, then use the client's
    device to load the firmware.
    Acked-by: Mike Isely <isely@pobox.com>
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 25914662b7e86f8cf8abdde0497e7fe8bdddf2ae
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Thu Mar 1 09:54:44 2007 +0100

    HID: fix Logitech DiNovo Edge touchwheel and Logic3 /SpectraVideo middle button
    
    Dongle shipped with Logitech DiNovo Edge (0x046d/0xc714) behaves in a weird
    non-standard way - it contains multiple reports with the same usage, which
    results in remapping of GenericDesktop.X and GenericDesktop.Y usages to
    GenericDesktop.Z and GenericDesktop.RX respectively, thus rendering the
    touchwheel unusable.
    
    The commit 35068976916fdef82d6e69ef1f8c9a1c47732759 solved this
    in a way that it didn't remap certain usages. This however breaks
    (at least) middle button of Logic3 / SpectraVideo (0x1267/0x0210),
    which in contrary requires the remapping.
    
    To make both of the harware work, allow remapping of these usages again,
    and introduce a quirk for Logitech DiNovo Edge "touchwheel" instead - we
    disable remapping for key, abs and rel events only for this hardware.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit a4dff3980697fc374008d005f56da3d8bab8c316
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Tue Feb 27 17:40:09 2007 +0100

    HID: add git tree information to MAINTAINERS
    
    Update MAITAINERS entry for HID and USB HID, adding
    location of HID git tree.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit b55fd23ccdf32f969a7b4180c6e52d62d8e99972
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Wed Feb 21 19:27:49 2007 +0100

    HID: fix broken Logitech S510 keyboard report descriptor; make extra keys work
    
    This patch makes extra keys (F1-F12 in special mode, zooming, rotate, shuffle)
    on Logitech S510 keyboard work.
    
    Logitech S510 keyboard sends in report no. 3 keys which are far above the
    logical maximum described in descriptor for given report.
    
    This patch introduces a HID quirk for this wireless USB receiver/keyboard
    in order to fix the report descriptor before it's being parsed - the logical
    maximum and the number of usages is bumped up to 0x104d). The values are in the
    "Reserved" area of consumer HUT, so HID_MAX_USAGE had to be changed too.
    
    In addition to proper extracting of  the values from report descriptor, proper
    HID-input mapping is introduced for them.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 776c0e96edecf77f827a62d2a1641cc2ca479043
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Wed Feb 21 17:18:03 2007 +0100

    HID: fix possible double-free on error path in hid parser
    
    Freeing of device->collection is properly done in hid_free_device() (as
    this function is supposed to free all the device resources and could be
    called from transport specific code, e.g. usb_hid_configure()).
    
    Remove all kfree() calls preceeding the hid_free_device() call.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 4330eb2e5fb6d3c9c0a0be8ed14793f72334d1d4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 21 12:57:30 2007 +0100

    HID: hid-debug.c should #include <linux/hid-debug.h>
    
    Every file should include the headers containing the prototypes for
    it's global functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 4237081e573b99a48991aa71364b0682c444651c
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Tue Feb 20 01:33:39 2007 +0100

    HID: fix bug in zeroing the last field byte in output reports
    
    d4ae650a904612ffb7edd3f28b69b022988d2466 introduced zeroing of the
    last field byte in output reports in order to make sure the unused
    bits are set to 0. This is done in a wrong way, resulting in a
    wrong bits being zeroed out (not properly shifted by the field offset
    in the report). Fix this.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit fdc9c566161c119febe4fab0f7c382416681fd8f
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Feb 19 14:15:59 2007 +0100

    USB HID: use CONFIG_HID_DEBUG for outputting report descriptor
    
    Report descriptor should be output when CONFIG_HID_DEBUG is defined.
    
    This also mitigates the need for DEBUG and DEBUG_DATA defines, so let's
    remove them.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 9fa2ad5ff4d8ded8c29c7b6cc92a1c3a8d8a2079
Author: Julien BLACHE <jb@jblache.org>
Date:   Sun Feb 11 18:20:25 2007 +0100

    USB HID: Fix USB vendor and product IDs endianness for USB HID devices
    
    The USB vendor and product IDs are not byteswapped appropriately, and
    thus come out in the wrong endianness when fetched through the evdev
    using ioctl() on big endian platforms.
    
    Signed-off-by: Julien BLACHE <jb@jblache.org>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 3fd0b2d9ad7612f249e5516d887ab7c61b24ddb9
Author: John Keller <jpk@sgi.com>
Date:   Wed Feb 28 17:47:27 2007 -0600

    ACPI: Altix: reinitialize acpi tables
    
    To provide compatibilty with SN kernels that do and do not
    have ACPI IO support, the SN PROM must build different
    versions of some ACPI tables based on which kernel is booting.
    As such, the tables may have to change at kernel boot time.
    By default, prior to kernel boot, the PROM builds an empty
    DSDT (header only) and no SSDTs. If an ACPI capable kernel
    boots, the kernel will notify the PROM, at platform setup time,
    and the PROM will build full DSDT and SSDT tables.
    
    With the latest changes to acpi_table_init(), the table lengths
    are saved, and when our PROM changes them, the changes are not seen,
    and the kernel will crash on boot. Because of issues with kexec support,
    we are not able to create the tables prior to acpi_table_init().
    As a result, we are making a second call to acpi_table_init() to
    process the rebuilt DSDT and SSDTs.
    
    Signed-off-by: John Keller <jpk@sgi.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c7af1857ef74873bf5a9c8fcab0cfd79883492ac
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Mar 1 04:11:22 2007 +0000

    [CIFS] Fix set file size to zero when doing chmod to Samba 3.0.26pre
    
    In fixing a bug Samba 3.0.26pre allowed some clients (including Linux cifs
    client) to change file size to zero in SET_FILE_UNIX_BASIC (which Linux cifs
    client uses for chmod).
    
    The server has been "fixed" now but that also fixes the client to net send
    file size zero on chmod.
    
    Fixes Samba bugzilla bug # 4418.
    
    Fixed with help from Jeremy Allison
    
    Signed-off-by: Jeremy Allison <jra@samba.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 74bd7d093b8e87f35eaf3b14459b96a0e20d1d10
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Feb 28 13:09:34 2007 -0800

    [SPARC64]: Fix parport_pc build.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a9948a7e15015e7f2cb602190322b8ebb00c54c8
Author: Arnaldo Carvalho de Melo <acme@redhat.com>
Date:   Wed Feb 28 11:05:56 2007 -0800

    [TCP]: Fix minisock tcp_create_openreq_child() typo.
    
    On 2/28/07, KOVACS Krisztian <hidden@balabit.hu> wrote:
    >
    >   Hi,
    >
    >   While reading TCP minisock code I've found this suspiciously looking
    > code fragment:
    >
    > - 8< -
    > struct sock *tcp_create_openreq_child(struct sock *sk, struct request_sock *req, struct sk_buff *skb)
    > {
    >         struct sock *newsk = inet_csk_clone(sk, req, GFP_ATOMIC);
    >
    >         if (newsk != NULL) {
    >                 const struct inet_request_sock *ireq = inet_rsk(req);
    >                 struct tcp_request_sock *treq = tcp_rsk(req);
    >                 struct inet_connection_sock *newicsk = inet_csk(sk);
    >                 struct tcp_sock *newtp;
    > - 8< -
    >
    >   The above code initializes newicsk to inet_csk(sk), isn't that supposed
    > to be inet_csk(newsk)?  As far as I can tell this might leave
    > icsk_ack.last_seg_size zero even if we do have received data.
    
    Good catch!
    
    David, please apply the attached patch.
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f1ef5108a7a5e9fc220f73352eb7b428a2499d5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Feb 28 09:51:15 2007 -0800

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 71599cd1c381d1b5f58c35653ac1d3627c6276db
Author: John Heffner <jheffner@psc.edu>
Date:   Tue Feb 27 10:03:56 2007 -0800

    [TCP]: Document several sysctls.
    
    This adds documentation for tcp_moderate_rcvbuf, tcp_no_metrics_save,
    tcp_base_mss, and tcp_mtu_probing.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b08d5840d2c5a6ac0bce172f4c861974d718e34b
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Feb 27 09:57:37 2007 -0800

    [NET]: Fix kfree(skb)
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Paul Moore <paul.moore@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4498121ca3acbf928681b71261227d28dc29b6f6
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Feb 27 09:56:42 2007 -0800

    [NET]: Handle disabled preemption in gfp_any()
    
    ctnetlink uses netlink_unicast from an atomic_notifier_chain
    (which is called within a RCU read side critical section)
    without holding further locks. netlink_unicast calls netlink_trim
    with the result of gfp_any() for the gfp flags, which are passed
    down to pskb_expand_header. gfp_any() only checks for softirq
    context and returns GFP_KERNEL, resulting in this warning:
    
    BUG: sleeping function called from invalid context at mm/slab.c:3032
    in_atomic():1, irqs_disabled():0
    no locks held by rmmod/7010.
    
    Call Trace:
     [<ffffffff8109467f>] debug_show_held_locks+0x9/0xb
     [<ffffffff8100b0b4>] __might_sleep+0xd9/0xdb
     [<ffffffff810b5082>] __kmalloc+0x68/0x110
     [<ffffffff811ba8f2>] pskb_expand_head+0x4d/0x13b
     [<ffffffff81053147>] netlink_broadcast+0xa5/0x2e0
     [<ffffffff881cd1d7>] :nfnetlink:nfnetlink_send+0x83/0x8a
     [<ffffffff8834f6a6>] :nf_conntrack_netlink:ctnetlink_conntrack_event+0x94c/0x96a
     [<ffffffff810624d6>] notifier_call_chain+0x29/0x3e
     [<ffffffff8106251d>] atomic_notifier_call_chain+0x32/0x60
     [<ffffffff881d266d>] :nf_conntrack:destroy_conntrack+0xa5/0x1d3
     [<ffffffff881d194e>] :nf_conntrack:nf_ct_cleanup+0x8c/0x12c
     [<ffffffff881d4614>] :nf_conntrack:kill_l3proto+0x0/0x13
     [<ffffffff881d482a>] :nf_conntrack:nf_conntrack_l3proto_unregister+0x90/0x94
     [<ffffffff883551b3>] :nf_conntrack_ipv4:nf_conntrack_l3proto_ipv4_fini+0x2b/0x5d
     [<ffffffff8109d44f>] sys_delete_module+0x1b5/0x1e6
     [<ffffffff8105f245>] trace_hardirqs_on_thunk+0x35/0x37
     [<ffffffff8105911e>] system_call+0x7e/0x83
    
    Since netlink_unicast is supposed to be callable from within RCU
    read side critical sections, make gfp_any() check for in_atomic()
    instead of in_softirq().
    
    Additionally nfnetlink_send needs to use gfp_any() as well for the
    call to netlink_broadcast).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6548cda289b549ed60c35f16a0051609aeee2fd0
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 27 09:55:07 2007 -0800

    [BRIDGE]: Fix locking of set path cost.
    
    This change goes with earlier change to get rid of
    work queue for path cost. Now stp_set_path_cost does its own
    locking. This is to allow it to call br_path_cost() which calls
    ethtool interfaces (might sleep).
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aa6e4a96e7589948fe770744f7bb4f0f743dddaa
Author: David Stevens <dlstevens@us.ibm.com>
Date:   Mon Feb 26 16:28:56 2007 -0800

    [IPV6]: /proc/net/anycast6 unbalanced inet6_dev refcnt
    
    Reading /proc/net/anycast6 when there is no anycast address
    on an interface results in an ever-increasing inet6_dev reference
    count, as well as a reference to the netdevice you can't get rid of.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1267cd766c712644b45662572df05f28be5a6e89
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Mon Feb 26 15:48:03 2007 -0800

    [IPX]: Remove ancient changelog
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff49f26b453ac77788d3a3c652d8cb0f578214da
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Mon Feb 26 15:47:16 2007 -0800

    [IPX]: Remove outdated information from Kconfig
    
    SPX was removed in early 2.5. How to connect to a Mac or the other OS isn't
    hard to find out these days.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 304c209c9b02b0386024d037fa49b273caa0575b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 15:45:15 2007 -0800

    [NET]: Revert socket.h/stat.h ifdef hacks.
    
    This reverts 57a87bb0720a5cf7a9ece49a8c8ed288398fd1bb.
    
    As H. Peter Anvin states, this change broke klibc and it's
    not very easy to fix things up without duplicating everything
    into userspace.
    
    In the longer term we should have a better solution to this
    problem, but for now let's unbreak things.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c12a74cc4aeaebc378aa40ee11c7761a8ed05e0
Author: Michal Wrobel <xmxwx@asn.pl>
Date:   Mon Feb 26 15:36:10 2007 -0800

    [IPV6]: anycast refcnt fix
    
    This patch fixes a bug in Linux IPv6 stack which caused anycast address
    to be added to a device prior DAD has been completed. This led to
    incorrect reference count which resulted in infinite wait for
    unregister_netdevice completion on interface removal.
    
    Signed-off-by: Michal Wrobel <xmxwx@asn.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3a765aa528401c7aec2208f7ed1276b232b24c57
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 14:52:21 2007 -0800

    [XFRM] xfrm_user: Fix return values of xfrm_add_sa_expire.
    
    As noted by Kent Yoder, this function will always return an
    error.  Make sure it returns zero on success.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2ff7354fe888f46f6629b57e463b0a1eb956c02b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Feb 27 00:27:41 2007 -0700

    [PATCH] x86_64/i386 irq: Fix !CONFIG_SMP compilation
    
    When removing set_native_irq I missed the fact that it was
    called in a couple of places that were compiled even when
    SMP support is disabled.  And since the irq_desc[].affinity
    field only exists in SMP things broke.
    
    Thanks to Simon Arlott <simon@arlott.org> for spotting this.
    
    There are a couple of ways to fix this but the simplest one
    is to just remove the assignments.  The affinity field is only
    used to display a value to the user, and nothing on either i386
    or x86_64 reads it or depends on it being any particlua value,
    so skipping the assignment is safe.  The assignment that
    is being removed is just for the initial affinity value before
    the user explicitly sets it.  The irq_desc array initializes
    this field to CPU_MASK_ALL so the field is initialized to
    a reasonable value in the SMP case without being set.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 606135a3081e045b677cde164a296c51f66c4633
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 27 20:59:12 2007 -0800

    Linux 2.6.21-rc2
    
    Too many changes for comfort since -rc1.  Some missed merges, and some
    just annoyingly big fixes since.  This is not how an -rc2 should look.
    Need to really calm things down!

commit bb4c18cbba474ae20c84171819255598cf975158
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 14:55:06 2007 -0800

    [SPARC64]: Fix PCI interrupts on E450 et al.
    
    When the PCI controller OBP node lacks an interrupt-map
    and interrupt-map-mask property, we need to form the
    INO by hand.  The PCI swizzle logic was not doing that
    properly.
    
    This was a regression added by the of_device code.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 357efd57f229716fd6a1494b970c5a66c0c465ef
Author: Stefano Brivio <stefano.brivio@polimi.it>
Date:   Sat Feb 17 18:24:44 2007 +0100

    [PATCH] bcm43xx: fix for 4309
    
    BCM4309 devices aren't working properly as A PHYs aren't supported
    yet, but we probe 802.11a cores anyway. This fixes it, while still
    allowing for A PHY code to be developed in the future.
    
    Signed-off-by: Stefano Brivio <stefano.brivio@polimi.it>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d3dcc2cb2cd86b1db68f0d87d610f1f14406f928
Merge: ce27002... e047d1c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 27 07:45:09 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] fix compile errors

commit ce27002078e1e65c64395c0a3348786c974306cf
Merge: 6c1586b... f8dfdd5...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 27 07:39:04 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (52 commits)
      netxen: do_rom_fast_write error handling
      natsemi: Fix detection of vanilla natsemi cards
      net: remove a collection of unneeded #undef REALLY_SLOW_IO stuff
      chelsio: Fix non-NAPI compile
      cxgb3 - Feed Rx free list with pages
      cxgb3 - Recovery from HW starvation of response queue entries.
      cxgb3 - Unmap offload packets when they are freed
      cxgb3 - FW version update
      cxgb3 - private ioctl cleanup
      cxgb3 - manage sysfs attributes per port
      S2IO: Restoring the mac address in s2io_reset
      S2IO: Avoid printing the Enhanced statistics for Xframe I card.
      S2IO: Making LED off during LINK_DOWN notification.
      S2IO: Added a loadable parameter to enable or disable vlan stripping in frame.
      S2IO: Optimized the delay to wait for command completion
      S2IO: Fixes for MSI and MSIX
      qla3xxx: Bumping driver version number
      qla3xxx: Kernic Panic on pSeries under stress conditions
      qla3xxx: bugfix tx reset after stress conditions.
      qla3xxx: Check return code from pci_map_single() in ql_release_to_lrg_buf_free_list(), ql_populate_free_queue(), ql_alloc_large_buffers(), and ql3xxx_send()
      ...

commit 6c1586bc9356855159e5845c6e788aa6db333cb9
Merge: 0136322... 6eaf6fc...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 27 07:38:40 2007 -0800

    Merge branch 'jffs-maint' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/misc-2.6
    
    * 'jffs-maint' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/misc-2.6:
      remove the jffs MAINTAINERS entry

commit a27cbe878203076247c1b5287f5ab59ed143b560
Author: Roland Dreier <rolandd@cisco.com>
Date:   Tue Feb 27 07:37:49 2007 -0800

    IPoIB: Only handle async events for one port
    
    An asynchronous event carries the port number that the event occurred
    on, so there's no reason for an IPoIB interface to process an event
    associated with a different local HCA port.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f8dfdd5cab482a2ce4a8e2375e1512aa4829c653
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon Feb 26 14:51:56 2007 -0800

    netxen: do_rom_fast_write error handling
    
    Compiler warning spots real error!
    
    The function do_rom_fast_read called in do_rom_fast_write can fail
    and leave data1 unset. This causes a compile warning.
    The correct thing is to propagate the error out.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6eaf6fc81ab2fa8c264f819f57dc950b6ea9c651
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Feb 25 01:08:47 2007 +0100

    remove the jffs MAINTAINERS entry
    
    This patch removes the MAINTAINERS entry for the removed jffs
    filesystem.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 36c843d5e347ec71ec579a477c941538a03b8cf3
Author: Mark Brown <broonie@sirena.org.uk>
Date:   Sun Feb 25 15:37:27 2007 +0000

    natsemi: Fix detection of vanilla natsemi cards
    
    Bob Tracy <rct@gherkin.frus.com> reported that the addition of support
    for Aculab E1/T1 cPCI carrier cards broke detection of vanilla natsemi
    cards.  This patch fixes that: the problem is that the driver-specific
    ta in the PCI device table is an index into a second table and this
    had not been updated for the vanilla cards.
    
    This patch fixes the problem minimally.
    
    Signed-off-by: Mark Brown <broonie@sirena.org.uk>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b882addd7aecbdae7b938fa189f0459d0713976b
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 18:08:57 2007 +0000

    net: remove a collection of unneeded #undef REALLY_SLOW_IO stuff
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 54d3e568209553d3dd0d824fbc0ef4a6cedaf465
Author: Roland Dreier <rdreier@cisco.com>
Date:   Mon Feb 26 14:58:49 2007 -0800

    chelsio: Fix non-NAPI compile
    
    Chelsio without NAPI enabled has been broken (won't compile) since
    3de00b89 ("chelsio: NAPI speed improvement"):
    
        drivers/net/chelsio/sge.c: In function `t1_interrupt`:
        drivers/net/chelsio/sge.c:1716: error: `Q` undeclared (first use in this function)
    
    The change below seems to add back in the declaration and
    initialization of `Q` that was removed by mistake, and at least makes
    the driver compile for me, although I have no hardware and hence no
    way to test whether this actually works.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e0994eb1d9ead09bb8f6483cf5cf6aa55ce0f3b9
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Feb 24 16:44:17 2007 -0800

    cxgb3 - Feed Rx free list with pages
    
    Populate Rx free list with pages.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bae73f44472921008f8d0982344c53ae231445a1
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Feb 24 16:44:12 2007 -0800

    cxgb3 - Recovery from HW starvation of response queue entries.
    
    Improve the traffic recovery after the HW ran out of response queue entries.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 99d7cf30b99a8b7863090d8a510d6a4d9ad082cf
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Feb 24 16:44:06 2007 -0800

    cxgb3 - Unmap offload packets when they are freed
    
    Offload packets may be DMAed long after their SGE Tx descriptors are done
    so they must remain mapped until they are freed rather than until their
    descriptors are freed.  Unmap such packets through an skb destructor.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 75d8626fdd172745ebb638c2bf5138071e67a818
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sun Feb 25 16:32:37 2007 -0800

    cxgb3 - FW version update
    
    Update FW version to 3.2
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1825494a7ec6c0fed0a7dfb1646e84402979743e
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Feb 24 16:43:56 2007 -0800

    cxgb3 - private ioctl cleanup
    
    Clean up some private ioctls.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 896392ef94dd7b9e66d1e836f98b57380452a280
Author: Divy Le Ray <divy@chelsio.com>
Date:   Sat Feb 24 16:43:50 2007 -0800

    cxgb3 - manage sysfs attributes per port
    
    sysfs attributes are now managed per port, no longer per adapter.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d8d70caf836e48c4c462435d38434f2901058884
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Sat Feb 24 02:04:24 2007 -0500

    S2IO: Restoring the mac address in s2io_reset
    
    - Restore in s2io_reset, the mac address assigned during s2io_open.
      Earlier, it was getting overwritten to the factory default (read from the
      eeprom) and subsequently dropping received frames.
    
    - Fixed the typo in calling rtnl_unlock in s2io_set_link function.
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fa1f0cb350989617281a98d30e6a3a4914c79b58
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Sat Feb 24 02:03:22 2007 -0500

    S2IO: Avoid printing the Enhanced statistics for Xframe I card.
    
    - Enhanced Statistics are supported only for Xframe II (Herculas) card. Add
      condition check such Enhanced statistics will included only in the case of
      Xframe II card.
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ac1f90d6f1267b916c47cc5a033ef5ec1baf4280
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Sat Feb 24 02:01:31 2007 -0500

    S2IO: Making LED off during LINK_DOWN notification.
    
    - Turning off LED for LINK_DOWN notification
    - Return from rxd_owner_bit_reset function if call to set_rxd_buffer_pointer
      fails with ENOMEM
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 926930b202d56c3dfb6aea0a0c6bfba2b87a8c03
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Sat Feb 24 01:59:39 2007 -0500

    S2IO: Added a loadable parameter to enable or disable vlan stripping in frame.
    
    - Added code to not to strip vlan tag when driver is in promiscuous mode
    - Added module loadable parameter 'vlan_tag_strip" through which user can
      enable or disable vlan stripping irrespective of mode
      ( promiscuous or non-promiscuous ).
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9fc93a41a1ad11da128f37e60cac01b67990cfb4
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Sat Feb 24 01:57:32 2007 -0500

    S2IO: Optimized the delay to wait for command completion
    
    - Optimized delay to wait for command completion so as to reduce the
      initialization wait time.
    - Disable differentiated services steering. By default RMAC is configured to
      steer traffic with certain DS codes to other queues. Driver must initialize
      the DS memory to 0 to make sure that DS steering will not be used by default.
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fb6a825b09a2311624e9cac20e643d9d7ef602dc
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Sat Feb 24 01:51:50 2007 -0500

    S2IO: Fixes for MSI and MSIX
    
    - Added debug statements to print a debug message if the MSI/MSI-X vector (or)
      data is zero.
    
    - This patch removes the code that will enable NAPI for the case of single
      ring and MSI-X / MSI case. There are some issue in the enabling NAPI with
      MSI/MSI-X.  So we are turning off NAPI in the case of MSI/MSI-X.
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ed227dcc2d998c8e0616449db06f7ef892cb17fc
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:43 2007 -0800

    qla3xxx: Bumping driver version number
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e8f4df2491d07fc369e9d631e0638da03a9b3a38
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:42 2007 -0800

    qla3xxx: Kernic Panic on pSeries under stress conditions
    
    To reproduce this panic consistently, we run an intensive network
    application like 'netperf'. After waiting for a couple of seconds,
    you will see a stack trace and a kernel panic where we are calling
    pci_unmap_single() in ql_poll().
    
    Changes:
    1)  Check the flags on the Response MAC IO Control block to check for
    errors
    2)  Ensure that if we are on the 4022 we only use one segment
    3)  Before, we were reading the memory mapped producer index register
    everytime we iterated in the loop when clearing the queue.  We should
    only be iterating to a known point, not as the producer index
    is being updated.
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 63b66d12de57d8455615d9f619e18824137ed547
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Feb 26 11:06:41 2007 -0800

    qla3xxx: bugfix tx reset after stress conditions.
    
    To Reproduce the Problem:
    To reproduce this panic consistently, we run an intensive network
    application like 'netperf' and then switch to a different console.
    After waiting for a couple of seconds, you will see a tx reset has occured.
    
    Reason:
    We enable interrupts even if we were not running.
    
    Solution:
    Now we will enable interrupts only after we are ready to give up the poll
    routine.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0f8ab89e825f8c9f1c84c558ad7e2e4006aee0d3
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:40 2007 -0800

    qla3xxx: Check return code from pci_map_single() in ql_release_to_lrg_buf_free_list(), ql_populate_free_queue(), ql_alloc_large_buffers(), and ql3xxx_send()
    
    pci_map_single() could fail.  We need to properly check the return
    code from pci_map_single().  If we can not properly map this address,
    then we should cleanup and return the proper return code.
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3e71f6dd47e7e64461328adcdc3fbad1465b4c2f
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Feb 26 11:06:39 2007 -0800

    qla3xxx: bugfix: Fixed jumbo frame handling for 3032 chip.
    
    The scatter/gather lists were not being build correctly.  When
    large frames spanned several buffers the chip would panic.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 97916330e12371b44df659abb25d4d5d528e3ff7
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Feb 26 11:06:38 2007 -0800

    qla3xxx: Clean up receive process.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1357bfcf71063637d16a7014639d675b5cbf5189
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Feb 26 11:06:37 2007 -0800

    qla3xxx: Dynamically size the rx buffer queue based on the MTU.
    
    This change removes use of constants for rx buffer queue size
    and instead calculates the queue length based on what he MTU
    is set to.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cb8bac12ec92ec469ecfe0967429bf9032f835c1
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Mon Feb 26 11:06:36 2007 -0800

    qla3xxx: Remove API to change MTU.
    
    This network device driver shares the same hardware as the qla4xxx
    iSCSI driver. Changing the MTU via the device interface will
    cause qla4xxx to crash as there is no way to make notification.
    Users wishing to change the MTU must do so using an iSCSI
    utility such as Qlogic SanSurfer. This forces the user to
    unload/reload this network device driver after the MTU
    value has been changed in flash.
    
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 04f10773535248466455ae80c1eedeb205c81e9a
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:35 2007 -0800

    qla3xxx: Fix deadlock issue on error paths
    
    1) Fix deadlock issue when in QL_RESET_ACTIVE state and traversing
       through the Link State Machine
    2) Fix deadlock issue when ethtool would call ql_get_settings()
    3) Fix deadlock issue when adaptor is ifup'ed but adaptor fails to initialize
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cd238faa32c4ee0791125526e518f87f48493292
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:33 2007 -0800

    qla3xxx: Changed to use netdev_alloc_skb() from dev_alloc_skb
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2d76b8db4e681944801870f81b859c5bf9964cf
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:32 2007 -0800

    qla3xxx: Remove unnecessary memset() in qla3xxx_send()
    
    We do not need to zero out the 64 byte MAC request I/O control block.
      By zeroing out the control block and setting it to proper fields is
    redundant work.  This is because in the qla3xxx_send() function we will
    already set the proper fields in this structure.  The unused fields are
    not looked at by the hardware and do not need to be zeroed out.
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 546faf077e14930df2ebddad9190db42f1c42f0f
Author: Benjamin Li <benjamin.li@qlogic.com>
Date:   Mon Feb 26 11:06:31 2007 -0800

    qla3xxx: Return proper error codes when the 4022/4032 is being probed
    
    The return code was not properly set when when allocating memory or mapping
    memory failed.  Depending on the stack, the return code would sometimes
    return 0, which indicates everything was ok, when in fact there was an error.
      This would cause trouble when the module was removed.  Now, we will pass
    back the proper return code when an error occurs during the PCI probe.
    
    Signed-off-by: Benjamin Li <benjamin.li@qlogic.com>
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 908b637fe793165b6aecdc875cdca67c4959a1ad
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 26 19:52:06 2007 +0000

    Alignment in mv643xx_eth
    
    The driver contains this little piece of candy:
    
    #if defined(CONFIG_DMA_NONCOHERENT) || defined(CONFIG_NOT_COHERENT_CACHE)
    #define ETH_DMA_ALIGN           L1_CACHE_BYTES
    #else
    #define ETH_DMA_ALIGN           8
    #endif
    
    Any reason why we're not using dma_get_cache_alignment() instead?
    
      Ralf
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 92b0c4e240d0768f875bd08d01ec26d87b9546d1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 26 01:50:34 2007 +0000

    sgiseeq: Don't include unnecessary headerfiles.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e9eb70c92143c8f03e456aa60d89204b3311e554
Author: Timur Tabi <timur@freescale.com>
Date:   Wed Feb 21 14:40:12 2007 -0600

    ucc_geth: use of_get_mac_address()
    
    Update ucc_geth_probe() to use function of_get_mac_address() to obtain the MAC
    address.
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f19841f517f4db628366fa2f080dfa7ac24f0f51
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 23 14:04:54 2007 -0800

    skge: comma consistency
    
    Use comma's consistently.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c4cd29d2058808b7a68e3f2e6cbbcfe19ca7233d
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 23 14:03:00 2007 -0800

    skge: fix transmitter flow control
    
    It looks like the skge driver inherited another bug from the sk98lin code.
    If I send from 1000mbit port to a machine on 100mbit port, the switch should
    be doing hardware flow control, but no pause frames show up in the statistics.
    
    This is the analog of the recent sky2 fixes. The device needs to listen
    for multicast pause frames and then not discard them.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9dc6f0e789ac8cdd4a7912a9c27027d937a6e784
Author: Brice Goglin <brice@myri.com>
Date:   Wed Feb 21 18:05:17 2007 +0100

    myri10ge: workaround buggy adopted firmwares
    
    Work around a bug which occurs when adopting firmware versions
    1.4.4 though 1.4.11 where broadcasts are filtered as if they
    were multicasts.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b1adf031a1325bd85eef0313e42d0189d89cece0
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Wed Feb 21 06:54:06 2007 -0800

    NetXen: Driver ifconfig fix
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9de06610669b2f7b9c2ba6f0a849b70aa91b2edb
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Wed Feb 21 06:37:06 2007 -0800

    NetXen: Driver unload fixes
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fa302484218e4043f4502de2f64a69f87101c78e
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Feb 20 16:45:27 2007 -0600

    spidernet: maintainership
    
    Update driver support contact info.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Cc: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7376e732561f3bd4e2bc7edb26e06874f4ce737c
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Feb 20 16:42:59 2007 -0600

    spidernet: janitorial, typos
    
    Janitorial patch. Undo long lines, fix typo in err msg.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Cc: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5c8e98fe4742734c1c6b81699a86d1f5b03841e0
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Feb 20 16:41:59 2007 -0600

    spidernet: transmit race
    
    Multiple threads performing a transmit can race into
    the spidernet tx ring cleanup code. This puts the
    relevant check under a lock.
    
    Signed-off-by: Linas Vepstas <lins@austin.ibm.com>
    Cc: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Cc: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d9c199ee781fa874e6feb4c56ae3d0e19f7f82a6
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Feb 20 16:41:03 2007 -0600

    spidernet: fix racy double-free of skb
    
    It appears that under certain circumstances, a race will result
    in a double-free of an skb. This patch null's out the skb pointer
    upon the skb free, avoiding the inadvertent deref of bogus data.
    The next patch fixes the actual race.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Cc: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4cb6f9e57d5d7c26d08809c1ce6310c8a7dc96d2
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Feb 20 16:40:06 2007 -0600

    spidernet: separate hardware state from driver state.
    
    This patch separates the hardware descriptor state from the
    driver descriptor state, per (old) suggestion from Ben Herrenschmidt.
    This compiles and boots and seems to work.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Cc: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4b23a554db1571306d9e9cfb2321c3a44770371e
Author: Jens Osterkamp <jens@de.ibm.com>
Date:   Tue Feb 20 16:39:13 2007 -0600

    spidernet: move medium variable into card struct
    
    This moves the medium variable into the spidernet card structure.
    It renames the GMII_ variables to BCM54XX specific ones.
    
    Signed-off-by: Jens Osterkamp <jens@de.ibm.com>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fc8e13da9118b2d45642c2a8bdbdd0448d9f6d04
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Tue Feb 20 16:37:42 2007 -0600

    spidernet: remove txram full logging
    
    This patches removes logging for SPIDER_NET_GTMFLLINT interrupts.
    Since the interrupts are not irregular, and they happen frequently
    when using 100Mbps network switches.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3342cf0e59b6e360ae770f8082b062f4db09f3b5
Author: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
Date:   Tue Feb 20 16:36:14 2007 -0600

    spidernet: spidernet: add support for Celleb
    
    This patch adds or changes some HW specific settings for spider_net on
    Celleb.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3cf761ddccb9332218973e17f9b987bb5cae7b69
Author: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
Date:   Tue Feb 20 16:34:50 2007 -0600

    spidernet: load firmware when open
    
    This patch moves calling init_firmware() from spider_net_probe() to
    spider_net_open() so as to use the driver by built-in.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit abdb66b566fce5641c90100e0a113a94bab43fda
Author: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
Date:   Tue Feb 20 16:33:41 2007 -0600

    spidernet: autoneg support for Celleb
    
    Add auto negotiation support for Celleb.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d406eafee814c0e20af00a9a74f68f6993d8cb9c
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Feb 20 16:32:00 2007 -0600

    spidernet: compile break.
    
    As of 2.6.20-git4, the spider_net driver does not compile.
    This appears to be due to some archaic usage involving kobjects.
    
    It also fixes a nasty double-free during ifdown of the interface.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Cc: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit eb5b5b2ff96e8f3a42a46378968a166bb56bd900
Author: Jens Osterkamp <jens@de.ibm.com>
Date:   Tue Feb 20 16:30:50 2007 -0600

    sungem_phy: support bcm5461 phy, autoneg.
    
    This version moves the medium variable to the card specific structure and
    changes the GMII_* to BCM54XX_* #defines.
    
    This patch adds improved version of enable_fiber for both the 5421 and
    the 5461 phy. It is now possible to specify with these wether you want
    autonegotiation or not. This is needed for bladecenter switches where
    some expect autonegotiation and some dont seem to like this at all.
    Depending on this flag it sets phy->autoneg accordingly for the fiber mode.
    
    More importantly it implements proper read_link and poll_link functions
    for both phys which can handle both copper and fiber mode by determining
    the medium first and then branching to the required functions. For fiber
    they all work fine, for copper they are not tested but return the result
    of the genmii_* function anyway which is supposed to work.
    
    The patch moves the genmii_* functions around to avoid foreward declarations.
    
    Signed-off-by: Jens Osterkamp <jens@de.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6fedae1f6e66ab5f169bf58064e23e015fc1307d
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Feb 20 03:34:44 2007 -0500

    forcedeth: fix checksum feature in mcp65
    
    This patch removes checksum offload feature in mcp65 chipsets as they
    are not supported in hw.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit caf96469e8ab57170cc8ca9c59809132d38e529e
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Feb 20 03:34:40 2007 -0500

    forcedeth: disable msix
    
    There seems to be an issue when both MSI-X is enabled and NAPI is
    configured. This patch disables MSI-X until the issue is root caused.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e0379a14fc80cb98978fa86989dab77b522a8106
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Feb 20 03:34:30 2007 -0500

    forcedeth: fixed missing call in napi poll
    
    The napi poll routine was missing the call to the optimized rx process
    routine. This patch adds the missing call for the optimized path.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 420e85241e41fc84b8f5b26c811beb03c472b679
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Feb 24 17:02:16 2007 -0500

    [netdrvr] tc35815: fix obvious bugs
    
    * clear_page() use is wrong.  We might have multiple pages.
      Use memset() instead.
    * Call pci_unregister_driver() in module exit.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e047d1cfc3cd79f75e7dda9ffb28b456f6936864
Author: Ryusuke Konishi <ryusuke@osrg.net>
Date:   Tue Feb 27 14:13:02 2007 +0900

    [AGPGART] fix compile errors
    
    This fixes the following compile failures of agpgart drivers.
    These errors were inserted by the recent AGPGART constification patch.
    
    drivers/char/agp/uninorth-agp.c:492: error: expected '{' before 'const'
    drivers/char/agp/uninorth-agp.c:517: error: expected '{' before 'const'
    drivers/char/agp/uninorth-agp.c: In function 'agp_uninorth_probe':
    drivers/char/agp/uninorth-agp.c:634: error: 'u3_agp_driver' undeclared (first use in this function)
    drivers/char/agp/uninorth-agp.c:634: error: (Each undeclared identifier is reported only once
    drivers/char/agp/uninorth-agp.c:634: error: for each function it appears in.)
    drivers/char/agp/uninorth-agp.c:636: error: 'uninorth_agp_driver' undeclared (first use in this function)
    
    Signed-off-by: Ryusuke Konishi <ryusuke@osrg.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 99ee4dbd7c99c27129a8e2026003a7680878345f
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Feb 27 05:35:17 2007 +0000

    [CIFS] Remove some unused functions/declarations
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 1ae1bc44d44dd84cc00fb9edbba27458771d860d
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Feb 27 05:16:30 2007 +0000

    [CIFS] New file for previous commit
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 35c11fdda7b556db73631dc17dc1723624690dfb
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Feb 27 05:09:35 2007 +0000

    [CIFS] cifs export operations
    
    For nfsd to work over cifs mounts (which presumably makes sense when trying
    to reexport mounts to windows, network appliances or Samba servers to nfs
    clients via nfs server).
    
    This is the first stage of that enablement, marked experimental and turned
    off by default.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 01363220f5d23ef68276db8974e46a502e43d01d
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Feb 26 22:21:22 2007 -0500

    [PARISC] clocksource: Move update_cr16_clocksource later in boot
    
    smp_cpus_done is too early for us... before we even do a device
    inventory! Move update_cr16_clocksource into the tail end of
    processor_probe() and stub it out on CONFIG_SMP=n builds.
    
    Verified that clocksource0 is properly updated to use jiffies
    on an SMP build.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit fb55a0debee81280684b68713024d0c5e62e8aa5
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Feb 26 21:29:26 2007 -0500

    [PARISC] parisc-agp: Fix thinko const-ifying
    
    Can't really blame davej for mucking this up... static-ify
    it while we're at it, which would have prevented this...
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit b2a8289a611af409e5621df27227dc3f55ba358b
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Feb 26 21:24:56 2007 -0500

    [PARISC] time: clocksource lost update_callback
    
    So move the code to be called by smp_cpus_done, which is
    after we've figured out if there's more than one cpu
    actually present.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 87c8174727c95ab43f5bd2164e78c665c6945e67
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Feb 26 20:15:18 2007 -0500

    [PARISC] time: Convert clocksource is_continuous to flag
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 00d1f3c31a415bb3701abbd3a2c2aa44cb97116c
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Feb 26 20:10:42 2007 -0500

    [PARISC] clocksource_cr16: Use clocksource_change_rating()
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 0ff851e1903cd46823520a0d95d00f5347a88bd8
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Feb 26 20:08:46 2007 -0500

    [PARISC] Remove __read_mostly annotation from command_line
    
    Who cares if it's in the read mostly section when it's
    going to be discarded anyway?
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c68644d3304d217d50b8f0a179d4aa7e5a85a5bc
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 26 20:46:34 2007 +0000

    [MIPS] Make SMTC_IDLE_HOOK_DEBUG a proper option in Kconfig.debug.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e016c38d1813c4ad180a4cd44942bca2a9e7a8c9
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Feb 24 21:15:11 2007 +0000

    [MIPS] Fix foobar in wiring up compat_sys_epoll_pwait syscall.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b772e6d272152808cede1c8f5387626b6329538c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Feb 24 21:04:04 2007 +0000

    [MIPS] Always fixup unaligned accesses in kernel mode.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9b43fb6bc118226206c17be5f46297fd76b4abbb
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Fri Feb 23 19:58:48 2007 +0100

    [MIPS] Fix dma_sync_*_for_device() functions
    
    Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 40139bd459d3fe90ee560f46a2cb00f16b873170
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 24 06:17:09 2007 -0500

    [MIPS] Remove unreferenced _IOC_SLMASK macro in ioctl.h.
    
    Delete the definition of the apparently unreferenced macro _IOC_SLMASK.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f13cc01d8d3630ba42680ac56b3bedfce812e531
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Fri Feb 23 21:39:38 2007 +0100

    [MIPS] SNI: MIPS_CPU_IRQ_BASE cleanup
    
    Use MIPS_CPU_IRQ_BASE instead of own define.
    
    Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3dac2561e2ed8d75a8bb682c25a32b271298ff49
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 23 14:12:32 2007 +0000

    [MIPS] RTLX: Delete multiple definition of ret shaddowing each other.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c4c4018b04f9b7993e3800dc1f391ac8947764a5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 23 13:40:45 2007 +0000

    [MIPS] RTLX, VPE: Make open actually atomic.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cbc841356702ccf4f16e760c84006ed3ddd4b1fd
Author: Thomas Koeller <thomas.koeller@baslerweb.com>
Date:   Fri Feb 23 01:39:41 2007 +0100

    [MIPS] excite: Set serial driver iotype to UPIO_RM9000
    
    Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit be91589ee8b8691209d5dd876360e67d2f79f16a
Author: Thomas Koeller <thomas.koeller@baslerweb.com>
Date:   Fri Feb 23 01:40:34 2007 +0100

    [MIPS] excite: Rename CONFIG option
    
    This change is purely cosmetical.
    
    Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4419708807308fc93ec9a135db7ffe50b182fdda
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Fri Feb 23 01:13:17 2007 +0900

    [MIPS] Mark pcibios_fixup_device_resources() as __devinit
    
    pcibios_fixup_device_resources() is called by pcibios_fixup_bus() which is
    marked as __devinit.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d2af363cfb94f1bacb3e60327bc44a97881a38c2
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Fri Feb 23 00:39:48 2007 +0900

    [MIPS] Kill redundant EXTRA_AFLAGS
    
    Many Makefiles in arch/mips have EXTRA_AFLAGS := $(CFLAGS) line.  This
    is redundant while AFLAGS contains $(cflags-y) and any options only
    listed in CFLAGS (not in cflags-y) should be unnecessary for asm
    sources.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 67e2cccec6d230165345fdf6c0fe4c8761f9d1ba
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Feb 22 14:19:48 2007 +0000

    [MIPS] RTLX: Handle signals when sleeping.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cc39cb15a62c7e515557edcc3aea20cc62ffb13b
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Feb 22 22:31:00 2007 +0900

    [MIPS] TB0287: Enable SM501 driver support in defconfig
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6f366c1c751454df3d1c0f25f15ee0164821112a
Merge: 221dee2... cb48cab...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 14:58:03 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev: (51 commits)
      [libata] bump versions
      [libata] Trim trailing whitespace.
      [libata] sata_mv: Fix 50xx irq mask
      [libata] sata_mv: don't touch reserved bits in EDMA config register
      libata: Use new id_to_dma_mode function to tidy reporting in more drivers (minimally tested)
      pata_pcmcia: Fix oops in 2.6.21-rc1
      Add id_to_dma_mode function for printing DMA modes
      sata_promise: simplify port setup
      sata_promise: fix 20619 new EH merge error
      [libata] ACPI: remove needless ->qc_issue hook existence test
      sata_vsc: refactor vsc_sata_interrupt and hook up error handling
      sata_sil: ignore and clear spurious IRQs while executing commands by polling
      sata_mv: fix pci_enable_msi() error handling
      pata_amd: fix an obvious bug in cable detection
      [libata] ata_piix: remove duplicate PCI IDs
      sata_nv: complain on spurious completion notifiers
      libata: test major version in ata_id_is_sata()
      sata_nv: kill old private BMDMA helper functions
      libata: fix remaining ap->id
      ahci: consider SDB FIS containing spurious NCQ completions HSM violation (regenerated)
      ...

commit 221dee285ee38099b82437531bcae9fa9cb64cc4
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 14:55:48 2007 -0800

    Revert "[CPUFREQ] constify cpufreq_driver where possible."
    
    This reverts commit aeeddc1435c37fa3fc844f31d39c185b08de4158, which was
    half-baked and broken.  It just resulted in compile errors, since
    cpufreq_register_driver() still changes the 'driver_data' by setting
    bits in the flags field.  So claiming it is 'const' _really_ doesn't
    work.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6f8c480f998a619082f18407f8d7f4c29e94dc6e
Merge: 038c068... bd5ab26...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 14:17:50 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq:
      [CPUFREQ] constify some data tables.
      [CPUFREQ] constify cpufreq_driver where possible.
      {rd,wr}msr_on_cpu SMP=n optimization
      [CPUFREQ] cpufreq_ondemand.c: don't use _WORK_NAR
      rdmsr_on_cpu, wrmsr_on_cpu
      [CPUFREQ] Revert default on deprecated config X86_SPEEDSTEP_CENTRINO_ACPI

commit 038c068f63a950c3a6ccfa814831ccac0ad48fb1
Merge: 5992fd1... e416988...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 13:19:17 2007 -0800

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] CLPS7500 doesn't have IO ports
      [ARM] Fix more apm-emulation.h
      [ARM] 4234/1: Introduce get_irqnr_preamble and arch_ret_to_user for ns9xxx.
      [ARM] 4233/1: nand/s3c2410.c: warning fix
      [ARM] 4226/1: initial .data and .bss mappings of XIP kernel should be TEXT_OFFSET
      [ARM] 4224/2: allow XIP kernel to boot again
      [ARM] 4232/1: AT91: Generic GPIO bug
      [ARM] 4231/1: AT91: Merge and typo fixes.
      [ARM] 4229/1: S3C2410: Add MACH_QT2410 to s3c2410_defconfig
      [ARM] 4228/2: S3C24XX: update s3c2410_defconfig for 2.6.21-rc1

commit 5992fd1995a5e69710011fc7d7945c62bf5b551b
Merge: eafb4f1... 843613b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 13:18:43 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IPoIB: Correct debugging output when path record lookup fails
      RDMA/cxgb3: Stop the EP Timer on BAD CLOSE
      RDMA/cxgb3: cleanups
      RDMA/cma: Remove unused node_guid from cma_device structure
      IB/cm: Remove ca_guid from cm_device structure
      RDMA/cma: Request reversible paths only
      IB/core: Set hop limit in ib_init_ah_from_wc correctly
      IB/uverbs: Return correct error for invalid PD in register MR
      IPoIB: Remove unused local_rate tracking
      IPoIB/cm: Improve small message bandwidth
      IB/mthca: Make 2 functions static

commit e41698894d3fe64f17fe411e3e5ef3c2537bf2e6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Feb 26 21:07:30 2007 +0000

    [ARM] CLPS7500 doesn't have IO ports
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 61fde514c2368a93e97f926a289d556c93a18fc6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Feb 26 21:04:29 2007 +0000

    [ARM] Fix more apm-emulation.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit eafb4f184cd89e8af5676ec49ae35184172553fe
Author: Alan Cox <alan@redhat.com>
Date:   Wed Feb 21 16:41:23 2007 +0000

    [PATCH] Fix oops in pata_pcmcia
    
    The change to the devres layer re-orders the execution of cleanup
    functions and in turn causes the pcmcia layer to oops as it zaps a
    pointer now needed later on. We simply leave the pointer alone.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8cd0ae056a8d3528e4deb7ecc046304bb2d5a680
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Fri Feb 23 14:12:02 2007 +1100

    [PATCH] Make hvc_console.c compile on non-powerpc: Remove NO_IRQ
    
    Paulus preferred this over #defining NO_IRQ in the file, since that's
    0 for powerpc anyway.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 843613b04744d5b65c2f37975c5310f366a0d070
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Feb 26 12:57:08 2007 -0800

    IPoIB: Correct debugging output when path record lookup fails
    
    If path_rec_completion() is passed a non-NULL path record pointer
    along with an unsuccessful status value, the tracing code incorrectly
    prints the (invalid) DLID from the path record rather than the more
    interesting status code.  The actual logic of the function correctly
    uses the path record only if the status indicates a successful lookup.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 62fa4dc7f782911b7b3867b6360892dcd46d8e69
Author: Ondrej Zajicek <santiago@crfreenet.org>
Date:   Thu Feb 22 17:00:41 2007 +0100

    [PATCH] Fix build-failure in drivers/video/s3fb.c
    
    Toralf Frster pointed out that drivers/video/s3fb.c would fail to compile:
    > ...
    >   CC      drivers/video/s3fb.o
    > drivers/video/s3fb.c: In function `s3_pci_remove':
    > drivers/video/s3fb.c:1003: warning: unused variable `par'
    > drivers/video/s3fb.c: In function `s3fb_setup':
    > drivers/video/s3fb.c:1141: error: `mtrr' undeclared (first use in this function)
    > drivers/video/s3fb.c:1141: error: (Each undeclared identifier is reported only once
    > drivers/video/s3fb.c:1141: error: for each function it appears in.)
    > make[2]: *** [drivers/video/s3fb.o] Error 1
    > make[1]: *** [drivers/video] Error 2
    > make: *** [drivers] Error 2
    
    Here is fix, it also fixes broken boot options.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 25165120f2432ffa36518d53bd3ec66f6e434f63
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Feb 22 09:38:22 2007 +0100

    [PATCH] x86: add -freg-struct-return to CFLAGS
    
    Jeremy Fitzhardinge suggested the use of -freg-struct-return, which does
    structure-returns (such as when using pte_t) in registers instead of on
    the stack.
    
    that is indeed so, and this option reduced the kernel size a bit:
    
        text    data     bss     dec     hex filename
     4799506  543456 3760128 9103090  8ae6f2 vmlinux.before
     4798117  543456 3760128 9101701  8ae185 vmlinux.after
    
    the resulting kernel booted fine on my testbox. Lets go for it.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 38bed5429987c939d86cd3da915d6706fd1e6e53
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Feb 22 09:09:34 2007 +0100

    [PATCH] add MAINTAINERS entry for high-res timers, clockevents, dynticks
    
    Thomas is the maintainer and primary author of the high-res timers,
    clockevents and dynticks code.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b0138a6cb7923a997d278b47c176778534d1095b
Merge: 6572d6d... 1055a8a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 12:48:06 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/kyle/parisc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/kyle/parisc-2.6: (78 commits)
      [PARISC] Use symbolic last syscall in __NR_Linux_syscalls
      [PARISC] Add missing statfs64 and fstatfs64 syscalls
      Revert "[PARISC] Optimize TLB flush on SMP systems"
      [PARISC] Compat signal fixes for 64-bit parisc
      [PARISC] Reorder syscalls to match unistd.h
      Revert "[PATCH] make kernel/signal.c:kill_proc_info() static"
      [PARISC] fix sys_rt_sigqueueinfo
      [PARISC] fix section mismatch warnings in harmony sound driver
      [PARISC] do not export get_register/set_register
      [PARISC] add ENTRY()/ENDPROC() and simplify assembly of HP/UX emulation code
      [PARISC] convert to use CONFIG_64BIT instead of __LP64__
      [PARISC] use CONFIG_64BIT instead of __LP64__
      [PARISC] add ASM_EXCEPTIONTABLE_ENTRY() macro
      [PARISC] more ENTRY(), ENDPROC(), END() conversions
      [PARISC] fix ENTRY() and ENDPROC() for 64bit-parisc
      [PARISC] Fixes /proc/cpuinfo cache output on B160L
      [PARISC] implement standard ENTRY(), END() and ENDPROC()
      [PARISC] kill ENTRY_SYS_CPUS
      [PARISC] clean up debugging printks in smp.c
      [PARISC] factor syscall_restart code out of do_signal
      ...
    
    Fix conflict in include/linux/sched.h due to kill_proc_info() being made
    publicly available to PARISC again.

commit 6572d6d7d0f965dda19d02af804ed3ae4b3bf1fc
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sun Feb 25 12:49:01 2007 +0100

    [PATCH] CREDITS: update my email address
    
    Update my email address in CREDITS to one that works.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f15e66b9328c8e2fef4f59f121221c902d7a9920
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Sat Feb 24 11:46:06 2007 +0100

    [PATCH] drivers/mfd/sm501.c: Replace pci_module_init with pci_register_driver
    
    Replace pci_module_init with pci_register_driver
    
    Signed-off-by: Richard Knutson <ricknu-0@student.ltu.se>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5d5dde2ed928677028ef859f48a32a503b01c636
Merge: dafdcfb... aef8811...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 12:23:08 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (25 commits)
      [XFRM]: Fix oops in xfrm4_dst_destroy()
      [XFRM_TUNNEL]: Reload header pointer after pskb_may_pull/pskb_expand_head
      [IPV4]: Use random32() in net/ipv4/multipath
      [BRIDGE]: eliminate workqueue for carrier check
      [BRIDGE]: get rid of miscdevice include
      [IPV6]: Fix __ipv6_addr_type() export in correct place.
      [IPV4] devinet: Register inetdev earlier.
      [IPV6] ADDRCONF: Register inet6_dev earlier.
      [IPV6] ADDRCONF: Manage prefix route corresponding to address manually added.
      [IPV6] IP6TUNNEL: Use update_pmtu() of dst on xmit.
      [IPV6] ADDRCONF: Statically link __ipv6_addr_type() for sunrpc subsystem.
      [IPV4]: Correct links in net/ipv4/Kconfig
      [SCTP]: Strike the transport before updating rto.
      [SCTP]: Fix connection hang/slowdown with PR-SCTP
      [TCP]: Fix MD5 signature pool locking.
      [TG3]: TSO workaround fixes.
      [AF_PACKET]: Remove unnecessary casts.
      [IPV6]: Adjust inet6_exit() cleanup sequence against inet6_init()
      [IPSEC]: More fix is needed for __xfrm6_bundle_create().
      [IRDA] net/irda/: proper prototypes
      ...

commit aef8811abbc9249a2bd59bd2331bbe523df05d17
Author: Bernhard Walle <bwalle@suse.de>
Date:   Mon Feb 26 12:10:32 2007 -0800

    [XFRM]: Fix oops in xfrm4_dst_destroy()
    
    With 2.6.21-rc1, I get an oops when running 'ifdown eth0' and an IPsec
    connection is active. If I shut down the connection before running 'ifdown
    eth0', then there's no problem.  The critical operation of this script is to
    kill dhcpd.
    
    The problem is probably caused by commit with git identifier
    4337226228e1cfc1d70ee975789c6bd070fb597c (Linus tree) "[IPSEC]: IPv4 over IPv6
    IPsec tunnel".
    
    This patch fixes that oops. I don't know the network code of the Linux
    kernel in deep, so if that fix is wrong, please change it. But please
    fix the oops. :)
    
    Signed-off-by: Bernhard Walle <bwalle@suse.de>
    Acked-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dafdcfba62f7ef23045f024a305168cac1c07590
Merge: c90c69a... 4f4acf3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 12:06:43 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jmorris/selinux-2.6
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jmorris/selinux-2.6:
      Always initialize scontext and scontext_len
      Reassign printk levels in selinux kernel code

commit ba6a46a03f3c46ed68be551c722161bb37caf095
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Feb 26 20:06:29 2007 +0000

    [CIFS] small piece missing from previous patch
    
    There were two i_size_writes in the new truncate
    function - we missed one in the last patch.
    Noticed by Shaggy when he reviewed.
    
    Thank you Shaggy ...
    
    CC: Shaggy <shaggy@us.ibm.com>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit c90c69a508c2fd8d2f892c4b166baffc91111117
Merge: 6842ac6... 19ba1b1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 12:06:08 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC] uctrl: Check request_irq() return value.
      [SPARC64]: Update defconfig.
      [SPARC64] bbc_i2c: Fix kenvctrld eating %100 cpu.
      [SPARC64]: Fix arch_teardown_msi_irq().
      [SPARC64]: virt_irq_free only needed when CONFIG_PCI_MSI
      [SPARC]: Remove the broken SUN_AURORA driver.

commit 6842ac64ae2ed2714004a25d53d3b20f0d3af524
Merge: 60f29b1... 2fea6f3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:45:50 2007 -0800

    Merge branch 'for-linus' of git://git.o-hand.com/linux-rpurdie-leds
    
    * 'for-linus' of git://git.o-hand.com/linux-rpurdie-leds:
      leds: Add support for Cobalt Server front LED
      leds: Add IPAQ h1940 LEDs support

commit 60f29b1e1600d89aee5e529acb4b276a6650cb8b
Merge: 5313a20... c9e3ad6...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:44:51 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6:
      JFS: Get rid of "may be used uninitialized" warnings

commit 4f4acf3a478d5cada688f336f2229ab580f56113
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Mon Feb 26 12:02:34 2007 -0500

    Always initialize scontext and scontext_len
    
    Always initialize *scontext and *scontext_len in security_sid_to_context.
    
    (via http://lkml.org/lkml/2007/2/23/135)
    
    Signed-off-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>

commit fadcdb451632d32d7c0d4c71df9ac2d3b7ae2348
Author: Eric Paris <eparis@parisplace.org>
Date:   Thu Feb 22 18:11:31 2007 -0500

    Reassign printk levels in selinux kernel code
    
    Below is a patch which demotes many printk lines to KERN_DEBUG from
    KERN_INFO.  It should help stop the spamming of logs with messages in
    which users are not interested nor is there any action that users should
    take.  It also promotes some KERN_INFO to KERN_ERR such as when there
    are improper attempts to register/unregister security modules.
    
    A similar patch was discussed a while back on list:
    http://marc.theaimsgroup.com/?t=116656343500003&r=1&w=2
    This patch addresses almost all of the issues raised.  I believe the
    only advice not taken was in the demoting of messages related to
    undefined permissions and classes.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    
     security/selinux/hooks.c       |   20 ++++++++++----------
     security/selinux/ss/avtab.c    |    2 +-
     security/selinux/ss/policydb.c |    6 +++---
     security/selinux/ss/sidtab.c   |    2 +-
     4 files changed, 15 insertions(+), 15 deletions(-)
    Signed-off-by: James Morris <jmorris@namei.org>

commit e4396b544fa5c85e3c263e0bc92b0743a24ba818
Author: Arnaldo Carvalho de Melo <acme@redhat.com>
Date:   Sat Feb 24 18:12:42 2007 -0800

    [XFRM_TUNNEL]: Reload header pointer after pskb_may_pull/pskb_expand_head
    
               Please consider applying, this was found on your latest
    net-2.6 tree while playing around with that ip_hdr() + turn
    skb->nh/h/mac pointers  as offsets on 64 bits idea :-)
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c3ae4d7e727eac6f6eb23587cef0413734d4ae1
Author: Joe Perches <joe@perches.com>
Date:   Thu Feb 22 01:26:32 2007 -0800

    [IPV4]: Use random32() in net/ipv4/multipath
    
    Removed local random number generator function
    
    Signed-off-by: Joe Perches <joe@perches.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 269def7c505b4d229f9ad49bf88543d1e605533e
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 22 01:10:18 2007 -0800

    [BRIDGE]: eliminate workqueue for carrier check
    
    Having a work queue for checking carrier leads to lots of race issues.
    Simpler to just get the cost when data structure is created and
    update on change.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac062e84d0c177c43549e7fb608152fec218e7fc
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 22 01:07:53 2007 -0800

    [BRIDGE]: get rid of miscdevice include
    
    The bridge hasn't used miscdevice for a long long time.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7401055b58e557362dfcaa65a581db1d1e972439
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Feb 21 23:26:56 2007 -0800

    [IPV6]: Fix __ipv6_addr_type() export in correct place.
    
    It needs to be in net/ipv6/addrconf_core.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8030f54499925d073a88c09f30d5d844fb1b3190
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Feb 22 01:53:47 2007 +0900

    [IPV4] devinet: Register inetdev earlier.
    
    This patch allocates inetdev at registration for all devices
    in line with IPv6.  This allows sysctl configuration on the
    devices to occur before they're brought up or addresses are
    added.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 45ba9dd2007da23da5ac21179451c3c9fee30a96
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Feb 15 02:07:27 2007 +0900

    [IPV6] ADDRCONF: Register inet6_dev earlier.
    
    Allocate inet6_dev earlier to allow users to set up per-interface variables.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 46d480468fd9d165513d96f5e545538425d6472d
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Wed Feb 7 20:36:26 2007 +0900

    [IPV6] ADDRCONF: Manage prefix route corresponding to address manually added.
    
    It is more natural to manage prefix routes corresponding to address which is
    being added manually.
    
    With help from Masafumi Aramoto <aramoto@linux-ipv6.org>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 268920584b57d534a40503a8a3a47eff9e57fbf8
Author: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
Date:   Sun Sep 10 03:59:17 2006 +0900

    [IPV6] IP6TUNNEL: Use update_pmtu() of dst on xmit.
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 8c14b7ce22a7ddd9fe1b1c852c4015633ec3efec
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Feb 22 02:25:42 2007 +0900

    [IPV6] ADDRCONF: Statically link __ipv6_addr_type() for sunrpc subsystem.
    
    Link __ipv6_addr_type() statically for sunrpc code even if IPv6 is
    built as module.
    
    Signed-off-by: YOSHIFUJI Hidaki <yoshfuji@linux-ipv6.org>

commit f4b9479dc5a1b0e1ca8666053f0d932baddc619d
Author: Baruch Even <baruch@ev-en.org>
Date:   Wed Feb 21 19:32:37 2007 -0800

    [IPV4]: Correct links in net/ipv4/Kconfig
    
    Correct dead/indirect links in net/ipv4/Kconfig
    
    Signed-off-by: Baruch Even <baruch@ev-en.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1845a579e0c3084a822fbe610f7cfd1b0e0396ac
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Wed Feb 21 02:06:19 2007 -0800

    [SCTP]: Strike the transport before updating rto.
    
    Once we reach a point where we exceed the max.path.retrans, strike the
    transport before updating the rto.  This will force transport switch at
    the right time, instead of 1 retransmit too late.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8c4a2d41a7eb5a8f214f537acca533dcd6430782
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Wed Feb 21 02:06:04 2007 -0800

    [SCTP]: Fix connection hang/slowdown with PR-SCTP
    
    The problem that this patch corrects happens when all of the following
    conditions are satisfisfied:
     1.  PR-SCTP is used and the timeout on the chunks is set below RTO.Max.
     2.  One of the paths on a multihomed associations is brought down.
    
    In this scenario, data will expire within the rto of the initial
    transmission and will never be retransmitted.  However this data still
    fills the send buffer and is counted against the association as outstanding
    data.  This causes any new data not to be sent and retransmission to not
    happen.
    
    The fix is to discount the abandoned data from the outstanding count and
    peers rwnd estimation.  This allows new data to be sent and a retransmission
    timer restarted.  Even though this new data will most likely expire within
    the rto, the timer still counts as a strike against the transport and forces
    the FORWARD-TSN chunk to be retransmitted as well.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c4f6219aca5939b57596278ea8b014275d4917b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Feb 20 23:51:47 2007 -0800

    [TCP]: Fix MD5 signature pool locking.
    
    The locking calls assumed that these code paths were only
    invoked in software interrupt context, but that isn't true.
    
    Therefore we need to use spin_{lock,unlock}_bh() throughout.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f62ad5d37f4e43c841e92c6f159c93dcf2d2cdd
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 20 23:25:40 2007 -0800

    [TG3]: TSO workaround fixes.
    
    1.  Add race condition check after netif_stop_queue().  tg3_tx() runs
        without netif_tx_lock and can race with tg3_start_xmit_dma_bug() ->
        tg3_tso_bug().
    
    2.  Firmware TSO in 5703/5704/5705 also have the same TSO limitation,
        i.e. they cannot handle TSO headers bigger than 80 bytes.  Rename
        TG3_FL2_HW_TSO_1_BUG to TG3_FL2_TSO_BUG and set this flag on
        these chips as well.
    
    3.  Update version to 3.74.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ad930650c0e694233971c56e8de8e78b896e2613
Author: Jason Lunz <lunz@falooley.org>
Date:   Tue Feb 20 23:19:54 2007 -0800

    [AF_PACKET]: Remove unnecessary casts.
    
    packet_lookup_frame() always returns tpacket_hdr*, so there's no reason
    to return char* and require casting by callers.
    
    Also, remove a cast of void*.
    
    Signed-off-by: Jason Lunz <lunz@falooley.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca17c23345308a8692a65a0cca363d9108a665ca
Author: Joe Jin <joe.jin@oracle.com>
Date:   Tue Feb 20 01:30:15 2007 -0800

    [IPV6]: Adjust inet6_exit() cleanup sequence against inet6_init()
    
    This patch for adjust inet6_exit() to inverse sequence to inet6_init().
    
    At ipv6_init, it first create proc_root/net/dev_snmp6 entry by call
    ipv6_misc_proc_init(), then call addrconf_init() to create the corresponding
    device entry at this directory, but at inet6_exit, ipv6_misc_proc_exit()
    called first, then call addrconf_init().
    
    Signed-off-by: Joe Jin <joe.jin@oracle.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d3f23dfe8bbb6bf352a208755e4ff2806315067b
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Tue Feb 20 01:08:41 2007 -0800

    [IPSEC]: More fix is needed for __xfrm6_bundle_create().
    
    Fixed to set fl_tunnel.fl6_src correctly in xfrm6_bundle_create().
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Acked-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a39a21982c53846acb3bee1a23764a387160a4c8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 01:06:40 2007 -0800

    [IRDA] net/irda/: proper prototypes
    
    This patch adds proper prototypes for some functions in
    include/net/irda/irda.h
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2312119afbce0108a72a1e09015a37308f7c7212
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Feb 17 23:59:02 2007 +0100

    [Bluetooth] Make use of MODULE_FIRMWARE
    
    Some Bluetooth drivers need one or more binary firmware images. Export
    these image names via the MODULE_FIRMWARE tag.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit c1a3313698895d8ad4760f98642007bf236af2e8
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Feb 17 23:58:57 2007 +0100

    [Bluetooth] Make use of device_move() for RFCOMM TTY devices
    
    In the case of bound RFCOMM TTY devices the parent is not available
    before its usage. So when opening a RFCOMM TTY device, move it to
    the corresponding ACL device as a child. When closing the device,
    move it back to the virtual device tree.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit f5ffd4620aba9e55656483ae1ef5c79ba81f5403
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Feb 17 23:58:53 2007 +0100

    [Bluetooth] Add open and close callbacks for HID device
    
    The open and close callbacks for the HID device are not optional, but
    for the Bluetooth HID report mode support it is enough to add empty
    dummy callbacks.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit e1aaadd4d8162a2c33e41dd5a72234ea4d3b014f
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Feb 17 23:58:49 2007 +0100

    [Bluetooth] Add support for using the HID subsystem
    
    This patch extends the current Bluetooth HID support to use the new
    HID subsystem and adds full report mode support.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit a83d6c0de8811d7bcc4eb67ed199d1120ca6cad8
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Sat Feb 17 23:58:44 2007 +0100

    [Bluetooth] Fix wrong put_user() from HIDP compat ioctl patch
    
    The compat ioctl patch copied the parser version field into the
    report descriptor size field by mistake.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 5313a20bfca33ac2e15e3f6b6c8cafe806efbcc6
Merge: a7538a7... 3494c16...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:42:10 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/tick-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/tick-2.6:
      [TICK] tick-common: Fix one-shot handling in tick_handle_periodic().
      [TIME] tick-sched: Add missing asm/irq_regs.h include.

commit a7538a7f87826fb5cacc6959f00dfa9fba6f4b15
Merge: 92320ce... dfff0a0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:41:30 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6:
      Revert "Driver core: let request_module() send a /sys/modules/kmod/-uevent"
      Driver core: fix error by cleanup up symlinks properly
      make kernel/kmod.c:kmod_mk static
      power management: fix struct layout and docs
      power management: no valid states w/o pm_ops
      Driver core: more fallout from class_device changes for pcmcia
      sysfs: move struct sysfs_dirent to private header
      driver core: refcounting fix
      Driver core: remove class_device_rename

commit 92320cec611d4ed44a9bd635727d61f6caa669a7
Merge: 63ae0e5... 19c2623...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:41:08 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      USB: export autosuspend delay in sysfs
      sysfs: allow attributes to be added to groups
      USB: make autosuspend delay a module parameter
      USB: minor cleanups for sysfs.c
      USB: add a blacklist for devices that can't handle some things we throw at them.
      USB: refactor usb device matching and create usb_device_match
      USB: Wacom driver updates
      gadgetfs: Fixed bug in ep_aio_read_retry.
      USB: Use USB defines in usbmouse.c and usbkbd.c
      USB: add rationale on why usb descriptor structures have to be packed
      USB: ftdi_sio: Adding VID and PID for Tellstick
      UHCI: Eliminate asynchronous skeleton Queue Headers
      UHCI: Add macros for computing DMA values
      USB: Davicom DM9601 usbnet driver
      USB: asix.c - Add JVC-PRX1 ids
      usbmon: Remove erroneous __exit
      USB: add driver for iowarrior devices.
      USB: option: add a bunch of new device ids
      USB: option: remove duplicate device id table

commit 63ae0e5be34cb7593fc5f1135422129f765ac3ef
Merge: a22a0fa... 2e8e2d4...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:40:46 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Fix port 0 mac address for mips mv6434x platforms
      [SERIAL] serial_txx9 driver update
      Revert "[PATCH] Generic ioremap_page_range: mips conversion"
      [MIPS] Cobalt: Rename "Colo" MTD partition to "firmware".
      [MIPS] SMP: Get smp_tune_scheduling to do something useful.
      [MIPS] Add basic SMARTMIPS ASE support

commit a22a0fab32e1216df56e4b9a577dc5c922cf7524
Merge: 2a786b4... e5524f3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 11:39:49 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] Further constification.
      [AGPGART] Fix modular agpgart ia64 allmodconfig

commit 19ba1b19962aeb87a029b37234f54b02e8f7b507
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 09:46:54 2007 -0800

    [SPARC] uctrl: Check request_irq() return value.
    
    Based upon a patch by Monakhov Dmitriy.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5b002c1bf31d1145271b28ed63db5e4f893dfd3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 10:45:43 2007 -0800

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3b36fb8471f8639d565b69c9a456a3ef9413df59
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 10:11:35 2007 -0800

    [SPARC64] bbc_i2c: Fix kenvctrld eating %100 cpu.
    
    Based almost entirely upon a patch by Joerg Friedrich
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abfd336cd79ea154dc71f09272f578a731b81d8c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 26 09:40:34 2007 -0800

    [SPARC64]: Fix arch_teardown_msi_irq().
    
    Need to use get_irq_msi() not get_irq_data().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5746c99dfa09231fa24cac1986de4661ea79a80f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Feb 20 01:26:48 2007 -0800

    [SPARC64]: virt_irq_free only needed when CONFIG_PCI_MSI
    
    Noticed by Meelis Roos.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cacfd56756c087873f22dc9e2ace5f634775836a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 01:03:48 2007 -0800

    [SPARC]: Remove the broken SUN_AURORA driver.
    
    The SUN_AURORA driver:
    - has been marked as BROKEN for more than two years and
    - is still marked as BROKEN.
    
    Drivers that had been marked as BROKEN for such a long time seem to be
    unlikely to be revived in the forseeable future.
    
    But if anyone wants to ever revive this driver, the code is still
    present in the older kernel releases.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3494c16676a21e7e53e21b08a0a469a38df6dcfb
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Feb 24 22:11:42 2007 -0800

    [TICK] tick-common: Fix one-shot handling in tick_handle_periodic().
    
    When clockevents_program_event() is given an expire time in the
    past, it does not update dev->next_event, so this looping code
    would loop forever once the first in-the-past expiration time
    was used.
    
    Keep advancing "next" locally to fix this bug.
    
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9e203bcc1051cac2a8b15c3ee9db4c0d05794abe
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Feb 24 22:10:13 2007 -0800

    [TIME] tick-sched: Add missing asm/irq_regs.h include.
    
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2a786b452eba900324c29a8fcf5c96d5b1c01000
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:46:20 2007 -0700

    [PATCH] genirq: Mask irqs when migrating them.
    
    move_native_irqs tries to do the right thing when migrating irqs
    by disabling them.  However disabling them is a software logical
    thing, not a hardware thing.  This has always been a little flaky
    and after Ingo's latest round of changes it is guaranteed to not
    mask the apic.
    
    So this patch fixes move_native_irq to directly call the mask and
    unmask chip methods to guarantee that we mask the irq when we
    are migrating it.  We must do this as it is required by
    all code that call into the path.
    
    Since we don't know the masked status when IRQ_DISABLED is
    set so we will not be able to restore it.   The patch makes the code
    just give up and trying again the next time this routing is called.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 610142927b5bc149da92b03c7ab08b8b5f205b74
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:40:58 2007 -0700

    [PATCH] x86_64 irq: Safely cleanup an irq after moving it.
    
    The problem:  After moving an interrupt when is it safe to teardown
    the data structures for receiving the interrupt at the old location?
    
    With a normal pci device it is possible to issue a read to a device
    to flush all posted writes.  This does not work for the oldest ioapics
    because they are on a 3-wire apic bus which is a completely different
    data path.  For some more modern ioapics when everything is using
    front side bus delivery you can flush interrupts by simply issuing a
    read to the ioapic.  For other modern ioapics emperical testing has
    shown that this does not work.
    
    So it appears the only reliable way to know the last of the irqs from an
    ioapic have been received from before the ioapic was reprogrammed is to
    received the first irq from the ioapic from after it was reprogrammed.
    
    Once we know the last irq message has been received from an ioapic
    into a local apic we then need to know that irq message has been
    processed through the local apics.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bc5e81a1519abc69472bb67deace7bb1ac09d65a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:38:26 2007 -0700

    [PATCH] x86_64 irq: Add constants for the reserved IRQ vectors.
    
    For the ISA irqs we reserve 16 vectors.  This patch adds constants for
    those vectors and modifies the code to use them.  Making the code a
    little clearer and making it possible to move these vectors in the future.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b93179bdfcbb0154e63e57194e2648bd0ff648a7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:36:25 2007 -0700

    [PATCH] x86_64 irq: Remove unnecessary irq 0 setup.
    
    The code in io_apic.c and in i8259.c currently hardcode the same
    vector for the timer interrupt so there is no reason for a special
    assignment for the timer as the setup for the i8259 already takes care
    of this.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dfbffdd81c5d029ca8f8a754ce0eb8199c418eba
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:35:05 2007 -0700

    [PATCH] x86_64 irq: Simplify assign_irq_vector's arguments.
    
    Currently assign_irq_vector works mostly by side effect and returns
    the results of it's changes to the caller.  Which makes for a lot of
    arguments to pass/return and confusion as to what to do if you need
    the status but you aren't calling assign_irq_vector.
    
    This patch stops returning values from assign_irq_vector that can be
    retrieved just as easily by examining irq_cfg, and modifies the
    callers to retrive those values from irq_cfg when they need them.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 13a79503ab4a0f602c6806b2572b3338994b55d2
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:32:47 2007 -0700

    [PATCH] x86_64 irq: Begin consolidating per_irq data in structures.
    
    Currently the io_apic.c has several parallel arrays for different
    kinds of data that can be know about an irq.  The parallel arrays
    make the code harder to maintain and make it difficult to remove
    the static limits on the number of the number of irqs.
    
    This patch pushes irq_data and irq_vector into a irq_cfg array and
    updates the code to use it.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e273d140d9d0c2c7941d97a6ace455113bb4ec63
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:26:53 2007 -0700

    [PATCH] x86_64 irq: Use NR_IRQS not NR_IRQ_VECTORS
    
    NR_IRQ_VECTORS is currently a compatiblity define set to NR_IRQs.
    This patch updates the users of NR_IRQ_VECTORS to use NR_IRQs instead
    so that NR_IRQ_VECTORS can be removed.
    
    There is still shared code with arch/i386 that uses NR_IRQ_VECTORS
    so we can't remove the #define just yet :(
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f45bcd7022a46de48cc414e3ea3a5b9b4de318ec
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:23:52 2007 -0700

    [PATCH] x86_64 irq: In __DO_ACTION perform the FINAL action for every entry.
    
    If we have an irq that comes from multiple io_apic pins the FINAL action
    (which is io_apic_sync or nothing) needs to be called for every entry or
    else if the two pins come from different io_apics we may not wait until
    after the action happens on the io_apic.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ff5115efafb08b49cbc8abdea9726884fba0b5a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:20:59 2007 -0700

    [PATCH] x86_64 irq: Simplfiy the set_affinity logic.
    
    For some reason the code has been picking TARGET_CPUS when asked to
    set the affinity to an empty set of cpus.  That is just silly it's
    extra work.  Instead if there are no cpus to set the affinity to we
    should just give up immediately.  That is simpler and a little more
    intuitive.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a8c8a36736c00b261fd5dd01400c41726f2f19eb
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:19:08 2007 -0700

    [PATCH] x86_64 irq: Refactor setup_IO_APIC_irq
    
    Currently we have two routines that do practically the same thing
    setup_IO_APIC_irq and io_apic_set_pci_routing.  This patch makes
    setup_IO_APIC_irq the common factor of these two previous routines.
    For setup_IO_APIC_irq all that was needed was to pass the trigger
    and polarity to make the code a proper subset of io_apic_set_pci_routing.
    
    Hopefully consolidating these two routines will improve maintenance
    there were several differences that simply appear to be one routine
    or the other getting it wrong.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a27bc06dd8ee6ad6394e8a76345660b93621b51b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:16:31 2007 -0700

    [PATCH] x86_64 irq: Remove the unused vector parameter from ioapic_register_intr
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e560c8bd866bfa284b2c5978efcaf1bd16ee9fc3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:15:15 2007 -0700

    [PATCH] x86_64 irq: Kill declaration of removed array, interrupt
    
    It's dead Jim.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9f0a5ba5508143731dc63235de19659be20d26dc
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:13:55 2007 -0700

    [PATCH] irq: Remove set_native_irq_info
    
    This patch replaces all instances of "set_native_irq_info(irq, mask)"
    with "irq_desc[irq].affinity = mask".  The latter form is clearer
    uses fewer abstractions, and makes access to this field uniform
    accross different architectures.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fc5d56f987170cda1d344095c4df65a60a3e9820
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Feb 23 04:11:56 2007 -0700

    [PATCH] x86_64 irq: Simplfy __assign_irq_vector
    
    By precomputing old_mask I remove an extra if statement, remove an
    indentation level and make the code slightly easier to read.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ea3d5226f52ef30f52aa0a04f47f5919c7facacf
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 26 09:21:46 2007 -0800

    Revert "[PATCH] i386: add idle notifier"
    
    This reverts commit 2ff2d3d74705d34ab71b21f54634fcf50d57bdd5.
    
    Uwe Bugla reports that he cannot mount a floppy drive any more, and Jiri
    Slaby bisected it down to this commit.
    
    Benjamin LaHaise also points out that this is a big hot-path, and that
    interrupt delivery while idle is very common and should not go through
    all these expensive gyrations.
    
    Fix up conflicts in arch/i386/kernel/apic.c and arch/i386/kernel/irq.c
    due to other unrelated irq changes.
    
    Cc: Stephane Eranian <eranian@hpl.hp.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Andrew Morton <akpm@osdl.org>
    Cc: Uwe Bugla <uwe.bugla@gmx.de>
    Cc: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3677db10a635a39f63ea509f8f0056d95589ff90
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Feb 26 16:46:11 2007 +0000

    [CIFS] Fix locking problem around some cifs uses of i_size write
    
    Could cause hangs on smp systems in i_size_read on a cifs inode
    whose size has been previously simultaneously updated from
    different processes.
    
    Thanks to Brian Wang for some great testing/debugging on this
    hard problem.
    
    Fixes kernel bugzilla #7903
    
    CC: Shirish Pargoankar <shirishp@us.ibm.com>
    CC: Shaggy <shaggy@us.ibm.com>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit cb48cab7f363014e0a5dc21f7b4892c15d626d41
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Feb 26 06:04:24 2007 -0500

    [libata] bump versions
    
    Bump versions based on changes submitted during 2.6.21 merge window.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a84471fe269c38ea3725345c43ad64e5f489bea2
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Feb 26 05:51:33 2007 -0500

    [libata] Trim trailing whitespace.
    
    No code changes.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fb621e2fde735abab854586d52c96c5624bcb5b8
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Feb 25 04:19:45 2007 -0500

    [libata] sata_mv: Fix 50xx irq mask
    
    IRQ mask bits assumed a 60xx or newer generation chip, which is very
    wrong for the 50xx series.  Luckily both generations shared the per-port
    interrupt mask bits, leaving only the "misc chip features" bits to be
    completely mismatched.
    
    Fix 50xx by ensuring we only program bits that exist.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e728eabea110da90e69c05855e3a11174edb77ef
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Feb 25 02:53:41 2007 -0500

    [libata] sata_mv: don't touch reserved bits in EDMA config register
    
    The code in mv_edma_cfg() reflected its 60xx origins, by doing things
    [slightly] incorrectly on the older 50xx and newer 6042/7042 chips.
    
    Clean up the EDMA configuration setup such that, each chip family
    carefully initializes its own EDMA setup.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 616ece2e7e5363574d172d64b19ffe9535606a1b
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 18:15:03 2007 +0000

    libata: Use new id_to_dma_mode function to tidy reporting in more drivers (minimally tested)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cc70991d64e767729c37278cd4f80f709556079a
Author: Alan Cox <alan@redhat.com>
Date:   Wed Feb 21 16:41:23 2007 +0000

    pata_pcmcia: Fix oops in 2.6.21-rc1
    
    Manuel Lass reports:
    > This bug is also present in 2.6.21-rc1, and this patch
    > indeed fixes it.
    
    The change to the devres layer re-orders the execution of cleanup
    functions and in turn causes the pcmcia layer to oops as it zaps a
    pointer now needed later on. We simply leave the pointer alone.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 10305f0f8e642590c69674d08bd22accef610aed
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 18:01:59 2007 +0000

    Add id_to_dma_mode function for printing DMA modes
    
    Also export dev_disable as this is needed by drivers doing slave decode
    filtering, which will follow shortly
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 098cdff3d40286f87062c17cd07e98ca7ad94184
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sun Feb 25 17:51:15 2007 +0100

    sata_promise: simplify port setup
    
    Each place in pdc_ata_init_one() that initialises a SATA
    port first calls pdc_ata_setup_port(), and then manually
    assigns the port's ->scr_addr. Simplify the code by extending
    pdc_ata_setup_port() to also handle scr_addr initialisation;
    for PATA ports we pass NULL as scr_addr.
    
    The initialisation of the PATA-only 20619 redundantly set
    up scr_addr for the ports. Remove this.
    
    Tested on 20619, 20575, and 20775 chips.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 540477b4d93f5b49f9e9ce3ae2437071103a0f8e
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sun Feb 25 12:44:39 2007 +0100

    sata_promise: fix 20619 new EH merge error
    
    When I merged my 20619 new EH conversion with #libata-upstream
    I had to manually resolve a conflict, and inadvertently lost
    pdc_pata_ops' ->post_internal_cmd binding. Corrected by this patch.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8748415d0df9e16c419a749b5de3a0ccd90bca3f
Author: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
Date:   Fri Feb 23 20:20:47 2007 +0100

    [ARM] 4234/1: Introduce get_irqnr_preamble and arch_ret_to_user for ns9xxx.
    
    This is a follow up for f80dff9da07d81da16e3b842118d47b9febf9c01 which
    didn't include adaption for the new ns9xxx machine support.
    
    Signed-off-by: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dff5e44c36ed7ef6ce2a5280e5204c452668960f
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri Feb 23 01:00:09 2007 +0100

    [ARM] 4233/1: nand/s3c2410.c: warning fix
    
    Noticed while building a s3c2410 kernel :
    drivers/mtd/nand/s3c2410.c: In function 's3c2440_nand_calculate_ecc':
    drivers/mtd/nand/s3c2410.c:476: warning: format '%06x' expects type 'unsigned int', but argument 3 has type 'long unsigned int'
    
    This patch fixes it.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ec3622d963522432a873cc1b6f66fed6fceddc18
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Feb 21 15:32:28 2007 +0100

    [ARM] 4226/1: initial .data and .bss mappings of XIP kernel should be TEXT_OFFSET
     aware
    
    Since TEXT_OFFSET is meant to determine RAM location for kernel use,
    itshould affect .data and .bss initial mapping in the XIP case.
    Otherwise a XIP kernel would crash if TEXT_OFFSET gets somewhat larger
    than 2MB.
    
    Corresponding code is also moved up a bit to be near the similar .text
    mapping code making the whole a bit more straight forward to understand.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e98ff7f6d8164c5636538998fb7d1e08b1fbbddd
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Feb 22 16:18:09 2007 +0100

    [ARM] 4224/2: allow XIP kernel to boot again
    
    Since commit 2552fc27ff79b10b9678d92bcaef21df38bb7bb6 XIP kernels failed
    to boot because (_end - PAGE_OFFSET - 1) is much smaller than the size
    of the kernel text and data in the XIP case, causing the kernel not to
    be entirely mapped.
    
    Even in the non-XIP case, the use of (_end - PAGE_OFFSET - 1) is wrong
    because it produces a too large value if TEXT_OFFSET is larger than 1MB.
    
    Finally the original code was performing one loop too many.
    
    Let's break the loop when the section pointer has passed the last byte
    of the kernel instead.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc16c25ff431d0c5b12693108f0ec3809ef1e804
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Feb 24 21:05:01 2007 -0500

    [libata] ACPI: remove needless ->qc_issue hook existence test
    
    All drivers must implement this hook, otherwise ATA commands would go
    nowhere (and a lot of other oopsen would appear as well).
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ea34e45a4670c4fa0da3442fc74789fd66c1201b
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Fri Feb 23 16:36:43 2007 -0700

    sata_vsc: refactor vsc_sata_interrupt and hook up error handling
    
    Separate sata_vsc interrupt handling into a normal (per-port) path and an
    error path with the addition of vsc_port_intr and vsc_error_intr
    respectively.  The error path handles interrupt based
    hotplug events which requires the definition of vsc_freeze and vsc_thaw.
    
    Note: vsc_port_intr has a workaround for unexpected interrupts that occur
    during polled commands.  This fixes a regression between 2.6.19 and 2.6.20.
    
    Changes in take2:
    * removed definition of invalid fis bit
    * let standard ata-error-handling handle the serror register
    * clear all unhandled interrupts
    * revert changes to vsc_intr_mask_update (vsc_thaw enables all interrupts)
    * use unlikely() for the pci-abort and not-our-interrupt cases in vsc_sata_interrupt
    
    Changes in take3:
    * Unify the "add" + "hook-up" patches into this single patch
    
    [htejun@gmail.com: clean up comments and suggestions]
    Cc: Jeremy Higdon <jeremy@sgi.com>
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e2f8fb72144a9f38d44ccf3f939e939392eda659
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Feb 24 22:30:36 2007 +0900

    sata_sil: ignore and clear spurious IRQs while executing commands by polling
    
    sata_sil used to trigger HSM error if IRQ occurs during polling
    command.  This didn't matter because polling wasn't used in sata_sil.
    However, as of 2.6.20, all IDENTIFYs are performed by polling and
    device detection sometimes fails due to spurious IRQ.  This patch
    makes sata_sil ignore and clear spurious IRQ while executing commands
    by polling.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6a59dcf8678cbc4106a8a6e158d7408a87691358
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Feb 24 15:12:31 2007 +0900

    sata_mv: fix pci_enable_msi() error handling
    
    intx should be turned on when pci_enable_msi() fails not when it
    succeeds.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f1da66e7592c978d9122cb05d8eada1bd900de1a
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Feb 5 17:01:28 2007 +0900

    pata_amd: fix an obvious bug in cable detection
    
    80c test mask is at bits 18 and 19 of EIDE Controller Configuration
    not 22 and 23.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 690b8d9d54941c90af1d43b0cc24903d20386f5b
Author: John Keller <jpk@sgi.com>
Date:   Fri Feb 23 16:24:16 2007 -0600

    ACPI: Altix: cannot register acpi bus driver before bus scan
    
    SN code to initialize the Hub/TIO infrastructure needs to
    execute before bus scanning. This was previously done with
    an early call to acpi_bus_register_driver().  But now that
    ACPI is using the Linux driver model, a driver cannot be registered
    that early. Make changes to have the init routines invoked via
    calls to acpi_get_devices().
    
    Signed-off-by: John Keller <jpk@sgi.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 19c262391c4741b012a5031fc438fb694e77c385
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 20 15:03:32 2007 -0500

    USB: export autosuspend delay in sysfs
    
    This patch (as861) adds sysfs attributes to expose the autosuspend
    delay value for each USB device.  If the user changes the delay from 0
    (no autosuspend) to a positive value, an autosuspend is attempted.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dfa87c824a9a5430008acd1ed2e8111ed164fcbe
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 20 15:02:44 2007 -0500

    sysfs: allow attributes to be added to groups
    
    This patch (as860) adds two new sysfs routines:
    sysfs_add_file_to_group() and sysfs_remove_file_from_group().
    A later patch adds code that uses the new routines.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b5e795f8df42936590ba9c606edc715fe3593284
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 20 15:00:53 2007 -0500

    USB: make autosuspend delay a module parameter
    
    This patch (as859) makes the default USB autosuspend delay a module
    parameter of usbcore.  By setting the delay value at boot time, users
    will be able to prevent the system from autosuspending devices which
    for some reason can't handle it.
    
    The patch also stores the autosuspend delay as a per-device value.  A
    later patch will allow the user to change the value, tailoring the
    delay for each individual device.  A delay value of 0 will prevent
    autosuspend.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aa084f3efe5fb7e9c0d5b54ce704f0de69bbf27c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 20 14:59:59 2007 -0500

    USB: minor cleanups for sysfs.c
    
    This patch (as858) makes some minor cleanups to sysfs.c in usbcore.
    Unnecessary tests are removed and a few temp variables are added.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ceec1f1d26f966c0816b86a1aab1e0b3b208757
Author: Oliver Neukum <oneukum@suse.de>
Date:   Fri Jan 26 14:26:21 2007 +0100

    USB: add a blacklist for devices that can't handle some things we throw at them.
    
    This adds a blacklist to the USB core to handle some autosuspend and
    string issues that devices have.
    
    Originally written by Oliver, but hacked up a lot by Greg.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bb417020ba8c559eb52f57379ba17f669f8f72cd
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Jan 26 14:26:21 2007 +0100

    USB: refactor usb device matching and create usb_device_match
    
    This is needed for the quirk match code.
    
    Cc: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80d4e8e9862fa71ce896195c60b691a623c38d49
Author: Ping Cheng <pingc@wacom.com>
Date:   Fri Feb 23 12:22:48 2007 -0800

    USB: Wacom driver updates
    
    Updated Intuos and Graphire irq calls
    Report pad device ID
    
    Signed-off-by: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 50f97a1f829d26e01ae8bb33cd1384cf0a5e046f
Author: Sarah Bailey <saharabeara@gmail.com>
Date:   Thu Feb 22 22:36:21 2007 -0800

    gadgetfs: Fixed bug in ep_aio_read_retry.
    
    I don't think the current code works with multiple iovecs.
    The original would just copy the first part of priv->buf
    over and over into multiple iovecs.
    
    Signed-off-by: Sarah Bailey <saharabeara@gmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4ef2e23f03c597e2073b649e7287b840f8fb9274
Author: Michael Opdenacker <michael-lists@free-electrons.com>
Date:   Wed Feb 21 22:51:25 2007 +0100

    USB: Use USB defines in usbmouse.c and usbkbd.c
    
    The below patch proposes to use USB defines (defined in linux/hid.h)
    instead of just plain numbers in the USB_INTERFACE_INFO statements.
    
    Signed-off-by: Michael Opdenacker <michael@free-electrons.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 672027a35795ec95f516fdc702ba8900d55a9eef
Author: Inaky Perez-Gonzalez <inaky@linux.intel.com>
Date:   Thu Feb 22 16:37:53 2007 -0800

    USB: add rationale on why usb descriptor structures have to be packed
    
    Add argumentation in defense of using __attribute__((packed)) in USB
    descriptors authored by Dave Brownell. Necessary as in some cases it
    seems superfluous.
    
    Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 822c7ef48b06332168530284781640856621d9f4
Author: Micke Prag <micke.prag@telldus.se>
Date:   Sun Feb 4 23:39:11 2007 +0100

    USB: ftdi_sio: Adding VID and PID for Tellstick
    
    I would like to add the VID and PID for Telldus Technologies Homeautomation
    usb-dongle to the ftdi_sio driver.
    
    
    From: Micke Prag <micke.prag@telldus.se>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 17230acdc71137622ca7dfd789b3944c75d39404
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Feb 19 15:52:45 2007 -0500

    UHCI: Eliminate asynchronous skeleton Queue Headers
    
    This patch (as856) attempts to improve the performance of uhci-hcd by
    removing the asynchronous skeleton Queue Headers.  They don't contain
    any useful information but the controller has to read through them at
    least once every millisecond, incurring a non-zero DMA overhead.
    
    Now all the asynchronous queues are combined, along with the period-1
    interrupt queue, into a single list with a single skeleton QH.  The
    start of the low-speed control, full-speed control, and bulk sublists
    is determined by linear search.  Since there should rarely be more
    than a couple of QHs in the list, the searches should incur a much
    smaller total load than keeping the skeleton QHs.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 28b9325e6ae45ffb5e99fedcafe00f25fcaacf06
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Feb 19 15:51:51 2007 -0500

    UHCI: Add macros for computing DMA values
    
    This patch (as855) adds some convenience macros to uhci-hcd, to help
    simplify the code for computing hardware DMA pointers.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0374f4f9c35cdfbee0ade72d06732613b4e6628
Author: Peter Korsgaard <jacmet@sunsite.dk>
Date:   Fri Feb 16 17:03:54 2007 +0100

    USB: Davicom DM9601 usbnet driver
    
    This patch adds a driver for the Davicom DM9601 USB 1.1 10/100Mbps
    ethernet adaptor using the usbnet framework.
    
    See http://www.davicom.com.tw/eng/products/dm9601.htm for details.
    
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 39c4b38cad00287cfd92cb66fec7c9a3edf50f2a
Author: David Hollis <dhollis@davehollis.com>
Date:   Tue Feb 20 08:02:24 2007 -0500

    USB: asix.c - Add JVC-PRX1 ids
    
    Add device IDs for the JVC-PRX1 port replicator.  Additionally cleans up
    the tabs on a few of other IDs in the list.
    
    Reported by: Reuben Thomas <rrt@sc3d.org>
    
    Signed-off-by: David Hollis <dhollis@davehollis.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 21641e3fb1c2e53b3a0acf68e6f62f1f82f61445
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Tue Feb 20 10:37:52 2007 -0800

    usbmon: Remove erroneous __exit
    
    mon_bin_exit() and mon_text_exit() are called from __init code, so don't mark
    them as __exit.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 946b960d13c15f050a3b848987aaca79f6a459b7
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Feb 14 13:40:14 2007 -0800

    USB: add driver for iowarrior devices.
    
    The ioctl is commented out for now, until we verify some userspace
    application issues.
    
    Cc: Christian Lucht <lucht@codemercs.com>
    Cc: Robert Marquardt <marquardt@codemercs.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd978bfa127a0b8c0bdbbbc9d64f3c73bf080f61
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Feb 21 12:53:17 2007 -0800

    USB: option: add a bunch of new device ids
    
    This adds all of the known Option device ids to the driver.
    Many thanks to some Option engineers for getting me this list.
    
    Cc: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b656b2cbd74fb591d46e07c7c291791b280ad5b4
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Feb 21 12:53:17 2007 -0800

    USB: option: remove duplicate device id table
    
    There is no need to have two tables with the same device ids in it.
    
    Cc: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dfff0a0671baf4e69fc676bf8150635407548288
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Feb 23 14:54:57 2007 -0800

    Revert "Driver core: let request_module() send a /sys/modules/kmod/-uevent"
    
    This reverts commit c353c3fb0700a3c17ea2b0237710a184232ccd7f.
    
    It turns out that we end up with a loop trying to load the unix
    module and calling netfilter to do that.  Will redo the patch
    later to not have this loop.
    
    Acked-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 82f0cf9b7c42684c29189ddb6d0bc86eb1137fc4
Author: James Simmons <jsimmons@infradead.org>
Date:   Wed Feb 21 17:44:51 2007 +0000

    Driver core: fix error by cleanup up symlinks properly
    
    When a device fails to register the class symlinks where not cleaned up.
    This left a symlink in the /sys/class/"device"/ directory that pointed
    to no where. This caused the sysfs_follow_link Oops I reported earlier.
    This patch cleanups up the symlink. Please apply. Thank you.
    
    Signed-Off: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4541ac94d0ea0b00776edd5904ac91dd6d6330f7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 01:07:49 2007 +0100

    make kernel/kmod.c:kmod_mk static
    
    This patch makes the needlessly global struct kmod_mk static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2a9df4945106d62ed9249a44d666fab93c685f7a
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Fri Feb 16 01:38:30 2007 -0800

    power management: fix struct layout and docs
    
    Because the pm ops in powermac are obviously not using them as intended, I
    added documentation for it in kernel-doc format.
    
    Reordering the fields in struct pm_ops not only makes the output of kernel-doc
    make more sense but also removes a hole from the structure on 64-bit
    platforms.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Cc: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Pavel Macheck <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9c372d06ce9ddf65e1393f9ea22a6d6bd5f96b42
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Fri Feb 16 01:38:29 2007 -0800

    power management: no valid states w/o pm_ops
    
    Change /sys/power/state to not advertise any valid states (except for disk
    if SOFTWARE_SUSPEND is enabled) when no pm_ops have been set so userspace
    can easily discover what states should be available.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Cc: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Pavel Macheck <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dfe461aef0d621d8472d0af343ae8a60866a7a8a
Author: Manuel Lauss <mano@roarinelk.homelinux.net>
Date:   Wed Feb 21 14:47:20 2007 +0100

    Driver core: more fallout from class_device changes for pcmcia
    
    More fallout from the PCMCIA class_device changes.
    
    The first hunk is run-tested on SH-4, the others are converted
    in the spirit of the original conversion.
    
    
    Signed-off-by: Manuel Lauss  <mano@roarinelk.homelinux.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d56c3eae6753f53d3313b926dcdda38c6c9bbe9b
Author: Adam J. Richter <adam@yggdrasil.com>
Date:   Fri Feb 16 21:35:25 2007 +0800

    sysfs: move struct sysfs_dirent to private header
    
    struct sysfs_dirent is private to the fs/sysfs/ subtree.  It is
    not even referenced as an opaque structure outside of that subtree.
    
    The following patch moves the declaration from include/linux/sysfs.h to
    fs/sysfs/sysfs.h, making it clearer that nothing else in the kernel
    dereferences it.
    
    I have been running this patch for years.  Please integrate and forward
    upstream if there are no objections.
    
    From: "Adam J. Richter" <adam@yggdrasil.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 63ce18cfe685115ff8d341bae4c9204a79043cf0
Author: Mike Galbraith <efault@gmx.de>
Date:   Wed Feb 21 12:45:35 2007 -0800

    driver core: refcounting fix
    
    Fix a reference counting bug exposed by commit
    725522b5453dd680412f2b6463a988e4fd148757.  If driver.mod_name exists, we
    take a reference in module_add_driver(), and never release it.  Undo that
    reference in module_remove_driver().
    
    Signed-off-by: Mike Galbraith <efault@gmx.de>
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 40cf67c5fcc513406558c01b91129280208e57bf
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jul 3 14:31:12 2006 -0700

    Driver core: remove class_device_rename
    
    No one uses it, and it wasn't exported to modules, so remove it.  The
    only other user of it was the network code, which is now converted to
    use struct device instead.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f236735fd05259a07a28233dcd07a8a6dddee9b
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Wed Feb 21 14:45:39 2007 -0600

    RDMA/cxgb3: Stop the EP Timer on BAD CLOSE
    
    Stop the ep timer in ec_status() if the status indicates a
    bad close.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2b540355cd2f46c5445030995e72c4b4fb2b775e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 21 11:52:49 2007 +0100

    RDMA/cxgb3: cleanups
    
    - don't mark static functions in C files as inline - gcc should know
      best whether inlining makes sense
    - never compile the unused cxio_dbg.c
    - make the following needlessly global functions static:
      - cxio_hal.c: cxio_hal_clear_qp_ctx()
      - iwch_provider.c: iwch_get_qp()
    - remove the following unused global functions:
      - cxio_hal.c: cxio_allocate_stag()
      - cxio_resource.: cxio_hal_get_rhdl()
      - cxio_resource.: cxio_hal_put_rhdl()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ec09150303479aff2bbe5ca5fcb714336b973074
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Feb 23 05:49:14 2007 -0500

    [libata] ata_piix: remove duplicate PCI IDs
    
    Duplicate ids noticed by Kay Sievers <kay.sievers@suse.de>
    
    Although 100% different, this is based on a patch by Greg Kroah-Hartman
    <gregkh@suse.de>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2a54cf76d1066d5aadfac65c8455426df80322f4
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Wed Feb 21 23:53:03 2007 -0600

    sata_nv: complain on spurious completion notifiers
    
    Recently Tejun wrote a patch to ahci.c to make it raise a HSM violation
    if the drive attempted to complete a tag that wasn't outstanding. We could
    run into the same problem with sata_nv ADMA. This adds code to raise a HSM
    violation error if the controller gives us a notifier tag that isn't
    outstanding, since the drive may be issuing spurious completions.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 32d90911568f67fad3f73623e106667a37c6e7ed
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 21 20:25:08 2007 +0900

    libata: test major version in ata_id_is_sata()
    
    Test major version in ata_id_is_sata() not separately.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f5ecac2d8e0beb0e4d3eb09833cfd19d8f9f004d
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Tue Feb 20 21:49:10 2007 -0600

    sata_nv: kill old private BMDMA helper functions
    
    sata_nv implemented its own copies of the BMDMA helper functions for ADMA,
    since the ADMA BMDMA status registers are PIO while the other registers
    are MMIO, and this was the only way to handle this previously. Now that
    we have iomap support, the standard routines should just work, so use them.
    The only thing we need to override as far as ADMA and BMDMA is the
    post_internal_cmd callback, where we should only call ata_post_internal_cmd
    if we are in port-register mode.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 878d4fedab4e5eba59877b771622856495a92df4
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 21 16:36:33 2007 +0900

    libata: fix remaining ap->id
    
    Merge order left libata-acpi and pata_scc with remainling usage of
    ap->id.  Kill superflous id printing and substitute the remaining ones
    with ap->print_id.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a2bbd0c923708a23c6fcc6bbc492f2eecadc676f
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 21 16:34:25 2007 +0900

    ahci: consider SDB FIS containing spurious NCQ completions HSM violation (regenerated)
    
    SDB FIS containing spurious NCQ completions is a clear protocol
    violation.  Currently, only some Maxtors with early firmware revisions
    are showing this problem.  Those firmwares have other NCQ related
    problems including buggy NCQ error reporting and occasional lock up
    after NCQ errors.
    
    Consider spurious NCQ completions HSM violation and freeze the port
    after it.  EH will turn off NCQ after this happens several times.
    Eventually drives which show this behavior should be blacklisted for
    NCQ.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1836854f25b1bc63766bff06aeeb83d2a602b050
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Feb 22 11:37:44 2007 -0800

    RDMA/cma: Remove unused node_guid from cma_device structure
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e971b8cd19d39366b9fdc9eadafec988d785264d
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Feb 22 11:37:38 2007 -0800

    IB/cm: Remove ca_guid from cm_device structure
    
    The cm_device references an ib_device, which already contains the node_guid.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 962063e64b0c55d270979fa0e4ae26daedac6282
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Wed Feb 21 16:40:44 2007 -0800

    RDMA/cma: Request reversible paths only
    
    The rdma_cm requires that path records be reversible.  Set the
    reversible bit when issuing an path record query.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 47645d8d25387c08bb3ccd84e1405c3776f21d24
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Wed Feb 21 16:37:31 2007 -0800

    IB/core: Set hop limit in ib_init_ah_from_wc correctly
    
    The hop_limit value in the ah_attr should be 0xFF, not the value read
    from the received GRH (which should be 0).  See 13.5.4.4 in the 1.2 IB
    spec.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit bd5ab26a7d0cc834d846fe5dd7291f0aed3be72b
Author: Dave Jones <davej@redhat.com>
Date:   Thu Feb 22 19:11:16 2007 -0500

    [CPUFREQ] constify some data tables.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit aeeddc1435c37fa3fc844f31d39c185b08de4158
Author: Dave Jones <davej@redhat.com>
Date:   Thu Feb 22 19:08:27 2007 -0500

    [CPUFREQ] constify cpufreq_driver where possible.
    
    Not all cases are possible due to ->flags being set at runtime
    on some drivers.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e5524f355a0d272ba5233537a896a668db1f3008
Author: Dave Jones <davej@redhat.com>
Date:   Thu Feb 22 18:41:28 2007 -0500

    [AGPGART] Further constification.
    
    Make agp_bridge_driver->aperture_sizes and ->masks const.
    Also agp_bridge_data->driver
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit aaf1aef55f50f53812871693692c7cbefcd57f39
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Feb 22 13:16:51 2007 -0800

    IB/uverbs: Return correct error for invalid PD in register MR
    
    If no matching PD is found in ib_uverbs_reg_mr(), then the function
    jumps to err_release without setting the return value ret.  This means
    that ret will hold the return value of the call to ib_umem_get() a few
    lines earlier; if the function reaches the point where it looks for
    the PD, we know that ib_umem_get() must have returned 0, so
    ib_uverbs_reg_mr() ends up return 0 for a bad PD ID.  Fix this by
    setting ret to -EINVAL before jumping to the exit path when no PD is
    found.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2bc808a8c4821a8ef4e3dc35b8fc577a9d2c6f0d
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Wed Feb 21 13:05:38 2007 -0200

    ACPI: ibm-acpi: make ibm-acpi bay support optional
    
    Make ibm-acpi bay support optional at kernel compile time.
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>

commit adb005818b71e9476581a1de5742e2f427ac9e2b
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Thu Feb 22 16:04:55 2007 -0200

    ACPI: ibm-acpi: fix initial status of backlight device
    
    The brightness class core does not update the initial status of the
    device's brightness at register time.  Do it by ourselves.
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>

commit 0ebffe39f8ec8b5b126d9505852a396371014555
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 22 09:38:52 2007 +0100

    [ARM] 4232/1: AT91: Generic GPIO bug
    
    The new gpio_direction_input() and gpio_direction_output() functions
    were both enabling output mode.  When configuring a GPIO for input mode,
    you need to program the ODR (Output Disable Register).
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7f6e2d992d4cb2f537ece62d221e466df1fead1c
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 22 07:34:56 2007 +0100

    [ARM] 4231/1: AT91: Merge and typo fixes.
    
    The duplicate file "include/asm-arm/arch-at91rm9200/entry-macro.S" can
    be removed - it was already moved to include/asm-arm/arch-at91/.
    
    Fix 3 small typo's - two in comments, and the incorrect clock was
    specified for the LCD device.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8dbf45fabaec0371c3bdd1bc94abc569af4badf
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Feb 21 17:50:04 2007 +0100

    [ARM] 4229/1: S3C2410: Add MACH_QT2410 to s3c2410_defconfig
    
    Add the Armzone QT2410 to the list of built
    machines in the s3c2410_defconfig
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b9c28081a71316dcce7a59122c2a3994ae6091ed
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Feb 21 17:45:54 2007 +0100

    [ARM] 4228/2: S3C24XX: update s3c2410_defconfig for 2.6.21-rc1
    
    Udpate s3c2410_defconfig for 2.6.21-rc1
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 658bcef619f50d9eb6028452ff9e1ad4a96c2af9
Author: Roland Dreier <rolandd@cisco.com>
Date:   Wed Feb 21 20:28:05 2007 -0800

    IPoIB: Remove unused local_rate tracking
    
    Now that low-level drivers handle the conversion from an absolute rate
    to a relative rate, there's no need for the IPoIB driver to keep track
    of the local port's data rate.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2e8e2d49b14cce7bae910d22d59d2f282761e0d3
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Feb 20 15:46:49 2007 -0700

    [MIPS] Fix port 0 mac address for mips mv6434x platforms
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 0970769aceb9bccf038f5dba72379f68431f94db
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Feb 22 02:17:28 2007 +0900

    [SERIAL] serial_txx9 driver update
    
     * Use platform_device.
     * Fix and cleanup suspend/resume/initialization codes.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5ce704f877057e257ecb9f5cdec6c4aa5c0d064c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 21 09:37:44 2007 +0000

    Revert "[PATCH] Generic ioremap_page_range: mips conversion"
    
    The generic version truncates addresses.
    
    This reverts commit 8e087929df884dbb13e383d49d192bdd6928ecbf.

commit 0eb9d788f24167acce48f99688e9eeb13bfe8a32
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 21 02:17:58 2007 +0000

    [MIPS] Cobalt: Rename "Colo" MTD partition to "firmware".
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit de7fa296b60c9086fa038350404975b7ee4e60c2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 21 00:10:19 2007 +0000

    [MIPS] SMP: Get smp_tune_scheduling to do something useful.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9693a85378b590cc7a4aa2db2174422585c7c8c4
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Fri Feb 2 17:41:47 2007 +0100

    [MIPS] Add basic SMARTMIPS ASE support
    
    This patch adds trivial support for SMARTMIPS extension. This extension
    is currently implemented by 4KS[CD] CPUs.
    
    Basically it saves/restores ACX register, which is part of the SMARTMIPS
    ASE, when needed. This patch does *not* add any support for Smartmips MMU
    features.
    
    Futhermore this patch does not add explicit support for 4KS[CD] CPUs since
    they are respectively mips32 and mips32r2 compliant.  So with the current
    processor configuration, a platform that has such CPUs needs to select
    both configs:
    
    	CPU_HAS_SMARTMIPS
    	SYS_HAS_CPU_MIPS32_R[12]
    
    This is due to the processor configuration which is mixing up all the
    architecture variants and the processor types.
    
    The drawback of this, is that we currently pass '-march=mips32' option to
    gcc when building a kernel instead of '-march=4ksc' for 4KSC case. This
    can lead to a kernel image a little bit bigger than required.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9654640d0af8f2de40ff3807d3695109d3463f54
Merge: b5bf28c... 004c46b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 21 13:02:17 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] One line missing from previous commit
      [CIFS] mtime bounces from local to remote when cifs nocmtime i_flags overwritten
      [CIFS] fix &&/& typo in cifs_setattr()

commit b5bf28cde894b3bb3bd25c13a7647020562f9ea0
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 21 11:21:44 2007 -0800

    Revert "e1000: fix shared interrupt warning message"
    
    This reverts commit d2ed16356ff4fb9de23fbc5e5d582ce580390106.
    
    As Thomas Gleixner reports:
      "e1000 is not working anymore. ifup fails permanentely.
        ADDRCONF(NETDEV_UP): eth0: link is not ready
       nothing else"
    
    The broken commit was identified with "git bisect".
    
    Auke Kok says:
      "I think we need to drop this now.  The report that says that this
       *fixes* something might have been on regular interrupts only.  I
       currently suspect that it breaks all MSI interrupts, which would make
       sense if I look a the code.  Very bad indeed."
    
    Cc: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Acked-by: Auke Kok <auke-jan.h.kok@intel.com>
    Cc: Andrew Morton <akpm@linux-foundation.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5fc7e655a50b0a19229a6b4a8a5e23bfedf700a4
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 21 11:18:26 2007 -0800

    Fix bogus 'inline' in drivers/char/ip2/i2lib.c
    
    Not only was the function way too big to be inlined in the first place,
    it was used before it was even defined.
    
    Noted-by: Faik Uygur <faik@pardus.org.tr>
    Cc: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e695e10bc996d6f83df7d85f1011c8d00573f68b
Merge: 3a5f10e... f6982d5...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 21 11:10:30 2007 -0800

    Merge branch 'master' of master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * 'master' of master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb: (196 commits)
      V4L/DVB (5253): Qt1010: whitespace / 80 column cleanups
      V4L/DVB (5252): Qt1010: use ARRAY_SIZE macro when appropriate
      V4L/DVB (5251): Qt1010: fix compiler warning
      V4L/DVB (5249): Fix compiler warning in vivi.c
      V4L/DVB (5247): Stv0297: Enable BER/UNC counting
      V4L/DVB (5246): Budget-ci: IR handling fixups
      V4L/DVB (5245): Dvb-ttpci: use i2c gate ctrl from stv0297 frontend driver
      V4L/DVB (5244): Dvbdev: fix illegal re-usage of fileoperations struct
      V4L/DVB (5178): Avoid race when deregistering the IR control for dvb-usb
      V4L/DVB (5240): Qt1010: use i2c_gate_ctrl where appropriate
      V4L/DVB (5239): Whitespace / 80-column cleanups
      V4L/DVB (5238): Kconfig: qt1010 should be selected by gl861 and au6610
      V4L/DVB (5237): Dvb: add new qt1010 tuner module
      V4L/DVB (5236): Initial support for Sigmatek DVB-110 DVB-T
      V4L/DVB (5235): Gl861: use parallel_ts
      V4L/DVB (5234): Gl861: remove unneeded declaration
      V4L/DVB (5233): Gl861: correct address of the bulk endpoint
      V4L/DVB (5232): Gl861: correct oops when loading module
      V4L/DVB (5231): Gl861: whitespace cleanups
      V4L/DVB (5230): Gl861: remove NULL entry from gl861_properties
      ...

commit 1055a8af093fea7490445bd15cd671020e542035
Author: Kyle McMartin <kyle@hera.kernel.org>
Date:   Wed Feb 21 15:36:05 2007 +0000

    [PARISC] Use symbolic last syscall in __NR_Linux_syscalls
    
    Hopefully will prevent people from forgetting to update this...
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit f6982d59480953a8f5a84c237a9dabff39f788ce
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Feb 13 18:26:26 2007 -0300

    V4L/DVB (5253): Qt1010: whitespace / 80 column cleanups
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 47e76c5c7904b8bc2d4c08fbe531017b704a877d
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Feb 13 17:53:46 2007 -0300

    V4L/DVB (5252): Qt1010: use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b79ea694a919ebc107c90af61b5d22becb1b1324
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Tue Feb 13 16:46:13 2007 -0300

    V4L/DVB (5251): Qt1010: fix compiler warning
    
    In function 'qt1010_init':
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4acf26703e6cabceb6838ee9c4f75f765ad96915
Author: Marcel Siegert <mws@linuxtv.org>
Date:   Tue Feb 13 18:44:49 2007 -0300

    V4L/DVB (5249): Fix compiler warning in vivi.c
    
    The result of copy_to_user was not used, so the compiler complained
    now a warning will be issued if copy_to_user fails.
    
    Signed-off-by: Marcel Siegert <mws@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 90e3bd4ba5563f2a6efbb46ce7e10845329dfffd
Author: Hartmut Birr <e9hack@googlemail.com>
Date:   Tue Feb 13 18:01:56 2007 -0300

    V4L/DVB (5247): Stv0297: Enable BER/UNC counting
    
    Enable BER/UNC counting for the stv0297 frontend.
    The idea for this patch comes from stv0297_cs.c.
    
    Signed-off-by: Hartmut Birr <e9hack@googlemail.com>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 59327a4897a0395d6f0358574dbb113102b63769
Author: David Hardeman <david@hardeman.nu>
Date:   Tue Feb 13 09:39:58 2007 -0300

    V4L/DVB (5246): Budget-ci: IR handling fixups
    
    Commit 00c4cc67512ada1d195b8bf3ef1db1d6b3951605 Oliver Endriss changed
    the budget-ci driver to use interrupt mode for i2c transfers.
    
    This also meant that a new bunch of IR bytes that were previously lost
    are now received, which allowed me to better understand how the MSP430
    chip works. Unfortunately it also means that the current driver gets
    some assumptions wrong and might generate double keypresses for one IR
    command.
    
    The attached patch fixes this by throwing away the repeat bytes and by
    associating the correct command and device bytes.
    
    Signed-off-by: David Hardeman <david@hardeman.nu>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 89e4d59f2c082be9472c4de4dafb832e01bfbe01
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Tue Feb 13 09:31:07 2007 -0300

    V4L/DVB (5245): Dvb-ttpci: use i2c gate ctrl from stv0297 frontend driver
    
    Use i2c gate ctrl from stv0297 frontend driver.
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b61901024776b25ce7b8edc31bb1757c7382a88e
Author: Marcel Siegert <mws@linuxtv.org>
Date:   Tue Feb 13 09:46:55 2007 -0300

    V4L/DVB (5244): Dvbdev: fix illegal re-usage of fileoperations struct
    
    Arjan van de Ven <arjan@infradead.org> reported an illegal re-usage of
    the fileoperations struct if more than one dvb device (e.g. frontend) is
    present.
    
    This patch fixes this issue.
    
    It allocates a new fileoperations struct each time a device is
    registered and copies the default template fileops.
    
    Signed-off-by: Marcel Siegert <mws@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e1af498063007cee5d7ec5af1e0cf25c088d05c7
Author: Chris Rankin <rankincj@yahoo.com>
Date:   Tue Feb 6 20:29:07 2007 -0300

    V4L/DVB (5178): Avoid race when deregistering the IR control for dvb-usb
    
    The work item function is dvb_usb_read_remote_control():
            INIT_WORK(&d->rc_query_work, dvb_usb_read_remote_control, d);
    and the last piece of work it does is:
            schedule_delayed_work(&d->rc_query_work,msecs_to_jiffies(d->props.rc_interval));
    Hence you need to call "cancel_rearming_delayed_work()" and not
    "cancel_delayed_work()", correct?  I certainly haven't seen this oops
    reoccur since I applied this patch.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 705d41e5da674b449f900df97ad13ebe53e82b82
Author: Antti Palosaari <crope@iki.fi>
Date:   Sat Jan 27 16:41:35 2007 -0300

    V4L/DVB (5240): Qt1010: use i2c_gate_ctrl where appropriate
    
    This patch adds calls to i2c_gate_ctrl in the qt1010 dvb tuner module,
    while removing the temporary hack in au6610 and gl861.
    Tested successfully against fi-Oulu frequencies with
    MSI Megasky 580 GL861 and Sigmatek DVB-110 AU6610.
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 38d0629fd80464247290450d8641890d6f94b6fa
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jan 21 15:57:48 2007 -0300

    V4L/DVB (5239): Whitespace / 80-column cleanups
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d4130b18f7ae5adfe2fd5761e31803554d090aa9
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jan 21 15:56:46 2007 -0300

    V4L/DVB (5238): Kconfig: qt1010 should be selected by gl861 and au6610
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4c7e3ea92da379c4f31500a65680862d8c898dee
Author: Antti Palosaari <crope@iki.fi>
Date:   Sun Jan 21 15:56:10 2007 -0300

    V4L/DVB (5237): Dvb: add new qt1010 tuner module
    
    gl861: (MSI Megasky)
    - hack for enable ZL10353 / QT1010 I2C gate
    - use new QT1010 module instead of old code
    
    au6610: (Sigmatek DVB-110)
    - hack for enable ZL10353 / QT1010 I2C gate
    - use new QT1010 module instead of old code
    
    Tested successfully with au6610 and gl861 devices against fi-Yllas
    frequencies. Now it locks perfectly with both devices.
    There is a "hack" to enable probable i2c gate in zl10535
    demodulator. QT1010 doesn't respond to any i2c messages before we
    write 0x1a to demodulator register 0x62. In my understanding this
    should be fixed to demodulator code.
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5decdd2729066c5c155d0f6e7fdf89b844fbfc27
Author: Antti Palosaari <crope@iki.fi>
Date:   Sun Nov 5 16:05:38 2006 -0300

    V4L/DVB (5236): Initial support for Sigmatek DVB-110 DVB-T
    
    This patch adds driver for Sigmatek DVB-110 USB DVB-T stick. Stick has based
    on hardware of Qtuantek QT1010 tuner, Zarlink ZL10353 (Intel CE 6353)
    demodulator and Alcor Micro AU6610 DVB-T USB controller. HW is rather similar
    as used in MSI Megasky GL861.
    Currently, the driver works only in USB 2.0. In my understanding USB 1.1 is
    also supported by hw but I cannot test it due to lack of USB 1.1 port. Device
    supports only isochronous mode transfers. There is also eeprom in usb
    controller(at least in address range 0x80 - 0xbf) for storing data, eg.
    firmware. Anyway, firmware loading is not used / required by the device.
    There seems to be at least one unknown I2C device in address 0xa0, probably
    remote control or GPIO. Windows drivers reads registers from 0x00 to 0x07
    from this unknown address.
    Driver is based on gl861 module. Tuner has a lot of problems to lock with
    megasky qt1010 module with this hardware with some broadcasting standards.
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4131fd4fd40aa22cfe61b4e7c78e640b9fcfcd8c
Author: Carl Lundqvist <comabug@gmail.com>
Date:   Mon Oct 9 12:49:17 2006 -0300

    V4L/DVB (5235): Gl861: use parallel_ts
    
    - use parallel_ts - Now this driver works.
    - correct typo in MODULE_VERSION
    
    Signed-off-by: Carl Lundqvist <comabug@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 05eb2a8058ecd964f0560807a0ce582909a8c30e
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Oct 9 01:11:07 2006 -0300

    V4L/DVB (5234): Gl861: remove unneeded declaration
    
    remove unneeded declaration of .generic_bulk_ctrl_endpoint
    
    generic_bulk_ctrl_endpoint isn't being used in this device, so this
    is not needed here.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8c0b24c2d2f779040a8ec21de0422eeaf56395cc
Author: Jan Nijs <jan.nijs@scarlet.be>
Date:   Sat Oct 7 16:29:54 2006 -0300

    V4L/DVB (5233): Gl861: correct address of the bulk endpoint
    
    The megasky 580 based on gl861 has three endpoints:
    - 0x81 BULK/ISOC	IN	MPEG2 TS
    - 0x83 INT			IN	remote control receiver
    - 0x02 BULK			OUT	bulk control endpoint
    It doesn't look like the bulk endpoint is used, but better to
    have the correct one in the config.
    
    Signed-off-by: Jan Nijs <jan.nijs@scarlet.be>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b3b2b8b5746cfe5af181dc2ce7a0912b5b2c598a
Author: Jan Nijs <jan.nijs@scarlet.be>
Date:   Sat Oct 7 01:25:53 2006 -0300

    V4L/DVB (5232): Gl861: correct oops when loading module
    
    This patch moves the DVB_USB_IS_AN_I2C_ADAPTER flag from the adapter
    properties to the device properties.
    Without this patch I get an OOPS when the gl861 driver tries to
    access any registers.
    
    Signed-off-by: Jan Nijs <jan.nijs@scarlet.be>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1f78867bc8a05b6c0bc3f2cb1c5915c10e92369e
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:21:13 2006 -0300

    V4L/DVB (5231): Gl861: whitespace cleanups
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e465ea7ed16124e926ca4988317b1d2d31f41d6f
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:20:37 2006 -0300

    V4L/DVB (5230): Gl861: remove NULL entry from gl861_properties
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6ae7232084ffea750968320241a0276d2211d736
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:19:30 2006 -0300

    V4L/DVB (5229): Gl861: use qt1010_tuner_attach function from qt1010.h
    
    The gl861_tuner_attach function is not specific to this device.
    This patch removes gl861_tuner_attach, and replaces it with
    qt1010_tuner_attach from the qt1010 header file.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8bb36dc7b5c9f528541b8674f9417901129dae64
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:17:24 2006 -0300

    V4L/DVB (5228): Gl861: remove unneeded "extern int" declaration
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 73b96c09f679dfaaf8f72b7789a277fc10618328
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:16:44 2006 -0300

    V4L/DVB (5227): Gl861: hide disabled code from upstream patch system
    
    enclose disabled code inside an #if 0 block, instead of /* comments */
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 05ec6cc88c901fa8755fc11e847c1d6a0e31f9c5
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:15:26 2006 -0300

    V4L/DVB (5226): Gl861: fix driver_name
    
    Rename driver_name from "gl861" to "dvb_usb_gl861"
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 947af8fdcd034e567421bdc55ec446e24b519b7f
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:14:07 2006 -0300

    V4L/DVB (5225): Gl861: fix MODULE_AUTHOR
    
    The author's email address is already in the MODULE_AUTHOR field.
    This patch adds his name as well.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a9bde1d88c49cd7ab4faae5110261046555dd7a3
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:12:55 2006 -0300

    V4L/DVB (5224): Gl861: select DVB_ZL10353 if !DVB_FE_CUSTOMISE
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6f7880f0264457e80e456b512722c7a627883fda
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 17:12:14 2006 -0300

    V4L/DVB (5223): Rename USB_PID_MSI_MEGASKY55801 to USB_PID_MSI_MEGASKY580_55801
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f0c3a2ca56c5c56ecfaf46c1b47851319e9655ac
Author: Carl Lundqvist <comabug@gmail.com>
Date:   Tue Oct 3 17:09:30 2006 -0300

    V4L/DVB (5221): Dvb-usb: initial support for MSI Mega Sky 580 DVB-T based on GL861
    
    This patch adds support for MSI Mega Sky 580 / GL861 DVB-T USB2.0
    Except for the 2 lines added to zl10353.c, zl10353_reset_attach needs
    to be changed. If I read the code correctly setting parallel_ts will
    take care of the 3rd byte, but the 2nd byte needs to be 0x0b instead
    of 0x03 too. I guess these changes needs to be done only for this
    device, not sure how to do that.
    The zl10353 changes have been split apart from this patch, into the next
    patch, soon to follow.
    
    Signed-off-by: Carl Lundqvist <comabug@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6345f0f6428cc7a3f73b83624c6f97629a9fddd1
Author: Chris Pascoe <c.pascoe@itee.uq.edu.au>
Date:   Sat Feb 10 10:19:16 2007 -0300

    V4L/DVB (5218): Zl10353: register definitions update
    
    Update the descriptions of "discovered" registers on the zl10353, using the
    equivalaent mt352 register names.
    
    Signed-off-by: Chris Pascoe <c.pascoe@itee.uq.edu.au>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f7f57770dc610eddd678aec483263e7980327ee9
Author: Antti Palosaari <crope@iki.fi>
Date:   Sat Feb 10 10:19:11 2007 -0300

    V4L/DVB (5217): Zl10353: Implement TRL nominal rate calculation
    
    Implement trl nominal rate calculation to Zarlink ZL10353 demod,
    based on calculation used in Zarlink MT352.
    This adds support for 6 and 8MHz bandwidth transponders.
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Chris Pascoe <c.pascoe@itee.uq.edu.au>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0a11bb865a88a7459855ab46f74091e6ca4a1a20
Author: Antti Palosaari <crope@iki.fi>
Date:   Sat Feb 10 10:19:08 2007 -0300

    V4L/DVB (5216): Zl10353: add i2c_gate_ctrl support
    
    Implement I2C gate control for Megasky GL861 and SigmaTek AU6610 support.
    
    Signed-off-by: Chris Pascoe <c.pascoe@itee.uq.edu.au>
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 67b60aad168cfdd40ffec12f14b93e2e68f7d486
Author: Chris Pascoe <c.pascoe@itee.uq.edu.au>
Date:   Sat Feb 10 10:17:57 2007 -0300

    V4L/DVB (5215): Experimental support for signal strength/BER/uncorrectable count
    
    After studying many hours worth of register dumps of MT352 and ZL10353 fed
    with identically damaged RF signals I have made an educated guess at which
    registers contain the AGC level, bit error rate and uncorrectable error
    count values.
    Implement the IOCTLs that return these values to userspace.
    
    Signed-off-by: Chris Pascoe <c.pascoe@itee.uq.edu.au>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 90060d32ca0a941b158994f78e60d0381871c84b
Author: Mike Isely <isely@pobox.com>
Date:   Thu Feb 8 02:02:53 2007 -0300

    V4L/DVB (5212): Pvrusb2: Be more forgiving about encoder firmware size
    
    The pvrusb2 driver previously rejected encoder firmware whose size was
    not a multiple of 8192.  But this is a false check because it's
    possible to find cx23416 firmware whose size doesn't conform to this
    limit.  So change the firmware loader implementation to be more
    forgiving of the image size.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 201779f5c4a4bd8503a38749dd371ecddb7928a5
Author: Mike Isely <isely@pobox.com>
Date:   Thu Feb 8 01:48:57 2007 -0300

    V4L/DVB (5210): Pvrusb2: Fix printk format typo
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6591691b259f9487f374f35c0c310aa220f829c6
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Thu Feb 8 14:36:57 2007 -0300

    V4L/DVB (5209): Kthread api conversion for dvb_frontend and av7110 fix
    
    avoid double-up(), pointed out by Oliver.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Acked-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8eec14295e03f9dfe2be7bb75c8004a5fa867cdb
Author: Herbert Poetzl <herbert@13thfloor.at>
Date:   Thu Feb 8 14:32:43 2007 -0300

    V4L/DVB (5208): Kthread API conversion for dvb_frontend and av7110
    
    dvb kernel_thread to kthread API port.
    It is running fine here, including module load/unload and software suspend
    (which doesn't work as expected with or without this patch :).
    I didn't convert the dvb_ca_en50221 as I do not have such an interface, but
    if the conversion process is fine with the v4l-dvb maintainers, it should not
    be a problem to send a patch for that too ...
    Acked-by: Oliver Endriss <o.endriss@gmx.de>
    
    Signed-off-by: Herbert Poetzl <herbert@13thfloor.at>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Acked-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2a9f8b5d25beacd034369fca416b548cbf931561
Author: Thierry MERLE <thierry.merle@free.fr>
Date:   Wed Feb 7 10:14:38 2007 -0300

    V4L/DVB (5206): Usbvision: set alternate interface modification
    
    - usb alternate selection modified to get the biggest endpoint packet size.
    - fix sysfs get values for brightness/contrast/hue/saturation
    
    Signed-off-by: Thierry MERLE <thierry.merle@free.fr>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6f78e186fe5d29dbff5e34f950adb573c4808de4
Author: Thierry MERLE <thierry.merle@free.fr>
Date:   Wed Feb 7 10:13:11 2007 -0300

    V4L/DVB (5205): Usbvision: dynamic allocation for frames
    
    - fix decoder route output
    - dynamic frame buffer allocation
    
    Signed-off-by: Thierry MERLE <thierry.merle@free.fr>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c65eeaab1f04d1113b5c4fb21f7f61ded795d2bb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 6 21:53:31 2007 -0300

    V4L/DVB (5200): V4l_printk_ioctl_arg() is no longer used.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b1e7df1d3543906654b9e6443aee177c8009acac
Author: Michael Schimek <mschimek@gmx.at>
Date:   Wed Feb 7 09:15:01 2007 -0300

    V4L/DVB (5204): Change videodev2.h licence to dual GPL/BSD
    
    videodev2.h contains just the V4L2 API structs and defines.
    By allowing this header file to be dual GPL/BSD will enable sharing
    userspace apps between Linux and *BSD systems. It will also allow developing
    newer BSD licensed drivers that can be shared on Linux and *BSD.
    It should be noticed that most of the current V4L drivers, and v4l core
    itself are GPL only. This won't be changed by this patch.
    
    Signed-off-by: Michael H. Schimek <mschimek@gmx.at>
    Signed-off-by: Gerd Hoffmann <kraxel@suse.de>
    Signed-off-by: Bill Dirks <bill@thedirks.org>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Martin Rubli <mrubli@gmx.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0496daa7d88d117fab4dd190c7f6e7c4a5aa15cd
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Wed Feb 14 22:57:42 2007 -0200

    V4L/DVB (5202): DVB: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Acked-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fd4bc4455360ff0b6ff50ec8fa5673b4da18cbb6
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Tue Feb 6 21:55:07 2007 -0300

    V4L/DVB (5201): Radio/: Convert to generic boolean-values
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit db406b58551bc7de1e331e8ad1bc11ba1545ee8b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 6 21:53:04 2007 -0300

    V4L/DVB (5199): Cx88-video.c: remove struct radionorms
    
    This patch removes the unused struct radionorms.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3198cf676c18edd2b04c7016d1873f6e797b3d9a
Author: Jonathan Corbet <corbet@lwn.net>
Date:   Tue Feb 6 21:52:36 2007 -0300

    V4L/DVB (5198): Cafe_ccic.c fix warning
    
    Quiet a spurious gcc warning.
    
    Signed-off-by: Jonathan Corbet <corbet@lwn.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e8be02a34a43c88a7666217b186e169a30f1609b
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Tue Feb 6 21:52:04 2007 -0300

    V4L/DVB (5197): Convert to generic boolean-values
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7a9ca4a3f99129c2316ee14273ded519630c573d
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Feb 6 21:51:14 2007 -0300

    V4L/DVB (5196): VIDEO_BUF depends on PCI
    
    m68k allmodconfig:
    drivers/media/video/video-buf.c: In function 'videobuf_queue_pci':
    drivers/media/video/video-buf.c:396: error: 'pci_map_sg' undeclared (first use in this function)
    drivers/media/video/video-buf.c:396: error: (Each undeclared identifier is reported only once
    drivers/media/video/video-buf.c:396: error: for each function it appears in.)
    drivers/media/video/video-buf.c:399: error: 'pci_dma_sync_sg_for_cpu' undeclared (first use in this function)
    drivers/media/video/video-buf.c:401: error: 'pci_unmap_sg' undeclared (first use in this function)
    drivers/media/video/video-buf.c: In function 'videobuf_pci_dma_map':
    Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 346304097b47a6e1376d99af80dbffb759fa55f4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 6 21:50:36 2007 -0300

    V4L/DVB (5195): Frontends: make 4 functions static
    
    This patch makes four needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 48fc923b0e43bc11975d6302f3fcb173d2f50f19
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Tue Feb 6 21:46:54 2007 -0300

    V4L/DVB (5193): Remove the unused kernel config option VIDEO_VIDEOBUF
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 716a4e334efe75f8ac97ce5c475bb689158bf16b
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Sat Feb 3 14:47:14 2007 -0300

    V4L/DVB (5189): Budget-av: Call saa7146_vv_release on exit
    
    Call saa7146_vv_release on exit.
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6c914490210cf7155a288b3c5c2fdd305692e298
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Fri Feb 2 19:12:53 2007 -0300

    V4L/DVB (5188): Add separate configuration data for subsystem 0x13c2:0x1012
    
    Fixed problem reported by Teemu Suikki:
    After a device with subsystem 0x13c2:0x1012 has been installed,
    devices with subsystem id 0x13c2:0x1011 did not work anymore.
    
    Reason:
    	The driver for 0x13c2:0x1012 modified shared configuration data.
    Fix:
    	Use separate configuration data for those devices.
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 32ec5332f987435d42371c1c47e310c9cc211cf7
Author: Ian Armstrong <ian@iarmst.demon.co.uk>
Date:   Sat Feb 3 06:37:25 2007 -0300

    V4L/DVB (5184): Add cx23415 decoder register documentation
    
    Many thanks to Ian Armstrong for figuring out what all these registers do.
    
    Signed-off-by: Ian Armstrong <ian@iarmst.demon.co.uk>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit faeb4ab38f6fec62d50a023e1778d13e73a0b088
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Feb 3 06:35:07 2007 -0300

    V4L/DVB (5183): Fix CC handling in VIDIOC_INT_G_VBI_DATA
    
    When capturing a 60 Hz input the internal field ID is inverted. The
    VIDIOC_INT_G_VBI_DATA didn't take that into account and so returned
    XDS instead of CC and vice versa.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2675f7a88f73bc3131b817c118fbffa5cfed8868
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Feb 3 03:23:44 2007 -0300

    V4L/DVB (5182): Remove #if 0 section from videodev2.h
    
    Remove a section containing basically ideas for future sliced VBI standards.
    This can be resurrected should any of this be actually implemented. For now
    it only pollutes this header file.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4f828ef7f360ecfba6b8d81c731a56b1c8d4bc07
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Feb 3 03:19:14 2007 -0300

    V4L/DVB (5181): Sliced VBI API no longer marked experimental.
    
    The Sliced VBI API is no longer marked experimental. Introduced in 2.6.14
    and with only a single modification in 2.6.19 I think we can consider this
    API to be solid.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b7a01e723c9edaefcadb99d42c1409371c01dde1
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Feb 2 20:49:54 2007 -0300

    V4L/DVB (5180): Fix cx2584x revision reporting.
    
    Revisions >= 23 were always reported as revision 23.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fec1bc71a314507418e65bcd0f232b3b9f36f435
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Feb 2 20:42:02 2007 -0300

    V4L/DVB (5179): Cx2341x encoder documentation update.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 201f5c9cafeb88cf0658300bd3bceb5c30d28430
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jan 28 16:08:36 2007 -0300

    V4L/DVB (5175): Pvrusb2: VIDIOC_DBG_[S|G]_REGISTER fixups
    
    Support 64 bit register IDs internally.  Only allow root access to
    this API (for both set and get).  Note that actual 64 bit access only
    becomes possible once the definition for v4l2_register is updated, but
    this change clears the way for it from the viewpoint of the pvrusb2
    driver.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6fe7d2c4660174110c6872cacc4fc2acb6e00acf
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jan 28 15:42:56 2007 -0300

    V4L/DVB (5174): Pvrusb2: video corruption fixes
    
    Tweak the encoder setup in order to stop it from corrupting the video
    data when there is a disruption in the data flow (e.g. a channel change).
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c43000ef0c9f21fff090ff3b5428ac31a41dbc99
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jan 28 15:41:12 2007 -0300

    V4L/DVB (5173): Pvrusb2: encoder comm protocol cleanup
    
    Update the implementation of the communication protocol for operating
    the encoder, using updated knowledge about the encoder.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 567d7115b9ce8145c166e3368bf31fe613451f77
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jan 28 15:38:55 2007 -0300

    V4L/DVB (5172): Pvrusb2: Control protocol cleanup
    
    Several special-case FX2 commands were being issued through
    pvr2_write_u16() and pvr2_write_8(), but there's really nothing
    special case about them.  These date from a very early time in the
    driver development.  This patch removes these functions and replaces
    their use with calls to pvr2_send_request.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit edae96bd72155b88f8682c830c63338cd699d35c
Author: Mike Isely <isely@pobox.com>
Date:   Mon Jan 22 02:18:54 2007 -0300

    V4L/DVB (5170): Pvrusb2: Add boilerplate to new header file
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8d3643637e18e6590969436734c22151805d0350
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jan 22 02:17:55 2007 -0300

    V4L/DVB (5169): Pvrusb2: Use macro names for FX2 commands
    
    This is a maintainability cleanup; use nice names for all the FX2
    commands instead of raw bytes.  This way we can easily find where we
    issue FX commands.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 05ad390724d1f307111a322325df83282a1479e6
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jan 30 23:26:01 2007 -0300

    V4L/DVB (5166): Remove obsolete alias defines of CONFIG_* settings
    
    The out of tree v4l-dvb build system didn't always override the kernel's
    configuration settings with v4l-dvb's settings correctly.  To work around
    this, makefiles would define some new macro based on the setting of a
    config variable.  e.g. the pwc Makefile would define CONFIG_PWC_DEBUG if
    CONFIG_USB_PWC_DEBUG (which is defined via Kconfig) was set.
    The v4l-dvb build system should now always override correctly, and this
    is no longer necessary.  This patch gets ride of these extra defines and
    just uses the CONFIG_* settings directly.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6827709a6148a6e8530d90027b4f31aa0aaa5ae5
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jan 30 23:25:46 2007 -0300

    V4L/DVB (5164): Compat: Handle input_register_device() change and some others
    
    input_register_device() was changed to return an error code instead of
    being void in 2.6.15.  Handle it with a macro wrapper in config.h.  For
    this to work, linux/input.h must be included before config.h.  This
    required some trivial header re-ordering in budget-ci.c and ttusb_dec.c.
    In kernel 2.6.15-rc1 a helper function called setup_timer() was added to
    linux/timer.h.  Add to compat.h, but require that linux/timer.h be
    included first to give the definition of struct timer_list.
    A new 4GB DMA zone, __GFP_DMA32, was added in 2.6.15-rc2.  Alias it to
    __GFP_DMA on older kernels.
    Handle another 2.6.15 "input_dev->dev to input_dev->cdev.dev" change for
    some recently added code in cinergyT2.c.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 62d50addf0774115adaa9e01e09099c3d7daa13d
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jan 30 23:25:41 2007 -0300

    V4L/DVB (5163): Add checks for CAP_SYS_ADMIN to VIDIOC_DBG_G_REGISTER
    
    Before, root privileges were only needed to set hardware registers, not
    to read them.  On some hardware, reading from the wrong place at the
    wrong time can hang the machine.  So, to be consistent, root privileges
    are required to read registers on all hardware.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e7b58f5259a81dbd9fbfea79408d272f44eb894f
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jan 30 22:47:18 2007 -0300

    V4L/DVB (5162): Change VIDIOC_DBG_[SG]_REGISTER ioctls' reg address to 64 bits
    
    Maybe someday there will be a device with a register address space >
    32-bits, or maybe an i2c device which uses a protocol > 4 bytes long to
    address its registers.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e19c55ffb984c2db28191d8aa4400bb81ecd756d
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Wed Jan 31 14:32:29 2007 -0300

    V4L/DVB (5161): Dvb-ttpci: call saa7146_vv_release() on exit
    
    Call saa7146_vv_release() on exit.
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 58af00456ac6b3158c99a3c6b3435c88d4f25a0e
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Wed Jan 31 14:27:55 2007 -0300

    V4L/DVB (5160): Saa7146_vv: pass correct memory size to pci_free_consistent
    
    Pass correct memory size to pci_free_consistent.
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7857735b3a6695a90fa3c8808bf96385ac5a95dc
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Sat Jan 27 21:13:06 2007 -0300

    V4L/DVB (5158): Dvb-ttpci: Fixed unregistering the vbi device
    
    Fixed unregistering the vbi device for cards without analog tuner.
    Thanks to Marco Schluessler <marco@lordzodiac.de> for pointing out this bug.
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 357a268d59411b84fde712400585dd118c61467f
Author: Matthias Schwarzott <zzam@gentoo.org>
Date:   Wed Jan 24 20:49:58 2007 -0300

    V4L/DVB (5157): Set phys, bustype, version, vendor and product for input device
    
    Add phys-string, bustype, version, vendor and product to help udev and
    others using EVIOCPHYS ioctl to identify the input device node.
    Code taken (with little changes) from budget-ci.c
    
    Signed-off-by: Matthias Schwarzott <zzam@gentoo.org>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit feaba7a96dd02f2fc0d1fe5c2148d79444db0717
Author: Michael Schimek <mschimek@gmx.at>
Date:   Fri Jan 26 08:30:05 2007 -0300

    V4L/DVB (5156): Fix: dma free is being called with wrong arguments
    
    Functions buffer_release() in bttv-driver.c and
    vbi_buffer_release() in bttv-vbi.c are ending with:
          bttv_dma_free(&fh->cap,fh->btv,buf);
    
    For vbi it seems to be wrong. Both functions should end with:
    
          bttv_dma_free(q,fh->btv,buf);
    Thanks to Peter Schlaf <peter.schlaf@web.de> for pointing this.
    
    Signed-off-by: Michael H. Schimek <mschimek@gmx.at>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 712642b8e371687e24ec8e1d34114beab18e92ca
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jan 26 07:33:07 2007 -0300

    V4L/DVB (5155): Properly initialize mute and radio frequency
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f1557cebc8c5714fd463ffeb5f424dc56dd61bdf
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jan 26 07:23:44 2007 -0300

    V4L/DVB (5154): Add some debug info, depending on debug level
    
    With debug>0, it will show mute/unmute and set frequency events
    with debug>=4, it will show get frequency events
    Also, some kernel CodingStyle fixes were done.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b61f8d695c02dbcd3391b3409eafcf182451f10f
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jan 26 07:07:12 2007 -0300

    V4L/DVB (5153): Make it coherent with vidioc_g_tuner
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a0c05ab9762560cf12733181d19b6529bb7231d2
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jan 25 16:48:13 2007 -0300

    V4L/DVB (5152): Implements VIDIOC_[S|G]_INPUT on radio-aztech/radio-maxiradio
    
    fmtools use VIDIOCSTUNER, with, in turn, calls VIDIOC_S_INPUT on v4l1-compat.
    So, those ioctls are required for V4L1  to work properly.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 676b0ac7aa409d326d92ca46c65bba20bebb3c1c
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jan 25 15:10:31 2007 -0300

    V4L/DVB (5151): Implement VIDIOC_[GS]_AUDIO on aztech
    
    v4l1-compat requires those two ioctls to translate VIDIOC[SG]RADIO
    into V4L2 calls.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 140dcc46ede8dcd9032bbe0ce52eb4df104a1ab0
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jan 25 15:00:45 2007 -0300

    V4L/DVB (5150): Implement VIDIOC_[GS]_AUDIO on maxiradio
    
    v4l1-compat requires those two ioctls to translate VIDIOC[SG]RADIO
     into V4L2 calls.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 06470ed612cf2bf99bf05d57259d0a65a5481df5
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jan 25 09:04:34 2007 -0300

    V4L/DVB (5149): Convert radio-maxiradio to use video_ioctl2
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 99218fe478e2ca6d5ee660a655690ab6496e6ab5
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jan 25 08:09:32 2007 -0300

    V4L/DVB (5148): Convert radio-aztech to use video_ioctl2
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b50e7fe99317c05b0bb8ba6338bc6aa7da3b918e
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jan 25 05:00:01 2007 -0300

    V4L/DVB (5147): Make vivi driver to use vmalloced pointers
    
    Before this patch, vivi were simulating a scatter gather DMA transfer.
    While this is academic, showing how stuff really works on a real PCI
    device, this means a non-optimized code.
    There are only two memory models that vivi implements:
    	1) kernel alloced memory. This is also used by read() method.
    	   On this case, a vmalloc32 buffer is allocated at kernel;
    	2) userspace allocated memory. This is used by most userspace apps.
    	   video-buf will store this pointer.
    	   a simple copy_to_user is enough to transfer data.
    The third memory model scenario supported by video-buf is overlay mode.
    This model is not implemented on vivi and unlikely to be implemented on
    newer drivers, since now, most userspace apps do some post-processing
    (like de-interlacing).
    After this patch, some cleanups may be done at video-buf.c to avoid
    allocating pages, when the driver doesn't need a PCI buffer. This is the
    case of vivi and usb drivers.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 52ebc763d8e0c9f2ab48af89a75e90e2318bac86
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jan 23 22:38:13 2007 -0300

    V4L/DVB (5146): Make VIDIOC_INT_[SG]_REGISTER ioctls no longer internal only
    
    The direct register access ioctls were defined as kernel internal only,
    but they are very useful for debugging hardware from userspace and are
    used as such.  Officially export them.
    
    VIDIOC_INT_[SG]_REGISTER is renamed to VIDIOC_DBG_[SG]_REGISTER
    Definition of ioctl and struct v4l2_register is moved from v4l2-common.h
    to videodev2.h.
    
    Types used in struct v4l2_register are changed to the userspace
    exportable versions (u32 -> __u32, etc).
    
    Use of VIDIOC_DBG_S_REGISTER requires CAP_SYS_ADMIN permission, so move
    the check into the video_ioctl2() dispatcher so it doesn't need to be
    duplicated in each driver's call-back function. CAP_SYS_ADMIN check is
    added to pvrusb2 (which doesn't use video_ioctl2).
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dbbff48f39263f7e5c96a55624da87879de2bf71
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Mon Jan 22 23:31:53 2007 -0300

    V4L/DVB (5144): Restore VIDIOC_INT_[SG]_REGISTER calls
    
    Add support for these ioctls to the video_ioctl2 system and the cx88
    driver.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 758117c25b65ed5fa502c13f3cdf040a8f954161
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jan 23 15:34:10 2007 -0300

    V4L/DVB (5142): M920x: move filter caps from device caps to adapter caps
    
    Move filter caps from device caps to adapter caps for the megasky driver.
    This fixes usb1.1 operation.
    
    Signed-off-by: Aapo Tahkola <aet@rasterburn.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e16c1f55642d79a80c45ace7603b284975559e78
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jan 23 15:00:42 2007 -0300

    V4L/DVB (5141): M920x: group tuner / demod callback functions together
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fa94805d0316e7706d2ce0273a9c58688482c9f6
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jan 21 15:57:48 2007 -0300

    V4L/DVB (5140): Whitespace / 80-column cleanups
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 84ad7574f69b971565061663be2b0a9ade5b8ca7
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Sun Jan 21 15:57:20 2007 -0300

    V4L/DVB (5139): M920x: Fix tuner identification bug with qt1010 module
    
    Fixes qt1010 identification bug with megasky caused by
    the Quantek QT1010 tuner module patch.
    
    Signed-off-by: Aapo Tahkola <aet@rasterburn.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 816172f8b944a98716f4b5fda801b7744cb91624
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jan 21 15:56:46 2007 -0300

    V4L/DVB (5138): Kconfig: qt1010 should be selected by m920x
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cbdc80ed8f59e204c031b52ea7e44f419029f75b
Author: Antti Palosaari <crope@iki.fi>
Date:   Sun Jan 21 15:56:10 2007 -0300

    V4L/DVB (5137): Dvb: add new qt1010 tuner module
    
    QT1010:
    - old qt1010-code totally rewritten and put in own kernel module
    - same enhancements as my earlier QT1010 125kHz patch
    - tuner initialization
    - register 1f calculation
    - register 20 calculation
    - register 25 calculation
    
    m920x: (MSI Megasky)
    - use new QT1010 module instead of old code
    
    Signed-off-by: Antti Palosaari <crope@iki.fi>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1f61f3bab303c02cfd822c952284a381089452a0
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Oct 7 15:03:04 2006 -0300

    V4L/DVB (5136): M920x: correct oops when loading module
    
    move .caps from the adapter properties to the device properties.
    Thanks to Martin Schwier for confirming this fix.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 565ef12713c5620b6f802d67861153a3f68499a4
Author: Jan Nijs <jan.nijs@scarlet.be>
Date:   Sat Oct 7 01:06:54 2006 -0300

    V4L/DVB (5135): Qt1010: correct hardlockup when an app access the DVB dongle
    
    This patch changes qt1010.h to use dvb_usb_device struct instead of a
    dvb_usb_adapter for accessing the private area of the driver.
    Without this patch my PC hard locks when an application tries to access
    the DVB tuner.
    
    Signed-off-by: Jan Nijs <jan.nijs@scarlet.be>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e2d79439c2253571e4d32fe959663b5615d89907
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Oct 3 16:46:33 2006 -0300

    V4L/DVB (5134): M920x: fix build in hg tree / other trivial fixes
    
    - removed extra newline
    - removed NULL entry
    - fixed versions.txt
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6cf2a10180e4039aaad1e4ecba5f2520f157da40
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Sep 28 14:47:21 2006 -0300

    V4L/DVB (5133): M920x: move qt1010_tuner_attach function into qt1010.h
    
    The megasky_tuner_attach function is not specific to this device.
    This patch renames it to qt1010_tuner_attach and moves it into the qt1010
    header file.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 94a47dc4335a614eba30cf29aa3a953040625c92
Author: Patrick Boettcher <patrick.boettcher@desy.de>
Date:   Thu Sep 28 13:48:03 2006 -0300

    V4L/DVB (5132): M920x: more trivial cleanups
    
    - Removed some needless brances
    - Removed an unneeded check for adapter[0]
    - Removed unneeded declaration of .generic_bulk_ctrl_endpoint = 0x01
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 26f48eaa9e57a3436fc049f30241256dda002de5
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Sep 28 01:46:49 2006 -0300

    V4L/DVB (5131): M920x: more cleanups
    
    Some cleanups and suggestions from Patrick Boettcher.
    Dropped the mutex in m9206_rc_query using #if 0, because
    M9206_CORE, M9206_I2C, M9206_FILTER and M9206_FW can be accessed
    concurrently.
    Thanks to both Aapo Tahkola and Patrick Boettcher.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e2adbecf72d54515b66f8631813ec49069669d5e
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Thu Sep 28 00:47:51 2006 -0300

    V4L/DVB (5130): M920x: misc updates and fixes
    
    - hardware pid filtering no longer enabled unless in usb 1.x mode
    - more responsive rc handling
    - some minor bug fixes and code refolding
    - m9206_write delay dropped (doesn't seem to be needed)
    
    Signed-off-by: Aapo Tahkola <aet@rasterburn.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 017cf012570c955c3e1ff025802d7cb46fd1d37b
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Sep 23 20:40:20 2006 -0300

    V4L/DVB (5129): M920x: break out qt1010 tuner code into a separate file
    
    qt1010 is a tuner used in some other devices, so this code should be put
    into a separate file so that it could be reused by other drivers.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2a2bfa7d61b29170b7f9bbf42712a77229e6b935
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Sep 23 20:13:12 2006 -0300

    V4L/DVB (5128): M920x: trivial cleanups
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 01cb34dba930accdb9356247bbe64b1c5393c5d5
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Sep 23 20:01:29 2006 -0300

    V4L/DVB (5127): M920x: update megasky driver for recent changes in the dvb tree
    
    update code to use dvb_attach()
    update code to reflect recent changes to the dvb_usb framework
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit baa2ed09000de94c02e4b6690a6097314d282928
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Sep 23 20:01:29 2006 -0300

    V4L/DVB (5126): M920x: cleanups after rename from megasky.[ch]
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2aef7d0fa0e35a3a26733bef147196c2926bd228
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Sep 23 20:00:42 2006 -0300

    V4L/DVB (5125): Dvb-usb: rename megasky.[ch] to m920x.[ch]
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5fecd9fd4287dd163fe1f1f0b1e86e931ed589c4
Author: Aapo Tahkola <aet@rasterburn.org>
Date:   Sat Sep 23 20:00:41 2006 -0300

    V4L/DVB (5124): Dvb-usb: Initial support for MSI Mega Sky 580 based on Uli m9206
    
    Currently, the driver works in bulk mode supporting both USB 2.0 and
    1.0 with and without hardware pid filters.
    The ULi m9205 also supports isochronous transfer mode, but I have
    dropped support for it because it depends on firmware and does not work
    on all USB host chips. Further, I have no firmware with remote
    controller support for this mode.
    
    Signed-off-by: Aapo Tahkola <aet@rasterburn.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ef7b8b725bdc59fb4a3f781f3e9f546ad01da792
Author: Tino Keitel <tino.keitel@tikei.de>
Date:   Mon Jan 22 18:33:07 2007 -0300

    V4L/DVB (5121): Proper vendor/device ID for the CinergyT2 input device
    
    I noticed that udev does not create a symlink for the CinergyT2 remote input
    device in /dev/input/by-id, which is required if I want to have a
    unique device name for lircd.
    The attached patch tries to achive this. However, udev still omits the
    input device for /dev/input/by-id symlinks. I think something is still
    not reported correctly.
    
    Signed-off-by: Tino Keitel <tino.keitel@tikei.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a63ad325c337ba634824cefe54f7ac52ee554b72
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jan 22 18:27:47 2007 -0300

    V4L/DVB (5119): Various cx2341x documentation updates/fixes.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5cc1dd8c3d8f80dbdce4d2e981a5e452af4b4529
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jan 21 22:02:58 2007 -0300

    V4L/DVB (5117): Fix: VIDIOC_G_TUNER were returning an endless number of tuners
    
    pvrusb2 have only one tuner inside. However, as it were not handling
    index, a call to v4l-info were returning as if it were an infinite
    number of tuners:
    $ v4l-info|grep VIDIOC_G_TUNER |head -5
        VIDIOC_G_TUNER(0)
        VIDIOC_G_TUNER(1)
        VIDIOC_G_TUNER(2)
        VIDIOC_G_TUNER(3)
        VIDIOC_G_TUNER(4)
    
    Acked-by: Mike Isely <isely@isely.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 69b04f0dc1c489899b610cb44209da9d728b248f
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jan 21 22:02:35 2007 -0300

    V4L/DVB (5116): Remove some warnings when compiling on x86_64
    
    pvrusb2-encoder.c: In function 'pvr2_encoder_cmd':
    pvrusb2-encoder.c:195: warning: format '%u' expects
    	type 'unsigned int', but argument 3 has type 'long unsigned int'
    pvrusb2-encoder.c:205: warning: format '%u' expects
    	type 'unsigned int', but argument 3 has type 'long unsigned int'
    pvrusb2-encoder.c: In function 'pvr2_encoder_vcmd':
    pvrusb2-encoder.c:303: warning: format '%u' expects
    	type 'unsigned int', but argument 3 has type 'long unsigned int'
    
    Acked-by: Mike Isely <isely@isely.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 05eda24968a6bb7082b632769bd72126f85485a6
Author: Heiko Baums <heiko@baums-on-web.de>
Date:   Sun Jan 21 05:58:19 2007 -0300

    V4L/DVB (5114): Cx88: Add support for svideo/composite input of the Terratec Cinergy 1400 DVB-T
    
    Adds support for the combined S-Video/Composite input of the
    Terratec Cinergy 1400 DVB-T.
    
    Signed-off-by: Heiko Baums <heiko@baums-on-web.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4cbca185e9adf3d48205b60bf196ebb9882af043
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Sun Jan 21 19:43:38 2007 -0300

    V4L/DVB (5113): Adds video output routing
    
    Nexus CA needs to use a different routing on saa7115 module.
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9de271e66d1172e7fa68ba0a7ecec2f9fb8d78c1
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jan 16 18:36:40 2007 -0300

    V4L/DVB (5111): Saa7134: add support for Terratec Cinergy HT PCI
    
    Add support for Terratec Cinergy HT PCI
    
    Signed-off-by: Giorgio Moscardi <software@sukkology.net>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a4b662f736c7919207da113814c35cad340c67fd
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:59:41 2007 -0300

    V4L/DVB (5110): Keep the previous tvnorm default for cx88 and cx88-blackbird
    
    The video_ioctl2 conversion replaced the default from NTSC to PAL_BG.
    This broke cx88-blackbird. Probably, there are some badness at this
    driver, not doing all required stuff to change video standard.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b3c4ee7016ad9d4c51887591b8a62c05f59cc498
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:59:38 2007 -0300

    V4L/DVB (5109): Convert cx88-blackbird to use video_ioctl2
    
    This patch finishes cx88-blackbird conversion to use video_ioctl2. Video
    standards are generated automatically inside videodev.c. the big ioctl
    parser is removed, using, instead, video_ioctl2.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7730bef9c5eaaecc3f441cd389ae189b17759117
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:59:35 2007 -0300

    V4L/DVB (5108): Remove_cx88_ioctl
    
    cx88_ioctl were merged at the master ioctl handler on cx88-blackbird
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 84f1b6783a8f7057f3d7a5388c5f3f4a8bce7b0b
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:59:32 2007 -0300

    V4L/DVB (5107): Use cx88_set_freq() on cx88-blackbird.c
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1571720c5ecfb9b5f27aff0678e3bef0cb1821ca
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:59:29 2007 -0300

    V4L/DVB (5106): Do some cleanups at cx88-blackbird
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 23154f2f3b8c3c7c58548c518f28195b0d0a6c64
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:59:22 2007 -0300

    V4L/DVB (5105): Reorder some ioctl handlers
    
    Reorder some ioctl handlers to make easy to convert to video_ioctl2
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ed10b06d8da204ce5f8d1b5b1a9d4df6565847c9
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:39 2007 -0300

    V4L/DVB (5104): Moved several stuff that were at cx88-video to cx88-blackbird.c
    
    cx88-blackbird were using some ioctl handling that were previously on
    cx88-video.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 243d8c0fd03c77051d0f6a634cbadb7bbe28a58a
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:36 2007 -0300

    V4L/DVB (5103): Fix vidioc_g_tuner handling
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 63ab1bdc3b98b804f69bd345b1e3a491804c12de
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:33 2007 -0300

    V4L/DVB (5102): make videodev to auto-generate standards
    
    v4l2_tvnorm were meant to describe video standards and its names to V4L2 API.
    However, this were doing by some static structures at the driver.
    
    This patch changes the internals in a way that, at the driver, only a
    v4l2_tvnorm (a 64 bit integer) should be filled, with all supported
    tvnorms. videodev will dynamically generate the proper API array
    based on supported standards.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e90311a198e21902cda4fd4cac8e09bc6ce52603
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:29 2007 -0300

    V4L/DVB (5101): Renamed video_mux to cx88_video_mux
    
    video_mux is renamed to cx88_video_mux to be exported to cx88-blackbird
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 54da49f5a4c739cf8de7838e049d0f9f548008d8
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:26 2007 -0300

    V4L/DVB (5100): Make cx88-blackbird to work again
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c526ab91a24b79cf57b8bff2fa69db0b5f4df290
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:23 2007 -0300

    V4L/DVB (5099): Uncommented NTSC/443 video standard
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1427f6b6b96e573c0c8eb905dca9032f442a44cf
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:20 2007 -0300

    V4L/DVB (5098): Added support for V4L2_STD_NTSC_443
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8d87cb9f31930c7ac25d03043fa90cbd5313fe26
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 20 13:58:17 2007 -0300

    V4L/DVB (5097): Convert cx8800 driver to video_ioctl2 handler
    
    video_ioctl2 handler provides V4L2 API parsing.
    Using it makes the driver simpler, and isolates API parsing.
    This allows future reusage of driver controls using other ways, like sysfs
    and/or procfs and increases isolation of driver-specific handling from the
    generic common ioctl processing.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fd69496461050296fb0fdd9acf6d789d27a0ef44
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Sat Jan 20 01:59:54 2007 -0300

    V4L/DVB (5095): Pvrusb2: Allow VIDIOC_S_FMT with -1 for resolution values
    
    With the previous patch, mplayer started but was polling the video
    device forever without any video actually coming out. Further analysis
    showed that it does a VIDIOC_S_FMT with width and height set to -1 (!!!).
    The code handling this only cares that both are lower than the minimum
    range allowed so it ends up setting the size to 19x17 (!!) This pretty
    much breaks the encoder here. Even if this breakage is yet another (TM)
    result of my setup, setting the size to 19x17 by default would surprise
    most users IMHO.
    So, special case for -1 and interpret this to be a request for the
    default size, please. Users can then set their favorite size both
    through mplayer and through sysfs.
    With this patch, mplayer finally works in pvr:// mode (not that we
    really gain anything over operating it through sysfs with lirc,
    sometime I might actually get off my lazy a** and contribute this
    setup too)
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 848ed3ca2a4eb85d6c6bde2a1b254b1f4c658e02
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Sat Jan 20 01:57:36 2007 -0300

    V4L/DVB (5094): Pvrusb2: Introduce fake audio input selection
    
    This should allow mplayer pvr:// to start. The trick is that no matter
    what actual input we use under this "fake" one, it will be able to do
    stereo :-)
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 606cf9caeb3b908426757924bfdce85cb854aa81
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 01:56:04 2007 -0300

    V4L/DVB (5093): Pvrusb2: Emit VIDIOC_S_TUNER correctly
    
    Audio mode changes are not private to the audio chip - other I2C
    modules need to see this as well.  And since the command in question
    is VIDIOC_S_TUNER which is a standard v4l2 command, we really should
    be broadcasting it out.  This change sets up a broadcast pathway for
    VIDIOC_S_TUNER and also eliminates the now redundant code from the
    audio chip handler.
    This fix enables stereo reception for the FM radio
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 27c7b710a4010e10b14500c0b27bb4c2a806de1b
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:39:17 2007 -0300

    V4L/DVB (5092): Pvrusb2: Use ARRAY_SIZE wherever possible
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ca545f7c39476c6c4c6e639452180a2b38342669
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:37:11 2007 -0300

    V4L/DVB (5091): Pvrusb2: Use kzalloc in place of kmalloc/memset pairs
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit eca8ebfc11d1935a7dd4c59cb8defb5bdff44ecd
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Jan 20 00:35:03 2007 -0300

    V4L/DVB (5090): Pvrusb2: A patch to use ARRAY_SIZE macro when appropriate
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c1c2680d922cd36338cf3efaf4ce0067c3e26eb1
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:30:23 2007 -0300

    V4L/DVB (5089): Pvrusb2: V4L EXT_CTRLS fixup
    
    Attempts to enumerate or operate on a group of EXT_CTRLS where the
    group size is zero is OK; don't fail on such operations.  At least one
    application uses this to probe for the existence of this API so let it
    succeed.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit af75453860569b6110fbf43c7113f52f698d37a3
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:28:15 2007 -0300

    V4L/DVB (5088): Pvrusb2: Minor dead code / comment cleanups
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 293b5d94ebf1e591a6672d0c34d4559e935cd2dc
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:27:01 2007 -0300

    V4L/DVB (5087): Pvrusb2: Fix sizeof() calculation foul-up
    
    This bug caused uninitalized data to be returned during a G_TUNER status poll.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 11fc76c9a8b24984d5ff701bc1f77940e04d5077
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:24:52 2007 -0300

    V4L/DVB (5086): Pvrusb2: Fix missing break statement on VIDIOC_S_TUNER
    
    The lack of a break statement in the handling of VIDIOC_S_TUNER caused
    errors to result.  Fixed.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8433544ea9ebc4227bb5aaaf361b0a1879964f7d
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:22:28 2007 -0300

    V4L/DVB (5085): Pvrusb2: trace print added
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 644afdb9cc05107f3090817b6d00e90daa9a034b
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:19:23 2007 -0300

    V4L/DVB (5084): Pvrusb2: Stop hardcoding frequency ranges
    
    Rather than hardcoding frequency ranges everywhere, rely on
    VIDIOC_G_TUNER results wherever we can.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7c74e57e6fb2ce986134e74634aeb78b3ea41a97
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:15:41 2007 -0300

    V4L/DVB (5083): Pvrusb2: Remove automodeswitch control
    
    The automodeswitch control was a feature that enable automatic radio /
    tv switching based on the selected frequency.  However since frequency
    ranges can overlap and also since apparently in some cases it's
    possible for the same frequency range to be both tv and radio in a
    specific region, then this feature can't safely work.  So it's removed.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fe23a2809d1f88887f7df7da38652826933b8ce6
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:10:55 2007 -0300

    V4L/DVB (5082): Pvrusb2: Slight debug printing efficiency fixup
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 18103c57b0168ebc0401702d483fe131f0aecc7a
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:09:47 2007 -0300

    V4L/DVB (5081): Pvrusb2: VIDIOC_G_TUNER cleanup
    
    Clean up use of VIDIOC_G_TUNER; we now correctly gather info from all
    the I2C client modules.  Also abide by V4L2_TUNER_CAP_LOW
    appropriately.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit af78a48b69231e129db0e1db24053da22f8eed6d
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:04:31 2007 -0300

    V4L/DVB (5080): Pvrusb2: Allow streaming from /dev/radioX
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4b85dee6a05dd963a13bd1230fafc060bf45ae45
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:03:32 2007 -0300

    V4L/DVB (5079): Pvrusb2: Use kzalloc instead of kmalloc+memset pairs
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6710fb868b289d21139bd68262388e0ea34601eb
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jan 20 00:02:26 2007 -0300

    V4L/DVB (5078): Pvrusb2: It's safe to kfree() a null pointer
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e5bd0260e7d3d806e66c12859f50733dca43bbcf
Author: Michael Schimek <mschimek@gmx.at>
Date:   Thu Jan 18 16:17:39 2007 -0300

    V4L/DVB (5077): Bttv cropping support
    
    Adds the missing VIDIOC_CROPCAP, G_CROP and S_CROP ioctls, permitting
    applications to capture or overlay a subsection of the picture or to
    extend the capture window beyond active video, into the VBI area and the
    horizontal blanking. VBI capturing can start and end on any line,
    including the picture area, and apps can capture different lines of each
    field and single fields.
    For compatibility with existing applications, the open() function
    resets the cropping and VBI capturing parameters and a VIDIOC_S_CROP
    call is necessary to actually enable cropping.
    Regrettably in PAL-M, PAL-N, PAL-Nc and NTSC-JP mode the maximum image
    width will increase from 640 and 768 to 747 and 923 pixels respectively.
    Like the VBI changes however, this should only affect applications which
    depend on former driver limitations, such as never getting more than 640
    pixels regardless of the requested width.
    Also, new freedoms require additional checks for conflicts and some
    applications may not expect an EBUSY error from the VIDIOC_QBUF and
    VIDIOCMCAPTURE ioctls. These errors should be rare though.
    So far, the patch has been tested on a UP machine with a bt878 in PAL-
    BGHI and NTSC-M mode using xawtv, tvtime, mplayer/mencoder, zapping/
    libzvbi and these tools: http://zapping.sf.net/bttv-crop-test.tar.bz2
    I'd be grateful about comments or bug reports.
    
    Signed-off-by: Michael H. Schimek <mschimek@gmx.at>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 13071f0a58f285eee81f63c917078bb2a48cf51e
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jan 14 15:29:42 2007 -0300

    V4L/DVB (5076): Cpia.c: buffer overflow
    
    If assigned minor is 10 or greater, terminator will be put beyound the end.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c74e0062684bc034a003289e2e2023f0e9ff747c
Author: Mike Isely <isely@pobox.com>
Date:   Sat Dec 30 18:31:22 2006 -0300

    V4L/DVB (5059): Pvrusb2: Be smarter about mode restoration
    
    Switch back to the previous input selection when the radio device is
    closed - but only do that if the current input selection is still the
    radio (i.e. it appears that it hasn't been messed with).
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cdef8bd8c6ab69407afaf78226cc9861f916c83d
Author: Mike Isely <isely@pobox.com>
Date:   Sat Dec 30 18:30:12 2006 -0300

    V4L/DVB (5058): Pvrusb2: bug fix involving switch into radio mode
    
    When the input is switched by opening /dev/radioX, we must also commit
    that change into the driver core.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 16eb40d37d5dd4dba85245899388d2d44eb0bc2a
Author: Mike Isely <isely@pobox.com>
Date:   Sat Dec 30 18:27:32 2006 -0300

    V4L/DVB (5057): Pvrusb2: Stream configuration cleanups
    
    Clean up and tighten logic involving stream configuration.  This
    mainly involves changes to pvrusb2-v4l2.c, where we better clarify how
    we use the stream configuration enum and implement a cleaner means to
    control streaming for a given device node.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f13ed249ed8b880fe5497aaa05999bff8328a973
Author: Mike Isely <isely@pobox.com>
Date:   Sat Dec 30 18:24:35 2006 -0300

    V4L/DVB (5056): Pvrusb2: Fix cut/paste bug in auto_mode_switch control
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7a4a3770dd37a7c87a2a8a7b8e7387527cdb34e7
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:40:59 2006 -0300

    V4L/DVB (5054): Pvrusb2: cosmetic comment tweak
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 139eecf94cf5ab1f9749874cd362db5bff7dc09c
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:36:33 2006 -0300

    V4L/DVB (5053): Pvrusb2: Change default volume to something sane
    
    The default volume of 65535 is too high.  Make is something smaller.
    Note that this _only_ changes the default value.  Specifically, there
    are no scaling or other more intrusive changes here.  I'm just sick of
    constantly having to reduce the volume every time I plug in and test
    the device!  (And unfortunately we can't do a better fix like scaling
    the volume so that 65535 makes sense because doing so will screw up
    any app - like MythTV - which expects the old scaling.)  Too bad V4L
    controls don't have better defined ranges.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 62f5fdace7774a45e75e4d651237e7e1e8f05327
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:33:00 2006 -0300

    V4L/DVB (5052): Pvrusb2: Remove stream claiming hack from /dev/radio
    
    Trying to temporarily check that the stream is not claimed during open
    of the radio device is at best a race condition.  What's to stop
    another app from claiming the stream anyway the instant after the
    check is done?  The implementation for this was dicey anyway.  So it's
    removed.  The only "price" for this is that if /dev/radioX is opened
    while streaming video, then the video stream is just going to switch
    to radio mode anyway.  If a user does this, he gets what he expects...
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1bde02891b3d4d17ee743584bb49ed5f275dff01
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:30:13 2006 -0300

    V4L/DVB (5051): Pvrusb2: Better radio versus tv frequency handling
    
    Separate track radio versus tv frequency so that when we switch modes
    we can also switch to a sane frequency appropriate for the mode.  Also
    implement logic to automate mode switching in certain cases.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5549f54f46c2375761f42cd2741364316e3b2a13
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:28:54 2006 -0300

    V4L/DVB (5050): Pvrusb2: Newer frequency range checking
    
    Implement new method for doing integer range checking, so that we can
    more intelligently range-check radio and tv ranges at once.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2083230084cee50580ee730cd26669704f7939b9
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:26:55 2006 -0300

    V4L/DVB (5049): Pvrusb2: Enable radio mode for 24xxx devices
    
    These changes implement correct audio routing for radio mode on a
    24xxx device.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c0e69315edd1d6901a021b85e0eea397444df702
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:25:06 2006 -0300

    V4L/DVB (5048): Pvrusb2: v4l2 API implementation frequency tweaks
    
    Report and set correctly converted frequency to/from a V4L2 app.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f1382122ab49a7f01fa107608eaf664b12055b8b
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:23:22 2006 -0300

    V4L/DVB (5047): Pvrusb2: Fix tuning calculation when in radio mode
    
    Frequency units in V4L2 are apparently different when in radio mode
    compared to tv mode.  Why?  Who knows.  This change adapts the driver
    appropriately - so that internally we always only deal in Hz and don't
    have to muck with craziness like this.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5a8a0a16422eec744ec220ccea472eef74b67180
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:21:34 2006 -0300

    V4L/DVB (5046): Pvrusb2: Fix tuner frequency calculation
    
    A conversion from Hz to V4L frequency units was accidentally removed
    by an earlier change.  Restore it.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0f0f257b7b46cc65c0f8f6f30444005b9c255e79
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:19:42 2006 -0300

    V4L/DVB (5045): Pvrusb2: Fix heap corruption introduced by radio mods
    
    We can't allocate v4l device structures in a block, since the v4l core
    governs when each device actually gets freed.  This bug was introduced
    as part of the core radio implementation.  Fix it.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5e6862cefe004f0f7ad86e0a80df4d9465576903
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:17:26 2006 -0300

    V4L/DVB (5044): Pvrusb2: Allow overriding vbi and radio device minor numbers
    
    Support specification of vbi and radio device minor numbers in a
    manner similar to the video device minor number.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f5156b06acaad13b74f72bf62025de7b76b1b8a4
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:14:54 2006 -0300

    V4L/DVB (5043): Pvrusb2: video standard broadcast fix for radio mode
    
    Ensure we don't accidentally broadcast the standard while in radio mode.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 98752102dccfd3f1bb3eac3d7833c9b38ac22fef
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:13:53 2006 -0300

    V4L/DVB (5042): Pvrusb2: Make units uniform when tracking tuning frequency
    
    The initial radio implementation used different units for tuning when
    in radio mode.  This changes everything to Hz.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8079384eeb1c490d0ad679cef061205e1b5a1c8a
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:12:28 2006 -0300

    V4L/DVB (5041): Pvrusb2: Use separate enumeration for get/store of minor number
    
    Use separate enum for get/store of minor number; we want pvr2_config
    to go away eventually and since it really means something different,
    don't use it here
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fd5a75fe00ec13311289928c2cb17d8676f8db45
Author: Mike Isely <isely@pobox.com>
Date:   Wed Dec 27 23:11:22 2006 -0300

    V4L/DVB (5040): Pvrusb2: Use enumeration for minor number get / store code
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ae2b9e25fdfb63efed3659b19c5cc8778fd981ba
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Wed Dec 27 23:09:55 2006 -0300

    V4L/DVB (5039): Pvrusb2: Implement /dev/radioX
    
    The "main" V4L2 interface patch. This is yet very incomplete, incorrect and
    probably inappropriate for inclusion as-is, but at least with this I 'm able
    to tune and play radio through a V4L2 program (pvr-radio.c, a "thumb" version
    of ivtv-radio.c with just the essentials).
    
    Therefore, it kinda gives an idea of what is needed to support this, hm,
    interface (partly used also by e.g., kradio). Please point out any mistakes
    on this code. I 'm sure I 'm messing up some struct initialization somewhere
    but currently I 'm too lazy to actually think this through until I complete
    the functionality (e.g., handle the VIDIOC_S_STD, ENUMINPUT, etc ioctls
    appropriately).
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 99cfdf5cc6dbe0bd748d810953874d4e08051a9f
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Wed Dec 27 23:08:55 2006 -0300

    V4L/DVB (5038): Pvrusb2: Implement stream claim checking function
    
    Add (and expose) a new function, pvr2_channel_check_stream_no_lock(), in
    pvrusb2-context.c. This is hopefully the last V4L2 interface related patch
    to change anything outside pvrusb2-v4l2.c.
    
    We need this to implement the open() for the radio device. The reason is
    that within the *enter_context() section of open() we need to ensure nobody
    is streaming and if we cannot, we should cleanup after ourselves and return
     -EBUSY. We cannot just use claim_stream() because:
    
       1) That would cause a deadlock trying to re-acquire the context lock
       2) We only need to ensure that nobody is streaming. We don't need to
          actually acquire the stream.
    
    Again, this is a kinda ugly patch. Feel free to improve.
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2fdf3d9c94f7f752dacbebb75bbecda3c1b082a0
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Wed Dec 27 23:07:58 2006 -0300

    V4L/DVB (5037): Pvrusb2: Implement multiple minor device number handling
    
    This is the first patch in preparation of the V4L2/IVTV radio interface.
    It does away with the assumption of only one minor per device. It also
    adds a file to show the radio minor as well. This can be useful for a
    program like pvr-radio.c (when it grows up), since this way it can search
    for the minor of the /dev/radioX device it opened and use the video minor
    of the same driver instance to get to the actual stream.
    
    The implementation looks kinda ugly. Feel free to improve (that is the
    reason behind separate patches anyway).
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6fcb5b3ef758ca78461d390dc07bed5a4667c521
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Wed Dec 27 23:06:54 2006 -0300

    V4L/DVB (5036): Pvrusb2: Fix for min/max control value checking
    
    In the previous patch we exploited the get_{min,max}_value facility to adjust
    min/max allowable frequencies on the fly, depending on tuner mode.
    
    Unfortunately, this facility was not used inside the *sym_to_val() function
    that translates what we echo to sysfs, which means we got an -ERANGE despite
    asking for a frequency between what we read to be min/max.
    This patch corrects this small omission.
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 25d8527a441760c333c41ec7197ba0750780b371
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Wed Dec 27 23:06:04 2006 -0300

    V4L/DVB (5035): Pvrusb2: Enable radio mode round #2
    
    This is the logic that:
      a) Ensures /sys/class/pvrusb2/sn-*/ctl_frequency/{max,min}_val are
         "automagically" reset to sane values on each mode change.
    
      b) Allows tuning to a radio frequency by something like:
         echo `perl -e "print int(94.9*16000 + 0.5)"` \
           > /sys/class/pvrusb2/sn-*/ctl_input/cur_val
    
    
    The trick was to take advantage of the already existing .get_{min,max}_value
    function pointers in pvr2_ctrl, to "dynamically override" the hardcoded values
    for min/max frequency at runtime.
    
    For a moment I thought to dispose of the hardcoded MIN/MAX_FREQ and use the
    hirange/lowrange fields of the v4l2_tuner struct instead, but then I see that
    tuner-core.c kinda hardcodes these as well, so I decided to not bother.
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 275b2e283b139bee19e7de5929d01484b8e3ee51
Author: Pantelis Koukousoulas <pakt223@freemail.gr>
Date:   Wed Dec 27 23:05:19 2006 -0300

    V4L/DVB (5034): Pvrusb2: Enable radio mode round #1
    
    This is the logic that supports switching modes via e.g.,
      echo radio > /sys/class/pvrusb2/sn-*/ctl_input/cur_val.
    
    To do the mode switching we need to:
    a) broadcast AUDC_SET_RADIO and
    b) issue the CX2341X_ENC_MUTE_VIDEO command to the encoder.
    
    The first is done by adding a new pvr2_i2c_op and having it trigger on
    input change, the second by adding this command in pvr2_encoder_start()
    and requesting an encoder restart on input change by setting
    stale_subsys_mask appropriately.
    
    The clues about AUDC_SET_RADIO and CX2341X_ENC_MUTE_VIDEO were kindly
    provided by Hans Verkuil on the pvrusb2 mailing list. The idea to
    implement mode switching this way (on input change) is due to Mike Isely.
    
    Why AUDC_SET_RADIO/VIDIOC_S_STD are used for switching? I can 't be sure,
    but I think this can be traced to a cornell student being the first to
    implement radio support in ivtv "as a different standard". I think the
    rest just evolved from there (it 's in the ivtv ML archives).
    
    Signed-off-by: Pantelis Koukousoulas <pakt223@freemail.gr>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0b600512860cab5a0bb4647f5f726a91bce2633c
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jan 14 08:33:24 2007 -0300

    V4L/DVB (5074): Some fixes at stream waitqueue on vivi
    
    There are several potential troubles on vivi waitqueue code:
    - Watchdog timer should be reset at every received frame;
    - Watchdog timer should be reset at the beginning of vivi_thread();
    - Checks for errors when creating a newer thread with kernel_thread();
    - Wake up vivi_thread() after creating it.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit df3a710458462aa9427cdeec947bf71af257e8dd
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jan 13 09:25:16 2007 -0300

    V4L/DVB (5073): Fix OOPS on some waitqueue conditions
    
    If for some reason vivi_thread() fails, vivi will suffer an OOPS at
    thread stop code, since waitqueue wouldn't be properly initializated.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ae1942c5712f700c9ccc8cc287c51db4daaa50d7
Author: Ville-Pekka Vainio <vpivaini@cs.helsinki.fi>
Date:   Fri Jan 12 14:06:21 2007 -0300

    V4L/DVB (5070): Budget-ci: add support for the Technotrend 1500 bundled remote
    
    The keymap is based on a previous patch by Jussi Kukkonen.
    This remote is identified by subsystem_device id 0x1010.
    
    Signed-off-by: Ville-Pekka Vainio <vpivaini@cs.helsinki.fi>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 43db48d3d2f6326c571984b7b30ab355596bb3cc
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Jan 9 11:20:59 2007 -0300

    V4L/DVB (5068): Fix authorship references
    
    Bill Dirks asked me to update his entries at kernel files, since
    he change his e-mail.
    I've also updated a few web broken links or obsolete info to the curent
    sites where V4L drivers and API are being discussed currently.
    
    CC: Bill Dirks <bill@thedirks.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2656312724d97ebc2e267e0a9740d51ad7aa9a04
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Mon Jan 8 11:38:36 2007 -0300

    V4L/DVB (5064): ET61X251 driver updates.
    
    - Implement audio ioctl's and VIDIOC_ENUM_FRAMESIZES
    - Documentation updates
    - Generic improvements
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7e3a0660700ad47ee6e296fe7090d771becfcf96
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Mon Jan 8 11:34:35 2007 -0300

    V4L/DVB (5063): ZC0301 driver updates.
    
    - Implement audio ioctl's and VIDIOC_ENUM_FRAMESIZES
    - Documentation updates
    - Generic improvements
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f327ebbd004fb2f08291ca4c6637f5f27319683c
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Mon Jan 8 10:43:56 2007 -0300

    V4L/DVB (5062): SN9C102 driver updates
    
    - Add support for SN9C105 and SN9C120
    - Add some more USB device identifiers
    - Add support for OV7660
    - Implement audio ioctl's and VIDIOC_ENUM_FRAMESIZES
    - Add preliminary support for 0x0c45/0x6007
    - Documentation updates
    - Generic improvements
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 19790db00bb7ff4d6621b82933afb3423586644e
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jan 7 22:12:22 2007 -0300

    V4L/DVB (5061): Bt8xx: add support for Ultraview DVB-T Lite
    
    Ultraview DVB-T Lite is a clone of DViCO FusionHDTV DVB-T Lite
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit de6a1b8edc48155249896f2600398e139f4860c6
Author: Dwaine Garden <dwainegarden@rogers.com>
Date:   Sun Jan 7 21:13:55 2007 -0300

    V4L/DVB (5032): Improves some USBVision info messages
    
    Replaces the info statements with printk(KERN_INFO statements.
    This will cut down on the useless information which is showing up
     in the kernel messages log file.
    
    Signed-off-by: Dwaine P. Garden <DwaineGarden@rogers.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c19049568117848a209185a61d18971e3a856bd8
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Tue Jan 2 03:29:48 2007 -0300

    V4L/DVB (5025): Cleanup: switch to using msecs_to_jiffies() on bttv
    
    PS.: Part of the changes at the original patch were removed due to the changes
    done at commit 52c14e794f6ce345343a6b8fc98ea4e0ba2dfce4
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cededbfcbc31230c1717a7ed27ff6cf82734e568
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Sun Jan 7 10:39:44 2007 -0300

    V4L/DVB (5028): Tvmixer module_put cleanup
    
    Removes redundant argument check for module_put()
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ac3289893052c8e6149a8e93b500e2e4c7d9d418
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Sun Jan 7 10:36:24 2007 -0300

    V4L/DVB (5027): Cpia module_put cleanup
    
    No need for redundant argument check for module_put()
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 22071a42a1b44ae90d232f4bd5d6d3f80ad4eaa2
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Sun Jan 7 10:33:39 2007 -0300

    V4L/DVB (5026): Pvrusb2-hdw kfree cleanup
    
    Removes redundant argument check for kfree().
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 16e9495d8bd5ec8ef3c1a32cd720542b1cc2b298
Author: Mike Isely <isely@pobox.com>
Date:   Wed Jan 3 18:08:06 2007 -0300

    V4L/DVB: MAINTAINERS: tag pvrusb2 list as subscribers-only
    
    Posting to the pvrusb2 mailing list is for subscribers only.  Anyone can
    subscribe of course.  This is done purely to keep spammers and similar pond
    scum from bothering the subscribers of the list.  This patch marks the
    pvrusb2 list tag in MAINTAINERS to reflect this situation.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4a06b538d6c7c1713d759f79b4fbd1d91d4932ca
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Dec 29 09:57:26 2006 -0300

    V4L/DVB (5018): Make usbvision_rvfree() static
    
    usbvision_rvfree() can now become static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c408a6f673e8fb0b67c81fc9cb29414265c1e6c1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Dec 28 12:47:47 2006 -0300

    V4L/DVB (5017): DVB: fix compile error
    
    This patch fixes the following compile error:
    <--  snip  -->
    ...
      LD      drivers/media/video/built-in.o
    drivers/media/video/saa7134/built-in.o:(.data+0x85ec): multiple definition of `ir_rc5_remote_gap'
    drivers/media/video/bt8xx/built-in.o:(.data+0x734c): first defined here
    drivers/media/video/saa7134/built-in.o:(.data+0x85f0): multiple definition of `ir_rc5_key_timeout'
    drivers/media/video/bt8xx/built-in.o:(.data+0x7350): first defined here
    make[4]: *** [drivers/media/video/built-in.o] Error 1
    <--  snip  -->
    Since this variables were needlessly global, this patch implements the
    trivial fix of making them static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c36c459a5530da8869a4de832188cdcb75b60359
Author: Juan Pablo Sormani <sorman@gmail.com>
Date:   Wed Dec 27 12:46:36 2006 -0300

    V4L/DVB (5015): Add support for more Encore TV cards
    
    Signed-off-by: Juan Pablo Sormani <sorman@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 95efa03bd66511ca9fb4ebc528211166ac842d27
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Wed Feb 14 22:55:53 2007 -0200

    V4L/DVB (5012a): Remove some unused code from kernel mainstream
    
    
    There are some long time unused code under some media driver source files.
    There's no need of keeping it at mainstream.
    Those unused code will remain available at V4L/DVB master tree and also at
    kernel history.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d9bdf77296a00538faff95f29bf238857daea2e7
Author: Tobias Klauser <tklauser@distanz.ch>
Date:   Tue Dec 26 07:33:48 2006 -0300

    V4L/DVB (5011): DVB: Remove unneeded void * casts in ttpci/av7110
    
    The patch removes unneeded void * casts for the following (void *) pointers:
    - struct file: private_data
    - struct dvb_device: priv
    - struct dvb_demux: priv
    - struct dvb_adapter: priv
    The patch also contains some whitespace and coding style cleanups in the
    relevant areas.
    
    Signed-off-by: Tobias Klauser <tklauser@distanz.ch>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9d85d776cb6ccc28ac5294a9ac4f6831295f489b
Author: Antti Seppala <ajhseppa@niksula.hut.fi>
Date:   Wed Dec 20 11:10:35 2006 -0300

    V4L/DVB (4999): [PATCH] Cablestar2 support
    
    This patch changes the initialization of alps tdee4 tuner in
    flexcop-fe-tuner.c to match what is used in the old driver that was
    written specifically for Cablestar cards by Patrick Boettcher. This
    patch should make Cablestar2 work again with recent dvb drivers without
    breaking other stv0297 based cards.
    
    Signed-off-by: Antti Seppala <ajhseppa@niksula.hut.fi>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e3ab2fdd3f5efe62d266877c53c578fe5b547b31
Author: Mario Rossi <mariofutire@googlemail.com>
Date:   Wed Dec 20 10:54:30 2006 -0300

    V4L/DVB (4998): [PATCH] DIB3000MC and NOVA T USB2 #2
    
    Second part of the patch to make the autosearch work again with DiB3000P/MC.
    
    Signed-off-by: Mario Rossi <mariofutire@googlemail.com>
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ce700b4e2f4b41f79815ee3a6c4f9b9390b2af36
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Wed Dec 20 09:53:09 2006 -0300

    V4L/DVB (4993): Updated cardlist to reflect the newly added saa7134 board
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d1158f469cb2bda369475e2bb622080dace25473
Author: Steven Walter <stevenrwalter@gmail.com>
Date:   Wed Dec 20 09:29:09 2006 -0300

    V4L/DVB (4989): Saa7134: add support for the Encore ENL-TV
    
    Add a board definition for the Encore ENL-TV card, and
    adds its PCI subdevice to the ID table.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d84e2bdca6e168557639b29c9244cbcf2500fe21
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Wed Dec 20 06:50:18 2006 -0300

    V4L/DVB (4987): Improve cx2341x documentation
    
    Document the program index table format, removed unused interrupt documentation
    and improve the documentation regarding the audio mode (stereo/joint/dual/mono).
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 75558ab92dc95c3b5a99df7c77e95a6e8484e05c
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Dec 18 22:52:21 2006 -0300

    V4L/DVB (4986): Removed unimplemented cx2341x API commands
    
    The commands CX2341X_DEC_SET_AUDIO_OUTPUT, CX2341X_DEC_SET_AV_DELAY and
    CX2341X_ENC_SET_3_2_PULLDOWN are not implemented in the Conexant firmware.
    So these commands are removed. This also means that the V4L2_CID_MPEG_VIDEO_PULLDOWN
    control in cx2341x.c and pvrusb2-hdw.c is removed.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 20a919f7960df1c0bf1cb4f637149ed4b6bc9ec3
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Dec 18 22:43:36 2006 -0300

    V4L/DVB (4985): Update cx2341x documentation.
    
    Removed a few unimplemented commands. Added a note for a few fields that are
    not implemented in the firmware, and clarified several issues around reverse
    playback.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e12ceaf4962d804320d639faed1da61e2cb85723
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Dec 18 13:06:30 2006 -0300

    V4L/DVB (4981): Update cx2341x documentation.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8387c66c7f06842b06222235a3749b31448d6637
Author: Hermann Pitton <hermann-pitton@arcor.de>
Date:   Sun Dec 10 21:08:03 2006 -0300

    V4L/DVB (4962): Add the Composite over S-Video input on the Asus P7131 Dual
    
    This makes a second CVBS input available.
    
    Signed-off-by: Hermann Pitton <hermann-pitton@arcor.de>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9160723ed620f31bf38332dee02041b1cb4c9967
Author: Hermann Pitton <hermann-pitton@arcor.de>
Date:   Thu Dec 7 21:45:28 2006 -0300

    V4L/DVB (4961): Add support for the ASUS P7131 remote control
    
    Besides adding the board specific code, this patch moves
    the RC5 decoding code from bt8xx to ir-functions.c to make it available
    for all drivers.
    
    Signed-off-by: Marc Fargas <telenieko@telenieko.com>
    Signed-off-by: Hermann Pitton <hermann-pitton@arcor.de>
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2ed0e2435939c8199abd3578a3a4991c5a7d5ca8
Author: Guy Martin <gmsoft@tuxicoman.be>
Date:   Wed Feb 21 15:32:57 2007 +0000

    [PARISC] Add missing statfs64 and fstatfs64 syscalls
    
    Signed-off-by: Guy Martin <gmsoft@tuxicoman.be>

commit 16728da99861bdb6e44f066d536287990e752d7b
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 17:51:51 2007 +0000

    pata_sl82c105: remove un-needed code paths
    
    Remove the DMA setup function. As pointed out by Sergey we set the actual
    DMA clock timing in set_dmamode so we don't actually need to do anything
    with it at set up time, but just leave the PIO timings loaded.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cb0e34ba59a1b883009d69673179c6cde70acc25
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 17:49:25 2007 +0000

    pata_sil680: Assorted fixes
    
    Correct iordy handling and DMA bit flag handling.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b7939b14d8dd9cb4a3ebfaea1416695e4b6d4a42
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 17:47:37 2007 +0000

    pata_oldpiix: Call both PIO and DMA setup functions on switch as they are called on set up
    
    Keeps the behaviour consistent and easier to understand.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3ddcc591e3501e49037f9ace9340697a9a414a5e
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 17:45:55 2007 +0000

    pata_ixp4xx: Fix up set_mode() function and display Configured for PIO info
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit aa6de4942c25f05cb7f4aa8efa20c5ec0884d8f1
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 17:44:25 2007 +0000

    pata_cs5520: suspend/resume
    
    The CS5520 isn't just an ATA controller and we must not
    pci_disable_device it as it turns into pci_disable_computer.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e852f7054df7cf4be686d8cff9c33333a36b59e9
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 20 17:35:43 2007 +0000

    pata: Display Configuring .. lines for devices with private set_mode methods
    
    We can't specify which mode in the cases below but we can at least say
    PIO and look consistent with the default.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 44877b4e22f391d39c6589412106a3668e81a05b
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 21 01:06:51 2007 +0900

    libata: s/ap->id/ap->print_id/g
    
    ata_port has two different id fields - id and port_no.  id is
    system-wide 1-based unique id for the port while port_no is 0-based
    host-wide port number.  The former is primarily used to identify the
    ATA port to the user in printk messages while the latter is used in
    various places in libata core and LLDs to index the port inside the
    host.
    
    The two fields feel quite similar and sometimes ap->id is used in
    place of ap->port_no, which is very difficult to spot.  This patch
    renames ap->id to ap->print_id to reduce the possibility of such bugs.
    
    Some printk messages are adjusted such that id string (ata%u[.%u])
    isn't printed twice and/or to use ata_*_printk() instead of hardcoded
    id format.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ce0cf6fafd02fb4c43fc1a1bee6069d6c0a36b1
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 19 19:03:27 2007 -0600

    sata_nv: enable hotplug interrupt and fix some readl/readw mismatches
    
    We already have code that handles hotplug interrupt indications in ADMA
    mode, this turns on the control flag that actually enables these interrupts.
    Also fixes some cases in the same functions where a 16-bit register was read
    using a readl instead of a readw.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 721449bf0d51213fe3abf0ac3e3561ef9ea7827a
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 19 19:03:08 2007 -0600

    sata_nv: Use notifier for completion checks
    
    The hardware provides us a notifier register that indicates what command
    tags have completed. Use this to determine which CPBs to check, rather
    than blindly checking all active CPBs. This should provide a minor
    performance win, since if the controller has touched some of these
    incomplete CPBs, accessing them will likely result in a cache miss.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ac3d6b869f1f2d8ee1bf7b0ba45cd7daed9b9513
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 19 19:02:46 2007 -0600

    sata_nv: Cleanup taskfile setup
    
    This edits the taskfile setup to more closely match the way that libata
    sends the taskfile for other controllers. This avoids putting taskfile writes
    into the CPB buffer that are not needed according to the taskfile flags.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 41949ed5c11a9d6e7af1afd62957d8d1988c803e
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 19 19:02:27 2007 -0600

    sata_nv: cleanup CPB and APRD initialization
    
    Clean up the initialization of the CPB and APRD structures so that we
    strictly follow the rules for ordering of writes to the CPB flags and
    response flags, and prevent duplicate initialization.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 08af7414786a3f35b686f68ada3de0b202c03d8c
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 19 19:01:59 2007 -0600

    sata_nv: Add CPB register info to error_handler output
    
    When error handling occurs with pending commands, output the contents
    of the next CPB count and next CPB index registers as well as the others,
    since these may be useful for debugging.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9dd6fa3231f9c6003080d189c94599e6a6b97dbf
Author: Magnus Damm <damm@opensource.se>
Date:   Sun Feb 18 17:53:32 2007 +0900

    libata: Remove duplicate dma blacklist entry
    
    libata: Remove duplicate dma blacklist entry
    
    The exact same entry is already present.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ed2a6e4aca90e1622fc07d672b9b89721eee9af8
Author: Magnus Damm <damm@opensource.se>
Date:   Sun Feb 18 17:52:25 2007 +0900

    pata_pcmcia: Update device table
    
    pata_pcmcia: Update device table
    
    Add CFA devices from I-O Data, Mitsubishi and Viking. Add SanDisk comment.
    
    Signed-off-by: Magnus Damm <damm@opensource.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e1be5d73e07dd6015b6ea255a36aae3b61b7b054
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 20 20:01:53 2007 +0900

    sata_via: fix resource-managed iomap conversion
    
    Conversion to resource-managed iomap was buggy causing init failures
    on both vt6420 and 6421 - BAR5 wasn't mapped for both controllers
    while on vt6420 sata_via tried to map BAR0-4 twice.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c3c70c443c2ef1fce31f201a93780c884b903993
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 20 23:31:22 2007 +0900

    libata: fix ata_scsi_change_queue_depth()
    
    Fix ata_scsi_change_queue_depth() such that...
    
    * NCQ on/off is exactly determined using the same logic as the issue path.
    
    * queue depth is adjusted to 1 if NCQ is not enabled.
    
    * -EINVAL is returned if requested action is ignored due to limitations.
    
    This fixes the bug which allows queue depth to be increased on
    blacklisted NCQ hosts/devices.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fcf1bf1584647f9fd864c193fee81840c4c5ce41
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 20 23:27:06 2007 +0900

    libata: fix ata_scmd_need_defer()
    
    Fix ata_scmd_need_defer() such that...
    
    * whether NCQ is used or not is exactly determined using the same
      criteria as the issue path.
    
    * defer-check is performed in all cases.
    
    This fixes race condition where turning off NCQ on the fly causes
    non-NCQ commands sneak into NCQ phase.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6d1245bf294e9ea65b3717be9fa0338bfb6ff6c9
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 20 23:20:27 2007 +0900

    libata: separate out ata_ncq_enabled()
    
    Separate out ata_ncq_enabled().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4c90d9717ae27dddf4b02ed7d683e502b539cd1c
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Feb 20 18:14:48 2007 +0900

    libata: disable pdev on all suspend events
    
    libata used disable pdev only on PM_EVENT_SUSPEND while re-enable pdev
    unconditionally.  This was okay before ref-counted pdev enable update
    but it now makes the pdev pinned after swsusp cycle (enabled twice but
    disabled only once) and devres sanity check whines about it.
    
    Fix it by unconditionally disabling pdev on all suspend events.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5e5c74a5e11d1e2a99d03132cc6c4455016db6c2
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 19 18:42:30 2007 -0600

    sata_nv: delay on switching between NCQ and non-NCQ commands
    
    This patch appears to solve some problems with commands timing out in
    cases where an NCQ command is immediately followed by a non-NCQ command
    (or possibly vice versa). This is a rather ugly solution, but until we
    know more about why this is needed, this is about all we can do.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cc0759103ff00c3dfc459059af4a1cfb0e865841
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Feb 20 10:59:13 2007 -0500

    libata: Fix Cell SATA driver dependencies
    
    The driver requires in_be32(), and so should not be built on many PCI
    platforms.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4d05447ec702364b8a2aebb4d625b16479268575
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Feb 18 02:24:37 2007 +0900

    libata: fix probe_ent alloc/free bugs
    
    ata_probe_ent_alloc() had a temporary hack such that devm_kzalloc()
    was used for allocation if devres had been previously initialized on
    the device; otherwise, plain kzalloc() was used.  This was to make the
    code useable from both the old and devres-aware libata drivers during
    transition.  This hack made ata_sas_port_alloc() unable to determine
    how the probe_ent is allocated, causing double free in some cases.
    
    Remove the now-unneeded hack and make ata_sas_port_alloc() use
    devm_kfree().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8d9db2d2fbae9e05022825c32f86e00c8e342860
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Fri Feb 16 01:40:06 2007 -0800

    SATA: use NULL for ptrs
    
    Fix sparse warnings in SATA:
    drivers/ata/sata_sil.c:342:9: warning: Using plain integer as NULL pointer
    drivers/ata/sata_mv.c:2056:55: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2cb27853b7cbf0c908444e25c61b62fa336b88cd
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Sun Feb 11 18:34:44 2007 -0600

    sata_nv: add back some verbosity into ADMA error_handler
    
    Some debug output in the ADMA error_handler function was removed recently,
    but it may be useful in certain cases, like NCQ commands timing out. Add it
    back in, but make it a bit more intelligent so that it only prints if
    command(s) are active and only prints the CPBs for those commands.
    That way it won't spew at inappropriate times like suspend/resume.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4bb64fb98168981d3e5a0e790c077ff511768e84
Author: Alan Cox <alan@redhat.com>
Date:   Fri Feb 16 01:40:04 2007 -0800

    SiS warning fixes
    
    Somehow the sis_info133 external definition ended up in libata.h and that
    was included by both drivers.  However libata.h contains libata-* specific
    internals and clashing defines like DRV_NAME so this makes a mess.  Move
    the extern into the C file and remove the warnings
    
    [akpm@linux-foundation.org: create sis.h to avoid extern-decl-in-C]
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2b06719153089aa8f5ac577f15f8aa8e5b5fe357
Author: Mark Lord <liml@rtr.ca>
Date:   Wed Feb 7 11:40:12 2007 -0500

    libata bugfix: HDIO_DRIVE_TASK
    
    I was trying to use HDIO_DRIVE_TASK for something today,
    and discovered that the libata implementation does not copy
    over the upper four LBA bits from args[6].
    
    This is serious, as any tools using this ioctl would have their
    commands applied to the wrong sectors on the drive, possibly resulting
    in disk corruption.
    
    Ideally, newer apps should use SG_IO/ATA_16 directly,
    avoiding this bug.  But with libata poised to displace drivers/ide,
    better compatibility here is a must.
    
    This patch fixes libata to use the upper four LBA bits passed
    in from the ioctl.
    
    The original drivers/ide implementation copies over all bits
    except for the master/slave select bit.  With this patch,
    libata will copy only the four high-order LBA bits,
    just in case there are assumptions elsewhere in libata (?).
    
    Signed-off-by:  Mark Lord <mlord@pobox.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 909706a2477a92b6e0f3083ed4b944cb1d09acfa
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Feb 2 16:22:31 2007 +0900

    libata: kill ATA_DNXFER_ANY
    
    ATA_DNXFER_ANY isn't used anymore.  Kill it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7d47e8d4d4fb0c3d3bdc706759e70d5453b61ec3
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Feb 2 16:22:31 2007 +0900

    libata: put some intelligence into EH speed down sequence
    
    The current EH speed down code is more of a proof that the EH
    framework is capable of adjusting transfer speed in response to error.
    This patch puts some intelligence into EH speed down sequence.  The
    rules are..
    
    * If there have been more than three timeout, HSM violation or
      unclassified DEV errors for known supported commands during last 10
      mins, NCQ is turned off.
    
    * If there have been more than three timeout or HSM violation for known
      supported command, transfer mode is slowed down.  If DMA is active,
      it is first slowered by one grade (e.g. UDMA133->100).  If that
      doesn't help, it's slowered to 40c limit (UDMA33).  If PIO is
      active, it's slowered by one grade first.  If that doesn't help,
      PIO0 is forced.  Note that this rule does not change transfer mode.
      DMA is never degraded into PIO by this rule.
    
    * If there have been more than ten ATA bus, timeout, HSM violation or
      unclassified device errors for known supported commands && speeding
      down DMA mode didn't help, the device is forced into PIO mode.  Note
      that this rule is considered only for PATA devices and is pretty
      difficult to trigger.
    
    One error can only trigger one rule at a time.  After a rule is
    triggered, error history is cleared such that the next speed down
    happens only after some number of errors are accumulated.  This makes
    sense because now speed down is done in bigger stride.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4ae72a1e469a3bcfd3c1f77dac62392c489bf9ca
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Feb 2 16:22:30 2007 +0900

    libata: improve probe failure handling
    
    * Move forcing device to PIO0 on device disable into
      ata_dev_disable().  This makes both old and new EHs act the same
      way.
    
    * Speed down only PIO mode on probe failure.  All commands used during
      probing are PIO commands.  There's no point in speeding down DMA.
    
    * Retry at least once after -ENODEV.  Some devices report garbled
      IDENTIFY data after certain events.  This shouldn't cause device
      detach and re-attach.
    
    * Rearrange EH failure path for simplicity.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 458337dbb120d33f326e2b19d54eca8cf179b5c0
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Feb 2 16:22:30 2007 +0900

    libata: improve ata_down_xfermask_limit()
    
    Make ata_down_xfermask_limit() accept @sel instead of @force_pio0.
    @sel selects how the xfermask limit will be adjusted.  The following
    selectors are defined.
    
    * ATA_DNXFER_PIO	: only speed down PIO
    * ATA_DNXFER_DMA	: only speed down DMA, don't cause transfer mode change
    * ATA_DNXFER_40C	: apply 40c cable limit
    * ATA_DNXFER_FORCE_PIO	: force PIO
    * ATA_DNXFER_FORCE_PIO0	: force PIO0 (same as original with @force_pio0 == 1)
    * ATA_DNXFER_ANY	: same as original with @force_pio0 == 0
    
    Currently, only ANY and FORCE_PIO0 are used to maintain the original
    behavior.  Other selectors will be used later to improve EH speed down
    sequence.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a619f981b477035027dd27dfbee6148b4cd4a83c
Author: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
Date:   Fri Jan 26 16:28:18 2007 +0900

    libata: PATA driver for Celleb
    
    This is the patch for PATA controller of Celleb.
    
    This driver uses the managed iomap (devres).
    
    Because this driver needs special taskfile accesses, there is
    a copy of ata_std_softreset(). ata_dev_try_classify() is exported
    so that it can be used in this function.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3a5f10e3708e00c406f154bae412652ec3eb2b48
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Wed Feb 21 10:55:59 2007 +0100

    [S390] add atomic64_xchg to s390
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit de61c9341ba144f6f21fdaae48ffbd811fc6637f
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Wed Feb 21 10:55:55 2007 +0100

    [S390] local_t cleanup : use asm-generic/local.h.
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 4562c9fffc3f8fca99f22671ad497aedd1737a5e
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Wed Feb 21 10:55:46 2007 +0100

    [S390] Replace $(ARCH) macros in Makefile
    
    Since $(ARCH) is always "s390" we can replace it with "s390".
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 615b04b301fd4e1b7680a498b873c4ae9baad92f
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Feb 21 10:55:37 2007 +0100

    [S390] nss: Free unused memory in kernel image.
    
    With CONFIG_SHARED_KERNEL the kernel text segment that might be in a
    read only memory sections starts at 1MB. Memory between 0x12000 and
    0x100000 is unused then. Free this, so we have appr. an extra MB
    of memory available.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 229d9c6dfb2900559449575a56dc8abcaf0bce9d
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Feb 21 10:55:29 2007 +0100

    [S390] bss section clearing.
    
    Clear only memory from __bss_start to __bss_stop when clearing the bss
    section. Not until _end, which currently happens to be the same.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 2b9329367504d19c7c166c5aec557d070caccd70
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Wed Feb 21 10:55:24 2007 +0100

    [S390] Remove BUG() statement
    
    To avoid ugly warings for older gccs, we replace
    BUG() with "return NULL", which is just as well.
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 46b05d2617c8efd8ec6b19acd2c95541a0118c13
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Wed Feb 21 10:55:21 2007 +0100

    [S390] New header file ipl.h
    
    Setup.h has been misused for ipl related stuff in the past. We now move
    everything, which has to do with ipl and reipl to a new header file named
    "ipl.h".
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 72960a02c270950253126ee8b339afd400f55273
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Wed Feb 21 10:55:18 2007 +0100

    [S390] New get_cpu_id() inline assembly
    
    Replace two stidp inline assemblies with one global implementation.
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 6c732de2d3673e28c6a976c98ee6ba4d197a919a
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Feb 21 10:55:15 2007 +0100

    [S390] etr: Add barrier() to etr_sync_cpu_start().
    
    Force reading of *in_sync in while loop. Loops where the content that
    is checked for is changed by a different cpu always should have some
    sort of barrier() semantics.
    Otherwise this might lead to very subtle bugs.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 118bcd31b309d12638f67729d5d96d4974750249
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Feb 21 10:55:12 2007 +0100

    [S390] Optional ZONE_DMA for s390.
    
    Disable ZONE_DMA on 31-bit. All memory is addressable by all
    devices and we do not need any special memory pool.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 63db6e8d41c703c26a3ce767740a9c8484765a74
Author: Jan Glauber <jan.glauber@de.ibm.com>
Date:   Wed Feb 21 10:55:06 2007 +0100

    [S390] smp_call_function cleanup
    
    Introduce __smp_call_function_map which calls a function on all cpus
    given with a cpumask_t. Use it to implement smp_call_function and
    smp_call_function_on. Replace smp_ext_bitcall_others with smp_ext_bitcall
    and a for_each_cpu_mask loop. Use a cpumask_t instead of an atomic_t for
    cpu counting and print a warning if preempt is on in
    __smp_call_function_map().
    
    Signed-off-by: Jan Glauber <jan.glauber@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 188596faf788f2881a0eb316f2604832df058ea8
Author: Jan Glauber <jan.glauber@de.ibm.com>
Date:   Wed Feb 21 10:55:03 2007 +0100

    [S390] fix non-smp compile.
    
    Fix compile of sclp_quiesce for CONFIG_SMP=n.
    
    Signed-off-by: Jan Glauber <jan.glauber@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit bf6f6aa46feada857a52cb67d99a7c2fe4a70e87
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Feb 21 10:55:00 2007 +0100

    [S390] prevent softirqs if delay is called disabled
    
    The new delay implementation uses the clock comparator and an external
    interrupt even if it is called disabled for interrupts. To do this
    all external interrupt source except clock comparator are switched of
    before enabling external interrupts. The external interrupt at the
    end of the delay period may not execute softirqs or we can end up in a
    dead-lock.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 489c80ba8aa9dde8244897cba33a9372c897e531
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Feb 21 10:54:57 2007 +0100

    [S390] update default configuration
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7292576043666ff39946dee14641fe719ba8c7e8
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Wed Feb 21 02:05:58 2007 -0500

    ACPI: fix S3 fan resume issue
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7570#c14
    
    Signed-off-by: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c8f71b01a50597e298dc3214a2f2be7b8d31170c
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 20 20:32:30 2007 -0800

    Linux 2.6.21-rc1

commit 1812063ba3365aeb5eb9117861a7fb05432f7ed0
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Tue Feb 20 20:17:55 2007 +0200

    IPoIB/cm: Improve small message bandwidth
    
    Avoid the overhead of freeing/reallocating and mapping/unmapping for
    DMA pages that have not been written to by hardware.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c9add6ec5678a17345c2516ea3d4b26d8703be8b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 01:02:13 2007 +0100

    IB/mthca: Make 2 functions static
    
    This patch makes the needlessly global functions mthca_tavor_write_mtt_seg()
    and mthca_arbel_write_mtt_seg() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f1d2120487de3620ff47367d7bc0e290dc868c47
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 20 13:58:22 2007 -0800

    [PATCH] i810fb: fix i810_check_params section mismatch
    
    WARNING: drivers/video/i810/i810fb.o - Section mismatch: reference
    to .init.data: from .text between 'i810_check_params' (at offset
    0x1123) and 'encode_fix'
    
    yres cannot be declared __devinitdata as it is used in
    i810_check_params(), which isn't __devinit.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5fc404e47bdf2d34ffc2edc16070cda410838291
Author: Ben Dooks <ben@fluff.org.uk>
Date:   Tue Feb 20 13:58:21 2007 -0800

    [PATCH] fb: SM501 framebuffer driver
    
    Driver for the Silicon Motion SM501 multifunction device framebuffer
    subsystem.
    
    This driver supports both the CRT and LCD panel heads, with some simple
    acceleration for the cursor plotting and support for screen panning.  There
    is no current support for bitblt/drawing engines, which should be added at
    a later date.
    
    This has been tested on a number of configurations, including PCI and
    generic-bus, on PPC, ARM and SH4
    
    [akpm@linux-foundation.org: fix warnings]
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.u.>
    Acked-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5b7e42b2d38e4c4d0cb105a2ad83d43f6957f59e
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Tue Feb 20 13:58:20 2007 -0800

    [PATCH] GPIO API: SA1100 wrapper cleanup
    
    Based on the discussion last december (http://lkml.org/lkml/2006/12/20/241),
    this patch
      - adds gpio_direction_input/output functions to
        generic.c instead of making them inline,
      - fixes comment and includes and uses inline functions
        instead of macros in gpio.h
    
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit adff264fe66d78a166dc887f861e7273d0cb1654
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Tue Feb 20 13:58:20 2007 -0800

    [PATCH] GPIO API: S3C2410 wrapper cleanup
    
    this one adds an #include <asm/arch/regs-gpio.h>.
    Tested by Roman Moravcik on s3c2440.
    
    Based on the discussion last december
    (http://lkml.org/lkml/2006/12/20/243), this patch
     - fixes comment and includes in gpio.h
     - adds the gpio_to_irq definition for S3C2400
     - includes asm/arch/regs-gpio.h for pin direction
       definitions
    
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d23c6c21af5624c774adb6fa7155000bfd75ba40
Author: Harald Welte <laforge@openmoko.org>
Date:   Tue Feb 20 13:58:19 2007 -0800

    [PATCH] spi_s3c2410_gpio.c spi mode 2 and 3 support
    
    Add transfer modes 2 and 3 to the S3C24XX gpio SPI driver
    
    Signed-off-by: Harald Welte <laforge@openmoko.org>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bb2d1c36c7f3a78d482622289c8de0c1a5fe790f
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Feb 20 13:58:19 2007 -0800

    [PATCH] SPI controller build/warning fixes
    
    The signature of the per-device cleanup() routine changed to remove its
    const-ness.  Three new SPI controller drivers now need that change, to
    eliminate build warnings.
    
    This also fixes a build bug with atmel_spi on AT91 systems.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0bb92e6cd313cf209ea0c164952d1f65c5b3ea46
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 20 13:58:18 2007 -0800

    [PATCH] parport_pc: fix parport_pc_probe_port section warning
    
    WARNING: drivers/parport/parport_pc.o - Section mismatch: reference
    to .init.text: from .text between 'parport_pc_probe_port' (at offset
    0x14f7) and 'parport_pc_unregister_port'
    
    parport_dma_probe() cannot be declared __devinit as it is called
    from parport_pc_probe_port() which isn't.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6d740cd5b18bc8128e70f98cfde8c74ebd21cea1
Author: Peter Zijlstra <a.p.zijlstra@chello.nl>
Date:   Tue Feb 20 13:58:18 2007 -0800

    [PATCH] lockdep: annotate BLKPG_DEL_PARTITION
    
    >=============================================
    >[ INFO: possible recursive locking detected ]
    >2.6.19-1.2909.fc7 #1
    >---------------------------------------------
    >anaconda/587 is trying to acquire lock:
    > (&bdev->bd_mutex){--..}, at: [<c05fb380>] mutex_lock+0x21/0x24
    >
    >but task is already holding lock:
    > (&bdev->bd_mutex){--..}, at: [<c05fb380>] mutex_lock+0x21/0x24
    >
    >other info that might help us debug this:
    >1 lock held by anaconda/587:
    > #0:  (&bdev->bd_mutex){--..}, at: [<c05fb380>] mutex_lock+0x21/0x24
    >
    >stack backtrace:
    > [<c0405812>] show_trace_log_lvl+0x1a/0x2f
    > [<c0405db2>] show_trace+0x12/0x14
    > [<c0405e36>] dump_stack+0x16/0x18
    > [<c043bd84>] __lock_acquire+0x116/0xa09
    > [<c043c960>] lock_acquire+0x56/0x6f
    > [<c05fb1fa>] __mutex_lock_slowpath+0xe5/0x24a
    > [<c05fb380>] mutex_lock+0x21/0x24
    > [<c04d82fb>] blkdev_ioctl+0x600/0x76d
    > [<c04946b1>] block_ioctl+0x1b/0x1f
    > [<c047ed5a>] do_ioctl+0x22/0x68
    > [<c047eff2>] vfs_ioctl+0x252/0x265
    > [<c047f04e>] sys_ioctl+0x49/0x63
    > [<c0404070>] syscall_call+0x7/0xb
    
    Annotate BLKPG_DEL_PARTITION's bd_mutex locking and add a little comment
    clarifying the bd_mutex locking, because I confused myself and initially
    thought the lock order was wrong too.
    
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d5c1682f9f8f4aa064f81fda67ea7b91fd829512
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 13:58:17 2007 -0800

    [PATCH] drivers/isdn/gigaset/: build asyncdata.o into the gigaset module
    
      LD      drivers/isdn/gigaset/built-in.o
    drivers/isdn/gigaset/ser_gigaset.o: In function `gigaset_m10x_send_skb':
    (.text+0xe50): multiple definition of `gigaset_m10x_send_skb'
    drivers/isdn/gigaset/usb_gigaset.o:(.text+0x0): first defined here
    drivers/isdn/gigaset/ser_gigaset.o: In function `gigaset_m10x_input':
    (.text+0x1121): multiple definition of `gigaset_m10x_input'
    drivers/isdn/gigaset/usb_gigaset.o:(.text+0x2d1): first defined here
    make[4]: *** [drivers/isdn/gigaset/built-in.o] Error 1
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit da68d61f89e275260cc993a0d4a39e63700098fb
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Feb 20 13:58:16 2007 -0800

    [PATCH] remove modpost false warnings on ARM
    
    This patch stops "modpost" from issuing erroneous modpost warnings on ARM
    builds, which it's been doing since since maybe last summer.  A canonical
    example would be driver method table entries:
    
      WARNING: <path> - Section mismatch: reference to .exit.text:<name>_remove
    	from .data after '$d' (at offset 0x4)
    
    That "$d" symbol is generated by tools conformant with ARM ABI specs; in
    this case it's a symbol **in the middle of** a "<name>_driver" struct.
    
    The erroneous warnings appear to be issued because "modpost" whitelists
    references from "<name>_driver" data into init and exit sections ...  but
    doesn't know should also include those "$d" mapping symbols, which are not
    otherwise associated with "<name>_driver" symbols.
    
    This patch prevents the modpost symbol lookup code from ever returning
    those mapping symbols, so it will return a whitelisted symbol instead.
    Then things work as expected.
    
    Now to revert various code-bloating "fixes" that got merged because of this
    modpost bug....
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Acked-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3deac046e2883686a732960050ab74fca0db11fa
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Tue Feb 20 13:58:15 2007 -0800

    [PATCH] GPIO API: PXA wrapper cleanup
    
    Based on the discussion last december (http://lkml.org/lkml/2006/12/20/242),
    this patch:
    
      - moves the PXA_LAST_GPIO check into pxa_gpio_mode
      - fixes comment and includes in gpio.h
      - replaces the gpio_set/get_value macros with inline
        functions and adds a non-inline version to avoid
        code explosion when gpio is not a constant.
    
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5d4675a811fb71fd922109d7ebae3f987401ace1
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Feb 20 13:58:14 2007 -0800

    [PATCH] at91_rtc updates
    
    Various bug fixes to the at91rm9200 RTC:
    
     - alarm:  setalarm() should pay attention to the "enabled" flag
    
     - init:  cleaner handling of the wakeup flags, which cpu init should
       really have set up.  Doing it here is just a workaround.
    
     - linkage:  since the at91_rtc driver probe() routine is in the init
       section, it should use platform_driver_probe() instead of leaving
       that pointer around in the driver struct after init section removal.
    
     - linkage:  likewise, remove() belongs in the exit section.
    
    Among other things, the init and alarm changes ensure that this driver
    handles the new sysfs "wakealarm" attribute properly.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 32b49da46caa8067ea47eea8b7aee6559e452125
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Feb 20 13:58:13 2007 -0800

    [PATCH] rtc-sa1100 rtc_wklarm.enabled bugfixes
    
    Some rtc-sa1100 bugfixes:
    
     - The read_alarm() method reports the rtc_wkalrm.enabled field properly.
       This patch is already in the handhelds.org tree.
    
     - And the set_alarm() method now handles that flag correctly, rather than
       making mismatched {en,dis}able_irq_wake() calls, which trigger runtime
       warning messages.  (Those calls are best made in suspend/resume methods.)
    
    Note that while this SA1100/PXA RTC is fully capable of waking those ARM
    processors from sleep states, that mechanism isn't properly supported on
    either processor family, or in this driver.  Some boards have board-specific
    PM glue providing partial workarounds for the weak generic PM support.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a631694a36a3b52b786b3ae6abe54bd8d1b6eb74
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 20 13:58:12 2007 -0800

    [PATCH] update Doc/oops-tracing.txt for TAINT_USER
    
    Add TAINT_USER description to Tainted flags in oops-tracing.txt.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Theodore Ts'o <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 63967fa911c2c49376d0b1e171ef98e1b2b075af
Author: Glauber de Oliveira Costa <gcosta@redhat.com>
Date:   Tue Feb 20 13:58:12 2007 -0800

    [PATCH] Missing __user in pointer referenced within copy_from_user
    
    Pointers to user data should be marked with a __user hint.  This one is
    missing.
    
    Signed-off-by: Glauber de Oliveira Costa <gcosta@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 96c62d51cc5a3ea31ddef606544f014922591a64
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Feb 20 13:58:12 2007 -0800

    [PATCH] genalloc warning fixes
    
    lib/genalloc.c: In function 'gen_pool_alloc':
    lib/genalloc.c:151: warning: passing argument 2 of '__set_bit' from incompatible pointer type
    lib/genalloc.c: In function 'gen_pool_free':
    lib/genalloc.c:190: warning: passing argument 2 of '__clear_bit' from incompatible pointer type
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2be3c79046cf90d75d436708a4e0898c7a1f9d51
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 20 13:58:11 2007 -0800

    [PATCH] affs: implement ->drop_inode
    
    affs wants to truncate the inode when the last user goes away, currently it
    does that through a potentially racy i_count check in ->put_inode.  But we
    already have a method that's called just after the we dropped the last
    reference, ->drop_inode.  This patch implements affs_drop_inode to take
    advantage of this.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c9ffec48487849bc277de662a6c29aad64653b99
Author: Ian Kent <raven@themaw.net>
Date:   Tue Feb 20 13:58:10 2007 -0800

    [PATCH] autofs4: check for directory re-create in lookup
    
    This problem was identified and fixed some time ago by Jeff Moyer but it fell
    through the cracks somehow.
    
    It is possible that a user space application could remove and re-create a
    directory during a request.  To avoid returning a failure from lookup
    incorrectly when our current dentry is unhashed we need to check if another
    positive, hashed dentry matching this one exists and if so return it instead
    of a fail.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f50b6f8691cae2e0064c499dd3ef3f31142987f0
Author: Ian Kent <raven@themaw.net>
Date:   Tue Feb 20 13:58:10 2007 -0800

    [PATCH] autofs4: fix another race between mount and expire
    
    Jeff Moyer has identified a race between mount and expire.
    
    What happens is that during an expire the situation can arise that a directory
    is removed and another lookup is done before the expire issues a completion
    status to the kernel module.  In this case, since the the lookup gets a new
    dentry, it doesn't know that there is an expire in progress and when it posts
    its mount request, matches the existing expire request and waits for its
    completion.  ENOENT is then returned to user space from lookup (as the dentry
    passed in is now unhashed) without having performed the mount request.
    
    The solution used here is to keep track of dentrys in this unhashed state and
    reuse them, if possible, in order to preserve the flags.  Additionally, this
    infrastructure will provide the framework for the reintroduction of caching of
    mount fails removed earlier in development.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Acked-by: Jeff Moyer <jmoyer@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e8514478f63b95548a49576ba96b47edeb8596e0
Author: Ian Kent <raven@themaw.net>
Date:   Tue Feb 20 13:58:09 2007 -0800

    [PATCH] autofs4: header file update
    
    The current header file definitions for autofs version 5 have caused a couple
    of problems for application builds downstream.
    
    This fixes the problem by separating the definitions.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 22c8ca78f20724676b6006232bf06cc3e9299539
Author: Nick Piggin <npiggin@suse.de>
Date:   Tue Feb 20 13:58:09 2007 -0800

    [PATCH] fs: fix nobh data leak
    
    nobh_prepare_write leaks data similarly to how simple_prepare_write did. Fix
    by not marking the page uptodate until nobh_commit_write time. Again, this
    could break weird use-cases, but none appear to exist in the tree.
    
    We can safely remove the set_page_dirty, because as the comment says,
    nobh_commit_write does set_page_dirty. If a filesystem wants to allocate
    backing store for a page dirtied via mmap, page_mkwrite is the suggested
    approach.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 955eff5acc8b8cd1c7d4eec0229c35eaabe013db
Author: Nick Piggin <npiggin@suse.de>
Date:   Tue Feb 20 13:58:08 2007 -0800

    [PATCH] fs: fix libfs data leak
    
    simple_prepare_write leaks uninitialised kernel data.  This happens because
    the it leaves an uninitialised "hole" over the part of the page that the
    write is expected to go to.  This is fine, but it then marks the page
    uptodate, which means a concurrent read can come in and copy the
    uninitialised memory into userspace before it written to.
    
    Fix it by simply marking it uptodate in simple_commit_write instead, after
    the hole has been filled in.  This could theoretically break an fs that
    uses simple_prepare_write and not simple_commit_write, and that relies on
    the incorrect simple_prepare_write behaviour.  Luckily, none of those
    exists in the tree.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c066332fb15adde1f37d874a67a1f9f7e4206484
Author: Dave Jones <davej@redhat.com>
Date:   Tue Feb 20 13:58:07 2007 -0800

    [PATCH] loosen dependancy on rtc cmos
    
    This option is useful for all of the X86 subarchs afaik (and especially
    X86_GENERICARCH).
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 304301347bed8315d6d13fd0e63032dfae6ef403
Author: Simon Horman <horms@verge.net.au>
Date:   Tue Feb 20 13:58:07 2007 -0800

    [PATCH] PPC64 Kdump documentation update
    
    Patch from Mohan Kumar M to add the ppc64 portions of the kdump
    documentation.
    
    http://thread.gmane.org/gmane.linux.kernel/481689/focus=3375
    
    Cc: Mohan Kumar M <mohan@in.ibm.com>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 588cc70865332acbb47fd6ad2d659295a1a7d1cc
Author: Simon Horman <horms@verge.net.au>
Date:   Tue Feb 20 13:58:06 2007 -0800

    [PATCH] Update OSDL/Linux-Foundation maintainer addresses
    
    The patch below updates MAINTAIER address
      Individuals (Only Andrew :): osdl.org -> linux-foundation.org
      Lists:                       osdl.org -> lists.osdl.org
    
    I assume the latter will change at some stage, but at least
    with this change the osdl/linux-foundation lists are consistent.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cc79aa9d282b34279731a522d074bfea4833e5b5
Author: Thomas Koeller <thomas.koeller@baslerweb.com>
Date:   Tue Feb 20 13:58:05 2007 -0800

    [PATCH] 8250: Fix GCC4 signed/unsigned mismatch warning
    
    Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0cba01db647fa87d14aeccac5267aebfeb2fc1d2
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 20 13:58:05 2007 -0800

    [PATCH] cdrom: use unsigned bitfields
    
    Fix 23 of these sparse warnings on x86_64 allmodconfig:
    include/linux/cdrom.h:942:19: error: dubious bitfield without explicit
    `signed' or `unsigned'
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 23cac8debcdb34e97c01350b55ddf65161997a06
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 20 13:58:05 2007 -0800

    [PATCH] tty: use NULL for ptrs
    
    Fix sparse warning in tty_io:
    drivers/char/tty_io.c:1536:34: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 262d9b0130edf9aef1819b211d69f48883d2ac10
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 20 13:58:04 2007 -0800

    [PATCH] kernel-doc: include struct short description in title output
    
    Output of a function or struct in html mode needs to include the short
    description from the function/struct name line in the output title line.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b6d6454fdb66f3829af8b92ab06825b6060fdf7e
Author: Ben Dooks <ben@fluff.org.uk>
Date:   Tue Feb 20 13:58:01 2007 -0800

    [PATCH] mfd: SM501 core driver
    
    This driver provides the core functionality of the SM501, which is a
    multi-function chip including two framebuffers, video acceleration, USB,
    and many other peripheral blocks.
    
    The driver exports a number of entries for the peripheral drivers to use.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Vincent Sanders <vince@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 60e114d1134555d1813e20a8cd86304331da05c7
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Tue Feb 20 13:58:00 2007 -0800

    [PATCH] lockdep: debug_locks check after check_chain_key
    
    In __lock_acquire check_chain_key can turn off debug_locks, so check is
    needed to assure proper return code.
    
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 34173a4aad7a641e72b70f9927ca797746fbce69
Author: Miguel Ojeda <maxextreme@gmail.com>
Date:   Tue Feb 20 13:58:00 2007 -0800

    [PATCH] cfag12864b: fix crash when built-in and no parport present
    
    The problem comes when ks0108/cfag12864b are built-in and no parallel port is
    present.  ks0108_init() is called first, as it should be, but fails to load
    (as there is no parallel port to use).
    
    After that, cfag12864b_init() gets called, without knowing anything about
    ks0108 failed, and calls ks0108_writecontrol(), which dereferences an
    uninitialized pointer.
    
    Init order is OK, I think.  The problem is how to stop cfag12864b_init() being
    called if ks0108 failed to load.  modprobe does it for us, but, how when
    built-in?
    
    Signed-off-by: Miguel Ojeda Sandonis <maxextreme@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e627432c2948d500669a6c4522f22b66f5118d64
Author: Aneesh Kumar K.V <aneesh.kumar@gmail.com>
Date:   Tue Feb 20 13:57:58 2007 -0800

    [PATCH] ext[234]: update documentation
    
    Signed-off-by: Aneesh Kumar <aneesh.kumar@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ae6b95d4d86565a4f267359852f7fbe000b6e0e7
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Feb 20 13:57:57 2007 -0800

    [PATCH] mwave: interesting flags savings
    
    Flags from spin_lock_irqsave() are saved into global variable and restored
    from it.  My gut feeling this is very racy.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 91e4ee381d23ef67196a03924485aeceb32d6753
Author: Gerhard Dirschl <gd@spherenet.de>
Date:   Tue Feb 20 13:57:56 2007 -0800

    [PATCH] pktcdvd: Correctly set cmd_len field in pkt_generic_packet
    
    Fixes http://bugzilla.kernel.org/show_bug.cgi?id=7810 - a silly
    copy-paste bug introduced by the latest change.
    
    Signed-off-by: Gerhard Dirschl <gd@spherenet.de>
    Cc: Peter Osterlund <petero2@telia.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1df49008f4ddec9d4f6862b47ea5bdba82078aa4
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Tue Feb 20 13:57:56 2007 -0800

    [PATCH] fault injection: split up stacktrace filter Kconfig option
    
    There is no prompt for CONFIG_STACKTRACE, so FAULT_INJECTION cannot be
    selected without LOCKDEP enabled.  (found by Paolo 'Blaisorblade'
    Giarrusso)
    
    In order to fix such broken Kconfig dependency, this patch splits up the
    stacktrace filter support for fault injection by new Kconfig option, which
    enables to use fault injection on the architecture which doesn't have
    general stacktrace support.
    
    Cc: "Paolo 'Blaisorblade' Giarrusso" <blaisorblade@yahoo.it>
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 94412a96c4553255bda7a232a349059dd7543338
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Tue Feb 20 13:57:55 2007 -0800

    [PATCH] FAT: DIO-write fallback to normal buffered
    
    If the DIO write on FAT is expanding the size, it will be fail by -EINVAL,
    because FAT can't handle it now.
    
    This patch fallback it to the normal buffered-write and would return
    success.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Acked-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 346fd59bab28093276be102632f72691a2c243fe
Author: Srinivasa Ds <srinivasa@in.ibm.com>
Date:   Tue Feb 20 13:57:54 2007 -0800

    [PATCH] kprobes: list all active probes in the system
    
    This patch lists all active probes in the system by scanning through
    kprobe_table[].  It takes care of aggregate handlers and prints the type of
    the probe.  Letter "k" for kprobes, "j" for jprobes, "r" for kretprobes.
    It also lists address of the instruction,its symbolic name(function name +
    offset) and the module name.  One can access this file through
    /sys/kernel/debug/kprobes/list.
    
    Output looks like this
    =====================
    llm40:~/a # cat /sys/kernel/debug/kprobes/list
    c0169ae3  r  sys_read+0x0
    c0169ae3  k  sys_read+0x0
    c01694c8  k  vfs_write+0x0
    c0167d20  r  sys_open+0x0
    f8e658a6  k  reiserfs_delete_inode+0x0  reiserfs
    c0120f4a  k  do_fork+0x0
    c0120f4a  j  do_fork+0x0
    c0169b4a  r  sys_write+0x0
    c0169b4a  k  sys_write+0x0
    c0169622  r  vfs_read+0x0
    =================================
    
    [akpm@linux-foundation.org: cleanup]
    [ananth@in.ibm.com: sparc build fix]
    Signed-off-by: Srinivasa DS <srinivasa@in.ibm.com>
    Cc: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Cc: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ffda9d302267dbb7fc9bc38f6e4c1b3d61a536a9
Author: Nick Piggin <npiggin@suse.de>
Date:   Tue Feb 20 13:57:54 2007 -0800

    [PATCH] fs: fix __block_write_full_page error case buffer submission
    
    Andrew noticed that unlocking the page before submitting all buffers for
    writeout could cause problems if the IO completes before we've finished
    messing around with the page buffers, and they subsequently get freed.
    
    Even if there were no bug, it is a good idea to bring the error case
    into line with the common case here.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bc56bba8f31bd99f350a5ebfd43d50f411b620c7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Feb 20 13:57:53 2007 -0800

    [PATCH] shm: make sysv ipc shared memory use stacked files
    
    The current ipc shared memory code runs into several problems because it
    does not quite use files like the rest of the kernel.  With the option of
    backing ipc shared memory with either hugetlbfs or ordinary shared memory
    the problems got worse.  With the added support for ipc namespaces things
    behaved so unexpected that we now have several bad namespace reference
    counting bugs when using what appears at first glance to be a reasonable
    idiom.
    
    So to attack these problems and hopefully make the code more maintainable
    this patch simply uses the files provided by other parts of the kernel and
    builds it's own files out of them.  The shm files are allocated in do_shmat
    and freed when their reference count drops to zero with their last unmap.
    The file and vm operations that we don't want to implement or we don't
    implement completely we just delegate to the operations of our backing
    file.
    
    This means that we now get an accurate shm_nattch count for we have a
    hugetlbfs inode for backing store, and the shm accounting of last attach
    and last detach time work as well.
    
    This means that getting a reference to the ipc namespace when we create the
    file and dropping the referenece in the release method is now safe and
    correct.
    
    This means we no longer need a special case for clearing VM_MAYWRITE
    as our file descriptor now only has write permissions when we have
    requested write access when calling shmat.  Although VM_SHARED is now
    cleared as well which I believe is harmless and is mostly likely a
    minor bug fix.
    
    By using the same set of operations for both the hugetlb case and regular
    shared memory case shmdt is not simplified and made slightly more correct
    as now the test "vma->vm_ops == &shm_vm_ops" is 100% accurate in spotting
    all shared memory regions generated from sysvipc shared memory.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8ef8286689c6b5bc76212437b85bdd2ba749ee44
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Feb 20 13:57:52 2007 -0800

    [PATCH] slab: reduce size of alien cache to cover only possible nodes
    
    The alien cache is a per cpu per node array allocated for every slab on the
    system.  Currently we size this array for all nodes that the kernel does
    support.  For IA64 this is 1024 nodes.  So we allocate an array with 1024
    objects even if we only boot a system with 4 nodes.
    
    This patch uses "nr_node_ids" to determine the number of possible nodes
    supported by a hardware configuration and only allocates an alien cache
    sized for possible nodes.
    
    The initialization of nr_node_ids occurred too late relative to the bootstrap
    of the slab allocator and so I moved the setup_nr_node_ids() into
    free_area_init_nodes().
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 53b8a315b76a3f3c70a5644976c0095460eb13d8
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Feb 20 13:57:51 2007 -0800

    [PATCH] Convert highest_possible_processor_id to nr_cpu_ids
    
    We frequently need the maximum number of possible processors in order to
    allocate arrays for all processors.  So far this was done using
    highest_possible_processor_id().  However, we do need the number of
    processors not the highest id.  Moreover the number was so far dynamically
    calculated on each invokation.  The number of possible processors does not
    change when the system is running.  We can therefore calculate that number
    once.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Cc: Neil Brown <neilb@suse.de>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 74c7aa8b8581e0ba8d6d17c623b9279aaabbb0cf
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Feb 20 13:57:51 2007 -0800

    [PATCH] Replace highest_possible_node_id() with nr_node_ids
    
    highest_possible_node_id() is currently used to calculate the last possible
    node idso that the network subsystem can figure out how to size per node
    arrays.
    
    I think having the ability to determine the maximum amount of nodes in a
    system at runtime is useful but then we should name this entry
    correspondingly, it should return the number of node_ids, and the the value
    needs to be setup only once on bootup.  The node_possible_map does not
    change after bootup.
    
    This patch introduces nr_node_ids and replaces the use of
    highest_possible_node_id().  nr_node_ids is calculated on bootup when the
    page allocators pagesets are initialized.
    
    [deweerdt@free.fr: fix oops]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Neil Brown <neilb@suse.de>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ec553a90448b3edbd26c1acc72464f877614bfa
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Feb 20 13:57:50 2007 -0800

    [PATCH] mincore warning fix
    
    allnoconfig:
    
    mm/mincore.c: In function 'do_mincore':
    mm/mincore.c:122: warning: unused variable 'entry'
    
    Yet another entry in the why-macros-are-wrong encyclopedia.
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8af5e2eb3cc4450ffba9496c875beac41bf4f4f8
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Tue Feb 20 13:57:49 2007 -0800

    [PATCH] fix mempolicy's check on a system with memory-less-node
    
    bind_zonelist() can create zero-length zonelist if there is a
    memory-less-node.  This patch checks the length of zonelist.  If length is
    0, returns -EINVAL.
    
    tested on ia64/NUMA with memory-less-node.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Cc: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b446b60e4eb5e5457120c4728ada871b1209c1d0
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Feb 20 13:57:48 2007 -0800

    [PATCH] rework reserved major handling
    
    Several people have reported failures in dynamic major device number handling
    due to the recent changes in there to avoid handing out the local/experimental
    majors.
    
    Rolf reports that this is due to a gcc-4.1.0 bug.
    
    The patch refactors that code a lot in an attempt to provoke the compiler into
    behaving.
    
    Cc: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f4fa27c16ba9b6910c5b815e5c13a7e8249277f0
Author: Andries Brouwer <Andries.Brouwer@cwi.nl>
Date:   Tue Feb 20 13:57:47 2007 -0800

    [PATCH] minix v3: fix superblock definition
    
    Somehow we got the layout of the v3 superblock wrong, which causes crashes due
    to overindexing of the buffer_head array in statfs on large fielsystems.
    
    Cc: "Cedric Augonnet" <cedric.augonnet@gmail.com>
    Cc: "Daniel Aragones" <danarag@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5085b607fb6c03d7668126b55cb54f20969c203c
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Feb 20 13:57:47 2007 -0800

    [PATCH] xfs warning fix
    
    fs/xfs/linux-2.6/xfs_super.c:903: warning: 'noinline' attribute ignored
    
    Cc: David Chinner <dgc@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7b8f850bebe093e37d283ed791039b39fa241e6d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 20 13:57:45 2007 -0800

    [PATCH] Fix build errors if bitop functions are do {} while macros
    
    If one of clear_bit, change_bit or set_bit is defined as a do { } while (0)
    function usage of these functions in parenthesis like
    
      (foo_bit(23, &var))
    
    while be expaned to something like
    
      (do { ... } while (0)}).
    
    resulting in a build error.  This patch removes the useless parenthesis.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e696268a73f7f59a333624f9abf8ffc9412ee64c
Merge: 91aa693... 5a84d15...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 20 12:14:32 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'for-linus' of master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 4165/1: S3C24XX: Select CONFIG_NO_IOPORT
      [ARM] Fix s3c2410 ALSA audio for typedef elimination
      [ARM] Fix ARM AACI ALSA driver
      [ARM] fix mach-at91 build breakage
      [ARM] Fix jornada720 build errors
      [ARM] Fix iop13xx build error
      [ARM] Fix build error caused by move of apm
      [ARM] 4223/1: ixdp2351 : Fix for a define error
      [ARM] 4187/1: iop: unify time implementation across iop32x, iop33x, and iop13xx
      [ARM] 4186/1: iop: remove cp6_enable/disable routines
      [ARM] 4185/2: entry: introduce get_irqnr_preamble and arch_ret_to_user

commit b44755cfaa72e7ed3d831a946bb4e7dfe7548966
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 20 01:07:13 2007 +0100

    {rd,wr}msr_on_cpu SMP=n optimization
    
    Let's save a few bytes in the CONFIG_SMP=n case.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 48ac3271e52d23ee987da93f80d20f6bec8e6717
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Feb 19 00:44:07 2007 +0300

    [CPUFREQ] cpufreq_ondemand.c: don't use _WORK_NAR
    
    Looks like dbs_timer() is very careful wrt per_cpu(cpu_dbs_info),
    and it doesn't need the help of WORK_STRUCT_NOAUTOREL.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Acked-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b077ffb3b767c3efb44d00b998385a9cb127255c
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Fri Feb 16 01:48:11 2007 -0800

    rdmsr_on_cpu, wrmsr_on_cpu
    
    There was OpenVZ specific bug rendering some cpufreq drivers unusable on SMP.
    In short, when cpufreq code thinks it confined itself to needed cpu by means
    of set_cpus_allowed() to execute rdmsr, some "virtual cpu" feature can migrate
    process to anywhere.  This triggers bugons and does wrong things in general.
    
    This got fixed by introducing rdmsr_on_cpu and wrmsr_on_cpu executing rdmsr
    and wrmsr on given physical cpu by means of smp_call_function_single().
    
    Dave Jones mentioned cpufreq might be not only user of rdmsr_on_cpu() and
    wrmsr_on_cpu(), so I'm putting them into arch/{i386,x86_64}/lib/ .
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 22f7bb0329a506f2fd61c14ce3c8bc632e08c732
Author: Thomas Renninger <trenn@suse.de>
Date:   Fri Feb 16 08:44:43 2007 +0100

    [CPUFREQ] Revert default on deprecated config X86_SPEEDSTEP_CENTRINO_ACPI
    
    Revert default on deprecated config X86_SPEEDSTEP_CENTRINO_ACPI
    
    Signed-off-by: Thomas Renninger <trenn@suse.de>
    Signed-off-by: Dave Jones <davej@redhat.com>
    
     arch/i386/kernel/cpu/cpufreq/Kconfig |    1 -
     arch/x86_64/kernel/cpufreq/Kconfig   |    1 -
     2 files changed, 2 deletions(-)

commit a5220b463e957c9a434295503cdf635d93454d78
Author: Zwane Mwaikambo <zwane@infradead.org>
Date:   Thu Feb 15 23:09:00 2007 -0800

    [AGPGART] Fix modular agpgart ia64 allmodconfig
    
    My previous compat AGP patch broke modular AGPGART.
    
    Test built on;
    
    i386 CONFIG_AGP=y,m
    x86_64 CONFIG_AGP=y
    ia64 CONFIG_AGP=m
    
    Signed-off-by: Zwane Mwaikambo <zwane@infradead.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 5a84d159061d914c8dd4aa372ac6e9529c2be453
Merge: e80a0e6... 7d477a0...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 19:13:30 2007 +0000

    Merge ARM fixes

commit 91aa69315ef9a76b8f734438617a2e32812b630f
Merge: a5527c6... 6606e17...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 20 10:26:46 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (21 commits)
      natsemi: Support Aculab E1/T1 PMXc cPCI carrier cards
      natsemi: Add support for using MII port with no PHY
      skge: race with workq and RTNL
      Replace local random function with random32()
      s2io: RTNL and flush_scheduled_work deadlock
      8139too: RTNL and flush_scheduled_work deadlock
      sis190: RTNL and flush_scheduled_work deadlock
      r8169: RTNL and flush_scheduled_work deadlock
      [PATCH] ieee80211softmac: Fix setting of initial transmit rates
      [PATCH] bcm43xx: OFDM fix for rev 1 cards
      [PATCH] bcm43xx: Fix for 4311 and 02/07/07 specification changes
      [PATCH] prism54: correct assignment of DOT1XENABLE in WE-19 codepaths
      [PATCH] zd1211rw: Readd zd_addr_t cast
      [PATCH] bcm43xx: Fix for oops on resume
      [PATCH] bcm43xx: Ignore ampdu status reports
      [PATCH] wavelan: Use ARRAY_SIZE macro when appropriate
      [PATCH] hostap: Use ARRAY_SIZE macro when appropriate
      [PATCH] misc-wireless: Use ARRAY_SIZE macro when appropriate
      [PATCH] ipw2100: Use ARRAY_SIZE macro when appropriate
      [PATCH] bcm43xx: Janitorial change - remove two unused variables
      ...

commit a5527c6a586537c1af7ae6db30bb444ee4abdfe8
Merge: 4afffe5... 8f27489...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 20 10:17:32 2007 -0800

    Merge branch 'for-linus' of git://git.o-hand.com/linux-rpurdie-backlight
    
    * 'for-linus' of git://git.o-hand.com/linux-rpurdie-backlight:
      backlight: Remove bogus SYSFS dependency
      backlight: simplify corgi_bl locking
      backlight: Separate backlight properties from backlight ops pointers
      backlight: Clean up pmac_backlight handling
      backlight: Improve backlight selection for fbdev drivers
      backlight: Rework backlight/fb interaction simplifying, lots
      backlight: Remove unneeded backlight update_status calls
      backlight: Remove uneeded update_status call from chipsfb.c
      backlight/fbcon: Add FB_EVENT_CONBLANK
      backlight: Fix Kconfig entries
      backlight: Remove uneeded nvidia set_power calls
      backlight: Convert semaphore -> mutex
      backlight: Fix external uses of backlight internal semaphore
      backlight: Minor code cleanups for hp680_bl.c
      backlight: Minor code cleanups for corgi_bl.c
      backlight: Remove excessive (un)likelys
      backlight: Remove unneeded owner field
      backlight: Fix error handling
      backlight: Add Frontpath ProGear HX1050+ driver
      backlight: Add maintainer entry

commit 4afffe5eabc4005674a1ef4f4c96f1ae9f4a979b
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 19 21:28:53 2007 -0800

    [PATCH] ARM: fix mach-at91 build breakage
    
    The rename of the AT91 subtree from mach-at91rm9200 to mach-at91
    (to accomodate at91sam926x processors) was incomplete.  It needs
    this patch to be able to build again.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d7f786e06538081dd10c97931a89418699fe609d
Merge: e5717c4... f00a3ec...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 20 10:14:29 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [NET] Eliminate user-selectable CONFIG_MV643XX_ETH_[012]
      [MIPS] Drop __init from init_8259A()
      [MIPS] Fix Kconfig typo bug
      [MIPS] Fix double signal on trap and break instruction
      [MIPS] sigset_32 has been made redundand by compat_sigset_t.
      [MIPS] emma2rh: Remove needless <asm/i8259.h> inclusion.
      [MIPS] Add MTD device support for Cobalt

commit e5717c48ed52feebd59756578debd34eaeb9d262
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Tue Feb 20 15:45:21 2007 +0100

    [PATCH] tty_register_driver: Remove incorrect and superfluous cast
    
    tty_register_driver: Remove incorrect and superfluous cast (expected and passed
    types are both const char *)
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f00a3ec4d47b51c5995fe10f8252a90aca331e62
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Tue Feb 20 05:15:20 2007 -0700

    [NET] Eliminate user-selectable CONFIG_MV643XX_ETH_[012]
    
    Remove the use of CONFIG_MV643XX_ETH_[012] variables on most platforms.
    Instead, platform-specific code enables the ports supported by the
    hardware.  After this patch, these config variables are only used in
    arch/ppc, so also move them from drivers/net/Kconfig to arch/ppc/Kconfig.
    
    Signed-off-by: Dale Farnsworth <dale@farnsworth.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Cc: Paul Mackerras <paulus@samba.org>

commit a0be2f7999aaff97962fe4240ab2ca12a394884c
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Feb 20 20:08:45 2007 +0900

    [MIPS] Drop __init from init_8259A()
    
    init_8259A() is called from i8259A_resume() so should not be marked as
    __init.  And add some tests for whether 8259A was already initialized
    or not.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a9b69d0c0c928b4a78a0da32a903ae47b0ad09e7
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Feb 8 12:44:19 2007 +0000

    [MIPS] Fix Kconfig typo bug
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 90fccb1363f96790034c69f0703a36241f9197dc
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Feb 6 16:02:21 2007 +0900

    [MIPS] Fix double signal on trap and break instruction
    
    This commit broke gdb, since any BREAK or TRAP instruction cause SIGSEGV.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 01ee6037088ca2a6c93bf7e22edf831408c33196
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Feb 11 18:22:36 2007 +0000

    [MIPS] sigset_32 has been made redundand by compat_sigset_t.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 45a33c3a556825d7f7ca6f862460dacdbbce6af1
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Feb 8 10:30:29 2007 +0900

    [MIPS] emma2rh: Remove needless <asm/i8259.h> inclusion.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c316eb1eee2c803c33b1f826fe744c922d2e354f
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Feb 20 14:11:57 2007 +0900

    [MIPS] Add MTD device support for Cobalt
    
    This patch has added MTD device support for Cobalt.
    Moreover, removes old type FlashROM support.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7d477a04a619e90ee08724e8f2d8803c6bdfcef8
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Feb 12 18:59:35 2007 +0100

    [ARM] 4165/1: S3C24XX: Select CONFIG_NO_IOPORT
    
    On S3C24XX architecture, select CONFIG_NO_IOPORT
    as we only have memory based IO.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6606e17a7f1c3bc1b1e83d0c517f11d094e55bf1
Merge: 6aab444... b312362...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Feb 20 11:28:42 2007 -0500

    Merge branch 'upstream-jgarzik' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream

commit 6aab44475a1355365f0a24abe6f8eb32185a701e
Author: Mark Brown <broonie@sirena.org.uk>
Date:   Mon Feb 19 20:15:40 2007 +0000

    natsemi: Support Aculab E1/T1 PMXc cPCI carrier cards
    
    Aculab E1/T1 PMXc cPCI carrier card cards present a natsemi on the cPCI
    bus with an oversized EEPROM using a direct MII<->MII connection with no
    PHY.  This patch adds a new device table entry supporting these cards.
    
    Signed-off-by: Mark Brown <broonie@sirena.org.uk>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 68c90166e4aaa15ddcdd4778ad30bfb8b32534be
Author: Mark Brown <broonie@sirena.org.uk>
Date:   Mon Feb 19 20:15:39 2007 +0000

    natsemi: Add support for using MII port with no PHY
    
    This patch provides code paths which allow the natsemi driver to use the
    external MII port on the chip but ignore any PHYs that may be attached to it.
    The link state will be left as it was when the driver started and can be
    configured via ethtool.  Any PHYs that are present can be accessed via the MII
    ioctl()s.
    
    This is useful for systems where the device is connected without a PHY
    or where either information or actions outside the scope of the driver
    are required in order to use the PHYs.
    
    Signed-off-by: Mark Brown <broonie@sirena.org.uk>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 208491d8f92e5aa129acb27e223e75d0173a3edd
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 16 15:37:39 2007 -0800

    skge: race with workq and RTNL
    
    If a workqueue function that needs RTNL is running when skge_down
    is called then a deadlock is possible. Fix by only clearing the timer,
    and handling the flush_scheduled_work on removal. This work queue is only
    ever used for the old fiber based boards.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8b5b46718113166b5f6bcdf40e67ea867461e209
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 16 11:55:33 2007 +0000

    Replace local random function with random32()
    
    Signed-off-by: Joe Perches <joe@perches.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 22747d6b41f31c71abc2b351bc9f6bfa6bae5d5e
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu Feb 15 23:37:50 2007 +0100

    s2io: RTNL and flush_scheduled_work deadlock
    
    Mantra: don't use flush_scheduled_work with RTNL held.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 83cbb4d2577174e27a91e63a47a2a27c3af50d4e
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu Feb 15 23:37:44 2007 +0100

    8139too: RTNL and flush_scheduled_work deadlock
    
    Your usual dont-flush_scheduled_work-with-RTNL-held stuff.
    
    It is a bit different here since the thread runs permanently
    or is only occasionally kicked for recovery depending on the
    hardware revision.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c014f6c8f870271a8dcfe6e4139d6a651633aaf4
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu Feb 15 23:37:29 2007 +0100

    sis190: RTNL and flush_scheduled_work deadlock
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit eb2a021c4710b98081daa797d5a729ac23c240cd
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Thu Feb 15 23:37:21 2007 +0100

    r8169: RTNL and flush_scheduled_work deadlock
    
    flush_scheduled_work() in net_device->close has a slight tendency
    to deadlock with tasks on the workqueue that hold RTNL.
    
    rtl8169_close/down simply need the recovery tasks to not meddle
    with the hardware while the device is going down.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 97e412fa9e31414030c1e9ac5e96a985d946af83
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 16:11:11 2007 +0000

    [ARM] Fix s3c2410 ALSA audio for typedef elimination
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8a371840f825be20354007537b6568b77448b685
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 15:44:23 2007 +0000

    [ARM] Fix ARM AACI ALSA driver
    
      CC [M]  sound/arm/aaci.o
    sound/arm/aaci.c:729: error: parse error before '*' token
    sound/arm/aaci.c:731: warning: function declaration isn't a prototype
    ...
    sound/arm/aaci.c:786: error: parse error before '*' token
    sound/arm/aaci.c:786: warning: function declaration isn't a prototype
    ...
    sound/arm/aaci.c:827: error: parse error before '*' token
    sound/arm/aaci.c:828: warning: function declaration isn't a prototype
    ...
    sound/arm/aaci.c:845: error: parse error before "aaci_capture_ops"
    sound/arm/aaci.c:845: warning: type defaults to `int' in declaration of `aaci_capture_ops'
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 25ccb569ee52114c01e28a2fe2d451cd43de309c
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 19 21:28:53 2007 -0800

    [ARM] fix mach-at91 build breakage
    
    The rename of the AT91 subtree from mach-at91rm9200 to mach-at91
    (to accomodate at91sam926x processors) was incomplete.  It needs
    this patch to be able to build again.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4f2849e49cbaf8373163211bb811a8457b46cc4e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 15:23:57 2007 +0000

    [ARM] Fix jornada720 build errors
    
    kernel/built-in.o: In function `pm_suspend':
    utsname_sysctl.c:(.text+0x23008): multiple definition of `pm_suspend'
    arch/arm/mach-sa1100/built-in.o:arch/arm/mach-sa1100/sleep.S:(.text+0xf68): first defined here
    arm-linux-ld: Warning: size of symbol `pm_suspend' changed from 20 in arch/arm/mach-sa1100/built-in.o to 44 in kernel/built-in.o
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6a32b935f8f8eb31877b73f76290ae051279df33
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 14:56:51 2007 +0000

    [ARM] Fix iop13xx build error
    
      CC      arch/arm/mach-iop13xx/setup.o
    arch/arm/mach-iop13xx/setup.c: In function 'iq8134x_probe_flash_size':
    arch/arm/mach-iop13xx/setup.c:210: warning: implicit declaration of function 'ioremap'
    arch/arm/mach-iop13xx/setup.c:210: warning: initialization makes pointer from integer without a cast
    arch/arm/mach-iop13xx/setup.c:218: warning: implicit declaration of function 'writew'
    arch/arm/mach-iop13xx/setup.c:222: warning: implicit declaration of function 'readb'
    arch/arm/mach-iop13xx/setup.c:231: warning: implicit declaration of function 'iounmap'
      LD      .tmp_vmlinux1
    arch/arm/mach-iop13xx/built-in.o: In function `iop13xx_platform_init':
    iq81340mc.c:(.init.text+0x150): undefined reference to `ioremap'
    iq81340mc.c:(.init.text+0x21c): undefined reference to `writew'
    iq81340mc.c:(.init.text+0x24c): undefined reference to `writew'
    iq81340mc.c:(.init.text+0x254): undefined reference to `iounmap'
    iq81340mc.c:(.init.text+0x2c4): undefined reference to `readb'
    iq81340mc.c:(.init.text+0x2e8): undefined reference to `readb'
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d608e52c361271ccd841b629ca50462756f7b078
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 14:53:28 2007 +0000

    [ARM] Fix build error caused by move of apm
    
      CC      arch/arm/common/sharpsl_pm.o
    arch/arm/common/sharpsl_pm.c:30:31: error: asm/apm-emulation.h: No such file or directory
    ...
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8f27489d1105c2386e6ed71c35e74e0e69603cbc
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Feb 20 12:27:25 2007 +0000

    backlight: Remove bogus SYSFS dependency
    
    Remove a bogus SYSFS dependency from the backlight class
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 37985b449310b17a815511045455934ede5a90c0
Author: Ozzy <linux-ozzy@gmx.de>
Date:   Mon Feb 19 15:05:42 2007 +0100

    [ARM] 4223/1: ixdp2351 : Fix for a define error
    
    Fix syntax error for a define in ixdp2351.h
    
    Signed-off-by: Ozzy <linux-ozzy@gmx.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e80a0e6e7ccdf64575d4384cb4172860422f5b81
Merge: 3b0eb4a... 3668b45...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 20 10:52:01 2007 +0000

    [ARM] Merge remaining IOP code
    
    Conflicts:
    	include/asm-arm/arch-at91rm9200/entry-macro.S
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 40f5a0ce2501d62d8653cb1fbfeb80e2a7013933
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 10 23:50:39 2007 +0000

    backlight: simplify corgi_bl locking
    
    Now update_status has locking, we can remove the mutex from corgi_bl.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 599a52d12629394236d785615808845823875868
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 10 23:07:48 2007 +0000

    backlight: Separate backlight properties from backlight ops pointers
    
    Per device data such as brightness belongs to the indivdual device
    and should therefore be separate from the the backlight operation
    function pointers. This patch splits the two types of data and
    allows simplifcation of some code.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 321709c5994f952b78d567fd7083dbebbdc381b7
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 10 15:04:08 2007 +0000

    backlight: Clean up pmac_backlight handling
    
    Move the setting/unsetting of pmac_backlight into the
    backlight core instead of doing it in each driver.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit e0e34ef7f02915cfe50e501e9f32c24217177a96
Author: James Simmons <jsimmons@infradead.org>
Date:   Sat Feb 10 14:15:43 2007 +0000

    backlight: Improve backlight selection for fbdev drivers
    
    Improve backlight selection for fbdev drivers
    
    Signed-off-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 37ce69a57ff217a4ca0871e9ee5aa58c052b7d86
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 10 14:10:33 2007 +0000

    backlight: Rework backlight/fb interaction simplifying, lots
    
    fb_info->bl_mutex is badly thought out and the backlight class doesn't
    need it if the framebuffer/backlight register/unregister order is
    consistent, particularly after the backlight locking fixes.
    
    Fix the drivers to use the order:
    
    backlight_device_register()
    register_framebuffer()
    unregister_framebuffer()
    backlight_device_unregister()
    
    and turn bl_mutex into a lock for the bl_curve data only.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit b5c6916b3118d4301dc2f8cf8d33f13e5324a3a5
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Feb 9 09:53:56 2007 +0000

    backlight: Remove unneeded backlight update_status calls
    
    The backlight core listens for blanking events and triggers a
    backlight_update_status call so these extra calls are not
    needed and can be removed.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 85a3a9aa69c24c056eae578e68d44d5f612e6b51
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Feb 9 09:50:47 2007 +0000

    backlight: Remove uneeded update_status call from chipsfb.c
    
    Remove uneeded update_status call from chipsfb.c since the
    backlight core now receives software blanking notifications
    too.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 994efacdf9a087b52f71e620b58dfa526b0cf928
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Feb 9 09:46:45 2007 +0000

    backlight/fbcon: Add FB_EVENT_CONBLANK
    
    The backlight class wants notification whenever the console is blanked
    but doesn't get this when hardware blanking fails and software blanking
    is used. Changing FB_EVENT_BLANK to report both would be a behaviour
    change which could confuse the console layer so add a new event for
    software blanking and have the backlight class listen for both.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 34f18a71d9bc55e8210c3fe02938336f82f40b30
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Feb 9 09:40:30 2007 +0000

    backlight: Fix Kconfig entries
    
    Currently its possible to build the backlight core as a module yet
    compile the drivers into the kernel which gives missing symbols.
    
    Fix.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 1cfc97f21f6ab91df8d5617fcbf758322fdd238b
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Feb 9 00:34:52 2007 +0000

    backlight: Remove uneeded nvidia set_power calls
    
    nvidia_bl_set_power isn't needed since the backlight class handles
    this by receiving fb events itself and calling update_status so
    remove it.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 249040dc7fd391186f420fe23a9b59d357103cac
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Feb 8 22:53:55 2007 +0000

    backlight: Convert semaphore -> mutex
    
    Convert internal semaphore to a mutex
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 28ee086d5b36aab2931f6740e409bb0fb6c65e5f
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Feb 8 22:25:09 2007 +0000

    backlight: Fix external uses of backlight internal semaphore
    
    backlight_device->sem has a very specific use as documented in the
    header file. The external users of this are using it for a different
    reason, to serialise access to the update_status() method.
    
    backlight users were supposed to implement their own internal
    serialisation of update_status() if needed but everyone is doing
    things differently and incorrectly. Therefore add a global mutex to
    take care of serialisation for everyone, once and for all.
    
    Locking for get_brightness remains optional since most users don't
    need it.
    
    Also update the lcd class in a similar way.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit a8db3c1948eb30cd6988b5b96b654f591e6280b1
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Feb 8 00:33:24 2007 +0000

    backlight: Minor code cleanups for hp680_bl.c
    
    Since people use this code as an example, clean it up to
    to use platform_*_drvdata instead of a global variable.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit da7a747125ff80e13c00b231602e7c86b6bb8741
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Feb 8 00:32:14 2007 +0000

    backlight: Minor code cleanups for corgi_bl.c
    
    Since people use this code as an example, clean it up to
    to use platform_*_drvdata and remove an unneeded function.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 90968e8ebc4611896ff7f2ef0c0bf8455e845cd1
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Thu Feb 8 00:12:28 2007 +0000

    backlight: Remove excessive (un)likelys
    
    Remove excessive numbers of (un)likely()s in the backlight core.
    
    There are no hot paths in this code so rely on compiler to do
    the right thing.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit dfcba200679dc3f62212154b65b40b835ce69ab7
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Feb 8 00:06:32 2007 +0000

    backlight: Remove unneeded owner field
    
    Remove uneeded owner field from backlight_properties structure.
    
    Nothing uses it and it is unlikely that it will ever be used. The
    backlight class uses other means to ensure that nothing references
    unloaded code.
    
    Based on a patch from Dmitry Torokhov <dtor@insightbb.com>
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 2fd5a15489dd2e58009ffd4ecbadb36a40f67d2b
Author: Dmitry Torokhov <dtor@mail.ru>
Date:   Wed Feb 7 22:25:50 2007 +0000

    backlight: Fix error handling
    
    Fix error handling when registering new device
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 7a208463b20e893e8e2074b2d41b8dc09568ddee
Author: Marcin Juszkiewicz <openembedded@hrw.one.pl>
Date:   Wed Feb 7 22:24:01 2007 +0000

    backlight: Add Frontpath ProGear HX1050+ driver
    
    Add control of LCD backlight for Frontpath ProGear HX1050+.
    Patch is based on http://downloads.sf.net/progear/progear-lcd-0.2.tar.gz
    driver by M Schacht.
    
    Signed-off-by: Marcin Juszkiewicz <openembedded@hrw.one.pl>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 300abeb5490d6fab640f7da3f612fc8c1b906580
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Wed Feb 7 22:21:07 2007 +0000

    backlight: Add maintainer entry
    
    Add myself as the backlight class/subsystem maintainer.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 1ca949299260aa49eeba34ff912e2321c8b1f647
Merge: c9ce228... 0cfd526...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 17:38:33 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Cobalt: Fix UART I/O type
      [MIPS] Fixup copy_from_user_inatomic
      [MIPS] Fix struct sigcontext for N32 userland
      [MIPS] Make some __setup functions static
      [MIPS] Declare highstart_pfn, highend_pfn only if CONFIG_HIGHMEM=y
      [MIPS] Allow selection of KGDB only on platforms where it's supported.

commit 0cfd5267476ce8051c4447988d2b0377d09188e8
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Fri Feb 9 12:16:24 2007 +0900

    [MIPS] Cobalt: Fix UART I/O type
    
    The Cobalt UART is actually connected to memory resource area.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e03b526932a9ae1ff20b47459c040f3c6407f625
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 19 16:59:24 2007 +0000

    [MIPS] Fixup copy_from_user_inatomic
    
    From the 01408c4939479ec46c15aa7ef6e2406be50eeeca log message:
    
    The problem is that when we write to a file, the copy from userspace to
    pagecache is first done with preemption disabled, so if the source
    address is not immediately available the copy fails *and* *zeros* *the*
    *destination*.
    
    This is a problem because a concurrent read (which admittedly is an odd
    thing to do) might see zeros rather that was there before the write, or
    what was there after, or some mixture of the two (any of these being a
    reasonable thing to see).
    
    If the copy did fail, it will immediately be retried with preemption
    re-enabled so any transient problem with accessing the source won't
    cause an error.
    
    The first copying does not need to zero any uncopied bytes, and doing
    so causes the problem.  It uses copy_from_user_atomic rather than
    copy_from_user so the simple expedient is to change copy_from_user_atomic
    to *not* zero out bytes on failure.
    
    < --- end cite --- >
    
    This patch finally implements at least a not so pretty solution by
    duplicating the relevant part of __copy_user.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 269dd2b2526d046d8b43554ff27b486e2ddb3f08
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Feb 18 00:12:57 2007 +0900

    [MIPS] Fix struct sigcontext for N32 userland
    
    The kernel use 64-bit for sc_regs[0], and both N32/N64 userland
    expects it was 64-bit.  But size of 'long' on N32 is actually 32-bit.
    So this definition make some confusion.  Use __u32 and __u64 for
    N32/N64 sigcontext to get rid of this confusion.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f49a747c4adadd96addf4dbf4a44f439513fb29b
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Feb 18 01:02:14 2007 +0900

    [MIPS] Make some __setup functions static
    
    This fixes some sparse warnings. ("warning: symbol 'foo' was not
    declared. Should it be static?")
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bf15f7679b5cd943758dfd538b852c2ab406bee5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 19 15:00:49 2007 +0000

    [MIPS] Declare highstart_pfn, highend_pfn only if CONFIG_HIGHMEM=y
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cc8010771d04af571eb16bee258d51dc8b620f7f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Feb 17 02:58:39 2007 +0000

    [MIPS] Allow selection of KGDB only on platforms where it's supported.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c9ce228306fda4448f5f495b4f36c07956f45acd
Author: Greg Banks <gnb@sgi.com>
Date:   Tue Feb 20 10:12:34 2007 +1100

    [PATCH] Fix a free-wrong-pointer bug in nfs/acl server.
    
    Due to type confusion, when an nfsacl verison 2 'ACCESS' request
    finishes and tries to clean up, it calls fh_put on entiredly the
    wrong thing and this can cause an oops.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 575d5e72aab57beb6d5fa2a7d66be9fc681a5e00
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Feb 17 20:03:21 2007 +0100

    [PATCH] tick management: make broadcast dependent on local APIC
    
    The broadcast functionality is only necessary when a local APIC is
    available. Make the config switch depend on X86_LOCAL_APIC. This
    resolves the mach-voyager breakage introduced by the tick managament
    code.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6168a702ab0be181e5e57a0b2d0e7376f7a47f0b
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 17 21:22:39 2007 -0800

    [PATCH] Declare init_irq_proc before we use it.
    
    powerpc gets:
    
    init/main.c: In function `do_basic_setup':
    init/main.c:714: warning: implicit declaration of function `init_irq_proc'
    
    but we cannot include linux/irq.h in generic code.
    
    Fix it by moving the declaration into linux/interrupt.h instead.
    
    And make sure all code that defines init_irq_proc() is including
    linux/interrupt.h.
    
    And nuke an ifdef-in-C
    
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a6e6df25ec6751f4f73784398ab7d43cf9d2019f
Author: Erez Zadok <ezk@cs.sunysb.edu>
Date:   Sun Feb 18 23:57:45 2007 -0500

    [PATCH] fs/stack.c: Copy i_nlink after all other attributes are copied
    
    A user-specified get_nlinks may depend on other inode attributes.
    
    Cc: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Erez Zadok <ezk@cs.sunysb.edu>
    Signed-off-by: Josef 'Jeff' Sipek <jsipek@cs.sunysb.edu>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bc5393a6c9c0e70b4b43fb2fb63e3315e9a15c8f
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Feb 19 18:12:05 2007 +0000

    [PATCH] NOHZ: Produce debug output instead of a BUG()
    
    The BUG_ON() in tick_nohz_stop_sched_tick() triggers on some boxen.
    Remove the BUG_ON and print information about the pending softirq
    to allow better debugging of the problem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6ba9b346e1e0eca65ec589d32de3a9fe32dc5de6
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Feb 19 18:11:56 2007 +0000

    [PATCH] NOHZ: Fix RCU handling
    
    When a CPU is needed for RCU the tick has to continue even when it was
    stopped before.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2aa6eb313e57a8254b17e60b8bb5e0a2570d7776
Merge: cb553c4... 420cff5...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 14:16:51 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog
    
    * master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog:
      [WATCHDOG] machzwd warning fix

commit cb553c480078759014096bc766dc76400e1d8397
Merge: 42eaf0d... 040cf8c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:38:42 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Update defconfigs
      [MIPS] Support for several more SNI RM models.
      [MIPS] Include <asm/bugs> to for declaration of check_bugs32.
      [MIPS] Add external declaration of pagetable_init() to pgalloc.h
      [MIPS] Make kernel_thread_helper() static
      [MIPS] Make __declare_dbe_table static and avoid it getting optimized away
      [MIPS] Use MIPS R2 instructions for bitops.
      [MIPS] signals: Share even more code.
      [MIPS] Fix CONFIG_MIPS32_N32=y CONFIG_MIPS32_O32=n build
      [MIPS] Iomap implementation.
      [MIPS] <asm/compat-signal.h> needs to include <asm/uaccess.h>.
      [MIPS] IP27: Fix warning.
      [MIPS] Fix sigset_t endianess swapping issues in 32-bit compat code.

commit 42eaf0d8f2e7b8201afc00b0ebe1bd89ea51d42d
Merge: 4935361... 2219cd8...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:36:16 2007 -0800

    Merge branch 'hwmon-for-linus' of git://jdelvare.pck.nerim.net/jdelvare-2.6
    
    * 'hwmon-for-linus' of git://jdelvare.pck.nerim.net/jdelvare-2.6:
      hwmon/vt1211: Add probing of alternate config index port
      hwmon/f71805f: Fix a race condition
      hwmon/abituguru: Fix unchecked return status
      hwmon: New driver for the Analog Devices ADM1029
      hwmon/w83627ehf: Add support for the W83627DHG chip
      hwmon: Use subsys_initcall
      hwmon/lm70: Make lm70_remove a __devexit function
      hwmon: Cleanup a bogus legacy comment
      hwmon: Simplify the locking model of two drivers
      hwmon: Drop unused mutexes in two drivers
      hwmon/it87: Add PWM base frequency control

commit 4935361766cc73949fe032cd157d314f288922ba
Merge: 2874b39... 4f65992...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:34:11 2007 -0800

    Merge git://git.infradead.org/mtd-2.6
    
    * git://git.infradead.org/mtd-2.6: (49 commits)
      [MTD] [NAND] S3C2412 fix hw ecc
      [MTD] [NAND] Work around false compiler warning in CAF driver
      [JFFS2] printk warning fixes
      [MTD] [MAPS] ichxrom warning fix
      [MTD] [MAPS] amd76xrom warning fix
      [MTD] [MAPS] esb2rom warning fixes
      [MTD] [MAPS] ck804xrom warning fix
      [MTD] [MAPS] netsc520 warning fix
      [MTD] [MAPS] sc520cdp warning fix
      [MTD] [ONENAND] onenand_base warning fix
      [MTD] [NAND] eXcite nand flash driver
      [MTD] Improve heuristic for detecting wrong-endian RedBoot partition table
      [MTD] Fix RedBoot partition parsing regression harder.
      [MTD] [NAND] S3C2410: Hardware ECC correction code
      [JFFS2] Use MTD_OOB_AUTO to automatically place cleanmarker on NAND
      [MTD] Clarify OOB-operation interface comments
      [MTD] remove unused ecctype,eccsize fields from struct mtd_info
      [MTD] [NOR] Intel: remove ugly PROGREGION macros
      [MTD] [NOR] STAA: use writesize instead off eccsize to represent ECC block
      [MTD] OneNAND: Invalidate bufferRAM after erase
      ...

commit 2874b391bd78a5b8cb84be67297a345fbdec4ac8
Merge: 5fc7724... e03abc0...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:33:01 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ericvh/v9fs
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ericvh/v9fs:
      9p: implement optional loose read cache
      9p: Use kthread_stop instead of sending a SIGKILL.

commit 5fc77247f7db01b6377a5ea6ab18c8ac60021045
Merge: d43a338... 7c9d6f1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:32:28 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6:
      [SCSI] SCSI core: better initialization for sdev->scsi_level
      [SCSI] scsi_proc.c: display sdev->scsi_level correctly
      [SCSI] megaraid_sas: update version and author info
      [SCSI] megaraid_sas: return sync cache call with success
      [SCSI] megaraid_sas: replace pci_alloc_consitent with dma_alloc_coherent in ioctl path
      [SCSI] megaraid_sas: add bios_param in scsi_host_template
      [SCSI] megaraid_sas: do not process cmds if hw_crit_error is set
      [SCSI] scsi_transport.h should include scsi_device.h
      [SCSI] aic79xx: remove extra newline from info message
      [SCSI] scsi_scan.c: handle bad inquiry responses
      [SCSI] aic94xx: tie driver to the major number of the sequencer firmware
      [SCSI] lpfc: add PCI error recovery support
      [SCSI] megaraid: pci_module_init to pci_register_driver
      [SCSI] tgt: fix the user/kernel ring buffer interface
      [SCSI] sgiwd93: interfacing to wd33c93
      [SCSI] wd33c93: Fast SCSI with WD33C93B

commit d43a338e395371733a80ec473b40baac5f74d768
Merge: cb4aaf4... 62b529a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:31:34 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/dtor/input
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/dtor/input:
      Input: remove obsolete setup parameters from input drivers
      Input: HIL - fix improper call to release_region()
      Input: hid-lgff - treat devices as joysticks unless told otherwise
      Input: HID - add support for Logitech Formula Force EX
      Input: gpio-keys - switch to common GPIO API
      Input: do not lock device when showing name, phys and uniq
      Input: i8042 - let serio bus suspend ports
      Input: psmouse - properly reset mouse on shutdown/suspend

commit cb4aaf46c0283dd79ab2e8b8b165c0bf13ab6194
Merge: 874ff01... db34950...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:29:54 2007 -0800

    Merge branch 'audit.b37' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current
    
    * 'audit.b37' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current:
      [PATCH] AUDIT_FD_PAIR
      [PATCH] audit config lockdown
      [PATCH] minor update to rule add/delete messages (ver 2)

commit 874ff01bd9183ad16495acfd54e93a619d12b8b5
Merge: ebbe46f... 86aae08...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:29:02 2007 -0800

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/bunk/trivial
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/bunk/trivial: (25 commits)
      Documentation/kernel-docs.txt update.
      arch/cris: typo in KERN_INFO
      Storage class should be before const qualifier
      kernel/printk.c: comment fix
      update I/O sched Kconfig help texts - CFQ is now default, not AS.
      Remove duplicate listing of Cris arch from README
      kbuild: more doc. cleanups
      doc: make doc. for maxcpus= more visible
      drivers/net/eexpress.c: remove duplicate comment
      add a help text for BLK_DEV_GENERIC
      correct a dead URL in the IP_MULTICAST help text
      fix the BAYCOM_SER_HDX help text
      fix SCSI_SCAN_ASYNC help text
      trivial documentation patch for platform.txt
      Fix typos concerning hierarchy
      Fix comment typo "spin_lock_irqrestore".
      Fix misspellings of "agressive".
      drivers/scsi/a100u2w.c: trivial typo patch
      Correct trivial typo in log2.h.
      Remove useless FIND_FIRST_BIT() macro from cardbus.c.
      ...

commit ebbe46f73a11a667df59cb8e58b371c0a35f29d0
Merge: 901ea4a... 419ee44...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:25:36 2007 -0800

    Merge branch 'kill-jffs' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/misc-2.6
    
    * 'kill-jffs' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/misc-2.6:
      Remove JFFS (version 1), as scheduled.

commit 901ea4a07988043ff8c6f4f275ab680a23b8bbcd
Merge: 2370965... 9de1cc9...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:23:50 2007 -0800

    Merge branch 'acpi' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'acpi' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [PATCH] libata: wrong sizeof for BUFFER
      [PATCH] libata: change order of _SDD/_GTF execution (resend #3)
      [PATCH] libata: ACPI _SDD support
      [PATCH] libata: ACPI and _GTF support

commit 2370965c5065b24b28b5ba09b60ddfbfb6d7649b
Merge: 59b8175... 0b3581e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:23:26 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (51 commits)
      sk98lin: mark deprecated in Kconfig
      Hostess SV-11 depends on INET
      Fix link autonegotiation timer.
      sk98lin: planned removal
      B44: increase wait loop
      b44: replace define
      e1000: allow ethtool to see link status when down
      e1000: remove obsolete custom pci_save_state code
      e1000: fix shared interrupt warning message
      atm: Use ARRAY_SIZE macro when appropriate
      bugfixes and new hardware support for arcnet driver
      pcnet32 NAPI no longer experimental
      MAINTAINER
      macb: Remove inappropriate spinlocks around mii calls
      Convert meth to netdev_priv
      sky2: v1.13
      sky2: receive error handling improvements
      sky2: transmit timeout
      sky2: flow control negotiation for Yukon-FE
      sky2: no need to reset pause bits on shutdown
      ...

commit 59b8175c771040afcd4ad67022b0cc80c216b866
Merge: 920841d... 3b0eb4a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:18:39 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'for-linus' of master.kernel.org:/home/rmk/linux-2.6-arm: (117 commits)
      [ARM] 4058/2: iop32x: set ->broken_parity_status on n2100 onboard r8169 ports
      [ARM] 4140/1: AACI stability add ac97 timeout and retries
      [ARM] 4139/1: AACI record support
      [ARM] 4138/1: AACI: multiple channel support for IRQ handling
      [ARM] 4211/1: Provide a defconfig for ns9xxx
      [ARM] 4210/1: base for new machine type "NetSilicon NS9360"
      [ARM] 4222/1: S3C2443: Remove reference to missing S3C2443_PM
      [ARM] 4221/1: S3C2443: DMA support
      [ARM] 4220/1: S3C24XX: DMA system initialised from sysdev
      [ARM] 4219/1: S3C2443: DMA source definitions
      [ARM] 4218/1: S3C2412: fix CONFIG_CPU_S3C2412_ONLY wrt to S3C2443
      [ARM] 4217/1: S3C24XX: remove the dma channel show at startup
      [ARM] 4090/2: avoid clash between PXA and SA1111 defines
      [ARM] 4216/1: add .gitignore entries for ARM specific files
      [ARM] 4214/2: S3C2410: Add Armzone QT2410
      [ARM] 4215/1: s3c2410 usb device:  per-platform vbus_draw
      [ARM] 4213/1: S3C2410 - Update definition of ADCTSC_XY_PST
      [ARM] 4098/1: ARM: rtc_lock only used with rtc_cmos
      [ARM] 4137/1: Add kexec support
      [ARM] 4201/1: SMP barriers pair needed for the secondary boot process
      ...
    
    Fix up conflict due to typedef removal in sound/arm/aaci.h

commit 920841d8d1d61bc12b43f95a579a5374f6d98f81
Merge: 5c56f46... a65421e...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:07:19 2007 -0800

    Merge branch 'for-linus' of ssh://master.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6
    
    * 'for-linus' of ssh://master.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6:
      ieee1394: fix another deadlock in nodemgr
      ieee1394: cycle timer read extension for raw1394

commit 5c56f466835d20fc4f7119063a8c029f7170a317
Merge: dd397a6... c294461...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:05:14 2007 -0800

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc: (34 commits)
      [POWERPC] 86xx: Cleaned up platform dts files
      [POWERPC] 85xx: Renamed MPC8568 MDS board code to match other boards
      [POWERPC] 85xx: Cleaning up machine probing
      [POWERPC] QE: clean up ucc_slow.c and ucc_fast.c
      [POWERPC] 85xx: Cleaned up platform dts files
      [POWERPC] 83xx: Renamed MPC8323 MDS dts and defconfig to match other boards
      [POWERPC] 83xx: Updated and renamed MPC8360PB to MPC836x MDS
      [POWERPC] 83xx: Use of_platform_bus_probe to setup QE devices
      [POWERPC] 83xx: use default value of loops_per_jiffy
      [POWERPC] 83xx: Remove obsolete setting of ROOT_DEV.
      [POWERPC] 83xx: Cleaning up machine probing and board initcalls
      [POWERPC] Dispose irq mapping when done in mpc52xx_serial.c
      [POWERPC] 86xx: Add missing of_node_put() in mpc86xx_hpcn_init_irq().
      [POWERPC] 8[56]xx: Remove obsolete setting of ROOT_DEV for 85xx and 86xx platforms.
      [POWERPC] pseries: Enabling auto poweron after power is restored.
      [POWERPC] use winbond libata instead of ide driver for pseries CD drives
      [POWERPC] powerpc: remove references to the obsolete linux,platform property
      [POWERPC] add of_get_mac_address and update fsl_soc.c to use it
      [POWERPC] 83xx: Cleaned up 83xx platform dts files
      [POWERPC] Fix bug with early ioremap and 64k pages
      ...

commit dd397a6d1ae125686d97a20f983778c331093206
Merge: 976fd0e... ccf3528...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:01:30 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6: (30 commits)
      ide: make ide_hwif_t.ide_dma_host_on void (v2)
      ide: make ide_hwif_t.ide_dma_{host_off,off_quietly} void (v2)
      ide: add ide_set_dma() helper (v2)
      sgiioc4: fix sgiioc4_ide_dma_check() to enable/disable DMA properly
      ide: disable DMA in ->ide_dma_check for "no IORDY" case (v2)
      ide: convert ide_hwif_t.mmio into flag (v2)
      ide: use PIO/MMIO operations directly where possible (v2)
      ide: add ide_use_fast_pio() helper (v3)
      ide: unexport ide_set_xfer_rate() (v2)
      ide: remove ide_drive_t.usage
      ide: remove ide_pci_device_t tables with only one entry
      ide: remove write-only ide_hwif_t.no_dsc flag
      ide: remove write-only ide_pio_data_t.blacklisted
      sis5513: sis5513_config_xfer_rate() cleanup
      piix: cleanup
      svwks: small cleanup
      cs5530: small cleanup
      hpt366: remove redundant check from init_dma_hpt366()
      trm290: remove redundant CONFIG_BLK_DEV_IDEDMA #ifdef-s
      au1xxx-ide: remove dead code
      ...

commit 976fd0e29cb1647bf59f939f81a22eba55c2bf0c
Merge: 733abe4... 7084f84...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 13:00:26 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/core: Set static rate in ib_init_ah_from_path()
      IB/ipath: Make ipath_map_sg() static
      IB/core: Fix sparse warnings about shadowed declarations
      RDMA/cma: Add multicast communication support
      IB/sa: Track multicast join/leave requests
      IPoIB: CM error handling thinko fix
      RDMA/cxgb3: Remove Open Grid Computing copyrights in iw_cxgb3 driver
      RDMA/cxgb3: Fail posts synchronously when in TERMINATE state
      RDMA/iwcm: iw_cm_id destruction race fixes
      IB/ehca: Change query_port() to return LINK_UP instead UNKNOWN
      IB/ehca: Allow en/disabling scaling code via module parameter
      IB/ehca: Fix race condition/locking issues in scaling code
      IB/ehca: Rework irq handler
      IPoIB: Only allow root to change between datagram and connected mode
      IB/mthca: Fix allocation of ICM chunks in coherent memory
      IB/mthca: Allow the QP state transition RESET->RESET

commit 733abe4fff3afa13e301bc8bc5bee9aac4b59fdc
Merge: 5fe8252... 81bb0e1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 12:59:55 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6:
      PCI: Make PCI device numa-node attribute visible in sysfs
      PCI: add systems for automatic breadth-first device sorting
      PCI: PCI devices get assigned redundant IRQs
      PCI: Make CARDBUS_MEM_SIZE and CARDBUS_IO_SIZE boot options
      PCI: pci.txt fix __devexit() usage
      PCI/sysfs/kobject kernel-doc fixes

commit 5fe8252fc3a21666cf19053fbd7ec7bd9664f5d9
Merge: 460223d... ef665c1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 12:59:26 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6:
      sysfs: fix build errors: uevent with CONFIG_SYSFS=n
      pcmcia: some class_device fallout
      Driver core: device_add_attrs() cleanup
      debugfs: Remove misleading comments.
      debugfs: implement symbolic links
      Driver: remove redundant kobject_unregister checks
      kobject: kobj->k_name verification fix
      serial: Add PCMCIA IDs for Quatech DSP-100 dual RS232 adapter.
      Driver core: let request_module() send a /sys/modules/kmod/-uevent
      Driver.h copyright update

commit 460223d21d960e420775ca4d11ddaa8389af4d25
Merge: 255f038... ed077bb...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 19 12:59:04 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6: (39 commits)
      USB: at91-ohci, handle extra at91sam9261 ahb clock
      USB: another id for cp2101 driver
      USB: ueagle-atm.c needs sched.h
      USB: at91_udc, shrink runtime footprint
      usbnet: add missing Kconfig for KC2190 cables
      usbnet: init fault (oops) cleanup, whitespace fixes
      usbnet: recognize SiteCom CN-124
      usb: Remove Airprime device from option.c
      USB: change __init to __devinit for isp116x_probe
      USB: ps3: don't call ps3_system_bus_driver_register on other platforms
      USB: hid-core.c: Removes GTCO CalComp Interwrite IPanel PIDs from blacklist
      USB: kernel-doc fixes
      USB: quirky device for cdc-acm
      USB: cdc-acm: fix incorrect throtteling, make set_control optional
      USB: unconfigure devices which have config 0
      USB: make usb_iso_packet_descriptor.status signed
      USB: fix g_serial small error
      USB: use __u32 rather than u32 in userspace ioctls in usbdevice_fs.h
      USB Storage: US_FL_IGNORE_RESIDUE needed for Aiptek MP3 Player
      USB: Fix misspelled "USBNET_MII" kernel config option.
      ...

commit 040cf8cfe5f0674ddf256f98366137a7b90d421f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Feb 18 00:50:57 2007 +0000

    [MIPS] Update defconfigs
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c066a32a890c50ce59e91f8cea8eb5fd8d5821b9
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Thu Dec 28 18:22:32 2006 +0100

    [MIPS] Support for several more SNI RM models.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5759906ca9e5201c3fd40d61c861ec1e441d3a24
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Feb 18 19:07:31 2007 +0000

    [MIPS] Include <asm/bugs> to for declaration of check_bugs32.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6a1e552947b0d73310e534bf4eb09e14db1e5056
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Feb 19 01:27:34 2007 +0900

    [MIPS] Add external declaration of pagetable_init() to pgalloc.h
    
    This fixes some sparse warnings.
    
    pgtable-32.c:15:6: warning: symbol 'pgd_init' was not declared. Should it be static?
    pgtable-32.c:32:13: warning: symbol 'pagetable_init' was not declared. Should it be static?
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit db0b937daf9bee741aa8fd488ea657872b9579fe
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Feb 19 00:54:27 2007 +0900

    [MIPS] Make kernel_thread_helper() static
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b6dcec9ba4cdfeec937c045d275a5c330a1dbe16
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Feb 18 15:57:09 2007 +0000

    [MIPS] Make __declare_dbe_table static and avoid it getting optimized away
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 102fa15c3f14565f2edb9f08f08ea3f2bf123dc9
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 16 17:18:50 2007 +0000

    [MIPS] Use MIPS R2 instructions for bitops.
    
    Add R2 optimized variants of clear_bit, set_bit and test_and_clear_bit.
    With gcc 4.1.1 this saves 1592 bytes on a defconfig (minus IPv6) kernel.
    Turns out that R2 bitop instructions are no gain for the other bitop
    functions.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 151fd6acd94e12ef3a7d5fa0911a2590690c493f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Feb 15 11:40:37 2007 +0000

    [MIPS] signals: Share even more code.
    
    native and compat do_signal and handle_signal are identical and can easily
    be unified.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 38201fb23cd554f942702cd938c3215a76296c87
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Feb 15 01:53:00 2007 +0000

    [MIPS] Fix CONFIG_MIPS32_N32=y CONFIG_MIPS32_O32=n build
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 140c1729a221dc6eacfcbf2a073dbf00fad13e43
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Dec 7 15:35:43 2006 +0100

    [MIPS] Iomap implementation.
    
    This implementation has support for the concept of one separate ioport
    address space by PCI domain.  A pointer to the virtual address where
    the port space of a domain has been mapped has been added to struct
    pci_controller and systems should be fixed to fill in this value. For
    single domain systems this will be the same value as passed to
    set_io_port_base().
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4c1569949a756327aa0ad7aa15a62266b6a00c3e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 14 10:40:05 2007 +0000

    [MIPS] <asm/compat-signal.h> needs to include <asm/uaccess.h>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f8aeb85f158fa98f8c2c9a24effb00adc06c0e85
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 14 10:18:59 2007 +0000

    [MIPS] IP27: Fix warning.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 755f21bb894d3fe57017f5aa8f7ace8808fcb1e3
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Wed Feb 14 14:41:01 2007 +0900

    [MIPS] Fix sigset_t endianess swapping issues in 32-bit compat code.
    
    access_ok in compat-signal.h is wrong (checking destination instead of
    source) and redundant (already checked before calling this function).
    
    Also sf_mask in struct sigframe32 should be compat_sigset_t type.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 04532c4f55ef4b577c59744f789d5b1add435503
Author: Kyle McMartin <kyle@hera.kernel.org>
Date:   Sun Feb 18 19:35:45 2007 +0000

    Revert "[PARISC] Optimize TLB flush on SMP systems"
    
    This reverts commit 592ac93a607109e0643da6c23ae07ac749e973b1
    which causes SMP machines with maxcpus > 1 to fail to boot...

commit 4f65992381112acd7d2732665a9eae492c2c9de6
Author: Matthieu CASTET <matthieu.castet@parrot.fr>
Date:   Tue Feb 13 12:30:38 2007 +0100

    [MTD] [NAND] S3C2412 fix hw ecc
    
    S3C2412 use differents registers than s3c2440 for hw ecc handling.
    
    Signed-off-by: Matthieu CASTET <matthieu.castet@parrot.fr>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2a7295b277539728a748fba00db388f3dc49c0d0
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:11 2007 -0800

    [MTD] [NAND] Work around false compiler warning in CAF driver
    
    drivers/mtd/nand/cafe.c: In function 'cafe_nand_cmdfunc':
    drivers/mtd/nand/cafe.c:269: warning: 'irqs' may be used uninitialized in this function
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7be26bfb2ef3b3a768232d11d9aad9222b053d0a
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:10 2007 -0800

    [JFFS2] printk warning fixes
    
    fs/jffs2/wbuf.c: In function 'jffs2_check_oob_empty':
    fs/jffs2/wbuf.c:993: warning: format '%d' expects type 'int', but argument 3 has type 'size_t'
    fs/jffs2/wbuf.c:993: warning: format '%d' expects type 'int', but argument 4 has type 'size_t'
    fs/jffs2/wbuf.c: In function 'jffs2_check_nand_cleanmarker':
    fs/jffs2/wbuf.c:1036: warning: format '%d' expects type 'int', but argument 3 has type 'size_t'
    fs/jffs2/wbuf.c:1036: warning: format '%d' expects type 'int', but argument 4 has type 'size_t'
    fs/jffs2/wbuf.c: In function 'jffs2_write_nand_cleanmarker':
    fs/jffs2/wbuf.c:1062: warning: format '%d' expects type 'int', but argument 3 has type 'size_t'
    fs/jffs2/wbuf.c:1062: warning: format '%d' expects type 'int', but argument 4 has type 'size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3a38d3af92c423687fa3c916ad3e1288980024e3
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:09 2007 -0800

    [MTD] [MAPS] ichxrom warning fix
    
    drivers/mtd/maps/ichxrom.c: In function 'ichxrom_init_one':
    drivers/mtd/maps/ichxrom.c:231: warning: format '%08lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    drivers/mtd/maps/ichxrom.c:231: warning: format '%08lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1a6284cb6f44b2484505ee7567831316a90bc09f
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:09 2007 -0800

    [MTD] [MAPS] amd76xrom warning fix
    
    drivers/mtd/maps/amd76xrom.c: In function 'amd76xrom_init_one':
    drivers/mtd/maps/amd76xrom.c:209: warning: format '%08lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5ad0fdc6ddd4836ddbd912a4cfc6af3963fdaa59
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:08 2007 -0800

    [MTD] [MAPS] esb2rom warning fixes
    
    drivers/mtd/maps/esb2rom.c: In function 'esb2rom_init_one':
    drivers/mtd/maps/esb2rom.c:293: warning: format '%08lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 65af07141b8249c98888a470e01c449131b72ffe
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:07 2007 -0800

    [MTD] [MAPS] ck804xrom warning fix
    
    drivers/mtd/maps/ck804xrom.c: In function 'ck804xrom_init_one':
    drivers/mtd/maps/ck804xrom.c:211: warning: format '%08lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    drivers/mtd/maps/ck804xrom.c:211: warning: format '%08lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3ce32f5d12735b11c002057378879b3366f09825
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:07 2007 -0800

    [MTD] [MAPS] netsc520 warning fix
    
    drivers/mtd/maps/netsc520.c: In function 'init_netsc520':
    drivers/mtd/maps/netsc520.c:97: warning: format '%lx' expects type 'long unsigned int', but argument 3 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e389612deceea0816a8027fb2fcf68d5856c8d3a
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:06 2007 -0800

    [MTD] [MAPS] sc520cdp warning fix
    
    drivers/mtd/maps/sc520cdp.c:241: warning: format '%lx' expects type 'long unsigned int', but argument 3 has type 'resource_size_t'
    drivers/mtd/maps/netsc520.c: In function 'init_netsc520':
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5785bdd6fca4e117c9891c377347ff1a987abb1b
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 16:02:05 2007 -0800

    [MTD] [ONENAND] onenand_base warning fix
    
    drivers/mtd/onenand/onenand_base.c: In function 'onenand_bbt_read_oob':
    drivers/mtd/onenand/onenand_base.c:1033: warning: format '%i' expects type 'int', but argument 3 has type 'size_t'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e03abc0c963a31cb07dfbc07c7d85d75e0d13cf4
Author: Eric Van Hensbergen <ericvh@gmail.com>
Date:   Sun Feb 11 13:21:39 2007 -0600

    9p: implement optional loose read cache
    
    While cacheing is generally frowned upon in the 9p world, it has its
    place -- particularly in situations where the remote file system is
    exclusive and/or read-only.  The vacfs views of venti content addressable
    store are a real-world instance of such a situation.  To facilitate higher
    performance for these workloads (and eventually use the fscache patches),
    we have enabled a "loose" cache mode which does not attempt to maintain
    any form of consistency on the page-cache or dcache.  This results in over
    two orders of magnitude performance improvement for cacheable block reads
    in the Bonnie benchmark.  The more aggressive use of the dcache also seems
    to improve metadata operational performance.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>

commit 2c0463a9ae8751547c39302aeb31c6cef16b5df4
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Dec 12 15:26:07 2006 -0700

    9p: Use kthread_stop instead of sending a SIGKILL.
    
    Since the kthread api does not bump the reference count on
    processes that tracked it is not safe allow user space to
    kill the threads, as I still retain a pointer to the task_struct.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Eric Van Hensbergen <ericvh@gmail.com>

commit c2944612cf30aece4526f23e96e1d234a1870ed6
Merge: 56d7b79... 6d9065d...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sun Feb 18 08:34:33 2007 -0600

    Merge branch '86xx' into for_paulus

commit 6d9065d8af2c86464b1f16e8aad80b3aa91756d2
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:09:56 2007 -0600

    [POWERPC] 86xx: Cleaned up platform dts files
    
    * Removed explicit linux,phandle usage. Use references and labels now
    * Removed interrupts property from openpic node
    * Removed interrupt-parent property from openpic node that pointed to itself
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
    Acked-by: Jon Loeliger <jdl@freescale.com>

commit 3b0eb4a195a124567cd0dd6f700f8388def542c6
Merge: 8213084... 588ef76...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Feb 18 11:31:14 2007 +0000

    Merge the easy part of the IOP branch

commit 8213084125eed3c5efbc5e13739b93dfedb88590
Merge: 66822b2... b77bfa8...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Feb 18 11:27:07 2007 +0000

    Merge NetSilicon NS93xx tree
    
    Fixed conflicts:
    
    	arch/arm/Makefile
    	arch/arm/mm/Kconfig
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66822b2eef8de9fe3ec9fa837386817565dbe690
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Feb 8 01:03:17 2007 +0100

    [ARM] 4058/2: iop32x: set ->broken_parity_status on n2100 onboard r8169 ports
    
    On the n2100, both onboard r8169 ports exhibit PCI parity problems.
    Set the ->broken_parity_status flag for both ports so that the r8169
    drivers knows it should ignore error interrupts.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 14d178a143568f3651a40af6defadd44fb0b6b81
Author: Kevin Hilman <khilman@mvista.com>
Date:   Wed Feb 7 05:46:47 2007 +0100

    [ARM] 4140/1: AACI stability add ac97 timeout and retries
    
    Add timeouts to hardware read/write/probe functions in order
    to avoid lockups on buggy/broken hardware.
    
    Signed-off-by: Kevin Hilman <khilman@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 41762b8ca9e16c7443d8348ec53daddbe940cdcc
Author: Kevin Hilman <khilman@mvista.com>
Date:   Wed Feb 7 05:45:32 2007 +0100

    [ARM] 4139/1: AACI record support
    
    Add PCM audio capture support for AACI audio on Versatile platform.
    
    Signed-off-by: Kevin Hilman <khilman@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 62578cbfaa50df06b3bb6e4231adc3b911a3d4b4
Author: Kevin Hilman <khilman@mvista.com>
Date:   Wed Feb 7 05:41:37 2007 +0100

    [ARM] 4138/1: AACI: multiple channel support for IRQ handling
    
    Add AACI channel support to interrupt handler.
    Also, clear underrun interrupt for correct channel.
    
    Signed-off-by: Kevin Hilman <khilman@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 62b529a7b9c11880a8820494a25db0e2ecdf3bed
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sun Feb 18 01:44:58 2007 -0500

    Input: remove obsolete setup parameters from input drivers
    
    They have been marked as __obsolete_setup() for several years,
    it is time for them to go.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 2a575f11fb8e13d6bbdefaa591e9406200674402
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Sun Feb 18 01:44:02 2007 -0500

    Input: HIL - fix improper call to release_region()
    
    Do not call release_region() if the code has been compiled
    without CONFIG_HP300 support.
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
    Acked-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 00a8691ca689c134eaf5b73d7251df1d6f0318be
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sun Feb 18 01:42:11 2007 -0500

    Input: hid-lgff - treat devices as joysticks unless told otherwise
    
    By default threat devices as joysticks with constant force-feedback
    effect.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 130b1ab3f3dba350a949ae44a39c9beebddc09b9
Author: Valentin Zagura <puthre@gmail.com>
Date:   Sun Feb 18 01:41:27 2007 -0500

    Input: HID - add support for Logitech Formula Force EX
    
    Signed-off-by: Johann Deneux <johann.deneux@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0d98f6bbd8d62c2c7a9924e0b3e5068cc28173b0
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Sun Feb 18 01:40:46 2007 -0500

    Input: gpio-keys - switch to common GPIO API
    
    This adds support for at least SA1100 and S3C24xx CPUs.
    
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 1efa770f8ef0bfe12cd004f2e1f75eefcd8699d3
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sun Feb 18 01:40:37 2007 -0500

    Input: do not lock device when showing name, phys and uniq
    
    Now that sysfs attributes return -ENODEV once driver requests their
    removal we do not need to handle scenario when data is deleted from
    under our feet and can simplify the code.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 82dd9eff4bf3b17f5f511ae931a1f350c36ca9eb
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sun Feb 18 01:40:30 2007 -0500

    Input: i8042 - let serio bus suspend ports
    
    Let serio subsystem take care of suspending the ports; concentrate
    on suspending/resuming the controller itself.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a1cec06177386ecc320af643de11cfa77e8945bd
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sun Feb 18 01:40:24 2007 -0500

    Input: psmouse - properly reset mouse on shutdown/suspend
    
    Some people report that they need psmouse module unloaded
    for suspend to ram/disk to work properly. Let's make port
    cleanup behave the same way as driver unload.
    
    This fixes "bad state" roblem on various HP laptops, such
    as nx7400.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit db3495099d3d52854b13874905af6e40a91f4721
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Feb 7 01:48:00 2007 -0500

    [PATCH] AUDIT_FD_PAIR
    
    Provide an audit record of the descriptor pair returned by pipe() and
    socketpair().  Rewritten from the original posted to linux-audit by
    John D. Ramsdell <ramsdell@mitre.org>
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 6a01b07fae482f9b34491b317056c89d3b96ca2e
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Fri Jan 19 14:39:55 2007 -0500

    [PATCH] audit config lockdown
    
    The following patch adds a new mode to the audit system. It uses the
    audit_enabled config option to introduce the idea of audit enabled, but
    configuration is immutable. Any attempt to change the configuration
    while in this mode is audited. To change the audit rules, you'd need to
    reboot the machine.
    
    To use this option, you'd need a modified version of auditctl and use "-e 2".
    This is intended to go at the end of the audit.rules file for people that
    want an immutable configuration.
    
    This patch also adds "res=" to a number of configuration commands that did not
    have it before.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit a17b4ad778e1857944f5a1df95fb7758cd5cc58d
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Thu Dec 14 11:48:47 2006 -0500

    [PATCH] minor update to rule add/delete messages (ver 2)
    
    I was looking at parsing some of these messages and found that I wanted what
    it was doing next to an op= for the parser to key on. Also missing was the list
    number and results.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit b312362be6d9155b66f3a26d9159e0a680fbd6c5
Merge: bdcac18... bb52a65...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Sat Feb 17 18:26:09 2007 -0500

    Merge branch 'upstream' into upstream-jgarzik
    
    Conflicts:
    
    	net/ieee80211/softmac/ieee80211softmac_module.c
    	net/ieee80211/softmac/ieee80211softmac_wx.c

commit 56d7b794026e00a3c4608bb10ed99dd1e5b9fc22
Merge: ffd8488... 23f510b...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:32:46 2007 -0600

    Merge branch '85xx' into for_paulus

commit ffd84881711a4cc98018cd540167c1ba2212bc0d
Merge: 834aba0... 5af68af...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:32:41 2007 -0600

    Merge branch '83xx' into for_paulus

commit 23f510bcd3a886a8a0b04ad0528006f5c309fcb8
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:29:36 2007 -0600

    [POWERPC] 85xx: Renamed MPC8568 MDS board code to match other boards
    
    Renamed the MPC8568 MDS platform code to follow other 85xx boards.  There
    isn't anything specific about the 8568 MDS code that wouldn't apply to another
    85xx MDS system at this point.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 6936c62571d8dc580725775b628ee73d2ac97b6f
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:19:34 2007 -0600

    [POWERPC] 85xx: Cleaning up machine probing
    
    Cleaned up the probing functionality to be more consistent across all 85xx
    boards and actually check to see if we should be running on a given board.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 5af68af5bcd34e3569fd82ef4676de5bc03e18c0
Author: Timur Tabi <timur@freescale.com>
Date:   Fri Feb 16 22:31:21 2007 -0600

    [POWERPC] QE: clean up ucc_slow.c and ucc_fast.c
    
    Refactored and cleaned up ucc_fast.c and ucc_slow.c so that the two files
    look more alike and are easier to read.  Removed uccf_printk() and related
    functions, because they were just front-ends to printk().  Fixed some
    spacing and tabbing issues.  Minor optimizations of some code.  Changed
    the type of some variables to their proper type (mostly buffer
    descriptors).
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit ff7298ea16bc15ffbba49c36724714e033a5fc10
Merge: 00e402d... fc7900b...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:07:01 2007 -0600

    Merge branch 'master' into 86xx

commit 520948796335111cf91970efabca7e5d064db344
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 16:04:23 2007 -0600

    [POWERPC] 85xx: Cleaned up platform dts files
    
    * Fixed up top level compatible property for all boards
    * Removed explicit linux,phandle usage. Use references and labels now
    * Fixed phy-phandles for TSEC3/4 in mpc8548cds.dts
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 0b3581e26d4807f36b2294366d6fbd506c30d68a
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sat Feb 10 03:48:17 2007 +0000

    sk98lin: mark deprecated in Kconfig
    
    sk98lin is scheduled for removal in July 2007. This patch makes the
    deprecation more obvious in the configuration interface. FWIW, Gentoo have
    been shipping a patch very similar to this for a long time.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 420cff550fb1338bc946f1ccc8bb66f2d96ad1cb
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Sat Feb 17 03:13:07 2007 -0800

    [WATCHDOG] machzwd warning fix
    From: Andrew Morton <akpm@linux-foundation.org>
    
    drivers/char/watchdog/machzwd.c: In function 'zf_ioctl':
    drivers/char/watchdog/machzwd.c:327: warning: passing argument 1 of 'zf_ping' makes integer from pointer without a cast
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 419ee448ff76aef13526a99c2dc39ba3ae1f0970
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Feb 17 16:10:59 2007 -0500

    Remove JFFS (version 1), as scheduled.
    
    Unmaintained for years, few if any users.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bdcac1878c80b068d8e073c1691d4bd09ba9996d
Author: Baruch Even <baruch@ev-en.org>
Date:   Sat Feb 17 16:37:52 2007 +0200

    Hostess SV-11 depends on INET
    
    Comtrol Hostess SV-11 driver uses features from INET but doesn't depend on it.
    The simple solution is to make it depend on INET as happens for the sealevel
    driver.
    
    Fixes bug #7930.
    
    Signed-off-by: Baruch Even <baruch@ev-en.org>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f0ba73583aa7617d77346b3ee418f2f58a9a2204
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Feb 17 02:51:15 2007 +0000

    Fix link autonegotiation timer.
    
    Start link negotiation in the open method.  Previously it was started
    on driver initialialization and shutdown on close so an ifdown would
    have results in closing negotiation for good.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8765c125e05167b5b7669961b44f50902d4bb36d
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 16 15:07:53 2007 -0800

    sk98lin: planned removal
    
    Nag message about planned sk98lin removal.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 40ee8c768cbb57aac7e55f7b54572afa8a9eac5a
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Fri Feb 16 13:27:27 2007 -0800

    B44: increase wait loop
    
    The b44 Enet control disable bit may take longer to clear on some
    systems, so the loop count is increased with this patch. Functionality
    is not compromised, but a debug message can be seen when the bit is not
    cleared within the count value.
    Thanks to Vasileios Lourdas who reported the problem.
    
    Signed-off by: Gary Zambrano <zambrano@broadcom.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 97db9ee7ee86aba1117ea6605413e0972b506fbc
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Fri Feb 16 13:27:23 2007 -0800

    b44: replace define
    
    Replaced B44_DMA_MASK with DMA_30BIT_MASK.
    
    Signed-off by: Gary Zambrano <zambrano@broadcom.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ca6efb7d6c9336acda2e7b76a39b59bbfe77ec13
Author: Kok, Auke <auke-jan.h.kok@intel.com>
Date:   Fri Feb 16 14:39:30 2007 -0800

    e1000: allow ethtool to see link status when down
    
    By reading the MAC status register we can detect whether the MAC has
    seen the PHY see link. This allows us to show the link properties before
    the device is up in ethtool.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1d33e9c606bcf3d00bf67477e34253e861bb71c3
Author: Kok, Auke <auke-jan.h.kok@intel.com>
Date:   Fri Feb 16 14:39:28 2007 -0800

    e1000: remove obsolete custom pci_save_state code
    
    Now that 2.6.19 provides a proper implementation that saves MSI, PCI-E
    config space, we can have the e1000 driver use those instead of it's
    custom implementation.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2ed16356ff4fb9de23fbc5e5d582ce580390106
Author: Kok, Auke <auke-jan.h.kok@intel.com>
Date:   Fri Feb 16 14:39:26 2007 -0800

    e1000: fix shared interrupt warning message
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 36fe55d6a3c7096a7dc852010865c63d572aeaf4
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Fri Feb 16 01:42:23 2007 -0800

    atm: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h for ATM
    drivers.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: chas williams <chas@cmf.nrl.navy.mil>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 52edc17f94f7bd4d9a66bb13d9142f4072c7a82d
Author: Jeff Morrow <jmorrow@jmorrow.org>
Date:   Fri Feb 16 01:42:27 2007 -0800

    bugfixes and new hardware support for arcnet driver
    
    The modifications and bug fixes noted below were done by Realtime Control
    Works and Contemporary Control Systems, Inc, Jan 2005.  They were
    incorporated into the 2.6 kernel by Jeff Morrow of Sierra Analytics, Feb
    2007.  <jmorrow@massspec.com>
    
    The changes have been tested on a Contemporary Controls PCI20U-4000.
    
    Summary of changes:
    
    Arc-rawmode.c:
          rx():
          - Fixed error in received packet lengths; 256 byte packets were
            being received as 257 bytes packets.
    
          prepare_tx():
          - Fixed error in transmit length calcs; 257 byte packets were being
            transmitted as 260 byte packets.
    
    com20020.c:
          com20020_check():
          - We now load the SETUP2 register if the 'clockm' parameter is
            non-zero, instead of checking for ARC_CAN_10MBIT. The user is
            now responsible for whether or not SETUP2 is loaded.  If the
            clock multiplier is non-zero, this means that the user wants a
            baud rate greater than 2.5Mbps. This is not possible unless the
            SETUP2 register is present (COM20020D, or COM20022). So, we're
            relying on the user to be smart about what kind of chip he's
            dealing with...
    
    com20020-pci.c
          - Added several entries to com20020pci_id_table[].
    
    Signed-off-by: Jeff Morrow <jmorrow@massspec.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 659dd8351a0acbf6b057ebddd4388a97cdf0feb2
Author: Don Fry <pcnet32@verizon.net>
Date:   Fri Feb 16 10:09:57 2007 -0600

    pcnet32 NAPI no longer experimental
    
    Remove the experimental tag for the pcnet32 NAPI implementation.
    
    Signed-off-by:  Don Fry <pcnet32@verizon.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 04ce09481b90dd0645fe034c74a3344d712e347f
Author: Don Fry <pcnet32@verizon.net>
Date:   Fri Feb 16 10:07:12 2007 -0600

    MAINTAINER
    
    After being the defacto maintainer for a couple of years, I can now become the official maintainer.
    
    Signed-off-by:  Don Fry <pcnet32@verizon.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 140e807dd7d6aa68e601f50a10abd5351e06126f
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 16 15:59:06 2007 +0100

    macb: Remove inappropriate spinlocks around mii calls
    
    Remove spin_lock_irqsave() around mii_ethtool_gset, mii_ethtool_sset
    and generic_mii_ioctl. These are unnecessary and harmful because
    the mii calls may call back into the mdio functions, which may sleep.
    
    Pointed out by David Brownell.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit daeafdc360f91d286490105e67b13f094381e23f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 16 12:52:17 2007 +0000

    Convert meth to netdev_priv
    
    And while at it loose plenty of useless casts.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 62ba7e6cfdf6a6e20c77bacdfa15e07859fced45
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 15 16:40:35 2007 -0800

    sky2: v1.13
    
    New version.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a79abdc6eeca745b2af04fc03f9a04da0d294094
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 15 16:40:34 2007 -0800

    sky2: receive error handling improvements
    
    Don't drop oversize frame it might be a VLAN (untagged).
    Use different counter for fifo overrun vs fifo error.
    Print error on fifo overrrun.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 819067916d785cac0369b8d6e187b4a83fd17785
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 15 16:40:33 2007 -0800

    sky2: transmit timeout
    
    The transmit timeout code could hang, and it would not clear out
    problems if the hardware was stuck.  Change the code to effectively do
    a device down/up similar to the suspend/resume code.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit da4c1ff475d82585e3206f0270cb1ba55bcf3c74
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 15 16:40:32 2007 -0800

    sky2: flow control negotiation for Yukon-FE
    
    The Yukon-FE chip doesn't do gigabit and has a differen PHY internally.
    On this chip, phy status register doesn't properly reflect the result
    of flow control negotiation. To workaround the problem and avoid having
    to have so much chip dependent code; compute the result of flow control
    by looking at the local and remote advertised bits.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7a7b5181517752005fd0dc822176a6975218ec0f
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 15 16:40:31 2007 -0800

    sky2: no need to reset pause bits on shutdown
    
    Resetting the pause bits on shutdown is not necessary.
    The code was inherited from the vendor driver, and it is currently #ifdef'd
    out there as well.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7e7c0982218a70d9bab06efcae66d02f172260e7
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Feb 15 16:40:30 2007 -0800

    sky2: dont flush good pause frames
    
    Don't mark pause frames as errors. This problem caused transmitter not
    to pause and would effectively take out a gigabit switch because the
    it can't handle overrun.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0f4e7b45b99f3bf437bc73997fb861cd039ffeb6
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Thu Feb 15 13:53:09 2007 -0600

    cxgb3 Fix copyrights in the cxgb3 driver.
    
    Fix copyrights in the cxgb3 driver.
    
    Remove the Open Grid Computing copyright.  It shouldn't be there.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 538cc7ee7dddaedf9442f32ec4cc617a070ef341
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Thu Feb 15 17:56:01 2007 +0400

    gianfar: don't duplicate gfar_error()
    
    It was hardly necessary to repeat most of the code from gfar_error() in
    gfar_interrupt(), especially having some inconsistencies between the two.
    So, make the gfar_interrupt() just call gfar_error(), and not acknowledge
    the interrupts itself as gfar_{receive/transmit/error}() do it anyway.
    While at it, also clarify/cleanup debug messages in gfar_error()...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 825811749b00f670b53e35ed342d5dc10d71c9de
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Mon Feb 12 04:33:38 2007 -0800

    NetXen: Fix to get the driver working after sparse changes
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 11cc3bb522ddb3962fb7134ffc5e27c487746193
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Wed Feb 14 01:40:21 2007 +0100

    net/wan/pc300too.c: pci_module_init to pci_register_driver
    
    Convert pci_module_init() to pci_register_driver().
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9cc6d14e90c36eccf371d3c477211594bc274d0a
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Wed Feb 14 20:18:05 2007 -0600

    atl1: bump version number
    
    Bump the version number.
    
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e81e557a8f1e22fab1b1bdc649ac0d24017ddce2
Author: Chris Snook <csnook@redhat.com>
Date:   Wed Feb 14 20:17:01 2007 -0600

    atl1: add L1 device id to pci_ids, then use it
    
    Add device id for the Attansic L1 chip to pci_ids.h, then use it.
    
    Signed-off-by: Chris Snook <csnook@redhat.com>
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f1e5a1a00d3991eabda41dde69d1905cad4980a0
Author: Chris Snook <csnook@redhat.com>
Date:   Wed Feb 14 20:16:00 2007 -0600

    atl1: remove unused define
    
    Remove unused define from atl1_main.c.
    
    Signed-off-by: Chris Snook <csnook@redhat.com>
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fd8c5a7da3c48e53c7859d9f0c1d82ba02ca0a20
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Wed Feb 14 20:14:55 2007 -0600

    atl1: read MAC address from register
    
    On some Asus motherboards containing the L1 NIC, the MAC address is
    written by the BIOS directly to the MAC register during POST, and is
    not stored in eeprom.  If we don't succeed in fetching the MAC address
    from eeprom or spi, try reading it directly from the MAC register.
    Suggested by Xiong Huang.
    
    And do some cleanup while we've got the hood up...
    
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Chris Snook <csnook@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a62daa4c7544a0f0ca94d61458e3f78f630e0c05
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Feb 14 20:13:39 2007 -0600

    atl1: fix bad ioread address
    
    An ioread32 statement reads the wrong address.  Fix it.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Chris Snook <csnook@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a1ca14b1f4ff62e14e5c23dbbfee41ab73d29f82
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Wed Feb 14 20:12:13 2007 -0600

    atl1: drop NET_PCI from Kconfig
    
    The atl1 driver doesn't need NET_PCI.  Remove it from Kconfig.
    Noticed by Chad Sprouse.
    
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Chris Snook <csnook@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e363d138ed37138eb6c892b4195fa2d03fb33af6
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Sat Feb 10 11:57:35 2007 +0900

    PCMCIA-NETDEV : the 2nd argument of el3_interrrupt and smc_interrupt is struct net_device*
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 76884679c644a34ead40d74f4df6075a61d51990
Author: Andy Fleming <afleming@freescale.com>
Date:   Fri Feb 9 18:13:58 2007 -0600

    phylib: Add support for Marvell 88e1111S and 88e1145
    
    Changes include:
    * New support for 88e1145
    * New support for 88e111s
    * Fixing 88e1101 driver to not match non-88e1101 PHYs
    * Increases in feature support across Marvell PHY product line
    * Fixes a bunch of whitespace issues found by Lindent
    
    Signed-off-by: Andrew Fleming <afleming@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f630fe2817601314b2eb7ca5ddc23c7834646731
Merge: 48c871c... 8a03d9a...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Feb 17 15:11:43 2007 -0500

    Merge branch 'master' into upstream

commit 48c871c1f6a7c7044dd76774fb469e65c7e2e4e8
Merge: 1a16893... 4409d28...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Feb 17 15:09:59 2007 -0500

    Merge branch 'gfar' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc into upstream

commit f69eda00d4e9808f0ddc88826278f93512cd2c98
Merge: bc43fd4... dd1d2f4... 271f5ca... 108d093... 78c2644... 0e0ba76... 850b429...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Feb 17 20:09:53 2007 +0000

    Merge AT91, EP93xx, General devel, PXA, S3C, V6+ and Xscale trees

commit b77bfa84c419e3ec8b8e3fd4b4579e5761b7c943
Author: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
Date:   Fri Feb 16 15:38:49 2007 +0100

    [ARM] 4211/1: Provide a defconfig for ns9xxx
    
    This is a follow up for the patch providing the base support for the
    ns9xxx machine type.
    
    Signed-off-by: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9918cda52368ec3df5bb6bc1630ba8c070ad9fdd
Author: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
Date:   Fri Feb 16 15:36:55 2007 +0100

    [ARM] 4210/1: base for new machine type "NetSilicon NS9360"
    
    Signed-off-by: Uwe Kleine-Knig <ukleinek@informatik.uni-freiburg.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 78c2644feccf78ecab8e9413d2fac83cda091bae
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 16:41:12 2007 +0100

    [ARM] 4222/1: S3C2443: Remove reference to missing S3C2443_PM
    
    S3C2443_PM is not defined in our Kconfig, so
    remove the reference from CPU_S3C2443 to stop
    the configuration process warning about it.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 86aae08faa0069a559ba543ff3dab33fe95f891b
Author: James Nelson <james4765@gmail.com>
Date:   Sat Feb 17 20:15:38 2007 +0100

    Documentation/kernel-docs.txt update.
    
    Signed-off-by: James Nelson <james4765@gmail.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit e34f80cd865a89341331568e715e3d3e35d0d929
Author: Nicolas Kaiser <nikai@nikai.net>
Date:   Sat Feb 17 20:12:12 2007 +0100

    arch/cris: typo in KERN_INFO
    
    Typo in KERN_INFO.
    
    Signed-off-by: Nicolas Kaiser <nikai@nikai.net>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit c5a69d57eb48e36f84c0737b5b24ec277d7dbfba
Author: Tobias Klauser <tklauser@distanz.ch>
Date:   Sat Feb 17 20:11:19 2007 +0100

    Storage class should be before const qualifier
    
    The C99 specification states in section 6.11.5:
    
    The placement of a storage-class specifier other than at the
    beginning of the declaration specifiers in a declaration is an
    obsolescent feature.
    
    Signed-off-by: Tobias Klauser <tklauser@distanz.ch>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 0bbfb7c2e4b682542a822d3af05cea0e5cb5ba81
Author: Patrick Pletscher <pat@pletscher.org>
Date:   Sat Feb 17 20:10:16 2007 +0100

    kernel/printk.c: comment fix
    
    Signed-off-by: Patrick Pletscher <pat@pletscher.org>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit a8e14b950c9a9e2ec703df610e00ae8581040517
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sat Feb 17 20:08:22 2007 +0100

    update I/O sched Kconfig help texts - CFQ is now default, not AS.
    
    Change I/O scheduler description to correctly show CFQ as being the default
    scheduler and not the anticipatory scheduler that previously was default.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 3171470565cb422f295b18a92d0a9137a3ad5266
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sat Feb 17 20:07:02 2007 +0100

    Remove duplicate listing of Cris arch from README
    
    Mikael Pettersson pointed out to me that a recent patch of mine (commit
    620034c84d1d939717bdfbe02c51a3fee43541c3), that made some corrections to the
    README file, accidentally listed the Cris architecture twice.  Whoops.
    
    This patch removes the duplicate.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 5c811e59ada9d31f79c8d340f28184084a3aea5b
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Feb 17 20:03:14 2007 +0100

    kbuild: more doc. cleanups
    
    Fix typos/spellos in kbuild/makefiles.txt.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 78f92a82c20a9f66d215f6c6d96fb91c0763ce95
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Feb 17 19:58:30 2007 +0100

    doc: make doc. for maxcpus= more visible
    
    Some people are confused about maxcpus=1 and maxcpus=0,
    so put the documentation text from init/main.c into
    Documentation/kernel-parameters.txt also.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 4b2d5c049079d342e3e268c162dcecbd7bad1411
Author: Shane Shrybman <shrybman@sympatico.ca>
Date:   Sat Feb 17 19:56:23 2007 +0100

    drivers/net/eexpress.c: remove duplicate comment
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit edd023d0b86b599a8e89c1c014911129210fb955
Author: John Daiker <daikerjohn@hotmail.com>
Date:   Sat Feb 17 19:52:10 2007 +0100

    add a help text for BLK_DEV_GENERIC
    
    This fixes kernel Bugzilla #4933.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 936bb14ce9ecb3b17251f3589b59dd23419d2cb7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 17 19:49:13 2007 +0100

    correct a dead URL in the IP_MULTICAST help text
    
    Reported in kernel Bugzilla #6216.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 6486abbf63a58af490144ecbc38375f655d328ad
Author: Simon Depiets <2df@tuxfamily.org>
Date:   Sat Feb 17 19:42:17 2007 +0100

    fix the BAYCOM_SER_HDX help text
    
    This fixes kernel Bugzilla #4076.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 082f6f9ddcce40e880c1ec03bfb6a06a421188b4
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Feb 17 19:36:33 2007 +0100

    fix SCSI_SCAN_ASYNC help text
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit be7d2f775c788a1891f0f600537f130178448b20
Author: Erik Hovland <erik@hovland.org>
Date:   Sat Feb 17 19:29:21 2007 +0100

    trivial documentation patch for platform.txt
    
    Found a couple of typos in the Documentation/driver-model/platform.txt
    file. This patch fixes both of them.
    
    Signed-off-by: Erik Hovland <erik@hovland.org>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 1b3c3714cb4767d00f507cc6854d3339d82c5b9d
Author: Uwe Kleine-Knig <zeisberg@informatik.uni-freiburg.de>
Date:   Sat Feb 17 19:23:03 2007 +0100

    Fix typos concerning hierarchy
    
            heirarchical, hierachical -> hierarchical
            heirarchy, hierachy -> hierarchy
    
    Signed-off-by: Uwe Kleine-Knig <zeisberg@informatik.uni-freiburg.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 85d1fe095ccb6318f7a128c96630477a8859cfce
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:21:17 2007 +0100

    Fix comment typo "spin_lock_irqrestore".
    
    Fix "spin_lock_irqrestore" to "spin_unlock_irqrestore."
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit bbf2f9fb1c7239ae0aea55f7cb1555f4adc15f76
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:20:16 2007 +0100

    Fix misspellings of "agressive".
    
    Fix the various misspellings of "agressive", as well as a couple
    other things on the same lines while we're there.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 4c3ee8266334e927d2318c8d6da5341a01394c0c
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:18:52 2007 +0100

    drivers/scsi/a100u2w.c: trivial typo patch
    
    Trivial typo fix.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 6fb189c2a4f3bea4936127355903dae2b4104e34
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:17:37 2007 +0100

    Correct trivial typo in log2.h.
    
    Single typo correction in include/linux/log2.h.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 728f0bbd68e98d6a5d6a17aece000d9a3e24f075
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:16:31 2007 +0100

    Remove useless FIND_FIRST_BIT() macro from cardbus.c.
    
    Delete the definition of the unused FIND_FIRST_BIT() macro.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 405ae7d381302468ecc803f2148a2ae40a04c999
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:13:42 2007 +0100

    Replace remaining references to "driverfs" with "sysfs".
    
    Globally, s/driverfs/sysfs/g.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit ca820181fc187af316a18b2700582663662c4012
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:10:01 2007 +0100

    Use ARRAY_SIZE() macro in i386 relocs.c file
    
    Change the explicit code in the relocs.c file to use ARRAY_SIZE()
    and add a definition of ARRAY_SIZE() since this is a userspace program
    and wouldn't include kernel.h.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit d08df601a30df9e36c29f3214315f4f0c8784c68
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:07:33 2007 +0100

    Various typo fixes.
    
    Correct mis-spellings of "algorithm", "appear", "consistent" and
    (shame, shame) "kernel".
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 6340aa61b1f1d9c2aadb20594778a5f849bcbb69
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 17 19:05:24 2007 +0100

    kbuild: Replace remaining "depends" with "depends on"
    
    Replace the very few remaining "depends" Kconfig directives with
    "depends on".
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 88dacbe961aa63fa880b4f6f16515427f61fc3ca
Author: Willy Tarreau <w@1wt.eu>
Date:   Sat Feb 17 18:57:09 2007 +0100

    rio: typo in bitwise AND expression.
    
    The line :
    
        hp->Mode &= !RIO_PCI_INT_ENABLE;
    
    is obviously wrong as RIO_PCI_INT_ENABLE=0x04 and is used as a bitmask
    2 lines before. Getting no IRQ would not disable RIO_PCI_INT_ENABLE
    but rather RIO_PCI_BOOT_FROM_RAM which equals 0x01.
    
    Obvious fix is to change ! for ~.
    
    Signed-off-by: Willy Tarreau <w@1wt.eu>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 975b89399679dcf8587288d46d3f21d4286af167
Merge: 578f8f2... fc7900b...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 10:18:34 2007 -0600

    Merge branch 'master' into 85xx

commit be156bed9ebfe365c6d95f715eae3529cf694fcb
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 10:16:18 2007 -0600

    [POWERPC] 83xx: Renamed MPC8323 MDS dts and defconfig to match other boards
    
    Renamed the MPC8323 MDS and defconfig to match the naming convention followed
    by other MDS boards.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 322d05a1c455266e522e8aa7010c40f390029b41
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 10:13:56 2007 -0600

    [POWERPC] 83xx: Updated and renamed MPC8360PB to MPC836x MDS
    
    The MPC836x PB board is really just one part of the MPC836x MDS.  We currently
    name all other PB boards as MDS.  Removed all references to PB and replaced
    with MDS.  Additionally renamed the .dts to match the defconfig (mpc836x_mds*).
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit f7993ed57ac06da168d29c587d1bc0dce0f11c78
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 09:56:49 2007 -0600

    [POWERPC] 83xx: Use of_platform_bus_probe to setup QE devices
    
    Use of_platform_bus_probe to setup devices on the of_platform_bus since its
    much cleaner.  We explicitly specify the bus ids since the we want to get rid
    of the default mechanism in the future.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 7c90c800d9a6c6393fa610313b6ed56ac786da93
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 09:42:18 2007 -0600

    [POWERPC] 83xx: use default value of loops_per_jiffy
    
    Use the default value setup by initialization of loops_per_jiffy, its close
    enough for 83xx and will get fixed up by calibrate_delay().
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 1eccad01acaf7659abdcc9a72408456558bb4fb0
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 09:25:57 2007 -0600

    [POWERPC] 83xx: Remove obsolete setting of ROOT_DEV.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 336c3c2ec7e24bdf01c8f0c311ac7081b1f73d72
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 09:10:44 2007 -0600

    [POWERPC] 83xx: Cleaning up machine probing and board initcalls
    
    Cleaned up the probing functionality to be more consistent across all 83xx
    boards and added machine_is() protection around board initcalls to ensure they
    only do something if we are actually running on that board.
    
    Additionally, removed some dead code on mpc832x_mds.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 3668b45d46f777b0773ef5ff49531c1144efb6dd
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Feb 13 17:13:34 2007 +0100

    [ARM] 4187/1: iop: unify time implementation across iop32x, iop33x, and iop13xx
    
    * architecture specific details are handled in asm/arch/time.h
    * ARCH_IOP13XX now selects PLAT_IOP
    * as suggested by Lennert use ifdef CONFIG_XSCALE to skip the cp_wait on
    XSC3
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4434c5c7fd61c6713de882a2272b66f32fe7cac3
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Feb 13 17:13:04 2007 +0100

    [ARM] 4186/1: iop: remove cp6_enable/disable routines
    
    This functionality is replaced by cp6_trap
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f80dff9da07d81da16e3b842118d47b9febf9c01
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Fri Feb 16 22:16:32 2007 +0100

    [ARM] 4185/2: entry: introduce get_irqnr_preamble and arch_ret_to_user
    
    get_irqnr_preamble allows machines to take some action before entering the
    get_irqnr_and_base loop.  On iop we enable cp6 access.
    
    arch_ret_to_user is added to the userspace return path to allow individual
    architectures to take actions, like disabling coprocessor access, before
    the final return to userspace.
    
    Per Nicolas Pitre's note, there is no need to cp_wait on the return to user
    as the latency to return is sufficient.
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8271e57569d1a2e7061f1754a5bb797a13b302d
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 15:41:50 2007 +0100

    [ARM] 4221/1: S3C2443: DMA support
    
    Add initialisation and mappings for S3C2443 DMA
    system
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 48adbcf33b6087727a2db0b517c994a7ecfbeb0c
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 15:37:14 2007 +0100

    [ARM] 4220/1: S3C24XX: DMA system initialised from sysdev
    
    This patch gets the DMA system for the S3C24XX
    ready for the S3C2443, which requires 6 dma channels
    at a different stride, and different base IRQ.
    
    The DMA system is now initialised from the same
    drivers which apply the DMA mappings, as well
    as removing the DMA sysdev intialisation out of
    the main init code (which is now being called
    from a sysdev probe, so cannot add a new sysdev)
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 15e4db7b8054ac171de946b9511655446dd29b8f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 15:05:17 2007 +0100

    [ARM] 4219/1: S3C2443: DMA source definitions
    
    Defines for the S3C2443 DMA source selection,
    and update the maximum channels to 6 if the S3C2443
    is selected.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 64f33beafbaae55d116e933e8eae6b068fba617f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 14:04:33 2007 +0100

    [ARM] 4218/1: S3C2412: fix CONFIG_CPU_S3C2412_ONLY wrt to S3C2443
    
    Update the Kconfig of arch/arm/mach-s3c2443 to
    add the CONFIG_CPU_S3C2443 to the list of config
    variabls which mean CONFIG_CPU_S3C2412_ONLY cannot
    be set
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3d9dd6bdbd6765a86736ead09009daf29382a6f2
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 14:02:37 2007 +0100

    [ARM] 4217/1: S3C24XX: remove the dma channel show at startup
    
    Remove the DMA code's channel printing at startup
    as this is firstly a waste of console output on
    initialsaion, and secondly is going to be obsolete
    once the S3C2443 DMA code has been merged
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6624b35d6250632497c5943faa2ee2a91344d91c
Merge: d71a1dc... fc7900b...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Sat Feb 17 08:59:00 2007 -0600

    Merge branch 'master' into 83xx

commit a65421ea3f8a0e78b4e3b858bdc5ada5ad653807
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Feb 10 22:06:18 2007 +0100

    ieee1394: fix another deadlock in nodemgr
    
    A "modprobe ohci1394; sleep 1.5; modprobe -r ohci1394" could get stuck
    in uninterruptible state, especially if an external node was connected.
    http://bugzilla.kernel.org/show_bug.cgi?id=7792
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 3dc5ea9b31a8c83cffa338aba91adbc9bd387002
Author: Pieter Palmers <pieterp@joow.be>
Date:   Sat Feb 3 17:44:39 2007 +0100

    ieee1394: cycle timer read extension for raw1394
    
    This implements the simultaneous read of the isochronous cycle timer and
    the system clock (in usecs).  This allows to express the exact receive
    time of an ISO packet as a system time with microsecond accuracy.
    http://bugzilla.kernel.org/show_bug.cgi?id=7773
    
    The counterpart patch for libraw1394 can be found at
    http://thread.gmane.org/gmane.linux.kernel.firewire.devel/8934
    
    Patch update (Stefan R.):  Disable preemption and local interrupts.
    Prevent integer overflow.  Add paranoid error checks and kerneldoc to
    hpsb_read_cycle_timer.  Move it to other ieee1394_core high-level API
    functions.  Change comments.  Adjust whitespace.  Rename struct
    _raw1394_cycle_timer.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Acked-by: Pieter Palmers <pieterp@joow.be>
    Acked-by: Dan Dennedy <dan@dennedy.org>

commit bc43fd40ea9d4183fb0bab00f55af2da0ab46979
Author: Nicolas Pitre <nico@cam.org>
Date:   Sat Feb 17 03:18:39 2007 +0100

    [ARM] 4090/2: avoid clash between PXA and SA1111 defines
    
    The Lubbock platform uses both a PXA25x and a SA1111 at the same time.
    Both chips have the same "Serial Audio Controller" registers although
    the SA1111 one is never expected to be used in preference to the PXA25x
    one. So let's disable the SA1111 defines whenever compilation is for a
    PXA architecture and make the PXA defines always defined.
    
    This removes a bunch of "already defined" warnings as well since the
    current hack to prevent them depended on include ordering which wasn't
    always right.
    
    While at it, clean up the SA1111 defines allowing to get rid of the
    __CCREG() macro.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca83b0bcf875cd20cb5226d1fc7e828d9e0cc269
Author: Nicolas Pitre <nico@cam.org>
Date:   Sat Feb 17 03:37:02 2007 +0100

    [ARM] 4216/1: add .gitignore entries for ARM specific files
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c6184e271db4948d4f6e07f271abeb8697a80eba
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Feb 17 00:52:37 2007 +0100

    [ARM] 4214/2: S3C2410: Add Armzone QT2410
    
    Patch from: Harald Welte <laforge@openmoko.org>
    
    Add support for the Armzone QT2410 system, with
    basic peripheral support for TFT display, SPI
    and LEDs.
    
    Signed-off-by: Harald Welte <laforge@openmoko.org>
    Signed-off-by: Ben Dooks <ben-linux@fluf.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 52c477a34bd26f246485b04c75f700a0c2a52580
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri Feb 16 23:50:32 2007 +0100

    [ARM] 4215/1: s3c2410 usb device:  per-platform vbus_draw
    
    Introduce a platform_device (machine) specific callback function
    which gets called when the amount of power we can draw from Vbus
    has changed.
    
    Signed-off-by: Harald Welte <laforge@openmoko.org>
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a7eec7b332e83ee63f7db08cc54bf3b4663eed67
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Fri Feb 16 22:19:48 2007 +0100

    [ARM] 4213/1: S3C2410 - Update definition of ADCTSC_XY_PST
    
    Update S3C2410_ADCTSC_XY_PST macro to allow setting the ADCTSC_XY_PST
    bits.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc7900bb04c4290f3a8e43abf231aee566feff6d
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Thu Feb 15 23:18:08 2007 +0100

    [POWERPC] Dispose irq mapping when done in mpc52xx_serial.c
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f6744bdd7346dcdf94b9a7ac6fb820693b2724cd
Author: Carlos O'Donell <carlos@systemhalted.org>
Date:   Fri Feb 16 10:54:10 2007 -0500

    [PARISC] Compat signal fixes for 64-bit parisc
    
    In copy_siginfo_from_user32:
    Use compat_uptr_t. Use compat_ptr().
    
    In copy_siginfo_to_user32:
    Use compat_int_t. Use ptr_to_compat().
    
    The sigevent_t structure has a 64-bit si_ptr field
    that when copied to a 32-bit si_ptr will copy the wrong
    word. For the compat copy use the si_int field instead.
    
    Signed-off-by: Carlos O'Donell <carlos@systemhalted.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 1e67685b1b654138a20a4db487cf12c3fca968f2
Author: Carlos O'Donell <carlos@systemhalted.org>
Date:   Fri Feb 16 00:25:10 2007 -0500

    [PARISC] Reorder syscalls to match unistd.h
    
    Move migrate_pages into the same position as specified
    in unistd.h. This fixes migrate_pages, pselect6 and
    ppoll syscalls.
    
    Signed-off-by: Carlos O'Donell <carlos@systemhalted.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c3de4b38153a201cfc8561abb093a1b482fd3abb
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Feb 9 08:11:47 2007 -0700

    Revert "[PATCH] make kernel/signal.c:kill_proc_info() static"
    
    This reverts commit d3228a887cae75ef2b8b1211c31c539bef5a5698.
    DeBunk this code.  We need it for compat_sys_rt_sigqueueinfo.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit d104f11c3989b0bbe1216f6ad663d0ed91fb7bd8
Author: Kyle McMartin <kyle@athena.road.mcmartin.ca>
Date:   Thu Feb 8 19:38:54 2007 -0500

    [PARISC] fix sys_rt_sigqueueinfo
    
    the parisc affecting portion of the patch was inadvertantly
    reverted a while ago.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 992378a06413116c6a7cf2ad597e096589e531aa
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 28 17:06:12 2007 +0100

    [PARISC] fix section mismatch warnings in harmony sound driver
    
    fix for two warnings:
    - Section mismatch: reference to .init.text:snd_harmony_mixer_init from .text.snd_harmony_probe after 'snd_harmony_probe'
    - Section mismatch: reference to .init.text:snd_harmony_mixer_reset from .text.snd_harmony_mixer_init after 'snd_harmony_mixer_init'
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit bcc0e04c5c749f0cd2e172815945993e41ad4a01
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 28 16:58:43 2007 +0100

    [PARISC] do not export get_register/set_register
    
    - noticed by Randolph Chung (tausq)
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 79793455eba539a3f0ed8d7fd9eef41da0c27e7d
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 28 16:43:32 2007 +0100

    [PARISC] add ENTRY()/ENDPROC() and simplify assembly of HP/UX emulation code
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 513e7ecd695a4c0f95b9aa86c03ec9b7d2d09e03
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 28 15:09:20 2007 +0100

    [PARISC] convert to use CONFIG_64BIT instead of __LP64__
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit a8f44e3889b686813926b288bd4e51a0cf17d2c7
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 28 14:58:52 2007 +0100

    [PARISC] use CONFIG_64BIT instead of __LP64__
    
    - additionally update my copyright timestamps
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 0b3d643f9ead9b5141dedbb2d1b06ce15469fc4a
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 28 14:52:57 2007 +0100

    [PARISC] add ASM_EXCEPTIONTABLE_ENTRY() macro
    
    - this macro unifies the code to add exception table entries
    - additionally use ENTRY()/ENDPROC() at more places
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 8e9e9844b44dd9f855d824d035b3097b199e44ed
Author: Helge Deller <deller@gmx.de>
Date:   Wed Jan 24 22:36:32 2007 +0100

    [PARISC] more ENTRY(), ENDPROC(), END() conversions
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit b288a8f79ac6028940ba60fb6cc61ed134632770
Author: Helge Deller <deller@gmx.de>
Date:   Tue Jan 23 23:32:10 2007 +0100

    [PARISC] fix ENTRY() and ENDPROC() for 64bit-parisc
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 2f75c12c663fc4bf198459d3f932ce3896cb126f
Author: Helge Deller <deller@gmx.de>
Date:   Tue Jan 23 21:24:20 2007 +0100

    [PARISC] Fixes /proc/cpuinfo cache output on B160L
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c5e7655297b5de47a279abcdcd1065690aa25c56
Author: Helge Deller <deller@gmx.de>
Date:   Tue Jan 23 20:50:59 2007 +0100

    [PARISC] implement standard ENTRY(), END() and ENDPROC()
    
    Use the macros in entry.S
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 430a502abec76fd2fd9fd1df7506ccf911a6d6d2
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Mon Jan 15 12:29:25 2007 -0500

    [PARISC] kill ENTRY_SYS_CPUS
    
    it's unlikely iCOD will ever happen on parisc-linux now... ;-)
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 5492a0f001bdf5435318edb0a68eab5f16995bff
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Mon Jan 15 12:23:03 2007 -0500

    [PARISC] clean up debugging printks in smp.c
    
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 2b163b71e6d4471cae74037cb680e885eafc8d64
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Mon Jan 15 00:36:26 2007 -0500

    [PARISC] factor syscall_restart code out of do_signal
    
    looks better this way... ;)
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit f354ef8abe5d6d967c023b21980241e6f883a698
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Sat Jan 13 15:02:09 2007 -0500

    [PARISC] rename *_ANY_ID to PA_*_ANY_ID in the exported header
    
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit f3cf2673358e4221afbb59721a8580a8f35479a5
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Sat Jan 13 14:58:21 2007 -0500

    [PARISC] generate modalias for parisc_device_id tables
    
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit f2439b262ab11717c892efd5fdacf43f65f2a422
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Sat Jan 13 14:57:25 2007 -0500

    [PARISC] move parisc_device_id definition to mod_devicetable.h
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit a04b0605384e019c6fd77cfd4e4ffce8eb50785f
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Sat Jan 13 14:56:50 2007 -0500

    [PARISC] display parisc device modalias in sysfs
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3fe4c55ebc440159c49efe2e9464ac301b390913
Author: Helge Deller <deller@gmx.de>
Date:   Tue Jan 9 19:57:38 2007 +0100

    [PARISC] use less assembler statements in syscall path
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 4650f0a5832033c78690811aa9b171764c11fc0f
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Mon Jan 8 16:28:06 2007 -0500

    [PARISC] Add TIF_RESTORE_SIGMASK support
    
    And unmask the pselect6/ppoll system calls.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 0bbdac0897a48f415eb788bf3263c92bd5e97ffb
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 7 16:27:27 2007 +0100

    [PARISC] detect recursive kernel crash earlier
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 6e16d9409e1f08594587855d2a280c391ba985ff
Author: Helge Deller <deller@gmx.de>
Date:   Sun Jan 7 16:07:48 2007 +0100

    [PARISC] Convert soft power switch driver to kthread
    
    And remove it's reference in time.c.
    Allow lcd_print() to take a const char *.
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 324c7e6545539d2f7736be930d4833deb32b1b95
Author: Helge Deller <deller@gmx.de>
Date:   Wed Jan 3 19:25:37 2007 +0100

    [PARISC] disable cr16 clocksource when multiple CPUs are online
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 12df29b64c782133afea8cacc6acdad68a6b7d17
Author: Helge Deller <deller@gmx.de>
Date:   Tue Jan 2 23:54:16 2007 +0100

    [PARISC] GENERIC_TIME patchset for parisc
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit df47b4386a473eba87095e6dea8046762434817d
Author: Helge Deller <deller@gmx.de>
Date:   Mon Jan 1 21:47:21 2007 +0100

    [PARISC] a and b in "break a,b" message were swapped
    
    And clean up 32/64bit branch assembler statements
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 0c2de3c6c481ba6a537f66c06a55bd5be5a2c99d
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sat Dec 30 19:24:37 2006 -0500

    [PARISC] use fls_long in irq.c
    
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c4ba7a2e44188ef22b041515c1198669ed1cc103
Author: Helge Deller <deller@gmx.de>
Date:   Wed Dec 27 23:23:51 2006 +0100

    [PARISC] Use fstatat64 instead of newfstatat syscall
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 645d11d4baa56c6830daac46a92d63b7093cbc09
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sun Dec 24 19:28:42 2006 -0700

    [PARISC] lba_pci format warnings
    
    Fix resource_size_t warnings in a variety of ways
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 19dd705f4e37ff09a66cef8c6d79416ae249e1a2
Author: Helge Deller <deller@gmx.de>
Date:   Sat Dec 23 00:12:02 2006 +0100

    [PARISC] add missing syscalls for vmsplice, move_pages, getcpu & epoll_pwait
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit bd83bcffb2a582ddac0b463153a4c1fda4335273
Author: Helge Deller <deller@gmx.de>
Date:   Thu Dec 21 21:02:00 2006 +0100

    [PARISC] dump stack backtrace on BUG() and add syslog-levels to printk()s
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit ca72a223278483e62530ca9e5b4f9b39318868ea
Author: Helge Deller <deller@gmx.de>
Date:   Wed Dec 20 00:35:57 2006 +0100

    [PARISC] fix fixup declarations for 32bit and use CONFIG_64BIT
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 94a1981df056e349b926164915894436acdb8dd5
Author: Helge Deller <deller@gmx.de>
Date:   Tue Dec 19 22:33:58 2006 +0100

    [PARISC] whitespace cleanups and unify 32/64bit user-access assembler inlines
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit e38287647467188d8b8d1adadc6ab26267758151
Author: Helge Deller <deller@gmx.de>
Date:   Sat Dec 16 17:48:26 2006 +0100

    [PARISC] fix build for WARN_ON() when CONFIG_DEBUG_BUGVERBOSE=y
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 6891f8a1135b964f8ef30521d1473d5d137af0fa
Author: Helge Deller <deller@gmx.de>
Date:   Sat Dec 16 16:16:50 2006 +0100

    [PARISC] Generic BUG
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 9f15c82686251cd2b97ac6859de62959d3c4afe1
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Dec 15 22:47:47 2006 -0700

    [PARISC] Fix show_stack() when we can't kmalloc
    
    show_stack() was calling kzalloc() to allocate a struct pt_regs.
    This meant that *really* early stack dumps would cause a null pointer
    dereference.  x86_64 allocates its pt_regs on the stack, so do the same.
    
    Kyle actually committed this exact patch to CVS on
    Wed Jul 26 14:32:39 2006 UTC, and never moved it across to git.
    Bad Kyle.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit e6fc0449be45a0e7520da6a17a64520743b9aa20
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Dec 15 09:34:36 2006 -0700

    [PARISC] Remove sched.h from uaccess.h on parisc
    
    Al Viro did this for x86-64 and reduced the number of dependencies on
    sched.h significantly.  We had a couple of files which were relying on
    uaccess.h pulling in sched.h, so they need explicit dependencies added.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3735313ad2e1515140683f0aee6e74aec103391d
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Dec 15 09:29:39 2006 -0700

    [PARISC] Add prototypes for flush_user_dcache_range and flush_user_icache_range
    
    They're called from signal.c, so need to be prototyped
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 959f4f13a3fe661ee2761c4dc9a70196fb8b1c12
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Thu Dec 14 11:12:50 2006 -0500

    [PARISC] "Fix" circular includes
    
    Use a really big hammer for the mean time to get things building again.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit af5917f0cd60715ed09874bb793d4f62ba692f47
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Thu Dec 14 09:00:25 2006 -0700

    [PARISC] Only write to memory in test_and_set_bit/test_and_clear_bit if we're
    
    going to change the bit.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit d6ce8626dbc7d277d29b62e31c24ce777c60546b
Author: Randolph Chung <tausq@debian.org>
Date:   Tue Dec 12 05:51:54 2006 -0800

    [PARISC] Clean up the cache and tlb headers
    
    No changes in functionality.
    
    Signed-off-by: Randolph Chung <tausq@debian.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 592ac93a607109e0643da6c23ae07ac749e973b1
Author: Randolph Chung <tausq@debian.org>
Date:   Mon Dec 11 16:07:51 2006 -0800

    [PARISC] Optimize TLB flush on SMP systems
    
    Signed-off-by: Randolph Chung <tausq@debian.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit e7b3ca08549caccf5d6e1cf066780bf4f0ae77a7
Merge: 62d0cfc... cb6efb3...
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sat Feb 17 00:18:23 2007 -0500

    Merge branch 'parisc' from /home/kyle/repos/parisc-2.6.git
    
    Conflicts:
    
    	arch/parisc/hpux/sys_hpux.c
    	arch/parisc/mm/ioremap.c

commit 004c46b9e588edf549a39c5db54e37ebd0b3b3ad
Author: Steve French <sfrench@us.ibm.com>
Date:   Sat Feb 17 04:34:13 2007 +0000

    [CIFS] One line missing from previous commit
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 1b2b212603ceb47d60aff571dcfffc846fcfa336
Author: Steve French <sfrench@us.ibm.com>
Date:   Sat Feb 17 04:30:54 2007 +0000

    [CIFS] mtime bounces from local to remote when cifs nocmtime i_flags overwritten
    
    atime flag was also overwritten. Noticed by Shirish when he was debugging
    an atime problem.  Should help performance a bit too.
    
    cifs should be getting time stamps from the server (that was the original
    intent too)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 255f0385c8e0d6b9005c0e09fffb5bd852f3b506
Merge: 902b236... e6d0f56...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:12:04 2007 -0500

    Pull bugzilla-7897 into release branch

commit 902b236c087bf021c94cc21a2b09d928c4156c2b
Merge: 08e4a10... aafbcd1...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:11:57 2007 -0500

    Pull bugzilla-7887 into release branch

commit 08e4a10ec82faf5ba67c8d0115b7bc9e58071555
Merge: 4559b43... b1028c5...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:11:50 2007 -0500

    Pull bugzilla-7570 into release branch

commit 4559b438225b01942e1661759db0df55883b1bc0
Merge: 1004879... 4bd35cd...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:11:37 2007 -0500

    Pull bugzilla-7200 into release branch

commit 1004879f25c5719517b3d8a3180a517e190e2f5b
Merge: f0e5ed7... e8363f3...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:11:31 2007 -0500

    Pull bugzilla-7122 into release branch

commit f0e5ed7f323db4e47b51da4a23fad8245c173081
Merge: 8800c0e... 5f7748c...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:11:21 2007 -0500

    Pull bugzilla-5534 into release branch

commit 8800c0ebf5e8363dab66647512dcef5b83203dec
Merge: 9cdd79c... 5ee6edb...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:11:02 2007 -0500

    Pull remove-hotkey into release branch

commit 9cdd79c9b99873d600d397fda012fc3f57cc2776
Merge: c0cd79d... 156c221...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:10:55 2007 -0500

    Pull sony into release branch

commit c0cd79d11412969b6b8fa1624cdc1277db82e2fe
Merge: 81450b7... db2d4cc...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 22:10:32 2007 -0500

    Pull fluff into release branch
    
    Conflicts:
    
    	arch/x86_64/pci/mmconfig.c
    	drivers/acpi/bay.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit db2d4ccdc8f9f3433d3a8566404189f2e9295c23
Author: John Keller <jpk@sgi.com>
Date:   Fri Feb 16 15:07:27 2007 -0600

    ACPI: IA64: react to acpi_table_parse() return value change
    
    acpi_boot_init() is making a bad check on the return
    status from acpi_table_parse(). acpi_table_parse() now
    returns zero on success, one on failure.
    
    Signed-off-by: Aaron Young <ayoung@sgi.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5ee6edbcde4d3b14e4e03d4b331df1099a34aa8d
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 10 01:18:25 2007 -0500

    ACPI: hotkey: remove driver, per feature-removal-schedule.txt
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ccf352894ceef79d40d015e1deee4c46c3aa42ed
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:26 2007 +0100

    ide: make ide_hwif_t.ide_dma_host_on void (v2)
    
    * since ide_hwif_t.ide_dma_host_on is called either when drive->using_dma == 1
      or when return value is discarded make it void, also drop "ide_" prefix
    * make __ide_dma_host_on() void and drop "__" prefix
    
    v2:
    * while at it rename atiixp_ide_dma_host_on() to atiixp_dma_host_on()
      and sgiioc4_ide_dma_host_on() to sgiioc4_dma_host_on().
      [ Noticed by Sergei Shtylyov <sshtylyov@ru.mvista.com>. ]
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 7469aaf6a30f4187ed6de7c0aed5c2dd2d1c2d31
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:26 2007 +0100

    ide: make ide_hwif_t.ide_dma_{host_off,off_quietly} void (v2)
    
    * since ide_hwif_t.ide_dma_{host_off,off_quietly} always return '0'
      make these functions void and while at it drop "ide_" prefix
    * fix comment for __ide_dma_off_quietly()
    * make __ide_dma_{host_off,off_quietly,off}() void and drop "__" prefix
    
    v2:
    * while at it rename atiixp_ide_dma_host_off() to atiixp_dma_host_off(),
      sgiioc4_ide_dma_{host_off,off_quietly}() to sgiioc4_dma_{host_off,off_quietly}()
      and sl82c105_ide_dma_off_quietly() to sl82c105_dma_off_quietly()
      [ Noticed by Sergei Shtylyov <sshtylyov@ru.mvista.com>. ]
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 3608b5d71a52c053787dbad6af20c25f7e0b75a9
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:26 2007 +0100

    ide: add ide_set_dma() helper (v2)
    
    * add ide_set_dma() helper and make ide_hwif_t.ide_dma_check return
      -1 when DMA needs to be disabled (== need to call ->ide_dma_off_quietly)
       0 when DMA needs to be enabled  (== need to call ->ide_dma_on)
       1 when DMA setting shouldn't be changed
    * fix IDE code to use ide_set_dma() instead if using ->ide_dma_check directly
    
    v2:
    * updated for scc_pata
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 9ef5791e1be91007951477b8ed1530ac1166a8e7
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:26 2007 +0100

    sgiioc4: fix sgiioc4_ide_dma_check() to enable/disable DMA properly
    
    * use sgiioc4_ide_dma_{on,off_quietly}() instead of changing
      drive->using_dma directly
    * fix warning message
    * add FIXME
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit d8f4469d5f2c35e0b8272f254b42737a2b8ce877
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:25 2007 +0100

    ide: disable DMA in ->ide_dma_check for "no IORDY" case (v2)
    
    If DMA is unsupported ->ide_dma_check should disable DMA.
    
    v2:
    * updated for scc_pata
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 2ad1e558a2305c2b3d5099ee2f4a5929307c20ca
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:25 2007 +0100

    ide: convert ide_hwif_t.mmio into flag (v2)
    
    All users of ->mmio == 1 are gone so convert ->mmio into flag.
    
    Noticed by Alan Cox.
    
    v2:
    * updated for scc_pata
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 0ecdca26e556eae9668ce6de9554757dddb942ef
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:25 2007 +0100

    ide: use PIO/MMIO operations directly where possible (v2)
    
    This results in smaller/faster/simpler code and allows future optimizations.
    Also remove no longer needed ide[_mm]_{inl,outl}() and ide_hwif_t.{INL,OUTL}.
    
    v2:
    * updated for scc_pata
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 7569e8dc2213ecc47024ea5edbadc8736487d926
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:25 2007 +0100

    ide: add ide_use_fast_pio() helper (v3)
    
    * add ide_use_fast_pio() helper for use by host drivers
    
    * add DMA capability and hwif->autodma checks to ide_use_dma()
    
      - au1xxx-ide/it8213/it821x drivers didn't check for (id->capability & 1)
    
        [ for the IT8211/2 in SMART mode this check shouldn't be made but since
          in it821x_fixups() we set DMA bit explicitly:
    
                   if(strstr(id->model, "Integrated Technology Express")) {
                           /* In raid mode the ident block is slightly buggy
                              We need to set the bits so that the IDE layer knows
                              LBA28. LBA48 and DMA ar valid */
                           id->capability |= 3;            /* LBA28, DMA */
    
           we are better off using generic helper if we can ]
    
      - ide-cris driver didn't set ->autodma
    
        [ before the patch hwif->autodma was only checked in the chipset specific
          hwif->ide_dma_check implementations, for ide-cris it is cris_dma_check()
          function so there no behavior change here ]
    
    v2:
    * updated patch description (thanks to Alan Cox for the feedback)
    
    v3:
    * updated for scc_pata driver
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 056a697b7388844a1341e92e277bff8e5bf61ec9
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:24 2007 +0100

    ide: unexport ide_set_xfer_rate() (v2)
    
    In cmd64x, siimage and scc_pata drivers:
    * don't set drive->init_speed as it should be already
      set by successful execution of ide_set_xfer_rate()
    * use hwif->speedproc functions directly
    
    Above changes allows removal of EXPORT_SYMBOL_GPL(ide_set_xfer_rate).
    
    v2:
    * updated for scc_pata driver
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit c94964a4555eb58be3f45edf2b63a2b3f549ef29
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:24 2007 +0100

    ide: remove ide_drive_t.usage
    
    This field is no longer used by the core IDE code so fix ide-{disk,floppy}
    drivers to keep openers count in the driver specific objects and remove
    it from ide-{cd,scsi,tape} drivers (it was write-only).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 7b77d864af29c193f6cee8338dbda40accb9b27b
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:24 2007 +0100

    ide: remove ide_pci_device_t tables with only one entry
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit c1607e1af238b823a2158a18ff6c89144ce38c6c
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:24 2007 +0100

    ide: remove write-only ide_hwif_t.no_dsc flag
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 6679054895f9b1dc676d14637306b297451f1ac0
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:24 2007 +0100

    ide: remove write-only ide_pio_data_t.blacklisted
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit ac4a306537b97fcae5da96bedcf521f6dfdf9753
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:24 2007 +0100

    sis5513: sis5513_config_xfer_rate() cleanup
    
    * remove bogus comment for sis5513_config_xfer_rate()
    * there is no need to call config_drive_art_rwp() because
      it is called by config_art_rwp_pio()
    * remove needless wrapper
    * remove stale "TODO" comment
      (IDE core should provide generic tuning code)
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 74594fd1454e3588564311f8cd7260edf85204cb
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    piix: cleanup
    
    * disable DMA masks if no_piix_dma is set and remove now
      not needed no_piix_dma_check from piix_config_drive_for_dma()
    * there is no need to read register 0x55 in init_hwif_piix()
    * move cable detection code to piix_cable_detect()
    * remove unreachable 82371MX code from init_hwif_piix()
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 946f8e4abb1e30a5b69e388543f665e5e424d2fe
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    svwks: small cleanup
    
    * remove redundant svwks_ide_dma_end() [ __ide_dma_end() is used by default ]
    * remove init_dma_svwks() so the default ide_setup_dma() function is used
      [ init_setup_csb6() takes care of not initializing disabled channels ]
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 15b854853515e7223fd7224de53799af4a66059c
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    cs5530: small cleanup
    
    * BUG() on unknown DMA mode in cs5530_config_dma()
    * there is no need to call hwif->ide_dma_host_{off,on}() in
      cs5530_config_dma() because hwif->ide_dma_host_{off,on}()
      is called by hwif->ide_dma_off_{quietly,on}()
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 73d4f7d5874b378fa622f156410ffba645c1ef40
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    hpt366: remove redundant check from init_dma_hpt366()
    
    ->init_dma() cannot be called with dmabase == 0
    (see drivers/ide/setup-pci.c)
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 8b25c60485aab4c7599faef96e7a5d9e8c9003d9
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    trm290: remove redundant CONFIG_BLK_DEV_IDEDMA #ifdef-s
    
    In drivers/ide/Kconfig BLK_DEV_TRM290 depends on
    BLK_DEV_IDEDMA_PCI (on which is BLK_DEV_IDEDMA dependant on).
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit a523a1759a8b864ea3a7aff9ea4949dcdc4bc3b6
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    au1xxx-ide: remove dead code
    
    'speed' is always equal to 'mode' when ide_config_drive_speed() is called
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 572543d8b410c9734b530e811139120e36371ebd
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:23 2007 +0100

    pdc202xx_old: remove dead code
    
    CONFIG_PDC202XX_MASTER config option doesn't exist
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit bde18a2e1eaafca4bea32710cb1ee3ebc8c4f64f
Author: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
Date:   Sat Feb 17 02:40:22 2007 +0100

    drivers/ide: PATA driver for Celleb
    
    This is the patch (based on 2.6.19-rc4) for PATA controller of
    Toshiba Cell reference set(Celleb). The reference set consists
    of Cell, 512MB memory, Super Companion Chip(SCC) and some
    peripherals such as HDD, GbE, etc. You can see brief explanation
    and picture of Cell reference set at following URLs.
    
        http://www.toshiba.co.jp/about/press/2005_09/pr2001.htm
        http://cell-industries.com/toshiba_announces.php
    
    We use a drivers/ide driver because its design is more suitable for
    SCC IDE controller than libata driver. Since SCC supports only 32bit
    read/write, we must override many callbacks of ata_port_operations
    by modifying generic helpers. Each time the libata common code is
    updated, we must update those modified helpers. It is very hard for us.
    But we will try to implement the libata driver as needed.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit ea266ba1591d28889645a245e1df6f889c574640
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Feb 17 02:40:22 2007 +0100

    sl82c105: DMA support fixes
    
    Fix a number of issues with the DMA support code:
    
    - driver claims support for all SW/MW DMA modes while supporting only MWDMA2;
    
    - ide_dma_check() method tries to enable DMA on the "known good" drives which
      don't support MWDMA2;
    
    - ide_dma_on() method upon failure to set drive to MWDMA2 re-tunes already
      tuned PIO mode and calls ide_dma_off() method instead of returning error;
    
    - ide_dma_off() method sets drive->current_speed while it doesn't actually
      change (only the PIO timings are re-loaded into the chip's registers);
    
    - init_hwif() method forcibly sets/resets both "drive DMA capable" bits while
      this is properly handled by ide_dma_{on,off}() methods being called later...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit fed21641be7b31338dcf6753ef7f8a396242a410
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Feb 17 02:40:22 2007 +0100

    pdc202xx_old: fix PIO mode setup
    
    Fix the driver's tuneproc() method to always set the PIO mode requested and not
    pick the best possible one, rename it to pdc202xx_tune_drive(), and change the
    calls to it accordingly; remove the preceding comment which has nothing to do
    with the code.
    
    Sergei Shtylyov wrote:
    >     The tuneproc() method should take arg 255 for auto-selecting the best PIO
    > mode, not 5 as it did here + this driver's method always auto-selected instead
    > of setting the mode it's been told to -- issue typical to drivers/ide/...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 075cb65511df94b6900ef3288a76cd92185d5170
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sat Feb 17 02:40:22 2007 +0100

    siimage: PIO1/2 taskfile transfer overclocking fix
    
    Fix two typos found by SiI680A documentation check.  They caused the taskfile
    transfer overclocking:
    
    - in PIO mode 1 as 0x2283 must be used for both data and taskfile transfers;
    
    - in PIO mode 2 as data and taskfile timings are swapped when writing to the
      MMIO regs.
    
    Fix coding style and trailing whitespace in enclosing statements while at it...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
    
     drivers/ide/pci/siimage.c |   59 ++++++++++++++++++++++------------------------
     1 file changed, 29 insertions(+), 30 deletions(-)

commit 6e6cd4c4388f399dd5726b826f02732c53df3ba5
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Feb 17 02:40:22 2007 +0100

    ide: remove clearing bmdma status from cdrom_decode_status() (rev #4)
    
    patch 2/2:
      Remove clearing bmdma status from cdrom_decode_status() since ATA devices
      might need it as well.
    
      (http://lkml.org/lkml/2006/12/4/201 and http://lkml.org/lkml/2006/11/15/94)
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: "Adam W. Hawks" <awhawks@us.ibm.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit f0dd8712eb8cc5687b4582fbc41cfbcd55bba0d2
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Feb 17 02:40:21 2007 +0100

    ide: clear bmdma status in ide_intr() for ICHx controllers (revised #4)
    
    patch 1/2 (revised):
    - Fix drive->waiting_for_dma to work with CDB-intr devices.
    - Do the dma status clearing in ide_intr() and add a new
      hwif->ide_dma_clear_irq for Intel ICHx controllers.
    
    Revised per Alan, Sergei and Bart's advice.
    
    Patch against 2.6.20-rc6. Tested ok on my ICH4 and pdc20275 adapters.
    Please review/apply, thanks.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: "Adam W. Hawks" <awhawks@us.ibm.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit fdb77da4ca68ae17a39d58c9d5c00479a7e124c0
Author: Alan Cox <alan@redhat.com>
Date:   Sat Feb 17 02:40:20 2007 +0100

    ide-floppy: Fix unformatted media crash
    
    A ZIP or similar with unformatted media will cause crashes when attempts
    are made to read/write it in some cases. This is because bs_factor is
    zero and we divide by it causing an oops.
    
    As the size of a non-accessible/non-existant media is really a bit of a
    zen question it doesn't matter if non-existant media is 512 bytes per
    sector or zero. Setting it to 1 causes us to generate 512 bytes/sector
    accesses and error properly.
    
    Based on a fix found lurking in an ancient bugzilla entry since about 2004 (ugghhh)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 39baf8a798926eb675c9360d5822ca86ed92866e
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:20 2007 +0100

    atiixp/jmicron/triflex: fix PIO fallback
    
    * atiixp: if DMA can't be used atiixp_config_drive_for_dma() should return 0,
      atiixp_dma_check() will tune the correct PIO mode anyway
    
    * jmicron: if DMA can't be used config_chipset_for_dma() should return 0,
      micron_config_drive_for_dma() will tune the correct PIO mode anyway
    
      config_jmicron_chipset_for_pio(drive, !speed) doesn't program
      device transfer mode for speed != 0 (only wastes some CPU cycles
      on ide_get_best_pio_mode() call) so remove it
    
    * triflex: if DMA can't be used triflex_config_drive_for_dma() should return 0,
      triflex_config_drive_xfer_rate() will tune correct PIO mode anyway
    
    Above changes also fix (theoretical) issue when ->speedproc fails to set
    device transfer mode (i.e. when ide_config_drive_speed() fails to program it)
    but one of DMA transfer modes is already enabled on the device by the BIOS.
    In such scenario ide_dma_enable() will incorrectly return true statement
    and ->ide_dma_check will try to enable DMA on the device.
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 296d9bcc00c7180d327235d6f1e4b7f4ac0166a1
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Sat Feb 17 02:40:20 2007 +0100

    hpt34x: hpt34x_tune_chipset() (->speedproc) fix
    
    * remember to clear reg2 bits for the current device before setting mode
    * remove no longer needed hpt34x_clear_chipset()
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 834aba09598022f898eec651c0584b8b5d177e0a
Merge: 00e402d... 578f8f2...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Feb 16 18:21:18 2007 -0600

    Merge branch '85xx' into for_paulus

commit 00e402d06609d3722b018d696c12cb668065988d
Author: Jon Loeliger <jdl@jdl.com>
Date:   Fri Feb 16 16:17:41 2007 -0600

    [POWERPC] 86xx: Add missing of_node_put() in mpc86xx_hpcn_init_irq().
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 578f8f20f3c7e2c18083cf3bd434df994280af30
Author: Jon Loeliger <jdl@jdl.com>
Date:   Fri Feb 16 16:14:15 2007 -0600

    [POWERPC] 8[56]xx: Remove obsolete setting of ROOT_DEV for 85xx and 86xx platforms.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 81450b73dde07f473a4a7208b209b4c8b7251d90
Merge: 8a03d9a... 0539771...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 18:52:41 2007 -0500

    Pull misc-for-upstream into release branch
    
    Conflicts:
    
    	drivers/usb/misc/appledisplay.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0539771d7236b425f285652f6f297cc7939c8f9a
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Wed Feb 14 10:55:00 2007 -0200

    ACPI: bay: use IS_ERR for return of register_platform_device_simple
    
    register_platform_device_simple returns ERR_PTR(foo), so test it with
    IS_ERR(foo).
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ecb5f7521a309cb9c5fc0832b9705cd2a03d7d45
Author: John Keller <jpk@sgi.com>
Date:   Thu Feb 15 14:08:30 2007 -0600

    ACPI: acpi_unload_table_id() always returns error
    
    acpi_unload_table_id() is always returning an error status.
    Also, once the matching table is found, don't bother looking
    for another match.
    
    Signed-off-by: John Keller <jpk@sgi.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ed077bb714816e942ea9b740156659a28a34112f
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Fri Feb 16 10:18:58 2007 -0800

    USB: at91-ohci, handle extra at91sam9261 ahb clock
    
    The AT91SAM9261 needs to activate an AHB clock (HCK0) to use the USB Host
    controller. Previously clock.c would just enable it at startup, but now
    all the unused clocks are automatically disabled.
    
    Based on patch from Nicolas Ferre.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ebaf494e2ad19c92d3af48feaf9d65fdb656ea28
Author: Pozsar Balazs <pozsy@uhulinux.hu>
Date:   Fri Feb 16 12:47:49 2007 +0100

    USB: another id for cp2101 driver
    
    This patch adds another usb id to the cp2101. It seems to work well.
    
    Please apply, thanks.
    
    Signed-off-by: Pozsar Balazs <pozsy@uhulinux.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5371f80a9b5626b61816c8325896fafc3dddf76b
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Fri Feb 16 01:47:33 2007 -0800

    USB: ueagle-atm.c needs sched.h
    
    Driver needs sched.h for try_to_freeze().
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 398acce7af5eaead2093cf2fc0381e511f5f3edf
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Feb 15 18:47:17 2007 -0800

    USB: at91_udc, shrink runtime footprint
    
    This is a runtime codespace shrink:  in most cases, platform devices should
    put probe() should in the init section, and remove() in the exit section.
    And I have no idea why the module init/exit routines were mismarked.
    It also moves one function table into read-only data.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 691895c661b0419e7cd65429e5077264a2ca01a3
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Feb 15 21:32:31 2007 -0800

    usbnet: add missing Kconfig for KC2190 cables
    
    Hmm, I noticed that support for one of the USB host-to-host cables
    never got fully merged ... Kconfig wouldn't show it!  Fixed.
    
    Also, changed the CDC Subset default to 'y' so that more of these
    cables will work out-of-the-box.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cb1cebbee61abcb6b55c63fdfebb5ca5effaedea
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Feb 15 18:52:30 2007 -0800

    usbnet: init fault (oops) cleanup, whitespace fixes
    
    This cleans up some error handling paths in usbnet device probing;
    one of them could cause oopsing, e.g. with some RNDIS devices.
    
    It also removes some extraneous whitespace.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6e91f527cd0644530894ee3bfb06d209d3c8c54a
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Feb 15 18:50:01 2007 -0800

    usbnet: recognize SiteCom CN-124
    
    Add Sitecom CN-124 device IDs to ALI M5632 usb host-to-host cable;
    device IDs from Francois Barre <francois.barre@gmail.com>
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6160beb5bfcf8d3cddeecc4e5cd6847621b50893
Author: Kevin Lloyd <klloyd@sierrawireless.com>
Date:   Thu Feb 15 13:32:13 2007 -0800

    usb: Remove Airprime device from option.c
    
    from: Kevin Lloyd <linux@sierrawireless.com>
    
    This patch removes the Airprime 5220 device (branded as Audiovox) from
    the option.c driver. This device is already supported by the sierra.c
    driver.
    
    This was based off of the option.c driver found in kernel 2.6.20-git11.
    
    Signed-off-by: Kevin Lloyd <linux@sierrawireless.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5bcd70eba70221ea1ae03fccf1d2903877f9cc5f
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Fri Feb 9 01:51:15 2007 -0800

    USB: change __init to __devinit for isp116x_probe
    
    Change __init to __devinit for isp116x_probe.
    
    Resolves MODPOST warning:
    
    WARNING: drivers/usb/host/isp116x-hcd.o - Section mismatch: reference to
    .init.text:isp116x_probe from .data.rel.local between 'isp116x_driver' (at
    offset 0x0) and 'isp116x_hc_driver'
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 48fda45120a819ca40cadc50144b55bff1c4c78d
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Wed Feb 14 16:04:17 2007 +0900

    USB: ps3: don't call ps3_system_bus_driver_register on other platforms
    
    ps3_system_bus_driver_register is PS3 platform specific function.
    On other platforms, it triggers WARN_ON in kref_get.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7426fa8081766158525e063d69ad129744c42cd7
Author: Jeremy Roberson <jroberson@gtcocalcomp.com>
Date:   Wed Feb 14 16:14:19 2007 -0700

    USB: hid-core.c: Removes GTCO CalComp Interwrite IPanel PIDs from blacklist
    
    Removes our GTCO CalComp Interwrite IPanels from the hid-core.c blacklist
    because the HID Driver properly handles them.
    
    Signed-off-by: Jeremy A. Roberson <jroberson@gtcocalcomp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 892705a1e1b4d0f9f6c5ac57f777b8055525bf68
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 14:41:41 2007 -0800

    USB: kernel-doc fixes
    
    Fix kernel-doc warnings and in USB core.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9be8456c00c5bd603b933e6e9d82041e8b32c401
Author: Oliver Neukum <oneukum@suse.de>
Date:   Mon Feb 12 08:50:03 2007 +0100

    USB: quirky device for cdc-acm
    
    here's a quirklist entry reported by Stephen Murphy.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ca79b7b4158cbf32625793a1fc1d59ac46d44197
Author: Oliver Neukum <oneukum@suse.de>
Date:   Mon Feb 12 08:41:35 2007 +0100

    USB: cdc-acm: fix incorrect throtteling, make set_control optional
    
    this is Joris' fixes reshuffelled and features renamed as David requested.
    
    - acm_set_control is not mandatory, honour that
    - throtteling is reset upon open
    - throtteling is read consistently when processing input data
    
    Signed-off-by: Joris van Rantwijk <jorispubl@xs4all.nl>
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3f141e2aed586c41c2666d49c70c1c1bbb6d6abd
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Feb 8 16:40:43 2007 -0500

    USB: unconfigure devices which have config 0
    
    Some USB devices do have a configuration 0, in contravention of the
    USB spec.  Normally 0 is supposed to indicate that a device is
    unconfigured.
    
    While we can't change what the device is doing, we can change usbcore.
    This patch (as852) allows usb_set_configuration() to accept a config
    value of -1 as indicating that the device should be unconfigured.  The
    request actually sent to the device will still contain 0 as the value.
    But even if the device does have a configuration 0, dev->actconfig
    will be set to NULL and dev->state will be set to USB_STATE_ADDRESS.
    
    Without some sort of special-case handling like this, there is no way
    to unconfigure these non-compliant devices.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d1bbb60007597b920beca72cd0b413d10290310a
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun Feb 11 13:56:13 2007 -0800

    USB: make usb_iso_packet_descriptor.status signed
    
    The status in usb_iso_packet_descriptor should be signed, for the benefit
    of someone who casts to a long or makes other benign misstep (the principle
    of least surprise).
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8356f3113d2628c98a58180ca183345474a9d011
Author: Bryan O'Donoghue <bodonoghue@codehermit.ie>
Date:   Sat Jan 27 12:16:32 2007 +0000

    USB: fix g_serial small error
    
    A SET_LINE_CODING control request should return a zero length packet
    as an ACK to the host, during the status phase of a USB transaction.
    
    The return value of gs_setup_class() is treated as the number of
    bytes to write in the status phase of the control request, by
    gs_setup(). For this case, the value returned by gs_setup_class should
    be zero for SET_LINE_CODING but, right now, appears to be
    sizeof(struct usb_cdc_line_coding).
    
    However, if after doing the memcpy of the line coding descriptor we
    set the variable "ret" to be zero, we should return the appropiate ZLP
    to the host as an ACK in the status phase of the control request.
    I've tested this out using Linux as both host and slave and confirmed
    that the following small change fixes the spurious return of
    sizeof(struct usb_cdc_line_coding)/wLength bytes in the status phase
    of a USB_CDC_REQ_SET_LINE_CODING request. It's not a huge bug but, it
    is worth fixing.
    
    Signed-off-by: Bryan O'Donoghue <bodonoghue@codehermit.ie>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fc8d91912694859d3e598839af2427ec1287741c
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Mon Feb 5 16:41:03 2007 -0800

    USB: use __u32 rather than u32 in userspace ioctls in usbdevice_fs.h
    
    Use __u32 rather than u32 in userspace ioctl defines.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a7e555b6992d33e38c34aaa0e65f25bc544e28b1
Author: Dylan Taft <d13f00l@gmail.com>
Date:   Mon Feb 5 16:41:01 2007 -0800

    USB Storage: US_FL_IGNORE_RESIDUE needed for Aiptek MP3 Player
    
    Device will not work as a mass storage device without US_FL_IGNORE_RESIDUE.
    
    I bought this mp3 player that takes SD cards here
    
    http://www.aiptek.com/Merchant2/merchant.mvc?Screen=PROD&Product_Code=AX4&Category_Code=MP3&Store_Code=AS
    
    I can provide the errors in dmesg, if necessary, but this flag was
    determined as necessary by doing a quick google on the errors that were
    shown in dmesg.
    
    Signed-off-by: Dylan Taft <d13f00l@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0207c808d0d95bb1c4d5067c13c8d6b14afef2ab
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 5 16:41:02 2007 -0800

    USB: Fix misspelled "USBNET_MII" kernel config option.
    
    Fix the misspelling of "USBNET_MII" to "USB_USBNET_MII".
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3f9b4076f73d2cac59e19a85e2a97d9d2152bf26
Author: Zheng XiaoJun <zhengxiaojun@hsic.com.cn>
Date:   Mon Feb 5 16:40:57 2007 -0800

    USB: input: HID: add CIDC USB device to HID blacklist
    
    Add CIDC USB device to HID blacklist since it is actually a USB token
    and has its own driver.
    
    Signed-off-by: Zheng XiaoJun <zhengxiaojun@hsic.com.cn>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0b4e31093e2e9b38e61f3f4d6378e3238e71350
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 5 16:40:57 2007 -0800

    USB: USB_RTL8150 must select MII
    
    USB_RTL8150 must select MII to avoid link errors.
    
    Stolen from a patch by Randy Dunlap.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 61bf54b71d5abf767ee46284be19965d7253ddbf
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Feb 8 09:04:48 2007 +0100

    USB Storage: indistinguishable devices with broken and unbroken firmware
    
    there's a USB mass storage device which exists in two version. One
    reports the correct size and the other does not. Apart from that they
    are identical and cannot be told apart. Here's a heuristic based on the
    empirical finding that drives have even sizes.
    
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Acked-by: Alan Stern <stern@rowland.harvard.edu>
    Acked-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5b06470816fb5e658e81db2a55b530ff2ba711c9
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Feb 8 15:42:53 2007 +0100

    USB: fix autosuspend race in skeleton driver
    
    as the skeleton driver was made ready for autosuspend a race condition
    was introduced. The reference to get device must be gotten before the
    autosuspend counter is upped, as this operation may sleep, dropping BKL.
    Dropping BKL means that the pointer to the device may become invalid.
    Here's the fix.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 57e4f041bfffa191a318dab44eb991d79a6a9d5c
Author: David Hollis <dhollis@davehollis.com>
Date:   Mon Feb 5 12:03:03 2007 -0500

    USB: asix - Fix endian issues in asix_tx_fixup()
    
    The attached patch fixes endian issues in asix_tx_fixup() that prevented
    AX88772 and AX88178 devices from working on big-endian systems.  With
    the attached patch, all three chips are reported to work on big endian.
    
    Signed-off-by: David Hollis <dhollis@davehollis.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit db90e7a15cb4a160610b4e58576f25539ca216e7
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Feb 5 09:56:15 2007 -0500

    USB: fix concurrent buffer access in the hub driver
    
    This patch (as849) fixes a bug in the USB hub driver.  A single
    pre-allocated buffer is used for all port status reads, but nothing
    guarantees exclusive use of the buffer.  A mutex is added to provide
    this guarantee.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit af59cf404fc7ad6cc642de9e78252fb264917611
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Fri Feb 2 23:13:14 2007 -0800

    USB: Fix error cleanup path in airprime
    
    Fix up the error processing path: in usb_submit_urb failed, we forgot
    to free buffers. Also, don't free buffers in read callback: less error
    prone, 21 LOC less, no need to comment so much. N.B. write path is ok
    to do kfree.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 23004e241ccc03678592a8b392573e8514ec962f
Author: Inaky Perez-Gonzalez <inaky@linux.intel.com>
Date:   Fri Feb 2 17:32:24 2007 -0800

    USB: descriptor structures have to be packed
    
    usb: descriptor structures have to be packed
    
    Many of the Wireless USB decriptors added to usb_ch9.h don't have the
    __attribute__((packed)) tag, and thus, they don't reflect the wire
    size. This patch fixes that.
    
    Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8c774fe8a0284aff9e4c7ea43f5154fd46da325c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Feb 1 16:09:59 2007 -0500

    EHCI: add debugging message to ehci_bus_suspend
    
    This patch (as848) adds a useful little debugging message to let us
    know when ehci-hcd's bus_suspend method runs.  The other HCDs have
    similar messages; now ehci-hcd doesn't need to feel left out.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 12f1ff8351e235661beb0314d9ae9417a4871688
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Feb 1 16:08:41 2007 -0500

    usbcore: small changes to hub driver's suspend method
    
    This patch (as847) makes some small changes to the hub driver's
    suspend method:
    
    	For root hubs, the status URB should be unlinked and other
    	activity stopped _before_ the bus_suspend method is called.
    
    	The test for hdev->bus being NULL has been removed, since
    	it can never succeed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7fe89e9cc8ebd9da70f760409a4301d26f80a460
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Thu Jan 25 19:34:52 2007 -0500

    USB: Fix apparent typo CONFIG_USB_CDCETHER.
    
    Replace the apparent typo CONFIG_USB_CDCETHER with
    CONFIG_USB_NET_CDCETHER.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 253ca923281aec6975ec4028ddbc58e865d8d13d
Author: Joris van Rantwijk <jorispubl@xs4all.nl>
Date:   Thu Feb 1 20:08:18 2007 +0100

    USB: add flow control to usb-serial generic driver.
    
    I added two fields to struct usb_serial_port to keep track of the
    throttle state. Other usb-serial drivers typically use private data for
    such things, but the generic driver can not really do that because some
    of its code is also used by other drivers (which may have their own
    private data needs).
    
    As it is, I am not sure that this patch is useful in all scenarios.
    It is certainly helpful for low-bandwidth devices that can hold their
    data in response to throttling. But for devices that pump data in
    real-time as fast as possible (webcam, A/D converter, etc), throttling
    may actually cause more data loss.
    
    From: Joris van Rantwijk <jorispubl@xs4all.nl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b544d7499cc47fc26e9dbacd7b9cabc67d2bdf2e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Jan 31 10:57:55 2007 -0500

    USB: unusual_devs update for Sony P990i phone
    
    This patch (as846) adds the IGNORE_RESIDUE flag to the unusual_devs
    entry for Sony-Ericsson's P990i phone.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit af3bd202a38f7313b3b8b46d9db50e5540f71ce1
Author: Thomas Bachler <thomas@archlinux.org>
Date:   Sat Jan 27 00:46:58 2007 +0100

    USB: Teac HD-35PU patch to unusual_devs.h
    
    Hi, one of my users has two USB hard drives that need the following
    patch, otherwise there are I/O errors similar to those here:
    http://bugme.osdl.org/show_bug.cgi?id=3223
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2d94b981c7fcb0fba4aa3442cd180066dbedbbc8
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Jan 26 22:51:38 2007 +0900

    USB: PL2303: Willcom WS002IN Support.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6957e1ac9c498ff934eaf1b7591b5ea1c98b6e54
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Jan 25 11:22:24 2007 +0100

    USB: fix needless failure under certain conditions
    
    in devices.c we have a piece of code for dealing with losing in a race.
    If we indeed lose the race we don't care whether our own memory allocation
    worked. The check for that is so early that we return early even if we
    don't have to.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c5999f0da73b7f46435a67671c8861ed14a94c4e
Author: Josh Triplett <josh@freedesktop.org>
Date:   Thu Jan 25 01:32:34 2007 -0800

    USB: In init_endpoint_class, use PTR_ERR to obtain an errno value, not IS_ERR
    
    init_endpoint_class calls class_create, and checks the result for an error
    with IS_ERR; however, if true, it then returns the result of IS_ERR (a
    boolean) rather than PTR_ERR (the actual errno).
    
    Signed-off-by: Josh Triplett <josh@kernel.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit df23fa01acc77444453633e1dec59cd7a4ea8ec3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Jan 13 10:57:42 2007 -0800

    USB: Driver to charge USB blackberry devices
    
    A simple driver to turn on the charging capability of a USB BlackBerry
    device when it is plugged into the machine.  It does not bind to the
    device, so all userspace programs can still sync properly with it.
    
    Note, if CONFIG_USB_SUSPEND is enabled, it can play havoc with this
    device as the power to the port will be shut down.  This device id will
    have to be added to the global blacklist table when it is created.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8903795a5275e0366acf961190c57074ad27f9bb
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Feb 13 14:55:27 2007 -0500

    EHCI: turn off remote wakeup during shutdown
    
    This patch (as850b) disables remote wakeup (and everything else!) on
    all EHCI ports when the shutdown() method is called.  If remote wakeup
    is left active then some systems will reboot instead of powering off.
    This fixes Bugzilla #7828.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7084f8429c940bac856123ce6d3946638fe20364
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Feb 16 15:31:24 2007 -0800

    IB/core: Set static rate in ib_init_ah_from_path()
    
    The static rate from the path record should be put into the address
    vector -- a long time ago the rate in the address attributes needed to
    be a relative rate, which required more munging, but now that the
    conversion from absolute to relative is done in the low-level driver,
    it's easy for ib_init_ah_from_path() to put the absolute rate in.
    
    Cc: Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
    Cc: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 81bb0e198b4638ac65233b316f4588639dfe1fcd
Author: Brice Goglin <Brice.Goglin@ens-lyon.org>
Date:   Sun Jan 28 10:53:40 2007 +0100

    PCI: Make PCI device numa-node attribute visible in sysfs
    
    Export the numa-node attribute of PCI devices in sysfs so that
    user applications may choose where to be placed accordingly.
    
    Signed-off-by: Brice Goglin <Brice.Goglin@ens-lyon.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f52383d395178afde66d049e176bb2c59a8c941a
Author: Andy Gospodarek <andy@greyhouse.net>
Date:   Mon Feb 5 16:36:10 2007 -0800

    PCI: add systems for automatic breadth-first device sorting
    
    This is an additional list of systems that exhibit the PCI device ordering
    issue that prompted the following patch:
    
    commit 6b4b78fed47e7380dfe9280b154e8b9bfcd4c86c
    Author: Matt Domsch <Matt_Domsch@dell.com>
    Date:   Fri Sep 29 15:23:23 2006 -0500
    
        PCI: optionally sort device lists breadth-first
    
    Adding these systems to the list prevents the need for the additional
    kernel command line argument.
    
    Signed-off-by: Andy Gospodarek <andy@greyhouse.net>
    Cc: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 691cd0c2ee2d4d6dff652627fca1b2d4f1377d58
Author: Andreas Block <andreas.block@esd-electronics.com>
Date:   Mon Feb 5 16:36:07 2007 -0800

    PCI: PCI devices get assigned redundant IRQs
    
    I'm currently working on a port to a CPCI board with a MPC5200.  When
    testing the PCI interrupt routing, I discovered the following: Even devices
    which don't use interrupts (-> PCI Spec.: Interrupt Pin Register is zero),
    get an interrupt assigned (this is at least true for most of the
    PPC-targets I looked at).
    
    The cause is pretty obvious in drivers/pci/setup-irq.c.  I guess at least
    in an ideal world with correctly designed hardware, the code should rather
    look as in the patch below.
    
    Of course it doesn't hurt anybody to have an unuseable IRQ assigned to a
    PCI-to-PCI-bridge (or something alike), but to me it seems a bit strange.
    Please correct me, if I'm mislead.
    
    The patch below is tested on the above mentioned CPCI-MPC5200 board and is
    compiler tested with the latest git-repository kernel on x86.
    
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4516a618a76eae6eb1b37259ad49f39b7b7f33d8
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Feb 5 16:36:06 2007 -0800

    PCI: Make CARDBUS_MEM_SIZE and CARDBUS_IO_SIZE boot options
    
    CARDBUS_MEM_SIZE was increased to 64MB on 2.6.20-rc2, but larger size might
    result in allocation failure for the reserving itself on some platforms
    (for example typical 32bit MIPS).  Make it (and CARDBUS_IO_SIZE too)
    customizable by "pci=" option for such platforms.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Cc: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 26ba05e4c66ad3fafe08412ffcf8c328cc4640b0
Author: Grant Grundler <grundler@parisc-linux.org>
Date:   Sun Feb 11 00:04:04 2007 -0700

    PCI: pci.txt fix __devexit() usage
    
    Marin Mitov <mitov@issp.bas.bg> spotted a brainfart where I had
    failed to update copied text with *_remove and __devexit().
    
    Marin made a good comment in his email to me:
    | mydriver_probe() is _always_ executed, while mydriver_remove() is not.
    | See: include/linux/init.h
    
    Which says:
    /* Functions marked as __devexit may be discarded at kernel link time, depending
       on config options.  Newer versions of binutils detect references from
       retained sections to discarded sections and flag an error.  Pointers to
       __devexit functions must use __devexit_p(function_name), the wrapper will
       insert either the function_name or NULL, depending on the config options.
     */
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f95d882d81ee731be2a4a3b34f86810e29b68836
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 14:41:56 2007 -0800

    PCI/sysfs/kobject kernel-doc fixes
    
    Fix kernel-doc warnings in PCI, sysfs, and kobject files.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5d30bf309717a518d0c4180af41650d4dcd3bb38
Author: Manish Ahuja <ahuja@austin.ibm.com>
Date:   Thu Feb 8 16:01:17 2007 -0600

    [POWERPC] pseries: Enabling auto poweron after power is restored.
    
    During power outages, the UPS notifies the system for a shutdown.
    In the current setup, it isn't possible to poweron when power is
    restored.  This patch fixes the issue by calling the right
    ibm,power-off-ups token during such events.  It also adds a sysfs
    interface so userspace can specify whether or not to power on when
    power is restored.
    
    Signed-off-by: Manish Ahuja <ahuja@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit aebcbf39be0aadded32f4cd82c1d88a8cac4614b
Author: Olaf Hering <olaf@aepfle.de>
Date:   Fri Feb 16 10:20:46 2007 +0100

    [POWERPC] use winbond libata instead of ide driver for pseries CD drives
    
    Change the default for the built-in IDE on p610/p615/p630 from
    ide to libata. libata has better error handling and the drive can
    recover when hald does its CD media polling.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 143a42d16a18303d5c8d625730546f8b515b5d54
Author: Stuart Yoder <b08248@freescale.com>
Date:   Fri Feb 16 11:30:29 2007 -0600

    [POWERPC] powerpc: remove references to the obsolete linux,platform property
    
    Remove references to the linux,platform property from
    booting-without-of.txt since it is obsolete.
    
    Signed-off-by: Stuart Yoder <stuart.yoder@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 29cfe6f4fb7d187f65564764a0ecf2caf9d8ed58
Author: Timur Tabi <timur@freescale.com>
Date:   Fri Feb 16 12:01:29 2007 -0600

    [POWERPC] add of_get_mac_address and update fsl_soc.c to use it
    
    Add function of_get_mac_address(), which obtains the best MAC address to use
    from the device tree by checking various properties in order.  The order is:
    'mac-address', then 'local-mac-address', then 'address'.  It skips properties
    that contain invalid MAC addresses, which were probably not initialized
    by U-Boot.
    
    Update gfar_of_init() and fs_enet_of_init() in fsl_soc.c to call
    of_get_mac_address().
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ef665c1a06be719ed9a6b0ad7967137258d9457a
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 13 15:19:06 2007 -0800

    sysfs: fix build errors: uevent with CONFIG_SYSFS=n
    
    Fix source files to build with CONFIG_SYSFS=n.
    module_subsys is not available.
    
    SYSFS=n, MODULES=y:	T:y
    SYSFS=n, MODULES=n:	T:y
    
    SYSFS=y, MODULES=y:	T:y
    SYSFS=y, MODULES=n:	T:y
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e4a3c3f095ecc760fc557ca87e518e2e553fab4b
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Feb 13 22:39:27 2007 -0800

    pcmcia: some class_device fallout
    
    As found on some arm defconfigs.
    
    I only looked at how original patch changes things and other patches fix
    compilation. ;-)
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4aca67e5f54bf6ee439b5bdbc77007a547ad5b43
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Tue Feb 13 22:39:26 2007 -0800

    Driver core: device_add_attrs() cleanup
    
    Clean up the coding in device_add_attrs() a bit.
    
    Cc: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 873760fbf4d1c8c477a50386438303b6b89b6566
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Wed Feb 14 07:57:47 2007 +0100

    debugfs: Remove misleading comments.
    
    Just mention which error will be returned if debugfs is disabled. Callers
    should be able to figure out themselves what they need to check.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 66f5496393dcc9f9d05c46f00ed93d5040d6035b
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Tue Feb 13 12:13:54 2007 +0100

    debugfs: implement symbolic links
    
    debugfs: implement symbolic links
    
    Implement a new function debugfs_create_symlink() which can be used
    to create symbolic links in debugfs. This function can be useful
    for people moving functionality from /proc to debugfs (e.g. the
    gcov-kernel patch).
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b92be9f1ecd3c8b16e9bb22d55bb97b3d89f091a
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Wed Feb 14 21:03:39 2007 +0100

    Driver: remove redundant kobject_unregister checks
    
    Here is a patch that removes all redundant kobject_unregister argument checks.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1350770112bd9bd5696cb52deb712370012d80e0
Author: Martin Stoilov <mstoilov@odesys.com>
Date:   Mon Feb 5 16:15:23 2007 -0800

    kobject: kobj->k_name verification fix
    
    The function 'kobject_add' tries to verify the name of
    a new kobject instance is properly set before continuing.
        if (!kobj->k_name)
            kobj->k_name = kobj->name;
        if (!kobj->k_name) {
            pr_debug("kobject attempted to be registered with no name!\n");
            WARN_ON(1);
            return -EINVAL;
        }
    The statement:
        if (!kobj->k_name) {
            pr_debug("kobject attempted to be registered with no name!\n");
            WARN_ON(1);
            return -EINVAL;
        }
    is useless the way it is right now, because it can never be true. I
    think the
    code was intended to be:
        if (!kobj->k_name)
            kobj->k_name = kobj->name;
        if (!*kobj->k_name) {
            pr_debug("kobject attempted to be registered with no name!\n");
            WARN_ON(1);
            return -EINVAL;
        }
    because this would make sure the kobj->name buffer has something in it.
    So the missing '*' is just a typo. Although, I would much prefer
    expression like:
        if (*kobj->k_name == '\0') {
            pr_debug("kobject attempted to be registered with no name!\n");
            WARN_ON(1);
            return -EINVAL;
        }
    
    because this would've made the intention clear, in this patch I just restore
    the missing '*' without changing the coding style of the function.
    
    Signed-off-by: Martin Stoilov <mstoilov@odesys.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bb289bc46f3f0abeae58665242f0edb0c6ec501f
Author: Sergei Organov <osv@javad.com>
Date:   Fri Feb 2 20:43:12 2007 +0300

    serial: Add PCMCIA IDs for Quatech DSP-100 dual RS232 adapter.
    
    Add PCMCIA IDs for Quatech DSP-100 dual RS232 adapter.
    
    Signed-off-by: Sergei Organov <osv@javad.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c353c3fb0700a3c17ea2b0237710a184232ccd7f
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Fri Feb 2 16:39:12 2007 +0100

    Driver core: let request_module() send a /sys/modules/kmod/-uevent
    
    On recent systems, calls to /sbin/modprobe are handled by udev depending
    on the kind of device the kernel has discovered. This patch creates an
    uevent for the kernels internal request_module(), to let udev take control
    over the request, instead of forking the binary directly by the kernel.
    The direct execution of /sbin/modprobe can be disabled by setting:
      /sys/module/kmod/mod_request_helper (/proc/sys/kernel/modprobe)
    to an empty string, the same way /proc/sys/kernel/hotplug is disabled on an
    udev system.
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 89790fd789e024b23eb1fbccedd84a2015441ce0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Feb 12 22:33:06 2007 -0800

    Driver.h copyright update
    
    It was pointed out that I had not updated my copyright on driver.h
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 630e61f2fa9bc842f1065ffa023aae8065a5ab23
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Feb 16 14:58:08 2007 -0800

    IB/ipath: Make ipath_map_sg() static
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 38abaa63bf38dd5e086911e63fbea47ae34674ab
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Feb 16 14:41:14 2007 -0800

    IB/core: Fix sparse warnings about shadowed declarations
    
    Change a couple of variable names to avoid sparse warnings about
    symbols being shadowed.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c8f6a362bf3eb28ade6027b49bb160a336dd51c0
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Feb 15 17:00:18 2007 -0800

    RDMA/cma: Add multicast communication support
    
    Extend rdma_cm to support multicast communication.  Multicast support
    is added to the existing RDMA_PS_UDP port space, as well as a new
    RDMA_PS_IPOIB port space.  The latter port space allows joining the
    multicast groups used by IPoIB, which enables offloading IPoIB traffic
    to a separate QP.  The port space determines the signature used in the
    MGID when joining the group.  The newly added RDMA_PS_IPOIB also
    allows for unicast operations, similar to RDMA_PS_UDP.
    
    Supporting the RDMA_PS_IPOIB requires changing how UD QPs are initialized,
    since we can no longer assume that the qkey is constant.  This requires
    saving the Q_Key to use when attaching to a device, so that it is
    available when creating the QP.  The Q_Key information is exported to
    the user through the existing rdma_init_qp_attr() interface.
    
    Multicast support is also exported to userspace through the rdma_ucm.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit faec2f7b96b555055d0aa6cc6b83a537270bed52
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Feb 15 17:00:17 2007 -0800

    IB/sa: Track multicast join/leave requests
    
    The IB SA tracks multicast join/leave requests on a per port basis and
    does not do any reference counting: if two users of the same port join
    the same group, and one leaves that group, then the SA will remove the
    port from the group even though there is one user who wants to stay a
    member left.  Therefore, in order to support multiple users of the
    same multicast group from the same port, we need to perform reference
    counting locally.
    
    To do this, add an multicast submodule to ib_sa to perform reference
    counting of multicast join/leave operations.  Modify ib_ipoib (the
    only in-kernel user of multicast) to use the new interface.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8a2e65f87c66ab1e720f49378750cdd800f9e9cf
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Feb 16 00:16:13 2007 +0200

    IPoIB: CM error handling thinko fix
    
    ipoib_cm_alloc_rx_skb() might be called from IRQ context, so it must
    use dev_kfree_skb_any(), not kfree_skb().
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c52daa29760818772ee4211be4ee8d1c78b888d5
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Thu Feb 15 13:54:22 2007 -0600

    RDMA/cxgb3: Remove Open Grid Computing copyrights in iw_cxgb3 driver
    
    Remove the Open Grid Computing copyright.  It shouldn't be there.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit a1a750523b58cc4bb5a94fbb275a6f2a8bd9ace7
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Thu Feb 15 08:49:02 2007 -0600

    RDMA/cxgb3: Fail posts synchronously when in TERMINATE state
    
    For T3B devices, mark user QP in error once we transition
    to TERMINATE.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ebb90986e183296086b5d6678a838f125d743982
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Thu Feb 15 08:09:36 2007 -0600

    RDMA/iwcm: iw_cm_id destruction race fixes
    
    iwcm iw_cm_id destruction race condition fixes:
    
    - iwcm_deref_id() always wakes up if there's another reference.
    - clean up race condition in cm_work_handler().
    - create static void free_cm_id() which deallocs the work entries and then
      kfrees the cm_id memory.  This reduces code replication.
    - rem_ref() if this is the last reference -and- the IWCM owns freeing the
      cm_id, then free it.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Tom Tucker <tom@opengridcomputing.com>
    Acked-by: Krishna Kumar <krkumar2@in.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6bbcea0d42209ab5f0fae213050ad042c499ad8b
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Thu Feb 15 17:10:06 2007 +0100

    IB/ehca: Change query_port() to return LINK_UP instead UNKNOWN
    
    Set the port phys state as returned from ehca_query_port() to LINK_UP.
    ehca actually represents a logical HCA, whose phys/link state always
    is LINK_UP.
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4fd3006032446be2b331dd482e34c6a9e644a5b8
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Thu Feb 15 17:08:33 2007 +0100

    IB/ehca: Allow en/disabling scaling code via module parameter
    
    Allow users to en/disable scaling code when loading ib_ehca module,
    rather than requiring the module to be rebuilt to change the setting.
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8b16cef3df871b005f3a97e273b5b135ebfb3769
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Thu Feb 15 17:07:30 2007 +0100

    IB/ehca: Fix race condition/locking issues in scaling code
    
    Fix a race condition in find_next_cpu_online() and some other locking
    issues in ehca scaling code.
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 78d8d5f9ef8d6179e92b94481cfdfc45d396992f
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Thu Feb 15 17:06:33 2007 +0100

    IB/ehca: Rework irq handler
    
    Rework ehca interrupt handling to avoid/reduce missed irq events.
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 551fd6122d247d76124c4fdb6eb898cc8e3d74aa
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Feb 16 13:57:33 2007 -0800

    IPoIB: Only allow root to change between datagram and connected mode
    
    Change the permissions of the "mode" sysfs attribute to be S_IWUSR
    instead of S_IWUGO.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 11282b32a4ed7bb5fc390c83a1d6b9bc8017882c
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Feb 16 13:57:33 2007 -0800

    IB/mthca: Fix allocation of ICM chunks in coherent memory
    
    The change to allow allocating ICM chunks from coherent memory did not
    increment the count of sg entries properly, so a chunk that required
    more than allocation would not be mapped properly by the HCA.
    
    Fix this by adding the missing increment of chunk->nsg.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit fc89afce349a70f73d9c0b6d91a15c4913f071a0
Author: Dotan Barak <dotanb@dev.mellanox.co.il>
Date:   Tue Jan 9 11:53:07 2007 +0200

    IB/mthca: Allow the QP state transition RESET->RESET
    
    RESET->RESET is an allowed QP state transition, so mthca should handle
    it correctly, by just returning success without involving the firmware.
    
    Signed-off-by: Dotan Barak <dotanb@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9dd34948aaf631610355891a70cc55408eae840e
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Jan 17 22:11:27 2007 +0100

    [ARM] 4098/1: ARM: rtc_lock only used with rtc_cmos
    
    Fix build glitches on ARM ... the only user of "rtc_lock" today is the
    optional PC-style "CMOS" RTC driver, the legacy SA1100 RTC driver is
    not even in the tree any more.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9de1cc9c446d39546a3d9dd6f7d99a980a7ecc22
Author: Fiodor Suietov <fiodor.f.suietov@intel.com>
Date:   Tue Dec 19 12:33:20 2006 -0800

    [PATCH] libata: wrong sizeof for BUFFER
    
    I have reproduced the AE_AML_BUFFER_LIMIT exception mentioned in
    <http://bugzilla.kernel.org/show_bug.cgi?id=7689> basing on the SSDT ASL
    code and libata ata_acpi_push_id() code.  There is an oversight in
    ata_acpi_push_id() causing the exception.  The following update fixes it:
    
    Signed-off-by: Fiodor Suietov <fiodor.f.suietov@intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 08573a86c8da1379b4f341ab4781bb7c8685d5b6
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Fri Nov 10 16:14:47 2006 -0800

    [PATCH] libata: change order of _SDD/_GTF execution (resend #3)
    
    Make the sdd call come before gtf.  _SDD is used to provide
    input to the _GTF file, so it should be executed first.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
    (cherry picked from 89d74215e1e5b79ea084385b5c83d0e33cf2d655 commit)

commit 7ea1fbc2a2449bc034a3d255f36f2e5486d52fe8
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Thu Sep 28 11:29:12 2006 -0700

    [PATCH] libata: ACPI _SDD support
    
    _SDD (Set Device Data) is an ACPI method that is used to tell the
    firmware what the identify data is of the device that is attached to
    the port.  It is an optional method, and it's ok for it to be missing.
    Because of this, we always return success from the routine that calls
    this method, even if the execution fails.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
    (cherry picked from 39aa79e0a1f5f2e28aa341f035940746a98b45b1 commit)

commit 11ef697b37e3c85ce1ac21f7711babf1f5b12784
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Thu Sep 28 11:29:01 2006 -0700

    [PATCH] libata: ACPI and _GTF support
    
    _GTF is an acpi method that is used to reinitialize the drive.  It returns
    a task file containing ata commands that are sent back to the drive to restore
    it to boot up defaults.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
    (cherry picked from 9c69cab24b51a89664f4c0dfaf8a436d32117624 commit)

commit c24e912b61b1ab2301c59777134194066b06465c
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Thu Feb 15 23:16:18 2007 +0300

    ACPI: ec: add unlock in error path
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7c9d6f16f50d3aeb780e4f103a1ba8b35d9ae803
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 8 11:12:32 2007 -0500

    [SCSI] SCSI core: better initialization for sdev->scsi_level
    
    This patch will affect the CDB in INQUIRY commands sent to LUNs above 0
    when LUN-0 reports a scsi_level of 0; the LUN bits will no longer be set
    in the second byte of the CDB.  This is as it should be.  Nevertheless,
    it's possible that some wacky device might be adversely affected.  I doubt
    anyone will complain...
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 74feb53e8b5020e790e12c6331cbe885d276cc60
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 8 11:07:41 2007 -0500

    [SCSI] scsi_proc.c: display sdev->scsi_level correctly
    
    This patch (as833) fixes the "SCSI revision" output for
    /proc/scsi/scsi.  If the scsi_level value is 0 (UNKNOWN), we want it
    to show up as "0", not "ffffffff".
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cc5968c83edc8c797177db3adf95beafa2b7f365
Author: Sumant Patro <sumantp@lsil.com>
Date:   Wed Feb 14 13:05:42 2007 -0800

    [SCSI] megaraid_sas: update version and author info
    
    Signed-off-by: Sumant Patro <sumant.patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 02b01e010afeeb49328d35650d70721d2ca3fd59
Author: Sumant Patro <sumantp@lsil.com>
Date:   Wed Feb 14 13:00:55 2007 -0800

    [SCSI] megaraid_sas: return sync cache call with success
    
    FW does not support SYNCHRONIZE_CACHE cmd. FW flush cache on its own.
    So, we just return success from the megasas_queue_command.
    
    Signed-off-by: Sumant Patro <sumant.patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9f35fa8a14e6216a859e2dfbe50ade497f9603ef
Author: Sumant Patro <sumantp@lsil.com>
Date:   Wed Feb 14 12:55:45 2007 -0800

    [SCSI] megaraid_sas: replace pci_alloc_consitent with dma_alloc_coherent in ioctl path
    
    Replaced pci_alloc_consistent with dma_alloc_coherent from the ioctl path.
    This is to avoid situations where ioctl fails for lack of memory
    (when system under heavy stress).
    
    Signed-off-by: Sumant Patro <sumant.patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cf62a0a543fbab15286509d2e04e3dcf5549e966
Author: Sumant Patro <sumantp@lsil.com>
Date:   Wed Feb 14 12:41:55 2007 -0800

    [SCSI] megaraid_sas: add bios_param in scsi_host_template
    
    Signed-off-by: Sumant Patro <sumant.patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8a03d9a498eaf02c8a118752050a5154852c13bf
Merge: f8abea8... 41d8ca4...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 16 08:19:44 2007 -0800

    Merge branch 'for-linus' of git://www.atmel.no/~hskinnemoen/linux/kernel/avr32
    
    * 'for-linus' of git://www.atmel.no/~hskinnemoen/linux/kernel/avr32:
      [AVR32] Use per-controller spi_board_info structures
      [AVR32] Warn, don't BUG if clk_disable is called too many times
      [AVR32] Make sure all genclocks have a parent
      [AVR32] Remove unnecessary sys_nfsservctl conditional
      [AVR32] Wire up the SysV IPC calls properly
      [AVR32] Define ioremap_nocache, ioport_map and ioport_unmap
      [AVR32] Fix prototypes for __raw_writesb and friends

commit f8abea8f8c24ecdad6d6861bffb912f23f2741cd
Merge: ef29498... 1c14cfb...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 16 08:17:04 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] allow drm populated agp memory types cleanups
      [AGPGART] intel-agp: Use ARRAY_SIZE macro when appropriate
      [AGPGART] Add agp-type-to-mask-type method missing from some drivers.
      [AGPGART] Don't try to remap i810 registers on resume.
      [AGPGART] Allow drm-populated agp memory types
      [AGPGART] compat ioctl

commit ef29498655b18d2bfd69048e20835d19333981ab
Merge: 0187f22... 2b8c0e1...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 16 08:16:01 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq:
      [CPUFREQ] Longhaul - Redo Longhaul ver. 2
      [CPUFREQ] EPS - Correct 2nd brand test
      [CPUFREQ] Longhaul - Separate frequency and voltage transition
      [CPUFREQ] Longhaul - Models of Nehemiah
      [CPUFREQ] Whitespace fixup
      [CPUFREQ] Longhaul - Simplier minmult
      [CPUFREQ] CPU_FREQ_TABLE shouldn't be a def_tristate
      [CPUFREQ] ondemand governor use new cpufreq rwsem locking in work callback
      [CPUFREQ] ondemand governor restructure the work callback
      [CPUFREQ] Rewrite lock in cpufreq to eliminate cpufreq/hotplug related issues
      [CPUFREQ] Remove hotplug cpu crap
      [CPUFREQ] Enhanced PowerSaver driver
      [CPUFREQ] Longhaul - Add VT8235 support
      [CPUFREQ] Longhaul - Fix guess_fsb function
      [CPUFREQ] Longhaul - Remove duplicate tables
      [CPUFREQ] Longhaul - Introduce Nehemiah C
      [CPUFREQ] fix cpuinfo_cur_freq for CPU_HW_PSTATE
      [CPUFREQ] Longhaul - Remove "ignore_latency" option

commit af37acfb63d8e924550e67b884dbd1c478e26c96
Author: Sumant Patro <sumantp@lsil.com>
Date:   Wed Feb 14 12:34:46 2007 -0800

    [SCSI] megaraid_sas: do not process cmds if hw_crit_error is set
    
    Checks if hw_crit_error is set.
    If it is set, we donot process commands.
    Checks added in megasas_queue_command and command completion routines.
    
    Signed-off-by: Sumant Patro <sumant.patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a9b7320294f885be6087bdef7a0e25922c36eb1b
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Feb 16 01:46:25 2007 -0800

    [SCSI] scsi_transport.h should include scsi_device.h
    
    scsi_transport.h defines the inline function scsi_transport_device_data() that
    dereferences a pointer of "struct scsi_device *".  Since the struct is not
    known by the header this might break compilation.
    
    Include scsi/scsi_device.h to not rely on users doing the correct magic
    include order.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0187f221e96e3436d552c0c7143f183eb82fb658
Author: Ben Dooks <ben@fluff.org.uk>
Date:   Fri Feb 16 01:28:42 2007 -0800

    [PATCH] s3c2410fb: fix un-initialised dev field
    
    The current driver is not setting the dev field in the private data
    structure, which can lead to an OOPS if the driver tries to report an
    error.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 008983d9669b80ac628b6b09ce4d78e75844b294
Author: Thomas Hisch <t.hisch@gmail.com>
Date:   Fri Feb 16 01:28:41 2007 -0800

    [PATCH] ecryptfs: fix forgotten format specifier
    
    Add format specifier %d for uid in ecryptfs_printk
    
    Signed-off-by: Thomas Hisch <t.hisch@gmail.com>
    Cc: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit eb95e7ffa50fa2921ef1845a5dcb2fe5b21e83a2
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Fri Feb 16 01:28:40 2007 -0800

    [PATCH] eCryptfs: Reduce stack usage in ecryptfs_generate_key_packet_set()
    
    eCryptfs is gobbling a lot of stack in ecryptfs_generate_key_packet_set()
    because it allocates a temporary memory-hungry ecryptfs_key_record struct.
    This patch introduces a new kmem_cache for that struct and converts
    ecryptfs_generate_key_packet_set() to use it.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 29dbb3fc8020f025bc38b262ec494e19fd3eac02
Author: Neil Brown <neilb@suse.de>
Date:   Fri Feb 16 01:28:38 2007 -0800

    [PATCH] knfsd: stop NFSD writes from being broken into lots of little writes to filesystem
    
    When NFSD receives a write request, the data is typically in a number of
    1448 byte segments and writev is used to collect them together.
    
    Unfortunately, generic_file_buffered_write passes these to the filesystem
    one at a time, so an e.g.  32K over-write becomes a series of partial-page
    writes to each page, causing the filesystem to have to pre-read those pages
    - wasted effort.
    
    generic_file_buffered_write handles one segment of the vector at a time as
    it has to pre-fault in each segment to avoid deadlocks.  When writing from
    kernel-space (and nfsd does) this is not an issue, so
    generic_file_buffered_write does not need to break and iovec from nfsd into
    little pieces.
    
    This patch avoids the splitting when  get_fs is KERNEL_DS as it is
    from NFSd.
    
    This issue was introduced by commit 6527c2bdf1f833cc18e8f42bd97973d583e4aa83
    
    Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Norman Weathers <norman.r.weathers@conocophillips.com>
    Cc: Vladimir V. Saveliev <vs@namesys.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3160a711ef754758e7f85ae371cf900252c1a392
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Feb 16 01:28:37 2007 -0800

    [PATCH] knfsd: nfsd4: fix handling of directories without default ACLs
    
    When setting an ACL that lacks inheritable ACEs on a directory, we should set
    a default ACL of zero length, not a default ACL with all bits denied.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bec50c47aaf6f1f9247f1860547ab394a0802a4c
Author: J. Bruce Fields <bfields@snoopy.citi.umich.edu>
Date:   Fri Feb 16 01:28:36 2007 -0800

    [PATCH] knfsd: nfsd4: acls: avoid unnecessary denies
    
    We're inserting deny's between some ACEs in order to enforce posix draft acl
    semantics which prevent permissions from accumulating across entries in an
    acl.
    
    That's fine, but we're doing that by inserting a deny after *every* allow,
    which is overkill.  We shouldn't be adding them in places where they actually
    make no difference.
    
    Also replaced some helper functions for creating acl entries; I prefer just
    assigning directly to the struct fields--it takes a few more lines, but the
    field names provide some documentation that I think makes the result easier
    understand.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f43daf67871d9da5c638994416b4144eac63c992
Author: J. Bruce Fields <bfields@snoopy.citi.umich.edu>
Date:   Fri Feb 16 01:28:34 2007 -0800

    [PATCH] knfsd: nfsd4: acls: don't return explicit mask
    
    Return just the effective permissions, and forget about the mask.  It isn't
    worth the complexity.
    
    WARNING: This breaks backwards compatibility with overly-picky nfsv4->posix
    acl translation, as may has been included in some patched versions of libacl.
    To our knowledge no such version was every distributed by anyone outside citi.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f34f924274ad8f84c6d86ea9e52b0682347f5701
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Feb 16 01:28:34 2007 -0800

    [PATCH] knfsd: nfsd4: fix error return on unsupported acl
    
    We should be returning ATTRNOTSUPP, not NOTSUPP, when acls are unsupported.
    
    Also fix a comment.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a4db5fe5dfb3a5b5b550f1acd95ef3de01a3f063
Author: J. Bruce Fields <bfields@snoopy.citi.umich.edu>
Date:   Fri Feb 16 01:28:30 2007 -0800

    [PATCH] knfsd: nfsd4: fix memory leak on kmalloc failure in savemem
    
    The wrong pointer is being kfree'd in savemem() when defer_free returns with
    an error.
    
    Signed-off-by: Benny Halevy <bhalevy@panasas.com>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 28e05dd8457c7a7fa1c3faac169a95e0ce4b4a12
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Feb 16 01:28:30 2007 -0800

    [PATCH] knfsd: nfsd4: represent nfsv4 acl with array instead of linked list
    
    Simplify the memory management and code a bit by representing acls with an
    array instead of a linked list.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 575a6290f035b16e3301014d9b176422ec9062bb
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Feb 16 01:28:29 2007 -0800

    [PATCH] knfsd: nfsd4: simplify nfsv4->posix translation
    
    The code that splits an incoming nfsv4 ACL into inheritable and effective
    parts can be combined with the the code that translates each to a posix acl,
    resulting in simpler code that requires one less pass through the ACL.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7bdfa68c5e70b815e85dab0bdd9f48ec103c4002
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Feb 16 01:28:28 2007 -0800

    [PATCH] knfsd: nfsd4: relax checking of ACL inheritance bits
    
    The rfc allows us to be more permissive about the ACL inheritance bits we
    accept:
    
    	"If the server supports a single "inherit ACE" flag that applies to
    	both files and directories, the server may reject the request
    	(i.e., requiring the client to set both the file and directory
    	inheritance flags). The server may also accept the request and
    	silently turn on the ACE4_DIRECTORY_INHERIT_ACE flag."
    
    Let's take the latter option--the ACL is a complex attribute that could be
    rejected for a wide variety of reasons, and the protocol gives us little
    ability to explain the reason for the rejection, so erroring out is a
    user-unfriendly last resort.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f534a257acfd9dae0a689be64397919907b283ba
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Feb 16 01:28:27 2007 -0800

    [PATCH] knfsd: nfsd4: fix non-terminated string
    
    The server name is expected to be a null-terminated string, so we can't pass
    in the raw client identifier.
    
    What's more, the client identifier is just a binary, not necessarily
    printable, blob.  Let's just use the ip address instead.  The server name
    appears to exist just to help debugging by making some printk's more
    informative.
    
    Note that the string is copies into the rpc client structure, so the pointer
    to the local variable does not outlive the function call.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5575ddf75ca7e61d6f69b96368e03dd88edd4604
Author: Jan Beulich <jbeulich@novell.com>
Date:   Fri Feb 16 01:28:26 2007 -0800

    [PATCH] small irq management simplification
    
    Use mask_ack_irq() where possible.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 472900b8b02bf3782b06dcf0acdef26811c2b995
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Fri Feb 16 01:28:25 2007 -0800

    [PATCH] IRQ kernel-doc fixes
    
    Fix kernel-doc warnings in IRQ management.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d7e25f3394ba05a6d64cb2be42c2765fe72ea6b2
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:24 2007 -0800

    [PATCH] genirq: remove IRQ_DISABLED
    
    Now that disable_irq() defaults to delayed-disable semantics, the IRQ_DISABLED
    flag is not needed anymore.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 76d2160147f43f982dfe881404cfde9fd0a9da21
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:24 2007 -0800

    [PATCH] genirq: do not mask interrupts by default
    
    Never mask interrupts immediately upon request.  Disabling interrupts in
    high-performance codepaths is rare, and on the other hand this change could
    recover lost edges (or even other types of lost interrupts) by conservatively
    only masking interrupts after they happen.  (NOTE: with this change the
    highlevel irq-disable code still soft-disables this IRQ line - and if such an
    interrupt happens then the IRQ flow handler keeps the IRQ masked.)
    
    Mark i8529A controllers as 'never loses an edge'.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1f2ea0837dbc263ce2a2512c4e73c83df68a6a55
Author: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
Date:   Fri Feb 16 01:28:22 2007 -0800

    [PATCH] posix timers: RCU optimization for clock_gettime()
    
    Use RCU to avoid the need to acquire tasklist_lock in the single-threaded
    case of clock_gettime().  It still acquires tasklist_lock when for a
    (potentially multithreaded) process.  This change allows realtime
    applications to frequently monitor CPU consumption of individual tasks, as
    requested (and now deployed) by some off-list users.
    
    This has been in Ingo Molnar's -rt patchset since late 2005 with no
    problems reported, and tests successfully on 2.6.20-rc6, so I believe that
    it is long-since ready for mainline adoption.
    
    [paulmck@linux.vnet.ibm.com: fix exit()/posix_cpu_clock_get() race spotted by Oleg]
    Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7460ed2844ffad7141e30271c0c3da8336e66014
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:28:21 2007 -0800

    [PATCH] time: x86_64: re-enable vsyscall support for x86_64
    
    Cleanup and re-enable vsyscall gettimeofday using the generic clocksource
    infrastructure.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1489939f0ab64b96998e04068c516c39afe29654
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:28:20 2007 -0800

    [PATCH] time: x86_64: convert x86_64 to use GENERIC_TIME
    
    This patch converts x86_64 to use the GENERIC_TIME infrastructure and adds
    clocksource structures for both TSC and HPET (ACPI PM is shared w/ i386).
    
    [akpm@osdl.org: fix printk timestamps]
    [akpm@osdl.org: fix printk ckeanups]
    [akpm@osdl.org: hpet build fix]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c37e7bb5d2ce36ef377caabfced0b132bb1bf6a7
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:28:19 2007 -0800

    [PATCH] time: x86_64: split x86_64/kernel/time.c up
    
    In preparation for the x86_64 generic time conversion, this patch splits out
    TSC and HPET related code from arch/x86_64/kernel/time.c into respective
    hpet.c and tsc.c files.
    
    [akpm@osdl.org: fix printk timestamps]
    [akpm@osdl.org: cleanup]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2d0c87c3bc49c60ab5bbac401fb1ef37ff10bbe2
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:28:18 2007 -0800

    [PATCH] time: x86_64: hpet_address cleanup
    
    In preparation for supporting generic timekeeping, this patch cleans up
    x86-64's use of vxtime.hpet_address, changing it to just hpet_address as is
    also used in i386.  This is necessary since the vxtime structure will be going
    away.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit acc9a9dcdd0dd1d295c2f2ee02c27c761bd63cb1
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:28:17 2007 -0800

    [PATCH] generic: vsyscall-gtod support for GENERIC_TIME
    
    Provides generic infrastructure for vsyscall-gtod.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 88ad0bf6890505cbd9ca1dbb79944a27b5c8697d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:16 2007 -0800

    [PATCH] Add SysRq-Q to print timer_list debug info
    
    Add SysRq-Q to print pending timers and other timer info.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 289f480af87e45f7a6de6ba9b4c061c2e259fe98
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:15 2007 -0800

    [PATCH] Add debugging feature /proc/timer_list
    
    add /proc/timer_list, which prints all currently pending (high-res) timers,
    all clock-event sources and their parameters in a human-readable form.
    
    Sample output:
    
    Timer List Version: v0.1
    HRTIMER_MAX_CLOCK_BASES: 2
    now at 4246046273872 nsecs
    
    cpu: 0
     clock 0:
      .index:      0
      .resolution: 1 nsecs
      .get_time:   ktime_get_real
      .offset:     1273998312645738432 nsecs
    active timers:
     clock 1:
      .index:      1
      .resolution: 1 nsecs
      .get_time:   ktime_get
      .offset:     0 nsecs
    active timers:
     #0: <f5a90ec8>, hrtimer_sched_tick, hrtimer_stop_sched_tick, swapper/0
     # expires at 4246432689566 nsecs [in 386415694 nsecs]
     #1: <f5a90ec8>, hrtimer_wakeup, do_nanosleep, pcscd/2050
     # expires at 4247018194689 nsecs [in 971920817 nsecs]
     #2: <f5a90ec8>, hrtimer_wakeup, do_nanosleep, irqbalance/1909
     # expires at 4247351358392 nsecs [in 1305084520 nsecs]
     #3: <f5a90ec8>, hrtimer_wakeup, do_nanosleep, crond/2157
     # expires at 4249097614968 nsecs [in 3051341096 nsecs]
     #4: <f5a90ec8>, it_real_fn, do_setitimer, syslogd/1888
     # expires at 4251329900926 nsecs [in 5283627054 nsecs]
      .expires_next   : 4246432689566 nsecs
      .hres_active    : 1
      .check_clocks   : 0
      .nr_events      : 31306
      .idle_tick      : 4246020791890 nsecs
      .tick_stopped   : 1
      .idle_jiffies   : 986504
      .idle_calls     : 40700
      .idle_sleeps    : 36014
      .idle_entrytime : 4246019418883 nsecs
      .idle_sleeptime : 4178181972709 nsecs
    
    cpu: 1
     clock 0:
      .index:      0
      .resolution: 1 nsecs
      .get_time:   ktime_get_real
      .offset:     1273998312645738432 nsecs
    active timers:
     clock 1:
      .index:      1
      .resolution: 1 nsecs
      .get_time:   ktime_get
      .offset:     0 nsecs
    active timers:
     #0: <f5a90ec8>, hrtimer_sched_tick, hrtimer_restart_sched_tick, swapper/0
     # expires at 4246050084568 nsecs [in 3810696 nsecs]
     #1: <f5a90ec8>, hrtimer_wakeup, do_nanosleep, atd/2227
     # expires at 4261010635003 nsecs [in 14964361131 nsecs]
     #2: <f5a90ec8>, hrtimer_wakeup, do_nanosleep, smartd/2332
     # expires at 5469485798970 nsecs [in 1223439525098 nsecs]
      .expires_next   : 4246050084568 nsecs
      .hres_active    : 1
      .check_clocks   : 0
      .nr_events      : 24043
      .idle_tick      : 4246046084568 nsecs
      .tick_stopped   : 0
      .idle_jiffies   : 986510
      .idle_calls     : 26360
      .idle_sleeps    : 22551
      .idle_entrytime : 4246043874339 nsecs
      .idle_sleeptime : 4170763761184 nsecs
    
    tick_broadcast_mask: 00000003
    event_broadcast_mask: 00000001
    
    CPU#0's local event device:
    
    Clock Event Device: lapic
     capabilities:   0000000e
     max_delta_ns:   807385544
     min_delta_ns:   1443
     mult:           44624025
     shift:          32
     set_next_event: lapic_next_event
     set_mode:       lapic_timer_setup
     event_handler:  hrtimer_interrupt
      .installed:  1
      .expires:    4246432689566 nsecs
    
    CPU#1's local event device:
    
    Clock Event Device: lapic
     capabilities:   0000000e
     max_delta_ns:   807385544
     min_delta_ns:   1443
     mult:           44624025
     shift:          32
     set_next_event: lapic_next_event
     set_mode:       lapic_timer_setup
     event_handler:  hrtimer_interrupt
      .installed:  1
      .expires:    4246050084568 nsecs
    
    Clock Event Device: hpet
     capabilities:   00000007
     max_delta_ns:   2147483647
     min_delta_ns:   3352
     mult:           61496110
     shift:          32
     set_next_event: hpet_next_event
     set_mode:       hpet_set_mode
     event_handler:  handle_nextevt_broadcast
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 82f67cd9fca8c8762c15ba7ed0d5747588c1e221
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:13 2007 -0800

    [PATCH] Add debugging feature /proc/timer_stat
    
    Add /proc/timer_stats support: debugging feature to profile timer expiration.
    Both the starting site, process/PID and the expiration function is captured.
    This allows the quick identification of timer event sources in a system.
    
    Sample output:
    
    # echo 1 > /proc/timer_stats
    # cat /proc/timer_stats
    Timer Stats Version: v0.1
    Sample period: 4.010 s
      24,     0 swapper          hrtimer_stop_sched_tick (hrtimer_sched_tick)
      11,     0 swapper          sk_reset_timer (tcp_delack_timer)
       6,     0 swapper          hrtimer_stop_sched_tick (hrtimer_sched_tick)
       2,     1 swapper          queue_delayed_work_on (delayed_work_timer_fn)
      17,     0 swapper          hrtimer_restart_sched_tick (hrtimer_sched_tick)
       2,     1 swapper          queue_delayed_work_on (delayed_work_timer_fn)
       4,  2050 pcscd            do_nanosleep (hrtimer_wakeup)
       5,  4179 sshd             sk_reset_timer (tcp_write_timer)
       4,  2248 yum-updatesd     schedule_timeout (process_timeout)
      18,     0 swapper          hrtimer_restart_sched_tick (hrtimer_sched_tick)
       3,     0 swapper          sk_reset_timer (tcp_delack_timer)
       1,     1 swapper          neigh_table_init_no_netlink (neigh_periodic_timer)
       2,     1 swapper          e1000_up (e1000_watchdog)
       1,     1 init             schedule_timeout (process_timeout)
    100 total events, 25.24 events/sec
    
    [ cleanups and hrtimers support from Thomas Gleixner <tglx@linutronix.de> ]
    [bunk@stusta.de: nr_entries can become static]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8bfd9a7a229b5f3d3eda5d7d45c2eebec5b4ba16
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:12 2007 -0800

    [PATCH] hrtimers: prevent possible itimer DoS
    
    Fix potential setitimer DoS with high-res timers by pushing itimer rearm
    processing to process context.
    
    [Fixes from: Ingo Molnar <mingo@elte.hu>]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 54cdfdb47f73b5af3d1ebb0f1e383efbe70fde9e
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:11 2007 -0800

    [PATCH] hrtimers: add high resolution timer support
    
    Implement high resolution timers on top of the hrtimers infrastructure and the
    clockevents / tick-management framework.  This provides accurate timers for
    all hrtimer subsystem users.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d40891e75fc1f646dce57d5d3bd1349a6aaf7a0e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:10 2007 -0800

    [PATCH] i386: enable dynticks in kconfig
    
    Enable dynamic ticks selection.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f8b5035b9abd01b52ec6416f0c6bade7e603742c
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:09 2007 -0800

    [PATCH] i386 prepare nmi watchdog for dynticks
    
    The NMI watchdog implementation assumes that the local APIC timer interrupt is
    happening.  This assumption is not longer true when high resolution timers and
    dynamic ticks come into play, as they may switch off the local APIC timer
    completely.  Take the PIT/HPET interrupts into account too, to avoid false
    positives.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Rohit Seth <rohitseth@google.com>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 741673473a5b26497d5390f38d478362e27e22ad
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:28:07 2007 -0800

    [PATCH] i386 prepare for dyntick
    
    Prepare i386 for dyntick: idle handler callbacks.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d36b49b91065dbfa305c5a66010b3497c741eee0
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:06 2007 -0800

    [PATCH] i386 rework local apic timer calibration
    
    The local apic timer calibration has two problem cases:
    
    1.  The calibration is based on readout of the PIT/HPET timer to detect the
       wrap of the periodic tick.  It happens that a box gets stuck in the
       calibration loop due to a PIT with a broken readout function.
    
    2.  CoreDuo boxen show a sporadic PIT runs too slow defect, which results
       in a wrong lapic calibration.  The PIT goes back to normal operation once
       the lapic timer is switched to periodic mode.
    
    Both are existing and unfixed problems in the current upstream kernel and
    prevent certain laptops and other systems from booting Linux.
    
    Rework the code to address both problems:
    
    - Make the calibration interrupt driven.  This removes the wait_timer_tick
      magic hackery from lapic.c and time_hpet.c.  The clockevents framework
      allows easy substitution of the global tick event handler for the
      calibration.  This is more accurate than monitoring jiffies.  At this point
      of the boot process, nothing disturbes the interrupt delivery, so the
      results are very accurate.
    
    - Verify the calibration against the PM timer, when available by using the
      early access function.  When the measured calibration period is outside of
      an one percent window, then the lapic timer calibration is adjusted to the
      pm timer result.
    
    - Verify the calibration by running the lapic timer with the calibration
      handler.  Disable lapic timer in case of deviation.
    
    This also removes the "synchronization" of the local apic timer to the global
    tick.  This synchronization never worked, as there is no way to synchronize
    PIT(HPET) and local APIC timer.  The synchronization by waiting for the tick
    just alignes the local APIC timer for the first events, but later the events
    drift away due to the different clocks.  Removing the "sync" is just
    randomizing the asynchronous behaviour at setup time.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Rohit Seth <rohitseth@google.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e9e2cdb412412326c4827fc78ba27f410d837e6e
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:04 2007 -0800

    [PATCH] clockevents: i386 drivers
    
    Add clockevent drivers for i386: lapic (local) and PIT/HPET (global).  Update
    the timer IRQ to call into the PIT/HPET driver's event handler and the
    lapic-timer IRQ to call into the lapic clockevent driver.  The assignement of
    timer functionality is delegated to the core framework code and replaces the
    compile and runtime evalution in do_timer_interrupt_hook()
    
    Use the clockevents broadcast support and implement the lapic_broadcast
    function for ACPI.
    
    No changes to existing functionality.
    
    [ kdump fix from Vivek Goyal <vgoyal@in.ibm.com> ]
    [ fixes based on review feedback from Arjan van de Ven <arjan@infradead.org> ]
    Cleanups-from: Adrian Bunk <bunk@stusta.de>
    Build-fixes-from: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 79bf2bb335b85db25d27421c798595a2fa2a0e82
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:03 2007 -0800

    [PATCH] tick-management: dyntick / highres functionality
    
    With Ingo Molnar <mingo@elte.hu>
    
    Add functions to provide dynamic ticks and high resolution timers.  The code
    which keeps track of jiffies and handles the long idle periods is shared
    between tick based and high resolution timer based dynticks.  The dyntick
    functionality can be disabled on the kernel commandline.  Provide also the
    infrastructure to support high resolution timers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f8381cba04ba8173fd5a2b8e5cd8b3290ee13a98
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:02 2007 -0800

    [PATCH] tick-management: broadcast functionality
    
    With Ingo Molnar <mingo@elte.hu>
    
    Add broadcast functionality, so per cpu clock event devices can be registered
    as dummy devices or switched from/to broadcast on demand.  The broadcast
    function distributes the events via the broadcast function of the clock event
    device.  This is primarily designed to replace the switch apic timer to / from
    IPI in power states, where the apic stops.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 906568c9c668ff994f4078932ec6ae1e3950d1af
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:01 2007 -0800

    [PATCH] tick-management: core functionality
    
    With Ingo Molnar <mingo@elte.hu>
    
    The tick-management code is the first user of the clockevents layer.  It takes
    clock event devices from the clock events core and uses them to provide the
    periodic tick.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d316c57ff6bfad9557462b9100f25c6260d2b774
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:28:00 2007 -0800

    [PATCH] clockevents: add core functionality
    
    Architectures register their clock event devices, in the clock events core.
    Users of the clockevents core can get clock event devices for their use.  The
    clockevents core code provides notification mechanisms for various clock
    related management events.
    
    This allows to control the clock event devices without the architectures
    having to worry about the details of function assignment.  This is also a
    preliminary for high resolution timers and dynamic ticks to allow the core
    code to control the clock functionality without intrusive changes to the
    architecture code.
    
    [Fixes-by: Ingo Molnar <mingo@elte.hu>]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e05d723f98595b2f4d368f63636a997d98703304
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:58 2007 -0800

    [PATCH] i386, apic: clean up the APIC code
    
    The apic code is quite unstructured and missing a lot of comments.
    
    - Restructure the code into helper functions, timer, setup/shutdown,
      interrupt and power management blocks.
    - Fixup comments.
    - Namespace fixups
    - Inline helpers for version and is_integrated
    - Combine the ack_bad_irq functions
    
    No functional changes.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Rohit Seth <rohitseth@google.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d66bea57e779cd592657cca6e61345ae899b78d9
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:57 2007 -0800

    [PATCH] Allow early access to the power management timer
    
    Allow early access to the power management timer by exposing the verified read
    function and providing a helper function which checks the pmtmr_ioport
    variable and returns either the pm timer readout or 0 in case the pm timer is
    not available.
    
    Create a new header file and replace also the ifdef'ed extern definition in
    arch/i386/kernel/acpi/boot.c
    
    This is a preperatory patch for the rework of the local apic timer
    calibration.
    
    No functional changes.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 169a0abbe32813af4904cc1605c0f7ea0534f77b
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:55 2007 -0800

    [PATCH] ACPI keep track of timer broadcasting
    
    This is a preperatory patch for highres/dyntick:
    
    - replace the big #ifdef ARCH_APICTIMER_STOPS_ON_C3 hackery by functions
    
    - remove the double switch in the power verify function (in the worst case
      we switched ipi to apic and 20usec later apic to ipi)
    
    - keep track of the the state which stops local APIC timer
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Len Brown <len.brown@intel.com>
    Cc: <linux-acpi@vger.kernel.org>
    Cc: Andi Kleen <ak@suse.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3434933b17fa64adddf83059603c61296f6e1ee2
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:54 2007 -0800

    [PATCH] ACPI: fix missing include for UP
    
    apic.h does not get included on UP compiles.  That way the
    APICTIMER_STOPS_ON_C3 is not there and UP boxen have no support for timer
    broadcasting.  This was never noticed, because the lapic timer is only used
    for profiling on UP.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Len Brown <len.brown@intel.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dd3629b5e5f03dde6d8a17bb798bcb0ba6c3f579
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:53 2007 -0800

    [PATCH] hrtimers: move and add documentation
    
    Move the initial hrtimers.txt document to the new directory
    "Documentation/hrtimers"
    
    Add design notes for the high resolution timer and dynamic tick functionality.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5cfb6de7cd7c8f04655c9d23533ca506647beace
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:52 2007 -0800

    [PATCH] hrtimers: clean up callback tracking
    
    Reintroduce ktimers feature "optimized away" by the ktimers review process:
    remove the curr_timer pointer from the cpu-base and use the hrtimer state.
    
    No functional changes.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 303e967ff90a9d19ad3f8c9028ccbfa7f408fbb3
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:51 2007 -0800

    [PATCH] hrtimers; add state tracking
    
    Reintroduce ktimers feature "optimized away" by the ktimers review process:
    multiple hrtimer states to enable the running of hrtimers without holding the
    cpu-base-lock.
    
    (The "optimized" rbtree hack carried only 2 states worth of information and we
    need 4 for high resolution timers and dynamic ticks.)
    
    No functional changes.
    
    Build-fixes-from: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3c8aa39d7c445ae2612b6b626f76f077e7a7ab0d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:50 2007 -0800

    [PATCH] hrtimers: cleanup locking
    
    Improve kernel/hrtimers.c locking: use a per-CPU base with a lock to control
    locking of all clocks belonging to a CPU.  This simplifies code that needs to
    lock all clocks at once.  This makes life easier for high-res timers and
    dyntick.
    
    No functional changes.
    
    [ optimization change from Andrew Morton <akpm@osdl.org> ]
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c9cb2e3d7c9178ab75d0942f96abb3abe0369906
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:49 2007 -0800

    [PATCH] hrtimers: namespace and enum cleanup
    
    - hrtimers did not use the hrtimer_restart enum and relied on the implict
      int representation. Fix the prototypes and the functions using the enums.
    - Use seperate name spaces for the enumerations
    - Convert hrtimer_restart macro to inline function
    - Add comments
    
    No functional changes.
    
    [akpm@osdl.org: fix input driver]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fd064b9b7770d5c7705bf9542950c7bd81c30f98
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:47 2007 -0800

    [PATCH] Extend next_timer_interrupt() to use a reference jiffie
    
    For CONFIG_NO_HZ we need to calculate the next timer wheel event based on a
    given jiffie value.  Extend the existing code to allow the extra 'now'
    argument.  Provide a compability function for the existing implementations to
    call the function with now == jiffies.  (This also solves the racyness of the
    original code vs.  jiffies changing during the iteration.)
    
    No functional changes to existing users of this infrastructure.
    
    [ remove WARN_ON() that triggered on s390, by Carsten Otte <cotte@de.ibm.com> ]
    [ made new helper static, Adrian Bunk <bunk@stusta.de> ]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1cfd68496e53f7be09a3c1358d1d389004217541
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:46 2007 -0800

    [PATCH] Fix cascade lookup of next_timer_interrupt
    
    When searching for the next pending timer in the timer wheel we need to take
    the cascade into account.  The current code has several problems:
    
     1. it looks into the previous cascade
     2. it ignores a pending cascade
     3. it ignores multiple cascades
    
    Change the cascade lookup, so it calculates the array index from the point of
    the next cascade and always look at the cascade buckets, when the cascade is
    pending, i.e.  gets executed in the next timer softirq.  When multiple
    cascades are pending, then lookup the next buckets too.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dde4b2b5f4ed275250488dabdaf282d9c6e7e2b8
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:27:45 2007 -0800

    [PATCH] uninline irq_enter()
    
    Uninline irq_enter().  [dynticks adds more stuff to it]
    
    No functional changes.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 07190a08eef3666a8687070226c8d403c1d548b7
Author: Marcelo Tosatti <marcelo@kvack.org>
Date:   Fri Feb 16 01:27:44 2007 -0800

    [PATCH] Mark TSC on GeodeLX reliable
    
    The Geode can safely use the TSC for highres, since:
    
    1) Does not support frequency scaling,
    
    2) The TSC _does_ count when the CPU is halted.  Furthermore, the Geode
       supports a mode called "suspension on halt", where Suspend mode (which
       interacts with the power management states) is entered.  TSC counting
       during suspend mode is controlled by bit 8 of the Bus Controller
       Configuration Register #0 (thanks Tom!).
    
    3) no SMP :)
    
    Check if "RTSC counts during suspension" and remove the requirement for
    verification, so the clocksource code can safely select it as an timesource
    for the highres timers subsystem.
    
    Signed-off-by: Marcelo Tosatti <marcelo@kvack.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5d8b34fdcb384161552d01ee8f34af5ff11f9684
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:43 2007 -0800

    [PATCH] clocksource: Add verification (watchdog) helper
    
    The TSC needs to be verified against another clocksource.  Instead of using
    hardwired assumptions of available hardware, provide a generic verification
    mechanism.  The verification uses the best available clocksource and handles
    the usability for high resolution timers / dynticks of the clocksource which
    needs to be verified.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7e69f2b1ead2a4c51c12817f18263ff0e59335a6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:42 2007 -0800

    [PATCH] clocksource: Remove the update callback
    
    The clocksource code allows direct updates of the rating of a given
    clocksource now.  Change TSC unstable tracking to use this interface and
    remove the update callback.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 877fe38029366c19def24359627db8cc24d9fef6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:40 2007 -0800

    [PATCH] clocksource: fixup is_continous changes on MIPS
    
    Fixup the is_contionous replacement by a flag field.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cc02d809cc629f4e90b917aa0f9efea85221ccdb
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:39 2007 -0800

    [PATCH] clocksource: fixup is_continous changes on S390
    
    Fixup the is_contionous replacement by a flag field.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2693506c41c20362eefb38005ee34dca7ac8dc71
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:38 2007 -0800

    [PATCH] clocksource: fixup is_continous changes on AVR32
    
    Fixup the is_contionous replacement by a flag field.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c66699a749eb0d84c6ebc3aac659e9f71d1aba14
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:37 2007 -0800

    [PATCH] clocksource: fixup is_continous changes on ARM
    
    Fixup the is_contionous replacement by a flag field.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 73b08d2aa4245806ef1bdd48463e9a0b045c62cf
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:36 2007 -0800

    [PATCH] clocksource: replace is_continuous by a flag field
    
    Using a flag filed allows to encode more than one information into a variable.
    Preparatory patch for the generic clocksource verification.
    
    [mingo@elte.hu: convert vmitime.c to the new clocksource flag]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 95492e4646e5de8b43d9a7908d6177fb737b61f0
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:27:34 2007 -0800

    [PATCH] x86: rewrite SMP TSC sync code
    
    make the TSC synchronization code more robust, and unify it between x86_64 and
    i386.
    
    The biggest change is the removal of the 'fix up TSCs' code on x86_64 and
    i386, in some rare cases it was /causing/ time-warps on SMP systems.
    
    The new code only checks for TSC asynchronity - and if it can prove a
    time-warp (if it can observe the TSC going backwards when going from one CPU
    to another within a critical section), then the TSC clock-source is turned
    off.
    
    The TSC synchronization-checking code also got moved into a separate file.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 92c7e00254b2d0efc1e36ac3e45474ce1871b6b2
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:33 2007 -0800

    [PATCH] Simplify the registration of clocksources
    
    Enqueue clocksources in rating order to make selection of the clocksource
    easier.  Also check the match with an user override at enqueue time.
    
    Preparatory patch for the generic clocksource verification.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 26a08eb301a2e3fce5a501e3dd26cf3ec46591d7
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:32 2007 -0800

    [PATCH] i386 Remove useless code in tsc.c
    
    The delayed work code in arch/i386/kernel/tsc.c is an unused leftover of the
    GTOD conversion. Remove it.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c1d370e167d66b10bca3b602d3740405469383de
Author: John Stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:27:31 2007 -0800

    [PATCH] i386: use GTOD persistent clock support
    
    Persistent clock support: do proper timekeeping across suspend/resume, i386
    arch support.
    
    [bunk@stusta.de: cleanup]
    Build-fixes-from: Andrew Morton <akpm@osdl.org>
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 411187fb05cd11676b0979d9fbf3291db69dbce2
Author: John Stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:27:30 2007 -0800

    [PATCH] GTOD: persistent clock support
    
    Persistent clock support: do proper timekeeping across suspend/resume.
    
    [bunk@stusta.de: cleanup]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9f907c0144496e464bd5ed5a99a51227d63a9c0b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:27:29 2007 -0800

    [PATCH] Fix timeout overflow with jiffies
    
    Prevent timeout overflow if timer ticks are behind jiffies (due to high
    softirq load or due to dyntick), by limiting the valid timeout range to
    MAX_LONG/2.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 41cf54455da5e5dc847a9733d49ca23b5e7dd59e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:27:28 2007 -0800

    [PATCH] Fix multiple conversion bugs in msecs_to_jiffies
    
    Fix multiple conversion bugs in msecs_to_jiffies().
    
    The main problem is that this condition:
    
    	if (m > jiffies_to_msecs(MAX_JIFFY_OFFSET))
    
    overflows if HZ is smaller than 1000!
    
    This change is user-visible: for HZ=250 SUS-compliant poll()-timeout
    value of -20 is mistakenly converted to 'immediate timeout'.
    
    (The new dyntick code also triggered this, that's how we noticed.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8b9365d753d9870bb6451504c13570b81923228f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Feb 16 01:27:27 2007 -0800

    [PATCH] Uninline jiffies.h functions
    
    There are loads of fat functions hidden in jiffies.h.  Uninline them.  No code
    changes.
    
    [jeremy@goop.org: export fix]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f4304ab21513b834c8fe3403927c60c2b81a72d7
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Feb 16 01:27:26 2007 -0800

    [PATCH] HZ free ntp
    
    Distangle the NTP update from HZ.  This is necessary for dynamic tick enabled
    kernels.
    
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 771ee3b04eaac6184312825eb600b4c598f027a5
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:25 2007 -0800

    [PATCH] Add a function to handle interrupt affinity setting
    
    Provide funtions to:
     - check, whether an interrupt can set the affinity
     - pin the interrupt to a given cpu
    
    Necessary for the ability to setup clocksources more flexible (e.g.  use the
    different HPET channels per CPU)
    
    [akpm@osdl.org: alpha build fix]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 950f4427c2ddc921164088a20f01304cf231437c
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Feb 16 01:27:24 2007 -0800

    [PATCH] Add irq flag to disable balancing for an interrupt
    
    Add a flag so we can prevent the irq balancing of an interrupt.  Move the
    bits, so we have room for more :)
    
    Necessary for the ability to setup clocksources more flexible (e.g.  use the
    different HPET channels per CPU)
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b463fc60730bea6cdd73fec6edc6ec4658d47d37
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Feb 16 01:27:23 2007 -0800

    [PATCH] vmi-versus-hrtimers
    
    arch/i386/kernel/built-in.o: In function `vmi_stop_hz_timer':
    : undefined reference to `next_timer_interrupt'
    
    If CONFIG_NO_HZ, next_timer_interrupt() doesn't exist (and presumably doesn't
    make sense).
    
    Perhaps VMI shouildn't be playing with timer internals at this level.
    
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c6025a79f5d438bba0186fbb230dc780e876edf2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Feb 16 01:27:22 2007 -0800

    [PATCH] correct CONFIG_GIGASET_M101 Makefile entry
    
    Advanced Mathematics, lesson 1:
    101 != 105
    
    ;-)
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 838e56a11cdb2abaf490eb7879ab021db938d47d
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Feb 16 01:27:21 2007 -0800

    [PATCH] uml: fix 2.6.20 hang
    
    A previous cleanup misused need_poll, which had a fairly broken interface.
    It implemented a growable array, changing the used elements count itself,
    but leaving it up to the caller to fill in the actual elements, including
    the entire array if the array had to be reallocated.  This worked because
    the previous users were switching between two such structures, and the
    elements were copied from the inactive array to the active array after
    making sure the active array had enough room.
    
    maybe_sigio_broken was made to use need_poll, but it was operating on a
    single array, so when the buffer was reallocated, the previous contents
    were lost.
    
    This patch makes need_poll implement more sane semantics.  It merely
    assures that the array is of the proper size and that the contents are
    preserved.  It is up to the caller to adjust the used elements count and to
    ensure that the proper elements are resent.
    
    This manifested itself as a hang in 2.6.20 as the uninitialized buffer
    convinced UML that one of its own file descriptors didn't support SIGIO and
    needed to be watched by poll in a separate thread.  The result was an
    interrupt flood as control traffic over this descriptor sparked interrupts,
    which resulted in more control traffic, ad nauseum.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit beb497ab48b1639282129f7bc18fef311fffff3d
Author: Dmitriy Monakhov <dmonakhov@openvz.org>
Date:   Fri Feb 16 01:27:18 2007 -0800

    [PATCH] __page_symlink retry loop error code fix
    
    If prepare_write or commit_write return AOP_TRUNCATED_PAGE we jump to
    "retry" label and than if find_or_create_page() failed function return
    incorrect error code.
    
    Signed-off-by: Dmitriy Monakhov <dmonakhov@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fb4d64e78ceab77cf20f7796f74aa10ebe862032
Author: Frederik Deweerdt <deweerdt@free.fr>
Date:   Fri Feb 16 01:27:15 2007 -0800

    [PATCH] pci_iomap_regions() error handling fix
    
    It appears that the pcim_iomap_regions() function doesn't get the error
    handling right. It BUGs early at boot with a backtrace along the lines of:
    
    ahci_init
    pci_register_driver
    driver_register
    [...]
    ahci_init_one
    pcim_iomap_region
    pcim_iounmap
    
    The following patch allows me to boot. Only the if(mask..) continue;
    part fixes the problem actually, the gotos where changed so that we
    don't try to unmap something we couldn't map anyway.
    
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Tejun Heo <htejun@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f5de611148c8370cbe50796ca5567ca624b99686
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Feb 16 01:27:14 2007 -0800

    [PATCH] GPIO core documentation
    
    Small updates to the GPIO documentation, addressing feedback and
    fixing a few spelling errors.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e790b3dd2b59e2418923fa0122d53e57ffa5a868
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Feb 16 01:46:24 2007 -0800

    [SCSI] aic79xx: remove extra newline from info message
    
    This extra newline character introduces a completely empty line in dmesg as
    the calling function itself adds a newline.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e423ee31db92d4e298c137814a4341e1cd05739e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Feb 16 01:46:38 2007 -0800

    [SCSI] scsi_scan.c: handle bad inquiry responses
    
    A particular USB device has been reporting short inquiry lengths.  The
    SCSI code cannot operate properly unless we get an inquiry length of
    36 or above (because of the way we parse vendor and product), so
    assume at least 36 bytes are valid even if the device reports fewer.
    This is wrong, but it's no worse than what we're doing now (using the
    garbage beyond the last reported valid byte).
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d71a1dc62b0380ab9c4022dcba02775a791c3d7e
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Feb 16 09:57:22 2007 -0600

    [POWERPC] 83xx: Cleaned up 83xx platform dts files
    
    * Fixed up top level compatible property for all boards
    * Removed explicit linux,phandle usage. Use references and labels now
    * Fixed interrupt sense attribute, some interrupts were marked edge, that are level
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit a29fdd3c2a3e53b67baa5031372fd78fddaf48fa
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Feb 15 15:25:35 2007 -0600

    [SCSI] aic94xx: tie driver to the major number of the sequencer firmware
    
    The sequencer firmware file has both a string (currently showing
    V17/10c6) and a number (currently set to 1.1).  It has become apparent
    that Adaptec may issue sequencer firmware in the future which could be
    incompatible with the current driver.  Therefore, the driver will be
    tied to the particular major number of the firmware (i.e. the current
    driver will load any 1.x firmware).  Additionally, the driver will print
    out both the ascii string and the major number, so with this pach the
    current firmware will print out
    
    aic94xx: Found sequencer firmware version 1.1 (V17/10c6)
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d63f375051bfb1506fa546db840af8510d1cd60
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Feb 14 14:28:36 2007 -0600

    [SCSI] lpfc: add PCI error recovery support
    
    This patch adds PCI Error recovery support to the
    Emulex Lightpulse Fibrechannel (lpfc) SCSI device driver.
    Lightly tested at this point, works.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Acked-by: Bino Sebastian <Bino.Sebastian@Emulex.Com>
    Acked-by: James Smart <james.smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4520b0089b41151ab3cc3ae1ee92d0aa19d88aae
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Wed Feb 14 01:40:39 2007 +0100

    [SCSI] megaraid: pci_module_init to pci_register_driver
    
    Convert pci_module_init() to pci_register_driver().
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Acked-by: Sumant Patro <Sumant.Patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 930e99bd1320d78c7d8866595e81b8fc7dc8739b
Author: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp>
Date:   Tue Feb 13 23:21:52 2007 +0900

    [SCSI] tgt: fix the user/kernel ring buffer interface
    
    This patches fixes two bugs in the scsi target infrastructure's
    user/kernel interface.
    
    - It wrongly assumes that the ring buffer size of the interface (64KB)
    is larger than or equal to the system page size. This patch sets the
    ring buffer size to PAGE_SIZE if the system page size is larger.
    
    - It uses PAGE_SIZE in the header file exported to userspace. This
    patch removes it.
    
    Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8f3334edae93f8b664417f4140d4d9dc9a003fe4
Author: peter fuerst <post@pfrst.de>
Date:   Mon Feb 12 15:27:17 2007 +0100

    [SCSI] sgiwd93: interfacing to wd33c93
    
    1) sgiwd93 used to switch off asynchronous mode on the wd33c93, discarding
       any "nosync"-requests from the commandline.
       But we need to allow "nosync"-requests for selected devices, for example
       the Pioneer DVD305S.
       (For the curious: this device accepts the SDTR from wd33c93 and success-
       fully sends inquiry data in sync mode, but after the data phase in the
       inquiry command does an unexpected disconnect, seemingly sending no
       "status" or "command complete". Forcing async transfers makes it work
       together flawlessly with the wd33c93. Of course, preferable would be, to
       implement wd33c93's "resume command" stuff, but that probably will not
       come soon.)
    
    2) Maximize benefit from the preceding Fast SCSI patch for wd33c93 by passing
       the higher input-clock frequency explicitely. To be applied after the
       mentioned wd33c93 patch.
    
    Signed-off-by: peter fuerst <post@pfrst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a5d8421b2f03e46f02cc02066b186fdbc0f590a6
Author: peter fuerst <post@pfrst.de>
Date:   Mon Feb 12 15:20:15 2007 +0100

    [SCSI] wd33c93: Fast SCSI with WD33C93B
    
    Attached are patches, which help to utilize more of the WD33C93B SCSI
    controller's capabilities.
    
    1) Added/changed all the necessary code to enable Burst Mode DMA. Only
       Single Byte DMA was used before.
    
    2) Added/changed all the necessary code to enable Fast-10 SCSI transfers.
    
    3) The original driver inadvertently used a transfer period of 1000-800ns
       (the lowest possible transfer rate) for asynchronous data transfers,
       instead of the (configurable) default period intended for this purpose,
       if the target responded to a SDTR not with a Reject-message, but with
       a zero-SDTR. This issue was fixed.
       Moreover, in case of a Reject the driver used the default-period's
       initialization-value instead of its (maybe smaller) current value. The
       missing assignment was added.
    
    4) The driver's commandline- and proc-file-interface was augmented to
       handle the new options properly.
    
    The WD33C93 manual, found at
    http://www.datasheet.in/datasheet-html/W/D/3/WD33C93B_WesternDigital.pdf.html,
    was very helpful.
    
    Signed-off-by: peter fuerst <post@pfrst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c587e4a6a4d808fd2a1c4e7fb2d5a3a31e300d23
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Feb 6 21:29:00 2007 +0100

    [ARM] 4137/1: Add kexec support
    
    Add kexec support to ARM.
    
    Improvements like commandline handling could be made but this patch gives
    basic functional support. It uses the next available syscall number, 347.
    
    Once the syscall number is known, userspace support will be
    finalised/submitted to kexec-tools, various patches already exist.
    
    Originally based on a patch by Maxim Syrchin but updated and forward
    ported by various people.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0e0ba76926c37f11f38670db0cb33728f502551e
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Thu Feb 15 19:05:29 2007 +0100

    [ARM] 4201/1: SMP barriers pair needed for the secondary boot process
    
    In some situations, the pen_release store in platform_secondary_init()
    may stay forever in the write buffer while the CPU is waiting on the
    boot_lock to be released in boot_secondary(). The primary CPU could
    never see the pen_release update without the barriers.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dd1d2f4439af3bc80c047a13a8a2be60df1953cd
Author: Jan Altenberg <jan@linutronix.de>
Date:   Fri Feb 16 01:37:10 2007 -0800

    [ARM] at91: correct value for AT91_RSTC_KEY
    
    - Remove a duplicated define for AT91_RSTC_KEY
    - Set AT91_RSTC_KEY to the correct value
    - Replace the hardcoded keys in at91sam9620.c and at91sam9261.c
      by AT91_RSTC_KEY
    
    Signed-off-by: Jan Altenberg <jan@linutronix.de>
    Acked-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f1e1398654eb97269590a5a76f0aedb607fe5d0f
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Feb 16 06:36:50 2007 +0100

    [ARM] 4207/1: defconfig fixes, use RTC_DRV_AT91RM9200
    
    When "rtc-at91" was renamed to "rtc-at91rm9200" not all the relevant
    defconfig entries were updated.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 41d8ca452f523b9245704c7dd8ef290fa7b78e6b
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 16 13:56:11 2007 +0100

    [AVR32] Use per-controller spi_board_info structures
    
    Set up one spi_board_info array per controller and pass this to
    at32_add_device_spi so that it can set up any GPIO pins for chip
    selects based on this information.
    
    Extracted from a patch by David Brownell and adapted slightly.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 3b581f5485c180016a6c36c4c7007e21c53f8a63
Author: Pavel Pisa <ppisa@pikron.com>
Date:   Mon Feb 12 23:34:38 2007 +0100

    [ARM] 4171/1: i.MX/MX1 optimize interrupt source retrieval
    
    The macro "get_irqnr_and_base" in "entry-macro.S" optimized
    according to Lennert Buytenhek suggestion.
    
    Comments from Pavel Pisa:
    
     Sascha has approved patch some days ago
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Acked-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb36bb7516fdd1a2a7e9155413b83d4330e4c4a7
Author: George G. Davis <gdavis@mvista.com>
Date:   Wed Feb 14 17:44:28 2007 +0100

    [ARM] 4191/1: Remove redundant __flush_dcache_page() function prototype
    
    Commit 1c9d3df5e88ad7db23f5b22f4341c39722a904a4 added function prototype
    __flush_dcache_page() in include/asm-arm/cacheflush.h.  So we can remove
    the prototype for same in arch/arm/mm/fault-armv.c since it is now
    redundant to have it there.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 23cebe2287474720c2eb0673581056cfb285a69f
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 16 13:19:47 2007 +0100

    [AVR32] Warn, don't BUG if clk_disable is called too many times
    
    Print a helpful warning along with a stack dump if clk_disable is
    called on a already-disabled clock. Remove the BUG_ON().
    
    Extracted from a patch by David Brownell.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 7a5fe2387925405da0319330986184792ce48ad1
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 16 13:14:33 2007 +0100

    [AVR32] Make sure all genclocks have a parent
    
    Initialize the parent field of each generic clock by looking at the
    PM registers. This means that the genclock operations can always
    assume that the parent field is non-null, so they don't have to
    check. Also remove a few unnecessary BUG_ON()s.
    
    Extracted from a patch by David Brownell.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 72262e8b19034d2605d452d91717d56738598707
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 16 13:02:42 2007 +0100

    [ARM] 4202/2: S3C2443: IRQ sub source handlers
    
    Add IRQ handlers for the IRQs which originate
    from the sub-interrupt register on the S3C2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 90bc8566fb40b12167b49d972c85d2e509eea55f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 16 12:54:15 2007 +0100

    [ARM] 4209/1: S3C24XX: remove unnecessary includes of iomd.h
    
    Machines in the S3C24XX architectures should not
    be including <asm/hardware/iomd.h> as this is not
    needed.
    
    Also remove commented out includes
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 160f34531a71fdbbdb593a094273711ffb1257d7
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Thu Feb 15 16:22:17 2007 +0100

    [AVR32] Remove unnecessary sys_nfsservctl conditional
    
    kernel/sys_ni.c defines sys_nfsservctl as a weak alias for
    sys_ni_syscall, so it's always safe to include it in the system
    call table.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 1a6f1436d5fdecd4b395815c130df3c834892ab6
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Thu Feb 15 10:01:11 2007 +0100

    [AVR32] Wire up the SysV IPC calls properly
    
    Wire up the individual sysvipc system calls and remove sys_ipc.
    Strictly speaking, this breaks the ABI, but since sys_ipc never
    worked anyway due to a silly bug, it isn't actually a regression.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 2201ec2b10910c869befb012ae75696a02091e7d
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 16 12:53:57 2007 +0100

    [AVR32] Define ioremap_nocache, ioport_map and ioport_unmap
    
    These are all defined in terms of ioremap/iounmap since port I/O
    isn't really different from memory-mapped I/O on AVR32.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit b60f16eb56ff872a86c55c11bcfd430ce8cec340
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 16 12:47:40 2007 +0100

    [AVR32] Fix prototypes for __raw_writesb and friends
    
    The first parameter to __raw_writes[bwl] and __raw_reads[bwl] should
    be a void __iomem *, not unsigned long.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit a930609496b39284a93182ec3beb9dc9bf3651ec
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 16 00:17:07 2007 +0100

    [ARM] 4206/1: SMDK2440: Fix lcd type in platform data
    
    Set the LCD display type field in the platform data
    so that the LCD driver initialise the display as an
    TFT display
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b4f14eb86cda9324a2ffbdf534385d012967acd8
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 22:53:52 2007 +0100

    [ARM] 4205/1: S3C2443: Add cpu specific reset hook
    
    Hook in a cpu specific reset function for the S3C2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d4156d52c7464e8f25a286e1c2975e91bdbc35d6
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 22:52:15 2007 +0100

    [ARM] 4204/1: S3C24XX: add hook to specify cpu reset
    
    Add hook code to specify cpu specific reset call
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d9c0ebbda522b64607cd2b0064b9bb040c53bcaf
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 22:29:36 2007 +0100

    [ARM] 4203/1: S3C2443: use S3C2412 nand driver
    
    Use the S3C2412 nand driver for the S3C2443 as it
    is register compatible.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5ea22225e222b1a46d095ec3d754de052f6b284a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 17:32:20 2007 +0100

    [ARM] 4200/1: S3C2443: Update s3c2410_defconfig to add SMDK2443
    
    Add SMDK2443 to s3c2410_defconfig
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 285f4930f239d95cb8d4fdf45a52870d744bed8f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 16:48:58 2007 +0100

    [ARM] 4199/1: S3C2443: SMDK2443 machine addition
    
    Add support for SMDK2443 to arch/arm/mach-s3c2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e4d06e39530559513c7e335ef7ca4675f8146220
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 16 12:12:31 2007 +0100

    [ARM] 4198/2: S3C2443: arch/arm/mach-s3c2443 and related support
    
    Add arch/arm/mach-s3c2443 for support of the Samsung S3C2443 SoC
    
    This patch adds the core CPU support, clock framework, times
    and initial IRQ support, as well as adding the directory into
    the build tree.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 17908ed715e63a02484838b5456fb3fdbd1dfed6
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 16:35:51 2007 +0100

    [ARM] 4197/1: S3C2443: IRQ number updates
    
    Update IRQ numbers for S3C2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b1028c545ced13590dd9a9a8086543aef26c7187
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Fri Feb 16 02:23:07 2007 -0500

    ACPI: fix fan after resume from S3
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7570
    
    Signed-off-by: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e8363f332757ac22395fb120cc33b3262f9ee26c
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 16 02:05:39 2007 -0500

    ACPI: update acpi_power_resume() per new acpi_op_resume
    
    drivers/acpi/power.c:69: warning: initialization from incompatible pointer type
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0a6139027f3986162233adc17285151e78b39cac
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Fri Feb 16 01:47:06 2007 -0500

    ACPI: Thermal issues on HP nx6325
    
    The previous reference counting scheme to enable power resources
    got confused when multiple devices were present that might
    repeatedly enable or disable the resource and throw off the count.
    
    The new code simply lists the referencing devices which
    are requesting the resource to be enabled.  When there are none,
    then it is off.
    
    Signed-off-by: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 636cedf9df6a6442364e78b51925f306a1056e43
Author: Sanjoy Mahajan <sanjoy@mrao.cam.ac.uk>
Date:   Fri Feb 16 01:24:43 2007 -0500

    ACPI: thermal: fix units in debug output
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4972
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5c95d3f5783ab184f64b7848f0a871352c35c3cf
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Feb 15 23:25:53 2007 -0500

    ACPI: include apic.h in processor driver for benefit of UP kernels
    
    apic.h does not get included on UP compiles.  That way the
    APICTIMER_STOPS_ON_C3 is not there and UP boxen have no support for timer
    broadcasting.  This was never noticed, because the lapic timer is only used
    for profiling on UP.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8d4956c201c2f7683289f70095443c59a39f94ef
Author: Len Brown <len.brown@intel.com>
Date:   Thu Feb 15 22:46:42 2007 -0500

    ACPI: remove non-PNPACPI version of get_rtc_dev()
    
    It isn't needed in ACPI code anymore because
    now ACPI always includes PNPACPI.
    
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 243b66e76ab722cdec1921d7f80c0cb808131c37
Author: Len Brown <len.brown@intel.com>
Date:   Thu Feb 15 22:34:36 2007 -0500

    ACPI: always enable CONFIG_PNPACPI on CONFIG_ACPI kernels
    
    We removed the ACPI motherboard driver which handled
    the ACPI=y, PNP=n case, so now we need to enforce that
    PNP & PNPACPI are always enabled for ACPI kernels.
    
    Most major distros ship this way this already.
    
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fc955f670c0a66aca965605dae797e747b2bef7d
Author: Len Brown <len.brown@intel.com>
Date:   Thu Feb 15 22:11:48 2007 -0500

    ACPI: remove acpi_os_readable(), acpi_os_writable()
    
    ...which are now unused
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 70c0846e430881967776582e13aefb81407919f1
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 13 16:11:36 2007 -0800

    ACPI: Fix sparse warnings
    
    Use NULL for pointers
    
    drivers/acpi/osl.c:208:10: warning: Using plain integer as NULL pointer
    drivers/acpi/tables/tbxface.c:411:49: warning: Using plain integer as NULL pointer
    drivers/acpi/processor_core.c:1008:10: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a32525449b30dfbae804f6b05cde041f35f5a811
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Feb 15 18:29:32 2007 +1100

    [POWERPC] Fix bug with early ioremap and 64k pages
    
    The code for bolting hash entries for ioremap done before proper
    mm initialization has a grown a bug when using 64K pages on a
    machine where non-cacheable mappings are demoted to 4K HW pages.
    The wrong page size index is being passed to the hash table mapping
    functions causing a crash at boot on some pSeries machines using
    bare metal linux.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 41806ef4bfacbe5c4e520d8da2fcedcda335c922
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Thu Jan 25 11:15:52 2007 -0500

    [POWERPC] atomic.h: Add atomic64 cmpxchg, xchg and add_unless to powerpc
    
    atomic.h : Add atomic64 cmpxchg, xchg and add_unless to powerpc
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8c0238b3f1a7849b89707ac6b7b0c84e1ed2df70
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Feb 14 16:08:05 2007 +1100

    [POWERPC] Fix cut and paste breakage in arch/powerpc/platforms/pseries/pseries.h
    
    My "cleanup" patch (dce623e0827e8d0ad60ce7f385c3394bf1b0bae0) had a cut
    and paste error for the !CONFIG_KEXEC case. Fifty lashes for me.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ae50517ef16bd264c0d68f7b81c143fd9f01a40a
Author: Dave Jones <davej@redhat.com>
Date:   Wed Feb 14 16:54:31 2007 -0500

    [POWERPC] Export of_find_property
    
    Without this, building drivers/serial/of_serial.c as a module fails.
    
    WARNING: ".of_find_property" [drivers/serial/of_serial.ko] undefined!
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 32aed2a5ce31dc8f42811a0e74020f230241165a
Author: Timur Tabi <timur@freescale.com>
Date:   Wed Feb 14 15:29:07 2007 -0600

    [POWERPC] Delete boot-cpu property from all DTS files
    
    The 'linux,boot-cpu' property is obsolete, so remove it from all of the DTS
    files and from booting-without-of.txt.  The boot CPU is actually defined in
    the device tree header, and U-Boot sets that field.  The device tree compiler
    also complains if the property exists.
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Stuart Yoder <stuart.yoder@freescale.com>
    Acked-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c243f983a52eca8eb2a73113222887149836d45c
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Wed Feb 14 16:04:17 2007 +0900

    [POWERPC] ps3: don't call ps3_system_bus_driver_register on other platforms
    
    ps3_system_bus_driver_register is PS3 platform specific function.
    On other platforms, it triggers WARN_ON in kref_get.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 89680a8c3c35a3e9a7e97fbe66a34b0a73e221d1
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Wed Feb 14 15:59:15 2007 +0900

    [POWERPC] celleb: fix scc_uhc.c dependency
    
    scc_uhc.c depends on CONFIG_PCI, not CONFIG_USB. Because CONFIG_PCI
    is always "y" on Celleb platform, we move scc_uhc.o to obj-y.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2333eae215442768478d7661d372ff017e3f0151
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Wed Feb 14 15:55:14 2007 +0900

    [POWERPC] celleb: fix CONFIG_KEXEC dependency
    
    celleb_kexec_cpu_down() depends on CONFIG_KEXEC.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0f9ec0a828565c4d2dcb01ce6af824c001396357
Author: Paul Gortmaker <paul.gortmaker@windriver.com>
Date:   Thu Feb 15 12:43:06 2007 -0500

    [POWERPC] Fix compile failure in cpm_uart_cpm2
    
    Fix bug that exists in kernel.org since 2.6.17rc4 - compiles fail if
    CONFIG_SERIAL_CPM_SMC is defined.  Tested on a board using SMC1 console.
    
    Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c91ef5986185c044a853d990670e3f7ce22f2991
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Thu Feb 15 14:38:04 2007 +1100

    [POWERPC] More DCR native fixups
    
    Getting BenH's new EMAC driver working on 440GP, I found some more
    problems in the native mode paths of the new DCR code:
    	- dcr_map() is supposed to return a dcr_host_t, but the native
    version is a macro that doesn't expand to an expression.  With native
    DCRs, dcr_host_t is an empty structure, so we just use a constructor
    expression instead.
    	- dcr_unmap() uses {} instead of the safer do {} while (0)
    idiom to implement a no-op
    
    Here's a fix.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 087d7ecd5273b480d13f4309a159842700afe276
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Feb 12 16:20:18 2007 +0100

    [POWERPC] mpic: set IPIs to be per-CPU
    
    This patch changes the MPIC IPIs to be per-CPU to avoid getting a
    warning ("Cannot set affinity for irq 251") when taking a CPU
    offline via sysfs or during suspend.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0e8266437c62f4848676ea6e87a1ff10367502a9
Author: Christian Krafft <parabelboi@bopserverein.de>
Date:   Wed Feb 14 14:09:45 2007 +0100

    [POWERPC] Add PMI driver for cell blade
    
    This adds driver code for the PMI device found in future IBM products.
    PMI stands for "Platform Management Interrupt" and is a way to
    communicate with the BMC (Baseboard Management Controller).
    It provides bidirectional communication with a low latency.
    
    Signed-off-by: Christian Krafft <krafft@de.ibm.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Heiko J Schick <schickhj@de.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fde5efd0e50e026f3f69629fc5790a4f0533dcaa
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Wed Feb 7 12:20:01 2007 -0800

    [POWERPC] PS3: System manager support
    
    Add PS3 system manager support and the ppc_md routines restart() and
    power_off().
    
    The system manager provides an event notification mechanism for reporting
    events like thermal alert and button presses.  It also provides support to
    control system shutdown and startup.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ea1547d31153f8c3bdd32646f17d096d3108c838
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Feb 6 14:23:47 2007 -0800

    [POWERPC] PS3: Vuart add async read
    
    Add asynchronous read support to the PS3 vuart driver.  This is needed to
    support the PS3 system manager driver.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 75c86e7422751c5be3caaf448d802839ec685725
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Feb 13 17:37:28 2007 -0800

    [POWERPC] PS3: Vuart cleanups
    
    Cleanups for the PS3 vuart driver.
    
    - Hide driver private data from external interface with new structure
      ps3_vuart_port_priv.
    - Fix masking bug in ps3_vuart_get_interrupt_status().
    - Add new helper routine ps3_vuart_clear_rx_bytes() to flush rx buffer.
    - Add new variable probe_mutex to serialize probe and destroy routines.
    - Rename some symbols.
    - Add platform check in ps3_vuart_bus_init().
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7de970e11fb832a56c897276967fb0e49f59b313
Author: Nate Dailey <nate.dailey@stratus.com>
Date:   Thu Feb 15 18:13:46 2007 -0500

    sata_vsc: use default cache line size if non-zero
    
    This modifies drivers/ata/sata_vsc.c to only set the cache line size
    to 0x80 if the default value is zero. Apparently zero isn't allowed
    due to a bug in the chip, but I've found performance is much better
    with the (non-zero) default instead of 0x80.
    
    [note1: "default" means BIOS-programmed value, in this context -jgarzik]
    
    [note2: superfluous braces were removed from the patch -jg]
    
    Signed-off-by: Nate Dailey <nate.dailey@stratus.com>
    Signed-off-by: Jeremy Higdon <jeremy@sgi.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5278b50cea851d8264b7b28212a483328650476f
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Sun Feb 11 18:36:56 2007 -0600

    sata_nv: handle SError status indication
    
    ADMA-capable controllers provide a bit in the status register that appears
    to indicate that the controller detected an SError condition. Update sata_nv
    to detect this and trigger error handling in order to handle the fault.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8361cd79f2434d43054be894baf08a74dae5f8c0
Author: Olaf Hering <olaf@aepfle.de>
Date:   Sat Feb 10 21:36:14 2007 +0100

    add delay around sl82c105_reset_engine calls
    
    The hald media changed polling does really confuse things.
    Noone knows why the delays are needed, but they give us access to the CD.
    
    An udelay(50) will give reliable access to the drive, but there is still
    one (or more) EH reset. The drive works without EH resets with udelay(100).
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9f271d576a79f74a543c4099a014d8d4eafa737d
Author: Yanmin Zhang <yanmin_zhang@linux.intel.com>
Date:   Fri Feb 9 11:29:51 2007 +0800

    ATA convert GSI to irq on ia64
    
    If an ATA drive uses legacy mode, ata driver will choose 14 and 15
    as the fixed irq number. On ia64 platform, such numbers are GSI and
    should be converted to irq vector.
    
    Below patch against kernel 2.6.20 fixes it.
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 81afe893181b283f9d182ea8637ce6ccdbe1a56a
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 7 12:37:41 2007 -0800

    libata: clear TF before IDENTIFYing
    
    Some devices chock if Feature is not clear when IDENTIFY is issued.
    Set ATA_TFLAG_ISADDR | ATA_TFLAG_DEVICE for IDENTIFY such that whole
    TF is cleared when reading ID data.
    
    Kudos to Art Haas for testing various futile patches over several
    months and Mark Lord for pointing out the fix.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Art Haas <ahaas@airmail.net>
    Cc: Mark Lord <mlord@pobox.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f834e49f1a09414e9618ff0c9cd83c2114032bb6
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Feb 7 13:46:00 2007 -0800

    libata: Add a host flag to indicate lack of IORDY capability
    
    This is the first preparation to doing the !IORDY cases properly.  Further
    diffs will then add the needed logic to do it right.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 61f216c7196e15e56d97c5a75af01e6684f17fa3
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Feb 5 23:21:19 2007 +0900

    libata: fix drive side 80c cable check, take 3
    
    The 80c wire bit is bit 13, not 14.  Bit 14 is always 1 if word93 is
    implemented.  This increases the chance of incorrect wire detection
    especially because host side cable detection is often unreliable and
    we sometimes soley depend on drive side cable detection.  Fix the test
    and add word93 validity check.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5387373bfe78b7795b96378250f6848f39d78b80
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sun Feb 11 23:19:53 2007 +0100

    sata_promise: new EH conversion for 20619 chips, take 2
    
    This patch updates the sata_promise driver to use new-style
    libata error handling for 20619 (TX4000) chips. sata_promise
    already uses new EH for the other chips it supports, so the
    patch is quite simple:
    
    * remove ->phy_reset and ->eng_timeout ops from pdc_pata_ops,
      and instead bind ->freeze, ->thaw, ->error_handler, and
      ->post_internal_cmd to existing new EH functions
    * drop ATA_FLAG_SRST from board_20619's flags
    * remove now unused pdc_pata_phy_reset() and pdc_eng_timeout()
    
    Tested on a TX4000 with both modern working disks and old/quirky
    disks. Also used a CD-RW drive to test reading and writing CDs.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2fb8b49fb2eac583f0e8dd0ece06f9ad6d8fd792
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Wed Feb 7 22:29:56 2007 +0100

    sata_promise: fix missing PATA cable detection
    
    This patch fixes an oversight which caused sata_promise to
    not perform cable detection on the TX2plus chips' PATA ports.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2fea6f35c388c5add15d1492c7f4f3dac401717b
Author: Florian Fainelli <florian.fainelli@int-evry.fr>
Date:   Mon Feb 12 23:16:27 2007 +0000

    leds: Add support for Cobalt Server front LED
    
    Add support for Cobalt Server front LED (MIPS)
    
    Signed-off-by: Florian Fainelli <florian.fainelli@int-evry.fr>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit bd4009af4883451f55f57155e364f03f700c9ce8
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Mon Feb 12 23:09:32 2007 +0000

    leds: Add IPAQ h1940 LEDs support
    
    This patch adds the support for the IPAQ h1940 leds.
    
    In order to create the amber led (used for the battery charging), the red and
    green leds are set to the same default trigger. Due to hardware limitations,
    the blue led can only be set in blinking mode.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 5f7748cf91558a5026ded5be93c5bf6c1ac34edf
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Thu Feb 15 16:13:51 2007 -0500

    Execute AML Notify() requests on stack.
    
    HP nx6125/nx6325/... machines have a _GPE handler with an infinite
    loop sending Notify() events to different ACPI subsystems.
    
    The notify handler in the ACPI thermal driver is a C-routine,
    which may invoke the ACPI interpreter again to get access
    to some ACPI variables such as temperature.  (acpi_evaluate_xxx)
    On these HP machines such an evaluation changes state of an ASL variable
    and lets the loop above break.
    
    In the current ACPI implementation, Notify requests are being deferred
    to the same kacpid workqueue on which the above GPE handler with
    infinite loop is executing. Thus we have a deadlock -- loop will
    continue to spin, sending notify events, and at the same time
    preventing these notify events from being run on a workqueue. All
    notify events are deferred, thus we see explosion in memory consumption.
    
    Also as GPE handling is blocked, machines overheat because ACPI-based
    fan control is stalled.  Eventually by external poll of the same
    acpi_evaluate, kacpid is released and all the queued notify events are
    free to run, thus 100% CPU utilization by kacpid for several seconds
    or more.
    
    To prevent this failure,  Linux must not send notify events to the
    kacpid workqueue -- either executing them immediately or putting them
    on some other thread.
    
    The first attempt to create a new thread was done by Peter Wainwright
    He created a bunch of threads, which were stealing work from a kacpid
    workqueue.
    This patch appeared in 2.6.15-based kernel shipped with Ubuntu 6.06 LTS.
    
    Second attempt was done by Alexey Starikovskiy, who created a new thread
    for each Notify event. This worked OK on HP nx machines,
    but broke Linus' Compaq n620c, by producing threads with a speed what
    they stopped the machine completely.
    Thus this patch was reverted from 2.6.18-rc2.
    
    Alexey re-made the patch to create second workqueue just for notify events,
    thus hopping it will not break Linus' machine. Patch was tested on the
    same HP nx machines in #5534 and #7122, but this broke Linus' machine
    also and was reverted from 2.6.19-rc with much fanfair.
    
    The 4th patch inserted schedule_timeout(1) into deferred
    execution of kacpid, if we had any notify requests pending, but Linus
    decided that it was too complex (involved either changes to workqueue
    to see if it's empty or atomic inc/dec).  Then a 5th attempt did a
    yield() to every GPE execution.
    
    Finally, this 6th generation patch simply executes the notify handler
    on the stack.  Previous attempts to do this simple solution failed
    because of issues in AML mutex re-entrancy which are now fixed
    by the previous patch in this series.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5534
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c0d127b56937c3e72c2b1819161d2f6718eee877
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Thu Feb 15 16:12:23 2007 -0500

    ACPICA: fix AML mutex re-entrancy
    
    ACPI AML supports "serialized" methods which are protected
    by an implicit mutex.  The mutex is re-entrant for that AML thread
    to allow recursion.
    
    However, Linux implements notify() by creating a new AML thread.
    So for systems where notify() re-enters a serialized method,
    deadlock results.
    
    The fix is to use the Linux thread_id as the key to allowing
    re-entrancy, not the AML thread pointer.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5534
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f99c6bb6e2e9c35bd3dc0b1d0faa28bd6970930d
Merge: e0a04cf... 9c57548...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Feb 15 10:01:15 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh-2.6: (35 commits)
      sh: rts7751r2d board updates.
      sh: Kill off dead bigsur and ec3104 boards.
      sh: Fixup r7780rp pata_platform for devres conversion.
      sh: Revert TLB miss fast-path changes that broke PTEA parts.
      sh: Compile fix for heartbeat consolidation.
      sh: heartbeat consolidation for banked LEDs.
      sh: define dma noncoherent API functions.
      sh: Missing flush_dcache_all() proto in cacheflush.h.
      sh: Kill dead/unused ISA code from __ioremap().
      sh: Add cpu-features header to asm/Kbuild.
      sh: Move __KERNEL__ up in asm/page.h.
      sh: Fix syscall numbering breakage.
      sh: dcache write-back for R7780RP PIO.
      sh: Switch to local TLB flush variants in additional callsites.
      sh: Local TLB flushing variants for SMP prep.
      sh: Fixup cpu_data references for the non-boot CPUs.
      sh: Use a per-cpu ASID cache.
      sh: add SH_CLK_MD Kconfig default.
      sh: Fixup SHMIN INTC register definitions.
      sh: SH-DMAC compile fixes
      ...

commit e0a04cffa4e97e1e53625e40e70895c882e8972f
Author: Nick Piggin <npiggin@suse.de>
Date:   Wed Feb 14 12:39:01 2007 +0100

    [PATCH] mincore: vma crossing fix
    
    My mincore also forgot about crossing vmas.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4a76ef036ac415c28d1adbaf2b7a74040b84d4c2
Author: Nick Piggin <npiggin@suse.de>
Date:   Wed Feb 14 12:36:32 2007 +0100

    [PATCH] mincore: fill in results properly
    
    Paper bag time. Thanks to Randy for noticing that I didn't actually assign
    'present' to anything.
    
    Unfortunately my original patch passed the few simple test cases I gave it,
    purely by coincidence.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 30fcffed8149df18592b3e006b829232b7b3844f
Author: Nick Piggin <npiggin@suse.de>
Date:   Wed Feb 14 12:35:02 2007 +0100

    [PATCH] mincore: CONFIG_SWAP=n fix
    
    Fix mincore-anon patch to compile with CONFIG_SWAP=n
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f7eee89b2a4b4c233acde621005a814da0eb46d6
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 15 08:17:38 2007 +0100

    [ARM] 4192/1: AT91: Support for AT91SAM9XE processors.
    
    Add support for the Atmel AT91SAM9XE range of processors.  These are
    basically AT91SAM9260's with different amounts of internal SRAM and
    Flash.
    
    We make use of the existing AT91SAM9260 support, but just perform
    run-time detection of the size of the internal SRAM.
    
    Original patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e9316f9be6bc7cf949a89df6162e25e7fbb867be
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 16:28:11 2007 +0100

    [ARM] 4196/1: S3C24XX: add S3C2410_IRQSUB() to define IRQ for sub-sources
    
    Add a define of S3C2410_IRQSUB() to define all
    the sources from the IRQSUB register, to make it
    easier to work out the datasheet=>irq mappings
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 092651c5a988ffca98ee26bbb42688fbfd448718
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 12:57:20 2007 +0100

    [ARM] 4195/1: S3C2443: include/asm-arm/arch-s3c2410/regs-serial.h updates
    
    Updates for regs-serial.h for S3C2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6619d58a6569092ab6829ae1cdde78418999649d
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 12:52:01 2007 +0100

    [ARM] 4194/1: S3C2443: include/asm-arm/arch-s3c2410/regs-gpio.h updates
    
    Updates for regs-gpio.h for S3C2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e9390ef845a5fdb0506d6d37b1461c48394c47b3
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Feb 15 12:50:03 2007 +0100

    [ARM] 4193/1: S3C2443: clock register definitions
    
    Clock register definitions for the S3C2443
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7770bddb27ea84519486d8bb5d35d36d580c451b
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:48:24 2007 +0100

    [ARM] 4130/1: Add L220 support to RealView/EB
    
    This patch enables the L220 on the RealView/EB MPCore platform.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4ba9dcbeba042b7a1a1366f0dc683a2947ca5577
Merge: 382266a... 4b17244...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Feb 15 15:07:40 2007 +0000

    Merge Realview GIC code

commit 4b17244c133689ad0cbdca37ce3e15068f120428
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Feb 14 19:20:28 2007 +0100

    [ARM] 4109/2:  Add support for the RealView/EB MPCore revC platform
    
    The kernel originally supported revB only. This patch enables revC by
    default and adds a config option for building the kernel for the revB
    platform. Since the SCU base address was hard-coded in the proc-v6.S
    file (and only valid for RealView/EB revB), this patch also adds a
    more generic support for defining the SCU information.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3edf22ab34e1fdffc8c0c7c7b7da4d0aebdba118
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Feb 14 19:18:09 2007 +0100

    [ARM] 4190/2:  Add the secondary GIC support for the RealView/EB
    	MPCore platform
    
    This patch adds the registration of the secondary GIC on the
    baseboard, together with the IRQ chaining setup.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b3a1bde4db9889feb116330bff21214811c940e4
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Feb 14 19:14:56 2007 +0100

    [ARM] 4108/2:  Allow multiple GIC interrupt controllers in a system
    
    The current implementation only assumes one GIC to be present in the
    system. However, there are platforms with more than one cascaded interrupt
    controllers (RealView/EB MPCore for example).
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9c57548f17806ffd8e4dc4f7973ce78bbfbc2079
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Feb 15 18:20:52 2007 +0900

    sh: rts7751r2d board updates.
    
    This tidies up some of the rts7751r2d mess and gets it booting
    again. Update the defconfig, too.
    
    Signed-off-by: Masayuki Hosokawa <hosokawa@ace-jp.com>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit c14e894bd40868d6d1f2379705b68acf5288ba27
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Feb 15 01:33:18 2007 +0000

    [CIFS] fix &&/& typo in cifs_setattr()
    
    Thanks to Dirk for pointing this out.
    
    Signed-off-by: Dirk Mueller <dmueller@suse.de>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 2b8c0e13026c30bd154dc521ffc235360830c712
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Wed Feb 14 22:00:37 2007 +0100

    [CPUFREQ] Longhaul - Redo Longhaul ver. 2
    
    Start using v2 version of Longhaul when available. It provides
    voltage scaling and can use ACPI C3 state. That's curious. CPU
    will not change frequency on ACPI C3 when v1 is in use, but it will
    when v2 is used. Driver will return max frequency all the time if
    this isn't true for all processors. There is strange thing with
    mobile voltage. Looks like only Nehemiah (C3-M) supports it.
    Earlier processors have different mobile VRM (in docs), but I can't
    find any which is using it. Looks like all are using VRM 8.5. So
    fail for non Nehemiah with mobile VRM.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit bb52a653eaef4aee877b2fa36de8699926f788bd
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Feb 13 18:58:03 2007 -0600

    [PATCH] ieee80211softmac: Fix setting of initial transmit rates
    
    There is a bug in ieee80211softmac that always sets the user rate
    to 11Mbs, no matter the capabilities of the device. This bug was
    probably beneficial as long as the bcm43xx cards were rate limited;
    however, most are now capable of relatively high speeds. This patch
    fixes that bug and eliminates an assert that is no longer needed.
    
    Once the cards are capable of full OFDM speeds, the 24 Mbs rate will
    be changed to 54 Mbs.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a5d79d1e4fa58e12a37c91963fc071d811d2cffd
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Feb 13 16:56:21 2007 -0600

    [PATCH] bcm43xx: OFDM fix for rev 1 cards
    
    Nearly all of the writes to the bcm43xx internal lookup tables (ilt)
    involve 16-bit quantities. Accordingly, the ilt_write routine was
    coded to pass a u16 value. For one early GPHY chip, 32-bit quantities
    are needed. For those writes, the value was clipped to 16 bits. This
    patch adds an ilt_write32 routine that receives a 32-bit quantity
    and writes it to the appropriate locations.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 740ac4fb08866d702be90f167665d03759bd27d0
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Feb 13 16:54:56 2007 -0600

    [PATCH] bcm43xx: Fix for 4311 and 02/07/07 specification changes
    
    The specifications for the bcm43xx driver have been modified. This
    patch incorporates these changes in the code, which results in the
    BCM4311 and BCM4312 working. The name of one of the PHY parameters,
    previously known as "version", has been changed to "analog", short for
    "analog core version" .
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit b5c41651645f7604dda7abc3445e1622f9b1b9ab
Author: Dan Williams <dcbw@redhat.com>
Date:   Tue Feb 13 14:00:22 2007 -0500

    [PATCH] prism54: correct assignment of DOT1XENABLE in WE-19 codepaths
    
    Correct assignment of DOT1XENABLE in WE-19 codepaths.
    RX_UNENCRYPTED_EAPOL = 1 really means setting DOT1XENABLE _off_, and
    vice versa.  The original WE-19 patch erroneously reversed that.  This
    patch fixes association with unencrypted and WEP networks when using
    wpa_supplicant.
    
    It also adds two missing break statements that, left out, could result
    in incorrect card configuration.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 44956855ff9e21f58633a628b6b64e549a2fa0ed
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sat Feb 10 01:27:18 2007 +0000

    [PATCH] zd1211rw: Readd zd_addr_t cast
    
    Robert P.J. Day's recent commit ("getting rid of all casts of
    k[cmz]alloc() calls") introduced a sparse warning for zd1211rw,
    related to our type-checking of addresses.
    
    	zd_chip.c:116:15: warning: implicit cast to nocast type
    
    This patch readds the type cast, it is correct.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d9c7e0f20806795f7823e55ad3663c8828d51b5a
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Feb 6 11:39:37 2007 -0600

    [PATCH] bcm43xx: Fix for oops on resume
    
    There is a kernel oops on bcm43xx when resuming due to an overly
    tight timeout loop.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 1d3c2928c45a97c0d414bd8537c266bb2355f03d
Author: Michael Buesch <mb@bu3sch.de>
Date:   Tue Feb 6 00:16:35 2007 -0600

    [PATCH] bcm43xx: Ignore ampdu status reports
    
    If bcm43xx were to process an afterburner (ampdu) status response,
    Linux would oops. The ampdu and intermediate status bits are properly
    named.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 0a92dd0a70a030a7c2b58937740f26537246d5b0
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Tue Feb 6 11:34:54 2007 +0200

    [PATCH] wavelan: Use ARRAY_SIZE macro when appropriate
    
    A patch to use ARRAY_SIZE macro when appropriate.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 51471d35cafd8b793c835f1627d6a8c53d360e1f
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 18:58:52 2007 +0200

    [PATCH] hostap: Use ARRAY_SIZE macro when appropriate
    
    A patch to use ARRAY_SIZE macro in the Host AP wireless driver.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit e7c04fd3d00f69ce1cad5418a08016da484ea86a
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 18:58:29 2007 +0200

    [PATCH] misc-wireless: Use ARRAY_SIZE macro when appropriate
    
    A patch to use ARRAY_SIZE macro already defined in kernel.h for some
    miscellaneous wireless drivers with no specific maintaners.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 22d574324939d62f625095913dd3df526ecaa0c8
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 18:56:22 2007 +0200

    [PATCH] ipw2100: Use ARRAY_SIZE macro when appropriate
    
    A patch to use ARRAY_SIZE macro already defined in kernel.h.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6e6812d6df5fc502878b94a08ecf1a5f3fcfb030
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sat Feb 3 13:34:20 2007 -0600

    [PATCH] bcm43xx: Janitorial change - remove two unused variables
    
    Two bit-field values are extracted from the sprom data and never used.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit beddef27437babaa8545fe3eb60c4bc52c3a6700
Author: Ingo van Lil <inguin@gmx.de>
Date:   Wed Dec 6 21:39:45 2006 +0100

    [PATCH] wireless: fix IW_IS_{GET,SET} comment in wireless.h
    
    I just noticed the comments about even/odd ioctl command numbers in
    Linux's wireless.h file are mixed up.
    
    Signed-off-by: Ingo van Lil <inguin@gmx.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 2219cd81a6cd186200606693b360c6429c003bb3
Author: Juerg Haefliger <juergh@gmail.com>
Date:   Wed Feb 14 21:15:05 2007 +0100

    hwmon/vt1211: Add probing of alternate config index port
    
    The configuration index port of the vt1211 can be accessed at two
    different addresses 0x2e or 0x4e, depending on pin strappings. This
    patch adds support to scan both addresses during module
    initialization.
    
    Signed-off-by: Juerg Haefliger <juergh@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit a117dddf6bb27478e6903c9cb242601b6f45b11c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Feb 14 21:15:05 2007 +0100

    hwmon/f71805f: Fix a race condition
    
    I think I introduced a potential race condition bug with commit
    51c997d80e1f625aea3426a8a9087f5830ac6db3. I didn't realize it
    back then, but platform_device_put and platform_device_release
    both appear to free the platform data associated with the device.
    This makes an explicit kfree redundant at best, and maybe even
    racy, as it might occur while someone still holds a reference
    to the platform device.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit bc8f0a26855d8fac68040d462ec3cc13884e98e5
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Wed Feb 14 21:15:05 2007 +0100

    hwmon/abituguru: Fix unchecked return status
    
    Fix an unused return value warning for the abituguru driver.
    Also make sure the sysfs files are created before we register with
    the hwmon class, and delete the sysfs files on driver removal.
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit cae2caae78258d623c7b687029a19fa6b33c76f4
Author: Corentin Labbe <corentin.labbe@geomatys.fr>
Date:   Wed Feb 14 21:15:04 2007 +0100

    hwmon: New driver for the Analog Devices ADM1029
    
    Signed-off-by: Corentin Labbe <corentin.labbe@geomatys.fr>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 657c93b10fac97467cdf1d0424a209ce2e81991a
Author: David Hubbard <david.c.hubbard@gmail.com>
Date:   Wed Feb 14 21:15:04 2007 +0100

    hwmon/w83627ehf: Add support for the W83627DHG chip
    
    Signed-off-by: David Hubbard <david.c.hubbard@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 37f54ee546e415829ef14ca29d85fae26a439b9b
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Feb 14 21:15:04 2007 +0100

    hwmon: Use subsys_initcall
    
    Subsystem infrastructure should normally register with "subsys_initcall",
    so that it's available to drivers that may need to initialize early.
    
    This patch updates "hwmon" to do so.  It's common for embedded systems to
    have multifunction chips with hardware monitoring interfaces, and to have
    those chips be used during system bringup ... before a normal "module_init"
    would kick, or maybe just linked so they'd init before hwmon.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 41be722b61eeba51412fa16d0b3497ebab1ff52e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 14 21:15:04 2007 +0100

    hwmon/lm70: Make lm70_remove a __devexit function
    
    This fixes a potential broken reference.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit ed6bafbf6017d6a007b39de6b65ad3b8ae4c8aee
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Feb 14 21:15:03 2007 +0100

    hwmon: Cleanup a bogus legacy comment
    
    Cleanup a bogus legacy comment that has been replicated to many
    hardware monitoring drivers.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 7f999aa726ded3fd10d7619945e8b7d7e39833b3
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Feb 14 21:15:03 2007 +0100

    hwmon: Simplify the locking model of two drivers
    
    Many hardware monitoring drivers use two different mutexes, one to
    protect their per-device data structure, and one to protect the
    access to the device registers. These mutexes are essentially
    redundant, as the drivers are transfering values between the device
    registers and the data cache, so they almost always end up holding
    both mutexes at the same time. Using a single mutex will make the
    code more simple and faster.
    
    I am changing only two of the affected drivers here, the authors
    of the other affected drivers are welcome to submit similar patches
    if they want.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 6a0b1013c61396e588540713c8389038e7d0fead
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Feb 14 21:15:03 2007 +0100

    hwmon: Drop unused mutexes in two drivers
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit f8d0c19a93cea3a26a90f2462295e1e01a4cd250
Author: Jean Delvare <khali@linux-fr.org>
Date:   Wed Feb 14 21:15:02 2007 +0100

    hwmon/it87: Add PWM base frequency control
    
    Let the user select the base PWM frequency when using the it87
    hardware monitoring driver. Different frequencies can give better
    control on some fans.
    
    Also update the documentation to mention the PWM frequency control
    files, with misc cleanups to the PWM section.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 724339d76d9407cd1a8ad32a9c1fdf64840cc51b
Merge: 414f827... ccf2c222...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 14 09:51:20 2007 -0800

    Merge branch 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa
    
    * 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa:
      [ALSA] version 1.0.14rc2
      [ALSA] Fix a typo in __dev* changes in portman2x4.c
      [ALSA] Change AT91 PDC register defines for 2.6.20 kernel
      [ALSA] SoC codecs - fix Kconfig - depends -> depends on
      [ALSA] Fix __devinit and __devexit issues with sound drivers
      [ALSA] hda-codec - Patch for enabling LFE on more Dell laptops
      [ALSA] hda-codec - More fixes for Conexant HD Audio support
      [ALSA] usb-audio: add PCR-A PCM support
      [ALSA] emu10k1: fix typo
      [ALSA] usbaudio - remove urb->bandwidth reference
      [ALSA] ac97 - Fix silent output problem with Cx20551 codec
      [ALSA] hda-codec - Fix Oops with probing sigmatel codec chips

commit 414f827c46973ba39320cfb43feb55a0eeb9b4e8
Merge: 86a71db... 126b192...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 14 09:46:06 2007 -0800

    Merge branch 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6
    
    * 'for-linus' of git://one.firstfloor.org/home/andi/git/linux-2.6: (94 commits)
      [PATCH] x86-64: Remove mk_pte_phys()
      [PATCH] i386: Fix broken CONFIG_COMPAT_VDSO on i386
      [PATCH] i386: fix 32-bit ioctls on x64_32
      [PATCH] x86: Unify pcspeaker platform device code between i386/x86-64
      [PATCH] i386: Remove extern declaration from mm/discontig.c, put in header.
      [PATCH] i386: Rename cpu_gdt_descr and remove extern declaration from smpboot.c
      [PATCH] i386: Move mce_disabled to asm/mce.h
      [PATCH] i386: paravirt unhandled fallthrough
      [PATCH] x86_64: Wire up compat epoll_pwait
      [PATCH] x86: Don't require the vDSO for handling a.out signals
      [PATCH] i386: Fix Cyrix MediaGX detection
      [PATCH] i386: Fix warning in cpu initialization
      [PATCH] i386: Fix warning in microcode.c
      [PATCH] x86: Enable NMI watchdog for AMD Family 0x10 CPUs
      [PATCH] x86: Add new CPUID bits for AMD Family 10 CPUs in /proc/cpuinfo
      [PATCH] i386: Remove fastcall in paravirt.[ch]
      [PATCH] x86-64: Fix wrong gcc check in bitops.h
      [PATCH] x86-64: survive having no irq mapping for a vector
      [PATCH] i386: geode configuration fixes
      [PATCH] i386: add option to show more code in oops reports
      ...

commit 86a71dbd3e81e8870d0f0e56b87875f57e58222b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:16 2007 -0800

    [PATCH] sysctl: hide the sysctl proc inodes from selinux
    
    Since the security checks are applied on each read and write of a sysctl file,
    just like they are applied when calling sys_sysctl, they are redundant on the
    standard VFS constructs.  Since it is difficult to compute the security labels
    on the standard VFS constructs we just mark the sysctl inodes in proc private
    so selinux won't even bother with them.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bbaca6c2e7ef0f663bc31be4dad7cf530f6c4962
Author: Stephen Smalley <sds@tycho.nsa.gov>
Date:   Wed Feb 14 00:34:16 2007 -0800

    [PATCH] selinux: enhance selinux to always ignore private inodes
    
    Hmmm...turns out to not be quite enough, as the /proc/sys inodes aren't truly
    private to the fs, so we can run into them in a variety of security hooks
    beyond just the inode hooks, such as security_file_permission (when reading
    and writing them via the vfs helpers), security_sb_mount (when mounting other
    filesystems on directories in proc like binfmt_misc), and deeper within the
    security module itself (as in flush_unauthorized_files upon inheritance across
    execve).  So I think we have to add an IS_PRIVATE() guard within SELinux, as
    below.  Note however that the use of the private flag here could be confusing,
    as these inodes are _not_ private to the fs, are exposed to userspace, and
    security modules must implement the sysctl hook to get any access control over
    them.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b599fdfdb4bb4941e9076308efcf3bb89e577db5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:15 2007 -0800

    [PATCH] sysctl: fix the selinux_sysctl_get_sid
    
    I goofed and when reenabling the fine grained selinux labels for
    sysctls and forgot to add the "/sys" prefix before consulting
    the policy database.  When computing the same path using
    proc_dir_entries we got the "/sys" for free as it was part
    of the tree, but it isn't true for clt_table trees.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3fbfa98112fc3962c416452a0baf2214381030e6
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:14 2007 -0800

    [PATCH] sysctl: remove the proc_dir_entry member for the sysctl tables
    
    It isn't needed anymore, all of the users are gone, and all of the ctl_table
    initializers have been converted to use explicit names of the fields they are
    initializing.
    
    [akpm@osdl.org: NTFS fix]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d912b0cc1a617d7c590d57b7ea971d50c7f02503
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:13 2007 -0800

    [PATCH] sysctl: add a parent entry to ctl_table and set the parent entry
    
    Add a parent entry into the ctl_table so you can walk the list of parents and
    find the entire path to a ctl_table entry.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 77b14db502cb85a031fe8fde6c85d52f3e0acb63
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:12 2007 -0800

    [PATCH] sysctl: reimplement the sysctl proc support
    
    With this change the sysctl inodes can be cached and nothing needs to be done
    when removing a sysctl table.
    
    For a cost of 2K code we will save about 4K of static tables (when we remove
    de from ctl_table) and 70K in proc_dir_entries that we will not allocate, or
    about half that on a 32bit arch.
    
    The speed feels about the same, even though we can now cache the sysctl
    dentries :(
    
    We get the core advantage that we don't need to have a 1 to 1 mapping between
    ctl table entries and proc files.  Making it possible to have /proc/sys vary
    depending on the namespace you are in.  The currently merged namespaces don't
    have an issue here but the network namespace under /proc/sys/net needs to have
    different directories depending on which network adapters are visible.  By
    simply being a cache different directories being visible depending on who you
    are is trivial to implement.
    
    [akpm@osdl.org: fix uninitialised var]
    [akpm@osdl.org: fix ARM build]
    [bunk@stusta.de: make things static]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ff007eb8e8c7c44e9a384a67d0fdd0fd06ba811
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:11 2007 -0800

    [PATCH] sysctl: allow sysctl_perm to be called from outside of sysctl.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 805b5d5e063e7fde5e2eb724e3f4cb18e47cab19
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:11 2007 -0800

    [PATCH] sysctl: factor out sysctl_head_next from do_sysctl
    
    The current logic to walk through the list of sysctl table headers is slightly
    painful and implement in a way it cannot be used by code outside sysctl.c
    
    I am in the process of implementing a version of the sysctl proc support that
    instead of using the proc generic non-caching monster, just uses the existing
    sysctl data structure as backing store for building the dcache entries and for
    doing directory reads.  To use the existing data structures however I need a
    way to get at them.
    
    [akpm@osdl.org: warning fix]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0b4d414714f0d2f922d39424b0c5c82ad900a381
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:09 2007 -0800

    [PATCH] sysctl: remove insert_at_head from register_sysctl
    
    The semantic effect of insert_at_head is that it would allow new registered
    sysctl entries to override existing sysctl entries of the same name.  Which is
    pain for caching and the proc interface never implemented.
    
    I have done an audit and discovered that none of the current users of
    register_sysctl care as (excpet for directories) they do not register
    duplicate sysctl entries.
    
    So this patch simply removes the support for overriding existing entries in
    the sys_sysctl interface since no one uses it or cares and it makes future
    enhancments harder.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: David Howells <dhowells@redhat.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Jens Axboe <axboe@kernel.dk>
    Cc: Corey Minyard <minyard@acm.org>
    Cc: Neil Brown <neilb@suse.de>
    Cc: John W. Linville <linville@tuxdriver.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Jan Kara <jack@ucw.cz>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Mark Fasheh <mark.fasheh@oracle.com>
    Cc: David Chinner <dgc@sgi.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Patrick McHardy <kaber@trash.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ae836810263509ff7a3c2c021754ce6f66b3fab6
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:08 2007 -0800

    [PATCH] sysctl: remove support for directory strategy routines
    
    parse_table has support for calling a strategy routine when descending into a
    directory.  To date no one has used this functionality and the /proc/sys
    interface has no analog to it.
    
    So no one is using this functionality kill it and make the binary sysctl code
    easier to follow.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6703ddfcce61ad66db606085a8d42dcab264f840
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:07 2007 -0800

    [PATCH] sysctl: remove support for CTL_ANY
    
    There are currently no users in the kernel for CTL_ANY and it only has effect
    on the binary interface which is practically unused.
    
    So this complicates sysctl lookups for no good reason so just remove it.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2abc26fc6b6f60fc70d6957b842ef4e5f805df7b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:07 2007 -0800

    [PATCH] sysctl: create sys/fs/binfmt_misc as an ordinary sysctl entry
    
    binfmt_misc has a mount point in the middle of the sysctl and that mount point
    is created as a proc_generic directory.
    
    Doing it that way gets in the way of cleaning up the sysctl proc support as it
    continues the existence of a horrible hack.  So instead simply create the
    directory as an ordinary sysctl directory.  At least that removes the magic
    special case.
    
    [akpm@osdl.org: warning fix]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a5494dcd8b92dce64317f2f7dd0d62747c54980b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:34:06 2007 -0800

    [PATCH] sysctl: move SYSV IPC sysctls to their own file
    
    This is just a simple cleanup to keep kernel/sysctl.c from getting to crowded
    with special cases, and by keeping all of the ipc logic to together it makes
    the code a little more readable.
    
    [gcoady.lk@gmail.com: build fix]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Serge E. Hallyn <serue@us.ibm.com>
    Cc: Herbert Poetzl <herbert@13thfloor.at>
    Cc: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Grant Coady <gcoady.lk@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 39732acd968a007036ff3c504f1e6748024ef548
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:58 2007 -0800

    [PATCH] sysctl: move utsname sysctls to their own file
    
    This is just a simple cleanup to keep kernel/sysctl.c from getting to crowded
    with special cases, and by keeping all of the utsname logic to together it
    makes the code a little more readable.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Serge E. Hallyn <serue@us.ibm.com>
    Cc: Herbert Poetzl <herbert@13thfloor.at>
    Cc: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b04c3afb2b6e2f902b41bb62b73684d92d7e6c34
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:57 2007 -0800

    [PATCH] sysctl: move init_irq_proc into init/main where it belongs
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0e03036c97b70b2602f7dedaa3a223ed7563c2c9
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:57 2007 -0800

    [PATCH] sysctl: register the ocfs2 sysctl numbers
    
    ocfs2 was did not have the binary number it uses under CTL_FS registered in
    sysctl.h.  Register it to avoid future conflicts, and change the name of the
    definition to be in line with the rest of the sysctl numbers.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Mark Fasheh <mark.fasheh@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4ed075e93bad97d0fdbb8a1be62f2449988496cb
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:56 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables in NTFS and remove sys_sysctl support
    
    Putting ntfs-debug under FS_NRINODE was not a kosher thing to do so don't give
    it any binary number.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fd6065b4fdcb64c43e400278ebd0cb56989871c3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:55 2007 -0800

    [PATCH] sysctl: C99 convert coda ctl_tables and remove binary sysctls
    
    Will converting the coda sysctl initializers I discovered that it is yet
    another user of sysctl that was stomping CTL_KERN.  So off with it's
    sys_sysctl support since it wasn't done in a supportable way.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Jan Harkes <jaharkes@cs.cmu.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2564b7bd9ba4b4bf941b90f1ccd5e2c00e0f83d3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:54 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables in drivers/parport/procfs.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 59fc5313b37328f850105d5f1caa18f11089c9ba
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:53 2007 -0800

    [PATCH] sysctl: register the sysctl number used by the arlan driver
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: John W. Linville <linville@tuxdriver.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7735362ac32062725ba08ece014d669b9bede505
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:52 2007 -0800

    [PATCH] sysctl: remove sys_sysctl support from drivers/char/rtc.c
    
    The real time clock driver was using the binary number reserved for cdroms in
    the sysctl binary number interface, which is a no-no.  So since the sysctl
    binary interface is wrong remove it.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 22943364cffd404e1bba4f097ac21bc74031eba3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:51 2007 -0800

    [PATCH] sysctl: remove sys_sysctl support from the hpet timer driver
    
    In the binary sysctl interface the hpet driver was claiming to be the cdrom
    driver.  This is a no-no so remove support for the binary interface.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c37ce0324962010e768f2570e2603553263ff219
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:51 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables in arch/x86_64/mm/init.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7a44d37d8c633cfee145c7276c0777defd964858
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:50 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables in arch/x86_64/kernel/vsyscall.c
    
    Basically everything was done but I removed all element initializers from the
    trailing entries to make it clear the entire last entry should be zero filled.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 306421f387ccea0e8eeb04425e674910f100952b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:49 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables in arch/x86_64/ia32/ia32_binfmt.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f3854517f3b4cf372d3d5a2a71969c9b26090b7a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:49 2007 -0800

    [PATCH] sysctl: x86_64: remove unnecessary use of insert_at_head
    
    The only sysctl x86_64 provides are not provided elsewhere, so insert_at_head
    is unnecessary.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3c6449dcdfa023ca45b7ef1f7dce102f34f25ad
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:48 2007 -0800

    [PATCH] sysctl: C99 convert arch/sh64/kernel/traps.c and remove ABI breakage
    
    While doing the C99 conversion I notices that the top level sh64 directory was
    using the binary number for CTL_KERN.  That is a no-no so I removed the
    support for the sysctl binary interface only leaving sysctl /proc support.
    
    At least the sysctl tables were placed at the end of the list so user space
    did not see this mistake.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ded2e9bdfc5ac09f29b9f73fc1b75b1080edef90
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:47 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables entries in arch/ppc/kernel/ppc_htab.c
    
    And make the mode of the kernel directory 0555 no one is allowed to write to
    sysctl directories.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f5f106784eba94a00bbe73be651e423386ebe6d4
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:46 2007 -0800

    [PATCH] sysctl: C99 convert ctl_tables in arch/powerpc/kernel/idle.c
    
    This was partially done already and there was no ABI breakage what a relief.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 481f7337a1316c11b357ab838653f7f9254643be
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:46 2007 -0800

    [PATCH] sysctl: s390: remove unnecessary use of insert_at_head
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit feceb63ec589380f2125edcb70127e6a635af1cc
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:45 2007 -0800

    [PATCH] sysctl: s390: move sysctl definitions to sysctl.h
    
    We need to have the the definition of all top level sysctl directories
    registers in sysctl.h so we don't conflict by accident and cause abi problems.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8d8cb8a1bbd92a77208bdeaa25c3f17f5da9297d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:44 2007 -0800

    [PATCH] sysctl: C99 convert arch/mips/lasat/sysctl.c and remove ABI breakage
    
    While C99 converting the ctl_table initializers I realized that the binary
    sysctl numbers were in conflict with the binary values under CTL_KERN.
    Including CTL_KERN KERN_VERSION as used by glibc.  So I just removed the
    sysctl binary interface for these values, as it was unsupportable.
    
    Luckily these sysctl were inserted at the end of the sysctl list so this bug
    was not visible to userspace.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7ed744d1e8faed90aa027c08eeed21c4120e623d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:43 2007 -0800

    [PATCH] sysctl: C99 convert the ctl_tables in arch/mips/au1000/common/power.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ee404566f97f9254433399fbbcfa05390c7c55f7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:43 2007 -0800

    [PATCH] sysctl: mips/au1000: remove sys_sysctl support
    
    The assignment of binary numbers for sys_sysctl use was in shambles and
    despite requiring methods.  Nothing was implemented on the sys_sysctl side.
    
    So this patch gives a mercy killing to the sys_sysctl support for
    powermanagment on mips/au1000.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4e0099011838cc72ae693ef9c549bdd20704512d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:42 2007 -0800

    [PATCH] sysctl: C99 convert arch/ia64/kernel/perfmon and remove ABI breakage
    
    This convters the sysctl ctl_tables to use C99 initializers.  While I was
    looking at it I discovered it was using a portion of the sysctl binary
    addresses space under CTL_KERN KERN_OSTYPE which was completely inappropriate.
     So I completely removed all of the sysctl binary names, to remove and avoid
    the ABI conflict.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Stephane Eranian <eranian@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 68cbf0753681b3f79437f16d2f9a259b9346cf84
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:41 2007 -0800

    [PATCH] sysctl: C99 Convert arch/ia64/sn/kernel/xpc_main.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 79eec3d3d928e8ea20160c941236f11ecca99071
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:40 2007 -0800

    [PATCH] sysctl: sn: remove sysctl ABI BREAKAGE
    
    By not using the enumeration in sysctl.h (or even understanding it) the SN
    platform placed their arch specific xpc directory on top of CTL_KERN and only
    because they didn't have 4 entries in their xpc directory got lucky and didn't
    break glibc.
    
    This is totally irresponsible.  So this patch entirely removes sys_sysctl
    support from their sysctl code.  Hopefully they don't have ascii name
    conflicts as well.
    
    And now that they have no ABI numbers add them to the end instead of the
    sysctl list instead of the head so nothing else will be overridden.
    
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 317ed68c01cd936a3651c2eb63c47ef2a1ff54e5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:39 2007 -0800

    [PATCH] sysctl: C99 convert arch/frv/kernel/sysctl.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dfd007a667982372bfb05583c17bf5d4124c3c50
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:39 2007 -0800

    [PATCH] sysctl: C99 convert arch/frv/kernel/pm.c
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c8d1a1ac160421fda233def89065149ba7b0a00a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:38 2007 -0800

    [PATCH] sysctl: frv: remove unnecessary insert_at_head flag
    
    Since the binary sysctl numbers are unique putting the registered sysctls at
    the head of the sysctl list where they can override existing sysctls serves no
    useful purpose.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 77f6dfb1295cae6e4cbbb90fc6da88fdf27ee95e
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:37 2007 -0800

    [PATCH] sysctl: move CTL_FRV into sysctl.h where it belongs
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit febe1c257901c766a938007ed3710e7d54618756
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:37 2007 -0800

    [PATCH] sysctl: frv: pm remove unnecessary insert_at_head flag
    
    With unique binary numbers setting insert_at_head to insert yourself at the
    head of sysctl list and thus override existing sysctl entries serves no point.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 462591b8868a18e52494e223d1a8f13311f50104
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:36 2007 -0800

    [PATCH] sysctl: move CTL_PM into sysctl.h where it belongs
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4b998d4f6e559fb8eba8141263b2fddc9556391b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:35 2007 -0800

    [PATCH] sysctl: cdrom: don't set de->owner
    
    There is no need for open files in /proc/sys/XXX to hold a reference count on
    the module that provides the file to prevent module unload races.  While there
    is code active in the module p->used in the sysctl_table_header is
    incremented, preventing the sysctl from being unregisted.  Once the sysctl is
    unregistered it cannot be found.  Open files are also not a problem as they
    revalidate the sysctl information and bump p->used before accessing module
    code.
    
    So setting de->owner is unnecessary, makes for a bad example and gets in my
    way of removing ctl_table->de.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Jens Axboe <jens.axboe@oracle.com>
    Acked-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 208367eeec8d6f6fcee1a0672af2149aeee7b658
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:34 2007 -0800

    [PATCH] sysctl: cdrom: remove unnecessary insert_at_head flag
    
    With unique binary sysctl numbers setting insert_at_head to override other
    sysctl entries is pointless.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bfe1a1e160f89a176efd871e68ef4cb8429bb582
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:33 2007 -0800

    [PATCH] sysctl: ipmi: remove unnecessary insert_at_head flag
    
    With unique sysctl binary numbers setting insert_at_head is pointless.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Corey Minyard <minyard@acm.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0a4b9b6ec175d17f35ace35bf6e7196a51562a00
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:32 2007 -0800

    [PATCH] sysctl: mac_hid: remove unnecessary insert_at_head flag
    
    With unique sysctl binary numbers setting insert_at_head is pointless.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Jiri Kosina <jkosina@suse.cz>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ff1d28efc56432c57f8e46542b4bb2c290b801ad
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:32 2007 -0800

    [PATCH] sysctl: md: remove unnecessary insert_at_head flag
    
    The sysctls used by the md driver are have unique binary numbers so remove the
    insert_at_head flag as it serves no useful purpose.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 01879db3f0f8205e04fbce06062349f258469247
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:31 2007 -0800

    [PATCH] sysctl: scsi: remove unnecessary insert_at_head flag
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 04c5acfb2413af1698ac27dca69b4d7233dc7249
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:30 2007 -0800

    [PATCH] sysctl: atalk: remove unnecessary insert_at_head flag
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 28522366f0a2dcb2b1d3ef5eebcc65fcd7c2a422
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:30 2007 -0800

    [PATCH] sysctl: ax25: remove unnecessary insert_at_head flag
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f7d749fa0a4de0a5445a4f023023f9e702238653
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:29 2007 -0800

    [PATCH] sysctl: dccp: remove unnecessary insert_at_head flag
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d87abf42762ee3e77b118ea96517cf8c7d33abc1
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:28 2007 -0800

    [PATCH] sysctl: decnet: remove unnecessary insert_at_head flag
    
    The sysctl numbers used are unique so setting the insert_at_head flag does not
    succeed in overriding any sysctls, and is just confusing because it doesn't.
    Clear the flag.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Patrick Caulfield <patrick@tykepenguin.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ecab963ac1aa7d92369564c5dd4ad04ec5853380
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:27 2007 -0800

    [PATCH] sysctl: ipx: remove unnecessary insert_at_head flag
    
    The sysctl numbers used are unique so setting the insert_at_head flag servers
    no semantic purpose and is just confusing.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9fa7b46d73d2849a7234d0967152c39deb4e815f
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:26 2007 -0800

    [PATCH] sysctl: llc: remove unnecessary insert_at_head flag
    
    The sysctl numbers used are unique so setting the insert_at_head flag serves
    no semantis purpose, and is just confusing.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6fe6b1755c3d234af076c0d264dc8478acf4510c
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:26 2007 -0800

    [PATCH] sysctl: netrom: remove unnecessary insert_at_head flag
    
    The sysctl numbers used are unique so setting the insert_at_head flag serves
    no semantic purpose, so it is just confusing.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2d4381dec31865d7882312bef4cb8da2b12621ff
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:25 2007 -0800

    [PATCH] sysctl: rose: remove unnecessary insert_at_head flag
    
    The sysctl numbers used are unique so setting the insert_at_head flag serves
    no semantic purpose.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2b1bec5f52fec033ed0026e7d85f641e20e1cbb9
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:24 2007 -0800

    [PATCH] sysctl: sunrpc: don't unnecessarily set ctl_table->de
    
    We don't need this to prevent module unload races so remove the unnecessary
    code.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7e35280e517c28b991667a608990227503dd2a30
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:23 2007 -0800

    [PATCH] sysctl: sunrpc: remove unnecessary insert_at_head flag
    
    Because the sunrpc sysctls don't conflict with any other sysctls the setting
    the insert at head flag to register_sysctl has no semantic meaning.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 50d851f7227cf9e7fcc4cd1d2b3c72ddd64c50e6
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:22 2007 -0800

    [PATCH] sysctl: move CTL_SUNRPC to sysctl.h where it belongs
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b402f06d6e31b8c3c74bfc3e7d2e292dd4a1b90a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Feb 14 00:33:21 2007 -0800

    [PATCH] sysctl: x25: remove unnecessary insert_at_head from register_sysctl_table
    
    There has not been much maintenance on sysctl in years, and as a result is
    there is a lot to do to allow future interesting work to happen, and being
    ambitious I'm trying to do it all at once :)
    
    The patches in this series fall into several general categories.
    
    - Removal of useless attempts to override the standard sysctls
    
    - Registers of sysctl numbers in sysctl.h so someone else does not use
      the magic number and conflict.
    
    - C99 conversions so it becomes possible to change the layout of
      struct ctl_table without breaking everything.
    
    - Removal of useless claims of module ownership, in the proc dir entries
    
    - Removal of sys_sysctl support where people had used conflicting sysctl
      numbers. Trying to break glibc or other applications by changing the
      ABI is not cool.  9 instances of this in the kernel seems a little
      extreme.
    
    - General enhancements when I got the junk I could see out.
    
    This patch:
    
    Since x25 uses unique binary numbers inserting yourself at the head of the
    search list for sysctls so you can override already registered sysctls is
    pointless.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aa2e3e4f83590fa4c69fe95f01c1a52557859d19
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Feb 14 00:33:20 2007 -0800

    [PATCH] scheduled removal of SA_XXX interrupt flags: ata fix
    
    SA_SHIRQ is going away.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2db6346f76ac5bd5b632373240e3e54828111837
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Wed Feb 14 00:33:20 2007 -0800

    [PATCH] Scheduled removal of SA_xxx interrupt flags fixups 2
    
    The obsolete SA_xxx interrupt flags have been used despite the scheduled
    removal.  Fixup the remaining users in -mm.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 38515e908ba3a9c467ad3bf347b9bce69216df94
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Wed Feb 14 00:33:16 2007 -0800

    [PATCH] Scheduled removal of SA_xxx interrupt flags fixups
    
    The obsolete SA_xxx interrupt flags have been used despite the scheduled
    removal.  Fixup the remaining users.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Wim Van Sebroeck <wim@iguana.be>
    Cc: Roland Dreier <rolandd@cisco.com>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Dave Airlie <airlied@linux.ie>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3159f06dc2303630c02d1ad2eeaeaf341414c9df
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Wed Feb 14 00:33:16 2007 -0800

    [PATCH] OSS: replace kmalloc()+memset() combos with kzalloc()
    
    Replace kmalloc() + memset() pairs with the appropriate kzalloc() calls.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cd354f1ae75e6466a7e31b727faede57a1f89ca5
Author: Tim Schmielau <tim@physik3.uni-rostock.de>
Date:   Wed Feb 14 00:33:14 2007 -0800

    [PATCH] remove many unneeded #includes of sched.h
    
    After Al Viro (finally) succeeded in removing the sched.h #include in module.h
    recently, it makes sense again to remove other superfluous sched.h includes.
    There are quite a lot of files which include it but don't actually need
    anything defined in there.  Presumably these includes were once needed for
    macros that used to live in sched.h, but moved to other header files in the
    course of cleaning it up.
    
    To ease the pain, this time I did not fiddle with any header files and only
    removed #includes from .c-files, which tend to cause less trouble.
    
    Compile tested against 2.6.20-rc2 and 2.6.20-rc2-mm2 (with offsets) on alpha,
    arm, i386, ia64, mips, powerpc, and x86_64 with allnoconfig, defconfig,
    allmodconfig, and allyesconfig as well as a few randconfigs on x86_64 and all
    configs in arch/arm/configs on arm.  I also checked that no new warnings were
    introduced by the patch (actually, some warnings are removed that were emitted
    by unnecessarily included header files).
    
    Signed-off-by: Tim Schmielau <tim@physik3.uni-rostock.de>
    Acked-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3fc605a2aa38899c12180ca311f1eeb61a6d867e
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 14 00:33:13 2007 -0800

    [PATCH] knfsd: allow the server to provide a gid list when using AUTH_UNIX authentication
    
    AUTH_UNIX authentication (the standard with NFS) has a limit of 16 groups ids.
     This causes problems for people in more than 16 groups.
    
    So allow the server to map a uid into a list of group ids based on local
    knowledge rather depending on the (possibly truncated) list from the client.
    
    If there is no process on the server responding to upcalls, the gidlist in the
    request will still be used.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit af6a4e280e3ff453653f39190b57b345ff0bec16
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 14 00:33:12 2007 -0800

    [PATCH] knfsd: add some new fsid types
    
    Add support for using a filesystem UUID to identify and export point in the
    filehandle.
    
    For NFSv2, this UUID is xor-ed down to 4 or 8 bytes so that it doesn't take up
    too much room.  For NFSv3+, we use the full 16 bytes, and possibly also a
    64bit inode number for exports beneath the root of a filesystem.
    
    When generating an fsid to return in 'stat' information, use the UUID (hashed
    down to size) if it is available and a small 'fsid' was not specifically
    provided.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 982aedfd091e6d9831216f8519f12242091be4fd
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 14 00:33:11 2007 -0800

    [PATCH] knfsd: tidy up choice of filesystem-identifier when creating a filehandle
    
    If we are using the same version/fsid as a current filehandle, then there is
    no need to verify the the numbers are valid for this export, and they must be
    (we used them to find this export).
    
    This allows us to simplify the fsid selection code.
    
    Also change "ref_fh_version" and "ref_fh_fsid_type" to "version" and
    "fsid_type", as the important thing isn't that they are the version/type of
    the reference filehandle, but they are the chosen type for the new filehandle.
    
    And tidy up some indenting.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8971a1016b9db4164c3c1b47ae1fde2818becf91
Author: Neil Brown <neilb@suse.de>
Date:   Wed Feb 14 00:33:11 2007 -0800

    [PATCH] knfsd: fix return value for writes to some files in 'nfsd' filesystem
    
    Most files in the 'nfsd' filesystem are transactional.  When you write, a
    reply is generated that can be read back only on the same 'file'.
    
    If the reply has zero length, the 'write' will incorrectly return a value of
    '0' instead of the length that was written.  This causes 'rpc.nfsd' to give an
    annoying warning.
    
    This patch fixes the test.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 754ce4f29937ba11f16afa41a648a30b0fc1f075
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Wed Feb 14 00:33:09 2007 -0800

    [PATCH] SPI: atmel_spi driver
    
    Driver for the Atmel on-chip SPI master controller.
    
    Tested primarily on AVR32/AT32AP7000/ATSTK1000 using mtd_dataflash and the
    jffs2 filesystem.  Should also work fine on various AT91 ARM-based chips
    like AT91SAM926x and AT91RM9200.
    
    Hardware documentation can be found in the AT32AP7000 data sheet, or its
    AT91 siblings, which can be downloaded from
    
    http://www.atmel.com/dyn/products/datasheets.asp?family_id=682
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit de8211b96b8491911bcb222d153c0986cb522bd6
Author: Vitaly Wool <vitalywool@gmail.com>
Date:   Wed Feb 14 00:33:09 2007 -0800

    [PATCH] PNX8550 UART driver
    
    Add UART support for PNX8330/8550/8950 Philips MIPS-based SoCs.
    
    Signed-off-by: Vitaly Wool <vitalywool@gmail.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e6fa0ba304f0642b5e9454c20b07740b8bf2c416
Author: Vitaly Wool <vitalywool@gmail.com>
Date:   Wed Feb 14 00:33:08 2007 -0800

    [PATCH] fix PNX8550 serial breakage
    
    Fix the serial header breakage for the PNX8550 MIPS platform.
    
    Signed-off-by: Vitaly Wool <vitalywool@gmail.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8f31bb39ec2a5622974666c72257e74c22492602
Author: Burman Yan <yan_952@hotmail.com>
Date:   Wed Feb 14 00:33:07 2007 -0800

    [PATCH] serial: replace kmalloc+memset with kzalloc
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3689a0ec60bc8f56cc372c1dfa0d89dab48f7c9c
Author: George G. Davis <gdavis@mvista.com>
Date:   Wed Feb 14 00:33:06 2007 -0800

    [PATCH] serial: make sure UART is powered up when dumping MCTRL status
    
    Since serial devices are powered down when not in use and some of those
    devices cannot be accessed when powered down, we need to enable power
    around calls to get_mcrtl() when dumping port state via uart_line_info().
    This resolves hangs observed on some machines while reading serial device
    registers when a port is powered off.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9b22271d4b8c1be8a81563c322d3f04e7cbe2153
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Wed Feb 14 00:33:05 2007 -0800

    [PATCH] serial: trivial code flow simplification
    
    Return failure immediately, so we don't have to test it twice.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 40b36daad0ac704e6d5c1b75789f371ef5b053c1
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Wed Feb 14 00:33:04 2007 -0800

    [PATCH] 8250 UART backup timer
    
    The patch below works around a minor bug found in the UART of the remote
    management card used in many HP ia64 and parisc servers (aka the Diva
    UARTs).  The problem is that the UART does not reassert the THRE interrupt
    if it has been previously cleared and the IIR THRI bit is re-enabled.  This
    can produce a very annoying failure mode when used as a serial console,
    allowing a boot/reboot to hang indefinitely until an RX interrupt kicks it
    into working again (ie.  an unattended reboot could stall).
    
    To solve this problem, a backup timer is introduced that runs alongside the
    standard interrupt driven mechanism.  This timer wakes up periodically,
    checks for a hang condition and gets characters moving again.  This backup
    mechanism is only enabled if the UART is detected as having this problem,
    so systems without these UARTs will have no additional overhead.
    
    This version of the patch incorporates previous comments from Pavel and
    removes races in the bug detection code.  The test is now done before the
    irq linking to prevent races with interrupt handler clearing the THRE
    interrupt.  Short delays and syncs are also added to ensure the device is
    able to update register state before the result is tested.
    
    Aristeu says:
    
      this was tested on the following HP machines and solved the problem:
      rx2600, rx2620, rx1600 and rx1620s.
    
    hpa says:
    
      I have seen this same bug in soft UART IP from "a major vendor."
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Acked-by: Aristeu Sergio Rozanski Filho <aris@cathedrallabs.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ed8b4d4d7a31923db32f4684535944d69eb43677
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Wed Feb 14 00:33:03 2007 -0800

    [PATCH] qconf: hide empty list items
    
    This patch fixes showing empty config list items if "Option/Show All
    Options" is turned on.  For example empty items appears on list of 'Block
    Layer' menu.
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1f85712e6e1f2450ec4fd2ab18f8887bf7280f8e
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Wed Feb 14 00:33:02 2007 -0800

    [PATCH] new toplevel target: headers_check_all
    
    Add new headers_check_all target for checking all arches in one go.
    
    Useful for distros (and people with too much time on their hands) that support
    a ton of architectures, headers_check_all is to headers_check as
    headers_install_all is to headers_install
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d395efb544aba803ffe42b16a1862be655aca369
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Wed Feb 14 00:33:01 2007 -0800

    [PATCH] Kbuild: Remove references to deprecated "prepare-all" target from Makefile
    
    Remove references to the deprecated "make prepare-all" target from the
    top-level Makefile; use just "make prepare" instead.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Acked-by: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f253f00003c3fed0355cf49482f24c56bc5dbea6
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Wed Feb 14 00:33:00 2007 -0800

    [PATCH] qconf: Back button behaviour normalization
    
    Do "Back" button behaviour normalization so it is enabled starting from
    second-level menu only.
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 786fb18d015cc5f34284d426e055ddd7a3dbb53b
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Wed Feb 14 00:32:59 2007 -0800

    [PATCH] qconf: fix showing help info on failed search
    
    qconf does not clear help text in search window if previous search has been
    failed.
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@mail.ru>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 66e7c7230fed159e138fc1292ee662b8bbdb74d6
Author: Shlomi Fish <shlomif@iglu.org.il>
Date:   Wed Feb 14 00:32:58 2007 -0800

    [PATCH] qconf: relocate Search Command
    
    Relocate the qconf search command to the "Edit"->"Find" menu option.
    
    This is per the discussion on my qconf search dialog patch.
    
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 49e5646d6538f3a1c6697770f0bec2b2a0b7f30e
Author: Karsten Wiese <fzu@wemgehoertderstaat.de>
Date:   Wed Feb 14 00:32:57 2007 -0800

    [PATCH] qconf: immediately update integer and string values in xconfig display
    
    In xconfig's display integer and string values are also shown as part of
    the config item's descriptive text.
    
    This patch updates the descriptive text, when the corresponding value has
    been changed.  Fix for http://bugzilla.kernel.org/show_bug.cgi?id=7744
    
    Take2 uses updateList() so config values dependending on the changed value
    see the change.
    
    Signed-off-by: Karsten Wiese <fzu@wemgehoertderstaat.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e0ab1ec9fcd3799e874ff9086729a480f6c06cd3
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Feb 14 00:32:56 2007 -0800

    [PATCH] add .mailmap for proper git-shortlog output
    
    This list was built into the git-shortlog tool and has been removed in the
    latest version.  It should be maintained separately so this is what this
    patch does.
    
    A couple more entries were added to the original list as well.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Acked-by: Junio C Hamano <junkio@cox.net>
    Cc: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 895a39a084e5478121a74752a291165c4502378f
Author: s situert <situert@yahoo.com>
Date:   Wed Feb 14 00:32:55 2007 -0800

    [PATCH] Make mkcompile_h use LANG=C and LC_ALL=C for $CC -v
    
    Fix a minor bug in mkcompile_h.  As one can see, the current locale is used
    while getting the version of gcc.  This produces problems when a locale
    other than C or en_US is used.  As an example, my /proc/version contains
    Turkish characters in iso-8859-9 encoding.
    
    This patch fixes this issue by making sure that the C locale is used to get
    gcc's version.
    
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8c7e4498adfdb4aea5a0d056590ec18d099ba062
Author: Mike Frysinger <vapier.adi@gmail.com>
Date:   Wed Feb 14 00:32:54 2007 -0800

    [PATCH] search a little harder for mkimage
    
    Check to see if `${CROSS_COMPILE}mkimage` exists and if not, fall back to
    the standard `mkimage`
    
    The Blackfin toolchain includes mkimage, but we dont want to namespace
    collide with any of the user's system setup, so we prefix it with our
    toolchain name.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b7de8e7e3c7b79a72c20c7fd58bd65df3d146b13
Author: Roland Dreier <rdreier@cisco.com>
Date:   Wed Feb 14 00:32:53 2007 -0800

    [PATCH] ia64: fix noncoherent DMA API so devres builds
    
    On ia64, drivers/base/dma-mapping.c doesn't build because it calls
    dma_alloc_noncoherent() and dma_free_noncoherent(), which appear to be
    terminally broken; the calls end up generating errors like
    
        drivers/base/dma-mapping.c: In function 'dmam_noncoherent_release':
        drivers/base/dma-mapping.c:32: error: 'struct ia64_machine_vector' has no member named 'platform_dma_free_coherent'
    
    because the multiple levels of macro expansion in <asm/dma-mapping.h> and
    <asm/machvec.h> end up turning a call to dma_free_noncoherent() into
    ia64_mv.platform_dma_free_coherent (instead of the intended
    ia64_mv.dma_free_coherent).
    
    This patch fixes this by converting dma_{alloc,free}_noncoherent() into
    inline functions that call the corresponding coherent functions, instead of
    trying to do this with macros.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Acked-by: Tony Luck <tony.luck@intel.com>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 69b2e99cf57ab8121d575a04a050314ac9c8f7e1
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Feb 14 08:44:43 2007 +0100

    [ARM] 4189/1: AT91: MACB Ethernet clock
    
    The MACB Ethernet driver searches for a "macb_clk" clock, so rename the
    "ether_clk" on the SAM9260 and SAM9263 to "macb_clk".
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 588ef7693574cfbcb228f48d5478c2b39a9b0c9f
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Feb 13 17:12:04 2007 +0100

    [ARM] 4184/1: iop: cp6 access handler (undef_hook)
    
    Enable svc access to cp6 via an undefined instruction hook.  Do not enable
    access for usr code.
    
    This patch also makes iop13xx select PLAT_IOP, this requires a small change
    to drivers/i2c/busses/i2c-iop3xx.c.
    
    Per Lennert Buytenhek's note, the cp6 trap routine is moved to arch/arm/plat-iop
    Per Nicolas Pitre's note, the cp_wait is skipped since the latency to
    return to the faulting function is longer than cp_wait.
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dfc544c7216b276c1e9c0c753299692df4068c44
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Feb 13 17:11:34 2007 +0100

    [ARM] 4183/1: do_undefinstr: read svc undefined instructions with svc privileges
    
    do_undefinstr currently does not expect undefined instructions in kernel
    code, since it always uses get_user() to read the instruction.
    
    Dereference the 'pc' pointer directly in the SVC case.
    
    Per Nicolas Pitre's note, kernel code is never in thumb mode.
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6df26700c0884cb3cce2b9fa4795888f86ca4d8f
Author: Dan Williams <dan.j.williams@intel.com>
Date:   Tue Feb 13 17:11:04 2007 +0100

    [ARM] 4182/1: iop3xx: fix the ioremap implementation to not remap static ranges
    
    Implement a custom ioremap implementation for iop3xx. This saves
    establishing new mappings. It also cleans up the PCI IO resource to be a
    physical address rather than a virtual address as Russell pointed out on
    the original iop13xx port.
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5ac602b2eac4ee58e2497f44c39a5dd8385d2c87
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 17:48:59 2007 +0100

    [ARM] 4188/1: S3C24XX: add CRAMFS to s3c2410_defconfig
    
    Add cramfs support in by default, as a lot of
    our initrds are cramfs images.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 961314d37ea441673d12e0a57b2dab2eeac520a5
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 13:29:46 2007 +0100

    [ARM] 4181/1: S3C24XX: Document new layout
    
    Update Documentation/arm/Samsung-S3C24XX/Overview.txt
    with the new directory layout.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9e2ad159a9ba621c704c68703dcd86a4045a2523
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 13:20:08 2007 +0100

    [ARM] 4180/1: S3C24XX: Update docs for S3C2412 and S3C2413
    
    The S3C2412 and S3C2413 are supported, so document
    this as so
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bd65c82b9ee506950e1856e9af60be9fc627bfaa
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 13:14:12 2007 +0100

    [ARM] 4179/1: S3C2440: DMA ordering list
    
    Add DMA ordering list for S3C2440
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dad8d6c50e08ce2ef87f294fa412351b27d5bb97
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 13:12:16 2007 +0100

    [ARM] 4178/1: S3C2410: DMA ordering list
    
    Add DMA ordering list for S3C2410
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0c6022d453ecebdace0ce15434c7108e158149ca
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 13:02:52 2007 +0100

    [ARM] 4177/1: S3C24XX: Add DMA channel allocation order
    
    Allow the CPU code, and any board specific initialisation
    code to change the allocation order of the DMA channels,
    or stop a peripheral allocating any DMA at-all.
    
    This is due to the scarce mapping of DMA channels on
    some earlier S3C24XX cpus, where the selection changes
    depending on the channel in use.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d2a76020e3a52c6370a7d603082b4cdb3db0703e
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Tue Feb 13 00:50:34 2007 +0100

    [ARM] 4176/1: H1940 leds
    
    H1940 leds device addition.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ecd1b171a76bb73196dbce4da9f64a4a0a9d098f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Feb 13 00:39:08 2007 +0100

    [ARM] 4175/1: SMDK2413: add udc pull-up control
    
    USB gadget pull-up control and device addition
    for the SMDK2413/SMDK2412 board.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 71a9c4241278c8104ff30233b9247c0857c404d7
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Tue Feb 13 00:21:26 2007 +0100

    [ARM] 4174/1: H1940 usb device definitions
    
    This patch is adding the usb device controller to the h1940 device
    list. It's also adding the code to handle the usb pull-ups.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0dcfc328ccd1d475f10a33c0ccf10bda869d4a83
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Tue Feb 13 00:18:33 2007 +0100

    [ARM] 4173/1: S3C24XX usb device platform datas
    
    This patch is adding the functions and structures used for handling the
    S3C24XX udc driver platform datas.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ccf2c2229d4473cc1a334200c1b60ab6070adabe
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Wed Feb 14 08:42:20 2007 +0100

    [ALSA] version 1.0.14rc2
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9879951aa1f499e5f9db92f51cd6e7dfb65e78cb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Feb 13 15:53:22 2007 +0100

    [ALSA] Fix a typo in __dev* changes in portman2x4.c
    
    Fix a typo in the last __dev* changes in portman2x4.c.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit fa8f878701888666c124e21d77bf7f3ba2dd2359
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Mon Feb 12 14:06:22 2007 +0100

    [ALSA] Change AT91 PDC register defines for 2.6.20 kernel
    
    Use the new PDC register name defines that were updated
    in Linux 2.6.20.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2a40534348987346dae1c68c225eff7bc19ff529
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Mon Jan 22 12:59:08 2007 +0100

    [ALSA] SoC codecs - fix Kconfig - depends -> depends on
    
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 788c6043335590e0a483fdc18f85b1405a157bf9
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Tue Feb 13 13:11:11 2007 +0100

    [ALSA] Fix __devinit and __devexit issues with sound drivers
    
    Fix __devinit and __devexit issues with sound drivers.
    Resolves MODPOST warnings similar to:
    WARNING: sound/drivers/snd-dummy.o - Section mismatch: reference to .init.text:snd_dummy_probe from .data.rel.local between 'snd_dummy_driver' (at offset 0x0) and 'snd_dummy_controls'
    WARNING: sound/drivers/snd-mtpav.o - Section mismatch: reference to .init.text:snd_mtpav_probe from .data.rel.local between 'snd_mtpav_driver' (at offset 0x0) and 'snd_mtpav_input'
    WARNING: sound/drivers/snd-virmidi.o - Section mismatch: reference to .init.text:snd_virmidi_probe from .data.rel.local after 'snd_virmidi_driver' (at offset 0x0)
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 46f02ca36e9b2b690ebcef18fa0652c586d6c08e
Author: Mikael Nilsson <mikael@nilsson.name>
Date:   Tue Feb 13 12:46:16 2007 +0100

    [ALSA] hda-codec - Patch for enabling LFE on more Dell laptops
    
    Fix LFE controls for Dell Inspiron E1705/9400 and XPS M1710 laptops.
    
    Signed-off-by: Mikael Nilsson <mikael@nilsson.name>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 82f30040ada635d5d42a244b6eb84607d9881f5a
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Tue Feb 13 12:45:44 2007 +0100

    [ALSA] hda-codec - More fixes for Conexant HD Audio support
    
    Renamed Conexant 5045 to CX20549 (Venice) per Conexant Documentation
    Renamed Conexant 5047 to CX20551 (Waikiki) per Conexant Documentation
    Fixed automute on HP Laptops with CX20551 codec.
    Fixed recording issues on Toshiba Satelite P100/P105 series laptops
    Added HP DV8000, DV2000Z, Fujitsu Si1520 support
    More work to be done on CX20549 based systems, but CX20551 Systems are
    much better now.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f38cc317c0a7279bb725ec5c2251726eab3c722b
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Feb 9 20:52:55 2007 +0100

    [ALSA] usb-audio: add PCR-A PCM support
    
    Add support for the PCM interfaces of the Edirol PCR-A.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5dc5ebb7bc143fe38a56b9dd9c1d89220e20694a
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Feb 9 20:51:55 2007 +0100

    [ALSA] emu10k1: fix typo
    
    fix a typo
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 596f967f501799f87fded9e296ce0b14cd233674
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Fri Feb 9 12:54:44 2007 +0100

    [ALSA] usbaudio - remove urb->bandwidth reference
    
    Recent changes in usbcore removed the bandwidth field from struct urb.
    Remove the occurence in usbaudio.c
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9e292c0013d7d4158169eb9786aa0f9816eb5b40
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Feb 9 12:42:03 2007 +0100

    [ALSA] ac97 - Fix silent output problem with Cx20551 codec
    
    Fixed the silent output problem on laptops with Conexant Cx20551 codec
    chip, such as Packard-bell EasyNote A* series.
    The information was taken from ALSA bug#1134.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9e507abd87103b5263bb0bbd94a15d74004557e9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 8 17:50:10 2007 +0100

    [ALSA] hda-codec - Fix Oops with probing sigmatel codec chips
    
    When a device is unkown, the driver tries to set up the codec based on
    the BIOS information.  Then it may result in Oops if BIOS is broken.
    The patch fixes the issue, falling back to a reference model in such a
    case.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e65fa9f59e9230b72ac298d445b4a18a4eefeb34
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 14 15:06:09 2007 +0900

    sh: Kill off dead bigsur and ec3104 boards.
    
    Neither of these have had any maintenance in years, and there's
    no interest in keeping them straggling along. These have already
    been slated for removal some time, so finally just get rid of them.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit ac98695d6c1508b724f246f38ce57fb4e3cec356
Merge: d9bc125... 93bbad8...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Feb 13 22:02:32 2007 -0800

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit 71074d3a2c70aa8a213222fef5014bfd9b3daf1f
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 14 14:49:04 2007 +0900

    sh: Fixup r7780rp pata_platform for devres conversion.
    
    Tidy up the R7780RP I/O mapping routines and switch the
    pata_platform resources to IORESOURCE_MEM types, killing off
    the useless port->addr conversion.
    
    This fixes up R7780RP to boot after the recent devres conversion.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 93bbad8fe13a25dcf7f3bc628a71d1a7642ae61b
Merge: 9468482... b2875d4...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 21:16:39 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/mthca: Always fill MTTs from CPU
      IB/mthca: Merge MR and FMR space on 64-bit systems
      IB/mthca: Fix access to MTT and MPT tables on non-cache-coherent CPUs
      IB/mthca: Give reserved MTTs a separate cache line
      IB/mthca: Fix reserved MTTs calculation on mem-free HCAs
      RDMA/cxgb3: Add driver for Chelsio T3 RNIC
      IB: Remove redundant "_wq" from workqueue names
      RDMA/cma: Increment port number after close to avoid re-use
      IB/ehca: Fix memleak on module unloading
      IB/mthca: Work around gcc bug on sparc64
      IPoIB: Connected mode experimental support
      IB/core: Use ARRAY_SIZE macro for mandatory_table
      IB/mthca: Use correct structure size in call to memset()

commit 9468482bd4c3b89abe04a770848d5eaa1ea830b0
Merge: 551a10c... 8af1897...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 21:15:42 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] on reconnect to Samba - reset the unix capabilities
      [CIFS] Allow update of EOF on remote extend of file
      [CIFS] POSIX CIFS Extensions (continued) - POSIX Open
      [CIFS] Additional POSIX CIFS Extensions infolevels

commit db2e1fa3f0eefbbe04e90d6e4d290ee176b28248
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 14 14:13:10 2007 +0900

    sh: Revert TLB miss fast-path changes that broke PTEA parts.
    
    This ended up causing problems for older parts (particularly ones
    using PTEA). Revert this for now, it can be added back in once it's
    had some more testing.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 8af18971584d1e05770560206cfdfd1d6ba8a17f
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Feb 14 04:42:51 2007 +0000

    [CIFS] on reconnect to Samba - reset the unix capabilities
    
    After temporary server or network failure and reconneciton, we were not
    resending the unix capabilities via SetFSInfo - which confused Samba posix
    byte range locking code.
    
    Discovered by jra
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit b6f45a4b071d77777d70e097d429273aeedff717
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Mon Feb 12 22:19:12 2007 +0100

    [CPUFREQ] EPS - Correct 2nd brand test
    
    Solution for small, but nasty bug: access beyond end of f_table for C7 brand.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 551a10c7fc14640d484ee3dda699758041d8123f
Merge: f90203e... 928ba41...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 18:17:26 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPSEC]: Fix the address family to refer encap_family
      [IPSEC]: changing API of xfrm6_tunnel_register
      [IPSEC]: make sit use the xfrm4_tunnel_register
      [IPSEC]: Changing API of xfrm4_tunnel_register.
      [TCP]: Prevent pseudo garbage in SYN's advertized window
      [NET_SCHED]: sch_hfsc: replace ASSERT macro by WARN_ON
      [BRIDGE] br_if: Fix oops in port_carrier_check
      [NETFILTER]: Clear GSO bits for TCP reset packet
      [TG3]: Update copyright, version, and reldate.
      [TG3]: Add some tx timeout debug messages.
      [TG3]: Use constant for PHY register 0x1e.
      [TG3]: Power down 5704 serdes transceiver when shutting down.
      [TG3]: 5906 doesn't need to switch to slower clock.
      [TG3]: 5722/5756 don't need PHY jitter workaround.
      [TG3]: Use lower DMA watermark for 5703.
      [TG3]: Save MSI state before suspend.
      [XFRM]: Fix IPv4 tunnel mode decapsulation with IPV6=n
      [IPV6] HASHTABLES: Use appropriate seed for caluculating ehash index.

commit f90203e0cf0d5a8b027d511af318bb3db4758fe2
Merge: 33e563c... 719c91c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 17:34:23 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc
    
    * master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc: (61 commits)
      [POWERPC] Use udbg_early_init() on ppc32
      [POWERPC] Open Firmware serial port driver
      [POWERPC] Move MPIC smp routines into mpic.c
      [POWERPC] Cleanup pseries kexec code
      [POWERPC] Cleanup pseries smp initialisation code
      [POWERPC] Consolidate pseries platform header files into pseries.h
      [POWERPC] 85xx: Drop use of SYNC macro in head_fsl_booke.S
      [POWERPC] cell: pm_rtas_activat_signals routine cleanup
      [POWERPC] cell: PPU Oprofile cleanup patch
      [POWERPC] spufs: avoid accessing kernel memory through mmapped /mem node
      [POWERPC] spu sched: static timeslicing for SCHED_RR contexts
      [POWERPC] spu sched: use DECLARE_BITMAP
      [POWERPC] spu sched: forced preemption at execution
      [POWERPC] spu sched: update some comments
      [POWERPC] spu sched: simplity spu_remove_from_active_list
      [POWERPC] spufs: optimize spu_run
      [POWERPC] spufs: runqueue simplification
      [POWERPC] spufs: move prio to spu_context
      [POWERPC] spufs: state_mutex cleanup
      [POWERPC] spufs: simplify state_mutex
      ...

commit 719c91ccadd3ed26570dbb29d54166914832eee9
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Feb 13 15:54:22 2007 +1100

    [POWERPC] Use udbg_early_init() on ppc32
    
    udbg_early_init() is a function used on 64 bit systems, which
    initializes whichever early udbg backend is configured.  This function
    is not called on 32-bit, however if btext early debug is enabled it
    does have an explicit, inline, #ifdef-ed assignment performing
    analagous initialization.
    
    This patch makes things more uniform by folding the btext
    initialization as an option into udbg_early_init() and calling that
    from the 32-bit setup path.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8d38a5b2fab1397d35ba1c92828a91b77ce9f865
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Feb 13 21:35:38 2007 +0100

    [POWERPC] Open Firmware serial port driver
    
    This can be used for serial ports that are connected to an
    OF platform bus but are not autodetected by the lecacy
    serial support.
    It will automatically take over devices that come from the
    legacy serial detection, which usually is only one device.
    
    In some cases, rtas may be set up to use the serial port
    in the firmware, which allows easier debugging before probing
    the serial ports. In this case, the "used-by-rtas" property
    must be set by the firmware. This patch also adds code to the
    legacy serial driver to check for this.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 775aeff44774c6933d8f9c14e1f325d8acd03136
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Feb 8 18:34:04 2007 +1100

    [POWERPC] Move MPIC smp routines into mpic.c
    
    Move a couple of MPIC smp routines into mpic.c, they're inside an SMP
    block in mpic.c - so they're still only built for SMP.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dce623e0827e8d0ad60ce7f385c3394bf1b0bae0
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Feb 8 18:33:55 2007 +1100

    [POWERPC] Cleanup pseries kexec code
    
    Move all the pseries kexec code into one file, platforms/pseries/kexec.c
    Provide helpers for setting up ppc_md.kexec_cpu_down, so that we don't
    have to have #ifdef CONFIG_KEXEC in setup.c
    
    Move the initialisation of the ppc_md kexec callbacks into an init routine.
    This is well and truly early enough to cause no change in behaviour, we
    can't kexec until userspace has given us a kernel to kexec into.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8feaeca23ab8f520e7af2a862fd6ea8e7bfd8854
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Feb 8 18:33:55 2007 +1100

    [POWERPC] Cleanup pseries smp initialisation code
    
    Move some extern declarations from setup.c into the new pseries.h.
    While we're at it, provide dummy implementations for !SMP, to avoid
    cluttering the C file with more #ifdefs.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 577830b034bc11c93d4b9e21e8782900d5485e7f
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Feb 8 18:33:51 2007 +1100

    [POWERPC] Consolidate pseries platform header files into pseries.h
    
    Following the example of platforms/pasemi, consolidate a couple of
    tiny header files in platforms/pseries into pseries.h.
    
    This gives us a convenient place to put things that need to be
    available to the platform code, but not public. And hopefully will
    help people resist the temptation of sticking externs in C files.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 944b380e0c3dead0e16a747dfd3ce2765afac16d
Merge: fff5f52... c7eb734...
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Feb 14 11:33:39 2007 +1100

    Merge branch 'cell-merge' of git+ssh://master.kernel.org/pub/scm/linux/kernel/git/arnd/cell-2.6

commit 33e563c1190c26b6bf61990c505cdcb5cdbba7e4
Merge: 463020c... 5dd3ffa...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 16:28:23 2007 -0800

    Merge branch 'i2c-for-linus' of git://jdelvare.pck.nerim.net/jdelvare-2.6
    
    * 'i2c-for-linus' of git://jdelvare.pck.nerim.net/jdelvare-2.6:
      i2c: Stop using i2c_adapter.class_dev
      i2c: Remove the warning on missing adapter device
      i2c: Declare more i2c_adapter parent devices
      i2c: PA Semi SMBus driver
      i2c-amd8111: Proposed cleanups
      i2c-parport: Add support for One For All remote JP1 interface
      i2c-viapro: Add support for the VIA CX700 south bridge
      i2c: Add IDs to adapters
      i2c: Update the list of bus IDs
      i2c: Add driver suspend/resume/shutdown support
      i2c: completion header cleanups
      i2c-i801: Document the SMBus unhiding quirk
      i2c-i801: Spelling fix
      i2c: Fix typo in SMBus Write Word Data description
      i2c-piix4: Add support for the ATI SB600
      i2c-nforce2: Drop unused reference to pci_dev
      i2c/vt8231: Remove superfluous initialization
      i2c-ali1563: Fix device initialization
      i2c-ali1563: Improve the status messages

commit 463020ce428e2f00d4f33a383d6f39c7453a6854
Merge: 58a3bb5... 431dc80...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 16:12:23 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] Fix sigset_t endianess swapping issues in 32-bit compat code.
      [MIPS] Fix uniprocessor Sibyte builds.
      [MIPS] Make entry.S a little more readable.
      [MIPS] Remove stray instruction from __get_user_asm_ll32.
      [MIPS] 32-bit: Fix warning about cast for fetching pointer from userspace.
      [MIPS] DECstation: Fix irq handling
      [MIPS] signals: make common _BLOCKABLE macro
      [MIPS] signal: Move sigframe definition for native O32/N64 into signal.c
      [MIPS] signal: Move {restore,setup}_sigcontext prototypes to their user
      [MIPS] signal: Fix warnings in o32 compat code.
      [MIPS] IP27: Enable N32 support in defconfig.
      Revert "[MIPS] Fix warning in get_user when fetching pointer object from userspace."
      [MIPS] Don't claim we support dma_declare_coherent_memory - we don't.
      [MIPS] Unify dma-{coherent,noncoherent.ip27,ip32}
      [MIPS] Improve branch prediction in ll/sc atomic operations.

commit 58a3bb59973e33a428d72fa530a3d1d81feb0e8f
Merge: 7f1f86a... 88d5a7b...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 16:10:08 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog
    
    * master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog: (23 commits)
      [WATCHDOG] timers cleanup
      [WATCHDOG] ib700wdt.c - convert to platform_device part 2
      [WATCHDOG] ib700wdt.c - convert to platform_device
      [WATCHDOG] ib700wdt.c spinlock/WDIOC_SETOPTIONS changes
      [WATCHDOG] ib700wdt.c small clean-up's
      [WATCHDOG] ib700wdt.c clean-up init and exit routines
      [WATCHDOG] ib700_wdt.c stop + set_heartbeat operations
      [WATCHDOG] show default value for nowayout in module parameter
      [WATCHDOG] advantechwdt.c - convert to platform_device part 2
      [WATCHDOG] advantechwdt.c - convert to platform_device
      [WATCHDOG] advantechwdt.c - move set_heartbeat to a seperate function
      [WATCHDOG] advantechwdt.c - cleanup before platform_device patches
      [WATCHDOG] acquirewdt.c - convert to platform_device part 2
      [WATCHDOG] acquirewdt.c - convert to platform_device
      [WATCHDOG] acquirewdt.c - clean before platform_device patches
      [WATCHDOG] pcwd_usb.c - get heartbeat from dip switches
      [WATCHDOG] pcwd.c - e-mail adres update
      [WATCHDOG] pcwd_usb.c - get heartbeat from dip switches
      [WATCHDOG] pcwd_usb.c - document includes
      [WATCHDOG] pcwd_pci.c - spinlock fixes
      ...

commit 7f1f86a0d04e79f8165e6f50d329a520b8cd11e5
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Feb 13 14:38:58 2007 -0700

    [PATCH] Fix SAK_work workqueue initialization.
    
    Somewhere in the rewrite of the work queues my cleanup of SAK handling
    got broken.  Maybe I didn't retest it properly or possibly the API
    was changing so fast I missed something.  Regardless currently
    triggering a SAK now generates an ugly BUG_ON and kills the kernel.
    
    Thanks to Alexey Dobriyan <adobriyan@openvz.org> for spotting this.
    
    This modifies the use of SAK_work to initialize it when the data
    structure it resides in is initialized, and to simply call
    schedule_work when we need to generate a SAK.  I update both
    data structures that have a SAK_work member for consistency.
    
    All of the old PREPARE_WORK calls that are now gone.
    
    If we call schedule_work again before it has processed it
    has generated the first SAK it will simply ignore the duplicate
    schedule_work request.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 431dc8040354db65e4f8d4d4e21ae4fab41f5bc3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 00:05:11 2007 +0000

    [MIPS] Fix sigset_t endianess swapping issues in 32-bit compat code.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 366d6aef281a670b32a51d289fc07bf0e5e72d9a
Author: Andrew Sharp <tigerand@gmail.com>
Date:   Fri Feb 9 17:35:28 2007 -0800

    [MIPS] Fix uniprocessor Sibyte builds.
    
    Signed-off-by: Andrew Sharp <tigerand@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7da8a581f5ec0ecac5f0afc9ec26ce13b780d48d
Author: Franck Bui-Huu <vagabon.xyz@gmail.com>
Date:   Tue Feb 13 14:50:18 2007 +0100

    [MIPS] Make entry.S a little more readable.
    
    When CONFIG_PREEMPT is not set, it also moves one branch instruction from
    ret_from_irq() to ret_from_exception().  Therefore we favour the return
    from irq case which should be more common than the other one.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Acked-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6f3aa38e191326a82d5dcae1f6cdc88b1d9a8d32
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 15:01:21 2007 +0000

    [MIPS] Remove stray instruction from __get_user_asm_ll32.
    
    This did result in double clearing of the error return value on success
    only but should make a meassurable overhead for sigreturn.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cb66fb3f156b485b22db97db22e96db4786dc68b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 11:45:24 2007 +0000

    [MIPS] 32-bit: Fix warning about cast for fetching pointer from userspace.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d01f06ef0c783eceb53030fc5407caa94586bd6a
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Feb 12 23:48:26 2007 +0900

    [MIPS] DECstation: Fix irq handling
    
    When I post a patch (commit f431baa55abf8adeed0c718b51deacbc151f58f1),
    I just tried to not change behavior of existing codes, but it seems
    dec/int-handler.S had been broken since its previous commit
    937a801576f954bd030d7c4a5a94571710d87c0b.
    
    The caller of plat_irq_dispatch do setup/restore TI_REGS($28), so
    dec's plat_irq_dispatch should not do it, and there is no need to
    adjust RA.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 24c556e99ec8a61ce1fbc75bee61dc19edf2c4df
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Fri Feb 9 16:07:37 2007 +0100

    [MIPS] signals: make common _BLOCKABLE macro
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 66680583461d7cae281cef63c050c9b6371e3286
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 01:31:48 2007 +0000

    [MIPS] signal: Move sigframe definition for native O32/N64 into signal.c
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 205d84aaea380bbd1cc1079d44086cd50c2c2dad
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 01:28:09 2007 +0000

    [MIPS] signal: Move {restore,setup}_sigcontext prototypes to their user
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit dd02f06aa96ab4590da12704366450a2d4753d3c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 00:50:57 2007 +0000

    [MIPS] signal: Fix warnings in o32 compat code.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit af3d10d52d38d2c56a8bca9943c07b00031fc718
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 12 23:26:01 2007 +0000

    [MIPS] IP27: Enable N32 support in defconfig.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cd1fb9eabea38489579284e0cae0c7019b77b10f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 12 23:12:38 2007 +0000

    Revert "[MIPS] Fix warning in get_user when fetching pointer object from userspace."
    
    This reverts commit 4ed3a77f38c023658784804cb39a7ce18063dc88.

commit 84b47a959b55930e86d6178d49769bc9ba34bce1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 12 22:22:53 2007 +0000

    [MIPS] Don't claim we support dma_declare_coherent_memory - we don't.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9a88cbb5227970757881b1a65be01dea61fe2584
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Nov 16 02:56:12 2006 +0000

    [MIPS] Unify dma-{coherent,noncoherent.ip27,ip32}
    
    Platforms will now have to supply a function dma_device_is_coherent which
    returns if a particular device participates in the coherence domain.  For
    most platforms this function will always return 0 or 1.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f65e4fa8e0c6022ad58dc88d1b11b12589ed7f9f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Sep 28 01:45:21 2006 +0100

    [MIPS] Improve branch prediction in ll/sc atomic operations.
    
    Now that finally all supported versions of binutils have functioning
    support for .subsection use .subsection to tweak the branch prediction
    
    I did not modify the R10000 errata variants because it seems unclear if
    this will invalidate the workaround which actually relies on the cheesy
    prediction of branch likely to cause a misspredict if the sc was
    successful.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 88d5a7bb75b5e8f600e79b16abaf008c7fdfd27d
Merge: 9af9fc4... 82eb7c5...
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Tue Feb 13 23:24:34 2007 +0100

    Merge ../linux-2.6-watchdog-mm

commit fff5f52808be01d16bb7c8b82580155ff19e16b0
Merge: f909f10... 02ed82c...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Feb 13 16:14:01 2007 -0600

    Merge branch '85xx' into for_paulus

commit 02ed82ccc5171bc3c88666568edcb71f3d4a79f6
Author: Becky Bruce <bgill@freescale.com>
Date:   Tue Feb 13 16:00:49 2007 -0600

    [POWERPC] 85xx: Drop use of SYNC macro in head_fsl_booke.S
    
    Eliminate needless invocation of the SYNC macro (which always evaluates to
    nothing on BookE) from head_fsl_booke.S (for both arch/ppc & arch/powerpc).
    
    Signed-off-by: Becky Bruce <becky.bruce@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 5dd3ffae0afe355738eca14da1b47284bdae6240
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:04 2007 +0100

    i2c: Stop using i2c_adapter.class_dev
    
    Stop using i2c_adapter.class_dev, as it is going to be removed
    soon. Luckily, there are only 4 RTC drivers affected.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Alessandro Zummo <a.zummo@towertech.it>

commit fe2c8d51af96ef7b8ec0bfd70ec62bbe32c0696e
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:04 2007 +0100

    i2c: Remove the warning on missing adapter device
    
    Now that the i2c_adapter migration plan changed and we are going to
    keep i2c_adapter.dev, it's no longer that urgent to add a proper device
    to all i2c_adapter drivers. Thus is seems resonable to degrade the
    warning asking authors to migrate their driver to a debug message.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 12a917f69d1468c91d646dbad8408dd0d39d6207
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:03 2007 +0100

    i2c: Declare more i2c_adapter parent devices
    
    Declare the parent device of i2c_adapter devices each time we can
    easily do so. It makes the i2c_adapter appear at the right place in
    the device tree, rather than as a platform device.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Len Brown <len.brown@intel.com>
    Cc: Jordan Crouse <jordan.crouse@amd.com>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: v4l-dvb-maintainer@linuxtv.org
    Cc: Petr Vandrovec <vandrove@vc.cvut.cz>

commit beb58aa39e6e5a52875defe12c7697b0bfa95d4c
Author: Olof Johansson <olof@lixom.net>
Date:   Tue Feb 13 22:09:03 2007 +0100

    i2c: PA Semi SMBus driver
    
    New driver for the PA Semi SMBus interfaces.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 88b9e750e974febd9128fc622109c526a9d22c10
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:02 2007 +0100

    i2c-amd8111: Proposed cleanups
    
    Proposed cleanups to the i2c-amd8111 SMBus driver:
    * Fold long lines.
    * Add an explicit mask when writing the low byte of a word.
    * Use I2C_SMBUS_BLOCK_MAX instead of hardcoding 32.
    * Discard extra blank lines.
    * Use boolean not instead of bitwise not for bit tests, it's clearer.
    * Return -EBUSY rather than -1 on I/O resource conflict.
    * Fix a race on device registration, initialization should be done
      before the bus is registered.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 55249cf750e4d9be19c7f8afd502c9ca42de8858
Author: Jonathan McDowell <noodles@earth.li>
Date:   Tue Feb 13 22:09:02 2007 +0100

    i2c-parport: Add support for One For All remote JP1 interface
    
    This simple patch adds support to i2c-parport for the One For All remote
    JP1 parallel port interfaces which can be found detailed at:
    
    http://www.hifi-remote.com/jp1/hardware.shtml
    
    These allow access to the internal configuration EEPROM on various
    remote controls and there are a variety of Windows tools that make use
    of this hardware. I have tested this patch with the "simple" parallel
    port device and a One For All URC-7562 and confirmed that the data read
    using the eeprom i2c driver matches that returned by the Windows "IR"
    JP1 tool.
    
    Signed-off-by: Jonathan McDowell <noodles@earth.li>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit ab6a6ed271c757b429ddc68f5b93a41f9592ab8b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:02 2007 +0100

    i2c-viapro: Add support for the VIA CX700 south bridge
    
    We do not have any documentation for the CX700, but it was reported
    to work fine. Thanks to Claas Langbehn for testing.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 9ace555d7d87c55ceab6999be444c9a17e0e79b4
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Feb 13 22:09:01 2007 +0100

    i2c: Add IDs to adapters
    
    IDs have been defined but not used by most of the I2C adapters.
    By having a unique ID, clients can check for correct connection
    during probe.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit a394ae15427f215b43fca21f3c9370b0e63ba252
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:01 2007 +0100

    i2c: Update the list of bus IDs
    
    * The Voodoo3 has no SMBus, it has two bit-banged busses which
      already have an ID assigned (I2C_HW_B_VOO).
    * The i2c-ipmi bus driver was a non-sense, it'll never be ported
      to Linux 2.6.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Yani Ioannou <yani.ioannou@gmail.com>

commit f37dd80ac2a67e4e4e921f99d34a1ceeb2488abb
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Feb 13 22:09:00 2007 +0100

    i2c: Add driver suspend/resume/shutdown support
    
    Driver model updates for the I2C core:
    
     - Add new suspend(), resume(), and shutdown() methods.  Use them in the
       standard driver model style; document them.
    
     - Minor doc updates to highlight zero-initialized fields in drivers, and
       the driver model accessors for "clientdata".
    
    If any i2c drivers were previously using the old suspend/resume calls
    in "struct driver", they were getting warning messages ... and will
    now no longer work.  Other than that, this patch changes no behaviors;
    and it lets I2C drivers use conventional PM and shutdown support.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit b8d6f45b32f6fe72bf7304183275e99332544ce1
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:00 2007 +0100

    i2c: completion header cleanups
    
    i2c-core and i2c-isa use completions without including
    <linux/completion.h>. Fix it.
    
    i2c-powermac includes <linux/completion.h> but doesn't use any
    completion. Fix it.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: David Brownell <david-b@pacbell.net>

commit 099ab118b6b194ad43865f62776a0d36d4b1c7d2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:09:00 2007 +0100

    i2c-i801: Document the SMBus unhiding quirk
    
    This is a frequently asked question so it deserves a paragraph in
    the driver documentation.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit fcdd96ecaf04fb4f229ac1a64fe77fda890dffd5
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:08:59 2007 +0100

    i2c-i801: Spelling fix
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 3f9a4790a3818af1228c7fb4286afd66f3201fd0
Author: Mike Frysinger <vapier.adi@gmail.com>
Date:   Tue Feb 13 22:08:59 2007 +0100

    i2c: Fix typo in SMBus Write Word Data description
    
    Write data, don't read it.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 4e6697fcc194db8b45559a9863947c6cbfeea363
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:08:59 2007 +0100

    i2c-piix4: Add support for the ATI SB600
    
    Add support for the ATI SB600 SMBus controller.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 4ef0ce90df3763e277b5307fb580ff1cdaaad7b2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:08:58 2007 +0100

    i2c-nforce2: Drop unused reference to pci_dev
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Hans-Frieder Vogt <hfvogt@gmx.net>

commit bbeaeef73a0b0a5c43ad2657b61857167d914a55
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Feb 13 22:08:58 2007 +0100

    i2c/vt8231: Remove superfluous initialization
    
    Remove a superfluous initialization from the vt8231 hwmon driver; the
    i2c core does this, and the source field will be vanishing soon.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>

commit 849be516c57501ec4729bde51babc25a7b073b65
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:08:57 2007 +0100

    i2c-ali1563: Fix device initialization
    
    The i2c-ali1563 initialization looks quite broken to me:
    * If the I/O space isn't enabled, we forcibly set 3 bits in
      the PCI configuration space instead of just the one enabling
      the I/O space.
    * After that we pretend to check if the write worked, but we
      don't actually read the new value from the register.
    * It's probably not a good idea to enable the I/O space if no
      base address has been set.
    
    So I propose the following changes to that part of the driver:
    * Merge ali1563_enable() into ali1563_setup().
    * Check the base address before the I/O space enabled bit.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Rudolf Marek <r.marek@assembler.cz>

commit 69735698312f6f5e47001cf62dc678f591b6a6de
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Feb 13 22:08:57 2007 +0100

    i2c-ali1563: Improve the status messages
    
    Improve the status messages printed by the i2c-ali1563 driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Rudolf Marek <r.marek@assembler.cz>

commit c7eb734766217b9ddac217cbccae3aedcfa67520
Author: Maynard Johnson <mpjohn@us.ibm.com>
Date:   Tue Feb 13 22:02:03 2007 +0100

    [POWERPC] cell: pm_rtas_activat_signals routine cleanup
    
    The code was setting up the debug bus for group 21 when profiling on the
    event PPU CYCLES.  The debug bus is not actually used by the hardware
    performance counters when counting PPU CYCLES.  Setting up the debug bus
    for PPU CYCLES causes signal routing conflicts on the debug bus when
    profiling PPU cycles and another PPU event.  This patch fixes the code to
    only setup the debug bus to route the performance signals for the non
    PPU CYCLE events.
    
    Signed-off-by: Maynard Johnson <mpjohn@us.ibm.com>
    Signed-off-by: Carl Love <carll@us.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit bcb63e25ed3c56ee40cca4d18fbaac1d2a40c1d6
Author: Carl Love <carll@us.ibm.com>
Date:   Tue Feb 13 22:02:02 2007 +0100

    [POWERPC] cell: PPU Oprofile cleanup patch
    
    This is a clean up patch that includes the following changes:
    
     -Some comments were added to clarify the code based on feedback
      from the community.
     -The write_pm_cntrl() and set_count_mode() were passed a
      structure element from a global variable.  The argument was
      removed so the functions now just operate on the global directly.
     -The set_pm_event() function call in the cell_virtual_cntr()
      routine was moved to a for-loop before the for_each_cpu loop
    
    Signed-off-by: Carl Love <carll@us.ibm.com>
    Signed-off-by: Maynard Johnson <mpjohn@us.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 928ba4169dc1d82c83105831f5ddb5472379b440
Author: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
Date:   Tue Feb 13 12:57:16 2007 -0800

    [IPSEC]: Fix the address family to refer encap_family
    
    Fix the address family to refer encap_family
    when comparing with a kernel generated xfrm_state
    
    Signed-off-by: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73d605d1abbd70ef67b7660cf2ff177259960756
Author: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
Date:   Tue Feb 13 12:55:55 2007 -0800

    [IPSEC]: changing API of xfrm6_tunnel_register
    
    This patch changes xfrm6_tunnel register and deregister
    interface to prepare for solving the conflict of device
    tunnels with inter address family IPsec tunnel.
    There is no device which conflicts with IPv4 over IPv6
    IPsec tunnel.
    
    Signed-off-by: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 128b8546a83a9e37448bc126e1045dc1db291165
Author: Masato Noguchi <Masato.Noguchi@jp.sony.com>
Date:   Tue Feb 13 21:54:30 2007 +0100

    [POWERPC] spufs: avoid accessing kernel memory through mmapped /mem node
    
    I found an exploit in current kernel.
    Currently, there is no range check about mmapping "/mem" node in
    spufs. Thus, an application can access privilege memory region.
    
    In case this kernel already worked on a public server, I send this
    information only here.
    If there are such servers in somewhere, please replace it, ASAP.
    
    Signed-off-by: Masato Noguchi <Masato.Noguchi@jp.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 2eb1b12049844a8ebc670e0e4fc908bc3f8933d3
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:29 2007 +0100

    [POWERPC] spu sched: static timeslicing for SCHED_RR contexts
    
    For SCHED_RR tasks we can do some really trivial timeslicing.  Basically
    we fire up a time for every scheduler tick that searches for a higher
    or same priority thread that is on the runqueue and if there is one
    context switches to it.  Because we can't lock spus from timer context
    we actually run this from a delayed runqueue instead of a timer.
    
    A nice optimization would be to skip the actual priority bitmap search
    when there are less contexts than physical spus available.  To implement
    this I need a so far unpublished patch from Andre, and it will be added
    after we have that patch in.
    
    Note that right now we only do the time slicing for SCHED_RR tasks.
    The code would work for SCHED_OTHER tasks aswell, but their prio
    value is defered from the one the PPU thread has at time of spu_run,
    and using this for spu scheduling decisions would make the code very
    unfair.  SCHED_OTHER support will be enabled once we the spu scheduler
    knows how to calculcate cpu_context.prio (very soon)
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 72cb360839f88c02ccf38f1df214316e05886ff3
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:28 2007 +0100

    [POWERPC] spu sched: use DECLARE_BITMAP
    
    use DECLARE_BITMAP in the spu scheduler instead of reimplementing it.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 52f04fcf66a5d5d90790d6cfde52e391ecf2b882
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:27 2007 +0100

    [POWERPC] spu sched: forced preemption at execution
    
    If we start a spu context with realtime priority we want it to run
    immediately and not wait until some other lower priority thread has
    finished.  Try to find a suitable victim and use it's spu in this
    case.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit ae7b4c5284d11d49ed9432c16505fcbeb8d3b8cf
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:26 2007 +0100

    [POWERPC] spu sched: update some comments
    
    Give spu_yield a kerneldoc comment and remove the old comment
    documenting spu_activate, spu_deactive and spu_yield as all of them
    now have descriptive kerneldoc comments of their own.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 678b2ff1e65ecccdb15cbfe97081572fc35944b7
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:25 2007 +0100

    [POWERPC] spu sched: simplity spu_remove_from_active_list
    
    If we call spu_remove_from_active_list that spu is always guaranteed
    to be on the active list and in runnable state, so we can simply
    do a list_del to remove it and unconditionally take the was_active
    codepath.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 26bec67386dbf6ef887254e815398842e182cdcd
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:24 2007 +0100

    [POWERPC] spufs: optimize spu_run
    
    There is no need to directly wake up contexts in spu_activate when
    called from spu_run, so add a flag to surpress this wakeup.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 079cdb61614c466c939ebf74c7ef6745667bc61e
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:23 2007 +0100

    [POWERPC] spufs: runqueue simplification
    
    This is the biggest patch in this series, and it reworks the guts of
    the spu scheduler runqueue mechanism:
    
     - instead of embedding a waitqueue in the runqueue there is now a
       simple doubly-linked list, the actual wakeups happen by reusing
       the stop_wq in the spu context (maybe we should rename it one day)
     - spu_free and spu_prio_wakeup are merged into a single spu_reschedule
       function
     - various functionality is split out into small helpers, and kerneldoc
       comments are added in various places to document what's going on.
     - spu_activate is rewritten into a tight loop by removing test for
       various impossible conditions and using the infrastructure in this
       patch.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 8389998ae9ea2888c86c446f7911ddced50052a1
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:22 2007 +0100

    [POWERPC] spufs: move prio to spu_context
    
    It doesn't make any sense to have a priority field in the physical spu
    structure.  Move it into the spu context instead.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 6a0641e51011def4e308fd07387047f5ee50647f
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:54:21 2007 +0100

    [POWERPC] spufs: state_mutex cleanup
    
    Various cleanups in code surrounding the state semaphore:
    
     - inline spu_acquire/spu_release
     - cleanup spu_acquire_* and add kerneldoc comments to these functions
     - remove spu_release_exclusive and replace it with spu_release
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit c73cb5a2d607b5b95a06a54d8291ddb659b348b6
Author: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
Date:   Tue Feb 13 12:55:25 2007 -0800

    [IPSEC]: make sit use the xfrm4_tunnel_register
    
    This patch makes sit use xfrm4_tunnel_register instead of
    inet_add_protocol. It solves conflict of sit device with
    inter address family IPsec tunnel.
    
    Signed-off-by: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c0d56408e3ff52d635441e0f08d12164a63728cf
Author: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
Date:   Tue Feb 13 12:54:47 2007 -0800

    [IPSEC]: Changing API of xfrm4_tunnel_register.
    
    This patch changes xfrm4_tunnel register and deregister
    interface to prepare for solving the conflict of device
    tunnels with inter address family IPsec tunnel.
    
    Signed-off-by: Kazunori MIYAZAWA <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 650f8b0291ecd0abdeadbd0ff3d70c3538e55405
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:36:50 2007 +0100

    [POWERPC] spufs: simplify state_mutex
    
    The r/w semaphore to lock the spus was overkill and can be replaced
    with a mutex to make it faster, simpler and easier to debug.  It also
    helps to allow making most spufs interruptible in future patches.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 202557d29eae528f464652e92085f3b19b05a0a7
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:36:49 2007 +0100

    [POWERPC] spufs: sched.c cleanups
    
    Various cleanups to sched.c that don't change the global control flow:
    
     - add kerneldoc comments to various functions
     - add spu_ prefixes to various functions
     - add/remove context from the runqueue in bind/unbind_context as
       it's part of the logical operation
     - add a call to put_active_spu to spu_unbind_contex as it's logically
       part of the unbind operation
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 81998bafe299b8b675157f0a4dfe8dad43215da9
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:36:48 2007 +0100

    [POWERPC] spufs: bind_context sets SPU_STATE_RUNNABLE
    
    Only bind_context/unbind_context change the spu context state.  Thus
    we can move all assignents of SPU_STATE_RUNNABLE into bind_context,
    which parallels the unbind side aswell.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit aa56c16807ba7b8e801216cab012d2f498755ba5
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:36:47 2007 +0100

    [POWERPC] spufs: remove superfluous SPU_STATE_SAVED assignments
    
    unbind_context already sets the context state to SPU_STATE_SAVED, thus
    the spu_deactivate callers don't need to do it again.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 5cb23afc9e64841adb43d46160a5c63a80ebfd54
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:36:46 2007 +0100

    [POWERPC] spufs: remove empty last line in run.c
    
    Remove the empty last line in arch/powerpc/platforms/cell/spufs/run.c.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 30a6c337dcefa7583fe9289fedb28783af980c0c
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Feb 13 21:36:45 2007 +0100

    [POWERPC] spufs: remove SPU_CONTEXT_PREEMPT
    
    Remove the SPU_CONTEXT_PREEMPT define.  It's unused and won't be used
    in this form after the scheduler rework.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>

commit 600ff0c24bb71482e7f0da948a931d5c5d72838a
Author: Ilpo Jarvinen <ilpo.jarvinen@helsinki.fi>
Date:   Tue Feb 13 12:42:11 2007 -0800

    [TCP]: Prevent pseudo garbage in SYN's advertized window
    
    TCP may advertize up to 16-bits window in SYN packets (no window
    scaling allowed). At the same time, TCP may have rcv_wnd
    (32-bits) that does not fit to 16-bits without window scaling
    resulting in pseudo garbage into advertized window from the
    low-order bits of rcv_wnd. This can happen at least when
    mss <= (1<<wscale) (see tcp_select_initial_window). This patch
    fixes the handling of SYN advertized windows (compile tested
    only).
    
    In worst case (which is unlikely to occur though), the receiver
    advertized window could be just couple of bytes. I'm not sure
    that such situation would be handled very well at all by the
    receiver!? Fortunately, the situation normalizes after the
    first non-SYN ACK is received because it has the correct,
    scaled window.
    
    Alternatively, tcp_select_initial_window could be changed to
    prevent too large rcv_wnd in the first place.
    
    [ tcp_make_synack() has the same bug, and I've added a fix for
      that to this patch -DaveM ]
    
    Signed-off-by: Ilpo Jarvinen <ilpo.jarvinen@helsinki.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d50f23108ff01457d1ca6fb2b5f2da8214e83e4
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Feb 13 12:36:57 2007 -0800

    [NET_SCHED]: sch_hfsc: replace ASSERT macro by WARN_ON
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a10d567c89dfba90dde2e0515e25760fd74cde06
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Tue Feb 13 12:35:26 2007 -0800

    [BRIDGE] br_if: Fix oops in port_carrier_check
    
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Acked-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bbf4a6bc8c4d59a0a9033fc2cb96ec03430c96e4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Feb 13 12:32:58 2007 -0800

    [NETFILTER]: Clear GSO bits for TCP reset packet
    
    The TCP reset packet is copied from the original.  This
    includes all the GSO bits which do not apply to the new
    packet.  So we should clear those bits.
    
    Spotted by Patrick McHardy.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65610fbab35b0570df4a9d0e77e111f85606b312
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:18:46 2007 -0800

    [TG3]: Update copyright, version, and reldate.
    
    Update version to 3.73.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b0408751128edc126eb37798d51891d8d0a41dc6
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:18:30 2007 -0800

    [TG3]: Add some tx timeout debug messages.
    
    Print the most useful information during tx timeout to help debug.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 569a5df8597deeaa39867be73c7305fd82522f57
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:18:15 2007 -0800

    [TG3]: Use constant for PHY register 0x1e.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5129724aa5de3a71fc70e71ca49d542ca1a5aa1e
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:17:57 2007 -0800

    [TG3]: Power down 5704 serdes transceiver when shutting down.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7b0a8573c9ac8923bf6f205f4ce60dd2ac811d5
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:17:38 2007 -0800

    [TG3]: 5906 doesn't need to switch to slower clock.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4011adaf8b5ea555357a40388ee9aa7ed2daf9f
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:17:25 2007 -0800

    [TG3]: 5722/5756 don't need PHY jitter workaround.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49afdeb65bb917e22cf9116bc31380befe9db890
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:17:03 2007 -0800

    [TG3]: Use lower DMA watermark for 5703.
    
    Set DMA read watermark to 4 on 5703 in PCIX mode.  This is needed to
    prevent some tx timeouts.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 436f137975507b0baab0859a253c3c9332c22f62
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Feb 13 12:16:45 2007 -0800

    [TG3]: Save MSI state before suspend.
    
    This fixes the following problem:
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7969
    
    The MSI state needs to be saved during suspend.  PCI state saved
    during tg3_init_one() does not contain valid MSI state because
    MSI hasn't been enabled.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 552ce544edfbe9bce79952a8c0f8d65b7f2d16bb
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 13 12:08:18 2007 -0800

    Revert "[PATCH] Fix d_path for lazy unmounts"
    
    This reverts commit eb3dfb0cb1f4a44e2d0553f89514ce9f2a9fcaf1.
    
    It causes some strange Gnome problem with dbus-daemon getting stuck, so
    we'll revert it until that problem is understood.
    
    Reported by both walt and Greg Kroah-Hartman, who both independently git-bisected
    the problem to this commit.
    
    Andreas is looking at it.
    
    Reported-by: walt <wa1ter@myrealbox.com>
    Reported-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f909f10621f520ed53026cf3258f9501f859fcc3
Merge: a28cfb8... a20d0ce...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Feb 13 12:51:38 2007 -0600

    Merge branch '83xx' into for_paulus

commit a20d0ce694e56f94857eacdc8534357d798460fd
Author: Timur Tabi <timur@freescale.com>
Date:   Fri Feb 9 10:01:50 2007 -0600

    [POWERPC] 83xx: Updated mpc834x_itx_defconfig
    
    This patch updates the defconfig for the MPC8349E-mITX.  In addition to picking
    up changes from recent kernels, disables support for e100 (which doesn't ship
    with the system), turns off input devices, turns on some I2C support, turns
    off HW monitoring (HW not yet supported), turns off OHCI USB (not used), turns
    off USB gadget support (HW not yet supported), turns on DOS FS support, and
    turns off kernel debugging.
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 8c4a013da84e69e4d736363921792e1b37525577
Author: Timur Tabi <timur@freescale.com>
Date:   Fri Feb 9 14:00:36 2007 -0600

    [POWERPC] 83xx: Add support for MPC8349E-mITX-GP
    
    This patch adds a defconfig and a DTS for the MPC8349E-mITX-GP, a variant of
    the MPC8349E-mITX.
    
    USB is disabled because the only USB port is not setup properly by
    firmware/kernel
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit a28cfb841a81a41a96f7c4267610c5b4949c32d8
Merge: 7baca6a... eb11a72...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Feb 13 12:41:23 2007 -0600

    Merge branch '85xx' into for_paulus

commit eb11a720a85833bbd9b92628f196583ee1d50d4e
Author: Andy Fleming <afleming@freescale.com>
Date:   Fri Feb 9 17:30:09 2007 -0600

    [POWERPC] 85xx: Add a defconfig for the 8568 MDS
    
    Add defconfig for the MPC8568 MDS reference board
    
    Signed-off-by: Andrew Fleming <afleming@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit c2882bb12cbd8a4170e673e6a33c6be047b75bc1
Author: Andy Fleming <afleming@freescale.com>
Date:   Fri Feb 9 17:28:31 2007 -0600

    [POWERPC] 85xx: Add support for the 8568 MDS board
    
    Add support for the MPC8568 MDS reference board
    
    Signed-off-by: Andrew Fleming <afleming@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 126b1922367fbe5513daa675a2abd13ed3917f4e
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] x86-64: Remove mk_pte_phys()
    
    - Convert last user to pfn_pte
    - Remove mk_pte_phys
    
    Suggested by Jan Beulich
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 22c5ace7290b792faf64ffe90cf933950fbf52db
Author: Jan Beulich <jbeulich@novell.com>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: Fix broken CONFIG_COMPAT_VDSO on i386
    
    After updating several machines to 2.6.20, I can't boot  anymore the single
    one of them that supports the NX bit and is configured as a 32-bit system.
    
    My understanding is that the VDSO changes in 2.6.20-rc7 were not fully
    cooked, in that with that config option enabled VDSO_SYM(x) now equals
    x, meaning that an address in the fixmap area is now being passed to
    apps via AT_SYSINFO. However, the page is mapped with PAGE_READONLY
    rather than PAGE_READONLY_EXEC.
    
    I'm not certain whether having app code go through the fixmap area is
    intended, but in case it is here is the simple patch that makes things work
    again.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 98838ec984b78c625bbf9a5daaf001cd216b8f86
Author: Giuliano Procida <giuliano.procida@googlemail.com>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: fix 32-bit ioctls on x64_32
    
    [MTRR] fix 32-bit ioctls on x64_32
    
    Signed-off-by: Giuliano Procida <giuliano.procida@googlemail.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 62cc49396e593dd71c6595302bb10b085aefbfa5
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] x86: Unify pcspeaker platform device code between i386/x86-64
    
    Trivial cleanup.
    
    Only change is that it is always compiled in now on x86-64 like on i386.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 40d22c1b5675e428b3f3f9a945d0bd62e94ca2f1
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: Remove extern declaration from mm/discontig.c, put in header.
    
    Extern declarations belong in headers.  Times, they are a'changin.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andi Kleen <ak@suse.de>
    
    ===================================================================

commit 2a57ff1a7051f0936b57342a57c25658d7ca3cc6
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: Rename cpu_gdt_descr and remove extern declaration from smpboot.c
    
    When I implemented the DECLARE_PER_CPU(var) macros, I was careful that
    people couldn't use "var" in a non-percpu context, by prepending
    percpu__.  I never considered that this would allow them to overload
    the same name for a per-cpu and a non-percpu variable.
    
    It is only one of many horrors in the i386 boot code, but let's rename
    the non-perpcu cpu_gdt_descr to early_gdt_descr (not boot_gdt_descr,
    that's something else...)
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andi Kleen <ak@suse.de>
    
    ===================================================================

commit 105fddb862d3da2f414329ff7719794fb2bd706b
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: Move mce_disabled to asm/mce.h
    
    Allows external actors to disable mce.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andi Kleen <ak@suse.de>
    
    ===================================================================

commit 992af68147299bb635be97f789e4f66ba7add477
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: paravirt unhandled fallthrough
    
    The current code simply calls "start_kernel" directly if we're under a
    hypervisor and no paravirt_ops backend wants us, because paravirt.c
    registers that as a backend.
    
    This was always a vain hope; start_kernel won't get far without setup.
    It's also impossible for paravirt_ops backends which don't sit in the
    arch/i386/kernel directory: they can't link before paravirt.o anyway.
    
    Keep it simple: if we pass all the registered paravirt probes, BUG().
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 9af3cf054615862c86efcf55a37bb40f0d96e406
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] x86_64: Wire up compat epoll_pwait
    
    > Which remembers me that I think that MIPS is using the non-compat version
    > of sys_epoll_pwait for compat syscalls. But maybe MIPS doesn't need a compat
    > syscall for some reason. Dunno.
    
    Which reminds me that x86_64 i386 compat doesn't wire up sys_epoll_pwait ;-)
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 9fbbd4dd17d0712054368e5e939e28b2456bfe1b
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] x86: Don't require the vDSO for handling a.out signals
    
    and in other strange binfmts. vDSO is not necessarily mapped there.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 120fad72401ebec2a126c16cc48f56c28f3eefe2
Author: Alan Cox <alan@redhat.com>
Date:   Tue Feb 13 13:26:26 2007 +0100

    [PATCH] i386: Fix Cyrix MediaGX detection
    
    The old Cyrix 5520 CPU detection code relied upon the PCI layer setup being
    done earlier than the CPU setup, which is no longer true.  Fortunately we
    know that if the processor is a MediaGX we can do type 1 pci config
    accesses to check the companion chip.  We thus do those directly and from
    this find the 5520 and implement the workarounds for the timer problem
    
    Original report from takada@mbf.nifty.com, I sent a proposed patch which
    Takara then corrected, tested and sent back to the list on 10th January.
    
    Submitting for merging as it seems to have been missed
    
    AK: Changed to use pci-direct.h and fix warning for !CONFIG_PCI (later
    AK: originally from akpm)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: <takada@mbf.nifty.com>
    Cc: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 7de6d3618b09c39fdaa6125e23fcf465a65bc266
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] i386: Fix warning in cpu initialization
    
    Fix bogus warning
    
    linux/arch/i386/kernel/cpu/transmeta.c:12: warning: cpu_freq may be used uninitialized in this function
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 2ba1ff2b796746722fc4fe8bdcd1f30a834e3d0a
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] i386: Fix warning in microcode.c
    
    Fix bogus gcc warning
    
    linux/arch/i386/kernel/microcode.c:387: warning: new_mc may be used uninitialized in this function
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 0a4599c894d880763eec6cb93f6c246dac6c3269
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86: Enable NMI watchdog for AMD Family 0x10 CPUs
    
    For i386/x86-64.
    
    Straight forward -- just reuse the Family 0xf code.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit f790cd30d002949a12623b2a8cec4d4e5a8887ef
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86: Add new CPUID bits for AMD Family 10 CPUs in /proc/cpuinfo
    
    Just various new acronyms. The new popcnt bit is in the middle
    of Intel space. This looks a little weird, but I've been assured
    it's ok.
    
    Also I fixed RDTSCP for i386 which was at the wrong place.
    
    For i386 and x86-64.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 1a1eecd1c272f704f135a7d8060ec3da1c201b4c
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] i386: Remove fastcall in paravirt.[ch]
    
    Not needed because fastcall is always default now
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 9f6026b8c308365d955faaf31dd0f457266d11f8
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86-64: Fix wrong gcc check in bitops.h
    
    gcc 5.0 will likely not have the constraint problem
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 2fb12a9bca5ad9aa6dcd2c639b4a7656a8843ef8
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86-64: survive having no irq mapping for a vector
    
    Occasionally the kernel has bugs that result in no irq being found for a
    given cpu vector.  If we acknowledge the irq the system has a good chance
    of continuing even though we dropped an irq message.  If we continue to
    simply print a message and not acknowledge the irq the system is likely to
    become non-responsive shortly there after.
    
    AK: Fixed compilation for UP kernels
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: "Luigi Genoni" <luigi.genoni@pirelli.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit bcde1ebb81c51ebdfa02887703e4d21c1bbc2431
Author: TAKADA Yoshihito <takada@mbf.nifty.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] i386: geode configuration fixes
    
    Original code doesn't write back to CCR4 register.  This patch reflects a
    value of a register.
    
    Cc: Jordan Crouse <jordan.crouse@amd.com>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 86c418374223be3f328b5522545196db02c8ceda
Author: Chuck Ebbert <cebbert@redhat.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] i386: add option to show more code in oops reports
    
    Sometimes developers need to see more object code in an oops report,
    e.g. when kernel may be corrupted at runtime.
    
    Add the "code_bytes" option for this.
    
    Signed-off-by: Chuck Ebbert <cebbert@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 8469adde5932f2879688fd5f183a6e9dadbf7b9f
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86-64: Minor patch for compilation warning in x86_64 signal code
    
    If DEBUG_SIG is enbaled in source code, ia32_signal.c compiles with warning
    due to wrong format string.  Attached patch fixes that.  It is quite minor
    update, since by default DEBUG_SIG is not enabled and can not be turned on
    without code modification.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 3e94fb8f54c5305ed472e0867cd67d53e05bfb64
Author: Roland Dreier <rdreier@cisco.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86-64: avoid warning message livelock
    
    I've seen my box paralyzed by an endless spew of
    
        rtc: lost some interrupts at 1024Hz.
    
    messages on the serial console.  What seems to be happening is that
    something real causes an interrupt to be lost and triggers the
    message.  But then printing the message to the serial console (from
    the hpet interrupt handler) takes more than 1/1024th of a second, and
    then some more interrupts are lost, so the message triggers again....
    
    Fix this by adding a printk_ratelimit() before printing the warning.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit ee4eff6ff6cbfc8ce38131058a18802bf6206879
Author: Benjamin Romer <benjamin.romer@unisys.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86-64: update IO-APIC dest field to 8-bit for xAPIC
    
    On the Unisys ES7000/ONE system, we encountered a problem where performing
    a kexec reboot or dump on any cell other than cell 0 causes the system
    timer to stop working, resulting in a hang during timer calibration in the
    new kernel.
    
    We traced the problem to one line of code in disable_IO_APIC(), which needs
    to restore the timer's IO-APIC configuration before rebooting.  The code is
    currently using the 4-bit physical destination field, rather than using the
    8-bit logical destination field, and it cuts off the upper 4 bits of the
    timer's APIC ID.  If we change this to use the logical destination field,
    the timer works and we can kexec on the upper cells.  This was tested on
    two different cells (0 and 2) in an ES7000/ONE system.
    
    For reference, the relevant Intel xAPIC spec is kept at
    ftp://download.intel.com/design/chipsets/e8501/datashts/30962001.pdf,
    specifically on page 334.
    
    Signed-off-by: Benjamin M Romer <benjamin.romer@unisys.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit a4af60aa64c828b7c047e7a67b2f896d4bfbd700
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] i386: Remove unused kernel config option X86_XADD
    
    Remove the unused kernel config option X86_XADD, which is unused in any
    source or header file.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit f0a5a58aa812b31fd9f197c4ba48245942364eae
Author: Bob Picco <bob.picco@hp.com>
Date:   Tue Feb 13 13:26:25 2007 +0100

    [PATCH] x86-64: clean up sparsemem memory_present call
    
    Eliminate arch specific memory_present call x86_64 NUMA by utilizing
    sparse_memory_present_with_active_regions.
    
    Acked-by: Mel Gorman <mel@csn.ul.ie>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 47a55cd795656d11bb18a7885583361f02a6baa8
Author: Jan Beulich <jbeulich@novell.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] i386: entry.S END/ENDPROC annotations
    
    Annotate i386/kernel/entry.S with END/ENDPROC to assist disassemblers and
    other analysis tools.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 2632f01a66d75f4ad59653a7efa506c6ea6845d0
Author: TAKADA Yoshihito <takada@mbf.nifty.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] i386: support Classic MediaGXm
    
    I hope to support "classic" MediaGXm in kernel.
    
    The DIR1 register of MediaGXm( or Geode) shows the following values for
    identify CPU.  For example, My MediaGXm shows 0x42.
    
    We can read National Semiconductor's datasheet without any NDAs.
      http://www.national.com/pf/GX/GXLV.html
    
    from datasheets:
    DIR1
    0x30 - 0x33 GXm rev. 1.0 - 2.3
    0x34 - 0x4f GXm rev. 2.4 - 3.x
    0x5x        GXm rev. 5.0 - 5.4
    0x6x        GXLV
    0x7x         (unknow)
    0x8x	    Gx1
    
    In nsc driver of X, accept 0x30 through 0x82. What will 0x7x mean?
    
    Cc: Jordan Crouse <jordan.crouse@amd.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 3101673b659b916c965271c7f7c9b99cb353c01c
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] i386: avoid gcc extension
    
    setcc() in math-emu is written as a gcc extension statement expression
    macro that returns a value.  However, it's not used that way and it's not
    needed like that, so just make it a inline function so that we
    don't use an extension when it's not needed.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Christoph Hellwig <hch@infradead.org>
    Cc: Segher Boessenkool <segher@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 30b82ea08c3365a6fc916250ff2ad634717fc81b
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] i386: All Transmeta CPUs have constant TSCs
    
    All Transmeta CPUs ever produced have constant-rate TSCs.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 5d0e600d903caa09e790824cc5812f0d97113b23
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86: fix laptop bootup hang in init_acpi()
    
    During kernel bootup, a new T60 laptop (CoreDuo, 32-bit) hangs about
    10%-20% of the time in acpi_init():
    
     Calling initcall 0xc055ce1a: topology_init+0x0/0x2f()
     Calling initcall 0xc055d75e: mtrr_init_finialize+0x0/0x2c()
     Calling initcall 0xc05664f3: param_sysfs_init+0x0/0x175()
     Calling initcall 0xc014cb65: pm_sysrq_init+0x0/0x17()
     Calling initcall 0xc0569f99: init_bio+0x0/0xf4()
     Calling initcall 0xc056b865: genhd_device_init+0x0/0x50()
     Calling initcall 0xc056c4bd: fbmem_init+0x0/0x87()
     Calling initcall 0xc056dd74: acpi_init+0x0/0x1ee()
    
    It's a hard hang that not even an NMI could punch through!  Frustratingly,
    adding printks or function tracing to the ACPI code made the hangs go away
    ...
    
    After some time an additional detail emerged: disabling the NMI watchdog
    made these occasional hangs go away.
    
    So i spent the better part of today trying to debug this and trying out
    various theories when i finally found the likely reason for the hang: if
    acpi_ns_initialize_devices() executes an _INI AML method and an NMI
    happens to hit that AML execution in the wrong moment, the machine would
    hang.  (my theory is that this must be some sort of chipset setup method
    doing stores to chipset mmio registers?)
    
    Unfortunately given the characteristics of the hang it was sheer
    impossible to figure out which of the numerous AML methods is impacted
    by this problem.
    
    As a workaround i wrote an interface to disable chipset-based NMIs while
    executing _INI sections - and indeed this fixed the hang.  I did a
    boot-loop of 100 separate reboots and none hung - while without the patch
    it would hang every 5-10 attempts.  Out of caution i did not touch the
    nmi_watchdog=2 case (it's not related to the chipset anyway and didnt
    hang).
    
    I implemented this for both x86_64 and i686, tested the i686 laptop both
    with nmi_watchdog=1 [which triggered the hangs] and nmi_watchdog=2, and
    tested an Athlon64 box with the 64-bit kernel as well. Everything builds
    and works with the patch applied.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Len Brown <lenb@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 310adfdd9153f6ae818981a38a48dd2330990d8d
Author: Muli Ben-Yehuda <muli@il.ibm.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: robustify bad_dma_address handling
    
    - set bad_dma_address explicitly to 0x0
    - reserve 32 pages from bad_dma_address and up
    - WARN_ON() a driver feeding us bad_dma_address
    
    Thanks to Leo Duran <leo.duran@amd.com> for the suggestion.
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Leo Duran <leo.duran@amd.com>
    Cc: Job Mason <jdmason@kudzu.us>

commit 2fa8a050a0026eadbb39a2f281011991e00fe29a
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: define dma noncoherent API functions
    
    x86-64 is missing these:
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit fc986db4fc1e773e240a19bc8b407ead88982cea
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: Don't reserve ROMs
    
    We trust the e820 table, so explicitely reserving ROMs shouldn't
    be needed.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 00edefae050c2c2d1e26fa9984f8f529fbc45989
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: Fix off by one error in IOMMU boundary checking
    
    Should be harmless because there is normally no memory there, but
    technically it was incorrect.
    
    Pointed out by Leo Duran
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit ffb6017563aa15f9a8cff9a30b861d42c2695894
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: x86_64 - Fix FS/GS registers for VT execution
    
    Initialize FS and GS to __KERNEL_DS as well.  The actual value of them is not
    important, but it is important to reload them in protected mode.  At this time,
    they still retain the real mode values from initial boot.  VT disallows
    execution of code under such conditions, which means hardware virtualization
    can not be used to boot the kernel on Intel platforms, making the boot time
    painfully slow.
    
    This requires moving the GS load before the load of GS_BASE, so just move
    all the segments loads there to keep them together in the code.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 9a11ff68273f440b1d33fcc4d550ffc881e6a0b4
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: Unexport __supported_pte_mask
    
    The symbol is needed to manipulate page tables, and modules shouldn't
    do that.
    
    Leftover from 2.4, but no in tree module should need it now.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit f49481bc50fce428521497977861b8115666dbe7
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: Check return value of putreg in PTRACE_SETREGS
    
    This means if an illegal value is set for the segment registers there
    ptrace will error out now with an errno instead of silently ignoring
    it.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 2f7a2a79c3ebb44f8b1b7d9b4fd3a650eb69e544
Author: Jack Steiner <steiner@sgi.com>
Date:   Tue Feb 13 13:26:24 2007 +0100

    [PATCH] x86-64: - Ignore long SMI interrupts in clock calibration code - update 1
    
    Add failsafe mechanism to HPET/TSC clock calibration.
    
    	Signed-off-by: Jack Steiner <steiner@sgi.com>
    
    Updated to include failsafe mechanism & additional community feedback.
    Patch built on latest 2.6.20-rc4-mm1 tree.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 6c5806cae50717f31878d0da29109b10610ab862
Author: Andreas Herrmann <andreas.herrmann3@amd.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] i386: fix size_or_mask and size_and_mask
    
    mtrr: fix size_or_mask and size_and_mask
    
    This fixes two bugs in /proc/mtrr interface:
    o If physical address size crosses the 44 bit boundary
      size_or_mask is evaluated wrong.
    o size_and_mask limits width of physical base
      address for an MTRR to be less than 44 bits.
    
    TBD: later patch had one more change, but I think that was bogus.
    TBD: need to double check
    
    Signed-off-by: Andreas Herrmann <andreas.herrmann3@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 016d6f35803667ffbe3e7bba8b58a6b611fac998
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] i386: Convert /proc/apm to seqfile
    
    Byte-to-byte identical /proc/apm here.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit b0957f1a3a7687bfaf5b0bfe402b50985ea2f06b
Author: Josef 'Jeff' Sipek <jsipek@cs.sunysb.edu>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: Fix preprocessor condition
    
    Old code was legal standard C, but apparently not sparse-C.
    
    Signed-off-by: Josef 'Jeff' Sipek <jsipek@cs.sunysb.edu>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit ad4e680fb2220518de5118a8e734240d4c374fe2
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] i386: use smp_call_function_single()
    
    It will execure cpuid only on the cpu we need.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit d958f143329e685d114725b64fe6bef22994c74c
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] i386: use smp_call_function_single()
    
    It will execute rdmsr and wrmsr only on the cpu we need.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit edf8dd36b53fdd558bc9a8ac5be793d27e110f90
Author: Nicolas Kaiser <nikai@nikai.net>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: Kconfig typos
    
    Some typos in Kconfig.
    
    Signed-off-by: Nicolas Kaiser <nikai@nikai.net>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 8c40ad02e5b026902b8ce134f895b3b09803db39
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] i386: Small cleanup to TLB flush code
    
    - Remove outdated comment
    - Use cpu_relax() in a busy loop
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 930f8b8bcde30b501fdf00fb7624aefb9bf35f47
Author: Jan Beulich <jbeulich@novell.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: remove get_pmd()
    
    Function is dead.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit a98f0dd34d94ea0b5f3816196bea5dba467827bb
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: Allow to run a program when a machine check event is detected
    
    When a machine check event is detected (including a AMD RevF threshold
    overflow event) allow to run a "trigger" program. This allows user space
    to react to such events sooner.
    
    The trigger is configured using a new trigger entry in the
    machinecheck sysfs interface. It is currently shared between
    all CPUs.
    
    I also fixed the AMD threshold handler to run the machine
    check polling code immediately to actually log any events
    that might have caused the threshold interrupt.
    
    Also added some documentation for the mce sysfs interface.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 24ce0e96f2dea558762c994d054ea2f3c01fa95a
Author: Jan Beulich <jbeulich@novell.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: Tighten mce_amd driver MSR reads
    
    while debugging an unrelated problem in Xen, I noticed odd reads from
    non-existent MSRs. Having now found time to look why these happen, I
    came up with below patch, which
    - prevents accessing MCi_MISCj with j > 0 when the block pointer in
    MCi_MISC0 is zero
    - accesses only contiguous MCi_MISCj until a non-implemented one is
    found
    - doesn't touch unimplemented blocks in mce_threshold_interrupt at all
    - gives names to two bits previously derived from MASK_VALID_HI (it
    took me some time to understand the code without this)
    
    The first three items, besides being apparently closer to the spec, should
    namely help cutting down on the time mce_threshold_interrupt() takes.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 9b355897562fe2291248a7aec8e479c2c98cf117
Author: Jan Beulich <jbeulich@novell.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86: simplify notify_page_fault()
    
    Remove all parameters from this function that aren't really variable.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 6a051565739f9d334ad5c15f691a9699a905897d
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: list x86_64 quilt tree
    
    List x86_64 quilt tree in MAINTAINERS.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 57d307720c9a60038f134b0567ca302b88313a0a
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] x86-64: cleanup Doc/x86_64/ files
    
    Fix typos.
    Lots of whitespace changes for readability and consistency.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 44264261d8fb87849118e41b2735bd95db28126f
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Tue Feb 13 13:26:23 2007 +0100

    [PATCH] i386: Handle 32 bit PerfMon Counter writes cleanly in oprofile
    
    Handle these 32 bit perfmon counter MSR writes cleanly in oprofile.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 90ce4bc4542c10b63dc6482ac920ff1226a6e5ff
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: Handle 32 bit PerfMon Counter writes cleanly in i386 nmi_watchdog
    
    Change i386 nmi handler to handle 32 bit perfmon counter MSR writes cleanly.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 1676193937a538fdb92a2916a86a705093cfd613
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] x86-64: Handle 32 bit PerfMon Counter writes cleanly in x86_64 nmi_watchdog
    
    P6 CPUs and Core/Core 2 CPUs which has 'architectural perf mon' feature,
    only supports write of low 32 bits in Performance Monitoring Counters.
    Bits 32..39 are sign extended based on bit 31 and bits 40..63 are reserved
    and should be zero.
    
    This patch:
    
    Change x86_64 nmi handler to handle this case cleanly.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 4c3cbf75b262433afc90b5c35510d1e5744d3b94
Author: Glauber de Oliveira Costa <gcosta@redhat.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] x86-64: Use constant instead of raw number in x86_64 ioperm.c
    
    This is a tiny cleanup to increase readability
    
    Signed-off-by: Glauber de Oliveira Costa <gcosta@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit c49c5330c9592f29a69bb2ea8f6e7fd5d9c151e8
Author: Glauber de Oliveira Costa <gcosta@redhat.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] x86-64: Remove fastcall references in x86_64 code
    
    Unlike x86, x86_64 already passes arguments in registers.  The use of
    regparm attribute makes no difference in produced code, and the use of
    fastcall just bloats the code.
    
    Signed-off-by: Glauber de Oliveira Costa <gcosta@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 53fee04f318222a3179ca5933d8bda82c1eef17a
Author: Rohit Seth <rohitseth@google.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] x86-64: Fix fake numa for x86_64 machines with big IO hole
    
    This patch resolves the issue of running with numa=fake=X on kernel command
    line on x86_64 machines that have big IO hole.  While calculating the size
    of each node now we look at the total hole size in that range.
    
    Previously there were nodes that only had IO holes in them causing kernel
    boot problems.  We now use the NODE_MIN_SIZE (64MB) as the minimum size of
    memory that any node must have.  We reduce the number of allocated nodes if
    the number of nodes specified on kernel command line results in any node
    getting memory smaller than NODE_MIN_SIZE.
    
    This change allows the extra memory to be incremented in NODE_MIN_SIZE
    granule and uniformly distribute among as many nodes (called big nodes) as
    possible.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: David Rientjes <reintjes@google.com>
    Signed-off-by: Paul Menage <menage@google.com>
    Signed-off-by: Rohit Seth <rohitseth@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 3b3d5e1db66cd66148b2cebd2c38aff2a8df03d6
Author: Rene Herman <rene.herman@gmail.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: romsignature/checksum cleanup
    
    Use adding __init to romsignature() (it's only called from probe_roms()
    which is itself __init) as an excuse to submit a pedantic cleanup.
    
    Signed-off-by: Rene Herman <rene.herman@gmail.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit f9690982b8c2f9a2c65acdc113e758ec356676a3
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: improve sched_clock() on i686
    
    Clean up sched_clock() on i686: it will use the TSC if available and falls
    back to jiffies only if the user asked for it to be disabled via notsc or
    the CPU calibration code didnt figure out the right cpu_khz.
    
    This generally makes the scheduler timestamps more finegrained, on all
    hardware.  (the current scheduler is pretty resistant against asynchronous
    sched_clock() values on different CPUs, it will allow at most up to a jiffy
    of jitter.)
    
    Also simplify sched_clock()'s check for TSC availability: propagate the
    desire and ability to use the TSC into the tsc_disable flag, previously
    this flag only indicated whether the notsc option was passed.  This makes
    the rare low-res sched_clock() codepath a single branch off a read-mostly
    flag.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 2ff2d3d74705d34ab71b21f54634fcf50d57bdd5
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: add idle notifier
    
    Add a notifier mechanism to the low level idle loop.  You can register a
    callback function which gets invoked on entry and exit from the low level idle
    loop.  The low level idle loop is defined as the polling loop, low-power call,
    or the mwait instruction.  Interrupts processed by the idle thread are not
    considered part of the low level loop.
    
    The notifier can be used to measure precisely how much is spent in useless
    execution (or low power mode).  The perfmon subsystem uses it to turn on/off
    monitoring.
    
    Signed-off-by: stephane eranian <eranian@hpl.hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 86a978837ca739842317c4cf433de36aeb85ea3b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: arch/i386/kernel/cpu/mcheck/mce.c should #include <asm/mce.h>
    
    Every file should include the headers containing the prototypes for
    it's global functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit ee5bfa642a0d4b0f6ec6200bf96e5e647f93fcdb
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] generic: Break init() in two parts to avoid MODPOST warnings
    
    o init() is a non __init function in .text section but it calls many
      functions which are in .init.text section. Hence MODPOST generates lots
      of cross reference warnings on i386 if compiled with CONFIG_RELOCATABLE=y
    
    WARNING: vmlinux - Section mismatch: reference to .init.text:smp_prepare_cpus from .text between 'init' (at offset 0xc0101049) and 'rest_init'
    WARNING: vmlinux - Section mismatch: reference to .init.text:migration_init from .text between 'init' (at offset 0xc010104e) and 'rest_init'
    WARNING: vmlinux - Section mismatch: reference to .init.text:spawn_ksoftirqd from .text between 'init' (at offset 0xc0101053) and 'rest_init'
    
    o This patch breaks down init() in two parts. One part which can go
      in .init.text section and can be freed and other part which has to
      be non __init(init_post()). Now init() calls init_post() and init_post()
      does not call any functions present in .init sections. Hence getting
      rid of warnings.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit f8657e1b55901e6c227094258d1fa3642fa242bd
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: move startup_32() in text.head section
    
    o Entry startup_32 was in .text section but it was accessing some init
      data too and it prompts MODPOST to generate compilation warnings.
    
    WARNING: vmlinux - Section mismatch: reference to .init.data:boot_params from
    .text between '_text' (at offset 0xc0100029) and 'startup_32_smp'
    WARNING: vmlinux - Section mismatch: reference to .init.data:boot_params from
    .text between '_text' (at offset 0xc0100037) and 'startup_32_smp'
    WARNING: vmlinux - Section mismatch: reference to
    .init.data:init_pg_tables_end from .text between '_text' (at offset
    0xc0100099) and 'startup_32_smp'
    
    o Can't move startup_32 to .init.text as this entry point has to be at the
      start of bzImage. Hence moved startup_32 to a new section .text.head and
      instructed MODPOST to not to generate warnings if init data is being
      accessed from .text.head section. This code has been audited.
    
    o SMP boot up code (startup_32_smp) can go into .init.text if CPU hotplug
      is not supported. Otherwise it generates more warnings
    
    WARNING: vmlinux - Section mismatch: reference to .init.data:new_cpu_data from
    .text between 'checkCPUtype' (at offset 0xc0100126) and 'is486'
    WARNING: vmlinux - Section mismatch: reference to .init.data:new_cpu_data from
    .text between 'checkCPUtype' (at offset 0xc0100130) and 'is486'
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 7c0b49f9d1d59b3638c884b346a92dcb4ea1560a
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:22 2007 +0100

    [PATCH] i386: Paravirt debug defaults off
    
    Deliberate register clobber around performance critical inline code is great for
    testing, bad to leave on by default.  Many people ship with DEBUG_KERNEL turned
    on, so stop making DEBUG_PARAVIRT default on.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 90736e20e3805dd1ffff60e4750495944956cd44
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: Vmi timer race
    
    Because timer code moves around, and we might eventually move our init to a
    late_time_init hook, save and restore IRQs around this code because it is
    definitely not interrupt safe.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit ac3b6faff961dd52fde71fb199ec3cf68ba35052
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: Kprobe rpl fix
    
    Kprobes bugfix for paravirt compatibility - RPL on the CS when inserting
    BPs must match running kernel.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    CC: Eric Biederman <ebiederm@xmission.com>

commit 7b3552024380f306a6c50d5105d18d9d4258fa4e
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: Profile pc badness
    
    Profile_pc was broken when using paravirtualization because the
    assumption the kernel was running at CPL 0 was violated, causing
    bad logic to read a random value off the stack.
    
    The only way to be in kernel lock functions is to be in kernel
    code, so validate that assumption explicitly by checking the CS
    value.  We don't want to be fooled by BIOS / APM segments and
    try to read those stacks, so only match KERNEL_CS.
    
    I moved some stuff in segment.h to make it prettier.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit bbab4f3bb7f528d2b8ccb5de9ae5f6ff3fb29684
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: vMI timer patches
    
    VMI timer code.  It works by taking over the local APIC clock when APIC is
    configured, which requires a couple hooks into the APIC code.  The backend
    timer code could be commonized into the timer infrastructure, but there are
    some pieces missing (stolen time, in particular), and the exact semantics of
    when to do accounting for NO_IDLE need to be shared between different
    hypervisors as well.  So for now, VMI timer is a separate module.
    
    [Adrian Bunk: cleanups]
    
    Subject: VMI timer patches
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 7ce0bcfd1667736f1293cff845139bbee53186de
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: vMI backend for paravirt-ops
    
    Fairly straightforward implementation of VMI backend for paravirt-ops.
    
    [Adrian Bunk: some cleanups]
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit ae5da273fe3352febd38658d8d34484cbcfb3423
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: SMP boot hook for paravirt
    
    Add VMI SMP boot hook.  We emulate a regular boot sequence and use the same
    APIC IPI initiation, we just poke magic values to load into the CPU state when
    the startup IPI is received, rather than having to jump through a real mode
    trampoline.
    
    This is all that was needed to get SMP to work.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 8b15114434998a78aa50f8559d69c7a400cff267
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: iOPL handling for paravirt guests
    
    I found a clever way to make the extra IOPL switching invisible to
    non-paravirt compiles - since kernel_rpl is statically defined to be zero
    there, and only non-zero rpl kernel have a problem restoring IOPL, as popf
    does not restore IOPL flags unless run at CPL-0.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 9226d125d94c7e4964dd41cc5e9ca2ff84091d01
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: paravirt CPU hypercall batching mode
    
    The VMI ROM has a mode where hypercalls can be queued and batched.  This turns
    out to be a significant win during context switch, but must be done at a
    specific point before side effects to CPU state are visible to subsequent
    instructions.  This is similar to the MMU batching hooks already provided.
    The same hooks could be used by the Xen backend to implement a context switch
    multicall.
    
    To explain a bit more about lazy modes in the paravirt patches, basically, the
    idea is that only one of lazy CPU or MMU mode can be active at any given time.
     Lazy MMU mode is similar to this lazy CPU mode, and allows for batching of
    multiple PTE updates (say, inside a remap loop), but to avoid keeping some
    kind of state machine about when to flush cpu or mmu updates, we just allow
    one or the other to be active.  Although there is no real reason a more
    comprehensive scheme could not be implemented, there is also no demonstrated
    need for this extra complexity.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit c119ecce894120790903ef535dac3e105f3d6cde
Author: Zachary Amsden <zach@vmware.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] MM: page allocation hooks for VMI backend
    
    The VMI backend uses explicit page type notification to track shadow page
    tables.  The allocation of page table roots is especially tricky.  We need to
    clone the root for non-PAE mode while it is protected under the pgd lock to
    correctly copy the shadow.
    
    We don't need to allocate pgds in PAE mode, (PDPs in Intel terminology) as
    they only have 4 entries, and are cached entirely by the processor, which
    makes shadowing them rather simple.
    
    For base page table level allocation, pmd_populate provides the exact hook
    point we need.  Also, we need to allocate pages when splitting a large page,
    and we must release pages before returning the page to any free pool.
    
    Despite being required with these slightly odd semantics for VMI, Xen also
    uses these hooks to determine the exact moment when page tables are created or
    released.
    
    AK: All nops for other architectures
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jeremy Fitzhardinge <jeremy@xensource.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 90611fe923aa3ac7ffb9e5df45c83860b0f00227
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] i386: arch/i386/kernel/e820.c should #include <asm/setup.h
    
    Every file should #include the headers containing the prototypes for
    its global functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 006e84ee3a54e393ec6bef2a9bc891dc5bde2843
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] x86-64: do not always end the stack trace with ULONG_MAX
    
    It makes more sense to end the stack trace with ULONG_MAX only if
    nr_entries < max_entries.  Otherwise, we lose one entry in the long stack
    traces and cannot know whether the trace was complete or not.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 5558870bfbcca10cfc7b13ab866687012ea3c9af
Author: Karsten Weiss <K.Weiss@science-computing.de>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] x86-64: improved iommu documentation
    
    - add SWIOTLB config help text
    - mention Documentation/x86_64/boot-options.txt in
      Documentation/kernel-parameters.txt
    - remove the duplication of the iommu kernel parameter documentation.
    - Better explanation of some of the iommu kernel parameter options.
    - "32MB<<order" instead of "32MB^order".
    - Mention the default "order" value.
    - list the four existing PCI-DMA mapping implementations of arch x86_64
    - group the iommu= option keywords by PCI-DMA mapping implementation.
    - Distinguish iommu= option keywords from number arguments.
    - Explain the meaning of DAC and SAC.
    
    Signed-off-by: Karsten Weiss <knweiss@science-computing.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Acked-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 5809f9d442e9dbb23859e2c37d8c47043f6b5cc9
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Feb 13 13:26:21 2007 +0100

    [PATCH] x86-64: get rid of ARCH_HAVE_XTIME_LOCK
    
    ARCH_HAVE_XTIME_LOCK is used by x86_64 arch .  This arch needs to place a
    read only copy of xtime_lock into vsyscall page.  This read only copy is
    named __xtime_lock, and xtime_lock is defined in
    arch/x86_64/kernel/vmlinux.lds.S as an alias.  So the declaration of
    xtime_lock in kernel/timer.c was guarded by ARCH_HAVE_XTIME_LOCK define,
    defined to true on x86_64.
    
    We can get same result with _attribute__((weak)) in the declaration. linker
    should do the job.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 26054ed02bb20f5b2e02d92cb6f0be0e2b0196d5
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: Move e820 check into pci_mmcfg_reject_broken()
    
    This is just cleanup. It moves to e820 check into pci_mmcfg_reject_broken().
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 56829d1982b6f1150553c049d372728b9eda5aec
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: fix unreachable_devices()
    
    Currently, unreachable_devices() compares value of mmconfig and value
    of conf1. But it doesn't check the device is reachable or not.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 429d512e532ec9c969aa6f66ddbc542f3a5fe4da
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: minor cleanup in mmconfig code
    
    This just cleans up.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit a4ec1b2c9fe9492c9ab30261b411d836527fe0b6
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: remove #define MMCONFIG_APER_XXX
    
    MMCONFIG_APER_XXX is unneeded in arch/x86_64/pci/mmconfig.c.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 44de0203fab205417b24322272c53ee0883c36e7
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: Reject a broken MCFG tables on Asus etc
    
    This rejects broken MCFG tables on Asus. When the table
    looks bogus just disable mmconfig
    
    Arjan and Andi suggested this.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit faed197b7b44a6c4e6b81dd2db649fd452b0a7ef
Author: OGAWA Hirofumi <hogawa@miraclelinux.com>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: Fix x86_64 ioremap base_address
    
    Current mmconfig has some problems of remapped range.
    
    a) In the case of broken MCFG tables on Asus etc., we need to remap 256M
       range, but currently only remap 1M.
    
    b) The base address always corresponds to bus number 0, but currently we
       are assuming it corresponds to start bus number.
    
    This patch fixes the above problems.
    
    (akpm: Arjan suggests that if the MCFG table is broken we just shouldn't use
    it, rather than try to work around things).
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 6a0668fc41fa479df617151c2d4e297299a4ffe2
Author: Olivier Galibert <galibert@pobox.com>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: Reserve resources but only when we're sure about them.
    
    Put back the resource reservation as per
    4c6e052adfe285ede5884e4e8c4d33af33932c13 but use it *only* when the range(s)
    come from a chipset probe instead of the bios.
    
    Signed-off-by: Olivier Galibert <galibert@pobox.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 9358c693c5ac1afde28f24ac651f7903d32a850c
Author: Olivier Galibert <galibert@pobox.com>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: Detect and support the E7520 and the 945G/GZ/P/PL
    
    It seems that the only way to reliably support mmconfig in the presence of
    funky biosen is to detect the hostbridge and read where the window is mapped
    from its registers.  Do that for the E7520 and the 945G/GZ/P/PL for a start.
    
    Signed-off-by: Olivier Galibert <galibert@pobox.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 5f027387bbdb5a4a4c1babd557fd976cd09d7495
Author: Olivier Galibert <galibert@pobox.com>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] i386: Only call unreachable_devices() when type 1 is available.
    
    unreachable_devices compares between the results of pci configuration accesses
    through type1 and mmconfig, so it should be called only if type1 actually
    works in the first place.
    
    Signed-off-by: Olivier Galibert <galibert@pobox.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit b78673944b22b662b270c8bba5c198f19e4ee4e1
Author: Olivier Galibert <galibert@pobox.com>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] mmconfig: Share parts of mmconfig code between i386 and x86-64
    
    i386 and x86-64 pci mmconfig code have a lot in common.  So share what's
    shareable between the two.
    
    Signed-off-by: Olivier Galibert <galibert@pobox.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 2e188938ab2358034801938c2329b016ca135823
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] i386: Fix a typo in an IRQ handler name
    
    The "fasteoi" IRQ handler is named "fasteio" incorrectly.  This is a fix.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 464d1a78fbf8cf6c7fd970e7b3e2db50a320ce28
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] i386: Convert i386 PDA code to use %fs
    
    Convert the PDA code to use %fs rather than %gs as the segment for
    per-processor data.  This is because some processors show a small but
    measurable performance gain for reloading a NULL segment selector (as %fs
    generally is in user-space) versus a non-NULL one (as %gs generally is).
    
    On modern processors the difference is very small, perhaps undetectable.
    Some old AMD "K6 3D+" processors are noticably slower when %fs is used
    rather than %gs; I have no idea why this might be, but I think they're
    sufficiently rare that it doesn't matter much.
    
    This patch also fixes the math emulator, which had not been adjusted to
    match the changed struct pt_regs.
    
    [frederik.deweerdt@gmail.com: fixit with gdb]
    [mingo@elte.hu: Fix KVM too]
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Ian Campbell <Ian.Campbell@XenSource.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Zachary Amsden <zach@vmware.com>
    Cc: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 54413927f022292aeccadd268fbf1c0b42129945
Author: Amul Shah <amul.shah@unisys.com>
Date:   Tue Feb 13 13:26:20 2007 +0100

    [PATCH] x86-64: x86_64-make-the-numa-hash-function-nodemap-allocation fix fix
    
    - Removed an extraneous debug message from allocate_cachealigned_map
    
    - Changed extract_lsb_from_nodes to return 63 for the case where there was
      only one memory node.  The prevents the creation of the dynamic hashmap.
    
    - Changed extract_lsb_from_nodes to use only the starting memory address of
      a node.  On an ES7000, our nodes overlap the starting and ending address,
      meaning, that we see nodes like
    
    	00000 - 10000
    	10000 - 20000
    
      But other systems have nodes whose start and end addresses do not overlap.
       For example:
    
    	00000 - 0FFFF
    	10000 - 1FFFF
    
      In this case, using the ending address will result in an LSB much lower
      than what is possible.  In this case an LSB of 1 when in reality it should
      be 16.
    
    Cc: Andi Kleen <ak@suse.de>
    Cc: Rohit Seth <rohitseth@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 076422d2af7e3d8e72c6e70843f6ea377714b082
Author: Amul Shah <amul.shah@unisys.com>
Date:   Tue Feb 13 13:26:19 2007 +0100

    [PATCH] x86-64: Allocate the NUMA hash function nodemap dynamically
    
    Remove the statically allocated memory to NUMA node hash map in favor of a
    dynamically allocated memory to node hash map (it is cache aligned).
    
    This patch has the nice side effect in that it allows the hash map to grow
    for systems with large amounts of memory (256GB - 1TB), but suffer from
    having small PCI space tacked onto the boot node (which is somewhere
    between 192MB to 512MB on the ES7000).
    
    Signed-off-by: Amul Shah <amul.shah@unisys.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Rohit Seth <rohitseth@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 0812a579c92fefa57506821fa08e90f47cb6dbdd
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:19 2007 +0100

    [PATCH] x86-64: Add __copy_from_user_nocache
    
    This does user copies in fs write() into the page cache with write combining.
    This pushes the destination out of the CPU's cache, but allows higher bandwidth
    in some case.
    
    The theory is that the page cache data is usually not touched by the
    CPU again and it's better to not pollute the cache with it. Also it is a little
    faster.
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit ee55c0be30429d7c3e61fa26c7f7e323c80e14f0
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:19 2007 +0100

    [PATCH] i386: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 287eeb5e02bfd9ddcb881f47400510b5cda686d1
Author: Andi Kleen <ak@suse.de>
Date:   Tue Feb 13 13:26:19 2007 +0100

    [PATCH] x86-64: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>

commit 156c221b728ccd4657c359cd25428946856beca8
Author: Mattia Dongili <malattia@linux.it>
Date:   Mon Feb 12 22:01:07 2007 +0100

    sony-laptop: allow complex per-value input/output validation
    
    Replace sony_acpi_value.{min,max} with a callback function that allows
    more complex reasoning in accepting input and presenting output.
    
    This allows consistency between the sony-laptop specific 'brightness_default'
    and the backlight subsystem 0-based 'brightness'.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0d477faca3a661908378b602c3d12df73c922c9f
Author: Mattia Dongili <malattia@linux.it>
Date:   Thu Feb 8 20:16:40 2007 +0100

    sony-laptop: add to MAINTAINERS
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ab5bd20696485a3f8c2f27058ace1cc1d6b580b3
Author: Mattia Dongili <malattia@linux.it>
Date:   Thu Feb 8 20:16:41 2007 +0100

    sony-laptop: Update docs
    
    Update documentation to be consistent with current implementation
    (backlight subsys and platform_device).
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a02d1c1d2aa8ad4b2ed8da25e234c8962973f1b8
Author: Len Brown <len.brown@intel.com>
Date:   Wed Feb 7 15:34:02 2007 -0500

    sony-laptop: Lindent
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d78865cdb096781382074943c1b7781696b178a6
Author: Mattia Dongili <malattia@linux.it>
Date:   Wed Feb 7 20:01:56 2007 +0100

    sony-laptop: Group functions and structures to better draw subsytems usage
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 287ddfd522097257dadf37deb21969ad4dbc8148
Author: Mattia Dongili <malattia@linux.it>
Date:   Wed Feb 7 20:01:55 2007 +0100

    sony-laptop: Small update to the Kconfig help to make people believe this driver is useful.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ed3aa4b729478978f117269b5266a2d18948912c
Author: Mattia Dongili <malattia@linux.it>
Date:   Wed Feb 7 20:01:54 2007 +0100

    sony-laptop: Remove /proc/acpi/sony interface and implement platform_device.
    
    Rework method names list to allow an easier management of multiple
    values.
    Add myself as author/maintainer and bump the version number.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 91fbc1d311c1b8b71203b96f1a0629da7360eb4c
Author: Mattia Dongili <malattia@linux.it>
Date:   Wed Feb 7 20:01:53 2007 +0100

    sony-laptop: create from sony_acpi
    
    Move drivers/acpi/sony_acpi.c to drivers/misc/sony-laptop.c with all the
    necessary configuration.
    The SONY_LAPTOP config option substitutes the old ACPI_SONY and is 'default n'
    now.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7df03b82ed081777d2393ff8a5fb9d4a3a560f26
Author: Mattia Dongili <malattia@linux.it>
Date:   Sat Jan 13 23:04:41 2007 +0100

    sony_acpi: Fix sony_acpi backlight registration and unregistration
    
    Initialize the current brightness if the driver registration
    was successful and unregister the driver in the error exit path.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 57ede701af3bc0c153070133e7831332ffa1d761
Author: Mattia Dongili <malattia@linux.it>
Date:   Sat Jan 13 23:04:40 2007 +0100

    sony_acpi: Allow multiple sony_acpi_values for the same .name
    
    The acpi handles are kept _only_ if both the requested .acpiget and .acpiset
    are available in the DSDT.
    Currently only the SCDP/CDPW dualism is known.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4465857d5f99079bae00621626adf74ed8256296
Author: Mattia Dongili <malattia@linux.it>
Date:   Sat Jan 13 23:04:39 2007 +0100

    sony_acpi: Add lanpower and audiopower controls
    
    audiopower works well on my SZ72B so it's not marked has "debug" while lanpower
    has at least one report of not resuming power happily so morked as "debug"
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 05e2d8274ef4504db9941f7c515f340ab6c0b2e1
Author: Mattia Dongili <malattia@linux.it>
Date:   Sat Jan 13 23:04:38 2007 +0100

    sony_acpi: Allow easier debugging for the unknown SNC methods.
    
    Allow the existence of a setter method without a getter and viceversa,
    additionaly set /proc file permissions reflecting it.
    Fix also the error exit path.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c561162f10b9f35c9aa5c25eb8dbeb446f0c5201
Author: Stelian Pop <stelian@popies.net>
Date:   Sat Jan 13 23:04:37 2007 +0100

    sony_acpi: Add acpi_bus_generate event
    
    Added acpi_bus_generate event for forwarding Fn-keys pressed to acpi subsystem,
    and made correspondent necessary changes for this to work.
    
    Signed-off-by: Nilton Volpato <nilton.volpato@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 82c47731f77e7615f5a952c662d873b55e71f3b9
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jan 13 23:04:36 2007 +0100

    sony_acpi: Video sysfs support take 2
    
    add dev argument for backlight_device_register
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 243e8b191df4e9c11e62ea11fa298351997e98c3
Author: Alessandro Guido <alessandro.guido@gmail.com>
Date:   Sat Jan 13 23:04:35 2007 +0100

    sony_acpi: Add backlight support to the sony_acpi v2
    
    Enable the sony_acpi driver to use the backlight subsysyem for adjusting
    the monitor brightness.  Old way of changing the brightness will be still
    available for compatibility with existing tools.
    
    Signed-off-by: Alessandro Guido <alessandro.guido@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 50f62afb114ffcf052cf07d4b49b2d148b749955
Author: Alessandro Guido <alessandro.guido@gmail.com>
Date:   Sat Jan 13 23:04:34 2007 +0100

    sony_acpi: Add backlight support to the sony_acpi
    
    Make the sony_acpi use the backlight subsystem to adjust brightness value
    instead of using the /proc/sony/brightness file.  (Other settings will
    still have a /proc/sony/...  entry)
    
    Signed-off-by: Alessandro Guido <alessandro.guido@gmail.com>
    Cc: Stelian Pop <stelian@popies.net>
    Cc: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fac3506100c19391bc5474084dd838f0fb87bf26
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jan 13 23:04:33 2007 +0100

    sony_acpi: Fix sony_acpi_resume call
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3f4f461fa816815b9338047a29cf2521f23f1783
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jan 13 23:04:32 2007 +0100

    sony_acpi: Avoid dimness on resume.
    
    Doesn't work.
    
    Cc: Stelian Pop <stelian@popies.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7f09c432bed80cecfba634933ddc06735e64da00
Author: Stelian Pop <stelian@popies.net>
Date:   Sat Jan 13 23:04:31 2007 +0100

    sony_acpi: SNC device support for Sony Vaios
    
    From: Bjorn Helgaas <bjorn.helgaas@hp.com>
    
      Even though the devices claimed by sony_acpi.c can not be hot-plugged, the
      driver registration infrastructure allows the .add() and .remove() methods
      to be called at any time while the driver is registered.  So remove __init
      and __exit from them.
    
    From: Matthew Garrett <mjg59@srcf.ucam.org>
    
    [UBUNTU:acpi/sony] Add FN hotkey support
    Source URL of Patch:
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=7a9b49cba4919e8506604629db03add8e0b85767
    
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6eb87fed52b7f6ac200eaa649cc3221e239d0113
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 10 22:17:07 2007 -0500

    ACPI: acpi_table_parse_madt_family() is not MADT specific
    
    acpi_table_parse_madt_family() is also used to parse SRAT entries.
    So re-name it to acpi_table_parse_entries(), and re-name the
    madt-specific variables within it accordingly.
    
    cosmetic only.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5a8765a84c31ea51baf1f6c78116cd877bd8cd64
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 10 21:35:47 2007 -0500

    ACPI: acpi_madt_entry_handler() is not MADT specific
    
    acpi_madt_entry_handler() is also used for the SRAT,
    so re-name it acpi_table_entry_handler().
    
    cosmetic only.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7f8f97c3cc75d5783d0b45cf323dedf17684be19
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 10 21:28:03 2007 -0500

    ACPI: acpi_table_parse() now returns success/fail, not count
    
    Returning count for tables that are supposed to be unique
    was useless and confusing.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f3ccb06f3b8e0cf42b579db21f3ca7f17fcc3f38
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Tue Feb 13 02:35:50 2007 -0500

    ACPI: Disable wake GPEs only once.
    
    fixes Suspend/Resume regressions due to recent ACPICA update.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 401e9093a326725780aed270a6eb53e7ddab14ff
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Feb 13 15:46:39 2007 +0900

    sh: Compile fix for heartbeat consolidation.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit d9bc125caf592b7d081021f32ce5b717efdf70c8
Merge: 43d78ef... ec2f9d1...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Feb 12 22:43:25 2007 -0800

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/
    
    Conflicts:
    
    	net/sunrpc/auth_gss/gss_krb5_crypto.c
    	net/sunrpc/auth_gss/gss_spkm3_token.c
    	net/sunrpc/clnt.c
    
    Merge with mainline and fix conflicts.

commit 3b4d9539628502768fe7f8fd4b48f2fbf2426255
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Feb 13 15:42:28 2007 +0900

    sh: heartbeat consolidation for banked LEDs.
    
    This consolidates the various board heartbeat LED implementations,
    used for strobing the load average across a LED bank. Those boards
    not implementing a full bank can hook in via the LED class.
    
    We leave the compat hook in the machvec for now until those non-banked
    boards are able to migrate to the drivers/leds.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 43d78ef2ba5bec26d0315859e8324bfc0be23766
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Tue Feb 6 18:26:11 2007 -0500

    NFS: disconnect before retrying NFSv4 requests over TCP
    
    RFC3530 section 3.1.1 states an NFSv4 client MUST NOT send a request
    twice on the same connection unless it is the NULL procedure.  Section
    3.1.1 suggests that the client should disconnect and reconnect if it
    wants to retry a request.
    
    Implement this by adding an rpc_clnt flag that an ULP can use to
    specify that the underlying transport should be disconnected on a
    major timeout.  The NFSv4 client asserts this new flag, and requests
    no retries after a minor retransmit timeout.
    
    Note that disconnecting on a retransmit is in general not safe to do
    if the RPC client does not reuse the TCP port number when reconnecting.
    
    See http://bugzilla.linux-nfs.org/show_bug.cgi?id=6
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a301b777714087ea1d63dbec0173a13d416cd7a9
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Feb 6 11:07:15 2007 -0800

    NFS: Don't use ClearPageUptodate() when writeback fails
    
    ClearPageUptodate() will just cause races here. What we really want to do
    is to invalidate the page cache.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b0c4fddca2bc3967381b728732a8850de35e1b20
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Feb 5 14:44:22 2007 -0800

    NFS: Cleanup - avoid rereading 'jiffies' more than once in the same routine
    
    Micro-optimisations for nfs_fhget() and nfs_wcc_update_inode().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 3e7d950a528454ad749a264feef3c8bad3faa108
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Feb 5 14:26:28 2007 -0800

    NFS: Fix a wraparound issue with nfsi->cache_change_attribute
    
    Fix wraparound issue with nfsi->cache_change_attribute. If it is found
    to lie in the future, then update it to lie in the past. Patch based on
    a suggestion by Neil Brown.
    
    ..and minor micro-optimisation: avoid reading 'jiffies' more than once in
    nfs_update_inode().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 54c66f6d781e03dc0b23956234963c4911e6d1c0
Merge: 8ce0a7d... 17e0e27...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 23:57:21 2007 -0600

    Merge branch 'master' into 85xx

commit cbe56159a3e60624b5f44cf48b640fa470436e34
Merge: 67c2b7d... 17e0e27...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 23:56:24 2007 -0600

    Merge branch 'master' into 83xx

commit 7baca6ad0ef09c8a78d798c93a3ce25336e8f50f
Merge: 06d8bf6... 17e0e27...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 23:52:26 2007 -0600

    Merge branch 'master' into for_paulus

commit 4409d28140d9a6e6e3f4f1fdaf7234c4b965d954
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 23:40:06 2007 -0600

    Convert network devices to use struct device instead of class_device
    
    Convert network devices to use struct device instead of class_device.  Greg
    missed this one in his cleanup path.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit a795ca5852fb944f21bd71c1230fcc5456e7d5ef
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Mon Feb 12 14:39:38 2007 +1100

    ACPI: cleanup: make disable_acpi() valid w/o CONFIG_ACPI
    
    Len Brown <lenb@kernel.org> said:
    > Okay, but better to use disable_acpi()
    > indeed, since this would be the first code not already inside CONFIG_ACPI
    > to invoke disable_acpi(), we could define the inline as empty and you could
    > then scratch the #ifdef too.
    
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7cda93e008e1a477970adbf82dba81a5d4f0ae40
Author: Len Brown <len.brown@intel.com>
Date:   Mon Feb 12 23:50:02 2007 -0500

    ACPI: delete extra #defines in /drivers/acpi/ drivers
    
    Cosmetic only.
    
    Except in a single case, #define ACPI_*_DRIVER_NAME
    were invoked 0 or 1 times.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 17e0e27020d028a790d97699aff85a43af5be472
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Feb 13 11:46:08 2007 +1100

    [POWERPC] spufs: Fix bitrot of the SPU mmap facility
    
    It looks like we've had some serious bitrot there mostly due to tracking
    of address_space's of mmap'ed files getting out of sync with the actual
    mmap code. The mfc, mss and psmap were not tracked properly and thus
    not invalidated on context switches (oops !)
    
    I also removed the various file->f_mapping = inode->i_mapping;
    assignments that were done in the other open() routines since that
    is already done for us by __dentry_open.
    
    One improvement we might want to do later is to assign the various
    ctx-> fields at mmap time instead of file open/close time so that we
    don't call unmap_mapping_range() on thing that have not been mmap'ed
    
    Finally, I added some smp_wmb's after assigning the ctx-> fields to make
    sure they are visible to other CPUs. I don't think this is really
    necessary as I suspect locking in the fs layer will make that happen
    anyway but better safe than sorry.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 44430e0d3916ab6aaf0451fdb811f4f1803b741e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Feb 13 11:46:07 2007 +1100

    [POWERPC] powerpc: Remove SPU struct pages for PS3
    
    Struct page are no longer needed for SPUs, so let's not create them
    on PS3 anymore.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 78bde53e351bc89cff85d1c2c7e6d7c2ffdf120d
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Feb 13 11:46:06 2007 +1100

    [POWERPC] spufs: remove need for struct page for SPEs
    
    This patch removes the need for struct page for SPE local store
    and registers from spufs. It also makes the locking much more
    obvious and no longer relying on the truncate logic black magic
    for protecting against races between unmap_mapping_range() and
    new pages faulted in. It does so by switching to a nopfn() handler
    and using the new vm_insert_pfn() to setup the PTEs itself while
    holding a lock on the SPE.
    
    The nice thing is that this patch actually removes a lot more code
    than it adds :-)
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9724b86f0706ca9b552d82e013cb0c208b4f5529
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Mon Feb 12 23:13:24 2007 +0100

    [POWERPC] Small cleanup of EFIKA platform
    
    The efika platform used three files efika-pci.c efika-setup.c and
    a 2 line efika.h to link the two. The total of code in those is
    really not much and therefore, I think they're better merged
    in a single file.
    
    There is absolutely _no_code_change_ at all, just merged the files.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 46e4cf6c14e0a5b8916a1236a7079ccad3f4352a
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Mon Feb 12 23:13:23 2007 +0100

    [POWERPC] Fix unbalanced of_node_{get,put} in efika-setup.c
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 82a03b92279f2ea80e11dc2c419fdaa3800401a2
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Mon Feb 12 23:13:22 2007 +0100

    [POWERPC] Use common 52xx of_platform probe code for EFIKA
    
    Now that the device tree has the good properties, we can
    remove all the efika_init code by a single call to common code.
    
    While we're modifying that file, a few whitespaces/alignement/typo
    fixes are made (nothing significant).
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b6a591b2c59935eef5dd31790323ca6014e28f01
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Mon Feb 12 23:13:21 2007 +0100

    [POWERPC] Restore 'proper' link order in platform
    
    The 52xx was put before CHRP to allow EFIKA to be recognized
    properly. Now the efika tree is fixed up in prom_init so
    no need for this ugly hack. So we restore the 'normal'
    order.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 88fd2a9d681f261ebd55a6843a03ea2a1bb9eb39
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Mon Feb 12 23:13:20 2007 +0100

    [POWERPC] Add device tree fixups for the EFIKA
    
    We make the efika device tree compliant with the defined bindings
    (at least compliant enough). This is mostly done by mangling
    the device_type and compatible properties, but also adding
    some missing bits.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 05cbbc692f513c0e62372abeab01b04b07096582
Author: Grant Likely <grant.likely@secretlab.ca>
Date:   Mon Feb 12 13:36:54 2007 -0700

    [POWERPC] mpc5200 device tree bindings refinement
    
    Much needed refinement of mpc5200 device tree binding specifications.
    
    Short list:
    - drop mpc52xx designator; only two supported chips exist, 5200 and 5200b.
      It's premature to refer to them as '52xx'.
    - Specify optional 'model' and 'revision' properties in the soc5200 node
    - Specify reqiured 'cell-index' property to identify between multiple SOC
      devices of the same type.  (Useful for arbitrating shared register access)
    - Specify optional 'port-number' property for adjusting the logical serial
      port assignments.
    - Specify optional 'has-wdt' property for gpt0 node.
    - Add system-frequency property to soc5200 node
    
    Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e3aba81d154c53a82e2a7e0ff5e7f1162a53cf27
Author: Grant Likely <grant.likely@secretlab.ca>
Date:   Mon Feb 12 13:36:55 2007 -0700

    [POWERPC] Fixup mp5200 drivers to match device tree changes
    
    Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 40d244d69a3871dd05a5fdae29f36823a6ee3e33
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Feb 12 22:10:48 2007 +1100

    [POWERPC] correct a prototype
    
    This rids us of a warning.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9b96ea662b404b9ed882c78cb844510d804a83e6
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Feb 12 22:09:18 2007 +1100

    [POWERPC] Wire up sys_getcpu
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ab9367e38fa97c2ed7f72fd5fa29d0d70d58df89
Author: Stefan Roese <sr@denx.de>
Date:   Mon Feb 12 11:29:04 2007 +0100

    [POWERPC] ppc: Add support for AMCC Taishan 440GX eval board
    
    This patch adds support for the AMCC Taishan PPC440GX evaluation
    board.
    
    This is still an arch/ppc port. I'm aware that the move of
    4xx to arch/powerpc is making good progress right now. So this
    patch is mainly intended to make the Taishan support available
    for the community right now.
    
    Signed-off-by: Stefan Roese <sr@denx.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7ac9a13717c10c5ee074a6b23096c8d277fa5712
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Feb 12 13:31:08 2007 +1100

    [POWERPC] Fix vDSO page count calculation
    
    The recent vDSO consolidation patches broke powerpc due to a mistake
    in the definition of MAXPAGES constants. This fixes it by moving to
    a dynamically allocated array of pages instead as I don't like much
    hard coded size limits. Also move the vdso initialisation to an initcall
    since it doesn't really need to be done -that- early.
    
    Applogies for not catching the breakage earlier, Roland _did_ CC me on
    his patches a while ago, I got busy with other things and forgot to test
    them.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a334bdbdda9659b8f50a8620a11249fde62ccfde
Author: Olaf Hering <olaf@aepfle.de>
Date:   Sat Feb 10 21:40:00 2007 +0100

    [POWERPC] Correct AC Power: in /proc/pmu/info on ibook1
    
    /proc/pmu/info contains AC Power: 0 when booting without battery.
    Force AC Power, it will be updated whenever the battery state changes.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2d99c41f05fc2a26737aacf943db03ca89841199
Author: Olaf Hering <olaf@aepfle.de>
Date:   Sat Feb 10 21:38:37 2007 +0100

    [POWERPC] Mark winbond IDE PCI resources with start 0 as unassigned
    
    libata calls pci_request_regions to claim PCI BAR 0 - 5
    pci_request_regions fails if one of the regions cant be claimed.
    bar 5 has start == 0,  __request_resource will fail.
    
    Tested on a p630 in SMP mode with pata_sl82c105
    
     00:03.1 IDE interface: Symphony Labs SL82c105 (rev 05) (prog-if 8f [Master SecP SecO PriP PriO])
             Control: I/O+ Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr+ Stepping- SERR+ FastB2B-
             Status: Cap- 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR-
             Interrupt: pin A routed to IRQ 86
             Region 0: I/O ports at 3fd3000f000 [size=8]
             Region 1: I/O ports at 3fd3000f010 [size=4]
             Region 2: I/O ports at 3fd3000f020 [size=8]
             Region 3: I/O ports at 3fd3000f030 [size=4]
             Region 4: I/O ports at 3fd3000f040 [size=16]
             Region 5: I/O ports at 3fd30000000 [size=16]
     00: ad 10 05 01 41 01 80 02 05 8f 01 01 08 48 80 00
     10: 01 f0 00 00 11 f0 00 00 21 f0 00 00 31 f0 00 00
     20: 41 f0 00 00 01 00 00 00 00 00 00 00 00 00 00 00
     30: 00 00 00 00 00 00 00 00 00 00 00 00 56 01 02 28
     40: b3 08 ff 00 09 09 00 00 09 09 00 00 09 09 00 00
     50: 09 09 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     60: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     70: 00 00 00 00 00 00 00 00 00 00 00 00 ff 00 00 00
     80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
     f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    
     name             "ide"
     linux,phandle    00d5cdc0 (14011840)
     assigned-addresses 81001910 00000000 0000f000 00000000 00000008 81001914
                      00000000 0000f010 00000000 00000004 81001918 00000000
                      0000f020 00000000 00000008 8100191c 00000000 0000f030
                      00000000 00000004 81001920 00000000 0000f040 00000000
                      00000010 81001924 00000000 00000000 00000000 00000010
     interrupts       00000003
     built-in
     #size-cells      00000000
     #address-cells   00000001
     device_type      "ide"
     reg              00001900 00000000 00000000 00000000 00000000
                      41001910 00000000 00000000 00000000 00000008
                      41001914 00000000 00000000 00000000 00000004
                      41001918 00000000 00000000 00000000 00000008
                      4100191c 00000000 00000000 00000000 00000004
                      41001920 00000000 00000000 00000000 00000010
                      41001924 00000000 00000000 00000000 00000010
     compatible       "pci10ad,105"
                      "pciclass,01018f"
     ibm,fw-slot-number 00000000
     fast-back-to-back
     devsel-speed     00000001
     max-latency      00000028 (40)
     min-grant        00000002
     class-code       0001018f (65935)
     revision-id      00000005
     device-id        00000105 (261)
     vendor-id        000010ad (4269)
     ibm,loc-code     "U0.1-P1/Q6"
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 872758563d7f132d25fc06857bd19df06c5c70c7
Author: Olaf Hering <olaf@aepfle.de>
Date:   Sat Feb 10 21:35:12 2007 +0100

    [POWERPC] move variables in drivers/macintosh to bss
    
    Move all the initialized variables to bss.
    Mark a version string as const.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9ea8b7c96f64f68548976ba65062cee2f2b7d831
Author: Pavel Fedin <sonic_amiga@rambler.ru>
Date:   Mon Jan 29 15:13:03 2007 +0300

    [POWERPC] Virtual DMA support for floppy driver for new powerpc architecture
    
    During ppc64+ppc merge virtual DMA code for floppy driver was not
    ported.  This patch restores virtual DMA support for floppy in new
    powerpc target.
    
    It is necessary at least on Pegasos and AmigaOne machines for the
    floppy drive to function.  ISA DMA controller works incorrectly there
    due to its addressing limitations.
    
    Virtual DMA mode is activated by floppy=nodma option passed to the
    kernel (or module).  There's no automatic switch like on i386.
    
    Signed-off-by: Pavel Fedin <sonic_amiga@rambler.ru>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cbca567ea5b337eaa2685606cbb9183e79b8f97f
Author: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
Date:   Fri Feb 9 16:53:59 2007 +0900

    [POWERPC] Celleb: improve MMU hashtable locking
    
    Disabling IRQ is required only in invalidation.  This changes
    "spin_lock_irqsave" to "spin_lock" in other ops.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c2b6705b75d9c7aff98a4602a32230639e10891c
Author: Len Brown <len.brown@intel.com>
Date:   Mon Feb 12 23:33:40 2007 -0500

    ACPI: fix acpi_driver.name usage
    
    It was erroneously used as a description rather than a name.
    
    ie. turn this:
    
    lenb@se7525gp2:/sys> ls bus/acpi/drivers
    ACPI AC Adapter Driver  ACPI Embedded Controller Driver  ACPI Power Resource Driver
    ACPI Battery Driver     ACPI Fan Driver                  ACPI Processor Driver
    ACPI Button Driver      ACPI PCI Interrupt Link Driver   ACPI Thermal Zone Driver
    ACPI container driver   ACPI PCI Root Bridge Driver      hpet
    
    into this:
    
    lenb@se7525gp2:~> ls /sys/bus/acpi/drivers
    ac  battery  button  container  ec  fan  hpet  pci_link  pci_root  power  processor  thermal
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e2e01bfef8399c8f39c9fdf4a5576039069e760c
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 20:27:10 2007 -0800

    [XFRM]: Fix IPv4 tunnel mode decapsulation with IPV6=n
    
    Add missing break when CONFIG_IPV6=n.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6e1d9d04c4004361fb327abcbde74a20e8dca2ff
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Mon Feb 12 20:26:39 2007 -0800

    [IPV6] HASHTABLES: Use appropriate seed for caluculating ehash index.
    
    Tetsuo Handa <handat@pm.nttdata.co.jp> told me that connect(2) with TCPv6
    socket almost always took a few minutes to return when we did not have any
    ports available in the range of net.ipv4.ip_local_port_range.
    
    The reason was that we used incorrect seed for calculating index of
    hash when we check established sockets in __inet6_check_established().
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1f1fec94589ed0b14c749eb9494bb690dbdf8d5a
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Feb 6 12:48:31 2007 +1100

    [POWERPC] Remove ibm4{xx,4x}.h from arch/powerpc
    
    ARCH=powerpc should not use the ghastly un-multiplatformable tangle of
    includes that starts with asm-ppc/ibm4xx.h.  This patch removes a
    compile-breaking include of it from head_44x.S.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f52fd66d2ea794010c2d7536cf8e6abed0ac4947
Author: Len Brown <len.brown@intel.com>
Date:   Mon Feb 12 22:42:12 2007 -0500

    ACPI: clean up ACPI_MODULE_NAME() use
    
    cosmetic only
    
    Make "module name" actually match the file name.
    Invoke with ';' as leaving it off confuses Lindent and gcc doesn't care.
    Fix indentation where Lindent did get confused.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8ce0a7df6e6117d8814e976d4b7ce6a6b2c9cf93
Author: Becky Bruce <bgill@freescale.com>
Date:   Mon Feb 12 17:43:46 2007 -0600

    [POWERPC] 85xx: Don't write reserved values to MAS1[TSIZE]
    
    Some of the current tlbwe instructions early on in head_fsl_booke.S take
    advantage of unarchitected behavior that allows the writing of reserved
    values to the TSIZE field.  This patch corrects that, as well as an error
    where an uninitialized (by linux) value was written into a MAS register and
    used for a tlbwe.
    
    Correct this for both arch/ppc and arch/powerpc.
    
    Signed-off-by: Becky Bruce <becky.bruce@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 67c2b7d9d224232ee730b9c9444abed824b62e7a
Merge: 49baa91... 5986a2e...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 21:28:39 2007 -0600

    Merge branch 'master' into 83xx

commit edacf6bb7e7e1b75f2937966a50119439ff78ccb
Merge: 862a728... 5986a2e...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 21:27:10 2007 -0600

    Merge branch 'master' into 85xx

commit 06d8bf64ba25db42fcc60d2da2268ac22af94e77
Merge: 8f68abb... 5986a2e...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Feb 12 21:17:37 2007 -0600

    Merge branch 'master' into for_paulus

commit fe6af6faec078ec8137631f24cb541f9918244f0
Merge: ec2f9d1... 8f68abb...
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Feb 13 13:28:00 2007 +1100

    Merge branch 'for_paulus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc

commit c7666e72cff1a2793055486340ac5f5137494c08
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Feb 13 11:11:22 2007 +0900

    sh: define dma noncoherent API functions.
    
    sh was missing these, too.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit fe8289175059a807094ba962828318910ea08a37
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Feb 13 11:09:15 2007 +0900

    sh: Missing flush_dcache_all() proto in cacheflush.h.
    
    Some boards need this, so provide a definition.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit ca43ecbf6e5c7216152e5a388f2ecdd87e07a293
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 7 21:27:50 2007 +0900

    sh: Kill dead/unused ISA code from __ioremap().
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit f5df54dc2e1dce80eb7fb45f3f6d5ce096d911f3
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 7 20:00:01 2007 +0900

    sh: Add cpu-features header to asm/Kbuild.
    
    This is used by the libc for parsing CPU capability flags passed
    via the ELF auxvt, needed for run-time selection of atomic opcodes
    amongst other things.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit a5ba7d545364b85c3a97f65d328be55ca933a9c7
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 7 19:58:07 2007 +0900

    sh: Move __KERNEL__ up in asm/page.h.
    
    This was breaking the uClibc build, which triggered the bogus page
    size error.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit b37814352d2c4b83e0636e57f997c3a79d33be05
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 7 19:11:35 2007 +0900

    sh: Fix syscall numbering breakage.
    
    We accidentally broke the inotify syscalls, fix those up again.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 5904539b7f21ae97f16278ea4bfb81fd19749e1a
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Feb 7 18:35:39 2007 +0900

    sh: dcache write-back for R7780RP PIO.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 0072032d7babc4347556c1863919f3c532d9cf5b
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Dec 25 19:37:56 2006 +0900

    sh: Switch to local TLB flush variants in additional callsites.
    
    Convert some of the global flush users over to using the local variants
    that don't need to use the global routines.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit ea9af69481730e3d712104dfd549ba6c8ddd29f1
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Dec 25 19:28:54 2006 +0900

    sh: Local TLB flushing variants for SMP prep.
    
    Rename the existing flush routines to local_ variants for use by
    the IPI-backed global flush routines on SMP.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 11c1965687b0a472add948d4240dfe65a2fcb298
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Dec 25 10:19:56 2006 +0900

    sh: Fixup cpu_data references for the non-boot CPUs.
    
    There are a lot of bogus cpu_data-> references that only end up working
    for the boot CPU, convert these to current_cpu_data to fixup SMP.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit aec5e0e1c179fac4bbca4007a3f0d3107275a73c
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Dec 25 09:51:47 2006 +0900

    sh: Use a per-cpu ASID cache.
    
    Previously this was implemented using a global cache, cache
    this per-CPU instead and bump up the number of context IDs to
    match NR_CPUS.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 506b85f4114b912d2e91fab8da9849289e43857f
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Feb 7 13:56:44 2007 +0900

    sh: add SH_CLK_MD Kconfig default.
    
    This option needs a default - otherwise `make allmodconfig' gets
    stuck in an infinite loop.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit dbbfa2da27fbf353caa8934768afbbf8d5e73d9b
Author: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
Date:   Wed Feb 7 13:54:39 2007 +0900

    sh: Fixup SHMIN INTC register definitions.
    
    Signed-off-by: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 9f8a5e3a44d81bbf19fddeb74645dec6b0e23b23
Author: Manuel Lauss <mano@roarinelk.homelinux.net>
Date:   Thu Jan 25 15:22:11 2007 +0900

    sh: SH-DMAC compile fixes
    
    This patch does the following:
    - remove the make_ipr_irq stuff from dma-sh.c and replace it
      with a simple channel<->irq mapping table.
    - add DMTEx_IRQ constants for sh4 cpus
    - fix sh7751 DMAE irq number
    
    The SH7780 uses the same IRQs for DMA as other SH4 types, so
    I put the constants on top of the dma.h file.
    
    Other CPU types need to #define their own DMTEx_IRQ contants
    in their appropriate header.
    
    Signed-off-by: Manuel Lauss <mano@roarinelk.homelinux.net>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 6dcda6f1ecef86209ac161631837bc57172ba049
Author: Manuel Lauss <mano@roarinelk.homelinux.net>
Date:   Thu Jan 25 15:21:03 2007 +0900

    sh: add SH7760 IPR IRQ data
    
    Add SH7760 IPR IRQ data; makes 2.6.20-rc bootable again.
    
    Signed-off-by: Manuel Lauss <mano@roarinelk.homelinux.net>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 86b67ef7518d1fcd4489dc464d4c33a274a1c635
Author: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
Date:   Mon Jan 1 09:21:43 2007 +0900

    sh: Fix handle_BUG() compile error.
    
    handle_BUG() uses TRAPA_BUG_OPCODE which is only defined for
    CONFIG_BUG, make sure it's not built when CONFIG_BUG=n.
    
    Signed-off-by: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit adac9570966eb2eb137209e552b258d4d1d4825b
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Dec 28 10:54:01 2006 +0900

    sh: Don't set reserved _PAGE_WT bit on SH-3.
    
    Only SH-4 needs to set _PAGE_WT when using write-through caching,
    don't attempt to set it on SH-3 where it ends up being a reserved
    bit.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 26b7a78c55fbc0e23a7dc19e89fd50f200efc002
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Dec 28 10:31:48 2006 +0900

    sh: Lazy dcache writeback optimizations.
    
    This converts the lazy dcache handling to the model described in
    Documentation/cachetlb.txt and drops the ptep_get_and_clear() hacks
    used for the aliasing dcaches on SH-4 and SH7705 in 32kB mode. As a
    bonus, this slightly cuts down on the cache flushing frequency.
    
    With that and the PTEA handling out of the way, the update_mmu_cache()
    implementations can be consolidated, and we no longer have to worry
    about which configuration the cache is in for the SH7705 case.
    
    And finally, explicitly disable the lazy writeback on SMP (SH-4A).
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 7a847f819063b80cc5b38d39e8aad4d60f6ca2fd
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Dec 26 15:29:19 2006 +0900

    sh: More tidying for large base pages.
    
    There were a few more things that needed fixing up, namely THREAD_SIZE
    and the TLB miss handler where certain PTRS_PER_PGD == PTRS_PER_PTE
    assumptions were being made.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit aa4a5db52a440d32eab134bfb79d2c9af71eedb4
Author: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
Date:   Fri Dec 29 01:50:35 2006 +0900

    sh: Solution Engine 770x IPR irq setup.
    
    Fixups for external IPR IRQs for the SE770x FPGA.
    
    Signed-off-by: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 08d2e099fb19ec2edef548a2988c824c8ec0b071
Author: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
Date:   Fri Dec 29 01:44:32 2006 +0900

    sh: Solution Engine 7750's defconfig update.
    
    Update se7750_defconfig.
    
    Signed-off-by: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit f725b5ee1e392ab1299c9317236cf736af1183ab
Author: Takashi YOSHII <takasi-y@ops.dti.ne.jp>
Date:   Mon Dec 25 18:35:24 2006 +0900

    sh: shmin updates.
    
    This fixes up shmin (and SH7706/SH7708) IPR support for some of the
    recent API changes.
    
    Signed-off-by: Takashi YOSHII <takasi-y@ops.dti.ne.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 2c081e71baadccb4543815ef42c5290ac2961546
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Mon Dec 25 18:28:33 2006 +0900

    sh: Fixup R7780RP iVDR clock enable.
    
    The iVDR clock enable bit happens to actually reside in a rather
    different place than what is documented, so fix it up accordingly.
    This fixes up SATA boot for some of the R7780RP boards that didn't
    default-enable the clock in the loader.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 703404ea441fc198d03ca3e9edbac6e09b5415f4
Author: Jamie Lenehan <lenehan@twibble.org>
Date:   Tue Dec 19 12:16:06 2006 +0900

    sh: allow earlyprintk baud rate to be set via command line
    
    This allows the baud rate for earlyprintk for sh4 without the
    standard BIOS to be set via the command line. This uses the same
    format as i386 and x86_64, which is:
    
    	earlyprintk=serial,ttySC1,38400
    
    The second parameter (ttySC1 above) is usually the console device
    name or the io address of the serial port. I allow that to be
    specified but ignore it in order to keep the format the same as
    i386/x86_64.
    
    Signed-off-by: Jamie Lenehan <lenehan@twibble.org>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 106dac130d6fb6670a0bbfa8c714054990b41b03
Author: SUGIOKA Toshinobu <sugioka@itonet.co.jp>
Date:   Tue Dec 19 12:13:55 2006 +0900

    sh: syscall 300 should be __NR_fstatat64.
    
    syscall number 300 fails while testing with latest LTP
    (ltp-full-20061121.tgz) on sh.
    
    sys_fstatat64 is called on syscall 300 (see arch/sh/kernel/syscalls.S),
    and __ARCH_WANT_STAT64 is defined in include/asm-sh/unistd.h, so
    following patch seems correct.
    
    Signed-off-by: SUGIOKA Toshinobu <sugioka@itonet.co.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 5c67cd05e3e9b6f08c3472dd66f0d8d03e1ee870
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Tue Dec 19 12:12:01 2006 +0900

    sh: sh7619 / sh7206 IPR initialize update
    
    IPR initialize proceduere update.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 4aa362bbdd801dd971acbe3db479fe871f2fed0b
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Tue Dec 19 12:10:48 2006 +0900

    sh: Update SH-2 to use the debug trap jump table.
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 702dd80375046d36f892a0f86c83f8549c623b35
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Dec 19 12:05:17 2006 +0900

    sh: Use proper SH-2A CFLAGS on newer compilers.
    
    -m2 doesn't end up working particularly well when we've got a constrained
    toolchain target. Switch to the same semantics used by SH-4A to attempt
    to get it right. Spotted by Alex Song <songqf9@yahoo.ca>.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit f413d0d9fa7abcecc40e115cf4aead372d164a75
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Dec 13 17:40:05 2006 +0900

    sh: Use a jump call table for debug trap handlers.
    
    This rips out most of the needlessly complicated sh_bios and kgdb
    trap handling, and forces it all through a common fast dispatch path.
    As more debug traps are inserted, it's important to keep them in sync
    for all of the parts, not just SH-3/4.
    
    As the SH-2 parts are unable to do traps in the >= 0x40 range, we
    restrict the debug traps to the 0x30-0x3f range on all parts, and
    also bump the kgdb breakpoint trap down in to this range (from 0xff
    to 0x3c) so it's possible to use for nommu.
    
    Optionally, this table can be padded out to catch spurious traps for
    SH-3/4, but we don't do that yet..
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit b2875d4c39759a732203db32f245cc6d8bbdd7cf
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Feb 10 23:14:25 2007 +0200

    IB/mthca: Always fill MTTs from CPU
    
    Speed up memory registration by filling in MTTs directly when the CPU
    can write directly to the whole table (all mem-free cards, and to
    Tavor mode on 64-bit systems with the patch I posted earlier).  This
    reduces the number of FW commands needed to register an MR by at least
    a factor of 2 and speeds up memory registration significantly.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c20e20ab0f3af9a44842ea11287c9ecd034a5d33
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Feb 10 23:13:12 2007 +0200

    IB/mthca: Merge MR and FMR space on 64-bit systems
    
    For Tavor, we currently reserve separate MPT and MTT space for FMRs to
    avoid abusing the vmalloc space on 32 bit kernels. No such problem
    exists on 64 bit kernels so let's not do it there.
    
    This way we have a shared pool for MR and FMR resources, used on
    demand.  This will also make it possible to write MTTs for regular
    regions directly from driver.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 391e4dea7189eef32b0c2d121e7e047110c1b83c
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Feb 10 23:15:08 2007 +0200

    IB/mthca: Fix access to MTT and MPT tables on non-cache-coherent CPUs
    
    We allocate the MTT table with alloc_pages() and then do pci_map_sg(),
    so we must call pci_dma_sync_sg() after the CPU writes to the MTT
    table.  This works since the device will never write MTTs on mem-free
    HCAs, once we get rid of the use of the WRITE_MTT firmware command.
    This change is needed to make that work, and is an improvement for
    now, since it gives FMRs a chance at working.
    
    For MPTs, both the device and CPU might write there, so we must
    allocate DMA coherent memory for these.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1d1f19cfce7687b557cebdc41bf8a5eeba8a9882
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Feb 10 23:17:26 2007 +0200

    IB/mthca: Give reserved MTTs a separate cache line
    
    MTTs are allocated in non-cache-coherent memory, so we must give
    reserved MTTs their own cache line, to prevent both device and
    CPU from writing into the same cache line at the same time.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c7d204e8fdf02f88d91707213f473805bcfb977b
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Feb 10 23:17:26 2007 +0200

    IB/mthca: Fix reserved MTTs calculation on mem-free HCAs
    
    The reserved_mtts field has different meaning in Tavor and Arbel, so
    we are wasting mtt entries on memfree. Fix the Arbel case to match
    Tavor semantics.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit b038ced7b3705bf0ac9b30e118af0f56ab48b847
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Mon Feb 12 16:16:18 2007 -0800

    RDMA/cxgb3: Add driver for Chelsio T3 RNIC
    
    Add an RDMA/iWARP driver for the Chelsio T3 1GbE and 10GbE adapters.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ec2f9d1331f658433411c58077871e1eef4ee1b4
Merge: 89697f1... 34cc560...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 12 15:35:30 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC]: Re-export saved_command_line to modules.
      [SPARC64]: Increase command line size to 2048 like other arches.
      [SPARC64]: We do not need ZONE_DMA.

commit 89697f1d715e20fff0361cca79efd5a371623af7
Merge: fd19e44... 13fcfbb...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 12 15:34:17 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (25 commits)
      [XFRM]: Fix OOPSes in xfrm_audit_log().
      [TCP]: cleanup of htcp (resend)
      [TCP]: Use read mostly for CUBIC parameters.
      [NETFILTER]: nf_conntrack_tcp: make sysctl variables static
      [NETFILTER]: ip6t_mh: drop piggyback payload packet on MH packets
      [NETFILTER]: Fix whitespace errors
      [NETFILTER]: Kconfig: improve dependency handling
      [NETFILTER]: xt_mac/xt_CLASSIFY: use IPv6 hook names for IPv6 registration
      [NETFILTER]: nf_conntrack: change nf_conntrack_l[34]proto_unregister to void
      [NETFILTER]: nf_conntrack: properly use RCU for nf_conntrack_destroyed callback
      [NETFILTER]: ip_conntrack: properly use RCU for ip_conntrack_destroyed callback
      [NETFILTER]: nf_conntrack: fix invalid conntrack statistics RCU assumption
      [NETFILTER]: ip_conntrack: fix invalid conntrack statistics RCU assumption
      [NETFILTER]: nf_conntrack: properly use RCU API for nf_ct_protos/nf_ct_l3protos arrays
      [NETFILTER]: ip_conntrack: properly use RCU API for ip_ct_protos array
      [NETFILTER]: nf_nat: properly use RCU API for nf_nat_protos array
      [NETFILTER]: ip_nat: properly use RCU API for ip_nat_protos array
      [NETFILTER]: nf_log: minor cleanups
      [NETFILTER]: nf_log: switch logger registration/unregistration to mutex
      [NETFILTER]: nf_log: make nf_log_unregister_pf return void
      ...

commit 34cc560e6a72ff414ff7d107426a411b0a093ad3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 12 15:10:56 2007 -0800

    [SPARC]: Re-export saved_command_line to modules.
    
    This reverts some bogosity from the dynamic command-line
    changes made on sparc32 and sparc64.
    
    Drivers such as drivers/sbus/char/openprom.c reference
    saved_command_line, and can be modular.
    
    The boot_command_line is __initdata, yet the dynamic command-line
    changes add modular exports of that symbol, obviously wrong.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b5ba1b31c793185d6e0ee62c1928c84bcff9818e
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 12 11:01:21 2007 -0800

    [SPARC64]: Increase command line size to 2048 like other arches.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1b51d3a08b6c80a1e47d4c579c41abbe56cd3c44
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 12 00:13:31 2007 -0800

    [SPARC64]: We do not need ZONE_DMA.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd19e44f449f7e2e58d42d7bb6813e2292c38fba
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 12 15:05:15 2007 -0800

    don't use 'localversion*' files twice
    
    Since we look in both source and object directories for localversion*
    files, we accidentally ended up getting them twice.  Use 'sort -u' to
    avoid that.
    
    Reported-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b05f87172f904b28bd5ac058ebfb4e216b843efe
Author: Matt Reimer <mreimer@vpop.net>
Date:   Mon Feb 12 20:42:52 2007 +0100

    [ARM] 4168/1: S3C24XX: use defines instead of numbers
    
    Use defines instead of numbers.
    
    Signed-off-by: Matt Reimer <mreimer@vpop.net>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 13fcfbb0675bf87da694f55dec11cada489a205c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Feb 12 13:53:54 2007 -0800

    [XFRM]: Fix OOPSes in xfrm_audit_log().
    
    Make sure that this function is called correctly, and
    add BUG() checking to ensure the arguments are sane.
    
    Based upon a patch by Joy Latten.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 82eb7c5059de64bd43f6b3cf3f128470f2b3fb83
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Thu Feb 8 18:39:36 2007 +0100

    [WATCHDOG] timers cleanup
    
    - Use timer macros to set function and data members and to modify
      expiration time.
    - Use DEFINE_TIMER for single (platform dependent) watchdog timers and
      do not init them at run-time in these cases.
    - del_timer_sync is common in most cases -- we want to wait for timer
      function if it's still running.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Steve Hill <steve@navaho.co.uk>
    Cc: Heiko Ronsdorf <hero@ihg.uni-duisburg.de>
    Cc: Fernando Fuganti <fuganti@conectiva.com.br>
    Cc: Gergely Madarasz <gorgo@itc.hu>
    Cc: Ken Hollis <khollis@bitgate.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 9121c77706a4bd75a878573c913553ade120e9ce
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon Feb 12 13:34:03 2007 -0800

    [TCP]: cleanup of htcp (resend)
    
    Minor non-invasive cleanups:
     * white space around operators and line wrapping
     * use const
     * use __read_mostly
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 59758f44592b0930e83b190cf0206e59d616c983
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Mon Feb 12 13:15:20 2007 -0800

    [TCP]: Use read mostly for CUBIC parameters.
    
    These module parameters should be in the read mostly area to avoid
    cache pollution.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 07b04595e3630594773223874827f5bbd03fc289
Author: Matt Reimer <mreimer@vpop.net>
Date:   Mon Feb 12 21:05:02 2007 +0100

    [ARM] 4170/1: S3C2410: don't save and restore cp register 15
    
    Don't save and restore cp register 15 since it is only a test register on S3C2410. This is probably a leftover from the PXA sleep.S from which this was derived.
    
    Supersedes patch 4167.
    
    Signed-off-by: Matt Reimer <mreimer@vpop.net>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4b210faf0944172e55489bef83babf520bccc1c4
Author: Matt Reimer <mreimer@vpop.net>
Date:   Mon Feb 12 21:00:32 2007 +0100

    [ARM] 4169/1: S3C2410: align to a cache line
    
    Align the code to the start of the next cache line, rather than the start of the next 256-byte page.
    
    (On i386 and ARM, the ".align" assembler directive takes its first argument as the number of low-order bits that must be zero, not the number of words comprising a cache line.)
    
    Supercedes patch 4166.
    
    Signed-off-by: Matt Reimer <mreimer@vpop.net>
    Acked-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6fb9c4f87018f90d7aa415c5c8a4b22e6a000c5b
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Feb 12 18:57:05 2007 +0100

    [ARM] 4164/1: S3C2412: Add SMDK2412 to SMDK2413
    
    Our current support for the SMDK2413 is the same
    as the SMDK2412 (which is very similar), so add
    SMDK2412 to the list of machines that mach-smdk2413.c
    supports
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6db3eee422f80b9d440ea4c08280b52ac4bfa903
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Feb 12 16:03:22 2007 +0100

    [ARM] 4163/1: S3C2410: minor typo in init comment
    
    Fix a reference to s3c2440 in the s3c2410 cpu file
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f454aa6b90be8c5845d1e4716e12479f6ba26538
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Feb 12 19:26:05 2007 +0000

    [ARM] Provide dummy noncoherent DMA API
    
    We don't currently support the noncoherent DMA API, but it needs to
    be provided for kernels with devres to link.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3aef0fd91c67f4070c8dc607807615c4bdd66bd1
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:16:58 2007 -0800

    [NETFILTER]: nf_conntrack_tcp: make sysctl variables static
    
    sysctls are registered by the protocol module itself since 2.6.19, no need
    to have them visible to others.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 138939e0662ccb0e805aefe400bcf9cfcbece8e7
Author: Masahide NAKAMURA <nakam@linux-ipv6.org>
Date:   Mon Feb 12 11:16:17 2007 -0800

    [NETFILTER]: ip6t_mh: drop piggyback payload packet on MH packets
    
    Regarding RFC3775, MH payload proto field should be IPPROTO_NONE. Otherwise
    it must be discarded (and the receiver should send ICMP error).
    
    We assume filter should drop such piggyback everytime to disallow slipping
    through firewall rules, even the final receiver will discard it.
    
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 601e68e100b6bf8ba13a32db8faf92d43acaa997
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Mon Feb 12 11:15:49 2007 -0800

    [NETFILTER]: Fix whitespace errors
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a3c941b08d73e26af9030d34a73a1992cfff1703
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:15:02 2007 -0800

    [NETFILTER]: Kconfig: improve dependency handling
    
    Instead of depending on internally needed options and letting users
    figure out what is needed, select them when needed:
    
    - IP_NF_IPTABLES, IP_NF_ARPTABLES and IP6_NF_IPTABLES select
      NETFILTER_XTABLES
    
    - NETFILTER_XT_TARGET_CONNMARK, NETFILTER_XT_MATCH_CONNMARK and
      IP_NF_TARGET_CLUSTERIP select NF_CONNTRACK_MARK
    
    - NETFILTER_XT_MATCH_CONNBYTES selects NF_CT_ACCT
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 891350c9d168a7d58a193a67a1d107c23f9c2eb1
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:14:43 2007 -0800

    [NETFILTER]: xt_mac/xt_CLASSIFY: use IPv6 hook names for IPv6 registration
    
    Use NF_IP6_ instead of NF_IP_. The values are identical, this is merely
    cleanup.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe3eb20c1ace69e42e6ebf2afd2a904b2ae85cde
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:14:28 2007 -0800

    [NETFILTER]: nf_conntrack: change nf_conntrack_l[34]proto_unregister to void
    
    No caller checks the return value, and since its usually called within the
    module unload path there's nothing a module could do about errors anyway,
    so BUG on invalid conditions and return void.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 982d9a9ce389c396bc83ce29d799937f379ddcb7
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:14:11 2007 -0800

    [NETFILTER]: nf_conntrack: properly use RCU for nf_conntrack_destroyed callback
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b48a7d08d1bb2e3932bce1662fe411304acc18f
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:13:58 2007 -0800

    [NETFILTER]: ip_conntrack: properly use RCU for ip_conntrack_destroyed callback
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c0e912d7ed8999f87fa7f084928aac1266e251f3
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:13:43 2007 -0800

    [NETFILTER]: nf_conntrack: fix invalid conntrack statistics RCU assumption
    
    NF_CT_STAT_INC assumes rcu_read_lock in nf_hook_slow disables
    preemption as well, making it legal to use __get_cpu_var without
    disabling preemption manually. The assumption is not correct anymore
    with preemptable RCU, additionally we need to protect against softirqs
    when not holding nf_conntrack_lock.
    
    Add NF_CT_STAT_INC_ATOMIC macro, which disables local softirqs,
    and use where necessary.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abbaccda4c364815b8b1a82c45a94f60760e13e1
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:13:14 2007 -0800

    [NETFILTER]: ip_conntrack: fix invalid conntrack statistics RCU assumption
    
    CONNTRACK_STAT_INC assumes rcu_read_lock in nf_hook_slow disables
    preemption as well, making it legal to use __get_cpu_var without
    disabling preemption manually. The assumption is not correct anymore
    with preemptable RCU, additionally we need to protect against softirqs
    when not holding ip_conntrack_lock.
    
    Add CONNTRACK_STAT_INC_ATOMIC macro, which disables local softirqs,
    and use where necessary.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 923f4902fefdf4e89b0fb32c4e069d4f57d704f5
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:12:57 2007 -0800

    [NETFILTER]: nf_conntrack: properly use RCU API for nf_ct_protos/nf_ct_l3protos arrays
    
    Replace preempt_{enable,disable} based RCU by proper use of the
    RCU API and add missing rcu_read_lock/rcu_read_unlock calls in
    all paths not obviously only used within packet process context
    (nfnetlink_conntrack).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 642d628b2c92e5283bbd3c849c7099c64ab68856
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:12:40 2007 -0800

    [NETFILTER]: ip_conntrack: properly use RCU API for ip_ct_protos array
    
    Replace preempt_{enable,disable} based RCU by proper use of the
    RCU API and add missing rcu_read_lock/rcu_read_unlock calls in
    all paths not obviously only used within packet process context
    (nfnetlink_conntrack).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e22a05486913ccb959281cd6370593bd8e197fa9
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:12:26 2007 -0800

    [NETFILTER]: nf_nat: properly use RCU API for nf_nat_protos array
    
    Replace preempt_{enable,disable} based RCU by proper use of the
    RCU API and add missing rcu_read_lock/rcu_read_unlock calls in
    paths used outside of packet processing context (nfnetlink_conntrack).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a441dfdbb2e54217b8d26a6c129650728d401bf7
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:12:09 2007 -0800

    [NETFILTER]: ip_nat: properly use RCU API for ip_nat_protos array
    
    Replace preempt_{enable,disable} based RCU by proper use of the
    RCU API and add missing rcu_read_lock/rcu_read_unlock calls in
    paths used outside of packet processing context (nfnetlink_conntrack).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e92ad99c78de09a5ba0746e1c0ee27cc7450c64d
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:11:55 2007 -0800

    [NETFILTER]: nf_log: minor cleanups
    
    - rename nf_logging to nf_loggers since its an array of registered loggers
    
    - rename nf_log_unregister_logger() to nf_log_unregister() to make it
      symetrical to nf_log_register() and convert all users
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9b73534dc57fa2fd5ef567586adb83c16e88a52f
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:11:39 2007 -0800

    [NETFILTER]: nf_log: switch logger registration/unregistration to mutex
    
    The spinlock is only used in process context (register/unregister),
    switch to a mutex.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9dc6aa5fcfc104becd86c89c5e7ec90e840e0163
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:11:24 2007 -0800

    [NETFILTER]: nf_log: make nf_log_unregister_pf return void
    
    Since the only user of nf_log_unregister_pf (nfnetlink_log) doesn't
    check the return value, change it to void and bail out silently when
    a non-existant address family is supplied.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a5ea6169f294bc33a762f7c1c240e3ac0f045f9e
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:11:06 2007 -0800

    [NETFILTER]: nf_log: use rcu_assign_pointer for RCU protected pointer
    
    Also replace synchronize_net() calls by synchronize_rcu() since the
    RCU protected data is also used for sysfs.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd706d6957b3c66ae70b4bbdb9e13993213697f7
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:10:14 2007 -0800

    [NETFILTER]: Switch nf_register_hook/nf_unregister_hook to mutex
    
    The spinlock is only used in process context (register/unregister)
    since RCU is used for the nf_hook lists, switch to a mutex.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d486dd1fb8573fad5b8dab61a7d1406116fd4baf
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:09:55 2007 -0800

    [NETFILTER]: Switch nf_register_afinfo/nf_unregister_afinfo to mutex
    
    The spinlock is only used in process context (register/unregister),
    switch to a mutex.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e4ba13088de7fa384087af398df6629fadb363ba
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:09:35 2007 -0800

    [NETFILTER]: Remove unnecessary synchronize_net() in nf_register_hook
    
    We're only adding to the list, no need to synchronize.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3a47ab3e5ad62601449e4e5401352271b777e28
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Feb 12 11:09:19 2007 -0800

    [NETFILTER]: Properly use RCU in nf_ct_attach
    
    Use rcu_assign_pointer/rcu_dereference for ip_ct_attach pointer instead
    of self-made RCU and use rcu_read_lock to make sure the conntrack module
    doesn't disappear below us while calling it, since this function can be
    called from outside the netfilter hooks.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebaf0c6032f525ddb0158fb59848d41899dce8cd
Merge: ee9b6d6... 022ae41...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Mon Feb 12 09:57:44 2007 -0800

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] remove __io_virt and mmiowb.
      [S390] cio: use ARRAY_SIZE in device_id.c
      [S390] cio: Fixup interface for setting options on ccw devices.
      [S390] smp_call_function/smp_call_function_on locking.

commit ee9b6d61a2a43c5952eb43283f8db284a4e70b8a
Author: Josef 'Jeff' Sipek <jsipek@cs.sunysb.edu>
Date:   Mon Feb 12 00:55:41 2007 -0800

    [PATCH] Mark struct super_operations const
    
    This patch is inspired by Arjan's "Patch series to mark struct
    file_operations and struct inode_operations const".
    
    Compile tested with gcc & sparse.
    
    Signed-off-by: Josef 'Jeff' Sipek <jsipek@cs.sunysb.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c5ef1c42c51b1b5b4a401a6517bdda30933ddbaf
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:40 2007 -0800

    [PATCH] mark struct inode_operations const 3
    
    Many struct inode_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 92e1d5be91a0e3ffa5c4697eeb09b2aa22792122
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:39 2007 -0800

    [PATCH] mark struct inode_operations const 2
    
    Many struct inode_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 754661f143e70d66eae6c48532ca245aa05dec0e
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:38 2007 -0800

    [PATCH] mark struct inode_operations const 1
    
    Many struct inode_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9c2e08c592cd357a8330c34def1e8ecfdcf53275
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:37 2007 -0800

    [PATCH] mark struct file_operations const 9
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit da7071d7e32d15149cc513f096a3638097b66387
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:36 2007 -0800

    [PATCH] mark struct file_operations const 8
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9a32144e9d7b4e21341174b1a83b82a82353be86
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:35 2007 -0800

    [PATCH] mark struct file_operations const 7
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 00977a59b951207d38380c75f03a36829950265c
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:34 2007 -0800

    [PATCH] mark struct file_operations const 6
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d54b1fdb1d9f82e375a299e22bd366aad52d4c34
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:34 2007 -0800

    [PATCH] mark struct file_operations const 5
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fa027c2a0a0d6d1df6b29ee99048502c93da0dd4
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:33 2007 -0800

    [PATCH] mark struct file_operations const 4
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    [akpm@sdl.org: dvb fix]
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2b8693c0617e972fc0b2fd1ebf8de97e15b656c3
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:32 2007 -0800

    [PATCH] mark struct file_operations const 3
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5dfe4c964a0dd7bb3a1d64a4166835a153146207
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:31 2007 -0800

    [PATCH] mark struct file_operations const 2
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    [akpm@osdl.org: sparc64 fix]
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 540473208f8ac71c25a87e1a2670c3c18dd4d6db
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 12 00:55:28 2007 -0800

    [PATCH] mark struct file_operations const 1
    
    Many struct file_operations in the kernel can be "const".  Marking them const
    moves these to the .rodata section, which avoids false sharing with potential
    dirty data.  In addition it'll catch accidental writes at compile time to
    these shared resources.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f59e5e82096f81a2cb7d7833001956d81e9fa6fb
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:27 2007 -0800

    [PATCH] ps3: ps3av/fb defconfig updates
    
    PS3: defconfig updates for ps3av and ps3fb
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 36dff96b3b83c5d79a45b221adf137b571b03d65
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:26 2007 -0800

    [PATCH] ps3: cleanup ps3fb before clearing HPTE
    
    PS3: Cleanup the frame buffer device before clearing the HPTE mapping
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0465f790e06d6dbc07d9b569b74ee8154dfca280
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:25 2007 -0800

    [PATCH] ps3: disable display flipping during mode changes
    
    If ps3fb is available, we have to disable display flipping while changing the
    audio or video mode.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 310d8c11126d21e417206c874c6382c44ece1baa
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:23 2007 -0800

    [PATCH] ps3: Virtual Frame Buffer Driver
    
    Add the PS3 Virtual Frame Buffer Driver.
    
    As the actual graphics hardware cannot be accessed directly by Linux, ps3fb
    uses a virtual frame buffer in main memory.  The actual screen image is copied
    to graphics memory by the GPU on every vertical blank, by making a hypervisor
    call.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fbdb3e5be36619c4acf415d870eceab4cbce2850
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:22 2007 -0800

    [PATCH] ps3: Preallocate bootmem memory for ps3fb
    
    Preallocate bootmem memory for the PS3 frame buffer device, which needs a
    large block of physically-contiguous memory. The size of this memory block is
    configurable:
      - The config option CONFIG_FB_PS3_DEFAULT_SIZE_M allows to specify the
        default amount of memory (in MiB) allocated to the virtual frame buffer.
      - The early boot parameter `ps3fb=xxx' allows to override the default value.
        It will be rounded up to a multiple of 1 MiB, if needed.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dcfe2666ffd6316b764801db82092bc62db56e6f
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:21 2007 -0800

    [PATCH] fb_videomode_to_var: reset virtual screen parameters
    
    fb_videomode_to_var(): reset the virtual screen parameters when converting
    from an fb_videomode to an fb_var_screeninfo.
    
    Without this the old virtual screen parameters are kept.  Hence you cannot
    switch to a video mode with a lower resolution on frame buffer devices that
    don't support virtual screens and panning, as values are not supposed to be
    rounded down when they don't fit.
    
    I also reordered the assignments to match the order of the individual members.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9791d763de8cca82b42a7a579e031db78e8011ff
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:19 2007 -0800

    [PATCH] fbdev modedb: make more pointer parameters const
    
    fbdev modedb: make more input and output pointer parameters const
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5c52cbeb7f27e1242e88f99f7f6486a16d5733c7
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:18 2007 -0800

    [PATCH] fbdev modedb: allow refresh rates for named video modes
    
    fbdev modedb: Take into account the specified refresh rates for video modes
    specified by name, so e.g.  all of `720p', `720p@60', and `720p@50' work.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 11227fd1922dc5dda691586852cfd220dd383f37
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:16 2007 -0800

    [PATCH] ps3: AV Settings Driver
    
    Add the PS3 AV Settings Driver.
    
    The AV Settings driver is used to control Audio and Video settings.  It
    communicates with the policy manager through the virtual uart.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5b8e8ee6c65a34d8aafaeb8e2eaa97e496c2567c
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Mon Feb 12 00:55:15 2007 -0800

    [PATCH] ps3: add shutdown to virtual uart port driver framework
    
    PS3: Add a shutdown method to the PS3's virtual uart port driver framework
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5e14ab8b5ecca8997406180e23761525f49a09a3
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Mon Feb 12 00:55:14 2007 -0800

    [PATCH] change nvidiafb_remove to __devexit
    
    Change nvidiafb_remove to __devexit to fix MODPOST warnings:
    
    WARNING: drivers/video/nvidia/nvidiafb.o - Section mismatch: reference to
    .exit.text:nvidiafb_remove from .data.rel.local after 'nvidiafb_driver' (at
    offset 0x28)
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Acked-By: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f5610b9c3a2896fcaa623b92d0f24d83f10bb2c0
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:55:12 2007 -0800

    [PATCH] Video: fb, kzalloc changes
    
    Use kzalloc instead of kmalloc + memset(0).
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c4f28e54d61278203c2bb2aea0679e0a738235d2
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:55:11 2007 -0800

    [PATCH] Video: fb, add true ref_count atomicity
    
    Some of fb drivers uses atomic_t in bad manner, since there are still some
    race-prone gaps.  Use mutexes to protect open/close code sections with
    ref_count testing and finally use simple uint.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Acked-by: Denis Oliver Kropp <dok@directfb.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 52e7c922f37907ab3cf3445b916fbbc53cbd6c75
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:55:09 2007 -0800

    [PATCH] remove the broken FB_S3TRIO driver
    
    The FB_S3TRIO driver:
    - has been marked as BROKEN for more than two years and
    - is still marked as BROKEN.
    
    Drivers that had been marked as BROKEN for such a long time seem to be
    unlikely to be revived in the forseeable future.
    
    But if anyone wants to ever revive this driver, the code is still
    present in the older kernel releases.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: James Simmons <jsimmons@infradead.org>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2fdbe5cf27aff997e348c5f01b424ad734bd1d25
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Feb 12 00:55:07 2007 -0800

    [PATCH] matroxfb: Use kzalloc
    
    Use kzalloc instead of kmalloc+memset, twice.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Petr Vandrovec <vandrove@vc.cvut.cz>
    Acked-By: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c30660ead2dd6ced47ac6ad4c099fb9305263ffb
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 12 00:55:06 2007 -0800

    [PATCH] drivers/video/sis: Convert to generic boolean
    
    Convert:
    FALSE   -> false
    TRUE    -> true
    BOOLEAN -> bool
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Cc: Thomas Hellstrom <thomas@tungstengraphics.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3aebbd8f92ef1aa3048800b4991db60403b85964
Author: Alan Cox <alan@redhat.com>
Date:   Mon Feb 12 00:55:05 2007 -0800

    [PATCH] pm3fb: kill pci_find_device usage
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 33e321b458ffa09cf0dcc7ff4e35fb31d3a71a49
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:55:03 2007 -0800

    [PATCH] Correct apparent typo CONFIG_ATY_CT in ATY video
    
    Replace the apparent typo CONFIG_ATY_CT with CONFIG_FB_ATY_CT.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Ville Syrjala <syrjala@sci.fi>
    Cc: Antonino Daplas <adaplas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c7b54477d36fc5d6bd3c4e2e025a39ad9ccb5188
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Feb 12 00:55:02 2007 -0800

    [PATCH] Recognize video=gx1fb:... option
    
    Juergen Beisert reported that the following option doesn't work for him
    
    	video=gx1fb:1024x768-16@60
    
    though sisfb was able to parse similar option correctly.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Jordan Crouse <jordan.crouse@amd.com>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f9506a53b446bc942c79584d3ce442d6334de697
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:55:01 2007 -0800

    [PATCH] proper prototype for tosh_smm()
    
    Add a proper prototype for tosh_smm() to include/linux/toshiba.h
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cd792aa896f281a224870eb5f2ee5b24682910a5
Author: Woody Suwalski <woodys@xandros.com>
Date:   Mon Feb 12 00:55:00 2007 -0800

    [PATCH] cyber2010 framebuffer on ARM Netwinder fix
    
    The Netwinder machines with Cyber2010 crash badly when starting Xserver.
    The workaround is to disable pci burst option for this revision of video
    chip.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Woody Suwalski <woodys@xandros.com>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3a0991029b577125ac5b3eedbe366320c581d8d6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:54:59 2007 -0800

    [PATCH] remove bogus con_is_present() prototypes
    
    Although gcc seems to accept "extern" prototypes after it has seen the
    "static inline" function, that's not really correct.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fef459028bd842dde21bf55f83d6399b963f9911
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:58 2007 -0800

    [PATCH] tgafb: Fix the PCI ID table
    
    The end marker is missing from the driver's PCI ID table.  This set of
    changes adds the marker, switches to using PCI_DEVICE() and records the
    table for the use in a module.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a524d946bdced73c5fbe60170fb33611491c4211
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:57 2007 -0800

    [PATCH] tgafb: sync-on-green support fixes
    
    This sets up the deep register of the TGA ASIC as well as the blank pedestal
    of the Bt463 RAMDAC correctly for the sync-on-green mode.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1b2f2fe8ac0273ae9a9b480b799ce62d832168cb
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:56 2007 -0800

    [PATCH] tgafb: module support fixes
    
    This is a set of clean-ups for the module support in the driver -- __devinit
    and __devexit classifiers are now specified correctly, initialization
    functions are marked static and a few unnecessary #ifdefs are removed.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c7488ce38121fc92aee847c51ac74dced1d48c3a
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:55 2007 -0800

    [PATCH] tgafb: fix the mode register setting
    
    There is no need to set the GE bit (Win32 compatibility) in the mode register;
    it shall get cleared with the next subsequent update to the register anyway.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit be6011831c74d5db251b5f9746d259a5f59e71cf
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:54 2007 -0800

    [PATCH] tgafb: support the DirectColor visual
    
     The 32-plane variations of the TGA use the Bt463 RAMDAC and are therefore
    DirectColor rather than TrueColor adapters.  This is a set of changes to
    implement the necessary bits to support this model.  A couple of fixes to fix
    accesses to the RAMDAC are included as a side-effect.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 36f71405e63f3d1e4c2a8dd98523820bbca8e078
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:53 2007 -0800

    [PATCH] tgafb: fix copying overlapping areas
    
    The direction of copying in the copyarea functions is selected incorrectly,
    resulting in corruption.  This is a fix.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ee9a25e5df81f4392439055c28989dfd4b18d894
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 12 00:54:52 2007 -0800

    [PATCH] tgafb: switch to framebuffer_alloc()
    
    This is a set of changes to update the driver to the framebuffer_alloc() API.
    Included, there is also a fix to a memory leak due to the colour map
    allocation not being freed upon driver's removal.  Aside from the fix there
    are no functional changes.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e019630e78e3482c2386d18cbdc7a4c54f7a809c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:54:50 2007 -0800

    [PATCH] remove broken video drivers
    
    Remove some video drivers that:
    
    - had already been marked as BROKEN in 2.6.0 three years ago and
    - are still marked as BROKEN.
    
    These are the following drivers:
    - FB_CYBER
    - FB_VIRGE
    - FB_RETINAZ3
    - FB_SUN3
    
    Drivers that had been marked as BROKEN for such a long time seem to be
    unlikely to be revived in the forseeable future.
    
    But if anyone wants to ever revive any of these drivers, the code is
    still present in the older kernel releases.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-By: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a268422de8bf1b4c0cb97987b6c329c9f6a3da4b
Author: Ondrej Zajicek <santiago@crfreenet.org>
Date:   Mon Feb 12 00:54:49 2007 -0800

    [PATCH] fbdev driver for S3 Trio/Virge
    
    Add a driver for S3 Trio / S3 Virge.  Driver is tested with most versions
    of S3 Trio and with S3 Virge/DX, on i386.
    
    (akpm: We kind-of have support for this hardware already, but...
    
    virgefb.c
      - amiga/zorro specific,
      - broken (according to Kconfig),
      - uses obsolete/nonexistent interface (struct display_switch)
      - recent Adrian Bunk's patch removes this driver
    
    S3triofb.c
      - ppc/openfirmware specific
      - minimal functionality
      - broken (according to Kconfig),
      - uses obsolete/nonexistent interface (struct display_switch)
    )
    
    Signed-off-by: Ondrej Zajicek <santiago@crfreenet.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 59ae6c6b87711ceb2d1ea5f9e08bb13aee947a29
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:48 2007 -0800

    [PATCH] KVM: Host suspend/resume support
    
    Add the necessary callbacks to suspend and resume a host running kvm.  This is
    just a repeat of the cpu hotplug/unplug work.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 774c47f1d78e373a6bd2964f4e278d1ce26c21cb
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:47 2007 -0800

    [PATCH] KVM: cpu hotplug support
    
    On hotplug, we execute the hardware extension enable sequence.  On unplug, we
    decache any vcpus that last ran on the exiting cpu, and execute the hardware
    extension disable sequence.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8d0be2b3bf4a55606967d7d84e56c52521e94333
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:46 2007 -0800

    [PATCH] KVM: VMX: add vcpu_clear()
    
    Like the inline code it replaces, this function decaches the vmcs from the cpu
    it last executed on.  in addition:
    
     - vcpu_clear() works if the last cpu is also the cpu we're running on
     - it is faster on larger smps by virtue of using smp_call_function_single()
    
    Includes fix from Ingo Molnar.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 133de9021d2988f3fbdad84c2d26484c7a757526
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:44 2007 -0800

    [PATCH] KVM: Add a global list of all virtual machines
    
    This will allow us to iterate over all vcpus and see which cpus they are
    running on.
    
    [akpm@osdl.org: use standard (ugly) initialisers]
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 47e627bc8c9a70392d2049e6af5bd55fae61fe53
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:43 2007 -0800

    [PATCH] hotplug: Allow modules to use the cpu hotplug notifiers even if !CONFIG_HOTPLUG_CPU
    
    The following patchset allows a host with running virtual machines to be
    suspended and, on at least a subset of the machines tested, resumed.  Note
    that this is orthogonal to suspending and resuming an individual guest to a
    file.
    
    A side effect of implementing suspend/resume is that cpu hotplug is now
    supported.  This should please the owners of big iron.
    
    This patch:
    
    KVM wants the cpu hotplug notifications, both for cpu hotplug itself, but more
    commonly for host suspend/resume.
    
    In order to avoid extensive #ifdefs, provide stubs when CONFIG_CPU_HOTPLUG is
    not defined.
    
    In all, we have four cases:
    
    - UP: register and unregister stubbed out
    - SMP+hotplug: full register and unregister
    - SMP, no hotplug, core: register as __init, unregister stubbed
          (cpus are brought up during core initialization)
    - SMP, no hotplug, module: register and unregister stubbed out
          (cpus cannot be brought up during module lifetime)
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1e8ba6fba5050ec11bba90c8622aa2ed95ff711f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Feb 12 00:54:42 2007 -0800

    [PATCH] kvm: fix vcpu freeing bug
    
    vcpu_load() can return NULL and it sometimes does in failure paths (for
    example when the userspace ABI version is too old) - causing a preemption
    count underflow in the ->vcpu_free() later on.  So check for NULL.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8cd133073f9b5cd335c0b2e4740aceb025d50ca9
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:41 2007 -0800

    [PATCH] kvm: Fix mismatch between 32-bit and 64-bit abi
    
    Unfortunately requiring a version bump.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 26bb83a755593a53bd248e20d699b0c813f1e238
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:40 2007 -0800

    [PATCH] kvm: VMX: Reload ds and es even in 64-bit mode
    
    Or 32-bit userspace will get confused.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 54810342f1372afdaf6cb9a6aea0c35df187db12
Author: Dor Laor <dor.laor@qumranet.com>
Date:   Mon Feb 12 00:54:39 2007 -0800

    [PATCH] kvm: Two-way apic tpr synchronization
    
    We report the value of cr8 to userspace on an exit.  Also let userspace change
    cr8 when we re-enter the guest.  The lets 64-bit guest code maintain the tpr
    correctly.
    
    Thanks for Yaniv Kamay for the idea.
    
    Signed-off-by: Dor Laor <dor.laor@qumranet.com>
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d92899a0014aa795c21d3cf726ef5ff7684399f4
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:38 2007 -0800

    [PATCH] kvm: SVM: Hack initial cpu csbase to be consistent with intel
    
    This allows us to run the mmu testsuite on amd.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ac6c2bc592b90c7f140fc87c49e21bc82376e2aa
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:37 2007 -0800

    [PATCH] kvm: Fix mmu going crazy of guest sets cr0.wp == 0
    
    The kvm mmu relies on cr0.wp being set even if the guest does not set it.  The
    vmx code correctly forces cr0.wp at all times, the svm code does not, so it
    can't boot solaris without this patch.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 988ad74ff6107d9a490ee193e41251e27d37c95f
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:36 2007 -0800

    [PATCH] kvm: vmx: handle triple faults by returning EXIT_REASON_SHUTDOWN to userspace
    
    Just like svm.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e119d117a1d16e71876144188c0e0b3ecb8aeede
Author: Avi Kivity <avi@qumranet.com>
Date:   Mon Feb 12 00:54:36 2007 -0800

    [PATCH] kvm: Fix gva_to_gpa()
    
    gva_to_gpa() needs to be updated to the new walk_addr() calling convention,
    otherwise it may oops under some circumstances.
    
    Use the opportunity to remove all the code duplication in gva_to_gpa(), which
    essentially repeats the calculations in walk_addr().
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a0610ddf6be6465049a5da448d7e6c5e821240e6
Author: S.Caglar Onur <caglar@pardus.org.tr>
Date:   Mon Feb 12 00:54:34 2007 -0800

    [PATCH] kvm: Fix asm constraint for lldt instruction
    
    lldt does not accept immediate operands, which "g" allows.
    
    Signed-off-by: S.Caglar Onur <caglar@pardus.org.tr>
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 96958231cea5985e32db2ae1125ec20483e3556b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Feb 12 00:54:33 2007 -0800

    [PATCH] kvm: optimize inline assembly
    
    Forms like "0(%rsp)" generate an instruction with an unnecessary one byte
    displacement under certain circumstances.  replace with the equivalent
    "(%rsp)".
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 54fb996ac15c4014fa4d6b0ec8e42da134204897
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Mon Feb 12 00:54:32 2007 -0800

    [PATCH] ufs2 write: block allocation update
    
    Patch adds ability to work with 64bit metadata, this made by replacing work
    with 32bit pointers by inline functions.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3313e29267414e4e3bf0d3de1caf9cb439b64aaf
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Mon Feb 12 00:54:31 2007 -0800

    [PATCH] ufs2 write: inodes write
    
    This patch adds into write inode path function to write UFS2 inode, and
    modifys allocate inode path to allocate and init additional inode chunks.
    
    Also some cleanups:
    - remove not used parameters in some functions
    - remove i_gen field from ufs_inode_info structure,
    there is i_generation in inode structure with same purposes.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cbcae39fa1cc16c0fb199223f5ec1aea5f4c7b2d
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Mon Feb 12 00:54:30 2007 -0800

    [PATCH] ufs2 write: mount as rw
    
    These series of patches add UFS2 write-support.  UFS2 - is default file system
    for recent versions of FreeBSD.
    
    The main differences from UFS1 from write support point of view
    are:
    1)Not all inodes are allocated during formatation of disk.
    2)All meta-data(pointer to data blocks) are 64bit(in UFS1 they
    are 32bit).
    
    So patch series consist of
    1)make possible mount UFS2 in read-write mode
    2)code to write ufs2 inodes and code to initialize inodes chunks.
    3)work with 64bit meta-data
    
    I made simple testing like create/deleting/writing/reading/truncating, also I
    ran fsx-linux and untar and build kernel on UFS1 and UFS2, after that FreeBSD
    fsck do not find any errors in fs.
    
    This patch makes possible to mount ufs2 "rw", and updates UFS2 documentation:
    remove note about bug(it fixed by reallocate blocks on the fly patch) and add
    me in the list of people who want receive bug reports.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cca97de1184f6000d22b4106d47687b31cca1fa3
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:29 2007 -0800

    [PATCH] ia64: 2048-byte command line
    
    Current implementation allows the kernel to receive up to 255 characters from
    the bootloader.  While the boot protocol allows greater buffers to be sent.
    
    In current environment, the command-line is used in order to specify many
    values, including suspend/resume, module arguments, splash, initramfs and
    more.
    
    255 characters are not enough anymore.
    
    After edd issue was fixed, and dynammic kernel command-line patch was
    accepted, we can extend the COMMAND_LINE_SIZE without runtime memory
    requirements.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bbd4bb9aa7635063284ffb3470ab24c36c14d935
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:28 2007 -0800

    [PATCH] x86_64: 2048-byte command line
    
    Current implementation allows the kernel to receive up to 255 characters from
    the bootloader.  While the boot protocol allows greater buffers to be sent.
    
    In current environment, the command-line is used in order to specify many
    values, including suspend/resume, module arguments, splash, initramfs and
    more.
    
    255 characters are not enough anymore.
    
    After edd issue was fixed, and dynammic kernel command-line patch was
    accepted, we can extend the COMMAND_LINE_SIZE without runtime memory
    requirements.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7bf9f974fbdc16769db3d48f7c31f932b233bcfb
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:27 2007 -0800

    [PATCH] i386: 2048-byte command line
    
    Current implementation allows the kernel to receive up to 255 characters from
    the bootloader.  While the boot protocol allows greater buffers to be sent.
    
    In current environment, the command-line is used in order to specify many
    values, including suspend/resume, module arguments, splash, initramfs and
    more.
    
    255 characters are not enough anymore.
    
    After edd issue was fixed, and dynammic kernel command-line patch was
    accepted, we can extend the COMMAND_LINE_SIZE without runtime memory
    requirements.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7a3a06d0e158fc82a6bf13e18439285c7791d2b8
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:26 2007 -0800

    [PATCH] Dynamic kernel command-line: fixups
    
    Remove in-source externs, linux/init.h is included in all cases.
    This is a fixups for "Dynamic kernel command-line" patch.
    
    It also includes some uml __init fixups so that we can __initdata also its
    command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d3e9cceafd9c886561f602bcdcb03efd96e187ab
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:25 2007 -0800

    [PATCH] Dynamic kernel command-line: xtensa
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit adf48856db47f4f0f661f2f4b7004890408135cf
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:25 2007 -0800

    [PATCH] Dynamic kernel command-line: x86_64
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 712f77b5659208b43c925e1b28c4f44891c4d94f
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:24 2007 -0800

    [PATCH] Dynamic kernel command-line: v850
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 19bf7e7a414711dec0058556feda778105798f99
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:23 2007 -0800

    [PATCH] Dynamic kernel command-line: um
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 383464c0fb067f5beb96e28ff376d2280808dd54
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:22 2007 -0800

    [PATCH] Dynamic kernel command-line: sparc64
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 08e7ca11eed86acde42ee97b9392faa10f9c70d1
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:21 2007 -0800

    [PATCH] Dynamic kernel command-line: sparc
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3e42ff6c65cf40caa1f6ca51a4c3d552803e0957
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:20 2007 -0800

    [PATCH] Dynamic kernel command-line: sh64
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 53c82622c2db808c015953336faecefc0ebf29bc
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:19 2007 -0800

    [PATCH] Dynamic kernel command-line: sh
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e06b1a3513bdd897e3c37c98ed7b16fa237dcb63
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:19 2007 -0800

    [PATCH] Dynamic kernel command-line: s390
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bf71cecbe4282fbb8ec035a7199fa4aca64db54c
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:18 2007 -0800

    [PATCH] Dynamic kernel command-line: ppc
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b8757b21f7628c57cb20e55be324fdef283a56e9
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:17 2007 -0800

    [PATCH] Dynamic kernel command-line: powerpc
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 668f9931c812224ab2a6d57cdf2f0ec3865b68d2
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:16 2007 -0800

    [PATCH] Dynamic kernel command-line: parisc
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 43cd34645d3bf35cbaa68f28b85d12d0b9e08ab9
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:15 2007 -0800

    [PATCH] Dynamic kernel command-line: mips
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f2a09e19cae45b7dfa4b72d70182b5bc9afa2ddb
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:14 2007 -0800

    [PATCH] Dynamic kernel command-line: m68knommu
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 187959f31e92cde16b274f0b61dfaca3a8b14089
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:14 2007 -0800

    [PATCH] Dynamic kernel command-line: m68k
    
    Rename saved_command_line into boot_command_line.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3561794d80843588ed8b47fffb20e2dcd9c40ff3
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:13 2007 -0800

    [PATCH] Dynamic kernel command-line: m32r
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a8d91b8477aa433ee0131b031d782411976e1726
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:12 2007 -0800

    [PATCH] Dynamic kernel command-line: ia64
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    [akpm@osdl.org: move some declarations to the right place]
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4e498b66104af914ef04d6e7fbbbc13a4f7c936e
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:11 2007 -0800

    [PATCH] Dynamic kernel command-line: i386
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ff625904cd4e41d70bc01e6683cbb58f312f709
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:10 2007 -0800

    [PATCH] Dynamic kernel command-line: h8300
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9c00f7613249b3b42782a226308353a4033c11c3
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:09 2007 -0800

    [PATCH] Dynamic kernel command-line: frv
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 87e1f9c6dcb4829fd8a68a3af87098cee8ef955b
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:09 2007 -0800

    [PATCH] Dynamic kernel command-line: cris
    
    1. Rename saved_command_line into boot_command_line.
    2. Set cris_command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bf4352c0fc82e6dadfa7eea506c19dea0106baac
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:08 2007 -0800

    [PATCH] Dynamic kernel command-line: avr32
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Acked-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 64d5a70f956071f8434f403d44835a4895abb78e
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:07 2007 -0800

    [PATCH] Dynamic kernel command-line: arm26
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Ian Molton <spyro@f2s.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cd81899a7d9e77ffd5280b10d0413fb241b18388
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:06 2007 -0800

    [PATCH] Dynamic kernel command-line: arm
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3c253ca0f0930b767a5d6ac0c1b3c6f5619e28f9
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:54:05 2007 -0800

    [PATCH] Dynamic kernel command-line: alpha
    
    1. Rename saved_command_line into boot_command_line.
    2. Set command_line as __initdata.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 30d7e0d466b3ac0b5ef77e4062bf9385f0d72270
Author: Alon Bar-Lev <alon.barlev@gmail.com>
Date:   Mon Feb 12 00:53:52 2007 -0800

    [PATCH] Dynamic kernel command-line: common
    
    Current implementation stores a static command-line buffer allocated to
    COMMAND_LINE_SIZE size.  Most architectures stores two copies of this buffer,
    one for future reference and one for parameter parsing.
    
    Current kernel command-line size for most architecture is much too small for
    module parameters, video settings, initramfs paramters and much more.  The
    problem is that setting COMMAND_LINE_SIZE to a grater value, allocates static
    buffers.
    
    In order to allow a greater command-line size, these buffers should be
    dynamically allocated or marked as init disposable buffers, so unused memory
    can be released.
    
    This patch renames the static saved_command_line variable into
    boot_command_line adding __initdata attribute, so that it can be disposed
    after initialization.  This rename is required so applications that use
    saved_command_line will not be affected by this change.
    
    It reintroduces saved_command_line as dynamically allocated buffer to match
    the data in boot_command_line.
    
    It also mark secondary command-line buffer as __initdata, and copies it to
    dynamically allocated static_command_line buffer components may hold reference
    to it after initialization.
    
    This patch is for linux-2.6.20-rc4-mm1 and is divided to target each
    architecture.  I could not check this in any architecture so please forgive me
    if I got it wrong.
    
    The per-architecture modification is very simple, use boot_command_line in
    place of saved_command_line.  The common code is the change into dynamic
    command-line.
    
    This patch:
    
    1. Rename saved_command_line into boot_command_line, mark as init
       disposable.
    
    2. Add dynamic allocated saved_command_line.
    
    3. Add dynamic allocated static_command_line.
    
    4. During startup copy: boot_command_line into saved_command_line.  arch
       command_line into static_command_line.
    
    5. Parse static_command_line and not arch command_line, so arch
       command_line may be freed.
    
    Signed-off-by: Alon Bar-Lev <alon.barlev@gmail.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Ian Molton <spyro@f2s.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Cc: David Howells <dhowells@redhat.com>
    Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Hirokazu Takata <takata@linux-m32r.org>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp>
    Cc: Richard Curnow <rc@rc0.org.uk>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp>
    Cc: Chris Zankel <chris@zankel.net>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ff91691bccdb741efb2df0489058a4961fa79598
Author: Nick Piggin <npiggin@suse.de>
Date:   Mon Feb 12 00:53:51 2007 -0800

    [PATCH] sched: avoid div in rebalance_tick
    
    Avoid expensive integer divide 3 times per CPU per tick.
    
    A userspace test of this loop went from 26ns, down to 19ns on a G5; and
    from 123ns down to 28ns on a P3.
    
    (Also avoid a variable bit shift, as suggested by Alan. The effect
    of this wasn't noticable on the CPUs I tested with).
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0a9ac38246b11892ad20a1eb9deb67adf8c0db2f
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:50 2007 -0800

    [PATCH] eCryptfs: add flush_dcache_page() calls
    
    Call flush_dcache_page() after modifying a pagecache by hand.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e2bd99ec5c0e20ed6aeb079fa8f975c2dcd78a2c
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:49 2007 -0800

    [PATCH] eCryptfs: open-code flag checking and manipulation
    
    Open-code flag checking and manipulation.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Trevor Highland <tshighla@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9d8b8ce5561890464c54645cdea4d6b157159fec
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:48 2007 -0800

    [PATCH] eCryptfs: convert kmap() to kmap_atomic()
    
    Replace kmap() with kmap_atomic().  Reduce the amount of time that mappings
    are held.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Trevor Highland <tshighla@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 70456600f42f85cfcbdd9d7a6029c03b6f9c5d1e
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:48 2007 -0800

    [PATCH] eCryptfs: convert f_op->write() to vfs_write()
    
    sys_write() takes a local copy of f_pos and writes that back
    into the struct file. It does this so that two concurrent write()
    callers don't make a mess of f_pos, and of the file contents.
    
    ecryptfs should be calling vfs_write().  That way we also get the fsnotify
    notifications, which ecryptfs presently appears to have subverted.
    
    Convert direct calls to f_op->write() into calls to vfs_write().
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e77a56ddceeec87575a13a60fc1a394af6a1f4bc
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:47 2007 -0800

    [PATCH] eCryptfs: Encrypted passthrough
    
    Provide an option to provide a view of the encrypted files such that the
    metadata is always in the header of the files, regardless of whether the
    metadata is actually in the header or in the extended attribute.  This mode of
    operation is useful for applications like incremental backup utilities that do
    not preserve the extended attributes when directly accessing the lower files.
    
    With this option enabled, the files under the eCryptfs mount point will be
    read-only.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dd2a3b7ad98f8482cae481cad89dfed5eee48365
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:46 2007 -0800

    [PATCH] eCryptfs: Generalize metadata read/write
    
    Generalize the metadata reading and writing mechanisms, with two targets for
    now: metadata in file header and metadata in the user.ecryptfs xattr of the
    lower file.
    
    [akpm@osdl.org: printk warning fix]
    [bunk@stusta.de: make some needlessly global code static]
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 17398957aa0a05ef62535060b41d103590dcc533
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:45 2007 -0800

    [PATCH] eCryptfs: xattr flags and mount options
    
    This patch set introduces the ability to store cryptographic metadata into an
    lower file extended attribute rather than the lower file header region.
    
    This patch set implements two new mount options:
    
    ecryptfs_xattr_metadata
     - When set, newly created files will have their cryptographic
       metadata stored in the extended attribute region of the file rather
       than the header.
    
       When storing the data in the file header, there is a minimum of 8KB
       reserved for the header information for each file, making each file at
       least 12KB in size.  This can take up a lot of extra disk space if the user
       creates a lot of small files.  By storing the data in the extended
       attribute, each file will only occupy at least of 4KB of space.
    
       As the eCryptfs metadata set becomes larger with new features such as
       multi-key associations, most popular filesystems will not be able to store
       all of the information in the xattr region in some cases due to space
       constraints.  However, the majority of users will only ever associate one
       key per file, so most users will be okay with storing their data in the
       xattr region.
    
       This option should be used with caution.  I want to emphasize that the
       xattr must be maintained under all circumstances, or the file will be
       rendered permanently unrecoverable.  The last thing I want is for a user to
       forget to set an xattr flag in a backup utility, only to later discover
       that their backups are worthless.
    
    ecryptfs_encrypted_view
     - When set, this option causes eCryptfs to present applications a
       view of encrypted files as if the cryptographic metadata were
       stored in the file header, whether the metadata is actually stored
       in the header or in the extended attributes.
    
       No matter what eCryptfs winds up doing in the lower filesystem, I want
       to preserve a baseline format compatibility for the encrypted files.  As of
       right now, the metadata may be in the file header or in an xattr.  There is
       no reason why the metadata could not be put in a separate file in future
       versions.
    
       Without the compatibility mode, backup utilities would have to know to
       back up the metadata file along with the files.  The semantics of eCryptfs
       have always been that the lower files are self-contained units of encrypted
       data, and the only additional information required to decrypt any given
       eCryptfs file is the key.  That is what has always been emphasized about
       eCryptfs lower files, and that is what users expect.  Providing the
       encrypted view option will provide a way to userspace applications wherein
       they can always get to the same old familiar eCryptfs encrypted files,
       regardless of what eCryptfs winds up doing with the metadata behind the
       scenes.
    
    This patch:
    
    Add extended attribute support to version bit vector, flags to indicate when
    xattr or encrypted view modes are enabled, and support for the new mount
    options.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dddfa461fc8951f9b5f951c13565b6cac678635a
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:44 2007 -0800

    [PATCH] eCryptfs: Public key; packet management
    
    Public key support code.  This reads and writes packets in the header that
    contain public key encrypted file keys.  It calls the messaging code in the
    previous patch to send and receive encryption and decryption request
    packets from the userspace daemon.
    
    [akpm@osdl.org: cleab fix]
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 88b4a07e6610f4c93b08b0bb103318218db1e9f6
Author: Michael Halcrow <mhalcrow@us.ibm.com>
Date:   Mon Feb 12 00:53:43 2007 -0800

    [PATCH] eCryptfs: Public key transport mechanism
    
    This is the transport code for public key functionality in eCryptfs.  It
    manages encryption/decryption request queues with a transport mechanism.
    Currently, netlink is the only implemented transport.
    
    Each inode has a unique File Encryption Key (FEK).  Under passphrase, a File
    Encryption Key Encryption Key (FEKEK) is generated from a salt/passphrase
    combo on mount.  This FEKEK encrypts each FEK and writes it into the header of
    each file using the packet format specified in RFC 2440.  This is all
    symmetric key encryption, so it can all be done via the kernel crypto API.
    
    These new patches introduce public key encryption of the FEK.  There is no
    asymmetric key encryption support in the kernel crypto API, so eCryptfs pushes
    the FEK encryption and decryption out to a userspace daemon.  After
    considering our requirements and determining the complexity of using various
    transport mechanisms, we settled on netlink for this communication.
    
    eCryptfs stores authentication tokens into the kernel keyring.  These tokens
    correlate with individual keys.  For passphrase mode of operation, the
    authentication token contains the symmetric FEKEK.  For public key, the
    authentication token contains a PKI type and an opaque data blob managed by
    individual PKI modules in userspace.
    
    Each user who opens a file under an eCryptfs partition mounted in public key
    mode must be running a daemon.  That daemon has the user's credentials and has
    access to all of the keys to which the user should have access.  The daemon,
    when started, initializes the pluggable PKI modules available on the system
    and registers itself with the eCryptfs kernel module.  Userspace utilities
    register public key authentication tokens into the user session keyring.
    These authentication tokens correlate key signatures with PKI modules and PKI
    blobs.  The PKI blobs contain PKI-specific information necessary for the PKI
    module to carry out asymmetric key encryption and decryption.
    
    When the eCryptfs module parses the header of an existing file and finds a Tag
    1 (Public Key) packet (see RFC 2440), it reads in the public key identifier
    (signature).  The asymmetrically encrypted FEK is in the Tag 1 packet;
    eCryptfs puts together a decrypt request packet containing the signature and
    the encrypted FEK, then it passes it to the daemon registered for the
    current->euid via a netlink unicast to the PID of the daemon, which was
    registered at the time the daemon was started by the user.
    
    The daemon actually just makes calls to libecryptfs, which implements request
    packet parsing and manages PKI modules.  libecryptfs grabs the public key
    authentication token for the given signature from the user session keyring.
    This auth tok tells libecryptfs which PKI module should receive the request.
    libecryptfs then makes a decrypt() call to the PKI module, and it passes along
    the PKI block from the auth tok.  The PKI uses the blob to figure out how it
    should decrypt the data passed to it; it performs the decryption and passes
    the decrypted data back to libecryptfs.  libecryptfs then puts together a
    reply packet with the decrypted FEK and passes that back to the eCryptfs
    module.
    
    The eCryptfs module manages these request callouts to userspace code via
    message context structs.  The module maintains an array of message context
    structs and places the elements of the array on two lists: a free and an
    allocated list.  When eCryptfs wants to make a request, it moves a msg ctx
    from the free list to the allocated list, sets its state to pending, and fires
    off the message to the user's registered daemon.
    
    When eCryptfs receives a netlink message (via the callback), it correlates the
    msg ctx struct in the alloc list with the data in the message itself.  The
    msg->index contains the offset of the array of msg ctx structs.  It verifies
    that the registered daemon PID is the same as the PID of the process that sent
    the message.  It also validates a sequence number between the received packet
    and the msg ctx.  Then, it copies the contents of the message (the reply
    packet) into the msg ctx struct, sets the state in the msg ctx to done, and
    wakes up the process that was sleeping while waiting for the reply.
    
    The sleeping process was whatever was performing the sys_open().  This process
    originally called ecryptfs_send_message(); it is now in
    ecryptfs_wait_for_response().  When it wakes up and sees that the msg ctx
    state was set to done, it returns a pointer to the message contents (the reply
    packet) and returns.  If all went well, this packet contains the decrypted
    FEK, which is then copied into the crypt_stat struct, and life continues as
    normal.
    
    The case for creation of a new file is very similar, only instead of a decrypt
    request, eCryptfs sends out an encrypt request.
    
    > - We have a great clod of key mangement code in-kernel.  Why is that
    >   not suitable (or growable) for public key management?
    
    eCryptfs uses Howells' keyring to store persistent key data and PKI state
    information.  It defers public key cryptographic transformations to userspace
    code.  The userspace data manipulation request really is orthogonal to key
    management in and of itself.  What eCryptfs basically needs is a secure way to
    communicate with a particular daemon for a particular task doing a syscall,
    based on the UID.  Nothing running under another UID should be able to access
    that channel of communication.
    
    > - Is it appropriate that new infrastructure for public key
    > management be private to a particular fs?
    
    The messaging.c file contains a lot of code that, perhaps, could be extracted
    into a separate kernel service.  In essence, this would be a sort of
    request/reply mechanism that would involve a userspace daemon.  I am not aware
    of anything that does quite what eCryptfs does, so I was not aware of any
    existing tools to do just what we wanted.
    
    >   What happens if one of these daemons exits without sending a quit
    >   message?
    
    There is a stale uid<->pid association in the hash table for that user.  When
    the user registers a new daemon, eCryptfs cleans up the old association and
    generates a new one.  See ecryptfs_process_helo().
    
    > - _why_ does it use netlink?
    
    Netlink provides the transport mechanism that would minimize the complexity of
    the implementation, given that we can have multiple daemons (one per user).  I
    explored the possibility of using relayfs, but that would involve having to
    introduce control channels and a protocol for creating and tearing down
    channels for the daemons.  We do not have to worry about any of that with
    netlink.
    
    Signed-off-by: Michael Halcrow <mhalcrow@us.ibm.com>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b5d5dfbd59577aed72263f22e28d3eaf98e1c6e5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:53:40 2007 -0800

    [PATCH] include/linux/nfsd/const.h: remove NFS_SUPER_MAGIC
    
    NFS_SUPER_MAGIC is already defined in include/linux/magic.h
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 77f1f67a1a56defa210c3d8857f3e5eee3990a99
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:39 2007 -0800

    [PATCH] knfsd: SUNRPC: fix up svc_create_socket() to take a sockaddr struct + length
    
    Replace existing svc_create_socket() API to allow callers to pass addresses
    larger than a sockaddr_in.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 95756482c9bfa375418c5a32455494a3042f65cd
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:38 2007 -0800

    [PATCH] knfsd: SUNRPC: support IPv6 addresses in RPC server's UDP receive path
    
    Add support for IPv6 addresses in the RPC server's UDP receive path.
    
    [akpm@linux-foundation.org: cleanups]
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cdd88b9f3ed5013de0f1085e0e2f9123c798609d
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Feb 12 00:53:38 2007 -0800

    [PATCH] knfsd: SUNRPC: Support IPv6 addresses in svc_tcp_accept
    
    Modify svc_tcp_accept to support connecting on IPv6 sockets.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bcdb81ae29091f6a66369aabfd8324e4a53d05dc
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:37 2007 -0800

    [PATCH] knfsd: SUNRPC: add a "generic" function to see if the peer uses a secure port
    
    The only reason svcsock.c looks at a sockaddr's port is to check whether the
    remote peer is connecting from a privileged port.  Refactor this check to hide
    processing that is specific to address format.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b92503b25c3f794cff5f96626ea3ecba8d10d254
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:36 2007 -0800

    [PATCH] knfsd: SUNRPC: teach svc_sendto() to deal with IPv6 addresses
    
    CMSG_DATA comes in different sizes, depending on address family.
    
    [akpm@linux-foundation.org: remove unneeded do/while (0)]
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 73df0dbaff8d0853387e140f52b6250c486b18a1
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:35 2007 -0800

    [PATCH] knfsd: SUNRPC: Make rq_daddr field address-version independent
    
    The rq_daddr field must support larger addresses.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 27459f0940e16c68e080f5fc7e85aa9eb3f74528
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:34 2007 -0800

    [PATCH] knfsd: SUNRPC: Provide room in svc_rqst for larger addresses
    
    Expand the rq_addr field to allow it to contain larger addresses.
    
    Specifically, we replace a 'sockaddr_in' with a 'sockaddr_storage', then
    everywhere the 'sockaddr_in' was referenced, we use instead an accessor
    function (svc_addr_in) which safely casts the _storage to _in.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2442222283918c2d1c20ae651d95fe168757938b
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:33 2007 -0800

    [PATCH] knfsd: SUNRPC: Use sockaddr_storage to store address in svc_deferred_req
    
    Sockaddr_storage will allow us to store arbitrary socket addresses in the
    svc_deferred_req struct.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ad06e4bd62351bc569cca0f25d68c58dbd298146
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:32 2007 -0800

    [PATCH] knfsd: SUNRPC: Add a function to format the address in an svc_rqst for printing
    
    There are loads of places where the RPC server assumes that the rq_addr fields
    contains an IPv4 address.  Top among these are error and debugging messages
    that display the server's IP address.
    
    Let's refactor the address printing into a separate function that's smart
    enough to figure out the difference between IPv4 and IPv6 addresses.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ba951053f07187f6e77be664a4b6f8bf0ba7ae4
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:31 2007 -0800

    [PATCH] knfsd: SUNRPC: Don't set msg_name and msg_namelen when calling sock_recvmsg
    
    Clean-up: msg_name and msg_namelen are not used by sock_recvmsg, so don't
    bother to set them in svc_recvfrom.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 067d7817310569f7b76ca08c4d071ca95ad4c1d3
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:30 2007 -0800

    [PATCH] knfsd: SUNRPC: Cache remote peer's address in svc_sock
    
    The remote peer's address won't change after the socket has been accepted.  We
    don't need to call ->getname on every incoming request.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e79eff1f90826b207b1152fc87aa97fa74fb7f9c
Author: Neil Brown <neilb@suse.de>
Date:   Mon Feb 12 00:53:30 2007 -0800

    [PATCH] knfsd: SUNRPC: aplit svc_sock_enqueue out of svc_setup_socket
    
    Rather than calling svc_sock_enqueue at the end of svc_setup_socket, we now
    call it (via svc_sock_recieved) after calling svc_setup_socket at each call
    site.
    
    We do this because a subsequent patch will insert some code between the two
    calls at one call site.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 482fb94e1b0c2efe8258334aa2a68d4f4a91de9c
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:29 2007 -0800

    [PATCH] knfsd: SUNRPC: allow creating an RPC service without registering with portmapper
    
    Sometimes we need to create an RPC service but not register it with the local
    portmapper.  NFSv4 delegation callback, for example.
    
    Change the svc_makesock() API to allow optionally creating temporary or
    permanent sockets, optionally registering with the local portmapper, and make
    it return the ephemeral port of the new socket.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6b174337e5126de834a971d3edc3681bbfa45e2c
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Mon Feb 12 00:53:28 2007 -0800

    [PATCH] knfsd: SUNRPC: update internal API: separate pmap register and temp sockets
    
    Currently in the RPC server, registering with the local portmapper and
    creating "permanent" sockets are tied together.  Expand the internal APIs to
    allow these two socket characteristics to be separately specified.
    
    This will be externalized in the next patch.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Cc: Aurelien Charbon <aurelien.charbon@ext.bull.net>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f85aaeba458fda1de199a73566c641516e9a935d
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 00:53:27 2007 -0800

    [PATCH] isdn-eicon: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 053b47ff249b9e0a634dae807f81465205e7c228
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Feb 12 00:53:26 2007 -0800

    [PATCH] Workaround CAPI subsystem locking issue
    
    I think the following patch should go into the kernel, until the ISDN/CAPI
    guys create the real fix for this issue.
    
    The issue is a concurrency issue with some internal CAPI data structure
    which can crash the kernel.
    
    On my FritzCard DSL with the AVM driver it crashes about once a day without
    this workaround patch.  With this workaround patch it's rock-stable (at
    least on UP, but I don't see why this shouldn't work on SMP as well.  But
    maybe I'm missing something.)
    
    This workaround is kind of a sledgehammer which inserts a global lock to
    wrap around all the critical sections.  Of course, this is a scalability
    issue, if you have many ISDN/CAPI cards.  But it prevents a crash.  So I
    vote for this fix to get merged, until people come up with a better
    solution.  Better have a stable kernel that's less scalable, than a
    crashing and useless kernel.
    
    This bug is in the kernel since 2.6.15 (at least).
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Kai Germaschewski <kai.germaschewski@gmx.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a871fe858c5437ff8798fbaef52b6a88110b64a1
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 12 00:53:25 2007 -0800

    [PATCH] drivers/isdn/hisax/: Convert to generic boolean-values
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 986c4bb8c4a7bf248378954782553334a003d80a
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 12 00:53:24 2007 -0800

    [PATCH] drivers/isdn/hardware/eicon/: convert to generic boolean-values
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2a8081f99cd2b1f356c1d07c75f5c386c2e54efc
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:53:23 2007 -0800

    [PATCH] ISDN: Rename special macro CONFIG_HISAX_HFC4S8S_PCIMEM
    
    Rename the macro CONFIG_HISAX_HFC4S8S_PCIMEM to simply HISAX_HFC4S8S_PCIMEM so
    that it no longer resembles a user-settable kernel config macro.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f0d8737bf741181aa6a452cffe3b9c074afa0cc1
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:53:22 2007 -0800

    [PATCH] ISDN: Remove defunct test emulator
    
    Based on advice from K.  Keil, get rid of remaining traces of defunct test
    emulator for HISAX.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3c07b9615ee123113de2e881143eb74442d3bf5
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:53:21 2007 -0800

    [PATCH] ISDN: Rename debug option CONFIG_SERIAL_NOPAUSE_IO
    
    Based on advice from K.  Keil, rename the special debug option
    CONFIG_SERIAL_NOPAUSE_IO to ELSA_SERIAL_NOPAUSE_IO so it no longer resembles a
    user-selectable kernel config option.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 26fb5c5810afa0d8209ceff7cb267398be53829d
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:53:20 2007 -0800

    [PATCH] ISDN: Rename some debugging macros to not resemble CONFIG options
    
    Rename some of the debugging macros for ISDN AVM so that they don't resemble
    kernel config settings, as they're primarily for author debugging instead.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3f2769e6e896a5d734593e4842014cab220d027
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:53:19 2007 -0800

    [PATCH] ISDN: Fix typo "CONFIG_HISAX_QUADRO" -> "CONFIG_HISAX_SCT_QUADRO".
    
    Replace misspelled CONFIG_HISAX_QUADRO with CONFIG_HISAX_SCT_QUADRO.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fd863db937c0d30679d4bd5329653adb46b66627
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 00:53:19 2007 -0800

    [PATCH] isdn/capi: use ARRAY_SIZE when appropriate
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fc238b3791447b93c69cd50a99dfcaad6162afba
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:53:18 2007 -0800

    [PATCH] drivers/isdn/sc/: proper prototypes
    
    Add proper prototypes in a header file for global code under
    drivers/isdn/sc/.
    
    Since the GNU C compiler is now able do tell us that caller and callee
    disagreed about the number of arguments of setup_buffers(), this patch
    also fixes this bug.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b19a8f0472cf2fc401c47f585fcd42e770124e06
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:53:17 2007 -0800

    [PATCH] drivers/isdn/hisax/: proper prototypes
    
    - add functions prototypes for some global functions to header files
    
    - remove unneeded "extern"s from some function prototypes
    
    You might note that this patch results in a new warning - that's due to the
    fact that with a proper prototype gcc is able to discover a broken
    work_struct conversion.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 010046d0c805ac3bfab1740f4a056af70b84ea46
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 12 00:53:16 2007 -0800

    [PATCH] drivers/isdn/pcbit/: proper prototypes
    
    Add correct prototypes in header files for global functions and variables.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 390414badebe45a2f556a04ece1fd99191aa6397
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Mon Feb 12 00:53:15 2007 -0800

    [PATCH] S3C2410 GPIO wrappers
    
    Arch-neutral GPIO calls for S3C24xx.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 920fe7a8d0aba9782d1f924a02ece146acbf6686
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Mon Feb 12 00:53:14 2007 -0800

    [PATCH] SA1100 GPIO wrappers
    
    Arch-neutral GPIO calls for SA-1100.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8a898f1c366c858f8dbcb667c1cfcc282b727795
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Mon Feb 12 00:53:14 2007 -0800

    [PATCH] PXA GPIO wrappers
    
    Arch-neutral GPIO calls for PXA.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a31c4eea2127ee52b5c7c1befada4664963ad030
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:53:13 2007 -0800

    [PATCH] AT91 GPIO wrappers
    
    This is a first cut at making the AT91 code use the generic GPIO calls.
    
    Note that the original AT91 GPIO calls merged the "mux pin as GPIO" and "set
    GPIO direction" functionality into one API call, contrary to what's specified
    as a cross-platform portable model.  So this involved a few non-inlinable
    functions.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3c729f1ecd23b86a2d6b211d646f57f9da8dfeb1
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:53:12 2007 -0800

    [PATCH] OMAP GPIO wrappers
    
    This teaches OMAP how to implement the cross-platform GPIO interfaces.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4c20386c8d0719b42503efe65abe47ad3fb3d711
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:53:11 2007 -0800

    [PATCH] GPIO core
    
    This defines a simple and minimalist programming interface for GPIO APIs:
    
      - Documentation/gpio.txt ... describes things (read it)
    
      - include/asm-arm/gpio.h ... defines the ARM hook, which just punts
        to <asm/arch/gpio.h> for any implementation
    
      - include/asm-generic/gpio.h ... implement "can sleep" variants as calling
        the normal ones, for systems that don't handle i2c expanders.
    
    The immediate need for such a cross-architecture API convention is to support
    drivers that work the same on AT91 ARM and AVR32 AP7000 chips, which embed many
    of the same controllers but have different CPUs.  However, several other users
    have been reported, including a driver for a hardware watchdog chip and some
    handhelds.org multi-CPU button drivers.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9794f33ddedd878dd92fcf8b4834391840366919
Author: eric wollesen <ericw@xmtp.net>
Date:   Mon Feb 12 00:53:08 2007 -0800

    [PATCH] EDAC: Add Fully-Buffered DIMM APIs to core
    
    Eric Wollesen ported the Bluesmoke Memory Controller driver for the Intel
    5000X/V/P (Blackford/Greencreek) chipset to the in kernel EDAC model.
    
    This patch incorporates those required changes to the edac_mc.c and edac_mc.h
    core files by added new Fully Buffered DIMM interface to the EDAC Core module.
    
    Signed-off-by: eric wollesen <ericw@xmtp.net>
    Signed-off-by: doug thompson <norsk5@xmission.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4f423ddf56e5ecb1fb2eac83b8e228e3d0aae0f6
Author: Frithiof Jensen <frithiof.jensen@ericson.com>
Date:   Mon Feb 12 00:53:07 2007 -0800

    [PATCH] EDAC: Add memory scrubbing controls API to core
    
    This is an attempt of providing an interface for memory scrubbing control in
    EDAC.
    
    This patch modifies the EDAC Core to provide the Interface for memory
    controller modules to implment.
    
    The following things are still outstanding:
    
     - K8 is the first implemenation,
    
       The patch provide a method of configuring the K8 hardware memory scrubber
       via the 'mcX' sysfs directory.  There should be some fallback to a generic
       scrubber implemented in software if the hardware does not support
       scrubbing.
    
       Or .. the scrubbing sysfs entry should not be visible at all.
    
     - Only works with SDRAM, not cache,
    
       The K8 can scrub cache and l2cache also - but I think this is not so
       useful as the cache is busy all the time (one hopes).
    
       One would also expect that cache scrubbing requires hardware support.
    
     - Error Handling,
    
       I would like that errors are returned to the user in "terms of file
       system".
    
     - Presentation,
    
       I chose Bandwidth in Bytes/Second as a representation of the scrubbing
       rate for the following reasons:
    
       I like that the sysfs entries are sort-of textual, related to something
       that makes sense instead of magical values that must be looked up.
    
       "My People" wants "% main memory scrubbed per hour" others prefer "%
       memory bandwidth used" as representation, "bandwith used" makes it easy to
       calculate both versions in one-liner scripts.
    
       If one later wants to scrub cache, the scaling becomes wierd for K8
       changing from "blocks of 64 byte memory" to "blocks of 64 cache lines" to
       "blocks of 64 bit".  Using "bandwidth used" makes sense in all three cases,
       (I.M.O.  anyway ;-).
    
     - Discovery,
    
       There is no way to discover the possible settings and what they do
       without reading the code and the documentation.
    
       *I* do not know how to make that work in a practical way.
    
     - Bugs(??),
    
       other tools can set invalid values in the memory scrub control register,
       those will read back as '-1', requiring the user to reset the scrub rate.
       This is how *I* think it should be.
    
     - Afflicting other areas of code,
    
       I made changes to edac_mc.c and edac_mc.h which will show up globally -
       this is not nice, it would be better that the memory scrubbing fuctionality
       and interface could be entirely contained within the memory controller it
       applies to.
    
    Frithiof Jensen
    
    edac_mc.c and its .h file is a CORE helper module for EDAC
    driver modules. This provides the abstraction for device specific
    drivers. It is fine to modify this CORE to provide help for
    new features of the the drivers
    
    doug thompson
    
    Signed-off-by: Frithiof Jensen <frithiof.jensen@ericson.com>
    Signed-off-by: doug thompson <norsk5@xmission.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 84db003f249ddbcde1666376b4e3bbe9ee2c7c0c
Author: Mike Chan <mikechan@google.com>
Date:   Mon Feb 12 00:53:06 2007 -0800

    [PATCH] EDAC: Fix in e752x mc driver
    
    This fix/change returns the offset into the page for the ce/ue error, instead
    of just 0.  The e752x dram controller reads 34:6 of the linear address with
    the error.
    
    Signed-off-by: Mike Chan <mikechan@google.com>
    Signed-off-by: doug thompson <norsk5@xmission.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9962fd017becf944d671da498ccaaea570452206
Author: Brian Pomerantz <bapper@mvista.com>
Date:   Mon Feb 12 00:53:05 2007 -0800

    [PATCH] EDAC: e752x byte access fix
    
    The reading of the DRA registers should be a byte at a time (one register at a
    time) instead of 4 bytes at a time (four registers).  Reading a dword at a
    time retrieves erroneous information from all but the first register.  A
    change was made to read in each register in a loop prior to using the data in
    those registers.
    
    Signed-off-by: Brian Pomerantz <bapper@mvista.com>
    Signed-off-by: Dave Jiang <djiang@mvista.com>
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dfb2a76378f095b0aaa2024ce9a8cfb2ae2354d2
Author: Brian Pomerantz <bapper@mvista.com>
Date:   Mon Feb 12 00:53:03 2007 -0800

    [PATCH] EDAC: e752x bit mask fix
    
    The fatal vs.  non-fatal mask for the sysbus FERR status is incorrect
    according to the E7520 datasheet.  This patch corrects the mask to correctly
    handle fatal and non-fatal errors.
    
    Signed-off-by: Brian Pomerantz <bapper@mvista.com>
    Signed-off-by: Dave Jiang <djiang@mvista.com>
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 27b0b2f44adffe0193a695bb528a83b550b8e54b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:53:02 2007 -0800

    [PATCH] pid: remove the now unused kill_pg kill_pg_info and __kill_pg_info
    
    Now that I have changed all of the in-tree users remove the old version of
    these functions.  This should make it clear to any out of tree users that they
    should be using kill_pgrp kill_pgrp_info or __kill_pgrp_info instead.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9f57a54b6cf3f626334d97e93b5b917ad11e1efc
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:53:02 2007 -0800

    [PATCH] pid: remove now unused do_each_task_pid and while_each_task_pid
    
    Now that I have changed all of the users remove the old version of these
    functions.  This should be a clear hint to any out of tree users that they
    should use do_each_pid_task and while_each_pid_task for new code.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 41487c65bfcce9c8e4d123da1719fcfd8df6d4d0
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:53:01 2007 -0800

    [PATCH] pid: replace do/while_each_task_pid with do/while_each_pid_task
    
    There isn't any real advantage to this change except that it allows the old
    functions to be removed.  Which is easier on maintenance and puts the code in
    a more uniform style.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ab521dc0f8e117fd808d3e425216864d60390500
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:53:00 2007 -0800

    [PATCH] tty: update the tty layer to work with struct pid
    
    Of kernel subsystems that work with pids the tty layer is probably the largest
    consumer.  But it has the nice virtue that the assiation with a session only
    lasts until the session leader exits.  Which means that no reference counting
    is required.  So using struct pid winds up being a simple optimization to
    avoid hash table lookups.
    
    In the long term the use of pid_nr also ensures that when we have multiple pid
    spaces mixed everything will work correctly.
    
    Signed-off-by: Eric W. Biederman <eric@maxwell.lnxi.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3e7cd6c413c9e6fbb5e1ee2acdadb4ababd2d474
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:58 2007 -0800

    [PATCH] pid: replace is_orphaned_pgrp with is_current_pgrp_orphaned
    
    Every call to is_orphaned_pgrp passed in process_group(current) which is racy
    with respect to another thread changing our process group.  It didn't bite us
    because we were dealing with integers and the worse we would get would be a
    stale answer.
    
    In switching the checks to use struct pid to be a little more efficient and
    prepare the way for pid namespaces this race became apparent.
    
    So I simplified the calls to the more specialized is_current_pgrp_orphaned so
    I didn't have to worry about making logic changes to avoid the race.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0475ac0845f9295bc5f69af45f58dff2c104c8d1
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:57 2007 -0800

    [PATCH] pid: use struct pid for talking about process groups in exitc
    
    Modify has_stopped_jobs and will_become_orphan_pgrp to use struct pid based
    process groups.  This reduces the number of hash tables looks ups and paves
    the way for multiple pid spaces.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 04a2e6a5cbf84e85fe86de0a18f6509b147e1d89
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:56 2007 -0800

    [PATCH] pid: make session_of_pgrp use struct pid instead of pid_t
    
    To properly implement a pid namespace I need to deal exclusively in terms of
    struct pid, because pid_t values become ambiguous.
    
    To this end session_of_pgrp is transformed to take and return a struct pid
    pointer.  To avoid the need to worry about reference counting I now require my
    caller to hold the appropriate locks.  Leaving callers repsonsible for
    increasing the reference count if they need access to the result outside of
    the locks.
    
    Since session_of_pgrp currently only has one caller and that caller simply
    uses only test the result for equality with another process group, the locking
    change means I don't actually have to acquire the tasklist_lock at all.
    
    tiocspgrp is also modified to take and release the lock.  The logic there is a
    little more complicated but nothing I won't need when I convert pgrp of a tty
    to a struct pid pointer.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8d42db189ca99703f0f4f91c477cb54808c8eaaa
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:55 2007 -0800

    [PATCH] signal: rewrite kill_something_info so it uses newer helpers
    
    The goal is to remove users of the old signal helper functions so they can be
    removed.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0e25338bc11fa8e41e44e4db5b5101e3d882dc5b
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:54 2007 -0800

    [PATCH] signal: use kill_pgrp not kill_pg in the sunos compatibility code
    
    I am slowly moving to a model where all process killing is struct pid based
    instead of pid_t based.  The sunos compatibility code is one of the last users
    of the old pid_t based kill_pg in the kernel.  By being complete I allow for
    the future removal of kill_pg from the kernel, which will ensure I don't miss
    something.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2ea81868d8fba0bb56d7b45a08cc5f15dd2c6bb2
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:53 2007 -0800

    [PATCH] tty: fix the locking for signal->session in disassociate_ctty
    
    commit 24ec839c431eb79bb8f6abc00c4e1eb3b8c4d517 while fixing the locking for
    signal->tty got the locking wrong for signal->session.  This places our
    accesses of signal->session back under the tasklist_lock where they belong.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 680a96710041c3c25464b5e093b80ca43cb94f52
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:52 2007 -0800

    [PATCH] tty: clarify disassociate_ctty
    
    The code to look at tty_old_pgrp and send SIGHUP and SIGCONT when it is
    present only executes when disassociate_ctty is called from do_exit.  Make
    this clear by adding an explict on_exit check, and explicitly setting
    tty_old_pgrp to 0.
    
    In addition fix the locking by reading tty_old_pgrp under the siglock.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cdc623300841bc8f1625c320d5a6cbc52c43c60d
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:51 2007 -0800

    [PATCH] tty: make __proc_set_tty static
    
    The aim of this patch set is to start wrapping up the struct pid conversions.
    As such this patchset culminates with the removal of kill_pg, kill_pg_info,
    __kill_pg_info, do_each_task_pid, and while_each_task_pid.
    
    kill_proc, daemonize, and kernel_thread are still in my sights but there is
    still work to get to them.
    
    The first three are basic cleanups around disassociate_ctty, while working on
    converting it I found several issues.  tty_old_pgrp can be a tricky concept to
    wrap your head around.
    
     1 tty: Make __proc_set_tty static.
     2 tty: Clarify disassociate_ctty
     3 tty: Fix the locking for signal->session in disassociate_ctty
    
    These just stop using the old helper functions.
    
     4 signal: Use kill_pgrp not kill_pg in the sunos compatibility code.
     5 signal: Rewrite kill_something_info so it uses newer helpers.
    
    Then the grind to convert the tty layer and all of it's helper functions to
    struct pid.
    
     6 pid: Make session_of_pgrp use struct pid instead of pid_t.
     7 pid: Use struct pid for talking about process groups in exit.c
     8 pid: Replace is_orphaned_pgrp with is_current_pgrp_orphaned
     9 tty: Update the tty layer to work with struct pid.
    
    A final helper function update.
    
    10 pid: Replace do/while_each_task_pid with do/while_each_pid_task
    
    And the removal of the functions that are now unused.
    11 pid: Remove now unused do_each_task_pid and while_each_task_pid
    12 pid: Remove the now unused kill_pg kill_pg_info and __kill_pg_info
    
    All of these should be fairly simple and to the point.
    
    This patch:
    
    Currently all users of __proc_set_tty are in tty_io.c so make the function
    static.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 939b00df0306bc4b5cd25c3c3c78e89b91e72fc8
Author: Andries Brouwer <aeb@cwi.nl>
Date:   Mon Feb 12 00:52:49 2007 -0800

    [PATCH] Minix V3 support
    
    This morning I needed to read a Minix V3 filesystem, but unfortunately my
    2.6.19 did not support that, and neither did the downloaded 2.6.20rc4.
    
    Fortunately, google told me that Daniel Aragones had already done the work,
    patch found at http://www.terra.es/personal2/danarag/
    
    Unfortunaly, looking at the patch was painful to my eyes, so I polished it
    a bit before applying.  The resulting kernel boots, and reads the
    filesystem it needed to read.
    
    Signed-off-by: Daniel Aragones <danarag@gmail.com>
    Signed-off-by: Andries Brouwer <aeb@cwi.nl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b587b13a4f670ebae79ae6259cf44328455e4e69
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:52:48 2007 -0800

    [PATCH] SPI eeprom driver
    
    This is adds a simple SPI EEPROM driver, providing access to the EEPROM
    through sysfs much like the I2C "eeprom" driver ...  except this driver
    supports write access, and multiple EEPROM sizes.
    
    From: "Tuppa, Walter" <walter.tuppa@siemens.com>
    
    Since I have EEPROMs on SPI with different address sizing, I made some
    changes to your at25.c to support them.  Works perfectly.  (Also includes a
    small bugfix for the "what size address" test.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Walter Tuppa <walter.tuppa@siemens.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3925a5ce44330767f7f0de5c58c6a797009f0f75
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:52:47 2007 -0800

    [PATCH] RTC gets sysfs wakealarm attribute
    
    This adds a new "wakealarm" sysfs attribute to RTC class devices which support
    alarm operations and are wakeup-capable:
    
     - It reads as either empty, or the scheduled alarm time as seconds
       since the POSIX epoch.  (That time may already have passed, since
       nothing currently enforces one-shot alarm semantics.)
    
     - It can be written with an alarm time in the future, again seconds
       since the POSIX epoch, which enables the alarm.
    
     - It can be written with an alarm time not in the future (such as 0,
       the start of the POSIX epoch) to disable the alarm.
    
    Usage examples (some need GNU date) after "cd /sys/class/rtc/rtcN":
    
        alarm after 10 minutes:
    	# echo $(( $(cat since_epoch) + 10 * 60 )) > wakealarm
        alarm tuesday evening 10pm:
    	# date -d '10pm tuesday' "+%s" > wakealarm
        disable alarm:
        	# echo 0 > wakealarm
    
    This resembles the /proc/acpi/alarm file in that nothing happens when the
    alarm triggers ...  except possibly waking the system from sleep.  It's also
    like that in a nasty way: not much can be done to prevent one task from
    clobbering another task's alarm settings.
    
    It differs from that file in that there's no in-kernel date parser.
    
    Note that a few RTCs ignore rtc_wkalrm.enabled when setting alarms, or aren't
    set up correctly, so they won't yet behave with this attribute.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 802245611adea5e5877d8c5d9a20f94d8131bfdd
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:52:46 2007 -0800

    [PATCH] SPI doc clarifications
    
    This clarifies some aspects of the SPI programming interface, based on
    feedback from Hans-Peter Nilsson.  The in-memory representation of words is
    right-aligned, so for example a twelve bit word is stored using sixteen bits
    with four undefined bits in the MSB.  And controller drivers must reject
    protocol tweaking modes they do not support.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0ffa0285052607513a29f529ddb5061c907fd8a6
Author: Hans-Peter Nilsson <hans-peter.nilsson@axis.com>
Date:   Mon Feb 12 00:52:45 2007 -0800

    [PATCH] SPI cleanup() method param becomes non-const
    
    I'd like to assign NULL to kfree()d members of a structure.  I can't do
    that without ugly casting (see the PXA patch) when the structure pointed to
    is const-qualified.  I don't really see a reason why the cleanup method
    isn't allowed to alter the object it should clean up.  :-)
    
    No, I didn't test the PXA patch, but I verified that the NULL-assignment
    doesn't stop me from doing rmmod/insmodding my own spi_bitbang-based
    driver.
    
    Signed-off-by: Hans-Peter Nilsson <hp@axis.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7f8c7619ea1ff5ab8e0b08c8120d629834ef4253
Author: Hans-Peter Nilsson <hans-peter.nilsson@axis.com>
Date:   Mon Feb 12 00:52:44 2007 -0800

    [PATCH] spi_bitbang(): use overridable setup_transfer() method
    
    A small bug-fix for spi_bitbang: it must always call the setup_transfer
    function via the overridable pointer, not assume that its
    spi_bitbang_setup_transfer is sufficient.  Otherwise, if all options in the
    transfers are default (0), the overrided function will never be called.
    
    Granted, the function replacing it must call spi_bitbang_setup_transfer,
    but it might also have other important things to do, even if the second
    argument (the spi_transfer) is NULL.  Tested together with the other
    patches on the spi_crisv32_sser and spi_crisv32_gpio drivers (not yet in
    the kernel, will IIUC be submitted as part of the usual
    arch-maintainer-pushes).
    
    Signed-off-by: Hans-Peter Nilsson <hp@axis.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ddc1e9753106cedcca7944d2b068baa2e14640b1
Author: Ben Dooks <ben@fluff.org>
Date:   Mon Feb 12 00:52:43 2007 -0800

    [PATCH] spi: remove return in spi_unregister_driver()
    
    Make the spi_unregister_driver() code fit in with the rest of the header
    file, and only do the action if the driver passed is non-NULL.
    
    This also makes the code a line smaller.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 14fd9b3f8a0a36e706d144efcd579805a99de594
Author: Ben Dooks <ben@fluff.org>
Date:   Mon Feb 12 00:52:42 2007 -0800

    [PATCH] spi: documentation does not need to set driver's bus_type field
    
    The spi_register_driver() sets the bus_type field of the spi_driver being
    registered, so there is no need to have it set in the driver itself.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9b40ff4d729f4a7a9f832c67aa5de0dfa8ad45c0
Author: Ben Dooks <ben@fluff.org>
Date:   Mon Feb 12 00:52:41 2007 -0800

    [PATCH] spi: add spi_set_drvdata() and spi_get_drvdata()
    
    Add wrappers for getting and setting the driver data using spi_device
    instead of using dev_{get|set}_drvdata with &spi->dev, to mirror the
    platform_{get|set}_drvdata.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 69c202afa8ad6d6c1c673d8f9d47b43a0a3604e5
Author: Andrea Paterniani <a.paterniani@swapp-eng.it>
Date:   Mon Feb 12 00:52:39 2007 -0800

    [PATCH] SPI: Freescale iMX SPI controller driver (BIS+)
    
    Add the SPI controller driver for Freescale i.MX(S/L/1).
    Main features summary:
    
     > Per chip setup via board specific code and/or protocol driver.
     > Per transfer setup.
     > PIO transfers.
     > DMA transfers.
     > Managing of NULL tx / rx buffer for rd only / wr only transfers.
    
    This patch replace patch-2.6.20-rc4-spi_imx with the following changes:
     > Few cosmetic changes.
     > Function map_dma_buffers now return 0 for success and -1 for failure.
     > Solved a bug inside spi_imx_probe function (wrong error path).
     > Solved a bug inside setup function (bad undo setup for max_speed_hz).
     > For read-only transfers, always write zero bytes.
    
    This is almost the same as the 'BIS' version sent by Andrea, except for
    updating the 'DUMMY' byte so that read-only transfers shift out zeroes.
    That part of the API changed recently, since some half duplex peripheral
    chips require that semantic.
    
    Signed-off-by: Andrea Paterniani <a.paterniani@swapp-eng.it>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fdb3c18d639311287dc4675abe743847a1aa62a8
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:52:37 2007 -0800

    [PATCH] SPI controller driver for OMAP Microwire
    
    This adds a SPI driver for the Microwire controller on OMAP1 chips.  This
    driver has been used in the Linux-OMAP tree for some time now, including
    with some of those displays using standardized 9-bit commands followed by
    data with 8-bit words.
    
    Microwire only supports half duplex transfers, but that's all that most SPI
    protocols need.  When full duplex, or higher speeds, are needed there are
    several other controllers that can be used on OMAP.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 85abfaa78239e63f553cc446f8ae5b955282aa29
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 12 00:52:36 2007 -0800

    [PATCH] SPI Kconfig fix
    
    Minor Kconfig cleanup ... put the SPI_S3C24XX entry in the
    correct location (alphabetical order).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit efc47135e4b6f7e7d81332f50ef68e4a42819d20
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Feb 12 00:52:35 2007 -0800

    [PATCH] DS1302: local_irq_disable() is redundant after local_irq_save()
    
    drivers/char/ds1302.c::get_rtc_time() contains local_irq_disable() call
    after local_irq_save(). This looks redundant.
    
    drivers/char/ds1302.c::rtc_ioctl() contains local_irq_disable() call after
    local_irq_save(). This looks redundant.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2869b23e4b95cbafffcd2fe110d77aff8c218405
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Mon Feb 12 00:52:34 2007 -0800

    [PATCH] drivers/isdn/gigaset: new M101 driver (v2)
    
    This patch adds the line discipline based driver for the Gigaset M101
    wireless RS232 adapter. It also improves the documentation a bit.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e13df2c58f8e8c72278b61e8f59de9a1403f9426
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 12 00:52:33 2007 -0800

    [PATCH] drivers/telephony/ixj: Convert to generic boolean
    
    Convert:
    BOOL  -> bool
    FALSE -> false
    TRUE  -> true
    
    Change a variable ('mContinue') to boolean from char, since it is used
    as boolean.
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Acked-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 40565f1962c5be9b9e285e05af01ab7771534868
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:52:31 2007 -0800

    [PATCH] Char: timers cleanup
    
    - Use timer macros to set function and data members and to modify
      expiration time.
    - Use DEFINE_TIMER for global timers and do not init them at run-time in
      these cases.
    - del_timer_sync is common in most cases -- we want to wait for timer
      function if it's still running.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Dave Airlie <airlied@linux.ie>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Paul Fulghum <paulkf@microgate.com>
    Cc: Kylene Jo Hall <kjhall@us.ibm.com>
    Cc: Wim Van Sebroeck <wim@iguana.be>
    Acked-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d096f3e9898d469493fc0afe88d7285c4bdc3ce2
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:52:30 2007 -0800

    [PATCH] Char: specialix, isr have 2 params
    
    specialix, isr have 2 params
    
    pt_regs are no longer the third parameter of isr, call sx_interrupt without
    it.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c239122dec9230af80d0914ba23fefde80fdeffe
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Mon Feb 12 00:52:29 2007 -0800

    [PATCH] change __init to __devinit in 2 rtc drivers
    
    Change __init to __devinit in rtc drivers' probe functions.
    
    Resolves MODPOST warnings:
    
    WARNING: drivers/rtc/rtc-ds1553.o - Section mismatch: reference to
    .init.text:ds1553_rtc_probe from .data.rel between 'ds1553_rtc_driver' (at
    offset 0x0) and 'ds1553_nvram_attr'
    WARNING: drivers/rtc/rtc-ds1742.o - Section mismatch: reference to
    .init.text:ds1742_rtc_probe from .data.rel between 'ds1742_rtc_driver' (at
    offset 0x0) and 'ds1742_nvram_attr'
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit eb5857084c8d27764b842025e4c805b174e40cad
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Mon Feb 12 00:52:27 2007 -0800

    [PATCH] export ufs_fs.h to userspace
    
    Was ufs_fs.h purposefully not exported to userspace or did it just slip
    through the cracks ?  assuming the latter scenario, the attached patch touches
    up the relationship between ufs_fs.h and its sub headers (like ufs_fs_sb.h) so
    that we can export it ...  the silo bootloader takes advantage of this header
    for example.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Cc: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 944be0b224724fcbf63c3a3fe3a5478c325a6547
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Feb 12 00:52:26 2007 -0800

    [PATCH] close_files(): add scheduling point
    
    close_files() can sometimes take long enough to trigger the soft lockup
    detector.
    
    Cc: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 92ba0ee2770ed4954e3f8ba412ef2f37e5519477
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Mon Feb 12 00:52:26 2007 -0800

    [PATCH] drivers/isdn/gigaset: reduce kernel message spam
    
    Reduce the number of kernel messages the Gigaset drivers produce in case of an
    excessively long device response, from one per character exceeding the limit
    to one per overlong message.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7435f50e1261f569c660efb4ae52e8bc21a92cbd
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Mon Feb 12 00:52:24 2007 -0800

    [PATCH] drivers/isdn/gigaset: reduce mutex scope
    
    Do not lock the cardstate structure mutex earlier than necessary.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 163da958ba5282cbf85e8b3dc08e4f51f8b01c5e
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Mon Feb 12 00:52:24 2007 -0800

    [PATCH] FS: speed up rw_verify_area()
    
    oprofile hunting showed a stall in rw_verify_area(), because of triple
    indirection and potential cache misses.
    (file->f_path.dentry->d_inode->i_flock)
    
    By moving initialization of 'struct inode' pointer before the pos/count
    sanity tests, we allow the compiler and processor to perform two loads by
    anticipation, reducing stall, without prefetch() hints.  Even x86 arch has
    enough registers to not use temporary variables and not increase text size.
    
    I validated this patch running a bench and studied oprofile changes, and
    absolute perf of the test program.
    
    Results of my epoll_pipe_bench (source available on request) on a Pentium-M
    1.6 GHz machine
    
    Before :
    # ./epoll_pipe_bench -l 30 -t 20
    Avg: 436089 evts/sec read_count=8843037 write_count=8843040 21.218390 samples
    per call
    (best value out of 10 runs)
    
    After :
    # ./epoll_pipe_bench -l 30 -t 20
    Avg: 470980 evts/sec read_count=9549871 write_count=9549894 21.216694 samples
    per call
    (best value out of 10 runs)
    
    oprofile CPU_CLK_UNHALTED events gave a reduction from 5.3401 % to 2.5851 %
    for the rw_verify_area() function.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2a10387ec463c4fcd3ccc461291ce4d8505827e2
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Mon Feb 12 00:52:22 2007 -0800

    [PATCH] com20020 build fix
    
    Need to export com20020 symbols for com20020_cs also.
    
    WARNING:  "com20020_found" [drivers/net/pcmcia/com20020_cs.ko] undefined!
    WARNING:  "com20020_check" [drivers/net/pcmcia/com20020_cs.ko] undefined!
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Cc: Esben Nielsen <nielsen.esben@googlemail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a1e96b0310d70b72012b5ecde5e97b8262785aae
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 12 00:52:20 2007 -0800

    [PATCH] lockdep: forward declare struct task_struct
    
    3117df0453828bd045c16244e6f50e5714667a8a causes this:
    
    In file included from arch/s390/kernel/early.c:13:
    include/linux/lockdep.h:300: warning:
    		"struct task_struct" declared inside parameter list
    include/linux/lockdep.h:300:
    		warning: its scope is only this definition or
    		declaration, which is probably not what you want
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 473e66fd24a230e03f6f164913bedb81c0ba052a
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 12 00:52:18 2007 -0800

    [PATCH] kexec: fix references to init in documentation for kexec
    
    I've noticed that the boot options are not correct for in the documentation
    for kdump.  The "init" keyword is not necessary, and causes a kernel panic
    when booting with an initrd on Fedora 5.
    
    [horms@verge.net.au: put original comment with the latest version of the patch]
    Signed-off-by: Judith Lebzeelter <judith@osdl.org>
    Acked-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit be6b026785414033aac36887cb9ea0ee1244254c
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Feb 12 00:52:17 2007 -0800

    [PATCH] swiotlb uninlinings
    
    Optimise swiotlb.c for size.
    
       text    data     bss     dec     hex filename
       5009      89      64    5162    142a lib/swiotlb.o-before
       4666      89      64    4819    12d3 lib/swiotlb.o-after
    
    For some reason my gcc (4.0.2) doesn't want to tailcall these things.
    
    swiotlb_sync_sg_for_device:
    	pushq	%rbp	#
    	movl	$1, %r8d	#,
    	movq	%rsp, %rbp	#,
    	call	swiotlb_sync_sg	#
    	leave
    	ret
    	.size	swiotlb_sync_sg_for_device, .-swiotlb_sync_sg_for_device
    	.section	.text.swiotlb_sync_sg_for_cpu,"ax",@progbits
    .globl swiotlb_sync_sg_for_cpu
    	.type	swiotlb_sync_sg_for_cpu, @function
    swiotlb_sync_sg_for_cpu:
    	pushq	%rbp	#
    	xorl	%r8d, %r8d	#
    	movq	%rsp, %rbp	#,
    	call	swiotlb_sync_sg	#
    	leave
    	ret
    
    Cc: Jan Beulich <jbeulich@novell.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 544fc7283cd6902831d660bd8e1181602bd2b4d2
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Mon Feb 12 00:52:15 2007 -0800

    [PATCH] atmel_serial: Use __raw I/O register access
    
    Access to chip-internal registers should always be native-endian.  This is
    especially important for AVR32 since it's a big-endian architecture and the
    non-raw readl() and writel() macros are defined to do little-endian
    accesses.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Acked-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3991d3bd1506391d8feec209b1d22ccb1c03a0bf
Author: Tomasz Kvarsin <kvarsin@gmail.com>
Date:   Mon Feb 12 00:52:14 2007 -0800

    [PATCH] warning fix: unsigned->signed
    
    While compiling my code with -Wconversion using gcc-trunk, I always get a
    bunch of warrning from headers, here is fix for them:
    
    __getblk is alawys called with unsigned argument,
    but it takes signed, the same story with __bread,__breadahead and so on.
    
    Signed-off-by: Tomasz Kvarsin <kvarsin@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bc1fc6d88c646ea071de34250552051a63000d70
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Feb 12 00:52:10 2007 -0800

    [PATCH] ipc: save the ipc namespace while reading proc files
    
    The problem we were assuming that current->nsproxy->ipc_ns would never
    change while someone has our file in /proc/sysvipc/ file open.  Given that
    this can change with both unshare and by passing the file descriptor to
    another process that assumption is occasionally wrong.
    
    Therefore this patch causes /proc/sysvipc/* to cache the namespace and
    increment it's count when we open the file and to decrement the count when
    we close the file, ensuring consistent operation with no surprises.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Serge E. Hallyn <serue@us.ibm.com>
    Cc: Herbert Poetzl <herbert@13thfloor.at>
    Cc: Kirill Korotaev <dev@sw.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 79a81aef769f3a188988ad16032ccfc445cfaa13
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 00:52:09 2007 -0800

    [PATCH] reiserfs: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8b5925fd5461c9f1ac77ede48945ca1945202ddb
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 00:52:08 2007 -0800

    [PATCH] OSS: Use ARRAY_SIZE macro when appropriate (2)
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b322f4095056d6849c49412eb3e36637a062e9c0
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 00:52:07 2007 -0800

    [PATCH] OSS: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9d0094de6dfda8209241787d99f531356469d0f5
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 00:52:05 2007 -0800

    [PATCH] w1: Use ARRAY_SIZE macro when appropriate
    
    A patch to use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Acked-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3f0504471536a2b6978b9a99ed1c222950fff07a
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Feb 12 00:52:04 2007 -0800

    [PATCH] kernel: shut up the IRQ mismatch messages
    
    The problem is various drivers legally validly and sensibly try to claim
    IRQs but the kernel insists on vomiting forth a giant irrelevant debugging
    spew when the types clash.
    
    Edit kernel/irq/manage.c go down to mismatch: in setup_irq() and ifdef out
    the if clause that checks for mismatches.  It'll then just do the right
    thing and work sanely.
    
    For the current -mm kernel this will do the trick (and moves it into shared
    irq debugging as in debug mode the info spew is useful).  I've had a
    variant of this in my private tree for some time as I got fed up on the
    mess on boxes where old legacy IRQs get reused.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a304e1b82808904c561b7b149b467e338c53fcce
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Feb 12 00:52:00 2007 -0800

    [PATCH] Debug shared irqs
    
    Drivers registering IRQ handlers with SA_SHIRQ really ought to be able to
    handle an interrupt happening before request_irq() returns.  They also
    ought to be able to handle an interrupt happening during the start of their
    call to free_irq().  Let's test that hypothesis....
    
    [bunk@stusta.de: Kconfig fixes]
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f9e4acf3befd3b2903e01b3ef1bd344f03299826
Author: Nick Piggin <npiggin@suse.de>
Date:   Mon Feb 12 00:51:59 2007 -0800

    [PATCH] inotify: read return val fix
    
    Fix for inotify read bug (bugzilla.kernel.org #6999)
    
    Problem Description:
    When reading from an inotify device with an insufficient sized buffer, read(2)
    will return 0 with no errno set. This is because of an logically incorrect
    action from the user program thus should return an more logical value. My
    suggestion is return -EINVAL as for bind(2).
    
    This patch is based on the proposal from Ryan <wolf0403@hotmail.com>, and
    feedback from John McCutchan <john@johnmccutchan.com>.
    
    Return -EINVAL if we have not passed in enough buffer space to read a single
    inotify event, rather than 0 which indicates that there is nothing to read.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: John McCutchan <john@johnmccutchan.com>
    Cc: Ryan <wolf0403@hotmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d003fb70fd356d0684ee0cd37a785e058c8678de
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Feb 12 00:51:58 2007 -0800

    [PATCH] remove sb->s_files and file_list_lock usage in dquot.c
    
    Iterate over sb->s_inodes instead of sb->s_files in add_dquot_ref.  This
    reduces list search and lock hold time aswell as getting rid of one of the
    few uses of file_list_lock which Ingo identified as a scalability problem.
    
    Previously we called dq_op->initialize for every inode handing of a
    writeable file that wasn't initialized before.  Now we're calling it for
    every inode that has a non-zero i_writecount, aka a writeable file
    descriptor refering to it.
    
    Thanks a lot to Jan Kara for running this patch through his quota test
    harness.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fb58b7316a99703afb8d076b0e5f3e1e387e4b30
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Feb 12 00:51:57 2007 -0800

    [PATCH] move remove_dquot_ref to dqout.c
    
    Remove_dquot_ref can move to dqout.c instead of beeing in inode.c under
    #ifdef CONFIG_QUOTA.  Also clean the resulting code up a tiny little bit by
    testing sb->dq_op earlier - it's constant over a filesystems lifetime.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: Jan Kara <jack@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ea6f3281a145d16ed53e88b0627f78d5cde6068f
Author: Martin Peschke <mp3@de.ibm.com>
Date:   Mon Feb 12 00:51:56 2007 -0800

    [PATCH] scnprintf(): fix a comment
    
    The return value of scnprintf() never exceeds @size.
    
    Signed-off-by: Martin Peschke <mp3@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 91dd26ad2c04a1bbf179df4dca98f34db2f70716
Author: Dan Aloni <da-x@monatomic.org>
Date:   Mon Feb 12 00:51:54 2007 -0800

    [PATCH] fix the defaults mentioned in Documentation/nfsroot.txt
    
    This patch fixes the documentation of nfsroot to match NFS_DEF_FILE_IO_SIZE.
    
    Or perhaps we need to change NFS_DEF_FILE_IO_SIZE to match the
    documentation?
    
    Signed-off-by: Dan Aloni <da-x@monatomic.org>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d459883e6c54303a233dec3e4453a356794d8c2d
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:51:53 2007 -0800

    [PATCH] MAINTAINERS: remove two dead e-mail
    
    Cyclades no longer serves the 2 e-mails listed in MAINTAINERS.  Remove them
    and mark those entries as Orphaned.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ae4472aa03d38b11f334dc0030b82e0c9f249af9
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:51:52 2007 -0800

    [PATCH] QUOTA: Have <linux/quota.h> include <linux/rwsem.h> explicitly
    
    Since quota.h declares a R/W semaphore, it should include rwsem.h
    explicitly.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5be02f1d8af4c7baf3a5a31ab9c0cba9fdc52680
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 12 00:51:50 2007 -0800

    [PATCH] include/linux/kernel.h: Remove labs()
    
    Remove labs() since it is not used/needed.
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 893de2dffb0923d9bdba4abd66afcec3cf9103ba
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:51:49 2007 -0800

    [PATCH] Char: cyclades, use pci_device_id
    
    Use pci_device_id struct instead of ushort array. Add MODULE_DEVICE_TABLE.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 29d73aab3368ff18006c3591bc6d2f54c06c9bcb
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Feb 12 00:51:48 2007 -0800

    [PATCH] Char: use more PCI_DEVICE macro
    
    Use more PCI_DEVICE macro
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Acked-by: Wim Van Sebroeck <wim@iguana.be>
    Cc: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit eb3dfb0cb1f4a44e2d0553f89514ce9f2a9fcaf1
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Mon Feb 12 00:51:47 2007 -0800

    [PATCH] Fix d_path for lazy unmounts
    
    Here is a bugfix to d_path.
    
    First, when d_path() hits a lazily unmounted mount point, it tries to
    prepend the name of the lazily unmounted dentry to the path name.  It gets
    this wrong, and also overwrites the slash that separates the name from the
    following pathname component.  This is demonstrated by the attached test
    case, which prints "getcwd returned d_path-bugsubdir" with the bug.  The
    correct result would be "getcwd returned d_path-bug/subdir".
    
    It could be argued that the name of the root dentry should not be part of
    the result of d_path in the first place.  On the other hand, what the
    unconnected namespace was once reachable as may provide some useful hints
    to users, and so that seems okay.
    
    Second, it isn't always possible to tell from the __d_path result whether
    the specified root and rootmnt (i.e., the chroot) was reached: lazy
    unmounts of bind mounts will produce a path that does start with a
    non-slash so we can tell from that, but other lazy unmounts will produce a
    path that starts with a slash, just like "ordinary" paths.
    
    The attached patch cleans up __d_path() to fix the bug with overlapping
    pathname components.  It also adds a @fail_deleted argument, which allows
    to get rid of some of the mess in sys_getcwd().  Grabbing the dcache_lock
    can then also be moved into __d_path().  The patch also makes sure that
    paths will only start with a slash for paths which are connected to the
    root and rootmnt.
    
    The @fail_deleted argument could be added to d_path() as well: this would
    allow callers to recognize deleted files, without having to resort to the
    ambiguous check for the " (deleted)" string at the end of the pathnames.
    This is not currently done, but it might be worthwhile.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Cc: Neil Brown <neilb@suse.de>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5c3bd438ccb94f5d5bf5d8711330e038dc8dd21b
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 12 00:51:45 2007 -0800

    [PATCH] NTFS: rename incorrect check of NTFS_DEBUG with just DEBUG
    
    Replace the incorrect debugging check of "#ifdef NTFS_DEBUG" with
    just "#ifdef DEBUG".
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fdf892be32d84a1745fa0aee5fc60517421b8038
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Feb 12 00:51:44 2007 -0800

    [PATCH] register_blkdev(): don't hand out the LOCAL/EXPERIMENTAL majors
    
    As pointed out in http://bugzilla.kernel.org/show_bug.cgi?id=7922, dynamic
    blockdev major allocation can hand out majors which LANANA has defined as
    being for local/experimental use.
    
    Cc: Torben Mathiasen <device@lanana.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Tomas Klas <tomas.klas@mepatek.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 215122e1110f97a3f478829049b9840cf8fdde57
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Feb 12 00:51:43 2007 -0800

    [PATCH] register_chrdev_region() don't hand out the LOCAL/EXPERIMENTAL majors
    
    As pointed out in http://bugzilla.kernel.org/show_bug.cgi?id=7922, dynamic
    chardev major allocation can hand out majors which LANANA has defined as being
    for local/experimental use.
    
    Cc: Torben Mathiasen <device@lanana.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Tomas Klas <tomas.klas@mepatek.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6ab8eb1cffcc5640ca5b07c2a0ddfaa8fbbcc754
Author: David Chinner <dgc@sgi.com>
Date:   Mon Feb 12 00:51:42 2007 -0800

    [PATCH] Make XFS use BH_Unwritten and BH_Delay correctly
    
    Don't hide buffer_unwritten behind buffer_delay() and remove the hack that
    clears unexpected buffer_unwritten() states now that it can't happen.
    
    Signed-off-by: Dave Chinner <dgc@sgi.com>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Cc: Timothy Shimmin <tes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 33a266dda9fbbe72dd978a451a8ee33c59da5e9c
Author: David Chinner <dgc@sgi.com>
Date:   Mon Feb 12 00:51:41 2007 -0800

    [PATCH] Make BH_Unwritten a first class bufferhead flag V2
    
    Currently, XFS uses BH_PrivateStart for flagging unwritten extent state in a
    bufferhead.  Recently, I found the long standing mmap/unwritten extent
    conversion bug, and it was to do with partial page invalidation not clearing
    the unwritten flag from bufferheads attached to the page but beyond EOF.  See
    here for a full explaination:
    
    http://oss.sgi.com/archives/xfs/2006-12/msg00196.html
    
    The solution I have checked into the XFS dev tree involves duplicating code
    from block_invalidatepage to clear the unwritten flag from the bufferhead(s),
    and then calling block_invalidatepage() to do the rest.
    
    Christoph suggested that this would be better solved by pushing the unwritten
    flag into the common buffer head flags and just adding the call to
    discard_buffer():
    
    http://oss.sgi.com/archives/xfs/2006-12/msg00239.html
    
    The following patch makes BH_Unwritten a first class citizen.
    
    Signed-off-by: Dave Chinner <dgc@sgi.com>
    Acked-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 42da9cbd3eedde33a42acc2cb06f454814cf5de0
Author: Nick Piggin <npiggin@suse.de>
Date:   Mon Feb 12 00:51:39 2007 -0800

    [PATCH] mm: mincore anon
    
    Make mincore work for anon mappings, nonlinear, and migration entries.
    Based on patch from Linus Torvalds <torvalds@linux-foundation.org>.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 22cd25ed31bbf849acaa06ab220dc4f526153f13
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Feb 12 00:51:38 2007 -0800

    [PATCH] Add NOPFN_REFAULT result from vm_ops->nopfn()
    
    Add a NOPFN_REFAULT return code for vm_ops->nopfn() equivalent to
    NOPAGE_REFAULT for vmops->nopage() indicating that the handler requests a
    re-execution of the faulting instruction
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e0dc0d8f4a327d033bfb63d43f113d5f31d11b3c
Author: Nick Piggin <npiggin@suse.de>
Date:   Mon Feb 12 00:51:36 2007 -0800

    [PATCH] add vm_insert_pfn()
    
    Add a vm_insert_pfn helper, so that ->fault handlers can have nopfn
    functionality by installing their own pte and returning NULL.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2ca48ed5cc5935cbd2a6f5d14fecd4ddbbdb4315
Author: Michael Hanselmann <linux-kernel@hansmi.ch>
Date:   Mon Feb 12 00:51:34 2007 -0800

    [PATCH] null pointer dereference in appledisplay driver
    
    Commit 40b20c257a13c5a526ac540bc5e43d0fdf29792a by Len Brown introduced
    a null pointer dereference in the appledisplay driver. This patch fixes
    it.
    
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Cc: Len Brown <lenb@kernel.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 615d5f235b6c402ca01098a828c3d67e79e57cb6
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Mon Feb 12 10:51:23 2007 -0500

    ACPI: IA64: fix calculation of apic_id
    
    fix regression from recent table re-write
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 022ae414daadb718130679e4eacc105521f11ec7
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Feb 12 15:49:57 2007 +0100

    [S390] remove __io_virt and mmiowb.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 045236ab190636c989ae8198eca37cfbafc1430b
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 12 15:49:51 2007 +0100

    [S390] cio: use ARRAY_SIZE in device_id.c
    
    Acked-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 4dd3cc5caf41d55cd5e55f32902c8a2ad3296e19
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Feb 12 15:47:18 2007 +0100

    [S390] cio: Fixup interface for setting options on ccw devices.
    
    The current ccw_device_set_options() sets a specified mask of options
    and clears those not specified, but there is no way to find out which
    options have already been set.
    
    In order to fix this up, introduce the following interface changes:
    
    ccw_device_set_options() now only sets the specified bits, but does
    not clear those that are not specified.
    
    ccw_device_clear_options() clears the specified bits.
    
    ccw_device_set_options_mask() provides the old semantics (setting only
    the specified bits and clearing the others).
    
    Device drivers now work as expected. qdio has been adapted.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 0ec67667ab414b18a0518d5b11c842fd342e9cb1
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 12 15:47:04 2007 +0100

    [S390] smp_call_function/smp_call_function_on locking.
    
    smp_call_function and smp_call_function_on share the same lock and
    smp_call_function_on disables softirq's so it can be called from
    softirq context as well. Hence smp_call_function muss disable
    softirqs as well to avoid deadlocks.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 72922bac1050f00fcd1dc3412fcfe71f8190f9c6
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Feb 12 14:38:26 2007 +0100

    [ARM] 4162/1: S3C24XX: update defconfig_s3c2410 after move
    
    Update the s3c2410_defconfig after the movement of
    arch/arm/mach-s3c2410
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 017cc022b6f0a0619cc3b0bba43e1c3247b06779
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Feb 12 10:53:50 2007 +0000

    [ARM] Convert dmabounce statistics to use a device attribute
    
    Rather than printk'ing the dmabounce statistics occasionally to
    the kernel log, provide a sysfs file to allow this information
    to be periodically read.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ab2c21529df6ee0f06787773882a1abc6bc2d665
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Feb 12 10:28:24 2007 +0000

    [ARM] Add a reference from struct device to the dma bounce info
    
    dmabounce keeps a per-device structure, and finds the correct
    structure by walking a list.  Since architectures can now add
    fields to struct device, we can attach this structure direct to
    the struct device, thereby eliminating the code to search the
    list.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 509cb37e173d4e39cec47238397e91b718730794
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 12 00:08:03 2007 +0100

    [PATCH] one more iomap s390 build fix
    
    Commit 9ac7849e35f705830f7b016ff272b0ff1f7ff759 causes this on S390:
    
      drivers/built-in.o: In function `dmam_noncoherent_release':
        dma-mapping.c:(.text+0x1515c): undefined reference to `dma_free_noncoherent'
      drivers/built-in.o: In function `dmam_free_noncoherent':
        undefined reference to `dma_free_noncoherent'
      drivers/built-in.o: In function `dmam_alloc_noncoherent':
        undefined reference to `dma_alloc_noncoherent'
      make: *** [.tmp_vmlinux1] Error 1
    
    Cc: Tejun Heo <htejun@gmail.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9ede209e83693cf3f6b64f61ab4b65f2f809cb50
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 12:11:44 2007 +1100

    cfq-iosched: improve continue or break logic in cfq_dispatch
    
    This improves performance considerably for sync requests when you
    have command queuing enabled.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 28f95cbc3ec01f2c7d248e1a4a384f37e9c2ab16
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 12:09:53 2007 +1100

    cfq-iosched: remove the implicit queue kicking in slice expire
    
    We only really need it for a process going away, so move it to
    those locations.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 3c6bd2f879d2c12ce369fe5f75e608ac7bacf01a
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 12:06:33 2007 +1100

    cfq-iosched: check whether a queue timed out in accounting
    
    Makes it more fair for the residual slice count.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit cb8874119e9a3ec38c45942808c91cfbc014f402
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 12:01:16 2007 +1100

    cfq-iosched: tweak the FIFO checking
    
    We currently check the FIFO once per slice. Optimize that a bit and
    only do it as the first thing for a new slice, so we don't end up
    doing a single request and then seek to the FIFO requests.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 1792669cc1acc2069869b7ca41a0195240de05e0
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 11:59:30 2007 +1100

    cfq-iosched: don't pass in queue for cfq_arm_slice_timer()
    
    It must always be the active queue, otherwise it's a bug. So just
    use the active_queue, don't pass it in explicitly.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit c5b680f3b7593f2b066c683df799d19f807fb23d
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 11:56:49 2007 +1100

    cfq-iosched: account for slice over/under time
    
    If a slice uses less than it is entitled to (or perhaps more), include
    that in the decision on how much time to give it the next time it
    gets serviced.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 44f7c16065c83060cbb9dd9b367141682a6e2b8e
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 11:51:58 2007 +1100

    cfq-iosched: defer slice activation to first request being active
    
    This better matches what time the queue is actually spending doing
    IO.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 99f9628aba4d8fb3b8d955c9efded0d0a1995fad
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Mon Feb 5 11:56:25 2007 +0100

    [PATCH] cfq-iosched: use last service point as the fairness criteria
    
    Right now we use slice_start, which gives async queues an unfair
    advantage. Chance that to service_last, and base the resorter
    on that.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit b0b8d74941b7bc67edec26e4c114d27827edfd09
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 11:35:30 2007 +1100

    cfq-iosched: document the cfqq flags
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 98e41c7dfc90c0e9a1086502d4c4d367e1ad74db
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Mon Feb 5 11:55:35 2007 +0100

    [PATCH] cfq-iosched: move on_rr check into cfq_resort_rr_list()
    
    Move the on_rr check into cfq_resort_rr_list(), every call site
    needs to check it anyway.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit aaf1228ddfb44f04c87d1e7dfc5ccffdba74363d
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 11:30:16 2007 +1100

    cfq-iosched: remove cfq_io_context last_queue
    
    It hasn't been used for a while, kill it off and remove the old
    if 0 code chunk.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 783660b2f60418144e168ab75a06786f9695fc70
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Fri Jan 19 11:27:47 2007 +1100

    elevator: don't sort reads between writes
    
    Don't allow elv_dispatch_sort() to mix reads and writes together,
    it's rarely a good idea.
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit cad9751642b62cbb5f62feedc546b4f7890497d4
Author: Jens Axboe <jens.axboe@oracle.com>
Date:   Sun Jan 14 22:26:09 2007 +1100

    elevator: abstract out the activate and deactivate functions
    
    Signed-off-by: Jens Axboe <jens.axboe@oracle.com>

commit 958b7f37ee0fb2846c8d44310a68ae9605614ff9
Merge: d687983... e7ff6ae...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:53:39 2007 -0800

    Merge git://oss.sgi.com:8090/xfs/xfs-2.6
    
    * git://oss.sgi.com:8090/xfs/xfs-2.6: (33 commits)
      [XFS] Don't use kmap in xfs_iozero.
      [XFS] Remove a bunch of unused functions from XFS.
      [XFS] Remove unused arguments from the XFS_BTREE_*_ADDR macros.
      [XFS] Remove unused header files for MAC and CAP checking functionality.
      [XFS] Make freeze code a little cleaner.
      [XFS] Remove unused argument to xfs_bmap_finish
      [XFS] Clean up use of VFS attr flags
      [XFS] Remove useless memory barrier
      [XFS] XFS sysctl cleanups
      [XFS] Fix assertion in xfs_attr_shortform_remove().
      [XFS] Fix callers of xfs_iozero() to zero the correct range.
      [XFS] Ensure a frozen filesystem has a clean log before writing the dummy
      [XFS] Fix sub-block zeroing for buffered writes into unwritten extents.
      [XFS] Re-initialize the per-cpu superblock counters after recovery.
      [XFS] Fix block reservation changes for non-SMP systems.
      [XFS] Fix block reservation mechanism.
      [XFS] Make growfs work for amounts greater than 2TB
      [XFS] Fix inode log item use-after-free on forced shutdown
      [XFS] Fix attr2 corruption with btree data extents
      [XFS] Workaround log space issue by increasing XFS_TRANS_PUSH_AIL_RESTARTS
      ...

commit d68798374bcf5cd4a19105b86d96121651b3c8cb
Merge: 412ecd7... 2a598df...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:50:24 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/dtor/input
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/dtor/input:
      Input: remove scan_keyb driver
      Input: i8042 - fix AUX IRQ delivery check
      Input: wistron - add support for Fujitsu-Siemens Amilo D88x0
      Input: inport - use correct config option for ATIXL
      Input: HIL - handle erros from input_register_device()
      Input: tsdev - schedule removal
      Input: add Atlas button driver
      Input: ads7846 - be more compatible with the hwmon framework
      Input: ads7846 - detect pen up from GPIO state
      Input: ads7846 - select correct SPI mode
      Input: ads7846 - switch to using hrtimer
      Input: ads7846 - optionally leave Vref on during differential measurements
      Input: ads7846 - pluggable filtering logic
      Input: gpio-keys - keyboard driver for GPIO buttons
      Input: hid-ff - add support for Logitech Momo racing wheel
      Input: i8042 - really suppress ACK/NAK during panic blink
      Input: pc110pad - return proper error

commit 412ecd7751a2653ab17df39a1dc3565a548633fd
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 22:47:33 2007 -0800

    [PATCH] fix fatal kernel-doc error
    
    Teach kernel-doc to handle functions that look like the new
    pcim_iomap_table().  Fixes this fatal error in scripts/kernel-doc:
    
      DOCPROC Documentation/DocBook/kernel-api.xml
    Error(/tester/linsrc/linux-2.6.20-git6//drivers/pci/pci.c:1351): cannot understand prototype: 'void __iomem * const * pcim_iomap_table(struct pci_dev *pdev) '
    make[1]: *** [Documentation/DocBook/kernel-api.xml] Error 1
    make: *** [htmldocs] Error 2
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5f0b1437e0708772b6fecae5900c01c3b5f9b512
Merge: 574009c... 81b7bbd...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:44:25 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6: (97 commits)
      [SCSI] zfcp: removed wrong comment
      [SCSI] zfcp: use of uninitialized variable
      [SCSI] zfcp: Invalid locking order
      [SCSI] aic79xx: use dma_get_required_mask()
      [SCSI] aic79xx: fix bracket mismatch in unused macro
      [SCSI] BusLogic: Replace 'boolean' by 'bool'
      [SCSI] advansys: clean up warnings
      [SCSI] 53c7xx: brackets fix in uncompiled code
      [SCSI] nsp_cs: remove old scsi code
      [SCSI] aic79xx: make ahd_match_scb() static
      [SCSI] DAC960: kmalloc->kzalloc/Casting cleanups
      [SCSI] scsi_kmap_atomic_sg(): check that local irqs are disabled
      [SCSI] Buslogic: local_irq_disable() is redundant after local_irq_save()
      [SCSI] aic94xx: update for v28 firmware
      [SCSI] scsi_error: Fix lost EH commands
      [SCSI] aic94xx: Add default bus reset handler
      [SCSI] aic94xx: Remove TMF result code munging
      [SCSI] libsas: Add an LU reset mechanism to the error handler
      [SCSI] libsas: Don't BUG when connecting two expanders via wide port
      [SCSI] st: fix Tape dies if wrong block size used, bug 7919
      ...

commit 574009c1a895aeeb85eaab29c235d75852b09eb8
Merge: a727fea... e692eb3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:40:04 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus:
      [MIPS] signal: do not inline handle_signal()
      [MIPS] signal: do not use save_static_function() anymore
      [MIPS] signal32: no need to save c0_status register in setup_sigcontext32()
      [MIPS] signal32: reduce {setup,restore}_sigcontext32 sizes
      [MIPS] signal: factorize debug code
      [MIPS] signal: test return value of install_sigtramp()
      [MIPS] signal32: remove duplicate code
      [MIPS] signal: clean up sigframe structure
      [MIPS] signal: do not inline functions in signal-common.h
      [MIPS] signals: reduce {setup,restore}_sigcontext sizes
      [MIPS] Fix warning in get_user when fetching pointer object from userspace.
      [MIPS] Fix eth2 platform device id for jaguar_atx and ocelot_3 platforms
      [MIPS] JMR3927 and RBTX49x7 support little endian
      [MIPS] RBTX49x7: declare prom_getcmdline()
      [MIPS] RTLX: Sprinkle device model code into code to make udev happier.
      [MIPS] VPE: Sprinkle device model code into code to make udev happier.

commit a727fea99bf4b2addcd64c596735148117a7b37f
Merge: cb18ecc... 12c8345...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:39:00 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/drzeus/mmc
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/drzeus/mmc:
      tifm_sd: treat "status error" as normal command completion
      mmc: wbsd: Remove stray kunmap_atomic()
      mmc: sdhci: Stop asking for mail
      mmc: sdhci: Remove driver version
      mmc: wbsd: Remove driver version

commit cb18eccff48ef3986d1072964590bce6fec705fb
Merge: c827ba4... 5ef213f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:38:13 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (45 commits)
      [IPV4]: Restore multipath routing after rt_next changes.
      [XFRM] IPV6: Fix outbound RO transformation which is broken by IPsec tunnel patch.
      [NET]: Reorder fields of struct dst_entry
      [DECNET]: Convert decnet route to use the new dst_entry 'next' pointer
      [IPV6]: Convert ipv6 route to use the new dst_entry 'next' pointer
      [IPV4]: Convert ipv4 route to use the new dst_entry 'next' pointer
      [NET]: Introduce union in struct dst_entry to hold 'next' pointer
      [DECNET]: fix misannotation of linkinfo_dn
      [DECNET]: FRA_{DST,SRC} are le16 for decnet
      [UDP]: UDP can use sk_hash to speedup lookups
      [NET]: Fix whitespace errors.
      [NET] XFRM: Fix whitespace errors.
      [NET] X25: Fix whitespace errors.
      [NET] WANROUTER: Fix whitespace errors.
      [NET] UNIX: Fix whitespace errors.
      [NET] TIPC: Fix whitespace errors.
      [NET] SUNRPC: Fix whitespace errors.
      [NET] SCTP: Fix whitespace errors.
      [NET] SCHED: Fix whitespace errors.
      [NET] RXRPC: Fix whitespace errors.
      ...

commit c827ba4cb49a30ce581201fd0ba2be77cde412c7
Merge: fdba0f2... 784020f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Sun Feb 11 11:37:45 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Update defconfig.
      [SPARC64]: Add PCI MSI support on Niagara.
      [SPARC64] IRQ: Use irq_desc->chip_data instead of irq_desc->handler_data
      [SPARC64]: Add obppath sysfs attribute for SBUS and PCI devices.
      [PARTITION]: Add whole_disk attribute.

commit b887060532b98d8c0f3a1c3169f06f55bb196bd8
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Feb 11 20:33:13 2007 +0100

    [ARM] 4161/1: S3C24XX: fix leakage of plat-s3c24xx Kconfig items
    
    Do not export S3C24XX from plat-s3c24xx on non-s3c24xx systems
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fdba0f2da4b1db682b829b76302b2f25c376051c
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Sun Feb 11 18:20:38 2007 +0000

    [PATCH] add missing io...._rep() on sparc32
    
    same as on sparc64
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 23db764d3db5a4bb1e104ad9310e5dc18e4ffa1b
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Sun Feb 11 18:15:29 2007 +0000

    [PATCH] Switch s390 to NO_IOMEM
    
    Martin Schwidefsky wrote:
      "s390 does not even need (in|out)b(_p|).  I wondered what else from
       io.h do we not need.  The answer is: almost nothing.  With the devres
       patch from Al and the dma-mapping patch from Heiko we can get rid of
       iomem and all associated definitions."
    
    So we'll just need to replace NO_IOPORT with NO_IOMEM in Kconfig and
    kill arch/s390/mm/ioremap.c.
    
    BTW, there's an annoying bit of junk in there - IO_SPACE_LIMIT.  We
    only need it for /proc/ioports, which AFAICS shouldn't even be there
    on s390 (or uml).  OTOH, removing that thing would mean a user-visible
    change - we go from "empty file in /proc" to "no such file in /proc"...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ea8176994003483a18c8fed580901e2125f8a83
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Sun Feb 11 15:41:31 2007 +0000

    [PATCH] sort the devres mess out
    
    * Split the implementation-agnostic stuff in separate files.
    * Make sure that targets using non-default request_irq() pull
      kernel/irq/devres.o
    * Introduce new symbols (HAS_IOPORT and HAS_IOMEM) defaulting to positive;
      allow architectures to turn them off (we needed these symbols anyway for
      dependencies of quite a few drivers).
    * protect the ioport-related parts of lib/devres.o with CONFIG_HAS_IOPORT.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2835fdfa4a7f1400986d76d054237809a9392406
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 18:13:37 2007 +0000

    [PATCH] FRA_{DST,SRC} are le16 for decnet
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d88e661fb9d28f1de799d524a8625b35eee94bbb
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 18:13:42 2007 +0000

    [PATCH] fix misannotation of linkinfo_dn
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c67687f36acd5e9f387474547143c12fc9ec2737
Author: Don Mullis <dwm@meer.net>
Date:   Sat Feb 10 01:46:51 2007 -0800

    [PATCH] fix DocBook build
    
    Fix DocBook build.  Regression was introduced by
    gregkh-usb-usb-linux-usb_ch9h-becomes-linux-usb-ch9h.patch
    
    Tested by `make htmldocs`.
    
    Signed-off-by: Don Mullis <dwm@meer.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 249b061a9aab247d4daf3a2f28e8836e722c3d99
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:46:49 2007 -0800

    [PATCH] fix gregkh-usb-usbcore-remove-unused-bandwith-related-code
    
    drivers/isdn/gigaset/bas-gigaset.c: In function 'dump_urb':
    drivers/isdn/gigaset/bas-gigaset.c:258: error: 'struct urb' has no member named 'bandwidth'
    
    Cc: Alan Stern <stern@rowland.harvard.edu>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3abf3beda75a10988eab4c1deab893e2d38e643e
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Sat Feb 10 01:46:48 2007 -0800

    [PATCH] CHAR-Amiserial: turn local_save_flags() + local_irq_disable() into local_irq_save()
    
    drivers/char/amiserial.c::rs_write() contains local_irq_disable() after
    local_save_flags().  Turn it into local_irq_save().
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c70555b051f2a32bf94a7e1c75b6b6759031b989
Author: Alexandre Bounine <Alexandre.Bounine@tundra.com>
Date:   Sat Feb 10 01:46:47 2007 -0800

    [PATCH] rapidio: fix multi-switch enumeration
    
    This patch contains two fixes for RapisIO enumeration logic:
    
    1. Fix enumeration in configurations with multiple switches. The patch adds:
    
       a. Enumeration of an empty switch.  Empty switch is a switch that
          does not have any endpoint devices attached to it (except host device
          or previous switch in a chain).  New code assigns a phony destination
          ID associated with the switch and sets up corresponding routes.
    
       b. Adds a second pass to the enumeration to setup routes to
          devices discovered after switch was scanned.
    
    2. Fix enumeration failure when riohdid parameter has non-zero value.
       Current version fails to setup response path to the host when it has
       destination ID other that 0.
    
    Signed-off-by: Alexandre Bounine <alexandreb@tundra.com>
    Acked-by: Matt Porter <mporter@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d5698c28b6e4711e4747bf155f69936208d60e28
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Feb 10 01:46:46 2007 -0800

    [PATCH] tty: cleanup release_mem
    
    release_mem contains two copies of exactly the same code.  Refactor these
    into a new helper, release_tty.  The only change in behaviour is that the
    driver reference count is now decremented after the master tty has been
    freed instead of before.
    
    [penberg@cs.helsinki.fi: fix use-after-free in release_tty.]
    Cc: Alan Cox <alan@redhat.com>
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4b98d11b40f03382918796f3c5c936d5495d20a4
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Feb 10 01:46:45 2007 -0800

    [PATCH] ifdef ->rchar, ->wchar, ->syscr, ->syscw from task_struct
    
    They are fat: 4x8 bytes in task_struct.
    They are uncoditionally updated in every fork, read, write and sendfile.
    They are used only if you have some "extended acct fields feature".
    
    And please, please, please, read(2) knows about bytes, not characters,
    why it is called "rchar"?
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Cc: Balbir Singh <balbir@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 18f705f49a5b19206233f7cef8f869ce7291f8c8
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Feb 10 01:46:44 2007 -0800

    [PATCH] Move TASK_XACCT, TASK_IO_ACCOUNTING up in menus
    
    Since they depends on TASKSTATS, it would be nice to move them closer to
    another options depending on TASKSTATS.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8d06087714b78e8921bd30b5c64202fe80c47339
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sat Feb 10 01:46:38 2007 -0800

    [PATCH] _proc_do_string(): fix short reads
    
    If you try to read things like /proc/sys/kernel/osrelease with single-byte
    reads, you get just one byte and then EOF.  This is because _proc_do_string()
    assumes that the caller is read()ing into a buffer which is large enough to
    fit the whole string in a single hit.
    
    Fix.
    
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Michael Tokarev <mjt@tls.msk.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c75fb88dbcc470e6041a20b1457b4835b9a0a48a
Author: Pavel Roskin <proski@gnu.org>
Date:   Sat Feb 10 01:46:37 2007 -0800

    [PATCH] Fix sparse annotation of spin unlock macros in one case
    
    SMP systems without premption and spinlock debugging enabled use unlock
    macros that don't tell sparse that the lock is being released.  Add sparse
    annotations in this case.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aa0f030374228407bc4e3f5482eeab787ba53c8a
Author: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
Date:   Sat Feb 10 01:46:37 2007 -0800

    [PATCH] Change constant zero to NOTIFY_DONE in ratelimit_handler()
    
    Change a hard-coded constant 0 to the symbolic equivalent NOTIFY_DONE in
    the ratelimit_handler() CPU notifier handler function.
    
    Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 656dad312fb41ed95ef08325e9df9bece3aacbbb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Feb 10 01:46:36 2007 -0800

    [PATCH] highmem: catch illegal nesting
    
    Catch illegally nested kmap_atomic()s even if the page that is mapped by
    the 'inner' instance is from lowmem.
    
    This avoids spuriously zapped kmap-atomic ptes and turns hard to find
    crashes into clear asserts at the bug site.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3e4fdaf8aebe489e8e59826fdf78cb64356d2ad0
Author: Dmitriy Monakhov <dmonakhov@openvz.org>
Date:   Sat Feb 10 01:46:35 2007 -0800

    [PATCH] jbd layer function called instead of fs specific one
    
    jbd function called instead of fs specific one.
    
    Signed-off-by: Dmitriy Monakhov <dmonakhov@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 501b9ebf43f9973c3e246c8fbd17144d81a989ef
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:34 2007 -0800

    [PATCH] Fix apparent typo CONFIG_LOCKDEP_DEBUG
    
    Replace the apparent typo CONFIG_LOCKDEP_DEBUG with the correct
    CONFIG_DEBUG_LOCKDEP.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8cddd7076ab440906dcf2831e37a147484af80fc
Author: Cedric Le Goater <clg@fr.ibm.com>
Date:   Sat Feb 10 01:46:33 2007 -0800

    [PATCH] mxser: remove useless fields
    
    the session and pgrp fields in mxser_struct are unused.
    
    Signed-off-by: Cedric Le Goater <clg@fr.ibm.com>
    Cc: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 87d156bfd50ac6e66db981989948b7311a25b6ae
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Sat Feb 10 01:46:31 2007 -0800

    [PATCH] drivers/block/DAC960: convert 'boolean' to 'bool'
    
    Converts 'boolean' to 'bool' and removes the 'boolean' typedef.
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Cc: Jens Axboe <axboe@suse.de>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2b1cd4c43b90059b54baa8d9113365984113c631
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Sat Feb 10 01:46:30 2007 -0800

    [PATCH] some rtc documentation updates
    
    Fix typo when describing RTC_WKALM.  Add some helpful pointers to people
    developing their own RTC driver.  Change a bunch of the error messages in the
    test program to be a bit more helpful.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1efc5da3cf567d2f6b795f9d2112ed97fec4ee7c
Author: Mathieu Desnoyers <compudj@krystal.dyndns.org>
Date:   Sat Feb 10 01:46:29 2007 -0800

    [PATCH] order of lockdep off/on in vprintk() should be changed
    
    The order of locking between lockdep_off/on() and local_irq_save/restore() in
    vprintk() should be changed.
    
    * In kernel/printk.c :
    
    vprintk() does :
    
    preempt_disable()
    local_irq_save()
    lockdep_off()
    spin_lock(&logbuf_lock)
    spin_unlock(&logbuf_lock)
    if(!down_trylock(&console_sem))
       up(&console_sem)
    lockdep_on()
    local_irq_restore()
    preempt_enable()
    
    The goals here is to make sure we do not call printk() recursively from
    kernel/lockdep.c:__lock_acquire() (called from spin_* and down/up) nor from
    kernel/lockdep.c:trace_hardirqs_on/off() (called from local_irq_restore/save).
    It can then potentially call printk() through mark_held_locks/mark_lock.
    
    It correctly protects against the spin_lock call and the up/down call, but it
    does not protect against local_irq_restore. It could cause infinite recursive
    printk/trace_hardirqs_on() calls when printk() is called from the
    mark_lock() error handing path.
    
    We should change the locking so it becomes correct :
    
    preempt_disable()
    lockdep_off()
    local_irq_save()
    spin_lock(&logbuf_lock)
    spin_unlock(&logbuf_lock)
    if(!down_trylock(&console_sem))
       up(&console_sem)
    local_irq_restore()
    lockdep_on()
    preempt_enable()
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 482a579b370a0bf924b577efd6c750284a95e0fb
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:28 2007 -0800

    [PATCH] Remove unused kernel config option PARIDE_PARPORT
    
    Remove the unused kernel config option PARIDE_PARPORT.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 730c385bc58802b51812bfcd13ae3578d16c1dfd
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:28 2007 -0800

    [PATCH] Remove unused kernel config option ZISOFS_FS
    
    Remove the kernel config option ZISOFS_FS, since it appears that the actual
    option is simply ZISOFS.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b9b2a700378016cead20f34232be87eea45087d2
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:27 2007 -0800

    [PATCH] Remove references to obsolete kernel config option DEBUG_RWSEMS
    
    Remove the few references to the obsolete kernel config option
    DEBUG_RWSEMS.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1c6ae7ecd21fbb655ea96a7e9798bedb2917ef91
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:26 2007 -0800

    [PATCH] Remove dead kernel config option AEDSP16_MPU401.
    
    Remove the dead kernel config option AEDSP16_MPU401.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b385a144ee790f00e8559bcb8024d042863f9be1
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:25 2007 -0800

    [PATCH] Replace regular code with appropriate calls to container_of()
    
    Replace a small number of expressions with a call to the "container_of()"
    macro.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 521dae191e5ba9362152da9fd3a12203e087df83
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:46:24 2007 -0800

    [PATCH] cleanup include/linux/reiserfs_xattr.h
    
    - #ifdef guard this header for multiple inclusion
    - adjust the #include's to what is actually required by this header
    - remove an unneeded #ifdef
    - #endif comments
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5b0a2075adb04846870a7fc1e62b08a532054ba6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:46:24 2007 -0800

    [PATCH] cleanup include/linux/xattr.h
    
    - reduce the userspace visible part
    - fix the in-kernel compilation
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 842f968f3fcdc475c95ec76a03b29c5147e87b54
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:23 2007 -0800

    [PATCH] Remove final reference to superfluous smp_commence()
    
    Remove the last (and commented out) invocation of the obsolete
    smp_commence() call.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Ingo Molnar <mingo@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 72ed3d035855841ad611ee48b20909e9619d4a79
Author: Nick Piggin <npiggin@suse.de>
Date:   Sat Feb 10 01:46:22 2007 -0800

    [PATCH] buffer: memorder fix
    
    unlock_buffer(), like unlock_page(), must not clear the lock without
    ensuring that the critical section is closed.
    
    Mingming later sent the same patch, saying:
    
      We are running SDET benchmark and saw double free issue for ext3 extended
      attributes block, which complains the same xattr block already being freed (in
      ext3_xattr_release_block()).  The problem could also been triggered by
      multiple threads loop untar/rm a kernel tree.
    
      The race is caused by missing a memory barrier at unlock_buffer() before the
      lock bit being cleared, resulting in possible concurrent h_refcounter update.
      That causes a reference counter leak, then later leads to the double free that
      we have seen.
    
      Inside unlock_buffer(), there is a memory barrier is placed *after* the lock
      bit is being cleared, however, there is no memory barrier *before* the bit is
      cleared.  On some arch the h_refcount update instruction and the clear bit
      instruction could be reordered, thus leave the critical section re-entered.
    
      The race is like this: For example, if the h_refcount is initialized as 1,
    
      cpu 0:                                   cpu1
      --------------------------------------   -----------------------------------
      lock_buffer() /* test_and_set_bit */
      clear_buffer_locked(bh);
                                              lock_buffer() /* test_and_set_bit */
      h_refcount = h_refcount+1; /* = 2*/     h_refcount = h_refcount + 1; /*= 2 */
                                              clear_buffer_locked(bh);
      ....                                    ......
    
      We lost a h_refcount here. We need a memory barrier before the buffer head lock
      bit being cleared to force the order of the two writes.  Please apply.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c742b53114f8d1535608dafb6a5690103a0748b5
Author: Rob Landley <rob@landley.net>
Date:   Sat Feb 10 01:46:20 2007 -0800

    [PATCH] Documentation/rbtree.txt
    
    Documentation for lib/rbtree.c.
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 82ddcb040570411fc2d421d96b3e69711c670328
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:20 2007 -0800

    [PATCH] extend the set of "__attribute__" shortcut macros
    
    Extend the set of "__attribute__" shortcut macros, and remove identical
    (and now superfluous) definitions from a couple of source files.
    
    based on a page at robert love's blog:
    
    	http://rlove.org/log/2005102601
    
    extend the set of shortcut macros defined in compiler-gcc.h with the
    following:
    
    #define __packed                       __attribute__((packed))
    #define __weak                         __attribute__((weak))
    #define __naked                        __attribute__((naked))
    #define __noreturn                     __attribute__((noreturn))
    #define __pure                         __attribute__((pure))
    #define __aligned(x)                   __attribute__((aligned(x)))
    #define __printf(a,b)                  __attribute__((format(printf,a,b)))
    
    Once these are in place, it's up to subsystem maintainers to decide if they
    want to take advantage of them.  there is already a strong precedent for
    using shortcuts like this in the source tree.
    
    The ones that might give people pause are "__aligned" and "__printf", but
    shortcuts for both of those are already in use, and in some ways very
    confusingly.  note the two very different definitions for a macro named
    "ALIGNED":
    
      drivers/net/sgiseeq.c:#define ALIGNED(x) ((((unsigned long)(x)) + 0xf) & ~(0xf))
      drivers/scsi/ultrastor.c:#define ALIGNED(x) __attribute__((aligned(x)))
    
    also:
    
      include/acpi/platform/acgcc.h:
        #define ACPI_PRINTF_LIKE(c) __attribute__ ((__format__ (__printf__, c, c+1)))
    
    Given the precedent, then, it seems logical to at least standardize on a
    consistent set of these macros.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3e8a75d2acfc61ebf25524666a0a2c6abb0620c
Author: Kirill Korotaev <dev@sw.ru>
Date:   Sat Feb 10 01:46:19 2007 -0800

    [PATCH] Extract and use wake_up_klogd()
    
    Remove hack with printing space to wake up klogd.  Use explicit
    wake_up_klogd().
    
    See earlier discussion
    http://groups.google.com/group/fa.linux.kernel/browse_frm/thread/75f496668409f58d/1a8f28983a51e1ff?lnk=st&q=wake_up_klogd+group%3Afa.linux.kernel&rnum=2#1a8f28983a51e1ff
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cefc8be82403cfc4325e7b9b063f77dc0f34e19e
Author: Kirill Korotaev <dev@sw.ru>
Date:   Sat Feb 10 01:46:18 2007 -0800

    [PATCH] Consolidate bust_spinlocks()
    
    Part of long forgotten patch
    http://groups.google.com/group/fa.linux.kernel/msg/e98e941ce1cf29f6?dmode=source
    Since then, m32r grabbed two copies.
    
    Leave s390 copy because of important absence of CONFIG_VT, but remove
    references to non-existent timerlist_lock.  ia64 also loses timerlist_lock.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c530cba649692512070e8c0131ba3eccade09269
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:46:17 2007 -0800

    [PATCH] Remove the last reference to rwlock_is_locked() macro.
    
    Remove the lone, remaining reference to the long-deceased
    rwlock_is_locked() macro.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 731b9a549882c76189baafccbd068d5785ea2a82
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Sat Feb 10 01:46:16 2007 -0800

    [PATCH] remove ext[34]_inc_count and _dec_count
    
    - Naming is confusing, ext3_inc_count manipulates i_nlink not i_count
    - handle argument passed in is not used
    - ext3 and ext4 already call inc_nlink and dec_nlink directly in other places
    
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2988a7740dc0dd9a0cb56576e8fe1d777dff0db3
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Sat Feb 10 01:46:16 2007 -0800

    [PATCH] return ENOENT from ext3_link when racing with unlink
    
    Return -ENOENT from ext[34]_link if we've raced with unlink and i_nlink is
    0.  Doing otherwise has the potential to corrupt the orphan inode list,
    because we'd wind up with an inode with a non-zero link count on the list,
    and it will never get properly cleaned up & removed from the orphan list
    before it is freed.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Cc: <linux-ext4@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 967bb77c69e3bc44dd1128a8b503a205cce3fd4a
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Feb 10 01:46:15 2007 -0800

    [PATCH] seq_file conversion: toshiba.c
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2e7842b887627c4319c4625d2b52fa6616fda2cd
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Feb 10 01:46:13 2007 -0800

    [PATCH] fix umask when noACL kernel meets extN tuned for ACLs
    
    Fix insecure default behaviour reported by Tigran Aivazian: if an ext2 or
    ext3 or ext4 filesystem is tuned to mount with "acl", but mounted by a
    kernel built without ACL support, then umask was ignored when creating
    inodes - though root or user has umask 022, touch creates files as 0666,
    and mkdir creates directories as 0777.
    
    This appears to have worked right until 2.6.11, when a fix to the default
    mode on symlinks (always 0777) assumed VFS applies umask: which it does,
    unless the mount is marked for ACLs; but ext[234] set MS_POSIXACL in
    s_flags according to s_mount_opt set according to def_mount_opts.
    
    We could revert to the 2.6.10 ext[234]_init_acl (adding an S_ISLNK test);
    but other filesystems only set MS_POSIXACL when ACLs are configured.  We
    could fix this at another level; but it seems most robust to avoid setting
    the s_mount_opt flag in the first place (at the expense of more ifdefs).
    
    Likewise don't set the XATTR_USER flag when built without XATTR support.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Cc: Tigran Aivazian <tigran@aivazian.fsnet.co.uk>
    Cc: <linux-ext4@vger.kernel.org>
    Cc: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9bbf81e4830db873300c1d0503b371b4f8a932ce
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Feb 10 01:46:11 2007 -0800

    [PATCH] seq_file conversion: coda
    
    Compile-tested.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: <jaharkes@cs.cmu.edu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 85cc9b11446fb8e2762269cfbc28676bfe2eaa4b
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Sat Feb 10 01:46:11 2007 -0800

    [PATCH] sn2: use static ->proc_fops
    
    fix-rmmod-read-write-races-in-proc-entries.patch doesn't want dynamically
    allocated ->proc_fops, because it will set it to NULL at module unload time.
    
    Regardless of module status, switch to statically allocated ->proc_fops which
    leads to simpler code without wrappers.
    
    AFAICS, also fix the following bug: "sn_force_interrupt" proc entry set
    ->write for itself, but was created with 0444 permissions. Change to 0644.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 38584c14bbba02d8aedace335073b30e49de66a0
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Sat Feb 10 01:46:10 2007 -0800

    [PATCH] raw: don't allow the creation of a raw device with minor number 0
    
    Minor number 0 (under the raw major) is reserved for the rawctl device
    file, which is used to query, set, and unset raw device bindings.  However,
    the ioctl interface does not protect the user from specifying a raw device
    with minor number 0:
    
    $ sudo ./raw /dev/raw/raw0 /dev/VolGroup00/swap
    /dev/raw/raw0:  bound to major 253, minor 2
    $ ls -l /dev/rawctl
    ls: /dev/rawctl: No such file or directory
    $ ls -l /dev/raw/raw0
    crw------- 1 root root 162, 0 Jan 12 10:51 /dev/raw/raw0
    $ sudo ./raw -qa
    Cannot open master raw device '/dev/rawctl' (No such file or directory)
    
    As you can see, this prevents any further raw operations from
    succeeding.  The fix (from Steve Fernandez) is quite simple--do not
    allow the allocation of minor number 0.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Cc: Steven Fernandez <sfernand@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 11f57cedcf382574a1e41d6cec2349f287fcea67
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Feb 10 01:46:09 2007 -0800

    [PATCH] audit: fix audit_filter_user_rules() initialization bug
    
    gcc emits this warning:
    
     kernel/auditfilter.c: In function 'audit_filter_user':
     kernel/auditfilter.c:1611: warning: 'state' is used uninitialized in this function
    
    I tend to agree with gcc - there are a couple of plausible exit paths from
    audit_filter_user_rules() where it does not set 'state', keeping the
    variable uninitialized.  For example if a filter rule has an AUDIT_POSSIBLE
    action.  Initialize to 'wont audit'.  Fix whitespace damage too.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ead6596b9e776ac32d82f7d1931d7638e6d4a7bd
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Sat Feb 10 01:46:08 2007 -0800

    [PATCH] ext4: refuse ro to rw remount of fs with orphan inodes
    
    In the rare case where we have skipped orphan inode processing due to a
    readonly block device, and the block device subsequently changes back to
    read-write, disallow a remount,rw transition of the filesystem when we have an
    unprocessed orphan inodes as this would corrupt the list.
    
    Ideally we should process the orphan inode list during the remount, but that's
    trickier, and this plugs the hole for now.
    
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Cc: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ea9a05a1330053759c02eb2c60547085140a4cbd
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Sat Feb 10 01:46:07 2007 -0800

    [PATCH] ext3: refuse ro to rw remount of fs with orphan inodes
    
    In the rare case where we have skipped orphan inode processing due to a
    readonly block device, and the block device subsequently changes back to
    read-write, disallow a remount,rw transition of the filesystem when we have an
    unprocessed orphan inodes as this would corrupt the list.
    
    Ideally we should process the orphan inode list during the remount, but that's
    trickier, and this plugs the hole for now.
    
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Cc: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bfb58478fe2f8cbbb776d910ff3549515e3c8f4f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:46:06 2007 -0800

    [PATCH] cleanup linux/byteorder/swabb.h
    
    - no longer a userspace header
    - add #include <linux/types.h> for in-kernel compilation
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a9cccd34372f7075e8746395609bc78f0fbaf204
Author: Matthias Fuchs <matthias.fuchs@esd-electronics.com>
Date:   Sat Feb 10 01:46:05 2007 -0800

    [PATCH] serial: support for new board
    
    Add support for the CPCI-ASIO4 quad port CompactPCI UART board from
    electronic system design gmbh.
    
    Signed-off-by: Matthias Fuchs <matthias.fuchs@esd-electronics.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 482120084d843d4cbb7ff3eb84510a1471130ce0
Author: Thomas Hoehn <thomas.hoehn@avocent.com>
Date:   Sat Feb 10 01:46:05 2007 -0800

    [PATCH] Perle multimodem card (PCI-RAS) detection
    
    Get the Perle quad-modem PCI card (PCI-RAS4) detected by serial driver.  It
    may also get the PCI-RAS8 running, but can't guarantee as I didn't had one for
    testing.
    
    Signed-off-by: Thomas Hoehn <thomas.hoehn@avocent.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a21217daae8ce6e841e33d4a2bb24026723cb21d
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 01:46:04 2007 -0800

    [PATCH] kernel-doc: fix some odd spacing issues
    
    - in man and text mode output, if the function return type is empty (like it
      is for macros), don't print the return type and a following space; this
      fixes an output malalignment;
    
    - in the function short description, strip leading, trailing, and multiple
      embedded spaces (to one space); this makes function name/description output
      spacing consistent;
    
    - fix a comment typo;
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6e8c818829587f001cacae5af4400e4e3aa90a37
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 01:46:03 2007 -0800

    [PATCH] docbook: add edd firmware interfaces
    
    Cleanup kernel-doc notation in drivers/firmware/edd.c.
    
    Add edd.c to DocBook/kernel-api.tmpl.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Acked-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7be2c7c96aff2871240d61fef508c41176c688b5
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Feb 10 01:46:02 2007 -0800

    [PATCH] RTC framework driver for CMOS RTCs
    
    This is an "RTC framework" driver for the "CMOS" RTCs which are standard on
    PCs and some other platforms.  That's MC146818 compatible silicon.
    Advantages of this vs.  drivers/char/rtc.c (use one _or_ the other, only
    one will be able to claim the RTC irq) include:
    
     - This leverages both the new RTC framework and the driver model; both
       PNPACPI and platform device modes are supported.  (A separate patch
       creates a platform device on PCs where PNPACPI isn't configured.)
    
     - It supports common extensions like longer alarms.  (A separate patch
       exports that information from ACPI through platform_data.)
    
     - Likewise, system wakeup events use "real driver model support", with
       policy control via sysfs "wakeup" attributes and and using normal rtc
       ioctls to manage wakeup.  (Patch in the works.  The ACPI hooks are
       known; /proc/acpi/alarm can vanish.  Making it work with EFI will
       be a minor challenge to someone with e.g. a MiniMac.)
    
    It's not yet been tested on non-x86 systems, without ACPI, or with HPET.
    And the RTC framework will surely have teething pains on "mainstream"
    PC-based systems (though must embedded Linux systems use it heavily), not
    limited to sorting out the "/dev/rtc0" issue (udev easily tweaked).  Also,
    the ALSA rtctimer code doesn't use the new RTC API.
    
    Otherwise, this should be a no-known-regressions replacement for the old
    drivers/char/rtc.c driver, and should help the non-embedded distros (and
    the new timekeeping code) start to switch to the framework.
    
    Note also that any systems using "rtc-m48t86" are candidates to switch over
    to this more functional driver; the platform data is different, and the way
    bytes are read is different, but otherwise those chips should be compatible.
    
    [akpm@osdl.org: sparc32 fix]
    [akpm@osdl.org: sparc64 fix]
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Woody Suwalski <woodys@xandros.com>
    Cc: Alessandro Zummo <alessandro.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f1f8810cf48dd88ee70e974924f2dd76e5669dd5
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sat Feb 10 01:46:01 2007 -0800

    [PATCH] local_t: Documentation
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d4d23add3abcd18d8021b99f230df608ccb2f007
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sat Feb 10 01:46:00 2007 -0800

    [PATCH] Common compat_sys_sysinfo
    
    I noticed that almost all architectures implemented exactly the same
    sys32_sysinfo...  except parisc, where a bug was to be found in handling of
    the uptime.  So let's remove a whole whack of code for fun and profit.
    Cribbed compat_sys_sysinfo from x86_64's implementation, since I figured it
    would be the best tested.
    
    This patch incorporates Arnd's suggestion of not using set_fs/get_fs, but
    instead extracting out the common code from sys_sysinfo.
    
    Cc: Christoph Hellwig <hch@infradead.org>
    Cc: <linux-arch@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 72fd4a35a824331d7a0f4168d7576502d95d34b3
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:45:59 2007 -0800

    [PATCH] Numerous fixes to kernel-doc info in source files.
    
    A variety of (mostly) innocuous fixes to the embedded kernel-doc content in
    source files, including:
    
      * make multi-line initial descriptions single line
      * denote some function names, constants and structs as such
      * change erroneous opening '/*' to '/**' in a few places
      * reword some text for clarity
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 262086cf5b5343c2b81c97b1c606058e921859df
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:45:58 2007 -0800

    [PATCH] Discuss a couple common errors in kernel-doc usage.
    
    Explain a couple of the most common errors in kernel-doc usage.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 78137e3b34e122949e6de36a894fb5843664b8f9
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sat Feb 10 01:45:57 2007 -0800

    [PATCH] tty: improve encode_baud_rate logic
    
    Mostly so people can see the work in progress.  This enhances the encode
    function which isn't currently used in the base tree but is when using some of
    the testing tty patches.
    
    This resolves a problem with some hardware where applications got confusing
    information from the tty ioctls.  Correct but confusing.
    
    In some situations asking for, say, 9600 baud actually gets you 9595 baud or
    similar near-miss values.  With the old code this meant that a request for
    B9600 got a return of BOTHER, 9595 which programs interpreted as a failure.
    
    The new code now works on the following basis
    
    - If you ask for specific rate via BOTHER, you get a precise return
    
    - If you ask for a standard Bfoo rate and the result is close you get a Bfoo
      return
    
    - If you ask for a standard Bfoo rate and get something way off you get a
      BOTHER/rate return
    
    This seems to fix up the cases I've found where this broke compatibility.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 996a07bcb62c5935248e238a1150089f3d99a6fb
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 01:45:56 2007 -0800

    [PATCH] kernel-doc: allow more whitespace
    
    Allow whitespace in pointer-to-function
    	[accept "(* done)", not just "(*done)"].
    
    Allow tabs (spaces are already allowed) between "#define" and a macro name.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 78831ba68263d37382d61ea87d738975d992bd0d
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 01:45:55 2007 -0800

    [PATCH] sysrq: alphabetize command keys doc
    
    Alphabetize the sysrq command keys list.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b653d081c17e26101980c858a9808740533b78b4
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Feb 10 01:45:54 2007 -0800

    [PATCH] proc: remove useless (and buggy) ->nlink settings
    
    Bug: pnx8550 code creates directory but resets ->nlink to 1.
    
    create_proc_entry() et al will correctly set ->nlink for you.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Corey Minyard <minyard@acm.org>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 891dcd2f7ab15e2aaad07f6925b3a53fd8d5c02f
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 01:45:53 2007 -0800

    [PATCH] kernel-doc: allow a little whitespace
    
    In kernel-doc syntax, be a little flexible:  allow whitespace between
    a function parameter name and the colon that must follow it, such as:
    	@pdev : PCI device to unplug
    
    (This allows lots of megaraid kernel-doc to work without tons of
    editing.)
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3de3af130b75a79c7381573e5ea69cb59502023f
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:45:52 2007 -0800

    [PATCH] Remove unnecessary memset(0) calls after kzalloc() calls.
    
    Delete the few remaining unnecessary calls to memset(0) after a call to
    kzalloc().
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 100bb9349ea5cb4e667977de55bd6dc4ac7bc22f
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:45:51 2007 -0800

    [PATCH] proc_misc warning fix
    
    fs/proc/proc_misc.c: In function 'proc_misc_init':
    fs/proc/proc_misc.c:764: warning: unused variable 'entry'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cb799b8988e40a7871ae8e976248c33c562e3555
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:45:51 2007 -0800

    [PATCH] sysctl warning fix
    
    kernel/sysctl.c:2816: warning: 'sysctl_ipc_data' defined but not used
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5aab0ad5ed82d6be5173f5d2e9da6be9c1e84a9c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:45:50 2007 -0800

    [PATCH] schedule obsolete OSS drivers for removal, 3rd round
    
    Schedule obsolete OSS drivers (with ALSA drivers that support the same
    hardware) for removal.
    
    A rationale of the patch is in
      http://lkml.org/lkml/2006/12/18/305
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-By: Thomas Sailer <sailer@ife.ee.ethz.ch>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 77adbfbf4cf96fedf9b75bb330704828c187b190
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sat Feb 10 01:45:49 2007 -0800

    [PATCH] Add const for time{spec,val}_compare arguments
    
    The arguments are really const.  Mark them const to allow these functions
    being called from places where the arguments are const without getting
    useless compiler warnings.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a470e18f53940e7bd07b09f01c0970f653e268bf
Author: Olaf Hering <olh@suse.de>
Date:   Sat Feb 10 01:45:48 2007 -0800

    [PATCH] msdos partitions: fix logic error in AIX detection
    
    Correct the AIX magic check to let 'echo > /dev/sdb' actually work.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Cc: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4419d1ac7def3c2f74cab15e4a1c69cffcaadedd
Author: Olaf Hering <olh@suse.de>
Date:   Sat Feb 10 01:45:47 2007 -0800

    [PATCH] relax check for AIX in msdos partition table
    
    The patch to identify AIX disks and ignore them has caused at least one
    machine to fail to find the root partition on 2.6.19. The patch is:
    
    http://lkml.org/lkml/2006/7/31/117
    
    The problem is some disk formatters do not blow away the first 4 bytes
    of the disk. If the disk we are installing to used to have AIX on it,
    then the first 4 bytes will still have IBMA in EBCDIC.
    
    The install in question was debian etch. Im not sure what the best fix
    is, perhaps the AIX detection code could check more than the first 4
    bytes.
    
    The whole partition info for primary partitions is in this block:
    
      dd if=/dev/sdb count=$(( 4 * 16 )) bs=1 skip=$(( 0x1be ))
    
    All other data do not matter, beside the 0x55aa marker at the end of the
    first block.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Cc: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aa58d61d18b89b98521364550b481fd9bd18c3b6
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:45:46 2007 -0800

    [PATCH] Get rid of "double zeroing" of allocated pages
    
    Simplify the few instances where a call to "get_zeroed_page()" is closely
    followed by an unnecessary call to memset() to clear that page.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: chas williams <chas@cmf.nrl.navy.mil>
    Acked-by: Mauro Carvalho Chehab <mchehab@infradead.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 78ba2faf71c63990cba9997f18cf1d610e06e3f2
Author: Corey Minyard <minyard@acm.org>
Date:   Sat Feb 10 01:45:45 2007 -0800

    [PATCH] IPMI: Fix some RCU problems
    
    Fix some RCU problem pointed out by Paul McKenney of IBM.  These are:
    
    The wholesale move of the command receivers list into a new list was not
    safe because the list will point to the new tail during a traversal, so the
    traversal will never end on a reader if this happens during a read.
    
    Memory barriers were needed to handle proper ordering of the setting of the
    IPMI interface as valid.  Readers might not see proper ordering of data
    otherwise.
    
    In ipmi_smi_watcher_register(), the use of the _rcu suffix on the list is
    unnecessary.
    
    This require the list_splice_init_rcu() patch previously posted.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Cc: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3678d62f028689abc8ac5693b254e48f605f94ba
Author: Corey Minyard <minyard@acm.org>
Date:   Sat Feb 10 01:45:42 2007 -0800

    [PATCH] add an RCU version of list splicing
    
    This patch is in support of the IPMI driver.  I have tested this with the
    IPMI driver changes coming in the next patch.
    
    Add a list_splice_init_rcu() function to splice an RCU-protected list into
    another list.  This takes the sync function as an argument, so one would do
    something like:
    
    	INIT_LIST_HEAD(&list);
    	list_splice_init_rcu(&source, &dest, synchronize_rcu);
    
    The idea being to keep the RCU API proliferation down to a dull roar.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 16cf5b39b81b95d1e3d81df3ba8c82cadf54f551
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Sat Feb 10 01:45:41 2007 -0800

    [PATCH] fix sparse warnings from {asm,net}/checksum.h
    
    Rename the variable "sum" in the __range_ok macros to avoid name collisions
    causing lots of "symbol shadows an earlier one" warnings by sparse.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Hirokazu Takata <takata@linux-m32r.org>
    Acked-by: Ian Molton <spyro@f2s.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3db5db4fcdafc85b99d171336a7d2f25765ccd13
Author: Helge Deller <deller@gmx.de>
Date:   Sat Feb 10 01:45:40 2007 -0800

    [PATCH] use cycle_t instead of u64 in struct time_interpolator
    
    The 32bit and 64bit PARISC Linux kernels suffers from the problem, that the
    gettimeofday() call sometimes returns non-monotonic times.
    
    The easiest way to fix this, is to drop the PARISC-specific implementation
    and switch over to the generic TIME_INTERPOLATION framework.
    
    But in order to make it even compile on 32bit PARISC, the patch below which
    touches the generic Linux code, is mandatory.
    
    More information and the full patch with the parisc-specific changes is included in this thread: http://lists.parisc-linux.org/pipermail/parisc-linux/2006-December/031003.html
    
    As far as I could see, this patch does not change anything for the existing
    architectures which use this framework (IA64 and SPARC64), since "cycles_t"
    is defined there as unsigned 64bit-integer anyway (which then makes this
    patch a no-change for them).
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Cc: <linux-arch@vger.kernel.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fc0ecff698165ae8e178efa086e0dd1f385206b1
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:45:39 2007 -0800

    [PATCH] remove invalidate_inode_pages()
    
    Convert all calls to invalidate_inode_pages() into open-coded calls to
    invalidate_mapping_pages().
    
    Leave the invalidate_inode_pages() wrapper in place for now, marked as
    deprecated.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 54bc485522afdac33de5504da2ea8cdcc690674e
Author: Anton Altaparmakov <aia21@cam.ac.uk>
Date:   Sat Feb 10 01:45:38 2007 -0800

    [PATCH] Export invalidate_mapping_pages() to modules
    
    It makes no sense to me to export invalidate_inode_pages() and not
    invalidate_mapping_pages() and I actually need invalidate_mapping_pages()
    because of its range specification ability...
    
    akpm: also remove the export of invalidate_inode_pages() by making it an
    inlined wrapper.
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5449bc94152a6c4700f46786be600141234d8f0f
Author: Pavel Pisa <pisa@cmp.felk.cvut.cz>
Date:   Sat Feb 10 01:45:37 2007 -0800

    [PATCH] DocBook/HTML: correction of recursive A tags in HTML output
    
    The malformed HTML was generated after switch to XSLTPROC
    from SGML tools. The reference title
    
      <refentrytitle><phrase id="API-struct-x">struct x</phrase></refentrytitle>
    
    is converted into two recursive <a> tags
    
      <a href="re02.html"><span><a id="API-struct-x"></a>struct x</span></a>
    
    There is more possible solutions for this problem.
    One can be found at
    
      http://darkk.livejournal.com/
    
    The proposed solution is based on suggestion provided by Jiri Kosek.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Acked-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 460e79c30b5dd978143e7ea53849043c22d16f73
Author: Pavel Pisa <pisa@cmp.felk.cvut.cz>
Date:   Sat Feb 10 01:45:36 2007 -0800

    [PATCH] DocBook/HTML: Generate chapter/section level TOCs for functions
    
    Simple increase of section TOC level generation significantly enhances
    navigation experience through generated kernel API documentation.
    
    This change restores back state from SGML tools time.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Acked-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a784bf7c195f9eca1188562c54952e4bf9791437
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:36 2007 -0800

    [PATCH] Char: moxa, pci probing
    
    Alter the driver to use the pci probing.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9cde5bf027556bd1e58caa14bfe8cdba64192edd
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:35 2007 -0800

    [PATCH] Char: moxa, pci_probing prepare
    
    - change pci conf prototype and rename it to moxa_pci_probe
    - move some code to moxa_pci_probe
    - create moxa_pci_remove
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 181d6f4fac7f01ede95284954ea1231939dca0d9
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:34 2007 -0800

    [PATCH] Char: moxa, remove useless variables
    
    Remove temporary or once used variables, that can be defined locally to
    save some bytes.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8f8ecbad09b48e5fe44a8d7f5344e802e9c231c8
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:33 2007 -0800

    [PATCH] Char: moxa, variables cleanup
    
    - rename moxaChannels to moxa_port
    - rename moxa_str to moxa_ports
    - move board global variables into moxa_board
    - move port global variables into moxa_port
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 889074ee0be9cc6c2a698d95db4d0927485ec139
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:33 2007 -0800

    [PATCH] Char: moxa, remove moxa_pci_devinfo
    
    Nothing is used from this struct but *pdev. Remove it and store only pdev.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c251ae0d7514563c7fdace0d390175454761228b
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:32 2007 -0800

    [PATCH] Char: moxa, use del_timer_sync
    
    Use del_timer_sync in most timer deletions, we don't want to oops in the timer
    function.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 11324edd4ad34981764b25bed44d46a1507b62e1
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:31 2007 -0800

    [PATCH] Char: moxa, macros cleanup
    
    Remove yet defined or unused macros and whitespace cleanup around the rest.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9dff89cd82af7bccc706fed288b1c33a51c3b937
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:30 2007 -0800

    [PATCH] Char: moxa, eliminate typedefs
    
    Do not use typedefs, use directly struct <something> instead.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ebb4078af0dab866fdf57f84f72b9e9a7e8c6b8
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:30 2007 -0800

    [PATCH] Char: moxa, use PCI_DEVICE
    
    Use PCI_DEVICE macro in pci_device_id list.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 224299d444ce97e0c78a9e8ea930589ff8861404
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:29 2007 -0800

    [PATCH] Char: moxa, devids cleanup
    
    Move them to pci_ids.h
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c5b466e70fef18f7e0de88f81fad0b83614444a8
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:28 2007 -0800

    [PATCH] Char: moxa, remove unused functions
    
    Remove ifdeffed functions and cleanup comments including too long license
    terms.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ba196df3d6432c5c20429e8e447c5db7abedb8f3
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:28 2007 -0800

    [PATCH] Char: moxa, remove hangup bottomhalf
    
    Call tty_hangup directly, we do not need a bottomhalf for this.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aa7e5221fb47badbea618cc62704d6e4a4bcce15
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:27 2007 -0800

    [PATCH] Char: moxa, timers cleanup
    
    Use kernel macros and functions for timer encapsulation -- do not access
    fileds directly.  Also del_timer on inactive is legal, so that noting if it
    runs is senseless, delete these variables.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9fa372a850b9ffcb177eb9ac0b75963b2f9af233
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:26 2007 -0800

    [PATCH] Char: moxa, do not initialize global static
    
    Remove useless initialization of variables a) statically b) dynamically at
    module_init c) dynamically after kzalloc (those with '= 0/NULL')
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f204d2672044f0f7061d645f0f59f8535b63d106
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:25 2007 -0800

    [PATCH] Char: moxa, remove unused allocated page
    
    moxaXmitBuff is almost unused -- only one byte from the whole PAGE_SIZE bytes
    is used.  Do not alloc so much space for almost anything.  Also remove lock
    protecting this page allocation.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 34f5a39899f3f3e815da64f48ddb72942d86c366
Author: Theodore Ts'o <tytso@mit.edu>
Date:   Sat Feb 10 01:45:24 2007 -0800

    [PATCH] Add TAINT_USER and ability to set taint flags from userspace
    
    Allow taint flags to be set from userspace by writing to
    /proc/sys/kernel/tainted, and add a new taint flag, TAINT_USER, to be used
    when userspace has potentially done something dangerous that might
    compromise the kernel.  This will allow support personnel to ask further
    questions about what may have caused the user taint flag to have been set.
    
    For example, they might examine the logs of the realtime JVM to see if the
    Java program has used the really silly, stupid, dangerous, and
    completely-non-portable direct access to physical memory feature which MUST
    be implemented according to the Real-Time Specification for Java (RTSJ).
    Sigh.  What were those silly people at Sun thinking?
    
    [akpm@osdl.org: build fix]
    [bunk@stusta.de: cleanup]
    Signed-off-by: Theodore Ts'o <tytso@mit.edu>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a136e99f12cdc967a6f607644e471ed749f963db
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:24 2007 -0800

    [PATCH] Char: mxser_new, fix sparse warning
    
    Feed NULL instead of 0 where pointer is expected.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: <osv@javad.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ff7205dd9084c96cf2bedc4d0481790c5a7a635
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:23 2007 -0800

    [PATCH] Char: mxser_new, lock count and flags
    
    Both open count and INITIALIZED flag should be changed under lock.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: <osv@javad.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 722d5e4ae89f061582cc46ccbbd3b5ae87a6e165
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:22 2007 -0800

    [PATCH] Char: mxser_new, do not null driver_data
    
    driver_data are initialzed to NULL from tty layer, no need to do it in the
    driver.  In this case it cases oops, since driver_data may be NULL for a short
    while for another closing process.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: <osv@javad.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f64c84a1668930d1ca2b7dbaa92146c2139cb508
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:21 2007 -0800

    [PATCH] Char: mxser_new, upgrade to 1.9.15
    
    - allow special rates
    - break when bad status
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1a221026c3de9e6c05e6343e37205b0369ebbeff
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:21 2007 -0800

    [PATCH] Char: mxser_new, do not put pdev
    
    We don't call pci_dev_get, so do not call pci_dev_put in the pci release
    function.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 45257fa9a5070e4c0739af1f81848ad557472b40
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:20 2007 -0800

    [PATCH] Char: mxser_new, fix twice resource releasing
    
    Because brd->info is not NULLed, resources are released twice.  NULL it in
    pci_remove function.  Also take care of retval and releasing in pci_probe --
    mxser_initbrd alreasy releases resource, do not do it again in fail path in
    probe function.
    
    Cc: Sergei Organov <osv@javad.com>
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 18b95576bc6b9ef9270ec778e1d545c0ca8bbbbb
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:19 2007 -0800

    [PATCH] Char: mxser_new, less loops in isr
    
    Loop only 100^2 times, not 99999^2 times in isr (at most).
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ed79ba12e981538a399012f226360db635b50570
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:18 2007 -0800

    [PATCH] Char: mxser_new, header file cleanup
    
    - Remove no longer used macros
    - Move some macros from the header to the code
    - Remove c++ comments
    - Align backslashes to one column
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f574874bc861414bbae220b1fe623cbdd098243b
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:18 2007 -0800

    [PATCH] Char: mxser_new, alter locking in isr
    
    Avoid oopsing when stress-testing open/close -- port->tty is NULL sometimes,
    but is expected to be non-NULL, since dereferencing.  Receive/transmit chars
    iff ASYNC_CLOSING is not set and ASYNC_INITIALIZED is set.  Thanks Sergei for
    pointing this out and testing.
    
    Cc: Sergei Organov <osv@javad.com>
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 765d94c1b37d08be02eea6abbff70c0fda0ba984
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:17 2007 -0800

    [PATCH] Doc: isicom, remove reserved ioctl-number
    
    Isicom driver no longer registers chardev with ioctl function.  It used to
    use for firmware loading.  Remove the reserved letter (M) from
    ioctl-number, so that the conflict get away.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c493edd13d633ba556cd71eeae9d062b6912c55d
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:16 2007 -0800

    [PATCH] Char: mxser_new, clean request_irq call
    
    We always set ASYNC_SHARE_IRQ, so do not test against this flag and request
    shared irq directly.  Also remove nonsense comment.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 47c85c0db159bb0e5f8f5cb4ae7cc19a5c3359de
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:15 2007 -0800

    [PATCH] Char: mxser_new, remove tty_wakeup bottomhalf
    
    It's safe to call tty_wakeup from irq context. Do not schedule it for later
    calling.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 98c47ea28a7d1b4a3fb003a805c312d5c977b1d2
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:15 2007 -0800

    [PATCH] Char: mxser, obsolete old, nonexperimental new
    
    Mark v 1.x as obsolete and v 2.x as non-experimental in Kconfig.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a24f1405b001d70bebaacf91bc66cae447cc15d0
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:14 2007 -0800

    [PATCH] Char: mxser_new, remove unused stuff
    
    - nobody waits on close_wait
    - ASYNC_SPLIT_TERMIOS is not set by anybody, so do not test this flag
    - process session and pgrp are useless information
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cbcdc1debd02e1a2cbc1367ee7e0213e1041f738
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Feb 10 01:45:13 2007 -0800

    [PATCH] PNP: export pnp_bus_type
    
    The PNP framework doesn't export "pnp_bus_type", which is an unfortunate
    exception to the policy followed by pretty much every other bus.  I noticed
    this when I had to find a device in order to provide its platform_data.
    
    Note that per advice from Arjan, the "export" scope has been been minimized to
    avoid the hundred-plus bytes needed to support access from modules.  In this
    case, the symbol is only needed by statically linked kernel code that lives
    outside the drivers/pnp directory.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 83f3aa3dc5a5014cb4dc344e503b082344d8fe1e
Author: Thomas Maier <balagi@justmail.de>
Date:   Sat Feb 10 01:45:11 2007 -0800

    [PATCH] pktcdvd: cleanup
    
    - update documentation
    
    - use clear_bdi_congested/set_bdi_congested functions directly instead of
      old wrappers
    
    - removed DECLARE_BUF_AS_STRING macro
    
    Signed-off-by: Thomas Maier <balagi@justmail.de>
    Cc: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b035b6de24932ffd4a2b1c6619a2f5711da6920f
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Sat Feb 10 01:45:10 2007 -0800

    [PATCH] Consolidate default sched_clock()
    
    Use attribute(weak).
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5e07e1ccb0c0f25dd748ebe2ef83008c2229bf1c
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:09 2007 -0800

    [PATCH] Char: n_r3964, cleanup
    
    - Lindent the code
    - allow semicolons after macros by 'do {} while (0)'
    - eliminate C++ comments
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 44bafdf37b30234671d4e2fb595dea4c3717d089
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:08 2007 -0800

    [PATCH] Char: serial167, cleanup
    
    serial167, cleanup
    
    - Lindent the code
    - remove 3 pointers from paranoia_check
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 30a063a900518926966f4d75333c1bfbde1658fa
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:08 2007 -0800

    [PATCH] Char: mxser_new, remove useless spinlock
    
    gm_lock is useless, since ISA is configured at init time and there it's
    serialized.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c76b09301eeb844036f17d008e15ff6532d8f33a
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:45:07 2007 -0800

    [PATCH] Char: mxser_new, mark init functions
    
    Mark some funcions with __init and __devinit.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d8adb9cef7e406a9a82881695097c702bc98422f
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Sat Feb 10 01:45:06 2007 -0800

    [PATCH] ext2: skip pages past number of blocks in ext2_find_entry
    
    This one was pointed out on the MOKB site:
    http://kernelfun.blogspot.com/2006/11/mokb-09-11-2006-linux-26x-ext2checkpage.html
    
    If a directory's i_size is corrupted, ext2_find_entry() will keep
    processing pages until the i_size is reached, even if there are no more
    blocks associated with the directory inode.  This patch puts in some
    minimal sanity-checking so that we don't keep checking pages (and issuing
    errors) if we know there can be no more data to read, based on the block
    count of the directory inode.
    
    This is somewhat similar in approach to the ext3 patch I sent earlier this
    year.
    
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 23c887522e912ca494950796a95df8dd210f4b01
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sat Feb 10 01:45:05 2007 -0800

    [PATCH] Relay: add CPU hotplug support
    
    Mathieu originally needed to add this for tracing Xen, but it's something
    that's needed for any application that can be tracing while cpus are added.
    
    unplug isn't supported by this patch.  The thought was that at minumum a new
    buffer needs to be added when a cpu comes up, but it wasn't worth the effort
    to remove buffers on cpu down since they'd be freed soon anyway when the
    channel was closed.
    
    [zanussi@us.ibm.com: avoid lock_cpu_hotplug deadlock]
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Cc: Tom Zanussi <zanussi@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 138c5d258cf06c278f5d7fe0a806e50fe413a08f
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sat Feb 10 01:45:05 2007 -0800

    [PATCH] serial: serial_txx9 driver update
    
    Update the serial_txx9 driver.
    
     * Configurable manumum port number. (SERIAL_TXX9_NR_UARTS)
     * Remove some code which is unneeded if CONFIG_PM=n.
     * Use PCI_DEVICE() for pci device id table and make it const.
     * Do not include <asm/irq.h>
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c376222960ae91d5ffb9197ee36771aaed1d9f90
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:45:03 2007 -0800

    [PATCH] Transform kmem_cache_alloc()+memset(0) -> kmem_cache_zalloc().
    
    Replace appropriate pairs of "kmem_cache_alloc()" + "memset(0)" with the
    corresponding "kmem_cache_zalloc()" call.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Roland McGrath <roland@redhat.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Joel Becker <Joel.Becker@oracle.com>
    Cc: Steven Whitehouse <swhiteho@redhat.com>
    Cc: Jan Kara <jack@ucw.cz>
    Cc: Michael Halcrow <mhalcrow@us.ibm.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: James Morris <jmorris@namei.org>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1b135431abf5ea92e61bf4e91d93726c7b96da5f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:45:02 2007 -0800

    [PATCH] drivers/char/vc_screen.c: proper prototypes
    
    Add proper prototypes for two functions in drivers/char/vc_screen.c
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 57a87bb0720a5cf7a9ece49a8c8ed288398fd1bb
Author: Mike Frysinger <vapier.adi@gmail.com>
Date:   Sat Feb 10 01:45:01 2007 -0800

    [PATCH] scrub non-__GLIBC__ checks in linux/socket.h and linux/stat.h
    
    Userspace should be worrying about userspace, so having the socket.h
    and stat.h pollute the namespace in the non-glibc case is wrong and
    pretty much prevents any other libc from utilizing these headers
    sanely unless they set up the __GLIBC__ define themselves (which
    sucks)
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4564f9e5fd00767d11fcf61e0d52787706dfcc87
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Sat Feb 10 01:45:00 2007 -0800

    [PATCH] consolidate line discipline number definitions
    
    The line discipline numbers N_* are currently defined for each architecture
    individually, but (except for a seeming mistake) identically, in
    asm/termios.h.  There is no obvious reason why these numbers should be
    architecture specific, nor any apparent relationship with the termios
    structure.  The total number of these, NR_LDISCS, is defined in linux/tty.h
    anyway.  So I propose the following patch which moves the definitions of
    the individual line disciplines to linux/tty.h too.
    
    Three of these numbers (N_MASC, N_PROFIBUS_FDL, and N_SMSBLOCK) are unused
    in the current kernel, but the patch still keeps the complete set in case
    there are plans to use them yet.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Cc: <linux-arch@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4a3b0a490d49ada8bbf3f426be1a0ace4dcd0a55
Author: Jan Blunck <jblunck@suse.de>
Date:   Sat Feb 10 01:44:59 2007 -0800

    [PATCH] igrab() should check for I_CLEAR
    
    When igrab() is calling __iget() on an inode it should check if
    clear_inode() has been called on the inode already.  Otherwise there is a
    race window between clear_inode() and destroy_inode() where igrab() calls
    __iget() which leads to already free inodes on the inode lists.
    
    Signed-off-by: Vandana Rungta <vandana@novell.com>
    Signed-off-by: Jan Blunck <jblunck@suse.de>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 068135e63518314d4efd711142f674ad0841599e
Author: Jason Baron <jbaron@redhat.com>
Date:   Sat Feb 10 01:44:59 2007 -0800

    [PATCH] lockdep: add graph depth information to /proc/lockdep
    
    Generate locking graph information into /proc/lockdep, for lock hierarchy
    documentation and visualization purposes.
    
    sample output:
    
     c089fd5c OPS:     138 FD:   14 BD:    1 --..: &tty->termios_mutex
      -> [c07a3430] tty_ldisc_lock
      -> [c07a37f0] &port_lock_key
      -> [c07afdc0] &rq->rq_lock_key#2
    
    The lock classes listed are all the first-hop lock dependencies that
    lockdep has seen so far.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 381a229209aa6f7f72375797b7bcfcfe2ae6fcbb
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Sat Feb 10 01:44:58 2007 -0800

    [PATCH] lockdep: more unlock-on-error fixes
    
    - returns after DEBUG_LOCKS_WARN_ON added in 3 places
    
    - debug_locks checking after lookup_chain_cache() added in
      __lock_acquire()
    
    - locking for testing and changing global variable max_lockdep_depth
      added in __lock_acquire()
    
    From: Ingo Molnar <mingo@elte.hu>
    
    My __acquire_lock() cleanup introduced a locking bug: on SMP systems we'd
    release a non-owned graph lock.  Fix this by moving the graph unlock back,
    and by leaving the max_lockdep_depth variable update possibly racy.  (we
    dont care, it's just statistics)
    
    Also add some minimal debugging code to graph_unlock()/graph_lock(),
    which caught this locking bug.
    
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 898552c9d807fe59f3ecaf9c300c109358375c12
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Feb 10 01:44:57 2007 -0800

    [PATCH] lockdep: also check for freed locks in kmem_cache_free()
    
    kmem_cache_free() was missing the check for freeing held locks.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0c12b51712ced2c0d89a8ec3d546ed810f86d33e
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sat Feb 10 01:44:56 2007 -0800

    [PATCH] kill_pid_info: kill acquired_tasklist_lock
    
    Kill acquired_tasklist_lock, sig_needs_tasklist() is very cheap nowadays.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b963a8441cb95999c97bea379607071a869c65f0
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:55 2007 -0800

    [PATCH] Char: tty_wakeup cleanup
    
    tty_wakeup cleanup
    
    - remove wake_up_interruptible(&tty->write_wait) surrounding
      tty_wakup(tty);
    - substitute tty->ldisc.write_wakeup(tty) + wake_up() by tty_wakeup(tty);
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Acked-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1ed0c0b7306d7c93e83ebe30087a12684b280cdc
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:55 2007 -0800

    [PATCH] Char: isicom, correct probing/removing
    
    Don't forget to decrease card_count in fail paths and in remove function.
    Also null board->base in such cases to point out, that this structure is
    unused and thus can be reassigned.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7edc136ab688f751037a86e8a051151d7962d33f
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:54 2007 -0800

    [PATCH] Char: isicom, support higher rates
    
    Add support for higher baud rates (coming from original isi driver).
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cb4a10ccb0c5b5b02dec1a4a97cba1e8b2c2a325
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:53 2007 -0800

    [PATCH] Char: isicom, check card state in isr
    
    Check if the card really interrupted us by reading its IO space and eventualy
    return IRQ_NONE.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f0a0ba6d69882ae14f24d7eb6e2ae07f30fbd56a
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:52 2007 -0800

    [PATCH] Char: isicom, augment card_reset
    
    isicom, augment card_reset
    
    - add 0xee to signatures
    - change long delays to sleeps
    - make one sleep shorter not to wait 3s
    - portcount == 16 is also correct
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 174f13076717b8c7b70a18a474a0541a31d24527
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:52 2007 -0800

    [PATCH] Char: isicom, fix locking in isr
    
    2 spin_unlocks are omitted in the interrupt handler.  Put them there to fix up
    deadlocking on UP.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 02d3fca0927279d15299e8c2b9e9e42ab29cee7f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:44:51 2007 -0800

    [PATCH] make drivers/char/mxser_new.c:mxser_hangup() static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a3569958728d511912bbe98f3770aa5ada34bd12
Author: Andreas Jaggi <andreas.jaggi@waterwave.ch>
Date:   Sat Feb 10 01:44:50 2007 -0800

    [PATCH] mxser: remove ambiguous redefinition of INIT_WORK
    
    Removes an unused and ambiguous redefinition of INIT_WORK()
    
    Signed-off-by: Andreas Jaggi <andreas.jaggi@waterwave.ch>
    Acked-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 37756ced1f145aec18917812c3b8a96dbb47990d
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Sat Feb 10 01:44:49 2007 -0800

    [PATCH] avoid one conditional branch in touch_atime()
    
    I added IS_NOATIME(inode) macro definition in include/linux/fs.h, true if
    the inode superblock is marked readonly or noatime.
    
    This new macro is then used in touch_atime() instead of separatly testing
    MS_RDONLY and MS_NOATIME
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4ba4d4c0c52201009232fe9e781a281054a24e75
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Sat Feb 10 01:44:48 2007 -0800

    [PATCH] struct vfsmount: keep mnt_count & mnt_expiry_mark away from mnt_flags
    
    I noticed cache misses in touch_atime() that can be avoided if we keep
    mnt_count & mnt_expiry_mark in a different cache line than mnt_flags
    (mostly read)
    
    mnt_count & mnt_expiry_mark are modified each time a file is opened/closed
    in a file system.
    
    touch_atime() is called each time a file is read, and generally needs to
    read mnt_flags.
    
    Other fields of struct vfsmount are mostly read so I chose to move
    mnt_count & mnt_expiry_mark at the end of struct vfsmount.  And adding a
    comment so that nobody tries to re-arrange fields to fill the holes :)
    
    On 64bits platforms, the new offsetof(mnt_count) is 0xC0
    On 32bits platforms, it is 0x60, so I didnot add a
    ____cacheline_aligned_in_smp because it would have a too big impact on the
    size of this object (in particular if CONFIG_X86_L1_CACHE_SHIFT=7)
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0aa5de8590d684274f57647a870851f101bb3543
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:47 2007 -0800

    [PATCH] Char: isicom, remove tty_{hang,wake}up bottomhalves
    
    - tty_hangup() itself schedules work, so there is no need to schedule hangup
      in the driver
    
    - tty_wakeup(): it's safe to call it while in atomic, so that its
      schedule_work might be also wiped out
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 52c9ae0ac7576c94f6a2371b44039e7ba12a0439
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Sat Feb 10 01:44:46 2007 -0800

    [PATCH] IOC3/IOC4: PCI mem space resources
    
    The SGI IOC3 and IOC4 PCI devices implement memory space apertures, not I/O
    space apertures.  Use the appropriate region management functions.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Cc: Pat Gefre <pfg@sgi.com>
    Cc: Stanislaw Skowronek <skylark@linux-mips.org>
    Cc: Brent Casavant <bcasavan@sgi.com>
    Acked-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 24fa50961451b7b21081e4d16836952b17eb5fb3
Author: Luciano Rocha <strange@nsk.no-ip.org>
Date:   Sat Feb 10 01:44:45 2007 -0800

    [PATCH] usr/gen_init_cpio.c: support for hard links
    
    Extend usr/gen_init_cpio.c "file" entry, adding support for hard links.
    
    Previous format:
    file <name> <location> <mode> <uid> <gid>
    
    New format:
    file <name> <location> <mode> <uid> <gid> [<hard links>]
    
    The hard links specification is optional, keeping the previous
    behaviour.
    
    All hard links are defined sequentially in the resulting cpio and the
    file data is present only in the last link. This is the behaviour of
    GNU's cpio and is supported by the kernel initramfs extractor.
    
    Signed-off-by: Luciano Rocha <strange@nsk.no-ip.org>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 67d38229dfa64cf9a75f83746dde345f47bbd8dc
Author: Jean-Paul Saman <jean-paul.saman@nxp.com>
Date:   Sat Feb 10 01:44:44 2007 -0800

    [PATCH] disable init/initramfs.c: architectures
    
    Update all arch/*/kernel/vmlinux.lds.S to not include space for initramfs
    when CONFIG_BLK_DEV_INITRAMFS is not selected.  This saves another 4 kbytes
    on most platfoms (some reserve PAGE_SIZE for initramfs).
    
    Signed-off-by: Jean-Paul Saman <jean-paul.saman@nxp.com>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: <linux-arch@vger.kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c33df4eaaf41fd3e34837a6ae9a5f9970c393d9f
Author: Jean-Paul Saman <jean-paul.saman@nxp.com>
Date:   Sat Feb 10 01:44:43 2007 -0800

    [PATCH] disable init/initramfs.c
    
    The file init/initramfs.c is always compiled and linked in the kernel
    vmlinux even when BLK_DEV_RAM and BLK_DEV_INITRD are disabled and the
    system isn't using any form of an initramfs or initrd.  In this situation
    the code is only used to unpack a (static) default initial rootfilesystem.
    The current init/initramfs.c code.  usr/initramfs_data.o compiles to a size
    of ~15 kbytes.  Disabling BLK_DEV_RAM and BLK_DEV_INTRD shrinks the kernel
    code size with ~60 Kbytes.
    
    This patch avoids compiling in the code and data for initramfs support if
    CONFIG_BLK_DEV_INITRD is not defined.  Instead of the initramfs code and
    data it uses a small routine in init/noinitramfs.c to setup an initial
    static default environment for mounting a rootfilesystem later on in the
    kernel initialisation process.  The new code is: 164 bytes of size.
    
    The patch is separated in two parts:
    1) doesn't compile initramfs code when CONFIG_BLK_DEV_INITRD is not set
    2) changing all plaforms vmlinux.lds.S files to not reserve an area of
    PAGE_SIZE when CONFIG_BLK_DEV_INITRD is not set.
    
    [deweerdt@free.fr: warning fix]
    Signed-off-by: Jean-Paul Saman <jean-paul.saman@nxp.com>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: <linux-arch@vger.kernel.org>
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dd65aa6690e30fdad84a62191c7ab37da89d9865
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:44:42 2007 -0800

    [PATCH] Char: tty, delete wake_up_interruptible after tty_wakeup
    
    tty_wakeup calls wake_up_interruptible(&tty->write_wait) itself, it's not
    needed to wake up again after tty_wakeup returns.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 780a065668b1c6ca6a70c7d36b9f6552ea3bb5f5
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:44:41 2007 -0800

    [PATCH] count_vm_events-warning-fix
    
    - Prevent things like this:
    
    	block/ll_rw_blk.c: In function 'submit_bio':
    	block/ll_rw_blk.c:3222: warning: unused variable 'count'
    
      inlines are very, very preferable to macros.
    
    - remove unused get_cpu_vm_events() macro
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7131b6d167b41593463ce98df17e101e776bf5ec
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Feb 10 01:44:40 2007 -0800

    [PATCH] remove include/linux/byteorder/pdp_endian.h
    
    include/linux/byteorder/pdp_endian.h is completely unused, and the comment in
    the file itself states that it's both untested and only a proof-of-concept.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3ee75ac3c0f4904633322b7d9b111566fbc4a7d3
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Sat Feb 10 01:44:39 2007 -0800

    [PATCH] sysctl_{,ms_}jiffies: fix oldlen semantics
    
    currently it's
    1) if *oldlenp == 0,
    	don't writeback anything
    
    2) if *oldlenp >= table->maxlen,
    	don't writeback more than table->maxlen bytes and rewrite *oldlenp
    	don't look at underlying type granularity
    
    3) if 0 < *oldlenp < table->maxlen,
    		*cough*
    	string sysctls don't writeback more than *oldlenp bytes.
    	OK, that's because sizeof(char) == 1
    
    	int sysctls writeback anything in (0, table->maxlen] range
    	Though accept integers divisible by sizeof(int) for writing.
    
    sysctl_jiffies and sysctl_ms_jiffies don't writeback anything but
    sizeof(int), which violates 1) and 2).
    
    So, make sysctl_jiffies and sysctl_ms_jiffies accept
    a) *oldlenp == 0, not doing writeback
    b) *oldlenp >= sizeof(int), writing one integer.
    
    -EINVAL still returned for *oldlenp == 1, 2, 3.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Cc: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8b6312f4dcc1efe7975731b6c47dd134282bd9ac
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Feb 10 01:44:34 2007 -0800

    [PATCH] vt: refactor console SAK processing
    
    This does several things.
    - It moves looking up of the current foreground console into process
      context where we can safely take the semaphore that protects this
      operation.
    - It uses the new flavor of work queue processing.
    - This generates a factor of do_SAK, __do_SAK that runs immediately.
    - This calls __do_SAK with the console semaphore held ensuring nothing
      else happens to the console while we process the SAK operation.
    - With the console SAK processing moved into process context this
      patch removes the xchg operations that I used to attempt to attomically
      update struct pid, because of the strange locking used in the SAK processing.
      With SAK using the normal console semaphore nothing special is needed.
    
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0a7b35cb18c52d651f6ed9cd59edc979200ab880
Author: Michael Neuling <mikey@neuling.org>
Date:   Sat Feb 10 01:44:33 2007 -0800

    [PATCH] Add retain_initrd boot option
    
    Add retain_initrd option to control freeing of initrd memory after
    extraction.  By default, free memory as previously.
    
    The first boot will need to hold a copy of the in memory fs for the second
    boot.  This image can be large (much larger than the kernel), hence we can
    save time when the memory loader is slow.  Also, it reduces the memory
    footprint while extracting the first boot since you don't need another copy
    of the fs.
    
    Signed-off-by: Michael Neuling <mikey@neuling.org>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 70e840499aae90be1de542894062ad2899d23642
Author: Miguel Ojeda Sandonis <maxextreme@gmail.com>
Date:   Sat Feb 10 01:44:32 2007 -0800

    [PATCH] drivers: add LCD support
    
    Add support for auxiliary displays, the ks0108 LCD controller, the
    cfag12864b LCD and adds a framebuffer device: cfag12864bfb.
    
    - Add a "auxdisplay/" folder in "drivers/" for auxiliary display
      drivers.
    
    - Add support for the ks0108 LCD Controller as a device driver.  (uses
      parport interface)
    
    - Add support for the cfag12864b LCD as a device driver.  (uses ks0108
      LCD Controller driver)
    
    - Add a framebuffer device called cfag12864bfb.  (uses cfag12864b LCD
      driver)
    
    - Add the usual Documentation, includes, Makefiles, Kconfigs,
      MAINTAINERS, CREDITS...
    
    - Miguel Ojeda will maintain all the stuff above.
    
    [rdunlap@xenotime.net: workqueue fixups]
    [akpm@osdl.org: kconfig fix]
    Signed-off-by: Miguel Ojeda Sandonis <maxextreme@gmail.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Paulo Marques <pmarques@grupopie.com>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 81d79bec348ab06cba9ae9fc03eb015b6b83703a
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Feb 10 01:44:30 2007 -0800

    [PATCH] V850: user ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6e6d74cfac782a3a4cb5111bd9c25cd95d6b7c6c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:30 2007 -0800

    [PATCH] uml: x86_64 ptrace fixes
    
    This patch fixes some missing ptrace bits on x86_64.  PTRACE_ARCH_PRCTL is
    hooked up and implemented.  This required generalizing arch_prctl_skas
    slightly to take a task_struct to modify.  Previously, it always operated on
    current.
    
    Reading and writing the debug registers is also enabled by un-ifdefing the
    code that implements that.  It turns out that x86_64 is identical to i386, so
    the same code can be used.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f355559cf78455ed6be103b020e4b800230c64eb
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:29 2007 -0800

    [PATCH] uml: x86_64 thread fixes
    
    x86_64 needs some TLS fixes.  What was missing was remembering the child
    thread id during clone and stuffing it into the child during each context
    switch.
    
    The %fs value is stored separately in the thread structure since the host
    controls what effect it has on the actual register file.  The host also needs
    to store it in its own thread struct, so we need the value kept outside the
    register file.
    
    arch_prctl_skas was fixed to call PTRACE_ARCH_PRCTL appropriately.  There is
    some saving and restoring of registers in the ARCH_SET_* cases so that the
    correct set of registers are changed on the host and restored to the process
    when it runs again.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3a150e1da8bc4e840d5a09fc089052011b5b6503
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:28 2007 -0800

    [PATCH] uml: fix error output during early boot
    
    The startup code panics a lot if anything goes wrong early on.  This is wrong
    for several reasons, like the kernel isn't running, so you can't really be
    calling into it yet, but the harm comes from useful error messages being
    trapped in the printk ring where no one will ever see them.
    
    This patch changes these panics to perror and printf in wrappers which also
    exit.  Normal, informational, prints are also wrapped so that fflush(stdout)
    is called after each one.  This is so the output appears in the correct
    sequence in the event of an error.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9683da91e2db323ee728041576e29ad7fa9547b9
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:27 2007 -0800

    [PATCH] uml: AIO locking and tidying
    
    Comment the lack of locking of data that's set up once at boot time.
    
    Also fixed a couple of bogus printks.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6c59e2f593d0c00c78ec48146de6eaf52a342dd5
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:26 2007 -0800

    [PATCH] uml: register handling formatting fixes
    
    Formatting fixes in the register handling code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c538b391a7e8f3cb5d7756ec68d1864429d26a0c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:26 2007 -0800

    [PATCH] uml: ELF locking commentary
    
    Comment the lack of locking of the elf data extracted from the ELF headers
    passed to UML.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit de5fe76e436d9e98f8af8005ff23a2e6066aea10
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:25 2007 -0800

    [PATCH] uml: umid tidying
    
    Add an error message when two umids are put on the command line.
    
    umid.h is kind of pointless since it only declares one thing, and that
    is already declared in os.h.
    
    Commented the lack of locking of some data in os-Linux/umid.h.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4cffb7fa69349d48d900d98766dc9ad52d9c851e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:24 2007 -0800

    [PATCH] uml: SIGIO formatting fixes
    
    Fix formatting in the sigio code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d9f9d31983aac7764d178583d0777199d081cb1a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:23 2007 -0800

    [PATCH] uml: SIGIO locking comment
    
    Comment the use of a mysterious-looking lock.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f2e62992a232544d612b7b95e932fbf3592944e1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:23 2007 -0800

    [PATCH] uml: IRQ handler tidying
    
    Tidying the irq code -
    	make a variable static
    	activate_fd can call kmalloc directly since it's now kernel code
    	added a no-locking comment
    	fixed a style violation
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f688144b827749879279c3ad272b8d874fc17231
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:44:22 2007 -0800

    [PATCH] uml: fix apparent "CONFIG_64_BIT" typo.
    
    Fix apparent typo, where CONFIG_64_BIT should read CONFIG_64BIT.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 81999a01c786e26c2058968d76b595df60d2f8da
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:21 2007 -0800

    [PATCH] uml: fix style violations
    
    Fix a bunch of style violations in mem.c.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 73c8f4441f07dd3b9d198ec0e97ce83138a6224c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:20 2007 -0800

    [PATCH] uml: libc-dependent code should call libc directly
    
    We shouldn't be using the os wrappers from os code - we can use libc directly.
    This patch replaces wrapper calls with libc calls.
    
    It turns out that os_sigio_async had only one caller, which was in startup.c,
    so that function is moved there and its name changed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9eae9b132cd2cebf98cc45550049d421302b9aba
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:20 2007 -0800

    [PATCH] uml: style fixes in startup code
    
    Some style fixes in startup.c.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7242a4005d1c496bc1140d56a0d898cde1b3e3f6
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:19 2007 -0800

    [PATCH] uml: locking comments in startup code
    
    Add a couple of comments about some non-locked data.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6bf79482f3288e19697d08c456b0bd6b1755d467
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:18 2007 -0800

    [PATCH] uml: locking comments in memory and tempfile code
    
    Locking comments and emacs comment removal in the low-level memory and
    temp file code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b8831a1d2c78c03b8193ab3acf56664fa3457265
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:17 2007 -0800

    [PATCH] uml: locking fixes in the ubd driver
    
    Some small locking and formatting fixes in the ubd driver.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 62f96cb01e8de7a5daee472e540f726db2801499
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:16 2007 -0800

    [PATCH] uml: add per-device queues and locks to ubd driver
    
    Replace global queue and lock with per-device queues and locks.  Mostly a
    straightforward replacement of ubd_io_lock with dev->lock and ubd_queue with
    dev->queue.
    
    Complications -
    	There was no way to get a request struct (and queue) from the
    structure sent to the io_thread, so a pointer to the request was
    added.  This is needed in ubd_handler in order to kick do_ubd_request
    to process another request.
    	Queue initialization is moved from ubd_init to ubd_add.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jens Axboe <axboe@kernel.dk>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 92b4202f38cf630350a9e1eb0ab23ca4fc5b687b
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:15 2007 -0800

    [PATCH] uml: remove code controlled by non-existent config option
    
    CONFIG_HOST_TASK_SIZE doesn't exist any more.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 0d0d0ed426f8f5ba6b74ba30fcdcd27c54ce4724
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:15 2007 -0800

    [PATCH] uml: const a variable
    
    kstack_depth_to_print can be made const.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 27aa6ef3c0e8220b27b0a8d2d0bae7cd0a6d2f78
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:14 2007 -0800

    [PATCH] uml: make signal handlers static
    
    A bunch of the signal handlers can be made static.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6d1b18b16fc917e5c9af568a53c7e37923821d70
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:13 2007 -0800

    [PATCH] uml: remove unused variable and function
    
    syscall_index and next_syscall_index turn out not to be used.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b42e1eacc1f245581a2f7580ec1082ff4d6c65cd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:12 2007 -0800

    [PATCH] uml: delete unused file
    
    It turns out that resource.c isn't needed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 490ba1714b31a131cdc6318231aa227d19bf0761
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:12 2007 -0800

    [PATCH] uml: make time data per-cpu
    
    prev_nsecs and delta need to be arrays, and indexed by CPU number.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c0961c1804c46bf5bb253e1bd6bc93e4627b79a1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:11 2007 -0800

    [PATCH] uml: initialize a list head
    
    We need to initialize lists properly.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 60678bbc76685bea47043e61981b8fc5cffc10da
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:10 2007 -0800

    [PATCH] uml: mem.c and physmem.c formatting fixes
    
    Fix a bunch of style violations in mem.c and physmem.c
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 94c282d79e17a83ccc876990e05378ed6dfbccae
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:09 2007 -0800

    [PATCH] uml: locking comments in iomem driver
    
    Comment some lack of locking in the iomem driver.
    
    Also, a couple of variables are in the wrong place, so they are moved.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c6256c68248cfccbeec07ced442ffe395fa393e8
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:08 2007 -0800

    [PATCH] uml: fix previous console locking
    
    Eliminate the open_mutex after complaints from Blaisorblade.  It turns out
    that the tty count provides the information needed to tell whether we are the
    first opener or last closer.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d5c9ffc6c6d15d4f655236e26942a21ad61fe3ad
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:08 2007 -0800

    [PATCH] uml: console locking commentary and code cleanup
    
    Remove the last vestiges of devfs from console registration.  Change the name
    of the function, plus remove a couple of unused fields from the line_driver
    structure.
    
    struct lines is no longer needed, all traces of it are gone.
    
    The only way that I can see to mark a structure as being almost-const is to
    individually const the fields.  This is the case for the line_driver
    structure, which has only one modifiable field - a list_head in a
    sub-structure.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b4ac91a0eac36f347a509afda07e4305e931de61
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:07 2007 -0800

    [PATCH] uml: chan_user.h formatting fixes
    
    Whitespace fixes and emacs comment removal.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a52f362f864f56238c9036f5c56f763a80e2ddd5
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:06 2007 -0800

    [PATCH] uml: mostly const a structure
    
    The chan_opts structure is mostly const, and needs no locking.  Comment the
    lack of locking on the one field that can change.
    
    Make all the other fields const.  It turned out that console_open_chan didn't
    use its chan_opts argument, so that is deleted from the function and its
    callers.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 99b0278f95fc9d55adf65133dc678167a88b632a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:05 2007 -0800

    [PATCH] uml: locking commentary in the random driver
    
    Comment the lack of locking.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c59bce6262f9511c8e2504231f60609bf7332833
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:04 2007 -0800

    [PATCH] uml: use LIST_HEAD where possible
    
    A couple of list_head declarations can be improved through the use of
    LIST_HEAD().
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c862fc32a3ee4319c652f4ff39462d030120c380
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:04 2007 -0800

    [PATCH] uml: network driver locking and code cleanup
    
    Add some missing locking to walks of the transports and opened lists.
    
    Delete some dead code.
    
    Comment the lack of some locking.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f9795220521e0575dfd4ed0737d3a7848264662c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:03 2007 -0800

    [PATCH] uml: Kill a compilation warning
    
    Kill a compilation warning.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 67608e0c809ceca1b44755ee818199af7478ca77
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:02 2007 -0800

    [PATCH] uml: port driver formatting
    
    Whitespace and style fixes.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d832fc60d533d52da7170cf5f95271c331259bca
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:01 2007 -0800

    [PATCH] uml: make two variables static
    
    Make a couple of variables static.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 84f48d4f2b511db15fda67fd38462b91abd0af53
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:01 2007 -0800

    [PATCH] uml: mconsole locking
    
    Locking fixes.  Locking was totally lacking for the mconsole_devices, which
    got a spin lock, and the unplugged pages data, which got a mutex.
    
    The locking of the mconsole console output code was confused.  Now, the
    console_lock (renamed to client_lock) protects the clients list.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d471c0fca7eae1ffd4f7d4c11ee835ff70aaa71f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:44:00 2007 -0800

    [PATCH] uml: audio driver formatting
    
    Whitespace and style fixes.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b612e475e75f860002d88dd8440ce250506c5094
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:59 2007 -0800

    [PATCH] uml: audio driver locking
    
    Comment the lack of locking and make a couple of variables static.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5bbcbeca2c8933ee2b3402ea5eca523d971a8785
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:58 2007 -0800

    [PATCH] uml: watchdog driver formatting
    
    Whitespace and style fixes.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 42d36115d25725fb551250c8f70602a12aa8dee2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:57 2007 -0800

    [PATCH] uml: watchdog driver locking
    
    Replace BKL use with a spinlock.
    
    Also fix the control so that open doesn't return holding a lock.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4ea21cd9173a0ffa75dc74cc46d08dfc45654f29
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:56 2007 -0800

    [PATCH] uml: network driver whitespace and style fixes
    
    Some whitespace and coding style cleanups in the network driver code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d3b7f69de2b92e4b6057d81e6c52f629a8663368
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:56 2007 -0800

    [PATCH] uml: add locking to network transport registration
    
    The registration of host network transports needed some locking.  The
    transport list itself is locked, but calls to the registration routines are
    not.  This is compensated for by checking that a transport structure is not
    yet on any list.
    
    I also took the opportunity to const all fields in the transport structure
    except the list, which obviously can be modified.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 190c3e456325942a17785332fe15b68eeb3775ca
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:55 2007 -0800

    [PATCH] uml: lock the irqs_to_free list
    
    Fix (i.e. add some) the locking around the irqs_to_free list.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 894be2a485b75bce9a4d45d3e431aafd4c89f1ea
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:54 2007 -0800

    [PATCH] uml: console whitespace and comment tidying
    
    Some comment and whitespace cleanups in the console and mconsole code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f28169d2000177e8b72ccc6d72887be779dceca8
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:53 2007 -0800

    [PATCH] uml: return hotplug errors to host
    
    I noticed that errors happening while hotplugging devices from the host were
    never returned back to the mconsole client.  In some cases, success was
    returned instead of even an information-free error.
    
    This patch cleans that up by having the low-level configuration code pass back
    an error string along with an error code.  At the top level, which knows
    whether it is early boot time or responding to an mconsole request, the string
    is printk'd or returned to the mconsole client.
    
    There are also whitespace and trivial code cleanups in the surrounding code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d79a580936396bbcd2f4fae2c6215f9cf81e3c0d
Author: Jeff Dike <jdike@addtoit.com>
Date:   Sat Feb 10 01:43:52 2007 -0800

    [PATCH] uml: console locking fixes
    
    Clean up the console driver locking.  There are various problems here,
    including sleeping under a spinlock and spinlock recursion, some of which are
    fixed here.  This patch deals with the locking involved with opens and closes.
     The problem is that an mconsole request to change a console's configuration
    can race with an open.  Changing a configuration should only be done when a
    console isn't opened.  Also, an open must be looking at a stable
    configuration.  In addition, a get configuration request must observe the same
    locking since it must also see a stable configuration.  With the old locking,
    it was possible for this to hang indefinitely in some cases because open would
    block for a long time waiting for a connection from the host while holding the
    lock needed by the mconsole request.
    
    As explained in the long comment, this is fixed by adding a spinlock for the
    use count and configuration and a mutex for the actual open and close.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5cf885d01f30be710a339976c485f92bb8a8946d
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Sat Feb 10 01:43:51 2007 -0800

    [PATCH] CRIS: TLB handling: turn local_save_flags() + local_irq_disable() into local_irq_save()
    
    TLB handling for CRIS contains local_irq_disable() after local_save_flags().
    Turn this into local_irq_save().
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8447157a1ac467fae2125074f3693f557c8e05d3
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Feb 10 01:43:51 2007 -0800

    [PATCH] CRIS: user ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 047c7c42327433a13ed2971de41ef7c6943b37ec
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Sat Feb 10 01:43:50 2007 -0800

    [PATCH] CRIS: turn local_save_flags() + local_irq_disable() into local_irq_save() in headers
    
    Various headers for CRIS architecture contain local_irq_disable() after
    local_save_flags().  Turn it into local_irq_save().
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Cc: Mikael Starvik <starvik@axis.com>
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7c101b7b13707f84791441fd04f11cf710d0d2d9
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Sat Feb 10 01:43:49 2007 -0800

    [PATCH] CRIS: local_irq_disable() is redundant after local_irq_save()
    
    arch/cris/arch-v10/kernel/time.c::get_ns_in_jiffie() contains
    local_irq_disable() call after local_irq_save().  This looks redundant.
    
    arch/cris/kernel/time.c::do_gettimeofday() contains local_irq_disable() call
    after local_irq_save().  This looks redundant.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 36dbf95868007b2dd236836f5420d3cb788da029
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Sat Feb 10 01:43:48 2007 -0800

    [PATCH] m68k: don't include asm-m68k/page.h in asm-m68k/user.h
    
    We don't actually use anything from asm-m68k/page.h in asm-m68k/user.h, so
    don't bother including it
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ea5e1a827abe1e9ba1c8d214b7408b6c363d764a
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Feb 10 01:43:47 2007 -0800

    [PATCH] M68K: user ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bf0059b23fd2f0b304f647d87fad0aa626ecf0c0
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Feb 10 01:43:46 2007 -0800

    [PATCH] M68KNOMMU: user ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dc29a3657b52ac687970d81d7194cf4238702124
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sat Feb 10 01:43:43 2007 -0800

    [PATCH] kernel/time/clocksource.c needs struct task_struct on m68k
    
    kernel/time/clocksource.c needs struct task_struct on m68k.
    
    Because it uses spin_unlock_irq(), which, on m68k, uses hardirq_count(), which
    uses preempt_count(), which needs to dereference struct task_struct, we
    have to include sched.h. Because it would cause a loop inclusion, we
    cannot include sched.h in any other of asm-m68k/system.h,
    linux/thread_info.h, linux/hardirq.h, which leaves this ugly include in
    a C file as the only simple solution.
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 38135614ddef4de16d5cdf03c2717e88b97dd2ab
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Sat Feb 10 01:43:41 2007 -0800

    [PATCH] m68k: work around binutils tokenizer change
    
    Recent as(1) doesn't think that .  terminates a macro name, so getuser.l is
    _not_ treated as invoking getuser with .l as the first argument.
    arch/m68k/math-emu relies on old behaviour, so it gets a lot of undefined
    macros with more or less current binutils.
    
    Note that this behaviour remains in all recent versions and is unrelated to
    another binutils problems we used to have for a while (having (%a0)+ parsed
    as two arguments).  This one is there to stay; it's an intentional and
    documented change.
    
    .irp <identifier> <words>
    [text]
    .endr
    expands to a copy of text per each word, with \<identifier> replaced with
    corresponding word.  Again, what happens depends on whether gas_ident.x
    is treated as one or as two tokens; in the former case we'll get old_gas
    incremented once, in the latter - twice.  The rest is obvious.
    
    Unlike .macro argument list _anything_ is explicitly allowed after
    .irp <identifier>; here we are on very safe ground.  And yes, it does
    work with all gas variants I've got here (including vanilla 2.15, 2.16,
    2.16.1 and 2.17, plus debian and FC binutils).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fabb626ad6a3744b9f0eaae215a2418d521c1e14
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Sat Feb 10 01:43:40 2007 -0800

    [PATCH] m32r: cosmetic updates and trivial fixes
    
    Cosmetic updates and trivial fixes of m32r arch-dependent files.
    - Remove RCS ID strings and trailing white lines
    - Other misc. cosmetic updates
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 3d60f849341ac00e3dc47a3af94aaf9ba46d00fb
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Sat Feb 10 01:43:39 2007 -0800

    [PATCH] m32r: fix kernel entry address of vmlinux
    
    This patch fixes the kernel entry point address of vmlinux.
    
    The m32r kernel entry address is 0x08002000 (physical).
    But, so far, the ENTRY point written in vmlinux.lds.S was not point
    the correct kernel entry address.
    
    (before fix)
        $ objdump -x vmlinux
        vmlinux:     file format elf32-m32r-linux
        vmlinux
        architecture: m32r2, flags 0x00000112:
        EXEC_P, HAS_SYMS, D_PAGED
        start address 0x88002090	/* NG */
            :
        Sections:
        Idx Name          Size      VMA       LMA       File off  Algn
          0 .empty_zero_page 00001000  88001000  88001000  00001000  2**12
                          CONTENTS, ALLOC, LOAD, DATA
          1 .boot         0000008c  88002000  88002000  00002000  2**2
                          CONTENTS, ALLOC, LOAD, READONLY, CODE
          2 .text         001ab694  88002090  88002090  00002090  2**4
                          CONTENTS, ALLOC, LOAD, READONLY, CODE
            :
    
    (after fix)
        $ objdump -x vmlinux
        vmlinux:     file format elf32-m32r-linux
        vmlinux
        architecture: m32r2, flags 0x00000112:
        EXEC_P, HAS_SYMS, D_PAGED
        start address 0x08002000	/* OK */
            :
    
    This fix also remedies the following GDB error message (of gdb-6.4 or after)
    at the first operation of kernel debugging:
    "Previous frame identical to this frame (corrupt stack?)".
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4aa3b3ccfc6abda052a1bbd9cf018d51c1689836
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Sat Feb 10 01:43:37 2007 -0800

    [PATCH] m32r: update defconfig files for v2.6.19
    
    This patch upgrades defconfig files for all m32r platforms.
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9b87ed790714bd3a8d492feb24f6c48f8bb59c3a
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Sat Feb 10 01:43:37 2007 -0800

    [PATCH] m32r: fix do_page_fault and update_mmu_cache
    
    Fix do_page_fault and update_mmu_cache.
    
      * Fix do_page_fault (vmalloc_fault:) to pass error_code correctly
        to update_mmu_cache by using a thread-fault code for all m32r chips.
    
      * Fix update_mmu_cache for OPSP chip
        - #ifdef CONFIG_CHIP_OPSP portion is a workaround of OPSP;
          Add a notfound-case operation to update_mmu_cache for OPSP
          like other m32r chip.
        - Fix pte_data that was not initialized if no entry found.
    
    Signed-off-by: Kazuhiro Inaoka <inaoka@linux-m32r.org>
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9674dcf795a4c7384e4e42c8f38fcb87517b1a43
Author: Hirokazu Takata <takata@linux-m32r.org>
Date:   Sat Feb 10 01:43:35 2007 -0800

    [PATCH] m32r: build fix for processors without ISA_DSP_LEVEL2
    
    Additional fixes for processors without ISA_DSP_LEVEL2.  sigcontext_t does not
    have dummy_acc1h, dummy_acc1l members any longer.
    
    Signed-off-by: Hirokazu Takata <takata@linux-m32r.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2b5b09b3b576d7323d8b4244429a83f16dc5446a
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sat Feb 10 01:43:35 2007 -0800

    [PATCH] swsusp: Change pm_ops handling by userland interface
    
    Make the userland interface of swsusp call pm_ops->finish() after
    enable_nonboot_cpus() and before resume_device(), as indicated by the recent
    discussion on Linux-PM (cf.
    http://lists.osdl.org/pipermail/linux-pm/2006-November/004164.html).
    
    This patch changes the SNAPSHOT_PMOPS ioctl so that its first function,
    PMOPS_PREPARE, only sets a switch turning the platform suspend mode on, and
    its last function, PMOPS_FINISH, only checks if the platform mode is enabled.
    This should allow the older userland tools to work with new kernels without
    any modifications.
    
    The changes here only affect the userland interface of swsusp.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Cc: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d12c610e08022a1b84d6bd4412c189214d32e713
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:43:34 2007 -0800

    [PATCH] swsusp-change-code-ordering-in-userc-sanity
    
    The compiler will do that.  And if it doesn't, we don't want to either ;)
    
    Cc: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Cc: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 259130526c267550bc365d3015917d90667732f1
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sat Feb 10 01:43:33 2007 -0800

    [PATCH] swsusp: Change code ordering in user.c
    
    Change the ordering of code in kernel/power/user.c so that device_suspend() is
    called before disable_nonboot_cpus() and device_resume() is called after
    enable_nonboot_cpus().  This is needed to make the userland suspend call
    pm_ops->finish() after enable_nonboot_cpus() and before device_resume(), as
    indicated by the recent discussion on Linux-PM (cf.
    http://lists.osdl.org/pipermail/linux-pm/2006-November/004164.html).
    
    The changes here only affect the userland interface of swsusp.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Cc: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ed746e3b18f4df18afa3763155972c5835f284c5
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sat Feb 10 01:43:32 2007 -0800

    [PATCH] swsusp: Change code ordering in disk.c
    
    Change the ordering of code in kernel/power/disk.c so that device_suspend() is
    called before disable_nonboot_cpus() and platform_finish() is called after
    enable_nonboot_cpus() and before device_resume(), as indicated by the recent
    discussion on Linux-PM (cf.
    http://lists.osdl.org/pipermail/linux-pm/2006-November/004164.html).
    
    The changes here only affect the built-in swsusp.
    
    [alexey.y.starikovskiy@linux.intel.com: fix LED blinking during image load]
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Cc: Patrick Mochel <mochel@digitalimplant.org>
    Cc: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e3c7db621bed4afb8e231cb005057f2feb5db557
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sat Feb 10 01:43:31 2007 -0800

    [PATCH] PM: Change code ordering in main.c
    
    As indicated in a recent thread on Linux-PM, it's necessary to call
    pm_ops->finish() before devce_resume(), but enable_nonboot_cpus() has to be
    called before pm_ops->finish() (cf.
    http://lists.osdl.org/pipermail/linux-pm/2006-November/004164.html).  For
    consistency, it seems reasonable to call disable_nonboot_cpus() after
    device_suspend().
    
    This way the suspend code will remain symmetrical with respect to the resume
    code and it may allow us to speed up things in the future by suspending and
    resuming devices and/or saving the suspend image in many threads.
    
    The following series of patches reorders the suspend and resume code so that
    nonboot CPUs are disabled after devices have been suspended and enabled before
    the devices are resumed.  It also causes pm_ops->finish() to be called after
    enable_nonboot_cpus() wherever necessary.
    
    This patch:
    
    Change the ordering of code in kernel/power/main.c so that device_suspend()
    is called before disable_nonboot_cpus() and pm_ops->finish() is called after
    enable_nonboot_cpus() and before device_resume(), as indicated by recent
    discussion on Linux-PM
    (cf. http://lists.osdl.org/pipermail/linux-pm/2006-November/004164.html).
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Cc: Patrick Mochel <mochel@digitalimplant.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c1725f2af89f1eda3cb9007290971b55084569a4
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Feb 10 01:43:29 2007 -0800

    [PATCH] ARM26: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Acked-by: Ian Molton <spyro@f2s.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 65fdc8544f7d27df95256cbcfc2a53fa0fa38134
Author: Aneesh Kumar K.V <aneesh.kumar@gmail.com>
Date:   Sat Feb 10 01:43:22 2007 -0800

    [PATCH] Alpha: increase PERCPU_ENOUGH_ROOM
    
    Module loading on Alpha was failing with error "Could not allocate 8 bytes
    percpu data".
    
    Looking at dmesg we have the below error "No per-cpu room for modules."
    
    Increase the PERCPU_ENOUGH_ROOM in a similar way as x86_64
    
    Signed-off-by: Aneesh Kumar K.V <aneesh.kumar@gmail.com>
    Cc: <Jay.Estabrook@hp.com>
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6ff1b4426e3afc61dcb67299709fde9041d59265
Author: Eric Paris <eparis@redhat.com>
Date:   Sat Feb 10 01:43:19 2007 -0800

    [PATCH] make reading /proc/sys/kernel/cap-bould not require CAP_SYS_MODULE
    
    Reading /proc/sys/kernel/cap-bound requires CAP_SYS_MODULE.  (see
    proc_dointvec_bset in kernel/sysctl.c)
    
    sysctl appears to drive all over proc reading everything it can get it's
    hands on and is complaining when it is being denied access to read
    cap-bound.  Clearly writing to cap-bound should be a sensitive operation
    but requiring CAP_SYS_MODULE to read cap-bound seems a bit to strong.  I
    believe the information could with reasonable certainty be obtained by
    looking at a bunch of the output of /proc/pid/status which has very low
    security protection, so at best we are just getting a little obfuscation of
    information.
    
    Currently SELinux policy has to 'dontaudit' capability checks for
    CAP_SYS_MODULE for things like sysctl which just want to read cap-bound.
    In doing so we also as a byproduct have to hide warnings of potential
    exploits such as if at some time that sysctl actually tried to load a
    module.  I wondered if anyone would have a problem opening cap-bound up to
    read from anyone?
    
    Acked-by: Chris Wright <chrisw@sous-sol.org>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit daa88c8d214ca4ab2f1764b6e503cef4b3cde9b2
Author: Ken Chen <kenchen@google.com>
Date:   Sat Feb 10 01:43:18 2007 -0800

    [PATCH] do not disturb page referenced state when unmapping memory range
    
    When kernel unmaps an address range, it needs to transfer PTE state into
    page struct.  Currently, kernel transfer access bit via
    mark_page_accessed().  The call to mark_page_accessed in the unmap path
    doesn't look logically correct.
    
    At unmap time, calling mark_page_accessed will causes page LRU state to be
    bumped up one step closer to more recently used state.  It is causing quite
    a bit headache in a scenario when a process creates a shmem segment, touch
    a whole bunch of pages, then unmaps it.  The unmapping takes a long time
    because mark_page_accessed() will start moving pages from inactive to
    active list.
    
    I'm not too much concerned with moving the page from one list to another in
    LRU.  Sooner or later it might be moved because of multiple mappings from
    various processes.  But it just doesn't look logical that when user asks a
    range to be unmapped, it's his intention that the process is no longer
    interested in these pages.  Moving those pages to active list (or bumping
    up a state towards more active) seems to be an over reaction.  It also
    prolongs unmapping latency which is the core issue I'm trying to solve.
    
    As suggested by Peter, we should still preserve the info on pte young
    pages, but not more.
    
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Acked-by: Ken Chen <kenchen@google.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 46626296314e5679c9aaca36979a50ac20692e0b
Author: Ken Chen <kenchen@google.com>
Date:   Sat Feb 10 01:43:17 2007 -0800

    [PATCH] convert ramfs to use __set_page_dirty_no_writeback
    
    As pointed out by Hugh, ramfs would also benefit from using the new
    set_page_dirty aop method for memory backed file systems.
    
    Signed-off-by: Ken Chen <kenchen@google.com>
    Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 767193253bbac889e176f90b6f17b7015f986551
Author: Ken Chen <kenchen@google.com>
Date:   Sat Feb 10 01:43:15 2007 -0800

    [PATCH] simplify shmem_aops.set_page_dirty() method
    
    shmem backed file does not have page writeback, nor it participates in
    backing device's dirty or writeback accounting.  So using generic
    __set_page_dirty_nobuffers() for its .set_page_dirty aops method is a bit
    overkill.  It unnecessarily prolongs shm unmap latency.
    
    For example, on a densely populated large shm segment (sevearl GBs), the
    unmapping operation becomes painfully long.  Because at unmap, kernel
    transfers dirty bit in PTE into page struct and to the radix tree tag.  The
    operation of tagging the radix tree is particularly expensive because it
    has to traverse the tree from the root to the leaf node on every dirty
    page.  What's bothering is that radix tree tag is used for page write back.
     However, shmem is memory backed and there is no page write back for such
    file system.  And in the end, we spend all that time tagging radix tree and
    none of that fancy tagging will be used.  So let's simplify it by introduce
    a new aops __set_page_dirty_no_writeback and this will speed up shm unmap.
    
    Signed-off-by: Ken Chen <kenchen@google.com>
    Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bd8029b66069d29fd02c304599411ca9bb7fa38c
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Sat Feb 10 01:43:14 2007 -0800

    [PATCH] zoneid: fix up calculations for ZONEID_PGSHIFT
    
    Currently if we have a non-zero ZONES_SHIFT we assume we are able to rely
    on that as the bottom edge of the ZONEID, if not then we use the
    NODES_PGOFF as the right end of either NODES _or_ SECTION.  This latter is
    more luck than judgement and would be incorrect if we reordered the
    SECTION,NODE,ZONE options in the fields space.
    
    Really what we want is the lower of the right hand end of the two fields we
    are using (either NODE,ZONE or SECTION,ZONE).  Codify that explicitly.  As
    always allow for there being no bits in either of the fields, such as might
    be valid in a non-numa machine with only a zone NORMAL.
    
    I have checked that the compiler is still able to constant fold all of this
    away correctly.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Acked-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5ac6da669e2476dbdac89b357b05b5a79bc5b657
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:14 2007 -0800

    [PATCH] Set CONFIG_ZONE_DMA for arches with GENERIC_ISA_DMA
    
    As Andi pointed out: CONFIG_GENERIC_ISA_DMA only disables the ISA DMA
    channel management.  Other functionality may still expect GFP_DMA to
    provide memory below 16M.  So we need to make sure that CONFIG_ZONE_DMA is
    set independent of CONFIG_GENERIC_ISA_DMA.  Undo the modifications to
    mm/Kconfig where we made ZONE_DMA dependent on GENERIC_ISA_DMA and set
    theses explicitly in each arches Kconfig.
    
    Reviews must occur for each arch in order to determine if ZONE_DMA can be
    switched off.  It can only be switched off if we know that all devices
    supported by a platform are capable of performing DMA transfers to all of
    memory (Some arches already support this: uml, avr32, sh sh64, parisc and
    IA64/Altix).
    
    In order to switch ZONE_DMA off conditionally, one would have to establish
    a scheme by which one can assure that no drivers are enabled that are only
    capable of doing I/O to a part of memory, or one needs to provide an
    alternate means of performing an allocation from a specific range of memory
    (like provided by alloc_pages_range()) and insure that all drivers use that
    call.  In that case the arches alloc_dma_coherent() may need to be modified
    to call alloc_pages_range() instead of relying on GFP_DMA.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 339ba9b15df58199b9783a23af234e947ec9e6ba
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:13 2007 -0800

    [PATCH] optional ZONE_DMA: remove ZONE_DMA remains from sh/sh64
    
    sh / sh64: Remove ZONE_DMA remains.
    
    Both arches do not need ZONE_DMA
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 005928374bf339e0b6783d78da8fd0701631e7ee
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:12 2007 -0800

    [PATCH] optional ZONE_DMA: remove ZONE_DMA remains from parisc
    
    Remove ZONE_DMA remains from parisc so that kernels are build without
    ZONE_DMA.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Matthew Wilcox <willy@debian.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 09ae1f585e9def652cdb1d0484611d4f4dc2d5fd
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:11 2007 -0800

    [PATCH] optional ZONE_DMA: optional ZONE_DMA for ia64
    
    ZONE_DMA less operation for IA64 SGI platform
    
    Disable ZONE_DMA for SGI SN2.  All memory is addressable by all devices and we
    do not need any special memory pool.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4b51d66989218aad731a721b5b28c79bf5388c09
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:10 2007 -0800

    [PATCH] optional ZONE_DMA: optional ZONE_DMA in the VM
    
    Make ZONE_DMA optional in core code.
    
    - ifdef all code for ZONE_DMA and related definitions following the example
      for ZONE_DMA32 and ZONE_HIGHMEM.
    
    - Without ZONE_DMA, ZONE_HIGHMEM and ZONE_DMA32 we get to a ZONES_SHIFT of
      0.
    
    - Modify the VM statistics to work correctly without a DMA zone.
    
    - Modify slab to not create DMA slabs if there is no ZONE_DMA.
    
    [akpm@osdl.org: cleanup]
    [jdike@addtoit.com: build fix]
    [apw@shadowen.org: Simplify calculation of the number of bits we need for ZONES_SHIFT]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Matthew Wilcox <willy@debian.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 66701b1499a3ff11882c8c4aef36e8eac86e17b1
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:09 2007 -0800

    [PATCH] optional ZONE_DMA: introduce CONFIG_ZONE_DMA
    
    This patch simply defines CONFIG_ZONE_DMA for all arches.  We later do special
    things with CONFIG_ZONE_DMA after the VM and an arch are prepared to work
    without ZONE_DMA.
    
    CONFIG_ZONE_DMA can be defined in two ways depending on how an architecture
    handles ISA DMA.
    
    First if CONFIG_GENERIC_ISA_DMA is set by the arch then we know that the arch
    needs ZONE_DMA because ISA DMA devices are supported.  We can catch this in
    mm/Kconfig and do not need to modify arch code.
    
    Second, arches may use ZONE_DMA in an unknown way.  We set CONFIG_ZONE_DMA for
    all arches that do not set CONFIG_GENERIC_ISA_DMA in order to insure backwards
    compatibility.  The arches may later undefine ZONE_DMA if their arch code has
    been verified to not depend on ZONE_DMA.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Matthew Wilcox <willy@debian.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6267276f3fdda9ad0d5ca451bdcbdf42b802d64b
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:07 2007 -0800

    [PATCH] optional ZONE_DMA: deal with cases of ZONE_DMA meaning the first zone
    
    This patchset follows up on the earlier work in Andrew's tree to reduce the
    number of zones.  The patches allow to go to a minimum of 2 zones.  This one
    allows also to make ZONE_DMA optional and therefore the number of zones can be
    reduced to one.
    
    ZONE_DMA is usually used for ISA DMA devices.  There are a number of reasons
    why we would not want to have ZONE_DMA
    
    1. Some arches do not need ZONE_DMA at all.
    
    2. With the advent of IOMMUs DMA zones are no longer needed.
       The necessity of DMA zones may drastically be reduced
       in the future. This patchset allows a compilation of
       a kernel without that overhead.
    
    3. Devices that require ISA DMA get rare these days. All
       my systems do not have any need for ISA DMA.
    
    4. The presence of an additional zone unecessarily complicates
       VM operations because it must be scanned and balancing
       logic must operate on its.
    
    5. With only ZONE_NORMAL one can reach the situation where
       we have only one zone. This will allow the unrolling of many
       loops in the VM and allows the optimization of varous
       code paths in the VM.
    
    6. Having only a single zone in a NUMA system results in a
       1-1 correspondence between nodes and zones. Various additional
       optimizations to critical VM paths become possible.
    
    Many systems today can operate just fine with a single zone.  If you look at
    what is in ZONE_DMA then one usually sees that nothing uses it.  The DMA slabs
    are empty (Some arches use ZONE_DMA instead of ZONE_NORMAL, then ZONE_NORMAL
    will be empty instead).
    
    On all of my systems (i386, x86_64, ia64) ZONE_DMA is completely empty.  Why
    constantly look at an empty zone in /proc/zoneinfo and empty slab in
    /proc/slabinfo?  Non i386 also frequently have no need for ZONE_DMA and zones
    stay empty.
    
    The patchset was tested on i386 (UP / SMP), x86_64 (UP, NUMA) and ia64 (NUMA).
    
    The RFC posted earlier (see
    http://marc.theaimsgroup.com/?l=linux-kernel&m=115231723513008&w=2) had lots
    of #ifdefs in them.  An effort has been made to minize the number of #ifdefs
    and make this as compact as possible.  The job was made much easier by the
    ongoing efforts of others to extract common arch specific functionality.
    
    I have been running this for awhile now on my desktop and finally Linux is
    using all my available RAM instead of leaving the 16MB in ZONE_DMA untouched:
    
    christoph@pentium940:~$ cat /proc/zoneinfo
    Node 0, zone   Normal
      pages free     4435
            min      1448
            low      1810
            high     2172
            active   241786
            inactive 210170
            scanned  0 (a: 0 i: 0)
            spanned  524224
            present  524224
        nr_anon_pages 61680
        nr_mapped    14271
        nr_file_pages 390264
        nr_slab_reclaimable 27564
        nr_slab_unreclaimable 1793
        nr_page_table_pages 449
        nr_dirty     39
        nr_writeback 0
        nr_unstable  0
        nr_bounce    0
        cpu: 0 pcp: 0
                  count: 156
                  high:  186
                  batch: 31
        cpu: 0 pcp: 1
                  count: 9
                  high:  62
                  batch: 15
      vm stats threshold: 20
        cpu: 1 pcp: 0
                  count: 177
                  high:  186
                  batch: 31
        cpu: 1 pcp: 1
                  count: 12
                  high:  62
                  batch: 15
      vm stats threshold: 20
      all_unreclaimable: 0
      prev_priority:     12
      temp_priority:     12
      start_pfn:         0
    
    This patch:
    
    In two places in the VM we use ZONE_DMA to refer to the first zone.  If
    ZONE_DMA is optional then other zones may be first.  So simply replace
    ZONE_DMA with zone 0.
    
    This also fixes ZONETABLE_PGSHIFT.  If we have only a single zone then
    ZONES_PGSHIFT may become 0 because there is no need anymore to encode the zone
    number related to a pgdat.  However, we still need a zonetable to index all
    the zones for each node if this is a NUMA system.  Therefore define
    ZONETABLE_SHIFT unconditionally as the offset of the ZONE field in page flags.
    
    [apw@shadowen.org: fix mismerge]
    Acked-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Matthew Wilcox <willy@debian.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 65e458d43dff872ee560e721fb0fdb367bb5adb0
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:05 2007 -0800

    [PATCH] Drop get_zone_counts()
    
    Values are available via ZVC sums.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 05a0416be2b88d859efcbc4a4290555a04d169a1
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:05 2007 -0800

    [PATCH] Drop __get_zone_counts()
    
    Values are readily available via ZVC per node and global sums.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9195481d2f869a2707a272057f3f8664fd277534
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:04 2007 -0800

    [PATCH] Drop nr_free_pages_pgdat()
    
    Function is unnecessary now.  We can use the summing features of the ZVCs to
    get the values we need.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 96177299416dbccb73b54e6b344260154a445375
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:03 2007 -0800

    [PATCH] Drop free_pages()
    
    nr_free_pages is now a simple access to a global variable.  Make it a macro
    instead of a function.
    
    The nr_free_pages now requires vmstat.h to be included.  There is one
    occurrence in power management where we need to add the include.  Directly
    refrer to global_page_state() there to clarify why the #include was added.
    
    [akpm@osdl.org: arm build fix]
    [akpm@osdl.org: sparc64 build fix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 51ed4491271be8c56bdb2a03481ed34ea4984bc2
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:02 2007 -0800

    [PATCH] Reorder ZVCs according to cacheline
    
    The global and per zone counter sums are in arrays of longs.  Reorder the ZVCs
    so that the most frequently used ZVCs are put into the same cacheline.  That
    way calculations of the global, node and per zone vm state touches only a
    single cacheline.  This is mostly important for 64 bit systems were one 128
    byte cacheline takes only 8 longs.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d23ad42324cc4378132e51f2fc5c9ba6cbe75182
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:02 2007 -0800

    [PATCH] Use ZVC for free_pages
    
    This is again simplifies some of the VM counter calculations through the use
    of the ZVC consolidated counters.
    
    [michal.k.k.piotrowski@gmail.com: build fix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c878538598d1e7ab41ecc0de8894e34e2fdef630
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:43:01 2007 -0800

    [PATCH] Use ZVC for inactive and active counts
    
    The determination of the dirty ratio to determine writeback behavior is
    currently based on the number of total pages on the system.
    
    However, not all pages in the system may be dirtied.  Thus the ratio is always
    too low and can never reach 100%.  The ratio may be particularly skewed if
    large hugepage allocations, slab allocations or device driver buffers make
    large sections of memory not available anymore.  In that case we may get into
    a situation in which f.e.  the background writeback ratio of 40% cannot be
    reached anymore which leads to undesired writeback behavior.
    
    This patchset fixes that issue by determining the ratio based on the actual
    pages that may potentially be dirty.  These are the pages on the active and
    the inactive list plus free pages.
    
    The problem with those counts has so far been that it is expensive to
    calculate these because counts from multiple nodes and multiple zones will
    have to be summed up.  This patchset makes these counters ZVC counters.  This
    means that a current sum per zone, per node and for the whole system is always
    available via global variables and not expensive anymore to calculate.
    
    The patchset results in some other good side effects:
    
    - Removal of the various functions that sum up free, active and inactive
      page counts
    
    - Cleanup of the functions that display information via the proc filesystem.
    
    This patch:
    
    The use of a ZVC for nr_inactive and nr_active allows a simplification of some
    counter operations.  More ZVC functionality is used for sums etc in the
    following patches.
    
    [akpm@osdl.org: UP build fix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c3704ceb4ad055b489b143f4e37c57d128908012
Author: Hugh Dickins <hugh@veritas.com>
Date:   Sat Feb 10 01:43:00 2007 -0800

    [PATCH] page_mkwrite caller race fix
    
    After do_wp_page has tested page_mkwrite, it must release old_page after
    acquiring page table lock, not before: at some stage that ordering got
    reversed, leaving a (very unlikely) window in which old_page might be
    truncated, freed, and reused in the same position.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Acked-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f05b6284ee5d3be51ebe22284fc4b25fc586f380
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sat Feb 10 01:42:59 2007 -0800

    [PATCH] typeof __page_to_pfn with SPARSEMEM=y
    
    With CONFIG_SPARSEMEM=y:
    
    mm/rmap.c:579: warning: format '%lx' expects type 'long unsigned int', but argument 2 has type 'int'
    
    Make __page_to_pfn() return unsigned long.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5a88a13d0624769088ae220e40c2f542f1661eb3
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Feb 10 01:42:58 2007 -0800

    [PATCH] /proc/zoneinfo: fix vm stats display
    
    This early break prevents us from displaying info for the vm stats thresholds
    if the zone doesn't have any pages in its per-cpu pagesets.
    
    So my 800MB i386 box says:
    
    Node 0, zone      DMA
      pages free     2365
            min      16
            low      20
            high     24
            active   0
            inactive 0
            scanned  0 (a: 0 i: 0)
            spanned  4096
            present  4044
        nr_anon_pages 0
        nr_mapped    1
        nr_file_pages 0
        nr_slab_reclaimable 0
        nr_slab_unreclaimable 0
        nr_page_table_pages 0
        nr_dirty     0
        nr_writeback 0
        nr_unstable  0
        nr_bounce    0
        nr_vmscan_write 0
            protection: (0, 868, 868)
      pagesets
      all_unreclaimable: 0
      prev_priority:     12
      start_pfn:         0
    Node 0, zone   Normal
      pages free     199713
            min      934
            low      1167
            high     1401
            active   10215
            inactive 4507
            scanned  0 (a: 0 i: 0)
            spanned  225280
            present  222420
        nr_anon_pages 2685
        nr_mapped    1110
        nr_file_pages 12055
        nr_slab_reclaimable 2216
        nr_slab_unreclaimable 1527
        nr_page_table_pages 213
        nr_dirty     0
        nr_writeback 0
        nr_unstable  0
        nr_bounce    0
        nr_vmscan_write 0
            protection: (0, 0, 0)
      pagesets
        cpu: 0 pcp: 0
                  count: 152
                  high:  186
                  batch: 31
        cpu: 0 pcp: 1
                  count: 13
                  high:  62
                  batch: 15
      vm stats threshold: 16
        cpu: 1 pcp: 0
                  count: 34
                  high:  186
                  batch: 31
        cpu: 1 pcp: 1
                  count: 10
                  high:  62
                  batch: 15
      vm stats threshold: 16
      all_unreclaimable: 0
      prev_priority:     12
      start_pfn:         4096
    
    Just nuke all that search-for-the-first-non-empty-pageset code.  Dunno why it
    was there in the first place..
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a6af2bc3d5ce8722b9d09c5bdd5383c91c419653
Author: Mel Gorman <mel@csn.ul.ie>
Date:   Sat Feb 10 01:42:57 2007 -0800

    [PATCH] Avoid excessive sorting of early_node_map[]
    
    find_min_pfn_for_node() and find_min_pfn_with_active_regions() sort
    early_node_map[] on every call.  This is an excessive amount of sorting and
    that can be avoided.  This patch always searches the whole early_node_map[]
    in find_min_pfn_for_node() instead of returning the first value found.  The
    map is then only sorted once when required.  Successfully boot tested on a
    number of machines.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Mel Gorman <mel@csn.ul.ie>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit e10a4437cb37c85f2df95432025b392d98aac2aa
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:42:56 2007 -0800

    [PATCH] Remove final references to deprecated "MAP_ANON" page protection flag
    
    Remove the last vestiges of the long-deprecated "MAP_ANON" page protection
    flag: use "MAP_ANONYMOUS" instead.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7c5cae368a6c44eac0e817ae130301b65ff446dc
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sat Feb 10 01:42:55 2007 -0800

    [PATCH] slab: use parameter passed to cache_reap to determine pointer to work structure
    
    Use the pointer passed to cache_reap to determine the work pointer and
    consolidate exit paths.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8c8cc2c10c21943dd3499a2df7aac835093b37f3
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Sat Feb 10 01:42:53 2007 -0800

    [PATCH] slab: cache alloc cleanups
    
    Clean up __cache_alloc and __cache_alloc_node functions a bit.  We no
    longer need to do NUMA_BUILD tricks and the UMA allocation path is much
    simpler.  No functional changes in this patch.
    
    Note: saves few kernel text bytes on x86 NUMA build due to using gotos in
    __cache_alloc_node() and moving __GFP_THISNODE check in to
    fallback_alloc().
    
    Cc: Andy Whitcroft <apw@shadowen.org>
    Cc: Christoph Hellwig <hch@lst.de>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Acked-by: Christoph Lameter <christoph@lameter.com>
    Cc: Paul Jackson <pj@sgi.com>
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6e40e73097a5e4ad1b9f92fa21757343fdd6a682
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Sat Feb 10 01:42:52 2007 -0800

    [PATCH] slab: remove broken PageSlab check from kfree_debugcheck
    
    The PageSlab debug check in kfree_debugcheck() is broken for compound
    pages.  It is also redundant as we already do BUG_ON for non-slab pages in
    page_get_cache() and page_get_slab() which are always called before we free
    any actual objects.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 90ac7648e0bcbf84a33aed5b15ae6894fda92779
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Feb 11 18:58:58 2007 +0100

    [ARM] 4160/1: S3C24XX: defconfig update for 2.6.20
    
    Update defconfig for the 2.6.20 release, and ensure that the
    AML5900 machine is built.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1b8fc1880cf36bd1f3df932601a6745bb164acc4
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Feb 11 18:56:03 2007 +0100

    [ARM] 4159/1: S3C2410: fix compile of arch/arm/mach-s3c2410/mach-aml5900.c
    
    Fix compile of arch/arm/mach-s3c2410/mach-aml5900.c due to missing
    fixes that have been applied to the rest of the tree.
    
    Include <linux/serial_core.h> to provide the upf_t type needed for
    the serial code, and remove the old static map of the SPI which is
    not needed for the new spi drivers.
    
    mach-amlm5900.c:51: include/asm/arch/regs-serial.h:200: error: parse error befo
    re "upf_t"
    mach-amlm5900.c:117: error: 'S3C24XX_VA_SPI' undeclared here (not in a function)
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a21765a70ec06be175d3997320a83fa66fcc8955
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Feb 11 18:31:01 2007 +0100

    [ARM] 4157/2: S3C24XX: move arch/arch/mach-s3c2410 into cpu components
    
    The following patch and script moves the arch/arm/mach-s3c2410
    directory into arch/arm/plat-s3c24xx for the generic core code
    and inti arch/arm/mach-s3c{cpu} for the cpu/machine support files
    
    Include directory include/asm-arm/plat-s3c24xx is added for the
    core include files.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44b18693904e65d840ae999ac8aa717551cf509f
Author: Imre Deak <imre.deak@solidboot.com>
Date:   Sun Feb 11 13:45:13 2007 +0100

    [ARM] 4158/1: Fix user page protection macros
    
    The PAGE_* user page protection macros don't take into account the
    configured memory policy and other architecture specific bits like
    the global/ASID and shared mapping bits. Instead of constants let
    these depend on a variable fixed up at init just like PAGE_KERNEL.
    
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 67a9c7af1f5eb5dbf1399b364fcf7e64dc28236c
Author: Thomas Koeller <thomas.koeller@baslerweb.com>
Date:   Sat Feb 10 11:21:27 2007 +0100

    [MTD] [NAND] eXcite nand flash driver
    
    This is a nand flash driver for the eXcite series of intelligent
    cameras manufactured by Basler Vision Technologies AG.
    
    Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d19494b187b20e363f9b434b9ceab4159ac88324
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 9 19:24:45 2007 +0100

    [ARM] 4156/1: S3C24XX: Add CONFIG_S3C2410_GPIO
    
    In preperation for splitting the arch-s3c2410 directory
    up, add a CONFIG_S3C2410_GPIO instead of implicitly
    making the .o for CONFIG_CPU_S3C2410 and CONFIG_CPU_S3C2440
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4c784ef76ac4443ab13648859f1b2a2737546cc1
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 9 19:20:47 2007 +0100

    [ARM] 4155/1: S3C24XX: remove obj-dma-* from Makefile
    
    In preperation for splitting the arch-s3c2410 directory
    up, remove the use of obj-dma-y in the Makefile and move
    to using CONFIG_S3C2440_DMA, CONFIG_S3C2412_DMA, etc.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 382266ad5ad4119ec12df889afa5062a0a0cd6ae
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:48:19 2007 +0100

    [ARM] 4135/1: Add support for the L210/L220 cache controllers
    
    This patch adds the support for the L210/L220 (outer) cache
    controller. The cache range operations are done by index/way since L2
    cache controller only accepts physical addresses.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit eeea82ff4a3aebed9f501f04ca7b65d3605f247a
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 16:10:25 2007 -0800

    [ARM] Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 00584719b569accd039543f6bd2ac7c23c92d07f
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Feb 5 16:10:22 2007 -0800

    [ARM] amba-pl010: add reference to ep93xx to Kconfig help entry
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d7ea10d9cbddd49bab282adef805203a36e43101
Author: Pavel Pisa <ppisa4lists@pikron.com>
Date:   Mon Feb 5 16:10:20 2007 -0800

    [ARM] i.MX serial: fix IRQ allocation
    
    If RTS interrupt is caused by RTS senzing logic inside i.MX UART module the
    IRQ type cannot be set.
    
    It applies only for interrupts going through GPIO layer.  The problem has
    been noticed by Konstantin Kletschke some time ago.
    
      No IRQF_TRIGGER set_type function for IRQ 26 (MPU)
    
    I would not change type to fixed 0, because it could be possible to use
    different GPIO MX1 pin for RTS in the theory.  On the other hand it is only
    for documentation purposes now, because RTS read code would have to be
    adjusted in such case.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8c0b254b7efaa7941b3acfe790dd16597b0964b3
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Mon Feb 5 16:10:16 2007 -0800

    [ARM] i.MX serial: fix tx buffer overflows
    
    Fix occasional tx buffer overflows in the i.MX serial driver which came
    from the fact that space in the buffer was checked after sending the first
    byte.  Also, fifosize is 32 bytes, not 8.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Acked-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 12c834527b85571792f1c4f1d12632185bea44c2
Author: Alex Dubov <oakad@yahoo.com>
Date:   Sat Feb 10 21:16:40 2007 -0800

    tifm_sd: treat "status error" as normal command completion
    
    TI FlasMedia controller attempts to validate command responses and
    issues a "status error" if response does not matches its perceived
    (by controller) value. As mmc layer does its own validation we can
    safely ignore the controller's opinion.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit abc71668b5c99b655c6b2677570748a840d4c713
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Feb 11 16:27:13 2007 +0100

    mmc: wbsd: Remove stray kunmap_atomic()
    
    There was one kunmap_atomic() left over from
    4a0ddbd25ad4e03a0a1657f5cb2259c9a35fe9e6 that was causing
    crashes.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 784020fb950741cbb7390c6b622321da626fb1e8
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Feb 10 23:28:13 2007 -0800

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 35a17eb6a87c9ceb0d35dcb51f464fe6faf584ab
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Feb 10 17:41:02 2007 -0800

    [SPARC64]: Add PCI MSI support on Niagara.
    
    This is kind of hokey, we could use the hardware provided facilities
    much better.
    
    MSIs are assosciated with MSI Queues.  MSI Queues generate interrupts
    when any MSI assosciated with it is signalled.  This suggests a
    two-tiered IRQ dispatch scheme:
    
    	MSI Queue interrupt --> queue interrupt handler
    		MSI dispatch --> driver interrupt handler
    
    But we just get one-level under Linux currently.  What I'd like to do
    is possibly stick the IRQ actions into a per-MSI-Queue data structure,
    and dispatch them form there, but the generic IRQ layer doesn't
    provide a way to do that right now.
    
    So, the current kludge is to "ACK" the interrupt by processing the
    MSI Queue data structures and ACK'ing them, then we run the actual
    handler like normal.
    
    We are wasting a lot of useful information, for example the MSI data
    and address are provided with ever MSI, as well as a system tick if
    available.  If we could pass this into the IRQ handler it could help
    with certain things, in particular for PCI-Express error messages.
    
    The MSI entries on sparc64 also tell you exactly which bus/device/fn
    sent the MSI, which would be great for error handling when no
    registered IRQ handler can service the interrupt.
    
    We override the disable/enable IRQ chip methods in sun4v_msi, so we
    have to call {mask,unmask}_msi_irq() directly from there.  This is
    another ugly wart.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 68c921869491c119142612fa5796c9f8b4e9970b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jan 29 12:12:28 2007 -0800

    [SPARC64] IRQ: Use irq_desc->chip_data instead of irq_desc->handler_data
    
    Otherwise we can't use the generic MSI code.
    
    Furthermore, properly use the {get,set}_irq_foo() abstracted
    interfaces instead of direct accesses to irq_desc[]->foo.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf69eab231bb748b5c34912412a8fc8c763bcf57
Author: Fabio Massimo Di Nitto <fabbione@ubuntu.com>
Date:   Wed Dec 20 09:22:28 2006 -0800

    [SPARC64]: Add obppath sysfs attribute for SBUS and PCI devices.
    
    Signed-off-by: Fabio Massimo Di Nitto <fabbione@ubuntu.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d18d7682c18b617f523df6beea5ea0bd396ed0bd
Author: Fabio Massimo Di Nitto <fabbione@ubuntu.com>
Date:   Sat Feb 10 23:50:00 2007 -0800

    [PARTITION]: Add whole_disk attribute.
    
    Some partitioning systems create special partitions that
    span the entire disk.  One example are Sun partitions, and
    this whole-disk partition exists to tell the firmware the
    extent of the entire device so it can load the boot block
    and do other things.
    
    Such partitions should not be treated as normal partitions,
    because all the other partitions overlap this whole-disk one.
    So we'd see multiple instances of the same UUID etc. which
    we do not want.  udev and friends can thus search for this
    'whole_disk' attribute and use it to decide to ignore the
    partition.
    
    Signed-off-by: Fabio Massimo Di Nitto <fabbione@ubuntu.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5ef213f6842277ee1df5659f59fac0ffc9beb411
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Sat Feb 10 16:57:03 2007 -0800

    [IPV4]: Restore multipath routing after rt_next changes.
    
    I forgot to test build this part of the networking code... Sorry guys.
    This patch renames u.rt_next to u.dst.rt_next
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bda390d5c883d5dff1f3ae2bade4c25869769894
Author: Masahide NAKAMURA <nakam@linux-ipv6.org>
Date:   Fri Feb 9 21:22:16 2007 -0800

    [XFRM] IPV6: Fix outbound RO transformation which is broken by IPsec tunnel patch.
    
    It seems to miss RO mode path by IPv6 over IPv4 IPsec tunnel patch
    when it changed semantics to check the mode from
    "xfrm[i]->props.mode != XFRM_MODE_TRANSPORT" to
    "xfrm[i]->props.mode == XFRM_MODE_TUNNEL" before changing address.
    It also makes two incline functions __xfrm6_bundle_addr_{remote,local}
    are used by nobody.
    
    This patch fixes it.
    
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1e19e02ca0c5e33ea73a25127dbe6c3b8fcaac4b
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Feb 9 16:26:55 2007 -0800

    [NET]: Reorder fields of struct dst_entry
    
    This last patch (but not least :) ) finally moves the next pointer at
    the end of struct dst_entry. This permits to perform route cache
    lookups with a minimal cost of one cache line per entry, instead of
    two.
    
    Both 32bits and 64bits platforms benefit from this new layout.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0c195c3fc4e95a06b0c0017506f074c94af99c35
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Feb 9 16:25:52 2007 -0800

    [DECNET]: Convert decnet route to use the new dst_entry 'next' pointer
    
    This patch removes the next pointer from 'struct dn_route.u' union,
    and renames u.rt_next to u.dst.dn_next.
    
    It also moves 'struct flowi' right after 'struct dst_entry' to prepare
    speedup lookups.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7cc482634f1f1e1db5401007658c8e8d6cf1617d
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Feb 9 16:22:57 2007 -0800

    [IPV6]: Convert ipv6 route to use the new dst_entry 'next' pointer
    
    This patch removes the next pointer from 'struct rt6_info.u' union,
    and renames u.next to u.dst.rt6_next.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 093c2ca4167cf66f69020329d14138da0da8599b
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Feb 9 16:19:26 2007 -0800

    [IPV4]: Convert ipv4 route to use the new dst_entry 'next' pointer
    
    This patch removes the rt_next pointer from 'struct rtable.u' union,
    and renames u.rt_next to u.dst_rt_next.
    
    It also moves 'struct flowi' right after 'struct dst_entry' to prepare
    the gain on lookups.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 75ce7ceaa1221858c0163e75d19eb8a423a212ff
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Feb 9 16:14:24 2007 -0800

    [NET]: Introduce union in struct dst_entry to hold 'next' pointer
    
    This patch introduces an anonymous union to nicely express the fact that all
    objects inherited from struct dst_entry should access to the generic 'next'
    pointer but with appropriate type verification.
    
    This patch is a prereq before following patches.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7b14315faf62935a791dd67969c4289563058f0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Feb 9 15:46:51 2007 -0800

    [DECNET]: fix misannotation of linkinfo_dn
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 11a2254716255c6f9cd98e0e0e8f44df9b13b66c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Feb 9 15:46:30 2007 -0800

    [DECNET]: FRA_{DST,SRC} are le16 for decnet
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95f30b336b944e3e418f825044b4793d9e9aac09
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Fri Feb 9 15:44:52 2007 -0800

    [UDP]: UDP can use sk_hash to speedup lookups
    
    In a prior patch, I introduced a sk_hash field (__sk_common.skc_hash)  to let
    tcp lookups use one cache line per unmatched entry instead of two.
    
    We can also use sk_hash to speedup UDP part as well. We store in sk_hash the
    hnum value, and use sk->sk_hash (same cache line than 'next' pointer),
    instead of inet->num (different cache line)
    
    Note : We still have a false sharing problem for SMP machines, because
    sock_hold(sock) dirties the cache line containing the 'next' pointer. Not
    counting the udp_hash_lock rwlock. (did someone mentioned RCU ? :) )
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4768fbcbcfbbcacb785ae08eef33767a0b4fdcdd
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:31 2007 +0900

    [NET]: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a716c1197d608c55adfba45692a890ca64e10df0
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:29 2007 +0900

    [NET] XFRM: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f8e1d20183bf56f889d60edadd48f54912b9277f
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:27 2007 +0900

    [NET] X25: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4ba6122b4e0537858e8579716896f01acf55f745
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:25 2007 +0900

    [NET] WANROUTER: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ac7bfa62f3ad06a2a2ac3938b7e6fc4f318a762d
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:23 2007 +0900

    [NET] UNIX: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c43072852649d8382b81237ce51195bcec36f24a
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:21 2007 +0900

    [NET] TIPC: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cca5172a7ec10dfdb0b787cd8e9d5b0b8f179793
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 15:38:13 2007 -0800

    [NET] SUNRPC: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d808ad9ab8b1109239027c248c4652503b9d3029
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:18 2007 +0900

    [NET] SCTP: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 10297b99315e5e08fe623ba56da35db1fee69ba9
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:16 2007 +0900

    [NET] SCHED: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7612713fb69a17b79ca7d757df4446700f4afe6c
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:14 2007 +0900

    [NET] RXRPC: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3dcf7c5e8b92387e0c63b3c75757fee1991f78f8
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:12 2007 +0900

    [NET] ROSE: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1ce4f28bd761eeb979d29be350f2d22383d4c2f0
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:10 2007 +0900

    [NET] PACKET: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5f8f59d6641a3726985593f3e52430daa90c7933
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:09 2007 +0900

    [NET] NETROM: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 746fac4dcd82864c6ecd85d3f09cc173db9b1870
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:07 2007 +0900

    [NET] NETLINK: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1a95265b44ca31456adaacebebcde12714f0c03
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:05 2007 +0900

    [NET] NETLABEL: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d57b1869b231c56de441db35c647879d51c5d29e
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:25:01 2007 +0900

    [NET] LLC: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 56d6c3d7a7963ee2a480232e5ef6a2f31635e80e
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:59 2007 +0900

    [NET] LAPB: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ff24541d9f80b9161022588b4435a9b54aec2e6
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:58 2007 +0900

    [NET] KEY: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6819bc2e1e46c71711a8dddf4040e706b02973c0
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:53 2007 +0900

    [NET] IRDA: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 981c0ff6900c981668a798fe9e0bc5ba32ee3fd4
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:51 2007 +0900

    [NET] IPX: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1ab1457c42bc078e5a9becd82a7f9f940b55c53a
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:49 2007 +0900

    [NET] IPV6: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e905a9edab7f4f14f9213b52234e4a346c690911
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:47 2007 +0900

    [NET] IPV4: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 642656518b2e64fd59d9bbd15b6885cac5fe99b1
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:46 2007 +0900

    [NET] IEEE80211: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 03d52d7cfcc7dec2b251f5b02c0638f952ff5d65
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:44 2007 +0900

    [NET] ETHERNET: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9b6aab9cfa32d3be499b43ffcb23a9ac5cbd740
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:42 2007 +0900

    [NET] ECONET: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 429eb0fae6c06c9adcda03401c09c2b9ccaa7ebd
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:40 2007 +0900

    [NET] DECNET: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9eaf17341834de00351bf79f16b2d879c8aea96
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:38 2007 +0900

    [NET] DCCP: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4ec93edb14fe5fdee9fae6335f2cbba204627eac
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:36 2007 +0900

    [NET] CORE: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9d6f229fc45b6ac268020c0c8eff29e94bb34381
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:35 2007 +0900

    [NET] BRIDGE: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8e87d14255acffeee36873de226dc25c11b5f46d
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:33 2007 +0900

    [NET] BLUETOOTH: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 528930b91ee89a05a6264629cf99109652c19ca8
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:31 2007 +0900

    [NET] AX25: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7d57453d20e27de69ecafd121005e9d13a0f427
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:29 2007 +0900

    [NET] ATM: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ed4477b96049fe2908c63f854bf8e37c6df4a635
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:27 2007 +0900

    [NET] APPLETALK: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 122952fc2d6b5ca865e8475ec471d8944fa921c7
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:25 2007 +0900

    [NET] 8021Q: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9afa0949eea959f28248b717757c201765f1c19b
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Feb 9 23:24:24 2007 +0900

    [NET] 802: Fix whitespace errors.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bd0561c9d8dcbf21cd9aa46c416bbf6a3a12e4b1
Merge: 348f31e... 66efc5a...
Author: Dave Jones <davej@redhat.com>
Date:   Sat Feb 10 20:36:29 2007 -0500

    [CPUFREQ] Fix up merge conflicts with recent ACPI changes.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 348f31ed2bd18391fe5903aa0ad7bfcda6d8ca0b
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Thu Feb 8 18:56:04 2007 +0100

    [CPUFREQ] Longhaul - Separate frequency and voltage transition
    
    This change should make Longhaul more compatible with
    both ver. 2 and Powersaver processors. Voltage transitions
    will be done before or after frequency transition. That depends
    on direction of change. I don't know how to force conservative
    governor when voltage scaling is enabled, so there is only
    a warning for user. Minimal voltage is calculated in different
    way now because in this way more power is saved at lower
    multipliers.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e57501c15f48d6b7a8fe2b023be8f4779484482d
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Thu Feb 8 23:12:02 2007 +0100

    [CPUFREQ] Longhaul - Models of Nehemiah
    
    Borowed from VIA driver.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c18a1483f478adbeb4cc7148db22c4a9c10aaee3
Author: Dave Jones <davej@redhat.com>
Date:   Sat Feb 10 20:03:51 2007 -0500

    [CPUFREQ] Whitespace fixup
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 9addf3b6388459f315adc728d27d34603a00d427
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Wed Feb 7 22:53:29 2007 +0100

    [CPUFREQ] Longhaul - Simplier minmult
    
    Simple cleanup in code which is setting minmult.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit f0ec313a89a7377f440c815f82b0370bd67f62c6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 5 16:12:45 2007 -0800

    [CPUFREQ] CPU_FREQ_TABLE shouldn't be a def_tristate
    
    CPU_FREQ_TABLE enables helper code and gets select'ed when it's required.
    
    Building it as a module when it's not required doesn't seem to make much sense.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 56463b78cdca8e9ff8cc1759bca0c0777a061d6b
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Feb 5 16:12:45 2007 -0800

    [CPUFREQ] ondemand governor use new cpufreq rwsem locking in work callback
    
    Eliminate flush_workqueue in cpufreq_governor(STOP) callpath. Using flush
    there has a deadlock potential as in
    
    http://uwsg.iu.edu/hypermail/linux/kernel/0611.3/1223.html
    
    Also, cleanup the locking issues with do_dbs_timer delayed_work callback.  As
    it changes the CPU frequency using __cpufreq_target, it needs to have
    policy_rwsem in write mode, which also protects it from hot plug.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Cc: Gautham R Shenoy <ego@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 529af7a14f04f92213bac371931a2b2b060c63fa
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Feb 5 16:12:44 2007 -0800

    [CPUFREQ] ondemand governor restructure the work callback
    
    Restructure the delayed_work callback in ondemand.
    
    This eliminates the need for smp_processor_id in the callback function and
    also helps in proper locking and avoiding flush_workqueue when stopping the
    governor (done in subsequent patch).
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Cc: Gautham R Shenoy <ego@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 5a01f2e8f3ac134e24144d74bb48a60236f7024d
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Feb 5 16:12:44 2007 -0800

    [CPUFREQ] Rewrite lock in cpufreq to eliminate cpufreq/hotplug related issues
    
    Yet another attempt to resolve cpufreq and hotplug locking issues.
    
    Patchset has 3 patches:
    * Rewrite the lock infrastructure of cpufreq using a per cpu rwsem.
    * Minor restructuring of work callback in ondemand driver.
    * Use the new cpufreq rwsem infrastructure in ondemand work.
    
    This patch:
    
    Convert policy->lock to rwsem and move it to per_cpu area.
    This rwsem will protect against both changing/accessing policy
    related parameters and CPU hot plug/unplug.
    
    [malattia@linux.it: fix oops in kref_put()]
    Cc: Gautham R Shenoy <ego@in.ibm.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Cc: Gautham R Shenoy <ego@in.ibm.com>
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c120069779e3e35917c15393cf2847fa79811eb6
Author: Dave Jones <davej@redhat.com>
Date:   Mon Feb 5 16:12:43 2007 -0800

    [CPUFREQ] Remove hotplug cpu crap
    
    The hotplug CPU locking in cpufreq is horrendous.  No-one seems to care
    enough to fix it, so just remove it so that the 99.9% of the real world
    users of this code can use cpufreq without being bothered by warnings.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 86acd49aa128bd7a1d4362c256c21fbdc2d5b1a0
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Mon Feb 5 19:57:25 2007 +0100

    [CPUFREQ] Enhanced PowerSaver driver
    
    This is driver for Enhanced Powersaver which is present in VIA C7
    processors. Beta tested by Jorgen (jorgen (at) greven dot dk).
    Thanks! Based on documentation provided by Dave Jones (Thanks!)
    and C7 Eden datasheet available from www.via.com.tw. Looks like all
    these C7 Eden CPU's don't have P-states in BIOS. I know that 2
    p-states is low, but Jorgen finds it usefull anyway because board
    is passive cooled.
    There are 3 different types of C7 processors (called brands):
    0. C7-M - these processors can set any maultiplier between min and
    max, any voltage between min and max.
    1. C7 - only min and max states are supported. Voltage is different
    for min and max states.
    2. Eden - only min and max states are supported. Looks like this
    brand can only change multiplier. Voltage seems to be the same for
    min and max frequency.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 1c14cfbbe7a9f2240c73f420c3c6336fc521cd64
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Feb 5 16:09:35 2007 -0800

    [AGPGART] allow drm populated agp memory types cleanups
    
    Fix whitespace, braces, use kzalloc().
    
    Cc: Dave Airlie <airlied@linux.ie>
    Cc: Thomas Hellstrom <thomas@tungstengraphics.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e692eb30ffc2b99e62f766f9958f46dfdc1013cc
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:28 2007 +0100

    [MIPS] signal: do not inline handle_signal()
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f90080a059fc19444b3a63affd1f4ecece62c11c
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:27 2007 +0100

    [MIPS] signal: do not use save_static_function() anymore
    
    This macro was used to save static registers before calling
    sys_sigsuspend() and sys_sigreturn().
    
    For the sys_sigreturn() case, there's no point to save them
    since they have been already saved by setup_sigcontext()
    before calling the signal handler.
    
    For the sys_sigsuspend() case, I don't see any reasons...
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6bfe96616062acb75c2460f01acc79236a8ba0e8
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:26 2007 +0100

    [MIPS] signal32: no need to save c0_status register in setup_sigcontext32()
    
    All the information in the MIPS c0_status register is priviledged.
    Nothing that would constitute part of the thread context.
    
    The one flag one could possibly argument about might be c0_status.fr
    but none of the ABIs or tools or application software can make use
    of it.
    
    So for consistency with restore_sigcontext32(), which does not
    restore c0_status register, this patch remove the saving part.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9432a9ba96ea8d007341c4e7859d393bfd357c5a
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:25 2007 +0100

    [MIPS] signal32: reduce {setup,restore}_sigcontext32 sizes
    
    This trivial changes should decrease a lot the size of these
    2 functions.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 722bb63de630f9500db1f12ed32e1dd9349a8049
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:24 2007 +0100

    [MIPS] signal: factorize debug code
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 601dde45f698ee1be5fe03a68b895efe6ca6b858
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:23 2007 +0100

    [MIPS] signal: test return value of install_sigtramp()
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 36a1f2c24f42fc2531d5e21914db56ce8ee346f6
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:22 2007 +0100

    [MIPS] signal32: remove duplicate code
    
    There's no point for signal32.c to redefine get_sigframe().
    It should use the one define in signal.c instead.
    
    The same stands for install_sigtramp().
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c0b9bae9d18980afa1797fb7b75adb4fbc837b66
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:21 2007 +0100

    [MIPS] signal: clean up sigframe structure
    
    This patch makes 'struct sigframe' declaration avalaible for all signals
    code. It allows signal32 to not have its own declaration.
    
    This patch also removes all ICACHE_REFILLS_WORKAROUND_WAR tests in
    structure declaration and hopefully make them more readable.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c3fc4ab36d495f50ccc89986fe32eeabc2549fa1
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:20 2007 +0100

    [MIPS] signal: do not inline functions in signal-common.h
    
    These functions are quite big and there are no points to make
    them inlined. So this patch moves the functions implementation
    in signal.c and make them available for others source files
    which need them.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a007b1f1c764c08896bc574fbd33e19ce898a188
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Mon Feb 5 15:24:19 2007 +0100

    [MIPS] signals: reduce {setup,restore}_sigcontext sizes
    
    This trivial change reduces considerably code size of these
    2 functions callers. For instance, here is the figures for
    arch/kernel/signal.o objects:
    
       text    data     bss     dec     hex filename
      11972       0       0   11972    2ec4 arch/mips/kernel/signal.o~old
       5380       0       0    5380    1504 arch/mips/kernel/signal.o~new
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4ed3a77f38c023658784804cb39a7ce18063dc88
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Feb 10 21:43:54 2007 +0000

    [MIPS] Fix warning in get_user when fetching pointer object from userspace.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 761fc19bdbe33ea8b7b88b88c7ca149a57a9e6b6
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Fri Feb 9 13:31:43 2007 -0700

    [MIPS] Fix eth2 platform device id for jaguar_atx and ocelot_3 platforms
    
    Signed-off-by: Dale Farnsowrth <dale@farnsworth.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6a2603a2eaafc5faaae24f7250158a41931f77ee
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 20:39:05 2007 +0300

    [MIPS] JMR3927 and RBTX49x7 support little endian
    
    Toshiba JMR3927 (RBHMA3100) and RBTX49[23]7 (RBHMA4[24]00) do support both
    little and big endian mode (if you flash the right PMON).
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 57340b2bad1de489902f6947f24fc334737e5b80
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 20:41:36 2007 +0300

    [MIPS] RBTX49x7: declare prom_getcmdline()
    
    Fix a bunch of warnings caused by a missing prom_getcmdline() prototype.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bb3d7c7ff1cc18b4cb83820327905f7e1f8dc414
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 7 15:36:56 2007 +0000

    [MIPS] RTLX: Sprinkle device model code into code to make udev happier.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 27a3bbaf4b1e23a3afbae4d9f72b51a36859f74a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Feb 7 13:48:59 2007 +0000

    [MIPS] VPE: Sprinkle device model code into code to make udev happier.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 81b7bbd1932a04869d4c8635a75222dfc6089f96
Merge: 9805199... 66efc5a...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Sat Feb 10 13:45:43 2007 -0600

    Merge branch 'linus'
    
    Conflicts:
    
    	drivers/scsi/ipr.c
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 98051995ab44b993f992946055edc6115351f725
Author: Swen Schillig <swen.schillig@freenet.de>
Date:   Fri Feb 9 10:01:40 2007 +0100

    [SCSI] zfcp: removed wrong comment
    
    commit 07a105136f07f0cf1b476383e43033b8a65e13ff
    Author: Swen Schillig <swen@vnet.ibm.com>
    Date:   Fri Feb 9 09:58:09 2007 +0100
    
    removed wrong comment
    
    Signed-off-by: Swen Schillig <swen@vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ca880cf93361e752d2e0bf6bf73657e2c56a0822
Author: Swen Schillig <swen.schillig@freenet.de>
Date:   Fri Feb 9 10:00:14 2007 +0100

    [SCSI] zfcp: use of uninitialized variable
    
    commit 988d955c3314336d716a9208f3d565b06f262e07
    Author: Swen Schillig <swen@vnet.ibm.com>
    Date:   Fri Feb 9 09:40:11 2007 +0100
    
    Use of uninitialized variable.
    ERP action might not be finished accordingly.
    
    Signed-off-by: Swen Schillig <swen@vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6fcc47111ae14f284007e1b9a5002babb01d913c
Author: Swen Schillig <swen@vnet.ibm.com>
Date:   Wed Feb 7 13:17:57 2007 +0100

    [SCSI] zfcp: Invalid locking order
    
    Invalid locking order. Kernel hangs after trying to take two locks
    which are dependend on each other. Introducing temporary variable
    to free requests. Free lock after requests are copied.
    
    Signed-off-by: Swen Schillig <swen@vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 19966769f9fc1968dcf5bffec2e53f7f40100872
Author: Hannes Reinecke <hare@suse.de>
Date:   Wed Feb 7 09:47:44 2007 +0100

    [SCSI] aic79xx: use dma_get_required_mask()
    
    As originally noted by Frederic Temporelli, the aic79xx supports 64
    bit addressing, but the initialization code of the driver is wrong: it
    tests the available memory size instead of testing the maximum
    available memory address.
    
    This patch uses the correct dma_get_required_mask() macros to
    determine the correct addressing method.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Cc: Xavier Bru <xavier.bru@bull.net>
    CC: Frederic Temporelli <frederic.temporelli@bull.net>
    
    cosmetic fixes
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c7f743a669c27f9c392e78fda8829db9d6d50f43
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Feb 1 12:23:37 2007 -0800

    IB: Remove redundant "_wq" from workqueue names
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit aedec08050255db1989a38b59616dd973dfe660b
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Mon Jan 29 16:41:23 2007 -0800

    RDMA/cma: Increment port number after close to avoid re-use
    
    Randomize the starting port number and avoid re-using port values
    immediately after they are closed.  Instead keep track of the last
    port value used and increment it every time a new port number is
    assigned, to better replicate other port spaces.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 65e5c0262169a92bdec71a8bb9edb32dab2d8d1f
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Mon Feb 5 16:21:09 2007 -0800

    IB/ehca: Fix memleak on module unloading
    
    Percpu data is not freed on module unloading.
    
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Christoph Raisch <raisch@de.ibm.com>
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Acked-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6bdd61d876e6eacea5c59230b6b2d988b22793e6
Author: David Howells <dhowells@redhat.com>
Date:   Mon Feb 5 16:21:08 2007 -0800

    IB/mthca: Work around gcc bug on sparc64
    
    For some reason gcc-3.4.5 on sparc64 does:
    
     WARNING: "____ilog2_NaN" [drivers/infiniband/hw/mthca/ib_mthca.ko] undefined!
    
    Points to note:
    
     (1) The asm volatile flush/flushw are just markers for viewing what comes out
         in the assembly; removing them has no effect on the result.
    
     (2) Changing almost anything else in dwh__mthca_arbel_init_srq_context() or
         dwh__mthca_alloc_srq() causes the problem to go away.
    
    The compiler command line issued by the kernel build is:
    
    /opt/crosstool/gcc-3.4.5-glibc-2.3.6/sparc64-unknown-linux-gnu/bin/sparc64-unknown-linux-gnu-gcc -fno-strict-aliasing -fno-common -Os -m64 -mno-fpu -mcpu=ultrasparc -mcmodel=medlow -ffixed-g4 -ffixed-g5 -fcall-used-g7 -Wa,--undeclared-regs -pg -fno-omit-frame-pointer -fno-optimize-sibling-calls -fasynchronous-unwind-tables -g  -c -o drivers/infiniband/hw/mthca/.tmp_mthca_srq.o drivers/infiniband/hw/mthca/mthca_srq.c
    
    This can be reduced to this whilst still retaining the problem:
    
    /opt/crosstool/gcc-3.4.5-glibc-2.3.6/sparc64-unknown-linux-gnu/bin/sparc64-unknown-linux-gnu-gcc -m64 -c -o drivers/infiniband/hw/mthca/mthca_srq.o drivers/infiniband/hw/mthca/mthca_srq.c -Os
    
    Removing -Os or changing it to -O or -O0 thru -O6 gets rid of the problem.
    
    This patch to the kernel code fixes the problem:
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 839fcaba355abaffb7b44f0f4504093acb0b11cf
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Feb 5 22:12:23 2007 +0200

    IPoIB: Connected mode experimental support
    
    The following patch adds experimental support for IPoIB connected
    mode, as defined by the draft from the IETF ipoib working group.  The
    idea is to increase performance by increasing the MTU from the maximum
    of 2K (theoretically 4K) supported by IPoIB on top of UD.  With this
    code, I'm able to get 800MByte/sec or more with netperf without
    options on a Mellanox 4x back-to-back DDR system.
    
    Some notes on code:
    1. SRQ is used for scalability to large cluster sizes
    2. Only RC connections are used (UC does not support SRQ now)
    3. Retry count is set to 0 since spec draft warns against retries
    4. Each connection is used for data transfers in only 1 direction, so
       each connection is either active(TX) or passive (RX).  2 sides that
       want to communicate create 2 connections.
    5. Each active (TX) connection has a separate CQ for send completions -
       this keeps the code simple without CQ resize and other tricks
    6. To detect stale passive side connections (where the remote side is
       down), we keep an LRU list of passive connections (updated once per
       second per connection) and destroy a connection after it has been
       unused for several seconds. The LRU rule makes it possible to avoid
       scanning connections that have recently been active.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9a6b090c0d1cd5c90f21db772dbe2fbcf14366de
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Tue Feb 6 18:07:25 2007 +0200

    IB/core: Use ARRAY_SIZE macro for mandatory_table
    
    Use ARRAY_SIZE() macro already defined in kernel.h instead of open
    coding equivalent code.
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 99d4f22e91d26e0f8b113bf7fde65a335d36ad6b
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Feb 10 08:00:47 2007 -0800

    IB/mthca: Use correct structure size in call to memset()
    
    When clearing the ib_ah_attr parameter in to_ib_ah_attr(), use sizeof
    *ib_ah_attr instead of sizeof *path.
    
    Pointed out by Jack Morgenstein <jackm@mellanox.co.il>.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 7ca353a428ecbaf77b651fbacfcb2f2f6d813879
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Feb 10 09:58:31 2007 +0000

    [MTD] Improve heuristic for detecting wrong-endian RedBoot partition table
    
    Also limit the amount we scan to one eraseblock.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 11192146e57bc8e58865e7d9c2497f66a4f7e6e7
Author: Rod Whitby <rod@whitby.id.au>
Date:   Sat Feb 10 09:26:48 2007 +0000

    [MTD] Fix RedBoot partition parsing regression harder.
    
    Correct the location of the recalculation of the FIS directory size,
    and also add the same recalculation for the byte-swapped case.
    
    Signed-off-by: Rod Whitby <rod@whitby.id.au>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e7ff6aed8761b2c86cd9ab7083e512de2b8cfa48
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:37:46 2007 +1100

    [XFS] Don't use kmap in xfs_iozero.
    
    kmap() is inefficient and does not scale well. kmap_atomic() is a better
    choice. Use the generic wrapper function instead of open coding the
    kmap-memset-dcache flush-kunmap stuff.
    
    SGI-PV: 960904
    SGI-Modid: xfs-linux-melb:xfs-kern:28041a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 6be145bfb1ce93b2dbb854fee66fbb8d04916339
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Feb 10 18:37:40 2007 +1100

    [XFS] Remove a bunch of unused functions from XFS.
    
    Patch provided by Eric Sandeen (sandeen@sandeen.net).
    
    SGI-PV: 960897
    SGI-Modid: xfs-linux-melb:xfs-kern:28038a
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 2c36ddeda7f04c085d9a612cf8dab5f0a1cd5224
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Feb 10 18:37:33 2007 +1100

    [XFS] Remove unused arguments from the XFS_BTREE_*_ADDR macros.
    
    It makes it incrementally clearer to read the code when the top of a macro
    spaghetti-pile only receives the 3 arguments it uses, rather than 2 extra
    ones which are not used. Also when you start pulling this thread out of
    the sweater (i.e. remove unused args from XFS_BTREE_*_ADDR), a couple
    other third arms etc fall off too. If they're not used in the macro, then
    they sometimes don't need to be passed to the function calling the macro
    either, etc....
    
    Patch provided by Eric Sandeen (sandeen@sandeen.net).
    
    SGI-PV: 960197
    SGI-Modid: xfs-linux-melb:xfs-kern:28037a
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 7bc5306d74922d9b14f507e1164d8dd852a98ad3
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Feb 10 18:37:28 2007 +1100

    [XFS] Remove unused header files for MAC and CAP checking functionality.
    
    xfs_mac.h and xfs_cap.h provide definitions and macros that aren't used
    anywhere in XFS at all. They are left-overs from "to be implement at some
    point in the future" functionality that Irix XFS has. If this
    functionality ever goes into Linux, it will be provided at a different
    layer, most likely through the security hooks in the kernel so we will
    never need this functionality in XFS.
    
    Patch provided by Eric Sandeen (sandeen@sandeen.net).
    
    SGI-PV: 960895
    SGI-Modid: xfs-linux-melb:xfs-kern:28036a
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 3c0dc77b42cee99c71e913765073888620d442fa
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:37:22 2007 +1100

    [XFS] Make freeze code a little cleaner.
    
    Fixes a few small issues (mostly cosmetic) that were picked up during the
    review cycle for the last set of freeze path changes.
    
    SGI-PV: 959267
    SGI-Modid: xfs-linux-melb:xfs-kern:28035a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit f7c99b6fc7b3791cd24e0763cd4967d744c164a3
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Feb 10 18:37:16 2007 +1100

    [XFS] Remove unused argument to xfs_bmap_finish
    
    The firstblock argument to xfs_bmap_finish is not used by that function.
    Remove it and cleanup the code a bit.
    
    Patch provided by Eric Sandeen.
    
    SGI-PV: 960196
    SGI-Modid: xfs-linux-melb:xfs-kern:28034a
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 39058a0e12a8b2dcb8f9345ecad52dbcfc120ef7
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Feb 10 18:37:10 2007 +1100

    [XFS] Clean up use of VFS attr flags
    
    Use the the generic VFS attr flags where appropriate instead of open
    coding them to the same values.
    
    Patch provided by Eric Sandeen.
    
    SGI-PV: 960868
    SGI-Modid: xfs-linux-melb:xfs-kern:28033a
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 4cf3b52080b3d354b10b8b1c9147bf88118b8eef
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Feb 10 18:37:04 2007 +1100

    [XFS] Remove useless memory barrier
    
    wake_up's implementation does an implicit memory barrier so the explicit
    memory barrier is not needed in vfs_sync_worker.
    
    Patch provided by Ralf Baechle.
    
    SGI-PV: 960867
    SGI-Modid: xfs-linux-melb:xfs-kern:28032a
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 3a68cbfe0277fb73d5f0c2a433884745fb500c38
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sat Feb 10 18:36:59 2007 +1100

    [XFS] XFS sysctl cleanups
    
    Removes unneeded sysctl insert at head behaviour. Cleans up sysctl
    definitions to use C99 initialisers. Patch provided by Eric W. Biederman.
    
    SGI-PV: 960192
    SGI-Modid: xfs-linux-melb:xfs-kern:28031a
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit c167b77d5e172a2deb058be442ca652ad3a417f9
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:36:53 2007 +1100

    [XFS] Fix assertion in xfs_attr_shortform_remove().
    
    SGI-PV: 960791
    SGI-Modid: xfs-linux-melb:xfs-kern:28021a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Barry Naujok <bnaujok@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 681601613759accffd8e8ddbc6f942eba7ecbfe5
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:36:47 2007 +1100

    [XFS] Fix callers of xfs_iozero() to zero the correct range.
    
    The problem is the two callers of xfs_iozero() are rounding out the range
    to be zeroed to the end of a fsb and in some cases this extends past the
    new eof. The call to commit_write() in xfs_iozero() will cause the Linux
    inode's file size to be set too high.
    
    SGI-PV: 960788
    SGI-Modid: xfs-linux-melb:xfs-kern:28013a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 2823945fda94e0636be573a037c45cb7b6495af2
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:36:40 2007 +1100

    [XFS] Ensure a frozen filesystem has a clean log before writing the dummy
    record.
    
    The current Linux XFS freeze code is a mess. We flush the metadata buffers
    out while we are still allowing new transactions to start and then fail to
    flush the dirty buffers back out before writing the unmount and dummy
    records to the log.
    
    This leads to problems when the frozen filesystem is used for snapshots -
    we do log recovery on a readonly image and often it appears that the log
    image in the snapshot is not correct. Hence we end up with hangs, oops and
    mount failures when trying to mount a snapshot image that has been created
    when the filesystem has not been correctly frozen.
    
    To fix this, we need to move th metadata flush to after we wait for all
    current transactions to complete in teh second stage of the freeze. This
    means that when we write the final log records, the log should be clean
    and recovery should never occur on a snapshot image created from a frozen
    filesystem.
    
    SGI-PV: 959267
    SGI-Modid: xfs-linux-melb:xfs-kern:28010a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Donald Douwsma <donaldd@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 549054afadae44889c0b40d4c3bfb0207b98d5a0
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:36:35 2007 +1100

    [XFS] Fix sub-block zeroing for buffered writes into unwritten extents.
    
    When writing less than a filesystem block of data into an unwritten extent
    via buffered I/O, __xfs_get_blocks fails to set the buffer new flag. As a
    result, the generic code will not zero either edge of the block resulting
    in garbage being written to disk either side of the real data. Set the
    buffer new state on bufferd writes to unwritten extents to ensure that
    zeroing occurs.
    
    SGI-PV: 960328
    SGI-Modid: xfs-linux-melb:xfs-kern:28000a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 5478eead8528f6cb5ebe3015fb88b68b175e1093
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:36:29 2007 +1100

    [XFS] Re-initialize the per-cpu superblock counters after recovery.
    
    After filesystem recovery the superblock is re-read to bring in any
    changes. If the per-cpu superblock counters are not re-initialized from
    the superblock then the next time the per-cpu counters are disabled they
    might overwrite the global counter with a bogus value.
    
    SGI-PV: 957348
    SGI-Modid: xfs-linux-melb:xfs-kern:27999a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit c97be736051dacefb00643095d76fd5b70dfef7b
Author: Kevin Jamieson <kjamieson@bycast.com>
Date:   Sat Feb 10 18:36:23 2007 +1100

    [XFS] Fix block reservation changes for non-SMP systems.
    
    SGI-PV: 956323
    SGI-Modid: xfs-linux-melb:xfs-kern:27940a
    
    Signed-off-by: Kevin Jamieson <kjamieson@bycast.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit dbcabad19aa91dc9bc7176fd2853fa74f724cd2f
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:36:17 2007 +1100

    [XFS] Fix block reservation mechanism.
    
    The block reservation mechanism has been broken since the per-cpu
    superblock counters were introduced. Make the block reservation code work
    with the per-cpu counters by syncing the counters, snapshotting the amount
    of available space and then doing a modifcation of the counter state
    according to the result. Continue in a loop until we either have no space
    available or we reserve some space.
    
    SGI-PV: 956323
    SGI-Modid: xfs-linux-melb:xfs-kern:27895a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 20f4ebf2bf2f57c1a9abb3655391336cc90314b3
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:36:10 2007 +1100

    [XFS] Make growfs work for amounts greater than 2TB
    
    The free block modification code has a 32bit interface, limiting the size
    the filesystem can be grown even on 64 bit machines. On 32 bit machines,
    there are other 32bit variables in transaction structures and interfaces
    that need to be expanded to allow this to work.
    
    SGI-PV: 959978
    SGI-Modid: xfs-linux-melb:xfs-kern:27894a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit f74eaf59b36c0ad01f416b567f89c737bbf82bae
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:36:04 2007 +1100

    [XFS] Fix inode log item use-after-free on forced shutdown
    
    SGI-PV: 959388
    SGI-Modid: xfs-linux-melb:xfs-kern:27805a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit e5889e90dda328443161e9512f1123c9814d03de
Author: Barry Naujok <bnaujok@sgi.com>
Date:   Sat Feb 10 18:35:58 2007 +1100

    [XFS] Fix attr2 corruption with btree data extents
    
    SGI-PV: 958747
    SGI-Modid: xfs-linux-melb:xfs-kern:27792a
    
    Signed-off-by: Barry Naujok <bnaujok@sgi.com>
    Signed-off-by: Russell Cattelan <cattelan@thebarn.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 7666ab5fb378678a9d5eb3c0dc8d3170e274e7a4
Author: Vlad Apostolov <vapo@sgi.com>
Date:   Sat Feb 10 18:35:52 2007 +1100

    [XFS] Workaround log space issue by increasing XFS_TRANS_PUSH_AIL_RESTARTS
    
    SGI-PV: 959264
    SGI-Modid: xfs-linux-melb:xfs-kern:27750a
    
    Signed-off-by: Vlad Apostolov <vapo@sgi.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 5180602e6fd6f7d221e51670567f3809ecfe968f
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:35:46 2007 +1100

    [XFS] remove unused filp from ioctl functions
    
    SGI-PV: 959140
    SGI-Modid: xfs-linux-melb:xfs-kern:27712a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit a3227fb99675ebcdbe89e6954a85742c0dd11f0a
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:35:40 2007 +1100

    [XFS] mraccessf & mrupdatef are supposed to be the "flags" versions of the
    functions, but they
    
    a) ignore the flags parameter completely, and b) are never called
    directly, only via the flag-less defines anyway
    
    So, drop the #define indirection, and rename mraccessf to mraccess, etc.
    
    SGI-PV: 959138
    SGI-Modid: xfs-linux-melb:xfs-kern:27711a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 1f9b3b64d417a714eb79d9a4cd4927ab304b0fc0
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:35:33 2007 +1100

    [XFS] remove unused xflags parameter from sync routines
    
    SGI-PV: 959137
    SGI-Modid: xfs-linux-melb:xfs-kern:27710a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 1c91ad3aedba82a64ae06a5a0a5651105d378112
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:35:27 2007 +1100

    [XFS] fix sparse warning in xfs_da_btree.c
    
    SGI-PV: 954580
    SGI-Modid: xfs-linux-melb:xfs-kern:27702a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit e5eb7f202b7a1a2d20a0b9866805314bf6464fd0
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:35:21 2007 +1100

    [XFS] use struct kvec in struct uio
    
    SGI-PV: 954580
    SGI-Modid: xfs-linux-melb:xfs-kern:27701a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Christoph Hellwig <hch@infradead.org>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 03135cf72621fccab57728f0ba3ab5a551df1cc1
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:35:15 2007 +1100

    [XFS] Fix UP build breakage due to undefined m_icsb_mutex.
    
    SGI-PV: 952227
    SGI-Modid: xfs-linux-melb:xfs-kern:27692a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 20b642858b6bb413976ff13ae6a35cc596967bab
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:35:09 2007 +1100

    [XFS] Reduction global superblock lock contention near ENOSPC.
    
    The existing per-cpu superblock counter code uses the global superblock
    spin lock when we approach ENOSPC for global synchronisation. On larger
    machines than this code was originally tested on this can still get
    catastrophic spinlock contention due increasing rebalance frequency near
    ENOSPC.
    
    By introducing a sleeping lock that is used to serialise balances and
    modifications near ENOSPC we prevent contention from needlessly from
    wasting the CPU time of potentially hundreds of CPUs.
    
    To reduce the number of balances occuring, we separate the need rebalance
    case from the slow allocate case. Now, a counter running dry will trigger
    a rebalance during which counters are disabled. Any thread that sees a
    disabled counter enters a different path where it waits on the new mutex.
    When it gets the new mutex, it checks if the counter is disabled. If the
    counter is disabled, then we _know_ that we have to use the global counter
    and lock and it is safe to do so immediately. Otherwise, we drop the mutex
    and go back to trying the per-cpu counters which we know were re-enabled.
    
    SGI-PV: 952227
    SGI-Modid: xfs-linux-melb:xfs-kern:27612a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 804195b63a6dcb767f5fae43b435067079b52903
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Feb 10 18:35:02 2007 +1100

    [XFS] Get rid of old 5.3/6.1 v1 log items. Cleanup patch sent in by Eric
    Sandeen.
    
    SGI-PV: 958736
    SGI-Modid: xfs-linux-melb:xfs-kern:27596a
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 7989cb8ef5dbc1411d3be48218c7b25ef6e71699
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:34:56 2007 +1100

    [XFS] Keep stack usage down for 4k stacks by using noinline.
    
    gcc-4.1 and more recent aggressively inline static functions which
    increases XFS stack usage by ~15% in critical paths. Prevent this from
    occurring by adding noinline to the STATIC definition.
    
    Also uninline some functions that are too large to be inlined and were
    causing problems with CONFIG_FORCED_INLINING=y.
    
    Finally, clean up all the different users of inline, __inline and
    __inline__ and put them under one STATIC_INLINE macro. For debug kernels
    the STATIC_INLINE macro uninlines those functions.
    
    SGI-PV: 957159
    SGI-Modid: xfs-linux-melb:xfs-kern:27585a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 5e6a07dfe404cd4d8494d842b54706cb007fa04b
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:34:49 2007 +1100

    [XFS] Current usage of buftarg flags is incorrect.
    
    The {test,set,clear}_bit() operations take a bit index for the bit to
    operate on. The XBT_* flags are defined as bit fields which is incorrect,
    not to mention the way the bit fields are enumerated is broken too. This
    was only working by chance.
    
    Fix the definitions of the flags and make the code using them use the
    {test,set,clear}_bit() operations correctly.
    
    SGI-PV: 958639
    SGI-Modid: xfs-linux-melb:xfs-kern:27565a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit dc74eaad8cda9f12a885639b4f2513c99e9b483a
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Sat Feb 10 18:34:38 2007 +1100

    [XFS] Prevent buffer overrun in cmn_err().
    
    The message buffer used by cmn_err() is only 256 bytes and some CXFS
    messages were exceeding this length. Since we were using vsprintf() and
    not checking for buffer overruns we were clobbering memory beyond the
    buffer. The size of the buffer has been increased to 1024 bytes so we can
    capture these larger messages and we are now using vsnprintf() to prevent
    overrunning the buffer size.
    
    SGI-PV: 958599
    SGI-Modid: xfs-linux-melb:xfs-kern:27561a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: Geoffrey Wehrman <gwehrman@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 585e6d8856526a846b90b485abf37ec40e5da1cf
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:32:29 2007 +1100

    [XFS] Fix a synchronous buftarg flush deadlock when freezing.
    
    At the last stage of a freeze, we flush the buftarg synchronously over and
    over again until it succeeds twice without skipping any buffers.
    
    The delwri list flush skips pinned buffers, but tries to flush all others.
    It removes the buffers from the delwri list, then tries to lock them one
    at a time as it traverses the list to issue the I/O. It holds them locked
    until we issue all of the I/O and then unlocks them once we've waited for
    it to complete.
    
    The problem is that during a freeze, the filesystem may still be doing
    stuff - like flushing delalloc data buffers - in the background and hence
    we can be trying to lock buffers that were on the delwri list at the same
    time. Hence we can get ABBA deadlocks between threads doing allocation and
    the buftarg flush (freeze) thread.
    
    Fix it by skipping locked (and pinned) buffers as we traverse the delwri
    buffer list.
    
    SGI-PV: 957195
    SGI-Modid: xfs-linux-melb:xfs-kern:27535a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit dac61f521b1e4d2c6c48023f2f2743c6096b48ca
Author: David Chinner <dgc@sgi.com>
Date:   Sat Feb 10 18:27:56 2007 +1100

    [XFS] Make quiet mounts quiet
    
    The XFS quiet mount logic was inverted making quiet mounts noisy and vice
    versa. Fix it.
    
    SGI-PV: 958469
    SGI-Modid: xfs-linux-melb:xfs-kern:27520a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Tim Shimmin <tes@sgi.com>

commit 359acec8cd78d35e64147565e28b516599066e08
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 10 01:59:24 2007 -0500

    ACPI: add video driver MAINTAINER
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e6d0f5622d30a3b98fb0ba6264d5006a18270890
Author: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
Date:   Sat Feb 10 01:51:13 2007 -0500

    ACPI: sbs: fix present rate
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7897
    
    Signed-off-by: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4bd35cdb1e2d1a1bbbe4b75132718e79b80519ab
Author: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
Date:   Sat Feb 10 01:43:48 2007 -0500

    ACPI: battery: check for battery present on /proc/battery access
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7200
    
    Signed-off-by: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit aafbcd165a2a02e6dff173f66772b3148229ace8
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Sat Feb 10 01:32:16 2007 -0500

    ACPI: invoke acpi_sleep_init() earlier
    
    late_initcall() is too late for acpi_sleep_init().
    Call it directly from acpi_init code.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7887
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ed41dab90eb40ac4911e60406bc653661f0e4ce1
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Sat Feb 10 01:30:35 2007 -0500

    ACPI: Disable GPEs in preparation for sleep.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7887
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2a598df595d33be0f12e37ef5df75eff13511d07
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Sat Feb 10 01:30:18 2007 -0500

    Input: remove scan_keyb driver
    
    This driver is currently unused (unreferenced) besides the fact
    that it's broken.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 1e4865f8d469b1795e77877410951e5b808a2c4e
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sat Feb 10 01:29:53 2007 -0500

    Input: i8042 - fix AUX IRQ delivery check
    
    On boxes that do not implement AUX LOOP command we can not
    verify AUX IRQ delivery and must assume that it is wired
    properly.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 5809d537c1bc7628cee1e580da35f6b4d254e23b
Author: Michael Leun <ml@newton.leun.net>
Date:   Sat Feb 10 01:29:42 2007 -0500

    Input: wistron - add support for Fujitsu-Siemens Amilo D88x0
    
    Tested on a Amilo D8820.
    
    Signed-off-by: Michael Leun <ml@newton.leun.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8370a643531699e5076fcac21c281c138bce1c87
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Feb 10 01:29:31 2007 -0500

    Input: inport - use correct config option for ATIXL
    
    Change the apparently incorrect check for CONFIG_INPUT_ATIXL
    in a source file to be consistent with the kernel config
    option CONFIG_MOUSE_ATIXL.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b350620cc5e8e62782a4d47bf45952442a18a0b0
Author: Cyrill V. Gorcunov <gorcunov@gmail.com>
Date:   Sat Feb 10 01:29:19 2007 -0500

    Input: HIL - handle erros from input_register_device()
    
    Also some whitespace cleanup.
    
    Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit ff141a03e1909db719c6afd3230c2f16a4141860
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Feb 10 01:29:11 2007 -0500

    Input: tsdev - schedule removal
    
    Compaq touchscreen emulation (drivers/input/tsdev.c) is old,
    was obsolete when it was written by the authors own admission
    and much better userspace solutions like tslib now exist.
    The name is also confusing.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Acked-by: James Simmons <jsimmons@infradead.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 31ea7ff0f880dc3f4ad94e85c1432d4b910c9fca
Author: Jaya Kumar <jayakumar.acpi@gmail.com>
Date:   Sat Feb 10 01:29:00 2007 -0500

    Input: add Atlas button driver
    
    This patch adds support for the buttons on the Atlas wallmount
    touchscreen.
    
    Signed-off-by: Jaya Kumar <jayakumar.acpi@gmail.com>
    Acked-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b22364c8eec89e6b0c081a237f3b6348df87796f
Merge: 2c8dc07... 66efc5a...
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sat Feb 10 01:26:32 2007 -0500

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit d78112e1f1da2a8be1ac0d7b583dcc25aa4f079c
Author: Michael Hanselmann <linux-kernel@hansmi.ch>
Date:   Sat Feb 10 00:47:44 2007 -0500

    ACPI: video: Fix null pointer in appledisplay driver
    
    commit "ACPI: video: Add dev argument for backlight_device_register"
    519ab5f2be65b72cf12ae99c89752bbe79b44df6
    broke the apple display driver.
    
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 66efc5a7e3061c3597ac43a8bb1026488d57e66b
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Feb 6 22:19:10 2007 -0500

    libata: kill ATA_ENABLE_PATA
    
    The ATA_ENABLE_PATA define was never meant to be permanent, and in
    recent kernels, it's already been unconditionally enabled.  Remove.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 591a6e8ee7c8ffbbeaf23fec23796c0cfa316a41
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Feb 6 21:08:14 2007 -0500

    libata: build fix after dmesg probe output changes
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 11750a40abddff1e0c6e0924902f914292d12277
Author: Alan Cox <alan@redhat.com>
Date:   Mon Feb 5 16:28:30 2007 +0000

    libata: Early CFA adapters are not required to support mode setting
    
    If we are doing a PIO setup for a CFA card and it blows up with a device
    error then assume it is an older CFA card which doesn't support this
    rather than failing the device out of existance.
    
    Stands seperate to the quieting patch but that is obviously useful with
    this change.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ce053fa8b532aa038fba6230052daae5cd60eae6
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 5 16:26:04 2007 -0800

    sata_nv: propagate ata_pci_device_do_resume return value
    
    ata_pci_device_do_resume can fail if the PCI device couldn't be re-enabled.
     Update sata_nv to propagate the return value from this call and to not try
    to do any other resume activities if it fails.  Fixes a compile warning.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a2cfe81a59eea45a3f9afb4f652f7619982eac62
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 5 16:26:03 2007 -0800

    sata_nv: wait for response on entering/leaving ADMA mode
    
    Update sata_nv to wait for the controller to indicate via the status
    register that it has entered the requested state when switching between
    ADMA mode and register mode.  This issue came up recently when debugging
    some problems with cache flush command timeouts and while it didn't appear
    to fix that problem, this is something we should likely be doing in any
    case.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Cc: Tejun Heo <htejun@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 382a6652e91b34d5480cfc0ed840c196650493d4
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 5 16:26:02 2007 -0800

    sata_nv: use ADMA for NODATA commands
    
    Some problems showed up recently with cache flush commands timing out on
    sata_nv.  Previously these commands were always handled by transitioning to
    legacy mode from ADMA mode first.  The timeout problem was worked around
    already by a change to the interrupt handling code for legacy mode, but for
    non-data commands like these it appears we can handle them in ADMA mode, so
    the switch to legacy mode is not needed.
    
    This patch changes the behavior so that we use ADMA mode to submit
    interrupt-driven commands with ATA_PROT_NODATA protocol.  In addition to
    avoiding the problem mentioned above entirely, this avoids the overhead of
    switching to legacy mode and back to ADMA mode for handling cache flushes.
    When handling non-DMA-mapped commands, we leave the APRD blank and clear
    the NV_CPB_CTL_APRD_VALID field in the CPB so the controller does not
    attempt to read it.
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5bd28a4b6efa73c5d033f3b86201c2c366b170cf
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Mon Feb 5 16:26:01 2007 -0800

    sata_nv: cleanup ADMA error handling
    
    This cleans up a few issues with the error handling in sata_nv in ADMA mode
    to make it more consistent with other NCQ-capable drivers like ahci and
    sata_sil24:
    
    - When a command failed, we would effectively set AC_ERR_DEV on the
      queued command always.  In the case of NCQ commands this prevents libata
      from doing a log page query to determine the details of the failed
      command, since it thinks we've already analyzed.  Just set flags in the
      port ehi->err_mask, then freeze or abort and let libata figure out what
      went wrong.
    
    - The code handled NV_ADMA_STAT_CPBERR as a "really bad error" which
      caused it to set error flags on every queued command.  I don't know
      exactly what this flag means (no docs, grr!) but from what I can guess
      from the standard ADMA spec, it just means that one or more of the CPBs
      had an error, so we just need to go through and do our normal checks in
      this case.
    
    - In the error_handler function the code would always dump the state of
      all the CPBs.  This output seems redundant at this point since libata
      already dumps the state of all active commands on errors (and it also
      triggers at times when it shouldn't, like when suspending).  Take this
      out.
    
    [akpm@osdl.org: many coding-style fixes]
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Tejun Heo <htejun@gmail.com>
    Cc: Allen Martin <AMartin@nvidia.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 92ae78493f5f3de323652f3ea0ec8b7b2839c3d2
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Mon Feb 5 21:08:55 2007 +0300

    (2.6.20) pata_mpiix: probing cleanup (resend)
    
    MPIIX has only single channel IDE which can be configured for either primary or
    secondary legacy I/O ports and IRQ.  So, get rid of the unneeded second probe
    entry in mpiix_init_one() and of the invalid (but unused anyway) enable bits in
    mpiix_pre_reset().
    
    Warning: this cleanup has only been compile-tested...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7b4f1a13f708a7b061185d86aae201f3195db47a
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Mon Feb 5 20:24:57 2007 +0300

    (2.6.20) pata_mpiix: fix PIO setup issues
    
    Fix clearing/setting the wrong TIME/IE/PPE bits for a slave drive caused by a
    wrong shift count.
    Fix the PIO mode 1 being overclocked by wrongly selecting the fast timing bank.
    Also, fix/rephrase some comments while at it.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 409ba47c297fd13849909adea63f183f55d52418
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Mon Feb 5 19:45:38 2007 +0300

    (2.6.20) pata_oldpiix: fix PIO2 underclocking
    
    Fix the PIO mode 2 using mode 0 timings -- this driver should enable the
    fast timing bank starting with PIO2, just like the ata_piix driver does.
    Also, fix/rephrase some comments while at it.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 49554c19569c91d0943b67ca731c9abfc857883f
Author: Alan Cox <alan@redhat.com>
Date:   Mon Feb 5 16:17:19 2007 +0000

    ata: Add defines for the iordy bits
    
    IORDY and IORDY enable/disable flags.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2c7620d50c23737728bccfb26ffb94cd51e58007
Author: Alan Cox <alan@redhat.com>
Date:   Mon Feb 5 16:04:10 2007 +0000

    Kconfig: clarify ATA_PIIX description
    
    People are getting confused about which drivers to enable for PATA PIIX
    type devices. Change the ATA_PIIX line and help to make it clearer.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fe334602a83463aff59ae24c4b3e808d650a3c80
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Feb 2 15:29:52 2007 +0900

    sata_inic162x: fix a few glitches in hardreset
    
    * Hardreset must not exit without actually performing reset regardless
      of link status.  We're resetting the link after all.
    
    * Minor message update.
    
    * 150ms delay is meaningful iff link is online after reset is
      complete.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 34fee227dd13af593be599b19683464ac4dd4c8b
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Feb 2 15:29:27 2007 +0900

    libata: add 150ms between completion of hardreset and status checking
    
    Follow the old SRST rule and delay 150ms between completion of
    hardreset and status checking.  Debouncing delay should usually cover
    this but debounce duration could be shorter than 150ms under certain
    circumstances.
    
    Usefulness depends on host controller implementation but it can't hurt
    and serves as a reminder that 2s delay for GoVault should also be
    added here.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3f64f565bebbb4a1a4e9ccce5565c9f86458ddb1
Author: Eric D. Mudama <edmudama@gmail.com>
Date:   Tue Jan 30 23:00:40 2007 -0700

    libata: rearrange dmesg info to add full ATA revision
    
    Per Jeff's suggestion, this patch rearranges the info printed for ATA
    drives into dmesg to add the full ATA firmware revision and model
    information, while keeping the output to 2 lines.
    
    Signed-off-by: Eric D. Mudama <edmudama@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 24a01453892e0a4a6ad38460541bd0dae9b1837f
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Tue Jan 30 20:40:30 2007 +0300

    pata_sl82c105: wrong assumptions about compatible PIO modes
    
    Fix the wrong "compatible" PIO mode choices: MWDMA0 has 480 ns cycle while PIO1
    only has 383 ns cycle, and MWDMA2 timings matchs those of PIO4 exactly.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 246ce3b675843e0369643cceb4faeb6cf6d19a30
Author: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
Date:   Fri Jan 26 16:27:58 2007 +0900

    libata: add another IRQ calls (libata drivers)
    
    This patch is against each libata driver.
    
    Two IRQ calls are added in ata_port_operations.
    - irq_on() is used to enable interrupts.
    - irq_ack() is used to acknowledge a device interrupt.
    
    In most drivers, ata_irq_on() and ata_irq_ack() are used for
    irq_on and irq_ack respectively.
    
    In some drivers (ex: ahci, sata_sil24) which cannot use them
    as is, ata_dummy_irq_on() and ata_dummy_irq_ack() are used.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 836250069fc0eeebe8b6aed772281535cc6e34f9
Author: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
Date:   Fri Jan 26 16:27:32 2007 +0900

    libata: add another IRQ calls (core and headers)
    
    This patch is against the libata core and headers.
    
    Two IRQ calls are added in ata_port_operations.
    - irq_on() is used to enable interrupts.
    - irq_ack() is used to acknowledge a device interrupt.
    
    In most drivers, ata_irq_on() and ata_irq_ack() are used for
    irq_on and irq_ack respectively.
    
    In some drivers (ex: ahci, sata_sil24) which cannot use them
    as is, ata_dummy_irq_on() and ata_dummy_irq_ack() are used.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Akira Iguchi <akira2.iguchi@toshiba.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7f25377043925554cb9f3f9d8ada3390f71a5d10
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Fri Feb 2 18:07:15 2007 -0800

    git-libata-all: forward declare struct device
    
    In file included from drivers/infiniband/hw/ipath/ipath_diag.c:44:
    include/linux/io.h:35: warning: 'struct device' declared inside parameter list
    include/linux/io.h:35: warning: its scope is only this definition or declaration
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0d5ff566779f894ca9937231a181eb31e4adff0e
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Feb 1 15:06:36 2007 +0900

    libata: convert to iomap
    
    Convert libata core layer and LLDs to use iomap.
    
    * managed iomap is used.  Pointer to pcim_iomap_table() is cached at
      host->iomap and used through out LLDs.  This basically replaces
      host->mmio_base.
    
    * if possible, pcim_iomap_regions() is used
    
    Most iomap operation conversions are taken from Jeff Garzik
    <jgarzik@pobox.com>'s iomap branch.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1a68ff13c8a9b517de3fd4187dc525412a6eba1b
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Feb 1 15:05:22 2007 +0900

    pata_platform: fix devres conversion
    
    devres updates for pata_platform were dropped while merging devres
    patches due to merge conflict.  This is the updated version.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ca2997885219486cf91a369233c909fbd555bdf7
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Jan 31 22:48:06 2007 +0900

    iomap: iomap should be in obj-y not in lib-y
    
    devres change moved iomap.o from obj-$(CONFIG_GENERIC_IOMAP) to lib-y
    making it not linked if no in-kernel driver uses it.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fda0efc5977864a90f365aeeb13f2546854e2aa9
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Jan 31 07:43:15 2007 -0500

    [libata] Shuffle DRV_xxx in core and SiS drivers, to kill warnings
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d24bbbf251e70bf984cbaa9b1fcadc5f56fc3ae9
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 16:00:28 2007 +0900

    devres: implement pcim_iomap_regions()
    
    Implement pcim_iomap_regions().  This function takes mask of BARs to
    request and iomap.  No BAR should have length of zero.  BARs are
    iomapped using pcim_iomap_table().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b878ca5d37953ad1c4578b225a13a3c3e7e743b7
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 16:00:28 2007 +0900

    libata: remove unused functions
    
    Now that all LLDs are converted to use devres, default stop callbacks
    are unused.  Remove them.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 24dc5f33ea4b504cfbd23fa159a4cacba8e4d800
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 16:00:28 2007 +0900

    libata: update libata LLDs to use devres
    
    Update libata LLDs to use devres.  Core layer is already converted to
    support managed LLDs.  This patch simplifies initialization and fixes
    many resource related bugs in init failure and detach path.  For
    example, all converted drivers now handle ata_device_add() failure
    gracefully without excessive resource rollback code.
    
    As most resources are released automatically on driver detach, many
    drivers don't need or can do with much simpler ->{port|host}_stop().
    In general, stop callbacks are need iff port or host needs to be given
    commands to shut it down.  Note that freezing is enough in many cases
    and ports are automatically frozen before being detached.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f0d36efdc624beb3d9e29b9ab9e9537bf0f25d5b
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 16:00:28 2007 +0900

    libata: update libata core layer to use devres
    
    Update libata core layer to use devres.
    
    * ata_device_add() acquires all resources in managed mode.
    
    * ata_host is allocated as devres associated with ata_host_release.
    
    * Port attached status is handled as devres associated with
      ata_host_attach_release().
    
    * Initialization failure and host removal is handedl by releasing
      devres group.
    
    * Except for ata_scsi_release() removal, LLD interface remains the
      same.  Some functions use hacky is_managed test to support both
      managed and unmanaged devices.  These will go away once all LLDs are
      updated to use devres.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0529c159dbdd79794796c1b50b39442d72efbe97
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 16:00:26 2007 +0900

    libata: implement ata_host_detach()
    
    Implement ata_host_detach() which calls ata_port_detach() for each
    port in the host and export it.  ata_port_detach() is now internal and
    thus un-exported.  ata_host_detach() will be used as the 'deregister
    from libata layer' function after devres conversion.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9ac7849e35f705830f7b016ff272b0ff1f7ff759
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 16:00:26 2007 +0900

    devres: device resource management
    
    Implement device resource management, in short, devres.  A device
    driver can allocate arbirary size of devres data which is associated
    with a release function.  On driver detach, release function is
    invoked on the devres data, then, devres data is freed.
    
    devreses are typed by associated release functions.  Some devreses are
    better represented by single instance of the type while others need
    multiple instances sharing the same release function.  Both usages are
    supported.
    
    devreses can be grouped using devres group such that a device driver
    can easily release acquired resources halfway through initialization
    or selectively release resources (e.g. resources for port 1 out of 4
    ports).
    
    This patch adds devres core including documentation and the following
    managed interfaces.
    
    * alloc/free	: devm_kzalloc(), devm_kzfree()
    * IO region	: devm_request_region(), devm_release_region()
    * IRQ		: devm_request_irq(), devm_free_irq()
    * DMA		: dmam_alloc_coherent(), dmam_free_coherent(),
    		  dmam_declare_coherent_memory(), dmam_pool_create(),
    		  dmam_pool_destroy()
    * PCI		: pcim_enable_device(), pcim_pin_device(), pci_is_managed()
    * iomap		: devm_ioport_map(), devm_ioport_unmap(), devm_ioremap(),
    		  devm_ioremap_nocache(), devm_iounmap(), pcim_iomap_table(),
    		  pcim_iomap(), pcim_iounmap()
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 77a527eadb425b60db3f5f0aae6a4c51c38e35e5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jan 30 00:59:17 2007 -0800

    fix CONFIG_SATA_SIS=y compile error
    
    Static code shouldn't be used from other modules.
    
    drivers/built-in.o: In function `sis_init_one':
    sata_sis.c:(.text+0x7634cd): undefined reference to `sis_info133'
    sata_sis.c:(.text+0x7634d6): undefined reference to `sis_info133'
    
    While I was at it, I also moved the prototype of this struct to a header
    file.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9b14dec5adf47287a2b52fc9fdedd6a0e245daca
Author: Alan Cox <alan@redhat.com>
Date:   Mon Jan 8 16:11:07 2007 +0000

    sata_sis: Support for PATA supports
    
    This is quick rework of the patch Uwe proposed but using Kconfig not
    ifdefs and user selection to sort out PATA support. Instead of ifdefs and
    requiring the user to select both drivers the SATA driver selects the
    PATA one.
    
    For neatness I've also moved the extern into the function that uses it.
    
    Signed-off-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5924b74c1cde5ef0246cf0dfbe689b27ffbe815b
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Jan 2 20:20:07 2007 +0900

    libata: implement HDIO_GET_IDENTITY
    
    'hdparm -I' doesn't work with ATAPI devices and sg_sat is not widely
    spread yet leaving no easy way to access ATAPI IDENTIFY data.
    Implement HDIO_GET_IDENTITY such that at least 'hdparm -i' works.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 18d90deb07ed6fc1818b0f0b326ecc788cea514e
Author: Alan Cox <alan@redhat.com>
Date:   Wed Jan 24 11:42:38 2007 +0000

    libata: trivial stuff
    
    Readability/typos etc
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0feb573f1588f3204a4558896c73703bc54d1862
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jan 20 13:12:46 2007 +0900

    sata_promise: kill qc->nsect
    
    Merge order left qc->nsect usage in sata_promise dangling.  Kill it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit dedf61db4f689b12c448b48426330290f98ed321
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jan 10 17:20:34 2007 -0800

    libata piix3 support warning fix
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2cdfc0db39247518585db13a3abdc633a158e0e
Author: Alan Cox <alan@redhat.com>
Date:   Wed Jan 10 17:13:38 2007 +0000

    libata: PIIX3 support
    
    This I believe completes the PIIX range of support for libata
    
    This adds the table entries needed for the PIIX3, both a new PCI
    identifier and a new mode list. It also fixes an erroneous access to PCI
    configuration 0x48 on non UDMA capable chips.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fba6edbd3bbd5e6c10b8247d3c3794e718bbc811
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sat Jan 13 21:32:30 2007 +0100

    sata_promise: handle ATAPI_NODATA ourselves
    
    This patch extends sata_promise to handle ATAPI_NODATA
    commands internally. However, commands destined to
    ATA_DFLAG_CDB_INTR devices are excluded from this and
    continue to be returned to libata.
    
    Concrete changes:
    - pdc_atapi_dma_pkt() is renamed to pdc_atapi_pkt(), and is
      extended to set up correct headers for NODATA packets
    - pdc_qc_prep() calls pdc_atapi_pkt() for ATAPI_NODATA
    - pdc_host_intr() handles ATAPI_NODATA
    - pdc_qc_issue_prot() sends ATAPI_NODATA packets via the
      chip's packet mechanism, except for CDB_INTR devices
    
    Tested on first- and second-generation chips, SATAPI and PATAPI,
    with no observable regressions.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4113bb6b67ced963b3269a72f335dd278543b56d
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Sat Jan 13 21:31:05 2007 +0100

    sata_promise: issue ATAPI commands as normal packets
    
    This patch (against libata #upstream + the ATAPI cleanup patch)
    reimplements sata_promise's ATAPI support to format ATAPI DMA
    commands as normal packets, and to issue them via the hardware's
    normal packet machinery.
    
    It turns out that the only reason for issuing ATAPI DMA
    commands via the pdc_issue_atapi_pkt_cmd() procedure was to
    perform two interrupt-fiddling steps for ATA_DFLAG_CDB_INTR
    devices. But these steps aren't needed because sata_promise
    sets ATA_FLAG_PIO_POLLING, which disables DMA for those devices.
    The remaining steps can easily be done in ATA taskfile packets.
    
    Concrete changes:
    - pdc_atapi_dma_pkt() is extended to program all packet setup
      steps, and not just contain the CDB; the sequence of steps
      exactly mirrors what pdc_issue_atapi_pkt_cmd() did
    - pdc_atapi_dma_pkt() needed more parameters: simplify it by
      just passing 'qc' and having it extract the data it needs
    - pdc_issue_atai_pkt_cmd() and its two helper procedures
      pdc_wait_for_drq() and pdc_wait_on_busy() are removed
    
    Tested on first- and second-generation chips, SATAPI and PATAPI,
    with no observable regressions.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 73fd456b2dd770ab4fcf14b9d45b7482237a2cf7
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Wed Jan 10 09:32:34 2007 +0100

    sata_promise: ATAPI cleanup
    
    Here's a cleanup for yesterday's sata_promise ATAPI patch:
    - add and use a symbolic constant for the altstatus register
    - check return status from ata_busy_wait()
    - add missing newline in a warning printk()
    - update comment in pdc_issue_atapi_pkt_cmd() to clarify
      that the maybe-wait-for-INT issue cannot occur in the
      current driver, but may occur if the driver starts issuing
      ATAPI non-DMA commands as PDC packets
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1fd7a697a37bcd484b130a71326e43cd68ced90c
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Jan 3 17:32:45 2007 +0900

    sata_inic162x: finally, driver for initio 162x SATA controllers, take #2
    
    Driver for Initio 162x SATA controllers.  ATA r/w, ATAPI r, hotplug
    and suspend/resume work.  ATAPI w (recording, that is) broken.  Feel
    free to fix it, but be warned, this controller is weird.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 726f0785b608d09bdd64bdbadc09217ebbf9920e
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Jan 3 17:30:39 2007 +0900

    libata: kill qc->nsect and cursect
    
    libata used two separate sets of variables to record request size and
    current offset for ATA and ATAPI.  This is confusing and fragile.
    This patch replaces qc->nsect/cursect with qc->nbytes/curbytes and
    kills them.  Also, ata_pio_sector() is updated to use bytes for
    qc->cursg_ofs instead of sectors.  The field used to be used in bytes
    for ATAPI and in sectors for ATA.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 16454445e1f0ca21ca2f29accb58478a7ff765a2
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jan 9 06:28:24 2007 -0500

    [libata] sata_vsc: build fix after PCI MSI feature addition
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7cbaa86b937b0b1fab95c159989f6a3c00bbcf78
Author: Dan Wolstenholme <daniel@wolstenholme.net>
Date:   Tue Jan 9 05:59:21 2007 -0500

    [libata] sata_vsc: support PCI MSI
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 553c4aa630af7bc885e056d0436e4eb7f238579b
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Dec 26 19:39:50 2006 +0900

    libata: handle pci_enable_device() failure while resuming
    
    Handle pci_enable_device() failure while resuming.  This patch kills
    the "ignoring return value of 'pci_enable_device'" warning message and
    propagates __must_check through ata_pci_device_do_resume().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8bfa79fcb81d2bdb043f60ab4171704467808b55
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Jan 2 20:19:40 2007 +0900

    libata: use ata_id_c_string()
    
    There were several places where ATA ID strings are manually terminated
    and in some places possibly unterminated strings were passed to string
    functions which don't limit length like strstr().  This patch converts
    all of them over to ata_id_c_string().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a0cf733b333eeeafb7324e2897448006c693c26c
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Jan 2 20:18:49 2007 +0900

    libata: straighten out ATA_ID_* constants
    
    * Kill _OFS suffixes in ATA_ID_{SERNO|FW_REV|PROD}_OFS for consistency
      with other ATA_ID_* constants.
    
    * Kill ATA_SERNO_LEN
    
    * Add and use ATA_ID_SERNO_LEN, ATA_ID_FW_REV_LEN and ATA_ID_PROD_LEN.
      This change also makes ata_device_blacklisted() use proper length
      for fwrev.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cdf56bcf14b9d441777703eef95eef807e4136ec
Author: Robert Hancock <hancockr@shaw.ca>
Date:   Wed Jan 3 18:13:57 2007 -0600

    sata_nv: add suspend/resume support v3 (Resubmit)
    
    Thoughts from Jeff & company on merging the patch below into libata-dev?
    This has been in the -mm tree for over a month now, I haven't heard any
    complaints about regressions..
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7102d230d6e8cf48ab366fa110c0a7f5ea160d07
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jan 4 00:09:36 2007 +0100

    drivers/ata/: make 4 functions static
    
    This patch makes the following needlessly global functions static:
    - libata-core.c: ata_qc_complete_internal()
    - libata-scsi.c: ata_scsi_qc_new()
    - libata-scsi.c: ata_dump_status()
    - libata-scsi.c: ata_to_sense_error()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 904dbd1307100edc12e2f98dd12b2338f1914f5b
Author: Alan Cox <alan@redhat.com>
Date:   Mon Jan 8 12:07:25 2007 +0000

    ahci: Remove jmicron fixup
    
    The AHCI set up is handled properly along with the other bits in the
    JMICRON quirk. Remove the code whacking it in ahci.c as its un-needed and
    also blindly fiddles with bits it doesn't own.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4112e16a7c606a80810d22d55bfc742eaa61fecb
Author: Alan Cox <alan@redhat.com>
Date:   Mon Jan 8 12:10:05 2007 +0000

    libata-sff: Don't try and activate channels which are not in use
    
    An ATA controller in native mode may have one or more channels disabled
    and not assigned resources. In that case the existing code crashes trying
    to access I/O ports 0-7.
    
    Add the neccessary check.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d73f30e1c9a9af14757fa5bf4014343926047156
Author: Alan Cox <alan@redhat.com>
Date:   Mon Jan 8 17:11:13 2007 +0000

    sata_via: PATA support
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7dcbc1f2c89b14745ff13eae3e57b72f05161786
Author: Jakub W. Jozwicki J <jakub007@go2.pl>
Date:   Tue Jan 9 09:01:19 2007 +0900

    pata_sis: implement laptop list and add ASUS A6K/A6U
    
    In ASUS A6K/A6U hdd is connected to SiS 96x via 40c cable, however it
    is short cable and is UDMA66 capable.
    
    tj: fixed if () conditionals
    ah: fixed infinite loop
    
    Signed-off-by: Jakub W. Jozwicki <jakub007@go2.pl>
    Cc: Andreas Henriksson <andreas@fatal.se>
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit babfb682c93ca78b74d7f3bb07ee0e13831c6f46
Author: Jakub W. Jozwicki J <jakub007@go2.pl>
Date:   Tue Jan 9 02:26:30 2007 +0900

    ata_piix: add ICH7 on Acer 3682WLMi to laptop list
    
    In Acer Aspire hdd is connected to ICH7 via 40c cable, however it is
    short cable and it is UDMA66 capable.
    
    Signed-off-by: Jakub W. Jozwicki J <jakub007@go2.pl>
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c9f89475a5b184e9a6077b995ce340e6804c1b1a
Author: Conke Hu <conke.hu@amd.com>
Date:   Tue Jan 9 05:32:51 2007 -0500

    Add pci class code for SATA & AHCI, and replace some magic numbers.
    
    Signed-off-by: Conke Hu <conke.hu@amd.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 95006188cb1399f1358330503906e5891c129a10
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Tue Jan 9 10:51:46 2007 +0100

    sata_promise: ATAPI support
    
    This patch adds ATAPI support to the sata_promise driver.
    This has been tested on both first- and second-generation
    chips (20378 and 20575), and with both SATAPI and PATAPI
    devices. CD-writing works.
    
    SATAPI DMA works on second-generation chips, but on
    first-generation chips SATAPI is limited to PIO due
    to what appears to be HW limitations.
    PATAPI DMA works on both first- and second-generation
    chips, but requires the separate PATA support patch
    before it can be used on TX2plus chips.
    
    The functional changes to the driver are:
    - remove ATA_FLAG_NO_ATAPI from PDC_COMMON_FLAGS
    - add ->check_atapi_dma() operation to enable DMA for bulk data
      transfers but force PIO for other ATAPI commands; this filter
      is from Promise's driver and largely matches pata_pdc207x.c
    - use a more restrictive ->check_atapi_dma() on first-generation
      chips to force SATAPI to always use PIO
    - add handling of ATAPI protocols to pdc_qc_prep(), pdc_host_intr(),
      and pdc_qc_issue_prot(): ATAPI_DMA is handled by the driver
      while non-DMA protocols are handed over to libata generic code
    - add pdc_issue_atapi_pkt_cmd() to handle the initial steps in
      issuing ATAPI DMA commands before sending the actual CDB;
      this procedure was ported from Promise's driver
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 870ae337d568e8633ec30ca6f6afb7b58a558ba3
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Tue Jan 9 10:50:27 2007 +0100

    sata_promise: TX2plus PATA support
    
    This patch implements a simple way of setting up per-port
    flags on the SATA+PATA Promise TX2plus chips, which is a
    prerequisite for supporting the PATA port on those chips.
    
    It is based on the observation that ap->flags isn't really
    used until after ->port_start() has been invoked. So it
    places the "exceptional" per-port flags array in the driver's
    private host structure, and uses it in ->port_start() to
    finalise the port's flags.
    
    This patch obsoletes the #promise-sata-pata branch included
    in the #all branch.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7a44e910f43cbb5186e7242f4c32b3a5d2fb6666
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Tue Dec 19 13:05:53 2006 -0800

    [PATCH] user of the jiffies rounding patch: ATA subsystem
    
    This patch introduces users of the round_jiffies() function: ATA subsystem
    
    This delayed work is of the "about once a second" variety and can be rounded
    to coincide with other wakers.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d4013f07bd5380178bf28ef1cd76649779367288
Author: Alan Cox <alan@redhat.com>
Date:   Fri Dec 15 13:08:50 2006 -0800

    [PATCH] pci: Move PCI_VDEVICE from libata to core
    
    Updated diff which doesn't move the comment as per Jeff's request and
    corrects the docs as per report on l/k
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f20b16ff7c19d1c369ee07470952aca093551ed0
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Dec 11 11:14:06 2006 -0500

    [libata] trim trailing whitespace
    
    Most of these contributed by that mysterious figger known as A.C.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 155d2916d9474f81178f501664499f40833c59b2
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Fri Dec 8 00:14:16 2006 +0100

    [PATCH] libata: Add support for the MPC52xx ATA controller
    
    This patch adds initial libata support for the Freescale
    MPC5200 integrated IDE controller.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9b13b682a68d5bcf09c75da73d4e61d92eba4c84
Author: Alan Cox <alan@redhat.com>
Date:   Thu Dec 7 08:59:14 2006 -0800

    [PATCH] pata_it8213: Add new driver for the IT8213 card
    
    Add a driver for the IT8213 which is a single channel ICH-ish PATA
    controller.  As it is very different to the IT8211/2 it gets its own
    driver.  There is a legacy drivers/ide driver also available and I'll post
    that once I get time to test it all out (probably early January).  If
    anyone else needs the drivers/ide driver and wants to do the merge for
    drivers/ide (Bart ??) then I'll forward it.
    
    [akpm@osdl.org: add PCI ID, constify needed_pio[]]
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3f3e7313e4e45f84c4d6e7b3bf91b5c9ad3e05cf
Author: Uwe Koziolek <uwe.koziolek@gmx.net>
Date:   Mon Dec 4 01:34:42 2006 +0100

    [PATCH] sata_sis: support SiS966/966L
    
    The SiS966/966L has different PCI-IDs for native mode and AHCI mode.
    The SiS966 supports four SATA ports only in native mode.
    
    Added additional PCI-ID 0x0183 for SiS965/965L.
    
    this patch is based on the code from David Wang from SiS Corporation published on SiS Website.
    
    Signed-off-by: Uwe Koziolek <uwe.koziolek@gmx.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c9e3ad6021e5eeb1c25cc4a573bd6427019a7a86
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Date:   Fri Feb 9 15:36:47 2007 -0600

    JFS: Get rid of "may be used uninitialized" warnings
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 1a1689344add3333d28d1b5495d8043a3877d01c
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Mon Feb 5 10:44:20 2007 -0800

    phy devices: use same arg types
    
    sparse complains about differing types from prototype to
    definition, so change the u32 to phy_interface_t:
    
    drivers/net/phy/phy_device.c:140:19: error: symbol 'phy_connect' redeclared with different type (originally declared at include/linux/phy.h:362) - incompatible argument 5 (different signedness)
    drivers/net/phy/phy_device.c:190:19: error: symbol 'phy_attach' redeclared with different type (originally declared at include/linux/phy.h:360) - incompatible argument 4 (different signedness)
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a3cc2de9138f1ee1581f55927f33f7d72ed6207d
Merge: e45d9ab... 46b8c85...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Feb 9 16:12:09 2007 -0500

    Merge branch 'upstream' of master.kernel.org:/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream

commit e45d9ab4051d99c9f237c96e75c4dd6671661236
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Fri Feb 9 05:49:08 2007 -0800

    NetXen: Updates for ethtool support
    
    NetXen: Updates for ethtool support.
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9b41011724024238c94b4c5469df11bb4fd3ba12
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Fri Feb 9 05:45:18 2007 -0800

    NetXen: Fixes for ppc architecture.
    
    NetXen: Fixes for ppc architecture.
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2db9eea7901d83e494340c93d131fc1fd463e4c
Author: Jan-Bernd Themann <ossthema@de.ibm.com>
Date:   Fri Feb 9 09:10:51 2007 +0100

    ehea: Fixed error recovery
    
    Error recovery for QP errors: Reset QPs and dump error information
    
    Signed-off-by: Jan-Bernd Themann <themann@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3945ac36af3da6014cde9836c5acc5b3adaaa379
Author: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
Date:   Tue Feb 6 19:13:44 2007 -0200

    ACPI: ibm-acpi: cleanup init and exit paths
    
    Fix a small memory leak on module removal, and other
    assorted minor cleanups on the module init codepath.
    
    Signed-off-by: Henrique de Moraes Holschuh <hmh@hmh.eng.br>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9af9fc45ddd3e315c51f87392b5048967e4343cd
Merge: 62d0cfc... f3dc073...
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Fri Feb 9 21:35:36 2007 +0100

    Merge ../linux-2.6-watchdog-mm

commit 46b8c85e1df091fe2d53ae7d02addb0dc58a9123
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Wed Jan 31 18:50:19 2007 -0600

    [PATCH] ieee80211: Fix sparse warning
    
    Sparse issues the warning "warning: symbol 'crypt' shadows an earlier one"
    in net/ieee80211/ieee80211_tx.c.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit cad8cd9c3160e7e2e65c6999b58b3fde8de56aca
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Thu Jan 18 22:06:59 2007 -0600

    [PATCH] bcm43xx: Check error returns in initialization routines
    
    A number of the calls in the initialization routines fail to check the returned value for
    errors. This patch adds the necessary checks and logs any errors found when appropriate.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 9d4a6040fc6222ca57c271289a7540292640a5a4
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 5 16:41:36 2007 -0800

    [PATCH] Replace incorrect macro name "WIRELESS_EXT" with "CONFIG_WIRELESS_EXT"
    
    Rename the (apparently) incorrect macro name WIRELESS_EXT to
    CONFIG_WIRELESS_EXT.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit eaefd5fb7d793c9c1bcef1b0c0d5ec3824a85b91
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 12:03:19 2007 +1000

    [PATCH] m68knommu: use irq_handler_t for passing handler types
    
    Use irq_handler_t for passing clock handler routine around.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1274c1088e54aa178d8546a3830fb533062d01f4
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 12:03:14 2007 +1000

    [PATCH] m68knommu: removed include of system.h from bitops
    
    Remove include of asm/system.h, not needed.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 72613e5f44adf2fe2684a5f1c1b62c2ee9984f40
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 12:03:08 2007 +1000

    [PATCH] uclinux: correctly remap bin_fmtflat exe allocated mem regions
    
    remap() the region we get from mmap() to mark the fact that we are
    using all of the available slack space. Any slack space is used
    to form a simple brk region, and potentially more stack space than
    requested at load time.
    
    Any searches of the vma chain may well fail looking for
    stack (and especially arg) addresses if the remaping is not done.
    The simplest example is /proc/<pid>/cmdline, since the args
    are pretty much always at the top of the data/bss/stack region.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c051b01129560ea02ea2cebdf00db0721cc9a618
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 12:03:01 2007 +1000

    [PATCH] m68knommu: use irq_handler_t passing handler to clock init
    
    Use irq_handler_t for passing interrupt handler around.
    Fix optional profiler handler to return a irq_return_t type.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 459c6a9b8ee931e48f6af6637c10ec45521f0536
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 12:02:52 2007 +1000

    [PATCH] m68knommu: use irq_handler_t passing handler to PIT init
    
    Use irq_handler_t type for passing timer handler to timer init code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 56591b9961f7fb78c88354e59af7f0800f39dded
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 11:45:43 2007 +1000

    [PATCH] m68knommu: include unused sections in linker script
    
    Include the unused sections in the m68knommu linker scripts.
    Needed for modules support.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 1f95e49aae68794c4dc0d92fea8b4967dd49ae53
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Feb 7 11:35:29 2007 +1000

    [PATCH] m68knommu: remove regs arg from coldfire timer interrupt
    
    Fix coldfire kernel timer to remove regs arg.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 64106104dd2d4a6280777e88c1cbf9f7a52c30bd
Merge: beda9f3... 91efa46...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 10:25:38 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/ieee1394/linux1394-2.6:
      ieee1394: fix host device registering when nodemgr disabled
      ieee1394: video1394: DMA fix
      ieee1394: raw1394: prevent unloading of low-level driver
      ieee1394: dv1394: tidy up card removal
      ieee1394: dv1394: fix CardBus card ejection
      ieee1394: sbp2: lower block queue alignment requirement
      ieee1394: sbp2: remove bogus "emulated" host flag
      ieee1394: save one word in struct hpsb_host
      ieee1394: restore config ROM when resuming
      ieee1394: ohci1394: drop pcmcia-cs compatibility code
      ieee1394: nodemgr: check info_length in ROM header earlier
      the scheduled IEEE1394_OUI_DB removal
      the scheduled IEEE1394_EXPORT_FULL_API removal
      ieee1394: sbp2: use a better wildcard for blacklist
      Add PCI class ID for firewire OHCI controllers.
      ieee1394: modified csr1212_key_id_type_map to support lisight

commit beda9f3a13bbb22cde92a45f230a02ef2afef6a9
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Feb 8 22:48:51 2007 +0100

    [PATCH] kbuild: more Makefile cleanups
    
    This adds the remaining changes which should have been part of the
    review process.
    
     - the define command is inappropriate (it's primarily for rule
       definitions)
     - execute commands in the current dir as all other commands
     - .*.tmp (but not .*.null) files are also removed up by "make clean"
     - printf has other side effects, just use "echo -e"
     - proper quoting
     - proper indentation
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a3c94e5c5921b0fd75b33042ca598aee52f1f7b9
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:07 2007 +0000

    ACPI: bay: fix wrong order of kzalloc arguments
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2fd592e45b9c89d69e126f172d0f991e2af955e5
Merge: 2affc85... 0a9b0db...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 09:44:28 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-apm
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-apm:
      [APM] SH: Convert to use shared APM emulation.
      [APM] MIPS: Convert to use shared APM emulation.
      [APM] ARM: Convert to use shared APM emulation.
      [APM] Add shared version of APM emulation

commit 8f68abbfd9703e58920ff07d314a48654ed0bc3b
Merge: 8500adc... 862a728...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Feb 9 11:42:11 2007 -0600

    Merge branch '85xx' into for_paulus

commit 8500adc79b15fa85b403dbf04aba3497c1f80e50
Author: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Date:   Sun Jan 28 23:31:08 2007 +0100

    [POWERPC] Update to linkstation / kurobox support
    
    Linkstation systems capable of running mainline kernels use u-boot as a
    bootloader, so, specifying a suitable kernel command is not a problem.
    Don't guess. Also extend linkstation_defconfig to support the linkstation HS
    model with a IT8212 IDE controller and kuroboxHD/HD-HLAN linkstation
    models with a tulip ethernet chip. The latter also require a slightly
    different .dts file, which is also included with this patch.
    
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit b8583f6872496cdb0145a2f642fbefff002d68cb
Merge: 8f34f6c... 49baa91...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Feb 9 11:40:48 2007 -0600

    Merge branch '83xx' into for_paulus

commit 49baa91d6863df480fa05eb57524a274f77fa886
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Thu Feb 8 01:11:00 2007 -0600

    [POWERPC] 83xx: Updated and renamed MPC834x SYS to MPC834x MDS
    
    The MPC834x SYS board has always been called the MPC834x MDS since its public
    release.  Removed all references to SYS and replaced with MDS.  Additionally
    renamed the .dts to match the defconfig (mpc834x_mds*).
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 2affc857efdf7dacace234b63d289d67260c95a6
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Thu Feb 8 14:20:44 2007 -0800

    [PATCH] SH vdso: use install_special_mapping()
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c13e4ca247311c294b032089e0d05e96f2708c16
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Feb 8 14:20:43 2007 -0800

    [PATCH] powerpc vDSO: use install_special_mapping
    
    This patch uses install_special_mapping for the powerpc vDSO setup,
    consolidating duplicated code.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dc5882b20a69fb16219cc61ae3d21d73dd6360a7
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Feb 8 14:20:43 2007 -0800

    [PATCH] x86_64 ia32 vDSO: use install_special_mapping
    
    This patch uses install_special_mapping for the ia32 vDSO setup, consolidating
    duplicated code.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 7d91d531900bfa1165d445390b3b13a8013f98f7
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Feb 8 14:20:42 2007 -0800

    [PATCH] i386 vDSO: use install_special_mapping
    
    This patch uses install_special_mapping for the i386 vDSO setup, consolidating
    duplicated code.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit fa5dc22f8586cc3742413dd05f5cd9e039dfab9e
Author: Roland McGrath <roland@redhat.com>
Date:   Thu Feb 8 14:20:41 2007 -0800

    [PATCH] Add install_special_mapping
    
    This patch adds a utility function install_special_mapping, for creating a
    special vma using a fixed set of preallocated pages as backing, such as for a
    vDSO.  This consolidates some nearly identical code used for vDSO mapping
    reimplemented for different architectures.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a25700a53f715fde30443e737e52310c6d4a311a
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Feb 8 14:20:40 2007 -0800

    [PATCH] mm: show bounce pages in oom killer output
    
    Also split that long line up - people like to send us wordwrapped oom-kill
    traces.
    
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 45941d0481f538324fa21d6450116d13f6e51e91
Author: Soeren Sonnenburg <kernel@nn7.de>
Date:   Thu Feb 8 14:20:38 2007 -0800

    [PATCH] enable mouse button 2+3 emulation for x86 macs
    
    As macbook/macbook pro's also have to live with a single mouse button the
    following patch just enables the Macintosh device drivers menu in Kconfig +
    adds the macintosh dir to the obj-* to make macbook* users happy (who use
    exactly that since months....
    
    Signed-off-by: Soeren Sonnenburg <kernel@nn7.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Dmitry Torokhov <dtor@mail.ru>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 835d90c4218dffe6f9e7ac1ed79795197a4970c4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Feb 8 14:20:38 2007 -0800

    [PATCH] v9fs_vfs_mkdir(): fix a double free
    
    Fix a double free of "dfid" introduced by commit
    da977b2c7eb4d6312f063a7b486f2aad99809710 and spotted by the Coverity
    checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Eric Van Hensbergen <ericvh@gmail.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit da6e1a32fb8d7539a27f699c8671f64d7fefd0cc
Author: Neil Brown <neilb@suse.de>
Date:   Thu Feb 8 14:20:37 2007 -0800

    [PATCH] md: avoid possible BUG_ON in md bitmap handling
    
    md/bitmap tracks how many active write requests are pending on blocks
    associated with each bit in the bitmap, so that it knows when it can clear
    the bit (when count hits zero).
    
    The counter has 14 bits of space, so if there are ever more than 16383, we
    cannot cope.
    
    Currently the code just calles BUG_ON as "all" drivers have request queue
    limits much smaller than this.
    
    However is seems that some don't.  Apparently some multipath configurations
    can allow more than 16383 concurrent write requests.
    
    So, in this unlikely situation, instead of calling BUG_ON we now wait
    for the count to drop down a bit.  This requires a new wait_queue_head,
    some waiting code, and a wakeup call.
    
    Tested by limiting the counter to 20 instead of 16383 (writes go a lot slower
    in that case...).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit aaf68cfbf2241d24d46583423f6bff5c47e088b3
Author: Neil Brown <neilb@suse.de>
Date:   Thu Feb 8 14:20:30 2007 -0800

    [PATCH] knfsd: fix a race in closing NFSd connections
    
    If you lose this race, it can iput a socket inode twice and you get a BUG
    in fs/inode.c
    
    When I added the option for user-space to close a socket, I added some
    cruft to svc_delete_socket so that I could call that function when closing
    a socket per user-space request.
    
    This was the wrong thing to do.  I should have just set SK_CLOSE and let
    normal mechanisms do the work.
    
    Not only wrong, but buggy.  The locking is all wrong and it openned up a
    race where-by a socket could be closed twice.
    
    So this patch:
      Introduces svc_close_socket which sets SK_CLOSE then either leave
      the close up to a thread, or calls svc_delete_socket if it can
      get SK_BUSY.
    
      Adds a bias to sk_busy which is removed when SK_DEAD is set,
      This avoid races around shutting down the socket.
    
      Changes several 'spin_lock' to 'spin_lock_bh' where the _bh
      was missing.
    
    Bugzilla-url: http://bugzilla.kernel.org/show_bug.cgi?id=7916
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 387bb17374c5fa057462d00d4ba941d49f45de4d
Author: Neil Brown <neilb@suse.de>
Date:   Thu Feb 8 14:20:29 2007 -0800

    [PATCH] md: fix various bugs with aligned reads in RAID5
    
    It is possible for raid5 to be sent a bio that is too big for an underlying
    device.  So if it is a READ that we pass stright down to a device, it will
    fail and confuse RAID5.
    
    So in 'chunk_aligned_read' we check that the bio fits within the parameters
    for the target device and if it doesn't fit, fall back on reading through
    the stripe cache and making lots of one-page requests.
    
    Note that this is the earliest time we can check against the device because
    earlier we don't have a lock on the device, so it could change underneath
    us.
    
    Also, the code for handling a retry through the cache when a read fails has
    not been tested and was badly broken.  This patch fixes that code.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: "Kai" <epimetreus@fastmail.fm>
    Cc: <stable@suse.de>
    Cc: <org@suse.de>
    Cc: Jens Axboe <jens.axboe@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6649a3863232eb2e2f15ea6c622bd8ceacf96d76
Author: Ken Chen <kenchen@google.com>
Date:   Thu Feb 8 14:20:27 2007 -0800

    [PATCH] hugetlb: preserve hugetlb pte dirty state
    
    __unmap_hugepage_range() is buggy that it does not preserve dirty state of
    huge_pte when unmapping hugepage range.  It causes data corruption in the
    event of dop_caches being used by sys admin.  For example, an application
    creates a hugetlb file, modify pages, then unmap it.  While leaving the
    hugetlb file alive, comes along sys admin doing a "echo 3 >
    /proc/sys/vm/drop_caches".
    
    drop_pagecache_sb() will happily free all pages that aren't marked dirty if
    there are no active mapping.  Later when application remaps the hugetlb
    file back and all data are gone, triggering catastrophic flip over on
    application.
    
    Not only that, the internal resv_huge_pages count will also get all messed
    up.  Fix it up by marking page dirty appropriately.
    
    Signed-off-by: Ken Chen <kenchen@google.com>
    Cc: "Nish Aravamudan" <nish.aravamudan@gmail.com>
    Cc: Adam Litke <agl@us.ibm.com>
    Cc: David Gibson <david@gibson.dropbear.id.au>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Cc: <stable@kernel.org>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f336953bfdee8d5e7f69cb8e080704546541f04b
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Thu Feb 8 14:20:25 2007 -0800

    [PATCH] ufs: restore back support of openstep
    
    This is a fix of regression, which triggered by ~2.6.16.
    
    Patch with name ufs-directory-and-page-cache-from-blocks-to-pages.patch: in
    additional to conversation from block to page cache mechanism added new
    checks of directory integrity, one of them that directory entry do not
    across directory chunks.
    
    But some kinds of UFS: OpenStep UFS and Apple UFS (looks like these are the
    same filesystems) have different directory chunk size, then common
    UFSes(BSD and Solaris UFS).
    
    So this patch adds ability to works with variable size of directory chunks,
    and set it for ufstype=openstep to right size.
    
    Tested on darwin ufs.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cbb9450234fb28f60fea36520cd710a988ac5812
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Feb 8 14:20:24 2007 -0800

    [PATCH] rtc-pcf8563: detect polarity of century bit automatically
    
    The usage of the century bit was inverted on 2.6.19 following to PCF8563's
    description, but it was not match to usage suggested by RTC8564's
    datasheet.  Anyway what MO_C=1 means can vary on each platform.  This patch
    is to detect its polarity in get_datetime routine.  The default value of
    c_polarity is 0 (MO_C=1 means 19xx) so that this patch does not change
    current behavior even if get_datetime was not called before set_datetime.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Cc: Jean-Baptiste Maneyrol <jean-baptiste.maneyrol@teamlog.com>
    Cc: <stable@kernel.org>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 68a696a01f482859a9fe937249e8b3d44252b610
Merge: dcb92f8... f85da08...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 09:22:36 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-tc
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-tc:
      [EISA] EISA registration with !CONFIG_EISA
      [TC] pmagb-b-fb: Convert to the driver model
      [TC] dec_esp: Driver model for the PMAZ-A
      [TC] mips: pmag-ba-fb: Convert to the driver model
      [TC] defxx: TURBOchannel support
      [TC] TURBOchannel support for the DECstation
      [TC] MIPS: TURBOchannel resources off-by-one fix
      [TC] MIPS: TURBOchannel update to the driver model

commit dcb92f8804717b845db70939b523c5d152a2e0ea
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:00 2007 +0000

    [PATCH] uintptr_t is unsigned long, not u32
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit bd4f3ae1a1524114f7a8051214bacea2fe7813b8
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:40:15 2007 +0000

    [PATCH] trivial s2io annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b53449725a9a436fb9cc2f2ef8579368a704db03
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:40:10 2007 +0000

    [PATCH] trivial cxgb3 annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 184123dbd6629ef32e9fe4749163701e86f2b02c
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:40:05 2007 +0000

    [PATCH] pc300too annotation fixes
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 68f50e52554a0a55dfe2e3fdf659ee0569d73c3f
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:40:00 2007 +0000

    [PATCH] hci_{read,write}l() does force casts to wrong type for no reason
    
    readl() et.al. expect iomem pointer, so WTF force-cast it to normal one???
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 53ebb3b8264a77b6214f7a405300de8c24a12554
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:55 2007 +0000

    [PATCH] trivial usb endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f1fda89522c5aaa1bd4ef69605e85e6ee9c85faf
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:50 2007 +0000

    [PATCH] powerpc: celleb trivial endianness and iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 95389b86fd07660970a3e6498405d53037c035e9
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:45 2007 +0000

    [PATCH] osst endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b4377356450e2358f5f92d34f130d6cb6574bf76
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:40 2007 +0000

    [PATCH] iscsi endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 04d4f7a1143e4fb291cd1584c9ac8de4ba584d34
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:30 2007 +0000

    [PATCH] ahci: trivial endianness annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 92ccc5f7558f24edf7129a24a8e2ce338009b0dd
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:35 2007 +0000

    [PATCH] sata_svw: trivial iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit cb468984f624959995f1034197f3bae86108973b
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:25 2007 +0000

    [PATCH] io_apic: trivial __iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 11718b4d6ba03cf83e4cd856e5eda3a8d0d17652
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:20 2007 +0000

    [PATCH] misc NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8b6d44c7bde7f927b7b70e9f56c22c66c0066277
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:40 2007 +0000

    [PATCH] kvm: NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5b71bddb78df5e292ae90f7603a996e51b3ecb88
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:15 2007 +0000

    [PATCH] hpet: trivial __iomem annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit c3cf83b70c25c2b1d5569d6cc24e879464d1803b
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:10 2007 +0000

    [PATCH] misc duplicate field initializers
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 2f3669879955e2da10558f39aafe0fe13d639458
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:35 2007 +0000

    [PATCH] kvm: __user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 193d0732920fd09825501136f3a01e9c28a700e6
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:39:05 2007 +0000

    [PATCH] offsetof is size_t
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 4ec031166f6a466a443f462e567f7551096b1741
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:30 2007 +0000

    [PATCH] kill eth_io_copy_and_sum()
    
    On all targets that sucker boils down to memcpy_fromio(sbk->data, from, len).
    The function name is highly misguiding (it _never_ does any checksums), the
    last argument is just a noise and simply expanding the call to memcpy_fromio()
    gives shorter and more readable source.  For a lot of reasons it has almost
    no remaining users, so it's better to just outright kill it.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit b81831c69afb82c0545d3de729290fab4e50d429
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:25 2007 +0000

    [PATCH] drivers/serial NULL noise removal
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f2e97df669d32f74152336f46e4e0e328b993c57
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:55 2007 +0000

    [PATCH] in non-NUMA case mark GFP_THISNODE gfp_t
    
    ... operations with it are OK as is, but flags & ~0 will have no idea that
    this ~0 is meant to be ~gfp_t.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 8a5ab4157b3933d4fa29a1612879ab08f681041a
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:20 2007 +0000

    [PATCH] usbvision missing __user
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d7bde2fe043c2f7ddcf1d8bec139684ef774c8bc
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:50 2007 +0000

    [PATCH] hwmon: ansify
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 58addbffdde731da25a2f9eaa1353fc434f3f3c4
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:45 2007 +0000

    [PATCH] dlm: use kern_recvmsg()
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9340b0d356ee52783121af398fa6a332e19e37e2
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:15 2007 +0000

    [PATCH] arch/powerpc trivial annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ccbebdaccf53ef21663d3bde0ab7b3806d0aeb94
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:10 2007 +0000

    [PATCH] arch/ia64: ansify
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 55e747445beec8df1133bb8681c884500546775c
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:00 2007 +0000

    [PATCH] hidp __user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d76fdf754a4b61741d78c545489145919affea4d
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:38:05 2007 +0000

    [PATCH] trivial __user annotations - rtc-dev
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit a2593247d747954cd12c32da8c5a3aecb9cd19a3
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Feb 2 16:59:33 2007 +0000

    [MTD] [NAND] S3C2410: Hardware ECC correction code
    
    Add support for correcting errors detected by the
    hardware ECC.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0a9b0db19262dbb09f3a34195e68cafd5dc3fa10
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Wed Jan 24 21:56:20 2007 +0900

    [APM] SH: Convert to use shared APM emulation.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2116245ee121af820225834e9695005ab07d1e84
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 9 17:08:58 2007 +0000

    [APM] MIPS: Convert to use shared APM emulation.
    
    Also convert to use generic kernel/power/Kconfig to make the use of the
    shared APM emulation possible.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 75e7153abd220f1c4a731a9613fb705485b56aa8
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 9 17:08:58 2007 +0000

    [APM] ARM: Convert to use shared APM emulation.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7726942fb15edd46e4fe8ab37f9a99795191e585
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 9 17:08:57 2007 +0000

    [APM] Add shared version of APM emulation
    
    Currently ARM and MIPS both have nearly identical copies of the APM
    emulation code in their arch code.  Add yet another copy of it to
    drivers char and make it selectable through SYS_SUPPORTS_APM_EMULATION.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 427a57a782c3bbd21de0a145662dc8f2f3ac2ea5
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:22 2007 +0000

    [PATCH] missing include in macsonic
    
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 97210b5f1c2ca98c62663a38f1d32839031f1c27
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:12 2007 +0000

    [PATCH] spider_net breakage from class_device -> device
    
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9288f5c3f190ef5ee8e50b27e8ae1152f19061e4
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:27 2007 +0000

    [PATCH] ps3: missing exports
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 9f3bed5fdb5dbe963fc2c54e7709da96823c404d
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:42 2007 +0000

    [PATCH] TIFM should depend on PCI - TIFM_CORE leads to use of pci primitives
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ccbe48f76194b8524d6a8b239a70015245fecbc6
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:37 2007 +0000

    [PATCH] m32r: class_device -> device fallout
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 72401339b545a8a0a66411c5a2486f602447d924
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:32 2007 +0000

    [PATCH] ps3 usb missed the addition of new argument to ps3_alloc_io_irq()
    
    Acked-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit ec1c620b1cb43182df5d1a08392f8d68d36cef06
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:17 2007 +0000

    [PATCH] assigning enum constant to char * is vile, even if it happens to be 0
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 35e00fbe48c547002fbfef718fdc67471c403ee8
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Feb 9 16:05:07 2007 +0000

    [PATCH] wrong order of kzalloc arguments
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 6026179519896e7d35b2564e7544487d1c8948e7
Merge: d27146d... c2902c8...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 08:24:04 2007 -0800

    Merge branch 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa
    
    * 'linus' of master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa: (212 commits)
      [PATCH] Fix breakage with CONFIG_SYSFS_DEPRECATED
      [ALSA] version 1.0.14rc2
      [ALSA] ASoC documentation updates
      [ALSA] ca0106 - Add missing sysfs device assignment
      [ALSA] aoa i2sbus: Stop Apple i2s DMA gracefully
      [ALSA] hda-codec - Add support for Fujitsu PI1556 Realtek ALC880
      [ALSA] aoa: remove suspend/resume printks
      [ALSA] Fix possible deadlocks in sequencer at removal of ports
      [ALSA] emu10k1 - Fix STAC9758 front channel
      [ALSA] soc - Clean up with kmemdup()
      [ALSA] snd-ak4114: Fix two array overflows
      [ALSA] ac97_bus power management
      [ALSA] usbaudio - Add support for Edirol UA-101
      [ALSA] hda-codec - Add ALC861VD/ALC660VD support
      [ALSA] soc - ASoC 0.13 Sharp poodle machine
      [ALSA] soc - ASoC 0.13 Sharp tosa machine
      [ALSA] soc - ASoC 0.13 spitz machine
      [ALSA] soc - ASoC Sharp corgi machine
      [ALSA] soc - ASoC 0.13 pxa2xx DMA
      [ALSA] soc - ASoC 0.13 pxa2xx AC97 driver
      ...

commit f85da084151c9454891124c999006857a354622a
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:26 2007 -0800

    [EISA] EISA registration with !CONFIG_EISA
    
    This is a change for the EISA bus support to permit drivers to call
    un/registration functions even if EISA support has not been enabled.  This is
    similar to what PCI (and now TC) does and reduces the need for #ifdef clutter.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9084b0058e11378abb43d01e669bac8ac7b593ff
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:29 2007 -0800

    [TC] pmagb-b-fb: Convert to the driver model
    
    This is a set of changes to convert the driver to the driver model.  As a
    side-effect the driver now supports building as a module.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4df4db5c6c6daeb10a8693d09ce872bce8cd84e6
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:29 2007 -0800

    [TC] dec_esp: Driver model for the PMAZ-A
    
    This is a set of changes that converts the PMAZ-A support to the driver model.
    
    The use of the driver model required switching to the hotplug SCSI
    initialization model, which in turn required a change to the core NCR53C9x
    driver.  I decided not to break all the frontend drivers and introduced an
    additional parameter for esp_allocate() to select between the old and the new
    model.  I hope this is OK, but I would be fine with converting NCR53C9x to the
    new model unconditionally as long as I do not have to fix all the other
    frontends (OK, perhaps I could do some of them ;-) ).
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 335dc50cec2891026bd51e46769fc12365b6e475
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:28 2007 -0800

    [TC] mips: pmag-ba-fb: Convert to the driver model
    
    This is a set of changes to convert the driver to the driver model.  As a
    side-effect the driver now supports building as a module.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: James Simmons <jsimmons@infradead.org>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e89a2cfb7d7b5a658295fef9be84b12e813163bd
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:27 2007 -0800

    [TC] defxx: TURBOchannel support
    
    This is a set of changes to add TURBOchannel support to the defxx driver.  As
    at this point the EISA support in the driver has become the only not having
    been converted to the driver model, I took the opportunity to convert it as
    well.  Plus support for MMIO in addition to PIO operation as TURBOchannel
    requires it anyway.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 33cf45b90eb73e1f3b784b50691d74f7ea381b21
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:26 2007 -0800

    [TC] TURBOchannel support for the DECstation
    
    This is the platform-specific part of TURBOchannel bus support for the
    DECstation.  It implements determining whether the bus is actually there,
    getting bus parameters, IRQ assignments for devices and protected accesses
    to possibly unoccupied slots that may trigger bus error exceptions.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 56a47da1b940b6d3812de67fd94af9bfda6ee93a
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:26 2007 -0800

    [TC] MIPS: TURBOchannel resources off-by-one fix
    
    Fix resource reservation of TURBOchannel areas, where the end is one byte
    too far.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b454cc6636d254fbf6049b73e9560aee76fb04a3
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:25 2007 -0800

    [TC] MIPS: TURBOchannel update to the driver model
    
    This is a set of changes to convert support for the TURBOchannel bus to the
    driver model.  It implements the usual set of calls similar to what other bus
    drivers have: tc_register_driver(), tc_unregister_driver(), etc.  All the
    platform-specific bits have been removed and headers from asm-mips/dec/ have
    been merged into linux/tc.h, which should be included by drivers.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d27146dd5b72ab7d7e641f56f4bee1484dabd0b7
Merge: 6204530... 4ffabef...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 08:09:05 2007 -0800

    Merge branch 'for-linus' of git://www.atmel.no/~hskinnemoen/linux/kernel/avr32
    
    * 'for-linus' of git://www.atmel.no/~hskinnemoen/linux/kernel/avr32:
      [AVR32] Add missing #include <linux/module.h>
      [AVR32] ssize_t should be long, not int
      [AVR32] Remove last remains of libgcc
      [AVR32] SPI platform code update
      [AVR32] Add PIOE device and reserve SDRAM pins
      [AVR32] Introduce at32_reserve_pin()
      [AVR32] Don't reset PIO state at bootup
      [AVR32] GPIO API implementation
      [AVR32] Use ARRAY_SIZE macro when appropriate
      [AVR32] Implement dma_mapping_error()
      [AVR32] Fix incorrect invalidation of shared cachelines
      [AVR32] ext int fixes
      [AVR32] fix serial port setup on ATSTK1000
      [AVR32] /proc/interrupts display
      Remove a couple final references to obsolete verify_area().

commit 62045305c20a194127ae87ccf963cfe6ffde7c4e
Author: Nick Piggin <npiggin@suse.de>
Date:   Fri Feb 9 05:28:19 2007 +0100

    [PATCH] mm: remove find_trylock_page
    
    Remove find_trylock_page as per the removal schedule.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    [ Let's see if anybody screams ]
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f049274b012fd3b50113f194bfbbcbc3143d0da3
Merge: b37df85... 1539b98...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 08:01:37 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (79 commits)
      [IPX]: Fix NULL pointer dereference on ipx unload
      [ATM]: atmarp.h needs to always include linux/types.h
      [NET]: Fix net/socket.c warnings.
      [NET]: cleanup sock_from_file()
      [NET]: change layout of ehash table
      [S390]: Add AF_IUCV socket support
      [S390]: Adapt special message interface to new IUCV API
      [S390]: Adapt netiucv driver to new IUCV API
      [S390]: Adapt vmlogrdr driver to new IUCV API
      [S390]: Adapt monreader driver to new IUCV API
      [S390]: Rewrite of the IUCV base code, part 2
      [S390]: Rewrite of the IUCV base code, part 1
      [X.25]: Adds /proc/net/x25/forward to view active forwarded calls.
      [X.25]: Adds /proc/sys/net/x25/x25_forward to control forwarding.
      [X.25]: Add call forwarding
      [XFRM]: xfrm_migrate() needs exporting to modules.
      [PFKEYV2]: CONFIG_NET_KEY_MIGRATE option
      [PFKEYV2]: Extension for dynamic update of endpoint address(es)
      [XFRM]: CONFIG_XFRM_MIGRATE option
      [XFRM]: User interface for handling XFRM_MSG_MIGRATE
      ...

commit b37df85960a34dd96d0a4695c650f7972ef56c30
Merge: 5986a2e... 2cb4abd...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Fri Feb 9 08:00:55 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      MAINTAINERS: update DMFE and wireless drivers mailing list
      ucc_geth: Add support to local-mac-address property
      ucc_geth: Remove obsolete workaround of link speed change
      cxgb3: sysfs attributes in -mm tree
      Add Attansic L1 ethernet driver.

commit 862a7284980d809a583e9a34c774fab84e0a46f8
Author: Rojhalat Ibrahim <imr@rtschenk.de>
Date:   Fri Feb 9 15:10:38 2007 +0100

    [PPC] Fix compile error for e500 core based processors
    
    We get the following compiler error:
    
      CC      arch/ppc/kernel/ppc_ksyms.o
    arch/ppc/kernel/ppc_ksyms.c:275: error: '__mtdcr' undeclared here (not in a function)
    arch/ppc/kernel/ppc_ksyms.c:275: warning: type defaults to 'int' in declaration of '__mtdcr'
    arch/ppc/kernel/ppc_ksyms.c:276: error: '__mfdcr' undeclared here (not in a function)
    arch/ppc/kernel/ppc_ksyms.c:276: warning: type defaults to 'int' in declaration of '__mfdcr'
    make[1]: *** [arch/ppc/kernel/ppc_ksyms.o] Error 1
    
    This is due to the EXPORT_SYMBOL for __mtdcr/__mfdcr not having the proper CONFIG protection
    
    Signed-off-by: Rojhalat Ibrahim <imr@rtschenk.de>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit a7a6ace1406f95c3edb8365788f85984377f3832
Author: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
Date:   Wed Jan 31 11:38:53 2007 +0200

    [JFFS2] Use MTD_OOB_AUTO to automatically place cleanmarker on NAND
    
    Nowadays MTD supports an MTD_OOB_AUTO option which allows users
    to access free bytes in NAND's OOB as a contiguous buffer, although
    it may be highly discontinuous.
    
    This patch teaches JFFS2 to use this nice feature instead of the
    old MTD_OOB_PLACE option. This for example caused problems with
    OneNAND. Now JFFS2 does not care how are the free bytes situated.
    
    This may change position of the clean marker on some flashes,
    but this is not a problem. JFFS2 will just re-erase the empty
    eraseblocks and write the new (correct) clean marker.
    
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 27630bec9478a2dd387c68b5e435ed3fdd3a513e
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Feb 9 09:30:45 2007 -0600

    [POWERPC] 85xx: Marked functions static
    
    Marked a number of functions in 85xx board code as static.  Also, some minor
    whitespace cleanup
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 8dabba5d1a8f1893bc3db9bf66007de2020c8b62
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Feb 9 09:30:05 2007 -0600

    [POWERPC] Fix is_power_of_4(x) compile error
    
    When building an 85xx kernel we get:
    
      CC      arch/powerpc/mm/pgtable_32.o
    arch/powerpc/mm/pgtable_32.c: In function 'io_block_mapping':
    arch/powerpc/mm/pgtable_32.c:330: error: expected identifier before '(' token
    arch/powerpc/mm/pgtable_32.c:330: error: expected statement before ')' token
    
    The is_power_of_2(x) fixup patch left an extra ')' on the is_power_of_4 macro.
    There is a similiar issue on the arch/ppc side.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 73a4421c5a0aa77b996891e7616b396c360b3ed8
Author: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
Date:   Wed Jan 31 11:43:13 2007 +0200

    [MTD] Clarify OOB-operation interface comments
    
    Add more comment to OOB I/O interface. Read/write are not
    symmetric which is confusing and should be documented.
    
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 64f60710568db5cec1a76c1d1e261b239f9ef809
Author: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
Date:   Tue Jan 30 10:50:43 2007 +0200

    [MTD] remove unused ecctype,eccsize fields from struct mtd_info
    
    Remove unused and broken mtd->ecctype and mtd->eccsize fields
    from struct mtd_info. Do not remove them from userspace API
    data structures (don't want to breake userspace) but mark them
    as obsolete by a comment. Any userspace program which uses them
    should be half-broken anyway, so this is more about saving
    data structure size.
    
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d416085572eb6a44fd2cf29fd7aed83ffc95fd88
Author: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
Date:   Tue Jan 30 10:45:55 2007 +0200

    [MTD] [NOR] Intel: remove ugly PROGREGION macros
    
    Remove ugly and weird MTD_PROGREGION_CTRLMODE_VALID() and
    MTD_PROGREGION_CTRLMODE_INVALID() macros. There is only one
    user of them and they are used locally just for printing.
    
    Anyway, this patch is a preparation for removing mtd->ecctype
    and mtd->eccsize, but these macros use them. Fix this.
    
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 992c9d24c417afce9792da18f8e664c6b9802c5c
Author: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
Date:   Mon Jan 29 12:05:03 2007 +0200

    [MTD] [NOR] STAA: use writesize instead off eccsize to represent ECC block
    
    The cfi_staa_write_buffers() uses mtd->eccsize but means mtd->writesize.
    BTW, mtd-eccsize is broken and is not initialized, which means the code
    fixed by this patch is broken/unused anyway.
    
    Signed-off-by: Artem Bityutskiy <Artem.Bityutskiy@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c2902c8ae06762d941fab64198467f78cab6f8cd
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Feb 9 16:25:48 2007 +0100

    [PATCH] Fix breakage with CONFIG_SYSFS_DEPRECATED
    
    The fix for sysfs breakage with CONFIG_SYSFS_DEPRECATED was flown
    away by the conflicted merge of the ALSA git tree.  The patch below
    fixes it again.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 480b9dfb1fbeb783d4c0061df7868c39af91afec
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Wed Feb 7 13:55:19 2007 +0200

    [MTD] OneNAND: Invalidate bufferRAM after erase
    
    OneNAND has internal bufferRAMs.  The driver keeps track of
    what is in the bufferRAM to save having to load from the
    NAND core.  After an erase operation, the driver must
    mark bufferRAM invalid if it refers to the erased block.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 678c857f3cffb076c36ce55dfa9fb570712cec12
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Fri Feb 2 19:14:41 2007 +0100

    [MTD] Don't oops when the RedBoot partition table is empty
    
    This fixes a regression with the RedBoot parsing code introduced by
    commit 0b47d654089c5ce3f2ea26a4485db9bcead1e515
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d24030f0f71390b1a01796d664445352bd403269
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Feb 2 15:29:19 2007 +0100

    [MTD] [NAND] Fix an off-by-one in a BUG_ON in CAF ECC correction.
    
    err_pos_lut[4096] of an array with 4096 elements is a bug.
    
    Spotted by the Coverity checker.
    
    While I was at it, I also converted it to ARRAY_SIZE().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0373615579c7359dfd0bc66139c2e7bf67793480
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Wed Jan 31 17:58:29 2007 +0200

    [MTD] [NAND] Correctly validate out-of-band offset and length
    
    Add checks to ensure that out-of-band reads and writes are
    not attempted with an invalid offset or length.  Specifically,
    the offset must be less than the size of oob for a page
    and the length must not go beyond the size of the device.
    Additionally the checks must adjust for auto-placement
    (MTD_OOB_AUTO) of oob data.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cfa72397cf3a15f2841447440fd53980b3ecd624
Author: Dmitry Adamushko <dmitry.adamushko@gmail.com>
Date:   Fri Jan 19 01:20:30 2007 +0100

    JFFS2: memory leak in jffs2_do_mount_fs()
    
    If  jffs2_sum_init()  fails,  c->blocks is not freed neither in
    jffs2_do_mount_fs() nor in jffs2_do_fill_super().
    
    Signed-off-by: Dmitry Adamushko <dmitry.adamushko@gmail.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0d36da3b409536a24266c5f0972f2e1cfae1afd4
Author: Stefan Roese <ml@stefan-roese.de>
Date:   Fri Jan 19 08:40:04 2007 +0100

    [MTD] physmap: Add support for 64 bit resources
    
    This patch adds support for 64 bit resources enabled via the
    CONFIG_RESOURCES_64BIT option. Now a 64 bit can be passed to the
    physmap driver.
    
    Signed-off-by: Stefan Roese <sr@denx.de>
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ad7d314480d357db0466bef843cdc1abd9441d4f
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 9 15:30:29 2007 +0100

    [MTD] Don't include linux/mtd/map.h from linux/mtd/physmap.h
    
    Replace the inclusion of linux/mtd/map.h with a forward-declaration
    of struct map_info. This allows linux/mtd/physmap.h to be included by
    e.g. board code even if the MTD subsystem is disabled.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2a5bd596723e13b3f25b9a7f46e9541577bd42c7
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Feb 9 14:39:10 2007 +0000

    [MTD] Fix default timeouts for Intel NOR flash
    
    In commit c172471b78255a5cf6d05383d9ebbf0c6683167a Nico switched to using
    common code for polling for command completion. Unfortunately he also used
    a common default timeout for both write and erase commands, despite the
    fact that erases can take a _whole_ lot longer. Use a more sensible
    default for erase timeout.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4ffabefb456f140eb47c7294e9158a9027a64ccc
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 9 15:23:46 2007 +0100

    [AVR32] Add missing #include <linux/module.h>
    
    arch/avr32/kernel/cpu.c needs THIS_MODULE, so it must include
    linux/module.h.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit a3b0277d1c1d754eeb9a8f994339edbd914cacda
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 9 12:01:02 2007 +0100

    [AVR32] ssize_t should be long, not int
    
    Since size_t is defined as unsigned long, ssize_t ought to be long
    and not int. It could have been the other way around, but gcc defines
    size_t as unsigned long, so this is correct.
    
    This fixes a couple of printk format warnings.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 9d4ad801372c688c6ae7e080f6fc6f802f53cbe3
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Feb 9 11:43:09 2007 +0100

    [AVR32] Remove last remains of libgcc
    
    Two libgcc headers were left around even though all the actual code
    borrowed from libgcc is gone. Delete them.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 3d60ee1b04320d0695e071828dbadf3564d4568a
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Wed Jan 10 20:20:02 2007 +0100

    [AVR32] SPI platform code update
    
    Move stuff in spi.c into ATSTK1002 board code and update SPI
    platform device definitions according to the new GPIO API.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 7f9f4678637f9ee1a999cc0870c4668f32e1a7eb
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Tue Jan 30 11:16:16 2007 +0100

    [AVR32] Add PIOE device and reserve SDRAM pins
    
    The PIOE device was left out before because it muxes SDRAM pins (and
    is therefore a bit dangerous to mess with) and because no existing
    drivers had any use for it.
    
    It is needed for CompactFlash, however, and now that we have a way
    to protect the SDRAM pins, it can be safely added.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit e7f70b8cc69b1bcc56ed8d70f8e3671ec3956374
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Tue Jan 30 11:01:23 2007 +0100

    [AVR32] Introduce at32_reserve_pin()
    
    at32_reserve_pin() can be used for reserving portmux pins without
    altering their configuration. Useful for e.g. SDRAM pins where we
    really don't want to change the bootloader-provided configuration.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit dde251033f3e54619317269a908ce40e6f3a8d04
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Mon Jan 29 17:59:40 2007 +0100

    [AVR32] Don't reset PIO state at bootup
    
    Leave the PIO lines as the bootloader left them. This allows us to
    use PIOE without disturbing the SDRAM muxing.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 6a4e5227a33f60f918b30cf2001fb0bb259d9396
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Mon Feb 5 16:57:13 2007 +0100

    [AVR32] GPIO API implementation
    
    Arch-neutral GPIO calls for AVR32. GPIO IRQ support written by
    David Brownell.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 10b50b7dd2716b944299d45452d0875dbeb5f0c2
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 04:41:27 2007 +0200

    [AVR32] Use ARRAY_SIZE macro when appropriate
    
    A patch to use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 6eb484fe92e2f67f888dc87e97bfd938c0f7404e
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Thu Feb 1 16:26:03 2007 +0100

    [AVR32] Implement dma_mapping_error()
    
    dma_map_single() never fails, so dma_mapping_error() simply returns 0.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 212868d387d0033b7e0029326a900126fe5e3d52
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Sun Jan 28 12:56:42 2007 -0800

    [AVR32] Fix incorrect invalidation of shared cachelines
    
    Fix bug in dma_map_single(..., DMA_FROM_DEVICE) caused by incorrect
    invalidation of shared cachelines at the beginning and/or end of
    the specified buffer.  Those shared cachelines need to be flushed,
    since they may hold valid data (which must not be discarded).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 58febc0b1374de7506277d3aa9e9cddaea62ba65
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 23 20:21:36 2007 -0800

    [AVR32] ext int fixes
    
    Bugfixes for external irq handler set_irq_type():
    
     - If set_irq_type() can't set the type, don't change anything!
    
     - It's not OK to change the flow handler as part of set_irq_type(),
       among other issues that violates spinlock rules.  Instead, we can
       call the relevant handler when we demux the external interrupts.
    
     - The external irq demux has no need to grab the spinlock.  And in
       fact grabbing it that way was wrong, since that code might be
       pre-empted by an irq at a different priority level, and that code
       might then have tried to grab that spinlock...
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit a3d912c8fa709c4078ceaabf4d71001190e19325
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 23 20:14:02 2007 -0800

    [AVR32] fix serial port setup on ATSTK1000
    
    Fixes to USART setup on the stk-1000 ... don't configure USART 2, since
    its TXD/RXD are used for INT-A and INT-B buttons; and configure USART 0
    (for IRDA, and with corrected IRQ) iff SW2 has a non-default setting.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 914ab06279f15d3f368f4fae74db58fdcf03a2ed
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 23 20:12:15 2007 -0800

    [AVR32] /proc/interrupts display
    
    The /proc/interrupts file should also display the irq_chip associated
    with each irq ... e.g. INTC, EIM, GPIO.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 31321bc946527f2e4c50b6b08459d1c0d81fa978
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sun Jan 7 18:43:41 2007 -0500

    Remove a couple final references to obsolete verify_area().
    
      Remove a couple final references to the obsolete verify_area() call,
    which was long ago replaced by access_ok().
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>

commit 48ec15dca87805cf771855612d647bfe1a9f617f
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Feb 9 14:50:18 2007 +0100

    [ALSA] version 1.0.14rc2
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c1f1625860847b57a0450a28d112423c2af675ff
Merge: 552a827... cde36b3...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Feb 9 12:36:22 2007 +0000

    Merge branch 'master' of git://git.infradead.org/~kmpark/onenand-mtd-2.6

commit 552a8278d0becd671274af56a11ee601e585387a
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Mon Feb 5 16:28:59 2007 -0800

    [MTD] [NAND] Add kernel-doc for cellinfo field of struct nand_chip
    
    Fixes kernel-doc warning in mtd/nand.h.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 862c93b991e7132bafb078ec7ab5a0dee9e27ae6
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jan 25 15:15:17 2007 -0800

    [MTD] CK804XROM must depend on PCI
    
    CONFIG_MTD_CK804XROM=y, CONFIG_PCI=n results in the following compile
    error:
    
      CC      drivers/mtd/maps/ck804xrom.o
    ck804xrom.c: In function 'ck804xrom_init_one':
    ck804xrom.c:114: error: implicit declaration of function 'pci_dev_get'
    ck804xrom.c:114: warning: assignment makes pointer from integer without a cast
    make[4]: *** [drivers/mtd/maps/ck804xrom.o] Error 1
    
    Considering what hardware this driver is driving, a dependency on PCI
    also seems logical.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Ryan Jackson <rjackson@lnxi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 10b98527c34dca3f461256f5fcfff9b3790066e0
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Thu Feb 8 17:06:09 2007 +0100

    [ALSA] ASoC documentation updates
    
    This patch updates the documentation for ASoC to reflect the recent
    changes in API between 0.12.x and 0.13.x
    Changes:-
     o Removed all reference to old API's.
     o Removed references and examples of automatic DAI config and matching.
     o Fixed 80 char line length on some files.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c6d6eeeacc2ed0b736f20692ca021324f3b203b3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 8 14:50:31 2007 +0100

    [ALSA] ca0106 - Add missing sysfs device assignment
    
    Added the missing device assignment before creating sysfs tree.
    This caused the insufficient device permissions.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 547ac2ae3890b8e17bcfea4ba8840a10f3496da4
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Feb 8 14:25:39 2007 +0100

    [ALSA] aoa i2sbus: Stop Apple i2s DMA gracefully
    
    This fixes the problem of getting extra bytes inserted at the
    beginning of a recording when using the Apple i2s interface and DBDMA
    controller.  It turns out that we can't just abort the DMA; we have to
    let it stop at the end of a command, and then wait for the S7 bit to
    be set before turning off the DBDMA controller.  Doing that for
    playback doesn't seem to be necessary, but doesn't hurt either.
    We use the technique used by the Darwin driver: make each transfer
    command branch to a stop command if the S0 status bit is set.  Thus we
    can ask the DMA controller to stop at the end of the current command
    by setting S0.
    The interrupt routine now looks at and clears the status word of the
    DBDMA command ring.  This is necessary so it can know when the DBDMA
    controller has seen that S0 is set, and so when it should look for the
    DBDMA controller being stopped and S7 being set.  This also ended up
    simplifying the calculation in i2sbus_pcm_pointer.
    Tested on a 15 inch albook.
    [Addition by Johannes]
    I modified this patch and added the suspend/resume bits to it to get my
    powermac into a decent state when playing sound across suspend to disk
    that has a different bitrate from what the firmware programs the
    hardware to.
    I also added the SNDRV_PCM_INFO_JOINT_DUPLEX flag because it seemed the
    right thing to do and I was looking at the info stuff.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2cf9f0fc69358e15e78f936c220cfe8aa208111d
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Wed Feb 7 16:04:25 2007 +0100

    [ALSA] hda-codec - Add support for Fujitsu PI1556 Realtek ALC880
    
    This patch adds support for the Fujitsu PI1556 laptop.
    Issue:  Volume knob on system maxes out lower than alsamixer (0x35 vs 0x40).
    Everything else works, and audio quality is good at 0x35.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 288e5c35f96fefb6c5e0dc8838834c94cff616f6
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Feb 7 14:07:45 2007 +0100

    [ALSA] aoa: remove suspend/resume printks
    
    This just removes two useless printks.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6116ea0741abf8f1ef9d93642d985f91c58ff6bf
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Feb 7 14:07:08 2007 +0100

    [ALSA] Fix possible deadlocks in sequencer at removal of ports
    
    Fix possible rwsem deadlocks in sequencer code at removal of
    sequencer ports.  The list_lock of port group can be double
    locked.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2594d960793f13582c0730a99c5396cded7cf9d9
Author: Rolf Stefan Wilke <stefan.wilke@uni-ulm.de>
Date:   Tue Feb 6 19:18:14 2007 +0100

    [ALSA] emu10k1 - Fix STAC9758 front channel
    
    For some time now, some users of STAC9758 (emu10k1) would have no sound on
    their front channels. This can be fixed (at least for me) by unmuting  head
    phone volume and setting it to 0dB before removing the 'Front Playback'
    control. For details, cf.
    https://bugtrack.alsa-project.org/alsa-bug/view.php?id=2308
    Find the appropriate patch attached.
    Credits to: Raymond
    
    Signed-off-by: Rolf Stefan Wilke <stefan.wilke@uni-ulm.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 88cb42901f1572c95f5933f363cfebd5044c716a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Feb 5 14:56:20 2007 +0100

    [ALSA] soc - Clean up with kmemdup()
    
    Clean up by replacing with kmemdup().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1ab774e049085da6facfaf3b24d54158c3f0f5b3
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Feb 5 13:07:04 2007 +0100

    [ALSA] snd-ak4114: Fix two array overflows
    
    Fix the handling of the TXCSB registers cache. There was one array
    overflow in reg_write() and one in snd_ak4114_reg_write(). Thanks
    to David Binderman for reporting the latter.
    The second overflow probably doesn't matter much, given that the
    function snd_ak4114_reg_write() appears to be never called. I wonder
    why it exists and why it is exported.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 66e27788a33636cf0d9bf22eb9d56a7f4ffa3a84
Author: Martin Langer <martin-langer@gmx.de>
Date:   Mon Feb 5 13:02:35 2007 +0100

    [ALSA] ac97_bus power management
    
    This patch adds CONFIG_PM to the ac97_bus driver.
    
    Signed-off-by: Martin Langer <martin-langer@gmx.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d0b0fac14edf81dc62615cd757e7c73d2059152c
Author: Bjoern Fay <mail@bfay.de>
Date:   Mon Feb 5 12:27:21 2007 +0100

    [ALSA] usbaudio - Add support for Edirol UA-101
    
    Added support for the Edirol UA-101 (only in high-speed mode) by taking
    the quirks for the UA-1000 and change them accordingly. Changes were
    made in 'usbaudio.c', 'usbaudio.h', and 'usbquirks.h'
    MIDI and recording seem to work perfectly (with JACK), but playback
    gives some few glitches. I think that's the mentioned
    synchronizing-problem in the UA-1000 quirk ('FIXME: playback must be
    synchronized to capture'), so I didn't change that.
    ToDo: Adding Mixer-Support for the built-in
    control-panel/patch-bay/router.
    
    Signed-off-by: Bjoern Fay <mail@bfay.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f32610edab47f36946d23b883aeae91e15986121
Author: Jakub Schmidtke <sjakub@gmail.com>
Date:   Fri Feb 2 18:17:27 2007 +0100

    [ALSA] hda-codec - Add ALC861VD/ALC660VD support
    
    o Added ALC861VD support to patch_realtek.c under hda-intel
    o Added ALC660VD as a model of 861VD
    o Added pci quirks for Asus G1 as well as for two devices found in Realtek's
    driver to point at ALC660VD model (3stack-660)
    o Added pci quirk for Lenovo 3000 C200 - although untested, it should work
    with ALC861VD 3stack model
    o Changed preset id = 0x10ec0660 to point at new patch_alc861vd instead of
    patch_861
    o Organised the list of presets
    
    Signed-off-by: Jakub Schmidtke <sjakub@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 73f40dc1e147b41eb74bc92ff62bb65cb3260eff
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:23:42 2007 +0100

    [ALSA] soc - ASoC 0.13 Sharp poodle machine
    
    This patch updates the Sharp poodle machine driver to the new API in
    ASoC 0.13.
    Changes:-
    o  Manually configure DAI hardware format.
    o Removed config_sysclk() function. No longer needed as clocking is now
    configured manually.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cb4c048b9306555ccbdb97eaf7922624664b0eb1
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:23:11 2007 +0100

    [ALSA] soc - ASoC 0.13 Sharp tosa machine
    
    This patch updates the Sharp tosa machine driver to the new API in ASoC
    0.13.
    Changes:-
    o  Update machine operations to new API.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 97952f601e939278df1194bac56b9755338ee7c1
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:22:46 2007 +0100

    [ALSA] soc - ASoC 0.13 spitz machine
    
    This patch updates the Sharp spitz machine driver to the new API in ASoC
    0.13.
    Changes:-
    o  Manually configure DAI hardware format.
    o Removed config_sysclk() function. No longer needed as clocking is now
    configured manually.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d928b25a89c3154fe6d0e62a83f51c5b621aa099
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:22:20 2007 +0100

    [ALSA] soc - ASoC Sharp corgi machine
    
    This patch updates the Sharp corgi machine driver to the new API in ASoC
    0.13.
    Changes:-
    o  Manually configure DAI hardware format.
    o Removed config_sysclk() function. No longer needed as clocking is now
    configured manually.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a8f5d0a5d02cda0183c6e68d6a66d4c6641149a9
Author: Andrew Johnson <ajohnson@intrinsyc.com>
Date:   Fri Feb 2 17:21:50 2007 +0100

    [ALSA] soc - ASoC 0.13 pxa2xx DMA
    
    This patch updates the pxa2xx I2S driver to the new API in ASoC 0.13.
    Changes:-
    o Added check in hw_params to detect buffer less pcms (i.e. BT <-->
    codec).
    o Updated structures to new API
    o Removed DAI's and ac97 ops from PCM header.
    o Integer hardware constraint added for periods.
    
    Signed-off-by: Andrew Johnson <ajohnson@intrinsyc.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 596ce32b74dccf53ef59cc9ba2e95a2a34ba921c
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:21:16 2007 +0100

    [ALSA] soc - ASoC 0.13 pxa2xx AC97 driver
    
    This patch updates the pxa2xx AC97 driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    o Added DAI operations for codec and CPU interfaces.
    o Added pxa2xx-ac97.h header
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit eaff2ae702f937020bfde96eea552caae3815784
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Fri Feb 2 17:20:40 2007 +0100

    [ALSA] soc - ASoC 0.13 pxa2xx i2s driver
    
    This patch updates the pxa2xx I2S driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    o Added DAI operations for codec and CPU interfaces.
    o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
    o Added pxa2xx-i2s.h header
    
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c8044274c7f1e269975b2bd55d057ceb7708e929
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Feb 2 17:19:58 2007 +0100

    [ALSA] soc - ASoC 0.13 AT91xxxx Eti_B1 board support
    
    This patch updates the EtI B1 machine driver to the new API in ASoC
    0.13.
    Changes:-
    o  Manually configure DAI hardware format.
    o Removed config_sysclk() function. No longer needed as clocking is now
    configured manually.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6297027629a9349301e08442b67deb9783a5e984
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Feb 2 17:19:24 2007 +0100

    [ALSA] soc - ASoC 0.13 AT91xxxx DMA
    
    This patch updates the AT91xxxx audio DMA driver to the new API in ASoC
    0.13.
    Changes:-
    o Updated to use new 0.13 data structures.
    o Suspend and Resume now conditionally compiled.
    o #include guard around at91-pcm.h header.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 171eb8f81d7b0706c1085d272e4955251ed9f05f
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Feb 2 17:18:38 2007 +0100

    [ALSA] soc - ASoC 0.13 AT91xxxx I2S
    
    This patch updates the AT91xxxx I2S driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    o Added DAI operations for codec and CPU interfaces.
    o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d3d35adc79aa2e48e8177a9506e9bcb5eebba406
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Feb 2 17:17:39 2007 +0100

    [ALSA] soc - ASoC 0.13 AT91xxxx slave patch
    
    This patch adds support for I2S slave mode for the ETI_B1 machine from
    Endrelia.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5a8ec343c5ba1e78ba23bebd9ad4b23f39c50828
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:16:41 2007 +0100

    [ALSA] soc - ASoC 0.13 generic AC97 codec
    
    This patch updates the AC97 codec driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cbe83b1795feea33803dc89fce18b2b98abbcc9b
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:16:02 2007 +0100

    [ALSA] soc - ASoC 0.13 WM9712 codec driver
    
    This patch updates the WM9712 codec driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    o Added DAI operations for codec and CPU interfaces.
    o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4422b606bc04eab01dd5cb6f8e6dd0608d65bb11
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:15:33 2007 +0100

    [ALSA] soc - ASoC 0.13 WM8750 codec driver
    
    This patch updates the WM8750 codec driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    o Added DAI operations for codec and CPU interfaces.
    o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b36d61d45654104c04ff71055ef09c696fea5f89
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Feb 2 17:14:56 2007 +0100

    [ALSA] soc - ASoC 0.13 WM8731 codec
    
    This patch updates the WM8731 codec driver to the new API in ASoC 0.13.
    Changes:-
    o Removed DAI capabilities matching code in favour of manual matching in
    the machine drivers.
    o Added DAI operations for codec and CPU interfaces.
    o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 11da21a79048472a14b201120c0c50b10060220b
Author: Seth Forshee <seth.forshee@gmail.com>
Date:   Fri Feb 2 17:14:19 2007 +0100

    [ALSA] soc - 0.13 ASoC DAPM bug fix for unnamed streams
    
    This patch fixes a bug whereby an unnamed stream would cause a NULL
    pointer ref in snd_soc_dapm_stream_event().
    
    Signed-off-by: Seth Forshee <seth.forshee@gmail.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cb666e5bd865cc991c0048d6e81581019a141820
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:13:49 2007 +0100

    [ALSA] soc - ASoC 0.13 core changes
    
    This patch updates the ASoC core to the new DAI matching and clocking
    API in version 0.13
    Changes:-
     o Removed DAI capabilities matching code in favour of manual matching
    in the machine drivers.
     o Added DAI operations for codec and CPU interfaces.
     o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
     o Added machine driver prepare callback.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1c433fbda4896a6455d97b66a4f2646cbdd52a8c
Author: Graeme Gregory <gg@opensource.wolfsonmicro.com>
Date:   Fri Feb 2 17:13:05 2007 +0100

    [ALSA] soc - 0.13 ASoC headers
    
    This patch updates the API's to include the new DAI configuration and
    clocking architecture.
    Changes:-
     o Removed DAI automatic matching and capabilities structure (struct
    snd_soc_dai_mode) and macros.
     o Added DAI operations for codec and CPU interfaces.
     o Removed config_sysclk() function and struct snd_soc_clock_info. No
    longer needed as clocking is now configured manually in the machine
    drivers. Also removed other clocking data from structures.
     o Updated version to 0.13
     o Added shift to SOC_SINGLE_EXT kcontrol macro.
    
    Signed-off-by: Graeme Gregory <gg@opensource.wolfsonmicro.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3372a153c230bd0b28d470118d5a4c5840f8f966
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 1 15:46:50 2007 +0100

    [ALSA] hda-intel - Add black/whitelist for position_fix option
    
    Some devices are known to require position_fix=1 or 2 to make the
    driver working correctly.  Otherwise the sound gets weird effects,
    such as stutters.
    Now a black/whitelist is introduced to indicate the position_fix
    value explicitly for such misbehaving hardwares.  As a first example,
    Dell D820 is listed there.  More will come later likely...
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0981a260a1fe4a3f22cc70ef01ce38a73f548745
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 1 14:53:49 2007 +0100

    [ALSA] Fix possible invalid memory access in PCM core
    
    snd_internval_list() may access invalid memory in the case count = 0
    is given.  It shouldn't be passed, but it'd better to make the code
    a bit more robust.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bc7320c5c8ddeb3b50c6a24013dab9ba74bce578
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Thu Feb 1 12:26:07 2007 +0100

    [ALSA] ASoC very minor coding style fix for snd_soc_new_pcms()
    
    This very minor patch fixes the snd_soc_new_pcms() function to comply
    with the kernel coding style.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8fec560d9beb3957bf45ac93b1c0c616abd77a07
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Feb 1 11:50:56 2007 +0100

    [ALSA] usbaudio - Fix Oops with unconventional sample rates
    
    The patch fixes the memory corruption by the support of unconventional
    sample rates.  Also, it avoids the too restrictive constraints if
    any of usb descriptions contain continuous rates.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3b6baa5a0b0a2877c18a76fa1f508cacdbc08edf
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jan 31 14:34:38 2007 +0100

    [ALSA] Remove delayed work properly at free and suspend
    
    Remove delayed work properly at free and suspend in ac97 codec and
    ak4114 drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 965ac42ce919db225ee64678f0be02f2fdf5b5e4
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Wed Jan 31 14:14:57 2007 +0100

    [ALSA] ASoC force running of delayed PM work at suspend() and remove()
    
    This patch fixes a bug whereby the power management delayed work would
    never be run at driver suspend() or module remove(). Delayed work would
    be created (after audio had finished) with a long delay (~5 secs) and
    was sometimes never queued before flush_scheduled_work() was being
    called at suspend or module remove. This caused the delayed work to
    queued after the module had been removed or after resume.
    This patch forces any delayed work to complete by cancelling it (timer
    cannot fire and add it to queue later), scheduling it for now and
    waiting on it's completion.
    This is something I probably would like to add to workqueue.c in the
    next merge window, however it's here atm because it can oops.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit beb60119bcc9cbd80bc5b4f7feec419e067d3e46
Author: Gregor Jasny <gjasny@web.de>
Date:   Wed Jan 31 12:27:39 2007 +0100

    [ALSA] usbaudio - Fix Oops with broken usb descriptors
    
    This is a patch for ALSA Bug #2724. Some webcams provide bogus
    settings with no valid rates. With this patch those are skipped.
    
    Signed-off-by: Gregor Jasny <gjasny@web.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4147dab62d1b4387c304888488e1f67a83ad53c8
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jan 31 10:35:19 2007 +0100

    [ALSA] hda-codec - Add model for Uniwill X40AIx
    
    Added model=uniwill-m31 for Uniwill X40AIx with ALC861 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8fa58af7db56077d6a042fd7b9dd4c9515e1c37b
Author: Karsten Wiese <fzu@wemgehoertderstaat.de>
Date:   Wed Jan 31 10:05:30 2007 +0100

    [ALSA] snd_hwdep_release() racefix
    
    snd_card_file_remove() can free the snd_card.
    Touch hw->* only before calling snd_card_file_remove().
    Unrelated: Allow hwdep devices not to have own ops.release();
    
    Signed-off-by: Karsten Wiese <fzu@wemgehoertderstaat.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 298a2c753a5ae2f0e230a57e94843d248f0033e2
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Wed Jan 31 10:02:56 2007 +0100

    [ALSA] ASoC WM8731 support for 32k @ 12MHz sysclk
    
    This patch adds support for 32k audio on the WM8731 when running from a
    12MHz system clock.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e35115a58856ced315cb8f75df56e9b9a816e70a
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Wed Jan 31 10:02:23 2007 +0100

    [ALSA] ASoC codec error reporting
    
    This patch improves the codec probe() error reporting by printing error
    messages when the card or pcms fail to register.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 877b866d86786ac69d3d939905999fe7fe1e23fd
Author: Cory T. Tusar <ctusar@videon-central.com>
Date:   Tue Jan 30 17:30:55 2007 +0100

    [ALSA] hda-codec - Dell Latitude D820 + D/Port
    
    Support port replicator headphone output on Dell Latitude D820 + D/Port.
    
    Signed-off-by: Cory T. Tusar <ctusar@videon-central.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 18b9b3d99677a758e77682d6849f58fc07e30bef
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Tue Jan 30 17:18:45 2007 +0100

    [ALSA] ASoC codec probe failure bug
    
    This patch fixes a bug whereby some resources were not being freed when
    codec probe() failed.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0cb29ea0d449d7c0ecc9649a08ab63476389701d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jan 29 15:33:49 2007 +0100

    [ALSA] Add even more 'const' to everything related to TLV
    
    Mark TLV data as 'const'
    Signed-of-by: Philipp Matthias Hahn <pmhahn@pmhahn.de>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 517400cbc75d0604bc34c1866dff7e55ca1be2b4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jan 29 15:27:56 2007 +0100

    [ALSA] Add some more 'const', but needs changes in i2c/other/ak4*
    
    Make data passed to ak4xxx_create 'const'.
    Signed-of-by: Philipp Matthias Hahn <pmhahn@pmhahn.de>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 32b47da03541f97e40f1af5488ef88250459f388
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jan 29 15:26:36 2007 +0100

    [ALSA] Add 'const' to files in pci/ice1712/
    
    Mark a lot of data as 'const'
    Signed-of-by: Philipp Matthias Hahn <pmhahn@pmhahn.de>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 189bc171434e84797f586130fca8eb4df3746e3f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jan 29 15:25:40 2007 +0100

    [ALSA] ice1712 - Reorganize existing eeprom data
    
    Reorganize EEPROM data (in C99 style).
    Signed-of-by: Philipp Matthias Hahn <pmhahn@pmhahn.de>
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bcb4d788f573805c74ac4f39a622b30955b2f916
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Jan 29 14:46:18 2007 +0100

    [ALSA] Remove useless reference to obsolete KERNELD
    
    Remove the final useless reference to the obsolete KERNELD feature.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 377a4f7ea35d7d6cc05faea7030522d93435dc11
Author: Peter Eriksen <s022018@student.dtu.dk>
Date:   Mon Jan 29 14:45:53 2007 +0100

    [ALSA] sound/isa/gus/gus_main.c: Use abs() instead of x < 0 ? -x : x.
    
    
    Signed-off-by: Peter Eriksen <s022018@student.dtu.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cd7509a43c3047a6339484e5009c2db7ee4c7a51
Author: Kailang Yang <kailang@realtek.com.tw>
Date:   Fri Jan 26 18:33:17 2007 +0100

    [ALSA] hda-codec - Add HP BPC-D7000 support
    
    Add HP BPC-D7000 support.
    
    Signed-off-by: Kailang Yang <kailang@realtek.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 757e119bf52b014b3181eed97b01f87a245b8ff9
Author: Matthias Koenig <mkoenig@suse.de>
Date:   Thu Jan 25 13:15:05 2007 +0100

    [ALSA] Add snd-portman2x4 driver for Midiman Portman 2x4 MIDI device
    
    snd-portman2x4 driver supports Midiman Portman 2x4 parallel port
    MIDI device.
    
    Signed-off-by: Matthias Koenig <mkoenig@suse.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 32360416322ddfcd2db2f7655f606c5b86a29102
Author: Thomas De Schampheleire <thomas.de.schampheleire@gmail.com>
Date:   Wed Jan 24 16:13:35 2007 +0100

    [ALSA] hda-codec - Missing Mic Boost on Realtek ALC882/883
    
    This patch adds Mic Boost controls for Realtek ALC882 and ALC883 chips.
    
    Signed-off-by: Thomas De Schampheleire <thomas.de.schampheleire@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 579c84a9b225d8b9d0f32818b9959ca63b4fb57d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jan 23 19:22:26 2007 +0100

    [ALSA] echo3g_dsp.c shouldn't include #include <linux/irq.h>
    
    Despite being under linux/, linux/irq.h shouldn't be #include'd by arch
    independent code.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5bda9fa1aefbb873f2bd181e63ce0d4231883c46
Author: Nicolas Kaiser <nikai@nikai.net>
Date:   Mon Jan 22 14:54:33 2007 +0100

    [ALSA] Documentation/sound/alsa/DocBook: typos
    
    Some typos in Documentation/sound/alsa/DocBook.
    
    Signed-off-by: Nicolas Kaiser <nikai@nikai.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f7ba7fc6173a9fb6d8a5bc02bf335cc358f21a09
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jan 19 18:34:47 2007 +0100

    [ALSA] emu10k1 - Fix ABI for older ld10k1
    
    Fix ABI for older ld10k1.  When no EMU10K1_PVERSION ioctl is issued,
    the driver accepts ioctls with the old struct size without TLV information.
    Also, changed the struct field to make the conversion easier from the
    old to the new structs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7ed07a740b886930a299d438947ad322272eece1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jan 19 14:51:57 2007 +0100

    [ALSA] hda-intel - Don't try to probe invalid codecs
    
    Fix the max number of codecs detected by HD-intel (and compatible)
    controllers to 3.  Some hardware reports extra bits as if
    connected, and the driver gets confused to probe unexisting codecs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5c33dd70b51be0617a75562aa896d5ccf1840455
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Jan 16 17:49:21 2007 +0100

    [ALSA] cleanup and error reporting for sound/core/init.c
    
    Make the control flow clear with indentation, adds some comments
    and improves error reporting.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ad4d1dea62b6981a8c12df529e955424141d4b7a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jan 16 17:46:35 2007 +0100

    [ALSA] Fix irq handler arguments in documents
    
    Fixed the irq handler arguments in documents (removing pt_regs).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9f428175a5e486b7142d3217c20481e003f3c275
Author: Daniel Jacobowitz <drow@false.org>
Date:   Fri Jan 12 19:11:47 2007 +0100

    [ALSA] ac97 - Fix vt1617a build ops
    
    This patch connects the extra vt1616 controls for the vt1617a, which
    is necessary to control the rear speakers on e.g. a Shuttle SN25P.
    
    Signed-off-by: Daniel Jacobowitz <drow@false.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 687a47bd829e040094cbc103126d5f03d46fd2bb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jan 10 11:25:58 2007 +0100

    [ALSA] Fix a typo in the last patch_realtek.c change
    
    Fixed a typo in the last patch_realtek.c change.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 30e80a279d864385306ed4bf905f00196d1c9656
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Tue Jan 9 09:55:54 2007 +0100

    [ALSA] hda-codec - add ASUS W7J (0x1043, 0x1205) to quirk list - 3stack
    
    See Novell-bug#228201 .
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2a296cb6633a719846eaf30fcec7f392c511537d
Author: Leonard Norrgard <leonard.norrgard@refactor.fi>
Date:   Mon Jan 8 11:28:22 2007 +0100

    [ALSA] sound: hda: detect ALC883 on MSI K9A Platinum motherboards (MS-7280)
    
    Recognize the Realtek ALC883 chip on MSI K9A Platinum motherboards (model
    no.  MS-7280), enabling full sound capabilities.
    Error messages seen before this patch:
    cannot find the slot for index 0 (range 0-0)
    hda-intel: Error creating card!
    HDA Intel: probe of 0000:00:14.2 failed with error -12
    [akpm@osdl.org: updated to match recent ALSA table changes]
    
    Signed-off-by: Leonard Norrgard <leonard.norrgard@refactor.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f36090fe04986dbcd304e1f4d9224be00e57ec25
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Jan 8 11:07:12 2007 +0100

    [ALSA] hda-codec - Add support for Samsung Q1 Ultra
    
    This adds support for the Samsung Q1 Ultra tablet pc.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8e21c34cd4742c508dcc307fdbac9b3ba6899002
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Jan 8 11:04:17 2007 +0100

    [ALSA] hda-codec - Add support for Sigmatel STAC9202/9250/9251 codecs
    
    This patch adds support for Gateway laptops based on the
    Sigmatel STAC9250 codecs, as well as basic support for
    STAC9202/9250/9251 codecs.  Some Gateway systems require
    probe_mask=1 to work.  More work to be done prior to alsa 1.0.14
    final.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c68487151a0dceea07db8632327e3a0ab9e25e1f
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Mon Jan 8 10:59:51 2007 +0100

    [ALSA] sound: aoa of_node_put and kfree cleanup
    
    This patch removes redundant argument checks for of_node_put() and kfree().
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ffc26918ab5674b286a4bc07dac7e011cea83e97
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Mon Jan 8 10:58:47 2007 +0100

    [ALSA] ASoC at91 - Fix NULL pointer dereference in at91_i2s_shutdown
    
    This patch fixes a NULL pointer exception which occurs when a
    substream is opened and immediately closed.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ad5e773750aeae3ad980f94b9f3cecad5af7c53d
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Jan 8 10:57:32 2007 +0100

    [ALSA] hda-codec - Add support for Toshiba M105 to Realtek patch
    
    This patch adds support for the Toshiba M105-S3041 laptop (ALC861).
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 751e61c47d3b4e929c93bac61c8dd6c247854993
Author: Raol Sainchez Siles <rss@barracuda.es>
Date:   Mon Jan 8 10:56:48 2007 +0100

    [ALSA] Solve typos/compilation problems for debug functions in soc-dapm and at91-i2s
    
    soc-dapm
    Removed list_for_each since the loop is list_for_each_entry() and
     not list_for_each(). Thanks to Liam Girdwood and Seth Forshee.
    at91-i2s
    Fixed typo in dai modes definition.
    Fixed struct member name in at91_ssc_info->ssc_state.
    Fixed compilation problem, ssc_state is bundled in at91_ssc_info.
    
    Signed-off-by: Raol Sainchez Siles <rss@barracuda.es>
    Signed-off-by: Seth Forshee <seth.forshee@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0e4ceb7507111c3910a0d7e19b498b1f6081afcb
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Jan 8 10:54:26 2007 +0100

    [ALSA] hda-codec - Change default config for Asus P5GD1
    
    This patch changes the default configuration for the Asus P5GD1
    motherboard from 5stack to asus, as reported by stelek on
    linuxquestions.org
    	http://www.linuxquestions.org/questions/showthread.php?p=2556497#post2556497
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f6cdab5f7ed356e8a259c1f00c7991f56c234643
Author: Clement Guedez <klem.dev@gmail.com>
Date:   Mon Jan 8 10:48:41 2007 +0100

    [ALSA] Add support of the ESI Waveterminal 192M to the ice1724 ALSA driver
    
    This patch adds the support of the ESI Waveterminal 192M soundcard
    to the ice1724 familly ALSA driver.
    It's a semi-professionnal soundcard for home studio : many I/O and
    a quality of sound is good, better than consumer cards, but less
    musical than professional cards.
    It use a Via Envy24ht chipset as ice1724 soundcard, Sigmatel
    stac9640 ADC/DAC for the analog I/O as Prodigy192, and Atmel ak4114
    for S/PDIF as ESI Julia.
    Is working : the 8 analog outputs, the analog inputs 1&2, the mic
    input 1, the coaxial & optical digital outputs.
    
    Signed-off-by: Clement Guedez <klem.dev@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7b9470d88492d8be22d1f5307fe28642db9affe5
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Thu Dec 28 13:56:48 2006 +0100

    [ALSA] hda-codec - Add Asus P5W DH to alc882_cfg_tbl
    
    This patch adds the Asus P5W DH to the ALC882 config table
    as a 6stack-dig system.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 518f6a6173e6009f5d380c638ea97a8897ebea9c
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Thu Dec 28 13:55:41 2006 +0100

    [ALSA] Fix typo and add entry to documentation
    
    This patch adds the macpro and fixes a typo in the ALC882 section of
    ALSA-Configuration.txt.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 88518275e3eefe0582af1918d59325b16dfde154
Author: John Daiker <daikerjohn@gmail.com>
Date:   Thu Dec 28 13:55:05 2006 +0100

    [ALSA] usbaudio.c: remove unneeded casts
    
    Went rummaging through usbaudio.c and found some castings that
    aren't needed as far as I can see.  Part of the KernelJanitors
    TODO list.
    
    Signed-off-by: John Daiker <daikerjohn@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 67e9f4b68c9d1820132c559c0f9b296dafdf631e
Author: Randy Cushman <rcushman_linux@earthlink.net>
Date:   Fri Dec 22 12:44:25 2006 +0100

    [ALSA] ac97 - fix various issues with AD1986/AD1986A support
    
    Previously, ac97_codec.c was coded to support AD1986 and AD1986A
    CODECs using code written for the AD1985 CODEC.  This allowed the
    LINE_OUT and HEADPHONE jacks to function properly, however register
    differences between the CODECs prevented line and microphone inputs
    from functioning.
    Specifically, this patch fixes issues with the following mixer
    controls:  'V_REFOUT', 'Spread Front to Surround and Center/LFE',
    'Exchange Front/Surround', 'Surround Jack Mode', and 'Channel Mode'.
    This patch removes the undocumented AD1888 control
    'High Pass Filter Enable' and adds the new control
    'Exchange Mic/Line In'.
    
    Signed-off-by: Randy Cushman <rcushman_linux@earthlink.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6428ea1b733e4795209ff272be32732ec152594a
Author: Randy Cushman <rcushman_linux@earthlink.net>
Date:   Thu Dec 21 19:17:29 2006 +0100

    [ALSA] ac97 - fix malfunctioning mixer controls for AD1985
    
    This patch replaces the 'V_REFOUT Enable' mixer switch control
    with a listbox control for the AD1985 CODEC.
    Previous patch 'AD1888 mixer controls for DC mode' added
    controls that were propogated to multiple codecs.  For the
    AD1985 codec, the bits VREFH and VREFD function differently,
    preventing the 'V_REFOUT Enable' control from setting V_REFOUT
    to Hi-Z.
    This patch also corrects an issue in which register bits relating
    to mixer controls 'Surround Jack Mode' and 'Channel Mode'.
    The register bits controlled by these controls were being set
    at boot time to states inconsistent with the stored values of
    these controls.
    
    Signed-off-by: Randy Cushman <rcushman_linux@earthlink.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1321b160fa1cf63fa841d954fe31220366b6647a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Dec 21 11:02:06 2006 +0100

    [ALSA] soc - Fix delayed_work related changes on 2.6.20 kernel
    
    Fix the changes realted to delayed_work in soc/codecs/wm8750.c.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 831466f4ad2b5fe23dff77edbe6a7c244435e973
Author: Randy Cushman <rcushman_linux@earthlink.net>
Date:   Tue Dec 19 18:42:16 2006 +0100

    [ALSA] ac97 - fix microphone and line_in selection logic
    
    This patch fixes the Microphone and LINE_IN select logic for
    Analog Devices surround codecs with shared jacks.  The existing
    code can never utilize the shared jacks for Microphone and LINE_IN
    due to the reversed jack selection logic.  The patched code
    correctly selects the shared jack for input if the 'Channel Mode'
    selector does not specify that the jack is to be used for output.
    Specifically, in '2ch' mode the Center/LFE jack is used for
    microphone input and the Surround jack is used for LINE_IN,
    in '4ch' mode the Center/LFE jack is used for microphone input
    and the Surround jack is used for output, and in '6ch' mode
    both jacks are used for output.
    
    Signed-off-by: Randy Cushman <rcushman_linux@earthlink.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4bb09523de50dcf1afc5d3099b9da0381f01b04c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Dec 19 17:16:14 2006 +0100

    [ALSA] soc - Use global workqueue
    
    Use global workqueue for simplicity instead of own workqueue
    in SoC core and wm8750 codes.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4014c38bd94156c10986a11d890bdae99437dc9a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Dec 19 17:13:16 2006 +0100

    [ALSA] ak4114 - Use global workqueue
    
    Use global workqueue for simplicity instead of own workqueue.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e250af291d6759518b574b33317eb3003012bfa2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Dec 19 17:08:52 2006 +0100

    [ALSA] hda-codec - Use global workqueue
    
    Use global workqueue for simplicity.
    The unsolicited event frequency isn't so high to have own queue.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit dc041e0b1fc918562aa3803cda166fee219a34d2
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Tue Dec 19 14:44:15 2006 +0100

    [ALSA] sound: Change final two instances of kcalloc(1,...) to kzalloc()
    
      Change the two remaining instances in the tree of kcalloc(1,...) to
    the corresponding kzalloc() call.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e4c3bf0f65ec9da8b067a722f734d1012ef12ceb
Author: James C Georgas <jgeorgas@rogers.com>
Date:   Tue Dec 19 11:09:41 2006 +0100

    [ALSA] Remove AC97 POP control for STAC9708/11
    
    The STAC9708/11 AC97 codecs implement the PCM Out Path & Mute bit in
    the General Purpose register (0x20:F), even though they don't implement
    the actual function in the mixer.
    Since the alsa tests for the function by toggling the bit and reading
    it back to see if it changed, it mistakenly creates a useless control.
    This patch explicitly removes the control when the codec is an
    STAC9708/11.
    I put the check in patch_sigmatel_stac9708_specific(), because I have
    an SBLive with this chip on it. I don't know if the STAC9758 or other
    codecs also behave this way. If they do, then this check could maybe go
    in patch_sigmatel_stac97xx_specific(), or some other more general
    function.
    
    Signed-off-by: James C Georgas <jgeorgas@rogers.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ca40587087fc05c670f4f2650cc466d557377f6d
Author: Krzysztof Helt <krzysztof.h1@wp.pl>
Date:   Mon Dec 18 14:41:03 2006 +0100

    [ALSA] sparc dbri comment fix
    
    This is a comment fix to avoid misleading about locking in the
    dbri_cmdsend.
    
    Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0664d888a55ff99c8556690a3ae7c76dc1389008
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Mon Dec 18 14:39:02 2006 +0100

    [ALSA] Additional credits to soc-core
    
    This patch adds copyright and credit for my good friend Richard Purdie
    from OpenedHand for his help and code contribution throughout the
    development of the core code. Many thanks Richard (I guess we overlooked
    this in trying to get everything working well).
    It also adds some extra comments wrt to DAI clock matching.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 659eacc55a378066b60896b2bbd261ca32a10c04
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Mon Dec 18 14:38:37 2006 +0100

    [ALSA] Remove trailing white space from wm9712.c
    
    This patch removes some trailing white space from the WM9712 ASoC codec
    driver.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4dc53e28e2e5cccb3521466be8f2ab4689ca9143
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Dec 18 13:24:37 2006 +0100

    [ALSA] hda-codec - Add quirk for Turbo-X Coeus G610P
    
    This patch adds the Turbo-X Coeus G610P to the alc880 config table,
    based on user provided information.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b0148a98ec5151fec82064d95f11eb9efbc628ea
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Dec 18 13:20:06 2006 +0100

    [ALSA] snd-aoa: fix onyx resume
    
    When the machine resumes the onyx codec might be in a weird state. Hence,
    simply fully reset it once (and keep the code to take it out of suspend in
    case the suspend of the codec chip survives a reset).
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 333824034a19baf71b2bd5fe2153630982f379b0
Author: Matt Porter <mporter@embeddedalley.com>
Date:   Mon Dec 18 13:17:28 2006 +0100

    [ALSA] hda: add sigmatel 9205 eapd support
    
    Adds support for handling EAPD on 9205 codecs
    
    Signed-off-by: Matt Porter <mporter@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cdf88efa03907a884177b226321bb41bc17c407f
Author: Toshimune Konno <heitouk@nifty.com>
Date:   Mon Dec 18 13:12:18 2006 +0100

    [ALSA] ice1724 - Add support for Prodigy 7.1 XT
    
    This patch supports Audiotrack 7.1 XT.
    7.1XT is almost same hardware as 7.1LT. so using 7.1 LT's code.
    
    Signed-off-by: Toshimune Konno <heitouk@nifty.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1a5965b72209db9db453bc0049393e0d54cf85cb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Dec 18 13:07:35 2006 +0100

    [ALSA] Fix AC97_BUS in soc/pxa/Kconfig
    
    Fixed the renamed AC97_BUS in soc/pxa/Kconfig file.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9102cd1c35c9be223e0f60b7c42cb581f0d42f1a
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Fri Dec 15 10:02:12 2006 +0100

    [ALSA] hda-codec (realtek): add support for MacPro series workstations
    
    This patch adds limited support for Intel-based MacPro workstations.
    Currently, the front headphone jack is not functioning, but line out
    and line in are working.  S/PDIF not tested.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4484bb2e93a9ab636d149edc6515c75ea224e2b0
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Dec 15 09:30:07 2006 +0100

    [ALSA] Fix the soc code after dhowells workqueue changes.
    
    From: Andrew Morton <akpm@osdl.org>
    I converted the workqueues to per-device while I was there.  It seems
    strange to create a new kernel thread (on each CPU!) and to then only
    have a single global work to ever be queued upon it.
    Plus without this, I'd have to use the _NAR stuff, gawd help me.
    Does that workqueue really need to be per-cpu?
    Does that workqueue really need to exist?  Why not use keventd?
    Cc: Takashi Iwai <tiwai@suse.de>
    Cc: David Howells <dhowells@redhat.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ca377fecdd822f9ef5b0a21586040e7d0e1d0c7a
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Dec 15 09:26:20 2006 +0100

    [ALSA] ucb1400_ts.c compilation fix (struct snd_ac97)
    
    From: Andrew Morton <akpm@osdl.org>
    Cc: Takashi Iwai <tiwai@suse.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cbb7d8f9b7b0a9f51c9869d0da63ea75a2c95caf
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed Dec 13 11:21:55 2006 +0000

    [ALSA] emu10k1: Update registers defines for the Audigy 2/emu10k2.5
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7c157069bc953c3cfb5926e92d358e46423bf942
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Dec 10 00:00:38 2006 +0000

    [ALSA] ca0106: Fix sound capture on Audigy LS via AC97.
    
    Fixes ALSA bug#2286
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a5f65029ad5c5262ee3aff5165698e431415cf7c
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Dec 7 08:26:27 2006 +0100

    [ALSA] arm header fix
    
    Cc: Takashi Iwai <tiwai@suse.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c17d6fd90a336d2b971dc9f51338f9540479b263
Author: Olaf Hering <olaf@aepfle.de>
Date:   Thu Dec 7 08:25:01 2006 +0100

    [ALSA] create driver symlink in snd-aoa /sys/bus/aoa-soundbus/devices/*/
    
    create sysfs driver symlink for snd-aoa in /sys/bus/aoa-soundbus/devices/*/
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 61e77107fa849b69f50ebe96217ba3468a216ba8
Author: Olaf Hering <olaf@aepfle.de>
Date:   Thu Dec 7 08:24:12 2006 +0100

    [ALSA] create device symlink in snd-aoa
    
    create sysfs device symlinks for snd-aoa in /sys/class/sound/controlC0 This
    allows hald to recognize the device as sound device.  Furthermore it allows
    the desktop user to actually access the sound device nodes.  hald and
    related packages will modify the acl attributes.
    Fixes https://bugzilla.novell.com/show_bug.cgi?id=106294
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e0e6ce0380e0c4de35371372bc5b6c2b02458597
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Thu Dec 7 08:22:50 2006 +0100

    [ALSA] add struct snd_pcm_substream forward declaration
    
    fixes: include/sound/pcm.h:62: warning: 'struct snd_pcm_substream' declared
    inside parameter list
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit eb41dab6e10332c1c9008f3cfc5b88ff1e392cb9
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed Dec 6 20:38:45 2006 +0000

    [ALSA] emu10k1: Rename the digital optical capture control for the Audigy 2 ZS
    
    Notebook.
    Digital playback and capture now works, but it is not bit accurate because it
    passes through a resampler.
    Bit accurate playback and capture will be implemented later via the p17v.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 184c1e2c4c4221c2b8d1e16c33314595373fa73f
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Wed Dec 6 15:58:02 2006 +0000

    [ALSA] emu10k1: Add Audio capture support for Audigy 2 ZS Notebook.
    
    Implement functionallity in order to fixe ALSA bug#2058.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9ed1261e3e617d99b0eb74041d0337ff664e4f5b
Author: Teru KAMOGASHIRA <teru@sodan.ecc.u-tokyo.ac.jp>
Date:   Mon Dec 4 18:03:53 2006 +0100

    [ALSA] Current driver does not utilize 44.1kHz high quality sampling rate converter.
    
    Following patch will make the driver to use the 44.1kHz SRC automatically
    if the pcm source is 44.1kHz signed 16bit stereo.
    The SRC is available in YMF754 only.
    
    Signed-off-by: Teru KAMOGASHIRA <teru@sodan.ecc.u-tokyo.ac.jp>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c577b8a16fd19a33a8865ca6451287d284a0faf6
Author: Joseph Chan <josephchan@via.com.tw>
Date:   Wed Nov 29 15:29:40 2006 +0100

    [ALSA] hda-codec - Add support for VIA VT1708(A) HD audio codec
    
    This patch is VIA first release for HD audio codec, VT1708(A) and
    it provides geneneral HD audio driver features.
    
    Signed-off-by: Joseph Chan <josephchan@via.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6c5cfd9d9d312b279adf9226b7e664f6f4c4cfc7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Nov 28 17:18:25 2006 +0100

    [ALSA] Add description about spdif_aclink option for snd-intel8x0
    
    Added a description about spdif_aclink option for snd-intel8x0 driver
    in ALSA-Configuration.txt.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d9c96cf35b70b484483446c92f27652f3aef977e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Nov 28 12:10:09 2006 +0100

    [ALSA] sound/soc/soc-dapm.c: make 4 functions static
    
    Make the following needlessly global functions static:
    - dapm_power_widgets()
    - dapm_mux_update_power()
    - dapm_mixer_update_power()
    - dapm_free_widgets()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bd869485993f73c303b565da5548bb4e77063c54
Author: Jonathan Woithe <jwoithe@physics.adelaide.edu.au>
Date:   Tue Nov 28 11:35:52 2006 +0100

    [ALSA] hda-codec - Make internal speaker work on Acer C20x tablets
    
    The following patch creates a new 'Mono speaker' control in alsamixer
    when the Realtek 'acer' model is used with hda_intel.  This is needed so
    the internal mono speaker (when present) can be controlled.
    This new control won't do anything in Acer laptops which are not fitted with
    a mono speaker. Acer models which are known to have a mono speaker are the
    C20x tablet series but there may be others.  I guess we could define a new
    model specifically for Acers with mono speakers but this seems a bit silly
    given that such a model will be identical to the normal 'acer' model except
    for this added control.
    This patch also adds the C20x tablets to the list of PCI ids associated with
    the 'acer' model.  This means that owners of C20x machines will no longer
    have to supply 'model=acer' when loading hda_intel.
    
    Signed-off-by: Jonathan Woithe <jwoithe@physics.adelaide.edu.au>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 86d72bdfcd34c9cd8acddf749ff130d5365fe279
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Nov 28 11:33:10 2006 +0100

    [ALSA] hda-codec - Fix compile warnings without CONFIG_SND_DEBUG
    
    Fix compile warnings (unused variables) in patch_conexant.c
    without CONFIG_SND_DEBUG.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2e26e483694059d63bda7bb89d5a464c952d1d44
Author: Philipp Zabel <philipp.zabel@gmail.com>
Date:   Mon Nov 27 12:05:04 2006 +0100

    [ALSA] ASoC - Bit clock matching error
    
    This patch by Philipp Zabel fixes a bug whereby the BCLK matching fails
    when the Codec BCLK is constant and the CPU BCLK is based upon a
    divider.
    
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f5fcc13c2fc62da6f75d80189a51c2492afb39c0
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 17:07:44 2006 +0100

    [ALSA] hda-codec - Use snd_pci_quirk_lookup() for board config lookup
    
    Use snd_pci_quirk_lookup() for looking up a board config table.
    The config table is sorted in numerical order of PCI SSIDs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0b830bac35dd6e3996bee675c3893857da8a4d0a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 16:13:57 2006 +0100

    [ALSA] Clean up serial-u16500.c
    
    Remove uesless typedefs and clean up the code a bit to follow
    the standard coding style.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5b78efd2ef206265aa789485580df9799c54b650
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 16:12:50 2006 +0100

    [ALSA] Fix documentation of ASoC
    
    Fixed obsolete *_t typedefs in ASoC documentation.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9f0ac6e1a8677ac509821f4ff0c77d39b1d63125
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Nov 24 15:49:39 2006 +0100

    [ALSA] Update AT91 ASoC driver for 2.6.19 kernel.
    
    Changes were required to support latest AT91 header files.
    Also updated to remove AT91RM9200-specific code in the ASoC
    platform drivers to support the AT91SAM9260 and AT91SAM9261
    chips, but no testing was performed on these chips.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a9e996604f77be6f1f4deb0eb1cc2652000054f1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:42:07 2006 +0100

    [ALSA] intel8x0 - Add spdif_aclink option
    
    Added spdif_aclink module option to specify whether the board
    has SPDIF over AC-link or a direct connection from the controller
    chip.
    NForce and ICH4 (or newer) boards may be equipped with SPDIF
    through AC97 codec.  In such a case, SPDIF should be handled
    as if the old ICH style (the same slot for analog and digital).
    A quirk list is added to detect this automatically for known
    hardwares.
    Corresponds to ALSA bug#2637.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5da8fa2516388a20a43cd928fda19f6ac2521afc
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:38:18 2006 +0100

    [ALSA] ens1371 - Clean up quirks
    
    Clean up quirks in snd-ens1371 driver using snd_pci_quirk_lookup().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9d74958a845b54c8ccfd4c6d14659f601e6ef43b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:37:18 2006 +0100

    [ALSA] via82xx - Use quirk list helper function
    
    Clean up dxs_support quirk list using snd_pci_quirk_lookup().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1061eeb44493176eb1d12b47d619e61c428c4395
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:36:46 2006 +0100

    [ALSA] maestro3 - Use quirk list helper function
    
    Clean up maestro3 amp and GPIO quirks using snd_pci_quirk_lookup().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e2b6d13be4ac3b564ac642a76756f6cf1a7b7b99
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:36:13 2006 +0100

    [ALSA] nm256 - Use quirk list helper function
    
    Clean up nm256-quirk lookup using snd_pci_quirk_lookup().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f41bea84c030793b502aa2526bb22476788e731e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:35:18 2006 +0100

    [ALSA] atiixp - Use quirk list helper function
    
    Clean up ac97_codec quirk using snd_pci_quirk_lookup().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d9ea472c743ccd7344055cb118bc210befbd8007
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Nov 24 15:34:06 2006 +0100

    [ALSA] Add PCI quirk list helper function
    
    Added a helper function snd_pci_quirk_lookup()
    to look up PCI SSID quirk list.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 048b945077bdc7e8dff5d5810ff2a0ced3590ca9
Author: Giuliano Pochini <pochini@shiny.it>
Date:   Fri Nov 24 13:03:58 2006 +0100

    [ALSA] echoaudio, add TLV support
    
    This patch adds TLV support to the echoaudio driver.
    All gains are in the range -127dB to +6dB with steps of 1dB, and -128 is
    mute. VU-meters levels go from -128 to 0dB. The input gain of the Layla20
    ranges from -25dB to +25dB in steps of 0.5dB.
    
    Signed-off-by: Giuliano Pochini <pochini@shiny.it>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d1d985f019c3b290e09881b7b23abdc87aee2895
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Nov 23 19:27:12 2006 +0100

    [ALSA] Fix obsolete *_t typedefs
    
    Fixed obsolete *_t typedefs.  Now completely removed.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 59d6e149d9e5c476138911c95f288ec3feb3a34d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Nov 23 18:37:00 2006 +0100

    [ALSA] Remove obsolete typedefs.h
    
    Removed obsolete typedefs.h.  It existes only for backward compatibility,
    and now all codes should be free from such typedefs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 56bb0cab1c1698544e61409e3727f2b6bc205501
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Nov 22 11:52:52 2006 +0100

    [ALSA] hda-codec - Add asus-laptop model for ALC861 (ALC660)
    
    Added a new model 'asus-laptop' for ASUS F2*/F3* laptops
    with ALC861 (equivalent with ALC660) codec chip.
    Also fixed the model for PCI SSID 1043:1338.
    Corresponding to ALSA bug#2480.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9fb62c9f23d437241051e27a11de568361a4745d
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Nov 21 19:01:51 2006 +0100

    [ALSA] korg1212: fix printk format warning
    
    sound/pci/korg1212/korg1212.c:2359: warning: format '%d' expects type 'int', but
    argument 4 has type 'size_t'
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 69e134189763341560a5201c2eee9930eeb0b4f1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Nov 21 12:10:55 2006 +0100

    [ALSA] hda-intel - Disable INTX when MSI is used
    
    Call pci_intx() to disable/enable INTX when MSI is used/unused.
    Nvidia and AMD boards seem to have problems with MSI when INTX
    isn't disabled.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0b51ba07e2e2866bfea40c5551a926dbefae64da
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Nov 20 17:50:17 2006 +0100

    [ALSA] make sound/core/control.c:snd_ctl_new() static
    
    Now that everyone uses snd_ctl_new1() and noone is using snd_ctl_new()
    anymore, we can make it static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5cd575290b4481b3a6ea307afed760df60d01cbc
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Nov 20 17:42:09 2006 +0100

    [ALSA] hda-codec - Add missing array to conexant driver
    
    This patch adds a missing array to the conexant driver.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 14e1d357e4fed9577d349952b71ec7d81aad710c
Author: Dan Carpenter <error27@gmail.com>
Date:   Mon Nov 20 16:35:18 2006 +0100

    [ALSA] atiixp - Add a parameter ac97_quirk
    
    Add an option to specify the AC'97 codec instead of
    probing.  This is a fix for bugzilla #7467.
    
    Signed-off-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ddc2cec4dbec157ac7426111205d59ac28f887ee
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Nov 20 12:03:44 2006 +0100

    [ALSA] make sound/pci/hda/patch_sigmatel.c:stac92xx_dmic_labels[] static
    
    This patch makes the needlessly global stac92xx_dmic_labels[] static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 761ccb24b4cad211295a5abe231f418ad97aac04
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Mon Nov 20 12:02:56 2006 +0100

    [ALSA] hda-codec - Add support for Evesham Voyager C530RD laptops
    
    This patch adds support for the Evesham Voyager C530RD series laptops.
    So far, only playback has been tested, but microphone should also work.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e3a4050cdd7df05fba6512ac71c9360246e19ac4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Nov 16 17:24:20 2006 +0100

    [ALSA] hda-codec - Add model for ASUS W3j laptop
    
    Added a proper model entry (model=laptop-eapd) for ASUS W3j laptop
    with AD1986A codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9dece1d74bd41f593cb1d9e387dc894dd826abf7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Nov 16 17:12:49 2006 +0100

    [ALSA] hda-codec - Fix ALC861 connection of front-output
    
    Fix the wrongly set SET_CONNECTION verb for NID 0x0f of ALC861.
    The widget has only a single connection although the init verb
    sets to 0x01.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a2ee47026025a3d1a5c2eccf3b0aa6c9fb02b101
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Thu Nov 16 16:24:35 2006 +0100

    [ALSA] hda-codec - Change Gigabyte K8N51 from 6stack to 6stack-digout
    
    This patch moves the entry for the Gigabyte K8N51 from the 6stack
    grouping to the 6stack-digout grouping, allowing for S/PDIF output
    functionality.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d1f6754748a6523fcd35be7f4aaaf6fde5e5ca87
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Nov 14 12:30:52 2006 +0100

    [ALSA] hda-codec - Add support for Sony UX-90s
    
    Added the model entry (model=hippo) for Sony UX-90s with ALC262 codec.
    Although the device has no SPDIF output, the hippo model adds a
    PCM output, but it must be harmless.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c9b443d4fdf4e84ce1f40e1f507c313f3a8a8294
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Tue Nov 14 12:13:39 2006 +0100

    [ALSA] Add Conexant audio support to the HD Audio driver
    
    This driver adds limited support for the Conexant 5045 and 5047 HD Audio
    codecs.  Some issues still need to be resolved.  The code is based
    primarily on code from the Analog Devices AD1981 support and the Realtek
    ALC260 support.  Some code came from the original code developed by Alex
    Pototskiy (see alsa bugtracker 2485).
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e6327cf90b1e5e849ac87fbdaee7822a64b6ff56
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Nov 11 10:52:06 2006 +0000

    [ALSA] snd-ca0106: Updated Enum control names.
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4c07c81832a9303eeb36afb8f76ad0594e66cf5e
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Nov 11 10:48:58 2006 +0000

    [ALSA] snd-emu10k1: Update Enum naming.
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 56255060ea51984e728223d8056b3faaba0dadf6
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Nov 9 16:47:26 2006 +0100

    [ALSA] ice1724 - Add support of M-Audio Audiophile 192
    
    Added the (experimental) support of M-Audio Audiophile 192 board.
    Currently, the analog and the digital playbacks seem working fine.
    The inputs seem not working as far as I've tested yet.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bd903b6ed7fb107e122682db5ac8aaa323ab84c9
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Thu Nov 9 16:35:01 2006 +0100

    [ALSA] ASoC - mixer name changes for older OSS app support
    
    This patch suggested by Richard Purdie changes the names of some WM8731
    and WM8750 mixers so that they will be recognised by some older OSS
    mixer apps.
    Changes:-
     o WM8731 Playback changed to Master Playback
     o WM8750 Out1 changed to Headphone
     o WM8750 Out2 changed to Speaker
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b373bdebf57e2ac7994d9be3a68fd5507515caef
Author: Andrew L. Neporada <nepal@asplinux.ru>
Date:   Tue Nov 7 11:37:08 2006 +0100

    [ALSA] hda-codec - Clevo M540JE, M550JE laptops (Nvidia MCP51 chipset, ALC883 codec)
    
    We need to enable External Amplifier on this laptops. This patch basicly
    adds laptop-eapd model to ALC883 codec.
    
    Signed-off-by: Andrew L. Neporada <nepal@asplinux.ru>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 54bf5dd9ccd8c37830d7dae0737466e8fda018aa
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Nov 6 15:38:55 2006 +0100

    [ALSA] hdspm - Fix printk warnings
    
    sound/pci/rme9652/hdspm.c: In function 'snd_hdspm_hw_params':
    sound/pci/rme9652/hdspm.c:3681: warning: format '%08X' expects type 'unsigned int', but argument 4 has type 'unsigned char *'
    sound/pci/rme9652/hdspm.c:3692: warning: format '%08X' expects type 'unsigned int', but argument 4 has type 'unsigned char *'
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9174140cf383c56bdcabb4caf9c99c5ac8f3fdd7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Nov 6 14:45:42 2006 +0100

    [ALSA] hda-codec - Fix model for ASUS M2N-MX
    
    Add a proper model (3stack) for ASUS M2N-MX with AD1986A codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 81d7724a8ee84693befbd60d730199ffb3988f29
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Nov 6 09:26:41 2006 +0100

    [ALSA] maestro3: add request_firmware()
    
    Load the ASSP codes using request_firmware(), if possible, instead of
    using the built-in blobs.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2493a6d18b1f5df59c7bcfeefcbde70bee146490
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Nov 6 09:24:29 2006 +0100

    [ALSA] korg1212: add request_firmware()
    
    Load the DSP code using request_firmware(), if possible, instead of
    using the built-in blob.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 226968c7afd464b794f34f9ea8cb4bcfe48447dc
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Nov 6 09:21:58 2006 +0100

    [ALSA] wavefront: add request_firmware()
    
    Load the YSS225 register initialization data using request_firmware(),
    if possible, instead of using the built-in data blob.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 59540fe85924ecb7b9760ab422cffaea0c3ce43a
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Nov 6 09:20:04 2006 +0100

    [ALSA] wavefront: simplify YSS225 register initialization
    
    Instead of using a somewhat algorithmic approach of initializing the
    YSS225's registers, just use a simple series of port/value pairs.
    This makes it easier to later replace or entirely remove the register
    data blob.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit de66d53e46f39de6ea3261609fdb92900bb34a42
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Nov 6 09:18:34 2006 +0100

    [ALSA] sb16: add request_firmware()
    
    Load the CSP programs using request_firmware(), if possible, instead of
    using the built-in firmware blobs.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 219e281f4627a395aaceff0e4a257cd18608e145
Author: Hubert Kahlert <hkahlert@hk-datentechnik.de>
Date:   Tue Oct 31 15:31:27 2006 +0100

    [ALSA] Fix mask to stop AT91 SSC clock on shutdown
    
    This patch by Frank Mandarino and Hubert Kahlert fixes a bug in the AT91
    SSC (i2s) shutdown code that would erroneously disable other AT91
    peripheral clocks.
    
    Signed-off-by: Hubert Kahlert <hkahlert@hk-datentechnik.de>
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8b65727bf07abc0b3fdac4fcf2f90c5882d65f4f
Author: Matt Porter <mporter@embeddedalley.com>
Date:   Thu Oct 26 17:12:59 2006 +0200

    [ALSA] hda: add dig mic support for sigmatel codecs
    
    Adds support for digital microphone pin widgets on SigmaTel codecs.
    Enables support only on the 9205 codecs for now.
    
    Signed-off-by: Matt Porter <mporter@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 06bf2f495aabfdbe9d5db7b910fa75dd7f72131a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Oct 24 19:49:39 2006 +0200

    [ALSA] hda-codec - Fix model for Lenovo A60 desktop
    
    Add a proper model entry (3stack) for Lenovo A60 desktop with
    AD1986a codec to fix noise problems.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f1a63a38d2a885cc7e38c67b699171a7c5666d88
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Oct 24 18:25:29 2006 +0200

    [ALSA] ac97 - Suppress power-saving mode on non-supporting drivers
    
    Don't enable power-saving mode on drivers that don't support
    it.  The supporting drivers set AC97_SCAP_POWER_SAVE to scaps
    at creation of ac97 instance.
    Currently enable on the following drivers: intel8x0, intel8x0m,
    atiixp, atiixp-modem, via82xx and via82xx-modem.
    Also, a bit clean up of power-saving stuff:
    - Don't create an own workq
    - Remove superfluous ifdefs
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7cdbff945e9e3bb592dee2f66afbcc2255747f8f
Author: Mariusz Domanski <mariook@wp.pl>
Date:   Mon Oct 23 13:42:56 2006 +0200

    [ALSA] hda-codec - Add asus model to ALC861 codec
    
    This patch adds support for Asus laptops (for example: Asus
    A6Rp-AP002).
    
    Signed-off-by: Mariusz Domanski <mariook@wp.pl>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a71a468a50f1385855e28864e26251b02df829bb
Author: Liam Girdwood <lg@opensource.wolfsonmicro.com>
Date:   Thu Oct 19 20:35:56 2006 +0200

    [ALSA] ASoC: Add support for BCLK based on (Rate * Chn * Word Size)
    
    This patch adds support for the DAI BCLK to be generated by multiplying
    Rate * Channels * Word Size (RCW).
    This now gives 3 options for BCLK clocking and synchronisation :-
     1. BCLK = Rate * x
     2. BCLK = MCLK / x
     3. BCLK = Rate * Chn * Word Size.  (New)
    Changes:-
     o Add support for RCW generation of BCLK
     o Update Documentation to include RCW.
     o Update DAI documentation for label = value DAI modes.
     o Add RCW support to wm8731, wm8750 and pxa2xx-i2s drivers.
    
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 543a0fbe18d0b44f3d037fe6b59458fa0c0d5e4b
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Thu Oct 19 18:22:53 2006 +0200

    [ALSA] ASoC AT91 DAI modes update
    
    This patch by Frank Mandarino updates the AT91RM9200 I2S DAI audio modes
    as follows:-
     o fixes a typo in the 16k mode
     o removes experimental 24k mode
     o adds a 32k mode.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <lg@opensource.wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d7923b2a816625dc4208d89471da6bdcab188cdb
Author: Remy Bruno <remy.bruno@trinnov.com>
Date:   Tue Oct 17 12:41:56 2006 +0200

    [ALSA] hdsp - Add DDS register support for RME9632 rev >= 152
    
    Add DDS register support for RME9632 rev >= 152.
    This register sets the sample rate for these cards and is required
    in addition to the standard control register. It corresponds to a
    quartz divisor.
    
    Signed-off-by: Remy Bruno <remy.bruno@trinnov.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ccc656ce5f6627032bd44e660071bb71e65a231a
Author: Kailang Yang <kailang@realtek.com.tw>
Date:   Tue Oct 17 12:32:26 2006 +0200

    [ALSA] hda-codec - Add new modesl for Realtek codecs
    
    Changes from Realtek driver:
    - New models hippo and hippo_1 for ALC262
    - New models tagra-dig and tagra-2ch-dig for ALC883
    - New id for ALC660 codec chip
    
    Signed-off-by: Kailang Yang <kailang@realtek.com.tw>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a53d1aece388d940831846f642810e47526883e8
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Tue Oct 17 12:00:28 2006 +0200

    [ALSA] hda-codec - Add toshiba model to ALC861 codec
    
    This patch adds support for Toshiba laptops.  Code is from
    RealTek's alsa-driver-1.0.12-4.05b tree.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 12e74f7d430655f541b85018ea62bcd669094bd7
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Mon Oct 16 21:19:48 2006 +0200

    [ALSA] ASoC - Fix build warnings in soc-core.c
    
    This patch fixes some build warnings in soc-core.c
    Changes:-
     o Check the return value of soc_ac97_dev_register()
     o Check return value of calls to device_create_file()
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cbcc2c4c07bd34586c7fd8d7513d3a397d39ce3c
Author: Jerome Demange <jdemange@cict.fr>
Date:   Mon Oct 16 21:08:57 2006 +0200

    [ALSA] ac97 - enables sound output through speakers on MSI S250 laptop
    
    
    Signed-off-by: Jerome Demange <jdemange@cict.fr>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3cee5a60ce18034a63f70ba2bdd54f85018ce960
Author: Remy Bruno <remy.bruno@trinnov.com>
Date:   Mon Oct 16 12:46:32 2006 +0200

    [ALSA] hdspm: Add support for AES32
    
    Add support for AES32. Difference between MADI and AES32 is done
    through revision. Master support is not finished for now (RME so-called DDS
    feature is not supported yet)
    
    Signed-off-by: Remy Bruno <remy.bruno@trinnov.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b3b9c1cbb35125f7e43a323ebe89e7a74e3c1ac2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Oct 13 20:09:59 2006 +0200

    [ALSA] Remove trailing whitespaces from soc/* files
    
    Remove trailing whitespaces from soc/* files added by the
    conversion to C99-style initialization.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b5c5fd24b9d34e4670cb339e546bfae7ad316354
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Oct 13 19:13:41 2006 +0200

    [ALSA] ASoC debug output build breakage
    
    This patch fixes a build failure when ASoC debug is enabled.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 35f60839b6158f72d2be0dd2764ad772e1d44e8a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Oct 13 12:46:10 2006 +0200

    [ALSA] hda-codec - Add missing comma
    
    Added a missing comma in the medion patch.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 527541f9a8a83eedb4d732657dbfdcd2c4ca8bb4
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Oct 13 12:33:56 2006 +0200

    [ALSA] ASoC DAI capabilities labelling
    
    This patch suggested by Takashi changes the DAI capabilities definitions
    in pxa-i2s.c, at91rm9200-i2s.c, wm8731.c, wm8750.c and wm9712.c to use a
    label = value style.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c07584c83287ae5a13cc836f69a1d824ad068c66
Author: Tobin Davis <tdavis@dsl-only.net>
Date:   Fri Oct 13 12:32:16 2006 +0200

    [ALSA] hda-codec - Add support for Medion laptops
    
    This patch adds audio support for Medion's line of laptops,
    based on code shipped with the laptops.  Microphone support is
    still being explored.
    
    Signed-off-by: Tobin Davis <tdavis@dsl-only.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 734c2d4bb7cfccaab79923331efc7422e4e76a8a
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:34:32 2006 +0200

    [ALSA] ASoC pxa2xx build support
    
    This patch builds ASoC pxa2xx support for Corgi, Spitz, Tosa and Poodle
    Zaurus machines.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6e24dd9310b66d6f500a81ee320a8babec529573
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:33:45 2006 +0200

    [ALSA] ASoC pxa2xx Poodle machine support
    
    This patch adds Alsa audio support to the Sharp Zaurus SL-C5600 (Poodle)
    machine.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1b49cb987030c09ca763c1dabd5c5e33f669e530
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:33:09 2006 +0200

    [ALSA] ASoC pxa2xx Tosa machine support
    
    This patch adds Alsa audio support to the Sharp Zaurus SL-C6000 (Tosa)
    machine.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Dirk Opfer <Dirk@Opfer-Online.de>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7fb290d03af69bfca5876573ac0eada40bd4e292
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:32:13 2006 +0200

    [ALSA] ASoC pxa2xx Spitz machine support
    
    This patch adds Alsa audio support to the Sharp Zaurus SL-C1000/SL-C3x00
    (Akita/Spitz) machines.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a1eb4b3caf3abd0d1a8474f07d29959e1879bb29
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:31:16 2006 +0200

    [ALSA] ASoC pxa2xx Corgi machine support
    
    This patch adds Alsa audio support to the Sharp Zaurus SL-C7x0/C860
    (Corgi) machines.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Graeme Gregory <dp@xora.org.uk>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 75b41027662e29822746342865fa8abd941d2604
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:29:03 2006 +0200

    [ALSA] ASoC pxa2xx AC97 support
    
    This patch adds pxa2xx AC97 ASoC audio support. It's based on
    sound/arm/pxa-ac97 by Nicolas Pitre with the following differences.
     o Modified driver structure to use ASoC core PCM callbacks.
     o Removed AC97 configuration function (all handled in ASoC core)
     o Added and exported ASoC DAI configuration table.
     o Added DMA support for AUX DAC and Mic ADC
     o Separated out AC97 reset into cold and warm reset functions.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3e7cc3d3d1c435f83533b8bf2cf1833855be2901
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:28:10 2006 +0200

    [ALSA] ASoC pxa2xx I2S support
    
    This patch adds pxa2xx I2S ASoC audio support. Features:-
     o Supports playback/capture
     o 16 bit PCM
     o 8k - 96k sample rates
     o Supports master and slave mode.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f11a96d5cd94202479e603f9dfaff6e92f342135
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Thu Oct 12 14:26:55 2006 +0200

    [ALSA] ASoC pxa2xx DMA support
    
    This patch adds pxa2xx ASoC DMA audio support. It's based on
    sound/arm/pxa-pcm.c by Nicolas Pitre with the following differences.
    o Modified driver structure to use ASoC core PCM callbacks and data
    structures.
    o Registration with ASoC core.
    From: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 102fa9060e114a53628a6594034b6ecf624dffc6
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Oct 11 12:05:59 2006 +0200

    [ALSA] ymfpci: add request_firmware()
    
    Load the DSP and controller microcode using request_firmware(), if
    possible, instead of using the built-in firmware.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e40a0b2e9d73c69e6b9e5d55eb56696f81fbf802
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Tue Oct 10 18:44:29 2006 +0100

    [ALSA] snd-emu10k1: emu1010: replace long udelay with msleep.
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b0dbdaea55d55c05be972cd2a040acfa073b0509
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Tue Oct 10 18:08:45 2006 +0100

    [ALSA] snd-emu10k1: Add emu1010 internal clock rate control for 44100 or 48000.
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0f71e8b98506252db22a0c4fcfecb0aadcf393cc
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Oct 10 15:59:46 2006 +0200

    [ALSA] Fix irq handler in soc/at91/at91rm9200-i2s.c
    
    Fixed the irq handler in soc/at91-at91rm9200-i2s.c to follow the
    new style without pt_regs.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9148cc502752b12051760e6c5ba5daaea3367360
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Mon Oct 9 23:08:00 2006 +0100

    [ALSA] snd_emu10k1: Added support for 14dB Attenuation PADS on DACs and ADCs.
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6add0f4242fc52a97a92fca99a39f35298c2b50b
Author: Remy Bruno <remy.bruno@trinnov.com>
Date:   Mon Oct 9 15:52:01 2006 +0200

    [ALSA] hdsp: support for mixer matrix of RME9632 rev 152
    
    Added the support for mixer matrix of RME9632 rev 152.
    
    Signed-off-by: Remy Bruno <remy.bruno@trinnov.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9bf5f8aa222e0f943bd5037207628ad70b729576
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Oct 9 08:18:26 2006 +0200

    [ALSA] emu10k1: select FW_LOADER
    
    Let the emu10k1 driver select FW_LOADER because the new Emu1010 support
    requires it.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8a89876bc108cacebbe5cc47049c162a8a143b26
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Oct 9 08:17:48 2006 +0200

    [ALSA] pci: select FW_LOADER instead of depending on it
    
    Let the AudioScience, Echoaudio and Riptide drivers select FW_LOADER
    instead of depending on it so that they can be configured without having
    to enable FW_LOADER manually.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e117483e3e713c6411968afea825daa1133bc28d
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Oct 9 08:14:58 2006 +0200

    [ALSA] soc-core: fix multi-line string literal
    
    Properly quote a string that had an embedded newline.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8dafc0fb49b903c4e7262b2622bef8342345c700
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Oct 6 18:41:42 2006 +0200

    [ALSA] ASoC AT91RM92000 build
    
    This patch adds a Makefile and Kconfig to build the ASoC AT91RM9200
    support.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b41bf38a4323a32ec4890c74818c4a3d2661fe6c
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Oct 6 18:41:10 2006 +0200

    [ALSA] ASoC AT91RM92000 eti_b1 machine support
    
    This patch adds support for the Endrelia ETI_B1 machine using the WM8731
    codec and the AT91RM9200 platform.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 0cbbec0984f10f216ed8332e0d39ac93cbe33a0b
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Oct 6 18:40:25 2006 +0200

    [ALSA] ASoC AT91RM92000 I2S support
    
    This patch adds I2S support to the Atmel AT91RM9200 CPU.
    Features:-
    o Playback/Capture supported.
    o 16 Bit data size.
    o 8k - 48k sample rates.
    o ssc0, ssc1 and ssc2 supported as I2S ports.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ff9abf5b0a655b59d59ea61aec5be6285bf3ac30
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Oct 6 18:39:29 2006 +0200

    [ALSA] ASoC AT91RM92000 audio DMA
    
    This patch adds ASoC audio DMA support to the Atmel AT91RM9200 CPU.
    Features:-
     o Playback/Capture supported.
     o 16 Bit data size.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7f137ab673124ee0a210ab5b74c1f7234d6145fa
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:38:37 2006 +0200

    [ALSA] ASoC codecs: build files
    
    This patch adds an ASoC Makefile and Kconfig for the WM8731, WM8750 and
    WM9712 codecs.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit dbc6b6ad767c86907db373e85139b0e975ba7599
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:38:03 2006 +0200

    [ALSA] ASoC codecs: generic AC97 support
    
    This patch allows the std Alsa AC97 codec driver to use any AsoC AC97
    controller driver. Currently, only HiFi playback and Capture are
    supported atm.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 10c5cf30446fe91b7173436b75c4f00dfb4cd9f8
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:37:32 2006 +0200

    [ALSA] ASoC codecs: WM9712 support
    
    This patch adds ASoC support for the WM9712 codec.
    Supported features:-
    o Capture/Playback/Sidetone/Bypass.
    o Aux DAC.
    o 8k - 48k sample rates.
    o DAPM.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit abadfc928a27e1cf27c834e8e29e6b1f64ca2d55
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:36:39 2006 +0200

    [ALSA] ASoC codecs: WM8750 support
    
    This patch adds ASoC support for the WM8750 codec.
    Supported features:-
    o Capture/Playback/Sidetone/Bypass.
    o 16 & 24 bit audio.
    o 8k - 96k sample rates.
    o DAPM.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 40e0aa64660b4e28a9348e57bfbda6c114617969
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:36:07 2006 +0200

    [ALSA] ASoC codecs: WM8731 support
    
    This patch adds ASoC support for the WM8731 codec.
    Supported features:-
     o Capture/Playback/Sidetone/Bypass.
     o 16 & 24 bit audio.
     o 8k - 96k sample rates.
     o DAPM.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit eb1a6af39b70375d93ed25e7c916f64463e00614
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Oct 6 18:34:51 2006 +0200

    [ALSA] ASoC: documentation & maintainer
    
    This patch adds documentation describing the ASoC architecture and a
    maintainer entry for ASoC.
    The documentation includes the following files:-
    codec.txt: Codec driver internals.
    DAI.txt: Description of Digital Audio Interface standards and how to
    configure a DAI within your codec and CPU DAI drivers.
    dapm.txt: Dynamic Audio Power Management.
    platform.txt: Platform audio DMA and DAI.
    machine.txt: Machine driver internals.
    pop_clicks.txt: How to minimise audio artifacts.
    clocking.txt: ASoC clocking for best power performance.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a3288176de3fdd439d9bca0a0b9ca749c12ac5ac
Author: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
Date:   Fri Oct 6 18:33:55 2006 +0200

    [ALSA] ASoC: Build files
    
    This patch adds support for building the ASoC core and the dynamic audio
    power management support.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2b97eabc09f42d0f63e8053636e34e1afa0d604e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:32:18 2006 +0200

    [ALSA] ASoC: dynamic audio power management (DAPM)
    
    This patch adds Dynamic Audio Power Management (DAPM) to ASoC.
    Dynamic Audio Power Management (DAPM) is designed to allow portable and
    handheld Linux devices to use the minimum amount of power within the
    audio subsystem at all times. It is independent of other kernel PM and
    as such, can easily co-exist with the other PM systems.
    DAPM is also completely transparent to all user space applications as
    all power switching is done within the ASoC core. No code changes or
    recompiling are required for user space applications. DAPM makes power
    switching decisions based upon any audio stream (capture/playback)
    activity and audio mixer settings within the device.
    DAPM spans the whole machine. It covers power control within the entire
    audio subsystem, this includes internal codec power blocks and machine
    level power systems.
    There are 4 power domains within DAPM:-
    1. Codec domain - VREF, VMID (core codec and audio power)
    Usually controlled at codec probe/remove and suspend/resume, although
    can be set at stream time if power is not needed for sidetone, etc.
    2. Platform/Machine domain - physically connected inputs and outputs
    Is platform/machine and user action specific, is configured by the
    machine driver and responds to asynchronous events e.g when HP are
    inserted
    3. Path domain - audio subsystem signal paths
    Automatically set when mixer and mux settings are changed by the user.
    e.g. alsamixer, amixer.
    4. Stream domain - DAC's and ADC's.
    Enabled and disabled when stream playback/capture is started and stopped
    respectively. e.g. aplay, arecord.
    All DAPM power switching decisions are made automatically by consulting
    an audio routing map of the whole machine. This map is specific to each
    machine and consists of the interconnections between every audio
    component (including internal codec components).
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit db2a416556af0313db028147e4a22fef6f214f2f
Author: Frank Mandarino <fmandarino@endrelia.com>
Date:   Fri Oct 6 18:31:09 2006 +0200

    [ALSA] ASoC: core code
    
    This patch is the core of ASoC functionality.
    The ASoC core is designed to provide the following features :-
    o  Codec independence. Allows reuse of codec drivers on other platforms
    and machines.
    o Platform driver code reuse. Reuse of platform specific audio DMA and
    DAI drivers on different machines.
    o Easy I2S/PCM digital audio interface configuration between codec and
    SoC. Each SoC interface and codec registers their audio interface
    capabilities with the core at initialisation. The capabilities are
    subsequently matched and configured at run time for best power and
    performance when the application hw params are known.
     o Machine specific controls/operations: Allow machines to add controls
    and operations to the audio subsystem. e.g. volume control for speaker
    amp.
    To achieve all this, ASoC splits an embedded audio system into 3
    components :-
    1. Codec driver: The codec driver is platform independent and contains
    audio controls, audio interface capabilities, codec dapm and codec IO
    functions.
    2. Platform driver: The platform driver contains the audio dma engine
    and audio interface drivers (e.g. I2S, AC97, PCM) for that platform.
    3. Machine driver: The machine driver handles any machine specific
    controls and audio events. i.e. turning on an amp at start of playback.
    
    Signed-off-by: Frank Mandarino <fmandarino@endrelia.com>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.Girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 808db4a4512bedd45b62de255f7eedb5d5b788b9
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Fri Oct 6 18:20:14 2006 +0200

    [ALSA] ASoC: core and dapm headers
    
    This patch adds the ASoC and DAPM headers.
    Features:-
     o Defines Digital Audio Interface (DAI) API
     o Defines Codec, Platform and Machine API
     o Defines Dynamic Audio Power Management API
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 3388c37e04ec0e35ebc1b4c732fdefc9ea938f3b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Oct 6 17:06:39 2006 +0200

    [ALSA] intel8x0 - Use pci_iomap
    
    Use pci_iomap and ioread*/iowrite*() functions for accessing
    hardwares.  pci_iomap is suitable for hardwares like ICH and
    compatible that have both PIO and MMIO.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c7132aeb72ad1106dc76279de4d005f9e1c5815c
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Oct 6 15:12:29 2006 +0200

    [ALSA] pcm core: add prealloc_max file to substream directory to show maximum DMA size
    
    Users ask us many times about the maximum DMA size for PCM devices. This
    file gives them a hint in KB.
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b66b3cfe6c2f6560f351278883a325b6ebc478f5
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Fri Oct 6 09:34:20 2006 +0200

    [ALSA] hda_intel: increase maximum DMA buffer size to 1024MB
    
    See ALSA bug#2481 .
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bbb53551e31dce3cdbf61330e135179a55c82fd1
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Oct 5 16:21:19 2006 +0200

    [ALSA] emu10k1 - Fix compile warning
    
    Fixed a compile warning regarding print format for size_t.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9244b2c3079faac79b3b961116bd548c45087e2c
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Oct 5 16:02:22 2006 +0200

    [ALSA] alsa core: convert to list_for_each_entry*
    
    This patch converts most uses of list_for_each to list_for_each_entry all
    across alsa. In some place apparently an item can be on a list with
    different pointers so of course that isn't compatible with list_for_each, I
    therefore didn't touch those places.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d595ee7e0162ae66faa8c4c7d8c2069b40d64fed
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Oct 5 15:08:23 2006 +0200

    [ALSA] aoa: fix up i2sbus_attach_codec
    
    This patch changes i2sbus_attach_codec to implement a proper error handling
    strategy using labels to jump to the right part. Since it has an elaborate
    set-up sequence it also needs that tear-down, which I had hard-coded
    inbetween all the checks. This increases readability and should reduce .text
    size as well.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 73e85fe8452b950b93cfb61377f749e9b15437fb
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Oct 5 15:07:23 2006 +0200

    [ALSA] aoa: set device pointer in pcms
    
    This patch makes a few whitespace cleanups and makes i2sbus assign the new
    struct device pointer in struct snd_pcm so that the proper device symlink
    shows up in sysfs.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c78085fcd2ce7cd036e1488472eb41a64d70949a
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Oct 5 15:06:34 2006 +0200

    [ALSA] alsa core: add struct device pointer to struct snd_pcm
    
    This patch adds a struct device pointer to struct snd_pcm in order to be
    able to give it a different device than the card. It defaults to the card's
    device, however, so it should behave identically for drivers not touching
    the field.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 12b131c4cf3eb1dc8a60082a434b7b100774c2e7
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Oct 5 15:05:34 2006 +0200

    [ALSA] allow registering an alsa device with struct device pointer
    
    This patch adds snd_register_device_for_dev taking a struct device
    pointer to link the new device to and makes snd_register_device a simple
    static inline wrapper around it.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit feaa6a74d852be40c0e717471aa92eead012052c
Author: Jochen Voss <voss@seehuhn.de>
Date:   Wed Oct 4 18:08:43 2006 +0200

    [ALSA] Enable the analog loopback of the Revolution 5.1
    
    Enable the analog loopback of the Revolution 5.1 card.
    This patch adds support for the PT2258 volume controller and modifies
    the Revolution 5.1 driver to make use of this facility.  This allows
    to control the analog loopback of the card.
    
    Signed-off-by: Jochen Voss <voss@seehuhn.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit a58e7cb16dfae8a3c1c98a7ab7ca02a9e9b38921
Author: Jochen Voss <voss@seehuhn.de>
Date:   Wed Oct 4 18:04:10 2006 +0200

    [ALSA] Enable capture from line-in and CD on Revolution 5.1
    
    Enable capture from line-in and CD on the Revolution 5.1 card.
    This patch adds support for switching between the 5 input channels of
    the AK5365 ADC and modifies the Revolution 5.1 driver to make use of
    this facility.  Previously the capture channel was fixed to channel 0
    (microphone on the Revolution 5.1 card).
    
    Signed-off-by: Jochen Voss <voss@seehuhn.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e4f8e656d8c152c08cd44d0e3c21f009fab09952
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Oct 4 13:42:57 2006 +0200

    [ALSA] usb-audio: allow pausing
    
    Add pause capabilities for both USB playback and capture streams.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1700f3080d98323e91864d67cb9f6d46f818ccf0
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Oct 4 13:41:25 2006 +0200

    [ALSA] usb-audio: merge playback/capture hardware information structs
    
    The hardware information structures for playback and capture streams,
    respectively, are the same, so we can use just one structure for both
    streams.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9f4bd5dde81b5cb94e4f52f2f05825aa0422f1ff
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Oct 1 10:48:04 2006 +0100

    [ALSA] snd-emu10k1: Added support for emu1010, including E-Mu 1212m and E-Mu 1820m
    
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit acf1da4522add3771f4851c09c7fe6bcf1dd6636
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Feb 9 08:29:19 2007 +0100

    mmc: sdhci: Stop asking for mail
    
    We get enough error reports without having to ask for it.
    Remove notices about mailing the development list.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 52fbf9c976b36654e08e94c3107ddbaac7e2da33
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Feb 9 08:23:41 2007 +0100

    mmc: sdhci: Remove driver version
    
    The driver version was only really meaningful when it was an
    out-of-tree driver. Now we can use the version of the kernel.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 1615cc224e5d822c91bf0b8128f54680c6e92d2f
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Feb 9 08:19:07 2007 +0100

    mmc: wbsd: Remove driver version
    
    The driver version was only really meaningful when it was an
    out-of-tree driver. Now we can use the version of the kernel.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit b2b7910d5d3cb6e53b40a435bbc3f1de60f4464a
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Tue Feb 6 16:14:43 2007 -0800

    ACPI: toshiba_acpi: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d94d3dff0d5da3bdfcbb424ba5c08534521fd690
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Feb 7 16:51:46 2007 -0800

    ACPI: bay: fix build warning
    
    drivers/acpi/bay.c: In function 'bay_add':
    drivers/acpi/bay.c:310: warning: statement with no effect
    
    Fix it by rewriting those macros in C.  Much nicer.
    
    Cc: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a74388e21ef2adbba4450f7b3f05ffe88df630d5
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Feb 5 16:09:11 2007 -0800

    ACPI: updates rtc-cmos device platform_data
    
    Update ACPI to export its RTC extension information through platform_data
    to the PNPACPI or platform bus device node used on the system being set up.
    
    This will need to be updated later to provide a firmware hook to handle
    system suspend with an alarm pending.
    
    Len notes that "Eventually we may bundle ACPI/PNP/PNPACPI..." but if/when
    that happens, ACPI can simplify this without my help.
    
    And until it does, the separate patch creating a platform_device (on all
    X86_PC systems, even without ACPI) will be needed.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1c0f0575fd02a3996f09cac2ef29c4cc5c2d279d
Author: Matthew C Campbell <calvinmc@gmail.com>
Date:   Mon Feb 5 16:09:09 2007 -0800

    ACPI: asus_acpi: Add support for Asus Z81SP
    
    Adds support in asus_acpi for the Asus Z81SP laptop.  This preserves all
    old functionality when improperly detected as well as enabling Bluetooth
    support.
    
    Signed-off-by: Matthew C Campbell <calvinmc@gmail.com>
    Acked-by: Corentin Chary <corentincj@iksaif.net>
    Cc: Karol Kozimor <sziwan@users.sourceforge.net>
    Cc: <acpi4asus-user@lists.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c41458aca0defd5b16239ffd65630d1b87672ee5
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Mon Feb 5 16:09:07 2007 -0800

    ACPI: bay: remove ACPI driver struct
    
    The bay driver is a platform driver, and doesn't need to also be an acpi
    driver.  Remove the acpi driver related structures and callbacks, they didn't
    do anything anyway.  Switch to uevent for user space event notification.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2cb4abd12bab7efd22a8b69d3b9a739500e8fee5
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Wed Feb 7 15:52:36 2007 -0800

    MAINTAINERS: update DMFE and wireless drivers mailing list
    
    List netdev as the mailing list for DMFE (network driver)
    instead of lkml.
    
    List linux-wireless as the mailing list for wireless network drivers.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9b4c7a4ec988d9b8bbe847f3c983938220e3a38b
Author: Li Yang <leoli@freescale.com>
Date:   Thu Feb 8 17:35:54 2007 +0800

    ucc_geth: Add support to local-mac-address property
    
    IEEE-1275 defines local-mac-address to be a standard
    property name to specify preassigned network address.
    This patch adds support for it.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a1862a53df1a57387aeee059276ba4233e12b4db
Author: Li Yang <leoli@freescale.com>
Date:   Thu Feb 8 17:34:42 2007 +0800

    ucc_geth: Remove obsolete workaround of link speed change
    
    The workaround used a long delay of 4s which caused problem
    when two link-changes happens at the same time.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Wu Xiaochuan <xiao-chuan.wu@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0ee8d33c64df9a719fd61ba693203e3b33b9e10a
Author: Divy Le Ray <divy@chelsio.com>
Date:   Thu Feb 8 16:55:59 2007 -0800

    cxgb3: sysfs attributes in -mm tree
    
    This patch fixes the usage of sysfs attributes in cxgb3 for the -mm tree.
    It is built against the driver commited in the -mm tree.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cde36b37d6fa5ebc8c95461a972c379185626b2c
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Thu Feb 8 10:28:08 2007 +0200

    [MTD] OneNAND: Select correct chip's bufferRAM for DDP
    
    OneNAND double-density package (DDP) has two chips, each with
    their own bufferRAM.  The driver will skip loading data from
    the NAND core if the data can be found in a bufferRAM, however
    in that case, the correct chip's bufferRAM must be selected
    before reading from bufferRAM.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 1539b98b561754252dd520b98fa03a688a4f81b5
Author: Jiri Bohac <jbohac@suse.cz>
Date:   Thu Feb 8 16:02:21 2007 -0800

    [IPX]: Fix NULL pointer dereference on ipx unload
    
    Fixes a null pointer dereference when unloading the ipx module.
    
    On initialization of the ipx module, registering certain packet
    types can fail. When this happens, unloading the module later
    dereferences NULL pointers.  This patch fixes that. Please apply.
    
    Signed-off-by: Jiri Bohac <jbohac@suse.cz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 42c05f6e6e3d57495054a4cae35850b3f7d1c343
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Feb 8 16:01:09 2007 -0800

    [ATM]: atmarp.h needs to always include linux/types.h
    
    To provide the __be* types, even for userspace includes.
    
    Reported by Andrew Walrond.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cb6efb39163bfb6bb6475fa7c8a5e08e44dbf14a
Author: Mike Frysinger <vapier@gentoo.org>
Date:   Mon Feb 5 16:34:01 2007 -0800

    [PATCH] use __u64 rather than u64 in parisc statfs structs
    
    Use __u64 rather than u64 in the struct statfs64 exported to userspace.
    
    Signed-off-by: Mike Frysinger <vapier@gentoo.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 742433b00b1c53d447a10f215cf887e4cb3406b5
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Feb 5 16:34:00 2007 -0800

    [PATCH] PA-RISC: Fix bogus warnings from modpost
    
    parisc and parisc64 seem to name sections a little differently from other
    targets.  parisc64 gives spurious warnings like:
    
    WARNING: drivers/net/dummy.o - Section mismatch: reference to .init.text:dummy_setup from .data.rel.ro between '.LC1' (at offset 0x0) and '.LC6'
    
    and parisc gives spurious warnings like:
    
    WARNING: drivers/net/dummy.o - Section mismatch: reference to .init.text:dummy_setup from .rodata.cst4 between '.LC1' (at offset 0x0) and '.LC6'
    
    Given the other comments in modpost.c, it seems that the best solution is
    to move rodata down to the 'match at start of name' section and add
    .data.rel.ro to the 'match entire name' section.
    
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 29a1e1d2732c7bfa94465749285aea0f2ed12213
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Mon Feb 5 16:33:59 2007 -0800

    [PATCH] parisc: fix module_param iommu permission
    
    Fix/change module_param permissions parameter from an init value
    to a permission value.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Matthew Wilcox <willy@debian.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 9783e1df7a6bd1e4dc5e2cafcdc29b65a47473d6
Merge: 4387ff7... dc2e2f3...
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Feb 8 15:25:18 2007 -0800

    Merge branch 'HEAD' of master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6
    
    Conflicts:
    
    	crypto/Kconfig

commit 8f34f6cfa27ddae8faf10aef986db2fda1ba6791
Author: Timur Tabi <timur@freescale.com>
Date:   Thu Feb 8 10:47:31 2007 -0600

    [POWERPC] QE: Rename ucc_slow_info.us_regs to ucc_slow_info.regs
    
    Rename the 'us_regs' field of the ucc_slow_info structure in ucc_slow.h
    to just 'regs'.  The equivalent field in the ucc_fast_info structure is
    also called 'regs', so this patch makes them comparable, and makes the
    code a little easier to read, because there already is a 'us_regs' in
    another ucc_slow structure.
    
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 4387ff75f29412a234d394b0276c2b239d3d3844
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Feb 8 15:06:08 2007 -0800

    [NET]: Fix net/socket.c warnings.
    
    GCC (correctly) says:
    
    net/socket.c: In function sys_sendto:
    net/socket.c:1510: warning: err may be used uninitialized in this function
    net/socket.c: In function sys_recvfrom:
    net/socket.c:1571: warning: err may be used uninitialized in this function
    
    sock_from_file() either returns filp->private_data or it
    sets *err and returns NULL.
    
    Callers return "err" on NULL, but filp->private_data could
    be NULL.
    
    Some minor rearrangements of error handling in sys_sendto
    and sys_recvfrom solves the issue.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 23bb80d2158cf4421fe239d788fd53cafb151050
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Thu Feb 8 14:59:57 2007 -0800

    [NET]: cleanup sock_from_file()
    
    I believe dead code from sock_from_file() can be cleaned up.
    
    All sockets are now built using sock_attach_fd(), that puts the 'sock' pointer
    into file->private_data and &socket_file_ops into file->f_op
    
    I could not find a place where file->private_data could be set to NULL,
    keeping opened the file.
    
    So to get 'sock' from a 'file' pointer, either :
    
    - This is a socket file (f_op == &socket_file_ops), and we can directly get
    'sock' from private_data.
    - This is not a socket, we return -ENOTSOCK and dont even try to find a socket
    via dentry/inode :)
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dbca9b2750e3b1ee6f56a616160ccfc12e8b161f
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Thu Feb 8 14:16:46 2007 -0800

    [NET]: change layout of ehash table
    
    ehash table layout is currently this one :
    
    First half of this table is used by sockets not in TIME_WAIT state
    Second half of it is used by sockets in TIME_WAIT state.
    
    This is non optimal because of for a given hash or socket, the two chain heads
    are located in separate cache lines.
    Moreover the locks of the second half are never used.
    
    If instead of this halving, we use two list heads in inet_ehash_bucket instead
    of only one, we probably can avoid one cache miss, and reduce ram usage,
    particularly if sizeof(rwlock_t) is big (various CONFIG_DEBUG_SPINLOCK,
    CONFIG_DEBUG_LOCK_ALLOC settings). So we still halves the table but we keep
    together related chains to speedup lookups and socket state change.
    
    In this patch I did not try to align struct inet_ehash_bucket, but a future
    patch could try to make this structure have a convenient size (a power of two
    or a multiple of L1_CACHE_SIZE).
    I guess rwlock will just vanish as soon as RCU is plugged into ehash :) , so
    maybe we dont need to scratch our heads to align the bucket...
    
    Note : In case struct inet_ehash_bucket is not a power of two, we could
    probably change alloc_large_system_hash() (in case it use __get_free_pages())
    to free the unused space. It currently allocates a big zone, but the last
    quarter of it could be freed. Again, this should be a temporary 'problem'.
    
    Patch tested on ipv4 tcp only, but should be OK for IPV6 and DCCP.
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eac3731bd04c7131478722a3c148b78774553116
Author: Jennifer Hunt <jenhunt@us.ibm.com>
Date:   Thu Feb 8 13:51:54 2007 -0800

    [S390]: Add AF_IUCV socket support
    
    From: Jennifer Hunt <jenhunt@us.ibm.com>
    
    This patch adds AF_IUCV socket support.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5da5e658debb7deddbfe5c133c76db3be0a3e12c
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Feb 8 13:51:11 2007 -0800

    [S390]: Adapt special message interface to new IUCV API
    
    Adapt special message interface to new IUCV API
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eebce38567373e3abbb640ab145d154831cc55df
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Feb 8 13:50:33 2007 -0800

    [S390]: Adapt netiucv driver to new IUCV API
    
    Adapt netiucv network device driver to new IUCV API
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9101c5b3f1d018efa36d12cdcde89955642c73d
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Feb 8 13:40:41 2007 -0800

    [S390]: Adapt vmlogrdr driver to new IUCV API
    
    Adapt vmlogrdr character device driver to new IUCV API
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c667aac8009b41ecaecb1fc72476553cf12d4732
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Feb 8 13:38:11 2007 -0800

    [S390]: Adapt monreader driver to new IUCV API
    
    Adapt monreader character device driver to new IUCV API
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2356f4cb191100a5e92d537f13e5efdbc697e9cb
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Feb 8 13:37:42 2007 -0800

    [S390]: Rewrite of the IUCV base code, part 2
    
    Add rewritten IUCV base code to net/iucv.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 33a67fe898dbbe25589d2fca805cb68cfd7d311f
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Feb 8 13:36:44 2007 -0800

    [S390]: Rewrite of the IUCV base code, part 1
    
    Remove the old IUCV code from drivers/s390/net
    Remove approprirate IUCV entries from drivers/s390/net/Makefile,
    drivers/s390/net/Kconfig and arch/s390/defconfig
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9c2e9dcb82a8d7288c78e7d9a0cf315c456ac54
Author: Andrew Hendry <andrew.hendry@gmail.com>
Date:   Thu Feb 8 13:35:18 2007 -0800

    [X.25]: Adds /proc/net/x25/forward to view active forwarded calls.
    
    View the active forwarded calls
    cat /proc/net/x25/forward
    
    Signed-off-by: Andrew Hendry <andrew.hendry@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 39e21c0d34fe769d06839679fa920217359a58b0
Author: Andrew Hendry <andrew.hendry@gmail.com>
Date:   Thu Feb 8 13:34:36 2007 -0800

    [X.25]: Adds /proc/sys/net/x25/x25_forward to control forwarding.
    
    echo "1" > /proc/sys/net/x25/x25_forward
    To turn on x25_forwarding, defaults to off
    Requires the previous patch.
    
    Signed-off-by: Andrew Hendry <andrew.hendry@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95a9dc4390c8215d922e0ca2ebb95279261fe795
Author: Andrew Hendry <andrew.hendry@gmail.com>
Date:   Thu Feb 8 13:34:02 2007 -0800

    [X.25]: Add call forwarding
    
    Adds call forwarding to X.25, allowing it to operate like an X.25 router.
    Useful if one needs to manipulate X.25 traffic with tools like tc.
    This is an update/cleanup based off a patch submitted by Daniel Ferenci a few years ago.
    
    Thanks Alan for the feedback.
    Added the null check to the clones.
    Moved the skb_clone's into the forwarding functions.
    
    Worked ok with Cisco XoT, linux X.25 back to back, and some old NTUs/PADs.
    
    Signed-off-by: Andrew Hendry <andrew.hendry@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e610e679dd0057403c96cd31f8739792780732ee
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Feb 8 13:29:15 2007 -0800

    [XFRM]: xfrm_migrate() needs exporting to modules.
    
    Needed by xfrm_user and af_key.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6ed0ec0eea644207fa146cb541b99f96a8942f0
Author: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
Date:   Thu Feb 8 13:15:05 2007 -0800

    [PFKEYV2]: CONFIG_NET_KEY_MIGRATE option
    
    Add CONFIG_NET_KEY_MIGRATE option which makes it possible for user
    application to send or receive MIGRATE message to/from PF_KEY socket.
    
    Signed-off-by: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 08de61beab8a21c8e0b3906a97defda5f1f66ece
Author: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
Date:   Thu Feb 8 13:14:33 2007 -0800

    [PFKEYV2]: Extension for dynamic update of endpoint address(es)
    
    Extend PF_KEYv2 framework so that user application can take advantage
    of MIGRATE feature via PF_KEYv2 interface. User application can either
    send or receive an MIGRATE message to/from PF_KEY socket.
    
    Detail information can be found in the internet-draft
    <draft-sugimoto-mip6-pfkey-migrate>.
    
    Signed-off-by: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d0473655c8293b49808c9488152573beab4458cf
Author: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
Date:   Thu Feb 8 13:13:07 2007 -0800

    [XFRM]: CONFIG_XFRM_MIGRATE option
    
    Add CONFIG_XFRM_MIGRATE option which makes it possible for for user
    application to send or receive MIGRATE message to/from netlink socket.
    
    Signed-off-by: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5c79de6e79cd8ecfbae28886be3ee49044f3a4d4
Author: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
Date:   Thu Feb 8 13:12:32 2007 -0800

    [XFRM]: User interface for handling XFRM_MSG_MIGRATE
    
    Add user interface for handling XFRM_MSG_MIGRATE. The message is issued
    by user application. When kernel receives the message, procedure of
    updating XFRM databases will take place.
    
    Signed-off-by: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 80c9abaabf4283f7cf4a0b3597cd302506635b7f
Author: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
Date:   Thu Feb 8 13:11:42 2007 -0800

    [XFRM]: Extension for dynamic update of endpoint address(es)
    
    Extend the XFRM framework so that endpoint address(es) in the XFRM
    databases could be dynamically updated according to a request (MIGRATE
    message) from user application. Target XFRM policy is first identified
    by the selector in the MIGRATE message. Next, the endpoint addresses
    of the matching templates and XFRM states are updated according to
    the MIGRATE message.
    
    Signed-off-by: Shinta Sugimoto <shinta.sugimoto@ericsson.com>
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c9b75d132261096ac1170354b9e27837af76a512
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 17:36:34 2007 +0100

    [ARM] 4154/1: AT91: Clock update
    
    Unconditionally disabling the PCKs (Programmable Clocks) is not a good
    idea as it breaks boards that depend on those clocks being enabled by
    bootloaders.
    Therefore only disable unused clocks late in the init process, giving
    the board init code the chance to claim the clock.
    
    Patch from Steven Scholz.
    
    Since the HCK clocks on SAM9261 are already being registered as a
    independent clocks, we don't need the special case for HCK0 on the
    SAM9261.  Platform-init code and drivers should use the clock API to
    enable/disable the clock.
    
    Patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f2131d348f0bd252801f641018a90d59c987ce48
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Feb 8 20:46:20 2007 +0000

    [ARM] Always mark ARMv6 PTWs outer cacheable
    
    Other platforms other than SMP may have an outer cache.  For these, we
    also need to mark the page table walks outer cacheable.  Since marking
    the walks always outer cacheable apparantly has no side effects, we
    might as well always mark them so.
    
    However, we continue to only mark PTWs shared if we have SMP enabled.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9934e81c8c4981342dab3e386aff5d4499bea0d2
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:14:28 2007 -0800

    [NETFILTER]: ip6_tables: remove redundant structure definitions
    
    Move ip6t_standard/ip6t_error_target/ip6t_error definitions to ip6_tables.h
    instead of defining them in each table individually.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3e79c05b45c3d6115d8c46e3012939c71573f13
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:13:20 2007 -0800

    [NETFILTER]: ip_tables: remove declaration of non-existant ipt_find_target function
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0ca215a730b2c4d5024143e64b0d80d50858667
Author: Masahide NAKAMURA <nakam@linux-ipv6.org>
Date:   Wed Feb 7 15:12:57 2007 -0800

    [NETFILTER]: ip6_tables: support MH match
    
    This introduces match for Mobility Header (MH) described by Mobile IPv6
    specification (RFC3775). User can specify the MH type or its range to be
    matched.
    
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: Yasuyuki Kozakai <kozakai@linux-ipv6.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e60a13e030867078f3c9fef8dca6cd8a5b883478
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Wed Feb 7 15:12:33 2007 -0800

    [NETFILTER]: {ip,ip6}_tables: use struct xt_table instead of redefined structure names
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6709dbbb1978abe039ea4b76c364bf003bf40de5
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Wed Feb 7 15:11:19 2007 -0800

    [NETFILTER]: {ip,ip6}_tables: remove x_tables wrapper functions
    
    Use the x_tables functions directly to make it better visible which
    parts are shared between ip_tables and ip6_tables.
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e1fd0586b04d624c597834320d9e57d6f2f4b878
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Wed Feb 7 15:10:34 2007 -0800

    [NETFILTER]: x_tables: fix return values for LOG/ULOG
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 41f4689a7c8cd76b77864461b3c58fde8f322b2c
Author: Eric Leblond <eric@inl.fr>
Date:   Wed Feb 7 15:10:09 2007 -0800

    [NETFILTER]: NAT: optional source port randomization support
    
    This patch adds support to NAT to randomize source ports.
    
    Signed-off-by: Eric Leblond <eric@inl.fr>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cdd289a2f833b93e65b9a09a02c37f47a58140a8
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:09:46 2007 -0800

    [NETFILTER]: add IPv6-capable TCPMSS target
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8d0f9526ff8510d6fa5e708ef5386af19503299
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:07:43 2007 -0800

    [NET]: Add UDPLITE support in a few missing spots
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5eb87f456ebdc983164f0913b53c199ca9673887
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:07:22 2007 -0800

    [NETFILTER]: bridge-netfilter: use nf_register_hooks/nf_unregister_hooks
    
    Additionally mark the init function __init.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit efbc597634f239fa5ce84a131898341791fec1ec
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:07:08 2007 -0800

    [NETFILTER]: nf_nat: remove broken HOOKNAME macro
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2822b0d92675cd8d4fc73112334f4b113ba7c979
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Wed Feb 7 15:06:43 2007 -0800

    [NETFILTER]: Remove useless comparisons before assignments
    
    Remove unnecessary if() constructs before assignment.
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a09113c2c8ec59a5cc228efa5869aade2b8f13f7
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Feb 7 15:05:33 2007 -0800

    [NETFILTER]: tcp conntrack: do liberal tracking for picked up connections
    
    Do liberal tracking (only RSTs need to be in-window) for connections picked
    up without seeing a SYN to deal with window scaling. Also change logging
    of invalid packets not to log packets accepted by liberal tracking to avoid
    spamming the logs.
    
    Based on suggestion from James Ralston <ralston@pobox.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6fecd1985116fb08bdee3b9db6719e159fe5e43d
Author: Michal Schmidt <mschmidt@redhat.com>
Date:   Wed Feb 7 15:05:12 2007 -0800

    [NETFILTER]: Add SANE connection tracking helper
    
    This is nf_conntrack_sane, a netfilter connection tracking helper module
    for the SANE protocol used by the 'saned' daemon to make scanners available
    via network. The SANE protocol uses separate control & data connections,
    similar to passive FTP. The helper module is needed to recognize the data
    connection as RELATED to the control one.
    
    Signed-off-by: Michal Schmidt <mschmidt@redhat.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 719647e2131585ea0a82b05d3745b36be32975d8
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Wed Feb 7 00:12:13 2007 -0800

    [IRLAN]: handle out of memory errors
    
    This patch checks return values:
    
    - irlmp_register_client()
    - irlmp_register_service()
    - irlan_open()
    
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb5aa42734e72b3f02fc0b3cdd6105083f9880f1
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Wed Feb 7 00:11:11 2007 -0800

    [IRDA]: handle out of memory errors
    
    This patch checks return value of memory allocation functions
    for irda subsystem and fixes memory leaks in error cases.
    
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 22f8cde5bc336fd19603bb8c4572b33d14f14f87
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Feb 7 00:09:58 2007 -0800

    [NET]: unregister_netdevice as void
    
    There was no real useful information from the unregister_netdevice() return
    code, the only error occurred in a situation that was a driver bug. So
    change it to a void function.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f48d5ff1e44562a0ee87ce8ea3b798ce9d84370d
Author: Masahide NAKAMURA <nakam@linux-ipv6.org>
Date:   Wed Feb 7 00:07:39 2007 -0800

    [IPV6] RAW: Add checksum default defines for MH.
    
    Add checksum default defines for mobility header(MH) which
    goes through raw socket. As the result kernel's behavior is
    to handle MH checksum as default.
    
    This patch also removes verifying inbound MH checksum at
    mip6_mh_filter() since it did not consider user specified
    checksum offset and was redundant check with raw socket code.
    
    Signed-off-by: Masahide NAKAMURA <nakam@linux-ipv6.org>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cc63f70b8b410eb653449151821f6b8b9af6ca42
Author: Alexey Dobriyan <adobriyan@openvz.org>
Date:   Tue Feb 6 14:35:25 2007 -0800

    [IPV4/IPV6] multicast: Check add_grhead() return value
    
    add_grhead() allocates memory with GFP_ATOMIC and in at least two places skb
    from it passed to skb_put() without checking.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@openvz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f2f2102d1a1dbc83b5b37b6596cd8374120cbe16
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Feb 6 14:32:42 2007 -0800

    [XFRM]: Fix missed error setting in xfrm4_policy.c
    
    When we can't find the afinfo we should return EAFNOSUPPORT.
    GCC warned about the uninitialized 'err' for this path as well.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4337226228e1cfc1d70ee975789c6bd070fb597c
Author: Miika Komu <miika@iki.fi>
Date:   Tue Feb 6 14:27:32 2007 -0800

    [IPSEC]: IPv4 over IPv6 IPsec tunnel
    
    This is the patch to support IPv4 over IPv6 IPsec.
    
    Signed-off-by: Miika Komu <miika@iki.fi>
    Signed-off-by: Diego Beltrami <Diego.Beltrami@hiit.fi>
    Signed-off-by: Kazunori Miyazawa <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c82f963efe823d3cacaf1f1b7f1a35cc9628b188
Author: Miika Komu <miika@iki.fi>
Date:   Tue Feb 6 14:27:02 2007 -0800

    [IPSEC]: IPv6 over IPv4 IPsec tunnel
    
    This is the patch to support IPv6 over IPv4 IPsec
    
    Signed-off-by: Miika Komu <miika@iki.fi>
    Signed-off-by: Diego Beltrami <Diego.Beltrami@hiit.fi>
    Signed-off-by: Kazunori Miyazawa <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cdca72652adf597f7fef821a27595fd0dd5eea19
Author: Miika Komu <miika@iki.fi>
Date:   Tue Feb 6 14:24:56 2007 -0800

    [IPSEC]: exporting xfrm_state_afinfo
    
    This patch exports xfrm_state_afinfo.
    
    Signed-off-by: Miika Komu <miika@iki.fi>
    Signed-off-by: Diego Beltrami <Diego.Beltrami@hiit.fi>
    Signed-off-by: Kazunori Miyazawa <miyazawa@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 243cb4e56061c3f4cb76312c5527840344d57c3b
Author: Joe Jin <lkmaillist@gmail.com>
Date:   Tue Feb 6 14:16:40 2007 -0800

    [BONDING]: Replace kmalloc() + memset() pairs with the appropriate kzalloc() calls
    
    Replace kmalloc() + memset() pairs with the appropriate kzalloc() calls in
    the bonding driver.
    
    Signed-off-by: Joe Jin <lkmaillist@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

commit 6b31a515e3401685cdab2eeb6692f1a0f53f72ca
Author: Eric Dumazet <dada1@cosmosbay.com>
Date:   Tue Feb 6 13:29:21 2007 -0800

    [TG3]: Avoid an expensive divide.
    
    During an oprofile session of linux-2.6.20 on a dual opteron system, I noticed
    an expensive divide was done in tg3_poll().
    
    I am using gcc-4.1.1, so the following comment from drivers/net/tg3.c seems
    over-optimistic :
    
    /* Do not place this n-ring entries value into the tp struct itself,
      * we really want to expose these constants to GCC so that modulo et
      * al.  operations are done with shifts and masks instead of with
      * hw multiply/modulo instructions.  Another solution would be to
      * replace things like '% foo' with '& (foo - 1)'.
      */
    #define TG3_RX_RCB_RING_SIZE(tp)        \
             ((tp->tg3_flags2 & TG3_FLG2_5705_PLUS) ?  512 : 1024)
    
    Assembly code before patch :
    (oprofile results included)
       6434  0.0088 :ffffffff803684b9:       mov    0x6f0(%r15),%eax
        587 8.0e-04 :ffffffff803684c0:       and    $0x40000,%eax
       2170  0.0030 :ffffffff803684c5:       cmp    $0x1,%eax
                    :ffffffff803684c8:       lea    0x1(%r13),%eax
                    :ffffffff803684cc:       sbb    %ecx,%ecx
       2051  0.0028 :ffffffff803684ce:       xor    %edx,%edx
                    :ffffffff803684d0:       and    $0x200,%ecx
         20 2.7e-05 :ffffffff803684d6:       add    $0x200,%ecx
       1986  0.0027 :ffffffff803684dc:       div    %ecx
    103427  0.1410 :ffffffff803684de:       cmp    %edx,0xffffffffffffff7c(%rbp)
    
    Assembly code after the suggested patch :
    
    ffffffff803684b9:           mov    0x6f0(%r15),%eax
    ffffffff803684c0:           and    $0x40000,%eax
    ffffffff803684c5:           cmp    $0x1,%eax
    ffffffff803684c8:           sbb    %eax,%eax
    ffffffff803684ca:           inc    %r13d
    ffffffff803684cd:           and    $0x200,%eax
    ffffffff803684d2:           add    $0x1ff,%eax
    ffffffff803684d7:           and    %eax,%r13d
    ffffffff803684da:           cmp    %r13d,0xffffffffffffff7c(%rbp)
    
    Signed-off-by: Eric Dumazet <dada1@cosmosbay.com>
    Acked-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f08461ebf89e10f7db9042fb028359b810c3c81
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Mon Feb 5 18:18:21 2007 -0800

    [DCCP]: Warning fixes.
    
    net/dccp/ccids/ccid3.c: In function `ccid3_hc_rx_packet_recv':
    net/dccp/ccids/ccid3.c:1007: warning: long int format, different type arg (arg 3)
    net/dccp/ccids/ccid3.c:1007: warning: long int format, different type arg (arg 4)
    
    opaque types must be suitably cast for printing.
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 919afbd68863550665b328a78107bc2919c5e3f4
Author: Joe Jin <joe.jin@oracle.com>
Date:   Mon Feb 5 18:08:47 2007 -0800

    [NET] slip: Replace kmalloc() + memset() pairs with the appropriate kzalloc() calls
    
    This patch replace kmalloc() + memset() pairs with the appropriate
    kzalloc().
    
    Signed-off-by: Joe Jin <joe.jin@oracle.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 97353cb4c05c2edf260e9d1b19a29d3cc0060a09
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 5 18:07:27 2007 -0800

    [NET] net/wanrouter/wanmain.c: cleanups
    
    This patch contains the following cleanups:
    - make the following needlessly global functions static:
      - lock_adapter_irq()
      - unlock_adapter_irq()
    - #if 0 the following unused global functions:
      - wanrouter_encapsulate()
      - wanrouter_type_trans()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 84ff602efba2664762070add0600aa5c870a2659
Author: Daniel Walker <dwalker@mvista.com>
Date:   Mon Feb 5 18:04:06 2007 -0800

    [ATM]: Fix for crash in adummy_init()
    
    This was reported by Ingo Molnar here,
    
    http://lkml.org/lkml/2006/12/18/119
    
    The problem is that adummy_init() depends on atm_init() , but adummy_init()
    is called first.
    
    So I put atm_init() into subsys_initcall which seems appropriate, and it
    will still get module_init() if it becomes a module.
    
    Interesting to note that you could crash your system here if you just load
    the modules in the wrong order.
    
    Signed-off-by: Daniel Walker <dwalker@mvista.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f5a6e01c093ca60c0cab15c47c8e7e199fbbc9e6
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Feb 5 17:59:51 2007 -0800

    [NET]: user of the jiffies rounding code: Networking
    
    This patch introduces users of the round_jiffies() function in the
    networking code.
    
    These timers all were of the "about once a second" or "about once
    every X seconds" variety and several showed up in the "what wakes the
    cpu up" profiles that the tickless patches provide.  Some timers are
    highly dynamic based on network load; but even on low activity systems
    they still show up so the rounding is done only in cases of low
    activity, allowing higher frequency timers in the high activity case.
    
    The various hardware watchdogs are an obvious case; they run every 2
    seconds but aren't otherwise specific of exactly when they need to
    run.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 104439a8876a98eac1b6593907a3c7bc51e362fe
Author: John Heffner <jheffner@psc.edu>
Date:   Mon Feb 5 17:53:11 2007 -0800

    [TCP]: Don't apply FIN exception to full TSO segments.
    
    Signed-off-by: John Heffner <jheffner@psc.edu>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8a3c3a972741dec77220a19642bd3331551ad2d9
Author: Baruch Even <baruch@ev-en.org>
Date:   Sun Feb 4 23:37:41 2007 -0800

    [TCP]: Check num sacks in SACK fast path
    
    We clear the unused parts of the SACK cache, This prevents us from mistakenly
    taking the cache data if the old data in the SACK cache is the same as the data
    in the SACK block. This assumes that we never receive an empty SACK block with
    start and end both at zero.
    
    Signed-off-by: Baruch Even <baruch@ev-en.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f74651ae626ec672028587bc700538076dfbefb
Author: Baruch Even <baruch@ev-en.org>
Date:   Sun Feb 4 23:36:42 2007 -0800

    [TCP]: Seperate DSACK from SACK fast path
    
    Move DSACK code outside the SACK fast-path checking code. If the DSACK
    determined that the information was too old we stayed with a partial cache
    copied. Most likely this matters very little since the next packet will not be
    DSACK and we will find it in the cache. but it's still not good form and there
    is little reason to couple the two checks.
    
    Since the SACK receive cache doesn't need the data to be in host order we also
    remove the ntohl in the checking loop.
    
    Signed-off-by: Baruch Even <baruch@ev-en.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fda03fbb56bf88f1fb1c57b2474082e5addaa884
Author: Baruch Even <baruch@ev-en.org>
Date:   Sun Feb 4 23:35:57 2007 -0800

    [TCP]: Advance fast path pointer for first block only
    
    Only advance the SACK fast-path pointer for the first block, the
    fast-path assumes that only the first block advances next time so we
    should not move the cached skb for the next sack blocks.
    
    Signed-off-by: Baruch Even <baruch@ev-en.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ffbc61117d32dc4e768f999325ecfb2528d6b303
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Feb 4 23:33:10 2007 -0800

    [PACKET]: Fix skb->cb clobbering between aux and sockaddr
    
    Both aux data and sockaddr tries to use the same buffer which
    obviously doesn't work.  We just happen to have 4 bytes free in
    the skb->cb if you take away the maximum length of sockaddr_ll.
    That's just enough to store the one piece of info from aux data
    that we can't generate at recvmsg(2) time.
    
    This is what the following patch does.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8dc4194474159660d7f37c495e3fc3f10d0db8cc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Feb 4 23:31:32 2007 -0800

    [PACKET]: Add optional checksum computation for recvmsg
    
    This patch is needed to make ISC's DHCP server (and probably other
    DHCP servers/clients using AF_PACKET) to be able to serve another
    client on the same Xen host.
    
    The problem is that packets between different domains on the same
    Xen host only have partial checksums.  Unfortunately this piece of
    information is not passed along in AF_PACKET unless you're using
    the mmap interface.  Since dhcpd doesn't support packet-mmap, UDP
    packets from the same host come out with apparently bogus checksums.
    
    This patch adds a mechanism for AF_PACKET recvmsg(2) to return the
    status along with the packet.  It does so by adding a new cmsg that
    contains this information along with some other relevant data such
    as the original packet length.
    
    I didn't include the time stamp information since there is already
    a cmsg for that.
    
    This patch also changes the mmap code to set the CSUMNOTREADY flag
    on all packets instead of just outoing packets on cooked sockets.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8eb9086f21c73b38b5ca27558db4c91d62d0e70b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Feb 8 02:09:21 2007 -0800

    [IPV4/IPV6]: Always wait for IPSEC SA resolution in socket contexts.
    
    Do this even for non-blocking sockets.  This avoids the silly -EAGAIN
    that applications can see now, even for non-blocking sockets in some
    cases (f.e. connect()).
    
    With help from Venkat Tekkirala.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ba7808eac17360dda459f82222859b0e3879854b
Author: Frederik Deweerdt <frederik.deweerdt@gmail.com>
Date:   Sun Feb 4 20:15:27 2007 -0800

    [TCP]: remove tcp header from tcp_v4_check (take #2)
    
    The tcphdr struct passed to tcp_v4_check is not used, the following
    patch removes it from the parameter list.
    
    This adds the netfilter modifications missing in the patch I sent
    for rc3-mm1.
    
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0d78ebf3a0e33a1aeacf2fc518ad9273d6a1c2f
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Sun Feb 4 20:15:04 2007 -0800

    [IPV6] ROUTE: Do not route packets to link-local address on other device.
    
    With help from Wei Dong <weid@np.css.fujitsu.com>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 26932566a42d46aee7e5d526cb34fba9380cad10
Author: Patrick McHardy <kaber@trash.net>
Date:   Wed Jan 31 23:16:40 2007 -0800

    [NETLINK]: Don't BUG on undersized allocations
    
    Currently netlink users BUG when the allocated skb for an event
    notification is undersized. While this is certainly a kernel bug,
    its not critical and crashing the kernel is too drastic, especially
    when considering that these errors have appeared multiple times in
    the past and it BUGs even if no listeners are present.
    
    This patch replaces BUG by WARN_ON and changes the notification
    functions to inform potential listeners of undersized allocations
    using a unique error code (EMSGSIZE).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2cf6c36cb46d69057db2ebae0d8ec352e065f48b
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Wed Jan 31 12:21:24 2007 -0800

    [NET_SCHED] sch_prio: class statistics printing enabled
    
    This patch adds a dump_stats callback to enable
    printing of basic statistics of prio classes.
    (With help of Patrick McHardy).
    
    Signed-off-by: Jarek Poplawski <jarkao2@o2.pl>
    Acked-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91efa462054d44ae52b0c6c8325ed5e899f2cd17
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Tue Feb 6 02:34:45 2007 +0100

    ieee1394: fix host device registering when nodemgr disabled
    
    Since my commit 8252bbb1363b7fe963a3eb6f8a36da619a6f5a65 in 2.6.20-rc1,
    host devices have a dummy driver attached.  Alas the driver was not
    registered before use if ieee1394 was loaded with disable_nodemgr=1.
    
    This resulted in non-functional FireWire drivers or kernel lockup.
    http://bugzilla.kernel.org/show_bug.cgi?id=7942
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit a5782010b4e75cba571357efaa27df22a89427c2
Author: David Moore <dcm@acm.org>
Date:   Sat Feb 3 03:09:09 2007 -0500

    ieee1394: video1394: DMA fix
    
    This together with the phys_to_virt fix in lib/swiotlb.c::swiotlb_sync_sg
    fixes video1394 DMA on machines with DMA bounce buffers, especially Intel
    x86-64 machines with > 3GB RAM.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: David Moore <dcm@acm.org>
    Tested-by: Nicolas Turro <Nicolas.Turro@inrialpes.fr>

commit 0fe4c6fcacb28bda75b31f63d3629f640a6b9bf9
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Feb 3 16:48:51 2007 +0100

    ieee1394: raw1394: prevent unloading of low-level driver
    
    Unloading the low-level driver module of a FireWire host can lead to
    all sorts of trouble if a raw1394 userspace client is using the host.
    Just disallow it by incrementing the LLD's module reference count on
    a RAW1394_REQ_SET_CARD write operation.  Decrement it when the file
    is closed.
    
    This feature wouldn't be relevant if "modprobe -r video1394" or
    "modprobe -r dv1394" didn't automatically unload ohci1394 too.
    http://bugzilla.kernel.org/show_bug.cgi?id=7701
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Dan Dennedy <dan@dennedy.org>

commit 12ba145c9406da72c8288245f352de7f37188f1f
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Jan 27 13:54:23 2007 +0100

    ieee1394: dv1394: tidy up card removal
    
    small coding style touch-up and terser coding
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 88e7bf2a4c35d1200c2f72f5cd3d9e72c7f6c890
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Jan 27 13:52:52 2007 +0100

    ieee1394: dv1394: fix CardBus card ejection
    
    Fix NULL pointer dereference on hot ejection of a FireWire card while
    dv1394 was loaded.  http://bugzilla.kernel.org/show_bug.cgi?id=7121
    I did not test card ejection with open /dev/dv1394 files yet.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit beb2fdcad14af14fa38d5098003bd0f53e1c1185
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Thu Jan 25 22:35:47 2007 +0100

    ieee1394: sbp2: lower block queue alignment requirement
    
    The old setting is copy & waste from usb-storage and doesn't apply to
    sbp2.  There is only 4-byte alignment required for everything, except
    for S/G table elements which have to be 8-byte aligned according to the
    SBP-2 spec.  (They happen to be ____cacheline_aligned in our
    implementation.  Whether that's good is another question.)
    
    We now simply don't tune block queue alignment at all.  The default
    alignment would surely never become anything else than a multiple of 4,
    else tons of calls to blk_queue_dma_alignment would have to be added
    everywhere in drivers/...
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 9c31b387234287917023e64d1f11aedfd2685dd9
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sun Jan 14 19:40:41 2007 +0100

    ieee1394: sbp2: remove bogus "emulated" host flag
    
    There is no emulation going on here.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit d06170a9ba9c39ac0768676e268cb17f9f68a622
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sun Jan 7 21:51:48 2007 +0100

    ieee1394: save one word in struct hpsb_host
    
    hpsb_host.config_roms is a bitfield of which only one bit is currently
    used.  hpsb_host.update_config_rom is only a Boolean.  Neither one is
    accessed in hot code paths or with alignment requirements.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 3360177c62e86f476c4f1a057e13163383652f7b
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sun Jan 7 21:49:27 2007 +0100

    ieee1394: restore config ROM when resuming
    
    After PM suspend + resume, the local configuration ROM was not restored.
    This prevented remote nodes from recognizing the resuming machine.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 083922fe1c277603a03f0ca700fe5a76f11178c7
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Jan 6 15:07:05 2007 +0100

    ieee1394: ohci1394: drop pcmcia-cs compatibility code
    
    #ifdef PCMCIA is only true if compiled inside pcmcia-cs, isn't it?
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit b2051f887351864d862160e75bc24362c7af8914
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Wed Jan 3 19:32:13 2007 +0100

    ieee1394: nodemgr: check info_length in ROM header earlier
    
    The whole ROM area which is covered by the crc_length field of the ROM
    header was fetched before the info_length field was checked for correct
    general ROM format.  This might be wasteful or even dangerous with nodes
    with minimal ROM, nonstandard ROM, or corrupt ROM.
    
    Perform this check at the earliest opportunity.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit e658bc556b3b2e699c5d9ba65fcc955f35105f42
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jan 2 22:56:53 2007 +0100

    the scheduled IEEE1394_OUI_DB removal
    
    This patch contains the scheduled IEEE1394_OUI_DB removal.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    
    Update: Also remove drivers/ieee1394/.gitignore.
    Remove now unused struct members in drivers/ieee1394/nodemgr.h.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit d395a1774f34600d72f7d3796716f350ef29584b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jan 2 22:56:57 2007 +0100

    the scheduled IEEE1394_EXPORT_FULL_API removal
    
    This patch contains the scheduled IEEE1394_EXPORT_FULL_API removal.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    
    Update: Pull proper portion of feature-removal-schedule.txt.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 4618fd300187132d12c06c64366729dd7a5280f2
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Dec 30 15:37:09 2006 +0100

    ieee1394: sbp2: use a better wildcard for blacklist
    
    0x000000 could be a valid value to match against, but anything bigger
    than 0xffffff cannot.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit dcb71129841e5821c0cbbdd4017a6f202f180108
Author: Kristian Hogsberg <krh@redhat.com>
Date:   Sun Dec 17 14:34:09 2006 -0500

    Add PCI class ID for firewire OHCI controllers.
    
    Pull this define out of drivers/ieee1394/ohci1394.c and rename to match
    other PCI class defines.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 0749aaab4975d741e124c139d40f00853a451f7f
Author: Andrea Guzzo <xant@dyne.org>
Date:   Fri Dec 8 00:53:24 2006 +0100

    ieee1394: modified csr1212_key_id_type_map to support lisight
    
    This patch applies a little change in csr1212.c to fix iSight (firewire
    digital camera) related issues (but maybe other firewire devices could
    also need such modification)
    The actual implementation of the "csr1212_key_id_type_map" table doesn't
    support some node types used by the iSight for the audio unit. This
    limit makes the csr scanning routine to never see the audio unit node ,
    and consequently the iSight driver probe() routine to be never called
    and there is no way to hook an isight device when it is inserted.
    
    Signed-off-by: Andrea Guzzo <xant@xant.net>
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>

commit 5986a2ec35836a878350c54af4bd91b1de6abc59
Merge: 4318790... ff05d1c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Feb 8 10:37:22 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/mfasheh/ocfs2
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/mfasheh/ocfs2: (22 commits)
      configfs: Zero terminate data in configfs attribute writes.
      [PATCH] ocfs2 heartbeat: clean up bio submission code
      ocfs2: introduce sc->sc_send_lock to protect outbound outbound messages
      [PATCH] ocfs2: drop INET from Kconfig, not needed
      ocfs2_dlm: Add timeout to dlm join domain
      ocfs2_dlm: Silence some messages during join domain
      ocfs2_dlm: disallow a domain join if node maps mismatch
      ocfs2_dlm: Ensure correct ordering of set/clear refmap bit on lockres
      ocfs2: Binds listener to the configured ip address
      ocfs2_dlm: Calling post handler function in assert master handler
      ocfs2: Added post handler callable function in o2net message handler
      ocfs2_dlm: Cookies in locks not being printed correctly in error messages
      ocfs2_dlm: Silence a failed convert
      ocfs2_dlm: wake up sleepers on the lockres waitqueue
      ocfs2_dlm: Dlm dispatch was stopping too early
      ocfs2_dlm: Drop inflight refmap even if no locks found on the lockres
      ocfs2_dlm: Flush dlm workqueue before starting to migrate
      ocfs2_dlm: Fix migrate lockres handler queue scanning
      ocfs2_dlm: Make dlmunlock() wait for migration to complete
      ocfs2_dlm: Fixes race between migrate and dirty
      ...

commit 7ba526316ae122e60c0c7a40793491f71b9ec590
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Feb 8 18:14:13 2007 +0000

    [CIFS] Allow update of EOF on remote extend of file
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 595dcfecf642c8b0772989ed46f15ee03c25a205
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Feb 8 18:11:42 2007 +0000

    [CIFS] POSIX CIFS Extensions (continued) - POSIX Open
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 43187902cbfafe73ede0144166b741fb0f7d04e1
Merge: 21eb4fa... 07b2463...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Feb 8 10:04:48 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6:
      Revert "Driver core: convert SPI code to use struct device"

commit 21eb4fa1700112d1420d72e1de708af671a251c8
Merge: 0c0e8ca... d003e7a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Feb 8 10:04:20 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc
    
    * master.kernel.org:/pub/scm/linux/kernel/git/paulus/powerpc: (116 commits)
      [POWERPC] Add export of vgacon_remap_base
      [POWERPC] Remove bogus comment about page_is_ram
      [POWERPC] windfarm: don't die on suspend thread signal
      [POWERPC] Fix comment in kernel/irq.c
      [POWERPC] ppc: Fix booke watchdog initialization
      [POWERPC] PPC: Use ARRAY_SIZE macro when appropriate
      [POWERPC] Use ARRAY_SIZE macro when appropriate
      [POWERPC] Fix ppc64's writing to struct file_operations
      [POWERPC] ppc: use syslog macro for the printk log level
      [POWERPC] ppc: cs4218_tdm remove extra brace
      [POWERPC] Add mpc52xx/lite5200 PCI support
      [POWERPC] Only use H_BULK_REMOVE if the firmware supports it
      [POWERPC] Fixup error handling when emulating a floating point instruction
      [POWERPC] Enable interrupts if we are doing fp math emulation
      [POWERPC] Added kprobes support to ppc32
      [POWERPC] Make pSeries use the H_BULK_REMOVE hypervisor call
      [POWERPC] Clear RI bit in MSR before restoring r13 when returning to userspace
      [POWERPC] Fix performance monitor exception
      [POWERPC] Compile fixes for arch/powerpc dcr code
      [POWERPC] Maple: use mmio nvram
      ...

commit 0c0e8caf9fd6c9a49fb9fbdba14a8b7b4239adde
Merge: b892afd... 1545085...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Feb 8 10:03:28 2007 -0800

    Merge branch 'drm-patches' of master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6
    
    * 'drm-patches' of master.kernel.org:/pub/scm/linux/kernel/git/airlied/drm-2.6:
      drm: Allow for 44 bit user-tokens (or drm_file offsets)
      drm/via: Disable AGP DMA for chips with the new 3D engine.
      drm: update core memory manager from git drm tree
      drm: remove drm_ioremap and drm_ioremapfree
      i810/i830: use drm_core_ioremap instead of drm_ioremap
      drm: use vmalloc_user instead of vmalloc_32 for DRM_SHM
      via: allow for npot texture pitch alignment
      via: add some new chipsets
      via: some PCI posting flushes

commit b892afd1e60132a981b963929e352eabf3306ba2
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Thu Feb 8 08:16:44 2007 -0800

    kbuild: fix space for good (take 103)
    
    Michal Ostrowski points out what the real problem was: the spaces at the
    start of the definition of the 'checker-shell' make function.
    
    Cc: Michal Ostrowski <mostrows@watson.ibm.com>
    Acked-by: David S. Miller <davem@davemloft.net>
    Acked-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Acked-by: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f3cc28c797604fa1cda4aef3f250f465de54a0ca
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Thu Feb 8 10:42:37 2007 -0500

    Add Attansic L1 ethernet driver.
    
    This driver is a modified version of the Attansic reference driver
    for the L1 ethernet adapter.  Attansic has granted permission for
    its inclusion in the mainline kernel.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3e1a80f11f89f318e892694b501735abb51ef626
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Feb 8 16:26:23 2007 +0100

    [ARM] 4153/1: fix consistent_sync() off-by-one BUG check
    
    In consistent_sync(), start + size can end up pointing one byte
    beyond the end of the direct RAM mapping.  We shouldn't BUG() when
    this happens.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 108d093fdd75643dfc8c327f38125f4da76771e7
Author: Liam Girdwood <Liam.Girdwood@wolfsonmicro.com>
Date:   Thu Feb 8 16:23:29 2007 +0100

    [ARM] 4152/1: Add PXA SSP audio register defs and fixups
    
    This patchs adds some missing register bit defs for the PXA SSP ports audio registers and fixes up some other broken bit definitions as noticed by Russell.
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 93a3ddc201c501146c896d598deb61f3abbe4ab0
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 11:31:22 2007 +0100

    [ARM] 4151/1: AT91 / AVR32: Move at91_pdc.h to linux/atmel_pdc.h
    
    The Atmel AT91 and AVR32 processor architectures share many of the same
    peripherals.  The PDC (Peripheral Data Controller) registers are also
    implemented within in a number of the on-chip peripherals (eg, USART,
    MMC, SPI, SSC, etc).
    
    In a attempt not to duplicate the register definitions in each
    peripheral, or in each architecture, the at91_pdc.h header in
    asm-arm/arch-at91 and asm-avr32/arch-at32ap has been replaced with
    linux/atmel_pdc.h.
    
    The definitions have also been renamed from AT91_PDC_* to ATMEL_PDC_*,
    and the drivers updated accordingly.
    
    Original patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Acked-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 32f3f49910c7e228839c1cd144dbed8da342703b
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Wed Feb 7 08:43:35 2007 +0100

    [ARM] 4141/1: consolidate functions that handles gpio in pxa2xx_udc
    
    This patch renames pxa_gpio_set/get functions defined in drivers/usb/gadget/pxa2xx_udc.h to udc_gpio_set/get.
    
    These functions are moved from drivers/usb/gadget/pxa2xx_udc.h to include/asm-arm/arch-pxa2xx/udc.h
    
    Creates new functions: udc_gpio_to_irq, udc_gpio_init_vbus, udc_gpio_init_pullup in include/asm-arm/arch-pxa2xx/udc.h. These functions are used in drivers/usb/gadget/pxa2xx_udc.c instead of direct low-level (pxa2xx only) functions.
    
    Creates all these udc_gpio_* functions in include/asm-arm/arch-ixp4xx/udc.h. This implementation has no real code because ixp4xx doesn't use vbus - only vbus uses all these gpio functions (and because ixp4xx misses any function which converts number of gpio pin into it's irq).
    
    This is next step to make pxa2xx_udc fully work on ixp4xx platform.
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 271f5ca638b322248c6bb0a797284886f39ccce6
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Feb 8 01:01:41 2007 +0100

    [ARM] 4142/1: ep93xx: handle IRQT_NOEDGE
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit da11d02c1da201840b94147d3366a32b41b151e1
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 11:18:14 2007 +0100

    [ARM] 4150/1: AT91: LED update
    
    The GPIO pin setup should be handed by the platform-setup code, and not
    directly by the driver.
    
    Original patch from David Brownell.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3392b309dbd1f1f37454c412c2045448300cf374
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 11:04:19 2007 +0100

    [ARM] 4149/1: AT91: Overrun in SAM9 gettimeoffset().
    
    Fix an overrun in the AT91SAM9 gettimeoffset() function.  This causes
    the time value returned by gettimeofday() to jump "backwards".
    
    Original patch from Michel Benoit.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 127a7ec69c9ce17a5add2e3c8c2f1a2733fb88d8
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 10:44:46 2007 +0100

    [ARM] 4148/1: AT91: Physically mapped flash on CSB337 and CSB637 boards.
    
    Define the physically mapped flash on the Cogent CSB337 and CSB637
    boards.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c177a1e75a07237efe1f68fbf430892fdf2bb868
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 10:25:38 2007 +0100

    [ARM] 4147/1: AT91: Define Timer/Counter clocks.
    
    Define the Timer/Counter Unit clocks on the AT91RM9200, AT91SAM9260 and
    AT91SAM9261 processors.
    
    Original patch from David Brownell.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6d92e6397634ac7d2e80b16c52f0dfab9b673b4
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 10:22:16 2007 +0100

    [ARM] 4146/1: AT91: Support for AT91SAM9263-EK board.
    
    Add support for the Atmel AT91SAM9263-EK board.
    
    Original patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b2c6561605da4802886cafe96432b8e2968e9edc
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 09:42:40 2007 +0100

    [ARM] 4145/2: AT91: Add support for AT91SAM9263 processor
    
    Add support for the Atmel AT91SAM9263 processor.  It is similar to the
    AT91SAM9260 but with more integrated peripherals, 5 GPIO banks, etc.
    
    Original patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d0760b3bc8ff9b34e3e2e166e2102548a24751b4
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 8 09:00:39 2007 +0100

    [ARM] 4143/1: AT91: Prepare for AT91SAM9263 support
    
    The Atmel AT91SAM9263 processor includes many more integrated
    peripherals than Atmel's previous ARM9-based AT91 processors, so this
    has necessitated a few changes to the core AT91 support.
    
    These changes are:
          * The system peripheral I/O region we remap has increased from
            0xFFFA0000..0xFFFFFFFF to 0xFFF78000..0xFFFFFFFF.
          * The increased I/O region forces changes to entry-macro.S and
            debug-macro.S due to ARM's limited immediate offset addressing
            modes.
          * Maximum number of GPIO banks increases to 5.
          * 2 MMC controllers so the board-setup code needs to specify which
            controller it wishes to use when calling at91_add_device_mmc().
    
    Original patch from Nicolas Ferre.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9d0412680e6c7b685ee466842047bcfb924d6dc5
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Feb 5 11:42:07 2007 +0100

    [ARM] 4124/1: Rename mach-at91rm9200 and arch-at91rm9200 directories
    
    Now that Linux includes support for the Atmel AT91SAM9260 and
    AT91SAM9261 processors in addition to the original Atmel AT91RM9200
    (with support for more AT91 processors pending), the "mach-at91rm9200"
    and "arch-at91rm9200" directories should be renamed to indicate their
    more generic nature.
    
    The following git commands should be run BEFORE applying this patch:
      git-mv arch/arm/mach-at91rm9200 arch/arm/mach-at91
      git-mv include/asm-arm/arch-at91rm9200 include/asm-arm/arch-at91
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a93d48cc6019f84394b31d10c0d830a3b71696be
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Feb 1 09:22:23 2007 +0100

    [ARM] 4119/1: AT91: Fix build of AT91SAM9260
    
    Fix build failure of AT91SAM9260.
    
    The AT91RM9200 ethernet driver (at91_ether.c) stores platform data in a
    "struct at91_eth_data" structure, but the AT91SAM9260 (and AT91SAM9263)
    ethernet driver (macb.c) [developed on the AVR32 architecture] expects a
    "struct eth_platform_data".
    
    Since the platform data of the two drivers is very similar, we continue
    to use the "struct at91_eth_data" for all AT91 processors but add a
        #define eth_platform_data      at91_eth_data
    in board.h to keep the MACB driver happy.
    
    Original patch by Jan Altenberg.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7ae5a761d2ffc4cf7d3248e09f4d3da234434f30
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 6 17:39:31 2007 +0000

    [ARM] Convert DMA cache handling to take const void * args
    
    The DMA cache handling functions take virtual addresses, but in the
    form of unsigned long arguments.  This leads to a little confusion
    about what exactly they take.  So, convert them to take const void *
    instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 953233dc9958ba2b29753d0f24e37a33a076a5f6
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:48:08 2007 +0100

    [ARM] 4134/1: Add generic support for outer caches
    
    The outer cache can be L2 as on RealView/EB MPCore platform or even L3
    or further on ARMv7 cores. This patch adds the generic support for
    flushing the outer cache in the DMA operations.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7f8e33546d17c7d8849be3a6623c3b6b3c9b588b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Feb 6 17:29:53 2007 +0000

    [ARM] Don't call consistent_sync() for DMA coherent memory
    
    Memory allocated by the coherent memory allocators will be marked
    uncacheable, which means it's pointless calling consistent_sync()
    to perform cache maintainence on this memory; it's just a waste of
    CPU cycles.
    
    Moreover, with the (subsequent) merge of outer cache support, it
    actually breaks things to call consistent_sync() on anything but
    direct-mapped memory.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 56660faf9e8088542e85207df45fb9c5f4dd3909
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:48:02 2007 +0100

    [ARM] 4133/1: Add ISB after changes to CP15 registers
    
    According to ARM ARM, changes to the CP15 registers are only
    guaranteed to be visible after an Instruction Synchronization Barrier
    (ISB). This patch adds the ISB at the end of set_cr and
    set_copro_access functions and also moves them further down in the
    file, below the isb macro definition.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6a5d66f58431c66c79e236f722a5ad7dd959ef3
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:47:51 2007 +0100

    [ARM] 4129/1: Add barriers after the TLB operations
    
    The architecture specification states that TLB operations are
    guaranteed to be complete only after the execution of a DSB (Data
    Synchronisation Barrier, former Data Write Barrier or Drain Write
    Buffer). The branch target cache invalidation is also needed. The ISB
    (Instruction Synchronisation Barrier, formerly Prefetch Flush) is
    needed unless there will be a return from exception before the
    corresponding mapping is used (i.e. user mappings).
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9d99df4b10eef130dacb5f772cd589c625b03634
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:47:40 2007 +0100

    [ARM] 4128/1: Architecture compliant TTBR changing sequence
    
    On newer architectures (ARMv6, ARMv7), the depth of the prefetch and
    branch prediction is implementation defined and there is a small risk
    of wrong ASID tagging when changing TTBR0 before setting the new
    context id. The recommended solution is to set a reserved ASID during
    TTBR changing. This patch reserves ASID 0.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 620879c9e33262426db0ade650be5d7a2046377b
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:47:46 2007 +0100

    [ARM] 4127/1: Flush the prefetch buffer after changing the DACR
    
    The ARM Architecture Reference Manual specifies that a prefetch flush
    is needed after changing the DACR register (chapter B2.7.6).
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dcda7e4ba1adec80089ec784964b32f9fd653237
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Mon Feb 5 14:47:35 2007 +0100

    [ARM] 4126/1: Add the ARM specific barriers
    
    There are three barriers - ISB, DMB and DSB for different
    scenarious. This patch adds their definitions in the system.h file.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 850b42933e70c19c7765dd7fad15cb7ad3955b65
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Feb 5 00:55:27 2007 +0100

    [ARM] 4123/1: xsc3: general cleanup
    
    This patch cleans up proc-xsc3:
    - Correct a number of typos.
    - Fix up indentation in a number of places.
    - Change references to the various caches to be more clear about
      whether we're talking about the L1 D, the L1 I or the unified L2
      cache.
    - Rename "drain write buffer" to "data write barrier", the official
      name used in the Manzano manual.
    - Change the xsc3 cpu name from "XScale-Core3" to "XScale-V3 based
      processor".
    
    Also, since a previously merged patch implements proper support for
    using a MAC or iWMMXt coprocessor on xsc3 platforms, we no longer
    need to enable access to CP0 on boot.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4932e397be71370b95f555f87d3b424d2b5ca57b
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Feb 5 00:38:48 2007 +0100

    [ARM] 4122/1: ep93xx: add support for GPIO port F interrupts
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fac105d05e4b410c586de55dfbf34f40a95f6977
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Feb 5 00:35:37 2007 +0100

    [ARM] 4121/1: ep93xx: move setting of HWCAP_CRUNCH
    
    Move the setting of HWCAP_CRUNCH to kernel/crunch.c, where it belongs.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 51dd249eff28924f838a72a50c417b2089e0f6a9
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Feb 4 22:45:33 2007 +0100

    [ARM] 4120/1: ep93xx: make clock init an arch_initcall()
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 45cf5eef4fa8bcd8d3aca3c2a0703d791c9ea56c
Author: Nicolas Pitre <nico@cam.org>
Date:   Mon Feb 5 22:37:07 2007 +0100

    [ARM] 4136/1: Allow PXA2xx's clock source to be used
    
    Commit c80204e5d67d1452ac0b761d980f1651dc2c66dc apparently missed this.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a7b4e5506d1608112a208bc5391377d2c0b6dd80
Author: Guennadi Liakhovetski <gl@dsa-ac.de>
Date:   Thu Feb 8 09:43:26 2007 +0100

    [ARM] 4144/1: Fix for patch #4099/1 with CONFIG_I2C_PXA_SLAVE set
    
    Switch the i2c-pxa driver to actually using the platform device information and let it handle the power i2c bus on pxa27x too. Original version of this patch didn't compile with CONFIG_I2C_PXA_SLAVE set.
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 135637aa781a0480ba4ef2d3ad18fae408ace874
Merge: 97c5a20... d003e7a...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Thu Feb 8 00:41:56 2007 -0600

    Merge branch 'master' into 83xx

commit 97c5a20ae68774b4c9246c4657be0d88317f103f
Author: Li Yang <leoli@freescale.com>
Date:   Wed Feb 7 13:49:24 2007 +0800

    [POWERPC] 83xx: Add platform_device for USB DR peripheral driver
    
    Add platform_device setup code for OTG/peripheral mode of 834x DR module.
    It is needed for USB client driver to work.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit c161698287f501e7ea229672383af7aefe8a2056
Author: Li Yang <leoli@freescale.com>
Date:   Wed Feb 7 13:47:56 2007 +0800

    [POWERPC] 83xx: Add USB setup code for MPC8349E MDS-PB
    
    Add board specific initialization code for USB to work in both MPH and DR
    mode for MPC8349E MDS-PB board.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit ea5b7a61b606854bd17272cb0a751b6d0a8bfa6b
Author: Li Yang <leoli@freescale.com>
Date:   Wed Feb 7 13:51:09 2007 +0800

    [POWERPC] 83xx: Added new dr_mode property for usb controller on 83xx
    
    Added a new dr_mode property to describe what mode the DR controller is being
    used in (host, device, OTG).  Updated the MPC8349E MDS dts with this new property.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit fd9aeb85273e9eb4d1a0b83487576a2e22da67fc
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Wed Feb 7 22:19:45 2007 -0600

    [POWERPC] 83xx: add the mpc8313erdb defconfig
    
    Add the mpc8313erdb defconfig
    
    Signed-off-by: Wilson Lo <Wilson.Lo@freescale.com>
    Signed-off-by: Scott Wood <scottwood@freescale.com>
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit b359049f270dcaab8a5bbdbb966594c16caba16c
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Wed Feb 7 22:19:12 2007 -0600

    [POWERPC] 83xx: Add base support for the MPC8313E RDB
    
    Add support for the MPC8313E Reference Development Board (RDB).  The board
    is a mini-ITX reference board with 128M DDR2, 8M flash, 32M NAND, USB, PCI,
    gigabit ethernet, and serial.
    
    Signed-off-by: Wilson Lo <Wilson.Lo@freescale.com>
    Signed-off-by: Scott Wood <scottwood@freescale.com>
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 07b2463046247ce580ff9b37e91394f2f6424768
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Feb 7 21:34:08 2007 -0800

    Revert "Driver core: convert SPI code to use struct device"
    
    This reverts commit 2943ecf2ed32632473c06f1975db47a7aa98c10f.
    
    This should go through the SPI maintainer, it was my fault that it did
    not.  Especially as it conflicts with other patches he has pending.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1545085a28f226b59c243f88b82ea25393b0d63f
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Thu Feb 8 16:14:05 2007 +1100

    drm: Allow for 44 bit user-tokens (or drm_file offsets)

commit d003e7a1a569501cbe9a5ca14748177498c4893a
Author: Mathieu Desnoyers <compudj@krystal.dyndns.org>
Date:   Wed Feb 7 19:04:44 2007 -0500

    [POWERPC] Add export of vgacon_remap_base
    
    The following macro :
    include/asm-powerpc/vga.h:#define VGA_MAP_MEM(x,s) (x + vgacon_remap_base)
    is used by drivers/video/console/vgacon.c which can be compiled as a module
    (drivers/video/vga16fb.ko).
    
    Therefore, vgacon_remap_base should be exported.
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bcff4948c64e1af09e9a986e324626ee873d3a07
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Feb 7 13:45:45 2007 +0100

    [POWERPC] Remove bogus comment about page_is_ram
    
    arch/powerpc/mm/mem.c states that page_is_ram is called by the code that
    implements /dev/mem, which isn't true.  Remove the comment.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1ed2ddf380e19dafeec2150ca709ef7f4a67cd21
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Feb 5 19:30:29 2007 +0100

    [POWERPC] windfarm: don't die on suspend thread signal
    
    When the windfarm thread gets a suspend signal it will die instead of
    freezing. This fixes it.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 92d4dda3332577bc2228b8d436f3d2796c59a520
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Dec 13 13:38:22 2006 +0100

    [POWERPC] Fix comment in kernel/irq.c
    
    kernel/irq.c contains a comment that speaks of -1 and -2 as interrupt
    numbers, but this is actually dependent on configuration options now.
    Replace by NO_IRQ and NO_IRQ_ENABLED.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f31909c00332b3e8299209eaba6cec80756f802c
Author: Stefan Roese <sr@denx.de>
Date:   Wed Feb 7 09:45:55 2007 +0100

    [POWERPC] ppc: Fix booke watchdog initialization
    
    Fix two problems in the book-e watchdog driver.
    
    a) The 4xx default period was defined wrong
    b) Clear status before enabling the watchdog exception
    
    Signed-off-by: Stefan Roese <sr@denx.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2366fb16abcd8dea96820d3cb4f1de3a868d268c
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 16:14:10 2007 -0800

    [POWERPC] PPC: Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Kumar Gala <galak@gate.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3839a5943977674d224cca541fd0914b942aa466
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 16:14:09 2007 -0800

    [POWERPC] Use ARRAY_SIZE macro when appropriate
    
    Use ARRAY_SIZE macro already defined in linux/kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0524aad7b89671bc788d483b2c048ac7b79eefb9
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon Feb 5 16:14:05 2007 -0800

    [POWERPC] Fix ppc64's writing to struct file_operations
    
    In preparation for marking file_operations as const.
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f8b93a902315aeeedf51c45f01a407d5d8288c72
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 5 16:14:04 2007 -0800

    [POWERPC] ppc: use syslog macro for the printk log level
    
    Use the appropriate logging macro for the priority level for that
    printk call.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 64a3de1c3d9c6dfa9be68529a519448e8017ddb0
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Mon Feb 5 16:14:03 2007 -0800

    [POWERPC] ppc: cs4218_tdm remove extra brace
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f42963f8646540ac7e5ba016a0ec1cc2e7386b57
Author: Grant Likely <grant.likely@secretlab.ca>
Date:   Tue Dec 12 15:13:19 2006 -0700

    [POWERPC] Add mpc52xx/lite5200 PCI support
    
    Signed-off-by: Grant Likely <grant.likely@secretlab.ca>
    Acked-by: Sylvain Munaut <tnt@246tNt.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c4184f117af7441fb83bc413d2214d92920e0289
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 20:24:25 2007 -0800

    kbuild: make $(checker-shell ) strip spaces around the result
    
    It looks like GNU make version 3.80 (but apparently not 3.81) adds
    leading whitespace to the result of the checker-shell execution.  This
    strips them off explicitly.
    
    Also, don't bother symlinking the output file to /dev/null.  It's likely
    as expensive as just writing the temp-file, and we need to remove it
    anyway afterwards.
    
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit d5112a4f31a361409d3c57dc9d58dd69f8014bef
Merge: 12e86f9... 5fad293...
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Feb 8 15:03:11 2007 +1100

    Merge branch 'for_paulus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc into for-2.6.21

commit 12e86f92fcfe4f0bcab0ad7fa4088a64c60d9b38
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Feb 8 15:02:35 2007 +1100

    [POWERPC] Only use H_BULK_REMOVE if the firmware supports it
    
    The previous patch changing pSeries to use H_BULK_REMOVE broke the
    JS20 blade, where the firmware doesn't support H_BULK_REMOVE.  This
    adds a firmware check so that on machines that don't have H_BULK_REMOVE,
    we just use the H_REMOVE call as before.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 905adce4094d64a6691df994e424fbf486301adc
Merge: 78149df... 1e8f34f...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 19:32:36 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/bart/ide-2.6: (23 commits)
      ide-acpi support warning fix
      ACPI support for IDE devices
      IDE Driver for Delkin/Lexar/etc.. cardbus CF adapter
      ide: it8213 IDE driver update (version 2)
      ide: add it8213 IDE driver
      tc86c001: add missing __init tag for tc86c001_ide_init()
      tc86c001: mark init_chipset_tc86c001() with __devinit tag
      tc86c001: init_hwif_tc86c001() can be static
      ide: add Toshiba TC86C001 IDE driver (take 2)
      pdc202xx_new: remove check_in_drive_lists abomination
      pdc202xx_new: remove useless code
      slc90e66: carry over fixes from piix driver
      piix: tuneproc() fixes/cleanups
      piix: fix 82371MX enablebits
      hpt366: HPT36x PCI clock detection fix
      hpt366: init code rewrite
      hpt366: clean up DMA timeout handling for HPT370
      hpt366: merge HPT37x speedproc handlers
      hpt366: cache channel's MCR address
      hpt366: switch to using pci_get_slot
      ...

commit 78149df6d565c36675463352d0bfe0000b02b7a7
Merge: c96e2c9... 14719f3...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 19:23:44 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6: (41 commits)
      Revert "PCI: remove duplicate device id from ata_piix"
      msi: Make MSI useable more architectures
      msi: Kill the msi_desc array.
      msi: Remove attach_msi_entry.
      msi: Fix msi_remove_pci_irq_vectors.
      msi: Remove msi_lock.
      msi: Kill msi_lookup_irq
      MSI: Combine pci_(save|restore)_msi/msix_state
      MSI: Remove pci_scan_msi_device()
      MSI: Replace pci_msi_quirk with calls to pci_no_msi()
      PCI: remove duplicate device id from ipr
      PCI: remove duplicate device id from ata_piix
      PCI: power management: remove noise on non-manageable hw
      PCI: cleanup MSI code
      PCI: make isa_bridge Alpha-only
      PCI: remove quirk_sis_96x_compatible()
      PCI: Speed up the Intel SMBus unhiding quirk
      PCI Quirk: 1k I/O space IOBL_ADR fix on P64H2
      shpchp: delete trailing whitespace
      shpchp: remove DBG_XXX_ROUTINE
      ...

commit c96e2c92072d3e78954c961f53d8c7352f7abbd7
Merge: f2aca47... 6435816...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 19:23:21 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6: (70 commits)
      USB: remove duplicate device id from zc0301
      USB: remove duplicate device id from usb_storage
      USB: remove duplicate device id from keyspan
      USB: remove duplicate device id from ftdi_sio
      USB: remove duplicate device id from visor
      USB: a bit more coding style cleanup
      usbcore: trivial whitespace fixes
      usb-storage: use first bulk endpoints, not last
      EHCI: fix interrupt-driven remote wakeup
      USB: switch ehci-hcd to new polling scheme
      USB: autosuspend for usb printer driver
      USB Input: Added kernel module to support all GTCO CalComp USB InterWrite School products
      USB: Sierra Wireless auto set D0
      USB: usb ethernet gadget recognizes HUSB2DEV
      USB: list atmel husb2_udc gadget controller
      USB: gadgetfs AIO tweaks
      USB: gadgetfs behaves better on userspace init bug
      USB: gadgetfs race fix
      USB: gadgetfs simplifications
      USB: gadgetfs cleanups
      ...

commit f2aca47dc3c2d0c2d5dbd972558557e74232bbce
Merge: 7677ced... b592fcf...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 19:22:26 2007 -0800

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6: (28 commits)
      sysfs: Shadow directory support
      Driver Core: Increase the default timeout value of the firmware subsystem
      Driver core: allow to delay the uevent at device creation time
      Driver core: add device_type to struct device
      Driver core: add uevent vars for devices of a class
      SYSFS: Fix missing include of list.h in sysfs.h
      HOWTO: Add a reference to Harbison and Steele
      sysfs: error handling in sysfs, fill_read_buffer()
      kobject: kobject_put cleanup
      sysfs: kobject_put cleanup
      sysfs: suppress lockdep warnings
      Driver core: fix race in sysfs between sysfs_remove_file() and read()/write()
      driver core: Change function call order in device_bind_driver().
      driver core: Don't stop probing on ->probe errors.
      driver core fixes: device_register() retval check in platform.c
      driver core fixes: make_class_name() retval checks
      /sys/modules/*/holders
      USB: add the sysfs driver name to all modules
      SERIO: add the sysfs driver name to all modules
      PCI: add the sysfs driver name to all modules
      ...

commit 7677ced48e2bbbb8d847d34f37e5d96d2b0e41e4
Merge: 21d37bb... ac38dfc...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 19:21:56 2007 -0800

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (116 commits)
      sk98lin: planned removal
      AT91: MACB support
      sky2: version 1.12
      sky2: add new chip ids
      sky2: Yukon Extreme support
      sky2: safer transmit timeout
      sky2: TSO support for EC_U
      sky2: use dev_err for error reports
      sky2: add Wake On Lan support
      fix unaligned exception in /drivers/net/wireless/orinoco.c
      Remove unused kernel config option DLCI_COUNT
      z85230: spinlock logic
      mips: declance: Driver model for the PMAD-A
      Spidernet: Rework RX linked list
      NET: turn local_save_flags() + local_irq_disable() into local_irq_save()
      NET-3c59x: turn local_save_flags() + local_irq_disable() into local_irq_save()
      hp100: convert pci_module_init() to pci_register_driver()
      NetXen: Added ethtool support for user level tools.
      NetXen: Firmware crb init changes.
      maintainers: add atl1 maintainers
      ...

commit 756db73df7b7d6b9f6421c1fb2e1cabeaede5846
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Thu Feb 8 12:57:40 2007 +1100

    drm/via: Disable AGP DMA for chips with the new 3D engine.

commit 1d58420bad15d08f93bf1e0342c1b1d1234d69b7
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jan 8 22:25:47 2007 +1100

    drm: update core memory manager from git drm tree
    
    Remove the memory manager parameter from the put_block function, as this
    makes the client code a lot cleaner. Prepare buffer manager for lock and
    unlock calls.
    Fix buggy aligned allocations.
    Remove the stupid root_node field from the core memory manager.
    Support multi-page buffer offset alignments
    Add improved alignment functionality to the core memory manager.
    This makes an allocated block actually align itself and returns any
    wasted space to the manager.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 004a7727421fd202bbdfcc0231a3359085199a52
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jan 8 21:56:59 2007 +1100

    drm: remove drm_ioremap and drm_ioremapfree
    
    hch originally submitted this for paravirt ops work, airlied took it
    and cleaned up a lot of unused code caused by using this.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit b9094d3aaa9550e740b6fd12b68f485d9979ce27
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Jan 8 21:31:13 2007 +1100

    i810/i830: use drm_core_ioremap instead of drm_ioremap
    
    This makes the i810/i830 use the drm_core_ioremap functions.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit f239b7b0cac0682d582949087710a9663b1300d5
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jan 8 21:22:50 2007 +1100

    drm: use vmalloc_user instead of vmalloc_32 for DRM_SHM
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9b8d9d0e0181286c0608e6426da1eac45463ecd2
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jan 8 21:21:41 2007 +1100

    via: allow for npot texture pitch alignment
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 689692e73ea4b95c9fa5d5913eade33147db2e5a
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jan 8 21:19:57 2007 +1100

    via: add some new chipsets
    
    Disable 3D functionality and AGP DMA for chipsets with the DX9 3D engine.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 76f625511e61f9d5561885c77d2ff1436ed83797
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Jan 8 21:03:23 2007 +1100

    via: some PCI posting flushes
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 14719f325e1cd4ff757587e9a221ebaf394563ee
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Feb 7 16:17:27 2007 -0800

    Revert "PCI: remove duplicate device id from ata_piix"
    
    This reverts commit b11056355ea149c37edf0ef54976a49f5258cd54.
    
    It was incorrect, the proper fix is coming through the SATA tree, sorry
    about that.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ac38dfc39e7684f55174742e5f0d6c5a0093bbf6
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Wed Feb 7 09:18:30 2007 -0800

    sk98lin: planned removal
    
    Document planned removal of sk98lin driver.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0cc8674f2be3078fb586add1900c7835c977f384
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Feb 7 16:40:44 2007 +0100

    AT91: MACB support
    
    The Atmel MACB Ethernet peripheral is also integrated in the AT91SAM9260
    and AT91SAM9263 processors.  The differences from the AVR32 version are:
          * Single peripheral clock.
          * MII/RMII selection bit is inverted.
          * Clock enable bit.
    
    Original patch from Patrice Vilchez.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 683349a3fae4896d91b1fe507ebbadb866587cd8
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:45 2007 -0800

    sky2: version 1.12
    
    Updated version for WOL and new id's
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f1a0b6f56e0126b82d7b9c2afa86613af8ee3146
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:44 2007 -0800

    sky2: add new chip ids
    
    More new chip id's from vendor driver version 10.0.4.3
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9374549428820be10f01e217cec1b34cb3e3de6d
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:43 2007 -0800

    sky2: Yukon Extreme support
    
    This is basic support for the new Yukon Extreme
    chip, extracted from the new vendor driver 10.0.4.3.
    
    Since this is untested hardware, it has a big fat warning for now.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 62335ab013d9eaef502bd402eb2eb72e8cff58f1
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:42 2007 -0800

    sky2: safer transmit timeout
    
    Rather than trying to be "smart" about possible transmit timeout
    causes. Just clear all pending frames and reset the PHY.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4a50a876ac325a45de1b582571c1248648801b52
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:41 2007 -0800

    sky2: TSO support for EC_U
    
    The Yukon EC_U chipset apparently supports TSO but only for non-Jumbo
    frame sizes because it lacks a Ram buffer.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b02a92586dca362b0b76ad527b91bd44ce58ece5
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:40 2007 -0800

    sky2: use dev_err for error reports
    
    Use the standard dev_xxx functions instead of printk directly for
    error reports. Fix a bug where the initialization would return 0
    if allocation of network device failed.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f7feaca77d6ad6bcfcc88ac54e3188970448d6fe
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jan 28 12:56:37 2007 -0700

    msi: Make MSI useable more architectures
    
    The arch hooks arch_setup_msi_irq and arch_teardown_msi_irq are now
    responsible for allocating and freeing the linux irq in addition to
    setting up the the linux irq to work with the interrupt.
    
    arch_setup_msi_irq now takes a pci_device and a msi_desc and returns
    an irq.
    
    With this change in place this code should be useable by all platforms
    except those that won't let the OS touch the hardware like ppc RTAS.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5b912c108c8b1fcecbfe13d6d9a183db97b682d3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jan 28 12:52:03 2007 -0700

    msi: Kill the msi_desc array.
    
    We need to be able to get from an irq number to a struct msi_desc.
    The msi_desc array in msi.c had several short comings the big one was
    that it could not be used outside of msi.c.  Using irq_data in struct
    irq_desc almost worked except on some architectures irq_data needs to
    be used for something else.
    
    So this patch adds a msi_desc pointer to irq_desc, adds the appropriate
    wrappers and changes all of the msi code to use them.
    
    The dynamic_irq_init/cleanup code was tweaked to ensure the new
    field is left in a well defined state.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1c659d61cfbd8dc3926688c1bbf12d80f4cfb5c2
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jan 28 12:47:52 2007 -0700

    msi: Remove attach_msi_entry.
    
    The attach_msi_entry has been reduced to a single simple assignment,
    so for simplicity remove the abstraction and directory perform the
    assignment.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 866a8c87c4e51046602387953bbef76992107bcb
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jan 28 12:45:54 2007 -0700

    msi: Fix msi_remove_pci_irq_vectors.
    
    Since msi_remove_pci_irq_vectors is designed to be called during
    hotplug remove it is actively wrong to query the hardware and expect
    meaningful results back.
    
    To that end remove the pci_find_capability calls.  Testing
    dev->msi_enabled and dev->msix_enabled gives us all of the information
    we need.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d40f540ce6d992d4123827dbd62f68c4a39c53d0
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jan 28 12:44:21 2007 -0700

    msi: Remove msi_lock.
    
    With the removal of msi_lookup_irq all of the functions using msi_lock
    operated on a single device and none of them could reasonably be
    called on that device at the same time.
    
    Since what little synchronization that needs to happen needs to happen
    outside of the msi functions, msi_lock could never be contended and as
    such is useless and just complicates the code.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ded86d8d37736df67ddeec4ae00e2ec1a5a90b3c
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jan 28 12:42:52 2007 -0700

    msi: Kill msi_lookup_irq
    
    The function msi_lookup_irq was horrible.  As a side effect of running
    it changed dev->irq, and then the callers would need to change it
    back.  In addition it does a global scan through all of the irqs,
    which seems to be the sole justification of the msi_lock.
    
    To remove the neede for msi_lookup_irq I added first_msi_irq to struct
    pci_dev.  Then depending on the context I replaced msi_lookup_irq with
    dev->first_msi_irq, dev->msi_enabled, or dev->msix_enabled.
    
    msi_enabled and msix_enabled were already present in pci_dev for other
    reasons.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8fed4b65236c44d090bd62f2d14938ae791e0260
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jan 25 19:34:08 2007 +1100

    MSI: Combine pci_(save|restore)_msi/msix_state
    
    The PCI save/restore code doesn't need to care about MSI vs MSI-X, all
    it really wants is to say "save/restore all MSI(-X) info for this device".
    
    This is borne out in the code, we call the MSI and MSI-X save routines
    side by side, and similarly with the restore routines.
    
    So combine the MSI/MSI-X routines into pci_save_msi_state() and
    pci_restore_msi_state(). It is up to those routines to decide what state
    needs to be saved.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0fcfdabbdbedb3bdc63f29209aeeac805df78a92
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jan 25 19:34:08 2007 +1100

    MSI: Remove pci_scan_msi_device()
    
    pci_scan_msi_device() doesn't do anything anymore, so remove it.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 88187dfa4d8bb565df762f272511d2c91e427e0d
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu Jan 25 19:34:07 2007 +1100

    MSI: Replace pci_msi_quirk with calls to pci_no_msi()
    
    I don't see any reason why we need pci_msi_quirk, quirk code can just
    call pci_no_msi() instead.
    
    Remove the check of pci_msi_quirk in msi_init(). This is safe as all
    calls to msi_init() are protected by calls to pci_msi_supported(),
    which checks pci_msi_enable, which is disabled by pci_no_msi().
    
    The pci_disable_msi routines didn't check pci_msi_quirk, only
    pci_msi_enable, but as far as I can see that was a bug not a feature.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 89298c7a41e71ecb1e0c3f793655e9ce09662ce0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    PCI: remove duplicate device id from ipr
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b11056355ea149c37edf0ef54976a49f5258cd54
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    PCI: remove duplicate device id from ata_piix
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e36c455c2f5fee08fed395e94c7ab156cd159360
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Jan 16 12:17:13 2007 +0100

    PCI: power management: remove noise on non-manageable hw
    
    Return early from pci_set_power_state() if hardware does not support
    power management. This way, we do not generate noise in the logs.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c54c18790700b8b2a503945d729aa425c25691fe
Author: Satoru Takeuchi <takeuchi_satoru@jp.fujitsu.com>
Date:   Thu Jan 18 13:50:05 2007 +0900

    PCI: cleanup MSI code
    
    Cleanup MSI code as follows:
    
     - fix some types
     - fix strange local variable definition
     - delete unnecessary blank line
     - add comment to #endif which is far from corresponding #ifdef
    
    Signed-off-by: Satoru Takeuchi <takeuchi_satoru@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8255cf35d503db7c1b26ae53b6b7f23ada82316f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jan 6 21:48:41 2007 +0100

    PCI: make isa_bridge Alpha-only
    
    Since isa_bridge is neither assigned any value !NULL nor used on !Alpha,
    there's no reason for providing it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1863100a0244828f78e5e47b22b93ca912e80963
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jan 14 14:46:32 2007 +0100

    PCI: remove quirk_sis_96x_compatible()
    
    Since 2.6.0-test10, all quirk_sis_96x_compatible() had any effect on
    was a printk().
    
    This patch therefore removes it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f2d39d2843570e81be6d53da6052f6752dc3c45
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Jan 5 11:23:15 2007 +0100

    PCI: Speed up the Intel SMBus unhiding quirk
    
    Speed up the Intel SMBus PCI quirk by avoiding tests which can only
    fail. This also makes the compiled code significantly smaller when
    using gcc 3.2/3.4. gcc 4.x appears to optimize the code by itself so
    this change doesn't make a difference there.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 15a260d53f7ca026e45109d2c2bec8c4b087780b
Author: Daniel Yeisley <dan.yeisley@unisys.com>
Date:   Thu Dec 21 14:34:57 2006 -0500

    PCI Quirk: 1k I/O space IOBL_ADR fix on P64H2
    
    There's an existing quirk for the kernel to use 1k IO space granularity
    on the Intel P64H2.  It turns out however that pci_setup_bridge() in
    drivers/pci/setup-bus.c reads in the IO base and limit address register
    masks it off to the nearest 4k, and writes it back.  This causes the
    kernel to be on 1k boundaries and the hardware to be 4k aligned.  The
    patch below fixes the problem.
    
    Signed-off-by: Dan Yeisley <dan.yeisley@unisys.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9f593e30b318719b0e3889c730cc3a2d0729a707
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue Jan 9 13:03:10 2007 -0800

    shpchp: delete trailing whitespace
    
    This patch deletes trailing white space in SHPCHP driver. This has no
    functional change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1555b33da0b27f933fbe08679935ce9d83c0e9e9
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue Jan 9 13:03:01 2007 -0800

    shpchp: remove DBG_XXX_ROUTINE
    
    This patch removes DBG_ENTER_ROUTINE, DBG_LEAVE_ROUTINE and related
    code.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3d9c18872fa1db5c43ab97d8cbca43775998e49c
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue Jan 9 13:02:48 2007 -0800

    shpchp: remove CONFIG_HOTPLUG_PCI_SHPC_POLL_EVENT_MODE
    
    The CONFIG_HOTPLUG_PCI_SHPC_POLL_EVENT_MODE config option is not
    needed because polling mechanism for shpc hotplug events can be
    enabled through module option 'shpchp_poll_mode'. This patch removes
    CONFIG_HOTPLUG_PCI_SHPC_POLL_EVENT_MODE.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 34d03419f03bcfdf70d9617a9b90b60c93482c4a
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Tue Jan 9 13:02:36 2007 -0800

    PCIEHP: Add Electro Mechanical Interlock (EMI) support to the PCIE hotplug driver.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 262303fe329a51463925f3749aafc358a4201397
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:10 2006 -0800

    pciehp: fix wait command completion
    
    This patch fixes this problem that pciehp driver will sleep
    unnecessarily long when waiting for command completion. With this
    patch, modprobe pciehp driver becomes very faster as follows for
    instance.
    
      o Without this patch
        # time /sbin/modprobe pciehp
    
        real    0m4.976s
        user    0m0.000s
        sys     0m0.004s
    
      o With this patch
        # time /sbin/modprobe pciehp
    
        real    0m0.640s
        user    0m0.000s
        sys     0m0.004s
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 44ef4cefb0168740184ee3d7d18254339741e9d5
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:09 2006 -0800

    pciehp: cleanup wait command completion
    
    This patch cleans up the code to wait for command completion.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 75e13178af33e20b5802885f637af2a82c64ac2c
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:08 2006 -0800

    pciehp: remove unused pcie_cap_base
    
    This patch removes unused pcie_cap_base variable.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 15232ece5566710d24c81ac3dd629f7556a92818
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:07 2006 -0800

    pciehp: cleanup pciehp.h
    
    This patch cleans up pciehp.h. This has no functional change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0f018daa9955d123b9257b08bcac2d59e295967
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:06 2006 -0800

    pciehp: cleanup register access
    
    This patch cleans up register access functions. This has no functional
    change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8c2b635979823043ea7766dea1d9371773b4d8e
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:05 2006 -0800

    pciehp: remove unused pci_bus from struct controller
    
    This patch removes unused pci_bus member from struct controller.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 48fe39151727db350347e1dba09d71c8ca24207a
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:04 2006 -0800

    pciehp: remove unnecessary php_ctlr
    
    The struct php_ctlr seems to be only for complicating codes. This
    patch removes struct php_ctlr and related codes.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2410fa4eaec4133f9fa8968f277ddb28b89b92b3
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:03 2006 -0800

    pciehp: cleanup slot list
    
    This patch cleans up slot list handling (use list_head). This has no
    functional change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0b1725720d9a023a1dee129234f5972056038c6
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Thu Dec 21 17:01:02 2006 -0800

    pciehp: cleanup init_slot()
    
    This patch cleans up init_slots() in pciehp_core.c based on
    pcihp_skeleton.c. This has no functional change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 429538ad3eeffec4199d8adddd1e9e4c80b2c08b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Nov 18 01:06:29 2006 +0100

    PCI: mark pci_find_device() as __deprecated
    
    On Fri, Nov 17, 2006 at 09:32:36AM -0500, Alan Cox wrote:
    >
    > Soon we should deprecate pci_find_device as well
    
    So let's mark it as __deprecated now, which also has the side effect
    that noone can later whine that removing it might break some shiny
    external modules.
    
    Oh, and if anything starts complaining "But this adds some warnings to
    my kernel build!", he should either first fix the 200 kB (sic) of
    warnings I'm getting in 2.6.19-rc5-mm2 starting at MODPOST or go to hell.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd9b37cc4e32533214f77b34ea03ee85f6e0a4d2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Nov 17 15:21:45 2006 +0100

    PCI: remove pci_find_device_reverse()
    
    This patch removes the no longer used pci_find_device_reverse().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c30ca1db39cecade07143112ecfac09ec6b08e3f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Dec 19 05:13:15 2006 +0100

    PCI: quirks.c: cleanup
    
    This patch contains the following cleanups:
    - move all EXPORT_SYMBOL's directly below the code they are exporting
    - move all DECLARE_PCI_FIXUP_*'s directly below the functions they
      are calling
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 81b1955eef786c1b2fe29f6783543ce13d8b0bc4
Author: Linas Vepstas <linas@linas.org>
Date:   Tue Dec 12 18:29:15 2006 -0600

    PCI: Use newly defined PCI channel offline routine
    
    Use newly minted routine to access the PCI channel state.
    
    Signed-off-by: Linas Vepstas <linas@linas.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a7369f1f6533b9efc3209d1df103537bbbf24b8c
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Dec 12 16:55:59 2006 -0600

    PCI: define inline for test of channel error state
    
    Add very simple routine to indicate the pci channel error state.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c87deff776feacd05a7411097e8c8c57e549e638
Author: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Date:   Mon Dec 18 10:31:06 2006 +0900

    PCI : Add selected_regions funcs
    
    This patch adds the following changes into generic PCI code especially
    for PCI legacy I/O port free drivers.
    
         - Added new pci_request_selected_regions() and
           pci_release_selected_regions() for PCI legacy I/O port free
           drivers in order to request/release only the selected regions.
    
         - Added helper routine pci_select_bars() which makes proper mask
           of BARs from the specified resource type. This would be very
           helpful for users of pci_enable_device_bars().
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Cc: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 38cc13022ed3cea949722d5a6f49025da82c9fd0
Author: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Date:   Mon Dec 18 10:30:00 2006 +0900

    PCI : add extremely specialized __pci_reenable_device for default resume
    
    Original patch was posted as "PCI : Move pci_fixup_device and is_enabled".
    This 3 of 3 patches does:
    
      - add __pci_reenable_device
        (recover former change of 1st patch)
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Cc: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9fb625c3cc3731097a142ecae79a0369fb854c2d
Author: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Date:   Mon Dec 18 10:28:43 2006 +0900

    PCI : Move pci_fixup_device and is_enabled (originally intended change)
    
    Original patch was posted as "PCI : Move pci_fixup_device and is_enabled".
    This 2 of 3 patches does:
    
      - Move pci_fixup_device and enable_cnt
        (originally intended change)
    
      - relocate pci_fixup_device
        (recover latter change of 1st patch)
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Cc: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 924b08f3ff12eb0e8ecd9e9a9b6a5b884a495c23
Author: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
Date:   Mon Dec 18 10:27:45 2006 +0900

    PCI : remove too specialized __pci_enable_device for default resume
    
    Original patch was posted as "PCI : Move pci_fixup_device and is_enabled".
    This 1 of 3 patches does:
    
      - reverts small part of Inaky's patch
        (remove __pci_enable_device)
        This change will be recovered by 3rd patch.
    
      - temporarily remove pci_fixup_device.
        This change will be recovered by 2nd patch.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Hidetoshi Seto <seto.hidetoshi@jp.fujitsu.com>
    Cc: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 07eddf3d597f2d009a37a4e8c7c32a1ffe992f3e
Author: Yinghai Lu <yinghai.lu@amd.com>
Date:   Wed Nov 29 13:53:10 2006 -0800

    PCI: check szhi when sz is 0 when 64 bit iomem bigger than 4G
    
    For pci mem resource that size is bigger than 4G, the sz returned by
    pc_size will be 0.
    So that resource is skipped, and register contained hi address will be
    treated as another 32bit resource. We need to use sz64 and pci_sz64 for
    64 bit resource for clear logical.  Typical usages for this: Opteron
    system with co-processor and the co-processor could take more than 4G
    RAM as pre-fetchable mem resource.
    
    
    Signed-off-by: Yinghai Lu <yinghai.lu@amd.com>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e3173832d7be8f62a181a1888a65f0a3dc58c2e0
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Tue Feb 6 10:45:39 2007 -0800

    sky2: add Wake On Lan support
    
    Adds basic magic packet wake on lan support to the sky2 driver.
    Note: initial WOL value is based on BIOS settings.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit dde6d43d060bf0e0f38c66f76908e460db3bf0d8
Author: Hennerich, Michael <Michael.Hennerich@analog.com>
Date:   Mon Feb 5 16:41:35 2007 -0800

    fix unaligned exception in /drivers/net/wireless/orinoco.c
    
    Prevent an unaligned exception to occur.  (GCC 4.1) tmp is defined as char
    pointer while it is later accessed as short.
    
    Cc: Jean Tourrilhes <jt@hpl.hp.com>
    Cc: John W. Linville <linville@tuxdriver.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f100ae2ed04d17fb450fe6e3a3780342da60acd0
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Mon Feb 5 16:31:06 2007 -0800

    Remove unused kernel config option DLCI_COUNT
    
    Remove the unused kernel config option DLCI_COUNT.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Krzysztof Halasa {khc@pm.waw.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 45d3ac4ec31ccf9a39065e8576260c6ac2652c83
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Feb 5 16:31:03 2007 -0800

    z85230: spinlock logic
    
    At some point someone added a spin_lock(&dev->lock) to the IRQ handler for
    the Z85230 driver.  This actually correctly fixes a bug but the necessary
    changes to remove the chan->lock calls in the event handlers were not made
    (c->lock is the same lock).
    
    Simona Dascenzo reported the problem with the driver and this patch should
    fix the problem he found.
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 257b346d20cd309a4c5a13b8de5ad2b7c63b590a
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Feb 5 16:28:27 2007 -0800

    mips: declance: Driver model for the PMAD-A
    
    This is a set of changes that converts the PMAD-A support to the driver model.
    
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d9a9720eab7437aa7f34dcbb92bb4bc8cc36bba9
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Mon Feb 5 16:29:43 2007 -0800

    Spidernet: Rework RX linked list
    
    Make the hardware perceive the RX descriptor ring as a null-terminated linked
    list, instead of a circular ring.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 64358164f5bfe5e11d4040c1eb674c29e1436ce5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    USB: remove duplicate device id from zc0301
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ab6c41a498cd76085ce45ec407f5fe25968058a6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    USB: remove duplicate device id from usb_storage
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 33c6b7e99fb043b7ae7d3deafb552a179a29b489
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    USB: remove duplicate device id from keyspan
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 210b1975795d4661127144365a889a7a4f2cf1fa
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    USB: remove duplicate device id from ftdi_sio
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9da88d78bcb5610a4bb9e0e10dfb31cc9b4fdb1b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 16:15:24 2007 -0800

    USB: remove duplicate device id from visor
    
    As pointed out by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1a68f71d4fe71426a5c9703591e068241c03f896
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Jan 25 11:17:41 2007 +0100

    USB: a bit more coding style cleanup
    
    I was sitting in a train threatened to be blocked by ice. I took this
    as a hint to do some more boring work for the common good. Here's
    a bit more for coding style.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9251644ab33579d80c038b077f78daa23a04fdcd
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Jan 23 15:55:28 2007 -0500

    usbcore: trivial whitespace fixes
    
    This patch (as844) makes some trivial whitespace fixes to a few files
    in usbcore.  Oliver did most of the work and Alan added some tidying up.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1096f780d0b9d6bade2d42bf823e81db3e553abe
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 22 11:58:34 2007 -0500

    usb-storage: use first bulk endpoints, not last
    
    According to the Bulk-Only spec, usb-storage is supposed to use the
    _first_ bulk-in and bulk-out endpoints it finds, not the _last_.  And
    while we're at it, we ought to test the direction of the interrupt
    endpoint as well.  This patch (as842) makes both changes.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 629e4427aa817d5c9f11885420abf54b8f5967dc
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 22 16:08:53 2007 -0500

    EHCI: fix interrupt-driven remote wakeup
    
    Now that port status change notifications are interrupt-driven,
    ehci-hcd needs to tell usbcore when a remote-wakeup resume operation
    is finished -- we can no longer rely on the core to poll and find
    out.  This patch (as843) uses the root-hub status timer to force a
    poll after the resume is complete.
    
    The patch also changes the test for detecting when the TDRSMDN resume
    period has expired.  It's necessary to use time_after_eq() instead of
    time_after(), since the polling is triggered precisely by a timer.
    The same change is made for TDRSTR reset expiration, for consistency.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d619f128ba911cd3e6d6ad3475f146eb92f5c27
Author: Marcelo Tosatti <marcelo@kvack.org>
Date:   Sun Jan 21 19:45:59 2007 -0200

    USB: switch ehci-hcd to new polling scheme
    
    Switch ehci-hcd to use the new polling scheme, which reports root
    hub status changes via the interrupt handler, in an asynchronous
    fashion. Doing so disables polling for status changes (whose handler is
    rh_timer_func).
    
    Tested on a Geode GX machine, which is now capable of running at =~ 5
    timer interrupts per second (in the -rt tree), resulting in significant
    power savings.
    
    Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d0532184086906889f4a0cd92eade1f7be49fbac
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Jan 18 15:06:07 2007 +0100

    USB: autosuspend for usb printer driver
    
    this implements autosuspend for usb printers. It compiles and is tested.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a19ceb56cbd1e1beff3e9cf6042e1f31f6487aa6
Author: Jeremy Roberson <jroberson@gtcocalcomp.com>
Date:   Thu Jan 18 08:10:25 2007 -0700

    USB Input: Added kernel module to support all GTCO CalComp USB InterWrite School products
    
    Added a kernel module (gtco) to the USB Input subsystem.  This kernel
    module adds support for all GTCO CalComp USB InterWrite School products.
    
    Signed-off-by: Jeremy A. Roberson <jroberson@gtcocalcomp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e43062dd208594caa94536b8ba4b762d4a16330d
Author: Kevin Lloyd <linux@sierrawireless.com>
Date:   Wed Jan 17 16:04:18 2007 -0800

    USB: Sierra Wireless auto set D0
    
    This patch ensures that the device is turned on when inserted into the system.
    It also adds more VID/PIDs and matches the N_OUT_URB with the airprime driver.
    
    Signed-off-by: Kevin Lloyd <linux@sierrawireless.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ef3ff462a31987629c4d0488550fbbb66fbfcc35
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Mon Feb 27 18:15:04 2006 +0100

    USB: usb ethernet gadget recognizes HUSB2DEV
    
    Define DEV_CONFIG_CDC when compiling for HUSB2DEV.
    
    From: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1f5b9cc9e4cf5847e7550c4079cebb80170e71dd
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Wed Jan 17 11:03:29 2007 -0800

    USB: list atmel husb2_udc gadget controller
    
    This identifies the driver for the Atmel HUSB2 Device Controller,
    as integrated into the first AVR32 chip, the AT32AP700.
    
    From: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 49631ca7f3e2fd05186028b453fa27f75b830de7
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jan 16 23:28:48 2007 -0800

    USB: gadgetfs AIO tweaks
    
    This patch (as837) fixes several mistakes in the AIO interface of the
    gadgetfs driver:
    
    	The ki_retry method is not supposed to do a put on the kiocb.
    	The extra call to aio_put_req() causes memory corruption.
    	(Note: This call was removed before, by patch as691, and then
    	mysteriously re-introduced later.)
    
    	Even if a read transfer is cancelled, we can and should send
    	to the user all the data that did manage to get transferred.
    
    	Testing for AIO cancellation in the I/O completion handler
    	is both racy and (now) unnecessary.  aio_complete() does its
    	own checking, in a safe manner.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ce46794f77f698eaf3b80922fafac5a9379085e0
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 16 23:06:07 2007 -0800

    USB: gadgetfs behaves better on userspace init bug
    
    Resolve an initizlization issue that could come up if the userspace
    driver wrote invalid descriptors to a dual-speed device.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5b89db02a5a7c8bad3c6fb7888778082a441b385
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 16 22:56:26 2007 -0800

    USB: gadgetfs race fix
    
    This resolves a race in gadgetfs associated with changing device/ep0
    when processing control requests.  The fix is to change that state
    earlier, when the control response is issued, so there's no window
    in which userspace could see the wrong state; and enlarge the scope
    of the spinlock during the ep0 request completion handler.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0864c7a9286b02319d3db2103bada1c2269c1e1e
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 16 22:53:58 2007 -0800

    USB: gadgetfs simplifications
    
    This simplifies event reading by eliminating arithmetic and being
    more direct/obvious, and tweaks some debug messages slightly.
    The math elimination will change timings, sometimes enough to
    allow a race to appear.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7489d14943181731ef8694e2ea2d5a919b93b956
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 16 22:51:04 2007 -0800

    USB: gadgetfs cleanups
    
    Minor gadgetfs cleanups:
    
     - EP0 state constants become consistently STATE_DEV_* rather than
       sometimes omitting the "DEV_"; STATE_EP_* were already consistent.
    
     - Comment that ep0 state is protected by the spinlock, and update
       code that was neglecting that rule.
    
    None of this is expected to change behavior.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3ff4fd94c86259e44d58946af34231a1586b5d93
Author: Oliver Neukum <oneukum@suse.de>
Date:   Sat Jan 13 07:32:27 2007 +0100

    USB: race fixes for usb-serial, step 3
    
    - fix an error code returned if a device has been disconnected
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4b10f0f3a0d4caa8b615cd1f770a70912967a3cd
Author: Oliver Neukum <oneukum@suse.de>
Date:   Sat Jan 13 07:31:27 2007 +0100

    USB: race fixes for usb-serial, step 2
    
    - take BKL before looking up a driver to associate with a device to make
      sure the module is not unloaded after looking up but before association
      & bumping module count
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 34ef50e5b1f96c2d8c0f3d28b7d407743806256c
Author: Oliver Neukum <oneukum@suse.de>
Date:   Sat Jan 13 07:29:26 2007 +0100

    USB: race fixes for usb-serial step 1
    
    - introduce a spinlock for serial_table to eliminate the window between
      looking up a device and getting a reference
    - delay inscription of a new device into serial_table until it is fully
      initialised
    - make sure disconnect() kills all URBs to avoid leckage across a soft unbind
    
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fdcba53e2d58272bcdb5f1fad694602ccf02ad46
Author: Rainer Weikusat <rainer.weikusat@sncag.com>
Date:   Wed Jan 3 15:36:25 2007 +0100

    fix for bugzilla #7544 (keyspan USB-to-serial converter)
    
    At least the Keyspan USA-19HS USB-to-serial converter supports
    two different configurations, one where the input endpoints
    have interrupt transfer type and one where they are bulk endpoints.
    The default UHCI configuration uses the interrupt input endpoints.
    The keyspan driver, OTOH, assumes that the device has only bulk
    endpoints (all URBs are initialized by calling usb_fill_bulk_urb
    in keyspan.c/ keyspan_setup_urb). This causes the interval field
    of the input URBs to have a value of zero instead of one, which
    'accidentally' worked with Linux at least up to 2.6.17.11 but
    stopped to with 2.6.18, which changed the UHCI support code handling
    URBs for interrupt endpoints. The patch below modifies to driver to
    initialize its input URBs either as interrupt or as bulk URBs,
    depending on the transfertype contained in the associated endpoint
    descriptor (only tested with the default configuration) enabling
    the driver to again receive data from the serial converter.
    
    Greg K-H reworked the patch.
    
    Signed-off-by: Rainer Weikusat <rweikusat@sncag.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3ede760f0e46317c6716ead8facff88f6a924a49
Author: Oliver Neukum <oneukum@suse.de>
Date:   Thu Jan 11 14:35:50 2007 +0100

    USB: total removal of multithreaded probing in usb
    
    The whole approach is simply wrong.  Forking a thread means that
      - errors are ignored
      - locking is ignored
    
    Doing this correctly would require major surgery for questionable benefit.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 66e56ce75e39210415fb12ceacd5f3580ad72d50
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jan 16 12:46:39 2007 -0800

    USB: at91_udc wakeup event updates
    
    This updates the AT91 UDC driver's handling of wakeup events:
    
     - Fix a bug in the original scheme, which was never updated after
       the {enable,disable}_irq_wake() semantics were updated to address
       refcounting issues (i.e. behave for shared irqs).
    
     - Couple handling of both type of wakeup events, to be more direct.  The
       controller can be source of wakeup events for cases like bus reset
       and USB resume.  On some boards, VBUS sensing is also IRQ driven.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 57e06c11372eccf5acebdd4664eb025fee76c561
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jan 16 11:59:45 2007 -0500

    EHCI: force high-speed devices to run at full speed
    
    This patch (as710) adds a sysfs class-device attribute file named
    "companion" for EHCI controllers.  The file contains a list of port
    numbers that are dedicated to the companion controller; by writing a
    port number to the file the user can force a high-speed device
    attached directly to the computer to run at full speed.  (As far as I
    know it is not possible to do this for a device attached to an
    external hub.)  A port is removed from the file by writing the
    negative of its port number.
    
    Several users have asked for this facility and it seems like a useful
    thing to have.  Every now and then one runs across a device which
    behaves much better at full speed than at high speed.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 625b5c9a0069ef1b61feb3ce599b39f1b04b5666
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jan 16 11:58:47 2007 -0500

    EHCI: don't hide ports owned by the companion
    
    This patch (as709) changes the way ehci-hcd presents port status
    values for ports owned by the companion controller.  It no longer
    hides the information; in particular, it allows the core to see the
    disconnect event that occurs when a full- or low-speed device is
    switched over to the companion.  This is required for the next patch
    in this series.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e6316565e568b3b5733be10cfca3c27259bef499
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jan 16 11:58:00 2007 -0500

    EHCI: local variable for port status register
    
    This patch (as708) introduces a local variable to hold the port
    status-register address in ehci-hub.c.  There's not much improvement
    in the object code, but it sure is a lot easier to read.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 896fbd7199035958013d106329843d8ae9618753
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jan 16 11:57:13 2007 -0500

    usbcore: remove unused bandwith-related code
    
    This patch (as841) removes from usbcore a couple of support routines
    meant to help with bandwidth allocation.  With the changes to uhci-hcd
    in the previous patch, these routines are no longer used anywhere.
    Also removed is the CONFIG_USB_BANDWIDTH option; it no longer does
    anything and is no longer needed since the HCDs now handle bandwidth
    issues correctly.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3ca2a3211ee5078d49b04fe7149ff2a76473be51
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jan 16 11:56:32 2007 -0500

    UHCI: fix bandwidth allocation
    
    This patch (as840) fixes the bandwidth allocation mechanism in
    uhci-hcd.  It has never worked correctly.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6a6c957eba20814456bc4bffbd4ec42406f9eb02
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Jan 15 20:12:10 2007 -0800

    USB: ps3 ohci bus glue
    
    USB OHCI driver bus glue for the PS3 game console.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit de44743b033942731f6b898c2d389f7ee5ac890b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jan 15 20:12:06 2007 -0800

    USB: ohci error handling cleanup
    
    Restructure the ohci_hcd_mod_init error handling code in to better support
    the multiple platform drivers.  This does not change the functionality.
    
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4a1a4d8b87389e35c3af04c0d0a95f6a0391b964
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Jan 15 20:11:52 2007 -0800

    USB: ps3 controller hid quirk
    
    Add the USB HID quirk HID_QUIRK_SONY_PS3_CONTROLLER.  This sends an
    HID_REQ_GET_REPORT to the the PS3 controller to put the device into
    'operational mode'.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ad75a41085d80c8ce5e885962c15779935f8267e
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Jan 15 20:11:47 2007 -0800

    USB: ps3 ehci bus glue
    
    USB EHCI driver bus glue for the PS3 game console.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Cc: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b3ebd5222141efa489d95592b7d4536766530e56
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Jan 16 12:01:26 2007 +0100

    USB: better ethtool support for kaweth
    
    this implements enough ethtool support to make NetworkManager happy.
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b98b98f97c519894c64bf1bee6b7957e687dfc41
Author: Oliver Neukum <oneukum@suse.de>
Date:   Tue Jan 16 09:47:12 2007 +0100

    USB: power management for kaweth
    
    - implements suspend when the network interface is down
    - fixes a typo in comments
    - adds debugging output for power management
    - fixes a compiler warning
    
    Signed-off-by: Oliver Neukum <oneukum@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 511779fd9eb7ed67116e4a1cad802363d2d58b20
Author: Phil Endecott <spam_from_usb_devel@chezphil.org>
Date:   Mon Jan 15 11:35:01 2007 -0800

    usb: gadgetfs remove delayed init mode
    
    Gadgetfs had a mode in which endpoint descriptors were written by the user
    program before connection.  This mode had some bugs, and hasn't seen much
    (if any) use.  This patch removes that mode, leaving the mode of operation
    where the user program waits for endpoint 0 to report a SET_CONFIGURATION,
    and only then configures the endpoints.
    
    From: "Phil Endecott" <spam_from_usb_devel@chezphil.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2505107def8b300576223367e3b603620d825e52
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jan 15 11:30:28 2007 -0800

    usb: gadgetfs whitespace cleanup
    
    Remove some whitespace bugs in gadgetfs (mostly from someone's
    patch updating the AIO support).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6dde896e4eac122f388263f0097b691acdc0396f
Author: Marc Pignat <marc.pignat@hevs.ch>
Date:   Tue Jan 9 14:00:11 2007 -0800

    USB: ohci-at91 refcount fix for irq wake enables
    
    The attached patch fixes the unbalanced calls to enable_irq_wake() and
    disable_irq_wake() in the AT91 USB Host driver.
    
    It should resolve these kernel messages:
      Unbalanced IRQ x wake disable
      BUG: warning at kernel/irq/manage.c:167/set_irq_wake()
    
    (The original code was debugged before a bug in the genirq wakeup irq
    logic was fixed by adding the IRQ wake enable/disable refcounting.
    Not all code yet uses the bugfixed model.)
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f3f4906516a084bbd9aa3da7592e6b029fe78f5b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 8 16:18:05 2007 -0500

    usb-storage: SCSI level fixes
    
    This patch (as835) removes from usb-storage the code which sets all
    devices to a SCSI level of at least SCSI-2.  The original reasons for
    doing this no longer apply, and in fact it prevents certain kinds of
    ATA pass-thru commands from being used.
    
    The patch also marks CB and CBI devices that are SCSI-0 (legacy SCSI)
    as being single-LUN, since the combined SCSI-over-USB transport
    protocol has no way to convey LUN information to these devices.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 85a975d0ce48dfa8dec5bf1bd970f8fd2c48af32
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 8 12:01:43 2007 -0500

    UHCI: no dummy TDs for Iso QHs
    
    Isochronous queues don't need a dummy TD because the Queue Header
    isn't managed by the hardware.  This patch (as836) removes the
    unnecessary dummy TDs.
    
    The patch also fixes a long-standing typo in a comment (a "don't" was
    missing -- potentially very confusing!).
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f3fe239b67424d88104e32076aec902c0642925f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jan 8 12:00:28 2007 -0500

    UHCI: improved debugging checks for the frame list
    
    This patch (as768) improves the debugging checks for the uhci-hcd
    frame list.  The number of entries displayed is limited to 10, and the
    driver now checks for the correct Skeleton QH link value at the end of
    each chain of Isochronous TDs.  The code to compute these link values
    is now used in two spots, so it is moved into its own separate
    subroutine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f38649fee955c19f4df9b9e7267f87702712d973
Author: Oliver Neukum <oliver@neukum.org>
Date:   Fri Jan 5 17:42:35 2007 +0100

    USB: race on disconnect in mdc800
    
    I overlooked one. Setting the flag and killing the URBs must be under the lock
    so that no URB is submitted after usb_kill_urb()
    
    Signed-off-by: Oliver Neukum <oliver@neukum.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f23ee1fefdc1f80bd8a3ab04a1c41ab2dec14c9
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sat Dec 30 22:43:10 2006 -0800

    USB: add binary API to usbmon
    
    This patch adds a new, "binary" API in addition to the old, text API usbmon
    had before. The new API allows for less CPU use, and it allows to capture
    all data from a packet where old API only captured 32 bytes at most. There
    are some limitations and conditions to this, e.g. in case someone constructs
    a URB with 1GB of data, it's not likely to be captured, because even the
    huge buffers of the new reader are finite. Nonetheless, I expect this new
    capability to capture all data for all real life scenarios.
    
    The downside is, a special user mode application is required where cat(1)
    worked before. I have sample code at http://people.redhat.com/zaitcev/linux/
    and Paolo Abeni is working on patching libpcap.
    
    This patch was initially written by Paolo and later I tweaked it, and
    we had a little back-and-forth. So this is a jointly authored patch, but
    I am submitting this I am responsible for the bugs.
    
    Signed-off-by: Paolo Abeni <paolo.abeni@email.it>
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8ef36bc0a5fe973bddaa54a5a07cda29e04a602
Author: Sarah Bailey <saharabeara@gmail.com>
Date:   Sat Dec 23 23:14:58 2006 -0800

    USB: Add usb_endpoint_xfer_control to usb.h
    
    Added a function to check if an endpoint is a control endpoint.
    There were similar functions for bulk, interrupt, and isoc,
    but not for control endpoints.
    
    Signed-off-by: Sarah Bailey <saharabeara@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ca46b862f0e30fe0dcc4a4aef5b32f6b6a3fda5
Author: John Daiker <daikerjohn@gmail.com>
Date:   Fri Dec 29 19:02:06 2006 -0800

    USB Gadget file_storage.c: remove unnecessary casts
    
    Went looking through some usb stuff and found some unnecessary casts in
    file_storage.c  This is part of the KernelJanitors TODO list.
    
    Signed-off-by: John Daiker <daikerjohn@gmail.com>
    Acked-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 52d67f0b5c1b1827cd842020d40bdde4f7d04f59
Author: Johannes Hoelzl <johannes.hoelzl@gmx.de>
Date:   Sun Dec 17 22:05:09 2006 +0100

    USB: Bugfix for aircable: Add module and name to usb_serial_driver
    
    While adding the dynamic-id support to usb serial I found a small bug in
    the air cable driver:
    
    Adds module and name information to the usb_serial_driver instance
    of aircable. So the aircable driver is correctly shown under
    /sys/bus/usb-serial/drivers/aircable and has the module link.
    
    Signed-off-by: Johannes Hoelzl <johannes.hoelzl@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9b1b787736852f462dbf277b3ca708cbbf693ae
Author: Johannes Hoelzl <johannes.hoelzl@gmx.de>
Date:   Sun Dec 17 21:50:24 2006 +0100

    USB serial: add driver pointer to all usb-serial drivers
    
    Every usb serial driver should have a pointer to the corresponding usb driver.
    So the usb serial core can add a new id not only to the usb serial driver, but
    also to the usb driver.
    
    Also the usb drivers of ark3116, mos7720 and mos7840 missed the flag
    no_dynamic_id=1. This is added now.
    
    Signed-off-by: Johannes Hoelzl <johannes.hoelzl@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 93bacefc4cc0b53e1cb6a336d43847154fdf6886
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Dec 17 21:50:23 2006 +0100

    USB serial: add dynamic id support to usb-serial core
    
    Thanks to Johannes Hoelzl <johannes.hoelzl@gmx.de> for fixing a few
    things and getting it all working properly.
    
    This adds support for dynamic usb ids to the usb serial core.  The file
    "new_id" will show up under the usb serial driver, not the usb driver
    associated with the usb-serial driver (yeah, it can be a bit confusing
    at first glance...)
    
    This patch also modifies the USB core to allow the usb-serial core to
    reuse much of the dynamic id logic.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Johannes Hoelzl <johannes.hoelzl@gmx.de>

commit 495a678fc62e850d15f860d39faee07ba0a8910c
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Wed Dec 13 21:09:55 2006 +0100

    ohci: Add support for OHCI controller on the of_platform bus
    
    PPC embedded systems can have a ohci controller builtin. In the
    new model, it will end up as a driver on the of_platform bus,
    this patches takes care of them.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e16fabe5dbcff15de6cdcba406195fe6e4380df
Author: Sylvain Munaut <tnt@246tNt.com>
Date:   Wed Dec 13 21:09:54 2006 +0100

    ohci: Rework bus glue integration to allow several at once
    
    The previous model had the module_init & module_exit function in the
    bus glue .c files themselves. That's a problem if several glues need
    to be selected at once and the driver is built has module. This case
    is quite common in embedded system where you want to handle both the
    integrated ohci controller and some extra controller on PCI.
    
    The ohci-hcd.c file now provide the module_init & module_exit and
    appropriate driver registering/unregistering is done conditionally,
    using #ifdefs.
    
    Signed-off-by: Sylvain Munaut <tnt@246tNt.com>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ad55d71a3d4401f44b4ddee1412283c99eedd05c
Author: Ole Andre Vadla Ravnas <oleavr@gmail.com>
Date:   Thu Dec 14 16:01:28 2006 -0800

    rndis_host learns ActiveSync basics
    
    Windows Mobile 5 based devices described as supporting "ActiveSync":
    
     - Speak RNDIS but lack the CDC and union descriptors.  This patch
       updates the cdc ethernet code to fake ACM descriptors we need.
    
     - Require RNDIS_MSG_QUERY messages to include a buffer of the size the
       response should generate.  This patch updates the rndis host code to
       pass this will-be-ignored data.
    
    The resulting RNDIS host code has been reported to work with several
    WM5 based devices.
    
    (Note that a fancier patch is available at synce.sf.net.)
    
    
    Some bugfixes, affecting not just ActiveSync:
        (a)	when cleaning up after RNDS init fails, scrub the second interface
    	just like cdc_ether does, so disconnect won't oops.
        (b)	handle peripherals that use the pad-to-end-of-packet option; some
    	devices can't talk to us if that option doesn't work.
        (c)	when choosing configurations, don't forget about an RNDIS config
    	just because the RNDIS driver is dynamically linked.
    
    Cleanup, streamlining, bugfixes, Kconfig, and matching hub driver update.
    Also for paranoia's sake, refuse to talk to something that looks like a
    real modem instead of RNDIS.
    
    Signed-off-by: Ole Andre Vadla Ravnaas <oleavr@gmail.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 11d5489873facd395653a4ee14669751bfe9bab5
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Dec 11 15:59:04 2006 -0800

    USB: ethernet gadget interop with MCCI Windows driver
    
    It turns out that minor tweaks to the "CDC Subset" support in the Ethernet
    gadget driver, just updating a config descriptor, let it be automagically
    recognized by a Windows driver supported by MCCI.
    
    This patch adds those descriptors, so systems using PXA 255 processors
    (like Gumstix etc) can interop with those commercial MS-Windows drivers.
    This is a Good Thing since Microsoft's RNDIS code has bugginess issues,
    which are unfortunately compounded by "won't fix" issues as well as "the
    published specs are incomplete and wrong" issues.  Being able to talk to
    the MCCI driver gives Windows users another connectivity option.  (MCCI
    also has CDC Ethernet drivers, which can help most non-PXA processors.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1737bf2c5e78e331ad0a30b8c34edd1016d043c0
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Dec 15 16:04:52 2006 -0500

    usbcore: remove unneeded error check
    
    This patch (as830) removes some unnecessary error checking.  According
    to the kerneldoc, schedule_work() can't fail.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2360e4aa64da412c29136113f8050b6aa9e757b8
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Dec 13 13:07:10 2006 -0800

    USB: indicate active altsetting in proc/bus/usb/devices file
    
    Update /proc/bus/usb/devices output to report active altsettings.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 316547fdfae1be3847add6a18a711703e6d5ebc1
Author: Dan Carpenter <error27@gmail.com>
Date:   Wed Dec 13 00:03:38 2006 -0800

    USB: devio.c add missing INIT_LIST_HEAD()
    
    It should hopefully fix the list corruption bug on:
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=214402
    
    Add a missing INIT_LIST_HEAD()
    
    Signed-off-by: Dan Carpenter <error27@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2cba72f02559ec0bbbcdba8d2604517515b55f03
Author: Oliver Neukum <oliver@neukum.name>
Date:   Fri Dec 15 23:48:56 2006 +0100

    USB: mutexification of rio500
    
    this makes the rio500 misc usb driver use mutexes and turns uninterruptible
    sleep into interruptible sleep where the semantics are not affected.
    
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4727810705d3cf8d565a2cd6c1045bc1db7d3532
Author: Tobias Klauser <tklauser@distanz.ch>
Date:   Wed Dec 20 11:42:12 2006 +0100

    USB: Remove unneeded void * casts in idmouse.c
    
    The patch removes unneeded void * casts for the following (void *) pointers:
    - struct file: private_data
    
    The patch also contains some whitespace and coding style cleanups in the
    relevant areas.
    
    Signed-off-by: Tobias Klauser <tklauser@distanz.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e7d8712c15e087ba6201e5988d618ee03dfe693c
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Dec 12 15:12:30 2006 -0800

    USB: define USB_CLASS_MISC in <linux/usb/ch9.h>
    
    Add USB_CLASS_MISC to <linux/usb/ch9.h>
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5f848137744106ee737f559454ce5adfceb38347
Author: David Brownell <david-b@pacbell.net>
Date:   Sat Dec 16 15:34:53 2006 -0800

    USB: <linux/usb_ch9.h> becomes <linux/usb/ch9.h>
    
    This moves <linux/usb_ch9.h> to <linux/usb/ch9.h> to reduce some of the
    clutter of usb header files.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d728e327d4f86df439fa6b6f2f64b278394a58cc
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Dec 28 15:27:27 2006 +1100

    USB: Fix EHCI warning
    
    This patch fixes a warning introduced by the big endian MMIO EHCI
    support patch on platforms that don't have readl_be/writel_be variants
    (though mostly harmless as those are called in an if (0) statement,
    but gcc still warns).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>

commit b32e904d54d163c6f97fc3c7586d381f4f11c3a5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Dec 28 15:26:59 2006 +1100

    USB: Fix OHCI warning
    
    This patch fixes a warning introduces by the split endian OHCI support
    patch on platforms that don't have readl_be/writel_be variants (though
    mostly harmless as those are called in an if (0) statement, but gcc
    still warns).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 083522d76662cda71328df1f3d75e5a9057c7c9f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Dec 15 06:54:08 2006 +1100

    USB: Implement support for EHCI with big endian MMIO
    
    This patch implements supports for EHCI controllers whose MMIO
    registers are big endian and enables that functionality for
    the Toshiba SCC chip. It does _not_ add support for big endian
    in-memory data structures as this is not needed for that chip
    and I hope it will never be.
    
    The guts of the patch are to convert readl(...) to
    ehci_readl(ehci, ...) and similarly for register writes.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 11d1a4aa8d657478cb2e5d33f203ba8f01b9ac24
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Dec 15 06:54:03 2006 +1100

    USB: Implement support for "split" endian OHCI
    
    This patch separates support for big endian MMIO register access
    and big endian descriptors in order to support the Toshiba SCC
    implementation which has big endian registers but little endian
    in-memory descriptors.
    
    It simplifies the access functions a bit in ohci.h while at it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4302a595cd9c6363b495460497ecbda49fa16858
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Dec 15 06:53:55 2006 +1100

    USB: Rework the OHCI quirk mecanism as suggested by David
    
    This patch applies David Brownell's suggestion for reworking the
    OHCI quirk mechanism via a table of PCI IDs. It adapts the existing
    quirks to use that mechanism.
    
    This also moves the quirks to reset() as suggested by the comment
    in there. This is necessary as we need to have the endian properly
    set before we try to init the controller.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0873c76485c126a4df70a6961fd354b21b7987f7
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 20 13:09:50 2006 -0700

    USB: convert usb class devices to real devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7bc3d635628db100c024aca7f836a18188e9bb62
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 19 23:59:31 2006 -0700

    USB: move usb_device_class class devices to be real devices
    
    This moves the usb class devices that control the usbfs nodes to show up
    in the proper place in the larger device tree.
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6e8cf7751f9fb913095d6142d068f41fbf0424bb
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 18 00:20:19 2007 -0800

    USB: add EPIC support to the io_edgeport driver
    
    This patch adds EPiC support to the io_edgeport driver which adds
    support for a number of NCR printers:
    	- NCR (Axiohm) 7401-K580 printer
    	- NCR (TEC) 7401-K590 printer, 7402-K592
    	- NCR (TEC) 7167, 7168 printers
    	- NCR (TEC) 7197, 7198, F306, F307, F309 printers
    	- NCR (Axiohm) 7194 printer
    	- NCR (Axiohm) 7158 printer
    and a few more.
    
    It is based on the 2.6.19 kernel.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 20b2e28fc5557cda2cc840f44c6744b61b068ad6
Author: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
Date:   Wed Jan 24 16:19:37 2007 -0200

    USB: unusual_devs.h for Sony floppy
    
    This patch increases the range for 0x054c:0x002c devices to make
    the following Sony USB floppy to work:
    
    T:  Bus=02 Lev=01 Prnt=01 Port=02 Cnt=02 Dev#=  6 Spd=12  MxCh= 0
    D:  Ver= 1.10 Cls=00(>ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
    P:  Vendor=054c ProdID=002c Rev=20.00
    S:  Manufacturer=SONY
    S:  Product=USB Floppy
    C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=500mA
    I:  If#= 0 Alt= 0 #EPs= 3 Cls=08(stor.) Sub=04 Prot=00 Driver=usb-storage
    E:  Ad=82(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=01(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=83(I) Atr=03(Int.) MxPS=   2 Ivl=127ms
    
    Signed-off-by: Marcelo Ricardo Leitner <mrl@mandriva.com>
    Signed-off-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 21d37bbc65e39a26856de6b14be371ff24e0d03f
Merge: bff288c... 57e1c5c...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 15:36:08 2007 -0800

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6: (140 commits)
      ACPICA: reduce table header messages to fit within 80 columns
      asus-laptop: merge with ACPICA table update
      ACPI: bay: Convert ACPI Bay driver to be compatible with sysfs update.
      ACPI: bay: new driver is EXPERIMENTAL
      ACPI: bay: make drive_bays static
      ACPI: bay: make bay a platform driver
      ACPI: bay: remove prototype procfs code
      ACPI: bay: delete unused variable
      ACPI: bay: new driver adding removable drive bay support
      ACPI: dock: check if parent is on dock
      ACPICA: fix gcc build warnings
      Altix: Add ACPI SSDT PCI device support (hotplug)
      Altix: ACPI SSDT PCI device support
      ACPICA: reduce conflicts with Altix patch series
      ACPI_NUMA: fix HP IA64 simulator issue with extended memory domain
      ACPI: fix HP RX2600 IA64 boot
      ACPI: build fix for IBM x440 - CONFIG_X86_SUMMIT
      ACPICA: Update version to 20070126
      ACPICA: Fix for incorrect parameter passed to AcpiTbDeleteTable during table load.
      ACPICA: Update copyright to 2007.
      ...

commit 55048021177eee956af88333ec4565919c8567e4
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Mon Feb 5 16:38:53 2007 -0800

    [SCSI] aic79xx: fix bracket mismatch in unused macro
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2065e310cc116e4b2b0f42faaf27f0c9baaca9cd
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 5 16:39:01 2007 -0800

    [SCSI] BusLogic: Replace 'boolean' by 'bool'
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bff288c19e8b6217ddd660d4fa42c29a0ab1d58c
Author: Oleg Verych <olecom@flower.upol.cz>
Date:   Wed Feb 7 23:04:35 2007 +0100

    [PATCH] kbuild, Kbuild.include: avoid using spaces in call arguments
    
    Do not use whitespace in arguments of functions in makefiles, as they
    propagate further without notice.  Thus we get
    
      + echo ' y'
    
      instead of
    
      + echo y
    
    Fix misleading comments.
    
    Signed-off-by: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 35d6848322364b396484b5fcc450f6b009a3dac4
Author: Ken Witherow <ken@krwtech.com>
Date:   Mon Feb 5 16:38:28 2007 -0800

    [SCSI] advansys: clean up warnings
    
    Fix typecast warnings and switch from check_region to request_region
    
    (akpm: Ken and Jeffrey Phillips Freeman <jeffreyfreeman@syncleus.com> are
    possible advansys testers)
    
    Signed-off-by: Ken Witherow <ken@krwtech.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a84cb1e82dc4ada9f93e708fa606fa918710a338
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Mon Feb 5 16:38:53 2007 -0800

    [SCSI] 53c7xx: brackets fix in uncompiled code
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit af0db3a8ab9917e9a0184470a2995dd8fe66c6e2
Author: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
Date:   Mon Feb 5 16:38:36 2007 -0800

    [SCSI] nsp_cs: remove old scsi code
    
    Signed-off-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a76106afbeb0c7d50762e7e5239496e5f7a0a074
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Feb 5 16:38:27 2007 -0800

    [SCSI] aic79xx: make ahd_match_scb() static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0a361e31864f0822671703963f52957b3f275b93
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 16:38:55 2007 -0800

    [SCSI] DAC960: kmalloc->kzalloc/Casting cleanups
    
    A patch to switch kmalloc->kzalloc and to clean unneeded kammloc,
    pci_alloc_consistent casts
    
    Signed-off-by: Ahmed Darwish <darwish.07@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 22cfefb56b53103a99908ec63311e61c217eaffe
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Feb 5 16:39:03 2007 -0800

    [SCSI] scsi_kmap_atomic_sg(): check that local irqs are disabled
    
    The KM_BIO_SRC_IRQ kmap slot must be taken with local irqs disabled.  Add a
    check into scsi for this.
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ae80031a171b81d28b92877e7a9ce9b26cbfe051
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Wed Jan 31 02:39:40 2007 -0500

    [PATCH] Rename IPW2100 debugging macros to not look like config options.
    
      Rename some internal ipw2100 debugging macros to not look like
    user-settable kernel config settings.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 48f33c95291e429963dcd2dfe625d189d83e3925
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon Jan 29 01:00:30 2007 +0000

    [PATCH] zd1211rw: Remove noisy debug message
    
    This causes a lot of uninteresting output in noisy environments, and
    doesn't really serve any purpose.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 22d3405f62c1cef6661ced96a64458235f9c5fe5
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Mon Jan 29 01:00:03 2007 +0000

    [PATCH] zd1211rw: Added error stats update
    
    Added update of network device error statistics.
    
    Based on earlier work by Maxime Austruy.
    
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit fa8e29cff748efc7118c66b51f1241a927d86b98
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Mon Jan 29 00:59:40 2007 +0000

    [PATCH] zd1211rw: Fixed array size issue in reset_mode
    
    Andy Green found this issue.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6e3632f66110b144183d53d550a51cbbbabc178f
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Mon Jan 29 00:59:28 2007 +0000

    [PATCH] zd1211rw: Reset device in the probe call
    
    This resets the device in the probe call. It does work with
    2.6.19.2 including the softmac patches. It might fix the
    reboot/reset problems a lot of people reported.
    
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 95c777956d64c60631a637eb9a142fea88fb1e78
Author: Michael Buesch <mb@bu3sch.de>
Date:   Sun Jan 28 14:32:52 2007 -0600

    [PATCH] bcm43xx: Enable fwpostfix in nondebug bcm43xx
    
    The in-kernel bcm43xx driver only works with V3 firmware, whereas the
    experimental version that incorporates the d80211 stack requires V4
    firmware. In bcm43xx-d80211, the fwpostfix module parameter is used
    to differentiate between the versions. In bcm43xx-softmac, this
    module parameter is only enabled when debugging is on. This patch
    makes the module parameter available unconditionaly, and should
    ease the future transition from softmac to d80211.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d1dbd283d68cace314edd186cf530324186dd26e
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Jan 23 16:43:26 2007 -0600

    [PATCH] bcm43xx: Fix scaling error for 'iwlist freq' information
    
    The bcm43xx driver returns the available frequencies to 'iwlist freq'
    with the wrong scaling.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 36ad8cd7b1215ed896cab1b59a7a94577e7c4f6b
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Jan 23 14:26:35 2007 -0600

    [PATCH] bcm43xx: Fix scaling error for 'iwlist rate' information
    
    The bcm43xx scales the rate information supplied to a WE iwlist rate
    call incorrectly.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 471030390d4561f430c9aea36e72d96bd2ee48f1
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sun Jan 21 22:27:35 2007 -0600

    [PATCH] bcm43xx: Fix problem with >1 GB RAM
    
    Some versions of the bcm43xx chips only support 30-bit DMA, which means
    that the descriptors and buffers must be in the first 1 GB of RAM. On
    the i386 and x86_64 architectures with more than 1 GB RAM, an incorrect
    assignment may occur. This patch ensures that the various DMA addresses
    are within the capability of the chip. Testing has been limited to x86_64
    as no one has an i386 system with more than 1 GB RAM.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 192b775cc811b0e9e0d174ffdd5a814794392482
Author: Maxime Austruy <maxime@tralhalla.org>
Date:   Mon Jan 29 00:59:51 2007 +0000

    [PATCH] zd1211rw: fix potential leak in usb_init
    
    usb_init should call destroy_workqueue when usb_register fails.
    
    Signed-off-by: Maxime Austruy <maxime@tralhalla.org>
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ff05d1c4643dd4260eb699396043d7e8009c0de4
Author: Joel Becker <joel.becker@oracle.com>
Date:   Tue Jan 23 17:00:45 2007 -0800

    configfs: Zero terminate data in configfs attribute writes.
    
    Attributes in configfs are text files.  As such, most handlers expect to be
    able to call functions like simple_strtoul() without checking the bounds
    of the buffer.  Change the call to zero terminate the buffer before calling
    the client's ->store() method.  This does reduce the attribute size from
    PAGE_SIZE to PAGE_SIZE-1.
    
    Also, change get_zeroed_page() to alloc_page(), as we are handling the
    termination.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit b559292e066f6d570cd5aa5dbd41de61dd04bdce
Author: Philipp Reisner <philipp.reisner@linbit.com>
Date:   Thu Jan 11 10:58:10 2007 +0100

    [PATCH] ocfs2 heartbeat: clean up bio submission code
    
    As was already pointed out Mathieu Avila on Thu, 07 Sep 2006 03:15:25 -0700
    that OCFS2 is expecting bio_add_page() to add pages to BIOs in an easily
    predictable manner.
    
    That is not true, especially for devices with own merge_bvec_fn().
    
    Therefore OCFS2's heartbeat code is very likely to fail on such devices.
    
    Move the bio_put() call into the bio's bi_end_io() function. This makes the
    whole idea of trying to predict the behaviour of bio_add_page() unnecessary.
    Removed compute_max_sectors() and o2hb_compute_request_limits().
    
    Signed-off-by: Philipp Reisner <philipp.reisner@linbit.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 925037bcba7691db2403684141a276930ad184f3
Author: Zhen Wei <zwei@novell.com>
Date:   Tue Jan 23 17:19:59 2007 -0800

    ocfs2: introduce sc->sc_send_lock to protect outbound outbound messages
    
    When there is a lot of multithreaded I/O usage, two threads can collide
    while sending out a message to the other nodes. This is due to the lack of
    locking between threads while sending out the messages.
    
    When a connected TCP send(), sendto(), or sendmsg() arrives in the Linux
    kernel, it eventually comes through tcp_sendmsg(). tcp_sendmsg() protects
    itself by acquiring a lock at invocation by calling lock_sock().
    tcp_sendmsg() then loops over the buffers in the iovec, allocating
    associated sk_buff's and cache pages for use in the actual send. As it does
    so, it pushes the data out to tcp for actual transmission. However, if one
    of those allocation fails (because a large number of large sends is being
    processed, for example), it must wait for memory to become available. It
    does so by jumping to wait_for_sndbuf or wait_for_memory, both of which
    eventually cause a call to sk_stream_wait_memory(). sk_stream_wait_memory()
    contains a code path that calls sk_wait_event(). Finally, sk_wait_event()
    contains the call to release_sock().
    
    The following patch adds a lock to the socket container in order to
    properly serialize outbound requests.
    
    From: Zhen Wei <zwei@novell.com>
    Acked-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit f71aa8a55a0ae1a0d06c6079265d16502a678e8e
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Thu Jan 25 14:51:50 2007 -0800

    [PATCH] ocfs2: drop INET from Kconfig, not needed
    
    OCFS2: drop 'depends on INET' since local mounts are now allowed.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 0dd82141b236ce36253e3056c6068ee3d5732196
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Mon Jan 29 15:44:27 2007 -0800

    ocfs2_dlm: Add timeout to dlm join domain
    
    Currently the ocfs2 dlm has no timeout during dlm join domain. While this is
    not a problem in normal operation, this does become an issue if, say, the
    other node is refusing to let the node join the domain because of a stuck
    recovery. This patch adds a 90 sec timeout.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e4968476a9bc5a6b30076076b4f3ce3e692e0d79
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Mon Jan 29 15:37:02 2007 -0800

    ocfs2_dlm: Silence some messages during join domain
    
    These messages can easily be activated using the mlog infrastructure
    and don't need to be enabled by default.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 1faf289454b9eeb6e463da3eee47f7009668370d
Author: Srinivas Eeda <srinivas.eeda@oracle.com>
Date:   Mon Jan 29 15:31:35 2007 -0800

    ocfs2_dlm: disallow a domain join if node maps mismatch
    
    There is a small window where a joining node may not see the node(s) that
    just died but are still part of the domain. To fix this, we must disallow
    join requests if the joining node has a different node map.
    
    A new field node_map is added to dlm_query_join_request to send the current
    nodes nodemap along with join request. On the receiving end the nodes that
    are part of the cluster verifies if this new node sees all the nodes that
    are still part of the cluster. They disallow the join if the maps mismatch.
    
    Signed-off-by: Srinivas Eeda <srinivas.eeda@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit f3f854648de64c4b6f13f6f13113bc9525c621e5
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Mon Jan 29 15:19:16 2007 -0800

    ocfs2_dlm: Ensure correct ordering of set/clear refmap bit on lockres
    
    Eventhough the set refmap bit message is sent before the clear refmap
    message, currently there is no guarentee that the set message will be
    handled before the clear. This patch prevents the clear refmap to be
    processed while the node is sending assert master messages to other
    nodes. (The set refmap message is sent as a response to the assert
    master request).
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit ab81afd30bc154bb1e8749e5aeeffe9b93c90834
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Mon Jan 29 14:57:14 2007 -0800

    ocfs2: Binds listener to the configured ip address
    
    This patch binds the o2net listener to the configured ip address
    instead of INADDR_ANY for security. Fixes oss.oracle.com bugzilla#814.
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 3b8118cffad224415c6f6f35abe7ca2a1d79c05a
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 17:05:53 2007 -0800

    ocfs2_dlm: Calling post handler function in assert master handler
    
    This patch prevents the dlm from sending the clear refmap message
    before the set refmap. We use the newly created post function handler
    routine to accomplish the task.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit d74c9803a90d733f5fb7270475aa6d14b45796c6
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 17:04:25 2007 -0800

    ocfs2: Added post handler callable function in o2net message handler
    
    Currently o2net allows one handler function per message type. This
    patch adds the ability to call another function to be called after
    the handler has returned the message to the other node.
    
    Handlers are now given the option of returning a context (in the form of a
    void **) which will be passed back into the post message handler function.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 74aa25856c693d20a886cdb31a004aaca411d135
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 15:11:36 2007 -0800

    ocfs2_dlm: Cookies in locks not being printed correctly in error messages
    
    The dlm encodes the node number and a sequence number in the lock cookie.
    It also stores the cookie in the lockres in the big endian format to avoid
    swapping 8 bytes on each lock request. The bug here was that it was assuming
    the cookie to be in the cpu format when decoding it for printing the error
    message. This patch swaps the bytes before the print.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 90aaaf1c235a70daee04e897e9501415b766de69
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 15:01:45 2007 -0800

    ocfs2_dlm: Silence a failed convert
    
    When the lockres is in migrate or recovery state, all convert requests
    are denied with the appropriate error status that is handled on the
    requester node. This patch silences the erroneous error message printed
    on the master node.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a6fa36402aba96362311318200d710ea1719e59b
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 14:59:12 2007 -0800

    ocfs2_dlm: wake up sleepers on the lockres waitqueue
    
    The dlm was not waking up threads waiting on the lockres wait queue,
    waiting for the lockres to be no longer be in the DLM_LOCK_RES_IN_PROGRESS
    and the DLM_LOCK_RES_MIGRATING states.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 28b72d9c92ed43e01e4094f57bcad1814b002779
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 14:57:50 2007 -0800

    ocfs2_dlm: Dlm dispatch was stopping too early
    
    dlm_dispatch_work was not processing the queued up tasks at
    the first sign of the node leaving the domain leading to not
    only incompleted tasks but also a mismatch in the dlm refcnt.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 50635f15b324cbf45a58f103e6b4c7e42502b683
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 14:54:39 2007 -0800

    ocfs2_dlm: Drop inflight refmap even if no locks found on the lockres
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 1cd04dbe3364be71b93e3aaf4545daa1e261aaa1
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Wed Jan 17 14:53:37 2007 -0800

    ocfs2_dlm: Flush dlm workqueue before starting to migrate
    
    This is to prevent the condition in which a previously queued
    up assert master asserts after we start the migration. Now
    migration ensures the workqueue is flushed before proceeding
    with migrating the lock to another node. This condition is
    typically encountered during parallel umounts.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e17e75ecb86b8ce9b51b219b5348517561031f80
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Fri Jan 5 15:04:49 2007 -0800

    ocfs2_dlm: Fix migrate lockres handler queue scanning
    
    The migrate lockres handler was only searching for its lock on
    migrated lockres on the expected queue. This could be problematic
    as the new master could have also issued a convert request
    during the migration and thus moved the lock to the convert queue.
    We now search for the lock on all three queues.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <Sunil.Mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 71ac1062435ba2d58bf64817b47a6e44f316752e
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Fri Jan 5 15:02:30 2007 -0800

    ocfs2_dlm: Make dlmunlock() wait for migration to complete
    
    dlmunlock() was not waiting for migration to complete before releasing locks
    on locally mastered locks.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <Sunil.Mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit ddc09c8ddac8d0f170ba8caa8128801f358dccff
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Fri Jan 5 15:00:17 2007 -0800

    ocfs2_dlm: Fixes race between migrate and dirty
    
    dlmthread was removing lockres' from the dirty list
    and resetting the dirty flag before shuffling the list.
    This patch retains the dirty state flag until the lists
    are shuffled.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Sunil Mushran <Sunil.Mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit faf0ec9f13defb57f4269ecb22ed86f2874ee89a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Dec 14 00:17:32 2006 +0100

    [PATCH] fs/ocfs2/dlm/: make functions static
    
    This patch makes some needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit ba2bf2185121db74e075c703fbf986761733dd1d
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Fri Dec 1 14:47:20 2006 -0800

    ocfs2_dlm: fix cluster-wide refcounting of lock resources
    
    This was previously broken and migration of some locks had to be temporarily
    disabled. We use a new (and backward-incompatible) set of network messages
    to account for all references to a lock resources held across the cluster.
    once these are all freed, the master node may then free the lock resource
    memory once its local references are dropped.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit b592fcfe7f06c15ec11774b5be7ce0de3aa86e73
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Jan 24 12:35:52 2007 -0700

    sysfs: Shadow directory support
    
    The problem.  When implementing a network namespace I need to be able
    to have multiple network devices with the same name.  Currently this
    is a problem for /sys/class/net/*.
    
    What I want is a separate /sys/class/net directory in sysfs for each
    network namespace, and I want to name each of them /sys/class/net.
    
    I looked and the VFS actually allows that.  All that is needed is
    for /sys/class/net to implement a follow link method to redirect
    lookups to the real directory you want.
    
    Implementing a follow link method that is sensitive to the current
    network namespace turns out to be 3 lines of code so it looks like a
    clean approach.  Modifying sysfs so it doesn't get in my was is a bit
    trickier.
    
    I am calling the concept of multiple directories all at the same path
    in the filesystem shadow directories.  With the directory entry really
    at that location the shadow master.
    
    The following patch modifies sysfs so it can handle a directory
    structure slightly different from the kobject tree so I can implement
    the shadow directories for handling /sys/class/net/.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f65168de7d68a5795e945e781d85b313bdc97b9
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jan 25 15:56:15 2007 -0500

    Driver Core: Increase the default timeout value of the firmware subsystem
    
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=174589
    
    The ipw driver sometimes takes a long time to load its firmware.
    Whilst the ipw driver should be using the async interface of
    the firmware loader to make this a non-issue, this is a minimal fix.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b7a3e813fb84624166f034e25234f98de5846bfc
Author: Kay Sievers <kay.sievers@novell.com>
Date:   Sat Oct 7 21:54:55 2006 +0200

    Driver core: allow to delay the uevent at device creation time
    
    For the block subsystem, we want to delay all uevents until the
    disk has been scanned and allpartitons are already created before
    the first event is sent out.
    
    Signed-off-by: Kay Sievers <kay.sievers@novell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f9f852df2faf76a2667949ddb4947d4b8f99f02f
Author: Kay Sievers <kay.sievers@novell.com>
Date:   Sat Oct 7 21:54:55 2006 +0200

    Driver core: add device_type to struct device
    
    This allows us to add type specific attributes, uevent vars and
    release funtions.
    
    A subsystem can carry different types of devices like the "block"
    subsys has disks and partitions. Both types create a different set
    of attributes, but belong to the same subsystem.
    
    This corresponds to the low level objects:
      kobject   -> device       (object/device data)
      kobj_type -> device_type  (type of object/device we are embedded in)
      kset      -> class/bus    (list of objects/devices of a subsystem)
    
    Signed-off-by: Kay Sievers <kay.sievers@novell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 239378f16aa1ab5c502e42a06359d2de4f88ebb4
Author: Kay Sievers <kay.sievers@novell.com>
Date:   Sat Oct 7 21:54:55 2006 +0200

    Driver core: add uevent vars for devices of a class
    
    Devices converted from class_device to device should have
    the same uevent keys as the original class_device had. We
    search up the parents until we find the first bus device and
    add the (already deprecated) PHYDEV* values.
    
    Signed-off-by: Kay Sievers <kay.sievers@novell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bf0acc330229554c695e4f95e5aa2d2c4f12de1f
Author: Frank Haverkamp <haver@vnet.ibm.com>
Date:   Wed Jan 17 17:51:18 2007 +0100

    SYSFS: Fix missing include of list.h in sysfs.h
    
    Sysfs.h uses definitions (e.g. struct list_head s_sibling) from list.h
    but does not include it.
    
    Signed-off-by: Frank Haverkamp <haver@vnet.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4de0ca8132861a4255d0a7a991bdfab38378267c
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Wed Jan 17 04:54:07 2007 -0500

    HOWTO: Add a reference to Harbison and Steele
    
    Add a reference to Harbison and Steele's C book.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 82244b169ed2eee1ef7f97a3a6693f5a6eff8a69
Author: Oliver Neukum <oliver@neukum.name>
Date:   Tue Jan 2 08:48:08 2007 +0100

    sysfs: error handling in sysfs, fill_read_buffer()
    
    if a driver returns an error in fill_read_buffer(), the buffer will be
    marked as filled. Subsequent reads will return eof. But there is
    no data because of an error, not because it has been read.
    Not marking the buffer filled is the obvious fix.
    
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b067db49e1f4013ef02ef68845701b600e88a722
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 13:44:44 2007 +0100

    kobject: kobject_put cleanup
    
    This patch removes redundant argument checks for kobject_put().
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f75065367077bd3b77842a5aa523ecd05d33e82d
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 13:41:10 2007 +0100

    sysfs: kobject_put cleanup
    
    This patch removes redundant argument checks for kobject_put().
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d3fc373ac5061cab7a654502b942e7d00e77f733
Author: Frederik Deweerdt <deweerdt@free.fr>
Date:   Fri Jan 5 12:04:33 2007 -0800

    sysfs: suppress lockdep warnings
    
    Lockdep issues the following warning:
    [    9.064000] =============================================
    [    9.064000] [ INFO: possible recursive locking detected ]
    [    9.064000] 2.6.20-rc3-mm1 #3
    [    9.064000] ---------------------------------------------
    [    9.064000] init/1 is trying to acquire lock:
    [    9.064000]  (&sysfs_inode_imutex_key){--..}, at: [<c03e6afc>] mutex_lock+0x1c/0x1f
    [    9.064000]
    [    9.064000] but task is already holding lock:
    [    9.064000]  (&sysfs_inode_imutex_key){--..}, at: [<c03e6afc>] mutex_lock+0x1c/0x1f
    [    9.065000]
    [    9.065000] other info that might help us debug this:
    [    9.065000] 2 locks held by init/1:
    [    9.065000]  #0:  (tty_mutex){--..}, at: [<c03e6afc>] mutex_lock+0x1c/0x1f
    [    9.065000]  #1:  (&sysfs_inode_imutex_key){--..}, at: [<c03e6afc>] mutex_lock+0x1c/0x1f
    [    9.065000]
    [    9.065000] stack backtrace:
    [    9.065000]  [<c010390d>] show_trace_log_lvl+0x1a/0x30
    [    9.066000]  [<c0103935>] show_trace+0x12/0x14
    [    9.066000]  [<c0103a2f>] dump_stack+0x16/0x18
    [    9.066000]  [<c0138cb8>] print_deadlock_bug+0xb9/0xc3
    [    9.066000]  [<c0138d17>] check_deadlock+0x55/0x5a
    [    9.066000]  [<c013a953>] __lock_acquire+0x371/0xbf0
    [    9.066000]  [<c013b7a9>] lock_acquire+0x69/0x83
    [    9.066000]  [<c03e6b7e>] __mutex_lock_slowpath+0x75/0x2d1
    [    9.066000]  [<c03e6afc>] mutex_lock+0x1c/0x1f
    [    9.066000]  [<c01b249c>] sysfs_drop_dentry+0xb1/0x133
    [    9.066000]  [<c01b25d1>] sysfs_hash_and_remove+0xb3/0x142
    [    9.066000]  [<c01b30ed>] sysfs_remove_file+0xd/0x10
    [    9.067000]  [<c02849e0>] device_remove_file+0x23/0x2e
    [    9.067000]  [<c02850b2>] device_del+0x188/0x1e6
    [    9.067000]  [<c028511b>] device_unregister+0xb/0x15
    [    9.067000]  [<c0285318>] device_destroy+0x9c/0xa9
    [    9.067000]  [<c0261431>] vcs_remove_sysfs+0x1c/0x3b
    [    9.067000]  [<c0267a08>] con_close+0x5e/0x6b
    [    9.067000]  [<c02598f2>] release_dev+0x4c4/0x6e5
    [    9.067000]  [<c0259faa>] tty_release+0x12/0x1c
    [    9.067000]  [<c0174872>] __fput+0x177/0x1a0
    [    9.067000]  [<c01746f5>] fput+0x3b/0x41
    [    9.068000]  [<c0172ee1>] filp_close+0x36/0x65
    [    9.068000]  [<c0172f73>] sys_close+0x63/0xa4
    [    9.068000]  [<c0102a96>] sysenter_past_esp+0x5f/0x99
    [    9.068000]  =======================
    
    This is due to sysfs_hash_and_remove() holding dir->d_inode->i_mutex
    before calling sysfs_drop_dentry() which calls orphan_all_buffers()
    which in turn takes node->i_mutex.
    
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Cc: Oliver Neukum <oliver@neukum.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94bebf4d1b8e7719f0f3944c037a21cfd99a4af7
Author: Oliver Neukum <oliver@neukum.org>
Date:   Wed Dec 20 10:52:44 2006 +0100

    Driver core: fix race in sysfs between sysfs_remove_file() and read()/write()
    
    This patch prevents a race between IO and removing a file from sysfs.
    It introduces a list of sysfs_buffers associated with a file at the inode.
    Upon removal of a file the list is walked and the buffers marked orphaned.
    IO to orphaned buffers fails with -ENODEV. The driver can safely free
    associated data structures or be unloaded.
    
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Acked-by: Maneesh Soni <maneesh@in.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cb986b749c7178422bfbc982cd30e04d5db54bbc
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Nov 27 10:35:12 2006 +0100

    driver core: Change function call order in device_bind_driver().
    
    Change function call order in device_bind_driver().
    
    If we create symlinks (which might fail) before adding the device to the list
    we don't have to clean up afterwards (which we didn't).
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c578abbc20762aa58e390e55252959853eeea17e
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Nov 27 10:35:10 2006 +0100

    driver core: Don't stop probing on ->probe errors.
    
    Don't stop on the first ->probe error that is not -ENODEV/-ENXIO.
    
    There might be a driver registered returning an unresonable return code, and
    this stops probing completely even though it may make sense to try the next
    possible driver. At worst, we may end up with an unbound device.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fbfb14455391b89edcf37327526988dea7849532
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Nov 27 10:35:08 2006 +0100

    driver core fixes: device_register() retval check in platform.c
    
    Check the return value of device_register() in platform_bus_init().
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cb360bbf6352712310a7528137919c626a782744
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Nov 27 10:35:05 2006 +0100

    driver core fixes: make_class_name() retval checks
    
    Make make_class_name() return NULL on error and fixup callers in the
    driver core.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 270a6c4cad809e92d7b81adde92d0b3d94eeb8ee
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Thu Jan 18 13:26:15 2007 +0100

    /sys/modules/*/holders
    
      /sys/module/usbcore/
      |-- drivers
      |   |-- usb:hub -> ../../../subsystem/usb/drivers/hub
      |   |-- usb:usb -> ../../../subsystem/usb/drivers/usb
      |   `-- usb:usbfs -> ../../../subsystem/usb/drivers/usbfs
      |-- holders
      |   |-- ehci_hcd -> ../../../module/ehci_hcd
      |   |-- uhci_hcd -> ../../../module/uhci_hcd
      |   |-- usb_storage -> ../../../module/usb_storage
      |   `-- usbhid -> ../../../module/usbhid
      |-- initstate
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80f745fb1b0fb11383cbb8df2c36aaaa0399b6e6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jan 15 11:50:02 2007 -0800

    USB: add the sysfs driver name to all modules
    
    This adds the module name to all USB drivers, if they are built into the
    kernel or not.  It will show up in /sys/modules/MODULE_NAME/drivers/
    
    Cc: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4b315627e6b894156e235ac905786e7d46aab2e6
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jan 15 11:50:02 2007 -0800

    SERIO: add the sysfs driver name to all modules
    
    This adds the module name to all SERIO drivers, if they are built into
    the kernel or not.  It will show up in /sys/modules/MODULE_NAME/drivers/
    
    Cc: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 725522b5453dd680412f2b6463a988e4fd148757
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jan 15 11:50:02 2007 -0800

    PCI: add the sysfs driver name to all modules
    
    This adds the module name to all PCI drivers, if they are built into the
    kernel or not.  It will show up in /sys/modules/MODULE_NAME/drivers/
    
    It also fixes up the IDE core, which was calling __pci_register_driver()
    directly.
    
    Cc: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fe480a2675ed236af396597d9f05245c7bbd0149
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jan 15 11:50:02 2007 -0800

    Modules: only add drivers/ direcory if needed
    
    This changes the module core to only create the drivers/ directory if we
    are going to put something in it.
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f30c53a873d0d227493197064b8886af2d57bbd6
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:   Mon Jan 15 20:22:02 2007 +0100

    MODULES: add the module name for built in kernel drivers
    
    Signed-off-by: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c744aeae9d173a953b771a7ad5c872f91fa99dec
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Jan 8 20:16:44 2007 +0100

    driver core: Allow device_move(dev, NULL).
    
    If we allow NULL as the new parent in device_move(), we need to make sure
    that the device is placed into the same place as it would if it was
    newly registered:
    
    - Consider the device virtual tree. In order to be able to reuse code,
      setup_parent() has been tweaked a bit.
    - kobject_move() can fall back to the kset's kobject.
    - sysfs_move_dir() uses the sysfs root dir as fallback.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Cc: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 717e48c29d9a58f4d31c1651bec364212da5f6b2
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Jan 8 20:16:41 2007 +0100

    driver core: Remove device_is_registered() in device_move().
    
    device_is_registered() will always be false for a device with no bus. Remove
    this check and trust the caller to know what they're doing.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Cc: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 43cb76d91ee85f579a69d42bc8efc08bac560278
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Apr 9 12:14:34 2002 -0700

    Network: convert network devices to use struct device instead of class_device
    
    This lets the network core have the ability to handle suspend/resume
    issues, if it wants to.
    
    Thanks to Frederik Deweerdt <frederik.deweerdt@gmail.com> for the arm
    driver fixes.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2943ecf2ed32632473c06f1975db47a7aa98c10f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jan 22 13:45:38 2007 -0800

    Driver core: convert SPI code to use struct device
    
    Converts from using struct "class_device" to "struct device" making
    everything show up properly in /sys/devices/ with symlinks from the
    /sys/class directory.
    
    Cc: <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 873733188a019acdb7fa253011cbdc0a8afd97f3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Sep 12 17:00:10 2006 +0200

    Driver core: convert pcmcia code to use struct device
    
    Converts from using struct "class_device" to "struct device" making
    everything show up properly in /sys/devices/ with symlinks from the
    /sys/class directory.
    
    Cc: <linux-pcmcia@lists.infradead.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 31b9025aa0f89b392077db3f87458fd46bcc4f58
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 18 12:23:51 2007 -0800

    Kobject: make kobject apis more robust in handling NULL pointers
    
    It should be ok to pass in NULL for some kobject functions, so add error
    checking for all exported kobject functions to be more robust.
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1e8f34f7d88c969a06229a786241839d49dd63e3
Author: Andrew Morton <akpm@linux-foundation.org>
Date:   Wed Feb 7 18:19:42 2007 +0100

    ide-acpi support warning fix
    
    drivers/ide/ide-acpi.c: In function 'ide_acpi_get_timing':
    drivers/ide/ide-acpi.c:537: warning: format '%x' expects type 'unsigned int', but argument 4 has type 'long unsigned int'
    
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit e3a59b4d9378522479609042836ae930305a67fe
Author: Hannes Reinecke <hare@suse.de>
Date:   Wed Feb 7 18:19:37 2007 +0100

    ACPI support for IDE devices
    
    This patch implements ACPI integration for generic IDE devices.
    The ACPI spec mandates that some methods are called during suspend and
    resume. And consequently there most modern Laptops cannot resume
    properly without it.
    
    According to the spec, we should call '_GTM' (Get Timing) upon suspend
    to store the current IDE adapter settings.
    Upon resume we should call '_STM' (Set Timing) to initialize the
    adapter with the stored settings; afterwards '_GTF' (Get Taskfile)
    should be called which returns a buffer with some IDE initialisation
    commands. Those commands should be passed to the drive.
    
    There are two module params which control the behaviour of this patch:
    
    'ide=noacpi'
    	Do not call any ACPI methods (Disables any ACPI method calls)
    'ide=acpigtf'
    	Enable execution of _GTF methods upon resume.
    	Has no effect if 'ide=noacpi' is set.
    'ide=acpionboot'
    	Enable execution of ACPI methods during boot.
    	This might be required on some machines if 'ide=acpigtf' is
    	selected as some machines modify the _GTF information
    	depending on the drive identification passed down with _STM.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 78281c5350029e3fa21758d6db9b45ffc7bf72a1
Author: Mark Lord <mlord@pobox.com>
Date:   Wed Feb 7 18:19:32 2007 +0100

    IDE Driver for Delkin/Lexar/etc.. cardbus CF adapter
    
    On Thursday 11 January 2007 23:17, Bartlomiej Zolnierkiewicz wrote:
    >
    > My working IDE tree (against Linus' tree) now resides here:
    >
    > 	http://kernel.org/pub/linux/kernel/people/bart/pata-2.6/patches/
    
    Bart, here's a driver I've been keeping out-of-tree for the past couple
    of years.  This is for the Delking/Lexar/ASKA/etc.. 32-bit cardbus IDE
    CompactFlash adapter card.
    
    It's probably way out of sync with the latest driver model (??), but it
    still builds/works.  I'm not interested in doing much of a rewrite, other
    than for libata someday, as I no longer use the card myself.
    
    But lots of other people do seem to use it, so it might be nice to see it
    "in-tree".
    
    Signed-off-by: Mark Lord <mlord@pobox.com>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 6788182602f6862688d9a14e6f527449696f65c6
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Wed Feb 7 18:19:26 2007 +0100

    ide: it8213 IDE driver update (version 2)
    
    * set ATAPI/IORDY/TIME bits correctly in it8213_tuneproc()
    * fix UDMA/MWDMA/SWDMA masks in it8213_init_hwif()
    * in it8213_tune_chipset() SWDMA2 mode should be used instead of MWDMA0
    * backport various fixes from piix/slc90e66 drivers:
      - in it8213_tuneproc() the highest possible PIO mode is PIO4 (not PIO5)
      - clear ATAPI/IORDY/TIME bits before setting them also for slave device
      - use ->speedproc in it8213_config_drive_for_dma()
      - don't try to tune PIO in config_chipset_for_pio()
      - simplify is_slave calculation in it8213_tuneproc()
      - misc cleanups
    * fix it8213_ratemask() and it8213_tuneproc() comments
    * simplify it8213_init_hwif()
    * remove init_chipset_it8213()
    * add missing Copyrights and update MODULE_AUTHOR()
    * CodingStyle cleanups
    * remove dead code
    
    v2:
    * PCI_DEVICE_ID_ITE_8213 is only defined in -mm kernels,
      so just use PCI Device ID (0x8213) directly
    * fix ->ultra_mask incorrectly changed to 0x3f in v1 version of the patch
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 9c6712c0bcd2954fb4ca58d31f7316292a4b0945
Author: Jack Lee <Jack.Lee@ite.com.tw>
Date:   Wed Feb 7 18:19:09 2007 +0100

    ide: add it8213 IDE driver
    
    From: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit a534b68da0471dd9e4e3f7fc922faba74f8f4506
Author: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
Date:   Wed Feb 7 18:19:09 2007 +0100

    tc86c001: add missing __init tag for tc86c001_ide_init()
    
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit ba59c4b84a064e3e9d72d98b56f92a5b2aa71c22
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Feb 7 18:19:01 2007 +0100

    tc86c001: mark init_chipset_tc86c001() with __devinit tag
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit e8ab7f536f014e5d86ce6cf7860d5def6cc5f715
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Feb 7 18:18:52 2007 +0100

    tc86c001: init_hwif_tc86c001() can be static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 33dced2ea5ed03dda10e7f9f41f0910f32e02eaa
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:45 2007 +0100

    ide: add Toshiba TC86C001 IDE driver (take 2)
    
    This is the driver for the Toshiba TC86C001 GOKU-S PCI IDE controller,
    completely reworked from the original brain-damaged Toshiba's 2.4 version.
    
    This single channel UltraDMA/66 controller is very simple in programming,
    yet Toshiba managed to plant many interesting bugs in it.  The particularly
    nasty "limitation 5" (as they call the errata) caused me to abuse the IDE
    core in a possibly most interesting way so far.  However, this is still
    better than the #ifdef mess in drivers/ide/ide-io.c that the original
    version included (well, it had much more mess)...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit d24ec426b3be3a011bc8568d53fea486b604a684
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:39 2007 +0100

    pdc202xx_new: remove check_in_drive_lists abomination
    
    Fold check_in_drive_lists() into quirkproc() handler in both PDC202xx
    drivers-- this function was never called with a list other than
    pdc_quirk_drives and was a bad example of code overall...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 272103144ac1ff937ed22917e1de05da4d6943dd
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:37 2007 +0100

    pdc202xx_new: remove useless code
    
    Remove the following useless fragments from the driver:
    
    - the ide_dma_lostirq() and ide_dma_timeout() handlers which boil down to just
      printing the incoherent reset message and calling their default counterparts;
    
    - check for non-NULL drive->id in the ide_dma_check() handler -- this is assumed
      to be true by all other handlers (also, get rid of unnecessary nesting of the
      conditional statements there);
    
    - the comment before pdcnew_tune_drive() which has nothing to do with the code.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 24e6458d9c0c445141488b70e1a01fa31ed86c8d
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:34 2007 +0100

    slc90e66: carry over fixes from piix driver
    
    Synchronize with version 0.46 of the Intel PIIX/ICH driver:
    
    - carry over Alan's and my own fixes in the tuneproc() method and my cleanups
      both there and in the ratemask() method;
    
    - SLC90E66 only supports MW DMA modes 1/2 and SW DMA mode 2 (just like Intel
      chips), so don't claim support for other MW/SW DMA modes;
    
    - don't check dor non-NULL drive->id in the ide_dma_check() method -- this is
      assumed to be true in all other drivers;
    
    - do some coding/formatting cleanups while at it...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 30dfd12f5384d30c0d0de05eb34d0e26352a20ff
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:28 2007 +0100

    piix: tuneproc() fixes/cleanups
    
    Fix/cleanup the driver's tuneproc() and ratemask() methods:
    
    - PPE, IE, and TIME bits need to be cleared beforehand for the slave drive as
      well as master (Alan probably just forgot about it);
    
    - this driver only supports PIO modes up to 4, so must pass the correct limit
      to ide_get_best_pio_mode();
    
    - use min_t() macro instead of min();
    
    - simplify slave vs master drive evaluation;
    
    - do come coding and formatting cleanups...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit d2872239737ad6394b49c7c9ce9ae8d0f07165e5
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:25 2007 +0100

    piix: fix 82371MX enablebits
    
    According to the datasheet, Intel 82371MX (MPIIX) actually has only a
    single IDE channel mapped to the primary or secondary ports depending on
    the value of the bit 14 of the IDETIM register at PCI config.  offset 0x6C
    (the register at 0x6F which the driver refers to.  doesn't exist).  So,
    disguise the controller as dual channel and set enablebits masks/values
    such that only either primary or secondary channel is detected enabled.
    Also, preclude the IDE probing code from reading PCI BARs, this controller
    just doesn't have them (it's not the separate PCI function like the other
    PCI controllers), it only decodes the legacy addresses.
    
    [ Alan sayeth " MPIIX does not work with or without the change.  It needs its
      own different driver and not to use setup-pci.  Huge job and since it works
      well with libata who cares.  Ditto the early PIIX chip." ]
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 6273d26a5b280cb96b804424de323560b301ca51
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:20 2007 +0100

    hpt366: HPT36x PCI clock detection fix
    
    Fix minor coding mistake in the HPT36x PCI clock detection code noticed by
    Bartlomiej Zolnierkiewicz -- it always reported 33 MHz due to the missing
    'break' statements.  This, however, most probably never mattered -- in fact, I
    was thinking of removing the 25/40 MHz cases completely since HPT36x BIOSes
    didn't seem to set any other value than 7 into the 'cmd_high_time' field, i.e.
     supported only 33 MHz PCI.
    
    Note that in the original driver there was another bug: 25 and 40 MHz cases
    were interchanged.  Since the 'cmd_high_time' field is in units of PCI clocks,
    a lower clock count just *cannot* correspond to a higher frequency, i.  e.  it
    should be 5 for 25 MHz PCI and 9 for 40 MHz PCI, not the other way around.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 7b73ee05d0acb926923d43d78b61add776ea4bb1
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:16 2007 +0100

    hpt366: init code rewrite
    
    Finally, rework the driver init.  code to correctly handle all the chip
    variants HighPoint has created so far.  This should cure the rest of the
    timing issues in the driver (especially, on 66 MHz PCI) caused by the
    HighPoint's habit of switching the base DPLL clock with every new revision
    of the chips...
    
      - switch to using the enumeration type to differ between the numerous chip
        variants, matching PCI device/revision ID with the chip type early, at the
        init_setup stage;
    
      - extend the hpt_info structure to hold the DPLL and PCI clock frequencies,
        stop duplicating it for each channel by storing the pointer in the pci_dev
        structure: first, at the init_setup stage, point it to a static "template"
        with only the chip type and its specific base DPLL frequency, the highest
        supported DMA mode, and the chip settings table pointer filled, then, at
        the init_chipset stage, allocate per-chip instance  and fill it with the
        rest of the necessary information;
    
      - get rid of the constant thresholds in the HPT37x PCI clock detection code,
        switch  to calculating  PCI clock frequency based on the chip's base DPLL
        frequency;
    
      - switch to using the DPLL clock and enable UltraATA/133 mode by default on
        anything newer than HPT370/A;
    
      - fold PCI clock detection and DPLL setup code into init_chipset_hpt366(),
        unify the HPT36x/37x setup code and the speedproc handlers by joining the
        register setting lists into the table indexed by the clock selected;
    
      - add enablebits for all the chips to avoid touching disabled channels
        (though the HighPoint BIOS seem to only disable the primary one on
        HPT371/N);
    
      - separate the UltraDMA and MWDMA masks there to avoid changing PIO timings
        when setting an UltraDMA mode in hpt37x_tune_chipset().
    
    This version has been tested on HPT370/302/371N.
    
    Thanks to Alan for the inspiration. Hopefully, his libata driver will also
    benefit from the work done on this "obsolete" driver...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 4bf63de27e9fd9c0926ba3bb773de076b324a955
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:13 2007 +0100

    hpt366: clean up DMA timeout handling for HPT370
    
    Clean up DMA timeout handling for HPT370:
    
    - hpt370_lostirq_timeout() cleared the DMA status which made __ide_dma_end()
       called afterwards return the incorrect result, and the DMA engine was reset
       both before and after stopping DMA while the HighPoint drivers only do it
       after (which seems logical) -- fix this and also rename the function;
    
    - get rid of the needless mutual recursion in hpt370_ide_dma_end() and
       hpt370_ide_dma_timeout();
    
    - get rid of hpt370_lostirq_timeout() since hwif->ide_dma_end() called from
       the driver's interrupt handler later does all its work.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 26ccb802ee3f9a1f1fd5bc6abf38f124bfbd9cb2
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:11 2007 +0100

    hpt366: merge HPT37x speedproc handlers
    
    Continue with the driver rewrite:
    
    - move the interrupt twiddling code from the speedproc handlers into the
        init_hwif_hpt366 which allows to merge the two HPT37x speedproc handlers
        into one;
    
    - get rid of in init_hpt366 which solely consists of the duplicate code, then
        fold init_hpt37x() into init_chipset_hpt366();
    
    - fix hpt3xx_tune_drive() to always set the PIO mode requested, not the best
        possible one, change hpt366_config_drive_xfer_rate() accordingly, simplify
        it a bit;
    
    - group all the DMA related code together init_hwif_hpt366(), and generally
        clean up and beautify it.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit abc4ad4c6b3c6a51a0aa633e3d3fbc80b0ecabfe
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:18:05 2007 +0100

    hpt366: cache channel's MCR address
    
    Begin the real driver redesign. For the starters:
    
    - cache the offset of the IDE channel's MISC. control registers which are used
       throughout the driver in hwif->select_data;
    
    - only touch the relevant MCR when detecting the cable type on HPT374's
       function 1;
    
    - make HPT36x's speedproc handler look the same way as HPT37x ones; fix the
       PIO timing register mask for HPT37x.
    
    - rename all the HPT3xx register related variables consistently; clean up the
       whitespace.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit b4586715d7944dfbcb2b6b76a0098413cf3222e4
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:17:54 2007 +0100

    hpt366: switch to using pci_get_slot
    
    Switch to using pci_get_slot() to get to the function 1 of HPT36x/374 chips --
    there's no need for the driver itself to walk the list of the PCI devices, and
    it also forgets to check the bus number of the device found.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 90778574c9257ea2d11c433626e1b12ac4135e0a
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:17:51 2007 +0100

    hpt366: print the real chip name at startup
    
    - Rework the driver setup code so that it prefixes the driver startup
      messages with the real chip name.
    
    - Print the measured f_CNT value and the DPLL setting for non-HPT3xx
      chips as well.
    
    - Claim the extra 240 bytes of I/O space for all chips, not only for
      those having PCI device ID of 0x0004.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit f36702b4de1f7ea57927c8eb88d624504d33fc34
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Feb 7 18:17:37 2007 +0100

    hpt366: rework rate filtering tidy
    
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit e139b0b02fd35a68c4353db34d3380c8a7c9a90d
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Feb 7 18:17:37 2007 +0100

    hpt366: rework rate filtering
    
    - Rework hpt3xx_ratemask() and hpt3xx_ratefilter() so that the former
      returns the max.  mode computed at the load time and doesn't have to do
      bad Ultra33 drive list lookups anymore; remove the duplicate code from
      the latter function.  Move the quirky drive list lookup into
      hpt3xx_quirkproc() where it should have been from the start...
    
    - Disable UltraATA/100 for HPT370 by default as the 33 MHz ATA clock
      being used does not allow for it, and this *greatly* increases the
      transfer speed.
    
    - Save some space by using byte-wide fields in struct hpt_info; switch to
      reading the 8-bit PCI revision ID reg.  only, not the whole 32-bit reg.
    
    - Start incrementing the driver version number with each patch (should
      have been done from the first one posted).
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>

commit 5331be090567d9335476f876b2d85427cd7c4426
Merge: d3f8fd7... 7220c01...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 08:10:48 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6:
      JFS: Remove incorrect kgdb define
      JFS: call io_schedule() instead of schedule() to avoid deadlock
      JFS: Add lockdep annotations
      JFS: Avoid BUG() on a damaged file system

commit d3f8fd765e94b9137e1f27bbb0ac25289f9e565c
Merge: 0670afd... a2cf822...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Wed Feb 7 08:09:00 2007 -0800

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/steve/gfs2-2.6-nmw
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/steve/gfs2-2.6-nmw: (57 commits)
      [GFS2] make gfs2_writepages() static
      [GFS2] Unlock page on prepare_write try lock failure
      [GFS2] nfsd readdirplus assertion failure
      [DLM] fix softlockup in dlm_recv
      [DLM] zero new user lvbs
      [DLM/GFS2] indent help text
      [GFS2] Fix unlink deadlocks
      [GFS2] Put back semaphore to avoid umount problem
      [GFS2] more CURRENT_TIME_SEC
      [GFS2/DLM] fix GFS2 circular dependency
      [GFS2/DLM] use sysfs
      [GFS2] make lock_dlm drop_count tunable in sysfs
      [GFS2] increase default lock limit
      [GFS2] Fix list corruption in lops.c
      [GFS2] Fix recursive locking attempt with NFS
      [DLM] can miss clearing resend flag
      [DLM] saved dlm message can be dropped
      [DLM] Make sock_sem into a mutex
      [GFS2] Fix typo in glock.c
      [GFS2] use CURRENT_TIME_SEC instead of get_seconds in gfs2
      ...

commit a2cf822274b3d58a16a65c8338e299e18b3dc3a4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Feb 6 23:12:49 2007 +0100

    [GFS2] make gfs2_writepages() static
    
    On Mon, Jan 29, 2007 at 08:45:28PM -0800, Andrew Morton wrote:
    >...
    > Changes since 2.6.20-rc6-mm2:
    >...
    >  git-gfs2-nmw.patch
    >...
    >  git trees
    >...
    
    This patch makes the needlessly global gfs2_writepages() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 2d72e7101cc7fff5c1eb21bfcbba51c8002418d2
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Wed Feb 7 10:25:59 2007 -0500

    [GFS2] Unlock page on prepare_write try lock failure
    
    When the try lock of the glock failed in prepare_write we were
    incorrectly exiting this function with the page still locked.
    This was resulting in further I/O to this page hanging.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 5fad293bcbd48d9a2370020cf60e4b4a42559b12
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Wed Feb 7 01:47:59 2007 -0600

    [POWERPC] Fixup error handling when emulating a floating point instruction
    
    When we do full FP emulation its possible that we need to post a SIGFPE based
    on the results of the emulation.  The previous code ignored this case completely.
    
    Additionally, the Soft_emulate_8xx case had two issues.  One, we should never
    generate a SIGFPE since the code only does data movement.  Second, we were
    interpreting the return codes incorrectly, it returns 0 on success, 1 on
    illop and -EFAULT on a data access error.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 04903a30a327513b97c1271fc6bc4dad6502d1b8
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Wed Feb 7 01:13:32 2007 -0600

    [POWERPC] Enable interrupts if we are doing fp math emulation
    
    Anytime we are emulating an instruction we are going to be doing some form of
    get_user() to get the instruction image to decode.  Since get_user() might
    sleep we need to ensure we have interrupts enabled or we might see something
    like:
    
    Debug: sleeping function called from invalid context at arch/powerpc/kernel/traps.c:697
    in_atomic():0, irqs_disabled():1
    Call Trace:
    [D6023EB0] [C0007F84] show_stack+0x58/0x174 (unreliable)
    [D6023EE0] [C0022C34] __might_sleep+0xbc/0xd0
    [D6023EF0] [C000D158] program_check_exception+0x1d8/0x4fc
    [D6023F40] [C000E744] ret_from_except_full+0x0/0x4c
    --- Exception: 700 at 0x102a7100
        LR = 0xdb9ef04
    
    However, we want to ensure that interrupts are disabled when handling a trap
    exception that might be used for a kernel breakpoint.  This is why ProgramCheck
    is marked as EXC_XFER_STD instead of EXC_XFER_EE.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 8209003547c4b1006943eac8dc6c1fb6493cafda
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Feb 6 22:55:19 2007 -0600

    [POWERPC] Added kprobes support to ppc32
    
    Added kprobes to ppc32 platforms that have use single_step_exception.  This
    excludes 4xx and anything Book-E since their debug mechanisms for single stepping
    are completely different.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 211ac75f5e867ab7a54811a514814149caca42c3
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Wed Feb 7 12:15:01 2007 +0900

    [MTD] OneNAND: Error message printing and bad block scan erros
    
    Provide the bad block scan with its own read function so that important error
    messages that are not from the the bad block scan, can always be printed.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 8423200553113cc031caa9b147f6150a8e26545c
Merge: f03e64f... 62d0cfc...
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Feb 7 14:05:13 2007 +1100

    Merge branch 'linux-2.6'

commit f03e64f2ca6ee3d0b7824536b1940497701fe766
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Feb 6 21:10:31 2007 +1100

    [POWERPC] Make pSeries use the H_BULK_REMOVE hypervisor call
    
    H_BULK_REMOVE lets us remove 4 entries from the MMU hash table with one
    hypervisor call.  This uses it in pSeries_lpar_hpte_invalidate so we
    can tear down mappings with fewer hypervisor calls.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e56a6e20f3029ed5c178dd0328bd688dbbc8272a
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Feb 7 13:13:26 2007 +1100

    [POWERPC] Clear RI bit in MSR before restoring r13 when returning to userspace
    
    Some instruction tracing tools use the RI (recoverable interrupt) bit
    in the MSR to indicate when it's safe to single-step.  Currently we
    clear RI after restoring r13 when returning to userspace.  However,
    if we single-step past the point where r13 is restored, we'll corrupt
    r13 in the exception entry code and not restore it.  This moves the
    clearing of RI to just before r13 is restored so this doesn't happen.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 449d846dbcbf61bdf7d50a923e4791102168c292
Author: Livio Soares <livio@eecg.toronto.edu>
Date:   Wed Feb 7 12:51:36 2007 +1100

    [POWERPC] Fix performance monitor exception
    
    To the issue: some point during 2.6.20 development, Paul Mackerras
    introduced the "lazy IRQ  disabling" patch (very cool work,  BTW).
    In that patch, the performance monitor unit exception was marked as
    "maskable", in the sense that if interrupts were soft-disabled, that
    exception could be ignored.  This broke my PowerPC profiling code.
    The symptom that I see is that a varying number of interrupts
    (from 0 to $n$, typically closer to 0) get delivered, when, in
    reality, it should always be very close to $n$.
    
    The issue stems from the way masking is being done.   Masking in
    this fashion seems to  work well with the decrementer and external
    interrupts, because they are raised again until "really"  handled.
    For the PMU, however, this does not apply (at least on my Xserver
    machine with a 970FX processor).  If the PMU exception is not handled,
    it will _not_ be re-raised (at least on my machine).  The documentation
    states that the PMXE bit in MMCR0 is set to 0 when the PMU exception
    is raised.  However, software must re-set the bit to re-enable PMU
    exceptions.  If the exception is ignored (as currently) not only is
    that interrupt lost, but because software does not re-set PMXE, the
    PMU registers are "frozen" forever.
    
    [This patch means that performance monitor exceptions are taken and
    handled even if irqs are off, as long as some other interrupt hasn't
    come along and caused interrupts to be hard-disabled.  In this sense
    the PMU exception becomes like an NMI.  The oprofile code for most
    powerpc processors does nothing that is unsafe in an NMI context, but
    the Cell oprofile code does a spin_lock_irqsave.  However, that turns
    out to be OK because Cell doesn't actually use the performance
    monitor exception; performance monitor interrupts come in as a
    regular interrupt on Cell, so will be disabled when irqs are off.
     -- paulus.]
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a2c70211fa072f4076f0e59f909b69105f69072e
Author: David Gibson <david@gibson.dropbear.id.au>
Date:   Tue Feb 6 11:48:28 2007 +1100

    [POWERPC] Compile fixes for arch/powerpc dcr code
    
    The new dcr code does not currently compile when configured for native
    DCR access on ARCH=powerpc.  This patch fixes the problems.
    
    Signed-off-by: David Gibson <dwg@au1.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4297c9869b3452860f1a2c588d43f9e62c701019
Author: Nathan Lynch <ntl@pobox.com>
Date:   Mon Feb 5 20:01:15 2007 -0600

    [POWERPC] Maple: use mmio nvram
    
    Some systems supported by the maple platform (e.g. JS2x blades running
    SLOF) are able to use the mmio_nvram backend for reading and writing
    nvram.  This is an improvement over the current situation -- no nvram
    access from userspace at all.
    
    Select MMIO_NVRAM for the maple platform.
    
    Initialize the mmio_nvram backend from maple setup code.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 721e0c9037ef4e755f3bd87fee92beff452be420
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:56 2007 -0600

    [POWERPC] pasemi: defconfig
    
    Base pasemi defconfig. Nothing special, just the native drivers plus
    common PCI-express/PCI cards.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 31c56d820e03a2fd47f81d6c826f92caf511f9ee
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:55 2007 -0600

    [POWERPC] pasemi: iommu support
    
    I/O TLB support for PA6T-1682M.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f9fba5b72dbedc691dcb10ae666ec03f279b07f4
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:54 2007 -0600

    [POWERPC] pasemi: Configure DMA controller interrupts
    
    The DMA controller on PWRficient is somewhat special -- has a PCI header
    so it looks like it's on the root PCI (-Express) root bus, but it uses
    more than the default number of interrupts (and they are hardwired).
    
    We need to wire up all interrupts for the DMA controller. The generic
    IRQ code will only map the primary interrupt from the PCI header (128),
    so add 129->211 by hand.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c388cfebbf22acd2b6adf757b35e28d4be66ac7c
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:53 2007 -0600

    [POWERPC] pasemi: SMP timebase sync
    
    Timebase update is simple on PA6T, since global updates can be done from
    one core by writing to an SPR.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f620be99e9355c41693f0c748ba9260f69278ee0
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:52 2007 -0600

    [POWERPC] pasemi: Implement restart
    
    Implement reset on platforms/pasemi. Default is just to reset the
    cpu using the SDC registers.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1199919b69ff9559a3d3444fb5eb45b7cc48264d
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:51 2007 -0600

    [POWERPC] pasemi: Idle loops
    
    Powersave support on PA6T. Right now it only uses 'doze' mode, and
    will default to no savings (spin).
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bfed9d32d968b2054a036d419537e9e9909bb343
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:50 2007 -0600

    [POWERPC] pasemi: Machine check handler
    
    Print out decoded machine check information on PA6T.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 39c870d5b503fa684198baf90bab2daa35ef0151
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Feb 4 16:36:49 2007 -0600

    [POWERPC] pasemi: UART udbg support
    
    Early debug output for PA Semi UART. Uses the 2.05 CI real mode ops.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a1fdf6940a2a3d3c7475755eba5881403473252d
Author: Pavel Roskin <proski@gnu.org>
Date:   Sun Feb 4 03:16:08 2007 -0500

    [POWERPC] Assign all PCI busses on G3 Blue & White
    
    G3 Blue & White is misconfigured by default so that CardBus controllers
    in PCI slots don't work.  The PCI bridge is programmed to only allow
    access to bus 1 but not higher busses.
    
    The patch forces the PCI busses to be reassigned if a Grackle controller
    is found and the machine identifies itself as "PowerMac1,1"
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6e47a0f38203656125bb6b81216aa4a4f506e98c
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:48:04 2007 +0900

    [POWERPC] Celleb: add celleb_defconfig
    
    This patch creates defconfig file for Celleb platform.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c347b7989e4d9e1c23cb5cfba78c63c031b7dcee
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:47:17 2007 +0900

    [POWERPC] Celleb: basic support
    
    This patch adds base support for Celleb platform.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e107931956f8327637508b91a9ddd4ba35be289d
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:46:22 2007 +0900

    [POWERPC] Celleb: support spu priv1 ops
    
    SPU support routines for Celleb platform.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c9868fe0e091f64241a372b45f08097c013e41b2
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:45:33 2007 +0900

    [POWERPC] Celleb: consolidate spu management ops
    
    Spu management ops in arch/platforms/cell/spu_priv1_mmio.h can be used
    commonly in of based platform. This patch separates spu management ops
    from native cell code and uses on celleb platform.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3cdc20e51791bd2fd67781e65640a4650f99c63e
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:44:08 2007 +0900

    [POWERPC] Celleb: hypervisor console driver
    
    This patch adds hypervisor console driver for Celleb platform.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d7480a9feaa970d9c37462f21bc27ebab2c56b0b
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:43:21 2007 +0900

    [POWERPC] Celleb: support udbg
    
    This patch adds udbg support for Celleb platform.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fe4a0cf1c2e79c3c256992c4f731734ecacb45c3
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:42:28 2007 +0900

    [POWERPC] Celleb: htab routines
    
    Adds htab routines for Celleb platform.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 97a9b58409403baf7a8b0ccbd3d27993790dcdab
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:39:34 2007 +0900

    [POWERPC] Celleb: support iommu
    
    This patch creates Celleb platform dependent file to support iommu.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7163c7c9d266862ad9a0a0203d204113034cb5fb
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:38:41 2007 +0900

    [POWERPC] Celleb: setup usb host controller in SCC
    
    USB host controller in SCC requires enable sequence. It should be done
    before USB host drivers start.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 32f39b055f3b7af4ee76a93ede5450ab2549328a
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:37:30 2007 +0900

    [POWERPC] Celleb: support interrupts
    
    This patch creates Celleb platform dependent files to support interrupts.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b8a590c496474ca80a8f1c2b228e8b8e6a33fb9d
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Feb 2 16:36:27 2007 +0900

    [POWERPC] Celleb: interfaces to the hypervisor
    
    This patch creates Celleb platform dependent files which add
    interfaces to call hypervisor.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c23ef29c1efa6864527fb78249695679810d302e
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Thu Feb 1 16:36:13 2007 +0100

    [POWERPC] powermac: local_irq_disable() is redundant after local_irq_save()
    
    arch/powerpc/platforms/powermac/smp.c::smp_core99_kick_cpu() contains
    local_irq_disable() call after local_irq_save(). This looks
    redundant.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f79ce995d0a7bfc424b1ad8f315e62ff9f67bbfe
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Thu Feb 1 16:36:04 2007 +0100

    [POWERPC] 86xx: local_irq_disable() is redundant after local_irq_save()
    
    arch/powerpc/platforms/86xx/mpc86xx_smp.c::smp_86xx_kick_cpu() contains
    local_irq_disable() call after local_irq_save(). This looks
    redundant.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c4cbfd64f933414eaa2042adcd276f088995898a
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 31 02:09:06 2007 +0300

    [POWERPC] mpc8272ads: defconfig
    
    Default config file for mpc8272ads (powerpc port).Though relevant bits went
    in, it is required to keep proper default configuration for the target,
    which seems to be missed initially.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5427828e83b7f3c000eaec1cfb09c9bc4d024ad1
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 31 02:09:00 2007 +0300

    [POWERPC] Fix kernel build errors for mpc8272ads and mpc8560ads
    
    Recent update of asm-powerpc/io.h caused cpm-related stuff to break in the
    current kernel. Current patch fixes it, as well as other inconsistencies
    expressed, that do not permit targets from working properly:
    
    - Updated dts with a chosen node with interrupt controller,
    - fixed messed device IDs among CPM2 SoC devices,
    - corrected odd header name and fixed type in defines,
    - Added 82xx subdir to the powerpc/platforms Makefile, missed during
      initial commit,
    - new solely-powerpc header file for 8260 family (was using one from
      arch/ppc, this one cleaned up from the extra stuff), in fact for now
      a placeholder to get the board-specific includes for stuff not yet
      capable to live with devicetree peeks only
    - Fixed couple of misprints in reference mpc8272 dts.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 73844ecbaa58885c5e89af7d1b08faaffffa6833
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 31 02:08:54 2007 +0300

    [POWERPC] cpm2: CPM2 interrupt controller fix
    
    This contains important fixes for the CPM2 PIC code. Eliminated
    CPM_IRQ_OFFSET, pulling the respective interrupt numbers from the interrupt
    mapping. Updated devicetree files to reflect that. Changed direct
    IC-related IO accesses to the IO accessors. Fixed all the sense values to
    keep coherency with ipic. In the current code, CPM2 stuff will have no IRQs
    and hence could be hardly usable.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c19cdcb1b8d33a20d372191eced2def7f901806b
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Jan 30 15:20:37 2007 -0800

    [POWERPC] PS3: Enable USB mass storage
    
    Update ps3_defconfig to enable USB mass storage and VFAT.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 35063bb2eaf85bd0f6e3acefae2d95cb0120eb3e
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Jan 30 15:20:34 2007 -0800

    [POWERPC] PS3: Fix DMA scatter-gather
    
    Add the missing pieces to support DMA scatter-gather on the PS3 system bus.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 97ec1675999eae96975a30facbedc2e6c0c832bc
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Jan 30 15:20:30 2007 -0800

    [POWERPC] PS3: Move vuart declarations to ps3.h
    
    Move the structures and routines needed for PS3 vuart port device registration
    to asm-powerpc/ps3.h.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2a08ea69a3e448a5cc94e5da9eccc40cf13f9532
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Jan 30 15:20:27 2007 -0800

    [POWERPC] PS3: Move system bus to platform directory
    
    Move the PS3 system bus routines from drivers/ps3 to
    arch/powerpc/platforms/ps3.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 63c2f782e8f6aafbc11b14b2cb291b3dc9fc217d
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Tue Jan 30 06:06:00 2007 -0500

    [POWERPC] Add "is_power_of_2" checking to log2.h.
    
    Add the inline function "is_power_of_2()" to log2.h, where the value
    zero is *not* considered to be a power of two.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Kumar Gala <galak@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7df2457db83bc922fcc8b462526b77f1ffe8c84b
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Jan 28 23:33:18 2007 -0600

    [POWERPC] MPIC: support more than 256 sources
    
    Allow more than the default 256 MPIC sources. Allocates a new flag
    (MPIC_LARGE_VECTORS) to be used by platform code when instantiating
    the mpic.
    
    I picked 11 bits worth right now since it would cover the number of
    sources on any hardware I have seen. It can always be increased later
    if needed.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6529c13dfe413e437ad1ed0e97783dcf69137114
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Jan 28 21:25:57 2007 -0600

    [POWERPC] PA6T PMC support
    
    Support for PA6T-style PMC registers.
    
    PMCs are completely implementation-dependent on PPC, and PA6T numbers them
    differently from the IBM model.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7583b6e424ebaa278342f6a8c2a61211af56dad1
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Jan 28 21:24:57 2007 -0600

    [POWERPC] Introduce _SYSDEV_ATTR
    
    Introduce _SYSDEV_ATTR(), to be used to just define the struct, and not a
    named variable with the attribute. Useful for arrays of sysdev_attributes.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1bd2e5ae18a8f93333707d81d3dbd9209a255137
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Jan 28 21:23:54 2007 -0600

    [POWERPC] Add PMC type to cputable
    
    Add cputable entries for which type of PMC implementation the processor
    has.
    
    I've only filled in the current 64-bit processors, the unfilled default
    value will have same behaviour as before so it can be done over time
    as needed.
    
    Also tidy up the dummy_perf implementation a bit, aggregating it into
    one function with ifdefs instead of several.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c69b767a2c871bb80cb9e346d6ebce248f711dfb
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Jan 28 21:23:14 2007 -0600

    [POWERPC] Oprofile cleanup
    
    Clean up the ctr_read/write a bit. It's currently defined in the
    include but only used in one C file each. The only exception is the
    classic version, so keep that in the include and define in the C file
    as appropriate.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4942bd80e83d13bf394df4a8109bee39d861820f
Author: Timur Tabi <timur@freescale.com>
Date:   Sat Jan 27 17:41:49 2007 -0600

    [POWERPC] Fix array indexing error in rheap grow()
    
    The grow() function in the rheap library allocates a larger array of blocks,
    copies the contents of the old blocks array to the newly allocated array and
    fixes the list_head pointers after the copy.  At the end, the new blocks must
    be enqueued to the empty_list of the rh_info_t structure.  This patch fixes
    a bug where the code was indexing past the end of the array when enqueueing
    blocks.  The UCC ethernet driver, which uses the rheap allocator, experiences
    kernel panics because of this bug.
    
    Signed-off-by: Ionut Nicu <ionut.nicu@freescale.com>
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5f3162f0664be49c72c1e6ce4a46848f9d96d790
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:29 2007 -0800

    [POWERPC] ps3: ps3_defconfig updates
    
    Updates for ps3_defconfig.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8000d49076f5d1767b6fee9c74b452f488ed89ad
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:26 2007 -0800

    [POWERPC] ps3: remove unneeded header include
    
    Remove an unneeded header include from ps3.h.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 098e27442713ef7921533130ebba5db6ef64aba6
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Fri Jan 26 19:08:24 2007 -0800

    [POWERPC] ps3: get av_multi_out params
    
    Allow the PS3 AV settings driver to access the default video mode stored in
    the OS area.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 66b44954f8f2129a39d145991c8e635046a71be6
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:21 2007 -0800

    [POWERPC] ps3: get firmware version
    
    Add a new routine ps3_get_firmware_version() and use it to output the firmware
    version to dmesg.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 73d976b33998bca9aa7300e59f5d6c756be38b87
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:19 2007 -0800

    [POWERPC] ps3: remove cpuinfo
    
    Remove the unneded routine ps3_show_cpuinfo().  The common platform code now
    prints the same information.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 577157659fb0ace3b88dd75e2c6cb1af84b3040d
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:16 2007 -0800

    [POWERPC] ps3: fix interrupt bmp
    
    Add a comment and a preprocessor macro to help clearify the alignment
    needs of the PS3 interrupt bitmap.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b1eeb38e456281c37bbfc270a6ca08605b7e7045
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Fri Jan 26 19:08:12 2007 -0800

    [POWERPC] ps3: add interrupt alloc for outlets
    
    PS3 interrupt core update:
      - Add ps3_alloc_irq() and ps3_free_irq(), to allocate a virtual interrupt
        number for an interrupt outlet, which is needed by the PS3 GPU frame
        buffer device and audio drivers
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 861be32ce7f1cf272a3f809e77213b83117a0bd2
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:08 2007 -0800

    [POWERPC] ps3: bind interrupt to cpu
    
    Change the PS3 irq allocation routines to take an argument indicating which
    cpu (processor thread) the interrupt should be serviced on.
    
    The current system configuration favors device interrupts that are serviced
    on cpu0, so that is used as the default.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9cf9e19667f6ce01bd509a154157270069f836f9
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Jan 26 19:08:05 2007 -0800

    [POWERPC] ps3: cleanup interrupt bmp routines
    
    Change the PS3 interrupt bitmask routines to be lockless.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 407e24a0c78f585c228ec7e1152a9b23e262b200
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:08:02 2007 -0800

    [POWERPC] ps3: smp interrupt fixes
    
    PS3 fixups for interrups on SMP.
    
    Fixes the alignment of the interrupt status bitmap, changes the hypervisor
    interrupt calls to the '_ext' versions that take an explicit processor
    thread ID.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9633ac8d172f74b8ee51e0fe85c06eb726039aa8
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:07:59 2007 -0800

    [POWERPC] ps3: rename interrupt symbols
    
    Rename some PS3 interrupt symbols to avoid name clashes and aid debugging.
    No change to code.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a8229a9e5211a52839268b82ae14cdf528d48f58
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:07:56 2007 -0800

    [POWERPC] ps3: fix struct alignment attributes
    
    Remove incorrect alignment attributes in PS3 platform code for
    struct spe_shadow, struct os_area_header, and struct os_area_params.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 43d80439c5f619446e174abdbdaff4fc0e539546
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Jan 26 19:07:54 2007 -0800

    [POWERPC] ps3: system bus minor mmio fix
    
    Fix two minor bugs in the PS3 system bus mmio region code.  First, on error or
    when freeing a region, retain the bus_addr and len fields to allow subsequent
    calls to create the region.  Second, correct the region address argument to the
    lv1_unmap_device_mmio_region() call.
    
    Fixes modprobe/rmmod of some drivers.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6c7be7d385f4911895877e0f0697c598f600136f
Author: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
Date:   Fri Jan 26 19:07:51 2007 -0800

    [POWERPC] ps3: repository storage support
    
    Handle storage-related repository data:
      - Add missing implementations of ps3_repository_read_stor_*() repository
        accessors.
      - Dump storage properties in debug mode
      - Add PS3_DEV_TYPE_STOR_{DISK,ROM,FLASH} device types (which are identical to
        the corresponding SCSI device types) to enum ps3_dev_type
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit eebb81c13aa831a623e903bbae97a23fe9be93eb
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jan 26 19:07:47 2007 -0800

    [POWERPC] ps3: repository misc fixes
    
    Various fixes for the PS3 repository code:
    
      - Sync signatures of function prototypes and implementations (enum vs.
        unsigned int)
      - Correct references to `regions' as `registers':
          o Correct enum ps3_region_type as enum ps3_reg_type,
          o Correct PS3_REGION_TYPE_* as PS3_REG_TYPE_*,
          o Correct ps3_repository_find_region() as ps3_repository_find_reg().
      - Correct function name in pr_debug() call
      - Minor error condition improvements.
    
    Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 25c4a46f0ed8ece9ac6699e200fcc83a4642dce7
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Fri Jan 26 14:55:03 2007 -0600

    [POWERPC] pSeries: EEH improperly enabled for some Power4 systems
    
    It appears that EEH is improperly enabled for some Power4 systems.
    On these systems, the ibm,set-eeh-option returns a value of success
    even when EEH is not supported on the given node. Thus, an explicit
    check for support is required.
    
    During boot, on power4, without this patch, one sees messages
    similar to:
    
    EEH: event on unsupported device, rc=0 dn=/pci@400000000110/IBM,sp@1
    EEH: event on unsupported device, rc=0 dn=/pci@400000000110/pci@2
    EEH: event on unsupported device, rc=0 dn=/pci@400000000110/pci@2,2
    etc.
    
    The patch makes these go away.
    
    Without this patch, EEH recovery does seem to work correctly for
    at least some devices (I tested ethernet e1000), but fails to
    recover others (the Emulex LightPulse LPFC, most notably).
    Off the top of my head, I don't remember why some devices are
    affected, but not others.
    
    The PAPR indicates that the correct way to test for EEH is as
    done in this patch; its not clear to me if this was in the PAPR
    all along, or recently added; if it was there all along, its not
    clear to me why this hadn't been fixed long ago. I suspect only
    certain firmware levels are affected.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2dc08572cc11a1ab2e67b214a4f3d7d0997473f8
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Thu Jan 25 19:10:52 2007 -0500

    [POWERPC] Fix apparent typo "CONFIG_SERIAL_CPM_SMC".
    
      Replace an apparent typo of CONFIG_SERIAL_CPM_SMC with
    CONFIG_SERIAL_CPM_SMC2.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Acked-by: Kumar Gala <galak@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 59eaef9daef35129a982c9d2b464aacb13349cdf
Author: Nathan Lynch <ntl@pobox.com>
Date:   Wed Jan 24 15:57:06 2007 -0600

    [POWERPC] Maple: don't override bus-range supplied by firmware
    
    This workaround was copy-pasted from the powermac code.  It's not
    necessary for maple.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 29f1530f1958dc74f021186c9f31ed66a0c7b8ad
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:42:10 2007 +0300

    [POWERPC] Add mpc866ads board-specific bits to arch/powerpc
    
    This add support of the Freescale mpc86xads reference board to
    arch/powerpc. Supported SMC1 and SMC2 (UART and serial console), FEC
    100Mbps Ethernet, SCC1 Ethernet (10Mbps hdx)
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit df34403dcaacef541a67c955aebc37c51f53ca7c
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:41:42 2007 +0300

    [POWERPC] 8xx: Add mpc885ads support and common mpc8xx files
    
    This adds the core 8xx stuff and specifically mpc885ads board-specific
    bits to arch/powerpc. Respective Kconfig has been cleaned up from the stuff
    not yet ported over to avoid confusion. Updated and cleaned version.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f2a0bd3753dad7ea4605ebd5435716b39e9f92bb
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:41:24 2007 +0300

    [POWERPC] 8xx: powerpc port of core CPM PIC
    
    This covers common CPM access functions, CPM interrupt controller code,
    micropatch and a few compatibility things to kee the same driver base
    working with arch/ppc. This version is refined with all the comments
    (mostly PIC-related) addressed.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 88bdc6f061cfb4579d2327fd457d4b7807525a0e
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:41:15 2007 +0300

    [POWERPC] 8xx: platform related changes to the fsl_soc
    
    Added 8xx SoC peripherials: fec for Ethernet and smc for UARTs.
    Ordinary routines to extract values from the device tree and insert
    respective platform devices
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5902ebce22fa5a1ac833565dbc4fde7e8a1bc737
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:41:06 2007 +0300

    [POWERPC] 8xx: generic 8xx code arch/powerpc port
    
    Including support for non-coherent cache, some mm-related things +
    relevant field in Kconfig and Makefiles. Also included rheap.o compilation
    if 8xx is defined.
    
    Non-coherent mapping were refined and renamed according to Cristoph
    Hellwig. Orphaned functions were cleaned up.
    
    [Also removed arch/ppc/kernel/dma-mapping.c, because otherwise
    compiling with ARCH=ppc for a non DMA-cache-coherent platform ends up
    with two copies of __dma_alloc_coherent etc.
     -- paulus.]
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 81f38e11233dae671c0673bbdcea01194b75d68f
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Wed Feb 7 10:55:23 2007 +0900

    [MTD] OneNAND: Subpage write returned incorrect length written
    
    When a write is done, the length written is returned.  When a
    single subpage is written the length returned should be the
    subpage size, however the page size was being returned.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 0670afdf0e69e5e73c8358da9c39bf3a8807b03e
Merge: dda2ac1... 5109900...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 17:24:58 2007 -0800

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6: (27 commits)
      [IA64] swiotlb abstraction (e.g. for Xen)
      [IA64] swiotlb cleanup
      [IA64] make swiotlb use bus_to_virt/virt_to_bus
      [IA64] swiotlb bug fixes
      [IA64] Hook up getcpu system call for IA64
      [IA64] clean up sparsemem memory_present call
      [IA64] show_mem() for IA64 sparsemem NUMA
      [IA64] missing exports hwsw_sync_...
      [IA64] virt_to_page() can be called with NULL arg
      [IA64] alignment bug in ldscript
      [IA64] register memory ranges in a consistent manner
      [IA64] Enable SWIOTLB only when needed
      [IA64-SGI] Check for TIO errors on shub2 Altix
      [IA64] remove bogus prototype ia64_esi_init()
      [IA64] Clear IRQ affinity when unregistered
      [IA64] fix ACPI Kconfig issues
      [IA64] Fix NULL-pointer dereference in ia64_machine_kexec()
      [IA64] find thread for user rbs address
      [IA64] use snprintf() on features field of /proc/cpuinfo
      [IA64] enable singlestep on system call
      ...

commit dbbb06b7f6ae8037a5f6b4498e492791e1929635
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:40:57 2007 +0300

    [POWERPC] 8xx: platform specific mmu updates
    
    This is just a straight port of the same done in arch/ppc
    by Marcelo Tosatti. One used to be
    [PATCH] ppc32 8xx: update_mmu_cache() needs unconditional tlbie,
    commit eb07d964b4491d1bb5864cd3d7e7633ccdda9a53
    
    In a nutshell, the board is nearly stuck without this, yet without any
    visible failure - being just very slow.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f25222b99542bcadf1cc53cc9aa0e304849242ca
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Wed Jan 24 22:40:49 2007 +0300

    [POWERPC] cpm_uart: OF-related fix for CPM1
    
    This makes cpm uart able to work using OF-passed parameters
    in case of CPM stuff (found on most mpc8xx reference and custom
    boards). The idea is to keep ppc stuff working yet making it able to be
    used for powerpc.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1473ae6cab7f47dde4c14f397371b2ad94457d3a
Author: Michael Neuling <mikey@neuling.org>
Date:   Tue Jan 23 15:59:26 2007 +1100

    [POWERPC] remove unused CPU_FTRS_POWER6X
    
    CPU_FTRS_POWER6X is unused, hence remove it.
    
    Signed-off-by Michael Neuling <mikey@neuling.org>
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1d9564ea0ac72ef7c4068d66fe42ad23af4ff53f
Merge: 87f440e... dda2ac1...
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Feb 7 00:30:38 2007 +0000

    Merge branch 'master' of /pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 87f440e70e07dace7db130f2f9fcea3f132aad8f
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Feb 7 00:29:46 2007 +0000

    [CIFS] Additional POSIX CIFS Extensions infolevels
    
    also includes cleanup of whitespace/80 columns
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit b7e36bfa9ffa2f6097b622ba07a95d823db553e4
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Feb 5 16:29:49 2007 -0800

    NET: turn local_save_flags() + local_irq_disable() into local_irq_save()
    
    drivers/net/amd8111e.c::amd8111e_poll() contains local_irq_disable() after
    local_save_flags().  Turn it into local_irq_save().
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0d38ff1d3d34ca9ae2a61cf98cf47530f9d51dee
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Mon Feb 5 16:29:48 2007 -0800

    NET-3c59x: turn local_save_flags() + local_irq_disable() into local_irq_save()
    
    drivers/net/3c59x.c::poll_vortex() contains local_irq_disable() after
    local_save_flags().  Turn it into local_irq_save().
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7e3e8b05a90bcc5799b0d4525f23c80d661d0194
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Mon Feb 5 16:29:48 2007 -0800

    hp100: convert pci_module_init() to pci_register_driver()
    
    Convert pci_module_init() to pci_register_driver().
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 27d2ab54bdfaffdbdc1a81100dc53c6479c9db35
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Mon Feb 5 07:40:49 2007 -0800

    NetXen: Added ethtool support for user level tools.
    
    NetXen: Added ethtool support for user level firmware management utilities.
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1fcca1a5fc81689d191b7132318970c969b4b635
Author: Amit S. Kale <amitkale@netxen.com>
Date:   Mon Feb 5 07:35:26 2007 -0800

    NetXen: Firmware crb init changes.
    
    NetXen: firmware crb init changes.
    
    Signed-off-by: Amit S. Kale <amitkale@netxen.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8d5ca6ec4e5c7208fe90aaecab9544bf8c08f0dc
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Sat Feb 3 20:25:10 2007 -0600

    maintainers: add atl1 maintainers
    
    MAINTAINERS: add atl1 maintainers
    
    Add a maintainers entry for atl1.
    
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a407a6a085ed149c479562a658f4a06c5ffd347b
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 2 08:22:54 2007 -0800

    skge: version 1.10
    
    Mark this as 1.10 because WOL now works
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a504e64ab42bcc27074ea37405d06833ed6e0820
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 2 08:22:53 2007 -0800

    skge: WOL support
    
    Add WOL support for Yukon chipsets in skge device.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1479d13cb5304c452e6d7398c7771974c1014846
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 2 08:22:52 2007 -0800

    skge: use dev_printk
    
    Use dev_printk related macros for PCI related errors and warnings
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fae87592280039837fdd72c5ecdac2af2eb97f63
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Feb 2 08:22:51 2007 -0800

    skge: handle zero address at open
    
    Some motherboards are broken and have no address set. Failing at probe time
    prevents the device from ever being used (like to download a fixed BIOS). Instead
    warn on probe and check again when device is brought up. That way the address
    can be set.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a7bed27dc69e3bc9238549a4964ea94ec318362c
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jan 29 15:36:54 2007 -0500

    b44 endian annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit dda2ac15d23b38e4335e858848aa8c9a6710304f
Merge: 2ac04a1... e051fda...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:59:27 2007 -0800

    Merge branch 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2
    
    * 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2:
      ocfs2: ocfs2_link() journal credits update

commit 2ac04a1597d9bca952dafcf8cbff4621884cb723
Merge: 0c7d375... a417a21...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:56:37 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jikos/hid:
      USB HID: handle multi-interface devices for Apple macbook pro properly
      HID: move away from DEBUG defines in favor of CONFIG_HID_DEBUG
      USB HID: fix bogus comment in hid_get_class_descriptor()
      USB HID: remove hid_find_field_by_usage()
      HID: API - fix leftovers of hidinput API in USB HID
      HID: hid debug from hid-debug.h to hid layer
      hid: force feedback driver for PantherLord USB/PS2 2in1 Adapter
      hid: quirk for multi-input devices with unneeded output reports
      hid: allow force feedback for multi-input devices

commit 0c7d3757116c59b3eedd9aa6dfd7ae0a1341f5c2
Merge: 2442d31... b45bfcc...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:55:33 2007 -0800

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/ehca: Remove obsolete prototypes
      IB/ehca: Remove use of do_mmap()
      RDMA/addr: Handle ethernet neighbour updates during route resolution
      IB: Make sure struct ib_user_mad.data is aligned
      IB/srp: Don't wait for response when QP is in error state.
      IB: Return qp pointer as part of ib_wc
      IB: Include <linux/kref.h> explicitly in <rdma/ib_verbs.h>

commit 2442d3109943bafbdfc4f0495e3d10eeedc8390c
Merge: 02aedd6... f9d429a...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:54:54 2007 -0800

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/drzeus/mmc
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/drzeus/mmc: (32 commits)
      mmc: tifm: replace kmap with page_address
      mmc: sdhci: fix voltage ocr
      mmc: sdhci: replace kmap with page_address
      mmc: wbsd: replace kmap with page_address
      mmc: handle pci_enable_device() return value in sdhci
      mmc: Proper unclaim in mmc_block
      mmc: change wbsd mailing list
      mmc: Graceful fallback for fancy features
      mmc: Handle wbsd's stupid command list
      mmc: Allow host drivers to specify max block count
      mmc: Allow host drivers to specify a max block size
      tifm_sd: add suspend and resume functionality
      tifm_core: add suspend/resume infrastructure for tifm devices
      tifm_7xx1: prettify
      tifm_7xx1: recognize device 0xac8f as supported
      tifm_7xx1: switch from workqueue to kthread
      tifm_7xx1: Merge media insert and media remove functions
      tifm_7xx1: simplify eject function
      Add dummy_signal_irq function to save check in ISR
      Remove unused return value from signal_irq callback
      ...

commit 02aedd69e2ef31b0fca1e8960cb1e7fd0c343110
Merge: 9ad0830... 4d284ca...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:45:32 2007 -0800

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6: (37 commits)
      [S390] Avoid excessive inlining.
      [S390] Mark kernel text section read-only.
      [S390] Convert memory detection into C code.
      [S390] Calibrate delay and bogomips.
      [S390] Hypervisor filesystem (s390_hypfs) for z/VM
      [S390] Add crypto support for 3592 tape devices
      [S390] boot from NSS support
      [S390] Support for s390 Pseudo Random Number Generator
      [S390] ETR support.
      [S390] noexec protection
      [S390] move crypto options and some cleanup.
      [S390] cio: Don't spam debug feature.
      [S390] Cleanup of CHSC event handling.
      [S390] cio: declare hardware structures packed.
      [S390] Add set_fs(USER_DS) to start_thread().
      [S390] cio: Catch operand exceptions on stsch.
      [S390] Fix register usage description.
      [S390] kretprobe_trampoline_holder() in wrong section.
      [S390] Fix kprobes breakpoint handling.
      [S390] Update maintainers file.
      ...

commit 9ad0830f307bcd8dc285cfae58998d43b21727f4
Author: David Howells <dhowells@redhat.com>
Date:   Tue Feb 6 13:45:51 2007 +0000

    [PATCH] Keys: Fix key serial number collision handling
    
    Fix the key serial number collision avoidance code in key_alloc_serial().
    
    This didn't use to be so much of a problem as the key serial numbers were
    allocated from a simple incremental counter, and it would have to go through
    two billion keys before it could possibly encounter a collision.  However, now
    that random numbers are used instead, collisions are much more likely.
    
    This is fixed by finding a hole in the rbtree where the next unused serial
    number ought to be and using that by going almost back to the top of the
    insertion routine and redoing the insertion with the new serial number rather
    than trying to be clever and attempting to work out the insertion point
    pointer directly.
    
    This fixes kernel BZ #7727.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 768c242b30d9ec5581dd245e8289acb6b77815d1
Merge: e503606... a850790...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:42:20 2007 -0800

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] Minor cleanup
      [CIFS] Missing free in error path
      [CIFS] Reduce cifs stack space usage
      [CIFS] lseek polling returned stale EOF

commit e503606c5b7687842beb8fca46b827606ae40c63
Merge: 76c3295... d390008...
Author: Linus Torvalds <torvalds@woody.linux-foundation.org>
Date:   Tue Feb 6 14:35:30 2007 -0800

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus: (40 commits)
      [MIPS] Yosemite: Fix missing parens in SERIAL_READ_1 macro
      [MIPS] Fix warnings in run_uncached on 32bit kernel
      [MIPS] Comment fix
      [MIPS] MT: Nuke duplicate mips_mt_regdump() prototype.
      [MIPS] Alchemy:  Fix PCI-memory access
      [MIPS] Move .set reorder out of conditional code
      [MIPS] Check FCSR for pending interrupts before restoring from a context.
      [MIPS] Jaguar ATX: Fix large number of warnings.
      [MIPS] Jaguar: Fix MAC address detection after platform_device conversion.
      [MIPS] SMTC: Make a bunch of functions and variables static.
      [MIPS] Use compat_sys_pselect6
      [MIPS] SMTC: Cleanup idle hook invocation.
      [MIPS] SELinux: Add security hooks to mips-mt {get,set}affinity
      [MIPS] IRIX: Linux coding style cleanups.
      [MIPS] PB1100: Fix pile of warnings
      [MIPS] Alchemy: Fix bunch of warnings
      [MIPS] Whitespace cleanups.
      [MIPS] Alchemy: Fix bunch more warnings.
      [MIPS] Use ARRAY_SIZE macro when appropriate
      [MIPS] Fix some whitespace damage
      ...

commit 76c329563c5b8663ef27eb1bd195885ab826cbd0
Author: Oleg Verych <olecom@flower.upol.cz>
Date:   Tue Feb 6 02:18:22 2007 +0100

    [PATCH] kbuild: correctly skip tilded backups in localversion files
    
     Tildes as in path as in filenames are handled correctly now:
     only files, containing tilde '~', are backups, thus are not valid.
    
     [KJ]:
     Definition of `space' was removed, scripts/Kbuild.include has one.
     That definition was taken right from the GNU make manual, while Kbuild's
     version is original.
    
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Bastian Blank <bastian@waldi.eu.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit 5de043f4bd11a9e0a3e8daec7d1905da575a76b7
Author: Oleg Verych <olecom@flower.upol.cz>
Date:   Tue Feb 6 02:18:21 2007 +0100

    [PATCH] kbuild: improve option checking, Kbuild.include cleanup
    
     GNU binutils, root users, tmpfiles, external modules ro builds must
     be fixed to do the right thing now.
    
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Horst Schirmeier <horst@schirmeier.com>
    Cc: Jan Beulich <jbeulich@novell.com>
    Cc: Daniel Drake <dsd@gentoo.org>
    Cc: Andi Kleen <ak@suse.de>
    Cc: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Oleg Verych <olecom@flower.upol.cz>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit f6112ec27a8f0eee6c5a996f65c7bfd9457d9f85
Author: Oleg Verych <olecom@flower.upol.cz>
Date:   Tue Feb 6 02:18:20 2007 +0100

    [PATCH] kbuild scripts: replace gawk, head, bc with shell, update
    
      Replacing overhead of using some (external) programs
      instead of good old `sh'.
    
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: William Stearns <wstearns@pobox.com>
    Cc: Martin Schlemmer <azarah@nosferatu.za.org>
    Signed-off-by: Oleg Verych <olecom@flower.upol.cz>
    Acked-by: Mark Lord <lkml@rtr.ca>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

commit dc2e2f33bbf07344995357314fd8887f6564dba7
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Sun Oct 22 15:06:46 2006 +1000

    [CRYPTO] doc: added the developer of Camellia cipher
    
    This patch adds the developer of Camellia cipher algorithm.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 6a0dc8d733de4aca958a73019877f96b4754d671
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Sun Oct 22 15:05:57 2006 +1000

    [IPSEC]: added the entry of Camellia cipher algorithm to ealg_list[]
    
    This patch adds the entry of Camellia cipher algorithm to ealg_list[].
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 390fbd1bfaa7b561af8e4f385067c55bdf4100ba
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Sun Oct 22 15:02:48 2006 +1000

    [IPSEC]: added the definition of Camellia cipher
    
    This patch adds the definitions used by pfkeyv2 interface for Camellia
    cipher algorithm.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 02ab5a7056bd8441ba6ae8ba8662d4296c202ecb
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Wed Jan 24 21:48:19 2007 +1100

    [CRYPTO] camellia: added the testing code of Camellia cipher
    
    This patch adds the code of Camellia code for testing module.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit d64beac050914de6fe6565741b39905ecd5994b7
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Wed Jan 24 21:47:48 2007 +1100

    [CRYPTO] camellia: added the code of Camellia cipher algorithm.
    
    This patch adds the main code of Camellia cipher algorithm.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 04ac7db3f23d98abe5d3c91d21b0e45fc09e74ea
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Sun Oct 22 14:49:17 2006 +1000

    [CRYPTO] camellia: Add Kconfig entry.
    
    This patch adds the Kconfig entry for Camellia.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 09cb914f096bd38b22341af291236b65cf55ceee
Author: Richard Knutsson <ricknu-0@student.ltu.se>
Date:   Wed Jan 24 21:39:34 2007 +1100

    [CRYPTO] geode: Convert pci_module_init() to pci_register_driver()
    
    Replace uses of the obsolete pci_module_init function.
    
    Signed-off-by: Richard Knutsson <ricknu-0@student.ltu.se>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 78a1fe4f242cbe6b4578e072b75e171b92745afa
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Dec 24 10:02:00 2006 +1100

    [CRYPTO] api: Use structs for cipher/compression
    
    Now that all cipher/compression users have switched over to the new
    allocation scheme, we can get rid of the compatility defines and use
    proper structs for them.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 6b701dde8e0584f3bf0b6857d0e92f7ed15ed6f9
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Dec 24 09:59:42 2006 +1100

    [CRYPTO] xcbc: Use new cipher interface
    
    This patch changes xcbc to use the new cipher encryt_one interface.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 27d2a3300755387d2fec231d37944907ff992ce8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jan 24 20:50:26 2007 +1100

    [CRYPTO] api: Allow multiple frontends per backend
    
    This patch adds support for multiple frontend types for each backend
    algorithm by passing the type and mask through to the backend type
    init function.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 2e306ee016fd4750289e65c3b1856db569f1f3f2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Dec 17 10:05:58 2006 +1100

    [CRYPTO] api: Add type-safe spawns
    
    This patch allows spawns of specific types (e.g., cipher) to be allocated.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit f1ddcaf3393b7a3871809b97fae90fac841a1f39
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jan 27 10:05:15 2007 +1100

    [CRYPTO] api: Remove deprecated interface
    
    This patch removes the old cipher interface and related code.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit ba8da2a9485f22455dcb06dd17e2f6d94b81ba89
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Dec 17 08:57:38 2006 +1100

    [CRYPTO] tcrypt: Removed vestigial crypto_alloc_tfm call
    
    The crypto_comp conversion missed the last remaining crypto_alloc_tfm
    call.  This patch replaces it with crypto_alloc_comp.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 90831639a65592d6d3dc888dc3341f54ebf932e6
Author: David Howells <dhowells@redhat.com>
Date:   Sat Dec 16 12:13:14 2006 +1100

    [CRYPTO] fcrypt: Add FCrypt from RxRPC
    
    Add a crypto module to provide FCrypt encryption as used by RxRPC.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 91652be5d1b901673a8e926455f0ed146cfaa588
Author: David Howells <dhowells@redhat.com>
Date:   Sat Dec 16 12:09:02 2006 +1100

    [CRYPTO] pcbc: Add Propagated CBC template
    
    Add PCBC crypto template support as used by RxRPC.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit a28091ae170cd06695bf461905c5b97a165633ba
Author: Andrew Donofrio <linuxbugzilla@kriptik.org>
Date:   Sun Dec 10 12:10:20 2006 +1100

    [CRYPTO] tcrypt: Added test vectors for sha384/sha512
    
    This patch adds tests for SHA384 HMAC and SHA512 HMAC to the tcrypt module. Test data was taken from
    RFC4231. This patch is a follow-up to the discovery (bug 7646) that the kernel SHA384 HMAC
    implementation was not generating proper SHA384 HMACs.
    
    Signed-off-by: Andrew Donofrio <linuxbugzilla@kriptik.org>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit fb469840b8c34b2f95b40a64b271f245cc1075b7
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Dec 10 10:45:28 2006 +1100

    [CRYPTO] all: Check for usage in hard IRQ context
    
    Using blkcipher/hash crypto operations in hard IRQ context can lead
    to random memory corruption due to the reuse of kmap_atomic slots.
    Since crypto operations were never meant to be used in hard IRQ
    contexts, this patch checks for such usage and returns an error
    before kmap_atomic is performed.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit a850790f6c903f1a89d0dbf953946d231df3fe6b
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Feb 6 20:43:30 2007 +0000

    [CIFS] Minor cleanup
    
    Missing tab.  Missing entry in changelog
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 57e1c5c87db512629dd44ddeb882a5aaf0e4299e
Merge: 62d0cfc... 76a2e84...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Feb 6 15:31:00 2007 -0500

    Pull test into release branch

commit 76a2e849df47697706024262a8bbb83432b8bde7
Merge: 894d79b... 03c6d13...
Author: Len Brown <len.brown@intel.com>
Date:   Tue Feb 6 15:30:03 2007 -0500

    Pull acpica into test branch

commit 03c6d130f690dba46387480de80acf458a6fd14c
Author: Len Brown <len.brown@intel.com>
Date:   Tue Feb 6 15:28:23 2007 -0500

    ACPICA: reduce table header messages to fit within 80 columns
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d390008ebf42bdfda106e9de2b2d0abcc9858e26
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 6 16:43:31 2007 +0000

    [MIPS] Yosemite: Fix missing parens in SERIAL_READ_1 macro
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c55197eb549dc09a52b6d91e6f26709a6d6815e5
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Feb 6 10:59:22 2007 +0900

    [MIPS] Fix warnings in run_uncached on 32bit kernel
    
    arch/mips/lib/uncached.c: In function 'run_uncached':
    arch/mips/lib/uncached.c:47: warning: comparison is always true due to limited range of data type
    arch/mips/lib/uncached.c:48: warning: comparison is always false due to limited range of data type
    arch/mips/lib/uncached.c:57: warning: comparison is always true due to limited range of data type
    arch/mips/lib/uncached.c:58: warning: comparison is always false due to limited range of data type
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 131c1a2b6eef87485f7e280817d97615ea2a1551
Author: Chris Dearman <chris@mips.com>
Date:   Thu Feb 1 19:54:13 2007 +0000

    [MIPS] Comment fix
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit be701306eba49c9157506d4bbe40dbed7969a915
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Feb 4 23:23:00 2007 +0000

    [MIPS] MT: Nuke duplicate mips_mt_regdump() prototype.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit fd046eb5378f2bc59851fcbc91957d01529fc3db
Author: Alexander Bigga <ab@mycable.de>
Date:   Thu Dec 21 11:25:19 2006 +0100

    [MIPS] Alchemy:  Fix PCI-memory access
    
    The problem was introduced in 2.6.18.3 with the casting of some
    36bit-defines (PCI memory) in au1000.h to resource_size_t which may be
    u32 or u64 depending on the experimental CONFIG_RESOURCES_64BIT.
    
    With unset CONFIG_RESOURCES_64BIT, the pci-memory cannot be accessed
    because the ioremap in arch/mips/au1000/common/pci.c already used the
    truncated addresses.
    With set CONFIG_RESOURCES_64BIT, things get even worse, because PCI-scan
    aborts, due to resource conflict: request_resource() in arch/mips/pci/pci.c
    fails because the maximum iomem-address is 0xffffffff (32bit) but the
    pci-memory-start-address is 0x440000000 (36bit).
    
    To get pci working again, I propose the following patch:
    
    1. remove the resource_size_t-casting from au1000.h again
    2. make the casting in arch/mips/au1000/common/pci.c (it's allowed and
    necessary here. The 36bit-handling will be done in __fixup_bigphys_addr).
    
    With this patch pci works again like in 2.6.18.2, the gcc-compile warnings
    in pci.c are gone and it doesn't depend on CONFIG_EXPERIMENTAL.
    
    Signed-off-by: Alexander Bigga <ab@mycable.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 37f26742437df885ddd72150ab352d0a931cd3a7
Author: Chris Dearman <chris@mips.com>
Date:   Thu Feb 1 19:54:13 2007 +0000

    [MIPS] Move .set reorder out of conditional code
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6d6671066a311703bca1b91645bb1e04cc983387
Author: Chris Dearman <chris@mips.com>
Date:   Thu Feb 1 19:54:13 2007 +0000

    [MIPS] Check FCSR for pending interrupts before restoring from a context.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b86b30f81c7601d9a410d2ce0c64d9ba50d673ae
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Nov 7 09:23:57 2006 +0000

    [MIPS] Jaguar ATX: Fix large number of warnings.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3d0f82aea19649a2fd1169cfe63a9b522355386b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Nov 7 09:25:51 2006 +0000

    [MIPS] Jaguar: Fix MAC address detection after platform_device conversion.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5868756dcbf4b585c3c485e43fc36844c038cef5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 5 00:33:21 2007 +0000

    [MIPS] SMTC: Make a bunch of functions and variables static.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 99d233fa9bba1916050dd27d74530342af68b6db
Author: Joseph S. Myers <joseph@codesourcery.com>
Date:   Wed Jan 10 12:30:50 2007 +0000

    [MIPS] Use compat_sys_pselect6
    
    The N32 and O32 pselect6 syscalls need to use compat_sys_pselect6 to
    translate arguments from 32-bit to 64-bit layout.
    
    Signed-off-by: Joseph Myers <joseph@codesourcery.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 447deafba4de56bfa5ed5d5778e56afe55432394
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 5 00:34:20 2007 +0000

    [MIPS] SMTC: Cleanup idle hook invocation.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7418cb89af6f9e21660d60a4bd088a8b6fd11e81
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Wed Jun 28 09:36:46 2006 -0400

    [MIPS] SELinux: Add security hooks to mips-mt {get,set}affinity
    
    This patch adds LSM hooks into the setaffinity and getaffinity functions
    for the mips architecture to enable security modules to control these
    operations between tasks with different security attributes. This
    implementation uses the existing task_setscheduler and task_getscheduler
    LSM hooks.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c9170617510059c750cb91207b08f35001571a22
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 5 00:05:08 2007 +0000

    [MIPS] IRIX: Linux coding style cleanups.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3f21cdee412089ed7ea12c3650bfb4211cf0b1d0
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Nov 7 10:19:05 2006 +0000

    [MIPS] PB1100: Fix pile of warnings
    
      CC      arch/mips/au1000/pb1100/board_setup.o
    arch/mips/au1000/pb1100/board_setup.c: In function board_setup:
    arch/mips/au1000/pb1100/board_setup.c:104: warning: passing argument 1 of readb makes pointer from integer without a cast
    arch/mips/au1000/pb1100/board_setup.c:105: warning: passing argument 1 of readb makes pointer from integer without a cast
    arch/mips/au1000/pb1100/board_setup.c:105: warning: passing argument 2 of writeb makes pointer from integer without a cast
    arch/mips/au1000/pb1100/board_setup.c:109: warning: passing argument 1 of readb makes pointer from integer without a cast
    arch/mips/au1000/pb1100/board_setup.c:110: warning: passing argument 1 of readb makes pointer from integer without a cast
    arch/mips/au1000/pb1100/board_setup.c:110: warning: passing argument 2 of writeb makes pointer from integer without a cast
    arch/mips/au1000/pb1100/board_setup.c:51: warning: unused variable sys_clksrc
    arch/mips/au1000/pb1100/board_setup.c:51: warning: unused variable sys_freqctrl
    arch/mips/au1000/pb1100/board_setup.c:50: warning: unused variable pin_func
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 786d7cdd06581773ee7913560838d6f4487d2d9f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Nov 7 09:58:30 2006 +0000

    [MIPS] Alchemy: Fix bunch of warnings
    
      CC      arch/mips/au1000/common/pci.o
    arch/mips/au1000/common/pci.c:42: warning: large integer implicitly truncated to unsigned type
    arch/mips/au1000/common/pci.c:43: warning: large integer implicitly truncated to unsigned type
    arch/mips/au1000/common/pci.c:49: warning: large integer implicitly truncated to unsigned type
    arch/mips/au1000/common/pci.c:50: warning: large integer implicitly truncated to unsigned type
    arch/mips/au1000/common/pci.c: In function au1x_pci_setup:
    arch/mips/au1000/common/pci.c:82: warning: ISO C90 forbids mixed declarations and code
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e0daad449c5195fa4552c60392eeee4e5c58d31c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Feb 5 00:10:11 2007 +0000

    [MIPS] Whitespace cleanups.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 722b05a0c1498ef12972bbd5084eded498d75fb4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Nov 7 10:22:31 2006 +0000

    [MIPS] Alchemy: Fix bunch more warnings.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 25b8ac3ba46ee3d586a9c00c1771dca58314714e
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Mon Feb 5 04:42:11 2007 +0200

    [MIPS] Use ARRAY_SIZE macro when appropriate
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3e7f9b8254b82f7261b2c56ffaf864198c135ee5
Author: Jan Altenberg <jan@linutronix.de>
Date:   Thu Jan 25 20:46:14 2007 +0100

    [MIPS] Fix some whitespace damage
    
    Signed-off-by: Jan Altenberg <jan@linutronix.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 811d944901705b8c14b945ba51caff5e912bb9e3
Author: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date:   Sat Feb 3 23:16:51 2007 -0500

    [MIPS] Add missing ifdef arch/mips/pmc-sierra/yosemite/setup.c
    
    early_serial_setup is only defined when CONFIG_SERIAL_8250 is set.
    
    Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 19487f1e8a288da0d84b48d086167cf328080938
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Feb 4 00:57:25 2007 +0900

    [MIPS] Fix pb1200/irqmap.c and apply some missed patches
    
    pb1200/irqmap.c had been broken a while due to non-named initializer
    and had missed some recent IRQ related changes.  Apply these commits
    to this file.
    
    [MIPS] IRQ cleanups
    commit 1603b5aca4f15b34848fb5594d0c7b6333b99144
    [MIPS] use generic_handle_irq, handle_level_irq, handle_percpu_irq
    commit 1417836e81c0ab8f5a0bfeafa90d3eaa41b2a067
    [MIPS] Compile __do_IRQ() when really needed
    commit e77c232cfc6e1250b2916a7c69225d6634d05a49
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 06396094b2fad0c429cde795dac4a72bc4d32bf2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Feb 2 11:13:35 2007 +0000

    [MIPS] Do not allow oprofile to be enabled on SMTC.
    
    Oprofile cannot work on SMTC due to the limited number of counters.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4a969e1e223d517dd568c84ba3a66542a72c3680
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Thu Feb 1 05:45:14 2007 -0500

    [MIPS] Remove superfluous "ifdef CONFIG_KGDB".
    
    Given that the Makefiles involved already have conditional compilation of
     the form:
    
      obj-$(CONFIG_KGDB)      += dbg_io.o
    
    there seems to be little value for the dbg_io.c source files to check
    that config variable yet again.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit be6e143741226ca59b24e6760de4578a5d4f98d7
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 6 16:53:17 2007 +0000

    [MIPS] vpe_elfload and vpe_run are only used locally, make them static.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 418451c17870e56a176aeb4be1bed810f634fb5a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 6 16:53:16 2007 +0000

    [MIPS] SMTC: remove unused atomic_postclear
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 69a6c312e5ebb2e929ceb67e6246e2d9314f1d29
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Wed Jan 24 01:21:05 2007 +0900

    [MIPS] Move some kernel globals from asm file to C file.
    
    This get rid of some undesirable hole in BSS section due to random
    order of placement.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 907e193ea798b3f73a71a2a01f938b69fd53b26d
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Jan 23 22:29:06 2007 +0900

    [MIPS] Remove _fdata from asm-mips/sections.h
    
    There is no _fdata symbol in kernel.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 130e2fb78305b148b15cd3b5129596844c5f5e4f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Feb 6 16:53:15 2007 +0000

    [MIPS] Kconfig: Provide sane NR_CPUS defaults for more configurations
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 24d55728dc96d2cb8f49064e012559300eb97610
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jan 18 22:27:11 2007 +0900

    [MIPS] vr41xx: Use symbolic names for IRQ numers
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 70d21cdeef6331e67ed87262c894cd6601f0dccc
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Jan 15 00:07:25 2007 +0900

    [MIPS] use name instead of typename for each irq_chip
    
    The "typename" field was obsoleted by the "name" field.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ea6e942bea55b574bf2118bce8ee73185e754cfb
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Jan 16 23:29:11 2007 +0900

    [MIPS] Kconfig: Move some entries to appropriate menu
    
    Currently KEXEC is in "Machine selection", SECCOMP, PM, APM are in
    "Executable file formats" menu.  Move KEXEC and SECCOMP to "Kernel
    type" and PM, APM to new "Power management options" menu.  Also
    replace "config PM" with kernel/power/Kconfig.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9a0ad9e9d8cae1087fe7b0b137e1c84d12dc0c76
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jan 11 23:53:18 2007 +0900

    [MIPS] vr41xx: add MACINT controls
    
    This patch has added MACINT controls.
    They are necessary for VR4133 ethernet driver.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6f284a2ce7b8bc49cb8455b1763357897a899abb
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Wed Jan 10 09:44:05 2007 +0100

    [MIPS] FLATMEM: introduce PHYS_OFFSET.
    
    The old code was assuming that min_low_pfn was always 0. This
    means that platforms having a big hole at their memory start
    paid the price of wasting some memory for the allocation of
    unused entries in mem_map[].
    
    This patch prevents this waste.
    
    It introduces PHYS_OFFSET define which is the start of the
    physical memory and uses it wherever needed. Specially when
    converting physical/virtual addresses into virtual/physical
    ones.
    
    Currently all platforms defines PHYS_OFFSET to 0.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit db84dc61552ae0d198a8133d28b80c3838930ba8
Author: Franck Bui-Huu <fbuihuu@gmail.com>
Date:   Wed Jan 10 09:44:04 2007 +0100

    [MIPS] Setup min_low_pfn/max_low_pfn correctly
    
    This patch makes a better usage of these two globals.
    'min_low_pfn' is now correctly setup for all configs, which
    allow us to rely on it in boot memory code init.
    
    Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a583158c9ce822c96a718fbf877cec1e5f9ad75d
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Dec 18 00:07:40 2006 +0900

    [MIPS] Unify memset.S
    
    The 32-bit version and 64-bit version are almost equal.  Unify them.
    This makes further improvements (for example, supporting CDEX, etc.)
    easier.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c44e8d5e47b8ba672440b92eab0735628469116c
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sat Dec 30 00:43:59 2006 +0900

    [MIPS] prom_free_prom_memory cleanup
    
    Current prom_free_prom_memory() implementations are almost same as
    free_init_pages(), or no-op.  Make free_init_pages() extern (again)
    and make prom_free_prom_memory() use it.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2fa7937bd8922e1fe4aae6a45e7e787fa45d6043
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Jan 14 23:41:42 2007 +0900

    [MIPS] Make I8259A_IRQ_BASE customizable
    
    Move I8259A_IRQ_BASE from asm/i8259.h to asm/mach-generic/irq.h and
    make it really customizable.  And remove I8259_IRQ_BASE declared on
    some platforms.  Currently only NEC_CMBVR4133 is using custom
    I8259A_IRQ_BASE value.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 97dcb82de6cc99a5669eb8e342efc24cceb1e77e
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Jan 8 02:14:29 2007 +0900

    [MIPS] Define MIPS_CPU_IRQ_BASE in generic header
    
    The irq_base for {mips,rm7k,rm9k}_cpu_irq_init() are constant on all
    platforms and are same value on most platforms (0 or 16, depends on
    CONFIG_I8259).  Define them in asm-mips/mach-generic/irq.h and make
    them customizable.  This will save a few cycle on each CPU interrupt.
    
    A good side effect is removing some dependencies to MALTA in generic
    SMTC code.
    
    Although MIPS_CPU_IRQ_BASE is customizable, this patch changes irq
    mappings on DDB5477, EMMA2RH and MIPS_SIM, since really customizing
    them might cause some header dependency problem and there seems no
    good reason to customize it.  So currently only VR41XX is using custom
    MIPS_CPU_IRQ_BASE value, which is 0 regardless of CONFIG_I8259.
    
    Testing this patch on those platforms is greatly appreciated.  Thank
    you.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b6ec8f069bf202d2bd888aa9137b2cc3aad4c573
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Jan 8 00:20:24 2007 +0900

    [MIPS] Remove unused rm9k_cpu_irq_disable()
    
    rm9k_cpu_irq_disable() is unused since commit
    1603b5aca4f15b34848fb5594d0c7b6333b99144.  Remove it.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ae0a846e411dc0b568e8ccda584896310ee5f369
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jan 9 12:57:37 2007 +0000

    [ARM] Move processor_modes[] to .../process.c
    
    bad_mode() currently prints the mode which caused the exception, and
    then causes an oops dump to be printed which again displays this
    information (since the CPSR in the struct pt_regs is correct.)  This
    leads to processor_modes[] being shared between traps.c and process.c
    with a local declaration of it.
    
    We can clean this up by moving processor_modes[] to process.c and
    removing the duplication, resulting in processor_modes[] becoming
    static.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d941caa2537a01653704a8c1148d330a3b2755f1
Author: Manfred Gruber <m.gruber@tirol.com>
Date:   Sun Dec 17 22:10:48 2006 +0100

    [ARM] 4047/1: Add initial board support for Contec Hypercontrol Micro9 boards.
    
    Contec Micro9 (H/M/L) boards based on Cirrus Logic ep93xx (ep9315/ep9307/ep9302).
    
    Signed-off-by: Manfred Gruber <m.gruber@tirol.com>
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 946acb1c70f91f07331d2b8691dfccf95c95ff3d
Author: Michael-Luke Jones <mlj28@cam.ac.uk>
Date:   Sat Dec 16 23:02:00 2006 +0100

    [ARM] 4032/1: Add platform resources required for CF driver
    
    This patch adds the platform resources required to support the
    ixp4xx-pata-cf libata driver on Avila Gateworks boards.
    
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Michael-Luke Jones <mlj28@cam.ac.uk>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0f1859719537acf5a611fd18be5d81c0cfd5fbf4
Author: Michael-Luke Jones <mlj28@cam.ac.uk>
Date:   Sat Dec 16 23:04:05 2006 +0100

    [ARM] 4033/1: Add separate Avila board setup code
    
    This patch adds support for the Gateworks Avila Network Platform in
    a separate set of setup files to the IXDP425. This is necessary now
    that a driver for the Avila CF card slot is available. It also adds
    support for a minor variant on the Avila board known as the Loft,
    which has a different number of maximum PCI devices.
    
    Signed-off-by: Michael-Luke Jones <mlj28@cam.ac.uk>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6e98a2f88e65d57cff9c98ce1744ff8e4498de31
Author: Michael-Luke Jones <mlj28@cam.ac.uk>
Date:   Sat Dec 16 23:01:58 2006 +0100

    [ARM] 4031/1: Remove references to the Avila in ixdp425 setup code
    
    This patch removes references to the Gateworks Avila Network
    Platform in the ixdp425 setup code. Avila setup should occur
    separately now that a CF ATA device driver is available.
    
    Signed-off-by: Michael-Luke Jones <mlj28@cam.ac.uk>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7ef416c4b878685a419a3b2f133ab5e7283f96b0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Dec 21 20:59:37 2006 +0000

    [ARM] Improve csum_fold, cleanup csum_tcpudp_magic()
    
    csum_fold doesn't need two assembly instructions to perform its task,
    it can simply add the high and low parts together by rotating by 16
    bits, and the carry into the upper-16 bits will automatically happen.
    
    Also, since csum_tcpudp_magic() is just csum_tcpudp_nofold + csum_fold,
    use those two functions to achieve this.  Also note that there is a
    csum_fold() at the end of ip_fast_csum() as well, so use the real
    csum_fold() there as well.
    
    Boot tested on Versatile.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 10c03f69680e9e2acd8a9409a230aef37295ac49
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Dec 19 14:17:46 2006 +0000

    [ARM] oprofile: add ARM11 SMP support
    
    Add the glue for ARM11 SMP oprofile support, which also supports the
    performance monitor in the coherency unit.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2d9e1ae06d8f0bb187ea083fabab2dfb6f589270
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Dec 19 12:41:22 2006 +0000

    [ARM] oprofile: add ARM11 UP support
    
    Add oprofile glue for ARM11 (ARMv6) oprofile support.  This
    connects the ARM11 core profiling support to the oprofile code
    for uniprocessor configurations.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c265a762aa196de11f38f6f44cc817329f32a813
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Dec 19 12:24:25 2006 +0000

    [ARM] oprofile: add ARM11 core support
    
    Add basic support for the ARM11 profiling hardware.  This is shared
    between the ARM11 UP and ARM11 SMP oprofile support code.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1eaf122cda2c135f90b9e610a847e6d4627b577c
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Tue Feb 6 18:08:28 2007 +0200

    [AGPGART] intel-agp: Use ARRAY_SIZE macro when appropriate
    
    use ARRAY_SIZE macro already defined in kernel.h
    
    Signed-off-by: Ahmed S. Darwish <darwish.07@gmail.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 549ae0ac3d574a682e82b02e79259a65445a675b
Author: Wendy Cheng <wcheng@redhat.com>
Date:   Tue Feb 6 03:52:16 2007 -0500

    [GFS2] nfsd readdirplus assertion failure
    
    Glock assertion failure found in '07 NFS connectathon. One of the NFSDs
    is doing a "readdirplus" procedure call. It passes the logic into
    gfs2_readdir() where it obtains its directory inode glock. This is then
    followed by filehandle construction that invokes lookup code. It hits
    the assertion failure while trying to obtain the inode glock again
    inside gfs2_drevalidate().
    
    This patch bypasses the recursive glock call if caller already holds the
    lock.
    
    Signed-off-by: S. Wendy Cheng <wcheng@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 51099005ab8e09d68a13fea8d55bc739c1040ca6
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Feb 5 18:53:04 2007 -0800

    [IA64] swiotlb abstraction (e.g. for Xen)
    
    Add abstraction so that the file can be used by environments other than IA64
    and EM64T, namely for Xen.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 563aaf064f3776623ff5e7aef511ac2eb7e5f0bb
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Feb 5 18:51:25 2007 -0800

    [IA64] swiotlb cleanup
    
    - add proper __init decoration to swiotlb's init code (and the code calling
      it, where not already the case)
    
    - replace uses of 'unsigned long' with dma_addr_t where appropriate
    
    - do miscellaneous simplicfication and cleanup
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 93fbff63e62b87fe450814db41f859d60b048fb8
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Feb 5 18:49:45 2007 -0800

    [IA64] make swiotlb use bus_to_virt/virt_to_bus
    
    Convert all phys_to_virt/virt_to_phys uses to bus_to_virt/virt_to_bus, as is
    what is meant and what is needed in (at least) some virtualized environments
    like Xen.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Acked-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit cde14bbfb3aa79b479db35bd29e6c083513d8614
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Feb 5 18:46:40 2007 -0800

    [IA64] swiotlb bug fixes
    
    This patch fixes
    - marking I-cache clean of pages DMAed to now only done for IA64
    - broken multiple inclusion in include/asm-x86_64/swiotlb.h
    - missing call to mark_clean in swiotlb_sync_sg()
    - a (perhaps only theoretical) issue in swiotlb_dma_supported() when
    io_tlb_end is exactly at the end of memory
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 86afa9eb88af2248bcc91d5b3568c63fdea65d6c
Author: Fenghua Yu <fenghua.yu@intel.com>
Date:   Mon Feb 5 16:07:57 2007 -0800

    [IA64] Hook up getcpu system call for IA64
    
    getcpu system call returns cpu# and node# on which this system call and
    its caller are running. This patch hooks up its implementation on IA64.
    
    Signed-off-by: Fenghua Yu <fenghua.yu@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 524fd988bb83153ddc9cfea867129eb6efb7ac23
Author: Bob Picco <bob.picco@hp.com>
Date:   Mon Feb 5 16:20:08 2007 -0800

    [IA64] clean up sparsemem memory_present call
    
    Eliminate arch specific memory_present call ia64 NUMA by utilizing
    sparse_memory_present_with_active_regions.
    
    Acked-by: Mel Gorman <mel@csn.ul.ie>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f1c0afa2e8802c01cf82c915e2bb3cb2a81570d4
Author: George Beshers <gbeshers@sgi.com>
Date:   Mon Feb 5 16:20:04 2007 -0800

    [IA64] show_mem() for IA64 sparsemem NUMA
    
    On the ia64 architecture only this patch upgrades show_mem() for sparse
    memory to be the same as it was for discontig memory.  It has been shown to
    work on NUMA and flatmem architectures.
    
    Signed-off-by: George Beshers <gbeshers@sgi.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 671496affdb5228786896864c3f900f66563e8c1
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Feb 5 16:20:03 2007 -0800

    [IA64] missing exports hwsw_sync_...
    
    Add missing exports to allow several drivers to be built as module with
    CONFIG_IA64_HP_ZX1_SWIOTLB.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 71120061f271f00d8280659bf12e065ca6533d4d
Author: Kirill Korotaev <dev@openvz.org>
Date:   Mon Feb 5 16:20:00 2007 -0800

    [IA64] virt_to_page() can be called with NULL arg
    
    It does not return NULL when arg is NULL.
    
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d00195ebc18049f067c8e389c186aa6f5d2b659f
Author: Kirill Korotaev <dev@openvz.org>
Date:   Mon Feb 5 16:19:59 2007 -0800

    [IA64] alignment bug in ldscript
    
    Occasionally the FSYS_RETURN patch list can have an odd length, causing other
    data structures to get out of alignment.  In OpenVZ it is odd and we get
    misaligned kernel image, which does not boot.
    
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 52e4200a6da2d98c537b95f7c502ddadf96a6934
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Tue Feb 6 09:15:39 2007 +0900

    [MTD] OneNAND: Do not allow oob write past end of page
    
    OneNAND can write oob to successive pages, but NAND
    does not do that.  For compatibility, disallow OneNAND
    from writing past the end of the page.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 139b830477ccdca21b68c40f9a83ec327e65eb56
Author: Bob Picco <bob.picco@hp.com>
Date:   Tue Jan 30 02:11:09 2007 -0800

    [IA64] register memory ranges in a consistent manner
    
    While pursuing and unrelated issue with 64Mb granules I noticed a problem
    related to inconsistent use of add_active_range.  There doesn't appear any
    reason to me why FLATMEM versus DISCONTIG_MEM should register memory to
    add_active_range with different code.  So I've changed the code into a
    common implementation.
    
    The other subtle issue fixed by this patch was calling add_active_range in
    count_node_pages before granule aligning is performed.  We were lucky with
    16MB granules but not so with 64MB granules.  count_node_pages has reserved
    regions filtered out and as a consequence linked kernel text and data
    aren't covered by calls to count_node_pages.  So linked kernel regions
    wasn't reported to add_active_regions.  This resulted in free_initmem
    causing numerous bad_page reports.  This won't occur with this patch
    because now all known memory regions are reported by
    register_active_ranges.
    
    Acked-by: Mel Gorman <mel@csn.ul.ie>
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Acked-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d1598e05faa11d9f04e0a226122dd57674fb1dab
Author: Jan Beulich <jbeulich@novell.com>
Date:   Wed Jan 3 09:26:21 2007 +0000

    [IA64] Enable SWIOTLB only when needed
    
    Don't force CONFIG_SWIOTLB on when not actually needed (i.e. HP_ZX1 and
    SGI_SN2).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 980dbfd421c8d33edbd2fbc8f5a6233ccbefb052
Author: Russ Anderson <rja@sgi.com>
Date:   Mon Jan 8 16:05:08 2007 -0600

    [IA64-SGI] Check for TIO errors on shub2 Altix
    
    The shub2 error interrupt handler must check for TIO errors.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f43691ef8a816018a0294c5a9fa9d22512886c49
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Mon Jan 15 09:33:55 2007 -0700

    [IA64] remove bogus prototype ia64_esi_init()
    
    This function doesn't exist.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 451fe00cf7fd48ba55acd1c8b891e7a65e1b3f81
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Wed Jan 24 22:48:04 2007 -0700

    [IA64] Clear IRQ affinity when unregistered
    
    When we offline a CPU, migrate_irqs() tries to determine whether the
    affinity bits of the IRQ descriptor match any of the remaining online
    CPUs.  If not, it fixes up the interrupt to point somewhere else.
    Unfortunately, if an IRQ is unregistered the IRQ descriptor may still
    have affinity to the CPU being offlined, but the no_irq_chip handler
    doesn't provide a set_affinity function.  This causes us to hit the
    WARN_ON in migrate_irqs().
    
    The easiest solution seems to be setting all the bits in the affinity
    mask when the last interrupt is removed from the vector.  I hit this on
    an older kernel with Xen/ia64 using driver domains (so it probably needs
    more testing on upstream).  Xen essentially uses the bind/unbind
    interface in sysfs to unregister a device from a driver and thus
    unregister the interrupt.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 06f87adff12e52429390b22c57443665b073cd82
Author: Len Brown <lenb@kernel.org>
Date:   Fri Jan 26 00:38:53 2007 -0500

    [IA64] fix ACPI Kconfig issues
    
    All IA64 systems except IA64_HP_SIM include ACPI and PCI.
    So prevent IA64 Kconfigs that try to do irritating things like building
    PCI without building ACPI.
    
    Signed-off-by: Len Brown <len.brown@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c2c77fe8df3e0322a613ba1540910632ad14d96d
Author: Bernhard Walle <bwalle@suse.de>
Date:   Sun Jan 28 13:47:02 2007 +0100

    [IA64] Fix NULL-pointer dereference in ia64_machine_kexec()
    
    This patch fixes a NULL-pointer dereference in ia64_machine_kexec().
    
    The variable ia64_kimage is set in machine_kexec_prepare() which is
    called from sys_kexec_load(). If kdump wasn't configured before,
    ia64_kimage is NULL.  machine_kdump_on_init() passes ia64_kimage() to
    machine_kexec() which assumes a valid value.
    
    The patch also adds a few sanity checks for the image to simplify
    debugging of similar problems in future.
    
    Signed-off-by: Bernhard Walle <bwalle@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 87f76d3aafe5b5e0a1d6d857088a0263b35afa6b
Author: bibo,mao <bibo.mao@intel.com>
Date:   Tue Jan 30 11:02:19 2007 +0800

    [IA64] find thread for user rbs address
    
    I encountered one problem when running ptrace test case the situation
    is this: traced process's syscall parameter needs to be accessed, but
    for sys_clone system call with clone_flag (CLONE_VFORK | CLONE_VM |
    SIGCHLD) parameter.  This syscall's parameter accessing result is wrong.
    
    The reason is that vforked child process mm point is the same, but
    tgid is different. Without this patch find_thread_for_addr will return
    vforked process if vforked process is also stopped, but not the thread
    which calls vfork syscall.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f5cd7872768d5856b1b409a33f516e5ac7798f75
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Jan 31 21:43:54 2007 -0600

    PA Semi PWRficient Ethernet driver
    
    Driver for the PA Semi PWRficient on-chip Ethernet (1/10G)
    
    Basic enablement, will be complemented with performance enhancements
    over time. PHY support will be added as well.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1ee6dd770b2302e32fdae489f4fc58c374399da4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jan 31 14:09:29 2007 -0500

    s2io: De-typedef driver.
    
    Removed namespace collisions due to usage of nic_t as per Ralf's patch
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a113ae066de6fc7ed33a6f420ea7dd2716a1920a
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Wed Jan 31 14:05:51 2007 -0500

    s2io: Removed enabling of some of the unused interrupts.
    
    Removed unused code in en_dis_able_nic_intrs(), TX_DMA_INTR, RX_DMA_INTR,
    TX_XGXS_INTR, MC_INTR
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 372cc5972de0eb5b15403d37fa63dcb4f9134ee0
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Wed Jan 31 13:32:57 2007 -0500

    s2io: Fixes in updating skb->truesize and code cleanup.
    
    1. Fix for updating skb->truesize properly.
    2. Disable NAPI only if more than one ring configured in case of MSI/MSI-X
       interrupts. Previously we were disabling NAPI irrespective of number of
       rings when MSI/MSI-X interrupts were used.
    3. Code cleanup.
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 19a605220cf83a5ec5f8d9f9943e862ebf18f93f
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Wed Jan 31 13:30:49 2007 -0500

    S2IO: Fixes for reset and link handling.
    
    1. Fix for reset and link handling.
    2. Allow for promiscuos mode and multicast state be maintained through
       ifconfig up and down.
    3. Support to print adapter serial number.
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit db874e65ae93861461f83658fdec08368252cd2e
Author: Sivakumar Subramani <Sivakumar.Subramani@neterion.com>
Date:   Wed Jan 31 13:28:08 2007 -0500

    s2io: Making LRO and UFO as module loadable parameter.
    
    This patch adds two load parameters napi and ufo. Previously NAPI was
    compilation option with these changes wan enable disable NAPI using load
    parameter. Also we are introducing ufo load parameter to enable/disable
    ufo feature
    
    Signed-off-by: Sivakumar Subramani <sivakumar.subramani@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7517c1b78759921daa679f1efba5d5dc0c81930e
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Tue Jan 30 16:10:24 2007 +0100

    PC300too alternative WAN driver
    
    The attached patch adds an alternative driver "pc300too" for PCI WAN
    cards PC300/RSV and PC300/X21 made by Cyclades Corp. (now Avocent Corp).
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1d68e93d65d63814388d1a0b3de028de6dc27ae0
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:44:35 2007 -0800

    cxgb3 - Add dual licensing
    
    Dual licensing, needed for OFED 1.2
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a13fbee086310cb99a73958943d4d8103bf52f3a
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:44:29 2007 -0800

    cxgb3 - Add <linux/mutex.h>
    
    Include <linux/mutex.h> in adapter.h
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f2aa52086fef57506980df68b92e6bd6faef3c85
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:44:18 2007 -0800

    cxgb3 - Remove BUG_ON from t3b_intr_napi
    
    In some cases, SG_DATA_INTR won't clear on read and the following
    interrupt may cause us to assert because NAPI is already scheduled.
    Remove the assertion, NAPI can handle attempts to rearm it while
    it's already scheduled.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f2c6879e062071d94d208fb22800410bf8bab294
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:44:13 2007 -0800

    cxgb3 - white space to tabs
    
    Use tabs in comments.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3b1d307b319cce3d013801b267965ac4c31ce58c
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:44:07 2007 -0800

    cxgb3 - Clean up HW init routine
    
    Clean up the tp_config() routine.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b5a44bcbf53f1af1f24e7fe0e5008eca85659220
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:44:01 2007 -0800

    cxgb3 - bogus status error string
    
    Remove a status error string from the pci-x context
    and add it where it belongs - the pci-e context.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6195c71d652d337521ec8431c0923a85d6aaaf71
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:43:56 2007 -0800

    cxgb3 - remove SW Tx credits coalescing
    
    Remove tx credit coalescing done in SW.
    The HW is caring care of it already.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 14ab989245069907622ab9fd930275c086cee069
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:43:50 2007 -0800

    cxgb3 - bind qsets on multiport adapter
    
    Inform FW about the queue set->interface mapping.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4aac38990843b4f165ccf467b772e18827bff84c
Author: Divy Le Ray <divy@chelsio.com>
Date:   Tue Jan 30 19:43:45 2007 -0800

    cxgb3 - FW versioning
    
    Clean up FW version checking.
    The supported FW version is now 3.1.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b9662d0e9ca3092e1473f27628fd60fa33b1a97a
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jan 30 00:33:04 2007 -0800

    git-netdev-all: chelsio fix
    
    Cc: "Sunil Naidu" <akula2.shark@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 01243ecb794fc008155f257cc25b98e2b8e855e5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jan 27 00:00:03 2007 -0800

    remove one remaining "#define BCM_TSO 1"
    
    Since it's no longer used, this "#define BCM_TSO 1" can now be removed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 04b588d727cf49321458731727737cf330f04cd2
Author: Ahmed S. Darwish <darwish.07@gmail.com>
Date:   Sat Jan 27 00:00:02 2007 -0800

    UCC Ether driver: kmalloc casting cleanups
    
    A kmalloc casting cleanup patch.
    
    Signed-off-by: Ahmed Darwish <darwish.07@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7f60c64bd0e7262b51faefcce5d8df9d51d84b60
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Jan 26 11:38:36 2007 -0800

    sky2: handle network device allocation failure
    
    If alloc_etherdev() failed, then sky2_init_netdev will return NULL,
    and sky2_probe would end up returning 0 instead of -ENOMEM.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2bf56fe25cef2a7652f7b2ab37ac14a336c76c75
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Jan 26 11:38:39 2007 -0800

    sky2: software rx/tx stats
    
    Maintain packet statistics in software rather than hardware.
    This is slightly slower, but allows easier debugging of problems
    where packets are still being received by PHY but not being handled
    by hardware.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 285e6ddd013bafa6278a0e4b76a25a075be74e14
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Fri Jan 26 11:38:40 2007 -0800

    sky2: version 1.11.1
    
    Version update to 1.11.1.
    
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e77c2baf75a2ba3d8e7ad8677b193db2d03acace
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Jan 26 22:59:01 2007 +0900

    PEGASUS: Fix typo in Corega products.
    
    s/FEter/FEther/.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b29cf31d7ee7da285265577b0df5e62c6b5a6119
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Jan 26 22:57:38 2007 +0900

    ASIX: Add IO-DATA ETG-US2 Support.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 21828163b2b31e0675cb3e66a2a4a231dec06236
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 23 12:27:21 2007 -0500

    forcedeth: statistics optimization
    
    This patch optimizes the data paths that can support hw counters. It
    removes the sw counted statistics.
    
    This is the last patch for the optimization set. Bumping up version of
    driver.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 57fff6986b6daae13947c565786757c05303f0f6
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 23 12:27:00 2007 -0500

    forcedeth: statistics supported
    
    This patch introduces hw statistics for older devices that supported it.
    It breaks up the counters supported into separate versions.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4e16ed1b0e17a3832310031e2ddaeb0914eb837d
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 23 12:00:56 2007 -0500

    forcedeth: tx max work
    
    This patch adds a limit to how much tx work can be done in each
    iteration of tx processing. If the max limit is reached, remaining tx
    completions will be handled by timer interrupt.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f0734ab658390380079369f7090dcf7aa226f394
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sun Jan 21 18:10:57 2007 -0500

    forcedeth: irq data path optimization
    
    This patch optimizes the irq data paths and cleans up the code.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b01867cbd1853995946c8c838eff93a0885d8bc6
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sun Jan 21 18:10:52 2007 -0500

    forcedeth: rx data path optimization
    
    This patch optimizes the rx data paths and cleans up the code.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 445583b89d71b48cf8c64e26acc5a710248feed7
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sun Jan 21 18:10:47 2007 -0500

    forcedeth: tx data path optimization
    
    This patch optimizes the tx data paths and cleans up the code (removes
    vlan from descr1/2 since only valid for desc3, changes to make code
    easier to read, etc).
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit aaa37d2d099f97ced415546e285ac901e47a2437
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sun Jan 21 18:10:42 2007 -0500

    forcedeth: tx limiting
    
    This patch optimizes the logic for tx limiting. It adds a flag to check
    on the completion side instead of recalculating the number of empty
    slots. Also, it removes the fields that were previous used for limiting
    since they have no value.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 86b22b0dfbf462e6ed75e54fc83575dae01e3c69
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sun Jan 21 18:10:37 2007 -0500

    forcedeth: optimized routines
    
    This patch breaks up the routines into two versions, one for legacy
    descriptor versions (ver 1 and ver 2) and one for desc ver 3. This will
    make the new desc functions more leaner and further reductions will be
    made in next few patches.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 658f648ad1c2876e0ce5401e087d2d21d0262441
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Jan 19 18:15:56 2007 -0800

    bonding: update version
    
    	Update version number to reflect recent changes.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 877cbd36b27e073eb78fe7073a433fbe0da7d5f8
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Jan 19 18:15:47 2007 -0800

    bonding: modify sysfs support to permit multiple loads
    
    	The existing code would blindly attempt to create the
    bonding_masters file (in /sys/class/net) every time the module was
    loaded.  When the module is loaded multiple times (which is the
    historical method used by initscripts and sysconfig to create multiple
    bonding interfaces), this caused load failure of the second module load
    attempt, as the creation request would fail.
    
    	This changes the code to note the failure, arrange to not remove
    the bonding_masters file upon module exit, and then return success.
    
    	Bonding interfaces created by the second or subsequent loads of
    the module will not exist in bonding_masters.  This is not a significant
    change, as previously only the interfaces from the most recent load of
    the module would be listed.  Both situations are less than optimal, but
    this case permits compatibility with existing distro configuration
    scripts, and is consistent.
    
    	Note that previously, the sysfs create request would overwrite
    the exsting bonding_masters file and succeed, allowing multiple loads of
    the module.  The sysfs code has recently changed to return an error if
    the file being created already exists.
    
    	Patrick McHardy <kaber@trash.net>, who reported this problem,
    observed crashes on the old kernel (before sysfs checked for
    duplicates).  I did not experience such crashes, but this change should
    resolve them.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 09c892797688312dc8a3c4d8b37dcb7207c1d48a
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Jan 19 18:15:38 2007 -0800

    bonding: fix error check in sysfs creation
    
    	The existing code did not correctly handle failures to create
    the per-interface sysfs group for bonding.
    
    	Modified code to notice errors, and correctly unwind.
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e4b91c484611da385e34ff0f8bb2744ae2c735b7
Author: Jay Vosburgh <fubar@us.ibm.com>
Date:   Fri Jan 19 18:15:31 2007 -0800

    bonding: fix device name allocation error
    
    	The code to select names for the bonding interfaces was, for the
    non-sysfs creation case, always using a hard-coded set of bond0, bond1,
    etc, up to max_bonds.  This caused conflicts for the second or
    subsequent loads of the module.
    
    	Changed the code to obtain device names from dev_alloc_name().
    
    Signed-off-by: Jay Vosburgh <fubar@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bc63eb9c7ec0eb7b091db2d82d46d1e68ff9e231
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Tue Dec 19 13:09:08 2006 -0800

    net: use bitrev8
    
    Use bitrev8 for bmac, mace, macmace, macsonic, and skfp drivers.
    
    [akpm@osdl.org: use the API, not the array]
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Mirko Lindner <mlindner@syskonnect.de>
    Cc: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 079ca7da1e6d05c7cb82e9c4f2e1d98839332664
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Dec 12 17:24:39 2006 +0100

    bonding.h: "extern inline" -> "static inline"
    
    "extern inline" generates a warning with -Wmissing-prototypes and I'm
    currently working on getting the kernel cleaned up for adding this to
    the CFLAGS since it will help us to avoid a nasty class of runtime
    errors.
    
    If there are places that really need a forced inline, __always_inline
    would be the correct solution.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bd36b0ac5d06378c95b5149b6df5f413a6c985a5
Author: Ron Mercer <ron.mercer@qlogic.com>
Date:   Wed Jan 3 16:26:08 2007 -0800

    qla3xxx: Add support for Qlogic 4032 chip.
    
    Qlogic 4032 chip is an incremental change from the 4022.
    Signed-off-by: Ron Mercer <ron.mercer@qlogic.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 83d98b401c053d760e38571595d8f4fa76ee271b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jan 4 19:53:30 2007 +0100

    remove the broken OAKNET driver
    
    The OAKNET driver:
    - has been marked as BROKEN for more than two years and
    - is still marked as BROKEN.
    
    Drivers that had been marked as BROKEN for such a long time seem to be
    unlikely to be revived in the forseeable future.
    
    But if anyone wants to ever revive this driver, the code is still
    present in the older kernel releases.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 24a427cf76984726641ea0d8163e61e99119069d
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jan 8 11:26:12 2007 -0800

    chelsio: more rx speedup
    
    Cleanup receive processing some more:
       * do the reserve padding of skb during setup
       * don't pass constants to get_packet
       * do smart prefetch of skb
       * make copybreak a module parameter
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3de00b8958b12d62712ae9500968c65d3b43bb27
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jan 8 11:26:30 2007 -0800

    chelsio: NAPI speed improvement
    
    Speedup and cleanup the receive processing by eliminating the
    mmio read and a lock round trip.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4d22de3e6cc4a09c369b504cd8bcde3385a974cd
Author: Divy Le Ray <divy@chelsio.com>
Date:   Thu Jan 18 22:04:14 2007 -0500

    Add support for the latest 1G/10G Chelsio adapter, T3.
    
    This driver is required by the Chelsio T3 RDMA driver posted by
    Steve Wise.
    
    Signed-off-by: Divy Le Ray <divy@chelsio.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0bf94faf64afaba6e7b49fd11541b59d2ba06d0e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jan 11 14:48:59 2007 +0100

    make hdlc_setup() static again
    
    hdlc_setup was exported, but this export was never used.
    
    If a driver using it actually shows up it can still be exported again.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0d63fb32b2b8c3464d9c1afc3ce3fd3ceec025b6
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 9 13:30:13 2007 -0500

    forcedeth: rx skb recycle
    
    This patch removes the code that recycled the skb on error. This will
    help in reducing the branches in the main data paths.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 164a86e40e6c74ec5a91c364ccf7b1a2295b0a52
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 9 13:30:10 2007 -0500

    forcedeth: tx locking
    
    This patch reduces the amount of code within the lock to only the
    critical sections.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 761fcd9e3e0aa2a02231d1631f31409be5e890d2
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 9 13:30:07 2007 -0500

    forcedeth: ring access
    
    This patch modifys ring access by using pointers. This avoids computing
    the current index and avoids accessing the base address of the rings.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2f7841277d8613a780ab28d04d8f31a31816153
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Tue Jan 9 13:30:02 2007 -0500

    forcedeth: dma access
    
    This patch allows the hardware to fetch the tx and rx ring descriptors
    with 64 bytes per access instead of 32 bytes.
    
    Signed-off-by: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 95f48a71a254fa81ae4be1307ce3bb8361521a7d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Dec 19 13:08:48 2006 -0800

    remove the broken SKMC driver
    
    The SKMC driver has:
    - already been marked as BROKEN in 2.6.0 three years ago and
    - is still marked as BROKEN.
    
    Drivers that had been marked as BROKEN for such a long time seem to be
    unlikely to be revived in the forseeable future.
    
    But if anyone wants to ever revive this driver, the code is still
    present in the older kernel releases.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bf345707299b34de90fbae062eff51e76561eb40
Author: Cesar Eduardo Barros <cesarb@cesarb.net>
Date:   Tue Dec 19 13:08:47 2006 -0800

    driver for Silan SC92031 netdev
    
    This is a driver for the Silan SC92031/Rsltek 8139D NIC chip.
    
    This chip is found on at least one counterfeit Encore ENL832-TX-RENT NIC
    [1], which came with a mini-CD with the 2.4 driver.  A slightly older
    version of the driver was found at [2].  The main difference between them
    is that the newer one has a small bugfix in the RX path, a lot of
    gratuitous renaming of functions, all the printable strings changed to show
    as a "Rsltek 8139D" [sic], and a PCI ID of 8139 instead of 2031.  The
    driver on this patch is a rewrite of the vendor drivers (based mostly on
    the older one).
    
    Changes from the previous patch sent to netdev:
    - Use MMIO instead of PIO
    - Changed TX bounce buffers allocation
    - Use skb_copy_and_csum_dev
    - Several small bug fixes
    - Tested for more than just a few minutes each time
    
    [1] See http://www.encore-usa.com/faq.php under ENL832-TX-RENT for more
        information
    [2] Look for SL_LINUX.ZIP (which is really a .tar.gz) at
        http://broadbandforum.in/dataone_Intex_LAN_cardlinux-t4207-s15.html
    [3] To compile on 2.6.17, simply add back the last argument to the
        interrupt handler in two places, and copy the boolean declarations
        from 2.6.19
    
    [akpm@osdl.org: build fixes]
    Signed-off-by: Cesar Eduardo Barros <cesarb@cesarb.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ae306cca3ada3c84f3e30e1091a98d99ee1d0557
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Dec 20 13:06:36 2006 -0800

    sky2: better power state management
    
    Improve power management and error handling by using pci_set_power_state(),
    instead of driver doing PCI PM register changes in the driver.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1d39ed565cfcc7c4fe586de621aef495c4f94ffb
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Tue Dec 12 14:06:23 2006 +0100

    remove NETIF_F_TSO ifdefery
    
    Remove the NETIF_F_TSO #ifdef-ery in drivers/net; this was
    for old-old-2.4 compat (even current 2.4 has NETIF_F_TSO)
    but it's time to get rid of it by now.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6d24998f07588ca83ce04e60af5a79e805df7532
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:23:56 2006 -0600

    Spidernet RX Debugging printout
    
    Add some debugging and error printing.
    
    The show_rx_chain() prints out the status of the rx chain,
    which shows that the status of the descriptors gets
    messed up after the second & subsequent RX ramfulls.
    
    Print out contents of bad packets if error occurs.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit df519ab2c5a774e813459fcb3e3d080276baa7d8
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:23:01 2006 -0600

    Spidernet Avoid possible RX chain corruption
    
    Delete possible source of chain corruption; the hardware
    already knows the location of the tail, and writing it
    again is likely to mess it up.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 90476a20fa4742c827b437d9814a51d06c153884
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:22:04 2006 -0600

    Spidernet Memory barrier
    
    Add memory barrier to make sure that the rest of the
    RX descriptor state is flushed to memory before we tell
    the hardware that its ready to go.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2c307db7e40ff537d39c2e66629ba718ee2a8e51
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:20:59 2006 -0600

    Spidernet RX Chain tail
    
    Tell the hardware the location of the rx ring tail.
    More punctuation cleanup.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a4182c50bcd6a20caae82c202436fe892f642150
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:19:54 2006 -0600

    Spidernet Remove unused variable
    
    Remove unused variable; this makes code easier to read.
    Tweak commentary.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 80dab7c7e5b7c4e53e9423c22375bfd9cbf7f2c3
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:18:52 2006 -0600

    Spidernet RX Refill
    
    The invocation of the rx ring refill routine is haphazard,
    it can be called from a central location.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7f7223b8f11f9857fba1dbd5474882219a7ae6e9
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:17:39 2006 -0600

    Spidernet Cleanup return codes
    
    Simplify the somewhat convoluted use of return codes
    in the rx buffer handling.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 366684bd0d6bc5b224fc798675b9a85eb9279227
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:16:18 2006 -0600

    Spidernet another skb mem leak
    
    Another skb leak in an error branch. Fix this by adding
    call to dev_kfree_skb_irq() after moving to a more
    appropriate spot.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 05b346b552e13cc090ea908e2be183b377ff30a2
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:15:15 2006 -0600

    Spidernet RX skb mem leak
    
    One of the unlikely error branches has an skb memory leak.
    Fix this by handling the error conditions consistently.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1cd173f66c392ede57fa10f614fca22d79501424
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:12:26 2006 -0600

    Spidernet cleanup un-needed API
    
    There is no need to pass a flag into spider_net_decode_one_descr()
    so remove this, and perform some othre minor cleanup.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 75856175c26f89198ec64eb2480ed00c4a39a5d6
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:10:06 2006 -0600

    Spidernet remove rxramfull tasklet
    
    Get rid of the rxramfull tasklet, and let the NAPI poll routine
    deal with this situation. (The rxramfull interrupt is simply
    stating that the h/w has run out of room for incoming packets).
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5a028877d2a350ebba3cda924cbf7f3bd2eb2135
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:08:25 2006 -0600

    Spidernet add net_ratelimit to suppress long output
    
    This patch adds net_ratelimit to many of the printks in order to
    limit extraneous warning messages (created in response to Bug 28554).
    This patch supercedes all previous ratelimit patches.
    This has been tested, please apply.
    
    From: James K Lewis <jklewis@us.ibm.com>
    Signed-off-by: James K Lewis <jklewis@us.ibm.com>
    Signed-off-by: Linas Vepstas <jlinas@austin.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d4ed8f8d1fb7d59eb63d2eada9a32c2f8c3795e2
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Wed Dec 13 15:06:59 2006 -0600

    Spidernet DMA coalescing
    
    The current driver code performs 512 DMA mappings of a bunch of
    32-byte ring descriptor structures. This is silly, as they are
    all in contiguous memory. This patch changes the code to
    dma_map_coherent() each rx/tx ring as a whole.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: James K Lewis <jklewis@us.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 834324687d08e0f67b167934cb56406aa98ff8c6
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Tue Dec 12 00:13:48 2006 +0100

    chelsio: tabulate the update of the statistic counters
    
    Let's try to avoid some code duplication.
    
    - cxgb2
      The data are contiguous. Use plain memcpy.
    
    - ixf1010/pm3393/vsc7326
      The cast of &mac->stats to (u64 *) is not wonderful but it is not clear
      if it is worth to add an ad-hoc union under the struct cmac_statistics.
    
    vsc7326_reg.h suggests that more statistics could be available.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 3e0f75be52605a901165fa1d8acf4ffd37a4857b
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Tue Dec 5 23:57:41 2006 +0100

    chelsio: misc cleanups in sge
    
    - duplicated code in sge::free_cmdQ_buffers ;
    - NET_IP_ALIGN is already defined in (included) <linux/skbuff.h> ;
    - pci_alloc_consistent() returns void * ;
    - pci_alloc_consistent() returns a zeroed chunk of memory ;
    - early return in restart_tx_queues.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 47cbe6f47d854410d5c296098d87cf8151517c20
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Tue Dec 5 23:19:06 2006 +0100

    chelsio: useless test in cxgb2::remove_one
    
    pci_get_drvadata() is necessarily distinct from NULL if
    cxgb2::init_one succeeded. cxgb2::remove_one is solely
    issued through the PCI device callback.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit d7487421b629c5ca71ce23b10461ef0c3ad2c741
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Mon Dec 11 23:49:13 2006 +0100

    chelsio: useless curly braces
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 356bd1460d1e1c4e433e4114fdac02139bddf17c
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Mon Dec 11 23:47:00 2006 +0100

    chelsio: spaces, tabs and friends
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit b7d58394e65c7d90486026614a6ae26d82dd7756
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Mon Dec 11 23:41:36 2006 +0100

    chelsio: the return statement is not a function
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit c697f83e8c880a1e69fb2a45a6e4aa0670e10602
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Tue Dec 5 22:38:00 2006 +0100

    chelsio: move return, break and continue statements on their own line
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit ea8862dc86c0f5a0be012a0f2e9de1b2ccabbaa5
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Jan 11 17:32:54 2007 +0800

    [PATCH] ipw2200: add iwconfig rts/frag auto support
    
    This patch add ipw2200 support for iwconfig rts/frag auto.
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 2e9b2467de69733c9ac455e261aef302d288fb17
Author: Daniel Drake <dsd@gentoo.org>
Date:   Thu Jan 4 03:33:54 2007 +0000

    [PATCH] zd1211rw: Add ID for ZyXEL ZyAIR G-220 v2
    
    Tested by Marijn Schouten
    zd1211b chip 0586:340f v4810 high 00-13-49 AL2230_RF pa0 g---
    FCC ID: I88G220V2
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6bbdce5ac755e3b3cdcf9bb9fdbcc2af78ad34d0
Author: John W. Linville <linville@tuxdriver.com>
Date:   Tue Jan 2 21:22:05 2007 -0500

    [PATCH] softmac: avoid assert in ieee80211softmac_wx_get_rate
    
    Unconfigured bcm43xx device can hit an assert() during wx_get_rate
    queries.  This is because bcm43xx calls ieee80211softmac_start late
    (i.e. during open instead of probe).
    
       bcm43xx_net_open ->
          bcm43xx_init_board ->
             bcm43xx_select_wireless_core ->
                ieee80211softmac_start
    
    Fix is to check that device is running before completing
    ieee80211softmac_wx_get_rate.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ff86a543e9de35c5b17a289a58aed0be4e7b9d22
Author: Kai Engert <kengert@redhat.com>
Date:   Tue Dec 12 21:09:41 2006 +0100

    [PATCH] prism54: add ethtool -i interface
    
    Add support for "ethtool -i" to prism54 driver.
    
    ethtool -i queries the specified device for
    associated driver information.
    
    This helps tools like Fedora's system-config-network to
    provide GUI management of network devices.
    I learned how to write this patch by reading the ipw2100
    driver code.
    
    Signed-off-by: Kai Engert <kengert@redhat.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 01917382865bb640fc00df7ea476a14c8c539ec3
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sat Dec 30 23:30:32 2006 -0600

    [PATCH] bcm43xx: Interrogate hardware-enable switch and update LEDs
    
    The current bcm43xx driver ignores any wireless-enable switches on mini-PCI
    and mini-PCI-E cards. This patch implements a new routine to interrogate the
    radio hardware enabled bit in the interface, logs the initial state and any
    changes in the switch (if debugging enabled), activates the LED to show the
    state, and changes the periodic work handler to provide 1 second response
    to switch changes and to account for changes in the periodic work specs.
    
    Signed-off-by: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 33218ba1d114c2d8ce275b74ad47d0718af99a5a
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sat Dec 30 22:38:23 2006 +0000

    [PATCH] zd1211rw: Add ID for Linksys WUSBF54G
    
    Tested by Henrik Hjelte
    zd1211b chip 13b1:0024 v4802 high 00-14-bf AL2230_RF pa0 ----
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit c10ca77368a87079ff0303d8b7506f0e8a2be6d1
Author: Michael Buesch <mb@bu3sch.de>
Date:   Fri Dec 15 21:32:44 2006 +0100

    [PATCH] Update Prism54 MAINTAINERS entry
    
    prism54-private@prism54.org bounces with
    
        SMTP error from remote mailer after RCPT TO:<prism54-private@prism54.org>:
        host mx1.tuxfamily.net [212.85.158.8]: 550 unknown user
    
    developers@islsm.org seems to be the new mailing list.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 0ce34bc8f7d906d66ce6803f63399ef9bbe54012
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Dec 12 01:26:11 2006 +0000

    [PATCH] zd1211rw: Remove addressing abstraction
    
    Instead of passing our own custom 32-bit addresses around and
    translating them, this patch makes all our register address constants
    absolute and removes the translation.
    
    There are two ugly parts:
     - fw_reg_addr() is needed to compute addresses of firmware registers, as this
       is dynamic based upon firmware
     - inc_addr() needs a small hack to handle byte vs word addressing
    
    However, both of those are only small, and we don't use fw_regs a whole
    lot anyway.
    
    The bonuses here include simplicity and improved driver readability. Also, the
    fact that registers are now referenced by 16-bit absolute addresses (as
    opposed to 32-bit pseudo addresses) means that over 2kb compiled code size has
    been shaved off.
    
    Includes some touchups and sparse fixes from Ulrich Kunitz.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ee30276774451d657407855d95d9393ee8bc0bac
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Dec 12 01:25:52 2006 +0000

    [PATCH] zd1211rw: Consistency for address space constants
    
    The zd1211rw address space has confused me once too many times. This
    patch introduces the following naming notation:
    
    Memory space is split into segments (cr, fw, eeprom) and segments may
    contain components (e.g. boot code inside eeprom). These names are
    arbitrary and only for the description below:
    
    x_START: Absolute address of segment start
    (previously these were named such as CR_BASE_OFFSET, but they weren't
    really offsets unless you were considering them as an offset to 0)
    
    x_LEN: Segment length
    
    x_y_LEN: Length of component y of segment x
    
    x_y_OFFSET: Relative address of component y into segment x. The absolute
    address for this component is (x_START + x_y_OFFSET)
    
    I also renamed EEPROM registers to EEPROM data. These 'registers' can't
    be written to using standard I/O and really represent predefined data
    from the vendor.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a2bdcc679288307f9237c9611a0cc0c3c06669a9
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Dec 12 01:25:37 2006 +0000

    [PATCH] zd1211rw: 2 new ZD1211B device ID's
    
    Philips SNU5600, tested by unibrow
    zd1211b chip 0471:1236 v4810 high 00-12-bf AL2230_RF pa0 g--
    
    SMC Ez Connect 802.11g (SMCWUSB-G), tested by Victorino Sanz Prat
    zd1211b chip 083a:4505 v4810 full 00-13-f7 AL2230_RF pa0 g--N
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 34c4491264ceafa5c81f74a5f24f49e8e24f12f2
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Dec 12 01:25:13 2006 +0000

    [PATCH] zd1211rw: Generic HMAC initialization
    
    Many of the registers written during ZD1211 HMAC initialization are
    duplicated exactly for ZD1211B. Move the identical ones into a generic
    part, and write the hardware-specific ones separately.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 7e721579479350b15b2bf1e232cd372c704aff7b
Author: Auke Kok <auke\\-jan.h.kok@intel.com>
Date:   Thu Jan 18 09:25:33 2007 -0800

    e1000: update version to 7.3.20-k2
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 7753b171c4e7604294060d4039214c8c8319bfca
Author: Jesse Brandeburg <jesse.brandeburg@intel.com>
Date:   Thu Jan 18 09:25:31 2007 -0800

    e1000: tune our dynamic itr transmit packet accounting
    
    The driver was still mis-calculating the number of bytes sent during
    transmit, now the driver computes what appears to be exactly 100%
    correct byte counts (not including CRC) when figuring out how many
    bytes and frames were sent during the current transmit packet.

commit f6c57bafcdebed4429cdda206149ddcbb1d46e91
Author: Bruce Allan <bruce.w.allan@intel.com>
Date:   Thu Jan 18 09:25:28 2007 -0800

    e1000: clear ip csum info from context descriptor
    
    Since the driver sets the IP checksum insertion bit (IXSM in Status
    field) in transmit context descriptors, it should clear the IP checksum
    bits of any garbage so as not to confuse the hardware.
    
    Signed-off-by: Bruce Allan <bruce.w.allan@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 9669f53b98974ede4728e288316296666722ab8c
Author: Auke Kok <auke\\-jan.h.kok@intel.com>
Date:   Thu Jan 18 09:25:26 2007 -0800

    e1000: display flow control of link status at link up
    
    Print RX/TX flow control setting at link up time to display the
    actual link FC properties instead of the advertised values.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 60cba200f11b6f90f35634c5cd608773ae3721b7
Author: Jesse Brandeburg <jesse.brandeburg@intel.com>
Date:   Thu Jan 18 09:25:23 2007 -0800

    e1000: fix NAPI performance on 4-port adapters
    
    This fix attempts to solve a customer (IBM) reported issue with NAPI
    enabled e1000 having bad performance when transmitting simultaneously
    on four ports.  The issue comes down to an interaction between NAPI,
    hardware interrupt balancing, and the driver rescheduling poll on
    the same processor.  Try to fix by allowing the driver to re-enable
    interrupts sooner instead of polling one more time, when there was
    recently all the work completed in cleanup.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit b5fc8f0c43d388d76ebbb5650b20f4ce4420a5ad
Author: Jesse Brandeburg <jesse.brandeburg@intel.com>
Date:   Thu Jan 18 09:25:21 2007 -0800

    e1000: Fix MSI only interrupt handler routine
    
    Unfortunately the read-free MSI interrupt handler needs to flush write
    the icr register and thus we can't be read-free. Our MSI irq routine
    thus becomes a lot more simpler since we don't need to track link state
    anymore.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit bf3cea4d8a1a8deb21d247a0622f1aa54270e0f9
Author: Auke Kok <auke\\-jan.h.kok@intel.com>
Date:   Thu Jan 18 09:25:18 2007 -0800

    e1000: clean up debug output defines
    
    Remove unused MSGOUT macro and add "\n" to function debug output.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 9990fa3cbd35046cce1eb4667bb2e33057c5ca1a
Author: Jesse Brandeburg <jesse.brandeburg@intel.com>
Date:   Thu Jan 18 09:25:15 2007 -0800

    e1000: simplify case handling gigabit at half duplex
    
    Remvoe duplicate code handling erraneous user supplied wrong case
    of gigabit speed with half duplex.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit ae0af3e3462fdada42deba30479aba70c6cf8b72
Author: Aron Griffis <aron@hp.com>
Date:   Mon Feb 5 13:54:31 2007 -0800

    [IA64] use snprintf() on features field of /proc/cpuinfo
    
    Some patches have turned up on xen-devel recently to convert strcpy()
    to safer alternatives and so forth.  While reviewing those patches
    I noticed that the features string building could be cleaned up.
    
    This patch uses snprintf() instead of strcpy() and direct character
    pointer manipulation.  It makes the features string building safe and
    gets rid of the special case for features output in show_cpuinfo()
    
    Additionally I removed the (int) cast of ARRAY_SIZE, which seems to
    serve no purpose.
    
    Signed-off-by: Aron Griffis <aron@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 90f9d70a582c02f50b4dd847166cd5b037219891
Author: bibo,mao <bibo.mao@intel.com>
Date:   Wed Jan 31 17:50:31 2007 +0800

    [IA64] enable singlestep on system call
    
    As is pointed out in
    http://www.gelato.org/community/view_linear.php?id=1_1036&from=authors&value=Ian%20Wienand#1_1039,
    if single step on break instruction, the break fault has higher
    priority than the single-step trap. When the break fault handler
    is entered, it advances the IP by 1 instruction so break instruction
    single-stepping is skipped, actually it is next instruction which
    is single stepped.
    
    This patch modifies this, it adds TIF_SINGLESTEP bit for thread
    flags, and generate a fake sigtrap when single stepping break
    instruction. Test case in attachment can verify this. Any comments
    is welcome.
    
    Signed-off-by: bibo, mao <bibo.mao@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c237508afa5d47282d3047784864013eebdc68ab
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 5 13:49:10 2007 -0800

    [IA64] kexec: Move machine_shutdown from machine_kexec.c to process.c
    
    This moves the ia64 implementation of machine_shutdown() from
    machine_kexec.c to process.c, which is in keeping with the implelmentation
    on other architectures, and seems like a much more appropriate home for it.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4d284cac76d0bfebc42d76b428c4e44d921200a9
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:18:53 2007 +0100

    [S390] Avoid excessive inlining.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 162e006ef59266b9ebf34e3d15ca1f3d9ee956d7
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:18:41 2007 +0100

    [S390] Mark kernel text section read-only.
    
    Set read-only flag in the page table entries for the kernel image text
    section. This will catch all instruction caused corruptions withing the
    text section.
    Instruction replacement via kprobes still works, since it bypasses now
    dynamic address translation.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit ab14de6c37fae22911ba99f4171613e6d758050b
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:18:37 2007 +0100

    [S390] Convert memory detection into C code.
    
    Hopefully this will make it more maintainable and less error prone.
    Code makes use of search_exception_tables(). Since it calls this
    function before the kernel exeception table is sorted, there is an
    early call to sort_main_extable().
    
    This way it's easy to use the already present infrastructure of fixup
    sections. Also this would allows to easily convert the rest of
    head[31|64].S into C code.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 31ee4b2f40994e8b21691f85cdd4052551a789b7
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Feb 5 21:18:31 2007 +0100

    [S390] Calibrate delay and bogomips.
    
    Preset the bogomips number to the cpu capacity value reported by
    store system information in SYSIB 1.2.2. This value is constant
    for a particular machine model and can be used to determine
    relative performance differences between machines.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 31cb4bd31a48f62105d037ad53192b94d4c08f53
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Mon Feb 5 21:18:29 2007 +0100

    [S390] Hypervisor filesystem (s390_hypfs) for z/VM
    
    This is an extension of the already existing hypfs for LPAR (DIAG 204).
    Data returned by DIAG 2fc is exported using the s390_hypfs when Linux
    is running under z/VM. Information about cpus and memory is provided.
    Data is put into different virtual files which can be accessed from user
    space. All values are represented as ASCII strings
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit cced1dd42ebcebc7fa7f02fe487e48aa71752401
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Mon Feb 5 21:18:26 2007 +0100

    [S390] Add crypto support for 3592 tape devices
    
    3592 tape devices are able to write data encrpyted on tape mediums.
    This z/Linux device driver support includes the following functions:
     * ioctl to switch on/off encryption
     * ioctl to query encryption status of drive
     * ioctls to set and query key encrypting keys (kekls)
     * long busy interrupt handling
    
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit fe355b7f1c7400cbb71762a1237461be03f88265
Author: Hongjie Yang <hongjie@us.ibm.com>
Date:   Mon Feb 5 21:18:24 2007 +0100

    [S390] boot from NSS support
    
    Add support to boot from a named saved segment (NSS).
    
    Signed-off-by: Hongjie Yang <hongjie@us.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 1b2782948997cf5a0d1747de13d43ba7dfa7c543
Author: Jan Glauber <jan.glauber@de.ibm.com>
Date:   Mon Feb 5 21:18:22 2007 +0100

    [S390] Support for s390 Pseudo Random Number Generator
    
    Starting with the z9 the CPU Cryptographic Assist Facility comes with
    an integrated Pseudo Random Number Generator. The generator creates
    random numbers by an algorithm similar to the ANSI X9.17 standard.
    The pseudo-random numbers can be accessed via a character device driver
    node called /dev/prandom. Similar to /dev/urandom any amount of bytes
    can be read from the device without blocking.
    
    Signed-off-by: Jan Glauber <jan.glauber@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit d54853ef8cb17296ac7bce9c77430fb7c80532d0
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Feb 5 21:18:19 2007 +0100

    [S390] ETR support.
    
    This patch adds support for clock synchronization to an external time
    reference (ETR). The external time reference sends an oscillator
    signal and a synchronization signal every 2^20 microseconds to keep
    the TOD clocks of all connected servers in sync. For availability
    two ETR units can be connected to a machine. If the clock deviates
    for more than the sync-check tolerance all cpus get a machine check
    that indicates that the clock is out of sync. For the lovely details
    how to get the clock back in sync see the code below.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit c1821c2e9711adc3cd298a16b7237c92a2cee78d
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Mon Feb 5 21:18:17 2007 +0100

    [S390] noexec protection
    
    This provides a noexec protection on s390 hardware. Our hardware does
    not have any bits left in the pte for a hw noexec bit, so this is a
    different approach using shadow page tables and a special addressing
    mode that allows separate address spaces for code and data.
    
    As a special feature of our "secondary-space" addressing mode, separate
    page tables can be specified for the translation of data addresses
    (storage operands) and instruction addresses. The shadow page table is
    used for the instruction addresses and the standard page table for the
    data addresses.
    The shadow page table is linked to the standard page table by a pointer
    in page->lru.next of the struct page corresponding to the page that
    contains the standard page table (since page->private is not really
    private with the pte_lock and the page table pages are not in the LRU
    list).
    Depending on the software bits of a pte, it is either inserted into
    both page tables or just into the standard (data) page table. Pages of
    a vma that does not have the VM_EXEC bit set get mapped only in the
    data address space. Any try to execute code on such a page will cause a
    page translation exception. The standard reaction to this is a SIGSEGV
    with two exceptions: the two system call opcodes 0x0a77 (sys_sigreturn)
    and 0x0aad (sys_rt_sigreturn) are allowed. They are stored by the
    kernel to the signal stack frame. Unfortunately, the signal return
    mechanism cannot be modified to use an SA_RESTORER because the
    exception unwinding code depends on the system call opcode stored
    behind the signal stack frame.
    
    This feature requires that user space is executed in secondary-space
    mode and the kernel in home-space mode, which means that the addressing
    modes need to be switched and that the noexec protection only works
    for user space.
    After switching the addressing modes, we cannot use the mvcp/mvcs
    instructions anymore to copy between kernel and user space. A new
    mvcos instruction has been added to the z9 EC/BC hardware which allows
    to copy between arbitrary address spaces, but on older hardware the
    page tables need to be walked manually.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 86aa9fc2456d8a662f299a70bdb70987209170f0
Author: Jan Glauber <jan.glauber@de.ibm.com>
Date:   Mon Feb 5 21:18:14 2007 +0100

    [S390] move crypto options and some cleanup.
    
    This patch moves the config options for the s390 crypto instructions
    to the standard "Hardware crypto devices" menu. In addition some
    cleanup has been done: use a flag for supported keylengths, add a
    warning about machien limitation, return ENOTSUPP in case the
    hardware has no support, remove superfluous printks and update
    email addresses.
    
    Signed-off-by: Jan Glauber <jan.glauber@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 347d59d7e9739ff2acbaa751b6225ecb335c3f29
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Feb 5 21:17:56 2007 +0100

    [S390] cio: Don't spam debug feature.
    
    Lower priority of "Blacklisted device detected" messages so we don't
    overwrite more useful messages.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 184357a59669e2b1f9bb684c598458717207793b
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Mon Feb 5 21:17:42 2007 +0100

    [S390] Cleanup of CHSC event handling.
    
    Change CHSC event handling to be more easily extensible.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 0f008aa300f1a48144a1b988a85db9d330f884b7
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Mon Feb 5 21:17:40 2007 +0100

    [S390] cio: declare hardware structures packed.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 9b241cc862d55038c43feee86670cb7d86cf01c1
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:38 2007 +0100

    [S390] Add set_fs(USER_DS) to start_thread().
    
    Currently works anyway since search_binary_handler has a
    set_fs(USER_DS). But start_thread() is the place where this should be
    done. Following all other architectures...
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 758976f9a55cb22ddc602a0690d67f9546e3e43f
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Feb 5 21:17:36 2007 +0100

    [S390] cio: Catch operand exceptions on stsch.
    
    If we have a subchannel id which has been generated via
    for_each_subchannel(), it might contain an invalid subchannel set id.
    We need to catch the ensuing operand exception by using stsch_err()
    instead of stsch() in all possible cases.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit d8c351a97e492dcf24021a0875bf138bfa1374f9
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:34 2007 +0100

    [S390] Fix register usage description.
    
    Fix description of register usage as pointed out by Andreas Krebbel.
    Since this document is completely outdated and would need a lot of
    fixing, it might be worth considering to get rid of it...
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit d42335a33b2ca2406d57bb8f0cf00adbdda8cede
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:32 2007 +0100

    [S390] kretprobe_trampoline_holder() in wrong section.
    
    kretprobe_trampoline_holder() is in kprobes section but used to
    register a kprobe in arch_init_kprobes(). Hence register_kprobe()
    and therefore arch_init_kprobes() will fail.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 35df8d53f5c951ac0cd79f1084e6787ca5980207
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:29 2007 +0100

    [S390] Fix kprobes breakpoint handling.
    
    In case of an illegal op the die notifier gets called with DIE_TRAP
    instead of DIE_BPT first.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit d58140cc18b3d69e86dead47aab5c838c08dc37e
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Feb 5 21:17:27 2007 +0100

    [S390] Update maintainers file.
    
    Use the new linux-s390@vger.kernel.org mailing list instead of
    linux-390@vm.marist.edu.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 336c340b682daa283acf9202a07c4fd5c28e53a5
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Mon Feb 5 21:17:24 2007 +0100

    [S390] dasd: fix unconditional reserve handling.
    
    The reserve/release IOCTLs sometimes do not work. If second system
    does a 'steal lock' the pending unit check (Format 3 Msg F) is
    delivered. Since ERP is disabled for reserve/release, the IOCTL call
    fails. We have to allow basic ERP (retries) for reserve/release IOCTLs.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit db2738197b52f02f4c599c1ae3f66ae1894406cd
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Mon Feb 5 21:17:22 2007 +0100

    [S390] Remove dasd_ccw_log function.
    
    Logging of relevant information is already done by disciplines
    dump_sense function.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit c48e09131bd7c632c80a3245688d2d29dbc4f6b5
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:20 2007 +0100

    [S390] Small barrier() and cpu_relax() cleanup.
    
    cpu_relax() has barrier() semantics hence there is no need to use both
    of them in conjunction in sclp_sync_wait(). Also change cpu_relax()
    so it's more obvious that it has barrier semantics.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 1125b4640fea29aafe9bf24672e2da9672f6592e
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Feb 5 21:17:18 2007 +0100

    [S390] cio: Use device_{create,remove}_bin_file.
    
    Create/remove the channel measurement binary files with
    device_{create,remove}_bin_file instead of sysfs_{create,remove}_bin_file.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit c59d744bd8a0e283daf6726881e4c9aa4bd25261
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:16 2007 +0100

    [S390] sclp: don't call local_bh_disable/_local_bh_enable if in_interrupt()
    
    local_bh_disable/_local_bh_enable must not be called if in_irq() is
    true. Besides that if in_interrupt() is true bottom halves are
    disabled anyway.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 444f0e5489e7ac4bca5c4748d7d846c352a5cd03
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Mon Feb 5 21:17:11 2007 +0100

    [S390] Show loaded DCSS segments under /proc/iomem.
    
    Currently loaded DCSS segments are now listed in /proc/iomem with
    their name followed by a trailing "(DCSS)".
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 18374d376c7eb30b6359759e767cd99397b377d2
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Feb 5 21:17:09 2007 +0100

    [S390] cio: Restart path verification after unsolicited interrupt.
    
    If we try to start path verification when an unsolicited interrupt
    is already pending, stctl shows status pending and we delay path
    verification again. We need to check for the doverify bit when the
    unsolicited interrupt comes in and then do path verification.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b075083f35309c4f3e50886d6f31a3a0e07a29b5
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:17:07 2007 +0100

    [S390] Fix FCP dump feature detection.
    
    FCP dump feature detection works only if the sclp command in head.S
    was succesful. Since the sclp command is skipped if diag260 works,
    we don't have any dump feature detection anymore.
    Bug was introduced with d57de5a36791cb1b7285649c62f183b0d3505f7d.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit e3c699b38ef3c59521fdd1732efcaaa789d81440
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Mon Feb 5 21:17:04 2007 +0100

    [S390] dasd: fix bug in dasd initialization cleanup
    
    The initialization of the dasd_eer code is one of the last steps of the
    dasd driver initialization. When initialization fails in one of the
    earlier steps, the dasd_exit function is called to clean up what has been
    done so far. So the dasd_eer_exit function may be called, although the
    dasd_eer_init function wasn't called before and dasd_eer_exit tries to
    unregister a misc device that wasn't registered, which results in a BUG.
    
    Make sure that dasd_eer_exit can be called without initialization. Use a
    dynamically allocated struct miscdevice instead of a static one, so we
    only try to unregister the device if it exists and was actually registered.
    
    Signed-off-by: Stefan Weinhuber <wein@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit dbd8ae63065189b12c46bdc58799dc353e4b3a53
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Mon Feb 5 21:17:00 2007 +0100

    [S390] sclp: invalid handling of temporary 'not operational' status
    
    Requests are aborted when the sclp interface reports 'not operational'
    even though they may still be active at the sclp, leading to concurrent
    writes to request memory by both the kernel and the sclp interface.
    Do not abort requests for which the sclp interface reports not
    operational status during request retry.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 3b0b4af2c7593af6dfe92afa1033033c4746ec11
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:16:58 2007 +0100

    [S390] Simplify virt_to_phys.
    
    No need to use lrag in 64 bit addressing mode since lra will do the
    same.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 32c5b050927c515cea4083eb8f3a7177dc4279a1
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Feb 5 21:16:56 2007 +0100

    [S390] cio: Remove check for ssd in chpids_show().
    
    Since ssd_info is now available before the subchannel is registered,
    we don't need to check whether it is available.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit bda3563fb28e3a4260ac3566cf11700792a336bb
Author: Christian Borntraeger <cborntra@de.ibm.com>
Date:   Mon Feb 5 21:16:54 2007 +0100

    [S390] cpcmd with vmalloc addresses.
    
    Change the bounce buffer logic of cpcmd. diag8 needs _real_ memory below
    2GB. Therefore vmalloced data does not work. As the data might cross a
    page boundary, we cannot use virt_to_page either. The solution is to use
    virt_to_page only in the check for a bounce buffer.
    
    There was a redundant check for response==NULL. response < 2GB contains
    this check as well.
    
    I also removed the rlen==0 check, since rlen=0 and response!=NULL would
    be a caller bug and response==NULL is already checked.
    
    Signed-off-by: Christian Borntraeger <cborntra@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 60383201c2c155fae2aaffd483d09eb4198b6356
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:16:52 2007 +0100

    [S390] Remove pointless/unreliable kernel messages.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b0f1779a878cf15b07181ef31394ecd33b40c470
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Mon Feb 5 21:16:49 2007 +0100

    [S390] Check the return value of kthread_run().
    
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 2b67fc46061b2171fb8fbb55d1ac717abd533569
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:16:47 2007 +0100

    [S390] Get rid of a lot of sparse warnings.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 55dff5224abeb734b12c1661c34ccf534955bee7
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Feb 5 21:16:44 2007 +0100

    [S390] Move init_irq_proc to the other irq related functions.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 9473252f20e8482464415d9030b3957b5593796d
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 5 10:17:38 2007 +0900

    [IA64] add newline to PAL-code warning message
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit abac08dbb4739f417f570e5bdf03af36150b28c3
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 5 10:16:20 2007 +0900

    [IA64] kexec: Remove inline declaration of efi_get_pal_addr()
    
    Remove the Remove inline declaration of efi_get_pal_addr() as it is
    declared in linux/efi.h.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8a697d0a4c8e7ed51cf71a467ad59c25bfb85b44
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 5 10:17:22 2007 +0900

    [IA64] kexec: Minor enhancement to includes in crash.c
    
    linux/uaccess.h was being included, but it seems that
    really the following includes are needed.
    
    asm/page.h: for __va() and PAGE_SHIFT
    asm/uaccess.h: for copy_to_user()
    
    I guess that linux/uaccess.h pulls in both asm/page.h and asm/uaccess.h.
    I notices this while backporting the code to xen's linux-2.6.16.33,
    which does not have linux/uaccess.h. I'm posting it as I think it is a
    correct, though somewhat cosmetic fix.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 233c2f99d6605343fa4a4c68560a4f74882b2693
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 5 11:05:29 2007 +0900

    [IA64] kexec: typo in the saved_max_pfn description in contig.c
    
    Fix a typo in the saved_max_pfn description in contig.c
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 475c63bded322545d1e9ccc5930c8903d2c97c4c
Author: Horms <horms@verge.net.au>
Date:   Mon Feb 5 10:59:03 2007 +0900

    [IA64] Zero size /proc/vmcore on ia64
    
    Set saved_max_pfn when discontig memory is in use.
    
    This sets up saved_max_pfn when disctontig memory is in use.
    This mirrors the code for contig memory.
    
    This patch does not entirely solve the problem of making vmcore work,
    however it does appear to be neccessary. Please consider applying.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit bcb9b99d1fb6a1cbe592f131dc95450d2f18c91f
Author: Magnus Damm <magnus@valinux.co.jp>
Date:   Mon Feb 5 15:43:42 2007 +0900

    [IA64] kexec: Fix CONFIG_SMP=n compilation
    
    Kexec support for 2.6.20 on ia64 does not build properly using a config
    made up by CONFIG_SMP=n and CONFIG_HOTPLUG_CPU=n:
    
    Signed-off-by: Magnus Damm <magnus@valinux.co.jp>
    Acked-by: Simon Horman <horms@verge.net.au>
    Acked-by: Jay Lan <jlan@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit a34fbc6363256387372331000462691bc4b3f5a9
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Thu Feb 1 16:46:33 2007 +0000

    [DLM] fix softlockup in dlm_recv
    
    This patch stops the dlm_recv workqueue from busy-waiting when a node
    disconnects. This can cause soft lockup errors on debug systems and bad
    performance generally.
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 62a0f62369b0fece37f6652d69b918c89d53c3b3
Author: David Teigland <teigland@redhat.com>
Date:   Wed Jan 31 13:25:00 2007 -0600

    [DLM] zero new user lvbs
    
    A new lvb for a userland lock wasn't being initialized to zero.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 9beeb9f3c5b0401491f59b71521ab2678f584b09
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Jan 30 14:30:08 2007 -0800

    [DLM/GFS2] indent help text
    
    Indent help text as expected.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit ddee76089cc9bcbd8ae9ec6c26e726a8ab2fe675
Author: Russell Cattelan <cattelan@redhat.com>
Date:   Mon Jan 29 17:13:44 2007 -0600

    [GFS2] Fix unlink deadlocks
    
    Move the glock acquisition to outside of the transactions.
    
    Lock odering must be preserved in order to prevent ABBA
    deadlocks. The current gfs2_change_nlink code would tries
    to grab the glock after having started a transaction and thus is holding
    the log lock. This is inconsistent with other code paths in
    gfs that grab the resource group glock prior to staring
    a tranactions.
    
    One problem with this fix is that the resource group
    lock is always grabbed now even if the inode still has
    ref count and can not be marked for unlink.
    
    Signed-off-by: Russell Cattelan <cattelan@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 61be084efcc4451934257350281962595418a33c
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 29 11:51:45 2007 +0000

    [GFS2] Put back semaphore to avoid umount problem
    
    Dave Teigland fixed this bug a while back, but I managed to mistakenly
    remove the semaphore during later development. It is required to avoid
    the list of inodes changing during an invalidate_inodes call. I have
    made it an rwsem since the read side will be taken frequently during
    normal filesystem operation. The write site will only happen during
    umount of the file system.
    
    Also the bug only triggers when using the DLM lock manager and only then
    under certain conditions as its timing related.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
    Cc: David Teigland <teigland@redhat.com>

commit bbb28ab7599789740b2233a0805d22aefb97f533
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Mon Jan 29 11:11:51 2007 -0600

    [GFS2] more CURRENT_TIME_SEC
    
    Whoops, quilt user error, missed this one in the previous patch.
    
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 001172778543c6997d3339f43085e43460e5883a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jan 28 17:19:50 2007 +0100

    [GFS2/DLM] fix GFS2 circular dependency
    
    On Sun, Jan 28, 2007 at 11:08:18AM +0100, Jiri Slaby wrote:
    > Andrew Morton napsal(a):
    > >Temporarily at
    > >
    > >	http://userweb.kernel.org/~akpm/2.6.20-rc6-mm1/
    >
    > Unable to select IPV6. Menuconfig doesn't offer it when INET is selected.
    > When it's not it appears in the menu, but after state change it gets away.
    > The same behaviour in xconfig, gconfig.
    >
    > $ mkdir ../a/tst
    > $ make O=../a/tst menuconfig
    >   HOSTCC  scripts/basic/fixdep
    > [...]
    >   HOSTLD  scripts/kconfig/mconf
    > scripts/kconfig/mconf arch/i386/Kconfig
    > Warning! Found recursive dependency: INET GFS2_FS_LOCKING_DLM SYSFS
    > OCFS2_FS INET
    >
    > Maybe this is the problem?
    
    Yes, patch below.
    
    > regards,
    
    cu
    Adrian
    
    <--  snip  -->
    
    This patch fixes a circular dependency by letting GFS2_FS_LOCKING_DLM
    and DLM depend on instead of select SYSFS.
    
    Since SYSFS depends on EMBEDDED this change shouldn't cause any problems
    for users.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 67f55897ee5ffa16ca00ed39d176dc52b5066679
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Thu Jan 25 18:42:39 2007 -0800

    [GFS2/DLM] use sysfs
    
    With CONFIG_DLM=m, CONFIG_PROC_FS=n, and CONFIG_SYSFS=n, kernel build
    fails with:
    
    WARNING: "kernel_subsys" [fs/gfs2/locking/dlm/lock_dlm.ko] undefined!
    WARNING: "kernel_subsys" [fs/dlm/dlm.ko] undefined!
    WARNING: "kernel_subsys" [fs/configfs/configfs.ko] undefined!
    make[1]: *** [__modpost] Error 1
    make: *** [modules] Error 2
    
    Since fs/dlm/lockspace.c and fs/gfs2/locking/dlm/sysfs.c use
    kernel_subsys, they should either DEPEND on it or SELECT it.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit ee32e4f3d347e4b562de0bd70be99e622d7d1a9f
Author: David Teigland <teigland@redhat.com>
Date:   Thu Jan 25 14:24:04 2007 -0600

    [GFS2] make lock_dlm drop_count tunable in sysfs
    
    We want to be able to change or disable the default drop_count (number at
    which the dlm asks gfs to limit the the number of locks it's holding).
    Add it to the collection of sysfs tunables for an fs.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 2f708649baad6350f506e7f5ca6649e32a8e4b49
Author: David Teigland <teigland@redhat.com>
Date:   Thu Jan 25 13:50:52 2007 -0600

    [GFS2] increase default lock limit
    
    Increase the number of locks at which point the dlm begins asking gfs to
    reduce its lock usage.  The default value is largely arbitrary, but the
    current value of 50,000 ends up limiting performance unnecessarily for too
    many users.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 8bd9572769767c6fd164cff4e1202df12cb34b4a
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Jan 25 10:04:20 2007 +0000

    [GFS2] Fix list corruption in lops.c
    
    The patch below appears to fix the list corruption that we are seeing on
    occasion. Although the transaction structure is private to a single
    thread, when the queued structures are dismantled during an in-core
    commit, its possible for a different thread to be trying to add the same
    structure to another, new, transaction at the same time.
    
    To avoid this, this patch takes the log spinlock during this operation.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit d7c103d0bd29c94f78155a4538faf314e49d9713
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Jan 25 17:14:59 2007 +0000

    [GFS2] Fix recursive locking attempt with NFS
    
    In certain cases, its possible for NFS to call the lookup code while
    holding the glock (when doing a readdirplus operation) so we need to
    check for that and not try and lock the glock twice. This also fixes a
    typo in a previous NFS related GFS2 patch.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit b790c3b7c38aae28c497bb363a6fe72f7c96568f
Author: David Teigland <teigland@redhat.com>
Date:   Wed Jan 24 10:21:33 2007 -0600

    [DLM] can miss clearing resend flag
    
    A long, complicated sequence of events, beginning with the RESEND flag not
    being cleared on an lkb, can result in an unlock never completing.
    
    - lkb on waiters list for remote lookup
    - the remote node is both the dir node and the master node, so
      it optimizes the lookup into a request and sends a request
      reply back
    - the request reply is saved on the requestqueue to be processed
      after recovery
    - recovery runs dlm_recover_waiters_pre() which sets RESEND flag
      so the lookup will be resent after recovery
    - end of recovery: process_requestqueue takes saved request reply
      which removes the lkb off the waitesr list, _without_ clearing
      the RESEND flag
    - end of recovery: dlm_recover_waiters_post() doesn't do anything
      with the now completed lookup lkb (would usually clear RESEND)
    - later, the node unmounts, unlocks this lkb that still has RESEND
      flag set
    - the lkb is on the waiters list again, now for unlock, when recovery
      occurs, dlm_recover_waiters_pre() shows the lkb for unlock with RESEND
      set, doesn't do anything since the master still exists
    - end of recovery: dlm_recover_waiters_post() takes this lkb off
      the waiters list because it has the RESEND flag set, then reports
      an error because unlocks are never supposed to be handled in
      recover_waiters_post().
    - later, the unlock reply is received, doesn't find the lkb on
      the waiters list because recover_waiters_post() has wrongly
      removed it.
    - the unlock operation has been lost, and we're left with a
      stray granted lock
    - unmount spins waiting for the unlock to complete
    
    The visible evidence of this problem will be a node where gfs umount is
    spinning, the dlm waiters list will be empty, and the dlm locks list will
    show a granted lock.
    
    The fix is simply to clear the RESEND flag when taking an lkb off the
    waiters list.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 8fd3a98f2c22982aff4d29e4ee72959d3032c123
Author: David Teigland <teigland@redhat.com>
Date:   Wed Jan 24 10:11:45 2007 -0600

    [DLM] saved dlm message can be dropped
    
    dlm_receive_message() returns 0 instead of returning 'error'.  What would
    happen is that process_requestqueue would take a saved message off the
    requestqueue and call receive_message on it.  receive_message would then
    see that recovery had been aborted, set error to EINTR, and 'goto out',
    expecting that the error would be returned.  Instead, 0 was always
    returned, so process_requestqueue would think that the message had been
    processed and delete it instead of saving it to process next time.  This
    means the message (usually an unlock in my tests) would be lost.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit f1f1c1ccf7848a6e25db30ee9216e1a1e7eb6bef
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Wed Jan 24 11:17:59 2007 +0000

    [DLM] Make sock_sem into a mutex
    
    Now that there can be multiple dlm_recv threads running we need to prevent two
    recvs running for the same connection - it's unlikely but it can happen and it
    causes message corruption.
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit d043e1900c97f7282b71844c8530279913b6ec5a
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Tue Jan 23 16:56:36 2007 -0500

    [GFS2] Fix typo in glock.c
    
    This is a one letter typo fix in glock.c, spotted by Rob Kenna.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit ddfe0627838ca0c0e8babb0dd2bd7f4b35e25bff
Author: Eric Sandeen <sandeen@redhat.com>
Date:   Thu Jan 18 16:41:23 2007 -0600

    [GFS2] use CURRENT_TIME_SEC instead of get_seconds in gfs2
    
    I was looking something else up and came across this...
    
    I don't honestly have a good reason to change it other than to make it
    like every other Linux filesystem in this regard.  ;-)  It doesn't
    functionally change anything, but makes some lines shorter. :)
    
    I'm also curious; why does gfs2 have 64-bits of on-disk timestamps, but
    not in timespec_t format, and only stores second resolutions?  Seems like
    you're halfway to sub-second resolutions already.
    
    I suppose if that gets implemented then all of the below should
    instead be CURRENT_TIME not CURRENT_TIME_SEC.
    
    Signed-off-by: Eric Sandeen <sandeen@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 90101c31867b7acc44286b425d50e1042aa55b8d
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Tue Jan 23 13:20:41 2007 -0500

    [GFS2] Compile fix for glock.c
    
    This one liner got missed from the previous patch.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 12132933c4fdeb458195a9388287d550c8476edf
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 22 13:09:04 2007 -0500

    [GFS2] Remove queue_empty() function
    
    This function is not longer required since we do not do recursive
    locking in the glock layer. As a result all its callers can be
    replaceed with list_empty() calls.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit bd44e2b007bc9024bce3357c185b38c73f87c3dd
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Mon Jan 22 14:51:33 2007 +0000

    [DLM] fix lowcomms receiving
    
    This patch fixes a bug whereby data on a newly accepted connection would be
    ignored if it arrived soon after the accept.
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit b5d32bead1578afc5ca817d40c320764d50a8600
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 22 12:15:34 2007 -0500

    [GFS2] Tidy up glops calls
    
    This patch doesn't make any changes to the ordering of the various
    operations related to glocking, but it does tidy up the calls to the
    glops.c functions to make the structure more obvious.
    
    The two functions: gfs2_glock_xmote_th() and gfs2_glock_drop_th() can be
    made static within glock.c since they are called by every set of glock
    operations. The xmote_th and drop_th glock operations are then made
    conditional upon those two routines existing and called from the
    previously mentioned functions in glock.c respectively.
    
    Also it can be seen that the go_sync operation isn't needed since it can
    easily be replaced by calls to xmote_bh and drop_bh respectively. This
    results in no longer (confusingly) calling back into routines in glock.c
    from glops.c and also reducing the glock operations by one member.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit f2f5095f9e63db57faa7cb082e958910ecdd7ad4
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Mon Jan 22 14:50:10 2007 +0000

    [DLM] lowcomms tidy
    
    This patch removes some redundant fields from the connection structure and adds
    some lockdep annotation to remove spurious warnings.
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 1c0f4872dc4bbeb2223a300517099786211fce83
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 22 12:10:39 2007 -0500

    [GFS2] Remove local exclusive glock mode
    
    Here is a patch for GFS2 to remove the local exclusive flag. In
    the places it was used, mutex's are always held earlier in the
    call path, so it appears redundant in the LM_ST_SHARED case.
    
    Also, the GFS2 holders were setting local exclusive in any case where
    the requested lock was LM_ST_EXCLUSIVE. So the other places in the glock
    code where the flag was tested have been replaced with tests for the
    lock state being LM_ST_EXCLUSIVE in order to ensure the logic is the
    same as before (i.e. LM_ST_EXCLUSIVE is always locally exclusive as well
    as globally exclusive).
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 6bd9c8c2fb99d1f5af6201db2f063c1d754c230a
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Fri Jan 19 13:57:36 2007 -0500

    [GFS2] Remove unused go_callback operation
    
    This is never used, so we might as well remove it.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit e5dab552c82ce416d7be867b1e5a0fa585dcf590
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Jan 18 17:44:20 2007 +0000

    [GFS2] Remove the "greedy" function from glock.[ch]
    
    The "greedy" code was an attempt to retain glocks for a minimum length
    of time when they relate to mmap()ed files. The current implementation
    of this feature is not, however, ideal in that it required allocating
    memory in order to do this and its overly complicated.
    
    It also misses the mark by ignoring the other I/O operations which are
    just as likely to suffer from the same problem. So the plan is to remove
    this now and then add the functionality back as part of the glock state
    machine at a later date (and thus take into account all the possible
    users of this feature)
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit fee852e374fb367c5436b1226eb93b35f8355ed9
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Wed Jan 17 15:33:23 2007 +0000

    [GFS2] Shrink gfs2_inode memory by half
    
    Here is something I spotted (while looking for something entirely
    different) the other day.
    
    Rather than using a completion in each and every struct gfs2_holder,
    this removes it in favour of hashed wait queues, thus saving a
    considerable amount of memory both on the stack (where a number of
    gfs2_holder structures are allocated) and in particular in the
    gfs2_inode which has 8 gfs2_holder structures embedded within it.
    
    As a result on x86_64 the gfs2_inode shrinks from 2488 bytes to
    1912 bytes, a saving of 576 bytes per inode (no thats not a typo!).
    In actual practice we get a much better result than that since
    now that a gfs2_inode is under the 2048 byte barrier, we get two
    per 4k slab page effectively halving the amount of memory required
    to store gfs2_inodes.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 330005c2b23e71e54931913e9b63d1712a19e444
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 15 16:36:26 2007 -0500

    [GFS2] Remove max_atomic_write tunable
    
    This removes an unused sysfs tunable parameter.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 3699e3a44bf56e0cd58c97e8655f375ad9b65d9d
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Wed Jan 17 15:09:20 2007 +0000

    [GFS2] Clean up/speed up readdir
    
    This removes the extra filldir callback which gfs2 was using to
    enclose an attempt at readahead for inodes during readdir. The
    code was too complicated and also hurts performance badly in the
    case that the getdents64/readdir call isn't being followed by
    stat() and it wasn't even getting it right all the time when it
    was.
    
    As a result, on my test box an "ls" of a directory containing 250000
    files fell from about 7mins (freshly mounted, so nothing cached) to
    between about 15 to 25 seconds. When the directory content was cached,
    the time taken fell from about 3mins to about 4 or 5 seconds.
    
    Interestingly in the cached case, running "ls -l" once reduced the time
    taken for subsequent runs of "ls" to about 6 secs even without this
    patch. Now it turns out that there was a special case of glocks being
    used for prefetching the metadata, but because of the timeouts for these
    locks (set to 10 secs) the metadata was being timed out before it was
    being used and this the prefetch code was constantly trying to prefetch
    the same data over and over.
    
    Calling "ls -l" meant that the inodes were brought into memory and once
    the inodes are cached, the glocks are not disposed of until the inodes
    are pushed out of the cache, thus extending the lifetime of the glocks,
    and thus bringing down the time for subsequent runs of "ls"
    considerably.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit a8d638e30e768adc6956541f79f7bf05139ba475
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 15 13:52:17 2007 +0000

    [GFS2] Add writepages for "data=writeback" mounts
    
    It occurred to me that although a gfs2 specific writepages for ordered
    writes and journaled data would be tricky, by hooking writepages only
    for "data=writeback" mounts we could take advantage of not needing
    buffer heads (we don't use them on the read side, nor have we for some
    time) and create much larger I/Os for the block layer.
    
    Using blktrace both before and after, its possible to see that for large
    I/Os, most of the requests generated through writepages are now 1024
    sectors after this patch is applied as opposed to 8 sectors before.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 222d396092acc11b4af03bede309aa066945e920
Author: David Teigland <teigland@redhat.com>
Date:   Mon Jan 15 10:28:22 2007 -0600

    [DLM] fix master recovery
    
    If master recovery happens on an rsb in one recovery sequence, then that
    sequence is aborted before lock recovery happens, then in the next
    sequence, we rely on the previous master recovery (which may now be
    invalid due to another node ignoring a lookup result) and go on do to the
    lock recovery where we get stuck due to an invalid master value.
    
     recovery cycle begins: master of rsb X has left
     nodes A and B send node C an rcom lookup for X to find the new master
     C gets lookup from B first, sets B as new master, and sends reply back to B
     C gets lookup from A next, and sends reply back to A saying B is master
     A gets lookup reply from C and sets B as the new master in the rsb
     recovery cycle on A, B and C is aborted to start a new recovery
     B gets lookup reply from C and ignores it since there's a new recovery
     recovery cycle begins: some other node has joined
     B doesn't think it's the master of X so it doesn't rebuild it in the directory
     C looks up the master of X, no one is master, so it becomes new master
     B looks up the master of X, finds it's C
     A believes that B is the master of X, so it sends its lock to B
     B sends an error back to A
     A resends
     this repeats forever, the incorrect master value on A is never corrected
    
    The fix is to do master recovery on an rsb that still has the NEW_MASTER
    flag set from an earlier recovery sequence, and therefore didn't complete
    lock recovery.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit a1bc86e6bddd34362ca08a3a4d898eb4b5c15215
Author: David Teigland <teigland@redhat.com>
Date:   Mon Jan 15 10:34:52 2007 -0600

    [DLM] fix user unlocking
    
    When a user process exits, we clear all the locks it holds.  There is a
    problem, though, with locks that the process had begun unlocking before it
    exited.  We couldn't find the lkb's that were in the process of being
    unlocked remotely, to flag that they are DEAD.  To solve this, we move
    lkb's being unlocked onto a new list in the per-process structure that
    tracks what locks the process is holding.  We can then go through this
    list to flag the necessary lkb's when clearing locks for a process when it
    exits.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 1d6e8131cf0064ef5ab5f3411a82b800afbfadee
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Mon Jan 15 14:33:34 2007 +0000

    [DLM] Use workqueues for dlm lowcomms
    
    This patch converts the DLM TCP lowcomms to use workqueues rather than using its
    own daemon functions. Simultaneously removing a lot of code and making it more
    scalable on multi-processor machines.
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 03dc6a538e42bcc8d5dfabcee208b639db85a80c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jan 13 10:56:41 2007 +0100

    [GFS2] make gfs2_change_nlink_i() static
    
    On Thu, Jan 11, 2007 at 10:26:27PM -0800, Andrew Morton wrote:
    >...
    > Changes since 2.6.20-rc3-mm1:
    >...
    >  git-gfs2-nmw.patch
    >...
    >  git trees
    >...
    
    This patch makes the needlessly globlal gfs2_change_nlink_i() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 70831465646b1fef9bf7b51b64409276411e9746
Author: Robert Peterson <rpeterso@redhat.com>
Date:   Thu Jan 11 13:25:00 2007 -0600

    [GFS2] gfs2 knows of directories which it chooses not to display
    
    This is for Red Hat bugzilla bug bz #222302:
    
    Moving a virtual IP from node to node between two NFS-over-GFS2
    servers was causing one of the GFS2 servers to become confused and
    reference a deleted inode.  The problem was due to vfs dentries that did
    not reference the gfs2_dops and therefore didn't call the gfs2 revalidate
    code to revalidate a dentry after a directory had been deleted & recreated.
    This patch is a crosswrite from a RHEL4 bug found in GFS1 as
    bz #190756 and it is against the latest -nmw git tree.
    
    Signed-off-by: Robert Peterson <rpeterso@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit d200778e1257eeb92242355de6f191a0a5ad43c4
Author: David Teigland <teigland@redhat.com>
Date:   Tue Jan 9 09:46:02 2007 -0600

    [DLM] expose dlm_config_info fields in configfs
    
    Make the dlm_config_info values readable and writeable via configfs
    entries.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 99fc64874aad1ee0aea5c4d8c07e3529f9d03497
Author: David Teigland <teigland@redhat.com>
Date:   Tue Jan 9 09:44:01 2007 -0600

    [DLM] add config entry to enable log_debug
    
    Add a new dlm_config_info field to enable log_debug output and change
    log_debug() to use it.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 68c817a1c4e21b893672ac73d8a498e6647453aa
Author: David Teigland <teigland@redhat.com>
Date:   Tue Jan 9 09:41:48 2007 -0600

    [DLM] rename dlm_config_info fields
    
    Add a "ci_" prefix to the fields in the dlm_config_info struct so that we
    can use macros to add configfs functions to access them (in a later
    patch).  No functional changes in this patch, just naming changes.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 8ec6886748443bec53ce9b9bf50cec92bc417a1b
Author: David Teigland <teigland@redhat.com>
Date:   Tue Jan 9 09:38:39 2007 -0600

    [DLM] change some log_error to log_debug
    
    Some common, non-error messages should use log_debug instead of log_error
    so they can be turned off.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 87d21e07f3880b8d489f0b4a639deb1362101838
Author: S. Wendy Cheng <wcheng@redhat.com>
Date:   Thu Jan 18 16:07:03 2007 -0500

    [GFS2] Fix gfs2_rename deadlock
    
    Second round of gfs2_rename lock re-ordering to allow Anaconda adding
    root partition on top of gfs2. Previous to this patch the recursive
    lock detector in glock.c can be triggered due to attempting to lock
    the rgrp twice. This fixes it by checking to see whether the rgrp
    is already locked.
    
    This fixes Red Hat bugzilla #221237
    
    Signed-off-by: S. Wendy Cheng <wcheng@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 6c93fd1e578669364e026a0d44c669b871e2a8c4
Author: Russell Cattelan <cattelan@redhat.com>
Date:   Mon Jan 8 17:47:51 2007 -0600

    [GFS2] BZ 217008 fsfuzzer fix.
    
    Update the quilt header comments to match the
    code changes.
    
    Change gfs2_lookup_simple to return an error in the case
    of a NULL inode.
    The callers of gfs2_lookup_simple do not check for NULL
    in the no entry case and such would end up dereferencing a NULL ptr.
    
    This fixes:
    http://projects.info-pull.com/mokb/MOKB-15-11-2006.html
    
    Signed-off-by: Russell Cattelan <cattelan@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 49686f71060e342bce6644a5c69fbc6ad0e75a13
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Mon Jan 8 14:31:40 2007 +0000

    [GFS2] Fix ordering of page disposal vs. glock_dq
    
    In case of unlinked files with dirty pages GFS2 wasn't clearing
    the pages in quite the right order. This patch clears the pages
    earlier (before the qlock_dq) to avoid the situation that the
    release of the glock results in attempting to write back data that
    has already been deallocated.
    
    This fixes Red Hat bugzilla: #220117
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 4edde74eedb8bc4c03adc3602b114b72a7ccd13f
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Tue Jan 2 17:08:54 2007 +0000

    [DLM] Fix spin lock already unlocked bug
    
    I just noticed this message when testing some other changes I'd made to
    lowcomms (to use workqueues) but the problem seems to be in the current
    git trees too. I'm amazed no-one has seen it.
    
        BUG: spinlock already unlocked on CPU#1, dlm_recoverd/16868
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 3fb4a251febe70e4c65ea8250545b391fd414d5a
Author: Patrick Caulfield <pcaulfie@redhat.com>
Date:   Tue Jan 2 17:01:05 2007 +0000

    [DLM] Fix schedule() calls
    
    I was a little over-enthusiastic turning schedule() calls int cond_sched() when fixing the DLM for Andrew Morton.
    
    These four should really be calls to schedule() or the dlm can busy-wait.
    
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 5509826f1e548d14bb888c1cb6e3bbf23f855770
Author: S. Wendy Cheng <wcheng@redhat.com>
Date:   Thu Jan 18 15:56:34 2007 -0500

    [GFS2] Fix change nlink deadlock
    
    Bugzilla 215088
    
    Fix deadlock in gfs2_change_nlink() while installing RHEL5 into GFS2
    partition. The gfs2_rename() apparently needs block allocation for the
    new name (into the directory) where it requires rg locks. At the same
    time, while updating the nlink count for the replaced file,
    gfs2_change_nlink() tries to return the inode meta-data back to resource
    group where it needs rg locks too. Our logic doesn't allow process to
    acquire these locks recursively by the same process  (RHEL installer)
    that results a BUG call. This only happens within rename code path and
    only if the destination file exists before the rename operation.
    
    Signed-off-by: S. Wendy Cheng <wcheng@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit e1d5b18ae92d0bbfe66dc2b4bab65006d32c5f7d
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Fri Dec 15 16:49:51 2006 -0500

    [GFS2] Fail over to readpage for stuffed files
    
    This is partially derrived from a patch written by Russell Cattelan.
    It fixes a bug where there is a race between readpages and truncate
    by ignoring readpages for stuffed files. This is ok because a stuffed
    file will never be more than one block (minus sizeof(struct gfs2_dinode))
    in size and block size is always less than page size, so we do not lose
    anything efficiency-wise by not doing readahead for stuffed files. They
    will have already been "read ahead" by the action of reading the inode
    in, in the first place.
    
    This is the remaining part of the fix for Red Hat bugzilla #218966
    which had not yet made it upstream.
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
    Cc: Russell Cattelan <cattelan@redhat.com>

commit c7b3383437ff41781964d1bf7f40ff8d7dd5bc47
Author: Steven Whitehouse <swhiteho@redhat.com>
Date:   Thu Dec 14 18:24:26 2006 +0000

    [GFS2] Fix DIO deadlock
    
    This patch fixes Red Hat bugzilla #212627 in which a deadlock occurs
    due to trying to take the i_mutex while holding a glock. The correct
    locking order is defined as i_mutex -> glock in all cases.
    
    I've left dealing with allocating writes. I know that we need to do
    that, but for now this should do the trick. We don't need to take the
    i_mutex on write, because the VFS has already taken it for us. On read
    we don't need it since the glock is enough protection. The reason that
    I've made some of the checks into a separate function is that we'll need
    to do the checks again in the allocating write case eventually, so this
    is partly in preparation for this. Likewise the return value test of !=
    1 might look a bit odd and thats because we'll need a third return value
    in case of requiring an allocation.
    
    I've made the change to deferred mode on the glock to ensure flushing
    read caches on other nodes. I notice that (using blktrace to look at
    whats going on) we appear to do a better job of large I/Os than ext3
    after this patch (in terms of not splitting up the I/Os).
    
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
    Cc: Wendy Cheng <wcheng@redhat.com>

commit 927255f0383342f5d49b82adb6689b9cba52a6f5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Dec 19 13:04:03 2006 -0800

    [DLM] fs/dlm/lowcomms-tcp.c: remove 2 functions
    
    Remove the following unused functions:
    
    - lowcomms_send_message()
    - lowcomms_max_buffer_size()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Patrick Caulfield <pcaulfie@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 075529b5e1ffa8c9864d23930b71b5306a13d9f8
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 13 10:40:26 2006 -0600

    [DLM] fix lost flags in stub replies
    
    When the dlm fakes an unlock/cancel reply from a failed node using a stub
    message struct, it wasn't setting the flags in the stub message.  So, in
    the process of receiving the fake message the lkb flags would be updated
    and cleared from the zero flags in the message.  The problem observed in
    tests was the loss of the USER flag which caused the dlm to think a user
    lock was a kernel lock and subsequently fail an assertion checking the
    validity of the ast/callback field.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 8d07fd509e9c82a59e37b8b18a2fd0e8ef8fc837
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 13 10:39:20 2006 -0600

    [DLM] fix receive_request() lvb copying
    
    LVB's are not sent as part of new requests, but the code receiving the
    request was copying data into the lvb anyway.  The space in the message
    where it mistakenly thought the lvb lived actually contained the resource
    name, so it wound up incorrectly copying this name data into the lvb.  Fix
    is to just create the lvb, not copy junk into it.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit da49f36f4f64feb281d7663be99e779b2aecc607
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 13 10:38:45 2006 -0600

    [DLM] fix send_args() lvb copying
    
    The send_args() function is used to copy parameters into a message for a
    number different message types.  Only some of those types are set up
    beforehand (in create_message) to include space for sending lvb data.
    send_args was wrongly copying the lvb for all message types as long as the
    lock had an lvb.  This means that the lvb data was being written past the
    end of the message into unknown space.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 9e971b715dcc3cd5f4383f2815aaa7e5853d1f7b
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 13 10:37:55 2006 -0600

    [DLM] add version check
    
    Check if we receive a message from another lockspace member running a
    version of the dlm with an incompatible inter-node message protocol.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit 38aa8b0c59c35d10d15ebf00ceee641f9ed7acba
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 13 10:37:16 2006 -0600

    [DLM] fix old rcom messages
    
    A reply to a recovery message will often be received after the relevant
    recovery sequence has aborted and the next recovery sequence has begun.
    We need to ignore replies to these old messages from the previous
    recovery.  There's already a way to do this for synchronous recovery
    requests using the rc_id number, but not for async.
    
    Each recovery sequence already has a locally unique sequence number
    associated with it.  This patch adds a field to the rcom (recovery
    message) structure where this recovery sequence number can be placed,
    rc_seq.  When a node sends a reply to a recovery request, it copies the
    rc_seq number it received into rc_seq_reply.  When the first node receives
    the reply to its recovery message, it will check whether rc_seq_reply
    matches the current recovery sequence number, ls_recover_seq, and if not
    then it ignores the old reply.
    
    An old, inadequate approach to filtering out old replies (checking if the
    current stage of recovery has moved back to the start) has been removed
    from two spots.
    
    The protocol version number is changed to reflect the different rcom
    structures.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit dc200a8848cca8b0e99012996c66f4b379a390ed
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 13 10:36:37 2006 -0600

    [DLM] fix resend rcom lock
    
    There's a chance the new master of resource hasn't learned it's the new
    master before another node sends it a lock during recovery.  The node
    sending the lock needs to resend if this happens.
    
    - A sends a master lookup for resource R to C
    - B sends a master lookup for resource R to C
    - C receives A's lookup, assigns A to be master of R and
      sends a reply back to A
    - C receives B's lookup and sends a reply back to B saying
      that A is the master
    - B receives lookup reply from C and sends its lock for R to A
    - A receives lock from B, doesn't think it's the master of R
      and sends an error back to B
    - A receives lookup reply from C and becomes master of R
    - B gets error back from A and resends its lock back to A
      (this resending is what this patch does)
    - A receives lock from B, it now sees it's the master of R
      and takes the lock
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit c378051177dce4421428fd1691ffdf15ad57c161
Author: David Teigland <teigland@redhat.com>
Date:   Wed Dec 6 11:46:33 2006 -0600

    [GFS2] don't try to lockfs after shutdown
    
    If an fs has already been shut down, a lockfs callback should do nothing.
    An fs that's been shut down can't acquire locks or do anything with
    respect to the cluster.
    
    Also, remove FIXME comment in withdraw function.  The missing bits of the
    withdraw procedure are now all done by user space.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>

commit bf1e5989aa5783726c6a94931f92b34aa387ec30
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Mon Feb 5 14:44:23 2007 +0100

    [AGPGART] Add agp-type-to-mask-type method missing from some drivers.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit aa8f1278553c554f1fb3fd6fb0987dd547c7d7cf
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Feb 5 13:32:55 2007 +0000

    [MTD NAND] CAF controller depends, perhaps unsurprisingly, on NAND
    
    Noticed by Ingo.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4285431fb658263e98942ce2320b0b26eddcc06d
Merge: c033a7e... 62d0cfc...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Feb 5 13:25:21 2007 +0000

    Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit a417a21e10831bca695b4ba9c74f4ddf5a95ac06
Author: Soeren Sonnenburg <kernel@nn7.de>
Date:   Mon Feb 5 10:06:01 2007 +0100

    USB HID: handle multi-interface devices for Apple macbook pro properly
    
    Some HID devices by Apple have both keyboard and mouse interfaces; the
    keyboard interface is handled by usbhid, but the mouse (really
    touchpad) interface must be handled by the separate 'appletouch'
    driver.  Using HID_QUIRK_IGNORE will make hiddev ignore both
    interfaces, therefore a new quirk flag to ignore only the mouse
    interface is required.
    
    Signed-off-by: Soeren Sonnenburg <kernel@nn7.de>
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit dd64c151b978dc78ed535433d930c75b5c15deeb
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Tue Jan 30 16:02:24 2007 +0100

    HID: move away from DEBUG defines in favor of CONFIG_HID_DEBUG
    
    CONFIG_INPUT_DEBUG is non-existent option, so remove anything depending
    on it.
    
    Also, as we have new CONFIG_HID_DEBUG, this should be used on places
    where ifdef DEBUG was used before.
    
    Suggested by Adrian Bunk.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 43c7bf0472ec1f813fccc6012654399345898491
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Fri Jan 26 12:58:24 2007 +0100

    USB HID: fix bogus comment in hid_get_class_descriptor()
    
    The comment in hid_get_class_descriptor() says a very obvious thing
    and is also violating codingstyle. Just remove it.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 8235ca3c05076f35d22578e8f530fd374104332a
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Fri Jan 26 12:56:16 2007 +0100

    USB HID: remove hid_find_field_by_usage()
    
    The unused hid_find_field_by_usage() function has been commented out for
    a pretty long time. Remove it completely.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 7c379146005d277982acde02da44c773de5e7e5a
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Wed Jan 24 11:54:19 2007 +0100

    HID: API - fix leftovers of hidinput API in USB HID
    
    hidinput_{open,close}() functions do not belong to usbhid, but
    to the generic HID layer. Move them, and fix hooks in struct
    hid_device, so that now the callbacks are done to transport-specific
    _open() functions, but not input_open() functions.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit c080d89ad91e98fec0e8fc5f448a1ad899bd85c7
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Thu Jan 25 11:43:31 2007 +0100

    HID: hid debug from hid-debug.h to hid layer
    
    hid-debug.h contains a lot of code, and should not therefore
    be a header.
    
    This patch moves the code to generic hid layer as .c source, and
    introduces CONFIG_HID_DEBUG to conditionally compile it, instead
    of playing with #define DEBUG and including hid-debug.h.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 20eb12790670985c8e30821218993bd260387b89
Author: Anssi Hannula <anssi.hannula@gmail.com>
Date:   Thu Jan 11 16:51:18 2007 +0200

    hid: force feedback driver for PantherLord USB/PS2 2in1 Adapter
    
    Add a force feedback driver for PantherLord USB/PS2 2in1 Adapter,
    0810:0001. The device identifies itself as "Twin USB Joystick".
    
    Signed-off-by: Anssi Hannula <anssi.hannula@gmail.com>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 5556feae1c4e1cf2021b5fb2ef99973125de2250
Author: Anssi Hannula <anssi.hannula@gmail.com>
Date:   Thu Jan 11 16:51:17 2007 +0200

    hid: quirk for multi-input devices with unneeded output reports
    
    Add new quirk HID_QUIRK_SKIP_OUTPUT_REPORTS to skip output reports
    when enumerating reports on a hid-input device. Add this quirk and
    HID_QUIRK_MULTI_INPUT to 0810:0001.
    
    PantherLord Twin USB Joystick, 0810:0001 has separate input reports
    for 2 distinct game controllers in the same interface, so it needs
    HID_QUIRK_MULTI_INPUT. However, the device also contains one output
    report per controller which is used to control the force feedback
    function, and we do not want those to appear as separate input
    devices as well. The simplest approach seems to be to add a quirk to
    skip output reports on 0810:0001, and allow the force feedback
    driver to handle those.
    
    Signed-off-by: Anssi Hannula <anssi.hannula@gmail.com>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit c4146067fd7889bc6fab6cdfd8b2795d745a2156
Author: Anssi Hannula <anssi.hannula@gmail.com>
Date:   Thu Jan 11 16:51:16 2007 +0200

    hid: allow force feedback for multi-input devices
    
    Allow hid devices with HID_QUIRK_MULTI_INPUT to have force feedback.
    This was previously disabled because there were not any force
    feedback drivers for such devices. This will change with my upcoming
    patch.
    
    Signed-off-by: Anssi Hannula <anssi.hannula@gmail.com>
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>

commit 786f46b262cb7a491f4b144e42f076d5a1ef8eef
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Sun Feb 4 18:43:12 2007 +0100

    [CPUFREQ] Longhaul - Add VT8235 support
    
    I don't know why it is working and how, but it is working. On my
    Epia transition time is by default set to 100us. I'm changing it to
    200us. After that I can change frequency from min (x4.0) to max (x7.5)
    without lockup. Many times.
    There is a paranoid check at a beginning of a patch. Probably dead
    code, but I don't have better ideas for CL10000 case at the moment.
    Only way to to detect broken chip seems to be looking in log for
    spurious interrupts.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 46ef955f5c9de0507859a3f9a92989b7425b73cc
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Sun Feb 4 15:58:46 2007 +0100

    [CPUFREQ] Longhaul - Fix guess_fsb function
    
    This is bug reported by John-Marc Chandonia:
    > Detected 1002.292 MHz processor.
    > longhaul: VIA C3 'Nehemiah B' [C5N] CPU detected.  Powersaver supported.
    > longhaul: Using throttling support.
    > longhaul: Invalid (reserved) FSB!
    FSB is correcly guessed for 999.554 MHz CPU.
    To fix this error:
    - ROUNDING should be range, not mask - at it's current value it is +7 -8,
    - more precise calculations inside guess_fsb - 7.5x133MHz is 1000MHz now.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e4ac5e4f55f55b16e084a46b1b8e233f490ba701
Author: Dave Jones <davej@redhat.com>
Date:   Sun Feb 4 17:37:42 2007 -0500

    [AGPGART] Don't try to remap i810 registers on resume.
    
    We don't unmap them on the suspend path, so on resume
    trying to remap will fail, and then result in an
    oops the next time something tries to access them.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b45bfcc1ae084aa98c0350b8c33c8b57540b0acc
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Wed Jan 24 00:14:18 2007 +0100

    IB/ehca: Remove obsolete prototypes
    
    Remove prototypes for functions that don't exist.
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4c34bdf58c0a3b305ebd9b5e74011ca1fd6d964d
Author: Hoang-Nam Nguyen <hnguyen@linux.vnet.ibm.com>
Date:   Wed Jan 24 00:13:35 2007 +0100

    IB/ehca: Remove use of do_mmap()
    
    This patch removes do_mmap() from ehca:
     - Call remap_pfn_range() for hardware register block
     - Use vm_insert_page() to register memory allocated for completion
       queues and queue pairs
     - The actual mmap() call/trigger is now controlled by user space,
       ie. libehca
    
    Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1f12667021c542236b1f10eb5d8b2d8f3a79ab48
Author: Steve Wise <swise@opengridcomputing.com>
Date:   Tue Jan 23 19:03:17 2007 -0600

    RDMA/addr: Handle ethernet neighbour updates during route resolution
    
    The iWARP connection manager uses the ib_addr services to do route
    resolution (neighbour discovery in the IP world).  The ib_addr
    netevent callback routine, however, currently only acts on InfiniBand
    neighbour updates.  It needs to act on ethernet neighbour updates as
    well.
    
    This patch just removes filtering on device type altogether and will
    trigger on any neighour updates where the nud_type is valid.  This
    simplifies the code some.
    
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit fa7252ed4d92397baf30e4a144af95a33eaa925b
Author: Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
Date:   Fri Jan 19 11:58:49 2007 -0700

    IB: Make sure struct ib_user_mad.data is aligned
    
    Make the untyped data region in ib_user_mad have type u64 so that it
    gets aligned properly.  This avoids alignment faults in ib_umad when
    casting the data field to an rmpp_mad and accessing the 64-bit tid
    field on architectures like ia64.
    
    Signed-off-by: Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1033ff670d49760604f5d4c73a1b60741863a406
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Tue Jan 16 17:26:22 2007 +0200

    IB/srp: Don't wait for response when QP is in error state.
    
    When there is a call to send_tsk_mgmt SRP posts a send and waits for 5
    seconds to get a response.
    
    When the QP is in the error state it is obvious that there will be no
    response so it is quite useless to wait.  In fact, the timeout causes
    SRP to wait a long time to reconnect when a QP error occurs. (Each
    abort and each reset_device calls send_tsk_mgmt, which waits for the
    timeout).  The following patch solves this problem by identifying the
    failure and returning an immediate error code.
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 062dbb69f32b9ccea701b30f8cc0049482e6211f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sun Dec 31 21:09:42 2006 +0200

    IB: Return qp pointer as part of ib_wc
    
    struct ib_wc currently only includes the local QP number: this matches
    the IB spec, but seems mostly useless. The following patch replaces
    this with the pointer to qp itself, and updates all low level drivers
    and all users.
    
    This has the following advantages:
    - Ability to get a per-qp context through wc->qp->qp_context
    - Existing drivers already have the qp pointer ready in poll cq, so
      this change actually saves a tiny bit (extra memory read) on data path
      (for ehca it would actually be expensive to find the QP pointer when
      polling a CQ, but ehca does not support SRQ so we can leave wc->qp as
      NULL for ehca)
    - Users that need the QP number can still get it through wc->qp->qp_num
    
    Use case:
    
    In IPoIB connected mode code, I have a common CQ shared by multiple
    QPs.  To track connection usage, I need a way to get at some per-QP
    context upon the completion, and I would like to avoid allocating
    context object per work request just to stick a QP pointer into it.
    With this code, I can just use wc->qp->qp_context.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 459d6e2a541a5226825db998e627e0aa046aa257
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sun Feb 4 14:11:55 2007 -0800

    IB: Include <linux/kref.h> explicitly in <rdma/ib_verbs.h>
    
    <rdma/ib_verbs.h> uses struct kref, so it should include <linux/kref.h>
    explicitly to avoid hidden include dependencies.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f9d429a2e579ed7c51c49a81265f7e7d2c59c197
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sat Feb 3 13:36:41 2007 +0100

    mmc: tifm: replace kmap with page_address
    
    Since we actively avoid highmem, calling kmap_atomic() instead
    of page_address() is effectively only obfuscation.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit c70840e819acdbab96b8cdf71d27cb68c6567efa
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Feb 2 22:41:41 2007 +0100

    mmc: sdhci: fix voltage ocr
    
    Some bad if-clauses caused the driver to just report the highest
    supported voltage, not all.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 2a22b14edfdf1dce303ec48bb934a6a2edb278b5
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Feb 2 18:27:42 2007 +0100

    mmc: sdhci: replace kmap with page_address
    
    Since we actively avoid highmem, calling kmap_atomic() instead
    of page_address() is effectively only obfuscation.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 4a0ddbd25ad4e03a0a1657f5cb2259c9a35fe9e6
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Wed Jan 31 18:20:48 2007 +0100

    mmc: wbsd: replace kmap with page_address
    
    Since we actively avoid highmem, calling kmap_atomic() instead
    of page_address() is effectively only obfuscation.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit df1c4b7bf7f3b3a48d78c6e5c2fc5b9a1c01b821
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Jan 30 07:55:15 2007 +0100

    mmc: handle pci_enable_device() return value in sdhci
    
    Make sure we report back any errors from pci_enable_device().
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 397411e67ff473c36161d93e4c7ac6dc53e23503
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Jan 30 07:48:04 2007 +0100

    mmc: Proper unclaim in mmc_block
    
    Make sure we release the claim on the host even on failure.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit fac8899129a0490020a0734cc84c1a94ac72c7e1
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sat Jan 27 13:18:26 2007 +0100

    mmc: change wbsd mailing list
    
    The wbsd-devel list has been shut down. Refer people to
    LKML instead.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit ae06eaf9abb1fd00e413753786e13406eda5819a
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jan 7 16:59:06 2007 +0100

    mmc: Graceful fallback for fancy features
    
    MMC high-speed, wide bus support and SD high-speed
    are functions that aren't critical for correct
    operation of the card. As such, they shouldn't mark
    the card as bad or dead when there is a failure
    activating these features.
    
    This is needed in particular on some really stupid
    hardware (e.g. Winbond's) where not all data transfer
    commands are supported.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 5ba593a97206fb96dc0e63f209e6ade86452844f
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Nov 21 17:45:37 2006 +0100

    mmc: Handle wbsd's stupid command list
    
    The wbsd hardware is so incredibly brain damaged that it has an internal
    list of commands that result in data transfers. The result being that
    commands that aren't on this list aren't supported.
    
    Instead of locking up, waiting for a data interrupt that will never come,
    we try to fail a bit more gracefully.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 55db890a838c7b37256241b1fc53d6344aa79cc0
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Nov 21 17:55:45 2006 +0100

    mmc: Allow host drivers to specify max block count
    
    Many controllers have an upper limit on the number of blocks that can be
    transferred in one request. Allow the host drivers to specify this and make
    sure we avoid hitting this limit.
    
    Also change the max_sectors field to avoid confusion. This makes it map
    less directly to the block layer limits, but as they didn't apply directly
    on MMC cards anyway, this isn't a great loss.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit fe4a3c7a20f14d86022a8132adbf6ddb98e7197c
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Nov 21 17:54:23 2006 +0100

    mmc: Allow host drivers to specify a max block size
    
    Most controllers have an upper limit on the block size. Allow the host
    drivers to specify this and make sure we avoid hitting this limit.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit dba4accab17bd2e2e09088f746257a8c14af1cc2
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:38 2006 +1100

    tifm_sd: add suspend and resume functionality
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 41d78f7405659b55e082c5f0b3d1b625e75e1294
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:37 2006 +1100

    tifm_core: add suspend/resume infrastructure for tifm devices
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 8b40adab9c6cb63cede72c3ce3c3fee1157719e0
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:36 2006 +1100

    tifm_7xx1: prettify
    
    Fix some spaces and tabs. No semantic changes are introduced.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit b5ad6761533c3f7e97c93b2333a0f88490d44f36
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:35 2006 +1100

    tifm_7xx1: recognize device 0xac8f as supported
    
    This patch also adds symbolic defines for supported pci ids.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 7146f0d3bd2bcd0100a5db54f4ba9edc1042fe01
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 18 14:20:06 2006 +1100

    tifm_7xx1: switch from workqueue to kthread
    
    As there's only one work item (media_switcher) to handle and it's effectively
    serialized with itself, I found it more convenient to use kthread instead of
    workqueue. This also allows for a working implementation of suspend/resume,
    which were totally broken in the past version.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 6412d927313f08808d61b7efba8da43717d4e8d2
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:33 2006 +1100

    tifm_7xx1: Merge media insert and media remove functions
    
    Hardware does not say whether card was inserted or removed when reporting
    socket events. Moreover, during suspend, media can be removed or switched
    to some other card type without notification. Therefore, for each socket
    in the change set the following is performed:
    1. If there's active device in the socket it's unregistered
    2. Media detection is performed
    3. If detection recognizes supportable media, new device is registered
    
    This patch also alters some macros and variable names to enhance clarity.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 1499ead31ede528a657c50761c4780c40f929d6d
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:32 2006 +1100

    tifm_7xx1: simplify eject function
    
    Eject function can take advantage of the socket_id field instead of explicit
    pointer comparison.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 217334d14d28e6a671e6dd2c7a35c9070b0721ea
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:31 2006 +1100

    Add dummy_signal_irq function to save check in ISR
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 50743f4cb1d655c7fbe25af58a9d0db6bf76d687
Author: Alex Dubov <oakad@yahoo.com>
Date:   Mon Dec 11 01:55:30 2006 +1100

    Remove unused return value from signal_irq callback
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 2e8ce5e7414e74fe8904495b1f22cf00d3349398
Author: Alex Dubov <oakad@yahoo.com>
Date:   Fri Dec 8 16:50:52 2006 +1100

    tifm_sd: prettify
    
    This patch introduces no semantic changes - it is here for estetic purposes.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 8e02f8581cd2f9c12a03be7641d5c2c427170feb
Author: Alex Dubov <oakad@yahoo.com>
Date:   Fri Dec 8 16:50:51 2006 +1100

    tifm_sd: restructure initialization, removal and command handling
    
    In order to support correct suspend and resume several changes were needed:
    1. Switch from work_struct to tasklet for command handling. When device
    suspend is called workqueues are already frozen and can not be used.
    2. Separate host initialization code from driver's probe and don't rely
    on interrupts for host initialization. This, in turn, addresses two
    problems:
     a) Resume needs to re-initialize the host, but can not assume that
        device interrupts were already re-armed.
     b) Previously, probe will return successfully before really knowing
        the state of the host, as host interrupts were not armed in time.
        Now it uses polling to determine the real host state before returning.
    3. Separate termination code from driver's remove. Termination may be caused
    by resume, if media changed type or became unavailable during suspend.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 83d420ba92bdd52127e4548ae8050a48f655ce3b
Author: Alex Dubov <oakad@yahoo.com>
Date:   Fri Dec 8 16:50:50 2006 +1100

    tifm_sd: fix hardware timeout setup
    
    The register access order when setting hardware timeout was incorrect and
    causing problems (wrong timeout intervals). This is now fixed.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 0803dd0c2594c7dc70c14ab00ea21e68605f5ba1
Author: Alex Dubov <oakad@yahoo.com>
Date:   Fri Dec 8 16:50:49 2006 +1100

    tifm_sd: Switch software timeout handler from work_struct to timer
    
    Two changes are introduced to software timeout handler in order to simplify
    its management:
    1. The implementation is switched from work_struct to timer
    2. Previously, software timeout was rearmed with each interrupt. Now,
    current request must complete entirely within timeout interval.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 255ef22e89ecedcc594428444a72a29cb66153f5
Author: Alex Dubov <oakad@yahoo.com>
Date:   Fri Dec 8 16:50:48 2006 +1100

    tifm_sd: use kmap_atomic instead of kmap for PIO data buffer
    
    Data buffer for PIO transfer used to be mapped in advance with kmap.
    Abolish it in favor of on-demand kmap_atomic.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 1289335a2ab57d00c638c3954dc86d6c4eab5606
Author: Alex Dubov <oakad@yahoo.com>
Date:   Fri Dec 8 16:50:47 2006 +1100

    tifm_sd: alter order of the states in the command handler
    
    Previously, stop command was issued right after BRS (block received/sent)
    event. Stop command completion event could interfere with the card busy
    event, causing miscount of the written blocks.
    This patch ensures that stop command issued as last action for a
    particular command, after DMA sompletion event and written block
    count verification.
    
    Signed-off-by: Alex Dubov <oakad@yahoo.com>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit fba68bd2dab1ac99af3c5a963ec9581cfa9f1725
Author: Philip Langdale <philipl@overt.org>
Date:   Thu Jan 4 06:57:32 2007 -0800

    mmc: Add support for SDHC cards
    
    Thanks to the generous donation of an SDHC card by John Gilmore, and
    the surprisingly enlightened decision by the SD Card Association to
    publish useful specs, I've been able to bash out support for SDHC. The
    changes are not too profound:
    
    i) Add a card flag indicating the card uses block level addressing and
    check it in the block driver. As we never took advantage of byte-level
    addressing, this simply involves skipping the block -> byte
    translation when sending commands.
    
    ii) The layout of the CSD is changed - a set of fields are discarded
    to make space for a larger C_SIZE. We did not reference any of the
    discarded fields except those related to the C_SIZE.
    
    iii) Read and write timeouts are fixed values and not calculated from
    CSD values.
    
    iv) Before invoking SEND_APP_OP_COND, we must invoke the new
    SEND_IF_COND to inform the card we support SDHC.
    
    Signed-off-by: Philip Langdale <philipl@overt.org>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 9e9dc5f29f2eb65153a15c4fdb12b4382e3a75b2
Author: Darren Salt <linux@youmustbejoking.demon.co.uk>
Date:   Sat Jan 27 15:32:31 2007 +0100

    mmc: Power quirk for ENE controllers
    
    Support for these devices was broken for 2.6.18-rc1 and later by commit
    146ad66eac836c0b976c98f428d73e1f6a75270d, which added voltage level support.
    
    This restores the previous behaviour for these devices by ensuring that when
    the voltage is changed, only one write to set the voltage is performed.
    
    It may be that both writes are needed if the voltage is being changed between
    two non-zero values or that it's safe to ensure that only one write is done
    if the hardware only supports one voltage; I don't know whether either is the
    case nor can I test since I have only the one SD reader (1524:0550), and it
    supports just the one voltage.
    
    Signed-off-by: Darren Salt <linux@youmustbejoking.demon.co.uk>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 11354d03afe9dd0d114e078057158baad4b4eee9
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jan 14 01:41:45 2007 +0100

    mmc: let host be parent of cards
    
    Change the parent of cards to be a specific host (a class
    device), not the physical controller. This is particularly
    useful when the hardware has multiple slots, meaning
    multiple hosts.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit f22ee4edf63e7480511112d9965c71e07be3f8b7
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Dec 26 15:11:23 2006 +0100

    mmc: replace host->card_busy
    
    As card_busy was only used to indicate if the host was exclusively
    claimed and not really used to identify a particular card, replacing
    it with just a boolean makes things a lot more easily understandable.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 279bc4450989215e741c2c9d3a726f1ac96ede40
Author: Manuel Lauss <mano@roarinelk.homelinux.net>
Date:   Thu Jan 25 10:27:41 2007 +0100

    mmc: au1xmmc: return errors for unknown response types
    
    au1xmmc: return error when encountering unhandled/unknown response type.
    
    Signed-off-by: Manuel Lauss <mano@roarinelk.homelinux.net>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit 82999770d6926193f50b42e713a92ee4028398e3
Author: Manuel Lauss <mano@roarinelk.homelinux.net>
Date:   Thu Jan 25 10:29:24 2007 +0100

    mmc: au1xmmc: implement proper ro switch detection
    
    au1xmmc: implement proper R/O switch detection.
    
    Signed-off-by: Manuel Lauss <mano@roarinelk.homelinux.net>
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>

commit ebf4d8ec02d8a13e1cbbda6fe746f80f3a4ca773
Merge: 588a700... 62d0cfc...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sun Feb 4 11:26:48 2007 -0800

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit 588a700b269b785b19d5d03084bee5e1b74c7758
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Feb 2 17:41:53 2007 -0800

    NFSv4: /proc/mounts displays the wrong server name for referrals
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 1d21632d366b33b3adf4fa26144edf3162a9715d
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Feb 2 15:56:06 2007 -0800

    NFSv4: Ensure non-root user can trigger a referral automount
    
    Currently only root can trigger a referral automount because only root
    can access rpc_pipefs directories. Enabling read access to non-root
    should be harmless (they can still not access the pipes themselves)
    and will suffice to fix this problem.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 46121cf7d85869bfe9588bac7ccf55aa0bc7f278
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Wed Jan 31 12:14:08 2007 -0500

    SUNRPC: fix print format for tk_pid
    
    The tk_pid field is an unsigned short.  The proper print format specifier for
    that type is %5u, not %4d.
    
    Also clean up some miscellaneous print formatting nits.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8885cb367f86ce02bed3bf18192d74a53ac3b81f
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Wed Jan 31 12:14:05 2007 -0500

    SUNRPC: fix print format for tk_pid in auth_gss support
    
    The tk_pid field is an unsigned short.  The proper print format specifier for
    that type is %5u, not %4d.
    
    Also clean up some miscellaneous print formatting nits.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a3f565b1e530a756472401835107d08fd291f242
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Wed Jan 31 12:14:01 2007 -0500

    NFS: fix print format for tk_pid
    
    The tk_pid field is an unsigned short.  The proper print format specifier for
    that type is %5u, not %4d.
    
    Also clean up some miscellaneous print formatting nits.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4dc2eaecd4cf0687727e418540bccf956a62ebcf
Author: Benny Halevy <bhalevy@panasas.com>
Date:   Wed Dec 20 22:29:46 2006 +0200

    NFS: move NFS_DEBUG definition
    
    Trond, looks like the changes to include/linux/nfs_fs.h in 2.6.18
    that moved the #include's of sunrpc header files into the #ifdef __KERNEL__ block
    disabled nfs debugging for all nfs c file not including any sunrpc header.
    
    The following patch moves the definition down, right before its use
    for defining ifdebug.
    
    Signed-off-by: Benny Halevy <bhalevy@panasas.com>
    (Moved definition further down into the __KERNEL__ section: Trond)
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit e148582e10a2c1a23dfc09210df4a18bc6cca4e9
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Dec 13 16:43:13 2006 -0500

    NFSv4: Add lockdep checks to nfs4_wait_clnt_recover()
    
    Attempt to detect deadlocks due to caller holding locks on clp->cl_sem
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a6a352e93dfa78db8903f0e3610abb76efbf7fc9
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Dec 13 16:43:06 2006 -0500

    NFSv4: Don't start state recovery in nfs4_close_done()
    
    We might not even have any open files at this point...
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 7c85d9007d05436e71d2b805b96c1e36a8193bd4
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Dec 13 15:23:48 2006 -0500

    NFS: Fixup some outdated comments...
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d30c8348a4ba292a09addd122de2f3189c21a7ff
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Dec 13 15:23:47 2006 -0500

    NFS: nfs_writepages() cleanup
    
    Strip out the call to nfs_commit_inode(), and allow that to be done by
    nfs_write_inode().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f40313ac39fedca519c36fdc454acf2632e641da
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jan 13 02:28:08 2007 -0500

    NFS: Micro-optimisation for nfs_wb_page()
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 02241bc47e8961768de83d855accd0dcad1df045
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jan 13 02:28:07 2007 -0500

    NFS: Ensure that ->writepage() uses flush_stable() when reclaiming pages
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8e0969f0451eaf7cf32f2ec3946196d8d0b1cb2c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Dec 13 15:23:44 2006 -0500

    NFS: Remove nfs_readpage_sync()
    
    It makes no sense to maintain 2 parallel systems for reading in pages.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c228fd3aeef55637354167faead74c579d5da28b
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jan 13 02:28:11 2007 -0500

    NFSv4: Cleanups for fs_locations code.
    
    Start long arduous project...  What the hell is
    
    	struct dentry = {};
    
    all about?
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit faebf4e2bb0efad9dda396ea13d5c6ad15d7d7fb
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jan 13 02:28:11 2007 -0500

    NFSv4: Don't require that NFSv4 mount paths begin with '/'
    
    Addresses the regression noted in
      http://bugzilla.linux-nfs.org/show_bug.cgi?id=134
    
    Also mark a couple of other regressions as requiring fixing.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c79ba787c11e767ffaf8d723923afda99ba6c63c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jan 31 08:16:24 2007 -0500

    NFS: Dont clobber more uptodate values in nfs_set_verifier()
    
    nfs_lookup_revalidate and friends are not serialised, so it is currently
    quite possible for the dentry to be revalidated, and then have the
    updated verifier replaced with an older value by another process.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ef75c7974b383769ae5741cf930b8aa4dcaef395
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Jan 16 10:09:44 2007 -0500

    NFS: Also use readdir info to revalidate positive dentries
    
    If the fileid of the cached dentry fails to match that returned by
    the readdir call, then we should also d_drop. Try to take into account the
    fact that on NFSv4, readdir may return the "mounted_on_fileid" by looking
    for submounts.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit df1d5d23d3a1a713c69b0f9ec67c59aeca3ce6b3
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Jan 15 13:56:29 2007 -0500

    NFS: Fix a readdir/lookup inefficiency.
    
    Make sure that nfs_readdir_lookup() handles negative dentries correctly.
    If d_lookup() returns a negative dentry, then we need to d_drop() that
    since readdir shows that it should be positive.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ccfeb506231348a3c60ab0fdb5753a574653e3c0
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jan 13 02:28:12 2007 -0500

    NFS: Fix up "rm -rf"...
    
    When a file is being scheduled for deletion by means of the sillyrename
    mechanism, it makes sense to start out writeback of the dirty data as
    soon as possible in order to ensure that the delete can occur. Examples of
    cases where this is an issue include "rm -rf", which will busy-wait until
    the file is closed, and the sillyrename completes.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit ab91f264cfbafd079dcb1bd02e9803c2dd65de19
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Feb 2 14:47:17 2007 -0800

    NFSv4: Fix NFS4_enc_server_caps_sz/NFS4_dec_server_caps_sz
    
    Insert missing encode_putfh_maxsz/decode_putfh_maxsz
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f2d0d85e58099d518cb50b1c95fc1fc62bbce1b8
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Feb 2 14:46:09 2007 -0800

    NFSv4: Fix Oops in nfs4_create_referral_server
    
    The filehandle that is passed into nfs4_create_referral_server is
    not initialised. The expectation is that nfs4_create_referral_server will
    initialise it, and return it to the caller.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 2efef837fb84f78cee7439804cb3722bffc64e75
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Feb 3 13:38:41 2007 -0800

    RPC: Clean up rpc_execute...
    
    The error values are already propagated through task->tk_status, and
    none of the callers check one without checking the other, so we can
    drop the return value.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 54cc533aaa0dc331ad126f0aacfb19572adee638
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Feb 3 13:38:40 2007 -0800

    RPC: Fix double free in portmapper code
    
    rpc_run_task is guaranteed to always call ->rpc_release.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit a995e9eb3258df6ab2e9f958e08003978e50d568
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Feb 2 15:37:43 2007 -0800

    NLM: Fix double free in __nlm_async_call
    
    rpc_call_async() will always call rpc_release_calldata(), so it is an
    error for __nlm_async_call() to do so as well.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 44746438973e4f9ed9bdf3347e75f60f105b325a
Author: Jiri Kosina <jkosina@suse.cz>
Date:   Thu Feb 1 16:43:07 2007 -0800

    [SCSI] Buslogic: local_irq_disable() is redundant after local_irq_save()
    
    drivers/scsi/BusLogic.c::BusLogic_Command() contains local_irq_disable() call
    after local_irq_save().  This looks redundant.
    
    Signed-off-by: Jiri Kosina <jkosina@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0d44b2ba287ea98547097ad2b8b0cc5f0589b8d2
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Wed Jan 31 23:50:49 2007 +0100

    [CPUFREQ] Longhaul - Remove duplicate tables
    
    Now there is no need to depend on -1 in Nehemiah tables. After
    previous change code is eliminating multipliers lower then 5.0
    by minmult for Nehemiah A and B.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 980342a7eb6b4ebcc5feffe6287ad5cda5a68a4b
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Wed Jan 31 23:42:47 2007 +0100

    [CPUFREQ] Longhaul - Introduce Nehemiah C
    
    Looks like some time ago I introduced a bug to Longhaul.
    I had report that 9x133Mhz CPU is seen as 5x133MHz. So I
    changed multipliers table. That was a mistake. According to
    documentation table was correct. So only way to avoid 5 or 9
    dilema is not use MaxMHzBR for PowerSaver 1.0. One code that
    works on all processors. To do it I need also separate flag for
    Nehemiah C (min = x4.0) and Nehemiah (min = x5.0).
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 58389a86df48ff927846df9537ea34d9961b5c44
Author: Joachim Deguara <joachim.deguara@amd.com>
Date:   Tue Jan 30 16:53:54 2007 +0100

    [CPUFREQ] fix cpuinfo_cur_freq for CPU_HW_PSTATE
    
    This fixes the cpuinfo_cur_freq value by using the correct
    find_khz_freq_from_fiddid() when the CPU uses hardware p-states.
    
    Signed-off-by: Joachim Deguara <joachim.deguara@amd.com>
    Acked-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 14796722839ee50ed2a2c7a6a135e7d0888aaada
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Fri Jan 19 22:28:22 2007 +0100

    [CPUFREQ] Longhaul - Remove "ignore_latency" option
    
    There is no need to have this option in Longhaul anymore.
    It was for laptop with CLE266 chipset in times, when only
    ACPI C3 was used to switch frequency. Now we have native
    support not only for CLE266, but CN400 too. Would be good
    to have support for PN266, but I can't find datasheet for it.
    Looks like BIOS for CPU's faster then 1GHz don't support
    ACPI C2 nor C3.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit a030ce4477baa06dd9c037ccd3c8d171aac9ed44
Author: Thomas Hellstrom <thomas@tungstengraphics.com>
Date:   Tue Jan 23 10:33:43 2007 +0100

    [AGPGART] Allow drm-populated agp memory types
    
    This patch allows drm to populate an agpgart structure with pages of its own.
    It's needed for the new drm memory manager which dynamically flips pages in and out of AGP.
    
    The patch modifies the generic functions as well as the intel agp driver. The intel drm driver is
    currently the only one supporting the new memory manager.
    
    Other agp drivers may need some minor fixing up once they have a corresponding memory manager enabled drm driver.
    
    AGP memory types >= AGP_USER_TYPES are not populated by the agpgart driver, but the drm is expected
    to do that, as well as taking care of cache- and tlb flushing when needed.
    
    It's not possible to request these types from user space using agpgart ioctls.
    
    The Intel driver also gets a new memory type for pages that can be bound cached to the intel GTT.
    
    Signed-off-by: Thomas Hellstrom <thomas@tungstengraphics.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 0316fe8319ff62e527d0d91a3bc7df1c59eafae8
Author: Zwane Mwaikambo <zwane@infradead.org>
Date:   Mon Jan 29 21:20:31 2007 -0800

    [AGPGART] compat ioctl
    
    The following video card requires the agpgart driver ioctl
    interface in order to detect video memory.
    
    00:02.0 VGA compatible controller: Intel Corporation Mobile
    945GM/GMS/940GML Express Integrated Graphics Controller (rev 03)
    
    Tested on a Thinkpad Z61t, Xorg.0.log from a 32bit debian Xorg is at;
    
    http://montezuma.homeunix.net/Xorg.0.log
    
    Signed-off-by: Zwane Mwaikambo <zwane@infradead.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 083d1631be7c36309359792ecf61aaf88559043f
Author: Wu, Gilbert <Gilbert_Wu@adaptec.com>
Date:   Tue Jan 30 15:31:25 2007 -0800

    [SCSI] aic94xx: update for v28 firmware
    
    These changes work compatibly with the old V17 firmware
    
    Contribution:
    
       Ed Chim <ed_chim@adaptec.com>
       Gilbert Wu <gilbert_wu@adaptec.com>
    
    Change Log:
    
    1.    Use dword instead of qword to display the value of Connection
    State register for debug purpose.
    
    2.    There are some registers location of AIC94xx chip has been changed
    according to the new V28 firmware. The patch has redefined the register
    location and provided initialization.
    
    3.    The new sequencer firmware v28 for Aic94xx SAS/SATA Linux open
    source device driver can be downloaded from
    http://www.adaptec.com/NR/exeres/35B611BC-9789-4B5B-82C6-85A2CCA8A46A.htm
    
    Signed-off-by: Gilbert Wu <gilbert_wu@adaptec.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 292148f8bb2b5d120440e046d24de07a739461aa
Author: Brian King <brking@linux.vnet.ibm.com>
Date:   Tue Jan 30 17:51:17 2007 -0600

    [SCSI] scsi_error: Fix lost EH commands
    
    If an EH command times out today, the LLDD's abort handler
    will be called to abort the command. It is assumed that this
    completes successfully, which can result in the command getting
    completed later resulting in an oops. Improve the current
    implementation by escalating all the way to host reset if
    necessary in order to clean up the EH command.
    
    Signed-off-by: Brian King <brking@linux.vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 214fbb75075efa677b614be79a2d62dd79785b4f
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Mon Jan 29 23:48:25 2007 -0800

    [SCSI] aic94xx: Add default bus reset handler
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 058e2c474897dc53c88ac9162f9a9b16a879b8cd
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Mon Jan 29 23:48:22 2007 -0800

    [SCSI] aic94xx: Remove TMF result code munging
    
    In asd_initiate_ssp_tmf, the TMF result code is replaced with
    TMF_RESP_FUNC_FAILED except when the TMF returns a result code immediately.
    However, TMFs can return result codes via an ESCB... yet these codes are
    also replaced with "FAILED".  The only values that can fall into that case
    are TMF_* codes anyway, so get rid of this code where COMPLETE and SUCCESS
    are turned into FAILED.  This also lets us propagate those TMF_* codes up
    to the caller.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a9344e68ac0a656475006737dbc258d69fe4f7b0
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Mon Jan 29 23:48:19 2007 -0800

    [SCSI] libsas: Add an LU reset mechanism to the error handler
    
    After discussion with andmike and dougg, it seems that the purpose of
    eh_device_reset_handler is to issue LU resets, and that
    eh_bus_reset_handler would be a more appropriate place for a phy reset.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 423f7cf467045eab616f97309aed87a54b5e351d
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Tue Jan 30 12:07:27 2007 -0800

    [SCSI] libsas: Don't BUG when connecting two expanders via wide port
    
    libsas: Don't BUG when connecting two expanders via wide port
    
    When a device is connected to an expander, the discovery process goes through
    sas_ex_discover_dev to figure out what's attached to the phy.  If it is the
    case that the phy being discovered happens to be the second phy of a wide link
    to an expander, that discover_dev function will incorrectly call
    sas_ex_discover_expander, which creates another sas_port and tries to attach the
    other sas_phys to the new port, thus triggering a BUG.  The correct thing to do is
    to check the other ex_phys of the expander to see if there's a sas_port for this
    sas_phy, and attach the sas_phy to the existing sas_port.
    
    This is easily triggered if one enables the phys of a wide port between
    expanders one by one.
    
    This second version of the patch fixes a small regression in the case where
    all the phys show up at once and we accidentally try to attach to a port
    that hasn't been created yet.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9abe16c670bd3d4ab5519257514f9f291383d104
Author: Kai Makisara <Kai.Makisara@kolumbus.fi>
Date:   Sat Feb 3 13:21:29 2007 +0200

    [SCSI] st: fix Tape dies if wrong block size used, bug 7919
    
    On Thu, 1 Feb 2007, Andrew Morton wrote:
    > On Thu, 1 Feb 2007 15:34:29 -0800
    > bugme-daemon@bugzilla.kernel.org wrote:
    >
    > > http://bugzilla.kernel.org/show_bug.cgi?id=7919
    > >
    > >            Summary: Tape dies if wrong block size used
    > >     Kernel Version: 2.6.20-rc5
    > >             Status: NEW
    > >           Severity: normal
    > >              Owner: scsi_drivers-other@kernel-bugs.osdl.org
    > >          Submitter: dmartin@sccd.ctc.edu
    > >
    > >
    > > Most recent kernel where this bug did *NOT* occur: 2.6.17.14
    > >
    > > Other Kernels Tested and Results:
    > >
    > >     OK 2.6.15.7
    > >     OK 2.6.16.37
    > >     OK 2.6.17.14
    > >     BAD 2.6.18.6
    > >     BAD 2.6.18-1.2869.fc6
    > >     BAD 2.6.19.2 +
    > >     BAD 2.6.20-rc5
    > >
    > > NOTE: 2.6.18-1.2869.fc6 is a Fedora modified kernel, all others are from kernel.org
    > >
    ...
    > > Steps to reproduce:
    > > Get a Adaptec AHA-2940U/UW/D / AIC-7881U card and a tape drive,
    > > install a recent kernel
    > > set the tape block size - mt setblk 4096
    > > read from or write to tape using wrong block size - tar -b 7 -cvf /dev/tape foo
    > >
    Write does not trigger this bug because the driver refuses in fixed block
    mode writes that are not a multiple of the block size. Read does trigger
    it in my system.
    
    The bug is not associated with any specific HBA. st tries to do direct i/o
    in fixed block mode with reads that are not a multiple of tape block size.
    
    The patch in this message fixes the st problem by switching to using the
    driver buffer up to the next close of the device file in fixed block mode
    if the user asks for a read like this.
    
    I don't know why the bug has surfaced only after 2.6.17 although the st
    problem is old. There may be another bug in the block subsystem and this
    patch works around it. However, the patch fixes a problem in st and in
    this way it is a valid fix.
    
    This patch may also fix the bug 7900.
    
    The patch compiles and is lightly tested.
    
    Signed-off-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 894d79bedd8b48fe838083f2d2a42ac09817c530
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 02:13:53 2007 -0500

    asus-laptop: merge with ACPICA table update
    
    No longer need a buffer for a copy of the DSDT,
    just a pointer to the mapped table.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 274ec7a8c07036bd02e8f2301456e443ef30b8a8
Merge: 6b25970... b03637b...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:39:22 2007 -0500

    Pull output-switch into test branch

commit 6b259707d53f0f25f0b24318a0774f1ae7e7e92c
Merge: a4144e4... db503422...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:39:07 2007 -0500

    Pull trivial into test branch
    
    Conflicts:
    
    	drivers/acpi/scan.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a4144e451ce1951e8dad2aa8e2288f75ab745172
Merge: eee3c85... 8def05f...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:38:30 2007 -0500

    Pull asus into test branch

commit eee3c859c486d4f110f154807430eaf825ff4a3d
Merge: 5473526... fb5c3e1...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:38:16 2007 -0500

    Pull motherboard into test branch
    
    Conflicts:
    
    	drivers/acpi/motherboard.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 547352660506ab99d6b0bad58dea495bf3718cee
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Thu Jan 11 02:09:09 2007 -0500

    ACPI: bay: Convert ACPI Bay driver to be compatible with sysfs update.
    
    	Set fake hid for ejectable drive bay.
    	Match bay devices by checking the hid.
    	Remove .match method of Bay driver.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 975a8e3ed2b9eab9f062a1e0ba7fe180e15204e1
Merge: 1fcb71b... bfd8022...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:14:35 2007 -0500

    Pull sysfs into test branch
    
    Conflicts:
    
    	Documentation/feature-removal-schedule.txt
    	include/acpi/acpi_drivers.h
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1fcb71b84b05ff3bfd5b5b2eca9a9b3d13a76e3a
Merge: e8bdc5a... 0ed1e38...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:12:39 2007 -0500

    Pull bay into test branch

commit 0ed1e38d513ea683ce125e698dd41d31441e0e8c
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 2 22:39:16 2007 -0500

    ACPI: bay: new driver is EXPERIMENTAL
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5d22e1e83aac1f81f948ac8bff281487c11cc967
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Dec 4 14:49:39 2006 -0800

    ACPI: bay: make drive_bays static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2b167c01190b647c976e7fab312f2e3d3b3a785f
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Mon Dec 18 18:07:00 2006 -0500

    ACPI: bay: make bay a platform driver
    
    Convert the bay driver to be a platform driver, so that we can have
    sysfs entries.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e9dd85e5bdff2a3981dfaa55869ba920e985ea8a
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Mon Dec 18 18:06:00 2006 -0500

    ACPI: bay: remove prototype procfs code
    
    Remove all the procfs related code.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5447cbb278fd01c402180ab1e820b95101e782fa
Author: Len Brown <len.brown@intel.com>
Date:   Sat Oct 21 01:15:41 2006 -0400

    ACPI: bay: delete unused variable
    
    drivers/acpi/bay.c: In function bay_notify:
    drivers/acpi/bay.c:491: warning: unused variable bay
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 01b57e73728880b787c85e27ad06c249412813b1
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Fri Oct 20 14:30:25 2006 -0700

    ACPI: bay: new driver adding removable drive bay support
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fe9a2f77e5ad508b18671571c0b3f6f79ea709a8
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Fri Feb 2 22:33:00 2007 -0500

    ACPI: dock: check if parent is on dock
    
    When determining if a device is on a dock station, we should
    check the parent of the device as well.
    
    Signed-off-by:  Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e8bdc5a9c56c140c732246a298922c3cf3777460
Merge: c6f4bc2... b0b7eaa...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Feb 3 01:08:52 2007 -0500

    Pull acpica into test branch

commit b0b7eaaf0c7aefd118d3ff8640fbed75a9fad9a1
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Thu Jan 25 22:39:44 2007 -0500

    ACPICA: fix gcc build warnings
    
    drivers/acpi/namespace/nsparse.c:126: warning: int format, different type arg (arg 7)
    drivers/acpi/tables/tbfadt.c:224: warning: unsigned int format, different type arg (arg 6)
    drivers/acpi/utilities/utdebug.c:184: warning: cast from pointer to integer of different size
    drivers/acpi/utilities/utdebug.c:184: warning: cast from pointer to integer of different size
    drivers/acpi/utilities/utdebug.c:197: warning: cast from pointer to integer of different size
    drivers/acpi/processor_idle.c:1093: warning: long long unsigned int format, u64 arg (arg 5)
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c6f4bc211122c86de85a6c93f139319957fd1f8a
Merge: 7e23772... 82cae99...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 2 22:42:44 2007 -0500

    Pull bugzilla-7349 into test branch

commit 7e23772f414cdbfb2a08aed237d6e926bb1cb728
Merge: bcd8b54... 2f3d000...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 2 22:42:02 2007 -0500

    Pull video into test branch

commit bcd8b54f7d9c980b945d3f1cc48f76f2fa6e2e1b
Merge: e47fddf... d91a007...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 2 22:21:10 2007 -0500

    Pull hp-pci-root into test branch

commit 3e643e77a929202455a0cc868c2030a5ba8d1371
Author: John Keller <jpk@sgi.com>
Date:   Tue Jan 30 01:18:38 2007 -0500

    Altix: Add ACPI SSDT PCI device support (hotplug)
    
    Support for dynamic loading and unloading of ACPI SSDT tables upon slot
    hotplugs and unplugs.
    
    On SN platforms, we now represent every populated root bus slot with a single
    ACPI SSDT table containing info for every device and PPB attached to the slot.
     These SSDTs are generated by the prom at initial boot and hotplug time.  The
    info in these SSDT tables is used by the SN kernel IO "fixup" code (which is
    called at boot and hotplug time).
    
    On hotplugs (i.e.  enable_slot()), if running with an ACPI capable prom,
    attempt to obtain a new ACPI SSDT table for the slot being hotplugged.  If
    successful, add the table to the ACPI namespace (acpi_load_table()) and then
    walk the new devices and add them to the ACPI infrastructure (acpi_bus_add()).
    
    On hot unplugs (i.e.  disable_slot()), if running with an ACPI capable prom,
    attempt to remove the SSDT table associated with the slot from the ACPI
    namespace (acpi_unload_table_id()) and infastructure (acpi_bus_trim()).
    
    From: John Keller <jpk@sgi.com>
    
     A bug was fixed where the sgi hotplug driver was removing
     the slot's SSDT table from the ACPI namespace a bit too early in
     disable_slot(). Also, we now call acpi_bus_start() subsequent
     to acpi_bus_add().
    
    Signed-off-by: Aaron Young <ayoung@sgi.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6f09a9250a5d76c0765cd51a33e0a042e9761cfc
Author: John Keller <jpk@sgi.com>
Date:   Tue Jan 30 01:17:37 2007 -0500

    Altix: ACPI SSDT PCI device support
    
    Add SN platform support for running with an ACPI
    capable PROM that defines PCI devices in SSDT
    tables. There is a SSDT table for every occupied
    slot on a root bus, containing info for every
    PPB and/or device on the bus. The SSDTs will be
    dynamically loaded/unloaded at hotplug enable/disable.
    
    Platform specific information that is currently
    passed via a SAL call, will now be passed via the
    Vendor resource in the ACPI Device object(s) defined
    in each SSDT.
    
    Signed-off-by: John Keller <jpk@sgi.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 647fb47dfabeffd2f1706013ebf5cfc92b70d273
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 2 22:14:22 2007 -0500

    ACPICA: reduce conflicts with Altix patch series
    
    Syntax only -- no functional changes.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 07c861d6d9ca3dc58e225bcfe2da0f378af6fa6c
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:48:50 2007 -0700

    [SCSI] fusion - bump version - 3.04.04
    
    bump version, and fix email addr for lsi support
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cd2c61911dfe0d87cb872571739d5838cc233747
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:47:47 2007 -0700

    [SCSI] fusion - error handling bug fix's
    
    misc error handling bug fix's
    - properly interpret iocstatus returned after task management request
    - clear tmState after a failed doorbell
    - cleanup mptscsih_taskmgmt_complete
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2ecce492290bf0d5eedc76cf0f4bf45f8c3f42bc
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:47:08 2007 -0700

    [SCSI] fusion - report wide port sas address's for hba phys
    
    Return proper sas address to sas transport layer for parent phys that
    form a wide port. Current implementation returns a different address
    for each phy, incremented by one from the base address.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit defad23020bb7701b3ad414135c73fc03054507b
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Fri Feb 2 22:02:55 2007 -0500

    ACPI_NUMA: fix HP IA64 simulator issue with extended memory domain
    
    ACPI 3.0 incorporated the SRAT spec, upping the table version to 2,
    and extending the size of the proximity domain from 1-byte to 4-bytes.
    This extension was into a reserved field that firmware should
    set to 0, but the HP simulator had non-zero values there
    resulting in unexpected huge numbers.
    
    So mask the domain down to 8-bits for now.
    A more general fix will be to check the table version
    supplied by firmware and get paranoid about reserved fields.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit df9e062ad994c4db683377b108c0dbed4690e4b0
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:46:21 2007 -0700

    [SCSI] fusion - serialize target resets in mptsas.c
    
    Fusion firmware requires target reset following hotplug removal event,
    with purpose to flush target outstanding request in fw. Current implementation
    does the target resets from delayed work tasks, that in heavy load
    conditions, take too long to be invoked, resulting in command time outs
    This patch will issue target reset immediately from ISR context, and will
    queue remaining target resets to be issued after the previous one completes.
    The delayed work tasks are spawned during the target reset completion.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b506ade9f3c309ac2ce3ffc4039f731097506038
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:45:37 2007 -0700

    [SCSI] fusion - inactive raid support, and raid event bug fix's
    
    inactive raid support, e.g. exposing hidden raid components
    belonging to a volume that are inactive.  Also misc bug fix's for
    various raid asyn events.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c6c727a1a0ff90c80425b7226557b2354e00cf7b
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:44:54 2007 -0700

    [SCSI] fusion - iocstatus, loginfo, and event debug updates
    
    various string updates for iocstatus, logingo, and fw asyn events.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 873c82ed165a345fa381415b9734d26e9af4ec96
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:44:06 2007 -0700

    [SCSI] fusion - added mptspi debug
    
    helpful debug for mptspi module
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5a9c47b1344b514758d5d7f193c672850390cc36
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:43:17 2007 -0700

    [SCSI] fusion - move SPI API over to mptspi.c
    
    Move some functions that only apply to the mptspi module over from mptscsih.c
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 793955f549c710a1b0c18f823d5d710840747b15
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:42:20 2007 -0700

    [SCSI] fusion - Greater than 255 target and lun support
    
    Add support for greater than 255 target and luns.
    Kill the hd->Target[] field, and change all references
    of bus_id/target_id, to channel/id.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 45eded8703c0f9d58a8807f80baa9fe98ac0ec67
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Fri Feb 2 21:48:40 2007 -0500

    ACPI: fix HP RX2600 IA64 boot
    
    Copy space_id of GAS structure to newly created GAS.
    The previous FADT conversion code defaulted to IO space.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0e5683350f5bcd23d5d579f91d488caeda432617
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Fri Feb 2 21:37:53 2007 -0500

    ACPI: build fix for IBM x440 - CONFIG_X86_SUMMIT
    
    i386 srat.c broke due to re-names from ACPICA table-manager re-write.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 502c62f17aa7daa78d5da963305251b872885ff9
Author: Eric Moore <eric.moore@lsi.com>
Date:   Mon Jan 29 09:41:12 2007 -0700

    [SCSI] spi transport class: export spi_dv_pending
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5763d3c7a0c2b165504954b1eeb898fb8d97d8f5
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:24 2007 +0300

    ACPICA: Update version to 20070126
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 035f994b3ccfcfc555f838e2f33a2e49721e8533
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:24 2007 +0300

    ACPICA: Fix for incorrect parameter passed to AcpiTbDeleteTable during table load.
    
    Bad pointer was passed in the case where the DSDT is overridden.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6c9deb7201d96733dcd1b4cc44e99232308db359
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:24 2007 +0300

    ACPICA: Update copyright to 2007.
    
    Added 2007 copyright to all module headers and signons. This affects
    virtually every file in the ACPICA core subsystem, iASL compiler,
    and the utilities.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 11bf04c44fd284a5f4e2348a04da6f749cace250
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Allow processor to be declared with the Device() instead of Processor()
    
    Allow processor to be declered with the Device(), such as:
    Device(CPU1234) {
    	Name(_HID, "ACPI007")
    	Name(_UID, 1234)
    }
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f18c5a08bf035b51939281f5b49aa3ae45cea6ce
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Allow ACPI id to be u32 instead of u8.
    
    Allow ACPI id to be u32 instead of u8.
    Requires drop of conversion tables with the acpiid as index.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5008740e27540e4069a2f8235f8308aba46036a2
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Update version to 20061215
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d41eb99bac4063aa3fac2dbb8ca01bedd9f0b3bf
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Added option to display memory statistics upon termination.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit afbb9e659d584bd5bf0604848c91afd5761ed7a1
Author: Valery A. Podrezov <valery.a.podrezov@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Enhance debugger statistics/memory command.
    
    Debugger: Enhanced the Statistics/Memory command to emit the
    total (maximum) memory used during execution, as well as the
    maximum memory consumed by each of the various object types.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ea5415785146afe37dd2d1179a6c3a34fd26b52f
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Update a comment.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2e23f8513e9d0cc6d07d36e4555badc2518df433
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Debugger multithreading enhancements.
    
    Implemented enhancements to the multithreading support within
    the debugger to enable better multithreading evaluation of the subsystem.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 59fa85057e12ff135df54266722b2064c418fc05
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Removed all 16-bit support.
    
    Support for 16-bit ACPICA has been completely removed since it is
    no longer necessary and it clutters the code. All 16-bit macros,
    types, and conditional compiles have been removed, cleaning up
    and simplifying the code across the entire subsystem.
    DOS support is no longer needed since the Linux firmware kit
    is now available.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ff40c8a3f258e9a54b0b94b92d5e2d9d88a39954
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Update version to 20061109
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1a666f8be16a0e1580e0f37e1322d06affb84e1b
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Add include of actables.h
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c857303ad496e1f52955e95994a67869882e89f9
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Fail AcpiEnable if ACPI tables not loaded.
    
    AcpiEnable will now fail if all of the required ACPI tables are not
    loaded (FADT, FACS, DSDT). BZ 477
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 987c21a0b0081d480ec3cd04875509cdc10e15e7
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Add ACPI_MAX macro
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7c9626bade13de3f160f0926455328650045d6cd
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:23 2007 +0300

    ACPICA: Ensure that all structures in acobject.h are aligned, via #pragma.
    
    Thus, even if the default compiler setting is non-aligned, the header is compiled
     correctly.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8876016bb384044a59c1e2ddcad4cf41b06344b9
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Remove global lock handler on AcpiTerminate.
    
    Added AcpiEvRemoveGlobalLockHandler
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a6823e12ca3f79a8c0f8b2d14976ab2152d117e5
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Fixes for load() operator.
    
    Optimized the Load operator in the case where the source operand is an
    operation region. Simply map the operation region memory, instead of
    performing a bytewise read.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 428f211297bc95fd41f23830eab4180339020dd0
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Miscellaneous table manager updates and optimizations
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 77f6a9fca39f4f19d2d9d5fff1ff5c2ccf20629c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Update debug output routines for data structure changes
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 15a58ed12142939d51076380e6e58af477ad96ec
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Remove duplicate table definitions (non-conflicting), cont
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5f3b1a8b6737b09ce5df4ec9fad4ad271aecb5fb
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Remove duplicate table definitions (non-conflicting)
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ad363f80c386bc4701b1bc2cdf08ca9b96a9337b
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Remove duplicate table definitions.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cee324b145a1e5488b34191de670e5ed1d346ebb
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: use new ACPI headers.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ceb6c46839021d5c7c338d48deac616944660124
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Remove duplicate table manager
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a7a22fa9c368ba22f13b87585052b8cdbbc18f7a
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Update version to 20061011
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f1c2b1daf040d2feebfbbd4a0cd80cde856fc031
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:22 2007 +0300

    ACPICA: Fixes for parameter validation.
    
    Extra checks for valid handle/path combinations, BZ 478
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c1014629c0fc563be65e675e72bcc9bd7db50195
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Abort downward walk on temporary node detection.
    
    Enhancement to code that ignores temporary  namespace nodes
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3effba32069514e56bcb778f90cd34fdbac79a50
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Update comments
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ec3153fb0e96988dc7e378b3ab01e05131ba713b
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Use manifest constants for parse pass number
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b7a69806308600711589e4ca306d18dd029ef0cf
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: _CID support for PCI Root Bridge detection.
    
    Implemented _CID support for PCI Root Bridge detection. If the _HID
    does not match the predefined root bridge IDs, the _CID list (if present)
     is now obtained and also checked for an ID match
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d1fdda83f7c567f376ddd4305833de09f7919ca9
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Fix race condition with AcpiWalkNamespace.
    
    Fixed a problem with a possible race condition between threads executing
    AcpiWalkNamespace and the AML interpreter. This condition was removed by
    modifying AcpiWalkNamespace to (by default) ignore all temporary
    namespace entries created during any concurrent control method execution
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9bc75cff4919f9d947982d805aed89582a20d04d
Author: Valery Podrezov <valery.a.podrezov@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Eliminate control method 2-pass parse/execute.
    
    Completed an AML interpreter performance enhancement for control method
    execution. Previously a 2-pass parse/execution, control methods are now
    completely parsed and executed in single pass. This improves overall
    interpreter performance by ~25%, reduces code size, and reduces CPU stack use.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4d0b4af958453afe871022e44abd57fac09baf67
Author: Mikhail Kouzmich <mikhail.v.kouzmich@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Restructured module into multiple functions.
    
    Restructured the AML ParseLoop function, breaking it into several
    subfunctions in order to reduce CPU stack use and improve maintainability
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2b705a8abbce1753c1e5af5ae2ed97e374277654
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Update version to 20060927
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cb219bb6bf6f8cabdf07fbbca8487eee5a91ff05
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Add new subsystem state bit that is set after SubsystemInitialize is called
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 65e4b9b05dc10ee84b5c9fc3039fbcc6863743d7
Author: Fiodor Suietov <fiodor.f.suietov@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Fix for possible memory leak and fault.
    
    Fixed a possible memory leak and fault in acpi_ex_resolve_object_to_value()
    during a read from a buffer or region field. (BZ 458)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 867c9aec576e0c0d89dfa3922019320619002129
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Update interpreter error paths to always report the error
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f70a5e7b6c28e0b08f721204f4b98c5d1cfb44d9
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: On AML mutex force-release, set depth to zero (was 1).
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 310a7f7fee489b7dadd27b0d8487bd0ce66281e7
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Use faster ByIndex interface to get FACS
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d8c71b6d3b21cf21ad775e1cf6da95bf87bd5ad4
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Remove obsolete Flags parameter.
    
    Remove flags parameter for acpi_{get,set}_register().
    It is no longer necessary now that these functions use a
    spinlock for mutual exclusion.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 73ca0fbcc25a6080db4136f55dbcd5fe7b33398f
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Fix for Global Lock semaphore.
    
    Fixed a problem with the Global Lock where the lock could appear to be obtained before it is actually obtained, semaphore created with one unit.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 14d64b5e36a82ef21a51d8a15639d26b75a79499
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:21 2007 +0300

    ACPICA: Add full table name to disassembler output
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4cdf469090f732ab8a45b2d30b43ec5745699285
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Update version to 20060912
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 977a6226feae3e2c10a4d8227625ff0f04b49239
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Fix trace output name and whitespace
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0fab8997f18f71b2391e72e49d8d31a395352dcc
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Fix memory leak in table load error path
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7139284460fba90c4dfcfae76680ad36b45f5982
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: New common routine for creating and verifying a local FADT.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 13b572a35ed904ae1e162f8ee89ca7fd6992b44c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Report error if method creates 2 objects with the same name
    
    Fixed a regression where an error was no
    longer emitted if a control method attempts to create 2
    objects of the same name. This previously and now returns
    AE_ALREADY_EXISTS. When this exception occurs, it invokes
    the mechanism that will dynamically serialize the control
    method to possible prevent future errors. (BZ 440)
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ea5d8ebcbb7ca3bcb35a2133805571295f3f06e8
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: FADT verification is now table driven.
    
    Disassembler now verifies an input
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 775d85b6aa33116da8aacad4168c540ce86a1803
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Add declarations for ASF! sub-tables
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cc2a472b8411ce0b71738039e15d45917da30fbe
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: IsResourceTemplate now returns ACPI_STATUS
    
    to differentiate the failure modes.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 15f0c0d1ef7804d098fe3eb0a3f350a490ca269c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Allow type ANY to be the target of the Scope operator.
    
    Useful during disassembly where the target may
    be in a different table and thus the type is unknown.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 77389e1263a7c9bc8040bda726e08b6501ba1c8b
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: re-factor table init routines for benefit of iASL
    
    Required new table init interface since iASL does not use RSDP/XSDT.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 694b0b2092bce3f4610626b04158a6f3a95058e6
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: add ASF comment
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e56b638bbee3c17b0dee39495bd15afe64db1b94
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Update comments in tbfadt.c
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 765ec20180fb70b4ee9d730167b2a0b76879f791
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Delete stale FADT functions outside tbfadt.c.
    
    Moved all FADT-related functions to a new file, tbfadt.c.
    Eliminated the acpi_hw_initialize function - the
    FADT registers are now validated when the table is loaded.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1ba753acb372c2955a4843302e92e49ce82e2fea
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Re-implement interpreters' "serialized mode"
    
    Enhanced the implementation of the interpreters'
    serialized mode (boot with "acpi_serialize" to set
    acpi_glb_all_methods_serialized flag.)
    When this mode is specified, instead of creating a serialization
    semaphore per control method, the interpreter lock is
    simply no longer released before a blocking operation
    during control method execution. This effectively makes
    the AML Interpreter single-threaded. The overhead of a
    semaphore per-method is eliminated.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 95befdb398e0112ede80529f6770644ecfa5a82e
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Create tbfadt.c to hold all FADT-related functions
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b89b71a0019660d73e3c9671205c49e443d7085c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Cleanup of FADT verification function.
    
    Removed offset display, not needed.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0eaa14c02809cc93386b907846da5c024fd73012
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:20 2007 +0300

    ACPICA: Update version to 20060831
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 84fb2c97731c1631c5548c15f3698ad82c274245
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Split acpi_format_exception into two parts
    
    Split acpi_format_exception into two parts. New
    function is acpi_ut_verify_exception and will be used to
    verify exception codes returned by user.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 69874165ab953a62f9adb3096ccd84ed2561a602
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Store GPE number instead of bitmask
    
    Update internal GPE data structure to simplify
    debug, use gpe_number instead of register bitmask.
    
    Signed-off-by: Bob Moore <bob.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3d81b236a82a26fa8bdef9096829675d81890dc9
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Fix unalignment in acpi_ut_repair_name
    
    Update interface to acpi_ut_repair_name() to avoid
    alignment issues on IA64
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c5a7156959e89b32260ad6072bbf5077bcdfbeee
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Disable all wake GPEs after first one recieved
    
    Change for GPE support: when a wake GPE is
    received, now all wake GPEs are immediately disabled to
    prevent the waking GPE from firing again, and to prevent
    other wake GPEs from interrupting the wake process.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fdffb72d23172c91af56983f303d1986994df522
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Add acpi_gpe_count global to track the number of GPE events
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2502fffb1958da66fa50a475081cb6827acdd9f3
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Add support for DMAR table
    
    Implement support for ACPI DMAR table (DMA
    Remapping Table) in header files and disassembler.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ad71860a17ba33eb0e673e9e2cf5ba0d8e3e3fdd
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: minimal patch to integrate new tables into Linux
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a4bbb810dedaecf74d54b16b6dd3c33e95e1024c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Lint changes
    
    Lint changes
    Move RSDT/XSDT pointer extraction to separate function
    Warning on 32-bit platforms if XSDT pointers use more than 32 bits.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4bf273939c99fae5bae399f51c417a552d74b97f
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Fix for FADT conversion in 64-bit mode
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8f34890dce60f7df6dd23a0d04977c6572adaab8
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: Update comments for individual table fields
    
    comments only
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c5fc42ac4d4d6d3e3f619290b86890cb3725d2f8
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:19 2007 +0300

    ACPICA: misc fixes for new Table Manager:
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f3d2e7865c816258c699ff965768e46b50d536d3
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Implement simplified Table Manager
    
    The Table Manager component has been completely
    redesigned and reimplemented. The new design is much
    simpler, and reduces the overall code and data size of
    the kernel-resident ACPICA by approximately 5%. Also,
    it is now possible to obtain the ACPI tables very early
    during kernel initialization, even before dynamic memory
    management is initialized.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2e42005bcdb4f63bed1cea7f537a5534d4bd7a57
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Update debug output
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f93a21c7184de3db962d01f11eb2ddad5396c824
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Update version to 20060721
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9c52657a2ac8aac5149e11049497b10918e1f58f
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Temporary fix for BankValue parameter
    
    Temporary fix for BankValue parameter of a Bank
    Field to support all constant values, including Zero
    and One. Must eventually be converted to a full TermArg
    evaluation.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6b366e2fe1b68bd9af55caf166eaaf0609ba18a9
Author: Fiodor Suietov <fiodor.f.suietov@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: fix for object premature deletion
    
    Fix for object premature deletion after CopyObject
    on Operation Region (BZ 350)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0654a6d3c7a777ddccd35c5bbc5765ffbfe3ea96
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Cast acpi_thread_id to UINT32 for debug output only
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a72d47563bce9542b9a83521a4e8175076278ee9
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Release global lock from interrupt handler
    
    The ACPI Global Lock interrupt handler no longer
    queues the execution of a separate thread to signal the
    global lock semaphore. Instead, the semaphore is signaled
    directly from the interrupt handler.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c81da66608d65dab04730582dfdfcdcab779e2fe
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Delete recursive feature of ACPI Global Lock
    
    Completed a new design and implementation for
    the ACPI Global Lock support. On the OS side, the global
    lock is now treated as a standard AML mutex. Previously,
    multiple OS threads could acquire the global lock
    simultaneously, but this could cause the BIOS to be starved
    by the lock in cases such as the Embedded Controller driver,
    where there is a tight coupling between the OS and the BIOS.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8f9337c88335846b01801b1047a4caf10527a320
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Handle case NumElements > Package length
    
    Additional update for NumElements fix. Must handle
    case where NumElements > Package list length, pad package
    with null elements.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 24058054d781934df526be114c612cf2b29cf4e7
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Handle mis-matched package length
    
    Implement support within the AML interpreter for
    package objects that contain a mismatch between the AML
    length and package element count. In this case, the lesser
    of the two is used. Some BIOS code apparently modifies
    the package length on the fly, and this change supports
    this. Provides compatibility with the MS AML interpreter.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c9e3ba2c1d178195e17bb4f1d49c32e0be8dbb16
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 2 19:48:18 2007 +0300

    ACPICA: Update function header
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit db50342205deabaff9ce1fbe53d5ba351992fa08
Author: Len Brown <len.brown@intel.com>
Date:   Fri Feb 2 21:05:04 2007 -0500

    ACPI: prevent build failure when CONFIG_X86_NUMAQ=y
    
    ...by disabling CONFIG_ACPI when CONFIG_X86_NUMAQ=y
    
    otherwise arch/i386/pci/Makefile forgets
    that it needs to build acpi.o
    
    drivers/built-in.o: In function `acpi_pci_root_add':
    pci_root.c:(.text+0x45ec4): undefined reference to `pci_acpi_scan_root'
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 914afcf55ae2621a3c5930e8c458d4ae8636c469
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Feb 2 14:42:12 2007 +0000

    [CIFS] Missing free in error path
    
    Thanks to jra for pointing this out
    
    Signed-off-by: Jeremy Allison <jra@samba.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 9a0c8230e84898ed27f790408805e33fa482b2f9
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Feb 2 04:21:57 2007 +0000

    [CIFS] Reduce cifs stack space usage
    
    The two cifs functions that used the most stack according
    to "make checkstack" have been changed to use less stack.
    
    Thanks to jra and Shaggy for helpful ideas
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    cc: jra@samba.org
    cc: shaggy@us.ibm.com

commit 5b4246f1b089746703287fdf422cf15c6d6eff05
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri Feb 2 09:39:21 2007 +0900

    [MTD] OneNAND: Fix typo and remove unnecessary goto statement
    
    In previos patch, there's typo so fix it
    Remove unnecessary goto statement
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit abf3c0f23df6686a984efc8fae7277fcdaffaa32
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri Feb 2 09:29:36 2007 +0900

    [MTD] OneNAND: Reduce internal BufferRAM operations
    
    It use blockpage instead of a pair (block, page). It can also cover a small chunk access. 0x00, 0x20, 0x40 and so on.
    
    And in JFFS2 behavior, sometimes it reads two pages alternatively.
    e.g., It first reads A page, B page and A page.
    So we check another bufferram to find requested page.
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 4f4fad27aceb87621d40f3068b94b5b11fc0127b
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri Feb 2 09:22:21 2007 +0900

    [MTD] OneNAND: Remove line of code that was meant to be deleted in OOB_AUTO
    
    - Iterations of the patch to add oob auto-placement support to OneNAND left a line of code that was meant to have been deleted.
    - read mtd->oobsize in onenand_transfer_auto_oob to optimized memcpy
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit e051fda4fd14fe878e6d2183b3a4640febe9e9a8
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu Feb 1 11:40:16 2007 -0800

    ocfs2: ocfs2_link() journal credits update
    
    Commit 592282cf2eaa33409c6511ddd3f3ecaa57daeaaa fixed some missing directory
    c/mtime updates in part by introducing a dinode update in ocfs2_add_entry().
    Unfortunately, ocfs2_link() (which didn't update the directory inode before)
    is now missing a single journal credit. Fix this by doubling the number of
    inode updates expected during hard link creation.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit bfd80223d73f80e1d1c69dace9151756b3ef3b49
Author: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
Date:   Wed Jan 31 16:00:20 2007 -0800

    ACPI: correct id for fixed buttons
    
    ACPI_BUTTON_HID_POWERF was changed, but this change was not propogated to
    button.c, thus breaking detection of fixed power and sleep buttons.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 030e9d8147491a9d2fe1b67882a3720fcf8b95f7
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Feb 1 04:27:59 2007 +0000

    [CIFS] lseek polling returned stale EOF
    
    Fixes Samba bug 4362
    
    Discovered by Jeremy Allison
    
    Clipper database polls on EOF via lseek and can get stale EOF
    when file is open on different client
    
    Signed-off-by: Jeremy Allison <jra@samba.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit a5e7c7b447270d42c3eb4d2259f74019aca9d007
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Wed Jan 31 17:19:28 2007 +0200

    [MTD] OneNAND: Add support for auto-placement of out-of-band data
    
    Enable the use of oob operation mode MTD_OOB_AUTO with OneNAND.
    Note that MTD_OOB_RAW is still not supported.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit fd1b494d4a8147da4517fef72d15116bbb1a2dc7
Author: Luben Tuikov <ltuikov@yahoo.com>
Date:   Wed Nov 29 19:45:23 2006 -0800

    [SCSI] Fix sense key MEDIUM ERROR processing and retry
    
    1) If the device reports an uncorrectable MEDIUM ERROR, such
    as SK MEDIUM ERROR, ASC UNRECOVERED READ ERR, AMNF DATA
    FIELD or RECORD NOT FOUND, then: In scsi_check_sense()
    return SUCCESS so as to not retry -- the error is
    uncorrectable -- this speeds up total processing time.
    
    Signed-off-by: Luben Tuikov <ltuikov@yahoo.com>
    
    Extracted the MEDIUM ERROR piece and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7b3b92116387fbea7b3b42553180984a544206d9
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:31 2007 -0800

    [SCSI] qla2xxx: Update version number to 8.01.07-k5.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c033a7e3d593554ba5e8a0e63bf7e5874dc3e92f
Author: Alan Cox <alan@redhat.com>
Date:   Wed Jan 31 17:00:28 2007 +0000

    [MTD] ck804xrom: fix a pci_find_device
    
    Going over the bugs and warnings I found this one left over. The other
    changes have already been correctly done for this driver but the actual
    switch to pci_get_device that they assume has not.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 30716e07ef511ec7525c07eb1e8060ba8943c2a2
Merge: 03c79cc... f56df2f...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Wed Jan 31 11:24:00 2007 -0600

    Merge branch 'linus'

commit 03c79cc56e4497cbd09d74a73c1bd0d1d9a8a16c
Author: Seokmann Ju <seokmann.ju@qlogic.com>
Date:   Mon Jan 29 10:22:30 2007 -0800

    [SCSI] qla2xxx: Remove unnecessary spinlock primitive - mbx_reg_lock.
    
    Since, mailbox commands are executed in a synchronous
    manner, there is no need to have a separate spinlock
    primitive to protect data/register access shared by callers.
    
    Signed-off-by: Seokmann Ju <seokmann.ju@qlogic.com>
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7c98a046b76a3a858c21b75235bf146493b76e11
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:29 2007 -0800

    [SCSI] qla2xxx: Fixup printk() with proper new-line character.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 26b8d34808598aae760091ae551182de91f3e0ae
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:28 2007 -0800

    [SCSI] qla2xxx: Allow NVRAM updates to immediately go into effect.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ffec28a3e959b156ea5906838a8897e27c8bbf22
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:27 2007 -0800

    [SCSI] qla2xxx: Enable queue-full throttling when UNDERRUN detected.
    
    As ISP24xx firmware can return a CS_DATA_UNDERRUN completion
    status when the storage has returned a
    SAM_STAT_TASK_SET_FULL scsi-status.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7aef45ac92f49e76d990b51b7ecd714b9a608be1
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:26 2007 -0800

    [SCSI] qla2xxx: Fail initialization when inconsistent NVRAM detected.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 178779a6ca7c23b52d5537b972f2b54c830b4480
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:25 2007 -0800

    [SCSI] qla2xxx: Check loop-state before reading host statistics.
    
    Non-ISP24xx cards must have a loop-id in order to query host
    statistics.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9bb9fcf2f2b4deeb3ae8a44ed4b8686302297030
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:24 2007 -0800

    [SCSI] qla2xxx: Refactor set-HBA-model/description code.
    
    Limit assignments via qla2x00_model_name[] array to HBA
    subsystem vendor IDs equal to QLogic.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2603221a285e32a1033dcefa8de38a989a7633e0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:23 2007 -0800

    [SCSI] qla2xxx: Set correct cabling state during initialization.
    
    Previous work to add asynchronous-scsi-scanning support
    (d19044c32baadeb80e135027124a9e845c6f057c) caused peculiar
    semantic changes when no cabling was attached to the HBA
    whereby unneeded and intrusive 'error-handling' would take
    place due to the initial link state being unset.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b1372bc90ffd5e2d2543e10924c1971a86e25310
Author: Lalit Chandivade <lalit.chandivade@qlogic.com>
Date:   Mon Jan 29 10:22:22 2007 -0800

    [SCSI] qla2xxx: Perform implicit LOGO during fabric logout request.
    
    Similarly to previous LOGO requests on non-24xx hardware,
    perform an implicit-LOGO as to avoid the potential 2 *
    R_A_TOV delay which can result during an explicit-LOGO
    request.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 30c4766213aeb684ee477ac7f36703f9134ac7ad
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:21 2007 -0800

    [SCSI] qla2xxx: Export OptionROM boot-codes version information.
    
    This includes BIOS, EFI, FCODE and firmware versions.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d88021a6710e6ed5d1899ba2e54d4638026e277d
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:20 2007 -0800

    [SCSI] qla2xxx: Handle IRQ-0 assignments by the system.
    
    No restriction should be placed on the IRQ number assigned
    to a given ISP.  Original code incorrectly assumed a
    non-zero IRQ number assignment by the system.  In these
    circumstances the proper freeing of the IRQ (via free_irq())
    would not take place.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a8488abefaa863a0c3a19888f03395adb3f1c6d2
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:19 2007 -0800

    [SCSI] qla2xxx: Add MSI-X support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3c6061236801a376d86ca75fd56d61f964611dd5
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Mon Jan 29 10:22:18 2007 -0800

    [SCSI] qla2xxx: Correct sector-erase issues while writing flash.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9bfbc9b24f663b15149874a94a69ba89b3b7e44c
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Wed Jan 31 14:25:21 2007 +0900

    [MTD] OneNAND: Remove unused fields
    
    - Remove unused fields
    - Fix typo
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 18a1e4c3ee67680287bf3c455b5047421eda3c14
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Tue Jan 30 16:09:13 2007 -0600

    [POWERPC] 83xx: Add the mpc8323emds.dts
    
    Add the mpc8323emds device tree source (dts)
    
    Signed-off-by: Scott Wood <scottwood@freescale.com>
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit a33a9641c924efbb01ee27af969f47218cab6bd7
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Tue Jan 30 16:09:20 2007 -0600

    [POWERPC] 83xx: Add the mpc832xemds defconfig
    
    The defconfig for the 8323EMDS is identical to the 8360E MDS defconfig,
    except CONFIG_MATH_EMULATION is set, since the 8323 doesn't have a FPU.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 63bb1bf0400414c0bc51cf276daa0fb5168d1e61
Author: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp>
Date:   Sun Jan 28 01:19:41 2007 +0900

    [SCSI] libsas: fix task attribute
    
    Why TASK_ATTR_HOQ?
    
    Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 20ce791a0e684dceea2b6804a7c7aaa22e8bfa5c
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jan 25 18:15:03 2007 -0800

    [SCSI] ipr: remove duplicate device id
    
    This patch removes a duplicate device id from the IPR driver.  Based on
    the ipr.h file, I'm not so sure this was intended to be a duplicate, and
    if so, the .h file should be modified to use the proper sub-device id
    instead.
    
    This was pointed out to me by Kay Sievers <kay.sievers@suse.de>
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: Brian King <brking@linux.vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7ac2735462349ca35d8807d93d66cf4d9ea7b729
Author: Len Brown <len.brown@intel.com>
Date:   Tue Jan 30 02:13:44 2007 -0500

    ACPI: delete unused acpi_device_get_debug_info()
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 37cabc81640ddba28a2aa7f0d1286a1012eae248
Author: Robert P. J. Day <rpjday@mindspring.com>
Date:   Sat Jan 27 01:55:18 2007 -0500

    ACPI: Correct ACPI_DEBUG_OUTPUT typo
    
    -#ifdef CONFIG_ACPI_DEBUG_OUTPUT
    +#ifdef ACPI_DEBUG_OUTPUT
    
    As the former doesn't exist.
    
    Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8def05fa82bfa4af0c8e83a00ff377ddd9074480
Author: Len Brown <len.brown@intel.com>
Date:   Tue Jan 30 01:46:43 2007 -0500

    asus-laptop: Lindent
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 304df8f7ef4914ad0886cd1eaa03a12dac583be1
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Jan 30 00:45:56 2007 -0600

    [POWERPC] Enable stack debug features on ppc32
    
    Enable stack overflow checking (DEBUG_STACKOVERFLOW) and stack usage
    (DEBUG_STACK_USAGE) on ppc32.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 8b857353237c144113b9bbbf9e0236b3f0e7d315
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:58 2007 +0100

    asus-laptop: add light sensor support
    
    /proc/acpi/asus/lslvl is now /sys/.../asus-laptop/ls_level
    /proc/acpi/asus/lssw is now /sys/.../asus-laptop/ls_switch nothing
    else ..
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 48809a93083a5419cc3147950c3008ccdaf80860
Merge: 8943212... 3b6eb6a...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Jan 30 00:38:11 2007 -0600

    Merge branch '83xx' into for_paulus

commit 722ad97153015aaf5becba3084565e98e71a2aed
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:55 2007 +0100

    asus-laptop: add ledd support
    
    Ledd is a special led ... /sys/.../asus-laptop/ledd works like
    /proc/acpi/asus/ledd
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 78127b4a90469d6973de2837d483f80f3709e6e0
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:49 2007 +0100

    asus-laptop: add display switching support
    
    /sys/.../asus-laptop/display can now be used to switch displays
    like the old /proc/acpi/asus/disp does
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6b7091e74fe176da97917ca60524e2b3554305f0
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:45 2007 +0100

    asus-laptop: add backlight support
    
    Adds backlight support using backlight class. We now
    change the brightness *and toggle the backlight !* via
    /sys/class/backlight/asus-laptop/.
    
    If the user switchs the backlight using the keyboard,
    asus_hotk_notify looks for ATKD_LCD_OFF and ATKD_LCD_ON events,
    and stores the right state into hotk->status and bd->props->power .
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4564de172dcdce641c0d6c689e79e95b5f6bee2c
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:40 2007 +0100

    asus-laptop: add bluetooth and wlan support
    
    WLED and BLED are not handled like other leds (MLED, etc ..),
    because sometime they also control the wlan/bluetooth device.
    If the method for wireless_status is found, it's used to get the
    status, otherwise hotk->status is used.  We also use the HWRS
    method, which tell if the bluetooth/wlan device is present or not.
    This patch show why we need a ASUS_SET_DEVICE_ATTR macro : if
    there is a bluetooth device, /sys/dev.../asus-laptop/bluetooth
    is usable, else it's not but it's clean.
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit be18cdabb8ed40ff4b8a240e0d6f4e6c30ff866d
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:35 2007 +0100

    asus-laptop: add led support
    
    Add led support, using generic led class.  Thomas Tuttle's patch
    <http://lkml.org/lkml/2006/7/6/247> was very usefull.  We use
    hotk->status to store led status because it's very hard to find
    acpi method to get the right status...  To reduce the code,
    I use a lot of macro (ASUS_LED, ASUS_LED_REGISTER, etc ...),
    because the code is the same for all leds ...
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3b6eb6af5f20471a8cb1b8a3d090401e9a8a2bb8
Author: Li Yang <leoli@freescale.com>
Date:   Tue Jan 30 13:33:01 2007 +0800

    [POWERPC] 83xx: Fix compiler warnings on 836x and 832x
    
    Some prototypes are separated from of_device.h into of_platform.h.  Add
    the new include to fix warning.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 85091b718969be7b8e6f795af7e264b8afcd7a6d
Author: Corentin Chary <corentincj@iksaif.net>
Date:   Fri Jan 26 14:04:30 2007 +0100

    asus-laptop: add base driver
    
    Adds the new driver and make ASUS_LAPTOP and ACPI_ASUS
    incompatible.  It may be strange to use ASUS_CREATE_DEVICE_ATTR
    and ASUS_SET_DEVICE_ATTR now, but these macro will be very
    usefull in next patchs.  ASUS_HANDLE and ASUS_HANDLE_INIT comes
    from IBM_HANDLE and IBM_HANDLE_INIT, with some modification,
    and will also be used in next patchs.
    
    Signed-off-by: Corentin Chary <corentincj@iksaif.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5bb730fda8aa4e3f7e94b259c468ecd095f60770
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Mon Jan 29 11:02:42 2007 +0800

    ACPI: add ACPICA version in sysfs
    
    Add an ACPI attribute to indicate ACPICA version.
    /proc/acpi/version is deprecated by /sys/module/acpi/parameters/acpica_version.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 219c3c8e268b9307eae9fae4c765a0c589b98338
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Mon Jan 29 11:02:38 2007 +0800

    ACPI: add ACPI debug attribute in sysfs
    
    Add ACPI debug attributes in sysfs.
    /proc/acpi/debug_layer && debug_level are deprecated by
    /sys/module/acpi/parameters/debug_layer && debug_level.
    
    NOTE: The operations to them are quite the same.
    E.g. if you want to enable ACPI_DB_INFO, ACPI_DB_WARN,
     ACPI_DB_ERROR and disable the others,
    #echo 0x13 >/sys/module/acpi/parameters/debug_level is OK,
    and a boot option "acpi.debug_level = 0x13" also works.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b981c591891dc8885de36498d38fa8d8a5481069
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Mon Jan 29 11:02:30 2007 +0800

    ACPI: add a Kconfig option for ACPI procfs interface
    
    Add a kconfig option CONFIG_ACPI_PROCFS to make procfs interface
    a configurable attribute of ACPI.
    
    No procfs interface is actually deprecated,
    and no sysfs interface is added in this patch.
    
    CONGI_ACPI_PROCFS is used to mark procfs interface as deprecated
    once the same function is duplicated in sysfs.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 35fcf53870eaa6cc966604a6e36df1c2c1577540
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 22:54:18 2007 +0100

    [WATCHDOG] ib700wdt.c - convert to platform_device part 2
    
    Convert the reboot_notifier into the platform_device's shutdown
    method
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 745ac1ea6e06125cc1326adbec34d756b25678c6
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 22:39:46 2007 +0100

    [WATCHDOG] ib700wdt.c - convert to platform_device
    
    Convert the ib700wdt watchdog into a platform_device
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit e42162a46d948769c8b45d25ee81827bc7dac435
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 22:12:54 2007 +0100

    [WATCHDOG] ib700wdt.c spinlock/WDIOC_SETOPTIONS changes
    
    Add the WDIOC_SETOPTIONS ioctl call. Because of this we
    move the spinlocking to the different watchdog operations.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit c9d7710ea2b497784314a916a39d4d390855a557
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 22:07:03 2007 +0100

    [WATCHDOG] ib700wdt.c small clean-up's
    
    * Fix identation
    * Add watchdog "mandatory" WDIOC_GETBOOTSTATUS ioctl
    * On unexpected close -> since this is considered as
      a write to the watchdog device, make sure we ping a
      last time.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit f6e4803969ee93bef6aeeb6aff0f9214547d1bb1
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 21:58:08 2007 +0100

    [WATCHDOG] ib700wdt.c clean-up init and exit routines
    
    clean-up the init and exit routines so that they use
    the same sequence.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 35d55c943117864b9dff0253eb64672f048ac0f8
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 21:50:53 2007 +0100

    [WATCHDOG] ib700_wdt.c stop + set_heartbeat operations
    
    move the code to stop the watchdog and the code to
    set the heartbeat of the watchdog to seperate functions.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit bffda5c87cf60d27a27f2e862c82c474f8e89767
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sat Jan 27 20:54:24 2007 +0100

    [WATCHDOG] show default value for nowayout in module parameter
    
    change default=CONFIG_WATCHDOG_NOWAYOUT in the module parameter
    for nowayout by it's real value (0 or 1) by using:
    __MODULE_STRING(WATCHDOG_NOWAYOUT)
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit f27708fc7523a87e3e69cae5628015961f0d3061
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:58 2007 -0800

    [SCSI] libsas: Enable automatic spin-up of SAS disks
    
    Set allow_restart=1 for all SAS disks so that they are spun up when needed.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 111367f5c9a0af0f3a42c39dee7360ca217cba1d
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:55 2007 -0800

    [SCSI] aic94xx: Register eh_device_reset_handler
    
    Register libsas's default device reset code with the scsi.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ad689233bee854dced741c91aff12a8771a22f6f
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:52 2007 -0800

    [SCSI] libsas: Handle SCSI commands that complete with failure codes
    
    This patch moves the code that handles SAS failures out of the main EH
    function and into a separate function.  It also detects commands that have
    no sas_task (i.e. they completed, but with error data) and sends them into
    scsi_error for processing.  This allows us to handle SCSI errors (and
    enables auto-spinup as a side effect) instead of dropping them on the
    floor and falling into an infinite loop.  It also requires the
    implementation of a device reset function, which the SAS failure code has
    been modified to employ for REQ_DEVICE_RESET.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dca84e4694419adf61ad052b1e5a50ac82726597
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:49 2007 -0800

    [SCSI] scsi_error.c: Export some scsi_eh_* functions
    
    Export a couple of functions from scsi_error that are needed to handle
    failed SCSI commands from the SAS EH.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    
    make exports GPL and
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 21434966462d57145c861b43f6206d945ac57630
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:46 2007 -0800

    [SCSI] libsas: Check return values of sysfs_create_link
    
    Get rid of: "warning: ignoring return value of sysfs_create_link..."
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6f63caae2172e97e528b58319480217b0b36542e
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:43 2007 -0800

    [SCSI] libsas: Clean up discovery failure handler code
    
    sas_rphy_delete does two things: it removes the sas_rphy from the transport
    layer and frees the sas_rphy.  This can be broken down into two functions,
    sas_rphy_remove and sas_rphy_free; sas_rphy_remove is of interest to
    sas_discover_root_expander because it calls functions that require
    sas_rphy_add as a prerequisite and can fail (namely sas_discover_expander).
    In that case, sas_discover_root_expander needs to be able to undo the effects
    of sas_rphy_add yet leave the job of freeing the sas_rphy to the caller of
    sas_discover_root_expander.
    
    This patch also removes some unnecessary code from sas_discover_end_dev
    to eliminate an unnecessary cycle of sas_notify_lldd_gone/found for SAS
    devices, thus eliminating a sas_rphy_remove call (and fixing a race condition
    where a SCSI target scan can come in between the gone and found call).
    It also moves the sas_rphy_free calls into sas_discover_domain and
    sas_ex_discover_end_dev to complement the sas_rphy_allocation via
    sas_get_port_device.
    
    This patch does not change the semantics of sas_rphy_delete.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3b6e9fafc40e36f50f0bd0f1ee758eecd79f1098
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Fri Jan 26 14:08:41 2007 -0800

    [SCSI] libsas: Fix incorrect sas_port deformation in sas_form_port
    
    Currently, sas_form_port checks the given asd_sas_phy's sas_phy to see if
    there's already a port attached.  If so, the SAS addresses of the port and
    the phy are compared to determine if we need to detach from the port
    because the addresses don't match or if we can stop; the SAS address stored
    in the sas_port reflects whatever device _was_ attached to the port/phy, and
    the SAS address stored in the sas_port reflects whatever device we just
    discovered.  As written, the code detaches from the port if the addresses
    _do_ match, and prints an error if they do _not_ match.  I believe this to
    be incorrect, as it seems more logical to keep the port if the addresses
    match (i.e. the phy was reset but the device didn't change), and detach it
    they do not (i.e. the device changed).
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a5364c5a311f73eade88f37bf5b614797ce30ec9
Author: Mark Haverkamp <markh@linux-foundation.org>
Date:   Wed Jan 24 09:31:30 2007 -0800

    [SCSI] NCR_D700: fix compile error
    
    Fix a typo in NCR_D700
    
    Signed-off-by Mark Haverkamp <markh@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e37ee4bec6c6d6d67aebafeecbbb32aa33d502bc
Author: Mark Haverkamp <markh@linux-foundation.org>
Date:   Fri Jan 26 09:23:32 2007 -0800

    [SCSI] aacraid: expanded expose physical device code (new)
    
    Received from Mark Salyzyn,
    
    Take the expose_physicals flag and allow the user to select default (physicals
    available via /dev/sg), exposed (physicals available via /dev/sd for
    experimental reasons) and hidden (physicals blocked from all access). This
    expands the functionality of the previous expose_physicals insmod parameter
    which was added to support some experimental configurations.
    
    Signed-off-by Mark Haverkamp <markh@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e8f32de52c0d74d397d21afc655a4e2a7dfe1f98
Author: Mark Haverkamp <markh@linux-foundation.org>
Date:   Tue Jan 23 15:00:30 2007 -0800

    [SCSI] aacraid: rework packet support code
    
    Received from Mark Salyzyn,
    
    Replace all if/else packet formations with platform function calls. This is in
    recognition of the proliferation of read and write packet types, and in the
    need to migrate to up-and-coming packets for new products.
    
    Signed-off-by Mark Haverkamp <markh@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 239eab19559b3d74a029dff3f0c792bc0770a062
Author: Mark Haverkamp <markh@linux-foundation.org>
Date:   Tue Jan 23 15:00:13 2007 -0800

    [SCSI] aacraid: Begin adding support for new adapter type
    
    Received from Mark Salyzyn,
    
    Add in the NEMER/ARK physical register mapping, represented in up and coming
    products currently under test at Adaptec.
    
    Signed-off-by Mark Haverkamp <markh@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 28713324a0f3c055186ecec27239673c36ba1de5
Author: Mark Haverkamp <markh@linux-foundation.org>
Date:   Tue Jan 23 14:59:20 2007 -0800

    [SCSI] aacraid: rework communication support code
    
    Received from Mark Salyzyn,
    
    Replace all if/else communication transports with a platform function call.
    This is in recognition of the need to migrate to up-and-coming transports.
    Currently the Linux driver does not support two available communication
    transports provided by our products, these will be added in future patches, and
    will expand the platform function set.
    
    Signed-off-by Mark Haverkamp <markh@linux-foundation.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9cd065ab80d6c14c6693a93c8f47ef4cb80e770f
Author: Brian King <brking@linux.vnet.ibm.com>
Date:   Tue Jan 23 11:25:43 2007 -0600

    [SCSI] ipr: Driver version 2.3.1
    
    Bump driver version to 2.3.1.
    
    Signed-off-by: Brian King <brking@linux.vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e619e1a7cbf73c27eacf53856443b1aa67cc1234
Author: Brian King <brking@linux.vnet.ibm.com>
Date:   Tue Jan 23 11:25:37 2007 -0600

    [SCSI] ipr: PCI error recovery fix
    
    Since the pci_block_user_cfg_access API was modified to track
    block/unblocks, it was discovered that the ipr driver had a
    path through its code (in PCI error recovery) which would unblock
    when not previously blocked.
    
    Signed-off-by: Brian King <brking@linux.vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7dce0e1c84cfa8fb2a4b41877c20def386cade2b
Author: Brian King <brking@linux.vnet.ibm.com>
Date:   Tue Jan 23 11:25:30 2007 -0600

    [SCSI] ipr: Tolerate not finding PCI-X registers
    
    Don't fail initialization of an adapter if the PCI-X registers
    cannot be found since it may be a PCI-E adapter.
    
    Signed-off-by: Brian King <brking@linux.vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6d84c944fa17cf4e65660df50a0772f8a4836e0b
Author: Brian King <brking@linux.vnet.ibm.com>
Date:   Tue Jan 23 11:25:23 2007 -0600

    [SCSI] ipr: Remove usage of pci driver data
    
    Since ipr handles dynamic ids, it must handle driver_data
    not being set, so remove the current usage of driver_data
    so it can be used for other things in future patches.
    
    Signed-off-by: Brian King <brking@linux.vnet.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit eae225eb5947825bc4e845c33ded9aedd74407cf
Author: Eric Moore <eric.moore@lsi.com>
Date:   Fri Jan 19 18:46:17 2007 -0700

    [SCSI] fusion: mpi header update - version 1.05.14
    
    Here are the lastest mpi headers for mpt fusion driver, which defines
    the firmware to driver interface.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 86b9c4c16a1589d05959af2d96d52a4352c6306e
Author: Alexis Bruemmer <alexisb@us.ibm.com>
Date:   Tue Jan 16 15:36:12 2007 -0800

    [SCSI] aic94xx: fix typos and update verison number
    
    fix typos and bump version number
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Acked-by: Alexis Bruemmer <alexisb@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7220c0177b45600eef2cfd3e5e57ab5b96f3222c
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Date:   Fri Jan 26 10:14:36 2007 -0600

    JFS: Remove incorrect kgdb define
    
    jfs_debug.h uses an incorrect CONFIG_KERNEL_ASSERT ifdef to redefine the
    assert macro for kgdb use.  I believe the code worked a long time ago, but
    today it's not a valid config option.  Since I'm not aware of anybody
    interested in debugging jfs with kgdb, it should just be removed.
    
    Thanks to Robert P. J. Day for reporting this.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 8943212c97cc56d4dcc853a097740e327fe8a6fe
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Jan 26 01:52:27 2007 -0600

    [POWERPC] Remove fastcall function attribute
    
    fastcall is an x86 specific function attribute and has no business in ppc code
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 126186a055d965d5a7b1ab560e343ef70694f349
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Jan 26 01:45:32 2007 -0600

    [POWERPC] 83xx: Return a point to the struct ipic from ipic_init()
    
    It's useful to have access to struct ipic handle that just got created
    in ipic_init().
    
    For example, if we want to setup an external IRQ with out
    a device node we need access ipic->irqhost to create the virtual to HW
    IRQ mapping and to set the IRQ sense.  With this we can mimic the old
    sense array concept that existed in arch/ppc.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit fb5c3e1b6d304bcf5f8d697471e36f2fa8d53f1c
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Wed Jan 24 00:49:19 2007 -0800

    PNPACPI: remove EXPERIMENTAL dependency
    
    PNPACPI is pretty widely used and seems fairly stable, so remove the
    dependency on EXPERIMENTAL.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5eca338fb510af78eee5372ff6a3525768ab913f
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jan 18 16:44:48 2007 -0700

    ACPI: remove motherboard driver (redundant with PNP system driver)
    
    The PNP system board driver (drivers/pnp/system.c) contains all the
    same functionality, so we don't need the ACPI version.
    
    Previously, a motherboard device would be claimed by *both* the ACPI and
    PNP drivers, resulting in stuff like this in /proc/ioports:
    
        1200-121f : motherboard	<-- from drivers/acpi/motherboard.c
          1200-121f : pnp 00:0d	<-- from drivers/pnp/system.c
    
    Make sure to enable CONFIG_PNP (and CONFIG_PNPACPI) to include the
    PNP system board driver.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 10fccf5fda7529258325769e9da136064b481aab
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jan 18 16:44:24 2007 -0700

    i386: turn on CONFIG_PNP in defconfig
    
    I'm trying to remove drivers/acpi/motherboard.c, which is mostly
    redundant with drivers/pnp/system.c.  So make sure that we include the
    PNP driver in the default config.  Most distros enable this already.
    
    Turning on CONFIG_PNP also causes the following options to be enabled:
    
        CONFIG_PNPACPI
        CONFIG_SERIAL_8250_PNP
    
    CONFIG_SERIAL_8250_PNP causes legacy serial ports to be discovered
    twice, which is ugly but harmless:
    
        serial8250: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
        00:07: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5859554c3ad31b722f0b5a1d3a40e19d8ccedd0b
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jan 18 16:43:46 2007 -0700

    PNP: system.c whitespace cleanup
    
    No functional change.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a8c78f7fb1571764f48b8af5459abdd2c66a765f
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jan 18 16:43:27 2007 -0700

    PNP: reserve system board iomem resources as well as ioport resources
    
    Most x86 boxes have no iomem system board resources, but some ia64
    boxes do.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9a47cdb1bb85e7944fb7419e4078c46516ef7335
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jan 18 16:42:55 2007 -0700

    ACPI: move FADT resource reservations from motherboard driver to osl
    
    Resources described by the FADT aren't really a good fit for the
    ACPI motherboard driver.
    
    The motherboard driver cares about PNP0C01 and PNP0C02 devices and
    their resources.
    
    The FADT describes some resources used by the ACPI core.  Often, they
    are also described by by the _CRS of a motherboard device, but I think
    it's better to reserve them specifically in the ACPI osl.c because
    (a) the motherboard driver is optional and ACPI uses the resources even
    if the driver is absent, and (b) I want to remove the ACPI motherboard
    driver because it's mostly redundant with the PNP system.c driver.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e60bd7f14dbb6239d07676be420a21f8a36d014f
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Jan 26 00:41:57 2007 -0600

    [POWERPC] 83xx:  Make platform *_init_IRQ() static
    
    Make the various 83xx *_init_IRQ() functions static
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit c75f902b93724ab9ba161f7dfab0fd09c7a8854d
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Jan 26 00:37:11 2007 -0600

    [POWERPC] 83xx: Don't call ioremap in the reset function
    
    It's possibly that we get an reset requestion when interrupts are disabled.
    (For example an oops in an interrupt handler).  Therefor, we can't call
    ioremap in the reset function.  Moving the ioremap of the registers we
    need access to an arch_initcall helps the problem.
    
    However we still have a window between boot and the arch_initcall in
    which the register pointer will not be setup and thus we spin if the reset
    function is called.  If one needs to ensure even this case is covered, look
    at use of the watchdog provided on 83xx to reset the processor.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 4d52719a767455d319263d598e0f59e027895e00
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Jan 26 00:23:34 2007 -0600

    [POWERPC] 83xx: Fix Kconfig to only enable FP math emulation for the MPC832x
    
    Updated MATH_EMULATION depends to be on PPC_MPC832x instead of PPC_83xx.  Only
    the the MPC832x has no floating point unit in the core.  Updated the other
    83xx defconfigs that got math emulation turned on incorrectly.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 8b29c0b6eb3a4952e7eae03038bbf6c1695dfe80
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Thu Jan 25 14:06:33 2007 +0900

    [MTD] OneNAND: Amend write-verify to compare to original buffer
    
    When write-verify is enabled (CONFIG_MTD_ONENAND_VERIFY_WRITE),
    the data written is read back and compared.  The comparison
    was being made between dataRAM buffers, but this does not
    verify that the data made it to the dataRAM correctly in
    the first place.  This patch amends write-verify to
    compare back to the original buffer.  It also now verifies
    sub-page writes.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 8b629a1f01b2c975074c51c752915ad50ee4e5fc
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 10:12:06 2007 +0900

    [POWERPC] Celleb: setup sio in SCC
    
    This patch setup serial interfaces in SCC to work with serial_txx9
    driver.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 551a3d87856c67248f9e467a7984865eee4bb0b1
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 10:03:28 2007 +0900

    [POWERPC] Celleb: Support PCI bus and base of I/O
    
    This patch includes support for pci buses, base of Celleb specific
    devices, and etc. It works on of_platform bus.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 983e3f6027374bc8b63f05422d281e0d1f2c37f7
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 10:02:36 2007 +0900

    [POWERPC] Celleb: Cell SCC definitions
    
    Adds Cell SCC(Super Companion Chip) definitions.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ca58b8eb93904453025cab7e01dcad957cf9e25b
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 09:59:41 2007 +0900

    [POWERPC] Celleb: hypervisor call numbers
    
    This patch creates Celleb platform dependent file to define Beat
    hypervisor call numbers.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit acc900ef5b6400747e3bafe0017e725b2ba641b8
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 09:58:39 2007 +0900

    [POWERPC] Add IRQ remapping hook
    
    This patch adds irq remapping hook. On interrupt mechanism on Beat,
    when an irq outlet which has an id which is formerly used is created,
    remapping the irq is required.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5b7c726ff0e8c03bc19bf0d5114d3598efa2fbf2
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 09:57:37 2007 +0900

    [POWERPC] Add a field for each specific bus to struct pci_controller
    
    Struct pci_controller doesn't prepare for the dependent data of each
    specific bus. This patch adds private member to struct pci_controller.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ef66f796751a214dc8fadaef2f068c3baa8969fa
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 09:56:44 2007 +0900

    [POWERPC] Fix oprofile support on Cell LPAR
    
    Op_model_cell supports native Cell. By returning -EINVAL, oprofile
    uses timer interrupt on Cell LPAR.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d649bd7b766b9c15c9f5f2f6d8ae0e57303285d0
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 09:54:39 2007 +0900

    [POWERPC] TLB insertion cleanup
    
    This patch changes handling return value of ppc_md.hpte_insert() into
    the same way as __hash_page_*().
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3650cfe2e51432030e469afd75a429c199c4e42f
Author: Ishizaki Kou <kou.ishizaki@toshiba.co.jp>
Date:   Fri Jan 12 09:52:41 2007 +0900

    [POWERPC] spufs: Add SPU register lock
    
    spu->register_lock should be held before accessing registers.
    
    Signed-off-by: Kou Ishizaki <kou.ishizaki@toshiba.co.jp>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c53653130f2868e44c6e8346d110d27d39e7d07b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jan 14 10:15:00 2007 +0100

    [POWERPC] Remove the broken Gemini support
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cfcd1705b61ecce1ab102b9593cf733fef314a19
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jan 14 09:38:18 2007 +0800

    [POWERPC] Mask 32-bit system call arguments to 32 bits on PPC64 in audit code
    
    The system call entry code will clear the high bits of argument
    registers before invoking the system call; don't report whatever noise
    happens to be in the high bits of the register before that happens.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0e47e3cca100e7c8e8124378e4e44969c2e042fd
Author: Paul Gortmaker <paul.gortmaker@windriver.com>
Date:   Tue Jan 9 16:50:10 2007 -0500

    [POWERPC] Select DEFAULT_UIMAGE for HPC-NET/8641
    
    I suspect this was meant to be added like it was to a whole slew of
    other u-boot based boards, but probably just fell through the cracks.
    
    Add "select DEFAULT_UIMAGE" for the 8641/HPC-NET.
    
    Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0bcace3b8b07a54ae17b969fa7bbbd4c91f3372c
Author: Olaf Hering <olaf@aepfle.de>
Date:   Thu Jan 4 18:31:55 2007 +0100

    [POWERPC] Update fixup_winbond_82c105 comment
    
    Note all POWER3/POWER4 systems where fixup_winbond_82c105 will run.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f1f003330b4489f0e6502e1315bf9d764ed5f757
Author: Nathan Lynch <ntl@pobox.com>
Date:   Wed Jan 3 12:56:28 2007 -0600

    [POWERPC] maple: improve CPC9x5 host bridge detection
    
    Identify CPC9x5 PCI Express, AGP, and HT host bridges using
    device_type and compatible properties, which is a more flexible method
    than using the name property (which can differ between firmwares and
    models).
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9a3d6458e9dded0a060115b446531cfc77083ebb
Author: Simon Vallet <linux-ppc@castalie.org>
Date:   Wed Jan 3 07:49:56 2007 +0100

    [POWERPC] Add support for R_PPC_ADDR16_HI relocations
    
    apply_relocate_add() does not support R_PPC_ADDR16_HI relocations, which
    prevents some non gcc-built modules to be loaded.
    
    Signed-off-by: Simon Vallet <svallet@gmail.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 06c3147564cc65f0a5eac8af2b1834a996933e74
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 12:36:20 2007 +0100

    [POWERPC] arch/powerpc/sysdev/cpm2_pic.c of_node_get cleanup
    
    Remove redundant argument check for of_node_get().
    It's ok to remove 'node' check because in real life cpm2_pic_init()
    never gets called with node == NULL.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a15d5eaa7799cce9cfeec4637db18863e1a89e34
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 13:07:16 2007 +0100

    [POWERPC] arch/powerpc/sysdev/qe_lib of_node_get cleanup
    
    No need for ?: as of_node_get() can handle NULL argument.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    
     arch/powerpc/sysdev/qe_lib/qe_ic.c |    2 +-
     1 file changed, 1 insertion(+), 1 deletion(-)
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c3bfc3a8dd337e41cf7b64f815e37f6e2cfbfcdc
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 12:52:47 2007 +0100

    [POWERPC] arch/powerpc/sysdev/mpic.c of_node_get cleanup
    
    No need for ?: because of_node_get() can handle NULL argument.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit af337c096ca47ac1a776e6f1ea2cde9a85d0e60b
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 12:50:20 2007 +0100

    [POWERPC] arch/powerpc/sysdev/ipic.c of_node_get cleanup
    
    No need for ?: because of_node_get() can handle NULL argument.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6690faeb3537fe34950bdc3e10fa14ce4102c92f
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 12:38:36 2007 +0100

    [POWERPC] arch/powerpc/kernel/vio.c of_node_put cleanup
    
    Remove redundant argument check for of_node_put().
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b1374051433cc252540058e8a90107c90fa23eb4
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Tue Jan 2 12:31:47 2007 +0100

    [POWERPC] arch/ppc/kernel/prom.c of_node_(get|put) cleanup
    
    Remove redundant argument checks for of_node_get() and of_node_put().
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a2894cfb3a6d60980ba85181e31ccc079807e92b
Author: Michal Ostrowski <mostrows@watson.ibm.com>
Date:   Wed Dec 27 22:14:43 2006 -0600

    [POWERPC] Do not write virq back to PCI config space
    
    - Drivers will not rely on the PCI config space value, as they've
      already been conditioned to rely on the irq field in "struct pci_dev".
    
    - The virq value may not be < 256 as it has been remapped.
    
    - The PCI config space should reflect the hardware configuration, which
      is not being changed.  We are only creating a virtual irq mapping that
      exists in the kernel only. One would never expect the PCI hardware to
      generate the "virq" interrupt.
    
    Signed-off-by: Michal Ostrowski <mostrows@watson.ibm.com>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7e60d1b427c51cf2525e5d736a71780978cfb828
Author: Anton Blanchard <anton@samba.org>
Date:   Wed Dec 20 15:58:52 2006 +1100

    [POWERPC] Move ELF_ET_DYN_BASE up to 512MB point
    
    I often test new versions of glibc by doing:
    
    LD_LIBRARY_PATH=/XXX/lib /XXX/lib/ld.so.1 <binary>
    
    One test case ended up SEGV'ing. Upon closer inspection ld.so was loaded
    at 0x8000000 (128MB) with the heap right after it. Since we normally
    link binaries at 0x10000000 (256MB) we only had about 128MB of space for
    the heap:
    
    00100000-00103000 r-xp 00100000 00:00 0           [vdso]
    08000000-0801e000 r-xp 00000000 00:01 33079       /lib/ld-2.5.so
    0802d000-0802f000 rwxp 0001d000 00:01 33079       /lib/ld-2.5.so
    0802f000-08050000 rwxp 0802f000 00:00 0           [heap]
    0fe91000-0ffd9000 r-xp 00000000 00:01 33082       /lib/libc-2.5.so
    0ffd9000-0ffe8000 ---p 00148000 00:01 33082       /lib/libc-2.5.so
    0ffe8000-0ffea000 r--p 00147000 00:01 33082       /lib/libc-2.5.so
    0ffea000-0ffed000 rwxp 00149000 00:01 33082       /lib/libc-2.5.so
    10000000-10004000 r-xp 00000000 00:01 76          /bin/sleep
    10013000-10014000 rwxp 00003000 00:01 76          /bin/sleep
    ffb41000-ffb56000 rw-p ffb41000 00:00 0           [stack]
    
    One way to fix this is move ELF_ET_DYN_BASE from 0x08000000 to 0x20000000.
    This allows 128MB for the binary (hopefully enough for even the most
    crazy c++ apps), and with our current layout we will grow the heap up
    and the stack down, allowing potentially gigabytes of heap:
    
    00100000-00103000 r-xp 00100000 00:00 0           [vdso]
    0fe8a000-0ffd3000 r-xp 00000000 00:01 3350        /lib/tls/libc-2.3.6.so
    0ffd3000-0ffe3000 ---p 00149000 00:01 3350        /lib/tls/libc-2.3.6.so
    0ffe3000-0ffea000 r--p 00149000 00:01 3350        /lib/tls/libc-2.3.6.so
    0ffea000-0ffee000 rwxp 00150000 00:01 3350        /lib/tls/libc-2.3.6.so
    10000000-10004000 r-xp 00000000 00:01 76          /bin/sleep
    10013000-10014000 rwxp 00003000 00:01 76          /bin/sleep
    20000000-20018000 r-xp 00000000 00:01 3478        /lib/ld-2.3.6.so
    20028000-20029000 r--p 00018000 00:01 3478        /lib/ld-2.3.6.so
    20029000-2002a000 rwxp 00019000 00:01 3478        /lib/ld-2.3.6.so
    2002a000-2004b000 rwxp 2002a000 00:00 0           [heap]
    ffd67000-ffd7c000 rw-p ffd67000 00:00 0           [stack]
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a885902de3394ef18ca415f9175da5d8a8406cca
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Dec 19 13:06:17 2006 -0600

    [POWERPC] Clarify EEH error message
    
    Clarify error message re EEH permanent failure.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 60bccbed6f53c953c62bdc2ac699395a13b6eecc
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Tue Dec 19 17:35:49 2006 +0900

    [POWERPC] Use is_init() instead of pid==1
    
    Use is_init() rather than hard coded pid comparison.
    
    Cc: Anton Blanchard <anton@samba.org>
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f7c37d7b8aaab1b023b0b239fc632585ec88d0bc
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Jan 23 15:44:10 2007 +0800

    [MTD] [NAND] Remove debugging cruft from CAF NAND driver.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 527a4f45ef8a4599a899c997e40dbf2feb0a47f8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Jan 23 15:35:27 2007 +0800

    [MTD] [NAND] Inherit CAF NAND timing setup from firmware
    
    The precise timings are board-specific (or NAND chip specific) and don't
    belong here. If they're set already, then use what we find there.
    Otherwise, revert to the most conservative default values (and whinge).
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ec255e34061bbc48fc702875336c6db969df9461
Author: Adrian Hunter <ext-adrian.hunter@nokia.com>
Date:   Mon Jan 22 21:30:31 2007 +0900

    [MTD] OneNAND: Check first or second pages for bad block information
    
    OneNAND records bad block information in the out-of-band area of either the first or second page of a block.  Due to a logic error, only the first page was being checked.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit f00b0046d2eafac3e78e8def9374c7492820a9d2
Author: Adrian Hunter <[ext-adrian.hunter@nokia.com]>
Date:   Mon Jan 22 17:01:01 2007 +0900

    [MTD] OneNAND: Free the bad block table when the device is released
    
    OneNAND does 2 memory allocations for bad block information.
    Only one of them was being freed.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 2c8dc071517ec2843869024dc82be2e246f41064
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Thu Jan 18 00:45:48 2007 -0500

    Input: ads7846 - be more compatible with the hwmon framework
    
     - Hook up to hwmon
         * show sensor attributes only if hwmon is present
         * ... and the board's reference voltage is known
         * otherwise be just a touchscreen
     - Report voltages per hwmon convention
         * measure in millivolts
         * voltages are named in[0-8]_input (ugh)
         * for 7846 chips, properly range-adjust vBATT/in1_input
    
    Battery measurements help during recharge monitoring.  On OSK/Mistral,
    the measured voltage agreed with a multimeter to several decimal places.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 15e3589e59c35ed33823dda3d38ad171222b83b4
Author: Imre Deak <imre.deak@solidboot.com>
Date:   Thu Jan 18 00:45:43 2007 -0500

    Input: ads7846 - detect pen up from GPIO state
    
    We can't depend on the pressure value to determine when the pen was
    lifted, so use the GPIO line state instead. This also helps with
    chips (like ads7843) that don't have pressure sensors.
    
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 7937e86a70235e1584486654687dc9908a11e00a
Author: Imre Deak <imre.deak@nokia.com>
Date:   Thu Jan 18 00:45:38 2007 -0500

    Input: ads7846 - select correct SPI mode
    
    Talk to ADS7846 chip using SPI mode 1, which is what the chip
    supports: writes on falling clock edge, reads on rising.
    
    Signed-off-by: Imre Deak <imre.deak@nokia.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 1936d590a9b72ff6a7a0c826bc613e4757cde1c9
Author: Imre Deak <imre.deak@solidboot.com>
Date:   Thu Jan 18 00:45:31 2007 -0500

    Input: ads7846 - switch to using hrtimer
    
    Use hrtimer instead of the normal timer, since it provides better
    sampling resolution. This will:
    
     - avoid a problem where we have a 1 jiffy poll period and
       dynamic tick on
     - utilize high resolution HW clocks when they are added to
       the hrtimer framework
    
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit de2defd96d7d92fe8b5f9cf2bfd385d8d4819923
Author: Imre Deak <imre.deak@solidboot.com>
Date:   Thu Jan 18 00:45:21 2007 -0500

    Input: ads7846 - optionally leave Vref on during differential measurements
    
    On some LCDs leaving the Vref on provides much better readings.
    
    Signed-off-by: Jarkko Oikarinen <jarkko.oikarinen@nokia.com>
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit da970e69efb9fd0be0c23ace5bde42d4caf17b40
Author: Imre Deak <imre.deak@solidboot.com>
Date:   Thu Jan 18 00:44:41 2007 -0500

    Input: ads7846 - pluggable filtering logic
    
    Some LCDs like the LS041Y3 require a customized filtering
    logic for reliable readings, so make the filtering function
    replacable through platform specific hooks.
    
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 78a56aab11234e53b7e94e5a255cc3d27ab0a62b
Author: Phil Blundell <pb@handhelds.org>
Date:   Thu Jan 18 00:44:09 2007 -0500

    Input: gpio-keys - keyboard driver for GPIO buttons
    
    This is an interrupt-driven keyboard driver for simple buttons
    connected directly to CPU GPIO lines of embedded ARM systems.
    It supports pxa architectures and is used by a number of PDAs
    and PocketPC phones in the handhelds.org kernel. Support for
    other architectures, such as sa11xx and sc2410, will be added
    once generic GPIO API is available.
    
    Signed-off-by: Paul Sokolovsky <pmiscml@gmail.com>
    Signed-off-by: Philipp Zabel <philipp.zabel@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 285b0b62bc8f1a3cb18ce3f2d9806f1d99736784
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Thu Jan 18 00:43:41 2007 -0500

    Input: hid-ff - add support for Logitech Momo racing wheel
    
    Add support for Logitech Momo racing wheel (046d:ca03) to hid force
    feedback.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 19f3c3e37314a234998fd75f5ea9388dfb6ab00a
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jan 18 00:42:31 2007 -0500

    Input: i8042 - really suppress ACK/NAK during panic blink
    
    On some boxes panic blink procedure manages to send both bytes
    to keyboard contoller before getting first ACK so we need to
    make i8042_suppress_kbd_ack a counter instead of boolean.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 4aa0d230c2cfc1ac4bcf7c5466f9943cf14233a9
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Date:   Wed Jan 17 21:18:35 2007 -0600

    JFS: call io_schedule() instead of schedule() to avoid deadlock
    
    The introduction of Jens Axboe's explicit i/o plugging patches introduced a
    deadlock in jfs.  This was caused by the process initiating I/O not
    unplugging the queue before waiting on the commit thread.  The commit
    thread itself was waiting for that I/O to complete.  Calling io_schedule()
    rather than schedule() unplugs the I/O queue avoiding the deadlock, and it
    appears to be the right function to call in any case.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 75384b0d9c04dc2d48f45825f84a982eaf5c2f53
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Thu Jan 18 11:10:57 2007 +0900

    [MTD] OneNAND: Update copyrights and code cleanup
    
    Update copyrights and code cleanup
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 738d61f53781a9b677cb472cbd740aa74e7dcd6d
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Mon Jan 15 17:09:14 2007 +0900

    [MTD] OneNAND: Reduce Double Density Package (DDP) operations
    
    - DDP code clean-up
    - Reduce block & bufferram operations in DDP
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 9d03280129e84f8cdfd83f84803a4548e3bf697d
Author: Adrian Hunter <hunter.programmer@gmail.com>
Date:   Wed Jan 10 07:51:26 2007 +0200

    [MTD] OneNAND: Return an error if a read timeout occurs
    
    If OneNAND is operating within specification, all operations should easily be
    completed within the 20 millisecond timeout.
    This patch faithlessly adds a check for the timeout and returns an error in
    that case.
    
    Signed-off-by: Adrian Hunter <ext-adrian.hunter@nokia.com>
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 10b7a2bd6bf3510cbb5977a44d8822f085738729
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri Jan 12 05:45:34 2007 +0900

    [MTD] OneNAND: Fix unlock all status error
    
    We have to set ONENAND_REG_START_BLOCK_ADDRESS to avoid status error
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit d91a0078476ca536d76419f3b53196873b2931bc
Author: Justin Chen <justin.chen@hp.com>
Date:   Wed Dec 6 10:17:10 2006 -0700

    ACPI: Optimize acpi_get_pci_rootbridge_handle() to boot faster
    
    Move acpi_get_pci_rootbridge_handle() from glue.c to pci_root.c and get the
    root bridge ACPI handles by searching the &acpi_pci_roots list instead of
    walking through the ACPI name space.  This significantly reduces boot time
    on large I/O systems.
    
    Signed-off-by: Justin Chen <justin.chen@hp.com>
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 02cd743bb3a37f27681c487608fb819493fa4010
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:46 2007 -0800

    [SCSI] libsas: Start I_T recovery if ABORT TASK fails
    
    The EH should fall into I_T recovery (and potentially stronger
    remedies) if ABORT TASK fails.
    
    Signed-off-by: Alexis Bruemmer <alexisb@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6b0efb8516a5298e12033df61f9e0c376a306adb
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:43 2007 -0800

    [SCSI] libsas: Add SAS_HA state flags to avoid queueing events while unloading
    
    Track sas_ha_struct state so that we ignore events that come in while
    we're shutting things down.
    
    Signed-off-by: Malahal Naineni <malahal@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 980fa2f9d64b9be96107c89e165953ace311af54
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:40 2007 -0800

    [SCSI] libsas: phy port lock needs irq spinlocks
    
    Convert the phy port locks to use irq spinlocks.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e7571c152dea576f8c80ca240befc93d4f16551d
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:38 2007 -0800

    [SCSI] aic94xx: Scan SAS devices asynchronously
    
    Add the necessary hooks to the aic94xx driver to support the asynchronous SCSI
    device scan infrastructure.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fe3b5bfe73ace420709f0cfb198b0ffc704bd38b
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:35 2007 -0800

    [SCSI] libsas: sysfs phy control attributes should not be S_IWUGO
    
    Allowing the phy reset controls to be world-triggerable does not seem like
    a terribly good idea because SAS devices can be disrupted (and ATA devices
    are really disrupted) by a phy reset.  By default only root should be able
    to do things like that.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 57ba07dc54b7657e69fe8ac42d83df21e415c85b
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:32 2007 -0800

    [SCSI] aic94xx: Lock DDB read/write accesses
    
    Extend the use of the DDB lock to include all DDB accesses, because
    DDB updates now occur from multiple threads.  This fixes the SMP timeout
    problems that we were occasionally seeing with a x260, because the
    controller got confused when the DDBs got corrupted.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3b709df5f7c83b6b0907217a248a1414a37ffcb6
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:29 2007 -0800

    [SCSI] aic94xx: Fix DDB and SCB initialization
    
    Ed Chim of Adaptec informs us that the DDB registers need to be zeroed at
    initialization time and that some SCB initializations need to happen even if
    we don't use the SCB.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bf2a1928f3e5d44934e974940a8260a57fcc8a58
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:26 2007 -0800

    [SCSI] aic94xx: Match request_firmware with release_firmware
    
    The vmalloc() blob holding the sequencer firmware wasn't being released at
    module unload time, which resulted in a memory leak.
    
    Signed-off-by: Alexis Bruemmer <alexisb@us.ibm.com>
    Acked-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3cd041fb7f50f4cee3bc3a2b0ce02b1562894894
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:23 2007 -0800

    [SCSI] aic94xx: Remove workqueue code from REQ_TASK_ABORT/REQ_DEVICE_RESET code
    
    Now that task aborts and device port resets are done by the EH, we can
    remove all the code that set up workqueues and such and simply call
    sas_task_abort and let libsas figure things out.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 396819fba821ad56f1b90090d256f0ab726c89c5
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:20 2007 -0800

    [SCSI] libsas: Delay issuing ABORT TASK TMF until the error handler
    
    sas_task_abort() should simply abort the upper-level SCSI command and wait
    until the error handler to send the actual ABORT TASK command.  By
    deferring things to the EH we simplify the concurrency coordination and
    eliminate some race conditions.  Note that sas_task_abort has a few hooks
    to handle libsas internal commands properly too.
    
    Also rename do_sas_task_abort to __sas_task_abort just in case we really
    want to abort the task *right now* and we don't have a scsi_cmnd attached
    to the command.  This is a hook for libata internal commands to abort.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3ebf6922b0833807e54c73f4794c74baf9945fc8
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:17 2007 -0800

    [SCSI] libsas: Enable the EH strategy handler to reset a phy after a command
    
    When a SAS LLDD needs to request a device port reset, it needs to have all
    commands aborted before it can reset the port.  Since commands are put on
    the EH's list in the order that they were queued, the LLDD can set a "need
    reset" flag in the last task to be aborted so that the EH can reset the
    port after all commands are aborted.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 37958fb040cf6f88b354b9fa7e846014ffbd3b73
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:15 2007 -0800

    [SCSI] libsas: Remove SAS_TASK_INITIATOR_ABORTED flag
    
    This flag is no longer necessary because we push tasks to be aborted into
    the EH as soon as we possibly can, and let the SCSI EH code take care of
    the coordination for which this flag was used.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8f3b8fa9afe75cafc4feb317d305444f6c5271fb
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:12 2007 -0800

    [SCSI] aic94xx: Don't eat TMF_QUERY_TASK results
    
    In this driver, TMF_QUERY_TASK translates to QUERY_SSP_TASK.  The
    sequencer, it seems, is perfectly happy sending us a SSP response, which
    this function promptly "converts" into TMF_RESP_FUNC_FAILED.  This leads to
    the SAS EH making bad decisions based on bad data, so we should not perform
    the conversion in this case.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c8490f3a77805d04321d9e44486a679801a035b8
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:09 2007 -0800

    [SCSI] libsas: Use SCAN_WILD_CARD instead of ~0
    
    Magic number cleanup.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f12164200f09ec10764f2cf96da335fd83062bc4
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:06 2007 -0800

    [SCSI] aic94xx: Set lldd_max_execute_num in sas_ha
    
    The aic94xx module has a parameter that looks like it should set
    lldd_max_execute_num in the sas_ha, but it never sets this value.  Either
    we should set it or remove the parameter.  This allows us to enable task
    collector mode for this driver, though it is still off by default.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cde3f74bac3e4a6bcdc3a6370af38179fd8ef1f2
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:03 2007 -0800

    [SCSI] libsas: Destroy the task collector thread after releasing ports
    
    If we use task collector mode, we can end up destroying the task collector
    thread before we release the ports, which is bad if a port release causes
    a disk I/O (such as cache flushing).
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6d4dcd4dae25c48e8932326aaedfe560d7f2c7bb
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:15:00 2007 -0800

    [SCSI] libsas: Reset timer on taskless scsi_cmnds in sas_scsi_timed_out
    
    Every so often, a scsi_cmnd will time out, and the libsas timeout handler
    will discover that the scsi_cmnd does not have a sas_task attached to it.
    This can happen in two cases: (1) the scsi_cmnd actually made it through
    libsas to the HBA and is now going through scsi_done, or (2) the
    scsi_cmnd has been held up (host lock, slab alloc, etc) and libsas has
    not yet attached a sas_task.  In both cases, it is safe to ask SCSI for
    more time to process the command via EH_RESET_TIMER; we cannot blindly
    return EH_HANDLED because if (2) happens, we could end up calling
    scsi_done while another CPU is heading towards sas_queuecommand, which
    causes slab corruption when sas_task_done updates the freed scsi_cmnd.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit acbf167d4ad8c27f9743a4b539d51ae9535bf21c
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:14:57 2007 -0800

    [SCSI] libsas: Add a sysfs knob to enable/disable a phy
    
    This patch lets a user arbitrarily enable or disable a phy via sysfs.
    Potential applications include shutting down a phy to replace one
    lane of wide port, and (more importantly) providing a method for the
    libata SATL to control the phy.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b218a0d8e250e0ae8fd4d4e45bd66a588b380752
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:14:55 2007 -0800

    [SCSI] libsas: Don't give scsi_cmnds to the EH if they never made it to the SAS LLDD or have already returned
    
    On a system with many SAS targets, it appears possible that a scsi_cmnd
    can time out without ever making it to the SAS LLDD or at the same time
    that a completion is occurring.  In both of these cases, telling the
    LLDD to abort the sas_task makes no sense because the LLDD won't know
    about the sas_task; what we really want to do is to increase the timer.
    Note that this involves creating another sas_task bit to indicate
    whether or not the task has been sent to the LLDD; I could have
    implemented this by slightly redefining SAS_TASK_STATE_PENDING, but
    this way seems cleaner.
    
    This second version amends the aic94xx portion to set the
    TASK_AT_INITIATOR flag for all sas_tasks that were passed to
    lldd_execute_task.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bf451207511d049189ddb0a4eae3acdb086a3c82
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:14:52 2007 -0800

    [SCSI] libsas: Clean up rphys/port dev list after a discovery error on an expander
    
    sas_get_port_device assigns a rphy to a domain device in anticipation
    of finding a disk.  When a discovery error occurs in
    sas_discover_{sata,sas,expander}*, however, we need to clean up that
    rphy and the port device list so that we don't GPF.  In addition, we
    need to check the result of the second sas_notify_lldd_dev_found.
    This patch seems ok on a x260, x366 and x206m.
    
    This patch fixes up sas_expander.c separately because jejb has some
    cleanup patches of his own that are a prerequisite.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8880839815265ccc0edaff52ba08d750eea57acb
Author: Darrick J. Wong <djwong@us.ibm.com>
Date:   Thu Jan 11 14:14:49 2007 -0800

    [SCSI] libsas: Clean up rphys/port dev list after a discovery error.
    
    sas_get_port_device assigns a rphy to a domain device in anticipation
    of finding a disk.  When a discovery error occurs in
    sas_discover_{sata,sas,expander}*, however, we need to clean up that
    rphy and the port device list so that we don't GPF.  In addition, we
    need to check the result of the second sas_notify_lldd_dev_found.
    This patch seems ok on a x260, x366 and x206m.
    
    Signed-off-by: Darrick J. Wong <djwong@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit befede3dabd204e9c546cbfbe391b29286c57da2
Author: Seokmann Ju <seokmann.ju@qlogic.com>
Date:   Tue Jan 9 11:37:52 2007 -0800

    [SCSI] qla2xxx: correct locking while call starget_for_each_device()
    
    Removed spin_unlock_irq()/spin_lock_irq() pairs surrounding
    starget_for_each_device() calls.
    As Matthew W. pointed out, starget_for_each_device() can be called under
    a spinlock being held.
    The change has been tested and verified on qla2xxx.ko module.
    Thanks Matthew W. and Hisashi H. for help.
    
    Signed-off-by: Andrew Vasquez <Andrew.vasquez@qlogic.com>
    Signed-off-by: Seokmann Ju <Seokmann.ju@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3424a65d717ca87ce11acfb03cfd2f713886bfb4
Author: Kurt Garloff <kurt@garloff.de>
Date:   Tue Jan 9 02:28:54 2007 +0100

    [SCSI] scsi_scan message cosmetic error
    
    Hi,
    
    Minor typo ...
    In my first iteration of patches (that got merged), the
    BLIST_ATTACH_PQ3 actually had the value 0x800000, but that
    got changed later to avoid conflicts. This piece must have
    been overlooked.
    You could obviously do something like %x and then add the
    bitflags, but that looks overkill for something that does
    not tend to change.
    
    Please merge.
    (Patch applied against latest 2.6.20rc version that I tested.)
    
    From: Kurt Garloff <kurt@garloff.de>
    Subject: [SCSI SCAN] Fix logging message for PQ3 devices
    
    The blacklist flags BLIST_ATTACH_PQ3 has value 0x1000000,
    not 0x800000.
    
    Signed-off-by: Kurt Garloff <garloff@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 59f19a9efc3949f4e5675186bdcb6db1f46258a1
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Jan 9 21:40:52 2007 -0800

    [SCSI] megaraid: more kernel-doc fixes
    
    More megaraid kernel-doc fixes.
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Acked-by: Sumant Patro <sumantp@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a69b74d39f50b3e3ca9a6641bd71f3fc55d32d98
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Fri Jan 5 22:41:48 2007 -0800

    [SCSI] megaraid: fix kernel-doc
    
    kernel-doc modifications:
    - change "@param var" notation to @var;
    - change function/description separator from ':' to '-';
    - change var/description separator from '-' to ':';
    - fix a few doc. typos;
    - don't use kernel-doc /** lead-in when the doc. block is not kernel-doc;
    - use Linux common */ ending comment format instead of **/;
    - use correct function parameter names;
    - place function parameters immediately after the function short description;
    - place kernel-doc immediately before its function or macro;
    
    Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
    Acked-by: Sumant Patro <sumantp@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cd96d96f20f2509dfeb302548132e30f471c071a
Author: Sumant Patro <sumantp@lsil.com>
Date:   Fri Jan 5 07:10:09 2007 -0800

    [SCSI] megaraid_{mm,mbox}: init fix for kdump
    
    1.      Changes in Initialization to fix kdump failure.
            Send SYNC command on loading.
            This command clears the pending commands in the adapter
            and re-initialize its internal RAID structure.
            Without this change, megaraid driver either panics or fails to
            initialize the adapter during kdump's second kernel boot
            if there are pending commands or interrupts from other devices
            sharing the same IRQ.
    2.      Authors email-id domain name changed from lsil.com to lsi.com.
            Also modified the MODULE_AUTHOR to megaraidlinux@lsi.com
    
    Signed-off-by: Sumant Patro <sumant.patro@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6f3cbf552e0557a463ad421f07b2e873a608406f
Author: Douglas Gilbert <dougg@torque.net>
Date:   Fri Jan 5 00:05:25 2007 -0500

    [SCSI] scsi_debug: error processing
    
    After discussions in the thread titled:
        [PATCH] scsi_debug: illegal blocking memory allocation
    here is a patch containing the discussed fix and some other
    fixes and additions. The patch is against lk 2.6.20-rc3 .
    The version is bumped to 1.81 .
    
    ChangeLog:
      - Change several GFP_KERNEL allocations to GFP_ATOMIC
        as they can be called from queuecommand() context
      - check above allocation returns and if out of memory
        report DID_REQUEUE in two cases, DID_NO_CONNECT in
        another, and fail slave configure() in another
      - add support for WRITE BUFFER command
      - add aborted_command error injection support
        (opts mask 0x10), similar mechanism to
        recovered_error injection.
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d780c3bf2150264947870bb68c057c26c2aff7cc
Author: Douglas Gilbert <dougg@torque.net>
Date:   Thu Jan 4 23:48:54 2007 -0500

    [SCSI] mptctl for mptsas
    
    This patch makes the mptctl pass through available if
    the mptsas driver is selected. Without this patch
    if mptsas is the only fusion driver chosen, then
    the mptctl is not presented as an option.
    
    smp_utils uses the mptctl driver to pass SAS SMP
    functions through a MPT SAS HBA.
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Acked-by: Eric Moore <Eric.Moore@lsi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 596f482a90ae27ea1b3da6a12ee42909045fbfd0
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jan 2 12:56:00 2007 +0100

    [SCSI] kill scsi_rety_command
    
    scsi_retry_command only has a single caller, so there is no point
    in having this function.  Additionally the memset of the sense
    buffer it does is entirely superflous as scsi_request_fn already
    calls scsi_init_cmd_errh to perform this memset before the command
    is reissued.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c27d85f3f3c5c663d6b6295730e8a7c0c3f9a296
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Mon Dec 25 21:32:04 2006 +0100

    [SCSI] SNI RM 53c710 driver
    
    This patch adds a SCSI driver for the onboard 53c710 chip of some
    SNI RM machines.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3b1ca5a12ce9849a794019c4b51cdbd456c1e8e7
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Sat Jan 13 13:46:51 2007 -0600

    [SCSI] NCR_D700: needs burst length setting to 8
    
    The D700 needs the burst length setting to the previous 53c700 default
    of 8 otherwise it will be effectively disabled.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f67a9c1592b3a0292376bdcbdcc34cbe353967a8
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Mon Dec 25 21:30:08 2006 +0100

    [SCSI] 53c700: Allow setting burst length
    
    This is a patch, which allows not only disabling bursting but to specify
    different burst lenghts. This feature is needed to get the 53c700 driver
    working for the onboard SCSI controller of SNI RM machines, which only
    work reliably with a 4 word burst length.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2e9c9cf44b17ef5fa1f360bc175ed7761daf3428
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Thu Jan 11 22:42:41 2007 +0100

    [WATCHDOG] advantechwdt.c - convert to platform_device part 2
    
    Convert the reboot_notifier into the platform_device's shutdown
    method
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit c2bd11c7cbba45c3a1d850a8a29855cb4d61654c
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Thu Jan 11 22:35:40 2007 +0100

    [WATCHDOG] advantechwdt.c - convert to platform_device
    
    Convert the advantechwdt watchdog into a platform_device
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 0349a363e23a0533e081ca320c837bc08247343e
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Thu Jan 11 22:27:51 2007 +0100

    [WATCHDOG] advantechwdt.c - move set_heartbeat to a seperate function
    
    Put the set_heartbeat/timeout code into a seperate function
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 1d747be647c2239e39a9b5faa138c1e36222b37e
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Thu Jan 11 22:19:28 2007 +0100

    [WATCHDOG] advantechwdt.c - cleanup before platform_device patches
    
    This cleanup consists of:
    - make sure that the printk's use the module/driver-name
    - do the exit of the module exactly the opposite of the init of the module
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 98c08e98f8e5af1caf106e9ee3d46f3eb1ba4858
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Wed Jan 10 23:38:56 2007 +0100

    [WATCHDOG] acquirewdt.c - convert to platform_device part 2
    
    Convert the reboot_notifier into the platform_device's shutdown
    method
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit ad5fe323182fd3adab4225c93eae36f3c555a884
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Wed Jan 10 23:36:13 2007 +0100

    [WATCHDOG] acquirewdt.c - convert to platform_device
    
    Convert the acquirewdt watchdog into a platform_device
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 76c11f0442257099cbb474301f2ffff38649d3d3
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Wed Jan 10 23:23:44 2007 +0100

    [WATCHDOG] acquirewdt.c - clean before platform_device patches
    
    Clean the current code before we convert the driver to a platform_device.
    This clean consists of:
    - document the includes
    - make sure that the printk's use the module/driver-name
    - do the exit of the module exactly the opposite of the init of the module
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit f3dc07330c3e43a8d365eaa74693e320e6ed79d9
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Tue Jan 9 22:43:49 2007 +0100

    [WATCHDOG] pcwd_usb.c - get heartbeat from dip switches
    
    The PCWD cards normally use the heartbeat that is set via
    the dip-switches of the card. There are only 3 switches,
    thus 8 combinations that each have a certain heartbeat.
    The card can however be programmed with a heartbeat from
    1 till 65535 seconds. This is what our driver does: it
    programs the heartbeat on the card.
    
    There are however a lot of people that don't know that
    we set the heartbeat of the watchdog card to the value
    provided by the heartbeat module parameter. Instead they
    think that the heartbeat value is the same as set by the
    dip-switches.
    
    This patch changes the driver so that at startup you can
    take the heartbeat from the dip-switches. You do this
    by setting the heartbeat module parameter to 0. This
    patch also makes this the default behaviour.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit f9146f26da9a4336e02e35bf20222dcb2ee62c7f
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Tue Jan 9 22:38:54 2007 +0100

    [WATCHDOG] pcwd.c - e-mail adres update
    
    update Simon Machell's e-mail adres
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 82d5b9a7c63054a9a2cd838ffd177697f86e7e34
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Date:   Tue Jan 9 14:14:48 2007 -0600

    JFS: Add lockdep annotations
    
    Yeah, it's about time.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 17e6afc75ad0150d265a86a8f155b2871f9c07fe
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Date:   Tue Jan 9 08:57:34 2007 -0600

    JFS: Avoid BUG() on a damaged file system
    
    On Mon, 2006-12-18 at 19:51 +0100, Eric Sesterhenn wrote:
    > hi,
    >
    > while playing around with fsfuzzer, i got the following oops with jfs:
    >
    > [  851.804875] BUG at fs/jfs/jfs_xtree.c:760
    > assert(!BT_STACK_FULL(btstack))
    > [  851.805179] ------------[ cut here ]------------
    > [  851.805238] kernel BUG at fs/jfs/jfs_xtree.c:760!
    
    JFS should mark the superblock dirty and return an error rather than
    calling BUG().
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 2ef473de1ee62eb31b6b98885562cdb4389b01dc
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Mon Jan 8 22:45:30 2007 +0100

    [WATCHDOG] pcwd_usb.c - get heartbeat from dip switches
    
    The PCWD cards normally use the heartbeat that is set via
    the dip-switches of the card. There are only 3 switches,
    thus 8 combinations that each have a certain heartbeat.
    The card can however be programmed with a heartbeat from
    1 till 65535 seconds. This is what our driver does: it
    programs the heartbeat on the card.
    
    There are however a lot of people that don't know that
    we set the heartbeat of the watchdog card to the value
    provided by the heartbeat module parameter. Instead they
    think that the heartbeat value is the same as set by the
    dip-switches.
    
    This patch changes the driver so that at startup you can
    take the heartbeat from the dip-switches. You do this
    by setting the heartbeat module parameter to 0. This
    patch also makes this the default behaviour.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit d26d90967de9d51c08d5821e362cb2245f83c1a8
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Mon Jan 8 22:40:33 2007 +0100

    [WATCHDOG] pcwd_usb.c - document includes
    
    document and review the include files.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 045798b56f59d02beef84d5aa7137786c50912c2
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sun Jan 7 21:57:03 2007 +0100

    [WATCHDOG] pcwd_pci.c - spinlock fixes
    
    the keepalive and get_temperature functions should
    use spinlocks also.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 39e3a0556a1e2d33f9491d43bae9fdaa09b0308a
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sun Jan 7 21:49:11 2007 +0100

    [WATCHDOG] pcwd_pci.c - get heartbeat from dip switches
    
    The PCWD cards normally use the heartbeat that is set via
    the dip-switches of the card. There are only 3 switches,
    thus 8 combinations that each have a certain heartbeat.
    The card can however be programmed with a heartbeat from
    1 till 65535 seconds. This is what our driver does: it
    programs the heartbeat on the card.
    
    There are however a lot of people that don't know that
    we set the heartbeat of the watchdog card to the value
    provided by the heartbeat module parameter. Instead they
    think that the heartbeat value is the same as set by the
    dip-switches.
    
    This patch changes the driver so that at startup you can
    take the heartbeat from the dip-switches. You do this
    by setting the heartbeat module parameter to 0. This
    patch also makes this the default behaviour.
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit bb0958544f3c7c016b2a3025ab3694363e403aa1
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Thu Jan 4 15:03:18 2007 +0800

    ACPI: use more understandable bus_id for ACPI devices
    
    Some of the ACPI devices use the internal fake hids
    which are exposed to userspace as devces' bus_id after sysfs conversion.
    To make it more friendly, we convert them to more understandable strings.
    
    For those devices w/o PNPids, we use "device:instance_no" as the bus_id
    instead of "PNPIDNON:instance_no".
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 82cae99980c158cb9724415547ca59cf95c58792
Author: Rui Zhang <rui.zhang@intel.com>
Date:   Wed Jan 3 23:40:53 2007 -0500

    ACPI: video: fix LCD monitor seen as CRT
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7349
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2786f6e388e9dfe9e7b1c3c6bd7fcfba9cfb9831
Author: Rui Zhang <rui.zhang@intel.com>
Date:   Thu Dec 21 02:21:13 2006 -0500

    ACPI: fix Supermicro X7DB8+ Boot regression
    
    http://bugzilla.kernel.org/show_bug.cgi?id=7695
    
    Originally we converted bind/unbind to use a new pci bridge driver.
    The driver will add/remove _PRT, so we can eventually remove
    .bind/.unbind methods.
    
    But we found that some of the _ADR-Based devices don't have _PRT,
    i.e. they are not managed by the new ACPI PCI bridge driver.
    So that .bind method is not called for some _ADR-Based devices,
    which leads to a failure.
    
    Now we make ACPI PCI Root Bridge Driver scan and binds all _ADR-Based devices
    once the driver is loaded, in the .add method of ACPI PCI Root Bridge driver.
    
    Extra code path for calling .bind/.unbind when _ADR-Based devices
    are hot added/removed is also added.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e49bd2dd5a503bb94fe2f2af45422b610940b75d
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Fri Dec 8 17:23:43 2006 +0800

    ACPI: use PNPID:instance_no as bus_id of ACPI device
    
    Previously we used the device name in the DSDT, but would
    crash upon encountering a duplicate. Also, exposing the
    DSDT device name to the user in a patch isn't a good idea,
    because it is arbitrary.
    
    After some discussion, we finally decided to use
    "PNPID:instance_no" as the bus_id of ACPI devices.
    
    Two attributes for each device are added at the same time,
    the full pathname in ACPI namespace and hardware_id if it has.
    
    NOTE:	acpi_bus_id_list is used to keep the information of PNPID
    	and instance number of the given PNPID. Loop the
    	acpi_bus_id_list to find the instance_no of the	same PNPID
    	when register a device. If failed, i.e. we don't have a
    	node with this PNPID, allocate one and link it to this list.
    
    NOTE:	Now I don't take the memory free work in charge.
    	If necessary, I can add a reference count in
    	struct acpi_device_bus_id, and check the reference and
    	when unregister a device, i.e. memory is freed when
    	the reference count of a given PNPID is 0.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 65a2d2258e0f29371606aa0f7f4258e618ecebe8
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Thu Dec 21 00:42:55 2006 -0500

    Input: pc110pad - return proper error
    
    The driver should return -ENODEV rather than -ENOENT when it
    detects a PCI device in the box.
    
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 2f3d000a133f68250635f14f6caf24d32d358090
Author: Yu Luming <luming.yu@gmail.com>
Date:   Sat Nov 11 02:40:34 2006 +0800

    ACPI: Adds backlight sysfs support for acpi video driver.
    
    Adds backlight sysfs support for acpi video driver.
    
    signed-off-by: Luming Yu <Luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b03637b8863159a4518cb0a9ab90577460fe3417
Author: Yu Luming <luming.yu@gmail.com>
Date:   Tue Dec 19 12:56:18 2006 -0800

    output: Add output class document
    
    Signed-off-by: Luming Yu <Luming.yu@intel.com>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2dec3ba8d872aa3ffbcdb8f6f8a2c0bcd44e9910
Author: Yu Luming <luming.yu@gmail.com>
Date:   Tue Dec 19 12:56:17 2006 -0800

    output: Add display output class support
    
    Add generic abstract layer for display output switch control.  The output
    sysfs class driver provides an abstract video output layer that can be used to
    hook platform specific methods to enable/disable video output device through
    common sysfs interface.
    
    Signed-off-by: Luming Yu <Luming.yu@intel.com>
    Cc: "Antonino Daplas" <adaplas@pol.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9cd446198e7646431a7f2ce7dbeec8df9f77012b
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Tue Dec 19 17:51:44 2006 +0900

    [WATCHDOG] fix clk_get() error check
    
    The return value of clk_get() should be checked by IS_ERR().
    
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit 0b6dd8a640fbaf73b74949b6dc2be50263532576
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Dec 18 10:31:32 2006 +0000

    [WATCHDOG] s3c2410_wdt exit driver via labels
    
    Cleanup the s3c2410_wdt driver's exit point by
    using labels instead of multiple returns. Also
    remove the checks for the resources having been
    allocate in the exit, as we will now either have
    fully allocated or not allocated the resources
    at-all.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit ae8433324be16673c75951986dcf85f29c090557
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Thu Dec 7 20:57:10 2006 +0800

    ACPI: Set fake hid for non-PNPID ACPI devices
    
    We do this mainly because:
    1.	hid is used to match ACPI devices and drivers.
    	.match method which is incompatible to driver model
    	can be deleted from acpi_driver.ops then.
    2.	As the .uevent method mark ACPI drivers by PNPID,
    	fake hid is set to non-PNPID devices so that udev script
    	can load the right ACPI driver by looking for
    	"HWID = " or "COMPTID = ".
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit db3e1cc3257758d8a694d0a6ab29f109fb019853
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Thu Dec 7 20:57:05 2006 +0800

    ACPI: Convert ACPI PCI .bind/.unbind to use PCI bridge driver
    
    acpi_device had a .bind/.unbind methods, but Linux driver model does not.
    Cut ACPI PCI code over to use the Linux driver model methods.
    
    Convert bind/unbind to use a new pci bridge driver.
    The driver will add/remove _PRT, so we can eventually
    remove .bind/.unbind methods.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 54a07001b9efb6a3bb9a9d8ac9ddb226e29b5406
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Thu Dec 7 20:56:51 2006 +0800

    ACPI: consolidate two motherboard drivers into one
    
    Consolidate motherboard1 and motherboard2 drivers into one
    so that driver core doesn't complain that two drivers have
    the same name.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 96333578b023957537c3e98b50af7f3b7e08e411
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Thu Dec 7 20:56:46 2006 +0800

    ACPI: add acpi_bus_removal_type in acpi_device
    
    Add removal_type in structure acpi_device for hot removal.
    
    ACPI_BUS_REMOVAL_EJECT is used for ACPI device hot removal.
    Only one parameter is allowed in .remove method due to driver model.
    So removal_type is added to indicate different removal type.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c4168bff32e218b8400cb48b48adb9b7f7bb31b8
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Thu Dec 7 20:56:41 2006 +0800

    ACPI: add acpi_bus_ops in acpi_device
    
    Add acpi_bus_ops in acpi_device to support acpi hot plug.
    
    NOTE:	Two methods .add and .start in acpi_driver.ops are
    	called separately to probe ACPI devices, while only
    	.probe method is called in driver model.
    	As executing .add and .start separately is critical
    	for ACPI device hot plug, we use acpi_bus_ops to
    	distinguish different code path.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f883d9db008deb20d4969c26475100cec2b7f6f8
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Thu Dec 7 20:56:38 2006 +0800

    ACPI: convert to sysfs framework
    
    Setup new sysfs framework
    
    1.	Remove /sys/firmware/acpi
    2.	Add ACPI device in device tree.
    
    File "eject" for every device that has _EJ0 method is moved from
    /sys/firmware to /sys/devices.
    Operation on this file is exactly the same as before.
    i.e. echo 1 to "eject" will cause hot removal of this device.
    Corresponding changes should be made in userspace for hot removal.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a7178df5e7e5730e5daa6cf6d8b8bf73adbe75c0
Author: Li Shaohua <shaohua.li@intel.com>
Date:   Thu Dec 7 20:56:34 2006 +0800

    ACPI: adjust init order
    
    Adjust link order to add ACPI devices to global list before PCI devices.
    In addition, acpi_bus type must be initialized before any driver loads.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1890a97ab3f66d1e99768439f8067608b9b97fe3
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Thu Dec 7 20:56:31 2006 +0800

    ACPI: change registration interface to follow driver model
    
    ACPI device/driver registration Interfaces are modified
    to follow Linux driver model.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5d9464a46918ced087c351a10f38cee95725f85b
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Thu Dec 7 20:56:27 2006 +0800

    ACPI: add ACPI bus_type for driver model
    
    Add ACPI bus_type for Linux driver model.
    
    1.	.shutdown method is added into acpi_driver.ops
    	needed by bus_type operations.
    2.	remove useless parameter 'int state' in .resume method.
    3.	change parameter 'int state'
    	to 'pm_message_t state' in .suspend method.
    
    Note:	The new .uevent method mark ACPI drivers by PNPID instead of by name.
    	Udev script needs to look for "HWID=" or "COMPTID=" to load
    	ACPI drivers as a result.
    
    Signed-off-by: Li Shaohua <shaohua.li@intel.com>
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d43ec68e9837dfa6618ab473622683fdbf6e68a9
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Thu Dec 7 20:56:23 2006 +0800

    ACPI: add device_driver and hepler functions
    
    Add device_driver into acpi_driver for driver model.
    Add helper functions 'to_acpi_device' and 'to_acpi_driver'
    to get structure acpi_device/acpi_driver by device/device_driver.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1d268b0a0f5407138caf0dec9559d68e657a3a74
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Thu Dec 7 20:56:19 2006 +0800

    ACPI: rename some functions
    
    We want the name 'to_acpi_device'.
    And the current macro 'to_acpi_device' will be removed
    after device model is setup.
    So just simply rename them.
    
    Signed-off-by: Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9e89dde2b063ca73fcdc9244fe68e2dea32c5088
Author: Zhang Rui <rui.zhang@intel.com>
Date:   Thu Dec 7 20:56:16 2006 +0800

    ACPI: clean up scan.c
    
    Adjust the code and make code doing similar things together.
    No logic changes.
    
    Signed-off-by : Zhang Rui <rui.zhang@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f41464fd84463dee89d53750cb74f6be30b31620
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Mon Dec 11 21:03:18 2006 -0500

    [PARISC] Fix thinko in cpu_data.lock removal
    
    Need to remove the initializer as well. Doh.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3c97b5e93faf9262407835046effc886efefa0a6
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Thu Dec 7 23:52:27 2006 -0500

    [PARISC] Move spinlock_t out of struct cpu_data
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 6858f3bf6e856d10a932d2d167d3f34e366042c6
Author: David Howells <dhowells@redhat.com>
Date:   Thu Dec 7 15:31:38 2006 +0000

    [PATCH] WorkStruct: Fix up some PA-RISC work items
    
    Fix up some PA-RISC work items broken by the workstruct reduction.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 8535e9dfd350637b37eb38edeb3eb61060d9c894
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Thu Dec 7 21:46:11 2006 -0500

    [PARISC] Remove duplicate PDC_PAT_CELL defines
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 915115ca40989d7efb62689b42fd05b55cd9ac07
Author: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
Date:   Thu Dec 7 21:37:11 2006 -0500

    [PARISC] pdcpat remove extra brackets
    
    This patch removes extra brackets.
    
    Signed-off-by: Mariusz Kozlowski <m.kozlowski@tuxland.pl>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit f5280cbe8348eb5824885f3144483cec858ec8ed
Author: Grant Grundler <grundler@parisc-linux.org>
Date:   Fri Dec 1 10:06:39 2006 -0800

    [PARISC] Remove GCC_VERSION usage as suggested by Adrian Bunk
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 6de187ee17058e7798357994696774a5c2c8a6d9
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Nov 18 10:05:16 2006 -0700

    [PARISC] Make Lasi Ethernet depend on GSC only
    
    If we separate out LASI and ASP support later, we'll need this.
    Plus, this makes it consistent with the ncr700 scsi driver.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 93ea774bf2d7f2b04ce4c57dbae08b5fa877296d
Author: Helge Deller <deller@gmx.de>
Date:   Sat Oct 14 22:11:32 2006 +0200

    [PARISC] lasi_82596: use BUILD_BUG_ON() and constify static array
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit f8fc18a1323c3f4171a643d6ebf1597f4ba8bc53
Author: Helge Deller <deller@gmx.de>
Date:   Wed Oct 18 21:44:30 2006 +0200

    [TRIVIAL] [PARISC] Fix module.c printk message, add missing ')'
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit be10815f0eeb9578f103b79f696da4548f39e8ad
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sun Oct 15 22:40:27 2006 -0400

    [PARISC] bloody printf fmt string warnings
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3ee8f5e2cdd83b869f1b55e08eb26a87889b62f9
Author: Helge Deller <deller@gmx.de>
Date:   Sat Oct 14 20:02:15 2006 +0200

    [PARISC] avoid compiler warnings when compiling 64bit
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 353dfe1290bdce1d40609e35ca6e42829623ff5f
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Nov 18 10:11:03 2006 -0700

    [PARISC] Fix PCI bus numbering in the presence of Cardbus bridges
    
    Firmware ignores Cardbus bridges, so when Linux assigns bus numbers,
    it must override firmware's notion of what the busses are numbered.
    This is not sufficient to support the Cardbus bridge as there is also
    no interrupt routing table entry for them.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit caa451f30aabba47e96355511a63456357074df6
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Oct 16 00:29:47 2006 -0400

    [PARISC] Reserve 1GB of space for vmalloc/tmpalias space on parisc64
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit e51ec241784f516ad3a916a24ac936364cd10d63
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sun Nov 5 15:24:48 2006 -0700

    [PARISC] more sparse fixes
    
    0/NULL changes, __user annotations, __iomem annotations
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c2c4798e04ef836b12f5df04e7d1a1710cb39301
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Thu Oct 26 10:06:07 2006 -0600

    [PARISC] sparse fixes
    
    0/NULL, missing __user, missing __iomem, non-ANSI prototype.
    
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 423c8ece2941a7ee9b003564d5aab789b9b330d8
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Tue Oct 24 13:49:54 2006 -0600

    [PARISC] parisc-agp: Fix integer/pointer warning
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 514fb84e1c5d12a0af808458bcae0c6463041f93
Author: Ryan Bradetich <rbradetich@gmail.com>
Date:   Fri Nov 10 04:06:14 2006 +0000

    [PARISC] [MUX] Get the hversion directly from the parisc_device
    
    Willy pointed out the hversion is already stored
    in the parisc_device, so I do not need to extract
    this information directly from the IODC data.
    Also by using the information in the parisc_device
    I can avoid re-reading the IODC data for the Muxes
    with specifed port counts.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 614254458452d09ea0376862160662f2a6075ab9
Author: Ryan Bradetich <rbradetich@gmail.com>
Date:   Fri Nov 10 03:08:45 2006 +0000

    [PARISC] [MUX] Correctly report the number of available ports
    
    This patch adds a new function to return the actual number
    of ports available.  Some of the built-in Muxes return the
    number of supported ports, but not all of these port are
    available for use.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 752b940359089ee1bcaceeb5c62d626a92586ba2
Author: Ryan Bradetich <rbradetich@gmail.com>
Date:   Thu Nov 9 04:45:08 2006 +0000

    [PARISC] [MUX] Detect multiple cards in the correct order
    
    This patch follows the example of the 8250_gsc
    driver by probing for specific built-in Mux
    cards first.  This allows the system to preserve
    the correct detection order with multiple Mux
    cards.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c380f057269686e17db74d360c923663889ac702
Author: Ryan Bradetich <rbradetich@gmail.com>
Date:   Sun Nov 5 01:21:44 2006 +0000

    [PARISC] [MUX] Make the Serial Mux driver work as module
    
    The following updates are based off a patch from willy:
      * Removal of the mux_card list.
      * Add the mux_remove function.
    
    Other updates:
      * Re-organize the driver structure a bit to make the
        mux_init and mux_exit functions more symmetrical.
      * Added the del_timer.
      * Unregistered the console.
    
    At this point I can insmod, rmmod, and re-insmod the
    mux without any failures.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 9c6416ce6a9829ede1594403d19b22d23cf54e2e
Author: Ryan Bradetich <rbrad@j6000.bradetich.net>
Date:   Fri Nov 3 06:34:16 2006 +0000

    [PARISC] [MUX] Claim resources for the Mux driver
    
    This patch claims the iomem resources
    for the Mux driver.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3de7b6482b4e9a34f91604ee0fb7a3ace250f3bb
Author: Ryan Bradetich <rbrad@parisc-linux.org>
Date:   Fri Nov 3 05:52:41 2006 +0000

    [PARISC] [MUX] Mux driver updates
    
    This patch changes the Mux console to
    use the Mux hardware instead of the PDC
    Software console.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 4bd5d82779466a2969c631ce283bef926680c9f5
Author: Ryan Bradetich <rbrad@parisc-linux.org>
Date:   Fri Nov 3 05:38:39 2006 +0000

    [PARISC] [MUX] Mux driver bug fix
    
    This patch addresses the problems identified by Russell King in the
    following email:
    
    http://lists.parisc-linux.org/pipermail/parisc-linux/2005-December/027912.html
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 075b8783da0db700868c7b391636a85c06a89678
Author: Ryan Bradetich <rbrad@parisc-linux.org>
Date:   Fri Nov 3 05:05:01 2006 +0000

    [PARISC] HPPB bus updates for E-Class systems
    
    This patch addresses the following issues:
       * Removes an incorrect comment.
       * Fixes a couple of compiler warnings.
       * Properly detects the HP-PB bus on E-Class systems.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 328d968e4fbbd439760c04de95998faeb092a9ed
Author: Ryan Bradetich <rbrad@parisc-linux.org>
Date:   Thu Oct 26 01:27:18 2006 +0000

    [PARISC] Fix ccio_request_resource when CONFIG_IOMMU_CCIO is not defined
    
    This patch fixes the ccio_request_resource to work properly when
    the CONFIG_IOMMU_CCIO is not defined.  This patch was tested on
    my E35.
    
    Signed-off-by: Ryan Bradetich <rbrad@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 53faf2910d3539a963d171674ad6364ff2854eea
Author: Kyle McMartin <kyle@mako.i.cabal.ca>
Date:   Mon Oct 16 20:34:00 2006 -0400

    [PARISC] Unbreak discontigmem mem_init()
    
    The `simple' way of walking and checking PageReserved is broken on
    discontigmem, instead we need to check each range explicitly.
    
    (Also rename a few things so they make more sense.)
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit ce8420bb65d25335c3b48ddfb1b5a244f53bfb75
Author: Helge Deller <deller@gmx.de>
Date:   Sat Oct 14 22:10:44 2006 +0200

    [PARISC] Show more memory information and memory layout at bootup
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 58554927f85616c374795fbddcf0607a3faa7c46
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Oct 13 12:32:50 2006 -0600

    [PARISC] Delete arch/parisc/mm/kmap.c again
    
    I deleted this file from 2.4 5 years ago.  Unfortunately, that change
    never got merged to Linus and so when we switched to 2.5 it came back
    and nobody noticed.  It's never been built in 2.5/2.6 as it was never
    in the Makefile.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
