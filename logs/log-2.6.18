commit e478bec0ba0a83a48a0f6982934b6de079e7e6b3
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 19 20:42:06 2006 -0700

    Linux v2.6.18. Arrr!
    
    Ahoy, all land-lubbers, test me out right smartly!
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3752aee96538b582b089f4a97a26e2ccd9403929
Merge: 4ed4b54... 888454c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 19 20:36:22 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPV4] fib_trie: missing ntohl() when calling fib_semantic_match()
      [NETFILTER]: xt_quota: add missing module aliases
      [ATM]: [he] don't hold the device lock when upcalling

commit 888454c57a45511808d3fa52597b3d765df034a6
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 19 13:42:46 2006 -0700

    [IPV4] fib_trie: missing ntohl() when calling fib_semantic_match()
    
    fib_trie.c::check_leaf() passes host-endian where fib_semantic_match()
    expects (and stores into) net-endian.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b22b9004f22ba8ca33d15059e8b710a4b71ec3cc
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Sep 19 13:00:57 2006 -0700

    [NETFILTER]: xt_quota: add missing module aliases
    
    Add missing aliases for ipt_quota and ip6t_quota to make autoload
    work.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7f81dc0097095f19d25e14c043edfdebb9e01295
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Tue Sep 19 12:59:11 2006 -0700

    [ATM]: [he] don't hold the device lock when upcalling
    
    This can create a deadlock/lock ordering problem with other layers
    that want to use the transmit (or other) path of the card at that
    time.
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4ed4b5475211fab6a0ad00eed2f9297395e7598e
Merge: 79e453d... 5c2d97c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 19 09:46:53 2006 -0700

    Merge branch 'fixes' of git://git.linux-nfs.org/pub/linux/nfs-2.6
    
    * 'fixes' of git://git.linux-nfs.org/pub/linux/nfs-2.6:
      NFS: Fix nfs_page use after free issues in fs/nfs/write.c
      NFSv4: Fix incorrect semaphore release in _nfs4_do_open()
      NFS: Fix Oopsable condition in nfs_readpage_sync()

commit 5c2d97cb31fb77981797fec46230ca005b865799
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Sep 18 23:20:35 2006 -0400

    NFS: Fix nfs_page use after free issues in fs/nfs/write.c
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 76723de0cf5b186afe2f329eeef304c321d52bf8
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Sep 15 08:11:51 2006 -0400

    NFSv4: Fix incorrect semaphore release in _nfs4_do_open()
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 7a52411107e1ac8f5be6967936ec237f40a1c7e4
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Sep 15 16:03:45 2006 -0400

    NFS: Fix Oopsable condition in nfs_readpage_sync()
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 79e453d49bd49ba1b576f89310cc565c9e4ca379
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 19 08:15:22 2006 -0700

    Revert mmiocfg heuristics and blacklist changes
    
    This reverts commits 11012d419cfc0e0f78ca356aca03674217910124 and
    40dd2d20f220eda1cd0da8ea3f0f9db8971ba237, which allowed us to use the
    MMIO accesses for PCI config cycles even without the area being marked
    reserved in the e820 memory tables.
    
    Those changes were needed for EFI-environment Intel macs, but broke some
    newer Intel 965 boards, so for now it's better to revert to our old
    2.6.17 behaviour and at least avoid introducing any new breakage.
    
    Andi Kleen has a set of patches that work with both EFI and the broken
    Intel 965 boards, which will be applied once they get wider testing.
    
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Edgar Hucek <hostmaster@ed-soft.at>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ab5cfd2aa3af40b35d7a948de8e279dc82c5b9f6
Merge: 833f732... ea59830...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 19 08:01:58 2006 -0700

    Merge git://git.infradead.org/mtd-2.6
    
    * git://git.infradead.org/mtd-2.6:
      [MTD] Use SEEK_{SET,CUR,END} instead of hardcoded values in mtdchar lseek()
      MTD: Fix bug in fixup_convert_atmel_pri
      [JFFS2][SUMMARY] Fix a summary collecting bug.
      [PATCH] [MTD] DEVICES: Fill more device IDs in the structure of m25p80
      MTD: Add lock/unlock operations for Atmel AT49BV6416
      MTD: Convert Atmel PRI information to AMD format
      fs/jffs2/xattr.c: remove dead code
      [PATCH] [MTD] Maps: Add dependency on alternate probe methods to physmap
      [PATCH] MTD: Add Macronix MX29F040 to JEDEC
      [MTD] Fixes of performance and stability issues in CFI driver.
      block2mtd.c: Make kernel boot command line arguments work (try 4)
      [MTD NAND] Fix lookup error in nand_get_flash_type()
      remove #error on !PCI from pmc551.c
      MTD: [NAND] Fix the sharpsl driver after breakage from a core conversion
      [MTD] NAND: OOB buffer offset fixups
      make fs/jffs2/nodelist.c:jffs2_obsolete_node_frag() static
      [PATCH] [MTD] NAND: fix dead URL in Kconfig

commit 833f73299fdf4497af1552e219e95661f4d2cdca
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Mon Sep 18 20:12:33 2006 -0700

    [PATCH] EXT2: Remove superblock lock contention in ext2_statfs
    
    Fix a performance degradation introduced in 2.6.17.  (30% degradation
    running dbench with 16 threads)
    
    Commit 21730eed11de42f22afcbd43f450a1872a0b5ea1, which claims to make
    EXT2_DEBUG work again, moves the taking of the kernel lock out of
    debug-only code in ext2_count_free_inodes and ext2_count_free_blocks and
    into ext2_statfs.
    
    The same problem was fixed in ext3 by removing the lock completely (commit
    5b11687924e40790deb0d5f959247ade82196665)
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac7fb273ca1d0b4fb354575bb6e101ffd09e0b54
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Mon Sep 18 20:12:27 2006 -0700

    [PATCH] headers_check: Clean up asm-parisc/page.h for user headers
    
    Remove definitions of PAGE_* from the user view
    Delete unnecessary comments referring to the size of pages
    Only include <asm-generic> if we're in __KERNEL__
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 020d8c063b4d850b53dfbaee843c8335b7a90d26
Author: Geert Uytterhoeven <geert@linux-m68k.org>
Date:   Mon Sep 18 20:12:23 2006 -0700

    [PATCH] Fix 'make headers_check' on ia64
    
    Fix 'make headers_check' on m68k
    
    Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 271fc18eead0aa330758a3b9d8a57ffe315a1978
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Sep 18 20:12:19 2006 -0700

    [PATCH] Add headers_check' target to output of 'make help'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86998aa6534e839ec003ed2ef7067d6fe8696ccc
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Sep 19 11:14:34 2006 +0200

    [PATCH] genirq core: fix handle_level_irq()
    
    while porting the -rt tree to 2.6.18-rc7 i noticed the following
    screaming-IRQ scenario on an SMP system:
    
     2274  0Dn.:1 0.001ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.010ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.020ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.029ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.039ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.048ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.058ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.068ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.077ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.087ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
     2274  0Dn.:1 0.097ms: do_IRQ+0xc/0x103  <= (ret_from_intr+0x0/0xf)
    
    as it turns out, the bug is caused by handle_level_irq(), which if it
    races with another CPU already handling this IRQ, it _unmasks_ the IRQ
    line on the way out. This is not how 2.6.17 works, and we introduced
    this bug in one of the early genirq cleanups right before it went into
    -mm. (the bug was not in the genirq patchset for a long time, and we
    didnt notice the bug due to the lack of -rt rebase to the new genirq
    code. -rt, and hardirq-preemption in particular opens up such races much
    wider than anything else.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47a5c6fa0e204a2b63309c648bb2fde36836c826
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 18 16:20:40 2006 -0700

    x86: save/restore eflags in context switch
    
    (And reset it on new thread creation)
    
    It turns out that eflags is important to save and restore not just
    because of iopl, but due to the magic bits like the NT bit, which we
    don't want leaking between different threads.
    
    Tested-by: Mike Galbraith <efault@gmx.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d19f176a2884d31c4fe2c7018349ff884a819b1
Merge: 20bf94e... fe26109...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 18 16:16:05 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [ATM] CLIP: Do not refer freed skbuff in clip_mkip().
      [NET]: Drop tx lock in dev_watchdog_up
      [PACKET]: Don't truncate non-linear skbs with mmaped IO
      [NET]: Mark frame diverter for future removal.
      [NETFILTER]: Add secmark headers to header-y
      [ATM]: linux-atm-general mailing list is subscribers only
      [ATM]: [he] when transmit fails, unmap the dma regions
      [TCP] tcp-lp: update information to MAINTAINERS
      [TCP] tcp-lp: bug fix for oops in 2.6.18-rc6
      [BRIDGE]: random extra bytes on STP TCN packet
      [IPV6]: Accept -1 for IPV6_TCLASS
      [IPV6]: Fix tclass setting for raw sockets.
      [IPVS]: remove the debug option go ip_vs_ftp
      [IPVS]: Make sure ip_vs_ftp ports are valid
      [IPVS]: auto-help for ip_vs_ftp
      [IPVS]: Document the ports option to ip_vs_ftp in kernel-parameters.txt
      [TCP]: Turn ABC off.
      [NEIGH]: neigh_table_clear() doesn't free stats

commit 20bf94e266969f91c623ed8b51da4109e3f57bcb
Merge: 77e2782... b9c54f9...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 18 16:15:40 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC]: Fix regression in sys_getdomainname()
      [OPENPROMIO]: Handle current_node being NULL correctly.

commit 77e2782f9b683893c9341e9cf05c88b0caac7382
Merge: 803db24... e40b107...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 18 16:15:16 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3815/1: headers_install support for ARM
      [ARM] 3794/1: S3C24XX: do not defined set_irq_wake when no CONFIG_PM
      [ARM] 3793/1: S3C2412: fix wrong serial info struct
      [ARM] 3780/1: Fix iop321 cpuid
      [ARM] 3786/1: pnx4008: update defconfig
      [ARM] 3785/1: S3C2412: Fix idle code as default uses wrong clocks
      [ARM] 3784/1: S3C2413: fix config for MACH_S3C2413/MACH_SMDK2413

commit e40b1074af46d53740320f88dfffd9fb2f78bdf3
Author: Ralph Siemsen <ralphs@netwinder.org>
Date:   Mon Sep 18 16:28:50 2006 +0100

    [ARM] 3815/1: headers_install support for ARM
    
    Move kernel-only #includes into #ifdef __KERNEL__, so that
    headers_install target can be used on ARM.
    
    Signed-off-by: Ralph Siemsen <ralphs@netwinder.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b9c54f91a48146778fe91423d4d467a0ee8c719b
Author: Andy Walker <andy@puszczka.com>
Date:   Mon Sep 18 07:11:36 2006 -0700

    [SPARC]: Fix regression in sys_getdomainname()
    
    This patch corrects the buffer length checking in the
    sys_getdomainname() implementation for sparc/sparc64.
    
    Signed-off-by: Andy Walker <andy@puszczka.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe26109a9dfd9327fdbe630fc819e1b7450986b2
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Mon Sep 18 06:37:58 2006 -0700

    [ATM] CLIP: Do not refer freed skbuff in clip_mkip().
    
    In clip_mkip(), skb->dev is dereferenced after clip_push(),
    which frees up skb.
    
    Advisory: AD_LAB-06009 (<adlab@venustech.com.cn>).
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a9c3685b2f0515bffd8d13ea9e3417664ff22a07
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Sep 18 13:30:20 2006 +0100

    [ARM] 3794/1: S3C24XX: do not defined set_irq_wake when no CONFIG_PM
    
    Patch from Ben Dooks
    
    Do not define set_irq_wake as a real function if
    the CONFIG_PM option is not set.
    
    Fixes bug reported by Thomas Gleixner.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 71aa7054d3df0f74d9ffbef3dd1486764c7f592a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Sep 18 13:30:17 2006 +0100

    [ARM] 3793/1: S3C2412: fix wrong serial info struct
    
    Patch from Ben Dooks
    
    The S3C2440 serial info struct is being passed
    through the S3C2412 serial info struct probe
    routine.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Thomas Glexiner <tglx@linutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b9b64e6e89fc5a6ef220747115c5b7764614ca3f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Sep 18 01:47:13 2006 -0700

    [OPENPROMIO]: Handle current_node being NULL correctly.
    
    If the user tries to traverse to the next node of the
    last node, we get NULL in current_node and a zero phandle
    returned.  That's fine, but if the user tries to obtain
    properties in that state, we try to dereference a NULL
    pointer in the downcall to the of_*() routines.
    
    So protect against that.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7811e623dd4be3e3bdba2d6330f7f15541ee45f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Sep 18 00:22:30 2006 -0700

    [NET]: Drop tx lock in dev_watchdog_up
    
    Fix lockdep warning with GRE, iptables and Speedtouch ADSL, PPP over ATM.
    
    On Sat, Sep 02, 2006 at 08:39:28PM +0000, Krzysztof Halasa wrote:
    >
    > =======================================================
    > [ INFO: possible circular locking dependency detected ]
    > -------------------------------------------------------
    > swapper/0 is trying to acquire lock:
    >  (&dev->queue_lock){-+..}, at: [<c02c8c46>] dev_queue_xmit+0x56/0x290
    >
    > but task is already holding lock:
    >  (&dev->_xmit_lock){-+..}, at: [<c02c8e14>] dev_queue_xmit+0x224/0x290
    >
    > which lock already depends on the new lock.
    
    This turns out to be a genuine bug.  The queue lock and xmit lock are
    intentionally taken out of order.  Two things are supposed to prevent
    dead-locks from occuring:
    
    1) When we hold the queue_lock we're supposed to only do try_lock on the
    tx_lock.
    
    2) We always drop the queue_lock after taking the tx_lock and before doing
    anything else.
    
    >
    > the existing dependency chain (in reverse order) is:
    >
    > -> #1 (&dev->_xmit_lock){-+..}:
    >        [<c012e7b6>] lock_acquire+0x76/0xa0
    >        [<c0336241>] _spin_lock_bh+0x31/0x40
    >        [<c02d25a9>] dev_activate+0x69/0x120
    
    This path obviously breaks assumption 1) and therefore can lead to ABBA
    dead-locks.
    
    I've looked at the history and there seems to be no reason for the lock
    to be held at all in dev_watchdog_up.  The lock appeared in day one and
    even there it was unnecessary.  In fact, people added __dev_watchdog_up
    precisely in order to get around the tx lock there.
    
    The function dev_watchdog_up is already serialised by rtnl_lock since
    its only caller dev_activate is always called under it.
    
    So here is a simple patch to remove the tx lock from dev_watchdog_up.
    In 2.6.19 we can eliminate the unnecessary __dev_watchdog_up and
    replace it with dev_watchdog_up.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cbe21d8fefca605b90e34f0f019505e599712f9b
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Sep 17 23:59:57 2006 -0700

    [PACKET]: Don't truncate non-linear skbs with mmaped IO
    
    Non-linear skbs are truncated to their linear part with mmaped IO.
    Fix by using skb_copy_bits instead of memcpy.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 080f22c0dc544e498e57ad281a9de063fa839957
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 13 21:13:54 2006 -0700

    [NET]: Mark frame diverter for future removal.
    
    The code for frame diverter is unmaintained and has bitrotted.
    The number of users is very small and the code has lots of problems.
    If anyone is using it, they maybe exposing themselves to bad packet attacks.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dc36251037ae4f69f2f764efd9b57136e3b9848d
Author: James Morris <jmorris@redhat.com>
Date:   Wed Sep 13 21:04:55 2006 -0700

    [NETFILTER]: Add secmark headers to header-y
    
    This patch includes xt_SECMARK.h and xt_CONNSECMARK.h to the kernel
    headers which are exported via 'make headers_install'.  This is needed to
    allow userland code to be built correctly with these features.
    
    Please apply, and consider for inclusion with 2.6.18 as a bugfix.
    
    Signed-off-by: James Morris <jmorris@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f37bf90ec115d92549984438a2d157add7ae85a4
Author: Roland Dreier <roland@digitalvampire.org>
Date:   Wed Sep 13 20:39:33 2006 -0700

    [ATM]: linux-atm-general mailing list is subscribers only
    
    As the automated reply I got to my last ATM patch shows, the
    linux-atm-general mailing list is subscribers-only.
    
    Signed-off-by: Roland Dreier <roland@digitalvampire.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d730e1033f81fefd3176f53e070b2b64cd146db0
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Wed Sep 13 20:33:40 2006 -0700

    [ATM]: [he] when transmit fails, unmap the dma regions
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5067f08abad451661dd154be4193ba231a61e747
Author: Wong Hoi Sing Edison <hswong3i@gmail.com>
Date:   Wed Sep 13 20:31:13 2006 -0700

    [TCP] tcp-lp: update information to MAINTAINERS
    
    Signed-off-by: Wong Hoi Sing Edison <hswong3i@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3795da47e82ee0596174f52817d6d3ecd91f68ea
Author: Wong Hoi Sing Edison <hswong3i@gmail.com>
Date:   Wed Sep 13 20:30:30 2006 -0700

    [TCP] tcp-lp: bug fix for oops in 2.6.18-rc6
    
    Sorry that the patch submited yesterday still contain a small bug.
    This version have already been test for hours with BT connections. The
    oops is now difficult to reproduce.
    
    Signed-off-by: Wong Hoi Sing Edison <hswong3i@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 485c2967d622449f4bbfae305a6fc4e185b5b094
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 13 20:12:40 2006 -0700

    [BRIDGE]: random extra bytes on STP TCN packet
    
    We seem to send 3 extra bytes in a TCN, which will be whatever happens
    to be on the stack. Thanks to Aji_Srinivas@emc.com for seeing.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d0ee011f7290b51974e4d058cf4455a5ef91177d
Author: Remi Denis-Courmont <rdenis@simphalempin.com>
Date:   Wed Sep 13 20:08:07 2006 -0700

    [IPV6]: Accept -1 for IPV6_TCLASS
    
    This patch should add support for -1 as "default" IPv6 traffic class,
    as specified in IETF RFC3542 ยง6.5. Within the kernel, it seems tclass
    < 0 is already handled, but setsockopt, getsockopt and recvmsg calls
    won't accept it from userland.
    
    Signed-off-by: Remi Denis-Courmont <rdenis@simphalempin.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e012d51cbc41c5e603d7850c82acb0dad9e450dd
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Wed Sep 13 20:01:28 2006 -0700

    [IPV6]: Fix tclass setting for raw sockets.
    
    np->cork.tclass is used only in cork'ed context.
    Otherwise, np->tclass should be used.
    
    Bug#7096 reported by Remi Denis-Courmont <rdenis@simphalempin.com>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b552216ff1340a056aa0e12da68203902ae81d2c
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Sep 13 19:59:23 2006 -0700

    [IPVS]: remove the debug option go ip_vs_ftp
    
    This patch makes the debuging behaviour of this code more consistent
    with the rest of IPVS.
    
    Signed-Off-By: Simon Horman <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3f5af5b353ca36aca4f8a46e3da2172f669dbbbc
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Sep 13 19:58:44 2006 -0700

    [IPVS]: Make sure ip_vs_ftp ports are valid
    
    I'm not entirely sure what happens in the case of a valid port,
    at best it'll be silently ignored. This patch ignores them a little
    more verbosely.
    
    Signed-Off-By: Simon Horman <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70e76b768bac81149c8c189e781c3f130ea2eba5
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Sep 13 19:57:54 2006 -0700

    [IPVS]: auto-help for ip_vs_ftp
    
    Fill in a help message for the ports option to ip_vs_ftp
    
    Signed-Off-By: Simon Horman <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 72c4a13aaa0f6271e6b962a66befd68bac923bc3
Author: Simon Horman <horms@verge.net.au>
Date:   Wed Sep 13 19:57:18 2006 -0700

    [IPVS]: Document the ports option to ip_vs_ftp in kernel-parameters.txt
    
    I'm not sure if documenting this here is appropriate, but
    if it is, here is some text to put there.
    
    Signed-Off-By: Simon Horman <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3a8a40da5751525936c88f60bbc6a007f9eee37
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Sep 13 19:51:02 2006 -0700

    [TCP]: Turn ABC off.
    
    Turn Appropriate Byte Count off by default because it unfairly
    penalizes applications that do small writes.  Add better documentation
    to describe what it is so users will understand why they might want to
    turn it on.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3fcde74b3877756f4b4725a883d0b48696c0d369
Author: Kirill Korotaev <dev@openvz.org>
Date:   Fri Sep 1 01:34:10 2006 -0700

    [NEIGH]: neigh_table_clear() doesn't free stats
    
    neigh_table_clear() doesn't free tbl->stats.
    Found by Alexey Kuznetsov. Though Alexey considers this
    leak minor for mainstream, I still believe that cleanup
    code should not forget to free some of the resources :)
    
    At least, this is critical for OpenVZ with virtualized
    neighbour tables.
    
    Signed-Off-By: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ea59830db01b6b3d6bda9f84e3d272a346115e8e
Author: Josef 'Jeff' Sipek <jeffpc@josefsipek.net>
Date:   Sat Sep 16 21:09:29 2006 -0400

    [MTD] Use SEEK_{SET,CUR,END} instead of hardcoded values in mtdchar lseek()
    
    Signed-off-by: Josef 'Jeff' Sipek <jeffpc@josefsipek.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 803db244b9f71102e366fd689000c1417b9a7508
Merge: 8b98a37... f04b92e...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Sep 17 01:05:43 2006 -0400

    Merge branch 'master' into upstream-fixes

commit 8b98a37c4b00f3fbcf162281bd4595777e61241b
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:27:02 2006 +0200

    [PATCH] s390: qeth driver fixes [6/6]
    
    [PATCH 9/9] s390: qeth driver fixes [6/6]
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	- Hipersockets has no IPV6 support, thus prevent issueing
    	  SETRTG_IPV6 control commands on Hipersockets devices.
    	- fixed error handling in qeth_sysfs_(un)register
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f956b6902eabbff249000287c7b36cd65761d8b8
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:26:52 2006 +0200

    [PATCH] s390: qeth driver fixes [5/6]
    
    [PATCH 8/9] s390: qeth driver fixes [5/6]
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	fix kernel panic in qdio queue handling.
    	qeth_qdio_clear_card() could be invoked by 2 CPUs
    	simultaneously (for example reboot event and recovery).
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 09d2d38a152419467f764c0f730821e896766c1f
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:26:34 2006 +0200

    [PATCH] s390: qeth driver fixes [4/6]
    
    [PATCH 7/9] s390: qeth driver fixes [4/6]
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	- fix kernel crash due to race,
    	  set card->state to SOFTSETUP after
    	  card and card->dev are initialized properly.
    	- remove CONFIG_QETH_PERF_STATS, use sysfs attribute instead,
    	  as we want to have the ability to turn on/off the
    	  statistics at runtime.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f7b65d70a3e6f1c97eb614964270816992d0d4b4
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:26:19 2006 +0200

    [PATCH] s390: qeth driver fixes [3/6]
    
    [PATCH 6/9] s390: qeth driver fixes [3/6]
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
           	fixed kernel panic caused by qeth driver:
            Using a bonding device qeth driver will realloc
            headroom for every skb coming from the bond device.
            Once this happens qeth frees the original skb and
            set the skb pointer to the new realloced skb.
            Under heavy transmit workload (e.g.UDP streams) through bond
            network device the qdio output queue might get full.
            In this case we return with EBUSY from qeth_send_packet.
            Returning to qeth_hard_start_xmit routine
            the skb address on the stack still points to the old address,
            which has been freed before.
            Returning from qeth_hard_start_xmit with EBUSY results in
            requeuing the skb. In this case it corrupts the qdisc queue
            and results in kernel panic.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1fda1a120b7dcddf382ad105b4783a69e81c7a2b
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:26:07 2006 +0200

    [PATCH] s390: qeth driver fixes [2/6]
    
    [PATCH 5/9] s390: qeth driver fixes [2/6]
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	- fixed error handling in create_device_attributes
    	- fixed some minor bugs in IPv4
    	  and IPv6 address checking
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 330b636908b44e73c714fb2632602ddd96f72c01
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:25:56 2006 +0200

    [PATCH] s390: qeth driver fixes [1/6]
    
    [PATCH 4/9] s390: qeth driver fixes [1/6]
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	- Drop incoming packets with vlan_tag set
              if card->vlangrp is not set.
            - use always vlan_hwaccel_rx to pass
    	  vlan frames to the stack.
            - fix recovery problem. Device was recovered
    	  properly but still not working.
    	  netif_carrier_on call right before
              recovery start fixes it.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f449c565ea324397f83adb65e9d0b599cfbc7dab
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:25:39 2006 +0200

    [PATCH] s390: Makefile cleanup
    
    [PATCH 3/9] s390: Makefile cleanup
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
     	remove CONFIG_MPC from Makefile which was
    	introduced accidently in the past.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 16a83b30772ad9f20d4233f8872405ad52165cd0
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:25:19 2006 +0200

    [PATCH] s390: netiucv driver fixes
    
    [PATCH 2/9] s390: netiucv driver fixes
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	- missing lock initialization added
            - avoid duplicate iucv-interfaces to the same peer
           	- rw-lock added for manipulating the list of
              defined iucv connections
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4c7ae6ea595aef732d029647d708eaeac7238036
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Fri Sep 15 16:25:03 2006 +0200

    [PATCH] s390: minor s390 network driver fixes
    
    Hi Jeff,
    this is a RESEND of the nine s390 network driver patches.
    I finally found  that my kmail corrupted almost every patch
    I sent the last time. Please apply these 9 patches and forget
    about my first attempt! Sorry for the delay, I had some fights
    with sendmail, IMAP and mutt configuration.
    
    Frank
    
    [RESEND PATCH 1/9] s390: minor s390 network driver fixes
    
    From: Frank Pavlic <fpavlic@de.ibm.com>
    	- iucv driver:
              use do { } while (0) constructs
    	  instead of empty defines to avoid compile bugs.
            - ctc driver:
              missing lock initialization added
            - lcs driver:
              BUG_ON usage was removed accidently
    	  with the last lcs patch.
              Put them back in place.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f04b92e97d21b1921c91ec1d6d5e8bbf8606b77a
Author: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
Date:   Sat Sep 16 16:35:46 2006 -0700

    [PATCH] i386/x86-64: Add core 2 to oprofile
    
    Add the CPU identification needed by oprofile for Intel (r) Core (tm) 2
    CPUs.
    
    Signed-off-by: Benjamin LaHaise <benjamin.c.lahaise@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: "Arun Sharma" <aruns@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35e4ddfc86df84d32fbd2b9ae3b0b0408afb7e3f
Merge: 27bea32... d5bb759...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 16 21:35:15 2006 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      RDMA/cma: Increase the IB CM retry count in CMA
      IPoIB: Retry failed send-only multicast group joins
      IB/srp: Don't schedule reconnect from srp

commit 27bea3275515e5bd748ed7a492d0df605f5e824a
Author: Zoltan Sogor <weth@inf.u-szeged.hu>
Date:   Sat Sep 16 12:15:59 2006 -0700

    [PATCH] JFFS2: SUMMARY: fix a summary collecting bug
    
    In some special case (padding because of sync or umount) it can be possible
    that summary information is not fit to the end of the erase block.  In
    these cases the collecting of summary is disabled for this erase block.
    
    The problem was that this was not respected by jffs2_sum_add_kvec().  This
    patch fix this bug.
    
    Signed-off-by: Ferenc Havasi <havasi@inf.u-szeged.hu>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96da96065bd66164acc3c8a1ea6db4ee765537e9
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Sat Sep 16 12:15:58 2006 -0700

    [PATCH] MTD NAND: OOB buffer offset fixups
    
    In the case of data-pad-ecc-pad-data...  layout the oob start position has
    to be sizeof(data) in nand_write_oob_syndrom().
    
    In nand_fill_oob() we need to copy to buf + buffer offset instead of buf +
    write offset.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20acaa18d0c002fec180956f87adeb3f11f635a6
Author: Suparna Bhattacharya <suparna@in.ibm.com>
Date:   Sat Sep 16 12:15:58 2006 -0700

    [PATCH] ext3 sequential read regression fix
    
    ext3-get-blocks support caused ~20% degrade in Sequential read
    performance (tiobench). Problem is with marking the buffer boundary
    so IO can be submitted right away. Here is the patch to fix it.
    
      2.6.18-rc6:
      -----------
      # ./iotest
      1048576+0 records in
      1048576+0 records out
      4294967296 bytes (4.3 GB) copied, 75.2726 seconds, 57.1 MB/s
    
      real    1m15.285s
      user    0m0.276s
      sys     0m3.884s
    
      2.6.18-rc6 + fix:
      -----------------
      [root@elm3a241 ~]# ./iotest
      1048576+0 records in
      1048576+0 records out
      4294967296 bytes (4.3 GB) copied, 62.9356 seconds, 68.2 MB/s
    
    The boundary block check in ext3_get_blocks_handle needs to be adjusted
    against the count of blocks mapped in this call, now that it can map
    more than one block.
    
    Signed-off-by: Suparna Bhattacharya <suparna@in.ibm.com>
    Tested-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4b69aa2a1bcee21f8d5e089b8682dd8aaace5eb
Author: Kenneth Lee <kenlee@dg.gov.cn>
Date:   Sat Sep 16 12:15:55 2006 -0700

    [PATCH] bug fix in kernel/kmod.c
    
    I think there is a bug in kmod.c: In __call_usermodehelper(), when
    kernel_thread(wait_for_helper, ...) return success, since wait_for_helper()
    might call complete() at any time, the sub_info should not be used any
    more.
    
    Normally wait_for_helper() take a long time to finish, you may not get
    problem for most of the case.  But if you remove /sbin/modprobe, it may
    become easier for you to get a oop in khelper.
    
    Cc: Matt Helsley <matthltc@us.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ab7a1f3b496aae5b1e062a6f50d62830c248190
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:55 2006 -0700

    [PATCH] headers_check: use a different default directory
    
    `make headers_check' wants to go and write stuff in /lib/modules, which
    requires root, whic is unfortunate.
    
    In fact, there's no _particular_ reason for headers_install to put it there
    either -- it can go into a subdirectory of the build tree in both cases.
    It's not intended to go directly into /usr/include, which is why we didn't
    put it there -- and we certainly don't want people screwing around with
    symlinking to it.  It's for distributors to take away and do stuff with, so
    leaving it in $(objtree) is fine, even in the headers_install case.
    
    I picked $(objtree)/usr/include but I have no _particular_ preference
    for that; it just seemed reasonable.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae81f9e3791a30fc2dcfb38b7733b423f24571f7
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Sat Sep 16 12:15:53 2006 -0700

    [PATCH] Kconfig: move CONFIG_EMBEDDED options to submenu
    
    Fix two problems with the CONFIG_EMBEDDED submenu:
    
    (1) The menu was split in two by the rt_mutex patch, which moved
        half the items into the "General setup" menu.
    
    (2) CONFIG_SYSCTL and CONFIG_UID16 were added to the main menu
        instead of the submenu.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f9d77d75895c0d7e326d75263af21d7e2759879
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:49 2006 -0700

    [PATCH] Fix 'make headers_check' for Alpha
    
    Alpha currently fails 'make headers_check' in the 2.6.18-rc kernels.  This
    patch fixes it, by moving the existing #ifdef __KERNEL__ in asm/page.h so that
    it covers everything that userspace shouldn't so, and by adding asm/compiler.h
    to the list of exported files so that its use within asm/byteorder.h is
    successful.
    
    [ Note that at least with GCC 4, <linux/compiler.h> doesn't do the forced
      inlining about which there are nasty comments (and a workaround) in
      <asm/compiler.h>, unless you set CONFIG_FORCED_INLINING.  Rather than keep
      the mess you have in <asm/compiler.h> you could perhaps just make sure
      CONFIG_FORCED_INLINING=n is also honoured with GCC3, and make sure it cannot
      be set for Alpha? ]
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75da736fb3dc5cc8add98da0d02fe5103d7ce059
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:48 2006 -0700

    [PATCH] Fix 'make headers_check' on x86_64
    
    On Tue, 2006-09-12 at 17:44 +0100, David Woodhouse wrote:
    > asm-x86_64/elf.h requires asm/processor.h, which does not exist
    > asm-x86_64/signal.h requires linux/linkage.h, which does not exist
    > asm-x86_64/unistd.h requires linux/linkage.h, which does not exist
    > asm-x86_64/vsyscall.h requires linux/seqlock.h, which does not exist
    
    Again, move stuff which shouldn't be visible inside (mostly already existing)
    #ifdef __KERNEL__.
    
    This fixes a bunch of mislabelled and unlabelled #endifs in unistd.h and also
    cleans that up to conform with what's visible on other architectures, since
    the minimal fix for the error reported about would have involved a more
    intrusive patch, renesting other ifdefs.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5fa6d70318e4a6a644edbb7d574059e5b326de1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:48 2006 -0700

    [PATCH] Fix 'make headers_check' on i386
    
    This brings i386 asm/unistd.h into consistency with other architectures by not
    exporting functionality which is not necessary.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5759641f5809b19bad4e2af6ca97b830545aaba
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:47 2006 -0700

    [PATCH] Fix 'make headers_check' on ia64
    
    On Tue, 2006-09-12 at 17:44 +0100, David Woodhouse wrote:
    > asm-ia64/ptrace.h requires asm/asm-offsets.h, which does not exist
    > asm-ia64/resource.h requires asm/ustack.h, which does not exist
    
    Hide parts which shouldn't be visible to userspace.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 124b51c7a8a2b47f1c4739905a28ab3ea5f17faa
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:46 2006 -0700

    [PATCH] Fix 'make headers_check' on s390
    
    On Tue, 2006-09-12 at 17:44 +0100, David Woodhouse wrote:
    > asm-s390/debug.h requires linux/string.h, which does not exist
    > asm-s390/elf.h requires asm/system.h, which does not exist
    
    Move things around slightly so the right things end up within
    #ifdef __KERNEL__ and thus don't pollute the exported headers.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b512217736049cef3e681bbd3ff6696c1cca567d
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Sep 16 12:15:45 2006 -0700

    [PATCH] Fix 'make headers_check' on biarch architectures
    
    We generate an <asm/foo.h> which includes either <asm-$ARCH/foo.h> or
    <asm-$ALTARCH/foo.h> as appropriate.  But we were doing this dependent on
    whether the file in question existed in the _unexported_ tree, not the
    exported tree.  So if a file was exported to userspace in one asm- directory
    but not the other, the generated file in asm/ was incorrect.
    
    This only changed the failure mode if it _was_ included from a nice #error to
    a less explicable #include failure -- but it also gave false errors in 'make
    headers_check' output.  Fix it by looking in the right place instead.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac3b719cc373a7873e0f7173a9abc50f13650637
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sat Sep 16 12:15:44 2006 -0700

    [PATCH] Add symbol type files (*.symtypes) to .gitignore
    
    The kernel build system supports making symbol type files (*.symtypes) from C
    source files.  Add these files to .gitignore.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87dedbda0ed9d005c2d049487e0e522797c18764
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sat Sep 16 12:15:43 2006 -0700

    [PATCH] Add mixed source and assembly listings (*.lst) to .gitignore
    
    The kernel build system supports making mixed source and assembly listings
    (*.lst) from C source files.  Add these files to .gitignore.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f71a3738c91c3b8da60c63b04557ebd6060a1ea
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sat Sep 16 12:15:42 2006 -0700

    [PATCH] Add preprocessed files (*.i) to .gitignore
    
    The kernel build system supports making preprocessed files (*.i) from C source
    files.  Add these files to .gitignore.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4064d5ef26a04d9e34e4c0f348e30f14ab6828d8
Author: Corey Minyard <minyard@acm.org>
Date:   Sat Sep 16 12:15:41 2006 -0700

    [PATCH] IPMI: fix handling of OEM flags
    
    If one of the OEM flags becomes set in the flags from the hardware, the
    driver could hang if no OEM handler was set.  Fix the code to handle this.
    This was tested by setting the flags by hand after they were fetched.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Ackde-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f5cbd7e4810df382029ecaaa98535452da5d15e
Author: Ross Biro <rossb@google.com>
Date:   Sat Sep 16 12:15:39 2006 -0700

    [PATCH] Add a missing space that prevents building modules that require host programs
    
    Signed-off-by: Ross Biro <rossb@google.com>
    Acked-by: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b64074e46a9c2a7d5c66eff066a7c0b58377a143
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Sep 16 12:15:38 2006 -0700

    [PATCH] hvc_console suspend fix
    
    Fix http://bugzilla.kernel.org/show_bug.cgi?id=7152
    
    Cc: Michael Tautschnig <tautschn@model.in.tum.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fdb36673a9d6accf93b11e7eff3a7e34cd284616
Author: Neil Brown <neilb@suse.de>
Date:   Sat Sep 16 12:15:38 2006 -0700

    [PATCH] knfsd: Make ext3 reject filehandles referring to invalid inode number
    
    Inodes earlier than the 'first' inode (e.g.  journal, resize) should be
    rejected early - except the root inode.  Also inode numbers that are too
    big should be rejected early.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecaff756ff540f3821e2b00b8fa19aca07c7c3e5
Author: Neil Brown <neilb@suse.de>
Date:   Sat Sep 16 12:15:37 2006 -0700

    [PATCH] knfsd: Have ext2 reject file handles with bad inode numbers early
    
    This prevents bad inode numbers from triggering errors in ext2_get_inode.
    
    [akpm@osdl.org: speedup, cleanup]
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55ebcc38a5f6d40e4c41447e413ef842b803980f
Author: Arnaud Patard <apatard@mandriva.com>
Date:   Sat Sep 16 12:15:36 2006 -0700

    [PATCH] IPMI: Fix oops on ipmi_msghandler removal for non ipmi systems
    
    When the ipmi_si module is loaded on a system without any ipmi device, it
    fails with nodev.  It would be fine if all resources were freed.  A call to
    device_unregister() is missing, resulting to a oops when you remove the
    ipmi_msghandler.
    
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
    Acked-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1ed7ac77b63abb6b3a2c0b4b070f50da5b1fb2f
Author: Imre Deak <imre.deak@solidboot.com>
Date:   Sat Sep 16 12:15:35 2006 -0700

    [PATCH] genirq: fix typo in IRQ resend
    
    Fix a bug where the IRQ_PENDING flag is never cleared and the ISR is called
    endlessly without an actual interrupt.
    
    Signed-off-by: Imre Deak <imre.deak@solidboot.com>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de591dacf3034977b3fb94b61d08240c8b35c39d
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Fri Sep 15 17:19:31 2006 +0200

    MTD: Fix bug in fixup_convert_atmel_pri
    
    The memset() in fixup_convert_atmel_pri is supposed to zero out
    everything except the first 5 bytes in *extp, but it ends up zeroing
    out something way outside the struct instead. Fix this potentially
    dangerous code by casting the pointer to char * before doing
    arithmetic.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d882687c51b52424a56992578ce7636b3f3c8d41
Author: Havasi Ferenc <haf@kpax.(none)>
Date:   Tue Sep 5 16:08:58 2006 +0200

    [JFFS2][SUMMARY] Fix a summary collecting bug.
    
    In some special case (padding because of sync
    or umount) it can be possible that summary
    information is not fit to the end of the erase
    block. In these cases the collecting of summary
    is disabled for this erase block.
    
    The problem was that this was not respected
    by jffs2_sum_add_kvec(). This patch fix this
    bug.
    
    From: Zoltan Sogor <weth@inf.u-szeged.hu>
    Signed-off-by: Ferenc Havasi <havasi@inf.u-szeged.hu>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d5bb75999cb5733ad936ff000023221fe7a13c59
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Sep 13 15:01:54 2006 +0300

    RDMA/cma: Increase the IB CM retry count in CMA
    
    3 seems like a low number of IB Communication Manager retries to set;
    we see connections failing under stress, and in any case 3 just looks
    like an arbitrary number.  15 is the max value allowed by the
    InfiniBand spec.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Acked-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c11bd42a7676b49d41c780f2ede3709204f8da83
Author: Eli Cohen <eli@mellanox.co.il>
Date:   Thu Sep 14 13:51:41 2006 -0700

    IPoIB: Retry failed send-only multicast group joins
    
    When a send-only multicast group join fails, mcast->query must be set
    to NULL.  Otherwise, IPoIB will never retry the join and the multicast
    group will never be reachable.
    
    Signed-off-by: Eli Cohen <eli@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit add7afc756eddd5d02fd986d19e6300b3e1a5ae8
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Thu Sep 7 15:00:01 2006 +0300

    IB/srp: Don't schedule reconnect from srp
    
    If there is a problem in the connection, the SCSI mid-layer will
    eventually call srp_reset_host(), which will call srp_reconnect(), so
    we do not need to schedule a call to srp_reconnect_work() from
    srp_completion().
    
    Removing this prevents srp_reset_host() from failing if a reconnect
    scheduled from srp_completion() is already in progress, which in turn
    was causing crashes as both SCSI midlayer and srp_reconnect() were
    cancelling commands.
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 36694a4c22767ee09c91ccda63810086c65c810b
Author: Dan Williams <dan.j.williams@gmail.com>
Date:   Thu Sep 14 17:45:16 2006 +0100

    [ARM] 3780/1: Fix iop321 cpuid
    
    Patch from Dan Williams
    
    commit a6a38a66224c7c578cfed2f584b440c81af0c3ae changed the iop321 id to a value that does not work with all platforms.  Change the mask to permit bit 11.  Tested on an iq80321 600Mhz CRB.
    
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0ce046dfca26f098286b9b154a8de7976cbbf1c0
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Thu Sep 14 13:32:08 2006 +0100

    [ARM] 3786/1: pnx4008: update defconfig
    
    Patch from Vitaly Wool
    
    This patch updates the default configuration file for PNX4008.
    
     arch/arm/configs/pnx4008_defconfig |  715 +++++++------------------------------
     1 file changed, 154 insertions(+), 561 deletions(-)
    
    Signed-off-by: Vitaly Wool <vitalywool@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c84cbb246e5a5235af30ddbe49d23bb1eaf64add
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Sep 14 13:29:15 2006 +0100

    [ARM] 3785/1: S3C2412: Fix idle code as default uses wrong clocks
    
    Patch from Ben Dooks
    
    Fix the idle code on the s3c2412 as the default
    code is using bits in the CLKCON register that are
    no-longer there.
    
    Provide an override for the idle code, and ensure
    that the power configuration is set to allow idle
    instead of stop or sleep.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a55ee0ea51ae8f622cb3d69d81a47cb772952f73
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Sep 14 13:29:13 2006 +0100

    [ARM] 3784/1: S3C2413: fix config for MACH_S3C2413/MACH_SMDK2413
    
    Patch from Ben Dooks
    
    These two machines are identical, and supported
    by the SMDK2413 configuration. When MACH_SMDK2413
    is selected, we must also select MACH_S3C2413
    to allow machine_is_smdk2413() or machine_is_s3c2413()
    to work.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 71d28725548be203e8b8f6ad63b1f64fd7f02d4d
Author: Dale Farnsworth <dale@farnsworth.org>
Date:   Wed Sep 13 09:21:08 2006 -0700

    [PATCH] mv643xx_eth: Unmap DMA buffers in receive path
    
    Fix a missing call to dma_unmap_single() in the receive path.  Without
    this call, errors have been observed on non-cache-coherent systems.
    
    Signed-off-by Dale Farnsworth <dale@farnsworth.org>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 63b98080daa35f0d682db04f4fb7ada010888752
Merge: 1883c5a... eeac5c1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 13 08:01:41 2006 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] Fix G5 DART (IOMMU) race causing occasional data corruption
      [POWERPC] Fix MMIO ops to provide expected barrier behaviour
      [POWERPC] Fix interrupt clearing in kdump shutdown sequence
      [POWERPC] update prep_defconfig
      [POWERPC] kdump: Support kernels having 64k page size.
      [POWERPC] Implement PowerPC futex_atomic_cmpxchg_inatomic().
      [POWERPC] Add new, missing argument to of_irq_map_raw() for 86xx.
      [POWERPC] Update defconfigs

commit 1883c5aba9973331e3ff0050e05707fe8e84fe0d
Author: Mike Miller <mike.miller@hp.com>
Date:   Tue Sep 12 20:36:07 2006 -0700

    [PATCH] cciss: version update, new hw
    
    Add support for new hardware and bumps the version to 3.6.10.  It seems
    there were several changes introduced including soft_irq.  I decided to
    bump the major number to reflect these changes.  Since we're still
    supporting older vendor kernels I need some way differentiate between
    kernel versions <=2.6.10 and newer kernels >=2.6.16.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2aa3e2304e21e2b8bf52b69ac9f1e0cb0320909
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Sep 12 20:36:06 2006 -0700

    [PATCH] headers_check: fix userspace build of asm-mips/page.h
    
    MIPS asm/page.h unconditionally includes <asm-generic/memory_model.h>, which
    doesn't exist in userspace.  Move an #endif /* __KERNEL__ */ down a few lines
    to prevent that.
    
    Also, remove the broken definition of PAGE_SIZE which is never going to be
    correct -- in the absence of PAGE_SIZE, non-broken userspace will fall back to
    using sysconf() or getpagesize() instead.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f01f0f052d1255dcdcf11d4872c4bca95e46b36c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Sep 12 20:36:05 2006 -0700

    [PATCH] headers_check: don't expose PFN stuff to userspace in <asm-i386/setup.h>
    
    The header file <linux/pfn.h> doesn't exist in userspace and probably
    shouldn't -- but it's used unconditionally in <asm-i386/setup.h>.  Protect it
    with #ifdef __KERNEL__ and move setup.h from $(header-y) to $(unifdef-y) in
    Kbuild accordingly.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 651c923a4446dc5aee385d81c2436d6edf8c9a0c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Sep 12 20:36:04 2006 -0700

    [PATCH] headers_check: move kernel-only #includes within <asm-i386/elf.h>
    
    Some files which don't exist in userspace were being included unconditionally
    in asm-i386/elf.h.  Move the offending #includes down a few lines so that
    they're protected by #ifdef __KERNEL__
    
    In fact, we probably want to kill off all userspace use of asm/elf.h -- but we
    aren't there yet, so we should at least make it possible to include it for
    now.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b40c274a03f70d1f758753c56452bed506e47a09
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Sep 12 20:36:04 2006 -0700

    [PATCH] headers_check: move inclusion of <linux/linkage.h> in <asm-i386/signal.h>
    
    Because <linux/linkage.h> doesn't exist in userspace, it should be only
    included from within #ifdef __KERNEL__.  Move the corresponding #include
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee6baf884b27739cca110e5167a2edfa061ca19f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Sep 12 20:36:03 2006 -0700

    [PATCH] headers_check: remove <asm/timex.h> from user export
    
    There's useful stuff in <linux/timex.h> but <asm/timex.h> has nothing for
    userspace.  Stop exporting it, and include it only from within the existing
    #ifdef __KERNEL__ part of <linux/timex.h>
    
    This fixes a 'make headers_check' failure on i386 because asm-i386/timex.h
    includes both asm-i386/tsc.h and asm-i386/processor.h, neither of which are
    exported to userspace.  It's not entirely clear _why_ it includes either of
    these, but it does.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f1cbe51ffc1273bcded36742ede4b6ebef1b640
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Sep 12 20:36:02 2006 -0700

    [PATCH] headers_check: reduce user-visible noise in <linux/nfs_fs.h>
    
    We don't need any of this crap included from the user-visible part of nfs_fs.h
    -- remove it all.
    
    In fact, we probably don't need anything but NFS_SUPER_MAGIC to be defined; is
    there any need for anything else?  And magic numbers should probably move to
    <linux/magic.h> rather than being strewn across various fs-specific include
    files which exist in userspace for solely that purpose.
    
    With this patch, 'make header_check' works again at least on PowerPC.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5e064a6c733d3902302dbaca33dd3c76af77f38
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 12 20:36:01 2006 -0700

    [PATCH] headers_check: clarify error message
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 120e2a97268c312bf81ee3d8cacc75d1f75ef8b5
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Sep 12 20:36:00 2006 -0700

    [PATCH] headers_check: improve #include regexp
    
    The following combinations of pp-tokens are used
    
    	#include
    	 #include
    	# include
    
    so, script'd better check for all of them.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 354332ee44834819ff31a0afbeffda0c32244f8f
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Tue Sep 12 20:35:57 2006 -0700

    [PATCH] x86: reserve a boot-loader ID number for Xen
    
    Claim an ID number for Xen in the LOADER_TYPE field.
    
    Also, keep the table in zero-page.txt consistent with boot.txt.
    
    [hpa says: 6 was skipped because I couldn't rule out that it hadn't been
     unofficially used.  It seemed easier to skip it for now.]
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Acked-by: "H. Peter Anvin" <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd9daa221e77f642954849a795fa7c59533a9b2f
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Tue Sep 12 20:35:55 2006 -0700

    [PATCH] rcu_do_batch: make ->qlen decrement irq safe
    
    rcu_do_batch() decrements rdp->qlen with irqs enabled.  This is not good,
    it can also be modified by call_rcu() from interrupt.
    
    Decrement ->qlen once with irqs disabled, after a main loop.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Dipankar Sarma <dipankar@in.ibm.com>
    Cc: "Paul E. McKenney" <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fbb36451a91de6e8f9ece4f1f1ee9bd8ebf838a
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Tue Sep 12 20:35:54 2006 -0700

    [PATCH] SCSI: lockdep annotation in scsi_send_eh_cmnd
    
    Fixup for lockdep enabled kernels: Annotate an on-stack completion.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e11db063d86d0ef9d7903cb463bb542b5d4e9ddd
Author: Michael De Backer <micdb@skynet.be>
Date:   Tue Sep 12 20:35:53 2006 -0700

    [PATCH] alim15x3.c: M5229 (rev c8) support for DMA cd-writer
    
    Configuration bits are not set properly for DMA on some chipset revisions.
    It has already been corrected for M5229 (rev c7) but not for M5229 (rev
    c8).  This leads to the bug described at
    http://bugzilla.kernel.org/show_bug.cgi?id=5786 (lost interrupt + ide bus
    hangs).
    
    Signed-off-by: Michael De Backer <micdb@skynet.be>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af45f32d25cc1e374184675eadc9f740221d8392
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Sep 12 20:35:52 2006 -0700

    [PATCH] We can not allow anonymous contributions to the kernel
    
    The DCO does not mean anything if we allow anonymous contributors to the
    kernel.  As this is an open source project, we need to do everything in the
    open.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9bb25bf36f0d7b06368432e2324dbbc2e98b5e60
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Sep 12 20:35:50 2006 -0700

    [PATCH] lockdep: double the number of stack-trace entries
    
    Miles Lane reported the "BUG: MAX_STACK_TRACE_ENTRIES too low!" message,
    which means that during normal use his system produced enough lockdep
    events so that the 128-thousand entries stack-trace array got exhausted.
    Double the size of the array.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Miles Lane <miles.lane@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4f5749ba6e3f23ae4a137cee10324830db4d081
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Sep 12 20:35:49 2006 -0700

    [PATCH] libata: ignore CFA signature while sanity-checking an ATAPI device
    
    0x848a in ID word 0 indicates CFA device iff the ID data is obtained from
    IDENTIFY DEVICE.  For ATAPI devices, 0x848a in ID work 0 indicates valid
    ATAPI device.  Fix sanity check in ata_dev_read_id() such that ATAPI
    devices reporting 0x848a in ID word 0 is not handled as error.
    
    The problem is identified by J.A.  Magallon with HL-DT-ST DVDRAM GSA-4120B.
    
    Signed-off-by: Tejun Helo <htejun@gmail.com>
    Cc: J.A. Magallon <jamagallon@ono.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eeac5c142b8687e35780b11b54b4c2f95b1a2436
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Sep 13 22:12:52 2006 +1000

    [POWERPC] Fix G5 DART (IOMMU) race causing occasional data corruption
    
    It seems that the occasional data corruption observed with the tg3
    driver wasn't due to missing barriers after all, but rather seems to
    be due to the DART (= IOMMU) in the U4 northbridge reading stale
    IOMMU table entries from memory due to a race.  This fixes it by
    making the CPU read the entry back from memory before using it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f007cacffc8870702a1473d83ba5e4922d54e17c
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Sep 13 22:08:26 2006 +1000

    [POWERPC] Fix MMIO ops to provide expected barrier behaviour
    
    This changes the writeX family of functions to have a sync instruction
    before the MMIO store rather than after, because the generally expected
    behaviour is that the device receiving the MMIO store can be guaranteed
    to see the effects of any preceding writes to normal memory.
    
    To preserve ordering between writeX and readX, and to preserve ordering
    between preceding stores and the readX, the readX family of functions
    have had an sync added before the load.
    
    Although writeX followed by spin_unlock is not officially guaranteed
    to keep the writeX inside the spin-locked region unless an mmiowb()
    is used, there are currently drivers that depend on the previous
    behaviour on powerpc, which was that the mmiowb wasn't actually required.
    Therefore we have a per-cpu flag that is set by writeX, cleared by
    __raw_spin_lock and mmiowb, and tested by __raw_spin_unlock.  If it is
    set, __raw_spin_unlock does a sync and clears it.
    
    This changes both 32-bit and 64-bit readX/writeX.  32-bit already has a
    sync in __raw_spin_unlock (since lwsync doesn't exist on 32-bit), and thus
    doesn't need the per-cpu flag.
    
    Tested on G5 (PPC970) and POWER5.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2e8e8dacc566cc91cd8707cb092e76c7bbfab178
Author: Mohan Kumar M <mohan@in.ibm.com>
Date:   Tue Sep 12 17:48:21 2006 +0530

    [POWERPC] Fix interrupt clearing in kdump shutdown sequence
    
    Call chip->eoi(irq) to clear any pending interrupt in case of kdump
    shutdown sequence.  chip->end(irq) does not serve this purpose.
    
    Signed-off-by: Mohan Kumar M <mohan@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ebf2ed283897b752daa743952aff43d78b725183
Author: Olaf Hering <olaf@aepfle.de>
Date:   Thu Sep 7 14:44:45 2006 +0200

    [POWERPC] update prep_defconfig
    
    Update PReP defconfig, disable some drivers for hardware that is not
    used on those systems; enable SL82C105 IDE driver for Powerstack.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e269d269e0b53a7a6cb1d04290f8174bf0488cb4
Author: Sachin P. Sant <sachinp@in.ibm.com>
Date:   Fri Sep 8 07:59:52 2006 +0530

    [POWERPC] kdump: Support kernels having 64k page size.
    
    This is required to generate proper core files using kdump on ppc64.
    
    Create a backup region of 64K size irrespective of the PAGE SIZE.
    At present 32K was used as backup size. In the case of 64K page size,
    second PT_LOAD segments starts at 32K and the first one is not page
    aligned.  __ioremap() (crash_dump.c) fails if pfn = 0 which is the
    case for the second PT_LOAD segment. This is not an issue for 4K page
    size because the the first page (32K backup) is copied to second
    kernel memory and thus referencing with the second kernel pfn.
    
    Signed-off-by: Sachin Sant <sachinp@in.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 69588298188b40ed7f75c98a6fd328d82f23ca21
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Sep 4 21:53:14 2006 -0700

    [POWERPC] Implement PowerPC futex_atomic_cmpxchg_inatomic().
    
    The sys_[gs]et_robust_list() syscalls were wired up on PowerPC but
    didn't work correctly because futex_atomic_cmpxchg_inatomic() wasn't
    implemented.  Implement it, based on __cmpxchg_u32().
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 20fb96e2aa009ae9892fde9ef7ffa82f56eebd11
Author: Jon Loeliger <jdl@freescale.com>
Date:   Fri Sep 1 10:17:20 2006 -0500

    [POWERPC] Add new, missing argument to of_irq_map_raw() for 86xx.
    
    Ben speaks; we follow.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit eff68d452f1a6842fb05218fd93c774ffc4dbc5a
Merge: 6a95169... 95064a7...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Sep 13 00:34:34 2006 -0400

    Merge branch 'master' into upstream-fixes

commit 95064a75ebf8744e1ff595e8cd7ff9b6c851523e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 18:41:36 2006 -0700

    Linux v2.6.18-rc7
    
    One last time..

commit bd314d976e22e82c55e96603804ed7cb0514d252
Merge: 48c068e... f6bc0c1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 17:37:24 2006 -0700

    Merge branch 'audit.b29' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current
    
    * 'audit.b29' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current:
      [PATCH] sparc64 audit syscall classes hookup
      [PATCH] syscall class hookup for all normal targets

commit 48c068e0f49b3c507cbd1c332f4acdd5fc193040
Merge: 7366935... b835beb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 17:34:46 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] Fix CIFS readdir access denied when SE Linux enabled

commit 7366935a498fcd3d87871518f71b67e43c62493d
Merge: 3ee4b88... e7ea8fc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 17:33:42 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (4608c): Fix I2C dependencies for saa7146 modules
      V4L/DVB (4608b): i2c deps fix on DVB
      V4L/DVB (4605): Fixes an issue with V4L1 and make headers-install
      V4L/DVB (4520): Fix an error when loading bttv driver on PV M4900.
      V4L/DVB (4511): Restore tuner_ymec_tvf66t5_b_dff_pal_ranges[] to fix UHF switch functionality
      V4L/DVB (4494a): Fix compilation when V4L1 support is not present

commit 3ee4b889a0708e6503dca0f771c2d84f56602a18
Merge: 7258ea8... 3e2aac3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 17:32:21 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      USB: Fix unload oops and memory leak in yealink driver
      usbserial: Reference leak

commit 7258ea8acd2252d5a68e7dfa2eac8dc8f364b91e
Merge: af84b99... 1bb99a6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 17:31:36 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh64-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/lethal/sh64-2.6:
      sh64: Add a sane pm_power_off implementation.
      sh64: Use generic BUG_ON()/WARN_ON().
      sh64: Trivial build fixes.
      sh64: Drop deprecated ISA tuning for legacy toolchains.

commit af84b99f22df115e7aec41d5dbe936e163ef4e2e
Merge: 05ff0e2... 0edc7d0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Sep 12 17:31:16 2006 -0700

    Merge git://oss.sgi.com:8090/xfs/xfs-2.6
    
    * git://oss.sgi.com:8090/xfs/xfs-2.6:
      [XFS] Fix a bad pointer dereference in the quota statvfs handling.
      [XFS] Fix xfs_splice_write() so appended data gets to disk.
      [XFS] Fix ABBA deadlock between i_mutex and iolock. Avoid calling
      [XFS] Prevent free space oversubscription and xfssyncd looping.

commit 6a9516989f94df10d9a27ba543c6b53b3e69c84a
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Mon Sep 11 14:00:21 2006 -0700

    [PATCH] e1000: fix TX timout hang regression for 82542rev3
    
    Commit 581d708eb47cccb5f41bc0817e50c9b004011ba8 (oct. 5 2005) introduced
    partial Multiqueue support for e1000 which broke macro smartness in setting
    up head/tail registers for 82542 rev3 chipsets, making these adapters
    completely non-working since 2.6.15.
    
    This commit sets the proper head and tail registers for read and write
    descriptor rings. Ths fix was tested on an 82542 rev3 NIC and newer NICs.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1802ca745280b916cda4090e459741b8c9b3e8d0
Merge: 05ff0e2... db888ae...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Sep 12 11:42:33 2006 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 3e2aac366f40f4cf4f3b1d9101b27f703998dfbc
Author: Henk Vergonet <Henk.Vergonet@gmail.com>
Date:   Fri Sep 8 02:21:01 2006 +0200

    USB: Fix unload oops and memory leak in yealink driver
    
    This patch fixes a memory leak and a kernel oops when trying to unload
    the driver, due to an unbalanced cleanup.
    Thanks Ivar Jensen for spotting my mistake.
    
    Signed-off-by: Henk Vergonet <henk.vergonet@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5992583889ce6b7960e8023e356b2a0930ebce7c
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Mon Sep 11 12:35:20 2006 +0200

    usbserial: Reference leak
    
    A sufficiently-large number of USB serial devices causes a reference leak
    when /proc/tty/drivers/usbserial is read.
    
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f6bc0c1c5b0fe393efaf922e01887c33b35f2910
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 12 02:59:45 2006 -0400

    [PATCH] sparc64 audit syscall classes hookup
    
    ... that should do it for all targets; the only remaining issues are
    mips (currently treated as non-biarch) and handling of other OS
    emulations (OSF/SunOS/Solaris/???).  The latter would need to be
    assigned new AUDIT_ARCH_... ABI numbers anyway...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit e65e1fc2d24b09c496af76e9c5253ac30b300a89
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Sep 12 03:04:40 2006 -0400

    [PATCH] syscall class hookup for all normal targets
    
    Take default arch/*/kernel/audit.c to lib/, have those with special
    needs (== biarch) define AUDIT_ARCH in their Kconfig.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 1bb99a649af92e53ed7391afaf6c2d45a6f57b42
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Sep 12 14:40:09 2006 +0900

    sh64: Add a sane pm_power_off implementation.
    
    sh64 wasn't providing a sensible pm_power_off(), add one,
    and just wrap it to machine_power_off, which already does
    the right thing.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 56060141482d0a9351ea02e2aa7153de8cd41423
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Sep 12 14:38:23 2006 +0900

    sh64: Use generic BUG_ON()/WARN_ON().
    
    sh64 doesn't need to do anything special for BUG_ON() or
    WARN_ON(), use the generic versions.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit 21264136ce7c3c7032c42e7c2440f5d89039ca5a
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Sep 12 14:36:46 2006 +0900

    sh64: Trivial build fixes.
    
    While we've been sorting out the toolchain fiasco, some of
    the code has suffered a bit of bitrot. Building with GCC4
    also brings up some more build warnings. Trivial fixes for
    both issues.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit ccdfc526a92c5ebb549a7de06adca3fd54f03c7e
Author: Paul Mundt <lethal@linux-sh.org>
Date:   Tue Sep 12 14:21:25 2006 +0900

    sh64: Drop deprecated ISA tuning for legacy toolchains.
    
    The original sh64 toolchains required that we tune the ISA
    level accordingly to not have head.S/entry.S blow up. With
    current toolchains, this is no longer the case, and the
    syntax magically changed as well, causing all current
    toolchains to die a horrible death.
    
    Incidentally, code generation in other parts of the kernel
    is now significantly complex enough that none of the older
    toolchains make it very far these days, so there's not
    even any point in preserving legacy compatability via
    as-option.
    
    This fixes a long-standing issue, as noted here:
    
    	http://lkml.org/lkml/2005/1/5/223
    
    Though at the time the current toolchains were too broken
    to make adjusting the tuning worthwhile.
    
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>

commit db888aed7e83559d61cff04bf002d0fb80ecbfa7
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Tue Aug 29 23:50:29 2006 +0100

    [PATCH] zd1211rw: Fix of signal strength and quality measurement
    
    Caused by a documentation issue I mixed up fields of the zd_status
    structure. This patch fixes it and improves also the average
    computation, which is now using only measurements of packets sent
    by the access point.
    
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 05ff0e291af086f4325bac76abad250690bbbd63
Merge: 5eea7ee... 55669bf...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 11 11:43:17 2006 -0700

    Merge branch 'audit.b28' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current
    
    * 'audit.b28' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current:
      [PATCH] audit: AUDIT_PERM support
      [PATCH] audit: more syscall classes added
      [PATCH] syscall classes hookup for ppc and s390
      [PATCH] update audit rule change messages
      [PATCH] sanity check audit_buffer
      [PATCH] fix ppid bug in 2.6.18 kernel

commit 5eea7ee2075b245d505285bb422e2fa8d686e5c8
Merge: e004876... 09494d5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 11 11:42:27 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      usbtouchscreen: fix ITM data reading
      USB: New device ID for ftdi_sio usb serial driver
      USB: Support for USB20SVGA-WH & USB20SVGA-DG
      USB: hid-core.c: fix duplicate USB_DEVICE_ID_GTCO_404

commit 55669bfa141b488be865341ed12e188967d11308
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 31 19:26:40 2006 -0400

    [PATCH] audit: AUDIT_PERM support
    
    add support for AUDIT_PERM predicate
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit dc104fb3231f11e95b5a0f09ae3ab27a8fd5b2e8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 31 19:05:56 2006 -0400

    [PATCH] audit: more syscall classes added
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit c08037997d4ae3e9a679fbdb46ed47c957916e14
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 31 19:02:42 2006 -0400

    [PATCH] syscall classes hookup for ppc and s390
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 5974501e2d44546748e67c635cec20ba66619a3d
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Sep 7 17:46:18 2006 -0400

    [PATCH] update audit rule change messages
    
    Make the audit message for implicit rule removal more informative.
    Make the rule update message consistent with other messages.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 8ef2d3040e5cf38f7d64a408038f576b4a5ec987
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Sep 7 17:03:02 2006 -0400

    [PATCH] sanity check audit_buffer
    
    Add sanity checks for NULL audit_buffer consistent with other
    audit_log* routines.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 3b33ac3182a4554742757a0c61ee1df162cf8225
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Sat Aug 26 14:06:20 2006 -0400

    [PATCH] fix ppid bug in 2.6.18 kernel
    
    Hello,
    
    During some troubleshooting, I found that ppid was accidentally omitted from
    the legacy rule section. This resulted in EINVAL for any rule with ppid sent
    with AUDIT_ADD.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit e004876c3b0b6a71406069b0e55368cb9bbdc920
Merge: 5a05e5b... 6fe9feb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 11 07:56:38 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc
    
    * master.kernel.org:/home/rmk/linux-2.6-mmc:
      [MMC] Always use a sector size of 512 bytes
      [MMC] Cleanup 385e3227d4d83ab13d7767c4bb3593b0256bf246
      [ARM] 3751/1: i.MX/MX1 SD/MMC use 512 bytes request for SCR read
      [MMC] Fix SD timeout calculation
      [MMC] constify mmc_host_ops

commit 5a05e5bf204e729b79e9462785f2fa09d5126855
Merge: 08a55c0... d17f901...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 11 07:55:39 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3778/1: S3C24XX: remove changelogs from include/asm-arm/arch-s3c2410 [simtec]
      [ARM] 3783/1: S3C2412: fix IRQ_EINT0 to IRQ_EINT3 handling
      [ARM] 3779/1: S3C24XX: remove changelogs from include/asm-arm/arch-s3c2410 [left]
      [ARM] 3777/1: S3C24XX:  remove changelogs from include/asm-arm/arch-s3c2410 [regs-*.h]
      [ARM] 3776/1: S3C24XX: remove changelogs from include/asm-arm/arch-s3c2410
      [ARM] 3775/1: S3C24XX: do not add same sysdev_driver to two classes
      [ARM] 3774/1: S3C24XX: SMDK2413 has two machine IDs
      [ARM] 3773/1: Add the HWCAP_VFP bit for the ARM926 CPUs
      [ARM] 3772/1: Fix compilation error in mach-ixp4xx/nslu2*
      [ARM] 3767/1: S3C24XX: remove changelog comments from arch/arm/mach-s3c2410
      [ARM] 3766/1: Fix typo in ARM _raw_read_trylock

commit 08a55c01b504360d48b8123c87b383f7e6a2ef21
Merge: 3f2f125... 5198548...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 11 07:54:45 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [PATCH] Fix dm9000 release_resource

commit 3f2f1257ff6327e330d9e4f0ba1a48a73b0044dc
Merge: 28a2a3f... 6708374...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Sep 11 07:54:14 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [PATCH] ata_piix: add map 01b for ICH7M
      [libata] sata_mv: errata check buglet fix

commit 28a2a3f58707cba16b329b90f601c01599456491
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Sep 11 14:45:07 2006 +0100

    [PATCH] Fix 2.6.18-rc6 IDE breakage, add missing ident needed for current VIA boards
    
    There are two changes here.  The first reverses the broken PCI_DEVICE
    conversion back to the old format.  The second adds a missing PCI ID so
    you can actually boot 2.6.18 on 2 month old VIA motherboards (right now
    only 2.6.18-mm works).
    
    CC'd to Jeff to check the PCI ident but its a) in several distro kernels
    and b) in 2.6.18-mm [twice ??]
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 519854876c66bd04b0c12d3cead6e0e5fc5a1167
Author: Dirk Opfer <Dirk@Opfer-Online.de>
Date:   Wed Sep 6 19:53:32 2006 +0200

    [PATCH] Fix dm9000 release_resource
    
    dm9000_release_board calls release_resource with the platform resource
    instead of the requested resource:
    
    db->addr_res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
    db->addr_req = request_mem_region(db->addr_res->start, i, pdev->name);
    
    dm9000_release_board:
    
    if (db->addr_res != NULL) {
    release_resource(db->addr_res);
    kfree(db->addr_req);
    
    With this behavior the kernel will crash on the second removal. The
    attached patch fix this problem.
    
    Signed-off-by: Dirk Opfer <Dirk@Opfer-Online.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6708374178d225ef77571ed23b30e8a93c36add5
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Sep 11 06:29:03 2006 +0900

    [PATCH] ata_piix: add map 01b for ICH7M
    
    Although the document says otherwise, some ich7m uses map 01b.  This
    patch adds separate map DB for ICH7M and adds map entry for 01b.
    
    This was spotted on an ASUS laptop by Jonathan Dieter.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Jonathan Dieter <jdieter@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 62f1d0e6de138b91d55fbd7d579c837ed62e9e31
Author: Andres Salomon <dilinger@debian.org>
Date:   Mon Sep 11 08:51:05 2006 -0400

    [libata] sata_mv: errata check buglet fix
    
    Fix a buglet; the errata check below this code is assuming the value in
    the sstatus variable is what was pulled out of the SCR_STATUS register.
    However, the status checks in the timeout loop clobber everything
    but the first 4 bits of sstatus, so the errata checks are invalid.
    
    This patch changes it to not clobber SStatus.
    
    Signed-off-by: Andres Salomon <dilinger@debian.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e7ea8fc285c5ac9040ae80b01d529ea453f1b647
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Sep 10 07:39:00 2006 -0300

    V4L/DVB (4608c): Fix I2C dependencies for saa7146 modules
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c482d4f6e87932092c0a30da8e6403b23544f894
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Sun Sep 10 13:43:40 2006 -0300

    V4L/DVB (4608b): i2c deps fix on DVB
    
    Several DVB modules depends on I2C
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8a905162e038367503bac732bf1e3e01c19158b9
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Sep 10 12:01:19 2006 -0300

    V4L/DVB (4605): Fixes an issue with V4L1 and make headers-install
    
    V4L1 support should be disabled when no CONFIG_VIDEO_V4L1_COMPAT is defined,
    to allow checking for broken V4L2 ports. This is very important during the
    migration phase for V4L2 API.
    However, userspace apps should be capable of using both APIs, since they need
    to test at runtime, via VIDIOCGCAP ioctl, if V4L1 is supported. So, when
    __KERNEL__ is not defined, those ioctls and corresponding structs should be
    visible.
    This patch also removes the obsolete defines HAVE_V4L1 and HAVE_V4L2, that
    where causing some confusion, and were replaced by CONFIG_VIDEO_V4L1_COMPAT
    and CONFIG_VIDEO_V4L2.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c663155c3db58d1fff43a105eb5a0e9147ec2a6b
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Wed Aug 23 11:17:30 2006 -0300

    V4L/DVB (4520): Fix an error when loading bttv driver on PV M4900.
    
    Previously, this were reported:
    	Ooops: IR config error [card=139]
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c2d1923313d75fcc30ad1e981df591c3446dc191
Author: Hermann Pitton <hermann-pitton@arcor.de>
Date:   Mon Aug 21 14:14:33 2006 -0300

    V4L/DVB (4511): Restore tuner_ymec_tvf66t5_b_dff_pal_ranges[] to fix UHF switch functionality
    
    The tena_9533_di_pal_ranges use 0x04 instead the original 0x08 for the
    UHF (range 2) switching. This is wrong and therefore nothing happens.
    Restore tuner_ymec_tvf66t5_b_dff_pal_ranges[] to make the UHF switch
    working again.
    
    Signed-off-by: Hermann Pitton <hermann-pitton@arcor.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c3ab204ccbe42d9eb60270e41110f2c5c9214952
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Sep 10 09:31:37 2006 -0300

    V4L/DVB (4494a): Fix compilation when V4L1 support is not present
    
    VIDIOCGMBUF should be compiled only when V4L1 support is selected, since
    this ioctl is from the obsoleted API.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fb7d527c1aec5e224fb3a0772337f8b5e59eecd0
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Sep 10 11:04:36 2006 +1000

    [POWERPC] Update defconfigs
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d17f901defef635292f90a969dadfdbd95b0f104
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 9 21:26:54 2006 +0100

    [ARM] 3778/1: S3C24XX: remove changelogs from include/asm-arm/arch-s3c2410 [simtec]
    
    Patch from Ben Dooks
    
    Remove changelog entries from include/asm-arm/arch-s3c2410
    for all simtec .h files  as these are irrelevant with
    version control.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c6e58ebb373666eba007e3793789e06a4655df61
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 9 21:24:13 2006 +0100

    [ARM] 3783/1: S3C2412: fix IRQ_EINT0 to IRQ_EINT3 handling
    
    Patch from Ben Dooks
    
    The IRQ_EINT0 through IRQ_EINT3 handling has changed
    on the S3C2412 from the previous SoCs in the range,
    and thus we need to add code to handle this.
    
    The changes come about due to these IRQs being
    displayed in two different registers, and needing to
    be acked and masked in both.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3c06cd1c99449b2fd373df24fbc87e804f4ec4e6
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 9 19:44:57 2006 +0100

    [ARM] 3779/1: S3C24XX: remove changelogs from include/asm-arm/arch-s3c2410 [left]
    
    Patch from Ben Dooks
    
    Remove the last of the hangelogs from
    include/asm-arm/arch-s3c2410, as this information
    is available from the revision control system
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 92e4805fbc76f2af0f4139f88265dc73f91af051
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 9 19:44:54 2006 +0100

    [ARM] 3777/1: S3C24XX:  remove changelogs from include/asm-arm/arch-s3c2410 [regs-*.h]
    
    Patch from Ben Dooks
    
    Remove changelog entries from include/asm-arm/arch-s3c2410
    for all regs-*.h as these are irrelevant with version control
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 46c09e1673554d59674d222339f3ff303ad6715f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 9 19:44:52 2006 +0100

    [ARM] 3776/1: S3C24XX: remove changelogs from include/asm-arm/arch-s3c2410
    
    Patch from Ben Dooks
    
    Remove changelog entries from include/asm-arm/arch-s3c2410
    as these are irrelevant with version control
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 189e74ee9c18a5440511c5af525377c609d6ebbd
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Sep 9 19:44:50 2006 +0100

    [ARM] 3775/1: S3C24XX: do not add same sysdev_driver to two classes
    
    Patch from Ben Dooks
    
    The s3c244x-irq.c code makes the mistake of adding
    the same drive to two different sys-classes. This
    causes the class lists to become corrupted and the
    suspend code to OOPS.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 38f5745c5a90641079fd5b48600ae63f7ab6edcd
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 31 11:35:57 2006 -0500

    [IA64] SN fix for cpu hotplug/kexec
    
    The sn_cpu_init() is required for cpu initialization on SN platforms.
    Change __init to __cpuinit so that the function is not freed with init code/data.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1c7d67073e2d196597f541351bc9b109c8a93528
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Aug 31 11:34:47 2006 -0500

    [IA64] Save register stack contents on cpu start
    
    The SN PROM uses the register stack in the slave loop. The contents
    must be preserved for the OS to return to the slave loop via offlining
    a cpu or for kexec. A 'flushrs" is needed to force the stack to be written
    to memory prior to changing bspstore.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 2636255488484e04d6d54303d2b0ec30f7ef7e02
Author: Andreas Schwab <schwab@suse.de>
Date:   Mon Sep 4 21:56:09 2006 +0200

    [IA64] Unwire set/get_robust_list
    
    The syscalls set/get_robust_list must not be wired up until
    futex_atomic_cmpxchg_inatomic is implemented.  Otherwise the kernel will
    hang in handle_futex_death.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b8444d00762703e1b6146fce12ce2684885f8bf6
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Fri Aug 25 14:00:19 2006 -0700

    [IA64] correct file descriptor reference counting in perfmon
    
    Fix a bug in sys_perfmonctl() whereby it was not correctly
    decrementing the file descriptor reference count.
    
    Signed-off-by: stephane eranian <eranian@hpl.hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e9f7bee1df223dcf83743b46cb06c08d95497ec0
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Sep 8 09:48:54 2006 -0700

    [PATCH] NFS: large non-page-aligned direct I/O clobbers memory
    
    The logic in nfs_direct_read_schedule and nfs_direct_write_schedule can
    allow data->npages to be one larger than rpages.  This causes a page
    pointer to be written beyond the end of the pagevec in nfs_read_data (or
    nfs_write_data).
    
    Fix this by making nfs_(read|write)_alloc() calculate the size of the
    pagevec array, and initialise data->npages.
    
    Also get rid of the redundant argument to nfs_commit_alloc().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Cc: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 016eb4a0ed06a3677d67a584da901f0e9a63c666
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Sep 8 09:48:38 2006 -0700

    [PATCH] invalidate_complete_page() race fix
    
    If a CPU faults this page into pagetables after invalidate_mapping_pages()
    checked page_mapped(), invalidate_complete_page() will still proceed to remove
    the page from pagecache.  This leaves the page-faulting process with a
    detached page.  If it was MAP_SHARED then file data loss will ensue.
    
    Fix that up by checking the page's refcount after taking tree_lock.
    
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3665d0e58fa44f50c744f85c7e8ad21d5b10e206
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Fri Sep 8 09:48:21 2006 -0700

    [PATCH] ext3_getblk() should handle HOLE correctly
    
    It has been reported that ext3_getblk() is not doing the right thing and
    triggering following WARN():
    
    BUG: warning at fs/ext3/inode.c:1016/ext3_getblk()
     <c01c5140> ext3_getblk+0x98/0x2a6  <c03b2806> md_wakeup_thread+0x26/0x2a
     <c01c536d> ext3_bread+0x1f/0x88  <c01cedf9> ext3_quota_read+0x136/0x1ae
     <c018b683> v1_read_dqblk+0x61/0xac  <c0188f32> dquot_acquire+0xf6/0x107
     <c01ceaba> ext3_acquire_dquot+0x46/0x68  <c01897d4> dqget+0x155/0x1e7
     <c018a97b> dquot_transfer+0x3e0/0x3e9  <c016fe52> dput+0x23/0x13e
     <c01c7986> ext3_setattr+0xc3/0x240  <c0120f66> current_fs_time+0x52/0x6a
     <c017320e> notify_change+0x2bd/0x30d  <c0159246> chown_common+0x9c/0xc5
     <c02a222c> strncpy_from_user+0x3b/0x68  <c0167fe6> do_path_lookup+0xdf/0x266
     <c016841b> __user_walk_fd+0x44/0x5a  <c01592b9> sys_chown+0x4a/0x55
     <c015a43c> vfs_write+0xe7/0x13c  <c01695d4> sys_mkdir+0x1f/0x23
     <c0102a97> syscall_call+0x7/0xb
    
    Looking at the code, it looks like it's not handle HOLE correctly.  It ends
    up returning -EIO.  Here is the patch to fix it.
    
    If we really want to be paranoid, we can allow return values 0 (HOLE), 1
    (we asked for one block) and return -EIO for more than 1 block.  But I
    really don't see a reason for doing it - all we need is the block# here.
    (doesn't matter how many blocks are mapped).
    
    ext3_get_blocks_handle() returns number of blocks it mapped.  It returns 0
    in case of HOLE.  ext3_getblk() should handle HOLE properly (currently its
    dumping warning stack and returning -EIO).
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Acked-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47d4b9066df023670a61e74565a75293cf15a441
Author: David Wang <touch@sis.com>
Date:   Fri Sep 8 09:47:51 2006 -0700

    [PATCH] sis5513: add SiS south bridge ID 0x966 and 0x968
    
    New SiS south bridge device ID is 0x966.
    
    Next coming product will be 0x968. (Will be released in Q4, this year)
    
    We don't make any updates to the IDE controller.
    
    Signed-off-by: David Wang <touch@sis.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67bb2c692cc02e53c23e4debc92c3a79ddc52a8c
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Sep 8 09:47:34 2006 -0700

    [PATCH] sh: fix FPN_START typo
    
    Not that it passes allmodconfig without it...
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp>
    Cc: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4495c9e5cabc82bb4ce930eb5d3dc7544f3f8389
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Sep 8 09:47:24 2006 -0700

    [PATCH] optical /proc/ide/*/media
    
    Sergey Vlasov reported that his "FUJITSU MCC3064AP, ATAPI OPTICAL drive"
    pops up as UNKNOWN in /proc/ide/*/media .
    
    Closes #4145.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c5780e976e19faff345fcef4a01db87108b51a44
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Fri Sep 8 09:47:15 2006 -0700

    [PATCH] Use the correct restart option for futex_lock_pi
    
    The current implementation of futex_lock_pi returns -ERESTART_RESTARTBLOCK
    in case that the lock operation has been interrupted by a signal.  This
    results in a return of -EINTR to userspace in case there is an handler for
    the signal.  This is wrong, because userspace expects that the lock
    function does not return in any case of signal delivery.
    
    This was not caught by my insufficient test case, but triggered a nasty
    userspace problem in an high load application scenario.  Unfortunately also
    glibc does not check for this invalid return value.
    
    Using -ERSTARTNOINTR makes sure, that the interrupted syscall is restarted.
     The restart block related code can be safely removed, as the possible
    timeout argument is an absolute time value.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a459756810912d2c2bf188cef566af255936b4d
Author: Kirill Korotaev <dev@openvz.org>
Date:   Thu Sep 7 14:17:04 2006 +0400

    [PATCH] IA64,sparc: local DoS with corrupted ELFs
    
    This prevents cross-region mappings on IA64 and SPARC which could lead
    to system crash.  They were correctly trapped for normal mmap() calls,
    but not for the kernel internal calls generated by executable loading.
    
    This code just moves the architecture-specific cross-region checks into
    an arch-specific "arch_mmap_check()" macro, and defines that for the
    architectures that needed it (ia64, sparc and sparc64).
    
    Architectures that don't have any special requirements can just ignore
    the new cross-region check, since the mmap() code will just notice on
    its own when the macro isn't defined.
    
    Signed-off-by: Pavel Emelianov <xemul@openvz.org>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Acked-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    [ Cleaned up to not affect architectures that don't need it ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09494d5d11628f118496747b74db3e56d071c6bc
Author: Kai Lindhom <megantti@gmail.com>
Date:   Thu Sep 7 21:25:51 2006 +0200

    usbtouchscreen: fix ITM data reading
    
    From: Kai Lindhom <megantti@gmail.com>
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Acked-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eaede2cb75f8f8d492342e7c1469635237b32795
Author: Ralf Schlatterbeck <rsc@runtux.com>
Date:   Wed Sep 6 12:15:02 2006 +0200

    USB: New device ID for ftdi_sio usb serial driver
    
    The patch adds a new device ID for the Gamma Scout Geiger counter
    device.
    
    Signed-off-by: Ralf Schlatterbeck <rsc@runtux.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3003b9f78920226367c2f2d3a5598397578a730b
Author: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
Date:   Fri Sep 1 11:32:28 2006 +0900

    USB: Support for USB20SVGA-WH & USB20SVGA-DG
    
    This patch is support USB20SVGA-WH & USB20SVGA-DG of the sisusb device.
    As for this device, Device ID is different according to the color of the
    product.  A blue device is supported. However, a green, white device is
    not supported.
    
    http://www.lubic.jp/uv_method.html ( Japanese only ) .
    
    Green, white USB20SVGA comes to work by applying the patch .
    And, it  be able to use three USB20SVGA( Blue , Green , White ).
    
    Signed-off-by: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f064902457a775f7f70432832d67a5628c250456
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Sep 4 13:41:10 2006 +0200

    USB: hid-core.c: fix duplicate USB_DEVICE_ID_GTCO_404
    
    On Fri, Sep 01, 2006 at 01:58:18AM -0700, Andrew Morton wrote:
    >...
    > Changes since 2.6.18-rc4-mm3:
    >...
    > +gregkh-usb-hid-core.c-adds-all-gtco-calcomp-digitizers-and-interwrite-school-products-to-blacklist.patch
    >...
    >  USB tree updates.
    >...
    
    The GNU C compiler spotted the following bug:
    
    <--  snip  -->
    
    ...
      CC      drivers/usb/input/hid-core.o
    /home/bunk/linux/kernel-2.6/linux-2.6.18-rc5-mm1/drivers/usb/input/hid-core.c:1446:1: warning: "USB_DEVICE_ID_GTCO_404" redefined
    /home/bunk/linux/kernel-2.6/linux-2.6.18-rc5-mm1/drivers/usb/input/hid-core.c:1445:1: warning: this is the location of the previous definition
    ...
    
    <--  snip  -->
    
    This patch fixes this cut'n'paste error.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6fe9febb8af2f82f9caace1aa1c00cd8de7469ac
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Thu Sep 7 16:01:30 2006 +0100

    [MMC] Always use a sector size of 512 bytes
    
    Both MMC and SD specifications specify (although a bit unclearly in
    the MMC case) that a sector size of 512 bytes must always be
    supported by the card.
    
    Cards can report larger "native" size than this, and cards >= 2 GB
    even must do so. Most other readers use 512 bytes even for these
    cards. We should do the same to be compatible.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d773d7255199a6c8934e197756f54a1115dd127b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Sep 7 15:57:12 2006 +0100

    [MMC] Cleanup 385e3227d4d83ab13d7767c4bb3593b0256bf246
    
    Rather than having two places which independently calculate the
    timeout for data transfers, make it a library function instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Acked-by: Pierre Ossman <drzeus@drzeus.cx>

commit 148f93d59cc9bb5e0f9a04d36a6f91d435e1a3f7
Author: Pavel Pisa <ppisa@pikron.com>
Date:   Thu Sep 7 15:53:29 2006 +0100

    [ARM] 3751/1: i.MX/MX1 SD/MMC use 512 bytes request for SCR read
    
    Patch from Pavel Pisa
    
    This is another approach to SDHC deficiency workaround.
    It seems, that previous solution based on 16 bytes (FIFO length size)
    read is still timing sensitive on genirq and fully preemptive kernels.
    The new solution is backuped by M9328 UM statement, that only 512 byte
    block are working properly and by 2.4.26 FreeScale's SDHC code.
    
    Jay Monkman reports significant improvement on code based
    on this driver after applying this change on MX21 as well.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 385e3227d4d83ab13d7767c4bb3593b0256bf246
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jun 18 14:34:37 2006 +0200

    [MMC] Fix SD timeout calculation
    
    Secure Digital cards use a different algorithm to calculate the timeout
    for data transfers. Using the MMC one works often, but not always.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f57b225e432d80ee46f48536cc55ea6cf62c5570
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Sep 3 06:43:33 2006 -0700

    [MMC] constify mmc_host_ops
    
    Let drivers constify MMC host method operations tables,
    moving them from ".data" to ".rodata".
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0edc7d0f3709e8c3bb7e69c4df614218a753361e
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Sep 7 14:27:23 2006 +1000

    [XFS] Fix a bad pointer dereference in the quota statvfs handling.
    
    SGI-PV: 955993
    SGI-Modid: xfs-linux-melb:xfs-kern:26934a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>

commit 0a8d17d090a4939643a52194b7d4a4001b9b2d93
Author: David Chinner <dgc@sgi.com>
Date:   Thu Sep 7 14:27:15 2006 +1000

    [XFS] Fix xfs_splice_write() so appended data gets to disk.
    
    xfs_splice_write() failed to update the on disk inode size when extending
    the so when the file was closed the range extended by splice was truncated
    off. Hence any region of a file written to by splice would end up as a
    hole full of zeros.
    
    SGI-PV: 955939
    SGI-Modid: xfs-linux-melb:xfs-kern:26920a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>

commit 721259bce2851893155c6cb88a3f8ecb106b348c
Author: Lachlan McIlroy <lachlan@sgi.com>
Date:   Thu Sep 7 14:27:05 2006 +1000

    [XFS] Fix ABBA deadlock between i_mutex and iolock. Avoid calling
    __blockdev_direct_IO for the DIO_OWN_LOCKING case for direct I/O reads
    since it drops and reacquires the i_mutex while holding the iolock and
    this violates the locking order.
    
    SGI-PV: 955696
    SGI-Modid: xfs-linux-melb:xfs-kern:26898a
    
    Signed-off-by: Lachlan McIlroy <lachlan@sgi.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>

commit 4be536debe3f7b0c62283e77fd6bd8bdb9f83c6f
Author: David Chinner <dgc@sgi.com>
Date:   Thu Sep 7 14:26:50 2006 +1000

    [XFS] Prevent free space oversubscription and xfssyncd looping.
    
    The fix for recent ENOSPC deadlocks introduced certain limitations on
    allocations. The fix could cause xfssyncd to loop endlessly if we did not
    leave some space free for the allocator to work correctly. Basically, we
    needed to ensure that we had at least 4 blocks free for an AG free list
    and a block for the inode bmap btree at all times.
    
    However, this did not take into account the fact that each AG has a free
    list that needs 4 blocks. Hence any filesystem with more than one AG could
    cause oversubscription of free space and make xfssyncd spin forever trying
    to allocate space needed for AG freelists that was not available in the
    AG.
    
    The following patch reserves space for the free lists in all AGs plus the
    inode bmap btree which prevents oversubscription. It also prevents those
    blocks from being reported as free space (as they can never be used) and
    makes the SMP in-core superblock accounting code and the reserved block
    ioctl respect this requirement.
    
    SGI-PV: 955674
    SGI-Modid: xfs-linux-melb:xfs-kern:26894a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: David Chatterton <chatz@sgi.com>

commit b835bebe95608c81270636a78b70333afb011925
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Sep 6 22:02:22 2006 +0000

    [CIFS] Fix CIFS readdir access denied when SE Linux enabled
    
    CIFS had one path in which dentry was instantiated before the corresponding
    inode metadata was filled in.
    
    Fixes Redhat bugzilla bug #163493
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    Acked-by: Eric Paris <eparis@redhat.com>
    Acked-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 3142afb568d266765bde94f90b0dfee7e5cb08ce
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Sep 6 19:03:31 2006 +0100

    [ARM] 3774/1: S3C24XX: SMDK2413 has two machine IDs
    
    Patch from Ben Dooks
    
    It turns out we have both SMDK2413 and S3C2413 for
    the same board.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f854d37ab6b74f5a2d768d28e9583bc2991692c1
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Sep 6 19:03:28 2006 +0100

    [ARM] 3773/1: Add the HWCAP_VFP bit for the ARM926 CPUs
    
    Patch from Catalin Marinas
    
    The ARM926EJ-S CPU has the VFP coprocessor and therefore it should be shown
    in the /proc/cpuinfo if CONFIG_VFP is enabled.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f64c2c01b74763c1c2be4d0dfb8b7f3f586fedb7
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Wed Sep 6 19:03:24 2006 +0100

    [ARM] 3772/1: Fix compilation error in mach-ixp4xx/nslu2*
    
    Patch from Martin Michlmayr
    
    Include linux/irq.h in the nslu2 code in order to avoid the following
    compiler error:
    
      CC      arch/arm/mach-ixp4xx/nslu2-power.o
    arch/arm/mach-ixp4xx/nslu2-power.c: In function 'nslu2_power_init':
    arch/arm/mach-ixp4xx/nslu2-power.c:53: warning: implicit declaration of function 'set_irq_type'
    arch/arm/mach-ixp4xx/nslu2-power.c:53: error: 'IRQ_TYPE_LEVEL_LOW' undeclared (first use in this function)
    arch/arm/mach-ixp4xx/nslu2-power.c:53: error: (Each undeclared identifier is reported only once
    arch/arm/mach-ixp4xx/nslu2-power.c:53: error: for each function it appears in.)
    arch/arm/mach-ixp4xx/nslu2-power.c:54: error: 'IRQ_TYPE_LEVEL_HIGH' undeclared (first use in this function)
    make[5]: *** [arch/arm/mach-ixp4xx/nslu2-power.o] Error 1
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 916a0021014d1b21b76c21793694978bbd69cf22
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Sep 6 19:03:21 2006 +0100

    [ARM] 3767/1: S3C24XX: remove changelog comments from arch/arm/mach-s3c2410
    
    Patch from Ben Dooks
    
    Remove the pointless changelog comments from
    arch/arm/mach-s3c2410 files, as all this can
    be found from the revision control system.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e89bc81103bb8798daae2c1871229620ed725657
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Wed Sep 6 19:03:14 2006 +0100

    [ARM] 3766/1: Fix typo in ARM _raw_read_trylock
    
    Patch from Catalin Marinas
    
    A comma was missing between tmp and tmp2.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 10387e5eb45c6e48d67102b88229f5bc6037461c
Merge: ebd6c17... d279490...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Sep 6 11:00:59 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [PATCH] myri10ge: update the firmware download URL in Kconfig

commit ebd6c17109aed086908ae3b0949265fd07712659
Author: john stultz <johnstul@us.ibm.com>
Date:   Wed Sep 6 11:02:45 2006 +0100

    [PATCH] FRV: Use the generic time stuff for FRV
    
    Use the generic time stuff for FRV.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4a228346c1a7d09f565e750d2e988c5671e9fa3
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Sep 6 09:03:26 2006 -0700

    [PATCH] Remove unneeded asm-i386/cpufeature.h from user visibility.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb98ad77d8451a3ccf9478738ffe7ec63394fcdf
Author: Ismail Donmez <ismail@pardus.org.tr>
Date:   Wed Sep 6 00:03:44 2006 -0700

    [PATCH] Move linux/device.h include in linux/atmdev.h to #ifdef __KERNEL__ section
    
    linux/device.h header is not included in the David Woodhouse's
    kernel-headers git tree which is used for userspace kernel headers.  Which
    results in compile errors when building iproute2.  Attached patch moves
    linux/device.h include under the #ifdef __KERNEL__ section.
    
    Signed-off-by: Ismail Donmez <ismail@pardus.org.tr>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 068c4579fe5c21e84c7cb2ba89db80899e25104e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Wed Sep 6 00:03:44 2006 -0700

    [PATCH] lockdep: do not touch console state when tainting the kernel
    
    Remove an unintended console_verbose() side-effect from add_taint().
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 471b40d0dfc17bf0161629950b82524d41bc37ce
Author: Pavel Machek <pavel@ucw.cz>
Date:   Wed Sep 6 00:03:43 2006 -0700

    [PATCH] prevent swsusp with PAE
    
    PAE + swsusp results in hard-to-debug crash about 50% of time during
    resume.  Cause is known, fix needs to be ported from x86-64 (but we can't
    make it to 2.6.18, and I'd like this to be worked around in 2.6.18).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96dd7421a06a5bc6eb731323b95efcb2fd864854
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Wed Sep 6 00:03:42 2006 -0700

    [PATCH] prevent timespec/timeval to ktime_t overflow
    
    Frank v.  Waveren pointed out that on 64bit machines the timespec to
    ktime_t conversion might overflow.  This is also true for timeval to
    ktime_t conversions.  This breaks a "sleep inf" on 64bit machines.
    
    While a timespec/timeval with tx.sec = MAX_LONG is valid by specification
    the internal representation of ktime_t is based on nanoseconds.  The
    conversion of seconds to nanoseconds overflows for seconds values >=
    (MAX_LONG / NSEC_PER_SEC).
    
    Check the seconds argument to the conversion and limit it to the maximum
    time which can be represented by ktime_t.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Frank v Waveren <fvw@var.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe2bbc4832659b7ffc867cac03e0a92ae81e11e4
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Wed Sep 6 00:03:41 2006 -0700

    [PATCH] add missing desctiption in super.c
    
    Adds kernel-doc for alloc_super() type in fs/super.c.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6dba28379edc08327ede01ff41bd3c9dd46a7fa0
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Wed Sep 6 00:03:40 2006 -0700

    [PATCH] Documentation for lock_key in struct hrtimer_base
    
    Fixes an error message on make xmldocs.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc47e7b592dc45b03c27b0a4c8f2d215dae9944d
Author: Jarek Poplawski <jarkao2@o2.pl>
Date:   Wed Sep 6 00:03:39 2006 -0700

    [PATCH] lockdep ifdef fix
    
    With
    
    	CONFIG_SMP=y
    	CONFIG_PREEMPT=y
    	CONFIG_LOCKDEP=y
    	CONFIG_DEBUG_LOCK_ALLOC=y
    	# CONFIG_PROVE_LOCKING is not set
    
    spin_unlock_irqrestore() goes through lockdep but spin_lock_irqsave() doesn't.
    Apparently, bad things happen.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d279490543ee4e7c51371eb605b578ab47f45305
Author: Brice Goglin <brice@myri.com>
Date:   Tue Sep 5 21:58:50 2006 -0400

    [PATCH] myri10ge: update the firmware download URL in Kconfig
    
    Update the firmware download URL in Kconfig to match the header
    in drivers/net/myri10ge/myri10ge.c.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fa6c220a7f01257b1c2c4203d48aaaedb0c4416f
Author: Aubrey Lee <aubreylee@gmail.com>
Date:   Tue Sep 5 05:55:07 2006 -0500

    [PATCH] [MTD] DEVICES: Fill more device IDs in the structure of m25p80
    
    The flash_info structure has a bunch of missing fields which causes problems
    when actually tryin to use some ST parts as it gets detected incorrectly.
    
    Signed-off-by: Aubrey Lee <aubreylee@gmail.com>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit c336923b668fdcf0312efbec3b44895d713f4d81
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Sep 3 19:19:48 2006 -0700

    Linux 2.6.18-rc6

commit 8f2779491abe57b8f0f27d96b6a3edd5a8775a58
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Sep 4 10:36:15 2006 +1000

    [PATCH] powerpc: Fix typo in powermac platform functions
    
    New sparse caught that typo which could have caused erratic hardware
    behaviour on some machines if the platform functions are used by the
    firmware to change bits in some FCR registers.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fbcd940dfb6f11d016801a5e4b89cbe88ddc412
Merge: e694420... e9422e0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 2 14:52:07 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial
    
    * master.kernel.org:/home/rmk/linux-2.6-serial:
      [SERIAL] 8250: constify some serial structs
      [SERIAL] Make uart_match_port() work with all memory mapped UARTs

commit e694420258cb1af5eb5a06e4b1a027e8c917d027
Merge: 3b6362b... a188ad2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Sep 2 14:51:45 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3762/1: Fix ptrace cache coherency bug for ARM1136 VIPT nonaliasing Harvard caches
      [ARM] 3765/1: S3C24XX: cleanup include/asm-arm/arch-s3c2410/dma.h
      [ARM] 3764/1: S3C24XX: change type naming to kernel style
      [ARM] 3763/1: add both rtcs to csb337 defconfig
      [ARM] Fix ARM __raw_read_trylock() implementation
      [ARM] 3750/3: Fix double VFP emulation for EABI kernels

commit 3b6362b833b9f7a9d4222cf1bb35f99c411abb31
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sat Sep 2 21:22:16 2006 +0400

    [PATCH] eligible_child: remove an obsolete ->tgid check
    
    It is not possible to find a sub-thread in ->children/->ptrace_children
    lists, ptrace_attach() does not allow to attach to sub-threads.
    
    Even if it was possible to ptrace the task from the same thread group,
    we can't allow to release ->group_leader while there are others (ptracer)
    threads in the same group.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a188ad2bc7dbfa16ccdcaa8d43ade185b969baff
Author: George G. Davis <davis_g@mvista.com>
Date:   Sat Sep 2 18:43:20 2006 +0100

    [ARM] 3762/1: Fix ptrace cache coherency bug for ARM1136 VIPT nonaliasing Harvard caches
    
    Patch from George G. Davis
    
    Resolve ARM1136 VIPT non-aliasing cache coherency issues observed when
    using ptrace to set breakpoints and cleanup copy_{to,from}_user_page()
    while we're here as requested by Russell King because "it's also far
    too heavy on non-v6 CPUs".
    
    NOTES:
    
    1. Only access_process_vm() calls copy_{to,from}_user_page().
    2. access_process_vm() calls get_user_pages() to pin down the "page".
    3. get_user_pages() calls flush_dcache_page(page) which ensures cache
       coherency between kernel and userspace mappings of "page".  However
       flush_dcache_page(page) may not invalidate I-Cache over this range
       for all cases, specifically, I-Cache is not invalidated for the VIPT
       non-aliasing case.  So memory is consistent between kernel and user
       space mappings of "page" but I-Cache may still be hot over this
       range.  IOW, we don't have to worry about flush_cache_page() before
       memcpy().
    4. Now, for the copy_to_user_page() case, after memcpy(), we must flush
       the caches so memory is consistent with kernel cache entries and
       invalidate the I-Cache if this mm region is executable.  We don't
       need to do anything after memcpy() for the copy_from_user_page()
       case since kernel cache entries will be invalidated via the same
       process above if we access "page" again.  The flush_ptrace_access()
       function (borrowed from SPARC64 implementation) is added to handle
       cache flushing after memcpy() for the copy_to_user_page() case.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d738752fc46c4cc339bc66346cf6134446ce08db
Merge: a930363... db59b46...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Sep 1 11:40:37 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      uhci-hcd: fix list access bug
      USB: Support for ELECOM LD-USB20 in pegasus
      USB: Add VIA quirk fixup for VT8235 usb2
      USB: rtl8150_disconnect() needs tasklet_kill()
      USB Storage: unusual_devs.h for Sony Ericsson M600i
      USB Storage: Remove the finecam3 unusual_devs entry
      UHCI: don't stop at an Iso error
      usb gadget: g_ether spinlock recursion fix
      USB: add all wacom device to hid-core.c blacklist
      hid-core.c: Adds all GTCO CalComp Digitizers and InterWrite School Products to blacklist
      USB floppy drive SAMSUNG SFD-321U/EP detected 8 times

commit a930363881c225fb52824145d1ba8f1a8c447dd8
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Aug 31 21:27:54 2006 -0700

    [PATCH] backlight last round of fixes
    
    Fix some more problems (inverted use of semaphores in some places).  He
    also moved my checks into within the protected section which is better.
    
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4cfb04a9d3d6865d932d02616b27b89d3a634026
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Thu Aug 31 21:27:54 2006 -0700

    [PATCH] manage-jbd-its-own-slab fix
    
    Missed a place where I forgot to convert kfree() to kmem_cache_free() as
    part of jbd-manage-its-own-slab changes.
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b98b087fc2daab67518d2baa8aef19a6ad82723
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Thu Aug 31 21:27:53 2006 -0700

    [PATCH] fix NUMA interleaving for huge pages
    
    Since vma->vm_pgoff is in units of smallpages, VMAs for huge pages have the
    lower HPAGE_SHIFT - PAGE_SHIFT bits always cleared, which results in badd
    offsets to the interleave functions.  Take this difference from small pages
    into account when calculating the offset.  This does add a 0-bit shift into
    the small-page path (via alloc_page_vma()), but I think that is negligible.
     Also add a BUG_ON to prevent the offset from growing due to a negative
    right-shift, which probably shouldn't be allowed anyways.
    
    Tested on an 8-memory node ppc64 NUMA box and got the interleaving I
    expected.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Adam Litke <agl@us.ibm.com>
    Cc: Andi Kleen <ak@muc.de>
    Acked-by: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1678df37be8abbb381becdc40242ed915e775550
Author: John Keller <jpk@sgi.com>
Date:   Thu Aug 31 21:27:51 2006 -0700

    [PATCH] sgiioc4: fixup use of mmio ops
    
    Fix some bugs in the patch that converted the IOC4 driver from port IO ops to
    memio ops.
    
    http://marc.theaimsgroup.com/?l=linux-ide&m=114895892231438&w=2
    
      Problems fixed are:
       - Call to default_hwif_mmiops() was not being done until _after_
         first IO operation, resulting in the first IO operation being
         done as a port IO op, instead of memio.
       - request_region() calls needed to be request_mem_region()
       - Incomplete error case handling.
       - Non-usage of ioremap() and __iomem.
    
    Signed-off-by: John Keller <jpk@sgi.com>
    Signed-off-by: Jeremy Higdon <jeremy@sgi.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7931e2a92b4de23093362308087daa8aabd3848a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Aug 31 21:27:50 2006 -0700

    [PATCH] ALSA: ac97: correct some Mic mixer elements
    
    Revert the mixer element names of some Mic controls to the state of
    2.6.17.  This should fix the name mismatch in alsactl.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca72945d2d0981299035bd9d40a08ff06e74b5b8
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Aug 31 21:27:50 2006 -0700

    [PATCH] powerpc: Fix PowerMac IRQ handling bug
    
    The port to genirq & the new powerpc interrupt model in 2.6.18 introduced a
    bug in the legacy PowerMac PIC code (used on older machines) because of a
    typo potentially causing hangs due to interrupt storms.  This fixes it,
    along with a performance issue causing us to do spurrious retriggers after
    masking an interrupt.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d565dd3b0824b67a8442df4de83cc44f7c726fc9
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Aug 31 21:27:49 2006 -0700

    [PATCH] powerpc: More via-pmu backlight fixes
    
    The via-pmu backlight code (introduced in 2.6.18) has various design issues
    causing crashes on machines using it like the old Wallstreet powerbook
    (Michael, the author, never managed to test on these and I just got my hand
    on one of those old beasts).
    
    This fixes them by no longer trying to hijack the backlight device of the
    frontmost framebuffer (causing that framebuffer to crash) but having it's
    own local bits instead.  Might look weird but it's better that way on those
    old machines, at least as a last-minute fix for 2.6.18.  We might rework
    the whole thing later.  This patch also changes the way it gets notified of
    sleep and wakeup in order to properly shut the backlight down on sleep and
    bring it back on wakeup.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b1d647a02c5a1b67d45287eeb6cb3b2219c41c3
Author: Pavel Mironchik <tibor0@gmail.com>
Date:   Thu Aug 31 21:27:47 2006 -0700

    [PATCH] dm: work around mempool_alloc, bio_alloc_bioset deadlocks
    
    This patch works around a complex dm-related deadlock/livelock down in the
    mempool allocator.
    
    Alasdair said:
    
      Several dm targets suffer from this.
    
      Mempools are not yet used correctly everywhere in device-mapper: they can
      get shared when devices are stacked, and some targets share them across
      multiple instances.  I made fixing this one of the prerequisites for this
      patch:
    
        md-dm-reduce-stack-usage-with-stacked-block-devices.patch
    
      which in some cases makes people more likely to hit the problem.
    
      There's been some progress on this recently with (unfinished) dm-crypt
      patches at:
    
        http://www.kernel.org/pub/linux/kernel/people/agk/patches/2.6/editing/
          (dm-crypt-move-io-to-workqueue.patch plus dependencies)
    
    and:
    
      I've no problems with a temporary workaround like that, but Milan Broz (a
      new Redhat developer in the Czech Republic) has started reviewing all the
      mempool usage in device-mapper so I'm expecting we'll soon have a proper fix
      for this associated problems.  [He's back from holiday at the start of next
      week.]
    
    For now, this sad-but-safe little patch will allow the machine to recover.
    
    [akpm@osdl.org: rewrote changelog]
    Cc: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e5f5e5cd65eec6ce5c24a9c29f3e52673b121a6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Aug 31 21:27:46 2006 -0700

    [PATCH] schedule obsolete OSS drivers for removal, 2nd round
    
    This patch schedules obsolete OSS drivers (with ALSA drivers that support
    the same hardware) for removal.
    
    A rationale of the patch is in
      http://lkml.org/lkml/2006/7/11/186
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9eec55623f5aedfcef745d3a0e0f97f5d4f74be
Author: Corey Minyard <minyard@acm.org>
Date:   Thu Aug 31 21:27:45 2006 -0700

    [PATCH] IPMI: fix occasional oops on module unload
    
    Olaf Kirch of SuSE tracked down a problem where module unloads of the IPMI
    driver would occasionally result in Oopses.  He tracked that down to a
    variable that wasn't always initialized properly in some situations.  This
    patch initializes that variable.  Olaf sent a patch that kzalloc-ed the
    data, but this structure is large enough that I would perfer to not do
    that.  Thanks Olaf!
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Cc: Olaf Kirch <okir@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43a1dd502f40fdb644402f64cd06cf8016cd9780
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Thu Aug 31 21:27:44 2006 -0700

    [PATCH] kerneldoc for handle_bad_irq()
    
    Adds the description of the parameters from handle_bad_irq().
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 290995fc3c06c0548ae303dd0b1371a8727f4fad
Author: Ian E. Morgan <imorgan@webcon.ca>
Date:   Thu Aug 31 21:27:42 2006 -0700

    [PATCH] SBC8360: module_param() permission fixes
    
    The last argument of module_param is permissions, not default value.
    
    Acked-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef16b5194f3233a11851180cd82eafb76542047d
Author: Olaf Hering <olaf@aepfle.de>
Date:   Thu Aug 31 21:27:41 2006 -0700

    [PATCH] exit early in floppy_init when no floppy exists
    
    modprobe -v floppy on a Apple G5 writes incorrect stuff to dmesg:
    
    Floppy drive(s): fd0 is 2.88M
    
    The reason is that the legacy io check happens very late,
    when part of the floppy stuff is already initialized.
    check_legacy_ioport() returns either -ENODEV right away, or it walks
    the device-tree looking for a floppy node.
    
    Signed-off-by: Olaf Hering <olaf@aepfle.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9aa141cfc2e08470bba3b9a8328bc50ac457488
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Aug 31 21:27:40 2006 -0700

    [PATCH] x86: increase MAX_MP_BUSSES on default arch
    
    Vitezslav Samel <samel@mail.cz> reports that an HP DL380 g4 fails using the
    default arch due to the ISA bus having an ID of 32.
    
    It would have worked OK with the generic arch - for some reason the default
    arch doesn't support as many busses.
    
    So bump that up to support 256 busses, but leave it at 32 if we're building a
    tiny system to save a bit of memory.
    
    Cc: Vitezslav Samel <samel@mail.cz>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d742eae8e2655a960b2e07f3f622d78546c14031
Author: Bill Huey <billh@gnuppy.monkey.org>
Date:   Thu Aug 31 21:27:39 2006 -0700

    [PATCH] xtensa: ptrace: EXIT_ZOMBIE fix
    
    We're testing the wrong task_struct field.
    
    Acked-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35df17c57cecb08f0120fb18926325f1093dc429
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Thu Aug 31 21:27:38 2006 -0700

    [PATCH] task delay accounting fixes
    
    Cleanup allocation and freeing of tsk->delays used by delay accounting.
    This solves two problems reported for delay accounting:
    
    1. oops in __delayacct_blkio_ticks
    http://www.uwsg.indiana.edu/hypermail/linux/kernel/0608.2/1844.html
    
    Currently tsk->delays is getting freed too early in task exit which can
    cause a NULL tsk->delays to get accessed via reading of /proc/<tgid>/stats.
     The patch fixes this problem by freeing tsk->delays closer to when
    task_struct itself is freed up.  As a result, it also eliminates the use of
    tsk->delays_lock which was only being used (inadequately) to safeguard
    access to tsk->delays while a task was exiting.
    
    2. Possible memory leak in kernel/delayacct.c
    http://www.uwsg.indiana.edu/hypermail/linux/kernel/0608.2/1389.html
    
    The patch cleans up tsk->delays allocations after a bad fork which was
    missing earlier.
    
    The patch has been tested to fix the problems listed above and stress
    tested with rapid calls to delay accounting's taskstats command interface
    (which is the other path that can access the same data, besides the /proc
    interface causing the oops above).
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Cc: Balbir Singh <balbir@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30f3174d1c506db2c6d2c1dddc9c064e741d6b76
Author: john stultz <johnstul@us.ibm.com>
Date:   Thu Aug 31 21:27:37 2006 -0700

    [PATCH] Fix faulty HPET clocksource usage (fix for bug #7062)
    
    Apparently some systems export valid HPET addresses, but hpet_enable()
    fails.  Then when the HPET clocksource starts up, it only checks for a
    valid HPET address, and the result is a system where time does not advance.
    
    See http://bugme.osdl.org/show_bug.cgi?id=7062 for details.
    
    This patch just makes sure we better check that the HPET is functional
    before registering the HPET clocksource.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 202af6d50155f8594ba01d8e0a54d77facc0152a
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Thu Aug 31 21:27:36 2006 -0700

    [PATCH] synclink_gt: fix receive tty error handling
    
    Fix receive tty error handling in synclink_gt driver.  Adrian reported
    compiler warning for incorrect bit test against char variable.  I
    determined these and other device specific error bits were incorrectly
    defined.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddac7c7e3a0fe9cfdcef0de24476b8d69f8cf3e7
Author: Neil Brown <neilb@suse.de>
Date:   Thu Aug 31 21:27:36 2006 -0700

    [PATCH] md: Fix issues with referencing rdev in md/raid1
    
    We need to be careful when referencing mirrors[i].rdev.  It can disappear
    under us at various times.
    
    So:
      fix a couple of problem places.
      comment a couple of non-problem places
      move an 'atomic_add' which deferences rdev down a little
        way to some where where it is sure to not be NULL.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df9ecaba3f152d1ea79f2a5e0b87505e03f47590
Author: Christoph Lameter <clameter@sgi.com>
Date:   Thu Aug 31 21:27:35 2006 -0700

    [PATCH] ZVC: Scale thresholds depending on the size of the system
    
    The ZVC counter update threshold is currently set to a fixed value of 32.
    This patch sets up the threshold depending on the number of processors and
    the sizes of the zones in the system.
    
    With the current threshold of 32, I was able to observe slight contention
    when more than 130-140 processors concurrently updated the counters.  The
    contention vanished when I either increased the threshold to 64 or used
    Andrew's idea of overstepping the interval (see ZVC overstep patch).
    
    However, we saw contention again at 220-230 processors.  So we need higher
    values for larger systems.
    
    But the current default is already a bit of an overkill for smaller
    systems.  Some systems have tiny zones where precision matters.  For
    example i386 and x86_64 have 16M DMA zones and either 900M ZONE_NORMAL or
    ZONE_DMA32.  These are even present on SMP and NUMA systems.
    
    The patch here sets up a threshold based on the number of processors in the
    system and the size of the zone that these counters are used for.  The
    threshold should grow logarithmically, so we use fls() as an easy
    approximation.
    
    Results of tests on a system with 1024 processors (4TB RAM)
    
    The following output is from a test allocating 1GB of memory concurrently
    on each processor (Forking the process.  So contention on mmap_sem and the
    pte locks is not a factor):
    
                           X                   MIN
    TYPE:               CPUS       WALL       WALL        SYS     USER     TOTCPU
    fork                   1      0.552      0.552      0.540    0.012      0.552
    fork                   4      0.552      0.548      2.164    0.036      2.200
    fork                  16      0.564      0.548      8.812    0.164      8.976
    fork                 128      0.580      0.572     72.204    1.208     73.412
    fork                 256      1.300      0.660    310.400    2.160    312.560
    fork                 512      3.512      0.696   1526.836    4.816   1531.652
    fork                1020     20.024      0.700  17243.176    6.688  17249.863
    
    So a threshold of 32 is fine up to 128 processors. At 256 processors contention
    becomes a factor.
    
    Overstepping the counter (earlier patch) improves the numbers a bit:
    
    fork                   4      0.552      0.548      2.164    0.040      2.204
    fork                  16      0.552      0.548      8.640    0.148      8.788
    fork                 128      0.556      0.548     69.676    0.956     70.632
    fork                 256      0.876      0.636    212.468    2.108    214.576
    fork                 512      2.276      0.672    997.324    4.260   1001.584
    fork                1020     13.564      0.680  11586.436    6.088  11592.523
    
    Still contention at 512 and 1020. Contention at 1020 is down by a third.
    256 still has a slight bit of contention.
    
    After this patch the counter threshold will be set to 125 which reduces
    contention significantly:
    
    fork                 128      0.560      0.548     69.776    0.932     70.708
    fork                 256      0.636      0.556    143.460    2.036    145.496
    fork                 512      0.640      0.548    284.244    4.236    288.480
    fork                1020      1.500      0.588   1326.152    8.892   1335.044
    
    [akpm@osdl.org: !SMP build fix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a302eb4e4602d6444ae75a0e516fb2f2c62d6642
Author: Christoph Lameter <clameter@sgi.com>
Date:   Thu Aug 31 21:27:34 2006 -0700

    [PATCH] ZVC: Overstep counters
    
    Increments and decrements are usually grouped rather than mixed.  We can
    optimize the inc and dec functions for that case.
    
    Increment and decrement the counters by 50% more than the threshold in
    those cases and set the differential accordingly.  This decreases the need
    to update the atomic counters.
    
    The idea came originally from Andrew Morton.  The overstepping alone was
    sufficient to address the contention issue found when updating the global
    and the per zone counters from 160 processors.
    
    Also remove some code in dec_zone_page_state.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b63fe1ba4409774738c971d4e6f0b12b54cc2c65
Merge: 0668b47... 5a4e6dc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 31 21:27:29 2006 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband:
      IB/mthca: Use IRQ safe locks to protect allocation bitmaps

commit db59b464f8708cdba857f16b183cff0b7466d6b5
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Aug 31 14:18:39 2006 -0400

    uhci-hcd: fix list access bug
    
    When skipping to the last TD of an URB, go to the _last_ entry in the
    list instead of the _first_ entry (as780).  This fixes Bugzilla #6747
    and possibly others.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5df3d8b53f436a26fad8077b1ceb39a7708e95ec
Author: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
Date:   Tue Aug 29 10:47:41 2006 +0300

    USB: Support for ELECOM LD-USB20 in pegasus
    
    This patch is support LD-USB20 of the USB LAN device.
    http://www2.elecom.co.jp/products/LD-USB20.html ( Japanese only )
    
    I am using this device.
    And, I confirmed work by using this patch.
    
    Signed-off-by: Nobuhiro Iwamatsu <hemamu@t-base.ne.jp>
    Acked-by: Petko Manolov <petkan@nucleusys.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1ae4f9ba84b94b85d995a6ae0064b869ff15b080
Author: Mark Hindley <mark@hindley.org.uk>
Date:   Mon Aug 28 20:43:25 2006 +0100

    USB: Add VIA quirk fixup for VT8235 usb2
    
    Patch to add VIA PCI quirk for Enhanced/Extended USB on VT8235
    southbridge. It is needed in order to use EHCI/USB 2.0 with ACPI.
    Without it IRQs are not routed correctly, you get an "Unlink after
    no-IRQ?" error and the device is unusable.
    
    I belive this could also be a fix for Bugzilla Bug 5835.
    
    Signed-off-by: Mark Hindley <mark@hindley.org.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eff674a514bd3f59e0cae9b843e0665b576a5ed8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:11:09 2006 -0700

    USB: rtl8150_disconnect() needs tasklet_kill()
    
    We need to wait until any currently-running handler has completed.  Fixes an
    unplug-time oops reported by "Miles Lane" <miles.lane@gmail.com>.
    
    Cc: "Petko Manolov" <petkan@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c9c770ed1fe2698c9a3b18e5fc12d1262e099c0c
Author: Phil Dibowitz <phil@ipom.com>
Date:   Sun Aug 27 23:54:37 2006 -0700

    USB Storage: unusual_devs.h for Sony Ericsson M600i
    
    This entry was sent in by Emmanuel Vasilakis <evas@forthnet.gr>, turned
    into a patch by yours truly.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f84c749f1ce6a54b84b098f5fa53a01686401fac
Author: Phil Dibowitz <phil@ipom.com>
Date:   Wed Aug 23 21:11:01 2006 -0700

    USB Storage: Remove the finecam3 unusual_devs entry
    
    This patch removes the Kyocera Finecam L3 entry in unusual devices
    originally submitted by Michael Krauth <michael.krauth@web.de> and
    Alessandro Fracchetti <al.fracchetti@tin.it> given that Gerriet
    <ger.haw@gmx.de> finds he doesn't need it and Alessandro confirms it
    isn't needed anymore as well.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7ceb932f489e86b555258e5f7d7f061f9c1863eb
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Aug 21 11:58:50 2006 -0400

    UHCI: don't stop at an Iso error
    
    Unlike other sorts of endpoint queues, Isochronous queues don't stop
    when an error is encountered.  This patch (as772) fixes the scanning
    routine in uhci-hcd, to make it keep on going when it finds an Iso
    error.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 789851cf0005b946557340c9bbfc7728906cdbfc
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Aug 21 15:26:38 2006 -0700

    usb gadget: g_ether spinlock recursion fix
    
    The new spinlock debug code turned up a spinlock recursion bug in the
    Ethernet gadget driver on a disconnect path; it would show up with any
    UDC driver where the cancellation of active requests was synchronous,
    rather than e.g. delayed until a controller's completion IRQ.
    
    That recursion is fixed here by creating and using a new spinlock to
    protect the relevant lists.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ea186651d5a7b822c855de5de505c5c19812bf0b
Author: Ping Cheng <pingc@wacom.com>
Date:   Fri Jul 14 16:50:04 2006 -0700

    USB: add all wacom device to hid-core.c blacklist
    
    Add all Wacom devices to hid-core.c blacklist
    
    Signed-off-by: Ping Cheng <pingc@wacom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f8d9e26e7deecb1296c221aa979542bc5d63f20
Author: Jeremy Roberson <jroberson@gtcocalcomp.com>
Date:   Mon Aug 28 19:58:28 2006 -0700

    hid-core.c: Adds all GTCO CalComp Digitizers and InterWrite School Products to blacklist
    
    Adds all GTCO CalComp Digitizers and InterWrite School Products to
    hid-core.c blacklist.
    
    Signed-off-by: Jeremy A. Roberson <jroberson@gtcocalcomp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 082fdd12b15c28ab74e5f6559fb3ba15bf9fd393
Author: Juergen Mell <juergen.mell@t-online.de>
Date:   Mon Aug 28 13:53:53 2006 -0700

    USB floppy drive SAMSUNG SFD-321U/EP detected 8 times
    
    USB floppy drive SAMSUNG SFD-321U/EP detected 8 times
    
    Acked-by: Hubert Mantel <mantel@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5a4e6dccbc0cd1b726820b782daebf887dcb95e9
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Aug 31 16:43:06 2006 -0700

    IB/mthca: Use IRQ safe locks to protect allocation bitmaps
    
    It is supposed to be OK to call mthca_create_ah() and mthca_destroy_ah()
    from any context.  However, for mem-full HCAs, these functions use the
    mthca_alloc() and mthca_free() bitmap helpers, and those helpers use
    non-IRQ-safe spin_lock() internally.  Lockdep correctly warns that
    this could lead to a deadlock.  Fix this by changing mthca_alloc() and
    mthca_free() to use spin_lock_irqsave().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 0668b47205e42c04e9c1b594573be5a822ac7f09
Author: Wei Dong <weid@nanjing-fnst.com>
Date:   Thu Aug 31 15:24:48 2006 -0700

    [IPV4]: Fix SNMPv2 "ipFragFails" counter error
    
      When I tested Linux kernel 2.6.17.7 about statistics
    "ipFragFails",found that this counter couldn't increase correctly. The
    criteria is RFC2011:
    RFC2011
      ipFragFails OBJECT-TYPE
        SYNTAX      Counter32
        MAX-ACCESS  read-only
        STATUS      current
        DESCRIPTION
                "The number of IP datagrams that have been discarded because
                they needed to be fragmented at this entity but could not
                be, e.g., because their Don't Fragment flag was set."
        ::= { ip 18 }
    
    When I send big IP packet to a router with DF bit set to 1 which need to
    be fragmented, and router just sends an ICMP error message
    ICMP_FRAG_NEEDED but no increments for this counter(in the function
    ip_fragment).
    
    Signed-off-by: Wei Dong <weid@nanjing-fnst.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5991c84421f3ea1e281954610a39e4993e5c39e4
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Thu Aug 31 15:21:50 2006 -0700

    [NET]: Rate limiting for socket allocation failure messages.
    
    This patch limits the warning messages when socket allocation failures
    happen. It happens under memory pressure.
    
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 99c7bc0133b875280fdd2bf78e4ffbd58cc609e3
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Aug 31 14:52:17 2006 -0700

    [IPV6]: Fix kernel OOPs when setting sticky socket options.
    
    Bug noticed by Remi Denis-Courmont <rdenis@simphalempin.com>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd1a47c21ee4f4f682285ad9d4624d2cec436f93
Merge: 22db37e... 7b7db1b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 31 14:42:07 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] cio: unsolicited interrupts during sense pgid.
      [S390] cio: no path after machine check.
      [S390] cio: kernel stack overflow.
      [S390] dasd: fix device shutdown process.
      [S390] broken copy_in_user function.

commit 22db37ec5fd51b0c77b1dd5751b1cdc2672c08d6
Author: Chris Wright <chrisw@sous-sol.org>
Date:   Thu Aug 31 00:53:22 2006 -0700

    [PATCH] i386: rwlock.h fix smp alternatives fix
    
    Commit 8c74932779fc6f61b4c30145863a17125c1a296c ("i386: Remove
    alternative_smp") did not actually compile on x86 with CONFIG_SMP.
    
    This fixes the __build_read/write_lock helpers.  I've boot tested on
    SMP.
    
    [ Andi: "Oops, I think that was a quilt unrefreshed patch.  Sorry.  I
      fixed those before testing, but then still send out the old patch." ]
    
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Cc: Gerd Hoffmann <kraxel@suse.de>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57bcdafcb1e0782e7ae13471d9223c69e3a6cba2
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Aug 31 15:26:41 2006 +0100

    [ARM] 3765/1: S3C24XX: cleanup include/asm-arm/arch-s3c2410/dma.h
    
    Patch from Ben Dooks
    
    Cleanup for include/asm-arma/arch-s3c2410/dma.h,
    by using tab characters to indent items, remove the
    now un-necessary changelog, and update the copyright
    information.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f105a7dfc5e81c28dd23ebf2328e42972e2cf240
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Aug 31 15:26:37 2006 +0100

    [ARM] 3764/1: S3C24XX: change type naming to kernel style
    
    Patch from Ben Dooks
    
    The type naming in the s3c24xx dma code is riddled with
    typedefs creating _t types, from the code import from 2.4
    which is contrary to the current Kernel coding style.
    
    This patch cleans this up, removing the typedefs and
    and fixing up the resultant code changes.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 851fb304b510fc1e5dc5852cda25361219c1c4b1
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Aug 31 15:26:35 2006 +0100

    [ARM] 3763/1: add both rtcs to csb337 defconfig
    
    Patch from David Brownell
    
    This adds RTC support to the csb337 default config.  Both the AT91
    and the ds1307 RTCs are enabled (rtc0 and rtc1 respectively).
    
    The ds1307 is used to initialize the system time, since it's battery-backed.
    
    From then on the AT91 RTC is used, since it's more capable (with both
    alarm and update irqs, and system wakeup capability) even though it
    needs manual initialization (symlink /dev/rtc to /dev/rtc0 for older
    versions of hwclock, then "hwclock --systohc") in an rc script or
    from inittab.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8e34703b9315688305306d26148088b0a8292563
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Aug 31 15:09:30 2006 +0100

    [ARM] Fix ARM __raw_read_trylock() implementation
    
    Matthew Wilcox pointed out that the generic implementation
    of this is unfit for use.  Here's an ARM optimised version
    instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4c15343167b5febe7bb0ba96aad5bef42ae94d3b
Merge: eb36c28... d0027bf...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 30 21:44:06 2006 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] Fix return value from memcpy
      [POWERPC] iseries: Define insw et al. so libata/ide will compile
      [POWERPC] Fix irq enable/disable in smp_generic_take_timebase
      [POWERPC] Fix problem with time not advancing on 32-bit platforms
      [POWERPC] Restore copyright notice in arch/powerpc/kernel/fpu.S
      [POWERPC] Fix up ibm_architecture_vec definition
      [POWERPC] Make OF irq map code detect more error cases
      [POWERPC] Support for "weird" MPICs and fixup mpc7448_hpc2
      [POWERPC] Fix MPIC sense codes in documentation
      [POWERPC] Fix performance regression in IRQ radix tree locking
      [POWERPC] Add mpc7448hpc2 device tree source file
      [POWERPC] Add MPC8349E MDS device tree source file to arch/powerpc/boot/dts
      [POWERPC] modify mpc83xx platforms to use new IRQ layer
      [POWERPC] Adapt ipic driver to new host_ops interface, add set_irq_type to set IRQ sense
      [POWERPC] back up old school ipic.[hc] to arch/ppc
      [POWERPC] Use mpc8641hpcn PIC base address from dev tree.
      [POWERPC] Allow MPC8641 HPCN to build with CONFIG_PCI disabled too.
      [POWERPC] Fix powerpc 44x_mmu build
      [POWERPC] Remove flush_dcache_all export

commit eb36c2884a1a2190791afe65fd833b2d3cd4b999
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Aug 30 16:13:16 2006 +1000

    [PATCH] ppc32: fix last_jiffy time comparison
    
    This fixes a hang on ppc32.
    
    The problem was that I was comparing a 32-bit quantity with a 64-bit
    quantity, and consequently time wasn't advancing.  This makes us use a
    64-bit quantity on all platforms, which ends up simplifying the code
    since we can now get rid of the tb_last_stamp variable (which actually
    fixes another bug that Ben H and I noticed while going carefully through
    the code).
    
    This works fine on my G4 tibook.  Let me know how it goes on your
    machines.
    
    Acked-by: Olaf Hering <olaf@aepfle.de>
    Acked-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98a3c781057fa43494e7e8b39d639e93fca0ecbf
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Aug 31 14:04:34 2006 +1000

    [PATCH] fbdev: Fix crashes in various fbdev's blank routines
    
    The backlight changes that went in had a bug where they could cause the
    kernel to access an unitialized pointer when blanking if there is no
    backlight control on a machine.
    
    The bug affects atyfb, aty128fb, nvidiafb and rivafb.  radeonfb seems to
    be ok.  This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0027bf09f09d95a23b8f476ba8cea28f2576781
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Aug 31 13:22:58 2006 +1000

    [POWERPC] Fix return value from memcpy
    
    As pointed out by Herbert Xu <herbert@gondor.apana.org.au>, our
    memcpy implementation didn't return the destination pointer as its
    return value, and there is code in the kernel that expects that.
    This fixes it.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9129d6ea475b7e9f216c8324ea05b7a0d8aba540
Merge: 18f2905... c57d68c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 30 17:12:11 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] Increase default nodes shift to 10, nr_cpus to 1024
      [IA64] remove redundant local_irq_save() calls from sn_sal.h
      [IA64] panic if topology_init kzalloc fails
      [IA64-SGI] Silent data corruption caused by XPC V2.

commit 18f2905fcec3e06deafd25a02e37eabaaaaef744
Author: Roland Scheidegger <rscheidegger_lists@hispeed.ch>
Date:   Wed Aug 30 23:17:55 2006 +0100

    [PATCH] drm: radeon flush TCL VAP for vertex program enable/disable
    
    The radeon requires a VAP state flush when enabling/disabling
    vertex programs on the r200 cards.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7dec1e0dbb9e8e032b56a62d07ab6ac009109d3
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Aug 30 19:14:25 2006 +0100

    [PATCH] Missing PCI id update for VIA IDE
    
    The following change from -mm is important to 2.6.18 (actually to 2.6.17
    but its too late for that). This was contributed over three months ago
    by VIA to Bartlomiej and nothing happened. As a result the new chipset
    is now out and Linux won't run on it. By the time 2.6.18 is finalised
    this will be the defacto standard VIA chipset so support would be a good
    plan.
    
    Tested in -mm for a while, its essentially a PCI ident update but for
    the bridge chip because VIA do things in weird ways.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec0063b40a2291e095faf07fbeb94be92e525c54
Author: Suleiman Souhlal <ssouhlal@FreeBSD.org>
Date:   Wed Aug 30 19:37:20 2006 +0200

    [PATCH] x86_64: Don't write out segments from vsyscall32 DSO if it is not mapped
    
    It's possible to get an invalid page fault in kernel mode when we try to
    write out segments from vsyscall32 when dumping core for a 32bit process if
    the vsyscall32 DSO is not mapped in its address space (which can happen if,
    for example, ulimit -v 100 is run).
    
    Signed-off-by: Suleiman Souhlal <suleiman@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01ebb77b31149d847726a8847ad0d37631d7f049
Author: Keith Owens <kaos@ocs.com.au>
Date:   Wed Aug 30 19:37:19 2006 +0200

    [PATCH] x86_64: Save original IST values for checking stack addresses
    
    The values in init_tss.ist[] can change when an IST event occurs.  Save
    the original IST values for checking stack addresses when debugging or
    doing stack traces.
    
    Signed-off-by: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 386dcafaacd212ef4a8aeed67a7db3ffbb44c7b2
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:18 2006 +0200

    [PATCH] i386: Remove __KERNEL__ ifdef around _syscall*()
    
    After all their only point is having them in user space.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 266f0566761cf88906d634727b3d9fc2556f5cbd
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:17 2006 +0200

    [PATCH] i386: Fix stack switching in do_IRQ
    
    There was a bogus hunk from the genirq merge that essentially
    broke stack switching for hard interrupts. Remove it since it isn't
    needed.
    
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbad0b669d33f3023cfe70ec79ba5ea487afca59
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:16 2006 +0200

    [PATCH] x86_64: Remove __KERNEL__ ifdef around _syscall*()
    
    After all their only point is having them in user space. On x86-64
    they don't even work in kernel space.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40dd2d20f220eda1cd0da8ea3f0f9db8971ba237
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:15 2006 +0200

    [PATCH] x86: Disable MMCONFIG on Intel SDV using DMI blacklist
    
    As a replacement for the earlier removal of the e820 MCFG check
    we blacklist the Intel SDV with the original BIOS bug that
    motivated that check. On those machines don't use MMCONFIG.
    
    This also adds a new pci=mmconf parameter to override the blacklist.
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c74932779fc6f61b4c30145863a17125c1a296c
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:14 2006 +0200

    [PATCH] i386: Remove alternative_smp
    
    The .fill causes miscompilations with some binutils version.
    
    Instead just patch the lock prefix in the lock constructs. That is the
    majority of the cost and should be good enough.
    
    Cc: Gerd Hoffmann <kraxel@suse.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 841be8ddf92578e5b481ed9f9abb85649fc13238
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:13 2006 +0200

    [PATCH] x86_64: Remove alternative_smp
    
    The .fill causes miscompilations with some binutils version.
    
    Instead just patch the lock prefix in the lock constructs. That is the
    majority of the cost and should be good enough.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ceee88223047749ad683d397b19904c3dfb6adeb
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:12 2006 +0200

    [PATCH] x86_64: Recover 1MB of kernel memory
    
    Noticed by Jan Beulich.
    
    When the kernel was moved from 1MB to 2MB in 2.6.17 the kernel reservation
    code wasn't adjusted and it still reserved starting with 1MB. This means 1MB always
    were lost.
    
    This patch fixes this by reserving only starting with _text.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea424055b771a165c9abd3ae109255a3b825c745
Author: Jan Beulich <jbeulich@novell.com>
Date:   Wed Aug 30 19:37:11 2006 +0200

    [PATCH] x86: Make backtracer fallback logic more bullet-proof
    
    The unwinder fallback logic still had potential for falling through to
    the legacy stack trace code without printing an indication (at once
    serving as a separator) of this.
    
    Further, the stack pointer retrieval for the fallback should be as
    restrictive as possible (in order to avoid having the legacy stack
    tracer try to access invalid memory). The patch tightens that, but
    this could certainly be further improved.
    
    Also making the call_trace command line option now conditional upon
    CONFIG_STACK_UNWIND (as it's meaningless otherwise).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61171b8dbd36b0cc34d3813a59a8e4dc2984414d
Author: Jan Beulich <jbeulich@novell.com>
Date:   Wed Aug 30 19:37:10 2006 +0200

    [PATCH] x86: fix x86 cpuid keys used in alternative_smp()
    
    By hard-coding the cpuid keys for alternative_smp() rather than using
    the symbolic constant it turned out that incorrect values were used on
    both i386 (0x68 instead of 0x69) and x86-64 (0x66 instead of 0x68).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29fe5f3bafb644c33269fb0f2a719d4809a07332
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:09 2006 +0200

    [PATCH] i386: Add kernel thread stack frame termination for properly stopping stack unwinds.
    
    One open question: Should this added push perhaps be made conditional
    upon CONFIG_STACK_UNWIND or CONFIG_UNWIND_INFO?
    [AK: not needed, these are all very slow paths]
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c05991ed12fd71e539dd8de8f5663450cd0c934c
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:08 2006 +0200

    [PATCH] x86_64: Add kernel thread stack frame termination for properly stopping stack unwinds.
    
    One open question: Should these added pushes perhaps be made
    conditional upon CONFIG_STACK_UNWIND or CONFIG_UNWIND_INFO?
    [AK: Not needed -- these are all very slow paths]
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11012d419cfc0e0f78ca356aca03674217910124
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:06 2006 +0200

    [PATCH] x86: Revert e820 MCFG heuristics
    
    The check for the MCFG table being reserved in the e820 map was originally
    added to detect a broken BIOS in a preproduction Intel SDV. However it also
    breaks the Apple x86 Macs, which can't supply this properly, but need
    a working MCFG. With this patch they wouldn't use the MCFG and not work.
    
    After some discussion I think it's best to remove the heuristic again.
    It also failed on some other boxes (although it didn't cause much
    problems there because old style port access for PCI config space
    still works as fallback), but the preproduction SDVs can just use
    pci=nommcfg. Supporting production machines properly is more
    important.
    
    Edgar Hucek did all the debugging work.
    
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Edgar Hucek <hostmaster@ed-soft.at>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddcf36511d213501a035f168334046ba30a61a11
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 30 19:37:05 2006 +0200

    [PATCH] x86_64: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df31405a9a240e8ea882953ea90736ff57b47643
Merge: 7c30b06... 404dda8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 30 15:54:55 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SUNLANCE]: Fix probing problem.
      [SPARC64]: Fix X server hangs due to large pages.

commit 7c30b0653f1bcaf04f8abf24cad5c1e642a3da47
Merge: 7288026... ee1377c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 30 15:54:35 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [STRIP]: Fix neighbour table refcount leak.
      [IPV6]: ipv6_add_addr should install dstentry earlier
      [NETLINK]: Call panic if nl_table allocation fails
      [TCP]: Two RFC3465 Appropriate Byte Count fixes.
      [IPV6]: SNMPv2 "ipv6IfStatsInAddrErrors" counter error
      [E100]: Add module option to ignore bad EEPROM checksums.
      [SCTP]: Fix sctp_primitive_ABORT() call in sctp_close().

commit 0a7d5f8ce960e74fa22986bda4af488539796e49
Merge: 0165508... dc709bd...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Aug 30 23:30:38 2006 +0100

    Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 0355b3e039c621d15321fd0d5cf72d8bdb8f723d
Author: Daniel Jacobowitz <drow@false.org>
Date:   Wed Aug 30 15:06:39 2006 +0100

    [ARM] 3750/3: Fix double VFP emulation for EABI kernels
    
    Patch from Daniel Jacobowitz
    
    vfp_put_double didn't work in a CONFIG_AEABI kernel.  By swapping
    the arguments, we arrange for them to be in the same place regardless
    of ABI.  I made the same change to vfp_put_float for consistency.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7b7db1b59563aebe2f4d2ba850468afb2c87c82a
Author: Stefan Bader <shbader@de.ibm.com>
Date:   Wed Aug 30 14:33:39 2006 +0200

    [S390] cio: unsolicited interrupts during sense pgid.
    
    Calls to set a device online with path grouping may get stuck in
    some cases because certain device conditions where discarded after
    unsolicited interrupts.
    Check subchannel activity after unsolicited interrupts and retry
    the operation if the subchannel is idle.
    
    Signed-off-by: Stefan Bader <shbader@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 3b88508a31a77eb3487154922e1eff282dc1d863
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Wed Aug 30 14:33:37 2006 +0200

    [S390] cio: no path after machine check.
    
    Devices enter no-path state after disabling a channel path
    via the SE even though another path has been reenabled at the SE.
    The devices are set into no-path state before triggering path
    verification even though other paths may have become available.
    To fix this trigger path verification before setting a device into
    no-path state.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 292888c81e74115db5e5a4a838f730a7c3662982
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Aug 30 14:33:35 2006 +0200

    [S390] cio: kernel stack overflow.
    
    Use different kind of assignment to make sure gcc doesn't create code
    that creates temp variables on the stack, assigns values to it and
    copies the content of the whole temp variable to the destination.
    This reduces stack usage of e.g. ccwgroup_driver_register from 976
    to 48 bytes instead.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 8f61701bdf536c7a80f0f614bac91c7883804c4c
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Wed Aug 30 14:33:33 2006 +0200

    [S390] dasd: fix device shutdown process.
    
    Fix clear_IO handling (need to wait for interrupt) and
    introduced error-handling in shutdown processing.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit af313e5a4f56b248767d667c3c2436dda767df77
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Aug 30 14:33:30 2006 +0200

    [S390] broken copy_in_user function.
    
    The copy_in_user primitive does not work as advertised. If the source
    and target area are available copy_in_user copies one byte too much.
    If one of the memory areas is not available it does not copy as much
    data as it can, but up to 257 bytes less.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit e7498656b5e2e9e3806d263fecc90b2707d02093
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Aug 30 17:11:34 2006 +1000

    [POWERPC] iseries: Define insw et al. so libata/ide will compile
    
    These are build fixes that enable (for example) libata and the ide
    code to actually build on iSeries.  The associated hardware will never
    be supported on legacy iSeries, so the code paths don't actually need
    to work, but it is useful (especially for a combined kernel) if the
    code can build.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e9422e091531c5851da4ffb8ee6dcbc36dc5b7a9
Author: Helge Deller <deller@gmx.de>
Date:   Tue Aug 29 21:57:29 2006 +0200

    [SERIAL] 8250: constify some serial structs
    
    - some const- ification and usage of ARRAY_SIZE() in serial drivers
    
    Signed-off-by: Helge Deller <deller@gmx.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d21b55d30b46c0b43821a2980e4998965fa37e33
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Mon Aug 28 19:49:03 2006 +0400

    [SERIAL] Make uart_match_port() work with all memory mapped UARTs
    
    uart_match_port() always fails with UPIO_MEM32, UPIO_AU, and UPIO_TSI cases.
    Since they match to the memory mapped UARTs, they should be handled just like
    UPIO_MEM case.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 467c37801c453849a2fe243c3226476ee3985868
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Aug 30 16:10:47 2006 +1000

    [POWERPC] Fix irq enable/disable in smp_generic_take_timebase
    
    Eran Ben-Avi <eranpublic@yahoo.com> pointed out that the arch/ppc version
    of smp_generic_take_timebase disables interrupts on entry but exits without
    restoring them.  However, both it and the arch/powerpc version have another
    problem, which is that they use local_irq_disable/enable rather than
    local_irq_save/restore, and they are called with interrupts disabled.
    
    This fixes both problems; it changes a return to a break in the arch/ppc
    version, and changes both versions to use local_irq_save/restore.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e0d872d536bb93335d5905b09fe374a163486d43
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Aug 30 15:55:32 2006 +1000

    [POWERPC] Fix problem with time not advancing on 32-bit platforms
    
    This fixes a problem introduced in 5db9fa9593e2ff69f2b95f9d59229dc4faaa564d.
    The last_jiffy per-cpu variable is only 32 bits on 32-bit machines, but it
    was being compared with a 64-bit quantity (tb_next_jiffy), which resulted in
    time not advancing.
    
    This fixes it by changing last_jiffy to be 64 bits on all platforms.  With
    this, we no longer need tb_last_stamp as a 32-bit version of tb_last_jiffy,
    so this gets rid of tb_last_stamp and we just use tb_last_jiffy instead.
    This also fixes a bug when the boot cpu is not online, because using
    tb_last_stamp could have caused the wrong timebase origin value to be used
    when calculating the time of day.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fea23bfefb4e98efd3c36f00ccc0b60281dc99da
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Aug 30 14:45:35 2006 +1000

    [POWERPC] Restore copyright notice in arch/powerpc/kernel/fpu.S
    
    This code got moved from head.S but the copyright notice on head.S didn't
    get transferred with it.  Noticed by Cort Dougan <cort@fsmlabs.com>.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 11e9ed43ca8a741c2858c33d12120cf8817d3bff
Author: Will Schmidt <will_schmidt@vnet.ibm.com>
Date:   Fri Aug 25 15:46:59 2006 -0500

    [POWERPC] Fix up ibm_architecture_vec definition
    
    This problem was noticed by one of the Phyp firmware folks.
    Our ibm,client-architecture-support call was failing.
    This corrects the vector length parameters being passed in.
    
    Signed-off-by: Will Schmidt <will_schmidt@vnet.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 006b64de607f895de2ba1e21d3179cddf059128f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Aug 25 14:46:23 2006 +1000

    [POWERPC] Make OF irq map code detect more error cases
    
    Device-tree bugs on js20 with some versions of SLOF were causing the
    interrupt for IDE to not be parsed correctly and fail to boot. This
    patch adds a bit more sanity checking to the parser to detect some of
    those errors and fail instead of returning bogus information.  The
    powerpc PCI code can then trigger a fallback that works on those
    machines.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7233593b7844c2db930594ee9c0c872a6900bfcc
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Fri Aug 25 14:16:30 2006 +1000

    [POWERPC] Support for "weird" MPICs and fixup mpc7448_hpc2
    
    This adds a new hardware information table for mpic. This enables
    the mpic code to deal with mpic controllers with different register
    layouts and hardware behaviours.
    
    This introduces CONFIG_MPIC_WEIRD.  For boards with non standard mpic
    controllers, select CONFIG_MPIC_WEIRD and add its hardware information
    in the mpic_infos[] array.
    
    TSI108/109 PIC takes the first index of weird hardware information
    table.  :)  The table can be extended. The Tsi108/109 PIC looks like
    standard OpenPIC but, in fact, is different in register mapping and
    behavior.
    
    The patch does not affect the behavior of standard mpic.  If
    CONFIG_MPIC_WEIRD is not defined, the code is essentially identical to
    the current code.
    
    [benh@kernel.crashing.org:
    This patch is a slightly cleaned up version of Zang Roy's support for
    the TSI108 MPIC variant. It also fixes up MPC7448_hpc2 to use the new
    version of the type macros and changes the way MPIC is selected in
    Kconfig to better match what is done for other system devices.
    ]
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 404dda854b8bb04df72405d5088fa3e6100aef36
Author: Krzysztof Helt <krzysztof.h1@wp.pl>
Date:   Mon Aug 28 23:28:16 2006 -0700

    [SUNLANCE]: Fix probing problem.
    
    The current probe table causes ledma and lebuffer
    "le" devices to get probed twice which is not what
    we want.
    
    Match just "le" and look directly at the parent to get the correct
    top-level node information.
    
    Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 47f2c3604f47579ac5c173f8b402dc6cd8e2e8fa
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Aug 28 00:33:03 2006 -0700

    [SPARC64]: Fix X server hangs due to large pages.
    
    This problem was introduced by changeset
    14778d9072e53d2171f66ffd9657daff41acfaed
    
    Unlike the hugetlb code paths, the normal fault code is not setup to
    propagate PTE changes for large page sizes correctly like the ones we
    make for I/O mappings in io_remap_pfn_range().
    
    It is absolutely necessary to update all sub-ptes of a largepage
    mapping on a fault.  Adding special handling for this would add
    considerably complexity to tlb_batch_add().  So let's just side-step
    the issue and forcefully dirty any writable PTEs created by
    io_remap_pfn_range().
    
    The only other real option would be to disable to large PTE code of
    io_remap_pfn_range() and we really don't want to do that.
    
    Much thanks to Mikael Pettersson for tracking down this problem and
    testing debug patches.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ee1377c3eef4238d89b2f99fa4d0bbbad3078b64
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 29 21:18:45 2006 -0700

    [STRIP]: Fix neighbour table refcount leak.
    
    Found by inspection. The STRIP driver does neigh_lookup() but never
    releases.  This driver shouldn't being doing gratuitous arp anyway.
    
    Untested, obviously, because of lack of hardware.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 57f5f544f58ffa1d6c38630d0522c9c0be67c533
Author: Keir Fraser <keir.fraser@cl.cam.ac.uk>
Date:   Tue Aug 29 02:43:49 2006 -0700

    [IPV6]: ipv6_add_addr should install dstentry earlier
    
    ipv6_add_addr allocates a struct inet6_ifaddr and a dstentry, but it
    doesn't install the dstentry in ifa->rt until after it releases the
    addrconf_hash_lock. This means other CPUs will be able to see the new
    address while it hasn't been initialized completely yet.
    
    One possible fix would be to grab the ifp->lock spinlock when
    creating the address struct; a simpler fix is to just move the
    assignment.
    
    Acked-by: Jan Beulich <jbeulich@novell.com>
    Acked-by: Olaf Kirch <okir@suse.de>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fab2caf62ed03d83bd3a3598b859c3c345a8e8b5
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Tue Aug 29 02:15:24 2006 -0700

    [NETLINK]: Call panic if nl_table allocation fails
    
    This patch makes crash happen if initialization of nl_table fails
    in initcalls. It is better than getting use after free crash later.
    
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3fdf3f0c99e90e167f0d0643fcc8739e27456697
Author: Daikichi Osuga <osugad@s1.nttdocomo.co.jp>
Date:   Tue Aug 29 02:01:44 2006 -0700

    [TCP]: Two RFC3465 Appropriate Byte Count fixes.
    
    1) fix slow start after retransmit timeout
    2) fix case of L=2*SMSS acked bytes comparison
    
    Signed-off-by: Daikichi Osuga <osugad@s1.nttdocomo.co.jp>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 76d0cc1b64e1686b2b53e081c94142dd99f01ec5
Author: Lv Liangying <lvly@nanjing-fnst.com>
Date:   Tue Aug 29 00:00:47 2006 -0700

    [IPV6]: SNMPv2 "ipv6IfStatsInAddrErrors" counter error
    
       When I tested Linux kernel 2.6.17.7 about statistics
    "ipv6IfStatsInAddrErrors", found that this counter couldn't increase
    correctly. The criteria is RFC2465:
     ipv6IfStatsInAddrErrors OBJECT-TYPE
          SYNTAX      Counter32
          MAX-ACCESS  read-only
          STATUS      current
          DESCRIPTION
             "The number of input datagrams discarded because
             the IPv6 address in their IPv6 header's destination
             field was not a valid address to be received at
             this entity.  This count includes invalid
             addresses (e.g., ::0) and unsupported addresses
             (e.g., addresses with unallocated prefixes).  For
             entities which are not IPv6 routers and therefore
             do not forward datagrams, this counter includes
             datagrams discarded because the destination address
             was not a local address."
          ::= { ipv6IfStatsEntry 5 }
    
    When I send packet to host with destination that is ether invalid
    address(::0) or unsupported addresses(1::1), the Linux kernel just
    discard the packet, and the counter doesn't increase(in the function
    ip6_pkt_discard).
    
    Signed-off-by: Lv Liangying <lvly@nanjing-fnst.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8fb6f732c389847dece403b7470d6d3d2778804a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Aug 28 22:12:54 2006 -0700

    [E100]: Add module option to ignore bad EEPROM checksums.
    
    Several people run into the situation where the E100
    EEPROM contents are fine, but the checksum hasn't been
    set properly.  This renders the device useless for
    them even though it would function correctly.
    
    The default is off, which retains the current behavior.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9ac86727fc02cc7117ef3fe518a4d51cd573c82
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Mon Aug 28 13:53:01 2006 -0700

    [SCTP]: Fix sctp_primitive_ABORT() call in sctp_close().
    
    With the recent fix, the callers of sctp_primitive_ABORT()
    need to create an ABORT chunk and pass it as an argument rather
    than msghdr that was passed earlier.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7288026b8671061aff7663b1766037b3f2573627
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Aug 30 13:41:58 2006 +1000

    [XFS] Fix char size overflow in bmap_alloc call for unwritten extent
    conversion.
    
    Since bma.conv is a char and XFS_BMAPI_CONVERT is 0x1000, bma.conv was
    always assigned zero. Spotted by the GNU C compiler (SVN version).
    
    SGI-PV: 947312
    SGI-Modid: xfs-linux-melb:xfs-kern:26887a
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1ad8f401b6e16e3ba8a70dcda466e7a0986f7e5e
Author: Nathan Scott <nathans@sgi.com>
Date:   Wed Aug 30 13:41:23 2006 +1000

    [XFS] Update the MAINTAINERS file entry for XFS.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 3efbdd136e52ee4028b5bb5b848a6043cf61cd6e
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Aug 30 08:58:00 2006 +1000

    [POWERPC] Fix MPIC sense codes in documentation
    
    The booting-without-of.txt had incorrect definition for the sense codes
    for an OpenPIC controller
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8ec8f2e85c6b88b4a1641eb3902275bcf2c6d60a
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Aug 28 11:17:37 2006 +1000

    [POWERPC] Fix performance regression in IRQ radix tree locking
    
    When reworking the powerpc irq code, I figured out that we were using
    the radix tree in a racy way. As a temporary fix, I put a spinlock in
    there. However, this can have a significant impact on performances. This
    patch reworks that to use a smarter technique based on the fact that
    what we need is in fact a rwlock with extremely rare writers (thus
    optimized for the read path).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4b3afca9345f5beb9c607faeb2aef4f91dd91a13
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Fri Aug 25 16:43:25 2006 +0800

    [POWERPC] Add mpc7448hpc2 device tree source file
    
    This patch adds the mpc7448hpc2 device tree source file.
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1b9a93eb4638dcde0c3af42fd6c05e3911baa7db
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Tue Aug 29 18:13:31 2006 -0500

    [POWERPC] Add MPC8349E MDS device tree source file to arch/powerpc/boot/dts
    
    Add MPC8349E MDS device tree source file to arch/powerpc/boot/dts
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f1f17716d13bfb709809a3f5c84bda105b646b9e
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Fri Aug 25 11:59:22 2006 -0500

    [POWERPC] modify mpc83xx platforms to use new IRQ layer
    
    This fixes MPC834x MDS (formerly SYS) and ITX platform code to get IRQ data (including PCI) from the device tree, and to use the new IPIC code.
    
    renamed defconfig (sys -> mds), left one redundant NULL assignment in mpc83xx_pcibios_fixup to keep the compiler happy.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b9f0f1bb2bcaae96dd3267f6bd3ad1ca44a1f5ad
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Fri Aug 25 11:59:07 2006 -0500

    [POWERPC] Adapt ipic driver to new host_ops interface, add set_irq_type to set IRQ sense
    
    This converts ipic code to Benh's IRQ mods.  For the IPIC, IRQ sense values in the device tree equal those in include/linux/irq.h; that's 8 for low assertion (most internal IRQs on mpc83xx), and 2 for high-to-low change.
    
    spinlocks added to [un]mask, ack operations; default handler and type now set in host_map; and redundant condition check eliminated.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bf4152dd7ccb6c060d786200a893dfe30193a07f
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Fri Aug 25 11:58:53 2006 -0500

    [POWERPC] back up old school ipic.[hc] to arch/ppc
    
    Keep from breaking 83xx arch/ppc build.  Back up old school arch/powerpc/sysdev/ipic.[hc] to arch/ppc/syslib.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dc709bd190c130b299ac19d596594256265c042a
Merge: d962995... ea4c07d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Aug 29 15:54:07 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] Do not send Query All EAs SMB when mount option nouser_xattr
      [CIFS] endian errors in lanman protocol support
      [CIFS] Fix oops in cifs_close due to unitialized lock sem and list in
      [CIFS] Fix oops when negotiating lanman and no password specified
      [CIFS]
      [CIFS] Allow cifsd to suspend if connection is lost
      [CIFS] Make midState usage more consistent
      [CIFS] spinlock protect read of last srv response time in timeout path
      [CIFS] Do not time out posix brl requests when using new posix setfileinfo

commit c57d68caeed7bc335e6d35c951a9abae733a580b
Author: Christoph Lameter <clameter@sgi.com>
Date:   Tue Aug 22 19:43:27 2006 -0700

    [IA64] Increase default nodes shift to 10, nr_cpus to 1024
    
    Change both the NODES_SHIFT and the NR_CPUS so that even big machines
    can boot all nodes and processors with a generic kernel.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 986e12fa74c837d7fe5bdfe80666e2e2d46711bd
Author: Russ Anderson <rja@efs.americas.sgi.com>
Date:   Thu Aug 24 11:08:52 2006 -0500

    [IA64] remove redundant local_irq_save() calls from sn_sal.h
    
    sn_change_memprotect() does a local_irq_save() then calls
    ia64_sal_oemcall_nolock() which calls SAL_CALL_NOLOCK()
    which also does a local_irq_save().
    
    This patch removes the redundant local_irq_save() and local_irq_restore()
    calls in sn_change_memprotect() and sn_inject_error().
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d96299537e43681942ea272e00b0e529aa5b5fa4
Merge: 1b8b22f... 737c175...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 28 20:19:55 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial
    
    * master.kernel.org:/home/rmk/linux-2.6-serial:
      [SERIAL] Support for Intashield 2 port PCI serial card

commit 1b8b22f44bc68b066c571ca2b5ab4fda123c15bd
Merge: 60d4684... 260e98e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Aug 28 20:19:16 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3761/1: fix armv4t breakage after adding thumb interworking to userspace helpers
      [ARM] Add Integrator support for glibc outb() and friends
      [ARM] Move prototype for register_isa_ports to asm/io.h
      [ARM] Arrange for isa.c to use named initialisers
      [ARM] 3741/1: remove sa1111.c build warning on non-sa1100 systems
      [ARM] 3760/1: This patch adds timeouts while working with SSP registers. Such timeouts were en
      [ARM] 3758/1: Preserve signalling NaNs in conversion
      [ARM] 3749/3: Correct VFP single/double conversion emulation
      [ARM] 3748/3: Correct error check in vfp_raise_exceptions

commit 260e98edc8ae8ea862c9c222eeffb1a2eeafa7fc
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Aug 28 12:51:20 2006 +0100

    [ARM] 3761/1: fix armv4t breakage after adding thumb interworking to userspace helpers
    
    Patch from Lennert Buytenhek
    
    On armv4t systems, we have always compiled the kernel with -march=armv4
    instead of -march=armv4t, which means that any use of bx will bomb out.
    
    Commit ba9b5d76372dc290b6ca04dad93927a22c2ac49a introduced the use of
    bx in the kernel, which means we need to compile with -march=armv4t on
    armv4t systems now.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 863dab453b869136453944bda63e20b6ed39c5ef
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Aug 28 12:47:05 2006 +0100

    [ARM] Add Integrator support for glibc outb() and friends
    
    Add the necessary call to register_isa_ports() so that glibc knows
    where these are found on Integrator platforms.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1645f20bc4440d6f67f73f570f3cf873b4e37f3c
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Aug 28 12:45:16 2006 +0100

    [ARM] Move prototype for register_isa_ports to asm/io.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7034b0e60a2ccfab4ee2d3a468cb8cad6de3740d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Aug 28 12:44:03 2006 +0100

    [ARM] Arrange for isa.c to use named initialisers
    
    Convert isa.c (the glibc interface for emulating ISA IO) to use
    named initialisers.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 60d4684068ff1eec78f55b5888d0bd2d4cca1520
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 27 20:41:48 2006 -0700

    Linux v2.6.18-rc5

commit 01da5fd83d6b2c5e36b77539f6cbdd8f49849225
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Aug 27 01:24:02 2006 -0700

    [PATCH] Fix tty layer DoS and comment relevant code
    
    Unlike the other tty comment patch this one has code changes.  Specifically
    it limits the queue size for a tty to 64K characters (128Kbytes) worst case
    even if the tty is ignoring tty->throttle.  This is because certain drivers
    don't honour the throttle value correctly, although it is a useful
    safeguard anyway.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af9b897ee639d96b2bd29b65b50cd0a1f2b6d6c9
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Aug 27 01:24:01 2006 -0700

    [PATCH] tty layer comment the locking assumptions and functions somewhat
    
    Doesn't fix them but does show up some interesting areas that need review
    and fixing.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c275a8391d96b49fa135d1e4073d4798b7c6445
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Aug 27 01:24:00 2006 -0700

    [PATCH] cdrom/gdsc: fix printk format warning
    
    Fix printk format warning:
    drivers/cdrom/gscd.c:269: warning: format รขยย%luรขยย expects type รขยยlong unsigned intรขยย, but argument 2 has type รขยยunsigned intรขยย
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38e716aa016dfd8466c11500c56ab7773344fdf7
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sun Aug 27 01:24:00 2006 -0700

    [PATCH] x86: NUMAQ Kconfig fix
    
    When we select NUMA with i386, the system is only X86_NUMAQ or using ACPI.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5ef68da5fda5e095b585ea5ecdd42af3c8695f7
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Aug 27 01:23:58 2006 -0700

    [PATCH] /proc/meminfo: don't put spaces in names
    
    None of the other /proc/meminfo lines have a space in the identifier.  This
    post-2.6.17 addition has the potential to break existing parsers, so use an
    underscore instead (like Committed_AS).
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 513627d7fec6fcb7b3d56ce355cb4d192c76b530
Author: Dave Jones <davej@redhat.com>
Date:   Sun Aug 27 01:23:57 2006 -0700

    [PATCH] fix up lockdep trace in fs/exec.c
    
    This fixes the locking error noticed by lockdep:
    
      =============================================
      [ INFO: possible recursive locking detected ]
      ---------------------------------------------
      init/1 is trying to acquire lock:
       (&sighand->siglock){....}, at: [<c047a78a>] flush_old_exec+0x3ae/0x859
    
      but task is already holding lock:
       (&sighand->siglock){....}, at: [<c047a77a>] flush_old_exec+0x39e/0x859
    
      other info that might help us debug this:
      2 locks held by init/1:
       #0:  (tasklist_lock){..--}, at: [<c047a76a>] flush_old_exec+0x38e/0x859
       #1:  (&sighand->siglock){....}, at: [<c047a77a>] flush_old_exec+0x39e/0x859
    
      stack backtrace:
       [<c04051e1>] show_trace_log_lvl+0x54/0xfd
       [<c040579d>] show_trace+0xd/0x10
       [<c04058b6>] dump_stack+0x19/0x1b
       [<c043b33a>] __lock_acquire+0x773/0x997
       [<c043bacf>] lock_acquire+0x4b/0x6c
       [<c060630b>] _spin_lock+0x19/0x28
       [<c047a78a>] flush_old_exec+0x3ae/0x859
       [<c0498053>] load_elf_binary+0x4aa/0x1628
       [<c0479cab>] search_binary_handler+0xa7/0x24e
       [<c047b577>] do_execve+0x15b/0x1f9
       [<c04022b4>] sys_execve+0x29/0x4d
       [<c0403faf>] syscall_call+0x7/0xb
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4df46240a1312161e3c794f6ace50ef7eb5ff3d7
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sun Aug 27 01:23:56 2006 -0700

    [PATCH] lockdep: annotate reiserfs
    
    reiserfs seems to have another locking level layer for the i_mutex due to the
    xattrs-are-a-directory thing.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36e8e5783297fbb83bdebe7e245ef659958f23cb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sun Aug 27 01:23:56 2006 -0700

    [PATCH] lockdep: annotate idescsi_pc_intr()
    
    idescsi_pc_intr() uses local_irq_enable() in IRQ context: annotate it.
    
    (this has no effect on kernels with lockdep disabled.  On kernels with lockdep
    enabled this means that we wont actually disable interrupts, and the warning
    message will go away as well.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e54bdaa9cf55d7e74409ea288b705c144b2627e
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sun Aug 27 01:23:55 2006 -0700

    [PATCH] CONFIG_ACPI_SRAT NUMA build fix
    
      In file included from include/asm/mmzone.h:18,
                       from include/linux/mmzone.h:439,
      <snip>
      include/asm/srat.h:31:2: error: #error CONFIG_ACPI_SRAT not defined, and srat.h header has been included
      make[1]: *** [arch/i386/kernel/asm-offsets.s] Error 1
    
    This can happen with CONFIG_NUMA && !CONFIG_ACPI && !CONFIG_X86_NUMAQ
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d673a5a4775d3dc565b6668ed75fd2db2ede624
Author: Nick Piggin <npiggin@suse.de>
Date:   Sun Aug 27 01:23:54 2006 -0700

    [PATCH] cpuset: oom panic fix
    
    cpuset_excl_nodes_overlap always returns 0 if current is exiting.  This caused
    customer's systems to panic in the OOM killer when processes were having
    trouble getting memory for the final put_user in mm_release.  Even though
    there were lots of processes to kill.
    
    Change to returning 1 in this case.  This achieves parity with !CONFIG_CPUSETS
    case, and was observed to fix the problem.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36920e069a87c6fccffbc0ec5e74985d94d3bcc4
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sun Aug 27 01:23:52 2006 -0700

    [PATCH] register_one_node() compile fix
    
    register_one_node()'s should be defined under CONFIG_NUMA=n.
    fixes following bug.
    
      CC	  init/version.o
      LD	  init/built-in.o
      LD	  .tmp_vmlinux1
      mm/built-in.o: In function `add_memory': undefined reference to `register_one_node'
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Acked-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ea817398e68dfa25612229fda7fc74580cf915fb
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Sun Aug 27 01:23:52 2006 -0700

    [PATCH] Manage jbd allocations from its own slabs
    
    JBD currently allocates commit and frozen buffers from slabs.  With
    CONFIG_SLAB_DEBUG, its possible for an allocation to cross the page
    boundary causing IO problems.
    
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=200127
    
    So, instead of allocating these from regular slabs - manage allocation from
    its own slabs and disable slab debug for these slabs.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c4d50f7b39cc58f1064b93a61ad617451ae41df
Author: Paul Jackson <pj@sgi.com>
Date:   Sun Aug 27 01:23:51 2006 -0700

    [PATCH] cpuset: top_cpuset tracks hotplug changes to cpu_online_map
    
    Change the list of cpus allowed to tasks in the top (root) cpuset to
    dynamically track what cpus are online, using a CPU hotplug notifier.  Make
    this top cpus file read-only.
    
    On systems that have cpusets configured in their kernel, but that aren't
    actively using cpusets (for some distros, this covers the majority of
    systems) all tasks end up in the top cpuset.
    
    If that system does support CPU hotplug, then these tasks cannot make use
    of CPUs that are added after system boot, because the CPUs are not allowed
    in the top cpuset.  This is a surprising regression over earlier kernels
    that didn't have cpusets enabled.
    
    In order to keep the behaviour of cpusets consistent between systems
    actively making use of them and systems not using them, this patch changes
    the behaviour of the 'cpus' file in the top (root) cpuset, making it read
    only, and making it automatically track the value of cpu_online_map.  Thus
    tasks in the top cpuset will have automatic use of hot plugged CPUs allowed
    by their cpuset.
    
    Thanks to Anton Blanchard and Nathan Lynch for reporting this problem,
    driving the fix, and earlier versions of this patch.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Cc: Nathan Lynch <ntl@pobox.com>
    Cc: Anton Blanchard <anton@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6394cca54894f6a9bcf927ab78d28985944298ff
Author: Neil Brown <neilb@suse.de>
Date:   Sun Aug 27 01:23:50 2006 -0700

    [PATCH] md: fix recent breakage of md/raid1 array checking
    
    A recent patch broke the ability to do a user-request check of a raid1.
    This patch fixes the breakage and also moves a comment that was dislocated
    by the same patch.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84692195969b83f0ba57dc33ecf73e6c124dd186
Author: Neil Brown <neilb@suse.de>
Date:   Sun Aug 27 01:23:49 2006 -0700

    [PATCH] md: avoid backward event updates in md superblock when degraded.
    
    If we
      - shut down a clean array,
      - restart with one (or more) drive(s) missing
      - make some changes
      - pause, so that they array gets marked 'clean',
    the event count on the superblock of included drives
    will be the same as that of the removed drives.
    So adding the removed drive back in will cause it
    to be included with no resync.
    
    To avoid this, we only update the eventcount backwards when the array
    is not degraded.  In this case there can (should) be no non-connected
    drives that we can get confused with, and this is the particular case
    where updating-backwards is valuable.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45f17e0c2ae05c133a348452690de0e5fa863293
Author: Masoud Asgharifard Sharbiani <masouds@google.com>
Date:   Sun Aug 27 01:23:48 2006 -0700

    [PATCH] eventpoll.c compile fix
    
    Fix two compile failures in eventpoll.c code which would happen if
    DEBUG_EPOLL is bigger than zero.
    
    Signed-off-by: Masoud Sharbiani <masouds@google.com>
    Cc: Davide Libenzi <davidel@xmailserver.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e88d78f6ba50d773096e26ca3f5c2464853c682d
Author: Tom Zanussi <zanussi@us.ibm.com>
Date:   Sun Aug 27 01:23:47 2006 -0700

    [PATCH] Documentation update for relay interface
    
    Here's updated documentation for the relay interface, rewritten to match
    the relayfs->relay changes.  It also moves relayfs.txt to relay.txt in the
    process.
    
    It includes the changes to relayfs.txt previously posted by Randy Dunlap,
    thanks for those.
    
    The relay-apps examples have also been updated to match, and can be found
    on the sourceforge relayfs website.
    
    Signed-off-by: Tom Zanussi <zanussi@us.ibm.com>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4edb9a143e31d2e191c199262226e1a5923ff8f7
Author: Yingchao Zhou <yingchao.zhou@gmail.com>
Date:   Sun Aug 27 01:23:46 2006 -0700

    [PATCH] Remove redundant up() in stop_machine()
    
    An up() is called in kernel/stop_machine.c on failure, and also in the
    caller (unconditionally).
    
    Signed-off-by: Zhou Yingchao <yingchao.zhou@gmail.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecdc63948763586e101108dfe1ba316ec069fe39
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Aug 27 01:23:46 2006 -0700

    [PATCH] ufs: truncate correction
    
    1) When we allocated last fragment in ufs_truncate, we read page, check
       if block mapped to address, and if not trying to allocate it.  This is
       wrong behaviour, fragment may be NOT allocated, but mapped, this
       happened because of "block map" function not checked allocated fragment
       or not, it just take address of the first fragment in the block, add
       offset of fragment and return result, this is correct behaviour in
       almost all situation except call from ufs_truncate.
    
    2) Almost all implementation of UFS, which I can investigate have such
       "defect": if you have full disk, and try truncate file, for example 3GB
       to 2MB, and have hole in this region, truncate return -ENOSPC.  I tried
       evade from this problem, but "block allocation" algorithm is tied to
       right value of i_lastfrag, and fix of this corner case may slow down of
       ordinaries scenarios, so this patch makes behavior of "truncate"
       operations similar to what other UFS implementations do.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c37336b078ba9d2ff38c535b194996a7ad6e69f8
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Aug 27 01:23:45 2006 -0700

    [PATCH] ufs: write to hole in big file
    
    On UFS, this scenario:
    	open(O_TRUNC)
    	lseek(1024 * 1024 * 80)
    	write("A")
    	lseek(1024 * 2)
    	write("A")
    
    may cause access to invalid address.
    
    This happened because of "goal" is calculated in wrong way in block
    allocation path, as I see this problem exists also in 2.4.
    
    We use construction like this i_data[lastfrag], i_data array of pointers to
    direct blocks, indirect and so on, it has ceratain size ~20 elements, and
    lastfrag may have value for example 40000.
    
    Also this patch fixes related to handling such scenario issues, wrong
    zeroing metadata, in case of block(not fragment) allocation, and wrong goal
    calculation, when we allocate block
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08fb306fe63d98eb86e3b16f4cc21816fa47f18e
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Aug 27 01:23:44 2006 -0700

    [PATCH] ext3 filesystem bogus ENOSPC with reservation fix
    
    To handle the earlier bogus ENOSPC error caused by filesystem full of block
    reservation, current code falls back to non block reservation, starts to
    allocate block(s) from the goal allocation block group as if there is no
    block reservation.
    
    Current code needs to re-load the corresponding block group descriptor for
    the initial goal block group in this case.  The patch fixes this.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 607eb266aea9dd2abe515985e12c5cd8b32546e8
Author: Andries Brouwer <Andries.Brouwer@cwi.nl>
Date:   Sun Aug 27 01:23:43 2006 -0700

    [PATCH] ext2: prevent div-by-zero on corrupted fs
    
    Mounting an ext2 filesystem with zero s_inodes_per_group will cause a
    divide error.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5fb09fa3392ad43fbcfc2f4580752f383ab5996
Author: Andries Brouwer <Andries.Brouwer@cwi.nl>
Date:   Sun Aug 27 01:23:42 2006 -0700

    [PATCH] Fix for minix crash
    
    Mounting a (corrupt) minix filesystem with zero s_zmap_blocks
    gives a spectacular crash on my 2.6.17.8 system, no doubt
    because minix/inode.c does an unconditional
    	minix_set_bit(0,sbi->s_zmap[0]->b_data);
    
    [akpm@osdl.org: make labels conistent while we're there]
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb8d81e47783f9198f3d6248bd4c0d16a1d5424e
Author: Jonathan McDowell <noodles@earth.li>
Date:   Sun Aug 27 01:23:41 2006 -0700

    [PATCH] MTD NAND: Fix ams-delta after core conversion
    
    The recent hwctrl core conversion for MTD NAND devices broke the Amstrad
    Delta driver.  This fixes it up and uses the existing control line defines
    rather than unclear magic numbers.
    
    Signed-off-by: Jonathan McDowell <noodles@earth.li>
    Acked-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d015baebba44613ef59ddffeae2114fa4ede7104
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Aug 27 01:23:40 2006 -0700

    [PATCH] futex_find_get_task(): remove an obscure EXIT_ZOMBIE check
    
    futex_find_get_task:
    
    	if (p->state == EXIT_ZOMBIE || p->exit_state == EXIT_ZOMBIE)
    		return NULL;
    
    I can't understand this.  First, p->state can't be EXIT_ZOMBIE.  The
    ->exit_state check looks strange too.  Sub-threads or tasks whose ->parent
    ignores SIGCHLD go directly to EXIT_DEAD state (I am ignoring a ptrace
    case).  Why EXIT_DEAD tasks should be ok?  Yes, EXIT_ZOMBIE is more
    important (a task may stay zombie for a long time), but this doesn't mean
    we should explicitely ignore other EXIT_XXX states.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 533475d3d48eb839be2b57f6b020150abae91063
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Date:   Sun Aug 27 01:23:39 2006 -0700

    [PATCH] vcsa attribute bits -> ioctl(VT_GETHIFONTMASK)
    
    When reading /dev/vcsa while a font with more than 256 characters is
    loaded, one of the attribute bits records the 9th bit of the character.
    But depending on the console driver (vgacon or fbcon for instance), that's
    bit 3 or bit 0.  And there is no way for userland to know that, thus no way
    for userland to safely grab the screen content.  So here is a (tested)
    patch:
    
    Add a VT_GETHIFONTMASK ioctl for knowing which bit is the 9th bit for VC
    text (vc_hi_font_mask field of the vc_data structure).
    
    Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8cf368944807e29b16b24588a2a35c829bc9d9a
Author: Paul A. Clarke <pc@us.ibm.com>
Date:   Sun Aug 27 01:23:37 2006 -0700

    [PATCH] matroxfb: fix jittery display on non-ppc systems
    
    I wish I was happier about this patch.  It'll serve as a placeholder for
    the moment.  I'm still trying to get a G550 working in order to even
    reproduce the problem this patch introduces.  I find that the G450 has
    jitter even without this patch, so it won't show me what the patch changed.
     At this point, I'll continue trying to get the G550 to work, and in
    parallel work with the G450 to work out the kinks.
    
    The patch is below.
    
    Set XDVICLKCTRL only on PPC, as doing this apparently introduces jitter on
    the G550, at least on x86 architectures.
    
    Signed-off-by: Paul A. Clarke <pc@us.ibm.com>
    Signed-off-by: Petr Vandrovec <petr@vandrovec.name>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01cfaf0d12ae5fa092cc916ca4066ee1598e857d
Author: Dirk Eibach <eibach@gdsys.de>
Date:   Sun Aug 27 01:23:36 2006 -0700

    [PATCH] char/moxa.c: fix endianess and multiple-card issues
    
    While testing Moxa C218T/PCI on PowerPC 405EP I found that loading firmware
    using the linux kernel driver fails because calculation of the checksum is
    not endianess independent in the original code.
    
    After I fixed this I found that uploading firmware in a system with
    multiple cards causes a kernel oops.  I had a look in the recent moxa
    sources and found that they do some kind of locking there.  Applying this
    lock fixed the problem.
    
    Alan sayeth:
    
      Checksum changes are clearly correct.  Other changes is an improvement but
      not I think enough to handle malicious firmware attacks.  That said such an
      attacker has CAP_SYS_RAWIO anyway so that part is irrelevant except for
      neatness.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Dirk Eibach <eibach@gdsys.de>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0cc621f52a4dea10c34eeed6eb4e36b26db63dc
Author: Dave Jones <davej@redhat.com>
Date:   Sun Aug 27 01:23:35 2006 -0700

    [PATCH] cpufreq: acpi-cpufreq: Ignore failure from acpi_cpufreq_early_init_acpi
    
    Ignore the return value of early_init_acpi(), as it can give false error
    messages.  If there is something really wrong, then register_driver will
    fail cleanly with EINVAL later.
    
    [ background: modprobe acpi-cpufreq on systems not capable of speed-scaling
      started failing with 'invalid argument', where previously it would only
      ever -ENODEV
    
      I'm not 100% happy with the solution. It'd be better to handle
      failure properly, but this is a low-impact change for 2.6.18
      We can always revisit doing this better in .19   --davej.]
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8986c241dfd54d51c9eff967129a550ae230144
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Sun Aug 27 01:23:34 2006 -0700

    [PATCH] revert "Drop tasklist lock in do_sched_setscheduler"
    
    sched_setscheduler() looks at ->signal->rlim[].  It is unsafe do
    dereference ->signal unless tasklist_lock or ->siglock is held (or p ==
    current).  We pin the task structure, but this can't prevent from
    release_task()->__exit_signal() which sets ->signal = NULL.
    
    Restore tasklist_lock across the setscheduler call.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb3e0fe3a5dabdc5eda50b825acb23bdfa2d1d55
Author: Thomas Meyer <thomas@m3y3r.de>
Date:   Sun Aug 27 01:23:33 2006 -0700

    [PATCH] x86: Fix dmi detection of MacBookPro and iMac
    
    Commit b64ef8afa58f397e1eaba2bd9ecaa6812064d464 ("[PATCH] add imacfb
    documentation and detection") contained a wrong DMI_MATCH.
    
    Signed-off-by: Thomas Meyer <thomas@m3y3r.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fd5aecc5d32882f8e29b14370e9ce2520e7e56f
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sun Aug 27 01:23:33 2006 -0700

    [PATCH] mtd corruption fix
    
    Read the return value before we release the nand device otherwise the
    value can become corrupted by another user of chip->ops, ultimately
    resulting in filesystem corruption.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Acked-by: Josh Boyer <jwboyer@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6946bd636364effce06ea46fe8f8cd6e2edb004e
Author: Peter Zijlstra <a.p.zijlstra@chello.nl>
Date:   Sun Aug 27 01:23:31 2006 -0700

    [PATCH] lockdep: fix blkdev_open() warning
    
    On Wed, 2006-08-09 at 07:57 +0200, Rolf Eike Beer wrote:
    > =============================================
    > [ INFO: possible recursive locking detected ]
    > ---------------------------------------------
    > parted/7929 is trying to acquire lock:
    >  (&bdev->bd_mutex){--..}, at: [<c105eb8d>] __blkdev_put+0x1e/0x13c
    >
    > but task is already holding lock:
    >  (&bdev->bd_mutex){--..}, at: [<c105eec6>] do_open+0x72/0x3a8
    >
    > other info that might help us debug this:
    > 1 lock held by parted/7929:
    >  #0:  (&bdev->bd_mutex){--..}, at: [<c105eec6>] do_open+0x72/0x3a8
    > stack backtrace:
    >  [<c1003aad>] show_trace_log_lvl+0x58/0x15b
    >  [<c100495f>] show_trace+0xd/0x10
    >  [<c1004979>] dump_stack+0x17/0x1a
    >  [<c102dee5>] __lock_acquire+0x753/0x99c
    >  [<c102e3b0>] lock_acquire+0x4a/0x6a
    >  [<c1204501>] mutex_lock_nested+0xc8/0x20c
    >  [<c105eb8d>] __blkdev_put+0x1e/0x13c
    >  [<c105ecc4>] blkdev_put+0xa/0xc
    >  [<c105f18a>] do_open+0x336/0x3a8
    >  [<c105f21b>] blkdev_open+0x1f/0x4c
    >  [<c1057b40>] __dentry_open+0xc7/0x1aa
    >  [<c1057c91>] nameidata_to_filp+0x1c/0x2e
    >  [<c1057cd1>] do_filp_open+0x2e/0x35
    >  [<c1057dd7>] do_sys_open+0x38/0x68
    >  [<c1057e33>] sys_open+0x16/0x18
    >  [<c1002845>] sysenter_past_esp+0x56/0x8d
    
    OK, I'm having a look here; its all new to me so bear with me.
    
    blkdev_open() calls
      do_open(bdev, ...,BD_MUTEX_NORMAL) and takes
        mutex_lock_nested(&bdev->bd_mutex, BD_MUTEX_NORMAL)
    
    then something fails, and we're thrown to:
    
    out_first: where
        if (bdev != bdev->bd_contains)
          blkdev_put(bdev->bd_contains) which is
            __blkdev_put(bdev->bd_contains, BD_MUTEX_NORMAL) which does
              mutex_lock_nested(&bdev->bd_contains->bd_mutex, BD_MUTEX_NORMAL) <--- lockdep trigger
    
    When going to out_first, dbev->bd_contains is either bdev or whole, and
    since we take the branch it must be whole. So it seems to me the
    following patch would be the right one:
    
    [akpm@osdl.org: compile fix]
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Acked-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7334bb4ae931159384acf168eacb0d5d6e0d083c
Author: Danny Tholen <obiwan@mailmij.org>
Date:   Sun Aug 27 01:23:29 2006 -0700

    [PATCH] 1394: fix for recently added firewire patch that breaks things on ppc
    
    Recently a patch was added for preliminary suspend/resume handling on
    !PPC_PMAC.  However, this broke both suspend and firewire on powerpc
    because it saves the pci state after the device has already been disabled.
    
    This moves the save state to before the pmac specific code.
    
    Signed-off-by: Danny Tholen <obiwan@mailmij.org>
    Cc: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Ben Collins <bcollins@ubuntu.com>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2e0b56316fa90e137802fdad6a7c6a9b85c86c3
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Aug 27 01:23:28 2006 -0700

    [PATCH] Fix docs for fs.suid_dumpable
    
    Sergey Vlasov noticed that there is not kernel.suid_dumpable, but
    fs.suid_dumpable.
    
    How KERN_SETUID_DUMPABLE ended up in fs_table[]? Hell knows...
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc36e7f124da139a819ad316c39d9dbcb5ba1897
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Aug 27 01:23:27 2006 -0700

    [PATCH] tty: remove bogus call to cdev_del()
    
    When cdev_add() failed there is no reason to call cdev_del().
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 641741e010b615bae417c876a21d17dbd616241f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Aug 27 01:23:27 2006 -0700

    [PATCH] rtc-s3c.c: fix time setting checks
    
    Fix the year check on setting the time with the S3C24XX RTC driver.  Also
    move the debug to before the set to see what is going on if it does fail.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6b5bce3571e496504a89ee575d32101e0a98b93
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sun Aug 27 01:23:25 2006 -0700

    [PATCH] swsusp: Fix swap_type_of
    
    There is a bug in mm/swapfile.c#swap_type_of() that makes swsusp only be
    able to use the first active swap partition as the resume device.  Fix it.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Hugh Dickins <hugh@veritas.com>
    Acked-by: Pavel Machek <pavel@suse.cz>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c06aad854fdb9da38fcc22dccfe9d72919453e43
Author: Daniel Kobras <kobras@linux.de>
Date:   Sun Aug 27 01:23:24 2006 -0700

    [PATCH] dm: Fix deadlock under high i/o load in raid1 setup.
    
    On an nForce4-equipped machine with two SATA disk in raid1 setup using dmraid,
    we experienced frequent deadlock of the system under high i/o load.  'cat
    /dev/zero > ~/zero' was the most reliable way to reproduce them: Randomly
    after a few GB, 'cp' would be left in 'D' state along with kjournald and
    kmirrord.  The functions cp and kjournald were blocked in did vary, but
    kmirrord's wchan always pointed to 'mempool_alloc()'.  We've seen this pattern
    on 2.6.15 and 2.6.17 kernels.  http://lkml.org/lkml/2005/4/20/142 indicates
    that this problem has been around even before.
    
    So much for the facts, here's my interpretation: mempool_alloc() first tries
    to atomically allocate the requested memory, or falls back to hand out
    preallocated chunks from the mempool.  If both fail, it puts the calling
    process (kmirrord in this case) on a private waitqueue until somebody refills
    the pool.  Where the only 'somebody' is kmirrord itself, so we have a
    deadlock.
    
    I worked around this problem by falling back to a (blocking) kmalloc when
    before kmirrord would have ended up on the waitqueue.  This defeats part of
    the benefits of using the mempool, but at least keeps the system running.  And
    it could be done with a two-line change.  Note that mempool_alloc() clears the
    GFP_NOIO flag internally, and only uses it to decide whether to wait or return
    an error if immediate allocation fails, so the attached patch doesn't change
    behaviour in the non-deadlocking case.  Path is against current git
    (2.6.18-rc4), but should apply to earlier versions as well.  I've tested on
    2.6.15, where this patch makes the difference between random lockup and a
    stable system.
    
    Signed-off-by: Daniel Kobras <kobras@linux.de>
    Acked-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a654518e1b774b8e8f74a819fd12a931e7672c9
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Aug 27 01:23:22 2006 -0700

    [PATCH] drivers/rtc: fix rtc-s3c.c
    
    In the cleanups of drivers/rtc/s3c-rtc.c, the base address for the
    registers got broken.  This patch fixes that by ensuring the readb/writeb
    are all prefixed with the base returned from ioremap()ing the registers.
    
    Also fix check for valid year range, which was the wrong way around.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 416112f818afcc08aeaba79ebba899aee5ddf571
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Aug 27 13:09:14 2006 +0100

    [ARM] 3741/1: remove sa1111.c build warning on non-sa1100 systems
    
    Patch from David Brownell
    
    Remove buld warning when building sa1111 on non-sa1100 platforms (e.g. PXA).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8f1bf8743c459399685f5df43021acd156548c22
Author: Paul Sokolovsky <pmiscml@gmail.com>
Date:   Sun Aug 27 12:54:56 2006 +0100

    [ARM] 3760/1: This patch adds timeouts while working with SSP registers. Such timeouts were en
    
    Patch from Paul Sokolovsky
    
    This patch adds timeouts while working with SSP registers. Such
    timeouts were envisioned by docstrings in ssp.c, but were not
    implemented. There were actual lockups while accessing
    touchscreen for iPaqs h1910, h4000 due to lack of the timeouts.
    This is updated version of previously submitted patch: 3738/1.
    
    Signed-off-by: Paul Sokolovsky <pmiscml@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b53a2b41f156a9c9b62c14502037cbc15bc08b54
Author: Daniel Jacobowitz <drow@false.org>
Date:   Sun Aug 27 12:42:14 2006 +0100

    [ARM] 3758/1: Preserve signalling NaNs in conversion
    
    Patch from Daniel Jacobowitz
    
    The fcvtds and fcvtsd instructions were generating a qnan bit pattern
    for both quiet and signalling NaNs.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c29ecac18cb740ae845db14963ac586c53962453
Author: Daniel Jacobowitz <drow@false.org>
Date:   Sun Aug 27 12:42:10 2006 +0100

    [ARM] 3749/3: Correct VFP single/double conversion emulation
    
    Patch from Daniel Jacobowitz
    
    The fcvtsd/fcvtds emulation was left behind when the numbering of double
    precision registers was changed from 0-30 to 0-15.  Both conversion
    instructions were writing their results to the wrong register.  Also,
    the conversion instructions should stop after the first element even
    if a vector length is specified.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7c6f25141b88b5e926f9d43932ce668602d611ae
Author: Daniel Jacobowitz <drow@false.org>
Date:   Sun Aug 27 12:42:08 2006 +0100

    [ARM] 3748/3: Correct error check in vfp_raise_exceptions
    
    Patch from Daniel Jacobowitz
    
    The recent fix to hide VFP_NAN_FLAG broke the check in vfp_raise_exceptions;
    it would attempt to deliver an exception mask of 0xfffffeff instead of reporting
    a serious error condition using printk.  Define a safe constant to use for
    an invalid exception maskm, and use it at both ends.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 737c17561fb2c6a72810cca7d7c0b8bdc29bb120
Author: Peter Horton <pdh@colonel-panic.org>
Date:   Sat Aug 26 09:07:36 2006 +0100

    [SERIAL] Support for Intashield 2 port PCI serial card
    
    Here is a patch that adds support for the Instashield IS-200 2 port PCI
    serial card.
    
    Signed-off-by: Peter Horton <pdh@colonel-panic.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66a377c5041e1e399633153c8b500d457281e7c1
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Sat Aug 26 23:40:50 2006 -0700

    [DCCP]: Fix CCID3
    
    This fixes CCID3 to give much closer performance to RFC4342.
    
    CCID3 is meant to alter sending rate based on RTT and loss.
    
    The performance was verified against:
    http://wand.net.nz/~perry/max_download.php
    
    For example I tested with netem and had the following parameters:
    Delayed Acks 1, MSS 256 bytes, RTT 105 ms, packet loss 5%.
    
    This gives a theoretical speed of 71.9 Kbits/s. I measured across three
    runs with this patch set and got 70.1 Kbits/s. Without this patchset the
    average was 232 Kbits/s which means Linux can't be used for CCID3 research
    properly.
    
    I also tested with netem turned off so box just acting as router with 1.2
    msec RTT. The performance with this is the same with or without the patch
    at around 30 Mbit/s.
    
    Signed off by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3a13813e6effcfad5910d47b15b724621b50b878
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sat Aug 26 20:28:30 2006 -0700

    [BRIDGE] netfilter: memory corruption fix
    
    The bridge-netfilter code will overwrite memory if there is not
    headroom in the skb to save the header.  This first showed up when
    using Xen with sky2 driver that doesn't allocate the extra space.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8dbc16033e35c7443cd56cb5ba308bb19cb7b469
Merge: 81a42d2... 80193ae...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Aug 26 20:18:49 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [DCCP]: Introduce dccp_rx_hist_find_entry
      [DCCP]: Introduces follows48 function
      [DCCP]: Update contact details and copyright
      [DCCP]: Fix typo
      [IPV6]: Segmentation offload not set correctly on TCP children
      [CONNECTOR]: Add userspace example code into Documentation/connector/

commit 80193aee18bc862e284ba18504f3a3e14706a997
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Sat Aug 26 19:07:36 2006 -0700

    [DCCP]: Introduce dccp_rx_hist_find_entry
    
    This adds a new function dccp_rx_hist_find_entry.
    
    Signed off by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 837d107cd101fbf734e9ea2bbb5c7336a329e432
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Sat Aug 26 19:06:42 2006 -0700

    [DCCP]: Introduces follows48 function
    
    This adds a new function to see if two sequence numbers follow each
    other.
    
    Signed off by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6bccd357343e98db9e1fd0d487f4f924e1a7921
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Sat Aug 26 19:01:30 2006 -0700

    [DCCP]: Update contact details and copyright
    
    Just updating copyright and contacts
    
    Signed off by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f3166c07175c1639687288006aeabed363a921f3
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Sat Aug 26 19:01:03 2006 -0700

    [DCCP]: Fix typo
    
    This fixes a small typo in net/dccp/libs/packet_history.c
    
    Signed off by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 59eed279c5daa88d95e429782ddb8ef87e52c44b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Aug 25 15:55:43 2006 -0700

    [IPV6]: Segmentation offload not set correctly on TCP children
    
    TCP over IPV6 would incorrectly inherit the GSO settings.
    This would cause kernel to send Tcp Segmentation Offload packets for
    IPV6 data to devices that can't handle it. It caused the sky2 driver
    to lock http://bugzilla.kernel.org/show_bug.cgi?id=7050
    and the e1000 would generate bogus packets. I can't blame the
    hardware for gagging if the upper layers feed it garbage.
    
    This was a new bug in 2.6.18 introduced with GSO support.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 897522ea1c20691b6a65f32f03ae4e77e508b31c
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Fri Aug 25 00:52:06 2006 -0700

    [CONNECTOR]: Add userspace example code into Documentation/connector/
    
    I was asked several times to include userspace example code into
    Documentation, so if there is no policy against it, consider attached patch
    for 2.6.18. This program works with included Documentation/connector/cn_test.c
    connector module.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 81a42d298d8bd1b96be4bd459494f25fdd99b594
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Fri Aug 25 15:58:57 2006 -0700

    [DISKLABEL] SUN: Fix signed int usage for sector count
    
    The current sun disklabel code uses a signed int for the sector count.
    When partitions larger than 1 TB are used, the cast to a sector_t causes
    the partition sizes to be invalid:
    
     # cat /proc/paritions | grep sdan
       66   112 2146435072 sdan
       66   115 9223372036853660736 sdan3
       66   120 9223372036853660736 sdan8
    
    This patch switches the sector count to an unsigned int to fix this.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5fec811e99bb6f537e67b6bcbe9fe6505aa8a114
Author: Krzysztof Helt <krzysztof.h1@wp.pl>
Date:   Fri Aug 25 16:22:21 2006 -0700

    [SPARC]: Small smp cleanup.
    
    It moves the smp_procesors_ready variable to sun4d_smp.c only.
    
    Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a23b423ec0573ead85e2c92f2a5df5d4bf47e26b
Author: Krzysztof Helt <krzysztof.h1@wp.pl>
Date:   Fri Aug 25 00:46:02 2006 -0700

    [SPARC]: enabling of the 2nd CPU in 2.6.18-rc4
    
    smp_setup_cpu_possible_map() needs to run after paging_init()
    so that the in-kernel device tree is setup.
    
    Signed-off-by: Krzysztof Helt <krzysztof.h1@wp.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 94918ff68a7c78fdd3241d13e18444ef80b8ff4a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Aug 14 11:40:46 2006 -0400

    [PATCH] unusual_devs update for UCR-61S2B
    
    The existing unusual_devs entry for the UCR-61S2B appears to have too
    wide a revision range.  It matches at least one device that doesn't
    respond to the initialization sequence.  Perhaps the sequence needs to
    be updated, or perhaps something else can be done.  For now, this patch
    (as764) restricts the range to include only the revision mentioned in
    the original comment.
    
    This resolves (for now!) Bugzilla entry #6950.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit be729523369ec7825bde4a0e774ee7932e9d3dff
Author: Tomasz Kazmierczak <tomek.fizyk@op.pl>
Date:   Fri Aug 18 23:43:29 2006 +0200

    [PATCH] USB: pl2303: removed support for OTi's DKU-5 clone cable
    
    This patch removes support for a clone of Nokia DKU-5 cable made by Ours
    Technology Inc, as it turned out that the cable does not use the pl2303
    chip, but OTI-6858 chip which is not compatible with the pl2303.
    
    Signed-off-by: Tomasz Kazmierczak <tomek.fizyk@op.pl>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b93b58eea81beacac55770dd39e34fbffdc36000
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Aug 14 17:32:51 2006 -0700

    [PATCH] USB: fix bug in cypress_cy7c63.c driver
    
    This was pointed out by Adrian Bunk <bunk@stusta.de>, as found by the Coverity Checker.
    
    Cc: Adrian Bunk <bunk@stusta.de>
    Cc: Oliver Bock <o.bock@fh-wolfenbuettel.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 39ba487fe22a63b3df7c543c82d01db0f0fed700
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Tue Aug 15 10:57:16 2006 +0200

    [PATCH] PCI: kerneldoc correction in pci-driver
    
    Removes an unused kerneldoc entry from pci_match_device and
    put the others into correct order.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cc702c2c5e5ab51e1b0d3386d447e7b1772879ee
Author: Scott Murray <scottm@somanetworks.com>
Date:   Tue Aug 22 19:55:57 2006 -0400

    [PATCH] CPCI hotplug: fix resource assignment
    
    Here is a patch against the CPCI hotplug core to fix up PCI resource
    assignment such that things will actually work when a hot inserted
    device is enabled.  I mentioned this patch to you way back in April at
    ELC, but am only now out from under things enough to clean it up and
    submit it.  I've basically cribbed the corresponding code from
    shpchp_pci.c, so there are no big surprises.  If it's still possible, I
    wouldn't mind this going into 2.6.18, but it wouldn't be the end of the
    world if it went into 2.6.19.
    
    Signed-off-by: Scott Murray <scottm@somanetworks.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 65ae4dddbb56c7415c31e9aae0b3811cb583bbea
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Tue Aug 22 07:29:10 2006 -0700

    [PATCH] PCI: fix ICH6 quirks
    
    - add the ICH6(R) LPC to the ICH6 ACPI quirks.  currently only the ICH6-M
      is handled.  [ PCI_DEVICE_ID_INTEL_ICH6_1 is the ICH6-M LPC, ICH6_0 is
      the ICH6(R) ]
    
    - remove the wrong quirk calling asus_hides_smbus_lpc() for ICH6.  the
      register modified in asus_hides_smbus_lpc() has a different meaning in
      ICH6.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Acked-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd4dc27cff15f77cde218613baa36b855c85ad9f
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Tue Aug 22 07:29:09 2006 -0700

    [PATCH] PCI: i386 mmconfig: don't forget bus number when setting fallback_slots bits
    
    On i386 PCI mmconfig forgets the bus number when setting the fallback_slots
    bits which means fallback to conf1 only works for bus 0.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 954c0b7cd5b9aaa11fb67a0c011fcb5e5897385a
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Tue Aug 22 07:29:08 2006 -0700

    [PATCH] PCI: use PCBIOS as last fallback
    
    there was a change in 2.6.17 which affected the order in which the PCI
    access methods are probed.  this gives regressions on some machines with
    broken BIOS.  the problem is that PCBIOS sometimes reports last bus wrong,
    leaving cardbus non-funcational.  previously those system worked fine with
    direct access.
    
    The patch changes the PCI init code to have PCBIOS as last fallback, yet
    the PCBIOS code still has to run first to set pcibios_last_bus to the value
    reported by the BIOS.  this is needed in case legacy PCI probing
    (arch/i386/pci/legacy.c) is used to detect peer busses.  using direct
    access if available fixes the cardbus problems.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit faf9b616325430422fa13fead88ca7843eb249d6
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Fri Aug 25 10:24:20 2006 +0200

    [PATCH] hwmon: abituguru timeout fixes
    
    This patch contains 2 sets of fixes for the abituguru:
     1) Much improved timeout handling, drasticly reducing the amount of
        timeout errors on some motherboards
     2) Fix the exit paths in the bank1 sensor type detect code to always
        restore the original settings even on an error. Without this our
        special test settings could remain seriously confusing the system
        BIOS's setup menu.
    
    Both are very much related and are must haves, to avoid messing up the
    uguru CMOS settings.
    
    Detailed changes:
    - Much improved timeout / wait for status handling. Many thanks to Sunil
      Kumar, for all his testing, ideas and patches! The code now first busy
      waits, polling the uguru for the expected status as this usually
      succeeds pretty quickly (within 90 reads). To avoid unnecessary CPU burn
      in timeout conditions, the amount of busy waiting has been halved from
      previous versions (120 tries instead of 250). This is not a problem,
      because this version goes to sleep after 120 attemps for 1 jiffy and
      then tries again, it does this sleep and try again 5 times before
      finally giving up. This (almost?) completly removes the timeout errors
      some people have seen regulary. Apparently some older uguru versions
      sometimes are distracted for a (relatively) long time. This solves this.
    - These timeout errors not only occur in the sending address part of
      reading the uguru but also in the wait for read state, so errors in
      this state are now handled as retryable just like send address state
      errors and are only logged and reported to userspace if 3 executive
      tries fail.
    - Fix a very nasty bug in the bank1 sensor type detection code, where it
      would not restore the original settings in any of the error paths!
    - Since not successfully restoring the original settings can seriously
      confuse the system BIOS (hang when entering the relevant setup menu),
      we now try restoring them 3 times before giving up.
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4801bc25f37a969ea773c24d12fd4738541848a1
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Aug 11 22:53:08 2006 +0200

    [PATCH] i2c: tps65010 build fixes
    
    The tps65010.c driver in the main tree never got updated with
    build fixes since the last batch of I2C driver changes; and the
    genirq trigger flags were updated wierdly too.
    
    This also includes a minor tweak to reduce the frequency used to
    poll for unplug-the-AC-power on the TPS chips that don't provide
    relevant IRQs.  It _would_ be nice to sense whether there's even
    a battery, but that'd normally be an HDQ/1-wire interface to a
    smart battery, and such APIs aren't standardized.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f834c755423332a6ff4397fae754029a6a7a8249
Merge: 62250b3... 0db99e3...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Aug 26 13:04:23 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6

commit 0db99e3359234be181590463184b9959059a9ea9
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Sat Aug 26 03:00:22 2006 -0400

    [SCSI] fix scsi_send_eh_cmnd regression
    
    The callers of scsi_send_eh_cmnd are setting the cmnd buffer,
    and then scsi_send_eh_cmnd is copying that updated buffer to
    the old_cmnd variable. Then after the command runs, we end up
    copying that old_cmnd var which has the new cmnd to the scsi
    command buffer. When this command gets recent, all types of fun
    things happen like getting TUR or START_STOP commands with
    data and scatterlists.
    
    This patch made against scsi-rc-fixes, has the callers of
    scsi_send_eh_cmnd pass in the command so scsi_send_eh_cmnd
    can do the right thing. This should go into 2.6.18 since this
    fixes a regression added when we removed some of the scsi_cmnd
    fields and replaced them with local variables.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 15a3758dc9e1c9d862e46acdf607de70c302fa6a
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Aug 23 14:54:56 2006 -0700

    [SCSI] qla2xxx: Update version number to 8.01.07-k1.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 476e8978d9ccacfc911bd42e083dd784ad1465b1
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Aug 23 14:54:55 2006 -0700

    [SCSI] qla2xxx: Properly re-enable EFT support after an ISP abort.
    
    Software must explicitely re-enable extended firmware tracing
    after any ISP abort condition.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9c06938aa458843fb71fa35371f23a3b89317252
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed Aug 23 14:54:54 2006 -0700

    [SCSI] qla2xxx: Correct PLOGI retry logic.
    
    Original code attempts to retry PLOGIs to fcports that are
    FCP_TARGETs only.  If the driver never performed a successful
    PLOGI/PRLI, the port-type would never be assigned, and the
    relogin logic would silently drop the request (and thus the port
    would not be recognized and registered).
    
    The fix is relatively straightforward, drop the FCP_TARGET-only
    check.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b2155d0417df9f2b4c0d396b6530b864d9f08623
Author: Douglas Gilbert <dougg@torque.net>
Date:   Sat Aug 19 00:11:34 2006 -0400

    [SCSI] sg: fix incorrect page problem
    
    There's a problem where sg is executing a ->nopage operation on a
    compound page, it actually calls get_page() on the first page in the
    compound rather than the page which is being mapped.  The fix is to
    select the correct page by indexing into the compound.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 62250b3bb596ffbae17c4b3d865fecd6329ce8b3
Merge: 428a7e3... a969fd5...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 24 22:29:46 2006 -0700

    Merge branch 'fixes' of git://git.linux-nfs.org/pub/linux/nfs-2.6

commit c85c41ad73c6db4cf4cc98c595cc5e2fdbdb53d5
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Aug 17 14:27:57 2006 -0500

    [POWERPC] Use mpc8641hpcn PIC base address from dev tree.
    
    After going through the trouble of setting up the PIC base
    address in the pic@40000 device tree node, use it instead
    of the obsolete hard-coded value.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5dc599c206ad50e1b190edfbc98b7cf8ce361003
Author: Jon Loeliger <jdl@freescale.com>
Date:   Tue Aug 15 16:19:02 2006 -0500

    [POWERPC] Allow MPC8641 HPCN to build with CONFIG_PCI disabled too.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 054389f114fc55d525926b55e82b473b783a7d77
Author: Matt Porter <mporter@embeddedalley.com>
Date:   Fri Aug 4 11:44:01 2006 -0500

    [POWERPC] Fix powerpc 44x_mmu build
    
    The PIN_SIZE definition name changed, update 44x_mmu.c accordingly.
    
    Signed-off-by: Matt Porter <mporter@embeddedalley.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit af07ac276af6eec5111a6567cb7eaf4d222bd332
Author: Matt Porter <mporter@embeddedalley.com>
Date:   Fri Aug 4 11:41:51 2006 -0500

    [POWERPC] Remove flush_dcache_all export
    
    Removes the flush_dcache_all export for non coherent platforms.
    We removed the last in-kernel user of this years ago in arch/ppc
    so it no longer serves a purpose. Plus, it breaks the build
    at the moment.
    
    Signed-off-by: Matt Porter <mporter@embeddedalley.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a969fd5a4e162c4485ae8f3e49d674656a18fa36
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Aug 22 20:06:04 2006 -0400

    VFS: Remove redundant open-coded mode bit checks in open_exec().
    
    The check in open_exec() for inode->i_mode & 0111 has been made
    redundant by the fix to permission().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 1d3741c5d991686699f100b65b9956f7ee7ae0ae commit)

commit 9167b0b9a0ab7907191523f5a0528e3b9c288e21
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Aug 22 20:06:03 2006 -0400

    VFS: Remove redundant open-coded mode bit check in prepare_binfmt().
    
    The check in prepare_binfmt() for inode->i_mode & 0111 is redundant,
    since open_exec() will already have done that.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 822dec482ced07af32c378cd936d77345786572b commit)

commit a343bb7750e6a098909c34f5c5dfddbc4fa40053
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Aug 22 20:06:03 2006 -0400

    VFS: Fix access("file", X_OK) in the presence of ACLs
    
    Currently, the access() call will return incorrect information on NFS if
    there exists an ACL that grants execute access to the user on a regular
    file. The reason the information is incorrect is that the VFS overrides
    this execute access in open_exec() by checking (inode->i_mode & 0111).
    
    This patch propagates the VFS execute bit check back into the generic
    permission() call.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 64cbae98848c4c99851cb0a405f0b4982cd76c1e commit)

commit 16b4289c7460ba9c04af40c574949dcca9029658
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Aug 24 12:27:15 2006 -0400

    NFSv4: Add v4 exception handling for the ACL functions.
    
    This is needed in order to handle any NFS4ERR_DELAY errors that might be
    returned by the server. It also ensures that we map the NFSv4 errors before
    they are returned to userland.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 71c12b3f0abc7501f6ed231a6d17bc9c05a238dc commit)

commit e8896495bca8490a427409e0886d63d05419ec65
Author: David Howells <dhowells@redhat.com>
Date:   Thu Aug 24 15:44:19 2006 -0400

    NFS: Check lengths more thoroughly in NFS4 readdir XDR decode
    
    Check the bounds of length specifiers more thoroughly in the XDR decoding of
    NFS4 readdir reply data.
    
    Currently, if the server returns a bitmap or attr length that causes the
    current decode point pointer to wrap, this could go undetected (consider a
    small "negative" length on a 32-bit machine).
    
    Also add a check into the main XDR decode handler to make sure that the amount
    of data is a multiple of four bytes (as specified by RFC-1014).  This makes
    sure that we can do u32* pointer subtraction in the NFS client without risking
    an undefined result (the result is undefined if the pointers are not correctly
    aligned with respect to one another).
    
    Signed-Off-By: David Howells <dhowells@redhat.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 5861fddd64a7eaf7e8b1a9997455a24e7f688092 commit)

commit 3cedf13af9f7e61aca0dbbd11b601ac93bf93a9f
Author: J. Bruce Fields <bfields@fieldses.org>
Date:   Thu Aug 24 15:44:12 2006 -0400

    NFSv4: increase client-provided nfs4 clientid size
    
    Neil Brown observed that the current limit of 32 bytes isn't enough to hold two
    ip addresses and the rest of the stuff we're putting in it, so it's often
    truncated to the point where it's unlikely to be unique.  This can cause
    spurious CLID_INUSE's from the server.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from fc8c17ec251e984ab3df9182ed097aa5b577c915 commit)

commit 8e037094c414172481c5ce903efdab50ce932343
Author: Chuck Lever <chuck.lever@oracle.com>
Date:   Tue Aug 22 20:06:15 2006 -0400

    SUNRPC: avoid choosing an IPMI port for RPC traffic
    
    Some hardware uses port 664 for its hardware-based IPMI listener.  Teach
    the RPC client to avoid using that port by raising the default minimum port
    number to 665.
    
    Test plan:
    Find a mainboard known to use port 664 for IPMI; enable IPMI; mount NFS
    servers in a tight loop.
    
    Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 58e8cb3a035d22fc386e1c53a5d98c3f219530fb commit)

commit 79558f3610efd7928e8882b2eaca3093b283630e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Aug 22 13:44:32 2006 -0400

    NFS: Fix issue with EIO on NFS read
    
    The problem is that we may be caching writes that would extend the file and
    create a hole in the region that we are reading. In this case, we need to
    detect the eof from the server, ensure that we zero out the pages that
    are part of the hole and mark them as up to date.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 856b603b01b99146918c093969b6cb1b1b0f1c01 commit)

commit 01df9c5e918ae5559f2d96da0143f8bfbb9e6171
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Aug 10 11:58:57 2006 -0400

    LOCKD: Fix a deadlock in nlm_traverse_files()
    
    nlm_traverse_files() is not allowed to hold the nlm_file_mutex while calling
    nlm_inspect file, since it may end up calling nlm_release_file() when
    releaseing the blocks.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from e558d3cde986e04f68afe8c790ad68ef4b94587a commit)

commit 8f8e7a50f450fcb86a5b2ffb94543c57a14f8260
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Aug 14 13:11:15 2006 -0400

    SUNRPC: Fix dentry refcounting issues with users of rpc_pipefs
    
    rpc_unlink() and rpc_rmdir() will dput the dentry reference for you.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from a05a57effa71a1f67ccbfc52335c10c8b85f3f6a commit)

commit 68adb0af51ebccb72ffb14d49cb8121b1afc4259
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Aug 10 17:51:46 2006 -0400

    SUNRPC: rpc_unlink() must check for unhashed dentries
    
    A prior call to rpc_depopulate() by rpc_rmdir() on the parent directory may
    have already called simple_unlink() on this entry.
    Add the same check to rpc_rmdir(). Also remove a redundant call to
    rpc_close_pipes() in rpc_rmdir.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 0bbfb9d20f6437c4031aa3bf9b4d311a053e58e3 commit)

commit dff02cc1a34fcb60904a2c57cb351857cc11219e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Jul 31 14:17:18 2006 -0700

    NFS: clean up rpc_rmdir
    
    Make it take a dentry argument instead of a path
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 648d4116eb2509f010f7f34704a650150309b3e7 commit)

commit 5d67476fff2df6ff12f60b540fd0e74cf2a668f9
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Jul 31 14:11:48 2006 -0700

    SUNRPC: make rpc_unlink() take a dentry argument instead of a path
    
    Signe-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 88bf6d811b01a4be7fd507d18bf5f1c527989089 commit)

commit a634904a7de0d3a0bc606f608007a34e8c05bfee
Author: ASANO Masahiro <masano@tnes.nec.co.jp>
Date:   Tue Aug 22 20:06:02 2006 -0400

    VFS: add lookup hint for network file systems
    
    I'm trying to speeding up mkdir(2) for network file systems.  A typical
    mkdir(2) calls two inode_operations: lookup and mkdir.  The lookup
    operation would fail with ENOENT in common case.  I think it is unnecessary
    because the subsequent mkdir operation can check it.  In case of creat(2),
    lookup operation is called with the LOOKUP_CREATE flag, so individual
    filesystem can omit real lookup.  e.g.  nfs_lookup().
    
    Here is a sample patch which uses LOOKUP_CREATE and O_EXCL on mkdir,
    symlink and mknod.  This uses the gadget for creat(2).
    
    And here is the result of a benchmark on NFSv3.
      mkdir(2) 10,000 times:
        original  50.5 sec
        patched   29.0 sec
    
    Signed-off-by: ASANO Masahiro <masano@tnes.nec.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from fab7bf44449b29f9d5572a5dd8adcf7c91d5bf0f commit)

commit ddeff520f02b92128132c282c350fa72afffb84a
Author: Nikita Danilov <nikita@clusterfs.com>
Date:   Wed Aug 9 13:53:47 2006 -0400

    NFS: Fix a potential deadlock in nfs_release_page
    
    nfs_wb_page() waits on request completion and, as a result, is not safe to be
    called from nfs_release_page() invoked by VM scanner as part of GFP_NOFS
    allocation. Fix possible deadlock by analyzing gfp mask and refusing to
    release page if __GFP_FS is not set.
    
    Signed-off-by: Nikita Danilov <danilov@gmail.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 374d969debfb290bafcb41d28918dc6f7e43ce31 commit)

commit 428a7e3e46a465a6cfe7ccbe15d7ea03a043a95a
Merge: 7bf1348... 8e79a44...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 24 10:54:22 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6

commit a813213d73bb29d6986c3e93669a9cd5f7984364
Author: Paul Jackson <pj@sgi.com>
Date:   Mon Aug 14 22:45:49 2006 -0700

    [IA64] panic if topology_init kzalloc fails
    
    There really is no sense trying to continue if the kzalloc of sysfs_cpus[]
    fails in ia64 topology_init.  The code calling into here doesn't check
    errors very well, and one ends up with a nonobvious boot failure that
    wastes peoples time debugging.
    
    See for example the lkml thread at:
      http://lkml.org/lkml/2006/3/2/215
    
    Since the system is totally dead when this kzalloc fails, not having yet
    even booted, might as well announce one's death boldly and plainly.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8e79a441a4d8a34d64efe93add49b3eefca5cd1c
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Thu Aug 24 13:22:36 2006 +0200

    [S390] dasd PAV enabling.
    
    The subsystem check in the PAV code is incorrect, it enables PAV
    per device instead of per subsystem.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7bf13484d256e21b4bceb07026ac68dbae9dcce5
Merge: 20253de... ac2164d...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 24 01:28:14 2006 -0700

    Merge branch 'upstream-greg' of gregkh@master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit ac2164d5e425fa4755bdbab9641d8dab7239b6f5
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Aug 23 01:00:27 2006 +0900

    [PATCH] sata_via: use old SCR access pattern on vt6420
    
    vt6420 has super-fragile SCR registers which can hang the whole
    machine if accessed with the wrong timings.  This patch makes sata_via
    use SCR registers only during probing and with the same timings as
    before (pre new EH), which is proven to work.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9dd9c16465c82d1385f97d2a245641464fcb7894
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Aug 22 21:15:58 2006 +0900

    [PATCH] ata_piix: implement force_pcs module parameter
    
    This patch implements force_pcs module parameter for ata_piix.  If 1,
    PCS is ignored, 2 honored.  As there seem to be quite a few ICHs w/
    impaired PCS, this option will be useful for cases where the default
    setting doesn't work.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f3745a3f9fa39fa3c62f7d5b8549ee787d2c6848
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Aug 22 21:06:46 2006 +0900

    [PATCH] ata_piix: ignore PCS on ICH5
    
    There have been a number of reports regarding some ICH5s failing to
    detect devices since the PCS handling update.  Analysis shows that
    these problems are caused by bogus PCS values from those controllers.
    
    Before the PCS update, the driver didn't honor PCS regs exactly and
    probed them in many cases PCS reports no device.  Now that PCS is
    honored exactly, these hardware problems are visible.
    
    This patch makes ICH5 ignore PCS.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 20253de9d566f02b82aa1e0c103f73e80619106a
Merge: b727715... 357eb4c...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 23 21:58:48 2006 -0700

    Merge branch 'upstream-greg' of gregkh@master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 357eb4cf75fdb9dbe46b64d50f3670de6a45dc91
Merge: c5ab964... 9b5cce0...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Aug 24 00:41:25 2006 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit c5ab964debe92d0ec7af330f350a3433c1b5b61e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Aug 22 18:55:44 2006 +0100

    [PATCH] spectrum_cs: Fix firmware uploading errors
    
    spectrum_cs: Fix the logic so we error when the device is *not* present!
    
    This fixes firmware upload failures which prevent the driver from
    working (the bug is also present in 2.6.17).
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8d91626636ed9ce8b742edb52ae48f2faefd5864
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Tue Aug 22 10:22:37 2006 -0700

    [PATCH] pcnet32: break in 2.6.18-rc1 identified
    
    A change I made for 2.6.17 and another for 2.6.18 do not work on older
    pcnet32 chips which I do not have access to.  If the chip is a 79C970 or
    79C965, do not try and suspend or check the link status.
    I have tested with a 79C970A, 79C971, 79C972, 79C973, 79C975, 79C976,
    and 79C978.
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9a469abe9c6bab3ce237ee433541931bbd827faf
Author: Joerg Ahrens <joerg@hydrops.han.de>
Date:   Sun Aug 20 21:51:57 2006 +0100

    [PATCH] xirc2ps_cs: Cannot reset card in atomic context
    
    I am using a Xircom CEM33 pcmcia NIC which has occasional hardware problems.
    If the netdev watchdog detects a transmit timeout, do_reset is called which
    msleeps - this is illegal in atomic context.
    
    This patch schedules the timeout handling as a workqueue item.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cb958186ed543d1a4f074ceb1c783fe8b0908437
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Sat Aug 19 19:37:57 2006 +0200

    [PATCH] Signedness issue in drivers/net/3c515.c
    
    while playing with gcc 4.1 -Wextra warnings, I came across this one:
    
    drivers/net/3c515.c:1027: warning: comparison of unsigned expression >= 0 is always true
    
    Since i is unsigned the >= 0 check in the for loop is always true,
    so we might spin there forever unless the if condition triggers.
    Since i is only used in this loop, this patch changes it to
    an integer.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b7277155f8fa89cd5696140b4a93cfb53d0091ff
Merge: ccc712f... c712a9d...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 23 21:11:56 2006 -0700

    Merge branch 'for-linus' of gregkh@master.kernel.org:/pub/scm/linux/kernel/git/dtor/input

commit ccc712fe6b2acbafe9fc31f765a193e3249ca4a1
Merge: 9c63764... c9169f8...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 23 21:08:12 2006 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc

commit 9c637646dafd82370c284ce7fcc8b4ba2546dfb1
Merge: b8b99e8... 834ac73...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 23 18:08:44 2006 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband

commit c9169f8747bb282cbe518132bf7d49755a00b6c1
Author: Adam Litke <agl@us.ibm.com>
Date:   Fri Aug 18 11:22:21 2006 -0700

    [POWERPC] hugepage BUG fix
    
    On Tue, 2006-08-15 at 08:22 -0700, Dave Hansen wrote:
    > kernel BUG in cache_free_debugcheck at mm/slab.c:2748!
    
    Alright, this one is only triggered when slab debugging is enabled.  The
    slabs are assumed to be aligned on a HUGEPTE_TABLE_SIZE boundary.  The free
    path makes use of this assumption and uses the lowest nibble to pass around
    an index into an array of kmem_cache pointers.  With slab debugging turned
    on, the slab is still aligned, but the "working" object pointer is not.
    This would break the assumption above that a full nibble is available for
    the PGF_CACHENUM_MASK.
    
    The following patch reduces PGF_CACHENUM_MASK to cover only the two least
    significant bits, which is enough to cover the current number of 4 pgtable
    cache types.  Then use this constant to mask out the appropriate part of
    the huge pte pointer.
    
    Signed-off-by: Adam Litke <agl@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b8b99e857d0e258b0da17e55466e5142465d35fd
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Aug 23 15:53:39 2006 -0700

    [SERIAL] sunzilog: Mirror the sunsab serial setup bug fix.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0f4184f73d5233214d3225a94fcf1bd4d6678d74
Author: Marc Zyngier <maz@misterjones.org>
Date:   Wed Aug 23 15:50:57 2006 -0700

    [SERIAL] sunsab: Fix E250 console with RSC.
    
    This fixes yet another sunsab problem, when console is set to anything
    but the first port. The console framework calls sunsab_console_setup
    for each port, and we end up setting up a console on a not yet
    discovered port, which leads to an Oops. Instead, defer console setup
    until the requested port is properly initialized. Tested on an E250
    through an RSC console.
    
    Reported by Daniel Smolik <marvin@mydatex.cz>
    
    Signed-off-by: Marc Zyngier <maz@misterjones.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 25848c4e502ec2bb94ee1f3c82709311059d0857
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Aug 23 15:33:07 2006 -0700

    [SCSI] esp: Fix build on SUN4.
    
    Noted by Alexey Dobriyan.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 834ac73d4bc804db8ccb3f2a517e36db5f6bc4bd
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Tue Aug 22 22:45:06 2006 +0300

    IB/mthca: Update HCA firmware revisions
    
    Update the driver's list of HCA firmware revisions to make sure people
    running Sinai firmware older than 1.1.0 get a message suggesting a
    firmware upgrade.  Update the Arbel versions as well while we are at it.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9b5cce07648d059a013444116bd0140b047b25a1
Author: Pavel Roskin <proski@gnu.org>
Date:   Tue Aug 15 21:41:39 2006 -0400

    [PATCH] hostap: Restore antenna selection settings after port reset
    
    Intersil firmware 1.7.4 (and possibly others) loses the antenna
    selection settings when the port is reset.
    
    Signed-off-by: David Acker <dacker@roinet.com>
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 794ccda61c7dc2aa6c66e8ef18a44d865d3c3a7d
Author: Pavel Roskin <proski@gnu.org>
Date:   Tue Aug 15 20:42:20 2006 -0400

    [PATCH] spectrum_cs: Fix incorrect use of pcmcia_dev_present()
    
    This bug was introduced during the PCMCIA API conversion and broke
    spectrum_cs completely.
    
    Tracked down by Fredrik Tolf <fredrik@dolda2000.com>
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d55c4a76f26160482158cd43788dcfc96a320a4f
Author: Li Yang <leoli@freescale.com>
Date:   Wed Aug 23 14:13:08 2006 +0800

    [POWERPC] Fix compile problem without CONFIG_PCI
    
    Compile fails without defining CONFIG_PCI.
    The patch fix this.
    
    [paulus@samba.org: Moved of_irq_pci_swizzle so we only need one #ifdef]
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 87589f08beaec3e1f8a3af0c72406c845f706821
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Aug 23 16:58:39 2006 +1000

    [POWERPC] Correct masks used in emulating some instructions
    
    When we get an illegal instruction exception, we check to see whether
    the instruction is one that we emulate for the user program.  Some of
    the masks we use in checking whether the offending instruction is one
    we care about didn't have the top bit set, which is the MSB of the
    major opcode.  Thus some undefined opcodes could get emulated as other
    (defined but unimplemented) instructions.  This corrects the masks.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit be9633e96a9e33ab97776bb6874244fa4db6987d
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Wed Aug 23 10:20:27 2006 +0800

    [POWERPC] Pass UPIO_TSI flag to 8259 serial driver
    
    The patch passes the UPIO_TSI flag to general 8259 serial driver
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c4342ff92bed26f2e0e3543a9f0fdc5f3a29b8fd
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Wed Aug 23 10:19:50 2006 +0800

    [POWERPC] Update mpc7448hpc2 board irq support using device tree
    
    The patch rewrites mpc7448hpc2 board irq support according to the new
    mpic device tree interface.
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6cdd2bdfb9e2449f1c8a0f729cdf9cfd733dd63f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Aug 23 11:45:12 2006 +1000

    [POWERPC] Fix BootX booting with an initrd
    
    The bootx_init.c trampoline didn't properly add the ramdisk to the
    "reserve map" (list of reserved areas of memory), thus causing all sorts
    of failures when using BootX with an initrd. Also fixes a possible
    problem if the ramdisk is located before the device-tree passed by
    BootX.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5db9fa9593e2ff69f2b95f9d59229dc4faaa564d
Author: Nathan Lynch <ntl@pobox.com>
Date:   Tue Aug 22 20:36:05 2006 -0500

    [POWERPC] Fix gettimeofday inaccuracies
    
    There are two problems in the powerpc gettimeofday code which can
    cause incorrect results to be returned.
    
    The first is that there is a race between do_gettimeofday and the
    timer interrupt:
    
    1. do_gettimeofday does get_tb()
    
    2. decrementer exception on boot cpu which runs timer_recalc_offset,
       which also samples the timebase and updates the do_gtod structure
       with a greater timebase value.
    
    3. do_gettimeofday calls __do_gettimeofday, which leads to the
       negative result from tb_val - temp_varp->tb_orig_stamp.
    
    The second is caused by taking the boot cpu offline, which can cause
    the value of tb_last_jiffy to be increased past the currently
    available timebase, causing the same underflow as above.
    
    [paulus@samba.org - define and use data_barrier() instead of mb().]
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit aa74a30be971c632d734e487df42278b1cf85151
Author: Andy Fleming <afleming@freescale.com>
Date:   Mon Aug 21 14:29:28 2006 -0500

    [POWERPC] Fix FEC node in 8540 ADS dts
    
    * Fixed the FEC node, and its accompanying PHY
    * Fixed a spacing issue in the PIC node
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 343832734fac000d2d276ccc41955daded1265f5
Author: Jon Loeliger <jdl@freescale.com>
Date:   Fri Aug 18 14:30:35 2006 -0500

    [POWERPC] Rewrite the PPC 86xx IRQ handling to use Flat Device Tree
    
    IRQ setup now comes from the Flat Device Tree and use the new generic
    IRQ code.  Fixed the fsl_soc.c IRQ OF interrupt node parsing.
    Removed some unused MPC86xx macro definition.
    
    Signed-off-by: Zhang Wei <wei.zhang@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    (cherry picked from 919fede6edab94cccb3ca8c1c0b32fa62c9369a5 commit)

commit 2654d6385f6cad00cfb8f5087aeb10d0ed781e74
Author: Andy Fleming <afleming@freescale.com>
Date:   Fri Aug 18 18:04:34 2006 -0500

    [POWERPC] Add 85xx DTS files to powerpc
    
    Added the mpc85xx family of dts files to the powerpc tree
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ddd64159eb0d090766eee79b191a974ffdd83a42
Author: Andy Fleming <afleming@freescale.com>
Date:   Thu Aug 17 20:24:48 2006 -0500

    [POWERPC] Fix CDS IRQ handling and PCI code
    
    * Fix IRQ support in the 85xx CDS boards so it uses the new
      generic stuff
    * Fix PCI IRQ mapping to use the device tree
    * Disabled i8259 support to allow the CDS to boot.  This will be
      fixed soon, but the current code doesn't even compile, so this
      is a vast improvement
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4c86cd9c59428a40233fb707f5de18caa5ab5cb7
Author: Andy Fleming <afleming@freescale.com>
Date:   Fri Aug 18 18:03:08 2006 -0500

    [POWERPC] Fix interrupts on 8540 ADS board
    
    * Fixed 8540 ADS support for the new irq layer
    * Fixed 8540 ADS support for mapping PCI interrupts
    * Updated 8540 ADS to use device tree for interrupt assignment
      and sense values
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c712a9de94a5df5bc0087c14ad0b1aac2c147991
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Wed Aug 23 00:48:33 2006 -0400

    Input: remove dead URLs from Doclumentation/input/joystick.txt
    
    Closes #2804.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 90414be9523208f0b667fd58c22e26b8db0594de
Author: Pozsar Balazs <pozsy@uhulinux.hu>
Date:   Wed Aug 23 00:48:03 2006 -0400

    Input: psmouse - fix Intellimouse 4.0 initialization
    
    Revert the superfluous initilization causing some mice become jumpy.
    
    Signed-off-by: Pozsar Balazs <pozsy@uhulinux.hu>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 72a623be00fa3d77724c1b0cac07c1bac60e70a5
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Aug 23 00:47:39 2006 -0400

    Input: wistron - fix crash due to referencing __initdata
    
    Remove __initdata markings from keymaps as they are used during
    normal driver operations.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8ea371fb6df5a6e8056265e0089fd578e87797fc
Author: Florin Malita <fmalita@gmail.com>
Date:   Wed Aug 23 00:45:33 2006 -0400

    Input: atkbd - fix overrun in atkbd_set_repeat_rate()
    
    This was introduced in commit 3d0f0fa0cb554541e10cb8cb84104e4b10828468:
    bounds checking is performed against period[32] while indexing delay[4].
    
    Spotted by Coverity, CID 1376.
    
    Signed-off-by: Florin Malita <fmalita@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 1bad998a2778055c095b4f2081c68e6bc82f06e2
Merge: c46f477... 3ffaa8c...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Aug 22 15:12:58 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit c46f4774228e4dbf716b713e91ad20db50f629ef
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Aug 21 15:27:16 2006 -0700

    [SPARC64]: Fix pfn_pte() build failure.
    
    The "%uhi" needs to be "%%uhi" because we want a real
    "%" character in the assembler here, instead of an
    assembler variable expansion.
    
    Aparently older GCCs were more liberal and interpreted
    this %-letter as a literal "%" for whatever reason.
    
    Based upon a build failure report from Meelis Roos.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ffaa8c7c0f884171a273cd2145b8fbbf233ba22
Author: Michael Rash <mbr@cipherdyne.org>
Date:   Tue Aug 22 00:45:22 2006 -0700

    [TEXTSEARCH]: Fix Boyer Moore initialization bug
    
    The pattern is set after trying to compute the prefix table, which tries
    to use it. Initialize it before calling compute_prefix_tbl, make
    compute_prefix_tbl consistently use only the data from struct ts_bm
    and remove the now unnecessary arguments.
    
    Signed-off-by: Michael Rash <mbr@cipherdyne.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 316c1592bea94ead75301cb764523661fbbcc1ca
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 22 00:06:11 2006 -0700

    [TCP]: Limit window scaling if window is clamped.
    
    This small change allows for easy per-route workarounds for broken hosts or
    middleboxes that are not compliant with TCP standards for window scaling.
    Rather than having to turn off window scaling globally. This patch allows
    reducing or disabling window scaling if window clamp is present.
    
    Example: Mark Lord reported a problem with 2.6.17 kernel being unable to
    access http://www.everymac.com
    
    # ip route add 216.145.246.23/32 via 10.8.0.1 window 65535
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e0b7cde9975e17a61b4511c7822803dfb7210011
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Aug 21 15:31:08 2006 -0700

    [NETFILTER]: arp_tables: fix table locking in arpt_do_table
    
    table->private might change because of ruleset changes, don't use it
    without holding the lock.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2d8f613160ed303f5fe310f21bba334a4b074fa5
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Tue Aug 22 21:22:13 2006 +0400

    elv_unregister: fix possible crash on module unload
    
    An exiting task or process which didn't do I/O yet have no io context,
    elv_unregister() should check it is not NULL.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 00a2b0f6dd2372842df73de72d51621b539fea44
Author: Jan Kara <jack@suse.cz>
Date:   Tue Aug 15 13:56:26 2006 +0200

    Fix possible UDF deadlock and memory corruption (CVE-2006-4145)
    
    UDF code is not really ready to handle extents larger that 1GB. This is
    the easy way to forbid creating those.
    
    Also truncation code did not count with the case when there are no
    extents in the file and we are extending the file.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c164a9ba0a8870c5c9d353f63085319931d69f23
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Tue Aug 22 11:50:39 2006 -0700

    Fix sctp privilege elevation (CVE-2006-3745)
    
    sctp_make_abort_user() now takes the msg_len along with the msg
    so that we don't have to recalculate the bytes in iovec.
    It also uses memcpy_fromiovec() so that we don't go beyond the
    length allocated.
    
    It is good to have this fix even if verify_iovec() is fixed to
    return error on overflow.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f1a58ecae527fc67c87ce4dcb9e73894f64aadfe
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Aug 20 17:56:38 2006 +0900

    [PATCH] ata_piix: fix ghost device probing by honoring PCS present bits
    
    Move out PCS handling from piix_sata_prereset() into
    piix_sata_present_mask() and use it from newly implemented
    piix_sata_softreset().  Class codes for devices which are indicated to
    be absent by PCS are cleared to ATA_DEV_NONE.  This fixes ghost device
    problem reported on ICH6 and 7.
    
    This patch moves PCS handling from prereset to softreset, which makes
    two behavior changes.
    
    * perform softreset even when PCS indicates no device
    * PCS handling is repeated before retrying softresets due to reset
      failures.
    
    Both behavior changes are intended and more consistent with how other
    drivers behave.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ac185bdc02c216040f3b83f654d864bd8a29cedc
Merge: ae298c9... ba9b5d7...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Aug 21 14:38:51 2006 -0700

    Merge gregkh@master.kernel.org:/home/rmk/linux-2.6-arm

commit ae298c98e5ab5bab3b39ffe0c2aebfeb4b1e68a2
Merge: da547d7... be33c3a...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Aug 21 10:24:02 2006 -0700

    Merge branch 'for-linus' of git://brick.kernel.dk/data/git/linux-2.6-block

commit be33c3a67bb717508ab1eab0f2fa570fabcbc4d2
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Aug 21 08:36:12 2006 +0200

    [PATCH] cfq_cic_link: fix usage of wrong cfq_io_context
    
    Obviously, cfq_cic_link() shouldn't free a just allocated cfq_io_context?
    The dead key is from __cic, so drop that.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit e014ff8d4285b81f0de0719d8eee72bc50bfd4be
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Aug 21 10:02:50 2006 +0200

    [PATCH] uninline ioprio_best()
    
    Saves 376 bytes (5 callers) for me.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 9f83e45eb54fc7198dc59fc63255341851ba4c48
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Aug 21 08:34:15 2006 +0200

    [PATCH] Fix current_io_context() vs set_task_ioprio() race
    
    I know nothing about io scheduler, but I suspect set_task_ioprio() is not safe.
    
    current_io_context() initializes "struct io_context", then sets ->io_context.
    set_task_ioprio() running on another cpu may see the changes out of order, so
    ->set_ioprio(ioc) may use io_context which was not initialized properly.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 78bd4d484f81a611ef6ff02f909e576cb9aac7f2
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Aug 21 08:33:23 2006 +0200

    [PATCH] sys_ioprio_set: minor do_each_thread+break fix
    
    From include/linux/sched.h:
    
             * Careful: do_each_thread/while_each_thread is a double loop so
             *          'break' will not work as expected - use goto instead.
             */
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit da547d775fa9ba8d9dcaee7bc4e960540e2be576
Merge: ef7d1b2... 5b9c9bf... df6fd31... 4e6e650... 5672bde... 16a7474...
Author: Len Brown <len.brown@intel.com>
Date:   Sun Aug 20 21:49:29 2006 -0400

    Merge trivial low-risk suspend hotkey bugzilla-5918 into release

commit a76b044af147135b5fb7570aba35d4908f143cc9
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Wed Aug 16 01:52:23 2006 +0200

    [PATCH] WAN: fix C101 card carrier handling
    
    Hi,
    
    One of my recent changes broke C101 carrier handling, this patch
    fixes it. Also fixes an old TX underrun checking bug.
    
    2.6.18 material. Please apply.
    Thanks.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2ca2d5e84c19ddbc0126087af6288533a05f1799
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Mon Aug 14 23:00:31 2006 -0700

    [PATCH] ppc32: board-specific part of fs_enet update
    
    This contains board-specific portion to respect driver changes (for 8272ads ,
    885ads and 866ads).  Altered platform_data structures as well as initial setup
    routines relevant to fs_enet.
    
    Changes to the mpc8560ads ppc/ code are also introduced, but mainly as
    reference, since the entire board support is going to appear in arch/powerpc.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5b4b8454344a0391bb0f69fda0f4ec8e1f0d2fed
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Mon Aug 14 23:00:30 2006 -0700

    [PATCH] FS_ENET: use PAL for mii management
    
    This patch should update the fs_enet infrastructure to utilize Phy Abstraction
    Layer subsystem.  Along with the above, there are apparent bugfixes, overhaul
    and improvements.
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 11b0bacd717c285c94dbb56505a28434b34f0639
Author: Vitaly Bordug <vbordug@ru.mvista.com>
Date:   Mon Aug 14 23:00:29 2006 -0700

    [PATCH] PAL: Support of the fixed PHY
    
    This makes it possible for HW PHY-less boards to utilize PAL goodies.  Generic
    routines to connect to fixed PHY are provided, as well as ability to specify
    software callback that fills up link, speed, etc.  information into PHY
    descriptor (the latter feature not tested so far).
    
    Signed-off-by: Vitaly Bordug <vbordug@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ec42cdb624059bb9d9d1accca5ed4345bf8f5fda
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Aug 14 23:00:28 2006 -0700

    [PATCH] xircom_cb: wire up errors from pci_register_driver()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3d8f3f3c3697a7603a802427c9226f5dfe6d67ad
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Aug 14 23:00:27 2006 -0700

    [PATCH] s390: fix arp_tbl lock usage in qeth
    
    qeth: bhs must be disabled when accessing neighbour tables.
    
    =================================
    [ INFO: inconsistent lock state ]
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 239e44e1f05e2163ee066c07a753f9fb445979b2
Author: Edgar E Iglesias <edgar.iglesias@axis.com>
Date:   Mon Aug 14 23:00:24 2006 -0700

    [PATCH] skge: remember to run netif_poll_disable()
    
    Signed-off-by: Edgar E Iglesias <edgar.iglesias@axis.com>
    Cc: Stephen Hemminger <shemminger@osdl.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b68a60e598c0d1e738c807c47cb181e8cc52a0d8
Author: James K Lewis <jim@jklewis.com>
Date:   Mon Aug 14 23:00:23 2006 -0700

    [PATCH] Add ethtool -g support to Spidernet network driver
    
    Add ethtool -g (show ring sizes) support to the Spidernet network driver.
    
    Signed-off-by: James K Lewis <jklewis@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7e29f8bf39de372e3903a0b12f34285d30a8a244
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Aug 14 23:00:22 2006 -0700

    [PATCH] build fixes: smc91x
    
    Unclear how these bugs arrived, presumably from incorrect cleanup of
    the 16-bit-only paths, but smc91x wouldn't build for OMAP.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Cc: Nicolas Pitre <nico@cam.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b933b4d93888b584eda826bffa68a3a1283f8411
Author: Roger Luethi <rl@hellgate.ch>
Date:   Mon Aug 14 23:00:21 2006 -0700

    [PATCH] via-rhine: add option avoid_D3 (work around broken BIOSes)
    
    It looks like broken BIOSes controlling Rhine chips will remain in use in
    significant numbers; such systems fail to come up via PXE after they have
    been put into D3 (power-saving) mode.
    
    This patch adds a module option for disabling the call that puts the chip
    to sleep.
    
    Signed-off-by: Roger Luethi <rl@hellgate.ch>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Cc: Joerg Bashir <brak@archive.org>
    Cc: Tim Phipps <tim@phipps-hutton.freeserve.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 76cb4fe7c0926c2c59f4a36ab169aa2d547c93d1
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Mon Aug 14 23:00:20 2006 -0700

    [PATCH] lockdep: fix smc91x
    
    When booting using root-nfs, I'm seeing (independently) two lockdep dumps
    in the smc91x driver.  The patch below fixes both.  Both dumps look like
    real locking issues.
    
    Nico - please review and ack if you think the patch is correct.
    
    Dump 1:
    
    Sending DHCP requests .
    =================================
    [ INFO: inconsistent lock state ]
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ab1976682f31661a898b92593bccfeae14d0a0ae
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Aug 14 23:00:18 2006 -0700

    [PATCH] via-rhine: NAPI poll enable
    
    The poll_enable should be in init_registers before enabling interrupts, not
    in tx_timeout.  Thanks for spotting it Roger.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Cc: Roger Luethi <rl@hellgate.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 633949a145df19d6d338b0f227f033a0a1c5562a
Author: Roger Luethi <rl@hellgate.ch>
Date:   Mon Aug 14 23:00:17 2006 -0700

    [PATCH] via-rhine: NAPI support
    
    Add NAPI support to the via-rhine driver so that it can handle higher
    speeds and doesn't get overloaded by interrupts as easily.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Roger Luethi <rl@hellgate.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a4d09272480e57cd4aa1156cac7aba9b08885bf9
Author: Peter Korsgaard <jacmet@sunsite.dk>
Date:   Mon Aug 14 23:00:17 2006 -0700

    [PATCH] smc911x: Re-release spinlock on spurious interrupt
    
    The smc911x driver forgets to release the spinlock on spurious interrupts.
    This little patch fixes it.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2fd0e33f4f967022ef2f3249b6c512b309734384
Author: Kevin Hao <haokexin@gmail.com>
Date:   Mon Aug 14 23:00:15 2006 -0700

    [PATCH] net: Add netconsole support to dm9000 driver
    
    Add netconsole support to dm9000 driver.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Sascha Hauer <s.hauer@pengutronix.de>
    Cc: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 330ce0de93fd7cc0f72fa57a7ec892befe7035d2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:14 2006 -0700

    [PATCH] s2io build fix
    
    sparc32:
    
    drivers/net/s2io.c:2636: warning: implicit declaration of function 'disable_irq'
    drivers/net/s2io.c:2656: warning: implicit declaration of function 'enable_irq'
    
    Cc: Ananda Raju <Ananda.Raju@neterion.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6fd7587bc284af61f92e547287aa5cd616a9c7ba
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Mon Aug 14 23:00:13 2006 -0700

    [PATCH] Update smc91x driver with ARM Versatile board info
    
    We need to specify a Versatile-specific SMC_IRQ_FLAGS value or the new
    generic IRQ layer will complain thusly:
    
    No IRQF_TRIGGER set_type function for IRQ 25 (<NULL>)
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ce973b141dfac4a0f160c7435d65e3ea47753ce8
Author: Li Yang <leoli@freescale.com>
Date:   Mon Aug 14 23:00:11 2006 -0700

    [PATCH] Freescale QE UCC gigabit ethernet driver
    
    QE(QUICC Engine) is a new generation communication coprocessor, which can
    be found on some of the latest Freescale PowerQUICC CPUs(e.g.  MPC8360).
    The UCC(Unified Communications Controller) module of QE can work as gigabit
    Ethernet device.  This patch provides driver for the device.
    
    Signed-off-by: Shlomi Gridish <gridish@freescale.com>
    Signed-off-by: Li Yang <leoli@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e4c780b1ffc7d7bc27b7dc57fcf17ebb8d3006bc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Aug 14 23:00:10 2006 -0700

    [PATCH] drivers/net/e1000/: possible cleanups
    
    - make needlessly global functions static
    - #if 0 the following unused global functions:
      - e1000_hw.c: e1000_mc_addr_list_update()
      - e1000_hw.c: e1000_read_reg_io()
      - e1000_hw.c: e1000_enable_pciex_master()
      - e1000_hw.c: e1000_ife_disable_dynamic_power_down()
      - e1000_hw.c: e1000_ife_enable_dynamic_power_down()
      - e1000_hw.c: e1000_write_ich8_word()
      - e1000_hw.c: e1000_duplex_reversal()
      - e1000_main.c: e1000_io_read()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: John Ronciak <john.ronciak@intel.com>
    Cc: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Cc: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
    Cc: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3418e469ebaebec16f7df83074087eb901fb76b9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:10 2006 -0700

    [PATCH] sundance section fix
    
    drivers/net/sundance.c:110: error: version causes a section type conflict
    
    I don't understand this error.  It's referred to from both __init and
    __devinit code.  With CONFIG_HOTPLUG=n, version[] is placed in .init.data and
    is referred to from .init.text.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 90d5aed2d9c7d2f3915b75342988114fd7b6c13d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:09 2006 -0700

    [PATCH] fealnx section fix
    
    With CONFIG_HOTPLUG=n it won't compile:
    
    distcc[25607] ERROR: compile drivers/net/fealnx.c on g5/64 failed
    
    version[] is referred to from both __init code and from __devinit code, so
    move it out of __init altogether.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c9d26c9785d900d8547b268f0c0507f252879c48
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:08 2006 -0700

    [PATCH] winbond-840 section fix
    
    With CONFIG_HOTPLUG=n it won't compile:
    
    drivers/net/tulip/winbond-840.c:141: error: version causes a section type conflict
    
    (For some reason it gets the same error if marked __initdata.  Give up.)
    
    Cc: Valerie Henson <val_henson@linux.intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c971ef46cb94b8bb4a12555fa757e5f67934fcd9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:08 2006 -0700

    [PATCH] seeq8005 section fix
    
    WARNING: drivers/net/seeq8005.o - Section mismatch: reference to .init.text:seeq8005_probe from .text between 'init_module' (at offset 0x106) and 'seeq8005_open'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1e13b0d82d24ac3c8b2f16a09dd9ce537cad134c
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:07 2006 -0700

    [PATCH] ni65 section fix
    
    WARNING: drivers/net/ni65.o - Section mismatch: reference to .init.text:ni65_probe from .text between 'init_module' (at offset 0x54a) and 'ni65_stop_start'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5e5fa01d55e9949660a89b23f4a43884eaf49097
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:06 2006 -0700

    [PATCH] wd section fix
    
    WARNING: drivers/net/wd.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0xfd) and 'wd_open'
    WARNING: drivers/net/wd.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x14b) and 'wd_open'
    WARNING: drivers/net/wd.o - Section mismatch: reference to .init.data:wd_portlist from .text between 'init_module' (at offset 0x17f) and 'wd_open'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit daca7cd7612639848c39744e02dab537755b31a1
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:06 2006 -0700

    [PATCH] smctr section fix
    
    WARNING: drivers/net/tokenring/smctr.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x2ba0) and 'smctr_reset_adapter'
    WARNING: drivers/net/tokenring/smctr.o - Section mismatch: reference to .init.text:smctr_probe from .text between 'init_module' (at offset 0x2bf4) and 'smctr_reset_adapter'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6d2cdb4fd1cc1b15ad070a57c9b2bc40bb1565e7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:05 2006 -0700

    [PATCH] ibmtr section fix
    
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_mem_base from .text between 'ibmtr_probe1' (at offset 0x6e6) and 'ibmtr_probe_card'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_mem_base from .text between 'ibmtr_probe1' (at offset 0x74a) and 'ibmtr_probe_card'
    WARNING: drivers/net/tokenring/ibmtr.o - Section mismatch: reference to .init.data:ibmtr_mem_base from .text between 'ibmtr_probe1' (at offset 0x7fd) and 'ibmtr_probe_card'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 19a8664d8a05f75cab3cd4eb8022d22d3f0c53c3
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:05 2006 -0700

    [PATCH] ni52 section fix
    
    WARNING: drivers/net/ni52.o - Section mismatch: reference to .init.text:ni52_probe from .text between 'init_module' (at offset 0x997) and 'ni52_close'
    WARNING: drivers/net/ni65.o - Section mismatch: reference to .init.text:ni65_probe from .text between 'init_module' (at offset 0x54a) and 'ni65_stop_start'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit dab3d02ec05d16aab680de471cb5d20c5d4852e8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:04 2006 -0700

    [PATCH] lne390 section fix
    
    WARNING: drivers/net/lne390.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x100) and 'lne390_close'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3805f0e28ca313893b87e881201561d5c1857dd8
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:03 2006 -0700

    [PATCH] lance section fix
    
    WARNING: drivers/net/lance.o - Section mismatch: reference to .init.data:lance_portlist from .text between 'init_module' (at offset 0x8d3) and 'lance_purge_ring'
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 58f149fc65ebced1148789cfb37457a8c7aaca75
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:03 2006 -0700

    [PATCH] eth16i section fix
    
    WARNING: drivers/net/eth16i.o - Section mismatch: reference to .init.data:cardname from .text between 'init_module' (at offset 0x6d2) and 'eth16i_multicast'
    WARNING: drivers/net/eth16i.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x6ef) and 'eth16i_multicast'
    WARNING: drivers/net/eth16i.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x702) and 'eth16i_multicast'
    WARNING: drivers/net/eth16i.o - Section mismatch: reference to .init.data:cardname from .text between 'init_module' (at offset 0x70e) and 'eth16i_multicast'
    WARNING: drivers/net/eth16i.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x71d) and 'eth16i_multicast'
    WARNING: drivers/net/eth16i.o - Section mismatch: reference to .init.data:cardname from .text between 'init_module' (at offset 0x729) and 'eth16i_multicast'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5757f5c6d7d9cbe4bf6a464f1842a767f505d440
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:02 2006 -0700

    [PATCH] es3210 section fix
    
    WARNING: drivers/net/es3210.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0xdf) and 'es_close'
    WARNING: drivers/net/es3210.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x100) and 'es_close'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b1176b95b4b851b05a2f541ef54e7ce3ed358d19
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:01 2006 -0700

    [PATCH] eexpress section fix
    
    WARNING: drivers/net/eexpress.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x6c3) and 'eexp_hw_lasttxstat'
    WARNING: drivers/net/eexpress.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x74f) and 'eexp_hw_lasttxstat'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 02a3245fcf0911ff92100aa54823dc1c5950fba9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:01 2006 -0700

    [PATCH] eepro section fix
    
    WARNING: drivers/net/eepro.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x284) and 'eepro_ethtool_get_drvinfo'
    WARNING: drivers/net/eepro.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x2a7) and 'eepro_ethtool_get_drvinfo'
    WARNING: drivers/net/eepro.o - Section mismatch: reference to .init.data:eepro_portlist from .text between 'init_module' (at offset 0x2b3) and 'eepro_ethtool_get_drvinfo'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d543cbb6d192313d9027ed09c7a1e085b1234082
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 23:00:00 2006 -0700

    [PATCH] e2100 section fix
    
    WARNING: drivers/net/e2100.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0xd9) and 'e21_reset_8390'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5d930108c914c04fbb0bfbb059d23a5fcaf0d1e7
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 22:59:59 2006 -0700

    [PATCH] at1700 section fix
    
    WARNING: drivers/net/at1700.o - Section mismatch: reference to .init.text:at1700_probe from .text between 'init_module' (at offset 0x75) and 'net_get_stats'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e26c129a49a7a4990f362a9cdb3084198b4d9d7b
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 22:59:59 2006 -0700

    [PATCH] cs89x0 section fix
    
    WARNING: drivers/net/cs89x0.o - Section mismatch: reference to .init.data:version from .text between 'init_module' (at offset 0x13d8) and 'net_get_stats'
    WARNING: drivers/net/cs89x0.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x1634) and 'net_get_stats'
    WARNING: drivers/net/cs89x0.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x1a1f) and 'net_get_stats'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5f3bc456ce190a963a8816be5a318df9998f3bc5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 22:59:58 2006 -0700

    [PATCH] cops section fix
    
    WARNING: drivers/net/appletalk/cops.o - Section mismatch: reference to .init.text:cops_probe from .text between 'init_module' (at offset 0xae) and 'cops_rx'
    
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 62a87b8051ded3d1fcb89773c9febd1bb34d3cbd
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 22:59:57 2006 -0700

    [PATCH] ac3200 section fixes
    
    WARNING: drivers/net/ac3200.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0xf9) and 'ac_close_card'
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 864fe05dfa4ff3e230acf3b4ccf878b6f22603c4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Aug 14 22:59:57 2006 -0700

    [PATCH] 82596 section fixes
    
    WARNING: drivers/net/82596.o - Section mismatch: reference to .init.text:i82596_probe from .text between 'init_module' (at offset 0x141) and 'i596_add_cmd'
    
    Also nail a couple of crazy inlines.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d14b50cc60ca465290fcdb3b88e7d5fb684361ed
Merge: a34b6fc... ef7d1b2...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Aug 19 17:27:12 2006 -0400

    Merge branch 'master' into upstream-fixes

commit 41ace1861a93f12f70ff10026fb1539fea38fcf8
Merge: 09e590e... ef7d1b2...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Aug 19 17:25:34 2006 -0400

    Merge branch 'master' into upstream-fixes

commit 48e2691f9c3bd6719e773f0b883449f4cef39585
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Aug 17 11:58:11 2006 -0400

    [SCSI] lpfc 8.1.9 : Change version number to 8.1.9
    
    Change version number to 8.1.9
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a90f56847e8df9034c1c05d1157e1b0cd96987fb
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Aug 17 11:58:04 2006 -0400

    [SCSI] lpfc 8.1.9 : Stall eh handlers if resetting while rport blocked
    
    Stall error handler if attempting resets/aborts while an rport is blocked.
    This avoids device offline scenarios due to errors in the error handler.
    
    Background:
      Although the transport is using the scsi_timed_out functionality to
      restart the timeout if the rport is blocked, if the timeout has already
      fired before the block occurs, the eh handler still runs and can take
      the device offline. Ultimately, this window cannot be resolved without
      significant work in the error handler thread. Christoph noted the first
      level of these issues when he noted the poor error response handling
      by the error thread.
    
      We found, under heavy load and error testing, that time window from when
      the scsi_times_out() adds the io to the queue to when the scsi_error_handler
      gets around to servicing it, can be in the several seconds range. In most
      cases, these test conditions are highly unusual, but possible.
      As a result, we're stalling the error handler in this race window so that
      we can avoid the device_offline transitions.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 33ccf8d1080bdccb4751a92f6da361a6e01b7cc0
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Aug 17 11:57:58 2006 -0400

    [SCSI] lpfc 8.1.9 : Misc Bug Fixes
    
    Misc Bug Fixes:
    - Cap MBX_DOWN_LINK command timeout to 60 seconds
    - Fix double free of ndlp object
    - Don't free mbox structures on error. The completion handlers expect to do so.
    - Clear host attention work items when going offline
    - Fixed discovery issues in multi-initiator environments.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ef7d1b244fa6c94fb76d5f787b8629df64ea4046
Merge: ed0da6f... 78eb887...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Aug 18 11:02:52 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 5beba53230351b2d77c317c22e66c415f2ebaf02
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Aug 18 10:41:46 2006 -0700

    IB/mthca: No userspace SRQs if HCA doesn't have SRQ support
    
    Leave all SRQ methods out of the device's uverbs_cmd_mask if the
    device doesn't have SRQ support (because of ancient firmware) so that
    we don't allow userspace to call the driver's create_srq method.  This
    fixes a userspace-triggerable oops caused by ib_uverbs_create_srq()
    following the device's ->create_srq function pointer, which will be
    NULL if the device doesn't support SRQs.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit df6fd31995cb2e38b2a7e94bc8f1559b8f55404e
Author: Starikovskiy, Alexey Y <alexey.y.starikovskiy@intel.com>
Date:   Fri Aug 18 11:23:00 2006 -0400

    ACPI: relax BAD_MADT_ENTRY check to allow LSAPIC variable length string UIDs
    
    ACPI 3.0 appended a variable length UID string to the LAPIC structure
    as part of support for > 256 processors.  So the BAD_MADT_ENTRY() sanity
    check can no longer compare for equality with a fixed structure length.
    
    Signed-off-by: Alexey Y Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ba9b5d76372dc290b6ca04dad93927a22c2ac49a
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Aug 18 17:20:15 2006 +0100

    [ARM] 3746/2: Userspace helpers must be Thumb mode interworkable
    
    Patch from Nicolas Pitre
    
    The userspace helpers in clean/arch/arm/kernel/entry-armv.S are called
    directly in/from userspace. They need to cope with being called from
    Thumb code.
    
    Patch below uses the bx interworking instruction when
    CONFIG_ARM_THUMB=y.
    
    Based on an earlier patch from Paul Brook <paul@codesourcery.com>
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ed0da6fc9d3096f54c4a76737eeae57ac81418cf
Merge: 774bd86... 9e8a9bc...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri Aug 18 09:20:04 2006 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc

commit 90af774ab150b97c0aa8ed0375f4652be986bdce
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Fri Aug 18 15:34:46 2006 +0100

    [ARM] 3757/1: Use PROCINFO_INITFUNC in head.S
    
    Patch from Catalin Marinas
    
    This is instead of a magic number.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3a834635e8953839dba3f417a26414039b0c7c48
Author: Paul Gortmaker <paul.gortmaker@gmail.com>
Date:   Fri Aug 18 15:32:17 2006 +0100

    [ARM] 3756/1: Assign value for HWCAP_IWMMXT
    
    Patch from Paul Gortmaker
    
    Some folks here at Wind River asked me if I'd push this out
    so that the value was generally agreed upon in advance by
    all folks interested in working with iWMMXt.  Seems simple
    enough...
    
    Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e2785f0d4251c35d6e82ec819354374c8c17d63d
Author: Kevin Hilman <khilman@mvista.com>
Date:   Fri Aug 18 15:32:14 2006 +0100

    [ARM] 3755/1: dmabounce: fix return value for find_safe_buffer
    
    Patch from Kevin Hilman
    
    Previous locking changes to dmabounce incorrectly return non-NULL even
    when buffer not found.  Fix it up.
    
    Signed-off-by: Kevin Hilman <khilman@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 332158e7c206dc6bee0dfb24f2c1d6096e0989cd
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Aug 18 15:32:12 2006 +0100

    [ARM] 3754/1: S3C24XX: tidy arch/arm/mach-s3c2410/Makefile
    
    Patch from Ben Dooks
    
    tidy up the makefile by using TABs to indent, and ensure
    that all items are indented the same.
    
    Move the DMA to its own section, ready for the next set
    of updates
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f57e1abd1bb297994c7398478b4c37e628095243
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Fri Aug 18 15:32:10 2006 +0100

    [ARM] 3753/1: S3C24XX: DMA fixes
    
    Patch from Ben Dooks
    
    A number of small issues with the S3C24XX DMA have
    cropped up, which this patch fixes. These are:
    
      - check wether we can load another buff in start
      - update state handling in s3c2410_dma_lastxfer
      - only reload in irq if channel is not idle
      - more informative timeout errors (add source)
      - do not call request_irq() with irqs locked
      - added waitforstop function
    
    The patch also adds a S3C2410_DMAOP_STARTED for
    the occasions when the driver wants to ensure that
    the DMA system load state is resynced after loading.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 78eb887733ec8ff5d6e6c69e3c32a187a9303622
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Aug 17 18:22:32 2006 -0700

    [BRIDGE]: Disable SG/GSO if TX checksum is off
    
    When the bridge recomputes features, it does not maintain the
    constraint that SG/GSO must be off if TX checksum is off.
    This patch adds that constraint.
    
    On a completely unrelated note, I've also added TSO6 and TSO_ECN
    feature bits if GSO is enabled on the underlying device through
    the new NETIF_F_GSO_SOFTWARE macro.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8311731afc439f508ab4d759edadedae75afb73e
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Aug 17 18:13:53 2006 -0700

    [NETFILTER]: ip_tables: fix table locking in ipt_do_table
    
    table->private might change because of ruleset changes, don't use it without
    holding the lock.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d205dc40798d97d63ad348bfaf7394f445d152d4
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Aug 17 18:12:38 2006 -0700

    [NETFILTER]: ctnetlink: fix deadlock in table dumping
    
    ip_conntrack_put must not be called while holding ip_conntrack_lock
    since destroy_conntrack takes it again.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9e8a9bc2d2c3ac3b8542cc5c2544248df6f3f1c5
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Aug 17 12:24:42 2006 -0500

    [POWERPC] Fix the mpc8641_hpcn.dts file.
    
    Add 'linux,phandle' entry to i8259@4d0 node.
    
    Signed-off-by: Zhang Wei <wei.zhang@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5315862045c5dc5dfe0754fbd07df1350180628a
Author: Jon Loeliger <jdl@jdl.com>
Date:   Wed Aug 9 10:37:28 2006 -0500

    [POWERPC] Offer PCI as a CONFIG choice for PPC_86xx.
    
    Also fix 80-column run-over.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 707ba16f0ffed3b83ced3c7f4d4d332a70f8b41d
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Aug 3 16:27:57 2006 -0500

    [POWERPC] Add MPC8641 HPCN Device Tree Source file.
    
    As per list discussion, let's add device tree source files
    under powerpc/boot/dts.  If nothing else, it is a starting point.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f583165f6a926e9f27ff8d15c0e4b22e83f0d599
Author: Jon Loeliger <jdl@jdl.com>
Date:   Thu Aug 17 08:42:35 2006 -0500

    [POWERPC] Convert to mac-address for ethernet MAC address data.
    
    Also accept "local-mac-address".  However the old "address"
    is now obsolete, but accepted for backwards compatibility.
    It should be removed after all device trees have been
    converted to use "mac-address".
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6e8fcbf64024f9056ba122abbb66554aa76bae5d
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Thu Aug 17 16:44:46 2006 -0700

    [IPV4]: severe locking bug in fib_semantics.c
    
    Found in 2.4 by Yixin Pan <yxpan@hotmail.com>.
    
    > When I read fib_semantics.c of Linux-2.4.32, write_lock(&fib_info_lock) =
    > is used in fib_release_info() instead of write_lock_bh(&fib_info_lock).  =
    > Is the following case possible: a BH interrupts fib_release_info() while =
    > holding the write lock, and calls ip_check_fib_default() which calls =
    > read_lock(&fib_info_lock), and spin forever.
    
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit acd6e00b8e4db542cb6bc9ddfbb4e18bbe29ce4d
Author: David L Stevens <dlstevens@us.ibm.com>
Date:   Thu Aug 17 16:27:39 2006 -0700

    [MCAST]: Fix filter leak on device removal.
    
    This fixes source filter leakage when a device is removed and a
    process leaves the group thereafter.
    
    This also includes corresponding fixes for IPv6 multicast source
    filters on device removal.
    
    Signed-off-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7fa9d189e93877a1fa08ab00f230e0689125e45
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Aug 15 16:34:13 2006 -0700

    [NET]: Disallow whitespace in network device names.
    
    It causes way too much trouble and confusion in userspace.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4274b51a5c8147b5341e15927368e75b632d297
Author: Panagiotis Issaris <takis@issaris.org>
Date:   Tue Aug 15 16:01:07 2006 -0700

    [PPP]: handle kmalloc failures and convert to using kzalloc
    
    The PPP code contains two kmalloc()s followed by memset()s without
    handling a possible memory allocation failure.  (Suggested by Joe
    Perches).
    
    And furthermore, conversions from kmalloc+memset to kzalloc.
    
    [akpm@osdl.org: fix error-path leak]
    [akpm@osdl.org: cleanups]
    [paulus@samba.org: don't add useless printk and cardmap_destroy calls]
    
    Signed-off-by: Panagiotis Issaris <takis@issaris.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c0956bd25161bff45304d482cda51ca4b3b572f1
Author: Ralf Hildebrandt <Ralf.Hildebrandt@charite.de>
Date:   Tue Aug 15 02:12:43 2006 -0700

    [PKT_SCHED] cls_u32: Fix typo.
    
    Signed-off-by: Ralf Hildebrandt <Ralf.Hildebrandt@charite.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9c6e3e96669ade31afd3a39f17393e577b609c5
Author: Kevin Hilman <khilman@mvista.com>
Date:   Tue Aug 15 02:02:33 2006 -0700

    [ATM]: Compile error on ARM
    
    atm_proc_exit() is declared as __exit, and thus in .exit.text.  On
    some architectures (ARM) .exit.text is discarded at compile time, and
    since atm_proc_exit() is called by some other __init functions, it
    results in a link error.
    
    Signed-off-by: Kevin Hilman <khilman@mvista.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 932f3772cf76cc1b1fd1538ceee3edba9bf2164f
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 15 01:39:36 2006 -0700

    [BNX2]: Convert to netdev_alloc_skb()
    
    Convert dev_alloc_skb() to netdev_alloc_skb() and increase default
    rx ring size to 255. The old ring size of 100 was too small.
    
    Update version to 1.4.44.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f8af120a159a843948749ea88bcacda9779b132
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Aug 15 01:39:10 2006 -0700

    [BNX2]: Fix tx race condition.
    
    Fix a subtle race condition between bnx2_start_xmit() and bnx2_tx_int()
    similar to the one in tg3 discovered by Herbert Xu:
    
    CPU0					CPU1
    bnx2_start_xmit()
    	if (tx_ring_full) {
    		tx_lock
    					bnx2_tx()
    						if (!netif_queue_stopped)
    		netif_stop_queue()
    		if (!tx_ring_full)
    						update_tx_ring
    			netif_wake_queue()
    		tx_unlock
    	}
    
    Even though tx_ring is updated before the if statement in bnx2_tx_int() in
    program order, it can be re-ordered by the CPU as shown above.  This
    scenario can cause the tx queue to be stopped forever if bnx2_tx_int() has
    just freed up the entire tx_ring.  The possibility of this happening
    should be very rare though.
    
    The following changes are made, very much identical to the tg3 fix:
    
    1. Add memory barrier to fix the above race condition.
    
    2. Eliminate the private tx_lock altogether and rely solely on
    netif_tx_lock.  This eliminates one spinlock in bnx2_start_xmit()
    when the ring is full.
    
    3. Because of 2, use netif_tx_lock in bnx2_tx_int() before calling
    netif_wake_queue().
    
    4. Add memory barrier to bnx2_tx_avail().
    
    5. Add bp->tx_wake_thresh which is set to half the tx ring size.
    
    6. Check for the full wake queue condition before getting
    netif_tx_lock in tg3_tx().  This reduces the number of unnecessary
    spinlocks when the tx ring is full in a steady-state condition.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb33f82568d32016b3b3c00819574f9526e52be3
Author: Jan "Yenya" Kasprzak <kas@fi.muni.cz>
Date:   Tue Aug 15 01:33:50 2006 -0700

    [NET]: Terminology in ip-sysctl.txt
    
    this minor patch fixes the description of net.ipv4.tcp_mem sysctl
    in ip-sysctl.txt - the headline names the values "min, pressure, max",
    while the description uses the "low, pressure, high" values.
    Both tcp_rmem and tcp_wmem descriptions use the "min, pressure, max"
    values, so I have changed the tcp_mem to match this and not vice versa.
    
    Signed-off-by: Jan "Yenya" Kasprzak <kas@fi.muni.cz>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bb699cbca0096aa3f5f750264ec0af080732375a
Author: Michal Ruzicka <michal.ruzicka@comstar.cz>
Date:   Tue Aug 15 00:20:17 2006 -0700

    [IPV4]: Possible leak of multicast source filter sctructure
    
    There is a leak of a socket's multicast source filter list structure
    on closing a socket with a multicast source filter set on an interface
    that does not exist any more.
    
    Signed-off-by: Michal Ruzicka <michal.ruzicka@comstar.cz>
    Acked-by: David L Stevens <dlstevens@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 640c41c77a96dbbfb74d40ae86ab75b759afb911
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Aug 15 00:06:56 2006 -0700

    [IPV6] lockdep: annotate __icmpv6_socket
    
    Split off __icmpv6_socket's sk->sk_dst_lock class, because it gets
    used from softirqs, which is safe for __icmpv6_sockets (because they
    never get directly used via userspace syscalls), but unsafe for normal
    sockets.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit deb47c66e12a645f7eec9b1c153c05ed47989439
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Aug 15 00:04:56 2006 -0700

    [NETFILTER]: xt_physdev build fix
    
    It needs netfilter_bridge.h for brnf_deferred_hooks
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 855751125093f758871b70da2951d8b92b6368cc
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Tue Aug 15 00:03:01 2006 -0700

    [NET]: Fix potential stack overflow in net/core/utils.c
    
    On High end systems (1024 or so cpus) this can potentially cause stack
    overflow.  Fix the stack usage.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ea49ed73c8d0d0bdf7c11fc18c61572d2d22176
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Aug 14 17:08:36 2006 -0700

    [VLAN]: Make sure bonding packet drop checks get done in hwaccel RX path.
    
    Since __vlan_hwaccel_rx() is essentially bypassing the
    netif_receive_skb() call that would have occurred if we did the VLAN
    decapsulation in software, we are missing the skb_bond() call and the
    assosciated checks it does.
    
    Export those checks via an inline function, skb_bond_should_drop(),
    and use this in __vlan_hwaccel_rx().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9a936a2e0526089194159eae31238e36b1c19e74
Author: Olof Johansson <olof@lixom.net>
Date:   Sun Aug 6 20:51:25 2006 -0500

    [POWERPC] powerpc: Clear HID0 attention enable on PPC970 at boot time
    
    Clear HID0[en_attn] at CPU init time on PPC970.  Closes CVE-2006-4093.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e5c14ce118ab6a96afb2af5c4ec9727b03ab1936
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Aug 17 03:59:27 2006 +0200

    [POWERPC] Fix irq radix tree remapping typo
    
    The code for using the radix tree for reverse mapping of interrupts has
    a typo that causes it to create incorrect mappings if the software and
    hardware numbers happen to be different. This would, among others, cause
    the IDE interrupt to fail on js20's. This fixes it.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 83db3dde2604d48e30a468c82da163dd1a8602b3
Author: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Date:   Fri Aug 11 17:01:34 2006 +0530

    [POWERPC] kprobes: Fix possible system crash during out-of-line single-stepping
    
    - On archs that have no-exec support, we vmalloc() a executable scratch
    area of PAGE_SIZE and divide it up into an array of slots of maximum
    instruction size for that arch
    - On a kprobe registration, the original instruction is copied to the
    first available free slot, so if multiple kprobes are registered, chances
    are, they get contiguous slots
    - On POWER4, due to not having coherent icaches, we could hit a situation
    where a probe that is registered on one processor, is hit immediately on
    another. This second processor could have fetched the stream of text from
    the out-of-line single-stepping area *before* the probe registration
    completed, possibly due to an earlier (and a different) kprobe hit and
    hence would see stale data at the slot.
    
    Executing such an arbitrary instruction lead to a problem as reported
    in LTC bugzilla 23555.
    
    The correct solution is to call flush_icache_range() as soon as the
    instruction is copied for out-of-line single-stepping, so the correct
    instruction is seen on all processors.
    
    Thanks to Will Schmidt who tracked this down.
    
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Acked-by: Will Schmidt <will_schmidt@vnet.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b6f35b4966e0ae59cec45e5292b100698d12dc5f
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Jul 5 14:39:43 2006 +1000

    [POWERPC] Make crash.c work on 32-bit and 64-bit
    
    To compile kexec on 32-bit we need a few more bits and pieces. Rather
    than add empty definitions, we can make crash.c work on 32-bit, with
    only a couple of kludges.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 47585d8f5dea10dea49c948f1fb13ef7632409c7
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Jul 5 14:39:42 2006 +1000

    [POWERPC] Move some kexec logic into machine_kexec.c
    
    We're missing a few functions for kexec to compile on 32-bit. There's
    nothing really 64-bit specific about the 64-bit versions, so make them
    generic rather than adding empty definitions for 32-bit.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 90bdde362cc506173c1d18b8f516b18e5b228e96
Author: Will Schmidt <will_schmidt@vnet.ibm.com>
Date:   Tue Aug 8 09:40:00 2006 -0500

    [POWERPC] update {g5,iseries,pseries}_defconfigs
    
    Updating the defconfigs for iseries, pseries, and G5.   Sticking with
    the defaults, with the following exceptions:  I've turned off HW_RANDOM
    for all three configs.   For G5, I've enabled SND_AOA and friends as
    modules; this includes the FABRIC_LAYOUT, ONYX, TAS, TOONIE and
    SOUNDBUS* config options.
    
    Signed-off-by: Will Schmidt <will_schmidt@vnet.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit eac8392f9591b359847b8a6abb75ca60967bcecd
Author: David Wilder <dwilder@us.ibm.com>
Date:   Thu Jun 29 15:17:30 2006 -0700

    [POWERPC] Make secondary CPUs call into kdump on reset exception
    
    In the case of a system hang, the user will invoke soft-reset to
    initiate the kdump boot.  If xmon is enabled, the CPU(s) enter into the
    xmon debugger.   Unfortunately, the secondary CPU(s) will return to the
    hung state when they exit from the debugger (returned from die() ->
    system_reset_exception()).  This causes a problem in kdump since the
    hung CPU(s) will not respond to the IPI sent from kdump.  This patch
    fixes the issue by calling crash_kexec_secondary() directly from
    system_reset_exception() without returning to the previous state.  These
    secondary CPUs wait 5ms until the kdump boot is started by the primary
    CPU.   In the case we exited from the debugger to "recover" (command 'x'
    in xmon) the primary and the secondary CPUs will all return from die()
    -> system_reset_exception() ->crash_kexec_secondary() wait 5ms, then
    return to the previous state.  A kdump boot is not started in this case.
    
    Signed-off-by: Haren Myneni <haren@us.ibm.com>
    Signed-off-by: David Wilder <dwilder@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0165508c80a2b5d5268d9c5dfa9b30c534a33693
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Wed Aug 9 11:06:07 2006 +0200

    MTD: Add lock/unlock operations for Atmel AT49BV6416
    
    The AT49BV6416 is locked by default, so we really need to provide
    at least the unlock() operation for write and erase to work. This
    patch implements both ->lock() and ->unlock() and provides a fixup
    to install them when an AT49BV6416 chip is detected.
    
    These functions are probably valid on more Atmel chips, but I believe
    it's mostly obsolete ones. The AT49BV6416 is in fact obsolete, but
    it's used on all current AT32STK1000 development boards.
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit 5b0c5c2c0d04c29f85abb485378ba5476c7aeec2
Author: Haavard Skinnemoen <hskinnemoen@atmel.com>
Date:   Wed Aug 9 10:54:44 2006 +0200

    MTD: Convert Atmel PRI information to AMD format
    
    Atmel flash chips don't have PRI information in the same format as
    AMD flash chips. This patch installs a fixup for all Atmel chips that
    converts the relevant PRI fields into AMD format.
    
    Only the fields that are actually used by the command set is actually
    converted. The rest are initialized to zero (which should be safe)
    
    Signed-off-by: Haavard Skinnemoen <hskinnemoen@atmel.com>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit d68909f4c3eee09c13d4e5c86512c6c075553dbd
Author: Len Brown <len.brown@intel.com>
Date:   Wed Aug 16 19:16:58 2006 -0400

    ACPI: avoid irqrouter_resume might_sleep oops on resume from S4
    
    __might_sleep+0x8e/0x93
    acpi_os_wait_semaphore+0x50/0xa3
    acpi_ut_acquire_mutex+0x28/0x6a
    acpi_ns_get_node+0x46/0x88
    acpi_ns_evaluate+0x2d/0xfc
    acpi_rs_set_srs_method_data+0xc5/0xe1
    acpi_set_current_resources+0x31/0x3f
    acpi_pci_link_set+0xfc/0x1a5
    irqrouter_resume+0x48/0x5f
    
    and
    
    __might_sleep+0x8e/0x93
    kmem_cache_alloc+0x2a/0x8f
    acpi_evaluate_integer+0x32/0x96
    acpi_bus_get_status+0x30/0x84
    acpi_pci_link_set+0x12a/0x1a5
    irqrouter_resume+0x48/0x5f
    
    http://bugzilla.kernel.org/show_bug.cgi?id=6810
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5672bde6355f2d12c49df1eec083d25afe489063
Author: Handle X <xhandle@gmail.com>
Date:   Mon Aug 14 22:37:27 2006 -0700

    ACPI: hotkey.c fixes, fix for potential crash of hotkey.c
    
    While going through the code, I found out some memory leaks and potential
    crashes in drivers/acpi/hotkey.c Please find the patch to fix them.
    
    This patch does the following,
    
    1. Fixes memory leaks in error paths of hotkey_write_config
    
    2. Fixes freeing unallocated pointers in the error paths of hotkey_write_config
    
    3. Uses a loop instead of linear searching for parsing the userspace
       input in get_params
    
    4. Uses array of char * instead of passing 4 pointer parameters
       explicitly into the init_{poll_}hotkey_* static functions
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Acked-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4e6e6504a4572dee3afcb0925ce92ad559e1e0db
Author: William Morrrow <william.morrow@amd.com>
Date:   Mon Aug 14 22:37:31 2006 -0700

    ACPI: Handle BIOS that resumes from S3 to suspend routine rather than resume vector
    
    A BIOS has been found that resumes from S3 to the routine that invoked suspend,
    ignoring the resume vector.  This appears to the OS as a failed S3 attempt.
    
    This same system suspend/resume's properly with Windows.
    
    It is possible to invoke the protected mode register restore routine (which
    would normally restore the sysenter registers) when the BIOS returns from
    S3.  This has no effect on a correctly running system and repairs the
    damage from the deviant BIOS.
    
    Signed-off-by: William Morrow <william.morrow@amd.com>
    Signed-off-by: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ea4c07d780a6f7b7be2d984117bd3e0a2b772e3d
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Aug 16 19:44:25 2006 +0000

    [CIFS] Do not send Query All EAs SMB when mount option nouser_xattr
    specified
    
    Pointed out by Bjoern Jacke
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 774bd8613d0188cda72408f8ffce258d73953cad
Merge: 223ddce... c9eca0b...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 16 12:41:16 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild-2.6.18

commit c9eca0b91015bc685c2f35a50efc63d73fdf943a
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Wed Aug 16 21:14:08 2006 +0200

    kbuild: correct assingment to CFLAGS with CROSS_COMPILE
    
    Some architectures change $CC in arch/$(ARCH)/Makefile
    mips is one example.
    
    That have impact on what options are supported by gcc so move all
    $(call cc-option, ...) after include of arch specific Makefile.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit acaea9ee460d0ba5a14f0066ba26cfa43dd5fdf3
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Tue Aug 15 17:20:50 2006 +0300

    IB/core: Fix SM LID/LID change with client reregister set
    
    After commit 12bbb2b7be7f5564952ebe0196623e97464b8ac5, when SM LID
    change or LID change MAD also has a client reregistration bit set,
    only CLIENT_REREGISTER event is generated.
    
    As a result, the sa_query module and the cache module don't update the
    port information, and ULPs (e.g. IPoIB) stop working.  This is the
    regression we observe as compared to 2.6.17.
    
    Rather than generate multiple events (which would have negative
    performance impact), let us simply let cache and SA query respond to
    reregister event in the same way as to LID and SM change events.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 223ddcea898940b0b02bd6e624dbba3507c97365
Merge: ca412cc... 3e03a2f...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 16 08:51:04 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6

commit 3e03a2fcb2c031062f9bf698ce999b77cd80aec4
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Aug 16 13:49:37 2006 +0200

    [S390] kernel page table allocation.
    
    Don't waste DMA capable pages for identity mapping page tables.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b18a60e7c2a7f2a17dbd57885621a42d546e2f7d
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Wed Aug 16 13:49:33 2006 +0200

    [S390] inaccessible PAV alias devices on LPAR.
    
    In some situations PAV alias devices on LPAR are not accessible.
    The initialization procedure required to enable access to PAV alias
    devices has to be performed per storage server subsystem and not
    only once per storage server.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 2f6c55fc3109bcfa1bb1a112c825e07212c20f37
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Aug 16 13:49:27 2006 +0200

    [S390] dasd slab cache alignment.
    
    The dasd_page_cache should return page addresses and therefore the
    cache must be created with an alignment of PAGE_SIZE.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit ca412cc992c3226239dd3bf896681bbf30e1b444
Merge: e0e9263... 2621e2a...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 16 01:38:39 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog

commit b5240b32b9b2b75917c478d768191862a2b190cc
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jul 26 13:32:00 2006 -0400

    ACPIPHP: allow acpiphp to build without ACPI_DOCK
    
    Change the build options for acpiphp so that it may build without being
    dependent on the ACPI_DOCK option, but yet does not allow the option of
    acpiphp being built-in when dock is built as a module.
    This does not change the previous patch for ACPI_IBM_DOCK Kconfig.
    
    For the following matrix of config options, I built an i386 kernel.
    
    Dock		acpiphp		should it build?	confirmed
    y		y		y			y
    y		n		y			y
    y		m		y			y
    m		y		no - acpiphp should	acpiphp was
    				     convert to m	converted to m
    m		n		y			y
    m		m		y			y
    n		y		y			y
    n		n		y			y
    n		m		y			y
    
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 07dd4855e7fffeb50565826e5e736509ee8f6129
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Mon Aug 14 22:37:32 2006 -0700

    ACPI: memory hotplug: remove useless message at boot time
    
    This is to remove noisy useless message at boot.  The message is a ton of
    "ACPI Exception (acpi_memory-0492): AE_ERROR, handle is no memory device"
    
    In my emulation, number of memory devices are not so many (only 6), but,
    this messages are displayed 114 times.
    
    It is showed by acpi_memory_register_notify_handler() which is called by
    acpi_walk_namespace().
    
    acpi_walk_namespace() parses all of ACPI's namespace and execute
    acpi_memory_register_notify_handler().  So, it is called for all of the
    device which is defined in namespace.  If the parsing device is not memory,
    acpi_memhotplug ignores it due to "no match" and will parse next device.
    This is normal route, not an exception.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e9a315bcae3b9e0c54fb68ef90d0095956314480
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Aug 14 22:37:24 2006 -0700

    ACPI: verbose on kset/kobject_register errors
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7daef60721e03809c7e5f8aa8491df4190f6b56f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Aug 14 22:37:24 2006 -0700

    ACPI: add message if firmware_register() init fails
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b20d2aeb0ad322cbe7fd9120acae6118231b17a3
Author: Len Brown <len.brown@intel.com>
Date:   Tue Aug 15 23:21:37 2006 -0400

    ACPI: skip smart battery init when acpi=off
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4d8316d5ea4dcf0bf15d8a06d539ed7c99e9cfbe
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Aug 14 22:37:22 2006 -0700

    ACPI: fix boot with acpi=off
    
    Fix acpi_ac/battery boot with acpi=off
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0b6c0bb3f9621b128011bcd5f65047c73afdde3b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Aug 15 02:42:25 2006 +0200

    fs/jffs2/xattr.c: remove dead code
    
    This patch removes some obvious dead code spotted by the Coverity
    checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit e0e92632715f08dddeddb72b76e04c20126e1f67
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Tue Aug 15 12:09:27 2006 +0200

    [PATCH] PATCH: 1 line 2.6.18 bugfix: modpost-64bit-fix.patch
    
    There is a small but annoying bug in scripts/mod/file2alias.c which causes
    it to generate invalid aliases for input devices on 64 bit archs. This causes
    joydev.ko to not be automaticly loaded when inserting a joystick, resulting in
    a non working joystick (for the average user).
    
    In scripts/mod/file2alias.c is the following code for generating the input
    aliases:
    static void do_input(char *alias,
                         kernel_ulong_t *arr, unsigned int min, unsigned int max)
    {
            unsigned int i;
    
            for (i = min; i < max; i++)
                    if (arr[i / BITS_PER_LONG] & (1 << (i%BITS_PER_LONG)))
                            sprintf(alias + strlen(alias), "%X,*", i);
    }
    
    On 32 bits systems, this correctly generates "0,*" for the first alias, "8,*"
    for the second etc.
    
    However on 64 bits it generates: "0,*20,*" resp "8,*28,*" Notice how it adds 20
    + first entry (hex) ! to the list of hex codes, which is 32 more then the first
    entry, thus is because the bit test above wraps at 32 bits instead of 64.
    
    scripts/mod/file2alias.c, line 379 reads:
                    if (arr[i / BITS_PER_LONG] & (1 << (i%BITS_PER_LONG)))
    That should be:
                    if (arr[i / BITS_PER_LONG] & (1L << (i%BITS_PER_LONG)))
    
    Notice the added 'L' after the 1, otherwise that is an 32 bit int instead of a
    64 bit long, and when that int gets shifted >= 32 times, appearantly the number
    by which to shift is wrapped at 5 bits ( % 32) causing it to test a bit 32 bits
    too low.
    
    The patch below makes the nescesarry 1 char change :)
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Acked-by: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80914d97aa0c61fbfd8eadd120c863b6229f0809
Merge: 74361cb... 883d4ca...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Aug 15 12:31:36 2006 -0700

    Merge branch 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2

commit 5ddaa683a513439081c9511b0d9ad490672c51c9
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Aug 15 13:35:48 2006 +0000

    [CIFS] endian errors in lanman protocol support
    	le16 compared to host-endian constant
    	u8 fed to le32_to_cpu()
    	le16 compared to host-endian constant
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit e466e4876bf39474e15d0572f2204578137ae7f5
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Aug 15 13:07:18 2006 +0000

    [CIFS] Fix oops in cifs_close due to unitialized lock sem and list in
    new POSIX locking code
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 79b9cd586f534f3f40ee66b6c27732149a5915ad
Author: Takashi YOSHII <takasi-y@ops.dti.ne.jp>
Date:   Tue Aug 15 07:26:32 2006 -0500

    [PATCH] [MTD] Maps: Add dependency on alternate probe methods to physmap
    
    map/physmap.c tries to probe "cfi_probe", "jedec_probe" and "map_rom", but
    map/Kconfig says it depends on MTD_CFI only.
    This patch adds  MTD_JEDECPROBE and MTD_ROM to the dependency condition.
    
    Signed-off-by: Takashi YOSHII <takasi-y@ops.dti.ne.jp>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit 2621e2a155140b01c6ff57b3863cda2922c2c8bd
Author: Matt LaPlante <kernel1@cyberdogtech.com>
Date:   Wed Jul 5 01:20:51 2006 +0000

    [WATCHDOG] Kconfig typos fix.
    
    Three typos in drivers/char/watchdog/Kconfig...
    
    Signed-off-by: Matt LaPlante <kernel1@cyberdogtech.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>

commit c4e6952ffd71b263a64d1a9d79812446130560a5
Author: Takashi YOSHI <takasi-y@ops.dti.ne.jp>
Date:   Mon Aug 14 19:48:30 2006 -0500

    [PATCH] MTD: Add Macronix MX29F040 to JEDEC
    
    Signed-off-by: Takashi YOSHII <takasi-y@ops.dti.ne.jp>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit 74361cb6828398a96167b3234e186fbd731e5f30
Author: Trond Myklebust <trond.myklebust@fys.uio.no>
Date:   Mon Aug 14 08:54:48 2006 -0700

    [PATCH] fcntl(F_SETSIG) fix
    
    fcntl(F_SETSIG) no longer works on leases because
    lease_release_private_callback() gets called as the lease is copied in
    order to initialise it.
    
    The problem is that lease_alloc() performs an unnecessary initialisation,
    which sets the lease_manager_ops.  Avoid the problem by allocating the
    target lease structure using locks_alloc_lock().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1d7ea7324ae7a59f8e17e4ba76a2707c1e6f24d2
Author: Alexander Zarochentsev <zam@namesys.com>
Date:   Sun Aug 13 23:24:27 2006 -0700

    [PATCH] fuse: fix error case in fuse_readpages
    
    Don't let fuse_readpages leave the @pages list not empty when exiting
    on error.
    
    [akpm@osdl.org: kernel-doc fixes]
    Signed-off-by: Alexander Zarochentsev <zam@namesys.com>
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9b41ea7289a589993d3daabc61f999b4147872c4
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Aug 13 23:24:26 2006 -0700

    [PATCH] workqueue: remove lock_cpu_hotplug()
    
    Use a private lock instead.  It protects all per-cpu data structures in
    workqueue.c, including the workqueues list.
    
    Fix a bug in schedule_on_each_cpu(): it was forgetting to lock down the
    per-cpu resources.
    
    Unfixed long-standing bug: if someone unplugs the CPU identified by
    `singlethread_cpu' the kernel will get very sick.
    
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2b25742556b1a351ce4821f6feddcba23bdd930b
Author: Michal Januszewski <spock@gentoo.org>
Date:   Sun Aug 13 23:24:26 2006 -0700

    [PATCH] fbdev: include backlight.h only when __KERNEL__ is defined
    
    linux/backlight.h pulls in header files (eg.  ioport.h) that break
    compilation of userspace programs.  To solve the problem, only include
    backlight.h in fb.h if compiling kernel stuff.
    
    Signed-off-by: Michal Januszewski <spock@gentoo.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e579dcbf23604cb33c08b5c3c3ac06ca36e7c683
Author: john stultz <johnstul@us.ibm.com>
Date:   Sun Aug 13 23:24:24 2006 -0700

    [PATCH] futex_handle_fault always fails
    
    We found this issue last week w/ the -RT kernel, but it seems the same
    issue is in mainline as well.
    
    Basically it is possible for futex_unlock_pi to return without actually
    freeing the lock.  This is due to buggy logic in the use of
    futex_handle_fault() and its attempt argument in a failure case.
    
    Looking at futex.c the logic is as follows:
    
    1) In futex_unlock_pi() we start w/ ret=0 and we go down to the first
       futex_atomic_cmpxchg_inatomic(), where we find uval==-EFAULT.  We then
       jump to the pi_faulted label.
    
    2) From pi_faulted: We increment attempt, unlock the sem and hit the
       retry label.
    
    3) From the retry label, with ret still zero, we again hit EFAULT on the
       first futex_atomic_cmpxchg_inatomic(), and again goto the pi_faulted
       label.
    
    4) Again from pi_faulted: we increment attempt and enter the
       conditional, where we call futex_handle_fault.
    
    5) futex_handle_fault fails, and we goto the out_unlock_release_sem
       label.
    
    6) From out_unlock_release_sem we return, and since ret is still zero,
       we return without error, while never actually unlocking the lock.
    
    Issue #1: at the first futex_atomic_cmpxchg_inatomic() we should probably
    be setting ret=-EFAULT before jumping to pi_faulted: However in our case
    this doesn't really affect anything, as the glibc we're using ignores the
    error value from futex_unlock_pi().
    
    Issue #2: Look at futex_handle_fault(), its first conditional will return
    -EFAULT if attempt is >= 2.  However, from the "if(attempt++)
    futex_handle_fault(attempt)" logic above, we'll *never* call
    futex_handle_fault when attempt is less then two.  So we never get a chance
    to even try to fault the page in.
    
    The following patch addresses these two issues by 1) Always setting ret to
    -EFAULT if futex_handle_fault fails, and 2) Removing the = in
    futex_handle_fault's (attempt >= 2) check.
    
    I'm really not sure this is the right fix, but wanted to bring it up so
    folks knew the issue is alive and well in the current -git tree.  From
    looking at the git logs the logic was first introduced (then later copied
    to other places) in the following commit almost a year ago:
    
    http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=4732efbeb997189d9f9b04708dc26bf8613ed721;hp=5b039e681b8c5f30aac9cc04385cc94be45d0823
    
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6997a6faaa129a1c91775f7344c8d371a05178ea
Author: Kirill Korotaev <dev@sw.ru>
Date:   Sun Aug 13 23:24:23 2006 -0700

    [PATCH] sys_getppid oopses on debug kernel
    
    sys_getppid() optimization can access a freed memory.  On kernels with
    DEBUG_SLAB turned ON, this results in Oops.  As Dave Hansen noted, this
    optimization is also unsafe for memory hotplug.
    
    So this patch always takes the lock to be safe.
    
    [oleg@tv-sign.ru: simplifications]
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Cc: <stable@kernel.org>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 012c437d03cb299814e58ac8d574f7510f5989a5
Author: Horms <horms@verge.net.au>
Date:   Sun Aug 13 23:24:22 2006 -0700

    [PATCH] Change panic_on_oops message to "Fatal exception"
    
    Previously the message was "Fatal exception: panic_on_oops", as introduced
    in a recent patch whith removed a somewhat dangerous call to ssleep() in
    the panic_on_oops path.  However, Paul Mackerras suggested that this was
    somewhat confusing, leadind people to believe that it was panic_on_oops
    that was the root cause of the fatal exception.  On his suggestion, this
    patch changes the message to simply "Fatal exception".  A suitable oops
    message should already have been displayed.
    
    Signed-off-by: Simon Horman <horms@verge.net.au>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 485311a23c72c87332f9a55ce25e650e40ae3fc7
Author: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
Date:   Sun Aug 13 23:24:20 2006 -0700

    [PATCH] dm: BUG/OOPS fix
    
    Fix BUG I tripped on while testing failover and multipathing.
    
    BUG shows up on error path in multipath_ctr() when parse_priority_group()
    fails after returning at least once without error.  The fix is to
    initialize m->ti early - just after alloc()ing it.
    
    BUG: unable to handle kernel NULL pointer dereference at virtual address 00000000
     printing eip:
    c027c3d2
    *pde = 00000000
    Oops: 0000 [#3]
    Modules linked in: qla2xxx ext3 jbd mbcache sg ide_cd cdrom floppy
    CPU:    0
    EIP:    0060:[<c027c3d2>]    Not tainted VLI
    EFLAGS: 00010202   (2.6.17.3 #1)
    EIP is at dm_put_device+0xf/0x3b
    eax: 00000001   ebx: ee4fcac0   ecx: 00000000   edx: ee4fcac0
    esi: ee4fc4e0   edi: ee4fc4e0   ebp: 00000000   esp: c5db3e78
    ds: 007b   es: 007b   ss: 0068
    Process multipathd (pid: 15912, threadinfo=c5db2000 task=ef485a90)
    Stack: ec4eda40 c02816bd ee4fc4c0 00000000 f7e89498 f883e0bc c02816f6 f7e89480
           f7e8948c c0281801 ffffffea f7e89480 f883e080 c0281ffe 00000001 00000000
           00000004 dfe9cab8 f7a693c0 f883e080 f883e0c0 ca4b99c0 c027c6ee 01400000
    Call Trace:
     <c02816bd> free_pgpaths+0x31/0x45  <c02816f6> free_priority_group+0x25/0x2e
     <c0281801> free_multipath+0x35/0x67  <c0281ffe> multipath_ctr+0x123/0x12d
     <c027c6ee> dm_table_add_target+0x11e/0x18b  <c027e5b4> populate_table+0x8a/0xaf
     <c027e62b> table_load+0x52/0xf9  <c027ec23> ctl_ioctl+0xca/0xfc
     <c027e5d9> table_load+0x0/0xf9  <c0152146> do_ioctl+0x3e/0x43
     <c0152360> vfs_ioctl+0x16c/0x178  <c01523b4> sys_ioctl+0x48/0x60
     <c01029b3> syscall_call+0x7/0xb
    Code: 97 f0 00 00 00 89 c1 83 c9 01 80 e2 01 0f 44 c1 88 43 14 8b 04 24 59 5b 5e 5f 5d c3 53 89 c1 89 d3 ff 4a 08 0f 94 c0 84 c0 74 2a <8b> 01 8b 10 89 d8 e8 f6 fb ff ff 8b 03 8b 53 04 89 50 04 89 02
    EIP: [<c027c3d2>] dm_put_device+0xf/0x3b SS:ESP 0068:c5db3e78
    
    Signed-off-by: Michal Miroslaw <mirq-linux@rere.qmqm.pl>
    Acked-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 657b3010d8f8a72195dfcbe63040127d596f0b14
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Aug 13 23:24:19 2006 -0700

    [PATCH] panic.c build fix
    
    kernel/panic.c: In function 'add_taint':
    kernel/panic.c:176: warning: implicit declaration of function 'debug_locks_off'
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3773dc92055f219c2f2403f9de774b8ad41a9214
Author: Jan Blunck <jblunck@suse.de>
Date:   Sun Aug 13 23:24:19 2006 -0700

    [PATCH] fix hrtimer percpu usage typo
    
    The percpu variable is used incorrectly in switch_hrtimer_base().
    
    Signed-off-by: Jan Blunck <jblunck@suse.de>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 95f8797f42b058333d1e6f0d1dcd8edf5dc6c244
Author: Dan Bastone <dan@pwienterprises.com>
Date:   Sun Aug 13 23:24:18 2006 -0700

    [PATCH] initialize parts of udf inode earlier in create
    
    Eric says:
    
    > I saw an oops down this path when trying to create a new file on a UDF
    > filesystem which was internally marked as readonly, but mounted rw:
    >
    > udf_create
    >         udf_new_inode
    >                 new_inode
    >                         alloc_inode
    >                         	udf_alloc_inode
    >                 udf_new_block
    >                         returns EIO due to readonlyness
    >                 iput (on error)
    
    I ran into the same issue today, but when listing a directory with
    invalid/corrupt entries:
    
    udf_lookup
            udf_iget
                    get_new_inode_fast
                            alloc_inode
                                    udf_alloc_inode
                    __udf_read_inode
                            fails for any reason
                    iput (on error)
                            ...
    
    The following patch to udf_alloc_inode() should take care of both (and
    other similar) cases, but I've only tested it with udf_lookup().
    
    Signed-off-by: Dan Bastone <dan@pwienterprises.com>
    Cc: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1725cd0ae07bb31f68803edcc5bdc99952c7d2f4
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Aug 13 23:24:17 2006 -0700

    [PATCH] adfs error message fix
    
    Don't use NULL as a printf control string.  Fixes bug #6889.
    
    Cc: Ralph Corderoy <ralph@inputplus.co.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b64ef8afa58f397e1eaba2bd9ecaa6812064d464
Author: Edgar Hucek <hostmaster@ed-soft.at>
Date:   Sun Aug 13 23:24:16 2006 -0700

    [PATCH] add imacfb documentation and detection
    
    Add basic Machine detection to imacfb and some Ducumentation bits for
    imacfb.
    
    Signed-off-by: Edgar Hucek <hostmaster@ed-soft.at>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 09e590e5d5a93f2eaa748a89c623258e6bad1648
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Aug 12 10:55:07 2006 +0200

    [PATCH] smc91x: disable DMA mode on the logicpd pxa270
    
    Enabling PXA DMA for the smc91x on the logicpd pxa270 produces
    unacceptable interference with the TFT panel, so disable it.  Also
    delete the lpd270 versions of the SMC_{in,out}[bl]() macros, as they
    aren't used, since the board only supports 16bit accesses.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e9fa4f7bd291c29a785666e2fa5a9cf3241ee6c3
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Aug 13 20:12:58 2006 -0700

    [INET]: Use pskb_trim_unique when trimming paged unique skbs
    
    The IPv4/IPv6 datagram output path was using skb_trim to trim paged
    packets because they know that the packet has not been cloned yet
    (since the packet hasn't been given to anything else in the system).
    
    This broke because skb_trim no longer allows paged packets to be
    trimmed.  Paged packets must be given to one of the pskb_trim functions
    instead.
    
    This patch adds a new pskb_trim_unique function to cover the IPv4/IPv6
    datagram output path scenario and replaces the corresponding skb_trim
    calls with it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dcb7cd97f133f7cfbd181149a1e60215a869f895
Author: Mark Huang <mlhuang@cs.princeton.edu>
Date:   Sun Aug 13 18:57:54 2006 -0700

    [NETFILTER]: ulog: fix panic on SMP kernels
    
    Fix kernel panic on various SMP machines. The culprit is a null
    ub->skb in ulog_send(). If ulog_timer() has already been scheduled on
    one CPU and is spinning on the lock, and ipt_ulog_packet() flushes the
    queue on another CPU by calling ulog_send() right before it exits,
    there will be no skbuff when ulog_timer() acquires the lock and calls
    ulog_send(). Cancelling the timer in ulog_send() doesn't help because
    it has already been scheduled and is running on the first CPU.
    
    Similar problem exists in ebt_ulog.c and nfnetlink_log.c.
    
    Signed-off-by: Mark Huang <mlhuang@cs.princeton.edu>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0eff66e625306a794ecba4b29ed12f7a147ce219
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 13 18:57:28 2006 -0700

    [NETFILTER]: {arp,ip,ip6}_tables: proper error recovery in init path
    
    Neither of {arp,ip,ip6}_tables cleans up behind itself when something goes
    wrong during initialization.
    
    Noticed by Rennie deGraaf <degraaf@cpsc.ucalgary.ca>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7ee66fcb94cb8be77d5f34cce7d315d11759f9c1
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Aug 13 18:56:26 2006 -0700

    [LLC]: multicast receive device match
    
    Fix from Aji_Srinivas@emc.com, STP packets are incorrectly received on
    all LLC datagram sockets, whichever interface they are bound to.  The
    llc_sap datagram receive logic sends packets with a unicast
    destination MAC to one socket bound to that SAP and MAC, and multicast
    packets to all sockets bound to that SAP. STP packets are multicast,
    and we do need to know on which interface they were received.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d49c73c729e2ef644558a1f441c044bfacdc9744
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Aug 13 18:55:53 2006 -0700

    [IPSEC]: Validate properly in xfrm_dst_check()
    
    If dst->obsolete is -1, this is a signal from the
    bundle creator that we want the XFRM dst and the
    dsts that it references to be validated on every
    use.
    
    I misunderstood this intention when I changed
    xfrm_dst_check() to always return NULL.
    
    Now, when we purge a dst entry, by running dst_free()
    on it.  This will set the dst->obsolete to a positive
    integer, and we want to return NULL in that case so
    that the socket does a relookup for the route.
    
    Thus, if dst->obsolete<0, let stale_bundle() validate
    the state, else always return NULL.
    
    In general, we need to do things more intelligently
    here because we flush too much state during rule
    changes.  Herbert Xu has some ideas wherein the key
    manager gives us some help in this area.  We can also
    use smarter state management algorithms inside of
    the kernel as well.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1c7628bd7a458faf7c96ef521f6d3a5ea9b106b8
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Aug 13 18:06:02 2006 -0700

    [NETFILTER]: xt_hashlimit: fix limit off-by-one
    
    Hashlimit doesn't account for the first packet, which is inconsistent
    with the limit match.
    
    Reported by ryan.castellucci@gmail.com, netfilter bugzilla #500.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 97c802a113989800430a981b6f36b14c62163d37
Author: Phil Oester <kernel@linuxace.com>
Date:   Sun Aug 13 18:05:35 2006 -0700

    [NETFILTER]: xt_string: fix negation
    
    The xt_string match is broken with ! negation.
    This resolves a portion of netfilter bugzilla #497.
    
    Signed-off-by: Phil Oester <kernel@linuxace.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18b6fe64d4d1f6e0a2c71429a5e5074f43e29203
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Aug 13 18:05:09 2006 -0700

    [TCP]: Fix botched memory leak fix to tcpprobe_read().
    
    Somehow I clobbered James's original fix and only my
    subsequent compiler warning change went in for that
    changeset.
    
    Get the real fix in there.
    
    Noticed by Jesper Juhl.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0c5a64552e3c57d7f9eb593c6ce21a285ac86b4
Author: Yoav Steinberg <yoav@monfort.co.il>
Date:   Sun Aug 13 14:17:12 2006 +0100

    [ARM] 3752/1: fix versatile flash resource map
    
    Patch from Yoav Steinberg
    
    Flash resource mapping for versatile machine included one extra byte for the end address. This results in failure to map other resources on physical address directly after the NOR flash.
    
    Signed-off-by: Yoav Steinberg <yoav@monfort.co.il>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66abda5e1fa48e12e06d0b68746b0e67202a97d2
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Aug 11 16:52:09 2006 +0000

    [CIFS] Fix oops when negotiating lanman and no password specified
    
    Pointed out by Guenter Kukkukk
    
    Signed-of-by: Steve French <sfrench@us.ibm.com>
    (cherry picked from bbf33d512da608c7221fec42b56b9ef89c25a5ee commit)

commit 7ee1af765dfa3146aef958258003245e082284e5
Author: Jeremy Allison <jra@samba.com>
Date:   Wed Aug 2 21:56:33 2006 +0000

    [CIFS]
    
    Allow Windows blocking locks to be cancelled via a
    CANCEL_LOCK call. TODO - restrict this to servers
    that support NT_STATUS codes (Win9x will probably
    not support this call).
    
    Signed-off-by: Jeremy Allison <jra@samba.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    (cherry picked from 570d4d2d895569825d0d017d4e76b51138f68864 commit)

commit 6c3d8909d85b2c18fd7a6e64f0ca757a257b40fa
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Jul 31 22:46:20 2006 +0000

    [CIFS] Allow cifsd to suspend if connection is lost
    
    Make cifsd allow us to suspend if it has lost the connection with a server
    
    Ref: http://bugzilla.kernel.org/show_bug.cgi?id=6811
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    (cherry picked from 27bd6cd87b0ada66515ad49bc346d77d1e9d3e05 commit)

commit 5da07b0208066fd3544ecf2b521fc7a2e0228ad5
Author: Steve French <sfrench@us.ibm.com>
Date:   Sun Jul 16 21:33:15 2006 +0000

    [CIFS] Make midState usage more consistent
    
    Although harmless, we were sometimes treating midState like it contained
    flags but they are exclusive states, and this makes that more clear.
    
    Signed-off-by: Jeremy Allison <jra@samba.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    (cherry picked from 586c057c3a68dd6ae0f3ba94fbf76798b1558074 commit)

commit 14a441a2b4ee1dfc00ec822d91d9fb20f401c62f
Author: Steve French <sfrench@us.ibm.com>
Date:   Sun Jul 16 04:32:51 2006 +0000

    [CIFS] spinlock protect read of last srv response time in timeout path
    
    Signed-off-by: Jeremy Allison <jra@samba.org>
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    (cherry picked from b33a3f55e54fd210fc043eafcf83728b03bc9e02 commit)

commit 3a5ff61c18659443f76bad6cf06f60103046de5d
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Jul 14 22:37:11 2006 +0000

    [CIFS] Do not time out posix brl requests when using new posix setfileinfo
    request and do not time out slow requests to a server that is still responding
    well to other threads
    
    Suggested by jra of Samba team
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>
    (cherry picked from 89b57148115479eef074b8d3f86c4c86c96ac969 commit)

commit f54fa84dda211f68f65002efa44142207c886c79
Author: Orjan Friberg <orjan.friberg@axis.com>
Date:   Tue Aug 8 23:31:40 2006 -0700

    USB: usbtest.c: unsigned retval makes ctrl_out return 0 in case of error
    
    In my quest to try and figure out why test 14 (control write) doesn't
    work with my EZ-USB board, I noticed that sometimes testusb reported
    no error even though the kernel log complained "byte 0 is 0 not 2" etc.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2011e9249a252e0655807fbe6841f6cfe6b6c197
Author: Jonathan Davies <jjd27@cam.ac.uk>
Date:   Wed Aug 9 10:48:03 2006 +0100

    USB: ftdi_sio driver - new PIDs
    
    Signed-off-by: Jonathan Davies <jjd27@cam.ac.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 922fdaa692e23bf57a10c16047d993c181991579
Author: Norihiko Tomiyama <norihiko.tomiyama@ctc-g.co.jp>
Date:   Tue Aug 8 14:31:25 2006 +0900

    USB: Additional PID for SHARP W-ZERO3
    
    I write a patch for ipaq.c.
    Would you like to add upstream tree ?
    
    This patch enables a support of "SHARP W-ZERO3(WS004SH)" and "SHARP W-ZERO3[es](WS007SH)".
    
    From: Norihiko Tomiyama <norihiko.tomiyama@ctc-g.co.jp>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7af569abc33ce09d3cb93e9b2160efff2531c59f
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jul 19 15:39:46 2006 +0200

    USB: appletouch: fix atp_disconnect
    
    appletouch uses urb->transfer_dma after having freed the urb, this shows
    up only if the system is compiled with slab debugging. This patch fixes
    it by reordering the free calls.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 919aeadcfa8e72ec2d6bf7bd405a16c40b8d8ecf
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Aug 3 09:54:24 2006 +0900

    USB: removed a unbalanced #endif from ohci-au1xxx.c
    
    This patch has removed a unbalanced #endif from ohci-au1xxx.c .
    Please apply before 2.6.18 release.
    
    Error message was:
    In file included from drivers/usb/host/ohci-hcd.c:909:
    drivers/usb/host/ohci-au1xxx.c:113:2: #endif without #if
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b41ee5d62211825cbe5e583cafc2255c91385aee
Author: David Kuehling <dvdkhlng@gmx.de>
Date:   Mon Aug 7 10:18:48 2006 -0400

    USB: unusual_devs entry for A-VOX WSX-300ER MP3 player
    
    This patch (as763) adds an unusual_devs entry for the A-VOX WSX-300ER MP3
    player.
    
    From: David Kuehling <dvdkhlng@gmx.de>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f0c1dc07309f0fe3409b92eb170b648a487b1e81
Author: Dave Jones <davej@redhat.com>
Date:   Wed Aug 9 15:25:09 2006 -0400

    PCI: remove dead HOTPLUG_PCI_SHPC_PHPRM_LEGACY option.
    
    Nothing in the tree references this config option.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e50d1088bf2e5a68068c5f602be1dcc3e52dc873
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Tue Aug 8 09:44:26 2006 -0400

    pciehp: make pciehp build for powerpc
    
    Make pciehp build on powerpc
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Acked-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1cc6daf2349ea07830906e05164256ab36d82697
Author: Pavel Machek <pavel@suse.cz>
Date:   Tue Aug 8 01:37:15 2006 +0200

    pr_debug() should not be used in drivers
    
    pr_debug() should not be used from drivers, add comment saying that.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e9539ee73a9b85bdc6eab9e15dd1ee639a815406
Author: Brandon Philips <brandon@ifup.org>
Date:   Tue Aug 1 14:04:17 2006 -0500

    genhd.c reference in Documentation/kobjects.txt
    
    block/genhd.c no longer in drivers/.  Update Documentation/kobjects.txt
    
    Signed-off-by: Brandon Philips <brandon@ifup.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4ca8a3c1b17cde8241eb9157484519427fa5bf91
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Thu Aug 3 12:28:11 2006 -0400

    Add stable branch to maintainers file
    
    While helping someone to submit a patch to the stable branch, I noticed
    that the stable branch is not listed in the MAINTAINERS file.  This was
    after I went there to look for the email addresses for the stable branch
    list (stable@kernel.org).
    
    This patch adds the stable branch to the maintainers file so that people
    can find where to send patches when they have a fix for the stable team.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0ee6a17389ceef65f1a86c38872fa98f08489022
Author: Jean Delvare <khali@linux-fr.org>
Date:   Fri Aug 11 08:30:31 2006 +0200

    ACPI: fix kfree in i2c_ec error path
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a19aa5c5fdda8b556ab238177ee27c5ef7873c94
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Aug 11 08:56:57 2006 -0700

    IB/mthca: Fix potential AB-BA deadlock with CQ locks
    
    When destroying a QP, mthca locks both the QP's send CQ and receive
    CQ.  However, the following scenario is perfectly valid:
    
        QP_a: send_cq == CQ_x, recv_cq == CQ_y
        QP_b: send_cq == CQ_y, recv_cq == CQ_x
    
    The old mthca code simply locked send_cq and then recv_cq, which in
    this case could lead to an AB-BA deadlock if QP_a and QP_b were
    destroyed simultaneously.
    
    We can fix this by changing the locking code to lock the CQ with the
    lower CQ number first, which will create a consistent lock ordering.
    Also, the second CQ is locked with spin_lock_nested() to tell lockdep
    that we know what we're doing with the lock nesting.
    
    This bug was found by lockdep.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c4e321b85a89d7cd392d3105b2c033a6c58ed337
Merge: f8872f4... dd2c609...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 10 15:10:01 2006 -0700

    Merge gregkh@master.kernel.org:/home/rmk/linux-2.6-mmc

commit f8872f4cb4b58f06a27d0443668d12d49f3b5d31
Merge: 99baa75... 574dc0a...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 10 15:07:17 2006 -0700

    Merge gregkh@master.kernel.org:/home/rmk/linux-2.6-arm

commit e54b82d739d4a2ef992976c8c0692cdf89286420
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Thu Aug 10 10:46:56 2006 -0700

    IB/mthca: Make fence flag work for send work requests
    
    The fence bit needs to be set in the doorbell too, not just the WQE.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d0710c7c9eea2145a0614f39dbe9dc8cb4ae14da
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Thu Aug 10 15:45:16 2006 +0200

    [S390] dasd calls kzalloc while holding a spinlock.
    
    The dasd function dasd_set_uid calls kzalloc while holding the
    dasd_devmap_lock. Rearrange the code to do the memory allocation
    outside the lock.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 8d3d35b4e20dc2e678fc7cb51165905b5a32fb76
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Aug 9 14:14:50 2006 -0700

    [PATCH] sky2: phy power problems on 88e805X chips
    
    On the 88E805X chipsets (used in laptops), the PHY was not getting powered
    out of shutdown properly. The variable reg1 was getting reused incorrectly.
    This is probably the cause of the bug.
    	http://bugzilla.kernel.org/show_bug.cgi?id=6471
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a34b6fc04d58ad72fe0cc74cd448f4551bd2ebaf
Author: Martin Hicks <mort@bork.org>
Date:   Wed Jul 5 15:06:13 2006 -0400

    [PATCH] libata: PHY reset requires writing 0x4 to SControl
    
    Hi,
    
    Reading the Intel VSC and AHCI it seems like writing 0x302 is incorrect.
    The only valid values are 4, 1 and 0.  Writing 4 disables the
    PHY.
    
    Signed-off-by: Martin Hicks <mort@bork.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 51704c609fcf256dacfcfae3622eb6ef53ac5b48
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Wed Aug 9 18:36:22 2006 +0800

    [PATCH] libata: Use ATA_FLAG_PIO_POLLING for pdc_adma
    
    pdc_adma was overlooked and broken by the irq-pio patch:
    Only HSM_ST_LAST interrupts should be delivered to this LLDD.
    
    Adding ATA_FLAG_PIO_POLLING to pdc_adma fixes the problem (temporarily),
    before we convert the irq handler of pdc_adma to handle all interrupts.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 99baa75231e35aca41b9718adfb07f45ce40e84c
Merge: fff6425... 0e1edbd...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 9 23:57:52 2006 -0700

    Merge git://oss.sgi.com:8090/nathans/xfs-rc-2.6

commit 0e1edbd99994270023cea5afe593f972eb09a778
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Aug 10 14:40:41 2006 +1000

    [XFS] Fix xfs_free_extent related NULL pointer dereference.
    
    We recently fixed an out-of-space deadlock in XFS, and part of that fix
    involved the addition of the XFS_ALLOC_FLAG_FREEING flag to some of the
    space allocator calls to indicate they're freeing space, not allocating
    it. There was a missed xfs_alloc_fix_freelist condition test that did not
    correctly test "flags". The same test would also test an uninitialised
    structure field (args->userdata) and depending on its value either would
    or would not return early with a critical buffer pointer set to NULL.
    
    This fixes that up, adds asserts to several places to catch future botches
    of this nature, and skips sections of xfs_alloc_fix_freelist that are
    irrelevent for the space-freeing case.
    
    SGI-PV: 955303
    SGI-Modid: xfs-linux-melb:xfs-kern:26743a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit fff642570dc47ab76491fe81ee6599269c4eb13e
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Aug 9 17:36:15 2006 -0700

    [IPX]: Fix typo, ipxhdr() --> ipx_hdr()
    
    Noticed by Dave Jones.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 06aebfb7faa13258af5230ff3d1587ece6c0250e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Aug 9 16:52:04 2006 -0700

    [IPV6]: The ifa lock is a BH lock
    
    The ifa lock is expected to be taken in BH context (by addrconf timers)
    so we must disable BH when accessing it from user context.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 79860a9a79a17f1bed0713680a3995467405ba49
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Aug 9 15:04:58 2006 +0100

    [PATCH] PATCH: 2.6.18 oops on boot fix for IDE
    
    When the IDE fix for Jmicron went in one piece went walking somewhere
    (send log shows my end somehow). Without this sometimes you get an oops
    on boot.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a4657141091c2f975fa35ac1ad28fffdd756091e
Merge: 54f58d6... 7c91767...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 9 11:49:13 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 54f58d6c4f15f3bdf15d43fa640ca6de9487f50e
Merge: 897e11a... 013b68b...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 9 11:46:30 2006 -0700

    Merge branch 'upstream-greg' of gregkh@master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit 897e11a40baf24224bd0edc948f908ed07c5675d
Merge: ad55269... 22aac08...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 9 11:45:59 2006 -0700

    Merge branch 'upstream-greg' of gregkh@master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev

commit 7c91767a6b701543c93ebcd611dab61deff3dad1
Author: Dmitry Mishin <dim@openvz.org>
Date:   Wed Aug 9 02:25:54 2006 -0700

    [NET]: add_timer -> mod_timer() in dst_run_gc()
    
    Patch from Dmitry Mishin <dim@openvz.org>:
    
    Replace add_timer() by mod_timer() in dst_run_gc
    in order to avoid BUG message.
    
           CPU1                            CPU2
    dst_run_gc()  entered           dst_run_gc() entered
    spin_lock(&dst_lock)                   .....
    del_timer(&dst_gc_timer)         fail to get lock
           ....                         mod_timer() <--- puts
                                                     timer back
                                                     to the list
    add_timer(&dst_gc_timer) <--- BUG because timer is in list already.
    
    Found during OpenVZ internal testing.
    
    At first we thought that it is OpenVZ specific as we
    added dst_run_gc(0) call in dst_dev_event(),
    but as Alexey pointed to me it is possible to trigger
    this condition in mainstream kernel.
    
    F.e. timer has fired on CPU2, but the handler was preeempted
    by an irq before dst_lock is tried.
    Meanwhile, someone on CPU1 adds an entry to gc list and
    starts the timer.
    If CPU2 was preempted long enough, this timer can expire
    simultaneously with resuming timer handler on CPU1, arriving
    exactly to the situation described.
    
    Signed-off-by: Dmitry Mishin <dim@openvz.org>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebc4599990898ecaaace7ed40dfad6d8d9f2a24a
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Wed Aug 9 10:30:22 2006 +0200

    [S390] dasd set offline kernel bug.
    
    The request queue flush function of the dasd driver has to dequeue
    the requests first and then call the end request function. Otherwise
    a kernel bug in ll_rw_block.c might get triggered.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 22aac0896b1b0b8cabaf00714c55dd12f25d5738
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Aug 8 14:08:59 2006 +0900

    [PATCH] libata: clear sdev->locked on door lock failure
    
    SCSI EH locks door if sdev->locked is set.  Sometimes door lock
    command fails continuously (e.g. when medium is not present) and as
    libata uses EH to acquire sense data, this easily creates a loop where
    a failed lock door invokes EH and EH issues lock door on completion.
    
    This patch clears sdev->locked on door lock failure to break this
    loop.  This problem has been spotted and diagnosed by Unicorn Chang
    <uchang@tw.ibm.com>.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 85455dd34219376dcc7dce94bea67058f0b7d731
Author: Keith Owens <kaos@ocs.com.au>
Date:   Tue Aug 8 13:51:02 2006 +1000

    [PATCH] Fix compile problem when sata debugging is on
    
    Fix a sata debug print statement that still uses an old variable name.
    
    Signed-off-by: Keith Owens <kaos@ocs.com.au>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 013b68bf7cb4edfb8753aac9bde3cb60c84bc067
Author: Brice Goglin <brice@myri.com>
Date:   Wed Aug 9 00:07:53 2006 -0400

    [PATCH] myri10ge: always re-enable dummy rdmas in myri10ge_resume
    
    Dummy RDMA are always enabled on device startup since commit
    9a71db721a2cbb9921b929b2699ab181f5a3c6c0 (to work around buggy
    PCIe chipsets which do not implement resending properly). But,
    we also need to always re-enable them when resuming the device.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c71d6be54e92c4b2d31faf51850354aff22b82b0
Merge: 9f73763... 77f3f87...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Aug 8 23:59:39 2006 -0400

    Merge branch 'tj-upstream-fixes' of git://htj.dyndns.org/libata-tj into upstream-fixes

commit 2f96740c26f1dcff9111dca3e01379ab12aafde5
Merge: 9f73763... 782a667...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Aug 8 23:48:48 2006 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 7b1ba8de569460894efa892457af7a37c0d574f9
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Aug 8 16:48:51 2006 -0700

    [IPX]: Another nonlinear receive fix
    
    Need to check some more cases in IPX receive.  If the skb is purely
    fragments, the IPX header needs to be extracted. The function
    pskb_may_pull() may in theory invalidate all the pointers in the skb,
    so references to ipx header must be refreshed.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70f8e78e150425b01c1099087ad3decacf7e4ccf
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Aug 8 16:47:37 2006 -0700

    [RTNETLINK]: Fix IFLA_ADDRESS handling.
    
    The ->set_mac_address handlers expect a pointer to a
    sockaddr which contains the MAC address, whereas
    IFLA_ADDRESS provides just the MAC address itself.
    
    So whip up a sockaddr to wrap around the netlink
    attribute for the ->set_mac_address call.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ad552692a4489917fa4b71f9c6a91baae4aee799
Merge: 20dbfad... 0851fb4...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Aug 8 14:19:23 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb

commit 7682a4c624e0011b5f3e8dd3021dc54961260d97
Author: Dean Nelson <dcn@sgi.com>
Date:   Tue Aug 8 15:03:29 2006 -0500

    [IA64-SGI] Silent data corruption caused by XPC V2.
    
    Jack Steiner identified a problem where XPC can cause a silent
    data corruption.  On module load, the placement may cause the
    xpc_remote_copy_buffer to span two physical pages.  DMA transfers are
    done to the start virtual address translated to physical.
    
    This patch changes the buffer from a statically allocated buffer to a
    kmalloc'd buffer.  Dean Nelson reviewed this before posting.  I have
    tested it in the configuration that was showing the memory corruption
    and verified it works.  I also added a BUG_ON statement to help catch
    this if a similar situation is encountered.
    
    Signed-off-by: Robin Holt <holt@sgi.com>
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0851fb48486c044476b019029245cb9b348fca33
Author: Yeasah Pell <yeasah@schwide.com>
Date:   Tue Aug 8 09:10:18 2006 -0300

    V4L/DVB (4431): Add several error checks to dst
    
    Signed-off-by: Yeasah Pell <yeasah@shwide.com>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit eafa98177a388700d613c187c7716e11869b7171
Author: Diego Calleja <diegocg@gmail.com>
Date:   Tue Aug 8 09:10:17 2006 -0300

    V4L/DVB (4430): Quickcam_messenger compilation fix
    
    In bugzilla #6943, Maxim Britov reported:
    "I can enable Logitech quickcam support in .config, but it want be compile.
    I have to add into drivers/media/video/Makefile:
    obj-$(CONFIG_USB_QUICKCAM_MESSENGER)    += usbvideo/"
    He's right, just enable that driver as module while disabling every other
    driver that gets into that directory, nothing will get compiled.
    This patch fixes the Makefile.
    
    Signed-off-by: Diego Calleja <diegocg@gmail.com>
    Acked-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8a016dcc8383bedc731bca9fdedae77ff52a6ad7
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Aug 8 09:10:16 2006 -0300

    V4L/DVB (4427): Fix V4L1 Compat for VIDIOCGPICT ioctl
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 43c560fa59ef2688d891f6431e972b7763b73a00
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Tue Aug 8 09:10:15 2006 -0300

    V4L/DVB (4419): Turn on the Low Noise Amplifier of the Samsung tuners.
    
    Without the LNA these tuners perform very poorly (read 'unwatchable') when
    the signal is weak.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e335fada5afef0658038b6bec432d37f332da9fc
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Tue Aug 8 09:10:15 2006 -0300

    V4L/DVB (4418): Fix broken msp3400 module option 'standard'
    
    Due to a wrong statement order the 'standard' module option didn't
    work for 'G' model chips.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 17531c168c7b8138b5379a85de788798fc6696e1
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Tue Aug 8 09:10:12 2006 -0300

    V4L/DVB (4416): Cx25840_read4 has wrong endianness.
    
    cx25840_read4 assembled the bytes in the wrong order.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b02dc515914bc37f5e406cc6f622fc06991eb779
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Aug 8 09:10:12 2006 -0300

    V4L/DVB (4411): Fix minor errors in build files
    
    In pwc Kconfig, change 'depends' to 'depends on'
    In dvb-core Makefile, change '=' to ':='
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7fb6529762f8185f792ad74adcf211713f973c80
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Aug 8 15:47:31 2006 -0300

    V4L/DVB (4407): Driver dsbr100 is a radio device, not a video one!
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0dfa9abd6bd153364da8cb131db0d0404ab15ad1
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Aug 8 09:10:10 2006 -0300

    V4L/DVB (4399): Fix a typo that caused some compat stuff to not work
    
    Config option typo:
    -#ifdef CONFIG_V4L1_COMPAT
    +#ifdef CONFIG_VIDEO_V4L1_COMPAT
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3cdc0f263b9fe99f7dfcef49df7a148b458e9d11
Author: Luc Van Oostenryck <luc.vanoostenryck@looxix.net>
Date:   Tue Aug 8 09:10:10 2006 -0300

    V4L/DVB (4395): Restore compat_ioctl in pwc driver
    
    The compat_ioctl support of the pwc driver was dropped during the last update of the driver.
    I suppose it was by mistake. If yes here is the patch to restore the support.
    
    Signed-off-by: Luc Van Oostenryck <luc.vanoostenryck@looxix.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6054b68e84478e66e626bde33f93b5f0bf48c180
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Aug 8 09:10:06 2006 -0300

    V4L/DVB (4371b): Fix V4L1 dependencies at drivers under sound/oss and sound/pci
    
    TVMixer and FM801 Tea5757 are still using V4L1 API.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5bdd6cc3300be534f2a2cf826e3fb926b5695698
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Jul 25 16:17:54 2006 -0300

    V4L/DVB (4371a): Fix V4L1 dependencies on compat_ioctl32
    
    Compat32 should be able to handle V4L1 ioctls if the old API support were
    selected.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 487206f26364a878f5f8cec9f92796d403f1d7c9
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Aug 8 09:10:01 2006 -0300

    V4L/DVB (4340): Videodev.h should be included also when V4L1_COMPAT is selected.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 81b73dd92b97423b8f5324a59044da478c04f4c4
Author: Haren Myneni <haren@us.ibm.com>
Date:   Thu Jul 27 14:29:00 2006 -0700

    [POWERPC] Fix might-sleep warning on removing cpus
    
    Noticing the following might_sleep warning (dump_stack()) during kdump
    testing when CONFIG_DEBUG_SPINLOCK_SLEEP is enabled. All secondary CPUs
    will be calling rtas_set_indicator with interrupts disabled to remove
    them from global interrupt queue.
    
    BUG: sleeping function called from invalid context at
    arch/powerpc/kernel/rtas.c:463
    in_atomic():1, irqs_disabled():1
    Call Trace:
    [C00000000FFFB970] [C000000000010234] .show_stack+0x68/0x1b0 (unreliable)
    [C00000000FFFBA10] [C000000000059354] .__might_sleep+0xd8/0xf4
    [C00000000FFFBA90] [C00000000001D1BC] .rtas_busy_delay+0x20/0x5c
    [C00000000FFFBB20] [C00000000001D8A8] .rtas_set_indicator+0x6c/0xcc
    [C00000000FFFBBC0] [C000000000048BF4] .xics_teardown_cpu+0x118/0x134
    [C00000000FFFBC40] [C00000000004539C]
    .pseries_kexec_cpu_down_xics+0x74/0x8c
    [C00000000FFFBCC0] [C00000000002DF08] .crash_ipi_callback+0x15c/0x188
    [C00000000FFFBD50] [C0000000000296EC] .smp_message_recv+0x84/0xdc
    [C00000000FFFBDC0] [C000000000048E08] .xics_ipi_dispatch+0xf0/0x130
    [C00000000FFFBE50] [C00000000009EF10] .handle_IRQ_event+0x7c/0xf8
    [C00000000FFFBF00] [C0000000000A0A14] .handle_percpu_irq+0x90/0x10c
    [C00000000FFFBF90] [C00000000002659C] .call_handle_irq+0x1c/0x2c
    [C00000000058B9C0] [C00000000000CA10] .do_IRQ+0xf4/0x1a4
    [C00000000058BA50] [C0000000000044EC] hardware_interrupt_entry+0xc/0x10
     --- Exception: 501 at .plpar_hcall_norets+0x14/0x1c
       LR = .pseries_dedicated_idle_sleep+0x190/0x1d4
    [C00000000058BD40] [C00000000058BDE0] 0xc00000000058bde0 (unreliable)
    [C00000000058BDF0] [C00000000001270C] .cpu_idle+0x10c/0x1e0
    [C00000000058BE70] [C000000000009274] .rest_init+0x44/0x5c
    
    To fix this issue, rtas_set_indicator_fast() is added so that will not
    wait for RTAS 'busy' delay and this new function is used for kdump (in
    xics_teardown_cpu()) and for CPU hotplug ( xics_migrate_irqs_away() and
    xics_setup_cpu()).
    
    Note that the platform architecture spec says that set-indicator
    on the indicator we're using here is not permitted to return the
    busy or extended busy status codes.
    
    Signed-off-by: Haren Myneni <haren@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dcc42f483d6808ba4d04af9da35e7e47b711f6c2
Author: Sonny Rao <sonny@burdell.org>
Date:   Wed Aug 2 00:20:09 2006 -0400

    [POWERPC] fix PMU initialization on pseries lpar
    
    We should not be calling power4_enable_pmcs() in
    pseries_lpar_enable_pmcs(); just doing the hypercall is sufficient.
    Prior to 2.6.15 we did not call power4_enable_pmcs() for an lpar.
    
    power4_enable_pmcs() tries to read the hid0 register which is no
    longer legal for an lpar in newer Power processors.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1b2a720506ccf7c30baaeda5d990c29b31e21726
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Aug 7 21:46:02 2006 -0700

    [TG3]: Fix tx race condition
    
    Fix a subtle race condition between tg3_start_xmit() and tg3_tx()
    discovered by Herbert Xu <herbert@gondor.apana.org.au>:
    
    CPU0					CPU1
    tg3_start_xmit()
    	if (tx_ring_full) {
    		tx_lock
    					tg3_tx()
    						if (!netif_queue_stopped)
    		netif_stop_queue()
    		if (!tx_ring_full)
    						update_tx_ring
    			netif_wake_queue()
    		tx_unlock
    	}
    
    Even though tx_ring is updated before the if statement in tg3_tx() in
    program order, it can be re-ordered by the CPU as shown above.  This
    scenario can cause the tx queue to be stopped forever if tg3_tx() has
    just freed up the entire tx_ring.  The possibility of this happening
    should be very rare though.
    
    The following changes are made:
    
    1. Add memory barrier to fix the above race condition.
    
    2. Eliminate the private tx_lock altogether and rely solely on
    netif_tx_lock.  This eliminates one spinlock in tg3_start_xmit()
    when the ring is full.
    
    3. Because of 2, use netif_tx_lock in tg3_tx() before calling
    netif_wake_queue().
    
    4. Change TX_BUFFS_AVAIL to an inline function with a memory barrier.
    Herbert and David suggested using the memory barrier instead of
    volatile.
    
    5. Check for the full wake queue condition before getting
    netif_tx_lock in tg3_tx().  This reduces the number of unnecessary
    spinlocks when the tx ring is full in a steady-state condition.
    
    6. Update version to 3.65.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bd37a088596ccdb2b2dd3299e25e333bca7a9a34
Author: Wei Yongjun <yjwei@nanjing-fnst.com>
Date:   Mon Aug 7 21:04:15 2006 -0700

    [TCP]: SNMPv2 tcpOutSegs counter error
    
    Do not count retransmitted segments.
    
    Signed-off-by: Wei Yongjun <yjwei@nanjing-fnst.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 69d8c28c9578ce78b3dc1b9be36926d962282898
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Aug 7 20:52:10 2006 -0700

    [PKTGEN]: Make sure skb->{nh,h} are initialized in fill_packet_ipv6() too.
    
    Mirror the bug fix from fill_packet_ipv4()
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aaf580601ff244df82324fff380ed6740f27ef03
Author: ChenLi Tien <cltien@gmail.com>
Date:   Mon Aug 7 20:49:07 2006 -0700

    [PKTGEN]: Fix oops when used with balance-tlb bonding
    
    Signed-off-by: ChenLi Tien <cltien@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8d1502de27c46b365b5c86e17d173083d3d6c9ac
Author: Kirill Korotaev <dev@sw.ru>
Date:   Mon Aug 7 20:44:22 2006 -0700

    [IPV4]: Limit rt cache size properly.
    
    From: Kirill Korotaev <dev@sw.ru>
    
    During OpenVZ stress testing we found that UDP traffic with random src
    can generate too much excessive rt hash growing leading finally to OOM
    and kernel panics.
    
    It was found that for 4GB i686 system (having 1048576 total pages and
      225280 normal zone pages) kernel allocates the following route hash:
    syslog: IP route cache hash table entries: 262144 (order: 8, 1048576
    bytes) => ip_rt_max_size = 4194304 entries, i.e.  max rt size is
    4194304 * 256b = 1Gb of RAM > normal_zone
    
    Attached the patch which removes HASH_HIGHMEM flag from
    alloc_large_system_hash() call.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8b5cc5ef40c83c6ea4c90b203bb2c8b17edfa11b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Aug 7 20:09:20 2006 -0700

    [IPX]: Header length validation needed
    
    This patch will linearize and check there is enough data.
    It handles the pprop case as well as avoiding a whole audit of
    the routing code.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d14cc9a342a8004b0ecfe66f1f12120962b61d8c
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Aug 7 16:11:48 2006 -0700

    [TG3]: skb->dev assignment is done by netdev_alloc_skb
    
    All caller of netdev_alloc_skb need to assign skb->dev shortly
    afterwards.  Move it into common code.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7b2e497a06c0e93719fda88820e057b635e8fae2
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Aug 7 16:09:04 2006 -0700

    [NET]: Assign skb->dev in netdev_alloc_skb
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 766ea8cce007e699679109df4fa469b870ba4860
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Aug 7 15:49:53 2006 -0700

    [NET]: Fix alloc_skb comment typo
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20dbfad8e5dfea56b3cb0cfd4465f01c37b57aa6
Merge: 8b384b8... 9ee4e33...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Aug 7 13:39:55 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild-2.6.18

commit 9ee4e3365dd0dab4c1e02fe44dc08a223b826c72
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Mon Aug 7 21:01:36 2006 +0200

    kbuild: external modules shall not check config consistency
    
    external modules needs include/linux/autoconf.h and include/config/auto.conf
    but skip the integrity test of these. Even with a newer Kconfig file we
    shall just proceed since external modules simply uses the kernel source and
    shall not attempt to modify it.
    Error out if a config fiel is missing since they are mandatory.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 58a2f7d85aaf4c41157f15c43a913b5c3c6b3adb
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Mon Aug 7 20:58:28 2006 +0200

    kbuild: do not try to build content of initramfs
    
    When a file supplied via CONFIG_INITRAMFS pointed to a file
    for which kbuild had a rule to compile it (foo.c => foo.o)
    then kbuild would compile the file before adding the
    file to the initramfs.
    
    Teach make that files included in initramfs shall not be updated by adding
    an 'empty command'. (See "Using Empty Commands" in info make).
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 883d4cae4a2b01a05193cf2665c77b7489a8b6a0
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Mon Jun 5 16:41:00 2006 -0400

    ocfs2: allocation hints
    
    Record the most recently used allocation group on the allocation context, so
    that subsequent allocations can attempt to optimize for contiguousness.
    Local alloc especially should benefit from this as the current chain search
    tends to let it spew across the disk.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 7bf72edee614e10b8d470c40a326f47bfdd69992
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Wed May 3 17:46:50 2006 -0700

    ocfs2: better group descriptor consistency checks
    
    Try to catch corrupted group descriptors with some stronger checks placed in
    a couple of strategic locations. Detect a failed resizefs and refuse to
    allocate past what bitmap i_clusters allows.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 101ebf256de54e78e6d3277adacf656e125a2c5a
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Tue May 2 17:54:45 2006 -0700

    ocfs2: limit cluster bitmap information saved at mount
    
    We were storing cluster count on the ocfs2_super structure, but never
    actually using it so remove that. Also, we don't want to populate the
    uptodate cache with the unlocked block read - it is technically safe as is,
    but we should change it for correctness.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 9acd72f4240429dfd762c9a2c7eb5c18b5d32529
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 15 02:36:01 2006 +0200

    [PATCH] fs/ocfs2/dlm/dlmmaster.c: unexport dlm_migrate_lockres
    
    This patch removes the unused EXPORT_SYMBOL_GPL(dlm_migrate_lockres).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 34e3d180370c44ad3ecd3a1f9099e150d3bb103f
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Sat Jul 15 10:22:39 2006 -0700

    ocfs2: fix check for locally granted state during dlmunlock()
    
    If a process requests a lock cancel but the lock has been remotely granted
    already then there is no need to send the cancel message.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a23eac99d4392b8b779305498d7614e41a0e16e9
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Sun Jun 18 21:28:01 2006 -0700

    ocfs2: do not modify lksb->status in the unlock ast
    
    This can race with other ast notification, which can cause bad status values
    to propagate into the unlock ast.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 4b1af774451bbc8440719e3fe441934a337c3b63
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon Jun 26 15:17:47 2006 -0700

    ocfs2: Fix lvb corruption
    
    Properly ignore LVB flags during a PR downconvert. This avoids an illegal
    lvb update.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 8b384b81e27222a307576630c89ea26e17b7be6a
Merge: dbd43d0... 65200c2...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Aug 7 10:26:49 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6

commit 5cb900a34f640771a4ab6a178659c75022f2971a
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Mon Aug 7 18:13:09 2006 +0200

    [S390] add __cpuinit to appldata_cpu_notify
    
    Use __cpuinit for CPU hotplug notifier function.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 37ab46a3f4983c32d5b5ab6a0366ec482e38ba47
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Mon Aug 7 18:13:06 2006 +0200

    [S390] xpram system device class.
    
    Remove system device class for xpram. It creates the directory hierarchy
    under /sys/devices/system/xpram/xpram0. The xpram0 directory is empty and
    it is always created while xpram1 and following devices are always missing,
    independent if the devices exist or not. Since the xpram devices are
    listed in /proc/partitions and /sys/block/ as slram<x> the system device
    class for xpram is meaningless.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 65200c291c4ce397835d8232eaa0878b765a9bce
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Mon Aug 7 17:00:33 2006 +0200

    [S390] lost interrupt after chpid vary off/on cycle.
    
    I/O on a CCW device may stall if a channel path to that device is
    logicaly varied off/on. A user I/O interrupt can get misinterpreted
    as interrupt for an internal path verification operation due to a
    missing check and is therefore never reported to the device driver.
    
    Correct check for pending interruptions before starting path
    verification.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 4bc0c4f9e74e7a5d62ef4db923b377f2aa474a8f
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Aug 7 17:00:30 2006 +0200

    [S390] retry after deferred condition code.
    
    Do a retry of read device characteristics / read configuration
    data when a deferred condition code 1 is encountered in
    ccw_device_wake_up().
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 25a2001a285e187d99ea347693bedd73b3e0722a
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Aug 7 17:00:28 2006 +0200

    [S390] tape class return value handling.
    
    Without this patch register_tape_dev() will always fail, but might
    return a value that is not an error number. This will lead to accesses
    to already freed memory areas...
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit dd2c609c59cd9daeb90d58f3d1bc3813e8987df1
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Mon Aug 7 01:40:04 2006 +0200

    [MMC] Another stray 'io' reference
    
    Another misuse of the global 'io' variable instead of the local 'base'.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dbd43d08642c037beb937c2670976c076120507b
Merge: c34c07d... 9f73763...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sun Aug 6 15:44:39 2006 -0700

    Merge branch 'master' of /home/greg/linux/git/torvalds-2.6/

commit 3a0c56d801df6785b30e36c19e89d7e971c151da
Author: Michael Reed <mdr@sgi.com>
Date:   Mon Jul 31 12:19:50 2006 -0500

    [SCSI] mptfc: correct out of order event processing
    
    This patch corrects a problem in mptfc which can result in targets
    being removed after executing an "lsiutil 99" reset of the fibre
    channel ports.
    
    The last rescan event was being processed before the setup reset work
    due to an inappropriate optimization in the event processing logic.
    Every rescan event is now queued for execution and the setup reset
    work now executes in the proper sequence.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Acked-by: Moore, Eric <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 77d88ee275aeba5da447987f30401bbd4c901ca9
Author: Michael Reed <mdr@sgi.com>
Date:   Mon Jul 31 12:19:40 2006 -0500

    [SCSI] mptfc: properly wait for firmware target discovery to complete
    
    Based upon a conversation I had with LSI's fibre channel firmware guru,
    this patch adds another condition under which the driver waits for the
    firmware link initialization / target discovery to complete.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Acked-by: Moore, Eric <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 916f3ac680fcc4c142e9acd46161f55533b11760
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Aug 6 22:22:23 2006 +0200

    [MMC] Fix base address configuration in wbsd
    
    There were some confusion about base I/O variables in the wbsd driver.
    Seems like things have been working on shear luck so far. The global 'io'
    variable (used when manually configuring the resources) was used instead of
    the local 'base' variable.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 574dc0abab6650c5371df15ac708e48fa25bed89
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Aug 6 20:55:33 2006 +0100

    [ARM] Fix Acorn platform SCSI driver build failures
    
    SCSI folk forgot to fix up all the uses of 'buffer' before deleting
    this struct member.  Do it for them to rescue the resulting build
    failures.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca8c100a00e91cf93782008441a2e159c4b49a25
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Aug 6 20:53:40 2006 +0100

    [ARM] Fix NCR5380-based SCSI card build
    
    The NCR5380-based SCSI cards need the SCSI SPI transport selected
    to build correctly.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9f737633e6ee54fc174282d49b2559bd2208391d
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 6 11:20:11 2006 -0700

    Linux v2.6.18-rc4

commit 3e74051bc7b780c5ba28939f9d5c4cd3280a5ff7
Author: Christoph Hellwig <hch@lst.de>
Date:   Sun Jul 30 19:13:36 2006 +0200

    [SCSI] hptiop: backout ioctl mess
    
    The hptiop just got merged with a horrible amount of really bad ioctl
    code that is against the standards for new scsi drivers.  This patch
    backs it out (and fixes a small bug where scsi_add_host is called to
    early).  We can re-add proper APIs once we agree on them.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 00dd7b7d26a3bf3780cfcebfdde2b86126b3a082
Merge: 58b3ac0... 6e1e632...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Sun Aug 6 12:42:33 2006 -0500

    Merge ../linux-2.6
    
    Conflicts:
    
    	arch/ia64/hp/sim/simscsi.c
    
    Stylistic differences in two separate fixes for buffer->request_buffer
    problem.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 58b3ac07fed31ffc1349380b78305af6522fe1f4
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Wed Aug 2 11:06:21 2006 +0200

    [SCSI] zfcp: bump version number
    
    New version number fo zfcp driver.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f6c0e7a7b3b6db15146877c0cef43b413af5b76e
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Wed Aug 2 11:05:52 2006 +0200

    [SCSI] zfcp: minor erp bug fixes
    
    Bug fixes for zfcp's erp:
    - trigger adapter reopen if do_QDIO fails
    - avoid erp deadlock if registration of scsi target or remote port hang
    - do not treat as error if exchange port data fails
    - decrease timeout for target reset and aborts
    - mark unit failed if slave_destroy is called
    
    Additionally some code cleanup was done:
    - made some functions void when retval is not of interest
    - shortened initialization of zfcp's host_template
    - corrected some comments
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fea9d6c7bcd8ff1d60ff74f27ba483b3820b18a3
Author: Volker Sameske <sameske@de.ibm.com>
Date:   Wed Aug 2 11:05:16 2006 +0200

    [SCSI] zfcp: improve management of request IDs
    
    Improve request handling. Use hash table to manage request IDs.
    
    Signed-off-by: Volker Sameske <sameske@de.ibm.com>
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c2602c48b5ebde55b418ba252737bf60caa4bab0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Tue Aug 1 13:48:16 2006 -0700

    [SCSI] qla2xxx: Update version number to 8.01.05-k4.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b0328beed0786b07d0102ed59cbf0b54ad8f726b
Author: Vladislav Bolkhovitin <vst@vlnb.net>
Date:   Tue Aug 1 13:48:15 2006 -0700

    [SCSI] qla2xxx: Fix to allow to reset devices using sg interface (sg_reset).
    
    Currently it is impossible to reset provided by Qlogic QLA2xxx driver
    SCSI devices externally using corresponding sg devices, particularly via
    sg_reset utility, because qla2xxx driver in qla2xxx_eh_device_reset()
    function checks if the input scsi_cmnd has its private data (CMD_SP())
    attached. Then the found pointer isn't used anywhere inside of
    qla2xxx_eh_device_reset(). If the RESET request comes from sg device, it
    doesn't have such private data.
    
    The attached patch removes check for non-NULL CMD_SP() from
    qla2xxx_eh_device_reset(), hence allows to reset QLA2xxx's devices using
    corresponding sg devices.
    
    AV: change applies to bus/host reset handlers as well.
    
    Signed-off-by: Vladislav Bolkhovitin <vst@vlnb.net>
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 45ebeb560570fd7ebae29a4105b81874063d5425
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Tue Aug 1 13:48:14 2006 -0700

    [SCSI] qla2xxx: Log Trace/Diagonostic asynchronous events.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b797b6de9d4d8d085169a507c54b18e74dbe4f21
Author: Shyam Sundar <shyam.sundar@qlogic.com>
Date:   Tue Aug 1 13:48:13 2006 -0700

    [SCSI] qla2xxx: Correct endianess problem while issuing a Marker IOCB on ISP24xx.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 416780d3a7836a99568c6728830ced592a7a22e3
Author: James Smart <James.Smart@Emulex.Com>
Date:   Tue Aug 1 07:34:16 2006 -0400

    [SCSI] lpfc 8.1.7 : Change version number to 8.1.8
    
    Change version number to 8.1.8
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dca9479be891eac33e53ab37769e18c3259646da
Author: James Smart <James.Smart@Emulex.Com>
Date:   Tue Aug 1 07:34:08 2006 -0400

    [SCSI] lpfc 8.1.7 : ID String and Message fixes
    
    ID String and Message fixes
     - Fix switch symbolic name registration to match cross-OS values
     - Replace printk's with more standard lpfc_printf_log calls
     - Make all lpfc_printf_log message numbers unique
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8f6d98d2e05c38cb08fbda5e38e5f87d361c3cac
Author: James Smart <James.Smart@Emulex.Com>
Date:   Tue Aug 1 07:34:00 2006 -0400

    [SCSI] lpfc 8.1.7 : Short bug fixes
    
    Short bug fixes:
     - Fix iocbq list corruption due to missing list_del's in ct handling
     - Missing unlock in lpfc_sli_next_iotag()
     - Fix initialization of can_queue value
     - Differentiate sysfs mailbox errors with different codes.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c067a42413c4f39c907443b8f5979cd4d82f0ff
Author: James Smart <James.Smart@Emulex.Com>
Date:   Tue Aug 1 07:33:52 2006 -0400

    [SCSI] lpfc 8.1.7 : Fix race condition between lpfc_sli_issue_mbox and lpfc_online
    
    Fix race condition between lpfc_sli_issue_mbox and lpfc_online
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a309a6b6e64b8147b7cfe7388237fb83834f58c9
Author: James Smart <James.Smart@Emulex.Com>
Date:   Tue Aug 1 07:33:43 2006 -0400

    [SCSI] lpfc 8.1.7 : Fix failing firmware download due to mailbox delays needing to be longer
    
    Fix failing firmware download due to mailbox delays needing to be longer.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 64ba88182962698a8cb75792372c1dddaef82989
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Aug 2 15:24:34 2006 -0400

    [SCSI] lpfc 8.1.7 : Add statistics reset callback for FC transport
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6e1e63259b1e01f047796e7985d960ca040993e6
Merge: a05ef8b... 2ffc1cc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 6 09:12:49 2006 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/dtor/input
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/dtor/input: (24 commits)
      Input: ati_remote - use msec instead of jiffies
      Input: ati_remote - add missing input_sync()
      Input: ati_remote - relax permissions sysfs module parameters
      Input: ati_remote - make filter time a module parameter
      Input: atkbd - restore repeat rate when resuming
      Input: trackpoint - activate protocol when resuming
      Input: logips2pp - fix button mapping for MX300
      Input: keyboard - change to use kzalloc
      Input: serio/gameport - check whether driver core calls succeeded
      Input: spaceball - make 4000FLX Lefty work
      Input: keyboard - simplify emulate_raw() implementation
      Input: keyboard - remove static variable and clean up initialization
      Input: hiddev - use standard list implementation
      Input: add missing handler->start() call
      Input: HID - fix potential out-of-bound array access
      Input: fix list iteration in input_release_device()
      Input: iforce - add Trust Force Feedback Race Master support
      Input: iforce - check array bounds before accessing elements
      Input: libps2 - warn instead of oopsing when passed bad arguments
      Input: fm801-gp - fix use after free
      ...

commit a05ef8bfdc03c5061f44d91826caa855b0aae481
Merge: cb3f1e7... 6cb53e7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 6 09:11:57 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa
    
    * master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa:
      [ALSA] Don't reject O_RDWR at opening PCM OSS with read/write-only device
      [ALSA] snd-emu10k1: Implement support for Audigy 2 ZS [SB0353]
      [ALSA] add MAINTAINERS entry for snd-aoa
      [ALSA] aoa: platform function gpio: ignore errors from functions that don't exist
      [ALSA] make snd-powermac load even when it can't bind the device
      [ALSA] aoa: fix toonie codec
      [ALSA] aoa: feature gpio layer: fix IRQ access
      [ALSA] Conversions from kmalloc+memset to k(z|c)alloc
      [ALSA] snd-emu10k1: Fixes ALSA bug#2190

commit cb3f1e7b835f6fe0fc09574381fe54daf6600001
Merge: 3e3183b... 558e10a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Aug 6 08:58:24 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [LAPB]: Fix windowsize check
      [TCP]: Fixes IW > 2 cases when TCP is application limited
      [PKT_SCHED] RED: Fix overflow in calculation of queue average
      [LLX]: SOCK_DGRAM interface fixes
      [PKT_SCHED]: Return ENOENT if qdisc module is unavailable
      [BRIDGE]: netlink status fix

commit 3e3183bab0257a6d02038658c53b491e1378612f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Aug 5 12:15:19 2006 -0700

    [PATCH] SCX200_ACB: eliminate spurious timeout errors
    
    While busy-waiting for completion, check the hardware after scheduling;
    don't schedule and then immediately check the _timeout_.  If the yield()
    took a long time (as it does on my OLPC prototype board when it's busy),
    we'd report a timeout even though the hardware was now ready.
    
    This fixes it, and also switches the yield() for a cond_resched() because
    we don't actually want to be _that_ nice about it.  I see nice
    tightly-packed SMBus transactions now, rather than waiting for milliseconds
    between successive phases.
    
    Actually, we shouldn't be busy-waiting here at all.  We should be using
    interrupts.  That's an exercise for another day though.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Christer Weinigel <wingel@nano-system.com>
    Cc: <Jordan.Crouse@amd.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 225add619624b4877941470f31d297e0151b21be
Author: Eric Sandeen <sandeen@sandeen.net>
Date:   Sat Aug 5 12:15:17 2006 -0700

    [PATCH] udf: initialize parts of inode earlier in create
    
    I saw an oops down this path when trying to create a new file on a UDF
    filesystem which was internally marked as readonly, but mounted rw:
    
    udf_create
            udf_new_inode
                    new_inode
                            alloc_inode
                            	udf_alloc_inode
                    udf_new_block
                            returns EIO due to readonlyness
                    iput (on error)
                            udf_put_inode
                                    udf_discard_prealloc
                                            udf_next_aext
                                                    udf_current_aext
                                                            udf_get_fileshortad
                                                                    OOPS
    
    the udf_discard_prealloc() path was examining uninitialized fields of the
    udf inode.
    
    udf_discard_prealloc() already has this code to short-circuit the discard
    path if no extents are preallocated:
    
            if (UDF_I_ALLOCTYPE(inode) == ICBTAG_FLAG_AD_IN_ICB ||
                    inode->i_size == UDF_I_LENEXTENTS(inode))
            {
                    return;
            }
    
    so if we initialize UDF_I_LENEXTENTS(inode) = 0 earlier in udf_new_inode,
    we won't try to free the (not) preallocated blocks, since this will match
    the i_size = 0 set when the inode was initialized.
    
    Signed-off-by: Eric Sandeen <sandeen@sandeen.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce2c6b53847afc444c4d0a7a1075c61f499c57a5
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Aug 5 12:15:15 2006 -0700

    [PATCH] futex: Apply recent futex fixes to futex_compat
    
    The recent fixups in futex.c need to be applied to futex_compat.c too.  Fixes
    a hang reported by Olaf.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Olaf Hering <olh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b8de5f50e4a302b83ebcd5b0120621336d50bd6
Author: matthieu castet <castet.matthieu@free.fr>
Date:   Sat Aug 5 12:15:12 2006 -0700

    [PATCH] pnpacpi: reject ACPI_PRODUCER resources
    
    A patch in -mm kernel correct the parsing of "address resources" of pnpacpi.
    Before we assumed it was memory only, but it could be also IO.
    
    But this change show an hidden bug : some resources could be producer type
    that are not handled by pnp layer.  So we should ignore the producer
    resources.
    
    This patch fixes bug 6292 (http://bugzilla.kernel.org/show_bug.cgi?id=6292).
    Some devices like PNP0A03 have 0xd00-0xffff and 0x0-0xcf7 as IO producer
    resources.
    
    Before correcting "address resources" parsing, it was seen as memory and was
    harmless, because nobody tried to reserve this memory range as it should be
    IO.
    
    With the correction it become IO resources, and make failed all others device
    that want to register IO in this range and use pnp layer (like a ISA sound
    card).
    
    The solution is to ignore producer resources
    
    Signed-off-by: Matthieu CASTET <castet.matthieu@free.fr>
    Signed-off-by: Uwe Bugla <uwe.bugla@gmx.de>
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Acked-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4c76fa721c7c8a43655a74e508870d21d2e26d3
Author: Chris Mason <mason@suse.com>
Date:   Sat Aug 5 12:15:10 2006 -0700

    [PATCH] reiserfs_write_full_page() should not get_block past eof
    
    reiserfs_write_full_page does zero bytes in the file past eof, but it may
    call get_block on those buffers as well.  On machines where the page size
    is larger than the blocksize, this can result in mmaped files incorrectly
    growing up to a block boundary during writepage.
    
    The fix is to avoid calling get_block for any blocks that are entirely past
    eof
    
    Signed-off-by: Chris Mason <mason@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5f3953c10b27fcd1c83e199e573b41d8327e22e
Author: Chris Mason <mason@suse.com>
Date:   Sat Aug 5 12:15:08 2006 -0700

    [PATCH] fix reiserfs lock inversion of bkl vs inode semaphore
    
    The correct lock ordering is inode lock -> BKL
    
    Signed-off-by: Chris Mason <mason@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebd15302dc0ba1b8761600c20854f5371e7bae1e
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sat Aug 5 12:15:06 2006 -0700

    [PATCH] memory hotadd fixes: enhance collision check
    
    This patch is for collision check enhancement for memory hot add.
    
    It's better to do resouce collision check before doing memory hot add,
    which will touch memory management structures.
    
    And add_section() should check section exists or not before calling
    sparse_add_one_section(). (sparse_add_one_section() will do another
    check anyway. but checking in memory_hotplug.c will be easy to understand.)
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: keith mannthey <kmannth@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d2870faaa1fdcec795a6bf4dbbfc3e5d57fd7ab
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sat Aug 5 12:15:04 2006 -0700

    [PATCH] memory hotadd fixes: avoid registering res twice
    
    both of acpi_memory_enable_device() and acpi_memory_add_device() may evaluate
    _CRS method.
    
    We should avoid evaluate device's resource twice if we could get it
    successfully in past.
    
    Signed-off-by: KAMEZWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Keith Mannthey <kmannth@gmail.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa25d8d6d3fa0fecd00cd4b909011291eae9257d
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sat Aug 5 12:15:02 2006 -0700

    [PATCH] memory hotadd fixes: avoid check in acpi
    
    add_memory() does all necessary check to avoid collision.  then, acpi layer
    doesn't have to check region by itself.
    
    (*) pfn_valid() just returns page struct is valid or not. It returns 0
        if a section has been already added even is ioresource is not added.
        ioresource collision check in mm/memory_hotplug.c can do more precise
        collistion check.
        added enabled bit check just for sanity check..
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Keith Mannthey <kmannth@gmail.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58c1b5b079071d82b2f924000b7e8fb5585ce7d8
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sat Aug 5 12:15:01 2006 -0700

    [PATCH] memory hotadd fixes: find_next_system_ram catch range fix
    
    find_next_system_ram() is used to find available memory resource at onlining
    newly added memory.  This patch fixes following problem.
    
    find_next_system_ram() cannot catch this case.
    
    Resource:      (start)-------------(end)
    Section :                (start)-------------(end)
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Keith Mannthey <kmannth@gmail.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f04ab5efbca73ab366a156d96b073d2da35b158
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sat Aug 5 12:14:59 2006 -0700

    [PATCH] memory hotadd fixes: change find_next_system_ram's return value manner
    
    find_next_system_ram() returns valid memory range which meets requested area,
    only used by memory-hot-add.
    
    This function always rewrite requested resource even if returned area is not
    fully fit in requested one.  And sometimes the returnd resource is larger than
    requested area.  This annoyes the caller.  This patch changes the returned
    value to fit in requested area.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Keith Mannthey <kmannth@gmail.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f712711dbd180aa3777efe5ae3b9b0e915b9471
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Sat Aug 5 12:14:58 2006 -0700

    [PATCH] memory hotadd fixes: not-aligned memory hotadd handling fix
    
    ioresouce handling code in memory hotplug allows not-aligned memory hot add.
    But when memmap and other memory structures are initialized, parameters should
    be aligned.  (if not aligned, initialization of mem_map will do wrong, it
    assumes parameters are aligned.) This patch fix it.
    
    And this patch allows ioresource collision check to handle -EEXIST.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Keith Mannthey <kmannth@gmail.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94f563c426a78c97fc2a377315995e6ec8343872
Author: Diego Calleja <diegocg@gmail.com>
Date:   Sat Aug 5 12:14:55 2006 -0700

    [PATCH] Fix BeFS slab corruption
    
    In bugzilla #6941, Jens Kilian reported:
    
    "The function befs_utf2nls (in fs/befs/linuxvfs.c) writes a 0 byte past the
    end of a block of memory allocated via kmalloc(), leading to memory
    corruption.  This happens only for filenames which are pure ASCII and a
    multiple of 4 bytes in length.  [...]
    
    Without DEBUG_SLAB, this leads to further corruption and hard lockups; I
    believe this is the bug which has made kernels later than 2.6.8 unusable
    for me.  (This must be due to changes in memory management, the bug has
    been in the BeFS driver since the time it was introduced (AFAICT).)
    
    Steps to reproduce:
    Create a directory (in BeOS, naturally :-) with files named, e.g.,
    "1", "22", "333", "4444", ...  Mount it in Linux and do an "ls" or "find""
    
    This patch implements the suggested fix. Credits to Jens Kilian for
    debugging the problem and finding the right fix.
    
    Signed-off-by: Diego Calleja <diegocg@gmail.com>
    Cc: Jens Kilian <jjk@acm.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e31f59ce593b073ee14241781edfb0637697eeb6
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sat Aug 5 12:14:53 2006 -0700

    [PATCH] ieee1394: sbp2: enable auto spin-up for Maxtor disks
    
    At least Maxtor OneTouch III require a "start stop unit" command after auto
    spin-down before the next access can proceed.  This patch activates the
    responsible code in scsi_mod for all Maxtor SBP-2 disks.
    https://bugzilla.novell.com/show_bug.cgi?id=183011
    
    Maybe that should be done for all SBP-2 disks, but better be cautious.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 855f46ad15d51e10081b13a5ce6fb36223cd2af5
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Sat Aug 5 12:14:50 2006 -0700

    [PATCH] Add stable branch to maintainers file
    
    While helping someone to submit a patch to the stable branch, I noticed
    that the stable branch is not listed in the MAINTAINERS file.  This was
    after I went there to look for the email addresses for the stable branch
    list (stable@kernel.org).
    
    This patch adds the stable branch to the maintainers file so that people
    can find where to send patches when they have a fix for the stable team.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 757be186129b674e3a0146a4bc1861ed0744cd95
Author: Neil Horman <nhorman@tuxdriver.com>
Date:   Sat Aug 5 12:14:45 2006 -0700

    [PATCH] sh: fix proc file removal for superh store queue module
    
    Clean up proc file removal in sq module for superh arch.  currently on a
    failed module load or on module unload a proc file is left registered which
    can cause a random memory execution or oopses if read after unload.  This
    patch cleans up that deregistration.
    
    Signed-off-by: Neil Horman <nhorman@tuxdriver.com>
    Acked-by: Paul Mundt <lethal@linux-sh.org>
    Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 453c3e478e94004606b394b9ea57de71094e7c6a
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Aug 5 12:14:43 2006 -0700

    [PATCH] eicon: fix define conflict with ptrace
    
    * MODE_MASK is unused in eicon driver.
    * Conflicts with a ptrace stuff on arm.
    
    drivers/isdn/hardware/eicon/divasync.h:259:1: warning: "MODE_MASK" redefined
    include2/asm/ptrace.h:48:1: warning: this is the location of the previous definition
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Acked-by: Armin Schindler <armin@melware.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64e0cc38b69b8d43ab9793f50e4bb09cea0e6bb9
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Sat Aug 5 12:14:39 2006 -0700

    [PATCH] pSeries: hvsi char driver janitorial cleanup
    
    A set of tty line discipline cleanup patches were introduced before the
    dawn of time, in kernel version 2.4.21.  This patch performs that cleanup
    for the hvsi driver.
    
    The hvsi driver is used only on IBM pSeries PowerPC boxes.  The driver was
    originally written by Hollis Blanchard, who has delegated maintainership to
    me.  So this my first and maybe only patch in this official new role,
    because this driver is otherwise bug-free :-)
    
    Alan: "Actually its also a bug fix, tty->ldisc should be locked by refcounting
    and the helpers do this for you."
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 229395c90aadbadef76bacf52b9cb3326f509e93
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Sat Aug 5 12:14:36 2006 -0700

    [PATCH] pSeries hvsi char driver null pointer deref
    
    Under certain rare circumstances, it appears that there can be be a
    NULL-pointer deref when a user fiddles with terminal emeulation programs while
    outpu is being sent to the console.  This patch checks for and avoids a
    NULL-pointer deref.
    
    Signed-off-by: Hollis Blanchard <hollisbl@austin.ibm.com>
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Paul Fulghum <paulkf@microgate.com>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 825e037fb8912f38e9d9ddd3ec79fa7c584db708
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Aug 5 12:14:34 2006 -0700

    [PATCH] Fix more per-cpu typos
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b23d04dd26e6d170adc644cf12a0d9dfa1f5094
Author: Maxime Bizon <mbizon@freebox.fr>
Date:   Sat Aug 5 12:14:32 2006 -0700

    [PATCH] doc: update panic_on_oops documentation
    
    Signed-off-by: Maxime Bizon <mbizon@freebox.fr>
    Acked-by: Simon Horman <horms@verge.net.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f34931fdc78b4895553aaa33748939cc7697c99
Author: Neil Brown <neilb@suse.de>
Date:   Sat Aug 5 12:14:29 2006 -0700

    [PATCH] knfsd: fix race related problem when adding items to and svcrpc auth cache
    
    If we don't find the item we are lookng for, we allocate a new one, and
    then grab the lock again and search to see if it has been added while we
    did the alloc.  If it had been added we need to 'cache_put' the newly
    created item that we are never going to use.  But as it hasn't been
    initialised properly, putting it can cause an oops.
    
    So move the ->init call earlier to that it will always be fully initilised
    if we have to put it.
    
    Thanks to Philipp Matthias Hahn <pmhahn@svs.Informatik.Uni-Oldenburg.de>
    for reporting the problem.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b7f750d446a717d4c8346fbb165b62661019b92
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Aug 5 12:14:27 2006 -0700

    [PATCH] debug_locks.h: add "struct task_struct;"
    
    Removes many, many "declared inside parameter list" warnings on parisc.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60c371bc753495f36d3a71338b46030f7fffce3b
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Aug 5 12:14:25 2006 -0700

    [PATCH] fadvise() make POSIX_FADV_NOREUSE a no-op
    
    The POSIX_FADV_NOREUSE hint means "the application will use this range of the
    file a single time".  It seems to be intended that the implementation will use
    this hint to perform drop-behind of that part of the file when the application
    gets around to reading or writing it.
    
    However for reasons which aren't obvious (or sane?) I mapped
    POSIX_FADV_NOREUSE onto POSIX_FADV_WILLNEED.  ie: it does readahead.
    
    That's daft.  So for now, make POSIX_FADV_NOREUSE a no-op.
    
    This is a non-back-compatible change.  If someone was using POSIX_FADV_NOREUSE
    to perform readahead, they lose.  The likelihood is low.
    
    If/when we later implement POSIX_FADV_NOREUSE things will get interesting - to
    do it fully we'll need to maintain file offset/length ranges and peform all
    sorts of complex tricks, and managing the lifetime of those ranges' data
    structures will be interesting..
    
    A sensible implementation would probably ignore the file range and would
    simply mark the entire file as needing some form of drop-behind treatment.
    
    Cc: Michael Kerrisk <mtk-manpages@gmx.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb39e419740435b7fbb0314e376ba468be7db67a
Author: Rodolfo Giometti <giometti@linux.it>
Date:   Sat Aug 5 12:14:22 2006 -0700

    [PATCH] au1100fb: Fix startup sequence
    
    - fix up the start up sequence.
    
    This new sequence allow you to correctly enable the LCD controller
    even if the bootloader has already did it.
    
    - fix up a wrong indentation issue.
    
    Signed-off-by: Rodolfo Giometti <giometti@linux.it>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd2d54300369690500fc9b1bac9440d2ee81913a
Author: Rodolfo Giometti <giometti@linux.it>
Date:   Sat Aug 5 12:14:19 2006 -0700

    [PATCH] au1100fb: info->var.rotate fix
    
    Fix "info->var.rotate" data settings.
    
    This info should be deduced directly from "fbdev->panel->control_base"
    defined into au1100fb.h.
    
    Signed-off-by: Rodolfo Giometti <giometti@linux.it>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78944e549d36673eb6265a2411574e79c28e23dc
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Sat Aug 5 12:14:16 2006 -0700

    [PATCH] vt: printk: Fix framebuffer console triggering might_sleep assertion
    
    Reported by: Dave Jones
    
    Whilst printk'ing to both console and serial console, I got this...
    (2.6.18rc1)
    
    BUG: sleeping function called from invalid context at kernel/sched.c:4438
    in_atomic():0, irqs_disabled():1
    
    Call Trace:
     [<ffffffff80271db8>] show_trace+0xaa/0x23d
     [<ffffffff80271f60>] dump_stack+0x15/0x17
     [<ffffffff8020b9f8>] __might_sleep+0xb2/0xb4
     [<ffffffff8029232e>] __cond_resched+0x15/0x55
     [<ffffffff80267eb8>] cond_resched+0x3b/0x42
     [<ffffffff80268c64>] console_conditional_schedule+0x12/0x14
     [<ffffffff80368159>] fbcon_redraw+0xf6/0x160
     [<ffffffff80369c58>] fbcon_scroll+0x5d9/0xb52
     [<ffffffff803a43c4>] scrup+0x6b/0xd6
     [<ffffffff803a4453>] lf+0x24/0x44
     [<ffffffff803a7ff8>] vt_console_print+0x166/0x23d
     [<ffffffff80295528>] __call_console_drivers+0x65/0x76
     [<ffffffff80295597>] _call_console_drivers+0x5e/0x62
     [<ffffffff80217e3f>] release_console_sem+0x14b/0x232
     [<ffffffff8036acd6>] fb_flashcursor+0x279/0x2a6
     [<ffffffff80251e3f>] run_workqueue+0xa8/0xfb
     [<ffffffff8024e5e0>] worker_thread+0xef/0x122
     [<ffffffff8023660f>] kthread+0x100/0x136
     [<ffffffff8026419e>] child_rip+0x8/0x12
    
    This can occur when release_console_sem() is called but the log
    buffer still has contents that need to be flushed. The console drivers
    are called while the console_may_schedule flag is still true. The
    might_sleep() is triggered when fbcon calls console_conditional_schedule().
    
    Fix by setting console_may_schedule to zero earlier, before the call to the
    console drivers.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38cbcdc0a7be69a15462dc49512d43353f34b43b
Author: Jan Blunck <jblunck@suse.de>
Date:   Sat Aug 5 12:14:14 2006 -0700

    [PATCH] fix vmstat per cpu usage
    
    The per cpu variables are used incorrectly in vmstat.h.
    
    Signed-off-by: Jan Blunck <jblunck@suse.de>
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Acked-by: Steve Fox <drfickle@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f59ce5d0e0dd837853385927b150f5cef3a7f52
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Sat Aug 5 12:14:11 2006 -0700

    [PATCH] ptrace: make pid of child process available for PTRACE_EVENT_VFORK_DONE
    
    When delivering PTRACE_EVENT_VFORK_DONE, provide pid of the child process
    when tracer calls ptrace(PTRACE_GETEVENTMSG).  This is already
    (accidentally) available when the tracer is tracing VFORK in addition to
    VFORK_DONE.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Cc: Daniel Jacobowitz <dan@debian.org>
    Cc: Albert Cahalan <acahalan@gmail.com>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9abd1ace43d6186268856dbec2ebf411218d6ca
Author: Neil Brown <neilb@suse.de>
Date:   Sat Aug 5 12:14:07 2006 -0700

    [PATCH] md: Fix a bug that recently crept into md/linear
    
    A recent patch that allowed linear arrays to be reconfigured on-line
    allowed in a bug which results in divide by zero - not all
    mddev->array_size were converted to conf->array_size.
    
    This patch finished the conversion and fixed the bug.
    
    The offending patch was commit 7c7546ccf6463edbeee8d9aac6de7be1cd80d08a.
    
    Thanks to Simon Kirby <sim@netnation.com> for the bug report.
    
    Cc: Simon Kirby <sim@netnation.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af2bc7d222c2700ccda060184d7bced7d7cb9fc2
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Sat Aug 5 12:14:04 2006 -0700

    [PATCH] omap-rng build fix
    
    Seems like the omap-rng driver in the main tree predates the switch from
    <asm/hardware/clock.h> to <linux/clk.h> ...  now it builds OK.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0b33dee2dcc85626627919094befc17cfb141e4
Author: Alexander Zarochentsev <zam@namesys.com>
Date:   Sat Aug 5 12:14:01 2006 -0700

    [PATCH] i_mutex does not need to be locked in reiserfs_delete_inode()
    
    Fixes an i_mutex-inside-i_mutex lockdep nasty.
    
    Signed-off-by: Alexander Zarochentsev <zam@namesys.com>
    Cc: <reiserfs-dev@namesys.com>
    Cc: Hans Reiser <reiser@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3760ae1f914cf4479301a92c58ae65824ac5894
Author: Olaf Hering <olh@suse.de>
Date:   Sat Aug 5 12:13:59 2006 -0700

    [PATCH] crash in aty128_set_lcd_enable() on PowerBook
    
    Current Linus tree crashes in aty128_set_lcd_enable() because par->pdev
    is NULL. This happens since at least a week. Call trace is:
    
    aty128_set_lcd_enable
    aty128fb_set_par
    fbcon_init
    visual_init
    take_over_console
    fbcon_takeover
    notifier_call_chain
    blocking_notifier_call_chain
    register_framebuffer
    aty128fb_probe
    pci_device_probe
    bus_for_each_dev
    driver_attach
    bus_add_driver
    driver_register
    __pci_register_driver
    aty128fb_init
    init
    kernel_thread
    
    - info->fix was assigned twice.
    
    - par->vram_size is assigned in aty128_probe(), no need to redo it again
      in aty128_init()
    
    - register_framebuffer() uses uninitialized struct members, move it past
      par->pdev assignment and past aty128_bl_init().
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06fa45d3a19c6fbfccbf295e9f08087492338631
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sat Aug 5 12:13:57 2006 -0700

    [PATCH] ufs: handle truncated pages
    
    ufs_get_locked_page is called twice in ufs code, one time in ufs_truncate
    path(we allocated last block), and another time when fragments are
    reallocated.  In ideal world in the second case on allocation/free block
    layer we should not know that things like `truncate' exists, but now with
    such crutch like ufs_get_locked_page we can (or should?) skip truncated
    pages.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1fb32b7bd8203d0175649a75ede3ee7634d6a941
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sat Aug 5 12:13:55 2006 -0700

    [PATCH] ufs: ufs_get_locked_page() race fix
    
    As discussed earlier:
    http://lkml.org/lkml/2006/6/28/136
    this patch fixes such issue:
    
    `ufs_get_locked_page' takes page from cache
    after that `vmtruncate' takes page and deletes it from cache
    `ufs_get_locked_page' locks page, and reports about EIO error.
    
    Also because of find_lock_page always return valid page or NULL, we have no
    need to check it if page not NULL.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e91467ecd1ef381377fd327c0ded922835ec52ab
Author: Christian Borntraeger <borntrae@de.ibm.com>
Date:   Sat Aug 5 12:13:52 2006 -0700

    [PATCH] bug in futex unqueue_me
    
    This patch adds a barrier() in futex unqueue_me to avoid aliasing of two
    pointers.
    
    On my s390x system I saw the following oops:
    
    Unable to handle kernel pointer dereference at virtual kernel address
    0000000000000000
    Oops: 0004 [#1]
    CPU:    0    Not tainted
    Process mytool (pid: 13613, task: 000000003ecb6ac0, ksp: 00000000366bdbd8)
    Krnl PSW : 0704d00180000000 00000000003c9ac2 (_spin_lock+0xe/0x30)
    Krnl GPRS: 00000000ffffffff 000000003ecb6ac0 0000000000000000 0700000000000000
               0000000000000000 0000000000000000 000001fe00002028 00000000000c091f
               000001fe00002054 000001fe00002054 0000000000000000 00000000366bddc0
               00000000005ef8c0 00000000003d00e8 0000000000144f91 00000000366bdcb8
    Krnl Code: ba 4e 20 00 12 44 b9 16 00 3e a7 84 00 08 e3 e0 f0 88 00 04
    Call Trace:
    ([<0000000000144f90>] unqueue_me+0x40/0xe4)
     [<0000000000145a0c>] do_futex+0x33c/0xc40
     [<000000000014643e>] sys_futex+0x12e/0x144
     [<000000000010bb00>] sysc_noemu+0x10/0x16
     [<000002000003741c>] 0x2000003741c
    
    The code in question is:
    
    static int unqueue_me(struct futex_q *q)
    {
            int ret = 0;
            spinlock_t *lock_ptr;
    
            /* In the common case we don't take the spinlock, which is nice. */
     retry:
            lock_ptr = q->lock_ptr;
            if (lock_ptr != 0) {
                    spin_lock(lock_ptr);
    		/*
                     * q->lock_ptr can change between reading it and
                     * spin_lock(), causing us to take the wrong lock.  This
                     * corrects the race condition.
    [...]
    
    and my compiler (gcc 4.1.0) makes the following out of it:
    
    00000000000003c8 <unqueue_me>:
         3c8:       eb bf f0 70 00 24       stmg    %r11,%r15,112(%r15)
         3ce:       c0 d0 00 00 00 00       larl    %r13,3ce <unqueue_me+0x6>
                            3d0: R_390_PC32DBL      .rodata+0x2a
         3d4:       a7 f1 1e 00             tml     %r15,7680
         3d8:       a7 84 00 01             je      3da <unqueue_me+0x12>
         3dc:       b9 04 00 ef             lgr     %r14,%r15
         3e0:       a7 fb ff d0             aghi    %r15,-48
         3e4:       b9 04 00 b2             lgr     %r11,%r2
         3e8:       e3 e0 f0 98 00 24       stg     %r14,152(%r15)
         3ee:       e3 c0 b0 28 00 04       lg      %r12,40(%r11)
    		/* write q->lock_ptr in r12 */
         3f4:       b9 02 00 cc             ltgr    %r12,%r12
         3f8:       a7 84 00 4b             je      48e <unqueue_me+0xc6>
    		/* if r12 is zero then jump over the code.... */
         3fc:       e3 20 b0 28 00 04       lg      %r2,40(%r11)
    		/* write q->lock_ptr in r2 */
         402:       c0 e5 00 00 00 00       brasl   %r14,402 <unqueue_me+0x3a>
                            404: R_390_PC32DBL      _spin_lock+0x2
    		/* use r2 as parameter for spin_lock */
    
    So the code becomes more or less:
    if (q->lock_ptr != 0) spin_lock(q->lock_ptr)
    instead of
    if (lock_ptr != 0) spin_lock(lock_ptr)
    
    Which caused the oops from above.
    After adding a barrier gcc creates code without this problem:
    [...] (the same)
         3ee:       e3 c0 b0 28 00 04       lg      %r12,40(%r11)
         3f4:       b9 02 00 cc             ltgr    %r12,%r12
         3f8:       b9 04 00 2c             lgr     %r2,%r12
         3fc:       a7 84 00 48             je      48c <unqueue_me+0xc4>
         400:       c0 e5 00 00 00 00       brasl   %r14,400 <unqueue_me+0x38>
                            402: R_390_PC32DBL      _spin_lock+0x2
    
    As a general note, this code of unqueue_me seems a bit fishy. The retry logic
    of unqueue_me only works if we can guarantee, that the original value of
    q->lock_ptr is always a spinlock (Otherwise we overwrite kernel memory). We
    know that q->lock_ptr can change. I dont know what happens with the original
    spinlock, as I am not an expert with the futex code.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Acked-by: Ingo Molnar <mingo@redhat.com>
    Cc: Thomas Gleixner <tglx@timesys.com>
    Signed-off-by: Christian Borntraeger <borntrae@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72f0b4e2133ba1d65147d06016c0b6d2202235ca
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Aug 5 12:13:47 2006 -0700

    [PATCH] disable debugging version of write_lock()
    
    We've confirmed that the debug version of write_lock() can get stuck for long
    enough to cause NMI watchdog timeouts and hence a crash.
    
    We don't know why, yet.   Disable it for now.
    
    Also disable the similar read_lock() code.  Just in case.
    
    Thanks to Dave Olson <olson@unixfolk.com> for reporting and testing.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 927cbe8a3e9ebc466f76af5a5278a520dc2d5699
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Aug 5 12:13:45 2006 -0700

    [PATCH] drivers/edac/edac_mc.h must #include <linux/platform_device.h>
    
    With CONFIG_PCI=n:
    
      CC      drivers/edac/edac_mc.o
    drivers/edac/edac_mc.c: In function รขยยadd_mc_to_global_listรขยย:
    drivers/edac/edac_mc.c:1362: error: implicit declaration of function รขยยto_platform_deviceรขยย
    drivers/edac/edac_mc.c:1362: error: invalid type argument of รขยย->รขยย
    drivers/edac/edac_mc.c: In function รขยยedac_mc_add_mcรขยย:
    drivers/edac/edac_mc.c:1467: error: invalid type argument of รขยย->รขยย
    drivers/edac/edac_mc.c: In function รขยยedac_mc_del_mcรขยย:
    drivers/edac/edac_mc.c:1504: error: invalid type argument of รขยย->รขยย
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7ef7878ea7c8bca9b624db3f61223cdadda2a0a
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Sat Aug 5 12:13:42 2006 -0700

    [PATCH] Make suspend possible with a traced process at a breakpoint
    
    It should be possible to suspend, either to RAM or to disk, if there's a
    traced process that has just reached a breakpoint.  However, this is a
    special case, because its parent process might have been frozen already and
    then we are unable to deliver the "freeze" signal to the traced process.
    If this happens, it's better to cancel the freezing of the traced process.
    
    Ref. http://bugzilla.kernel.org/show_bug.cgi?id=6787
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8832157bff28e6559fd38fc18433f8bd8803340a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Aug 6 11:00:45 2006 +0100

    [ARM] Fix pci export warnings
    
    Remove duplicate PCI exports from ixp4xx machine class.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4c756f4e954186630f6ee91a4da9a4b39fe3618d
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Sun Aug 6 09:59:26 2006 +0100

    [ARM] 3747/1: Fix compilation error in mach-ixp4xx/gtwx5715-setup.c
    
    Patch from Martin Michlmayr
    
    Fix the following compilation error in arm/mach-ixp4xx/gtwx5715-setup:
    
      CC      arch/arm/mach-ixp4xx/gtwx5715-setup.o
    arch/arm/mach-ixp4xx/gtwx5715-setup.c:110: error: expected identifier or '(' before = token
    arch/arm/mach-ixp4xx/gtwx5715-setup.c:121: error: 'gtwx5715_flash_resource' undeclared here (not in a function)
    arch/arm/mach-ixp4xx/gtwx5715-setup.c: In function 'gtwx5715_init':
    arch/arm/mach-ixp4xx/gtwx5715-setup.c:133: error: 'flash_resource' undeclared (first use in this function)
    arch/arm/mach-ixp4xx/gtwx5715-setup.c:133: error: (Each undeclared identifier is reported only once
    arch/arm/mach-ixp4xx/gtwx5715-setup.c:133: error: for each function it appears in.)
    make[1]: *** [arch/arm/mach-ixp4xx/gtwx5715-setup.o] Error 1
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b39239330858bc99b4d529923ec58e95ff6103f8
Author: George G. Davis <davis_g@mvista.com>
Date:   Sun Aug 6 09:59:25 2006 +0100

    [ARM] 3745/1: Add EXPORT_SYMBOL(rtc_next_alarm_time) to ARM rtctime.c
    
    Patch from George G. Davis
    
    Fix "WARNING: "rtc_next_alarm_time" [drivers/rtc/rtc-sa1100.ko]
    undefined!"
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c723e08af18e60cda3bbc90e0d6fb688587aeb9f
Author: Juha Yrjola <juha.yrjola@solidboot.com>
Date:   Sun Aug 6 09:58:22 2006 +0100

    [ARM] 3744/1: MMC: mmcqd gets stuck when block queue is plugged
    
    Patch from Juha [๊๖lไ
    
    When the block queue is plugged, mq->req must be set to NULL.
    Otherwise mq->req might be left non-NULL, even though mmcqd is
    not processing a request, thus preventing the MMC queue thread from
    being woken up when new requests do arrive.
    
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c34c07d6946ec8969fa71ba03dbb95091f4eb9d3
Merge: bce8969... 558e10a...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Aug 5 23:22:42 2006 -0700

    Merge gregkh@master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6

commit 558e10a57db10de355ee97712d2b6df49e9b7849
Author: Diego Calleja <diegocg@gmail.com>
Date:   Sat Aug 5 21:15:58 2006 -0700

    [LAPB]: Fix windowsize check
    
    In bug #6954, Norbert Reinartz reported the following issue:
    
    "Function lapb_setparms() in file net/lapb/lapb_iface.c checks if the given
    parameters are valid. If the given window size is in the range of 8 .. 127,
    lapb_setparms() fails and returns an error value of LAPB_INVALUE, even if bit
    LAPB_EXTENDED in parms->mode is set.
    If bit LAPB_EXTENDED in parms->mode is set and the window size is in the range
    of 8 .. 127, the first check "(parms->mode & LAPB_EXTENDED)" results true  and
    the second check "(parms->window < 1 || parms->window > 127)" results false.
    Both checks in conjunction result to false, thus the third check "(parms->window
    < 1 || parms->window > 7)" is done by fault.
    This third check results true, so that we leave lapb_setparms() by 'goto out_put'.
    Seems that this bug doesn't cause any problems, because lapb_setparms() isn't
    used to change the default values of LAPB. We are using kernel lapb in our
    software project and also change the default parameters of lapb, so we found
    this bug"
    
    He also pasted a fix, that I've transformated into a patch:
    
    Signed-off-by: Diego Calleja <diegocg@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bce896984c59bcb0804e9eccc19163dccbff064b
Merge: 40a64fa... 6cb53e7...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Aug 5 10:49:32 2006 -0700

    Merge http://www.kernel.org/pub/scm/linux/kernel/git/perex/alsa

commit 40a64fa8ca3f41a3178e1bdcfe9734c1ba3e175f
Merge: 91a2eb2... 2ffc1cc...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Aug 5 10:49:00 2006 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/dtor/input

commit 91a2eb28f0aa1c1425a5999e0cc5f9095f1b2629
Merge: 53c7d2b... f5d635f...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Sat Aug 5 10:48:52 2006 -0700

    Merge ../torvalds-2.6/

commit d254bcdbf2199d9e2a52dbe4592e79ef3a456096
Author: Ilpo Jarvinen <ilpo.jarvinen@helsinki.fi>
Date:   Fri Aug 4 16:57:42 2006 -0700

    [TCP]: Fixes IW > 2 cases when TCP is application limited
    
    Whenever a transfer is application limited, we are allowed at least
    initial window worth of data per window unless cwnd is previously
    less than that.
    
    Signed-off-by: Ilpo Jarvinen <ilpo.jarvinen@helsinki.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4c0ce5c57ef0ca47a4428a14de6b5c8cdf8de8a
Author: Ilpo Jarvinen <ilpo.jarvinen@helsinki.fi>
Date:   Fri Aug 4 16:36:18 2006 -0700

    [PKT_SCHED] RED: Fix overflow in calculation of queue average
    
    Overflow can occur very easily with 32 bits, e.g., with 1 second
    us_idle is approx. 2^20, which leaves only 11-Wlog bits for queue
    length. Since the EWMA exponent is typically around 9, queue
    lengths larger than 2^2 cause overflow. Whether the affected
    branch is taken when us_idle is as high as 1 second, depends on
    Scell_log, but with rather reasonable configuration Scell_log is
    large enough to cause p->Stab to have zero index, which always
    results zero shift (typically also few other small indices result
    in zero shift).
    
    Signed-off-by: Ilpo Jarvinen <ilpo.jarvinen@helsinki.fi>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 30a584d944fbd599d4a8f470f75bf7af1a15b466
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Aug 3 16:38:49 2006 -0700

    [LLX]: SOCK_DGRAM interface fixes
    
    The datagram interface of LLC is broken in a couple of ways.
    These were discovered when trying to use it to build an out-of-kernel
    version of STP.
    
    First it didn't pass the source address of the received packet
    in recvfrom(). It needs to copy the source address of received LLC packets
    into the socket control block. At the same time fix a security issue
    because there was uninitialized data leakage. Every recvfrom call
    was just copying out old data.
    
    Second, LLC should not merge multiple packets in one receive call
    on datagram sockets. LLC should preserve packet boundaries on
    SOCK_DGRAM.
    
    This fix goes against the old historical comments about UNIX98 semantics
    but without this fix SOCK_DGRAM is broken and useless. So either ANK's
    interpretation was incorect or UNIX98 standard was wrong.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Acked-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9e2cc0f0e47ad351349156018ef8a365e9c6d25
Author: Jamal Hadi Salim <hadi@cyberus.ca>
Date:   Thu Aug 3 16:36:51 2006 -0700

    [PKT_SCHED]: Return ENOENT if qdisc module is unavailable
    
    Return ENOENT if qdisc module is unavailable
    
    Signed-off-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bea1b42e1bb184cb75e6bbd95c83e4478dde4ab9
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu Aug 3 16:24:02 2006 -0700

    [BRIDGE]: netlink status fix
    
    Fix code that passes back netlink status messages about
    bridge changes. Submitted by Aji_Srinivas@emc.com
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2ffc1ccad85e8c2e81a6a4beb390fb4ce143256b
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:53:37 2006 -0400

    Input: ati_remote - use msec instead of jiffies
    
    By using milliseconds instead of jiffies to calculate acceleration
    factor we make the code immune to changes in HZ.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c3c38fbd0cc8cc200a65b2ca7700e4dddedc13a0
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:53:24 2006 -0400

    Input: ati_remote - add missing input_sync()
    
    When emulating button toggle drivers need to send input_sync()
    between 'down' and 'up' events, otherwise some users might miss
    keypress because device's state is only considered finalized
    after EV_SYN/SYN_REPORT is received.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c605b679144a39f291debd7031a4ada0337f02ef
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:53:15 2006 -0400

    Input: ati_remote - relax permissions sysfs module parameters
    
    Allow changing debug and channel_mask parameters on the fly.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c669869710abd1ba47f25569ccc478c42f62a888
Author: Edwin Huffstutler <edwinh@computer.org>
Date:   Fri Aug 4 22:53:02 2006 -0400

    Input: ati_remote - make filter time a module parameter
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 3d0f0fa0cb554541e10cb8cb84104e4b10828468
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:52:46 2006 -0400

    Input: atkbd - restore repeat rate when resuming
    
    Make the AT keyboard driver restore previously set repeat rate
    when resuming. Noticed by Linus Torvalds.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 184dd2751c653a572c79c1fff969000b8880da40
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:52:26 2006 -0400

    Input: trackpoint - activate protocol when resuming
    
    Trackpoint driver was not sending the magic knock sequence upon resume
    causing incorrect device behavior after resuming from disk.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0c19fcd83793be248f8108a52f895c8d0034b182
Author: Roberto Castagnola <roberto.castagnola@gmail.com>
Date:   Fri Aug 4 22:52:13 2006 -0400

    Input: logips2pp - fix button mapping for MX300
    
    MX300 does not have an EXTRA_BTN - it is a simple wheel mouse with
    an additional task-switcher button, which is reported as side button
    (and not task button).
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 22479e1c0d111c60d29a4759408394cbdc7548a5
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:51:51 2006 -0400

    Input: keyboard - change to use kzalloc
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit d932cb7e630cae3b6b5307b767d296ff1a597c5e
Merge: 73b59a3... f5d635f...
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Fri Aug 4 22:50:27 2006 -0400

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6 into for-linus

commit f5d635f649607b09b0b4620d25d028fd2b1b7ea5
Merge: 3b445ee... eca7994...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 4 12:25:24 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] make uncached allocator more node aware

commit 77f3f879387cc5fce6c7a4ca7777c586fe6291cd
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Aug 5 03:59:19 2006 +0900

    [PATCH] libata: fix ata_device_add() error path
    
    In the error path, ata_device_add()
    
    * dereferences null host_set->ports[] element.
    * calls scsi_remove_host() on not-yet-added shost.
    
    This patch fixes both bugs.  The first problem was spotted and initial
    patch submitted by Dave Jones <davej@redhat.com>.  The second problem
    was mentioned and fixed by Jeff Garzik <jgarzik@pobox.com> in a larger
    cleanup patch.
    
    Cc: Dave Jones <davej@redhat.com>
    Cc: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 6543bc0777fadf129d8ee7ac82e0090fb0480403
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Aug 5 03:59:17 2006 +0900

    [PATCH] [libata] manually inline ata_host_remove()
    
    (tj: this is for the following ata_device_add() fix)
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f31e945c50e47b7163c6018928aa93b66e8f22f0
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Aug 5 03:59:15 2006 +0900

    [PATCH] sata_sil24: don't set probe_ent->mmio_base
    
    sata_sil24 doesn't make use of probe_ent->mmio_base and setting this
    field causes the area to be released twice on detach.  Don't set
    probe_ent->mmio_base.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f814b75f4ed2ed58cd7bc876a0a9406f984aac6d
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Aug 5 03:59:13 2006 +0900

    [PATCH] ata_piix: fix host_set private_data intialization
    
    To get host_set->private_data initialized reliably, all pinfos need to
    point to the same hpriv.  Restore pinfo->private_data after pata pinfo
    assignment.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit c3cf30a989efec8144225517e0b2f82c955e3966
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Aug 5 03:59:11 2006 +0900

    [PATCH] libata: fix ata_port_detach() for old EH ports
    
    ata_prot_detach() did nothing for old EH ports and thus SCSI hosts
    associated with those ports are left dangling after they are detached
    leaving stale devices and causing oops eventually.  Make
    ata_port_detach() remove SCSI hosts for old EH ports.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 782a6675119c76c071e74e2ddd98268f47770cba
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Aug 3 23:54:41 2006 +1000

    [PATCH] Send wireless netlink events with a clean slate
    
    Drivers expect to be able to call wireless_send_event in arbitrary
    contexts.  On the other hand, netlink really doesn't like being
    invoked in an IRQ context.  So we need to postpone the sending of
    netlink skb's to a tasklet.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit eca7994f60eb6550d9e9b36d3b641a5a0e18a7c1
Author: Dean Nelson <dcn@sgi.com>
Date:   Wed Jun 28 13:50:09 2006 -0500

    [IA64] make uncached allocator more node aware
    
    The uncached allocator has a function, uncached_get_new_chunk(), that needs
    to be serialized on a per node basis. It also has a global variable,
    allocated_granules, which should be defined on a per node basis and protected
    by that serialization. Additionally, all error returns from functions called
    (like ia64_pal_mc_drain()) should be handled appropriately.
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Acked-by: Jes Sorenson <jes@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 3b445eeac4f292aeb14df50b272729d0924da937
Merge: 1295278... 5c3e985...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 4 09:56:40 2006 -0700

    Merge branch 'fixes' of git://git.linux-nfs.org/pub/linux/nfs-2.6
    
    * 'fixes' of git://git.linux-nfs.org/pub/linux/nfs-2.6:
      SUNRPC: Fix obvious refcounting bugs in rpc_pipefs.
      RPC: Ensure that we disconnect TCP socket when client requests error out
      NLM/lockd: remove b_done
      NFS: make 2 functions static
      NFS: Release dcache_lock in an error path of nfs_path

commit 12952784e5271374b7cb926501f51b9649bf5a2b
Merge: efe78cd... 12e704d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Aug 4 09:41:22 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq:
      [CPUFREQ] Propagate acpi_processor_preregister_performance return value.
      [CPUFREQ] [2/2] demand load governor modules.
      [CPUFREQ] [1/2] add __find_governor helper and clean up some error handling.
      [CPUFREQ] Longhaul - Rename & fix multipliers table
      [CPUFREQ] Longhaul - Fix power state test to do something more useful
      [CPUFREQ] Longhaul - Readd accidentally dropped line
      [CPUFREQ] Make longhaul_walk_callback() static
      [CPUFREQ] X86_GX_SUSPMOD must depend on PCI
      [CPUFREQ] Longhaul - Initialise later.
      [CPUFREQ] Longhaul - Workaround issues with APIC.
      [CPUFREQ] Longhaul - Hook into ACPI C states.
      [CPUFREQ] return error when failing to set minfreq

commit 53c7d2b7706526bf262ac10eb52d602d1520458a
Merge: efe78cd... 8bcb283...
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Aug 3 22:44:55 2006 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6

commit efe78cda3596f8a6d1c2d4a6b1a221bafa3e1a48
Merge: 8861e98... f1d39b2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 3 17:33:59 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [PATCH] ahci: skip protocol test altogether in spurious interrupt code

commit 8861e98115f185d9946d92deaee6c3639ef8d414
Merge: 6e31554... c54772e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 3 17:33:32 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [PATCH] myri10ge - Fix spurious invokations of the watchdog reset handler
      [PATCH] myri10ge - Write the firmware in 256-bytes chunks
      [PATCH] Stop calling phy_stop_interrupts() twice
      [PATCH] s2io driver bug fixes #2
      [PATCH] s2io driver bug fixes #1
      [PATCH] zd1211rw: Packet filter fix for managed (STA) mode
      [PATCH] zd1211rw: Fixed endianess issue with length info tag detection
      [PATCH] zd1211rw: Remove bogus assert
      [PATCH] zd1211rw: Fix software encryption/decryption
      [PATCH] zd1211rw: Pass more management frame types up to host
      [PATCH] zd1211rw: Fixes radiotap header

commit 6e315544a61ac0fa21369e54e50a947ab899966e
Merge: c31ca59... 2131ca8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 3 17:31:15 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/pci-2.6:
      PNP: Add missing casts in printk() arguments
      PCI: docking station: remove dock uevents
      PCI: Unhide the SMBus on Asus PU-DLS
      PCI Hotplug: add acpiphp to MAINTAINERS
      PCI: pci/search: EXPORTs cannot be __devinit
      PCIE: cleanup on probe error
      pcie: fix warnings when CONFIG_PM=n

commit f1d39b291e2263f5e2f2ec5d4061802f76d8ae67
Author: Unicorn Chang <uchang@tw.ibm.com>
Date:   Tue Aug 1 12:18:07 2006 +0800

    [PATCH] ahci: skip protocol test altogether in spurious interrupt code
    
    Skip protocol test altogether in spurious interrupt code. If PIOS is received
    when it shouldn't, ahci will raise protocol violation.
    
    Signed-off-by: Unicorn Chang <uchang@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c54772e751c0262073e85a7aa87f093fc0dd44f1
Author: Brice Goglin <brice@myri.com>
Date:   Sun Jul 30 00:14:15 2006 -0400

    [PATCH] myri10ge - Fix spurious invokations of the watchdog reset handler
    
    Fix spurious invocations of the watchdog reset handler.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e454358ace657af953b5b289f49cf733973f41e4
Author: Brice Goglin <brice@myri.com>
Date:   Sun Jul 30 00:14:09 2006 -0400

    [PATCH] myri10ge - Write the firmware in 256-bytes chunks
    
    When writing the firmware to the NIC, the FIFO is 256-bytes long,
    so we use 256-bytes chunks and a read to wait until the previous
    write is done.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 817acf5ebd9ea21f134fc90064b0f6686c5b169d
Author: Sergei Shtylylov <sshtylyov@ru.mvista.com>
Date:   Wed Jul 26 00:53:53 2006 +0400

    [PATCH] Stop calling phy_stop_interrupts() twice
    
    Prevent phylib from freeing PHY IRQ twice on closing an eth device:
    phy_disconnect() first calls phy_stop_interrupts(), then it calls
    phy_stop_machine() which in turn calls phy_stop_interrupts() making the
    kernel complain on each bootup...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 75c30b1368faaa9c740536b91a15a33aab62f30b
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Mon Jul 24 19:55:09 2006 -0400

    [PATCH] s2io driver bug fixes #2
    
    	This patch contains some of the bug fixes and enhancements done to
    	s2io driver. Following are the brief description of changes
    
    	1. code cleanup to handle gso modification better
    	2. Move repeated code in rx path, to a common function
    	   s2io_chk_rx_buffers()
    	3. Bug fix in MSI interrupt
    	4. clear statistics when card is down
    	5. Avoid linked list traversing in lro aggregation.
    	6. Use pci_dma_sync_single_for_cpu for buffer0 in case of 2/3
    	   buffer mode.
    	7. ethtool tso get/set functions to set clear NETIF_F_TSO6
    	8. Stop LRO aggregation when we receive ECN notification
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b41477f32a5aaf39a77741c0138b16f16a636c70
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Mon Jul 24 19:52:49 2006 -0400

    [PATCH] s2io driver bug fixes #1
    
    	This patch contains some of the bug fixes and enhancements done to
    	s2io driver. Following are the brief description of changes
    
    	1. Introduced macro "S2IO_PARM_INT" for declaring integer load parameter
    	2. UDP_RR test failure, memset txdl after Tx completion
    	3. PXE boot may leave adapter in unknown state so do reset in probe.
    	4. Add Tx completion code in netpoll
    	5. In s2io_vpd_read() move array vpd_data[] to pointer, saves stack memory
    	6. Fix bug in ethtool online test
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2b14c30b46e007a16c665cc86329bf4a1d9ff6ee
Merge: fd60ae4... fde627b...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Aug 3 17:19:44 2006 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 5c3e985a2c1908aa97221d3806f85ce7e2fbfa88
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jul 29 17:37:40 2006 -0400

    SUNRPC: Fix obvious refcounting bugs in rpc_pipefs.
    
    Doh!
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 496f408f2f0e7ee5481a7c2222189be6c4f5aa6c commit)

commit e0ab53deaa91293a7958d63d5a2cf4c5645ad6f0
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jul 27 17:22:50 2006 -0400

    RPC: Ensure that we disconnect TCP socket when client requests error out
    
    If we're part way through transmitting a TCP request, and the client
    errors, then we need to disconnect and reconnect the TCP socket in order to
    avoid confusing the server.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 031a50c8b9ea82616abd4a4e18021a25848941ce commit)

commit f3d43c769d14b7065da7f62ec468b1fcb8cd6e06
Author: J. Bruce Fields <bfields@fieldses.org>
Date:   Thu Aug 3 15:07:47 2006 -0400

    NLM/lockd: remove b_done
    
    We never actually set the b_done field any more; it's always zero.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from af8412d4283ef91356e65e0ed9b025b376aebded commit)

commit e4e20512cfe0bacec0764b4925889d1fa94644f9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Aug 3 15:07:47 2006 -0400

    NFS: make 2 functions static
    
    nfs_writedata_free() and nfs_readdata_free() can now become static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from 5e1ce40f0c3c8f67591aff17756930d7a18ceb1a commit)

commit ce510193272c295b891e45525a83b543ae3207c1
Author: Josh Triplett <josht@us.ibm.com>
Date:   Mon Jul 24 16:30:00 2006 -0700

    NFS: Release dcache_lock in an error path of nfs_path
    
    In one of the error paths of nfs_path, it may return with dcache_lock still
    held; fix this by adding and using a new error path Elong_unlock which unlocks
    dcache_lock.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
    (cherry picked from f4b90b43677fb23297c56802c3056fc304f988d9 commit)

commit 2131ca8915ae545c596f94e75b692be2811d9c03
Author: Pierre Ossman <drzeus-list@drzeus.cx>
Date:   Thu Jul 13 11:35:41 2006 +0200

    PNP: Add missing casts in printk() arguments
    
    Some resource_size_t values are fed to printk() without handling the fact
    that they can have different size depending on your .config.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5669021e40964303994a20633548732c6bb26636
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Tue Aug 1 14:59:19 2006 -0700

    PCI: docking station: remove dock uevents
    
    Remove uevent dock notifications.  There are no consumers
    of these events at present, and uevents are likely not the
    correct way to send this type of event anyway.
    
    Until I get some kind of idea if anyone in userspace cares
    about dock events, I will just not send any.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 321311af25cbb65d3cc177e3777fedd526814ecc
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jul 31 08:53:15 2006 +0200

    PCI: Unhide the SMBus on Asus PU-DLS
    
    Unhide the SMBus controller on the Asus PU-DLS board.
    This fixes bug #6763.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 998be20fdff12274cd0e6a9f71ce1a93abf40718
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jul 26 10:52:33 2006 -0700

    PCI Hotplug: add acpiphp to MAINTAINERS
    
    Add acpiphp to the MAINTAINERS file.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c8439cfccc4143b79f70d18015336d9fec0563e2
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jul 18 14:33:16 2006 -0700

    PCI: pci/search: EXPORTs cannot be __devinit
    
    EXPORTed symbols cannot be __init/__devinit.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e4fd1f4a6e05335d464fe003c164fea850a3b3f3
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jul 6 21:36:01 2006 -0700

    PCIE: cleanup on probe error
    
    If pcie_portdrv_probe() fails but it had already called
    pci_enable_device(), then call pci_disable_device() when
    returning error.
    
    Is there some reason that this isn't being done?
    or was it just missed?
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 60854838596906ebae7f32e4de921e150e669b60
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Thu Jul 6 18:05:51 2006 +0400

    pcie: fix warnings when CONFIG_PM=n
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c31ca59e25f82879644088c97fe9cffbaa292786
Merge: fd60ae4... e44e41d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Aug 3 12:50:20 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64] fix show_mem for VIRTUAL_MEM_MAP+FLATMEM
      [IA64] align high endpoint of VIRTUAL_MEM_MAP
      [PATCH] Fix RAID5 + IA64 compile
      [IA64] Don't alloc empty frame in ia64_switch_mode_phys
      [IA64] Do not assume output registers be reservered.
      [IA64] add platform check to snsc driver init
      [IA64] sparse cleanups
      [IA64] Fix breakage in simscsi.c
      [IA64] Format /proc/pal/*/version_info correctly

commit fd60ae404f104f12369e654af9cf03b1f1047661
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Thu Aug 3 10:56:42 2006 -0700

    IB/uverbs: Avoid a crash on device hot remove
    
    Wait until all users have closed their device context before allowing
    device unregistration to complete.  This prevents a crash caused by
    referring to stale data structures.
    
    A better solution would be to have a way to revoke contexts rather
    than waiting for userspace to close the context, but that's a much
    bigger change that will have to wait.  For now let's at least avoid
    the crash.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8ddc7c5326064434048ec1ecfe57659e08345cc1
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu Jul 13 11:00:39 2006 +0300

    IB/ipoib: Remove broken link from Kconfig and documentation
    
    Remove references to the IPoIB IETF working group as it has been closed.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 559ce8f150d7d031c79c4d79173860f1bdfe3ce4
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Thu Aug 3 10:35:43 2006 -0700

    IB/srp: Work around data corruption bug on Mellanox targets
    
    Data corruption has been seen with Mellanox SRP targets when FMRs
    create a memory region with I/O virtual address != 0.  Add a
    workaround that disables FMR merging for Mellanox targets (OUI 0002c9).
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e44e41d0c832ebbda7311a1fe43584d844026357
Author: Bob Picco <bob.picco@hp.com>
Date:   Wed Jun 28 12:55:43 2006 -0400

    [IA64] fix show_mem for VIRTUAL_MEM_MAP+FLATMEM
    
    contig.c (FLATMEM) requires the same optimization as in discontig.c for show_mem
    when VIRTUAL_MEM_MAP is in use. Otherwise FLATMEM has softlockup timeouts.
    This was boot tested for memory configuration: SPARSEMEM,
    DISCONTIG+VIRTUAL_MEM_MAP, FLATMEM, FLATMEM+VIRTUAL_MEM_MAP and
    FLATMEM+VIRTUAL_MEM_MAP with largest memory gap less than LARGE_GAP by
    using boot parameter "mem=".
    
    This was boot tested and "echo m >/proc/sysrq-trigger" output evaluated for
    : FLATMEM, FLATMEM+VIRTUAL_MEM_MAP, DISCONTIGMEM+VIRTUAL_MEM_MAP and
    SPARSEMEM.
    
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 921eea1cdf6ce7f0db88e4579474a04b1fb0fe6d
Author: Bob Picco <bob.picco@hp.com>
Date:   Wed Jun 28 12:54:55 2006 -0400

    [IA64] align high endpoint of VIRTUAL_MEM_MAP
    
    Assure that vmem_map's high endpoint is MAX_ORDER aligned. Not doing so violates
    the buddy allocator algorithm. Also anyone using mem=XXX on boot line and
    not aligned to MAX_ORDER requires this patch in order to satisfy buddy
    allocator. vmem_map always starts at pfn 0. The potentially large MAX_ORDER
    on ia64 (due to hugetlbfs) requires that the end of vmem_map be aligned
    to MAX_ORDER_NR_PAGES.
    
    This was boot tested for: FLATMEM, FLATMEM+VIRTUAL_MEM_MAP,
    DISCONTIGMEM+VIRTUAL_MEM_MAP and SPARSEMEM.
    
    Signed-off-by: Bob Picco <bob.picco@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0a69ca91be2b36f99a48daacd1f12d9d49ecaf87
Author: Prarit Bhargava <prarit@redhat.com>
Date:   Mon Jul 31 09:12:11 2006 -0400

    [PATCH] Fix RAID5 + IA64 compile
    
    CONFIG_MD_RAID5 became CONFIG_MD_RAID456 in drivers/md/Kconfig.  Make
    the same change in arch/ia64
    
    Signed-off-by: Prarit Bhargava <prarit@redhat.com>
    Signed-off-by: Aron Griffis <aron@hp.com>
    Acked-by: Jes Sorenson <jes@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d916a8f1b43b358685b1672390ead11f2d3b74c6
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Tue Jul 25 19:54:09 2006 +0300

    IB/srp: Fix crash in srp_reconnect_target
    
    Protect against srp_reset_device() clearing the req_queue while
    srp_reconnect_target() is in progress (note that state change at
    the top of srp_reconnect_target() is not sufficient for this since
    srp_reset_device() ignores the state).
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 75df23e229acab85b704f4603bdf5efdc7960e6a
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Tue Jul 25 19:52:01 2006 +0300

    IB/cm: Fix error handling in ib_send_cm_req
    
    Report error code rather than success (0) on failure allocating
    timewait_info in ib_send_cm_req().
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 69e9fbb460fa8766428960439841ffcf565032c1
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Aug 3 09:44:22 2006 -0700

    IB/mthca: Clean up mthca array index mask
    
    Define a constant MTHCA_ARRAY_MASK to replace repeated uses of
    (PAGE_SIZE / sizeof (void *) - 1) in mthca array code.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit bf74c7479ef47652005a2418eeb0d867451690da
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Jul 26 16:02:53 2006 +0300

    IB/mthca: Fix mthca_array_clear() thinko
    
    mthca_array_clear() does not clear the slot if the used count is
    positive. This leads to crashes in mthca_qp_event() since that uses
    mthca_array_get() to check that the qp is valid.
    
    Discovered by Ali Ayoub.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 3f2792ffbd88dc1cd41d226674cc428914981e98
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Jul 16 06:43:48 2006 -0400

    [PATCH] take filling ->pid, etc. out of audit_get_context()
    
    move that stuff downstream and into the only branch where it'll be
    used.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 5ac3a9c26c1cc4861d9cdd8b293fecbfcdc81afe
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sun Jul 16 06:38:45 2006 -0400

    [PATCH] don't bother with aux entires for dummy context
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit d51374adf5f2f88155a072d3d801104e3c0c3d7f
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Aug 3 10:59:26 2006 -0400

    [PATCH] mark context of syscall entered with no rules as dummy
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 471a5c7c839114cc8b55876203aeb2817c33e3c5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jul 10 08:29:24 2006 -0400

    [PATCH] introduce audit rules counter
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 5422e01ac16df7398b2bad1eccad0ae3be4dee32
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Tue Aug 1 17:52:26 2006 -0400

    [PATCH] fix audit oops with invalid operator
    
    Michael C Thompson wrote:  [Tue Aug 01 2006, 02:36:36PM EDT]
    > The trigger for this oops is:
    > # auditctl -a exit,always -S pread64 -F 'inode<1'
    
    Setting the err value will fix it.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 6988434ee5f532c71be3131fba23283f5cf43847
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jul 13 13:17:12 2006 -0400

    [PATCH] fix oops with CONFIG_AUDIT and !CONFIG_AUDITSYSCALL
    
    Always initialize the audit_inode_hash[] so we don't oops on list rules.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 73d3ec5abad3f1730ac8530899d2c14d92f3ad63
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jul 13 13:16:39 2006 -0400

    [PATCH] fix missed create event for directory audit
    
    When an object is created via a symlink into an audited directory, audit misses
    the event due to not having collected the inode data for the directory.  Modify
    __audit_inode_child() to copy the parent inode data if a parent wasn't found in
    audit_names[].
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 3e2efce067cec0099f99ae59f28feda99b02b498
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jul 13 13:16:02 2006 -0400

    [PATCH] fix faulty inode data collection for open() with O_CREAT
    
    When the specified path is an existing file or when it is a symlink, audit
    collects the wrong inode number, which causes it to miss the open() event.
    Adding a second hook to the open() path fixes this.
    
    Also add audit_copy_inode() to consolidate some code.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 6cb53e7ed77d429531afa8d822d59909f953a771
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Aug 2 21:12:09 2006 +0200

    [ALSA] Don't reject O_RDWR at opening PCM OSS with read/write-only device
    
    Accept O_RDWR at opening a PCM OSS device that is read- or write-only,
    just for the compatibility with the behavior of older versions.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 264f9577a5a12de97aa85fa49dfd2788a4127e23
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Jul 30 17:17:59 2006 +0100

    [ALSA] snd-emu10k1: Implement support for Audigy 2 ZS [SB0353]
    
    Fixes ALSA bug#1365.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4226906361179366c5e33e8c671bfe2706348ed5
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jul 25 16:15:50 2006 +0200

    [ALSA] add MAINTAINERS entry for snd-aoa
    
    This adds me into the MAINTAINERS file for the AOA driver.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit be6a83dd668fb8578456b61d9e16a18d9bc37a65
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jul 25 16:15:07 2006 +0200

    [ALSA] aoa: platform function gpio: ignore errors from functions that don't exist
    
    Sometimes we simply want to turn off or on everything, and when recently a
    warning was added when a certain platform function can't be called, this
    triggered all the time in those cases. This patch shows the warning only if
    the error was different from the function not existing.
    The alternative would be to not even try calling the function when it
    doesn't exist by first checking which exist and then only calling those that
    do, but that adds complexity that isn't necessary.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 545b07d3620c9eac3349398b5303d20cab260ff6
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jul 25 16:14:16 2006 +0200

    [ALSA] make snd-powermac load even when it can't bind the device
    
    This patch makes snd-powermac load when it can't bind the device right
    away. That's the expected behaviour for hotplugging, but fixes an
    important problem I was seeing with doing a modprobe snd-powermac with
    a version that refuses loading on machines with layout-id: snd-powermac
    would create a bunch of uevents and then refuse to load, the uevents
    causing udev to reload it again, ad eternum.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 6e8331ac6973435b1e7604c30f2ad394035b46e1
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jul 25 16:13:37 2006 +0200

    [ALSA] aoa: fix toonie codec
    
    This patch fixes the toonie codec to be actually usable.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2566d36ab4f0b90141bb59a5f7342255751fbf45
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jul 25 16:12:51 2006 +0200

    [ALSA] aoa: feature gpio layer: fix IRQ access
    
    The IRQ rework caused some hiccups here, in some cases we call
    get_irq without a device node. This patch makes it catch that
    case and return NO_IRQ when it happens, along with changing the
    place where the irq is checked to check for NO_IRQ instead of -1.
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 59feddb25f9d925e86ee22596802405788bc050f
Author: Panagiotis Issaris <takis@issaris.org>
Date:   Tue Jul 25 15:28:03 2006 +0200

    [ALSA] Conversions from kmalloc+memset to k(z|c)alloc
    
    sound: Conversions from kmalloc+memset to k(c|z)alloc.
    
    Signed-off-by: Panagiotis Issaris <takis@issaris.org>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit fb6a0d635d4ff6b3555179d0154981f03427071a
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Jul 23 13:59:44 2006 +0100

    [ALSA] snd-emu10k1: Fixes ALSA bug#2190
    
    Fixes ALSA bug#2190 System hangs on unplugging Audigy 2 ZS
    Notebook CardBus card.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 46f5960fdbf359f0c75989854bbaebc1de7a1eb4
Merge: 90eb29e... 29bbd72...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 2 22:35:26 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (32 commits)
      [NET]: Fix more per-cpu typos
      [SECURITY]: Fix build with CONFIG_SECURITY disabled.
      [I/OAT]: Remove CPU hotplug lock from net_dma_rebalance
      [DECNET]: Fix for routing bug
      [AF_UNIX]: Kernel memory leak fix for af_unix datagram getpeersec patch
      [NET]: skb_queue_lock_key() is no longer used.
      [NET]: Remove lockdep_set_class() call from skb_queue_head_init().
      [IPV6]: SNMPv2 "ipv6IfStatsOutFragCreates" counter error
      [IPV6]: SNMPv2 "ipv6IfStatsInHdrErrors" counter error
      [NET]: Kill the WARN_ON() calls for checksum fixups.
      [NETFILTER]: xt_hashlimit/xt_string: missing string validation
      [NETFILTER]: SIP helper: expect RTP streams in both directions
      [E1000]: Convert to netdev_alloc_skb
      [TG3]: Convert to netdev_alloc_skb
      [NET]: Add netdev_alloc_skb().
      [TCP]: Process linger2 timeout consistently.
      [SECURITY] secmark: nul-terminate secdata
      [NET] infiniband: Cleanup ib_addr module to use the netevents
      [NET]: Core net changes to generate netevents
      [NET]: Network Event Notifier Mechanism.
      ...

commit 90eb29efd0ca9301d80d03ea13662d32436f060e
Merge: 1398ab7... cae74b3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 2 20:25:35 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6: (24 commits)
      Revert "[PATCH] USB: move usb_device_class class devices to be real devices"
      Revert "[PATCH] USB: convert usb class devices to real devices"
      USB: UHCI: Don't test the Short Packet Detect bit
      USB: unusual_devs entry for Nokia 3250
      USB: dummy-hcd: disable interrupts during req->complete
      USB: fix the USB_GADGET_DUMMY_HCD dependencies
      USB: ati_remote.c: autorepeat fix
      USB: doc: fixes devio.c location in proc_usb_info.txt.
      USB: doc: usb-help.txt update.
      USB: Patch for rtl8150 to fix unplug problems
      USB: cypress driver comment updates
      USB: unusual_devs device removal
      usb-storage: Add US_FL_IGNORE_DEVICE flag; ignore ZyXEL G220F
      USB: New USB ID for Belkin Serial Adapter
      USB: Additional PID for the ftdi_sio driver
      USB: adding support for SHARP WS003SH to ipaq.c
      USB: Fix Freescale high-speed USB host dependency
      USB: Removed 3-port device handler from Option driver
      USB: Drop Sierra Wireless MC8755 from the Option driver
      USB: Let option driver handle Anydata CDMA modems. Remove anydata driver.
      ...

commit 1398ab7cb92b21d8d5add3bdc25b2c00462cfd5c
Merge: a166222... e252630...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 2 20:21:23 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3743/1: ARM: OMAP: Fix compile for OMAP
      [ARM] 3739/1: genirq updates:  irq_chip, add and use irq_chip.name

commit a166222cde740b34d97fe49dca70348197f4534e
Author: Muli Ben-Yehuda <muli@il.ibm.com>
Date:   Wed Aug 2 22:37:31 2006 +0200

    [PATCH] x86_64: Fix CONFIG_IOMMU_DEBUG
    
    If CONFIG_IOMMU_DEBUG is set force_iommu defaults to 1. In the case
    where no HW IOMMU is present in the machine and we end up using nommu,
    leaving force_iommu set to 1 causes dma_alloc_coherent to do the wrong
    thing. Therefore, if we end up using nommu, make sure force_iommu is
    0.
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2699500b31f41fc25656c42548c8a388c8a329fe
Author: Andi Kleen <ak@suse.de>
Date:   Wed Aug 2 22:37:28 2006 +0200

    [PATCH] x86_64: Fix backtracing for interrupt stacks
    
    Re-add backlink for old style unwinder to stack switching.  Add proper
    stack frame and CFI annotations to call_softirq
    
    This prevents a oops when backtracing with fallback through the
    interrupt stack top.
    
    Suggested by Jan Beulich and Herbert Xu wanted it in 2.6.18.
    
    Cc: jbeulich@novell.com
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae74c3b69a08e1de20cb681ec959f3a48af0006a
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 2 20:17:49 2006 -0700

    Fix force_sig_info() semantics after cleanups
    
    Suresh points out that commit b0423a0d9cc836b2c3d796623cd19236bfedfe63
    broke the semantics of a synchronous signal like SIGSEGV occurring
    recursively inside its own handler handler (or, indeed, any other
    context when the signal was blocked).
    
    That was unintentional, and this fixes things up by reinstating the old
    semantics, but without reverting the cleanups.
    
    Cc: Paul E. McKenney <paulmck@us.ibm.com>
    Acked-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 202668ecb6cb221460d884598dd4cd2e1f3292f3
Merge: a205729... 8ccf283...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 2 20:12:25 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild-2.6.18
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild-2.6.18:
      gitignore: gitignore quilt's files
      kbuild: always use $(CC) for $(call cc-version)
      kconfig: correct oldconfig for unset choice options
      kbuild: -fno-stack-protector is not good
      kbuild: fix typo in modpost
      kbuild: improve error from file2alias
      kbuild: .gitignore utsrelease.h
      kbuild: version.h and new headers_* targets does not require a kernel config
      kbuild: hardcode value of YACC&LEX for aic7-triple-x

commit cae74b30dd98c10baa5b47b4698bf67e5eb15687
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 2 16:52:10 2006 -0700

    Revert "[PATCH] USB: move usb_device_class class devices to be real devices"
    
    This reverts c182274ffe1277f4e7c564719a696a37cacf74ea commit because it
    required a newer version of udev to work properly than what is currently
    documented in Documentation/Changes.
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 27fb4f0a7f00fda4044de44dcbe4d65b8359cc38
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Aug 2 16:49:37 2006 -0700

    Revert "[PATCH] USB: convert usb class devices to real devices"
    
    This reverts bd00949647ddcea47ce4ea8bb2cfcfc98ebf9f2a commit because it
    required a newer version of udev to work properly than what is currently
    documented in Documentation/Changes.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f443ddf1057776ed99d5006bbbefb018fcf7ce3a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jul 31 10:16:24 2006 -0400

    USB: UHCI: Don't test the Short Packet Detect bit
    
    Apparently some UHCI controllers change the value of the Short Packet
    Detect (SPD) bit in the TD status word -- presumably when they receive a
    short packet.  This patch (as759) changes uhci-hcd to avoid assuming
    that the bit is unchanged; in fact, the driver no longer looks at SPD at
    all.
    
    This fixes the second problem reported in Bugzilla #6752.
    
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit de1caa475120c716ff33d344b5ffefc288ed77c7
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jul 31 10:10:28 2006 -0400

    USB: unusual_devs entry for Nokia 3250
    
    Here is another unusual_devs entry (as760) for another Nokia device,
    this time the 3250.
    
    From: Mario Rettig <mariorettig@web.de>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b4dbda1a22d236842b75be4e2679a96a4fd72632
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jul 28 17:07:34 2006 -0400

    USB: dummy-hcd: disable interrupts during req->complete
    
    This patch (as756) fixes a bug in dummy-hcd found by the lockdep
    checker.  In one of the code paths, the driver did not disable
    interrupts before calling a request completion routine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit be0c8015a2e981b9079cb5f0e2bf868fa10249ae
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 31 01:43:53 2006 +0200

    USB: fix the USB_GADGET_DUMMY_HCD dependencies
    
    If USB=m, USB_GADGET=y, the option USB_GADGET_DUMMY_HCD mustn't be
    offered since selecting it results in a compile error.
    
    This patch fixes kernel Bugzilla #6534 reported by Toralf F๖rster.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 168ffc444663e34a20e6d04b6c31e5d495b283fb
Author: Marko Macek <Marko.Macek@gmx.net>
Date:   Sun Jul 30 01:55:12 2006 -0700

    USB: ati_remote.c: autorepeat fix
    
    When HZ is set to 250 (new default) or 100, the time span during which
    repeated events from the device are ignored could be too small due to
    ms->jiffies rounding.  This causes the auto repeat to kick in early making
    it impossible for the user to generate individual press/release events.
    Increate the timeout to compensate.
    
    Signed-off-by: Marko Macek <Marko.Macek@gmx.net>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Cc: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 064e875a4cb1dad7b3a00661877fe8cd95d1a59a
Author: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
Date:   Thu Jul 27 22:01:34 2006 -0300

    USB: doc: fixes devio.c location in proc_usb_info.txt.
    
    Signed-off-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e74b06aff598def819b44225ebfbb907fd10179
Author: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
Date:   Thu Jul 27 21:59:17 2006 -0300

    USB: doc: usb-help.txt update.
    
     http://www.suse.cz/development/linux-usb/ doesn't exist anymore.
    
    Signed-off-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 23219c134865d524357e9bb90e5badb422ac8fff
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue Jul 25 20:39:14 2006 +1000

    USB: Patch for rtl8150 to fix unplug problems
    
    The RTL8150 driver currently crashes the kernel if the USB lead is unplugged
    while the device is active.  The attached patch adds error handling to
    tell the network layer that the device has gone away when the device is
    unplugged.  With this patch, the device can be plugged and unplugged
    to one's hearts' content, without crashing anything.
    
    Oh, I've also added rudimentary suspend and resume methods.
    
    Signed-off-by: Peter Chubb <peter@gelato.unsw.edu.au>
    Acked-by: Petko Manolov <petkan@nucleusys.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6ad576bb6715c1da1bb5c2ce59c3747368bba41f
Author: Oliver Bock <o.bock@fh-wolfenbuettel.de>
Date:   Thu Jul 27 21:34:58 2006 +0200

    USB: cypress driver comment updates
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eda30fdeec30aec05bc8d644eb6f2509fb5ad43c
Author: Phil Dibowitz <phil@ipom.com>
Date:   Wed Jul 26 22:36:29 2006 -0700

    USB: unusual_devs device removal
    
    This entry has been a mystery for some time. I had sent this patch as an
    RFC a while ago, and now we've had two reports of this not being needed,
    so I'm removing it.
    
    In the event there are reports of breakage, we should revert this patch,
    but add a US_FL_NEED_OVERRIDE flag.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3c332422f78159a0f5e4bc5f0ed8bbcbf51d9462
Author: Daniel Drake <dsd@gentoo.org>
Date:   Wed Jul 26 13:59:23 2006 +0100

    usb-storage: Add US_FL_IGNORE_DEVICE flag; ignore ZyXEL G220F
    
    This patch adds a new unusual_devs flag for when usb-storage needs to ignore
    a device that it would otherwise claim.
    
    We need to ignore the ZyXEL G220F as it is a virtual CDROM drive which
    includes the windows driver for this USB-WLAN adapter. After the windows
    driver is installed on a windows system, it converts it into a WLAN adapter
    (by ejecting the virtual disc).
    
    The virtual CDROM is of no interest to Linux users. The zd1211rw driver will
    automatically perform the eject operation, we just need to ensure that
    usb-storage does not claim the device.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b7aa94b682dc6b6dcdc01d36f8e65cef5aae81e2
Author: Kim Oldfield <luv@oldfield.wattle.id.au>
Date:   Tue Jul 25 15:54:59 2006 +1000

    USB: New USB ID for Belkin Serial Adapter
    
    Can you add the USB IDs for the Belkin USB Serial adapter (P/N F5U257)
    to the pl2303 driver in the Linux Kernel? Are you the appropriate person
    to approach for this?
    
    I recently purchased a Belkin USB Serial adapter (P/N F5U257) and found
    that it didn't work. After a bit of experimentation I found that it
    works with the pl2303 driver once the ID has been added. See attached
    patch to fix this. Also attached is the output from lsusb -v just in
    case you require any information from there.
    
    
    From: Kim Oldfield <luv@oldfield.wattle.id.au>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 274a4bbc9df34d83485e67ad5200a43bd3c69600
Author: Dave Platt <dplatt@radagast.org>
Date:   Tue Jul 18 21:26:54 2006 -0700

    USB: Additional PID for the ftdi_sio driver
    
    Here's a short patch which adds one PID to the set of devices
    supported by the ftdi_sio driver.  The device in question is a
    DLP module used as part of a ham radio USB-to-packet adapter.
    
    From: Dave Platt <dplatt@radagast.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aec0d50b8a86bf04ea8e5885fef4f498d5d3168c
Author: Norihiko Tomiyama <norihiko.tomiyama@ctc-g.co.jp>
Date:   Thu Jul 13 09:43:02 2006 +0900

    USB: adding support for SHARP WS003SH to ipaq.c
    
    This small patch enables a support of "SHARP WS003SH".
    "SHARP WS003SH" (usullary called "W-ZERO3") is most polular All-in-one handheld
    CellPhone-plus-WindowsMobile5.0 in Japan.
    
    "SHARP WS003SH" has two modes, "Modem" and "ActiveSync".
    But, "ActiveSync" mode uses NDIS connection.
    Therefore, ipaq.c can only support "Modem" mode.
    
    http://www.sharp.co.jp/ws/ (Japanese Site)
    http://greggman.com/edit/editheadlines/2005-12-24.htm
    
    From: Norihiko Tomiyama <norihiko.tomiyama@ctc-g.co.jp>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a11570f2a48cbb6e10c520b46193e7b1b4b9245c
Author: Li Yang <leoli@freescale.com>
Date:   Fri Jul 14 19:58:14 2006 +0800

    USB: Fix Freescale high-speed USB host dependency
    
    The high-speed USB SOC only exists on MPC834x family not MPC83xx family.
    
    Signed-off-by: Li Yang <leoli@freescale.com>
    Acked-by: Kumar Gala <galak@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a01c452ee3a185a35140939c6dca08d77240b863
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Jul 20 05:01:21 2006 +0200

    USB: Removed 3-port device handler from Option driver
    
    Dead code.
    
    From: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c1c2f73e00b5d0413399a14b7ab9e80db94926f
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Jul 20 04:56:00 2006 +0200

    USB: Drop Sierra Wireless MC8755 from the Option driver
    
    This device is now supported by sierra.c.
    
    From: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 31fcbb733812bca52e8bee96d62ba56df0fc408b
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Wed Jul 12 08:35:29 2006 +0200

    USB: Let option driver handle Anydata CDMA modems. Remove anydata driver.
    
    Signed-off-by: Jon K Hellan <hellan@acm.org>
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 02b2ac5b0370b1157a5a99f2fdf006644b9b86d5
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Wed Aug 2 16:41:41 2006 -0700

    USB: Option driver: Short driver names were identical
    
    The short driver names were not unique,
    which prevented the driver from actually loading.
    
    Also, one of the ioctl pointers was missing.
    
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b3fdab59b8f5d8e42fa339be74cd015dc1a3192f
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Wed Aug 2 16:41:41 2006 -0700

    USB: Option driver: removed change history and linux/version.h include
    
    Signed-off-by: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0365ee0a8f7450c5e79302930d461e58161a96a1
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jun 19 14:27:20 2006 -0700

    USB: AT91 OHCI updates, mostly power management
    
    OHCI updates for AT91 series processors:
    
     - Get ready for at91sam926x processors (ARMv5tej not ARMv4t)
    
     - Suspend/resume support now behaves properly
    
     - In "standby" mode, OHCI can be a source of system wakeup events
       (remote wakeup, device connect/disconnect, etc)
    
    And minor cleanups.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8b2e76687b39213725207b4a4264e11e8c7b86e6
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Jul 5 02:38:56 2006 -0700

    USB: AT91 UDC updates, mostly power management
    
    UDC updates for AT91 series processors:
    
     - Get ready for at91sam926x processors (ARMv5tej not ARMv4t)
    
     - Suspend/resume support now behaves properly
    
     - In "standby" mode, UDC can be a source of system wakeup events
       (host resume, device connect/disconnect, etc)
    
     - Fix IRQ storming issues, seemingly related to clock disabling
       changes that went in a while back
    
    And minor cleanups, especially whitespace.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Victor  <andrew@sanpeople.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e55ce456155813ca34e105d0e05306edad05cf6e
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Wed Jul 26 07:36:40 2006 +0800

    [IA64] Don't alloc empty frame in ia64_switch_mode_phys
    
    I think ia64_switch_mode_phys and ia64_switch_mode_virt
    does not need to alloc an empty frame.
    An empty frame is required by loadrs but flushrs
    does not need that.
    
    Signed-off-by: Zou Nan hai <nanhai.zou@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit acb15c85de57d81d773b6e4184b7cb143ce83eba
Author: Zou Nan hai <nanhai.zou@intel.com>
Date:   Wed Jul 26 07:26:51 2006 +0800

    [IA64] Do not assume output registers be reservered.
    
    We found an issue in pal.S.
    
    According to the software runtime SPEC,
    The caller's output registers do not need to be preserved for
    caller. The callee may reuse input registers for any other
    purpose within the procedure.
    
    in ia64_pal_call_phys_stacked,
    
    input registers are copied to output registers before call
    into ia64_switch_mode_phys, then used to call into PAL. This
    assumes output registers are preserved in ia64_switch_mode_phys,
    which may not be true.
    
    In this particular case, ia64_switch_mode_phys alloc a null frame
    , and mask off psr.i.
    If an interrupt comes at this small window,
    or an MCA comes inside the procedure, output registers
    maybe changed,
    then the pal call may got some staled input registers.
    
    This patch moves the copies from input to output
    after ia64_switch_mode_phys to follow the software
    runtime convention.
    
    It  also removed some unused labels in
    ia64_pal_call_phys_stacked.
    
    Signed-off-by: Zou Nan hai <nanhai.zou@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit c7c17423b9ea3c5559cfb480a00844f1df9eed06
Author: Greg Edwards <edwardsg@sgi.com>
Date:   Fri Jul 28 10:03:55 2006 -0500

    [IA64] add platform check to snsc driver init
    
    Add a platform check to the snsc driver init function, to prevent
    loading on non-sn2 systems.
    
    Signed-off-by: Greg Edwards <edwardsg@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e037cda559547e6353c5a792802963572d0b750e
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Jul 17 15:41:59 2006 +1000

    [IA64] sparse cleanups
    
    Fix some sparse warnings on ia64.  Large constants that should be long
    instead of int.  Use NULL instead of 0.  Add some missing __iomem
    casts.  Replace a non-C99 structure assignment.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 29bbd72d6ee1dbf2d9f00d022f8e999aa528fb3a
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Wed Aug 2 15:02:31 2006 -0700

    [NET]: Fix more per-cpu typos
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95ce568812822931991a24147987c5c75c0ac5b0
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Aug 2 14:37:06 2006 -0700

    [SECURITY]: Fix build with CONFIG_SECURITY disabled.
    
    include/linux/security.h: In function โsecurity_release_secctxโ:
    include/linux/security.h:2757: warning: โreturnโ with a value, in function returning void
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e6eb307d48c81d688804f8b39a0a3ddde3cd3458
Author: Chris Leech <christopher.leech@intel.com>
Date:   Wed Aug 2 14:21:19 2006 -0700

    [I/OAT]: Remove CPU hotplug lock from net_dma_rebalance
    
    Remove the lock_cpu_hotplug()/unlock_cpu_hotplug() calls from
    net_dma_rebalance
    
    The lock_cpu_hotplug()/unlock_cpu_hotplug() sequence in
    net_dma_rebalance is both incorrect (as pointed out by David Miller)
    because lock_cpu_hotplug() may sleep while the net_dma_event_lock
    spinlock is held, and unnecessary (as pointed out by Andrew Morton) as
    spin_lock() disables preemption which protects from CPU hotplug
    events.
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9bbf28a1ff7b9d4e7df57829c25638721984277b
Author: Patrick Caulfield <patrick@tykepenguin.com>
Date:   Wed Aug 2 14:14:44 2006 -0700

    [DECNET]: Fix for routing bug
    
    This patch fixes a bug in the DECnet routing code where we were
    selecting a loopback device in preference to an outward facing device
    even when the destination was known non-local. This patch should fix
    the problem.
    
    Signed-off-by: Patrick Caulfield <patrick@tykepenguin.com>
    Signed-off-by: Steven Whitehouse <steve@chygwyn.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dc49c1f94e3469d94b952e8f5160dd4ccd791d79
Author: Catherine Zhang <cxzhang@watson.ibm.com>
Date:   Wed Aug 2 14:12:06 2006 -0700

    [AF_UNIX]: Kernel memory leak fix for af_unix datagram getpeersec patch
    
    From: Catherine Zhang <cxzhang@watson.ibm.com>
    
    This patch implements a cleaner fix for the memory leak problem of the
    original unix datagram getpeersec patch.  Instead of creating a
    security context each time a unix datagram is sent, we only create the
    security context when the receiver requests it.
    
    This new design requires modification of the current
    unix_getsecpeer_dgram LSM hook and addition of two new hooks, namely,
    secid_to_secctx and release_secctx.  The former retrieves the security
    context and the latter releases it.  A hook is required for releasing
    the security context because it is up to the security module to decide
    how that's done.  In the case of Selinux, it's a simple kfree
    operation.
    
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2b7e24b66d31d677d76b49918e711eb360c978b6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Aug 2 14:07:58 2006 -0700

    [NET]: skb_queue_lock_key() is no longer used.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 76f10ad0e67cbc6ded2ee143e5188e0b7ff9fb15
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Wed Aug 2 14:06:55 2006 -0700

    [NET]: Remove lockdep_set_class() call from skb_queue_head_init().
    
    The skb_queue_head_init() function is used both in drivers for private use
    and in the core networking code.  The usage models are vastly set of
    functions that is only softirq safe; while the driver usage tends to be
    more limited to a few hardirq safe accessor functions.  Rather than
    annotating all 133+ driver usages, for now just split this lock into a per
    queue class.  This change is obviously safe and probably should make
    2.6.18.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dafee490858f79e144c5e6cdd84ceb9efa20a3f1
Author: Wei Dong <weid@nanjing-fnst.com>
Date:   Wed Aug 2 13:41:21 2006 -0700

    [IPV6]: SNMPv2 "ipv6IfStatsOutFragCreates" counter error
    
      When I tested linux kernel 2.6.71.7 about statistics
    "ipv6IfStatsOutFragCreates", and found that it couldn't increase
    correctly. The criteria is RFC 2465:
    
      ipv6IfStatsOutFragCreates OBJECT-TYPE
          SYNTAX      Counter32
          MAX-ACCESS  read-only
          STATUS      current
          DESCRIPTION
             "The number of output datagram fragments that have
             been generated as a result of fragmentation at
             this output interface."
          ::= { ipv6IfStatsEntry 15 }
    
    I think there are two issues in Linux kernel.
    1st:
    RFC2465 specifies the counter is "The number of output datagram
    fragments...". I think increasing this counter after output a fragment
    successfully is better. And it should not be increased even though a
    fragment is created but failed to output.
    
    2nd:
    If we send a big ICMP/ICMPv6 echo request to a host, and receive
    ICMP/ICMPv6 echo reply consisted of some fragments. As we know that in
    Linux kernel first fragmentation occurs in ICMP layer(maybe saying
    transport layer is better), but this is not the "real"
    fragmentation,just do some "pre-fragment" -- allocate space for date,
    and form a frag_list, etc. The "real" fragmentation happens in IP layer
    -- set offset and MF flag and so on. So I think in "fast path" for
    ip_fragment/ip6_fragment, if we send a fragment which "pre-fragment" by
    upper layer we should also increase "ipv6IfStatsOutFragCreates".
    
    Signed-off-by: Wei Dong <weid@nanjing-fnst.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 32c524d1c48b62be49fa1b1dd93fed10792debc0
Author: Wei Dong <weid@nanjing-fnst.com>
Date:   Wed Aug 2 13:39:57 2006 -0700

    [IPV6]: SNMPv2 "ipv6IfStatsInHdrErrors" counter error
    
      When I tested Linux kernel 2.6.17.7 about statistics
    "ipv6IfStatsInHdrErrors", found that this counter couldn't increase
    correctly. The criteria is RFC2465:
      ipv6IfStatsInHdrErrors OBJECT-TYPE
          SYNTAX     Counter3
          MAX-ACCESS read-only
          STATUS     current
          DESCRIPTION
             "The number of input datagrams discarded due to
             errors in their IPv6 headers, including version
             number mismatch, other format errors, hop count
             exceeded, errors discovered in processing their
             IPv6 options, etc."
          ::= { ipv6IfStatsEntry 2 }
    
    When I send TTL=0 and TTL=1 a packet to a router which need to be
    forwarded, router just sends an ICMPv6 message to tell the sender that
    TIME_EXCEED and HOPLIMITS, but no increments for this counter(in the
    function ip6_forward).
    
    Signed-off-by: Wei Dong <weid@nanjing-fnst.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b60dfc6c20bd5f19de0083362ce377c89b1e5a24
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Aug 1 00:00:12 2006 -0700

    [NET]: Kill the WARN_ON() calls for checksum fixups.
    
    We have a more complete solution in the works, involving
    the seperation of CHECKSUM_HW on input vs. output, and
    having netfilter properly do incremental checksums.
    
    But that is a very involved patch and is thus 2.6.19
    material.
    
    What we have now is infinitely better than the past,
    wherein all TSO packets were dropped due to corrupt
    checksums as soon at the NAT module was loaded.  At
    least now, the checksums do get fixed up, it just
    isn't the cleanest nor most optimal solution.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ab720881b6e36bd5190a3a11cee8d8d067c4ad7
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 31 23:47:31 2006 -0700

    [NETFILTER]: xt_hashlimit/xt_string: missing string validation
    
    The hashlimit table name and the textsearch algorithm need to be
    terminated, the textsearch pattern length must not exceed the
    maximum size.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b10866fd7dd9ae9b8dd03646d28702a76d624474
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 31 23:46:18 2006 -0700

    [NETFILTER]: SIP helper: expect RTP streams in both directions
    
    Since we don't know in which direction the first packet will arrive, we
    need to create one expectation for each direction, which is currently
    prevented by max_expected beeing set to 1.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 87f5032e0ca149bd03f0e2b46071b0c4a2312e82
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 31 22:39:40 2006 -0700

    [E1000]: Convert to netdev_alloc_skb
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a20e9c6291f27cac4a9ab450d124794c012f87d4
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 31 22:38:16 2006 -0700

    [TG3]: Convert to netdev_alloc_skb
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8af2745645243b5e5b031504a643bf2158571dc7
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 31 22:35:23 2006 -0700

    [NET]: Add netdev_alloc_skb().
    
    Add a dev_alloc_skb variant that takes a struct net_device * paramater.
    For now that paramater is unused, but I'll use it to allocate the skb
    from node-local memory in a follow-up patch.  Also there have been some
    other plans mentioned on the list that can use it.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52499afe40387524e9f46ef9ce4695efccdd2ed9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 31 22:32:09 2006 -0700

    [TCP]: Process linger2 timeout consistently.
    
    Based upon guidance from Alexey Kuznetsov.
    
    When linger2 is active, we check to see if the fin_wait2
    timeout is longer than the timewait.  If it is, we schedule
    the keepalive timer for the difference between the timewait
    timeout and the fin_wait2 timeout.
    
    When this orphan socket is seen by tcp_keepalive_timer()
    it will try to transform this fin_wait2 socket into a
    fin_wait2 mini-socket, again if linger2 is active.
    
    Not all paths were setting this initial keepalive timer correctly.
    The tcp input path was doing it correctly, but tcp_close() wasn't,
    potentially making the socket linger longer than it really needs to.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a280b89982f48e9a32c6410a37419b12ca88af6b
Author: James Morris <jmorris@namei.org>
Date:   Sun Jul 30 20:46:38 2006 -0700

    [SECURITY] secmark: nul-terminate secdata
    
    The patch below fixes a problem in the iptables SECMARK target, where
    the user-supplied 'selctx' string may not be nul-terminated.
    
    From initial analysis, it seems that the strlen() called from
    selinux_string_to_sid() could run until it arbitrarily finds a zero,
    and possibly cause a kernel oops before then.
    
    The impact of this appears limited because the operation requires
    CAP_NET_ADMIN, which is essentially always root.  Also, the module is
    not yet in wide use.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e795d092507d571d66f2ec98d3efdc7dd284bf80
Author: Tom Tucker <tom@opengridcomputing.com>
Date:   Sun Jul 30 20:44:19 2006 -0700

    [NET] infiniband: Cleanup ib_addr module to use the netevents
    
    Signed-off-by: Tom Tucker <tom@opengridcomputing.com>
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8d71740c56a9058acc4378504a356d543ff1308b
Author: Tom Tucker <tom@opengridcomputing.com>
Date:   Sun Jul 30 20:43:36 2006 -0700

    [NET]: Core net changes to generate netevents
    
    Generate netevents for:
    - neighbour changes
    - routing redirects
    - pmtu changes
    
    Signed-off-by: Tom Tucker <tom@opengridcomputing.com>
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 792d1932e319ff8ba01361e7d151b1794c55c31f
Author: Tom Tucker <tom@opengridcomputing.com>
Date:   Sun Jul 30 20:43:26 2006 -0700

    [NET]: Network Event Notifier Mechanism.
    
    This patch uses notifier blocks to implement a network event
    notifier mechanism.
    
    Clients register their callback function by calling
    register_netevent_notifier() like this:
    
    static struct notifier_block nb = {
            .notifier_call = my_callback_func
    };
    
    ...
    
    register_netevent_notifier(&nb);
    
    Signed-off-by: Tom Tucker <tom@opengridcomputing.com>
    Signed-off-by: Steve Wise <swise@opengridcomputing.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3687b1dc6fe83a500ba4d3235704594f6a111a2d
Author: Wei Yongjun <yjwei@nanjing-fnst.com>
Date:   Sun Jul 30 20:35:54 2006 -0700

    [TCP]: SNMPv2 tcpAttemptFails counter error
    
    Refer to RFC2012, tcpAttemptFails is defined as following:
      tcpAttemptFails OBJECT-TYPE
          SYNTAX      Counter32
          MAX-ACCESS  read-only
          STATUS      current
          DESCRIPTION
                  "The number of times TCP connections have made a direct
                  transition to the CLOSED state from either the SYN-SENT
                  state or the SYN-RCVD state, plus the number of times TCP
                  connections have made a direct transition to the LISTEN
                  state from the SYN-RCVD state."
          ::= { tcp 7 }
    
    When I lookup into RFC793, I found that the state change should occured
    under following condition:
      1. SYN-SENT -> CLOSED
         a) Received ACK,RST segment when SYN-SENT state.
    
      2. SYN-RCVD -> CLOSED
         b) Received SYN segment when SYN-RCVD state(came from LISTEN).
         c) Received RST segment when SYN-RCVD state(came from SYN-SENT).
         d) Received SYN segment when SYN-RCVD state(came from SYN-SENT).
    
      3. SYN-RCVD -> LISTEN
         e) Received RST segment when SYN-RCVD state(came from LISTEN).
    
    In my test, those direct state transition can not be counted to
    tcpAttemptFails.
    
    Signed-off-by: Wei Yongjun <yjwei@nanjing-fnst.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 118075b3cdc90e0815362365f3fc64d672ace0d6
Author: James Morris <jmorris@namei.org>
Date:   Sun Jul 30 20:21:45 2006 -0700

    [TCP]: fix memory leak in net/ipv4/tcp_probe.c::tcpprobe_read()
    
    Based upon a patch by Jesper Juhl.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Acked-by: Stephen Hemminger <shemminger@osdl.org>
    Acked-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9cac2c35e26cc44978df654306bb92d7cfe7e2de
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jul 30 20:20:54 2006 -0700

    [ATALK]: Make CONFIG_DEV_APPLETALK a tristate.
    
    Otherwise we allow building appletalk drivers in-kernel when
    CONFIG_ATALK is modular.  That doesn't work because these drivers use
    symbols such as "alloc_talkdev" which is exported from code built
    by CONFIG_ATALK.
    
    Noticed by Toralf Fรถrster.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f4d26fb336f3c08066bffbe907d3104be4fb91a8
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 30 20:20:28 2006 -0700

    [NET]: Fix ___pskb_trim when entire frag_list needs dropping
    
    When the trim point is within the head and there is no paged data,
    ___pskb_trim fails to drop the first element in the frag_list.
    This patch fixes this by moving the len <= offset case out of the
    page data loop.
    
    This patch also adds a missing kfree_skb on the frag that we just
    cloned.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9cd3ecd674cf3194e07435b5b9559c4d432026d5
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jul 30 20:20:07 2006 -0700

    [NETFILTER]: include/linux/netfilter_bridge.h: header cleanup
    
    Header doesn't use anything from atomic.h.
    It fixes headers_check warning:
    
    include/linux/netfilter_bridge.h requires asm/atomic.h, which does not exist
    
    Compile tested on
    alpha     arm   i386-up  sparc    sparc64-up  x86_64
    alpha-up  i386           sparc64  sparc-up    x86_64-up
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 497c615abad7ee81994dd592194535aea2aad617
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 30 20:19:33 2006 -0700

    [IPV6]: Audit all ip6_dst_lookup/ip6_dst_store calls
    
    The current users of ip6_dst_lookup can be divided into two classes:
    
    1) The caller holds no locks and is in user-context (UDP).
    2) The caller does not want to lookup the dst cache at all.
    
    The second class covers everyone except UDP because most people do
    the cache lookup directly before calling ip6_dst_lookup.  This patch
    adds ip6_sk_dst_lookup for the first class.
    
    Similarly ip6_dst_store users can be divded into those that need to
    take the socket dst lock and those that don't.  This patch adds
    __ip6_dst_store for those (everyone except UDP/datagram) that don't
    need an extra lock.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 679e898a4742d4a4a47430b67fd68a789a73dcfd
Author: Patrick McHardy <kaber@trash.net>
Date:   Sun Jul 30 20:19:11 2006 -0700

    [XFRM]: Fix protocol field value for outgoing IPv6 GSO packets
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 081bba5b3ace5698eccf2f1a378cd4a9a4c98a85
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Fri Jul 28 18:12:13 2006 +0900

    [IPV6] ADDRCONF: NLM_F_REPLACE support for RTM_NEWADDR
    
    Based on MIPL2 kernel patch.
    
    Signed-off-by: Noriaki YAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 6c223828058bc45f070d35b63d4a819a8df0146d
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Fri Jul 28 18:12:12 2006 +0900

    [IPV6] ADDRCONF: Support get operation of single address
    
    Based on MIPL2 kernel patch.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 8f27ebb9823b7f6b7a67ab325b515f75ba51bf4c
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Jul 28 18:12:11 2006 +0900

    [IPV6] ADDRCONF: Do not verify an address with infinity lifetime
    
    We also do not try regenarating new temporary address corresponding to an
    address with infinite preferred lifetime.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 0778769d392b5b80410673f53e4f946574ebacf7
Author: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
Date:   Fri Jul 28 18:12:10 2006 +0900

    [IPV6] ADDRCONF: Allow user-space to specify address lifetime
    
    Based on MIPL2 kernel patch.
    
    Signed-off-by: Noriaki TAKAMIYA <takamiya@po.ntts.co.jp>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit 643162258e57180a33e0ef7f08f0d986fbb5b4b9
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Fri Jul 28 18:12:09 2006 +0900

    [IPV6] ADDRCONF: Check payload length for IFA_LOCAL attribute in RTM_{ADD,DEL}MSG message
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>

commit fde627b54ce7bef094157074f3adb9b6e1a96d4c
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Tue Aug 1 23:43:35 2006 +0200

    [PATCH] zd1211rw: Packet filter fix for managed (STA) mode
    
    I had problems with my AVM Fritz!Box access point. It appeared
    that the AP deauthorized me and the softmac didn't reconnect me.
    This patch handles the problem.
    
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit b269825b9bb2c925bbaf4365ec9fa4c6a16e46b4
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Tue Aug 1 23:43:34 2006 +0200

    [PATCH] zd1211rw: Fixed endianess issue with length info tag detection
    
    Discovered a problem while accessing www.python.org on my PPC32.
    The problem was pretty consistent for all sticks. The reason was
    that while testing for the length info tag, I ignored the
    endianess of the host system.
    
    Please recognize that converting the constant to little endian, we
    create faster code.
    
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit b1162b639cc13d5a1ab9bcbd0a502599ddf49f86
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Aug 1 23:43:33 2006 +0200

    [PATCH] zd1211rw: Remove bogus assert
    
    This function is never called in interrupt context, and it doesn't
    matter if it is called in IRQ context or not.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 40da08bca6f4e7dec4a75c3c47800e5f4ca4e567
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Aug 1 23:43:32 2006 +0200

    [PATCH] zd1211rw: Fix software encryption/decryption
    
    Apparently the ZD1211 doesn't mind, but the ZD1211B absolutely must be
    told that encryption is happening in software.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 71eae25ece9ee6bc2fe9500c9c06bfbb46c55fb2
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Aug 1 23:43:31 2006 +0200

    [PATCH] zd1211rw: Pass more management frame types up to host
    
    We'll be needing these at some point...
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 99f65f25c19a7a8a5789c300c2a575cff3453382
Author: Ulrich Kunitz <kune@deine-taler.de>
Date:   Tue Aug 1 23:43:30 2006 +0200

    [PATCH] zd1211rw: Fixes radiotap header
    
    There has been a problem in the radiotap header. Monitor mode
    works now with tcpdump 3.94 + libpcap 0.9.4. ethereal 0.99.0 +
    libpcap 0.9.4 is broken, because it doesn't find the right offset
    for the IEEE 802.11 header.
    
    Signed-off-by: Ulrich Kunitz <kune@deine-taler.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a205729e2cd8e51257cd0ea738524c64da99b9e0
Merge: 49b1e3e... ddecbe1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Aug 2 11:07:29 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb: (26 commits)
      V4L/DVB (4380): Bttv: Revert VBI_OFFSET to previous value, it works better
      V4L/DVB (4379): Videodev: Check return value of class_device_register() correctly
      V4L/DVB (4373): Correctly handle sysfs error leg file removal in pvrusb2
      V4L/DVB (4368): Bttv: use class_device_create_file and handle errors
      V4L/DVB (4367): Videodev: Handle class_device related errors
      V4L/DVB (4365): OVERLAY flag were enabled by mistake
      V4L/DVB (4344): Fix broken dependencies on media Kconfig
      V4L/DVB (4343): Fix for compilation without V4L1 or V4L1_COMPAT
      V4L/DVB (4342): Fix ext_controls align on 64 bit architectures
      V4L/DVB (4341): VIDIOCSMICROCODE were missing on compat_ioctl32
      V4L/DVB (4322): Fix dvb-pll autoprobing
      V4L/DVB (4311): Fix possible dvb-pll oops
      V4L/DVB (4337): Refine dead code elimination in pvrusb2
      V4L/DVB (4323): [budget/budget-av/budget-ci/budget-patch drivers] fixed DMA start/stop code
      V4L/DVB (4316): Check __must_check warnings
      V4L/DVB (4314): Set the Auxiliary Byte when tuning LG H06xF in analog mode
      V4L/DVB (4313): Bugfix for keycode calculation on NPG remotes
      V4L/DVB (4310): Saa7134: rename dmasound_{init, exit}
      V4L/DVB (4306): Support non interlaced capture by default for saa713x
      V4L/DVB (4298): Check all __must_check warnings in bttv.
      ...

commit e252630f1fd1d14ac4081e566d2f697ae1779215
Author: Tony Lindgren <tony@atomide.com>
Date:   Wed Aug 2 14:41:39 2006 +0100

    [ARM] 3743/1: ARM: OMAP: Fix compile for OMAP
    
    Patch from Tony Lindgren
    
    "clocks" is only needed only for CONFIG_OMAP_RESET_CLOCKS,
    which turns of all unused clocks in with late_initcall. This is to kill
    clocks that may have been left on by the bootloader. Having static and
    non-static declaration of clocks makes omap_h2_1610_defconfig build fail.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 38c677cb9a683c9d477f845484b74b0a1b23e1fb
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Aug 1 22:26:25 2006 +0100

    [ARM] 3739/1: genirq updates:  irq_chip, add and use irq_chip.name
    
    Patch from David Brownell
    
    ARM genirq cleanups/updates:
    
        - Start switching platforms to newer APIs
            * use "irq_chip" name, not "irqchip"
            * providing irq_chip.name
    
        - Show irq_chip.name in /proc/interrupts, like on x86.
    
    This update a bit more than half of the ARM code.  The irq_chip.name
    values were chosen to match docs (if I have them) or be otherwise
    obvious ("FPGA", "CPLD", or matching the code).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8ccf28324c14096bef005c90a2bf5e03ffa07cc6
Author: Qi Yong <qiyong@fc-cn.com>
Date:   Mon Jul 17 13:37:06 2006 +0800

    gitignore: gitignore quilt's files
    
    gitignore: ignore quilt's files.
    
    Signed-off-by: Qi Yong <qiyong@fc-cn.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 8eb3afe0e95e5d45efbe58996fe90982c740565d
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jul 23 19:49:45 2006 +0200

    kbuild: always use $(CC) for $(call cc-version)
    
    The possibility to specify an optional parameter did not work out as
    expected and it was not used - so remove the possibility.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 002d27b1b70f6d574c816ef265147704c4e951f1
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jul 13 13:22:38 2006 +0200

    kconfig: correct oldconfig for unset choice options
    
    oldconfig currently ignores unset choice options and doesn't ask for them.
    Correct the SYMBOL_DEF_USER flag of the choice symbol to be only set if
    it's set for all values.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit eb2cafa1d9026ced051601053885e260f8b8c099
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Thu Jul 13 20:27:27 2006 +0200

    kbuild: -fno-stack-protector is not good
    
    Ubuntu gcc has hardcoded -fstack-protector - but does not understand
    -fno-stack-protector-all. So only try -fno-stack-protector.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 0463f3c7a353e4d082e825f01e2862ca0f7b34ce
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jul 13 00:44:15 2006 -0400

    kbuild: fix typo in modpost
    
    Reported by a Fedora user when they tried to build some out of tree module..
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit fb33d81613a4e3e27972a65b6e566de50a447d33
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jul 9 16:26:07 2006 +0200

    kbuild: improve error from file2alias
    
    The original errormessage was just plain unreadable.
    
    Sample error message after this update (not for real - I provoked it):
    
    FATAL: drivers/net/s2io: sizeof(struct pci_device_id)=33 is not a modulo of the
    size of section __mod_pci_device_table=160.
    Fix definition of struct pci_device_id in mod_devicetable.h
    
    Before a warning was generated - this is now a fatal error.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c181c64c8fcf99476978510ba1021518c4ffbf03
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jul 9 16:07:44 2006 +0200

    kbuild: .gitignore utsrelease.h
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 667918a4cc86dc596ebcf5184e9b9d8726ba8525
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jul 8 00:46:25 2006 +0200

    kbuild: version.h and new headers_* targets does not require a kernel config
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit dba654d1508e7060c7d79ab2f63a00325fd84270
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jul 8 00:27:49 2006 +0200

    kbuild: hardcode value of YACC&LEX for aic7-triple-x
    
    When we introduced -rR then aic7xxx no loger could pick up definition
    of YACC&LEX from make - so do it explicit now.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 12e704db809cd4101b7d3594fc9a96f30fe88a31
Author: bert hubert <bert.hubert@netherlabs.nl>
Date:   Sun Jul 30 21:19:32 2006 +0200

    [CPUFREQ] Propagate acpi_processor_preregister_performance return value.
    
    Note how any error from acpi_processor_preregister_performance is ignored.
    
    From: bert hubert <bert.hubert@netherlabs.nl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit ea71497020c55cd39221e0abad5c1752ac6e3f47
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Thu Jul 6 12:32:01 2006 -0700

    [CPUFREQ] [2/2] demand load governor modules.
    
    Demand-load cpufreq governor modules if needed.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 3bcb09a35641f2840bd59d8f82154f830dca282c
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Thu Jul 6 12:30:26 2006 -0700

    [CPUFREQ] [1/2] add __find_governor helper and clean up some error handling.
    
    Adds a __find_governor() helper function to look up a governor by
    name.  Also restructures some error handling to conform to the
    "single-exit" model which is generally preferred for kernel code.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 32deb2d5c4c291d7d9a73198dc357a151e4b978c
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Sat Jul 15 19:31:30 2006 +0200

    [CPUFREQ] Longhaul - Rename & fix multipliers table
    
    This table is only used by Ezra-T CPUs currently, and has values
    for some other CPU. Fix them to match the values used by that CPU,
    and for now make it clearer by renaming the variable.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 9fb31c3a1d9f42e10e541ee0e2be8d1f27115141
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Thu Jul 13 19:26:10 2006 +0200

    [CPUFREQ] Longhaul - Fix power state test to do something more useful
    
    This is changing "always true" test to something usefull.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit eb23c751d837848c87fda6b1347d194f6b333681
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Sun Jul 9 21:47:04 2006 +0200

    [CPUFREQ] Longhaul - Readd accidentally dropped line
    
    I lost very important line in do_powersaver
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit c4a96c1eba206bd4a58a0f2acf2450126bd2b5da
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jul 9 19:53:08 2006 +0200

    [CPUFREQ] Make longhaul_walk_callback() static
    
    This patch makes the needlessly global longhaul_walk_callback() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 95a53249db330a3f08090611fdb5fe168a73e650
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 8 22:20:26 2006 +0200

    [CPUFREQ] X86_GX_SUSPMOD must depend on PCI
    
    It seems commit 32ee8c3e470d86588b51dc42ed01e85c5fa0f180 accidentially
    reverted cdc9cc1d740ffc3d8d8207fbf5df9bf05fcc9955, IOW, it reintroduced
    the following compile error with CONFIG_PCI=n:
    
    <--  snip  -->
    
    ...
      CC      arch/i386/kernel/cpu/cpufreq/gx-suspmod.o
    arch/i386/kernel/cpu/cpufreq/gx-suspmod.c: In function โgx_detect_chipsetโ:
    arch/i386/kernel/cpu/cpufreq/gx-suspmod.c:193: error: implicit declaration of function โpci_match_idโ
    arch/i386/kernel/cpu/cpufreq/gx-suspmod.c:193: warning: comparison between pointer and integer
    make[3]: *** [arch/i386/kernel/cpu/cpufreq/gx-suspmod.o] Error 1
    
    <--  snip  -->
    
    This patch therefore re-adds the dependency of X86_GX_SUSPMOD on PCI.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 0d6daba5faed26a2f50a40adf5d4674a9a54717e
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Fri Jul 7 08:48:26 2006 +0200

    [CPUFREQ] Longhaul - Initialise later.
    
    Without this longhaul will always fail when compiled into kernel,
    as it needs to initialise after the ACPI processor module.
    
    I lost this when I was splitting patches. Sorry.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 48b7bde0f6d5fd08d046b583cfa0118ad74c6caf
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Tue Jul 4 17:50:57 2006 +0200

    [CPUFREQ] Longhaul - Workaround issues with APIC.
    
    There is no need to worry about local APIC.
    There is need to worry about I/O APIC, because I/O APIC
    is replacing good old 8259. According to Nehemiah datasheet VIA is
    using 3-wire bus to connect local APIC to I/O APIC.
    
    "[...] When IA32_APIC_BASE[11] is set to 0, processor APICs based on the 3-wire APIC
     bus cannot be generally re-enabled until a system hardware reset. The 3-wire bus
     looses track of arbitration that would be necessary for complete re-enabling. Certain
     (local) APIC functionality can be enabled. [...]"
    
    So we must set disable bit for each interrupt in I/O APIC registers.
    Same situation as for PIC - we must poke registers direcly.
    How to do this? I don't know. So at the moment it is better to fail.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit dadb49d8746bc4a4b5a310dabf0c838e57a9b531
Author: Rafal Bilski <rafalbilski@interia.pl>
Date:   Mon Jul 3 07:19:05 2006 +0200

    [CPUFREQ] Longhaul - Hook into ACPI C states.
    
    Minimal change necessary for hardware support.
    
    Changes in longhaul.c:
    - most important - now C3 state is causing transition,
    - code responsible for clearing "bus master" bit removed,
    - protect bcr2 transition in the same way as longhaul.
    
    Signed-off-by: Rafal Bilski <rafalbilski@interia.pl>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 9c9a43ed2734081124407c779b36a4761c41139b
Author: Mattia Dongili <malattia@linux.it>
Date:   Wed Jul 5 23:12:20 2006 +0200

    [CPUFREQ] return error when failing to set minfreq
    
    I just stumbled on this bug/feature, this is how to reproduce it:
    
    # echo 450000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
    # echo 450000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
    # echo powersave > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
    # cpufreq-info -p
    450000 450000 powersave
    # echo 1800000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ; echo $?
    0
    # cpufreq-info -p
    450000 450000 powersave
    
    Here it is. The kernel refuses to set a min_freq higher than the
    max_freq but it allows a max_freq lower than min_freq (lowering min_freq
    also).
    
    This behaviour is pretty straightforward (but undocumented) and it
    doesn't return an error altough failing to accomplish the requested
    action (set min_freq).
    The problem (IMO) is basically that userspace is not allowed to set a
    full policy atomically while the kernel always does that thus it must
    enforce an ordering on operations.
    
    The attached patch returns -EINVAL if trying to increase frequencies
    starting from scaling_min_freq and documents the correct ordering of writes.
    
    Signed-off-by: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>
    
    --

commit 49b1e3ea19b1c95c2f012b8331ffb3b169e4c042
Merge: ce38cac... 8d950cb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 31 13:39:52 2006 -0700

    Merge branch 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * 'merge' of git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc:
      [POWERPC] Minor comment fix for misc_64.S
      [POWERPC] Use H_CEDE on non-SMT
      [POWERPC] force 64bit mode in fwnmi handlers to workaround firmware bugs
      [POWERPC] PMAC_APM_EMU should depend on ADB_PMU
      [POWERPC] Fix new interrupt code (MPIC detection)
      [POWERPC] Fix new interrupt code (MPIC endianness)
      [POWERPC] Add cpufreq support for Xserve G5
      [POWERPC] Xserve G5 thermal control fixes
      [POWERPC] Fix mem= handling when the memory limit is > RMO size
      [POWERPC] More offb/bootx fixes
      [POWERPC] Fix legacy_serial.c error handling on 32 bits
      [POWERPC] Fix default clock for udbg_16550
      [POWERPC] Fix non-MPIC CHRPs with CONFIG_SMP set
      [POWERPC] Fix 32 bits warning in prom_init.c
      [POWERPC] Workaround Pegasos incorrect ISA "ranges"
      [POWERPC] fix up front-LED Kconfig

commit ce38cac48209d270d07fd6d1a8e94446b37abcd5
Author: Guido Guenther <agx@sigxcpu.org>
Date:   Sun Jul 30 03:04:21 2006 -0700

    [PATCH] rivafb/nvidiafb: race between register_framebuffer and *_bl_init
    
    Since we now use the generic backlight infrastructure, I think we need to
    call rivafb_bl_init before calling register_framebuffer since otherwise
    rivafb_bl_init might race with the framebuffer layer already opening the
    device and setting up the video mode.  In this case we might end up with a
    not yet fully intialized backlight (info->bl_dev still NULL) when calling
    riva_bl_set_power via rivafb_set_par/rivafb_load_video_mode and the kernel
    dies without any further notice during boot.
    
    This fixes booting current git on a PB 6,1.  In this case radeonfb/atyfb
    would be affected too - I can fix that too but don't have any hardware to
    test this on.
    
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1367d2a2817e6199092b43fe01c1eed3374c4e4
Author: Arthur Othieno <apgo@patchbomb.org>
Date:   Sun Jul 30 03:04:20 2006 -0700

    [PATCH] nvidiafb: remove redundant CONFIG_PCI check
    
    CONFIG_FB_NVIDIA already depends on CONFIG_PCI in drivers/video/Kconfig.
    Driver does an extra ``sanity check'' which is then redundant.
    
    Signed-off-by: Arthur Othieno <apgo@patchbomb.org>
    Cc: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b755999d6e0c1d988fb448289abb6c226cd8c36
Author: Michael Hanselmann <linux-kernel@hansmi.ch>
Date:   Sun Jul 30 03:04:19 2006 -0700

    [PATCH] powermac: More powermac backlight fixes
    
    This patch fixes several problems:
    - The legacy backlight value might be set at interrupt time. Introduced
      a worker to prevent it from directly calling the backlight code.
    - via-pmu allows the backlight to be grabbed, in which case we need to
      prevent other kernel code from changing the brightness.
    - Don't send PMU requests in via-pmu-backlight when the machine is about
      to sleep or waking up.
    - More Kconfig fixes.
    
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 994aad251acab32a5d40d4a9501dc3e736562b6d
Author: Volker Braun <vbraun@physics.upenn.edu>
Date:   Sun Jul 30 03:04:18 2006 -0700

    [PATCH] radeonfb sleep fixes
    
    Many IBM Thinkpad T4* models and some R* and X* with radeon video cards draw
    too much power when suspended to RAM, reducing drastically the battery
    lifetime.  The solution is to enable suspend-to-D2 on these machines.  They
    are whitelisted through their subsystem vendor/device ID.  This fixes
    http://bugzilla.kernel.org/show_bug.cgi?id=3022
    
    The patch introduces a framework to alter the pm_mode and reinit_func fields
    of the radeonfb_info structure based on a whitelist.  This should facilitate
    future hardware-dependent workarounds.  The workaround for the Samsung P35
    that is already in the radeonfb code has been rewritten using this framework.
    
    The behavior can be overridden with module options:
    
    i)  video=radeonfb:force_sleep=1
        enable suspend-to-D2 also on non-whitelisted machines (useful for
        testing new notebook models),
    
    ii) video=radeonfb:ignore_devlist=1
        Disable checking the whitelist and do not apply any workarounds.
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 256154fbc31c25a8df4d398232acfa9d4892224c
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Sun Jul 30 03:04:17 2006 -0700

    [PATCH] fbdev: statically link the framebuffer notification functions
    
    The backlight and lcd subsystems can be notified by the framebuffer layer
    of blanking events.  However, these subsystems, as a whole, can function
    independently from the framebuffer layer.  But in order to enable to the
    lcd and backlight subsystems, the framebuffer has to be compiled also,
    effectively sucking in a huge amount of unneeded code.
    
    To prevent dependency problems, separate out the framebuffer notification
    mechanism from the framebuffer layer and permanently link it to the kernel.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 834a9b8ca7a01c34570be021f88e18884a29f048
Author: Eric Van Hensbergen <ericvh@hera.kernel.org>
Date:   Sun Jul 30 03:04:16 2006 -0700

    [PATCH] 9p: fix fid behavior on failed remove
    
    Based on a bug report from Russ Ross <russruss@gmail.com>
    
    According to the spec:
    
    "The remove request asks the file server both to remove the file
     represented by fid and to clunk the fid, even if the remove fails."
    
    but the Linux client seems to expect the fid to be valid after a failed
    remove attempt.  Specifically, I'm getting this behavior when attempting to
    remove a non-empty directory.
    
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f525f16e0a2b5743a64bf6991d3b6704271f8b6
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jul 30 03:04:16 2006 -0700

    [PATCH] update KJ details
    
    Use preferred email address.  Remove sf.net project reference.  It is no
    longer used.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c90c68aca278f425afc0b48d86298b960fbc0ce
Author: Russ Ross <russross@gmail.com>
Date:   Sun Jul 30 03:04:15 2006 -0700

    [PATCH] 9p: fix marshalling bug in tcreate with empty extension field
    
    Signed-off-by: Russ Ross <russross@gmail.com>
    Signed-off-by: Eric Van Hensbergen <ericvh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e31f51d8177320d61ec5786ca4aafa7b7a749b4
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Sun Jul 30 03:04:14 2006 -0700

    [PATCH] ext3 -nobh option causes oops
    
    For files other than IFREG, nobh option doesn't make sense.  Modifications
    to them are journalled and needs buffer heads to do that.  Without this
    patch, we get kernel oops in page_buffers().
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51d8c5edd3b166fcc51aba84d78761d578400a7c
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:04:14 2006 -0700

    [PATCH] timer: Fix tvec_bases initializer
    
    kernel/timer.c defines a (per-cpu) pointer to tvec_base_t, but initializes
    it using { &a_tvec_base_t }, which sparse warns about; change this to just
    &a_tvec_base_t.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc65ac6a0ffc66c56d1e6893685d7fe87c63cc44
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:04:12 2006 -0700

    [PATCH] freevxfs: Add missing lock_kernel() to vxfs_readdir
    
    Commit 7b2fd697427e73c81d5fa659efd91bd07d303b0e in the historical GIT tree
    stopped calling the readdir member of a file_operations struct with the big
    kernel lock held, and fixed up all the readdir functions to do their own
    locking.  However, that change added calls to unlock_kernel() in
    vxfs_readdir, but no call to lock_kernel().  Fix this by adding a call to
    lock_kernel().
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a5eca6530eb4d0120981936058537c24a2f92ce
Author: Thomas Horsley <tom.horsley@ccur.com>
Date:   Sun Jul 30 03:04:12 2006 -0700

    [PATCH] documentation: Documentation/initrd.txt
    
    I spent a long time the other day trying to examine an initrd image on a
    fedora core 5 system because the initrd.txt file is apparently obsolete.
    Here is a patch which I hope will reduce future confusion for others.
    
    Signed-off-by: Thomas Horsley <tom.horsley@ccur.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a06a363ef48444186f18095ae1b932dddbbfa89
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sun Jul 30 03:04:11 2006 -0700

    [PATCH] ipc/msg.c: clean up coding style
    
    Clean up ipc/msg.c to conform to Documentation/CodingStyle.  (before it was
    an inconsistent hodepodge of various coding styles)
    
    Verified that the before/after .o's are identical.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 873302c71c0e60234eb187b15f83c2d79e84c40a
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jul 30 03:04:10 2006 -0700

    [PATCH] fuse: fix typo
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a0898cf413876d4ed6e371f3e04bf38600a9205
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jul 30 03:04:10 2006 -0700

    [PATCH] fuse: use jiffies_64
    
    It is entirely possible (though rare) that jiffies half-wraps around, while a
    dentry/inode remains in the cache.  This could mean that the dentry/inode is
    not invalidated for another half wraparound-time.
    
    To get around this problem, use 64-bit jiffies.  The only problem with this is
    that dentry->d_time is 32 bits on 32-bit archs.  So use d_fsdata as the high
    32 bits.  This is an ugly hack, but far simpler, than having to allocate
    private data just for this purpose.
    
    Since 64-bit jiffies can be assumed never to wrap around, simple comparison
    can be used, and a zero time value can represent "invalid".
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 685d16ddb07b74537fb18972784e6214840fdd20
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jul 30 03:04:08 2006 -0700

    [PATCH] fuse: fix zero timeout
    
    An attribute and entry timeout of zero should mean, that the entity is
    invalidated immediately after the operation.  Previously invalidation only
    happened at the next clock tick.
    
    Reported and tested by Craig Davies.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25d7dfdaf3404bb31b8f55283fd2c456cb7b4001
Author: Markus Armbruster <armbru@redhat.com>
Date:   Sun Jul 30 03:04:08 2006 -0700

    [PATCH] Fix trivial unwind info bug
    
    CFA needs to be adjusted upwards for push, and downwards for pop.
    arch/i386/kernel/entry.S gets it wrong in one place.
    
    Signed-off-by: Markus Armbruster <armbru@redhat.com>
    Acked-by: Jan Beulich <jbeulich@novell.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b0bf7a3ccb6f0b38ead71980e79f875046047b7
Author: Roland McGrath <roland@redhat.com>
Date:   Sun Jul 30 03:04:06 2006 -0700

    [PATCH] vDSO hash-style fix
    
    The latest toolchains can produce a new ELF section in DSOs and
    dynamically-linked executables.  The new section ".gnu.hash" replaces
    ".hash", and allows for more efficient runtime symbol lookups by the
    dynamic linker.  The new ld option --hash-style={sysv|gnu|both} controls
    whether to produce the old ".hash", the new ".gnu.hash", or both.  In some
    new systems such as Fedora Core 6, gcc by default passes --hash-style=gnu
    to the linker, so that a standard invocation of "gcc -shared" results in
    producing a DSO with only ".gnu.hash".  The new ".gnu.hash" sections need
    to be dealt with the same way as ".hash" sections in all respects; only the
    dynamic linker cares about their contents.  To work with older dynamic
    linkers (i.e.  preexisting releases of glibc), a binary must have the old
    ".hash" section.  The --hash-style=both option produces binaries that a new
    dynamic linker can use more efficiently, but an old dynamic linker can
    still handle.
    
    The new section runs afoul of the custom linker scripts used to build vDSO
    images for the kernel.  On ia64, the failure mode for this is a boot-time
    panic because the vDSO's PT_IA_64_UNWIND segment winds up ill-formed.
    
    This patch addresses the problem in two ways.
    
    First, it mentions ".gnu.hash" in all the linker scripts alongside ".hash".
     This produces correct vDSO images with --hash-style=sysv (or old tools),
    with --hash-style=gnu, or with --hash-style=both.
    
    Second, it passes the --hash-style=sysv option when building the vDSO
    images, so that ".gnu.hash" is not actually produced.  This is the most
    conservative choice for compatibility with any old userland.  There is some
    concern that some ancient glibc builds (though not any known old production
    system) might choke on --hash-style=both binaries.  The optimizations
    provided by the new style of hash section do not really matter for a DSO
    with a tiny number of symbols, as the vDSO has.  If someone wants to use
    =gnu or =both for their vDSO builds and worry less about that
    compatibility, just change the option and the linker script changes will
    make any choice work fine.
    
    Signed-off-by: Roland McGrath <roland@redhat.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 072d3d1acb452f4abd8d3d20af661f2e28854b59
Author: Michael Buesch <mb@bu3sch.de>
Date:   Sun Jul 30 03:04:05 2006 -0700

    [PATCH] hwrng: fix geode probe error unwind
    
    The geode hwrng leaks an iomapped resource, if hwrng_register() fails.
    This fixes it.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58690664456b597796e58958861f365e096a1609
Author: Michael Buesch <mb@bu3sch.de>
Date:   Sun Jul 30 03:04:04 2006 -0700

    [PATCH] hwrng: fix intel probe error unwind
    
    The intel hwrng leaks an iomapped resource, if hwrng_register() failes.
    This fixes it.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8008b2bc21fb13b45964e21247f18c013d6e985
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Jul 30 03:04:04 2006 -0700

    [PATCH] Fix kmem_cache_alloc() been documented twice
    
    kmem_cache_alloc() was documented twice, but kmem_cache_zalloc() never.
    Fix this obvious typo to get things right.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d07fe82c24daab2360e2790f488bcffa7db74825
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Sun Jul 30 03:04:03 2006 -0700

    [PATCH] reference rt-mutex-design in rtmutex.c
    
    In order to prevent Doc Rot, this patch adds a reference to the design
    document for rtmutex.c in rtmutex.c.  So when someone needs to update or
    change the design of that file they will know that a document actually
    exists that explains the design (helping them change it), and hopefully
    that they will update the document if they too change the design.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d94df56963251d896e87c6197f6df132593232b
Author: Uwe Zeisberger <Uwe_Zeisberger@digi.com>
Date:   Sun Jul 30 03:04:02 2006 -0700

    [PATCH] Add parentheses around arguments in the SH_DIV macro.
    
    There is currently no affected user in the tree, but usage is less
    surprising that way.
    
    Signed-off-by: Uwe Zeisberger <Uwe_Zeisberger@digi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c829c367a1a52550378584a657768217971e587
Author: Tim Chen <tim.c.chen@linux.intel.com>
Date:   Sun Jul 30 03:04:02 2006 -0700

    [PATCH] Reducing local_bh_enable/disable overhead in irqtrace
    
    The recent changes from irqtrace feature has added overheads to
    local_bh_disable and local_bh_enable that reduces UDP performance across
    x86_64 and IA64, even though IA64 does not support the irqtrace feature.
    Patch in question is
    
    [PATCH]lockdep: irqtrace subsystem, core
    http://www.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=c
    ommit;h=de30a2b355ea85350ca2f58f3b9bf4e5bc007986
    
    Prior to this patch, local_bh_disable was a short macro.  Now it is a
    function which calls __local_bh_disable with added irq flags save and
    restore.  The irq flags save and restore were also added to
    local_bh_enable, probably for injecting the trace irqs code.
    
    This overhead is on the generic code path across all architectures.  On a
    IA_64 test machine (Itanium-2 1.6 GHz) running a benchmark like netperf's
    UDP streaming test, the added overhead results in a drop of 3% in
    throughput, as udp_sendmsg calls the local_bh_enable/disable several times.
    
    Other workloads that have heavy usages of local_bh_enable/disable could
    also be affected.  The patch ideally should not have affected IA-64
    performance as it does not have IRQ tracing support.  A significant portion
    of the overhead is in the added irq flags save and restore, which I think
    is not needed if IRQ tracing is unused.  A suggested patch is attached
    below that recovers the lost performance.  However, the "ifdef"s in the
    patch are a bit ugly.
    
    Signed-off-by: Tim Chen <tim.c.chen@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 953a7f20667a8b6217ea2ac49c0877e957a0130a
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Sun Jul 30 03:04:01 2006 -0700

    [PATCH] Typo in ub clause of devices.txt
    
    Change "Thrid" into "Third", and realign similarly to other entries.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Cc: <device@lanana.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de456d371d16e28d61eda813fd2a6f34fd8a8bb5
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:04:00 2006 -0700

    [PATCH] Fix typo in MAINTAINERS: s/DEVICS/DEVICES/
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 344fe78669d2d1cff9e8939598f6d0d865b6a75b
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:03:59 2006 -0700

    [PATCH] ufs: remove incorrect unlock_kernel from failure path in ufs_symlink()
    
    ufs_symlink, in one of its error paths, calls unlock_kernel without ever
    having called lock_kernel(); fix this by creating and jumping to a new
    label out_notlocked rather than the out label used after calling
    lock_kernel().
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Cc: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bee8d28496a8c76b488a2c29e01a0ebc1411475
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:03:58 2006 -0700

    [PATCH] efs: add entry for EFS filesystem to MAINTAINERS as Orphan
    
    The EFS filesystem does not have an entry in MAINTAINERS; add one, giving
    the EFS filesystem and listing the status as Orphan, per the note on that
    page saying "I'm no longer actively maintaining EFS".
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0aa9e4f147880b2d7d1eef1f0b45112af0e36f9f
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:03:58 2006 -0700

    [PATCH] efs: Remove incorrect unlock_kernel from failure path in efs_symlink_readpage()
    
    If efs_symlink_readpage hits the -ENAMETOOLONG error path, it will call
    unlock_kernel without ever having called lock_kernel(); fix this by
    creating and jumping to a new label fail_notlocked rather than the fail
    label used after calling lock_kernel().
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Cc: Marcelo Tosatti <marcelo.tosatti@cyclades.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ecbc4e1a395062a8e99e4f5fe328f6ba166d9c8
Author: Josh Triplett <josht@us.ibm.com>
Date:   Sun Jul 30 03:03:56 2006 -0700

    [PATCH] Remove incorrect unlock_kernel from allocation failure path in coda_open()
    
    Commit 398c53a757702e1e3a7a2c24860c7ad26acb53ed (in the historical GIT
    tree) moved the lock_kernel() in coda_open after the allocation of a
    coda_file_info struct, but left an unlock_kernel() in the allocation
    failure error path; remove it.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Acked-by: Jan Harkes <jaharkes@cs.cmu.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ae192080cb4d007792d13522efa98ebe7f15475
Author: Ondrej Zary <linux@rainbow-software.org>
Date:   Sun Jul 30 03:03:55 2006 -0700

    [PATCH] Fix swsusp with PNP BIOS
    
    swsusp is unable to suspend my machine (DTK FortisPro TOP-5A notebook) with
    kernel 2.6.17.5 because it's unable to suspend PNP device 00:16 (mouse).
    
    The problem is in PNP BIOS.  pnp_bus_suspend() calls pnp_stop_dev() for the
    device if the device can be disabled according to pnp_can_disable().  The
    problem is that pnpbios_disable_resources() returns -EPERM if the device is
    not dynamic (!pnpbios_is_dynamic()) but insert_device() happily sets
    PNP_DISABLE capability/flag even if the device is not dynamic.  So we try
    to disable non-dynamic devices which will fail.  This patch prevents
    insert_device() from setting PNP_DISABLE if the device is not dynamic and
    fixes suspend on my system.
    
    Signed-off-by: Ondrej Zary <linux@rainbow-software.org>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: "Rafael J. Wysocki" <rjw@sisk.pl>
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b6509aa8c2f292caea7c0602ec361f920951508
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Sun Jul 30 03:03:54 2006 -0700

    [PATCH] inotify: fix deadlock found by lockdep
    
    This is a real deadlock, a nice complex one:
    (warning: long explanation follows so that Andrew can have a complete
    patch description)
    
    it's an ABCDA deadlock:
    
    A iprune_mutex
    B inode->inotify_mutex
    C ih->mutex
    D dev->ev_mutex
    
    The AB relationship comes straight from invalidate_inodes()
    
    int invalidate_inodes(struct super_block * sb)
    {
            int busy;
            LIST_HEAD(throw_away);
    
            mutex_lock(&iprune_mutex);
            spin_lock(&inode_lock);
            inotify_unmount_inodes(&sb->s_inodes);
    
    where inotify_umount_inodes() takes the
                    mutex_lock(&inode->inotify_mutex);
    
    The BC relationship comes directly from inotify_find_update_watch():
    s32 inotify_find_update_watch(struct inotify_handle *ih, struct inode *inode,
                                  u32 mask)
    {
       ...
            mutex_lock(&inode->inotify_mutex);
            mutex_lock(&ih->mutex);
    
    The CD relationship comes from inotify_rm_wd:
    inotify_rm_wd does
            mutex_lock(&inode->inotify_mutex);
            mutex_lock(&ih->mutex)
    and then calls inotify_remove_watch_locked() which calls
    notify_dev_queue_event() which does
    	        mutex_lock(&dev->ev_mutex);
    
    (this strictly is a BCD relationship)
    
    The DA relationship comes from the most interesting part:
    
      [<ffffffff8022d9f2>] shrink_icache_memory+0x42/0x270
      [<ffffffff80240dc4>] shrink_slab+0x11d/0x1c9
      [<ffffffff802b5104>] try_to_free_pages+0x187/0x244
      [<ffffffff8020efed>] __alloc_pages+0x1cd/0x2e0
      [<ffffffff8025e1f8>] cache_alloc_refill+0x3f8/0x821
      [<ffffffff8020a5e5>] kmem_cache_alloc+0x85/0xcb
      [<ffffffff802db027>] kernel_event+0x2e/0x122
      [<ffffffff8021d61c>] inotify_dev_queue_event+0xcc/0x140
    
    inotify_dev_queue_event schedules a kernel_event which does a
    kmem_cache_alloc( , GFP_KERNEL) which may try to shrink slabs, including
    the inode cache .. which then takes iprune_mutex.
    
    And voila, there is an AB, a BC, a CD relationship (even a direct BCD),
    and also now a DA relationship -> a circular type AB-BA deadlock but
    involving 4 locks.
    
    The solution is simple: kernel_event() is NOT allowed to use GFP_KERNEL,
    but must use GFP_NOFS to not cause recursion into the VFS.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Robert Love <rml@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70ea91f17f7454bc7a285817e883eace2597984f
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Sun Jul 30 03:03:53 2006 -0700

    [PATCH] Add linux-mm mailing list for memory management in MAINTAINERS file
    
    Since I didn't know about the linux-mm mailing list until I spammed all
    those that had their names anywhere in the mm directory, I'm sending this
    patch to add the linux-mm mailing list to the MAINTAINERS file.
    
    Also, since mm is so broad, it doesn't have a single person to maintain it,
    and thus no maintainer is listed.  I also left the status as Maintained,
    since it obviously is.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b50f60ceeef2e38e529737c0260d9543939915ad
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun Jul 30 03:03:52 2006 -0700

    [PATCH] pi-futex: missing pi_waiters plist initialization
    
    Initialize init task's pi_waiters plist.  Otherwise cpu hotplug of cpu 0
    might crash, since rt_mutex_getprio() accesses an uninitialized list head.
    
    call chain which led to crash:
    
    take_cpu_down
    sched_idle_next
    __setscheduler
    rt_mutex_getprio
    
    Using PLIST_HEAD_INIT in the INIT_TASK macro doesn't work unfortunately,
    since the pi_waiters member is only conditionally present.
    
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a04b61d3dc68857dcc81a5761268c96056742fb2
Author: Olaf Hering <olh@suse.de>
Date:   Sun Jul 30 03:03:52 2006 -0700

    [PATCH] hide onboard graphics drivers on G5
    
    Hide the video drivers for onboard graphics found in early PCI PowerMacs in
    Apple G5 config files.
    
    drivers/built-in.o: In function `.platinumfb_probe':
    platinumfb.c:(.text+0x377a0): undefined reference to `.nvram_read_byte'
    platinumfb.c:(.text+0x37830): undefined reference to `.nvram_read_byte'
    drivers/built-in.o: In function `.control_init':
    controlfb.c:(.init.text+0x1938): undefined reference to `.nvram_read_byte'
    controlfb.c:(.init.text+0x1968): undefined reference to `.nvram_read_byte'
    drivers/built-in.o: In function `.valkyriefb_init':
    (.init.text+0x2300): undefined reference to `.nvram_read_byte'
    drivers/built-in.o:(.init.text+0x239c): more undefined references to `.nvram_read_byte' follow
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfa224e928f782e1593b5222688fad84c2cad3e8
Author: Olaf Hering <olh@suse.de>
Date:   Sun Jul 30 03:03:51 2006 -0700

    [PATCH] enable mac partition label per default on pmac
    
    Enable mac partition table support per default also for a powermac config.
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47a31976cadb9a2d25a2896762cb0e678470a29b
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Sun Jul 30 03:03:49 2006 -0700

    [PATCH] pcmcia: fix ioctl GET_CONFIGURATION_INFO for pcmcia_cards
    
    Values displayed when by cardctl config are horribly wrong for 16bit cards.
     this fixes it up by not using memcpy() since source and target struct are
    very different.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f47ad214926b1dbcc591fd71562e36f1529936b5
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Sun Jul 30 03:03:47 2006 -0700

    [PATCH] pcmcia: fix ioctl for GET_STATUS and GET_CONFIGURATION_INFO
    
    the p_dev == NULL checks are wrong.  the called functions handle a NULL
    p_dev on their own.  w/o this patch output of cardcctl status and cardctl
    config is broken for cardbus cards or when the slot is empty.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ca7b5c42e783b74a57387418bfcfea072fc46d6
Author: Frederik Deweerdt <deweerdt@free.fr>
Date:   Sun Jul 30 03:03:46 2006 -0700

    [PATCH] mdacon: fix __init section warnings
    
    WARNING: drivers/video/console/mdacon.o - Section mismatch: reference to .init.text: from .text between 'mdacon_startup' (at offset 0x123) and 'mdacon_init'
    WARNING: drivers/video/console/mdacon.o - Section mismatch: reference to .init.text: from .text between 'mdacon_startup' (at offset 0x18b) and 'mdacon_init'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9578bcf4ecaf447cb4bb0891309fad73ff5c00e3
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Sun Jul 30 03:03:46 2006 -0700

    [PATCH] sgiioc4: Always share IRQ
    
    The SGI IOC4 IDE device always shares an interrupt with other devices which
    are part of IOC4.  As such, IDEPCI_SHARE_IRQ should always be enabled when
    BLK_DEV_SGIIOC4 is enabled.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc7455fa3b5ada2a47d24755cc431f4dfff052cb
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jul 30 03:03:45 2006 -0700

    [PATCH] Doc/SubmittingPatches cleanups
    
    A few cleanups to SubmittingPatches:
    - mention SubmitChecklist
    - remove mention of my simple patch script tools
    - remove last-updated line
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fcb78c22f06340cdba884d7381adb3a0148bbb6
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Sun Jul 30 03:03:42 2006 -0700

    [PATCH] Add DocBook documentation for workqueue functions
    
    kernel/workqueue.c was omitted from generating kernel documentation.  This
    adds a new section "Workqueues and Kevents" and adds documentation for some
    of the functions.
    
    Some functions in this file already had DocBook-style comments, now they
    finally become visible.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d75763d24063cafe28ace8863560da9c968ee099
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jul 30 03:03:41 2006 -0700

    [PATCH] pci/search: cleanups, add to kernel-api.tmpl
    
    Clean up kernel-doc comments in drivers/pci/search.c (line sizes and typos).
    
    Enable that source file in DocBook/kernel-api.tmpl.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0129a057b652b33dba6406a940af061cf0f36f79
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jul 30 03:03:41 2006 -0700

    [PATCH] kernel-doc: ignore __devinit
    
    Ignore __devinit in function definitions so that kernel-doc won't fail on
    them.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b54960bdf8fbb57d94dd61f4ac7513535ca7168
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jul 30 03:03:40 2006 -0700

    [PATCH] fix kernel-api doc for kernel/resource.c
    
    insert_resource() was unexported, so kernel-doc needs to be told to search
    kernel/resource.c for internal functions instead of exported functions so that
    it won't report an error.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d7d253548cffdce80f4e03664686e9ccb1b0ed7
Author: Jim Houston <jim.houston@ccur.com>
Date:   Sun Jul 30 03:03:39 2006 -0700

    [PATCH] fix cond_resched() fix
    
    In cond_resched_lock() it calls __resched_legal() before dropping the spin
    lock.  __resched_legal() will always finds the preempt_count non-zero and
    will prevent the call to __cond_resched().
    
    The attached patch adds a parameter to __resched_legal() with the expected
    preempt_count value.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ea24f9ad18c65cc179593b5cc2a88cdadf8cc0c
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Sun Jul 30 03:03:38 2006 -0700

    [PATCH] fix bad macro param in timer.c
    
    We have
    
    #define INDEX(N) (base->timer_jiffies >> (TVR_BITS + N * TVN_BITS)) & TVN_MASK
    
    and it's used via
    
    	list = varray[i + 1]->vec + (INDEX(i + 1));
    
    So, due to underparenthesisation, this INDEX(i+1) is now a ...  (TVR_BITS + i
    + 1 * TVN_BITS)) ...
    
    So this bugfix changes behaviour.  It worked before by sheer luck:
    
      "If i was anything but 0, it was broken.  But this was only used by
       s390 and arm.  Since it was for the next interrupt, could that next
       interrupt be a problem (going into the second cascade)? But it was
       probably seldom wrong.  That is, this would fail if the next
       interrupt was in the second cascade, and was wrapped.  Which may
       never of happened.  Also if it did happen, it would have just missed
       the interrupt.
    
       If an interrupt was missed, and no one was there to miss it, was it
       really missed :-)"
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be6b5a3505fa0cd54c3b5959a39293f47c648980
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Sun Jul 30 03:03:37 2006 -0700

    [PATCH] cpu hotplug: use hotplug version of registration in late inits
    
    Use hotplug version of register_cpu_notifier in late init functions.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c7165c90801609b70492e50b2a9c69a677c573a
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Sun Jul 30 03:03:36 2006 -0700

    [PATCH] cpu hotplug: fix hotplug cpu documentation for proper usage
    
    Update hotplug cpu documentation to clearly state when to use
    register_cpu_notifier() and register_hotcpu_notifier.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c78f3075dab4be279e283f901f00e33ce44890a
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Sun Jul 30 03:03:35 2006 -0700

    [PATCH] cpu hotplug: replace __devinit* with __cpuinit* for cpu notifications
    
    Few of the callback functions and notifier blocks that are associated with cpu
    notifications incorrectly have __devinit and __devinitdata.  They should be
    __cpuinit and __cpuinitdata instead.
    
    It makes no functional difference but wastes text area when CONFIG_HOTPLUG is
    enabled and CONFIG_HOTPLUG_CPU is not.
    
    This patch fixes all those instances.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cea6a4ba8acfba6f59cc9ed71e0d05cb770b9d9c
Author: Horms <horms@verge.net.au>
Date:   Sun Jul 30 03:03:34 2006 -0700

    [PATCH] panic_on_oops: remove ssleep()
    
    This patch is part of an effort to unify the panic_on_oops behaviour across
    all architectures that implement it.
    
    It was pointed out to me by Andi Kleen that if an oops has occured in
    interrupt context, then calling sleep() in the oops path will only cause a
    panic, and that it would be really better for it not to be in the path at
    all.
    
    This patch removes the ssleep() call and reworks the console message
    accordinly.  I have a slght concern that the resulting console message is
    too long, feedback welcome.
    
    For powerpc it also unifies the 32bit and 64bit behaviour.
    
    Fror x86_64, this patch only updates the console message, as ssleep() is
    already not present.
    
    Signed-off-by: Horms <horms@verge.net.au>
    Acked-by: Paul Mackerras <paulus@samba.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b8bdb460b7ecf08a4fed6e8b5b6b3fe874587aaa
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sun Jul 30 03:03:33 2006 -0700

    [PATCH] always define IRQ_PER_CPU
    
    Reduce the likelihood of someone accidentally introducing namespace
    collisions.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0df33bcab4b687f0f18b9ebd69d374642e46a0e
Author: Michal Feix <michal.feix@firma.seznam.cz>
Date:   Sun Jul 30 03:03:32 2006 -0700

    [PATCH] nbd: Abort request on data reception failure
    
    When reading from nbd device, we need to receive all the data after
    receiving reply packet from the server - otherwise such request will never
    be ended.
    
    If socket is closed right after accepting reply control packet and in the
    middle of waiting for read data, nbd_read_stat() returns NULL and
    nbd_end_request() is not called.
    
    This patch fixes it.
    
    Signed-off-by: Michal Feix <michal@feix.cz>
    Acked-by: Paul Clements <paul.clements@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4b57e0842621f597d744b193ea325d62724596b
Author: Michal Feix <michal@feix.cz>
Date:   Sun Jul 30 03:03:31 2006 -0700

    [PATCH] nbd: Check magic before doing anything else
    
    We should check magic sequence in reply packet before trying to find
    request with it's request handle.  This also solves the problem with
    "Unexpected reply" message beeing logged, when packet with invalid magic is
    received.
    
    Signed-off-by: Michal Feix <michal@feix.cz>
    Acked-by: Paul Clements <paul.clements@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e185d83398b2708f50207bc12d0e0a70bd70767
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Sun Jul 30 03:03:30 2006 -0700

    [PATCH] lockdep: annotate pktcdvd natural device hierarchy
    
    The pkt_*_dev functions operate on not-this-blockdevice, and that is
    sufficiently checked at setup time.  As a result there is a natural
    hierarchy, which needs nesting annotations
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Peter Osterlund <petero2@telia.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e86240f3fd33f8052141778ad3dffe2c96184d7
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Sun Jul 30 03:03:29 2006 -0700

    [PATCH] IDE: Touch NMI watchdog during resume from STR
    
    When resuming from suspend-to-RAM, the NMI watchdog detects a lockup in
    ide_wait_not_busy.  Here's a screenshot of the trace taken by a digital
    camera: http://www.uamt.feec.vutbr.cz/rizeni/pom/DSC03510-2.JPG
    
    Let's touch the NMI watchdog in ide_wait_not_busy.  The system then resumes
    correctly from STR.
    
    [akpm@osdl.org: modular build fix]
    Signed-off-by: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e1dfc66b6ec94984a4778132147a8aa36461d58
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jul 30 03:03:28 2006 -0700

    [PATCH] invalidate_bdev() speedup
    
    We can immediately bail from invalidate_bdev() if the blockdev has no
    pagecache.
    
    This solves the huge IPI storms which hald is causing on the big ia64
    machines when it polls CDROM drives.
    
    Acked-by: Jes Sorensen <jes@sgi.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a268cefebceeb2046dfdfa301f041c2468536852
Author: Miles Bader <miles@gnu.org>
Date:   Sun Jul 30 03:03:28 2006 -0700

    [PATCH] v850: call init_page_count() instead of set_page_count()
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66f6b24be91fcc31259e8219286ae462ae64ea55
Author: Miles Bader <miles@gnu.org>
Date:   Sun Jul 30 03:03:27 2006 -0700

    [PATCH] v850: Remove symbol exports which duplicate global ones
    
    Signed-off-by: Miles Bader <miles@gnu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9ad965ea9a6d719daf333847a2ceb0e363994bd
Author: bibo, mao <bibo.mao@intel.com>
Date:   Sun Jul 30 03:03:26 2006 -0700

    [PATCH] IA64: kprobe invalidate icache of jump buffer
    
    Kprobe inserts breakpoint instruction in probepoint and then jumps to
    instruction slot when breakpoint is hit, the instruction slot icache must
    be consistent with dcache.  Here is the patch which invalidates instruction
    slot icache area.
    
    Without this patch, in some machines there will be fault when executing
    instruction slot where icache content is inconsistent with dcache.
    
    Signed-off-by: bibo,mao <bibo.mao@intel.com>
    Acked-by: "Luck, Tony" <tony.luck@intel.com>
    Acked-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25c8716cb08dea386c7d6220b82eba732ccbf976
Author: Tobias Klauser <tklauser@distanz.ch>
Date:   Sun Jul 30 03:03:23 2006 -0700

    [PATCH] arch/alpha: Use ARRAY_SIZE macro
    
    Use ARRAY_SIZE macro instead of sizeof(x)/sizeof(x[0]) and remove a
    duplicate of the macro.  Also remove some trailing whitespaces and needless
    braces.
    
    Signed-off-by: Tobias Klauser <tklauser@distanz.ch>
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8e5429e49dcf5243a2dc293cb11f53d65d5fca9
Author: Arthur Othieno <apgo@patchbomb.org>
Date:   Sun Jul 30 03:03:22 2006 -0700

    [PATCH] i386: fix CONFIG_EFI help
    
    It is described as being experimental, but doesn't actually depend on
    EXPERIMENTAL.  Change the text.
    
    Signed-off-by: Arthur Othieno <apgo@patchbomb.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c39df470e04822965d945473d831786ab79dd4cd
Author: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
Date:   Sun Jul 30 03:03:21 2006 -0700

    [PATCH] kprobe-booster: disable in preemptible kernel
    
    The kprobe-booster's safety check against preemption does not work well
    now, because the preemption count has been modified by read_rcu_lock() in
    atomic_notifier_call_chain() before we check it.  So, I'd like to prevent
    boosting kprobe temporarily if the kernel is preemptable.
    
    Now we are searching for the good solution.
    
    Signed-off-by: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
    Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Cc: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Cc: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2a8a3d5b65e86ec1dfef7d268c64a909eab94af7
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Sun Jul 30 03:03:20 2006 -0700

    [PATCH] machine_kexec.c: Fix the description of segment handling
    
    One of my original comments in machine_kexec was unclear
    and this should fix it.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Andi Kleen <ak@muc.de>
    Acked-by: Horms <horms@verge.net.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c35a7261eaf0e57924e2c56c6d72dc44ee9f3634
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jul 30 03:03:19 2006 -0700

    [PATCH] synchronize_tsc() fixes
    
    - Move the tsc synchronisation variables into a struct, mark it __initdata
    
    - local `realdelta' wants to be 64-bit
    
    - Print the skew for negative skews, as well as for positive ones
    
    - remove dead code
    
    Cc: john stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 851f8a6906b71f7a19043d4d722dd4ffab7aeafc
Author: Venkat Yekkirala <vyekkirala@trustedcs.com>
Date:   Sun Jul 30 03:03:18 2006 -0700

    [PATCH] selinux: fix bug in security_compute_sid
    
    Initializes newcontext sooner to allow for its destruction in all cases.
    
    Signed-off-by: Venkat Yekkirala <vyekkirala@TrustedCS.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddccef3b5ec906ff181171e8ffad4fcb996792fd
Author: Darrel Goeddel <dgoeddel@TrustedCS.com>
Date:   Sun Jul 30 03:03:17 2006 -0700

    [PATCH] selinux: fix memory leak
    
    This patch fixes a memory leak when a policydb structure is destroyed.
    
    Signed-off-by: Darrel Goeddel <dgoeddel@trustedcs.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1bbf14f37261c2c0dba71404602e1ddcec069d2
Author: Neil Brown <neilb@suse.de>
Date:   Sun Jul 30 03:03:16 2006 -0700

    [PATCH] knfsd: Fix stale file handle problem with subtree_checking.
    
    A recent commit (7fc90ec93a5eb71f4b08403baf5ba7176b3ec6b1) moved the
    call to nfsd_setuser out of the 'find a dentry for a filehandle' branch
    of fh_verify so that it would always be called.
    
    This had the unfortunately side-effect of moving *after* the call to
    decode_fh, so the prober fsuid was not set when nfsd_acceptable was called,
    the 'permission' check did the wrong thing.
    
    This patch moves the nfsd_setuser call back where it was, and add as call
    in the other branch of the if.
    
    Cc: "J. Bruce Fields" <bfields@fieldses.org>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5ca63cb60892c1703998daf80d2d1b04cb70103
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jul 30 03:03:16 2006 -0700

    [PATCH] mce section fix
    
    mce_disabled cannot be __initdata - we access it during APM resume.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31925c8857ba17c11129b766a980ff7c87780301
Author: Peter Korsgaard <jacmet@sunsite.dk>
Date:   Sun Jul 30 03:03:12 2006 -0700

    [PATCH] Fix ppc32 zImage inflate
    
    The recent zlib update (commit 4f3865fb57a04db7cca068fed1c15badc064a302)
    broke ppc32 zImage decompression as it tries to decompress to address zero
    and the updated zlib_inflate checks that strm->next_out isn't a null
    pointer.
    
    This little patch fixes it.
    
    [rpurdie@rpsys.net: add comment]
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>
    Acked-by: Tom Rini <trini@kernel.crashing.org>
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 163ecdff060f2fa9e8f5238882fd0137493556a6
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Sun Jul 30 03:03:11 2006 -0700

    [PATCH] delay accounting: temporarily enable by default
    
    Enable delay accounting by default so that feature gets coverage testing
    without requiring special measures.
    
    Earlier, it was off by default and had to be enabled via a boot time param.
     This patch reverses the default behaviour to improve coverage testing.  It
    can be removed late in the kernel development cycle if its believed users
    shouldn't have to incur any cost if they don't want delay accounting.  Or
    it can be retained forever if the utility of the stats is deemed common
    enough to warrant keeping the feature on.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d94a041519f3ab1ac023bf917619cd8c4a7d3c01
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Sun Jul 30 03:03:11 2006 -0700

    [PATCH] taskstats: free skb, avoid returns in send_cpu_listeners
    
    Add a missing freeing of skb in the case there are no listeners at all.
    Also remove the returning of error values by the function as it is unused
    by the sole caller.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d94dddd438bcba97db44f120da39bb001b5249f
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Sun Jul 30 03:03:10 2006 -0700

    [PATCH] make taskstats sending completely independent of delay accounting on/off status
    
    Complete the separation of delay accounting and taskstats by ignoring the
    return value of delay accounting functions that fill in parts of taskstats
    before it is sent out (either in response to a command or as part of a task
    exit).
    
    Also make delayacct_add_tsk return silently when delay accounting is turned
    off rather than treat it as an error.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15a647eba94c3da27ccc666bea72e7cca06b2d19
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Jul 30 03:03:08 2006 -0700

    [PATCH] genirq: {en,dis}able_irq_wake() need refcounting too
    
    IRQs need refcounting and a state flag to track whether the the IRQ should
    be enabled or disabled as a "normal IRQ" source after a series of calls to
    {en,dis}able_irq().  For shared IRQs, the IRQ must be enabled so long as at
    least one driver needs it active.
    
    Likewise, IRQs need the same support to track whether the IRQ should be
    enabled or disabled as a "wakeup event" source after a series of calls to
    {en,dis}able_irq_wake().  For shared IRQs, the IRQ must be enabled as a
    wakeup source during sleep so long as at least one driver needs it.  But
    right now they _don't have_ that refcounting ...  which means sharing a
    wakeup-capable IRQ can't work correctly in some configurations.
    
    This patch adds the refcount and flag mechanisms to set_irq_wake() -- which
    is what {en,dis}able_irq_wake() call -- and minimal documentation of what
    the irq wake mechanism does.
    
    Drivers relying on the older (broken) "toggle" semantics will trigger a
    warning; that'll be a handful of drivers on ARM systems.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e44ef238b7eb607532e89249e7b2523faf77a92
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jul 30 03:03:07 2006 -0700

    [PATCH] drivers/char/pc8736x_gpio.c: unexport a static struct
    
    A static struct mustn't be exported.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 822cfbff2ef49a08d1b9618d50f81b475d4f936c
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Sun Jul 30 03:03:04 2006 -0700

    [PATCH] Process Events: Fix biarch compatibility issue. use __u64 timestamp
    
    Events sent by Process Events Connector from a 64-bit kernel are not binary
    compatible with a 32-bit userspace program because the "timestamp" field
    (struct timespec) is not arch independent.  This affects the fields that
    follow "timestamp" as they will be be off by 8 bytes.
    
    This is a problem for 32-bit userspace programs running with 64-bit kernels
    on ppc64, s390, x86-64..  any "biarch" system.
    
    Matt had submitted a different solution to lkml as an RFC earlier.  We have
    since switched to a solution recommended by Evgeniy Polyakov.
    
    This patch fixes the problem by changing the timestamp to be a __u64, which
    stores the number of nanoseconds.
    
    Tested on a x86_64 system with both 32 bit application and 64 bit
    application and on a i386 system.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Matt Helsley <matthltc@us.ibm.com>
    Cc: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Cc: Guillaume Thouvenin <guillaume.thouvenin@bull.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ccb48ebb4de139eef4fcefd5f2bb823cb0d81b9
Author: Neil Brown <neilb@suse.de>
Date:   Sun Jul 30 03:03:01 2006 -0700

    [PATCH] ext3: avoid triggering ext3_error on bad NFS file handle
    
    The inode number out of an NFS file handle gets passed eventually to
    ext3_get_inode_block() without any checking.  If ext3_get_inode_block()
    allows it to trigger an error, then bad filehandles can have unpleasant
    effect - ext3_error() will usually cause a forced read-only remount, or a
    panic if `errors=panic' was used.
    
    So remove the call to ext3_error there and put a matching check in
    ext3/namei.c where inode numbers are read off storage.
    
    [akpm@osdl.org: fix off-by-one error]
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Jan Kara <jack@suse.cz>
    Cc: Marcel Holtmann <marcel@holtmann.org>
    Cc: <stable@kernel.org>
    Cc: "Stephen C. Tweedie" <sct@redhat.com>
    Cc: Eric Sandeen <esandeen@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f712c0c7e1796f92e45e4de144e247816d974b8f
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Sun Jul 30 03:02:59 2006 -0700

    [PATCH] sched: build_sched_domains() fix
    
    Use the correct groups while initializing sched groups power for
    allnodes_domain.  This fixes the crash observed while creating exclusive
    cpusets.
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Reported-and-tested-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f2ef124b274baac80f64e290aa44e87a7753933
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Jul 28 13:20:23 2006 -0700

    [IA64] Fix breakage in simscsi.c
    
    arch/ia64/hp/sim/simscsi.c: In function `simscsi_sg_readwrite':
    arch/ia64/hp/sim/simscsi.c:154: error: structure has no member named `buffer'
    arch/ia64/hp/sim/simscsi.c: In function `simscsi_fillresult':
    arch/ia64/hp/sim/simscsi.c:247: error: structure has no member named `buffer'
    
    hch said:
    >Just change it to access the request_buffer member instead.  buffer
    >and request_buffer have been synonymous 99% of the time, and a driver
    >never even wants to access buffer.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 1bf1eba74ec14bc10966a8ddb23bc8deeb91facd
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Fri Jun 23 13:15:55 2006 -0600

    [IA64] Format /proc/pal/*/version_info correctly
    
    /proc/pal/*/version_info is a bit confusing.  HP firmware, at least,
    reports 07.31 instead of 0.7.31.  Also, the comment is out of place;
    it's an internal detail about the implementation of ia64_pal_version.
    Since the 2.2 revision of the SDM still states that PAL_VERSION can
    be called in virtual mode, correct the comment to be more accurate.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8d950cb8896fc95a9444d190885779438bb9d01c
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Tue Jul 25 14:05:01 2006 -0700

    [POWERPC] Minor comment fix for misc_64.S
    
    A minor comment fix for misc_64.S from Takao Shinohara.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9b9b72fe703bd5b89533815eb7eb682cdaf60a6e
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Tue Jul 25 15:11:47 2006 -0500

    [POWERPC] Use H_CEDE on non-SMT
    
    On the JS21 systems, they have the SPLPAR hypertas set, but are not SMT
    capable.  So, they are not making the H_CEDE call.  This is causing the
    hypervisor to have to queue up work for the hdecr, taking an excessive
    amount of time in maintenance code, and causing jitter on the box.
    
    Making the H_CEDE call helps alleviate that problem.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b6ff50833ad43a8ebd9b16bf53c334f7aaf33c41
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 29 23:15:36 2006 -0700

    Linux v2.6.18-rc3

commit af652c26f5f0eceb6d8cb97eb9b86fba6f1f3b85
Merge: b83a8e6... ceaccbd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 29 22:53:46 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3734/1: Fix the unused variable warning in __iounmap()
      [ARM] 3737/1: Export ARM copy/clear_user_page symbols
      [ARM] 3736/1: xscale: don't mis-report 80219 as an iop32x
      [ARM] 3733/2: S3C24XX: Remove old IDE registers in Anubis
      [ARM] 3732/1: S3C24XX: tidy syntax in osiris and anubis machines
      [ARM] Fix SMP booting
      [ARM] 3731/1: Allow IRQ definitions of IQ80331 and IQ80332 to co-exist
      [ARM] 3730/1: ep93xx: enable usb ohci driver in the defconfig
      [ARM] Fix cats build

commit b83a8e64fd1aecf021111d22c062c97a3241d0c4
Author: Andi Kleen <ak@suse.de>
Date:   Sat Jul 29 21:42:55 2006 +0200

    [PATCH] MM: Remove rogue readahead printk
    
    For some reason it triggers always with NFS root and spams the kernel
    logs of my nfs root boxes a lot.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70583161e878c8e9baaace71ba000b46c86b89cc
Author: Andi Kleen <ak@suse.de>
Date:   Sat Jul 29 21:42:52 2006 +0200

    [PATCH] i386: Fix up backtrace fallback patch
    
    I didn't test all compilation combinations. Shame on me.
    And fix a missing option in the boot option following x86-64 (Jan Beulich)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65f87d8a8a6e1b560c61951d0a68ed80f7c8ff19
Author: Andi Kleen <ak@suse.de>
Date:   Sat Jul 29 21:42:49 2006 +0200

    [PATCH] x86_64: Fix swiotlb=force
    
    It was broken before. But having it is important as possible hardware
    bug workaround.
    
    And previously there was no way to force swiotlb if there is another IOMMU.
    Side effect is that iommu=force won't force swiotlb anymore even if there
    isn't another IOMMU.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 355540f3338e1408dac98413f05d612a76d4f5e3
Author: Andi Kleen <ak@suse.de>
Date:   Sat Jul 29 21:42:46 2006 +0200

    [PATCH] x86_64: Revert k8-bus.c northbridge access change
    
    As Travis Betak points out it accesses the wrong northbridge subfunction
    now. Switch back to the old code.
    
    Cc: "Travis Betak" <betak@mpdtxmail.amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2105b10fe0f460c388fe4e09226313f519d8c00
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Sat Jul 29 21:42:43 2006 +0200

    [PATCH] x86_64: Calgary IOMMU - Multi-Node NULL pointer dereference fix
    
    Calgary hits a NULL pointer dereference when booting in a multi-chassis
    NUMA system.  See Redhat bugzilla number 198498, found by Konrad
    Rzeszutek (konradr@redhat.com).
    
    There are many issues that had to be resolved to fix this problem.
    Firstly when I originally wrote the code to handle NUMA systems, I
    had a large misunderstanding that was not corrected until now.  That was
    that I thought the "number of nodes online" referred to number of
    physical systems connected.  So that if NUMA was disabled, there
    would only be 1 node and it would only show that node's PCI bus.
    In reality if NUMA is disabled, the system displays all of the
    connected chassis as one node but is only ignorant of the delays
    in accessing main memory.  Therefore, references to num_online_nodes()
    and MAX_NUMNODES are incorrect and need to be set to the maximum
    number of nodes that can be accessed (which are 8).  I created a
    variable, MAX_NUM_CHASSIS, and set it to 8 to fix this.
    
    Secondly, when walking the PCI in detect_calgary, the code only
    checked the first "slot" when looking to see if a device is present.
    This will work for most cases, but unfortunately it isn't always the
    case.  In the NUMA MXE drawers, there are USB devices present on the
    3rd slot (with slot 1 being empty).  So, to work around this, all
    slots (up to 8) are scanned to see if there are any devices present.
    
    Lastly, the bus is being enumerated on large systems in a different
    way the we originally thought.  This throws the ugly logic we had
    out the window.  To more elegantly handle this, I reorganized the
    kva array to be sparse (which removed the need to have any bus number
    to kva slot logic in tce.c) and created a secondary space array to
    contain the bus number to phb mapping.
    
    With these changes Calgary boots on an x460 with 4 nodes with and
    without NUMA enabled.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 089bbbcb36979166131868a89ca5f4e695d6637d
Author: Muli Ben-Yehuda <muli@il.ibm.com>
Date:   Sat Jul 29 21:42:40 2006 +0200

    [PATCH] x86_64: Calgary IOMMU - fix off by one error
    
    Fixed off-by-one error in detect_calgary and calgary_init which will
    cause arrays to overflow.  Also, removed impossible to hit BUG_ON.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e5f61b00c577da698fb00cd9c91a96b79044dfd
Author: Andi Kleen <ak@suse.de>
Date:   Sat Jul 29 21:42:37 2006 +0200

    [PATCH] x86_64: On Intel systems when CPU has C3 don't use TSC
    
    On Intel systems generally the TSC stops in C3 or deeper,
    so don't use it there. Follows similar logic on i386.
    
    This should fix problems on Meroms.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 260f659b232b17889e3f0c9bf411675898b222c2
Author: Andi Kleen <ak@suse.de>
Date:   Sat Jul 29 21:42:34 2006 +0200

    [PATCH] x86_64: Update defconfig
    
    Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddecbe112b057c333a8e055fb417451a02b9df78
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Wed Jul 26 17:08:29 2006 -0300

    V4L/DVB (4380): Bttv: Revert VBI_OFFSET to previous value, it works better
    
    A previous patch changed VBI_OFFSET to match what the datasheets say it
    should be.  However, the bt8x8 datasheets are wrong.  The old value of
    244 is closer to what is actually observed.  The real value appears to
    not be constant and is different for different chip revisions.
    Acked-by: Alan Cox <alan@redhat.com>
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8c313111a2c843610f58d57b4e02159fecef4bbf
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jul 25 20:37:03 2006 -0300

    V4L/DVB (4379): Videodev: Check return value of class_device_register() correctly
    
    Errors are return values < 0, not != 0.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 08d41808362a3663c0856c9720ad940a61156fb5
Author: Mike Isely <isely@pobox.com>
Date:   Sat Jul 22 21:26:30 2006 -0300

    V4L/DVB (4373): Correctly handle sysfs error leg file removal in pvrusb2
    
    Take note of which sysfs files / groups that the pvrusb2 successfully
    creates and only delete those specific items when tearing things
    down.  (Previously we just blindly tore everything down every time.)
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d94fc9a08e51432d0d5fc0f74a4f705d7b49c251
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Sat Jul 29 17:18:06 2006 -0300

    V4L/DVB (4368): Bttv: use class_device_create_file and handle errors
    
    Revert bttv-driver.c from video_device_create_file() to use
    class_device_create_file() again.  video_device_create_file() is only
    available when V4L1 is on.
    Proper error checking is added for failure of class_device_create_file().
    Will print error message and unroll partially created sysfs entries.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 53dd8def52100ed8be4dae0cf1c2dc1f7e0fcd2c
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jul 25 09:31:42 2006 -0300

    V4L/DVB (4367): Videodev: Handle class_device related errors
    
    Add proper error checking and roll-back for failure of
    class_device_create_file() in videodev.c.  Print error messages and
    unroll partially created sysfs entries.
    Also, failure of class_device_register() in video_register_device() is
    handled correctly.  It was failing to de-allocate the minor number.  This
    must be done in video_register_device(), since the caller has no way of
    knowing if failure occurred before or after the class device was
    registered.
    Also added an error message if video_register_device() is called with
    an unknown type, which should never happen.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit df2732706c745c827762aaf51892f281fb937680
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon Jul 24 15:19:37 2006 -0300

    V4L/DVB (4365): OVERLAY flag were enabled by mistake
    
    A patch from Aug, 17 activated by mistake OVERLAY flag on cx88-video,
    together with several cx88-blackbird cleanups. This makes the cx88 driver
    to report:
    /dev/video0 [v4l2]: ioctl VIDIOC_G_FBUF: Invalid argument
    instead of:
    /dev/video0 [v4l2]: no overlay support
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fb0b664c22b80df62c9e555afcde6a8dab08f4f0
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jul 23 06:32:05 2006 -0300

    V4L/DVB (4344): Fix broken dependencies on media Kconfig
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 985bc96e27c729b8b686126ed26bba9fbaaf562d
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jul 23 06:31:19 2006 -0300

    V4L/DVB (4343): Fix for compilation without V4L1 or V4L1_COMPAT
    
    Removed usage of HAVE_V4L1
    Including videodev.h will just include videodev2.h if V4L1 is not supported
    V4L1 code at core drivers will honor CONFIG_V4L1_COMPAT stuff
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f251d23eaee673524171b24a71a8794acf82783e
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jul 22 08:20:07 2006 -0300

    V4L/DVB (4342): Fix ext_controls align on 64 bit architectures
    
    u64 is aligned as 128bits on x86_64 architetures, requiring an special
    handling to ioctls that depends on v4l2_ext_control.
    Let's fix this before ext controls go to kernel mainstream to avoid one
    more compat32 stuff.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit eb4eeccc18246c852fffc771efc3c07a547aeb97
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jul 21 18:53:23 2006 -0300

    V4L/DVB (4341): VIDIOCSMICROCODE were missing on compat_ioctl32
    
    video_code size is 24 on i386 and 32 on x86_64, so a proper handling is needed
    on compat_ioctl32 to fix it.
    This code should be tested, since just *a few* boards use this ioctl.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 95faba22d8b81f0cd85b995232b7d05c45a26f3e
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Jul 18 16:37:13 2006 -0300

    V4L/DVB (4322): Fix dvb-pll autoprobing
    
    Trent Piepho pointed out that the pll test i2c transmission is slightly
    wrong; it was transmitting a zero length message, and then reading from the
    PLL. This was wrong; it should only be transmitting a single read i2c message.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 55c05b6d226f68266d1f88dd81795b04d096b1c8
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Sun Jul 16 19:41:41 2006 -0300

    V4L/DVB (4311): Fix possible dvb-pll oops
    
    Supplying a NULL i2c adapter to dvb_pll_attach is allowed, for example with
    mt352 demods. However, the pll i2c probe will segfault because it does not
    check for this.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e61b6fc58b4a0b07f1ccfc67bf2b84a2848fcb2c
Author: Mike Isely <isely@pobox.com>
Date:   Tue Jul 18 22:42:18 2006 -0300

    V4L/DVB (4337): Refine dead code elimination in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 32e4c3a5622e832938aa0272e21a292564ff090a
Author: Oliver Endriss <o.endriss@gmx.de>
Date:   Tue Jul 18 22:55:23 2006 -0300

    V4L/DVB (4323): [budget/budget-av/budget-ci/budget-patch drivers] fixed DMA start/stop code
    
    Fix bug reported by Andrew de Quincey:
    After cold boot the saa7146 DMA did not start if the demuxer was opened
    before the frontend has locked to the signal.
    DMA transfers will be started now if (and only if)
    the frontend is locked and data should be sent to the demuxer.
    
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3117beec7e43f91ce156cacf033a712c7e22737d
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Wed Jul 19 13:23:38 2006 -0300

    V4L/DVB (4316): Check __must_check warnings
    
    
    Check __must_check warnings for class_device_register and class_device_create_file
    
    video_device_create_file was declared as a void, but instead should
    return the int value of class_device_create_file.
    
    Move the check from bttv-driver.c into v4l2-dev.h, because all other
    callers of video_device_create_file must also be checked.
    
    Replace the call to class_device_create_file in videodev.c with
    video_device_create_file, as defined in v4l2-dev.h, so that the
    return value of class_device_create_file will be checked.
    
    Check the return value of class_device_register in videodev.c and
    pvrusb2-sysfs.c
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d9cd2d9b61898354f5dbabdc490dd6ef309ebbd4
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jul 17 17:15:26 2006 -0300

    V4L/DVB (4314): Set the Auxiliary Byte when tuning LG H06xF in analog mode
    
    With the LG H06xF tuners, an auxiliary byte must be sent after the
    standard four-byte i2c sequence. The code that does this is currently in
    the wrong place, causing random bytes to be written to the tuner over
    i2c in the set_type function.
    This patch moves this code from set_type to default_set_tv_freq.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a62c61d3820417e8efac8796f0a46d7ab337af8d
Author: Ricardo Cerqueira <v4l@cerqueira.org>
Date:   Mon Jul 17 16:34:27 2006 -0300

    V4L/DVB (4313): Bugfix for keycode calculation on NPG remotes
    
    Fix keycode calculations (all codes for this remote were wrong due to a
    lost + sign)
    
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7845701820c420454bcfdc4902fad68901d9ff83
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 15 15:19:56 2006 -0300

    V4L/DVB (4310): Saa7134: rename dmasound_{init, exit}
    
    Two different exports with the same name are not a good idea:
    $ grep -r EXPORT_SYMBOL\(dmasound_init\) *
    drivers/media/video/saa7134/saa7134-core.c:EXPORT_SYMBOL(dmasound_init);
    sound/oss/dmasound/dmasound_core.c:EXPORT_SYMBOL(dmasound_init);
    $
    This patch renames the saa7134 dmasound_{init,exit} to
    saa7134_dmasound_{init,exit}.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d5fdd1354e04658ea25150cc152a395bb6ecb6da
Author: Hartmut Hackmann <hartmut.hackmann@t-online.de>
Date:   Sat Jul 15 09:45:34 2006 -0300

    V4L/DVB (4306): Support non interlaced capture by default for saa713x
    
    This patch just sets the option noninterlaced to 1 by default since
    it has no known disadvantages. It is still possibe to get the old
    behaviour by setting noninterlaced=0.
    
    Signed-off-by: Hartmut Hackmann <hartmut.hackmann@t-online.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c526e224e4075eff788a992f59bc4a9006b12923
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jul 15 09:08:26 2006 -0300

    V4L/DVB (4298): Check all __must_check warnings in bttv.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6ba475042f0ca54bf055ce94b2a1e4656ed143f9
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon Jul 10 03:34:16 2006 -0300

    V4L/DVB (4296): Remove stradis MODULE_DEVICE_INFO definition
    
    To prevent autoloading of the driver, as it then conflicts with every other
    saa7146 device in existence.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6a85774741f1ef1a47ba0670e99c97e892930cad
Author: Marco Schluessler <marco@lordzodiac.de>
Date:   Mon Jul 10 03:34:16 2006 -0300

    V4L/DVB (4295): Fix typo in comment for TDA9819
    
    Fix typo in comment for TDA9819
    
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 93e2b1ae97dedd66ca0cb8ac1a5ceb4904631091
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon Jul 10 03:34:15 2006 -0300

    V4L/DVB (4294): Fix broken tda665x PLL definition.
    
    It was pointed out on the mailing list that this PLL definition is broken. I
    went back to the original dibusb driver and confirmed it used to use these
    settings, as well as consulting the datasheet.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f2813093810276a2a3c1f116f23baf2ab7a669bd
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon Jul 10 03:34:15 2006 -0300

    V4L/DVB (4293): Fix unstable DISEQC behaviour on budget cards.
    
    Use the stv0299 native DISEQC implementation instead of the bitbanging one
    as required by the ves1893. This was originally found by Oliver Endriss.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 04c56d0e5b27f1f65e4d20b46731d55341d42a6a
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon Jul 10 03:34:14 2006 -0300

    V4L/DVB (4292): Fix DISEQC regression
    
    The changes to add frontend reinitialisation moved the position where the
    init() op is called into the frontend thread. Unfortunately, since DISEQC
    operations do not use the frontend thread, this meant that DISEQC could be
    called against an uninitalised frontend, leading to all sorts of trouble.
    Patch fixes this by reinstating the original fronted intialisation call.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 061b623c54c5722fbb55fddbbdacbf97e8a82701
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon Jul 10 03:34:14 2006 -0300

    V4L/DVB (4291): Add dvbpll i2c device check.
    
    Some cards have multiple possible addresses for their PLLs, with no other
    way to tell if a PLL is present or not apart from probing to see if an i2c
    device is present. This adds a quick check to see if an i2c device is
    present at the given i2c address.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Acked-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ceaccbd2a6a82b97bd15938fc7ffe180754cbe6c
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Sat Jul 29 08:29:30 2006 +0100

    [ARM] 3734/1: Fix the unused variable warning in __iounmap()
    
    Patch from Catalin Marinas
    
    This patch adds #ifdef around some variables in the arch/arm/mm/ioremap.c
    file.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7b1df1985c7a4e6d5fcab0ed71a2cd1d4ad3be41
Author: George G. Davis <davis_g@mvista.com>
Date:   Sat Jul 29 08:29:27 2006 +0100

    [ARM] 3737/1: Export ARM copy/clear_user_page symbols
    
    Patch from George G. Davis
    
    As reported by various folks on the ARM Linux kernel mailing list,
    the video-buf.ko driver has undefined references on all ARM machines
    which use it as observed during `make modules`:
    
    Warning: "v4wb_clear_user_page" [drivers/media/video/video-buf.ko] undefined!
    
    Similar warnings exist for all ARM machines which use this driver.
    So this change adds the missing EXPORT_SYMBOLs to allow using this
    driver as a module.
    
    Signed-off-by: George G. Davis <gdavis@mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a6a38a66224c7c578cfed2f584b440c81af0c3ae
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jul 29 08:29:26 2006 +0100

    [ARM] 3736/1: xscale: don't mis-report 80219 as an iop32x
    
    Patch from Lennert Buytenhek
    
    The IOP 80219 xscale CPU is a stripped down version of the IOP32x.
    But the fact that the 80219 and IOP32x are very similar doesn't mean
    that they need to share a cpu table entry.  It's also somewhat confusing
    for the end user to see the 80219 reported as an IOP32x, so this patch
    splits the IOP32x cpu table entry to make a separate entry for the
    80219.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dc710afe95ee9b263ab593c11d86a684f1606872
Merge: 4da3dcf... ab3b3fd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 28 22:47:44 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [libata] sata_promise: comment out duplicate PCI ID
      [PATCH] libata: improve EH action and EHI flag handling
      [PATCH] libata: fix eh_skip_recovery condition
      [PATCH] libata: fix autopsy ehc->i.action and ehc->i.dev handling

commit ab3b3fd38125be0242c2f94bf144b48054210882
Merge: b71426e... e3f2dde...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Jul 29 01:39:17 2006 -0400

    Merge branch 'master' into upstream-fixes

commit 4da3dcf34671fa15c4f01101754106d97fc98e6e
Merge: 187ff3b... 59b693f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Jul 29 01:26:51 2006 -0400

    Merge branch 'upstream' of git://electric-eye.fr.zoreil.com/home/romieu/linux-2.6 into upstream-fixes

commit 187ff3b8575569668cde9021b9fe70386a4131fb
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 19 14:08:42 2006 -0700

    [PATCH] skge: chip clock rate typo
    
    Okay, Fix both typo's in one patch .The impact is that the incorrect value
    was being computed for blinking LED and interrupt moderation values.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9a71db721a2cbb9921b929b2699ab181f5a3c6c0
Author: Brice Goglin <brice@myri.com>
Date:   Fri Jul 21 15:49:32 2006 -0400

    [PATCH] myri10ge - Always do a dummy RDMA after loading the firmware
    
    Always do a dummy RDMA after loading the firmware to work around
    buggy PCIe chipsets which do not implement resending properly.
    This is so cheap as to be almost free, and should never have been
    conditional on the tx boundary != 4096.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5b84b6fa9b96d1598eb77196f9d8b3e62efac647
Merge: e3f2dde... ca0084f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Jul 29 00:32:29 2006 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit e3f2ddeac718c768fdac4b7fe69d465172f788a8
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jul 29 05:17:57 2006 +0200

    [PATCH] pi-futex: robust-futex exit
    
    Fix robust PI-futexes to be properly unlocked on unexpected exit.
    
    For this to work the kernel has to know whether a futex is a PI or a
    non-PI one, because the semantics are different.  Since the space in
    relevant glibc data structures is extremely scarce, the best solution is
    to encode the 'PI' information in bit 0 of the robust list pointer.
    Existing (non-PI) glibc robust futexes have this bit always zero, so the
    ABI is kept.  New glibc with PI-robust-futexes will set this bit.
    
    Further fixes from Thomas Gleixner <tglx@linutronix.de>
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Ulrich Drepper <drepper@redhat.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 627371d73cdd04ed23fe098755b4f855138ad9e0
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jul 29 05:16:20 2006 +0200

    [PATCH] pi-futex: robust-futex exit crash fix
    
    Fix pi_state->list handling bugs: list handling mishap, locking error.
    Plus add more debug checks and fix a few style issues i noticed while
    debugging this.
    
    (reported by Ulrich Drepper and Jakub Jelinek.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c97d20a6c51067a38f53680d9609b4cf2867d077
Author: Andi Kleen <ak@suse.de>
Date:   Fri Jul 28 14:44:57 2006 +0200

    [PATCH] i386: Do backtrace fallback too
    
    Similar patch to earlier x86-64 patch. When the dwarf2 unwinder fails
    dump the left over stack with the old unwinder.
    
    Also some clarifications in the headers.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b783fd925cdd56d24d164e5bdcb072f2a67aedf4
Author: Andi Kleen <ak@suse.de>
Date:   Fri Jul 28 14:44:54 2006 +0200

    [PATCH] x86_64: Document backtracer selection options
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b13761ecd1d9977d2083da243e051e9f29097aef
Author: Andi Kleen <ak@suse.de>
Date:   Fri Jul 28 14:44:51 2006 +0200

    [PATCH] x86_64: Dump leftover backtrace entries when dwarf2 unwinder got stuck
    
    The dwarf2 unwinder currently often gets stuck because a lot
    of assembly code doesn't have proper dwarf2 annotiation yet.
    
    This currently often happens with __down. Should fix this by
    adding proper dwarf2 annotation to all inline assembly. However
    until that's done we need a quick fix for 2.6.18 to avoid
    incomplete backtraces.
    
    So when this happens dump the rest of the stack with the old unwinder
    instead of silently not dumping it. There was already a optional
    "both" mode that dumped both, but that was too ugly.
    
    I also clarified the headers for the different backtraces a bit.
    
    Also add a clear error message for missing dwarf2
    annotation that people can work on.
    
    And I removed a dead variable left over from Ingo's changes.
    
    Cc: mingo@elte.hu
    Cc: jbeulich@novell.com
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4045dff782a8692637c24a0222120082c887caa
Author: bibo mao <bibo.mao@intel.com>
Date:   Fri Jul 28 14:44:48 2006 +0200

    [PATCH] x86_64: Enlarge debug stack for nested kprobes
    
    In x86_64 platform, INT1 and INT3 trap stack is IST stack called DEBUG_STACK,
    when INT1/INT3 trap happens, system will switch to DEBUG_STACK by hardware.
    Current DEBUG_STACK size is 4K, when int1/int3 trap happens, kernel will
    minus current DEBUG_STACK IST value by 4k. But if int3/int1 trap is nested,
    it will destroy other vector's IST stack. This patch modifies this, it sets
    DEBUG_STACK size as 8K and allows two level of nested int1/int3 trap.
    
    Kprobe DEBUG_STACK may be nested, because kprobe handler may be probed
    by other kprobes.
    
    Thanks jbeulich for pointing out error in the first patch.
    
    [AK: nested kprobes are pretty dubious. Hopefully one nest
    will be enough. This will cost 8K per CPU (4K more than before)]
    
    Signed-off-by: bibo, mao <bibo.mao@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e92da4acb763272c6060f0b14adc2377b627d07
Author: Andi Kleen <ak@suse.de>
Date:   Fri Jul 28 14:44:45 2006 +0200

    [PATCH] x86_64: Don't clobber r8-r11 in int 0x80 handler
    
    When int 0x80 is called from long mode r8-r11 would leak out of the
    kernel (or rather they would be filled with some values from
    the kernel stack). I don't think it's a security issue because
    the values come from the fixed stack frame which should be near
    always user registers from a previous interrupt.
    
    Still better fix it.
    
    Longer term the register save macros need to be cleaned up
    to avoid such mistakes in the future.
    
    Original analysis from Richard Brunner, fix by me.
    
    Cc: Richard.Brunner@amd.com
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5a2601734bcc740ee78dc4cb0c56b5687da7bd9
Author: Andi Kleen <ak@suse.de>
Date:   Fri Jul 28 14:44:42 2006 +0200

    [PATCH] i386/x86-64: Add user_mode checks to profile_pc for oprofile
    
    Fixes a obscure user space triggerable crash during oprofiling.
    
    Oprofile calls profile_pc from NMIs even when user_mode(regs) is not true and
    the program counter is inside the kernel lock section. This opens
    a race - when a user program jumps to a kernel lock address and
    a NMI happens before the illegal page fault exception is raised
    and the program has a unmapped esp or ebp then the kernel could
    oops. NMIs have a higher priority than exceptions so that could
    happen.
    
    Add user_mode checks to i386/x86-64 profile_pc to prevent that.
    
    Cc: John Levon <levon@movementarian.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d2edfe004f5d0f3d805967bd6b4ada95e6aa419
Merge: 9d22e6d... 468310a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 28 19:25:02 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] update default configuration
      [S390] duplicate ccw devices in ccwgroup.
      [S390] permanent subchannel busy conditions may cause I/O stall

commit 9d22e6d7ad50472da399a500bf039e7718a6cdc9
Merge: 159099d... 93853fd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 28 19:24:38 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SUNLANCE]: fix compilation on sparc-UP
      [SPARC]: Defer clock_probe to fs_initcall()
      [SPARC64]: Fix typo in pgprot_noncached().
      [SPARC64]: Fix quad-float multiply emulation.

commit 159099dc3d501f8a39a169125c476f9b25182610
Merge: 16585e7... 41ff715...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 28 19:24:16 2006 -0700

    Merge git://oss.sgi.com:8090/nathans/xfs-rc-2.6
    
    * git://oss.sgi.com:8090/nathans/xfs-rc-2.6:
      [XFS] Ensure bulkstat from an invalid inode number gets caught always with
      [XFS] Fix a barrier related forced shutdown on mounts with quota enabled.
      [XFS] Fix remount vs no/barrier options by ensuring we clear unwanted
      [XFS] All xfs_disk_dquot_t values are (as the name says) disk endian.

commit 16585e76a71b64d75a090148c2a94bd4d50a5544
Merge: facf014... a75ad3c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 28 19:23:40 2006 -0700

    Merge branch 'for-linus' of git://brick.kernel.dk/data/git/linux-2.6-block
    
    * 'for-linus' of git://brick.kernel.dk/data/git/linux-2.6-block:
      [PATCH] scsi: kill overeager "not-ready" messages
      [PATCH] it821x: fix ide dma setup bug
      [PATCH] ide: if the id fields looks screwy, disable DMA
      [PATCH] ide: option to disable cache flushes for buggy drives

commit facf014792093d95e308b5d6ce9bc86d3c90e5b1
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Tue Jul 25 16:15:16 2006 -0400

    [PATCH] i386: switch_to(): misplaced parentheses
    
    Recent changes in i386 __switch_to() have a misplaced closing
    parenthesis causing an unlikely() to terminate early.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Acked-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dfda7751e969902f7231fc547ca8c9e0fb9ee13
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jul 28 09:01:36 2006 +0200

    [SCSI] fix simscsi
    
    On Thu, Jul 27, 2006 at 01:03:24AM -0700, Andrew Morton wrote:
    > arch/ia64/hp/sim/simscsi.c: In function `simscsi_sg_readwrite':
    > arch/ia64/hp/sim/simscsi.c:154: error: structure has no member named `buffer'
    > arch/ia64/hp/sim/simscsi.c: In function `simscsi_fillresult':
    > arch/ia64/hp/sim/simscsi.c:247: error: structure has no member named `buffer'
    > arch/ia64/hp/sim/simscsi.c: At top level:
    > arch/ia64/hp/sim/simscsi.c:87: warning: 'simscsi_setup' defined but not used
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0b4972d59170e13ab0236e8a7148112052590c01
Author: Ju, Seokmann <Seokmann.Ju@lsil.com>
Date:   Tue Jul 25 08:45:06 2006 -0600

    [SCSI] megaraid_{mm,mbox}: a fix on "kernel unaligned access address" issue
    
    There was an issue in the data structure defined by megaraid driver
    casuing "kernel unaligned access.." messages to be displayed during
    IOCTL on IA64 platform.
    
    The issue has been reported/fixed by Sakurai Hiroomi
    [sakurai_hiro@soft.fujitsu.com].
    
    Signed-Off By: Seokmann Ju <seokmann.ju@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit aa677bc7445147f663ebde69d248a30839bada76
Author: Ju, Seokmann <Seokmann.Ju@lsil.com>
Date:   Tue Jul 25 08:44:58 2006 -0600

    [SCSI] megaraid_{mm,mbox}: a fix on INQUIRY with EVPD
    
    With this patch, driver will protect data corruption created by
    INQUIRY with EVPD request to megaraid controllers.  As specified in
    the changelog, megaraid F/W already has fixed the issue and being
    under process of release. Meanwhile, driver will protect the system
    with this patch.
    
    Signed-Off By: Seokmann Ju <seokmann.ju@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fbf6080225a03aa2b3671acacebdf615f1d3f6ba
Author: Ju, Seokmann <Seokmann.Ju@lsil.com>
Date:   Tue Jul 25 08:44:48 2006 -0600

    [SCSI] megaraid_{mm,mbox}: 64-bit DMA capability checker
    
    This patch contains
    - a fix for 64-bit DMA capability check in megaraid_{mm,mbox} driver.
    - includes changes (going back to 32-bit DMA mask if 64-bit DMA mask
    failes) suggested by James with previous patch.
    - addition of SATA 150-4/6 as commented by Vasily Averin.
    
    With patch, the driver access PCIconfiguration space with dedicated
    offset to read a signature. If the signature read, it means that the
    controller has capability to handle 64-bit DMA.
    Without this patch, the driver used to blindly claim 64-bit DMA
    capability.
    The issue has been reported by Vasily Averin [vvs@sw.ru].
    Thank you Vasily for the reporting.
    
    Signed-Off By: Seokmann Ju <seokmann.ju@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9fc0a92c7ebcad96467d62077497ce195d9b741c
Author: Olaf Hering <olh@suse.de>
Date:   Wed Jul 19 10:34:05 2006 +0200

    [POWERPC] force 64bit mode in fwnmi handlers to workaround firmware bugs
    
    The firmware of POWER4 and JS20 systems does not switch the cpu to 64bit
    mode when the registered system_reset and machine_check handlers get called.
    If a 32bit process runs on that cpu at the time of the event, the cpu
    remains in 32bit mode. xmon and kdump can not deal with it, the result is
    an error like 'Bad kernel stack pointer fff2aad0 at 3200'.
    xmon just loses some register info, but booting the kdump kernel usually fails.
    
    Both handlers are not hot paths.  Duplicate the EXCEPTION_PROLOG_PSERIES macro
    and add two instructions to switch to 64bit:
    
     li     r11,5;
     rldimi r10,r11,61,0;
    
    Signed-off-by: Olaf Hering <olh@suse.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f4246b33c774bb4330eb6286beed6d3c9f4373c4
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:54 2006 -0500

    [SCSI] iscsi bugfixes: update and move version number
    
    The version info is useful for iscsi tcp, iser and qla4xxx so move to
    transport class.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f3ff0c3627df90aa28be98803b10289bb348e4e6
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:50 2006 -0500

    [SCSI] iscsi bugfixes: fix mem leaks in libiscsi
    
    We were leaking some strings. This patch just frees them.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 40527afea1a3b18ee5754e17d6f807176e03f1f2
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:45 2006 -0500

    [SCSI] iscsi bugfixes: pass errors from complete_pdu to caller
    
    Must pass ISCSI_ERR values from the recv path and propogate them
    upwards.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c8dc1e523b0f1e6dd71cdabd8c7d7587c6dc27f9
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:39 2006 -0500

    [SCSI] iscsi bugfixes: reduce memory allocations
    
    We currently try to allocate a max_recv_data_segment_length
    which can be very large (default is 64K), and common uses
    are up to 1MB. It is very very difficult to allocte this
    much contiguous memory and it turns out we never even use it.
    We really only need a couple of pages, so this patch has us
    allocates just what we know what we need today.
    
    Later if vendors start adding vendor specific data and
    we need to handle large buffers we can do this, but for
    the last 4 years we have not seen anyone do this or request
    it.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9aaa2b4621280b6de1ecfb6dd7cd5cbe59fd1264
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:34 2006 -0500

    [SCSI] iscsi bugfixes: dont use GFP_KERNEL for sending errors
    
    iscsi_tcp can send error events from soft irq context so we
    cannot use GFP_KERNEL.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 63f75cc8a7e6ce453e38a7b90cdcae83d63f1ea7
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:29 2006 -0500

    [SCSI] iscsi bugfixes: fix oops when removing session
    
    We are touching the cls_session after we have freed
    it. This causes a oops.
    
    Signed-off-by: Or Gerlitz  <ogerlitz@voltaire.com>
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c83469d36a9dd30dbf1fb9fc5ca3be3a0e64ff4
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:26 2006 -0500

    [SCSI] iscsi bugfixes: fix oops when iser is flushing io
    
    When we enter recovery and flush the running commands
    we cannot freee the connection before flushing the commands.
    Some commands may have a reference to the connection
    that needs to be released before. iscsi_stop was forcing
    the term and suspend too early and was causing a oops
    in iser, so this patch removes those callbacks all together
    and allows the LLD to handle that detail.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7ea8b82847293c2311cf08fc3ed31ab0e452a27e
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:22 2006 -0500

    [SCSI] iscsi bugfixes: fix abort handling
    
    Abort handler fixes.
    
    If a connection is dropped and reconnected while an abort is
    running then we should assume the recovery code will clean up
    the abort. Not doing so causes a oops.
    
    And if a command completes then we get the status for the abort, we do not
    need to call into the LLD to cleanup the resources. Doing this causes
    and oops in iser because it ends up freeing some resources twice.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 275fd7d129fdd16d1dc0ec6a8d60bd6b72a76e31
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:17 2006 -0500

    [SCSI] iscsi bugfixes: handle data rsp errors
    
    if iscsi_data_rsp fails we must bail out. Since the pdu values like
    data length are invalid we cannot continue to process the data since
    it could over run buffers.
    
    This fixes a bug with cisco 5428s where that target is sending
    too much data.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b6c395ed0387c824ddf125d3b74b576a2575c149
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:15 2006 -0500

    [SCSI] iscsi bugfixes: fix r2t handling
    
    The iscsi tcp code can pluck multiple rt2s from the tasks's r2tqueue
    in the xmit code. This can result in the task being queued on the xmit queue
    but gettting completed at the same time.
    
    This patch fixes the above bug by making the fifo a list so
    we always remove the entry on the list del.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d82967c70658a408ea6cae5dc989ba8b2c0999e1
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Mon Jul 24 15:47:11 2006 -0500

    [SCSI] iscsi bugfixes: send correct error values to userspace
    
    In the xmit patch we are sending a -EXXX value to iscsi_conn_failure
    which is causing userspace to get confused.
    
    We should be sending a ISCSI_ERR_* value that userspace understands.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d4fbd3f978ba49498dc7c6430368c4ff86a09fc
Author: HighPoint Linux Team <linux@highpoint-tech.com>
Date:   Mon Jul 24 15:48:54 2006 +0800

    [SCSI] hptiop: wrong register used in hptiop_reset_hba()
    
    IOP reset message should be posted to inbound message register
    instead of outbound message register.
    
    Signed-off-by: HighPoint Linux Team <linux@highpoint-tech.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b2b3c121076961333977f485f0d54c22121df920
Author: Grant Grundler <grundler@parisc-linux.org>
Date:   Mon Jul 17 07:22:45 2006 -0600

    [SCSI] sym2: claim only "Storage" class
    
    The follow patch fixes a problem for Matt Taggart.
    The Compaq system he had (dl380?) has a SmartArray device that exposes
    the 53c1510 device in both RAID and "normal" modes. The difference
    is in RAID mode, the smart array driver (IIRC) should claim the
    device instead of sym2 driver. Patch below prevents sym2 from
    claiming the device when the RAID "daughter board" is attached.
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8bcb2839b74d605f5549962a6e69dc07768e95b6
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Fri Jul 28 08:46:05 2006 -0500

    JFS: Fix bug in quota code.  tmp_bh.b_size must be initialized
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 93853fd0d492524e9172297d8e8b8364dc2c4c59
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Jul 28 01:09:40 2006 -0700

    [SUNLANCE]: fix compilation on sparc-UP
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 41ff715abc49324fb2cb20e66bc4e0290cfdbe51
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jul 28 17:05:51 2006 +1000

    [XFS] Ensure bulkstat from an invalid inode number gets caught always with
    EINVAL.
    
    SGI-PV: 953819
    SGI-Modid: xfs-linux-melb:xfs-kern:26629a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b2ea401bac39e75ebb64038609ed22efbc799905
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jul 28 17:05:13 2006 +1000

    [XFS] Fix a barrier related forced shutdown on mounts with quota enabled.
    
    SGI-PV: 912426
    SGI-Modid: xfs-linux-melb:xfs-kern:26622a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f5faad799475c4058416264f672bb33bf8b5ef41
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jul 28 17:04:44 2006 +1000

    [XFS] Fix remount vs no/barrier options by ensuring we clear unwanted
    flags from iclog buffers before submitting them for writing.
    
    SGI-PV: 954772
    SGI-Modid: xfs-linux-melb:xfs-kern:26605a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 2a293b7d5aa2f0d1e3d87b642f7ac263c2d664e3
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jul 28 17:04:26 2006 +1000

    [XFS] All xfs_disk_dquot_t values are (as the name says) disk endian.
    Before putting them into struct statfs they should be endian-swapped.
    
    SGI-PV: 954580
    SGI-Modid: xfs-linux-melb:xfs-kern:26550a
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit a75ad3c27a6ad78c4306cac939938050dcde54f3
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Jul 28 09:04:09 2006 +0200

    [PATCH] scsi: kill overeager "not-ready" messages
    
    HAL and friends have a tendency to trigger this one all the time.
    It's not really interesting, so kill it. The vendor kernels all do
    anyways.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 71ef51cc1756d1c56b57c70e7cc27a3559c81ee6
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Jul 28 09:02:17 2006 +0200

    [PATCH] it821x: fix ide dma setup bug
    
    Only enable dma for a valid speed setting.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 0a8348d08677ad77ee353f96eb8745c693a05a13
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Jul 28 08:58:26 2006 +0200

    [PATCH] ide: if the id fields looks screwy, disable DMA
    
    It's the safer choice. Originally due to a bug in itx821x, but a
    generally sound thing to do.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 361934849e9c0418950bedf667732f36337d88b9
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Jul 28 08:54:59 2006 +0200

    [PATCH] ide: option to disable cache flushes for buggy drives
    
    Some drives claim they support cache flushing, but get seriously
    confused if you try. Add this option to be able to boot with
    barriers enabled by default.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 96ba989d22de779ca19ca214e2b2e53a4ca86b7b
Author: Bob Breuer <breuerr@mc.net>
Date:   Thu Jul 27 22:08:01 2006 -0700

    [SPARC]: Defer clock_probe to fs_initcall()
    
    From: Bob Breuer <breuerr@mc.net>
    
    That way all the of_driver bits will be ready.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b8cfac4c2f3d12d0f4cbe6f992d945f2fdfc098d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jul 27 17:57:32 2006 -0700

    [SPARC64]: Fix typo in pgprot_noncached().
    
    The sun4v code sequence was or'ing in the sun4u pte bits by mistake.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c962b5a42e5fc24e2d5d73896732cf3578da260
Author: Danny van Dyk <kugelfang@gentoo.org>
Date:   Tue Jul 11 22:25:28 2006 +0100

    [POWERPC] PMAC_APM_EMU should depend on ADB_PMU
    
    This patch fixes undefined refereneces to pmu_ symbols on 2.6.17.
    
    Signed-Off-By: Danny van Dyk <kugelfang@gentoo.org>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 96278d21000568a9261f016e8b2569a95a2d4c9e
Author: Segher Boessenkool <segher@kernel.crashing.org>
Date:   Sat Jul 8 02:37:20 2006 +0200

    [POWERPC] Fix new interrupt code (MPIC detection)
    
    As the code comment already says, the Maple device-tree is incorrect here;
    make the Linux code detect the correct thing, too.
    
    Signed-off-by: Segher Boessenkool <segher@kernel.crashing.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d319a03bf87209b3914fdf2ede88a2161123b3eb
Author: Segher Boessenkool <segher@kernel.crashing.org>
Date:   Sat Jul 8 02:37:23 2006 +0200

    [POWERPC] Fix new interrupt code (MPIC endianness)
    
    All U3/U4 based systems are big-endian, not all express it in their
    device trees.
    
    Signed-off-by: Segher Boessenkool <segher@kernel.crashing.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e272a2853459b1e7282a7d0b54114ffaa7b3980f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 16:44:54 2006 +1000

    [POWERPC] Add cpufreq support for Xserve G5
    
    The Xserve G5 are capable of frequency switching like other desktop G5s.
    This enables it. It also fix a Kconfig issue which prevented from
    building the G5 cpufreq support if CONFIG_PMAC_SMU was not set (the
    first version of that driver only worked with SMU based macs, but this
    isn't the case anymore).
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8279d2e6062673f31c59ad9e2104024123154267
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jul 6 18:03:06 2006 +1000

    [POWERPC] Xserve G5 thermal control fixes
    
    The thermal control for the Xserve G5s had a few issues. For one, the
    way to program the RPM fans speeds into the FCU is different between it
    and the desktop models, which I didn't figure out until recently, and it
    was missing a control loop for the slots fan, running it too fast.  Both
    of those problems were causing the machine to be much more noisy than
    necessary.  This patch also changes the fixed value of the slots fan for
    desktop G5s to 40% instead of 50%.  It seems to still have a pretty good
    airflow that way and is much less noisy.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 92f282988b4ce3967ee8399f7d1184ebfa04e48b
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jul 27 16:49:21 2006 -0700

    [SPARC64]: Fix quad-float multiply emulation.
    
    Something is wrong with the 3-multiply (vs. 4-multiply) optimized
    version of _FP_MUL_MEAT_2_*(), so just use the slower version
    which actually computes correct values.
    
    Noticed by Rene Rebe
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ca0084fa90533687b6317e6d084141da87c74d5c
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Jul 14 18:51:41 2006 -0400

    [PATCH] ieee80211: TKIP requires CRC32
    
    ieee80211_crypt_tkip will not work without CRC32.
    
      LD      .tmp_vmlinux1
    net/built-in.o: In function `ieee80211_tkip_encrypt':
    net/ieee80211/ieee80211_crypt_tkip.c:349: undefined reference to `crc32_le'
    
    Reported by Toralf Foerster <toralf.foerster@gmx.de>
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit fe397d469fa3fbc678383ffbd0630e4849cca688
Author: Dan Williams <dcbw@redhat.com>
Date:   Fri Jul 14 11:41:47 2006 -0400

    [PATCH] orinoco: fix setting transmit key only
    
    When determining whether there's a key to set or not, orinoco should be
    looking at the key length, not the key data.  Otherwise confusion reigns
    when trying to set TX key only, passing in zero-length key, but non-NULL
    pointer.  Key length takes precedence over non-NULL key data.
    
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 345f6b8beb20338a2d792bf5974d01d457abee53
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue Jul 11 23:16:34 2006 +0100

    [PATCH] softmac: do shared key auth in workqueue
    
    Johann Uhrmann reported a bcm43xx crash and Michael Buesch tracked
    it down to a problem with the new shared key auth code (recursive
    calls into the driver)
    
    This patch (effectively Michael's patch with a couple of small
    modifications) solves the problem by sending the authentication
    challenge response frame from a workqueue entry.
    
    I also removed a lone \n from the bcm43xx messages relating to
    authentication mode - this small change was previously discussed but
    not patched in.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 8fa9ea18e831417159b7b1a76a944f117252f9ec
Author: Robert Schulze <rob@net-pr.de>
Date:   Wed Jul 5 22:52:43 2006 +0200

    [PATCH] airo: should select crypto_aes
    
    The driver airo (for Cisco Wlan-Cards) complains about "failed to load
    transform for AES", when it is loaded and CRYPTO_AES is not selected
    in Kconfig.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d91928e906e2866563a69506bb77ffebcf50613c
Author: Pavel Machek <pavel@suse.cz>
Date:   Thu Jul 27 14:32:40 2006 -0400

    [PATCH] zd1201: workaround interference problem
    
    zd1201 has nasty tendency to emit magicall anti-wifi cloud when it is
    inserted into slot, but not used.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 468310a8a7af4f3933ade2700f01d493fa1a9754
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Jul 27 14:04:57 2006 +0200

    [S390] update default configuration
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 17088229846c078aa936ca64912ab221d083aca1
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Thu Jul 27 14:00:33 2006 +0200

    [S390] duplicate ccw devices in ccwgroup.
    
    Fail to create a ccwgroup device if a ccw device is passed in twice.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit ba4ba8a69dcb446450b5ddeca48a7bd15783f4c2
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Thu Jul 27 14:00:23 2006 +0200

    [S390] permanent subchannel busy conditions may cause I/O stall
    
    In special conditions where a subchannel rejects the HALT I/O-
    instruction with a busy indication (cc 2), I/O may stall.
    I/O request termination logic retries HALT I/O indefinitely
    because it expects HALT I/O to alter the subchannel status which
    is not true when cc 2 is returned.
    In case of a busy indication, try CLEAR I/O instruction immediately.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 5b9c9bf6c92274a6eb74fc8f86586ab592a7a1ec
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jul 26 13:59:00 2006 -0400

    ACPI: add Dock Station driver to MAINTAINERS file
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit dffb0605e6f34c138ae5662d957fe6634dd4d71e
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jul 26 21:07:04 2006 +0100

    [ARM] 3733/2: S3C24XX: Remove old IDE registers in Anubis
    
    Patch from Ben Dooks
    
    Remove unused IDE static mapping, now being ioremap()d
    by the simtec IDE driver.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 115ff50bade0f93a288677745a5884def6cbf9b1
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Wed Jul 26 14:52:13 2006 -0500

    JFS: Quota support broken, no quota_read and quota_write
    
    jfs_quota_read/write are very near duplicates of ext2_quota_read/write.
    
    Cleaned up jfs_get_block as long as I had to change it to be non-static.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit 705630dbddf743e600d654f5dc721d899db91594
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jul 26 20:16:39 2006 +0100

    [ARM] 3732/1: S3C24XX: tidy syntax in osiris and anubis machines
    
    Patch from Ben Dooks
    
    Tidy the syntax, such as missing ,'s on the end of
    struct entries, in the Osiris and Anubis machines.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 34d926266500919a43520d3d52a4f7020b9f0687
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jul 26 18:57:40 2006 +0100

    [ARM] Fix SMP booting
    
    Processor support files now use r6 in their CPU setup code, so
    we can't rely on r6 being preserved.  Use r7 instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 64821324ca49f24be1a66f2f432108f96a24e596
Author: Christoph Hellwig <hch@lst.de>
Date:   Wed Jul 26 09:53:23 2006 +0200

    [PATCH] fix compile regression for a few scsi drivers
    
    This fixes three drivers to compile again after my patch that removes
    the data_cmnd member from struct scsi_cmnd.
    
    The fas216 change is trivial, it should have been using ->cmnd all the
    time.
    
    NCR53C9 (which seem to be mostly duplicate driver with esp.c!) is doing
    something odd, it should only have looked at ->cmnd before not the saved
    copy that is kept for the error handlers sake.  Note that it really
    should deal with the sync setting themselves but use the generic domain
    validation code that get this right - but that's for later let's push
    this simple compile fix for now.
    
    And sorry for the late fix for this, I have been busy with OLS and
    associated activities last week.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dab5025ca2f704ea6629121446d62e3043b210e9
Merge: 761a126... 6bc063d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 26 07:22:36 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SCSI] esp: Fix build.
      [SPARC]: Fix SA_STATIC_ALLOC value.
      [SPARC64]: Explicitly print return PC when the kernel fault PC is bogus.

commit 761a126017e3f001d3f5a574787aa232a9cd5bb5
Merge: 153d7f3... f59fc7f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 26 07:22:10 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPV4/IPV6]: Setting 0 for unused port field in RAW IP recvmsg().
      [IPV4] ipmr: ip multicast route bug fix.
      [TG3]: Update version and reldate
      [TG3]: Handle tg3_init_rings() failures
      [TG3]: Add tg3_restart_hw()
      [IPV4]: Clear the whole IPCB, this clears also IPCB(skb)->flags.
      [IPV6]: Clean skb cb on IPv6 input.
      [NETFILTER]: Demote xt_sctp to EXPERIMENTAL
      [NETFILTER]: bridge netfilter: add deferred output hooks to feature-removal-schedule
      [NETFILTER]: xt_pkttype: fix mismatches on locally generated packets
      [NETFILTER]: SNMP NAT: fix byteorder confusion
      [NETFILTER]: conntrack: fix SYSCTL=n compile
      [NETFILTER]: nf_queue: handle NF_STOP and unknown verdicts in nf_reinject
      [NETFILTER]: H.323 helper: fix possible NULL-ptr dereference

commit 153d7f3fcae7ed4e19328549aa9467acdfbced10
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Wed Jul 26 15:40:07 2006 +0200

    [PATCH] Reorganize the cpufreq cpu hotplug locking to not be totally bizare
    
    The patch below moves the cpu hotplugging higher up in the cpufreq
    layering; this is needed to avoid recursive taking of the cpu hotplug
    lock and to otherwise detangle the mess.
    
    The new rules are:
    1. you must do lock_cpu_hotplug() around the following functions:
       __cpufreq_driver_target
       __cpufreq_governor (for CPUFREQ_GOV_LIMITS operation only)
       __cpufreq_set_policy
    2. governer methods (.governer) must NOT take the lock_cpu_hotplug()
       lock in any way; they are called with the lock taken already
    3. if your governer spawns a thread that does things, like calling
       __cpufreq_driver_target, your thread must honor rule #1.
    4. the policy lock and other cpufreq internal locks nest within
       the lock_cpu_hotplug() lock.
    
    I'm not entirely happy about how the __cpufreq_governor rule ended up
    (conditional locking rule depending on the argument) but basically all
    callers pass this as a constant so it's not too horrible.
    
    The patch also removes the cpufreq_governor() function since during the
    locking audit it turned out to be entirely unused (so no need to fix it)
    
    The patch works on my testbox, but it could use more testing
    (otoh... it can't be much worse than the current code)
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16a74744231e57e354253567490ab9e4ccd2d605
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Wed Apr 5 08:47:00 2006 -0400

    PCI: quirk to disable e100 interrupt if RESET failed to
    
    Without this quirk, e100 can be pulling on a shared
    interrupt line when another device (eg. USB) loads,
    causing the interrupt to scream and get disabled.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5918
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f59fc7f30b710d45aadf715460b3e60dbe9d3418
Author: Tetsuo Handa <from-linux-kernel@i-love.sakura.ne.jp>
Date:   Tue Jul 25 17:05:35 2006 -0700

    [IPV4/IPV6]: Setting 0 for unused port field in RAW IP recvmsg().
    
    From: Tetsuo Handa from-linux-kernel@i-love.sakura.ne.jp
    
    The recvmsg() for raw socket seems to return random u16 value
    from the kernel stack memory since port field is not initialized.
    But I'm not sure this patch is correct.
    Does raw socket return any information stored in port field?
    
    [ BSD defines RAW IP recvmsg to return a sin_port value of zero.
      This is described in Steven's TCP/IP Illustrated Volume 2 on
      page 1055, which is discussing the BSD rip_input() implementation. ]
    
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 722874909271a807b243a797c2958e0a12992964
Author: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
Date:   Tue Jul 25 16:45:12 2006 -0700

    [IPV4] ipmr: ip multicast route bug fix.
    
    IP multicast route code was reusing an skb which causes use after free
    and double free.
    
    From: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    
    Note, it is real skb_clone(), not alloc_skb(). Equeued skb contains
    the whole half-prepared netlink message plus room for the rest.
    It could be also skb_copy(), if we want to be puristic about mangling
    cloned data, but original copy is really not going to be used.
    
    Acked-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b6e77a5346d8a739227ed73c2269966a4fd652b4
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Jul 25 16:39:12 2006 -0700

    [TG3]: Update version and reldate
    
    Update version to 3.63.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 32d8c5724b7b05c7d8f7386c49432104cc222e32
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Jul 25 16:38:29 2006 -0700

    [TG3]: Handle tg3_init_rings() failures
    
    Handle dev_alloc_skb() failures when initializing the RX rings.
    Without proper handling, the driver will crash when using a partial
    ring.
    
    Thanks to Stephane Doyon <sdoyon@max-t.com> for reporting the bug and
    providing the initial patch.
    
    Howie Xu <howie@vmware.com> also reported the same issue.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b9ec6c1b917e2e43a058a78198d54aeca3d71c6f
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Jul 25 16:37:27 2006 -0700

    [TG3]: Add tg3_restart_hw()
    
    Add tg3_restart_hw() to handle failures when re-initializing the
    device.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9805cb76f7bcd3108e012270d9ef2fd8ea3bea55
Author: Len Brown <len.brown@intel.com>
Date:   Tue Jul 25 13:30:57 2006 -0400

    ACPI: restore some dmesg to DEBUG-only, ala 2.6.17
    
    The ACPI_EXCEPTION() patch enabled a bunch of messages to print
    even in the non-DEBUG kernel.  Need to change a couple back,
    and note that ACPI_EXCEPTION takes no \n, but ACPI_DEBUG_PRINT does.
    
    No context for object [%p]\n
    Device `[%s]' is not power manageable\n
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 30f30e13055d1e018c70d2b1b3ff86f8c25c511b
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Jul 4 17:13:23 2006 +1000

    [POWERPC] Fix mem= handling when the memory limit is > RMO size
    
    There's a bug in my cleaned up mem= handling, if the memory limit is
    larger than the RMO size we'll erroneously enlarge the RMO size.
    
    Fix is to only change the RMO size if the memory limit is less than
    the current RMO value.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 98c82472e98469ef23d7c680a0d6be1429540166
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 17:07:18 2006 +1000

    [POWERPC] More offb/bootx fixes
    
    There were still some issues with offb when BootX doesn't provide a
    proper display node, this fixes them.  This also re-instates the
    palette hacks that were disabled a couple of kernel versions ago when
    I converted to the new OF parsing, and shuffles some functions around
    to avoid prototypes.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 45507ff3a2c58bc4781688eac1a80979ea972dce
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 14:14:07 2006 +1000

    [POWERPC] Fix legacy_serial.c error handling on 32 bits
    
    The code in legacy_serial.c wouldn't properly compare OF translation
    results against OF_BAD_ADDR as it's using a phys_addr_t which is 32
    bits on some 32-bit powerpc platforms. This fixes it by always using
    a u64 which is what is returned by the OF parsing routines. It also
    makes translation failure harmless for ISA serial ports.  If they
    can't translate, we can't use the UART early, but we can still let the
    8250 driver use it later on by using IO port accessors.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 171505dafef56e4c84c48399b36604f4be55cf36
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 14:11:23 2006 +1000

    [POWERPC] Fix default clock for udbg_16550
    
    This patch makes it possible to provide 0 as the clock value for
    udbg_16550, making it default to the standard 1.8432Mhz clock
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8cffc6ac66a2b251df2490702923611aa4ac1fc5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 14:09:36 2006 +1000

    [POWERPC] Fix non-MPIC CHRPs with CONFIG_SMP set
    
    Pseudo-CHRP machines like Pegasos without an MPIC would crash at boot if
    CONFIG_SMP was set because the "smp_ops" pointer was set to MPIC related
    ops unconditionally. This patch makes it NULL on machines that don't
    support SMP and provides proper default behaviour in the callers when
    smp_ops is NULL.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 21bd2e6696bb5c8b32b00a0ea597f49bfda0ddc6
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 14:07:42 2006 +1000

    [POWERPC] Fix 32 bits warning in prom_init.c
    
    A warning is hurting my eyes when building 32 bits kernels
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f0ca330bc4ce00377f940b786d7ec7d848dc4102
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 14:06:29 2006 +1000

    [POWERPC] Workaround Pegasos incorrect ISA "ranges"
    
    The Pegasos firmware doesn't create a valid "ranges" property for the
    ISA bridge, thus causing translation of ISA addresses and IO ports to
    fail. This fixes it, thus re-enabling proper early serial console to
    work on Pegasos.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d1a8df9136ff55e554e11ce65854c282965be8f5
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Jul 3 14:28:14 2006 +0200

    [POWERPC] fix up front-LED Kconfig
    
    This patch fixes the front-LED Kconfig issues I introduced while
    creating it. Apparently having a dependency isn't enough to have the
    select not evaluated or something like that.
    
    The patch also changes the default configuration for pmac32 select the
    default for the LED to be the IDE trigger. While I was at it, I
    completely updated the defconfig and also added snd-aoa to it.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 44eb123126d289bac398cac0232309c228386671
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jul 25 15:05:21 2006 +0200

    [PATCH] cfq-iosched: don't use a hard jiffies value, translate from msecs
    
    The CIC_SEEKY() test really wants to use the minimum of either:
    
    - 2 msecs (not jiffies)
    
    - or, the pending slice time
    
    So code it like that.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit ad01b1ca797e5898cd40bb32cf0dc8c85aa9f7e8
Author: Milton Miller <miltonm@bga.com>
Date:   Tue Jul 25 15:04:13 2006 +0200

    [PATCH] blktrace: fix read-ahead bit
    
    It should be toggling the same bit on and off, fix it up.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 7b30f09245d0e6868819b946b2f6879e5d3d106b
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jul 25 15:02:48 2006 +0200

    [PATCH] cciss: fix stall with softirq handling and CFQ
    
    We need to postpone the queue startup until after the softirq
    handler has actually finished some requests, otherwise we could
    be racing with cciss_softirq_done() and not actually restart
    the queue handling.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit d569f1d72f068992d07ab17f7ff9aea7f0d97cdb
Author: Guillaume Chazarain <guichaz@yahoo.fr>
Date:   Mon Jul 24 23:45:16 2006 -0700

    [IPV4]: Clear the whole IPCB, this clears also IPCB(skb)->flags.
    
    Signed-off-by: Guillaume Chazarain <guichaz@yahoo.fr>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b7fdc3ae18a0598a999156b62d55ea55220e00f
Author: Guillaume Chazarain <guichaz@yahoo.fr>
Date:   Mon Jul 24 23:44:44 2006 -0700

    [IPV6]: Clean skb cb on IPv6 input.
    
    Clear the accumulated junk in IP6CB when starting to handle an IPV6
    packet.
    
    Signed-off-by: Guillaume Chazarain <guichaz@yahoo.fr>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5af981e93aff0de5ad2a1a9935a3f6aa5cd3e3c
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 24 22:55:29 2006 -0700

    [NETFILTER]: Demote xt_sctp to EXPERIMENTAL
    
    After the recent problems with all the SCTP stuff it seems reasonable
    to mark this as experimental.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 10ea6ac895418bd0d23900e3330daa6ba0836d26
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 24 22:54:55 2006 -0700

    [NETFILTER]: bridge netfilter: add deferred output hooks to feature-removal-schedule
    
    Add bridge netfilter deferred output hooks to feature-removal-schedule
    and disable them by default. Until their removal they will be
    activated by the physdev match when needed.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 28658c8967da9083be83af0a37be3b190bae79da
Author: Phil Oester <kernel@linuxace.com>
Date:   Mon Jul 24 22:54:14 2006 -0700

    [NETFILTER]: xt_pkttype: fix mismatches on locally generated packets
    
    Locally generated broadcast and multicast packets have pkttype set to
    PACKET_LOOPBACK instead of PACKET_BROADCAST or PACKET_MULTICAST. This
    causes the pkttype match to fail to match packets of either type.
    
    The below patch remedies this by using the daddr as a hint as to
    broadcast|multicast. While not pretty, this seems like the only way
    to solve the problem short of just noting this as a limitation of the
    match.
    
    This resolves netfilter bugzilla #484
    
    Signed-off-by: Phil Oester <kernel@linuxace.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cf8fb5687bb37737ea419a0b2143aab49295779
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 24 22:53:35 2006 -0700

    [NETFILTER]: SNMP NAT: fix byteorder confusion
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 72b558235950538da8bf5a8de746a194831c6fe6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 24 22:53:12 2006 -0700

    [NETFILTER]: conntrack: fix SYSCTL=n compile
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3bc38712e3a6e0596ccb6f8299043a826f983701
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 24 22:52:47 2006 -0700

    [NETFILTER]: nf_queue: handle NF_STOP and unknown verdicts in nf_reinject
    
    In case of an unknown verdict or NF_STOP the packet leaks. Unknown verdicts
    can happen when userspace is buggy. Reinject the packet in case of NF_STOP,
    drop on unknown verdicts.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 083edca05ab1fa6efac1ba414018f7f45a4a83ff
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jul 24 22:52:10 2006 -0700

    [NETFILTER]: H.323 helper: fix possible NULL-ptr dereference
    
    An RCF message containing a timeout results in a NULL-ptr dereference if
    no RRQ has been seen before.
    
    Noticed by the "SATURN tool", reported by Thomas Dillig <tdillig@stanford.edu>
    and Isil Dillig <isil@stanford.edu>.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6bc063d414a815937fc81449fa9ffe8d3a4cdf22
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 24 22:47:14 2006 -0700

    [SCSI] esp: Fix build.
    
    The data_cmd[] member got deleted, so do not use it any more.  Scsi
    commands do not have their ->cmd[] overwritten temporary to probe for
    status after an error before retrying.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29ed46015dd61f99d203ec7ab307ccf92d2d0cf2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Jul 22 02:05:07 2006 -0700

    [SPARC]: Fix SA_STATIC_ALLOC value.
    
    It alises IRQF_SHARED which causes all kinds of
    problems.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit eb398d1044e0c1c19c2f5041acdb29ddb5bbc9f8
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Jul 22 01:12:09 2006 -0700

    [SPARC64]: Explicitly print return PC when the kernel fault PC is bogus.
    
    That way we'll have at least some debugging info even if
    the stack dump explodes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b4e54de8d34afe7fcf08bfe91070d9dfeae6ed27
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 24 15:31:14 2006 -0700

    [NET]: Correct dev_alloc_skb kerneldoc
    
    dev_alloc_skb is designated for RX descriptors, not TX.  (Some drivers
    use it for the latter anyway, but that's a different story)
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37182d1bd3264cf9c0dce3408bee48af0755de7e
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 24 15:30:28 2006 -0700

    [NET]: Remove CONFIG_HAVE_ARCH_DEV_ALLOC_SKB
    
    skbuff.h has an #ifndef CONFIG_HAVE_ARCH_DEV_ALLOC_SKB to allow
    architectures to reimplement __dev_alloc_skb.  It's not set on any
    architecture and now that we have an architecture-overrideable
    NET_SKB_PAD there is not point at all to have one either.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c753c3d3be0f8d1b570ec5720ad1bb4caf8232b
Author: Stefan Rompf <stefan@loplof.de>
Date:   Mon Jul 24 13:52:13 2006 -0700

    [VLAN]: Fix link state propagation
    
    When the queue of the underlying device is stopped at initialization time
    or the device is marked "not present", the state will be propagated to the
    vlan device and never change. Based on an analysis by Patrick McHardy.
    
    Signed-off-by: Stefan Rompf <stefan@loplof.de>
    ACKed-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a922ba5510530ae8e3c60edc85c56f72347a3c86
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 24 13:49:06 2006 -0700

    [IPV6] xfrm6_tunnel: Delete debugging code.
    
    It doesn't compile, and it's dubious in several regards:
    
    1) is enabled by non-Kconfig controlled CONFIG_* value
       (noted by Randy Dunlap)
    2) XFRM6_TUNNEL_SPI_MAGIC is defined after it's first use
    3) the debugging messages print object pointer addresses
       which have no meaning without context
    
    So let's just get rid of it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8ca3d11c6611685ea7783b4acb623bf08496f94
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Mon Jul 24 21:30:01 2006 +0100

    [ARM] 3731/1: Allow IRQ definitions of IQ80331 and IQ80332 to co-exist
    
    Patch from Martin Michlmayr
    
    ARCH_IQ80331 and MACH_IQ80332 can be enabled at the same time but a
    header file makes certain IRQ definitions conditional, leading to
    the following compilation error when both platforms are enabled:
    
    arch/arm/mach-iop3xx/iq80332-pci.c: In function 'iq80332_map_irq':
    arch/arm/mach-iop3xx/iq80332-pci.c:54: error: 'IRQ_IQ80332_INTA' undeclared (first use in this function)
    arch/arm/mach-iop3xx/iq80332-pci.c:54: error: (Each undeclared identifier is reported only once
    arch/arm/mach-iop3xx/iq80332-pci.c:54: error: for each function it appears in.)
    arch/arm/mach-iop3xx/iq80332-pci.c:54: error: 'IRQ_IQ80332_INTB' undeclared (first use in this function)
    arch/arm/mach-iop3xx/iq80332-pci.c:54: error: 'IRQ_IQ80332_INTC' undeclared (first use in this function)
    arch/arm/mach-iop3xx/iq80332-pci.c:54: error: 'IRQ_IQ80332_INTD' undeclared (first use in this function)
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e9e9290f5c85887baf1123a36ec9fdf56a10cf4b
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Jul 18 18:32:33 2006 +0200

    [Bluetooth] Enable SCO support for Broadcom HID proxy dongle
    
    The Broadcom dongles with HID proxy support actually support SCO over
    HCI if the SCO buffer size values are corrected. So instead of disabling
    the SCO support, mark this dongle with the quirk for the Bluetooth core
    to correct the wrong buffer size values.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 8e4f7230a3bd015862f3af58dc563dbc1cdebfe2
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Jul 18 18:04:59 2006 +0200

    [Bluetooth] Add quirk for another broken RTX Telecom based dongle
    
    This patch disables the ISOC transfers for another broken RTX Telecom
    based USB dongle. Starting the USB ISOC transfers only ends in a burst
    of error messages for invalid SCO packets on connection handle 0.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit ea9727f6e55dabc7a58cf56c87e65665e239e171
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Tue Jul 18 17:47:40 2006 +0200

    [Bluetooth] Correct SCO buffer size for Belkin devices
    
    The Belkin F8T012 and F8T013 devices are both based on a Bluetooth chip
    from Broadcom and their SCO buffer size values are wrong. The Bluetooth
    core should correct these values.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 520ca78acc652c89c92e8bf29536319afa9d88bb
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Fri Jul 14 16:01:52 2006 +0200

    [Bluetooth] Correct SCO buffer size for another Broadcom chip
    
    The SCO buffer size values on IBM/Lenovo ThinkPad laptops with a
    Bluetooth chip from Broadcom are wrong. The USB Bluetooth driver
    has to set a quirk to correct the SCO buffer size values.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 98bcd08b5bfe78c1c9bda5768aa081e0fe4fcc4f
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Fri Jul 14 11:42:12 2006 +0200

    [Bluetooth] Correct RFCOMM channel MTU for broken implementations
    
    Some Bluetooth RFCOMM implementations try to negotiate a bigger channel
    MTU than we can support for a particular session. The maximum MTU for
    a RFCOMM session is limited through the L2CAP layer. So if the other
    side proposes a channel MTU that is bigger than the underlying L2CAP
    MTU, we should reduce it to the L2CAP MTU of the session minus five
    bytes for the RFCOMM headers.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 2266d8886f64c66e0a4e61e3e1c19dbc27ed00d4
Author: Guillaume Chazarain <guichaz@yahoo.fr>
Date:   Sun Jul 23 23:37:24 2006 -0700

    [PKT_SCHED]: Fix regression in PSCHED_TADD{,2}.
    
    In PSCHED_TADD and PSCHED_TADD2, if delta is less than tv.tv_usec (so,
    less than USEC_PER_SEC too) then tv_res will be smaller than tv. The
    affectation "(tv_res).tv_usec = __delta;" is wrong.  The fix is to
    revert to the original code before
    4ee303dfeac6451b402e3d8512723d3a0f861857 and change the 'if' in
    'while'.
    
    [Shuya MAEDA: "while (__delta >= USEC_PER_SEC){ ... }" instead of
    "while (__delta > USEC_PER_SEC){ ... }"]
    
    Signed-off-by: Guillaume Chazarain <guichaz@yahoo.fr>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b79f0af48d529a360d3529def01835dc5d45fe1
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Sun Jul 23 23:33:28 2006 -0700

    [DCCP]: Fix default sequence window size
    
    When using the default sequence window size (100) I got the following in
    my logs:
    
    Jun 22 14:24:09 localhost kernel: [ 1492.114775] DCCP: Step 6 failed for
    DATA packet, (LSWL(6279674225) <= P.seqno(6279674749) <=
    S.SWH(6279674324)) and (P.ackno doesn't exist or LAWL(18798206530) <=
    P.ackno(1125899906842620) <= S.AWH(18798206548), sending SYNC...
    Jun 22 14:24:09 localhost kernel: [ 1492.115147] DCCP: Step 6 failed for
    DATA packet, (LSWL(6279674225) <= P.seqno(6279674750) <=
    S.SWH(6279674324)) and (P.ackno doesn't exist or LAWL(18798206530) <=
    P.ackno(1125899906842620) <= S.AWH(18798206549), sending SYNC...
    
    I went to alter the default sysctl and it didn't take for new sockets.
    Below patch fixes this.
    
    I think the default is too low but it is what the DCCP spec specifies.
    
    As a side effect of this my rx speed using iperf goes from about 2.8 Mbits/sec
    to 3.5. This is still far too slow but it is a step in the right direction.
    
    Compile tested only for IPv6 but not particularly complex change.
    
    Signed off by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8fdf679fdb00f588b65abb9c775c178098a05aeb
Author: Roland Dreier <rolandd@cisco.com>
Date:   Mon Jul 24 09:36:50 2006 -0700

    IB/mthca: Initialize max_cmds before debug code prints it
    
    Read the max_cmds value from the response to the QUERY_FW command
    before printing out the value, so that the real value goes into the
    debug output.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 8a7f752125a930a83f4d8dfe37fa5a081ab19d31
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Wed Jul 19 17:44:37 2006 +0300

    IB/ipoib: Fix packet loss after hardware address update
    
    The neighbour ha field may get updated without destroying the
    neighbour.  In this case, the ha field gets out of sync with the
    address handle stored in ipoib_neigh->ah, with the result that
    the ah field would point to an incorrect path, resulting in all
    packets being lost.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 624d01f899f6bbd75fd06890f231e1f46555d376
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Mon Jul 24 10:42:00 2006 +0300

    IB/ipoib: Fix oops with ipoib_debug_mcast set
    
    Need to set mcast->ah before debug code dereferences it.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 2527e681fd4fd4231c2e04f09d7b04d3cab8eefe
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu Jul 20 11:25:50 2006 +0300

    IB/mad: Validate MADs for spec compliance
    
    Validate MADs sent by userspace clients for spec compliance with
    C13-18.1.1 (prevent duplicate requests and responses sent on the
    same port).  Without this, RMPP transactions get aborted because
    of duplicate packets.
    
    This patch is similar to that provided by Jack Morgenstein.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 16c59419a09f0140a07a1828d6a45656265e07c7
Author: Ralph Campbell <ralphc@pathscale.com>
Date:   Mon Jul 17 18:21:24 2006 -0700

    IB/ipath: ipath_skip_sge() can break if num_sge > 1
    
    ipath_skip_sge() doesn't exactly duplicate the side effects of
    ipath_copy_sge() if num_sge > 1 since it doesn't decrement ss->num_sge.
    This could result in the sg_list being accessed out of bounds.
    Since ipath_skip_sge() is almost always called with num_sge == 1,
    the original "optimization" is almost never used.
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c9f79bdc21da9c8d466b6ba7c8bbd6b8e0110ce2
Author: Ralph Campbell <ralphc@pathscale.com>
Date:   Mon Jul 17 18:19:54 2006 -0700

    IB/ipath: Fix ib_ipath driver to work with SRP
    
    I am still working on a proposal to remove the phys_to_virt() calls
    in the ib_ipath driver.  In the mean time, this patch allows SRP
    to work by fixing the R_Key check and conversion from IB address
    to kernel virtual address.  It also returns the correct page size
    for FMRs.
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 3d37b9e209136cf178562bbedc7cd2ecb1da8beb
Author: Ralph Campbell <ralphc@pathscale.com>
Date:   Mon Jul 17 18:18:36 2006 -0700

    IB/ipath: Fix a data corruption
    
    This patch fixes a problem where certain error packets are passed
    to the InfiniBand layer for processing even though the packet
    actually was received with an error.
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1252c517cf3df240ae51946a096035765dfd2e6d
Author: Dotan Barak <dotanb@mellanox.co.il>
Date:   Thu Jul 13 11:05:49 2006 +0300

    IB/mthca: Fix SRQ limit event range check
    
    Mem-free HCAs always keep one spare SRQ WQE, so the SRQ limit cannot
    be set beyond srq->max - 1.
    
    Signed-off-by: Dotan Barak <dotanb@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit b71426eb10d904d421b36f51f93c8d0ba558edac
Merge: 8419dc8... abb5a5c...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jul 24 03:38:13 2006 -0400

    Merge branch 'master' into upstream-fixes

commit 8419dc8a34d765f2ff1aa4051084d54cfeff09cf
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jul 24 03:37:52 2006 -0400

    [libata] sata_promise: comment out duplicate PCI ID
    
    This is just the for-RC fix.  A 'TODO' command is added, describing
    what's needed for the more-complete fix.

commit 43db2bc04409b1e1b74f9768e3284cec18a87d0b
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sun Jul 23 15:16:04 2006 -0700

    IB/uverbs: Fix lockdep warnings
    
    Lockdep warns because uverbs is trying to take uobj->mutex when it
    already holds that lock.  This is because there are really multiple
    types of uobjs even though all of their locks are initialized in
    common code.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ec924b4726e3df000d3ac7ae10cb8ef1adcd60ca
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Jul 17 18:20:51 2006 +0300

    IB/uverbs: Fix unlocking in error paths
    
    ib_uverbs_create_ah() and ib_uverbs_create_srq() did not release the
    PD's read lock in their error paths, which lead to deadlock when
    destroying the PD.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit abb5a5cc6bba1516403146c5b79036fe843beb70
Author: Paul Jackson <pj@sgi.com>
Date:   Sun Jul 23 11:36:08 2006 -0700

    [PATCH] Cpuset: fix ABBA deadlock with cpu hotplug lock
    
    Fix ABBA deadlock between lock_cpu_hotplug() and the cpuset
    callback_mutex lock.
    
    It only happens on cpu_exclusive cpusets, due to the dynamic
    sched domain code trying to take the cpu hotplug lock inside
    the cpuset callback_mutex lock.
    
    This bug has apparently been here for several months, but didn't
    get hit until the right customer load on a large system.
    
    This fix appears right from inspection, but it will take a few
    more days running it on that customers workload to be confident
    we nailed it.  We don't have any other reproducible test case.
    
    The cpu_hotplug_lock() tends to cover large runs of code.
    The other places that hold both that lock and the cpuset callback
    mutex lock always nest the cpuset lock inside the hotplug lock.
    This place tries to do the reverse, risking an ABBA deadlock.
    
    This is in the cpuset_rmdir() code, where we:
      * take the callback_mutex lock
      * mark the cpuset CS_REMOVED
      * call update_cpu_domains for cpu_exclusive cpusets
      * in that call, take the cpu_hotplug lock if the
        cpuset is marked for removal.
    
    Thanks to Jack Steiner for identifying this deadlock.
    
    The fix is to tear down the dynamic sched domain before we grab
    the cpuset callback_mutex lock.  This way, the two locks are
    serialized, with the hotplug lock taken and released before
    trying for the cpuset lock.
    
    I suspect that this bug was introduced when I changed the
    cpuset locking from one lock to two.  The dynamic sched domain
    dependency on cpu_exclusive cpusets and its hotplug hooks were
    added to this code earlier, when cpusets had only a single lock.
    It may well have been fine then.
    
    Signed-off-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa95387774039096c11803c04011f1aa42d85758
Author: Linus Torvalds <torvalds@macmini.osdl.org>
Date:   Sun Jul 23 12:12:16 2006 -0700

    cpu hotplug: simplify and hopefully fix locking
    
    The CPU hotplug locking was quite messy, with a recursive lock to
    handle the fact that both the actual up/down sequence wanted to
    protect itself from being re-entered, but the callbacks that it
    called also tended to want to protect themselves from CPU events.
    
    This splits the lock into two (one to serialize the whole hotplug
    sequence, the other to protect against the CPU present bitmaps
    changing). The latter still allows recursive usage because some
    subsystems (ondemand policy for cpufreq at least) had already gotten
    too used to the lax locking, but the locking mistakes are hopefully
    now less fundamental, and we now warn about recursive lock usage
    when we see it, in the hope that it can be fixed.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2cd7cbdf4bd0d0fe58e4dc903e8b413412595504
Author: Linus Torvalds <torvalds@macmini.osdl.org>
Date:   Sun Jul 23 12:05:00 2006 -0700

    [cpufreq] ondemand: make shutdown sequence more robust
    
    Shutting down the ondemand policy was fraught with potential
    problems, causing issues for SMP suspend (which wants to hot-
    unplug) all but the last CPU.
    
    This should fix at least the worst problems (divide-by-zero
    and infinite wait for the workqueue to shut down).
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12157a8d78af50842774bedb80b7b84a87f60951
Merge: efab4cb... 9df3f3d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 21 16:44:45 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (21 commits)
      [TIPC]: Removing useless casts
      [IPV4]: Fix nexthop realm dumping for multipath routes
      [DUMMY]: Avoid an oops when dummy_init_one() failed
      [IFB] After ifb_init_one() failed, i is increased. Decrease
      [NET]: Fix reversed error test in netif_tx_trylock
      [MAINTAINERS]: Mark LAPB as Oprhan.
      [NET]: Conversions from kmalloc+memset to k(z|c)alloc.
      [NET]: sun happymeal, little pci cleanup
      [IrDA]: Use alloc_skb() in IrDA TX path
      [I/OAT]: Remove pci_module_init() from Intel I/OAT DMA engine
      [I/OAT]: net/core/user_dma.c should #include <net/netdma.h>
      [SCTP]: ADDIP: Don't use an address as source until it is ASCONF-ACKed
      [SCTP]: Set chunk->data_accepted only if we are going to accept it.
      [SCTP]: Verify all the paths to a peer via heartbeat before using them.
      [SCTP]: Unhash the endpoint in sctp_endpoint_free().
      [SCTP]: Check for NULL arg to sctp_bucket_destroy().
      [PKT_SCHED] netem: Fix slab corruption with netem (2nd try)
      [WAN]: Converted synclink drivers to use netif_carrier_*()
      [WAN]: Cosmetic changes to N2 and C101 drivers
      [WAN]: Added missing netif_dormant_off() to generic HDLC
      ...

commit 9df3f3d28bca0157e2bab2f3171d2ad4f0930634
Author: Panagiotis Issaris <takis@issaris.org>
Date:   Fri Jul 21 15:52:20 2006 -0700

    [TIPC]: Removing useless casts
    
    Removing useless casts
    
    Signed-off-by: Panagiotis Issaris <takis@issaris.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8265abc082d2283b4ef20237efadb71c6f16ed0c
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jul 21 15:09:55 2006 -0700

    [IPV4]: Fix nexthop realm dumping for multipath routes
    
    Routing realms exist per nexthop, but are only returned to userspace
    for the first nexthop. This is due to the fact that iproute2 only
    allows to set the realm for the first nexthop and the kernel refuses
    multipath routes where only a single realm is present.
    
    Dump all realms for multipath routes to enable iproute to correctly
    display them.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ed36279f68c990d65cd3d64f27d81313474a118
Author: Nicolas Dichtel <nicolas.dichtel@6wind.com>
Date:   Fri Jul 21 15:09:07 2006 -0700

    [DUMMY]: Avoid an oops when dummy_init_one() failed
    
    Signed-off-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4a9c74e5830444c1c3235848e06402c1d2ece1ea
Author: Nicolas Dichtel <nicolas.dichtel@6wind.com>
Date:   Fri Jul 21 14:56:02 2006 -0700

    [IFB] After ifb_init_one() failed, i is increased. Decrease
    
    It before entering in the loop for freeing the other ifb devices.
    
    Signed-off-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>
    Acked-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 53c4b2cc7a05c034fd21d104d2ab43ea8cc0e075
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jul 21 14:55:38 2006 -0700

    [NET]: Fix reversed error test in netif_tx_trylock
    
    A non-zero return value indicates success from spin_trylock,
    not error.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bf9915cc55cb8d18d4e3a8de3d1578a9af4a2e8b
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jul 21 14:55:17 2006 -0700

    [MAINTAINERS]: Mark LAPB as Oprhan.
    
    Maintainer email not longer exists.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0da974f4f303a6842516b764507e3c0a03f41e5a
Author: Panagiotis Issaris <takis@issaris.org>
Date:   Fri Jul 21 14:51:30 2006 -0700

    [NET]: Conversions from kmalloc+memset to k(z|c)alloc.
    
    Signed-off-by: Panagiotis Issaris <takis@issaris.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0ee7c70b22f78593957f99faa06acb4747b8bc0
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Fri Jul 21 14:51:02 2006 -0700

    [NET]: sun happymeal, little pci cleanup
    
    Use pci_register_driver instead of pci_module_init. Use PCI_DEVICE macro.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 485fb2c998a37d5c3c6aa082aa451e66db90f34a
Author: Samuel Ortiz <samuel@sortiz.org>
Date:   Fri Jul 21 14:50:41 2006 -0700

    [IrDA]: Use alloc_skb() in IrDA TX path
    
    As pointed out by Christoph Hellwig, dev_alloc_skb() is not intended to be
    used for allocating TX sk_buff. The IrDA stack was exclusively calling
    dev_alloc_skb() on the TX path, and this patch fixes that.
    
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b82631581372dc00b3507cedc3ad47af29efe962
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Fri Jul 21 14:50:13 2006 -0700

    [I/OAT]: Remove pci_module_init() from Intel I/OAT DMA engine
    
    Changes pci_module_init() to pci_register_driver().
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 64d2f0855e50a7185546ee1fbc03c2badc31330f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 21 14:49:49 2006 -0700

    [I/OAT]: net/core/user_dma.c should #include <net/netdma.h>
    
    Every file should #include the headers containing the prototypes for
    its global functions.
    
    Especially in cases like this one where gcc can tell us through a
    compile error that the prototype was wrong...
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dc022a9874d026c7d1635ae66d1afafc5f053731
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Fri Jul 21 14:49:25 2006 -0700

    [SCTP]: ADDIP: Don't use an address as source until it is ASCONF-ACKed
    
    This implements Rules D1 and D4 of Sec 4.3 in the ADDIP draft.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9faa730f1cbb951e95cb18e71b0fe265014c2450
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Fri Jul 21 14:49:07 2006 -0700

    [SCTP]: Set chunk->data_accepted only if we are going to accept it.
    
    Currently there is a code path in sctp_eat_data() where it is possible
    to set this flag even when we are dropping this chunk.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ad8fec1720e000ba2384de6408076a60fc92a981
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Fri Jul 21 14:48:50 2006 -0700

    [SCTP]: Verify all the paths to a peer via heartbeat before using them.
    
    This patch implements Path Initialization procedure as described in
    Sec 2.36 of RFC4460.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cfdeef3282705a4b872d3559c4e7d2561251363c
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Fri Jul 21 14:48:26 2006 -0700

    [SCTP]: Unhash the endpoint in sctp_endpoint_free().
    
    This prevents a race between the close of a socket and receive of an
    incoming packet.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37fa6878bcd54c25fbe6ebb3da5cf0d3a4bc7a65
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Fri Jul 21 14:45:47 2006 -0700

    [SCTP]: Check for NULL arg to sctp_bucket_destroy().
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89e1df74f841fc31e81838d30594c4eff01859f8
Author: Guillaume Chazarain <guichaz@yahoo.fr>
Date:   Fri Jul 21 14:45:25 2006 -0700

    [PKT_SCHED] netem: Fix slab corruption with netem (2nd try)
    
    CONFIG_DEBUG_SLAB found the following bug:
    netem_enqueue() in sch_netem.c gets a pointer inside a slab object:
    struct netem_skb_cb *cb = (struct netem_skb_cb *)skb->cb;
    But then, the slab object may be freed:
    skb = skb_unshare(skb, GFP_ATOMIC)
    cb is still pointing inside the freed skb, so here is a patch to
    initialize cb later, and make it clear that initializing it sooner
    is a bad idea.
    
    [From Stephen Hemminger: leave cb unitialized in order to let gcc
    complain in case of use before initialization]
    
    Signed-off-by: Guillaume Chazarain <guichaz@yahoo.fr>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fbeff3c1d35d07b1f967e47fcfb00cd16b7ecd02
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Fri Jul 21 14:44:55 2006 -0700

    [WAN]: Converted synclink drivers to use netif_carrier_*()
    
    WAN: Converted synclink drivers to use netif_carrier_*() instead
    of hdlc_set_carrier().
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 41b1d174442d0845e58af4b1b171930fc09872c7
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Fri Jul 21 14:41:36 2006 -0700

    [WAN]: Cosmetic changes to N2 and C101 drivers
    
    WAN: Cosmetic changes to N2 and C101 drivers
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4bc83b4d409edacb33db6c71d03e963d9728476c
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Fri Jul 21 14:41:01 2006 -0700

    [WAN]: Added missing netif_dormant_off() to generic HDLC
    
    WAN: Fixed a problem with PPP/raw HDLC/X.25 protocols not doing
    netif_dormant_off() at startup.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5d9c5a32920c5c0e6716b0f6ed16157783dc56a4
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jul 21 14:29:53 2006 -0700

    [IPV4]: Get rid of redundant IPCB->opts initialisation
    
    Now that we always zero the IPCB->opts in ip_rcv, it is no longer
    necessary to do so before calling netif_rx for tunneled packets.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit efab4cbe99f9b73d208ad9e5ec9388524005e095
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jul 21 14:19:45 2006 -0700

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8310a32c15c76623bbe2425d38688a9d5b3e50a9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jul 21 14:12:39 2006 -0700

    [SPARC]: Fix length parameter verification in sys_getdomainname().
    
    Found by scrashme.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8a84eb164cc44a7604a27f8118473a82b45472a8
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 19 22:55:08 2006 -0700

    [SERIAL] sunzilog: Fix instance enumeration.
    
    Just do a linear enumeration so that we handle sun4d systems
    correctly.  As a consequence, eliminate the hard coded keyboard and
    mouse channel line values, use the CONS_{KEYB,MS} flags instead.
    
    Also, report the keyboard/mouse Zilog channels just like the uart ones
    do.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b77d35b7229164304d6fb8f047b9bcd3da2c9592
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 19 21:04:04 2006 -0700

    [SERIAL] sunzilog: Remove duplicate IRQ registry in zs_probe().
    
    We do it now in sunzilog_init() after all devices have been
    probed.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8b3c848cc89e62904e6d9c8f9fed13d5c225572d
Author: Raymond Burns <rayburns@comcast.net>
Date:   Mon Jul 17 21:57:09 2006 -0700

    [SPARC]: Get sun4d SMP building again.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 198c167c5424d30d4f6687aed6e54ef71036f8e9
Author: Raymond Burns <rayburns@comcast.net>
Date:   Mon Jul 17 21:50:55 2006 -0700

    [SPARC]: Do not call sun4m_irq_rotate on sun4d.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2d3bffebc2cb651ed33abae2434f85cd503a498
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 17 21:49:58 2006 -0700

    [SPARC]: Simplify and correct __cpu_find_by()
    
    By using for_each_node_by_type().
    
    Also, correct a spurioud test in check_cpu_node() on sparc64.
    It is only called with nodes that have device_type "cpu".
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f72ba43581890d003427053ebe4dfaa14e5f4b0
Author: Raymond Burns <rayburns@comcast.net>
Date:   Mon Jul 17 21:40:27 2006 -0700

    [SPARC]: Initialize iounit spinlock in iounit_init().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9d7ab1f4d56dffcddc1177b3cd55b6da6620e1e1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 17 21:39:09 2006 -0700

    [SPARC]: Fix initialization of sun4d SBUS interrupts.
    
    1) Explicitly traverse to the root looking for the "sbi".
    2) Grab the "board#" property from the sbi's parent and
       verify that this parent is an "io-unit" node.
    3) Skip IRQ initialization when device lacks "reg" property.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 67e23a1e60b6bc0a090407d0fc060166ab558b72
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 17 21:07:17 2006 -0700

    [SERIAL] sunzilog: Register IRQ after all devices have been probed.
    
    Otherwise we will deref half-initialized channel pointers
    and crash in the interrupt handler.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 39329329565a5e24f0a5523eef3a9dd941e0b29d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 17 21:06:15 2006 -0700

    [SPARC] sbus: Make sure sbus nodes are named uniquely.
    
    Just name them "sbus%d" otherwise on sun4d we try to register
    multiple entries named "sbi@0,0" which does not work.
    
    Based upon a report from Raymond Burns.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f7785a64d117951e4c2bf9418d8c1dd59fe53b36
Author: Bob Breuer <breuerr@mc.net>
Date:   Mon Jul 17 17:05:56 2006 -0700

    [SPARC]: Fix property name acquisition in prom.c
    
    On sparc32 the prom_{first,next}prop() interfaces work
    a little differently.  The buffer argument is ignored on
    sparc32 and the firmware just returns a raw pointer to
    the property name.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bda2f7b4801964351253706d1a87e4d2110829a5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jul 17 16:40:26 2006 -0700

    [SERIAL] sunsab: Get line numbers and table sizing correct.
    
    Table sizing code should look for "se" not "su" nodes.
    
    The chip at the lower address should get the first index.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 44f2650b134b423128063ded29a11454b924390e
Author: Marc Zyngier <maz@misterjones.org>
Date:   Mon Jul 17 15:53:32 2006 -0700

    [SPARC64] Fix sunsab ports ordering
    
    Register second SAB port before the first one, as serial A is wired to
    it, and expected to appear as ttyS0.
    
    Signed-off-by: Marc Zyngier <maz@misterjones.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 06ffd7956e4790d824b4b5575b56def8448ec6d4
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jul 16 22:19:40 2006 -0700

    [SPARC]: Kill prom_getname, unused and not implemented properly.
    
    The m68k port's sun3 asm/oplib.h had a stray reference too, so I
    killed that off as well.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 46ba6d7d8b0486e9d565729880ddfb2b84d3af31
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jul 16 22:10:44 2006 -0700

    [SPARC64]: Fix more of_device layer IRQ bugs, and correct PROMREG_MAX.
    
    Sabre and Psycho PCI controllers can have partial interrupt-map
    properties, meaning that on-board devices don't match up to any
    entries.  Instead, they are fully specified from the beginning and
    we should pass them directly to the IRQ translator as-is.
    
    Also, fill in the necessary translator slots for the "graphics"
    and "expansion UPA" interrupts on Sabre, Psycho, and SYSIO SBUS.
    
    Increase PROMREG_MAX to 24, as seen on SUNW,ffb devices.
    
    Finally, prevent accidentally writing past the end of the of_device
    struct resource[] and irqs[] arrays.  Spit out a log message when
    we ignore some entries because there are too many of them.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00ab956f2fefd3673edc16df55beed21834b7bdd
Merge: 53a4998... 79bd3f8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 21 12:04:53 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-rc-fixes-2.6: (38 commits)
      [SCSI] More buffer->request_buffer changes
      [SCSI] mptfusion: bump version to 3.04.01
      [SCSI] mptfusion: misc fix's
      [SCSI] mptfusion: firmware download boot fix's
      [SCSI] mptfusion: task abort fix's
      [SCSI] mptfusion: sas nexus loss support
      [SCSI] mptfusion: sas loginfo update
      [SCSI] mptfusion: mptctl panic when loading
      [SCSI] mptfusion: sas enclosures with smart drive
      [SCSI] NCR_D700: misc fixes (section and argument ordering)
      [SCSI] scsi_debug: must_check fixes
      [SCSI] scsi_transport_sas: kill the use of channel
      [SCSI] scsi_transport_sas: add expander backlink
      [SCSI] hide EH backup data outside the scsi_cmnd
      [SCSI] ibmvscsi: handle inactive SCSI target during probe
      [SCSI] ibmvscsi: allocate lpevents for ibmvscsi on iseries
      [SCSI] aic7[9x]xx: Remove last vestiges of reverse_scan
      [SCSI] aha152x: stop poking at saved scsi_cmnd members
      [SCSI] st.c: Improve sense output
      [SCSI] lpfc 8.1.7: Change version number to 8.1.7
      ...

commit 53a4998229efbf5cb79ec7ca7c18f4c86f66755d
Merge: 3bda241... d7cf0d5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 21 12:03:57 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] sysfs_create_xxx return values.
      [S390] .align 4096 statements in head.S
      [S390] get_clock inline assembly.
      [S390] channel measurement interval display.
      [S390] xpram module parameter parsing - take 2.
      [S390] Fix gcc warning about unused return values.

commit 3bda2418b94243d5e43fcfe48d9de70cb0d2423e
Merge: f5beec4... bdd0150...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 21 12:03:32 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [PATCH] spidernet: rework tx queue handling
      [PATCH] spidernet: bug fix for init code
      [PATCH] sky2: NAPI poll fix
      [NET] ethtool: fix oops by testing correct struct member
      e1000: bump version to 7.1.9-k4
      e1000: fix panic on large frame receive when mtu=default
      e1000: remove CRC bytes from measured packet length
      e1000: Redo netpoll fix to address community concerns

commit 59b693fbbec37765426ba0916920ff93d2e26eb3
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Thu Jul 20 23:23:57 2006 +0200

    via-velocity: fix speed and link status reported by ethtool
    
    The via-velocity driver reports incorrect speed and link detected status
    as viewed by ethtool (and probably other tools). This patch fixes those
    incorrect reports and prettifies a long line.
    
    Signed-off-by:  Jay Cliburn <jacliburn@bellsouth.net>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit 13abf50df209008b5d44075bafeeab42ace56aa6
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 10 23:18:46 2006 +0900

    [PATCH] libata: improve EH action and EHI flag handling
    
    Update ata_eh_about_to_do() and ata_eh_done() to improve EH action and
    EHI flag handling.
    
    * There are two types of EHI flags - one which expires on successful
      EH and the other which expires on a successful reset.  Make this
      distinction clear.
    
    * Unlike other EH actions, reset actions are represented by two EH
      action masks and a EHI modifier.  Implement correct about_to_do/done
      semantics for resets.  That is, prior to reset, related EH info is
      sucked in from ehi and cleared, and after reset is complete, related
      EH info in ehc is cleared.
    
    These changes improve consistency and remove unnecessary EH actions
    caused by stale EH action masks and EHI flags.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7c8c2cff81b2b7f6dd3f9fd7b77033c1be5d7920
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 10 23:18:23 2006 +0900

    [PATCH] libata: fix eh_skip_recovery condition
    
    * (ata_dev_absent() || ata_dev_ready()) test doesn't indicate
      SUSPENDED state properly.  Fix it.
    
    * Link resuming resets shouldn't be skipped.  Don't skip recovery on
      EHI_RESUME_LINK.  This doesn't matter for host ports as EHI_RESUME
      always coincides with EHI_HOTPLUGGED which makes attached disabled
      devices vacant.  However, PMP reset causes non-hotplug link-resuming
      resets which shouldn't be skipped.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4528e4da79675b4995e085046b8ffbe0415c3261
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jul 8 20:17:26 2006 +0900

    [PATCH] libata: fix autopsy ehc->i.action and ehc->i.dev handling
    
    Commit 0662c58b3265f52f708a6d59476bc7862b01f9c0 updated
    ata_eh_autopsy() to OR determined action to ehc->i.action to preserve
    action mask set directly into ehc->i.action by nested functions.  This
    broke action mask clearing on SENSE_VALID case causing revalidation
    and EH complete message on successful ATAPI CC.
    
    This patch removes two local variables - action and failed_dev - which
    cache ehc->i.action and ehc->i.dev respectively, and make the function
    directly modify ehc->i.* fields to remove aliasing issues.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 73b59a3b1c09e4bfc678400b77b96134dcfbf112
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 19 01:14:55 2006 -0400

    Input: serio/gameport - check whether driver core calls succeeded
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 2c1dd69d28cba5a51e838897e0335f82a292f366
Author: Nick Martin <nim+linux@nimlabs.org>
Date:   Wed Jul 19 01:14:44 2006 -0400

    Input: spaceball - make 4000FLX Lefty work
    
    Although the Spaceball 4000FLX Lefty is already supported by the
    spaceball driver, it does not register properly due to SPACEBALL_MAX_ID
    being set too low. Increment SPACEBALL_MAX_ID such that the 4000FLX Lefty
    is properly recognized.
    
    Signed-off-by: Nick Martin <nim+linux@nimlabs.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 896cdc7b802c972d625351eb47d4add22d1fccb6
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Jul 19 01:14:25 2006 -0400

    Input: keyboard - simplify emulate_raw() implementation
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 2b192908b8e74ce0753c7dff92d244735d1eeed9
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Jul 19 01:13:26 2006 -0400

    Input: keyboard - remove static variable and clean up initialization
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 826d598242d9200ddee63fce96f03793fddee4fc
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Jul 19 01:09:10 2006 -0400

    Input: hiddev - use standard list implementation
    
    Fixes Coverity #id 303
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b6d786dbe6fc19b51edd6cf6de84fd65b702c800
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Wed Jul 19 01:08:51 2006 -0400

    Input: add missing handler->start() call
    
    The start() method need to be called every time we create
    a new handle. This includes not only registering new devices
    but also when registering new handlers.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit d7cf0d57ef9e07cf0f65c58c19a8e7c4a9db72b5
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Tue Jul 18 13:46:58 2006 +0200

    [S390] sysfs_create_xxx return values.
    
    Take return values of sysfs_create_group & friends into account.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit dc8f5d21dd6bdd94e5c5bf9bbcc616d00f0cc839
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Tue Jul 18 13:44:57 2006 +0200

    [S390] .align 4096 statements in head.S
    
    SLES9 binutils don't like .align 4096 statements in head.S. Work around this
    by using .org statements.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit bdd01503c3e4e9827df015bc7e440d5498308fdd
Author: Jens Osterkamp <jens@de.ibm.com>
Date:   Thu Jul 13 11:54:08 2006 +0200

    [PATCH] spidernet: rework tx queue handling
    
    With this patch TX queue descriptors are not chained per default any more.
    The pointer to next descriptor is set only when next descriptor is prepaired
    for transfer. Also the mechanism of checking wether Spider is ready has been
    changed: it checks not for CARDOWNED flag in status of previous descriptor
    but for a TXDMAENABLED flag in Spider's register.
    
    Signed-off-by: Maxim Shchetynin <maxim@de.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ee962a5cee5b534666dbfa5e3ec3c633c90c6b1a
Author: Jens Osterkamp <jens@de.ibm.com>
Date:   Thu Jul 13 11:54:23 2006 +0200

    [PATCH] spidernet: bug fix for init code
    
    We want to intitialize addr instead of data register first.
    
    Signed-off-by: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit caa0371e8b7391919d984672c887f660a6117f67
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jul 17 09:54:34 2006 -0400

    [PATCH] sky2: NAPI poll fix
    
    When sky2 driver gets lots of received packets at once, it can get stuck.
    The NAPI poll routine gets called back to keep going, but since no IRQ bits
    are set it doesn't make progress.
    
    Increase version, since this is serious enough problem that I want to be
    able to tell new from old problems.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 83b0fe818cd2f6cc03365440f2b7cca297a45b4f
Merge: e1b90c4... 36902f2...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jul 17 13:26:52 2006 -0400

    Merge branch 'upstream-fixes-jgarzik' of git://lost.foo-projects.org/~ahkok/git/netdev-2.6 into upstream-fixes

commit e1b90c416d6e6b71fc63974c1798e3cf55bba77f
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jul 17 12:54:40 2006 -0400

    [NET] ethtool: fix oops by testing correct struct member
    
    Noticed by Willy Tarreau.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 53ba5e09fe37518683ff8b3f28410ce0b9ed2f74
Author: Andreas Krebbel <krebbel1@de.ibm.com>
Date:   Mon Jul 17 16:09:42 2006 +0200

    [S390] get_clock inline assembly.
    
    Add missing volatile to the get_clock / get_cycles inline assemblies
    to avoid that consecutive calls get optimized away.
    
    Signed-off-by: Andreas Krebbel <krebbel1@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 13ffa927abb74d4365b0e22f186befe4746b5897
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Mon Jul 17 16:09:28 2006 +0200

    [S390] channel measurement interval display.
    
    Display avg_sample_interval in nanoseconds, like it is documented.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit f257b06322c8a30c050a286c45fda68f23b9bc44
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 17 16:09:23 2006 +0200

    [S390] xpram module parameter parsing - take 2.
    
    Don't use memparse since the default size modifier is 'k'.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 5a651c93d3a823af63b1b15bb94fdc951670fb2f
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 17 16:09:18 2006 +0200

    [S390] Fix gcc warning about unused return values.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit f5beec49636bf8d5a34065c8ab030cd4ea84516f
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jul 11 15:28:12 2006 -0400

    [libata] ata_piix: correct 'invalid MAP value' typo-caused error
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 73291a1cb68bb62be62a927a9d67fe417b3cfe35
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jul 11 13:11:17 2006 -0400

    [libata] ata_piix: minor cleanups noticed in prior patch run
    
    * delete unused PIIX_FLAG_COMBINED*
    * port_enable should be u16 rather than u32
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 08f12edc335d24a89ba2f50b0a5b9d12295ce198
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jul 11 11:57:44 2006 -0400

    [libata] ata_piix: attempt to fix ICH8 support
    
    Take into account the fact that ICH8 changed the register layout of
    the MAP and PCS register bits.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ea35d29e2fa8b3d766a2ce8fbcce599dce8d2734
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jul 11 11:48:50 2006 -0400

    [libata] ata_piix: Consolidate PCS register writing
    
    Prior to this patch, the driver would do this for each port:
    	read 8-bit PCS
    	write 8-bit PCS
    	read 8-bit PCS
    	write 8-bit PCS
    
    In the field, flaky behavior has been observed related to this register.
    In particular, these overzealous register writes can cause misdetection
    problems.
    
    Update to do the following once (not once per port) at boot:
    	read 16-bit PCS
    	if needs changing,
    		write 16-bit PCS
    
    And thereafter, we only perform a 'read 16-bit PCS' per port.
    
    This should eliminate all PCS writes in many cases, and be more friendly
    in the cases where we do need to enable ports.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d96715c1acb119cef4b2443ba9b3777b730139e6
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 29 01:58:28 2006 +0900

    [PATCH] ata_piix: add host_set private structure
    
    Add host_set private structure piix_host_priv.  Currently the only
    field is ->map which used to be stored directly at
    host_set->private_data.  This change allows more host_set private
    fields to be added.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 82d6897fefca6206bca7153805b4c5359ce97fc4
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 15 14:53:08 2006 -0700

    Linux 2.6.18-rc2
    
    Finishing up for the kernel summit. Ottawa, here I come.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b20e481ab595e9667c33e2393bdfe9a31870d11f
Merge: b5032a5... 48ce8b0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 15 14:43:30 2006 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6:
      JFS: commit_mutex cleanups

commit b5032a50aea76b6230db74b1d171a7f56b204bb7
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jul 14 15:52:23 2006 -0400

    [PATCH] UML - fix utsname build breakage
    
    Some -mm-only material leaked into a patch destined for mainline, and I didn't
    notice.
    
    This was the replacement of system_utsname with utsname() that's required by
    the uts namespace patch.  This patch reverts those changes (which are correct
    in -mm) so that mainline UML builds again.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 284c5e6e938f79906f2ccc8c4039863e6c739aaa
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jul 15 21:08:07 2006 +0100

    [ARM] 3730/1: ep93xx: enable usb ohci driver in the defconfig
    
    Patch from Lennert Buytenhek
    
    Since the ep93xx ohci bits are merged upstream now, enable ohci in
    the ep93xx defconfig.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6d76fa58b050044994fe25f8753b8023f2b36737
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Sat Jul 15 12:26:45 2006 -0700

    Don't allow chmod() on the /proc/<pid>/ files
    
    This just turns off chmod() on the /proc/<pid>/ files, since there is no
    good reason to allow it, and had we disallowed it originally, the nasty
    /proc race exploit wouldn't have been possible.
    
    The other patches already fixed the problem chmod() could cause, so this
    is really just some final mop-up..
    
    This particular version is based off a patch by Eugene and Marcel which
    had much better naming than my original equivalent one.
    
    Signed-off-by: Eugene Teo <eteo@redhat.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92d032855e64834283de5acfb0463232e0ab128e
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Sat Jul 15 12:20:05 2006 -0700

    Mark /proc MS_NOSUID and MS_NOEXEC
    
    Not that we really need this any more, but at the same time there's no
    reason not to do this.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2724a1a55f847e2b5007cf294e03cfa09d0d22f3
Author: Dave Jones <davej@redhat.com>
Date:   Sat Jul 15 03:41:12 2006 -0400

    [PATCH] sch_htb compile fix.
    
    net/sched/sch_htb.c: In function 'htb_change_class':
    net/sched/sch_htb.c:1605: error: expected ';' before 'do_gettimeofday'
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46a1652c28fc4f4e9d46ea12b0c36b5b6b600f58
Author: Alexey Korolev <akorolev@pentafluge.infradead.org>
Date:   Wed Jun 28 19:22:07 2006 +0100

    [MTD] Fixes of performance and stability issues in CFI driver.
    
    Fix of performance and stability issues on Intel NOR chips. It fixes:
    
    1. Very low write performance on Sibley (perf tests demonstrated write
       performance less than 100Kb/sec when it should be over 400Kb/sec).
    
    2. Low erase performance. (perf tests on Sibleuy demonstrated erase
       performance 246Kb/sec when it should be over 300Kb/sec).
    
    3. Error on JFFS2 tests with CPU loading application when MTD returns
       "block erase error: (status timeout)" To fix the issue it does the
       following:
         1. Removes the timeout tuning from inval_cache_and_wait_for_operation.
         2. Waiting conditions in inval_cache_and_wait_for_operation now is
             based on timer resolution
            If timeout is lower than timer resolution then we do in cycle
    	  "Checking the status"
    	  udelay(1);
    	  cond_resched();
            If timeout is greater than timer resolution (probably erase
            operation) We do the following
    	  sleep for half of operation timeout and do in cycle the following
    	    "Checking the status"
    	    sleep for timer resolution
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Alexey Korolev <akorolev@infradead.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c4e7fb313771ac03dfdca26d30e8b721731c562b
Author: Ville Herva <vherva@vianova.fi>
Date:   Fri Jul 14 00:31:16 2006 +0300

    block2mtd.c: Make kernel boot command line arguments work (try 4)
    
    Trying to pass kernel command line arguments to block2mtd at boot-time does
    not work currently. block2mtd_setup() is called so early that kmalloc()
    fails nevermind being able to do open_bdev_excl() (which requires rootfs to
    be mounted. This patch only saves the option string at the early boot stage,
    and parses them later when block2mtd_init() is called. If open_bdev_excl()
    fails, open_by_devnum(name_to_dev_t()) is tried instead, which makes it
    possible to initialize the driver before rootfs has been mounted. Also gets
    rid of the superfluous parse_name() that only checks if name is longer than
    80 chars and copies it to a string that is not kfreed.
    
    With this patch, I can boot statically compiled block2mtd, and mount jffs2
    as rootfs (without modules or initrd), with lilo config like this:
    
       root=/dev/mtdblock0
       append="rootfstype=jffs2 block2mtd.block2mtd=/dev/hdc2,65536"
    
    (Note that rootfstype=jffs2 is required, since the kernel only tries
    filesystems without "nodev" attribute by default, and jffs is "nodev").
    
    Compared to first version of this patch, this one does not copy the
    parameters to the global buffer if init has already been called, and the
    global array is marked as __initdata.
    
    Compared to the second version of this patch, module build is fixed.
    
    Compared to the third version of this patch, statically compiled block2mtd
    driver with no boot-time parameter no longer gives spurious error 'cannot
    open device ""'
    
    Signed-off-by: Ville Herva <vherva@vianova.fi>
    Acked-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9a909867d2eca7727d0d5884df96e791e3531f24
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Jul 15 13:26:18 2006 +0100

    [MTD NAND] Fix lookup error in nand_get_flash_type()
    
    Spotted by liyu <liyu@ccoss.com.cn>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9d05cd51780c3855976b26cbee265490a0a10be9
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Jul 14 14:39:06 2006 +0200

    remove #error on !PCI from pmc551.c
    
    PMC551 depends on PCI in Kconfig so there is no need to #error in code if PCI
    is not set.
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6a5a297cf78e64ed68577f3e3480bc10abf0124b
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Sat Jul 15 13:05:24 2006 +0100

    MTD: [NAND] Fix the sharpsl driver after breakage from a core conversion
    
    The CNE bits are inverted on the device and writeb function is missing a
    NOT operation.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cb78623517ca08a035a3f69c0ca6d68a0123e649
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Sat Jul 15 01:17:54 2006 -0400

    Input: HID - fix potential out-of-bound array access
    
    Fixes Coverity #id 978
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a2b2ed2ce20ae6c335a27ae5bf8580f385014e70
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 15 01:17:38 2006 -0400

    Input: fix list iteration in input_release_device()
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b53174fb5a0e47a19e10b8ef74ab0c12a19f92dc
Author: Przemek Iskra <sparky@pld-linux.org>
Date:   Sat Jul 15 01:16:21 2006 -0400

    Input: iforce - add Trust Force Feedback Race Master support
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit d6c93e1ddde769010f9c81bbfab41a9844c0e9ba
Merge: 5694ca9... cc08632...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 14 21:57:45 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6:
      [CRYPTO] padlock: Fix alignment after aes_ctx rearrange

commit 5694ca9f46202c50df525472abb6d8c1dee4f8eb
Merge: 76aba64... ee7022d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 14 21:57:23 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64] Fix PSYCHO PCI controler init.
      [SPARC64] psycho: Fix pbm->name handling in pbm_register_toplevel_resources()
      [SERIAL] sunsab: Fix significant typo in sab_probe()
      [SERIAL] sunsu: Report keyboard and mouse ports in kernel log.
      [SPARC64]: Make sure IRQs are disabled properly during early boot.

commit 76aba64a6608fcaa02c715e93c572192f3621195
Merge: 52393cc... 0610d11...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 14 21:57:06 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [VLAN]: __vlan_hwaccel_rx can use the faster ether_compare_addr
      [PKT_SCHED] HTB: initialize upper bound properly
      [IPV4]: Clear skb cb on IP input
      [NET]: Update frag_list in pskb_trim

commit 52393ccc0a53c130f31fbbdb8b40b2aadb55ee72
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Fri Jul 14 16:05:03 2006 -0400

    [PATCH] remove set_wmb - arch removal
    
    set_wmb should not be used in the kernel because it just confuses the
    code more and has no benefit.  Since it is not currently used in the
    kernel this patch removes it so that new code does not include it.
    
    All archs define set_wmb(var, value) to do { var = value; wmb(); }
    while(0) except ia64 and sparc which use a mb() instead.  But this is
    still moot since it is not used anyway.
    
    Hasn't been tested on any archs but x86 and x86_64 (and only compiled
    tested)
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f92213bae062cf88c099fbfd3040fef512b19905
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Fri Jul 14 16:05:01 2006 -0400

    [PATCH] remove set_wmb - doc update
    
    This patch removes the reference to set_wmb from memory-barriers.txt
    since it shouldn't be used.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb129994c3bff9c5e8df91f05d7e9b6402fbd83f
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:47 2006 -0700

    [PATCH] Remove down_write() from taskstats code invoked on the exit() path
    
    In send_cpu_listeners(), which is called on the exit path, a down_write()
    was protecting operations like skb_clone() and genlmsg_unicast() that do
    GFP_KERNEL allocations.  If the oom-killer decides to kill tasks to satisfy
    the allocations,the exit of those tasks could block on the same semphore.
    
    The down_write() was only needed to allow removal of invalid listeners from
    the listener list.  The patch converts the down_write to a down_read and
    defers the removal to a separate critical region.  This ensures that even
    if the oom-killer is called, no other task's exit is blocked as it can
    still acquire another down_read.
    
    Thanks to Andrew Morton & Herbert Xu for pointing out the oom related
    pitfalls, and to Chandra Seetharaman for suggesting this fix instead of
    using something more complex like RCU.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9fd8914c1acca0d98b69d831b128d5b52f03c51
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:47 2006 -0700

    [PATCH] per-task delay accounting taskstats interface: control exit data through cpumasks
    
    On systems with a large number of cpus, with even a modest rate of tasks
    exiting per cpu, the volume of taskstats data sent on thread exit can
    overflow a userspace listener's buffers.
    
    One approach to avoiding overflow is to allow listeners to get data for a
    limited and specific set of cpus.  By scaling the number of listeners
    and/or the cpus they monitor, userspace can handle the statistical data
    overload more gracefully.
    
    In this patch, each listener registers to listen to a specific set of cpus
    by specifying a cpumask.  The interest is recorded per-cpu.  When a task
    exits on a cpu, its taskstats data is unicast to each listener interested
    in that cpu.
    
    Thanks to Andrew Morton for pointing out the various scalability and
    general concerns of previous attempts and for suggesting this design.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8924363da07aec213e5d359f23eeae1fff91951
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:46 2006 -0700

    [PATCH] per-task delay accounting: avoid send without listeners
    
    Don't send taskstats (per-pid or per-tgid) on thread exit when no one is
    listening for such data.
    
    Currently the taskstats interface allocates a structure, fills it in and
    calls netlink to send out per-pid and per-tgid stats regardless of whether
    a userspace listener for the data exists (netlink layer would check for
    that and avoid the multicast).
    
    As a result of this patch, the check for the no-listener case is performed
    early, avoiding the redundant allocation and filling up of the taskstats
    structures.
    
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e06d3f9f6b14f6e3120923ed215032726246c98
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:45 2006 -0700

    [PATCH] per task delay accounting taskstats interface: documentation fix
    
    Change documentation and example program to reflect the flow control issues
    being addressed by the cpumask changes.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad4ecbcba72855a2b5319b96e2a3a65ed1ca3bfd
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:44 2006 -0700

    [PATCH] delay accounting taskstats interface send tgid once
    
    Send per-tgid data only once during exit of a thread group instead of once
    with each member thread exit.
    
    Currently, when a thread exits, besides its per-tid data, the per-tgid data
    of its thread group is also sent out, if its thread group is non-empty.
    The per-tgid data sent consists of the sum of per-tid stats for all
    *remaining* threads of the thread group.
    
    This patch modifies this sending in two ways:
    
    - the per-tgid data is sent only when the last thread of a thread group
      exits.  This cuts down heavily on the overhead of sending/receiving
      per-tgid data, especially when other exploiters of the taskstats
      interface aren't interested in per-tgid stats
    
    - the semantics of the per-tgid data sent are changed.  Instead of being
      the sum of per-tid data for remaining threads, the value now sent is the
      true total accumalated statistics for all threads that are/were part of
      the thread group.
    
    The patch also addresses a minor issue where failure of one accounting
    subsystem to fill in the taskstats structure was causing the send of
    taskstats to not be sent at all.
    
    The patch has been tested for stability and run cerberus for over 4 hours
    on an SMP.
    
    [akpm@osdl.org: bugfixes]
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25890454667b3295f67b3372352be90705f8667c
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:43 2006 -0700

    [PATCH] per-task-delay-accounting: /proc export of aggregated block I/O delays
    
    Export I/O delays seen by a task through /proc/<tgid>/stats for use in top
    etc.
    
    Note that delays for I/O done for swapping in pages (swapin I/O) is clubbed
    together with all other I/O here (this is not the case in the netlink
    interface where the swapin I/O is kept distinct)
    
    [akpm@osdl.org: printk warning fix]
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3baf649ca9ca0a96fba538f03b0f17c043b755c
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:42 2006 -0700

    [PATCH] per-task-delay-accounting: documentation
    
    Some documentation for delay accounting.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f44993fe1d7b2b097f6ac60cd5835c6f5ca0874
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:41 2006 -0700

    [PATCH] per-task-delay-accounting: delay accounting usage of taskstats interface
    
    Usage of taskstats interface by delay accounting.
    
    Signed-off-by: Shailabh Nagar <nagar@us.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c757249af152c59fd74b85e52e8c090acb33d9c0
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:40 2006 -0700

    [PATCH] per-task-delay-accounting: taskstats interface
    
    Create a "taskstats" interface based on generic netlink (NETLINK_GENERIC
    family), for getting statistics of tasks and thread groups during their
    lifetime and when they exit.  The interface is intended for use by multiple
    accounting packages though it is being created in the context of delay
    accounting.
    
    This patch creates the interface without populating the fields of the data
    that is sent to the user in response to a command or upon the exit of a task.
    Each accounting package interested in using taskstats has to provide an
    additional patch to add its stats to the common structure.
    
    [akpm@osdl.org: cleanups, Kconfig fix]
    Signed-off-by: Shailabh Nagar <nagar@us.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb0ba6bd021248b6bdc58a7b1213a55a6776a38a
Author: Balbir Singh <balbir@in.ibm.com>
Date:   Fri Jul 14 00:24:39 2006 -0700

    [PATCH] per-task-delay-accounting: utilities for genetlink usage
    
    Two utilities for simplifying usage of NETLINK_GENERIC interface.
    
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52f17b6c2bd443e7806a161e9d10a983650db01d
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Fri Jul 14 00:24:38 2006 -0700

    [PATCH] per-task-delay-accounting: cpu delay collection via schedstats
    
    Make the task-related schedstats functions callable by delay accounting even
    if schedstats collection isn't turned on.  This removes the dependency of
    delay accounting on schedstats.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ff922452df86f3e9a2c6f705c4588ec62d096a7
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:37 2006 -0700

    [PATCH] per-task-delay-accounting: sync block I/O and swapin delay collection
    
    Unlike earlier iterations of the delay accounting patches, now delays are only
    collected for the actual I/O waits rather than try and cover the delays seen
    in I/O submission paths.
    
    Account separately for block I/O delays incurred as a result of swapin page
    faults whose frequency can be affected by the task/process' rss limit.  Hence
    swapin delays can act as feedback for rss limit changes independent of I/O
    priority changes.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca74e92b4698276b6696f15a801759f50944f387
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:36 2006 -0700

    [PATCH] per-task-delay-accounting: setup
    
    Initialization code related to collection of per-task "delay" statistics which
    measure how long it had to wait for cpu, sync block io, swapping etc.  The
    collection of statistics and the interface are in other patches.  This patch
    sets up the data structures and allows the statistics collection to be
    disabled through a kernel boot parameter.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Peter Chubb <peterc@gelato.unsw.edu.au>
    Cc: Erich Focht <efocht@ess.nec.de>
    Cc: Levent Serinol <lserinol@gmail.com>
    Cc: Jay Lan <jlan@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f4d97e1b58b50ad6449bb2d35e6632c0236abd
Author: Shailabh Nagar <nagar@watson.ibm.com>
Date:   Fri Jul 14 00:24:35 2006 -0700

    [PATCH] list_is_last utility
    
    Add another list utility function to check for last element in a list.
    
    Signed-off-by: Shailabh Nagar <nagar@watson.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22caf04297896e515c6d5cdfb8e08a79a523946c
Author: Mike Rapoport <mike@compulab.co.il>
Date:   Fri Jul 14 00:24:34 2006 -0700

    [PATCH] mbxfb: Add framebuffer driver for the Intel 2700G
    
    Add frame buffer driver for the 2700G LCD controller present on CompuLab
    CM-X270 computer module.
    
    [adaplas]
    - Add more informative help text to Kconfig
    - Make DEBUG a Kconfig option as FB_MBX_DEBUG
    - Remove #include mbxdebug.c, this is frowned upon
    - Remove redundant casts
    - Arrange #include's alphabetically
    - Trivial whitespace
    
    Signed-off-by: Mike Rapoport <mike@compulab.co.il>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b04ea3cebf79d6808632808072f276dbc98aaf01
Author: Eric Paris <eparis@parisplace.org>
Date:   Fri Jul 14 00:24:33 2006 -0700

    [PATCH] Fix security check for joint context= and fscontext= mount options
    
    After some discussion on the actual meaning of the filesystem class
    security check in try context mount it was determined that the checks for
    the context= mount options were not correct if fscontext mount option had
    already been used.
    
    When labeling the superblock we should be checking relabel_from and
    relabel_to.  But if the superblock has already been labeled (with
    fscontext) then context= is actually labeling the inodes, and so we should
    be checking relabel_from and associate.  This patch fixes which checks are
    called depending on the mount options.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 517e7aa5b022f9dc486639c7689666663daee24f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 14 00:24:32 2006 -0700

    [PATCH] let the the lockdep options depend on DEBUG_KERNEL
    
    The lockdep options should depend on DEBUG_KERNEL since:
    - they are kernel debugging options and
    - they do otherwise break the DEBUG_KERNEL menu structure
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3c36aa98f8e39544afb99025bb69bc1b48e9bf0
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Fri Jul 14 00:24:31 2006 -0700

    [PATCH] tpm_tis: use resource_size_t
    
    Fix the start and len variables that should be using the new
    resource_size_t.
    
    Signed_off_by: Kylene Hall <kjhall@us.ibm.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e323d3ee0ba9381af494641e1e87a8d372f916b
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Fri Jul 14 00:24:31 2006 -0700

    [PATCH] tpm: Add force device probe option
    
    Some machine manufacturers are not sticking to the TCG specifications and
    including an ACPI DSDT entry for the TPM which allows PNP discovery of the
    device.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cab091eaa4952777d3183b6d7ce203a213cddc12
Author: Kylene Jo Hall <kjhall@us.ibm.com>
Date:   Fri Jul 14 00:24:30 2006 -0700

    [PATCH] tpm: interrupt clear fix
    
    Under stress testing I found that the interrupt is not always cleared.
    
    Signed-off-by: Kylene Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 737bebd137561e184f0a8b4332d9bb0238d8b639
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Jul 14 00:24:29 2006 -0700

    [PATCH] symlink nesting level change
    
    It's way past time to bump it to 8.  Everyone had been warned - for
    months now.
    
    RH kernels have had this for more than a year.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5df5881e2a2ff2be62608de1a156ac6d2352fc2
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jul 14 00:24:29 2006 -0700

    [PATCH] actual mailing list in MAINTAINERS
    
    Add actual mailing list email addresses for the 4 that were only listing a
    web page.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e82636a3dd8d3cf1ba87380608da4f6a0f6ec47
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jul 14 00:24:28 2006 -0700

    [PATCH] TPM: fix failure path leak
    
    kfree(devname) on the misc_register() failure path.  Otherwise it is lost
    forever.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Kylene Jo Hall <kjhall@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3a5f5e488ceee9e08df3dff3f01b12fafc9e7e68
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jul 14 00:24:27 2006 -0700

    [PATCH] lockdep: core, fix rq-lock handling on __ARCH_WANT_UNLOCKED_CTXSW
    
    On platforms that have __ARCH_WANT_UNLOCKED_CTXSW set and want to implement
    lock validator support there's a bug in rq->lock handling: in this case we
    dont 'carry over' the runqueue lock into another task - but still we did a
    spinlock_release() of it.  Fix this by making the spinlock_release() in
    context_switch() dependent on !__ARCH_WANT_UNLOCKED_CTXSW.
    
    (Reported by Ralf Baechle on MIPS, which has __ARCH_WANT_UNLOCKED_CTXSW.
    This fixes a lockdep-internal BUG message on such platforms.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e8f7a3128bb8fac8351a994f1fc325717899308
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Jul 14 00:24:26 2006 -0700

    [PATCH] gpio: rename exported vtables to better match purpose
    
    - rename EXPORTed gpio vtables from {scx200,pc8736x}_access to _gpio_ops new
      name is much closer to the vtable-name struct nsc_gpio_ops, should be
      clearer.  Also rename the _fops vtable var to _fileops to better
      disambiguate it from the gpio vtable.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abecb6da704a71232a3103c8485c65ceb5fcd9dc
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Jul 14 00:24:26 2006 -0700

    [PATCH] gpio: cosmetics: remove needless newlines
    
    - pure cosmetics: lose needless newlines.
    
    - rename EXPORTed gpio vtables from {scx200,pc8736x}_access to _gpio_ops new
      name is much closer to the vtable-name struct nsc_gpio_ops, should be
      clearer.  Also rename the _fops vtable var to _fileops to better
      disambiguate it from the gpio vtable.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91e260b80d2fec559877f399dfc36b554f207874
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Jul 14 00:24:25 2006 -0700

    [PATCH] gpio: drop vtable members .gpio_set_high .gpio_set_low gpio_set is enough
    
    drops gpio_set_high, gpio_set_low from the nsc_gpio_ops vtable.  While we
    can't drop them from scx200_gpio (or can we?), we dont need them for new users
    of the exported vtable; gpio_set(1), gpio_set(0) work fine.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9432e4d8866606466117664472c58ac981ea4f4
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Jul 14 00:24:24 2006 -0700

    [PATCH] Remove pci_dac_set_dma_mask() from Documentation/DMA-mapping.txt
    
    pci_dac_set_dma_mask() gives only a single match in the whole kernel tree
    and that's in this doc file.  The best candidate for replacement is
    pci_dac_dma_supported().
    
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Acked-by: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d247e2c661f28a21e5f9a8d672e1e88a7c1c5d4a
Author: Rolf Eike Beer <eike-kernel@sf-tec.de>
Date:   Fri Jul 14 00:24:23 2006 -0700

    [PATCH] add function documentation for register_chrdev()
    
    Documentation for register_chrdev() was missing completely.
    
    [akpm@osdl.org: kerneldocification]
    Signed-off-by: Rolf Eike Beer <eike-kernel@sf-tec.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c259cc281255bdb30ceba190bfd7f37e3ae3fc85
Author: Roland Dreier <rdreier@cisco.com>
Date:   Fri Jul 14 00:24:23 2006 -0700

    [PATCH] Convert idr's internal locking to _irqsave variant
    
    Currently, the code in lib/idr.c uses a bare spin_lock(&idp->lock) to do
    internal locking.  This is a nasty trap for code that might call idr
    functions from different contexts; for example, it seems perfectly
    reasonable to call idr_get_new() from process context and idr_remove() from
    interrupt context -- but with the current locking this would lead to a
    potential deadlock.
    
    The simplest fix for this is to just convert the idr locking to use
    spin_lock_irqsave().
    
    In particular, this fixes a very complicated locking issue detected by
    lockdep, involving the ib_ipoib driver's priv->lock and dev->_xmit_lock,
    which get involved with the ib_sa module's query_idr.lock.
    
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Zach Brown <zach.brown@oracle.com>,
    Signed-off-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fbe82a952790c634ea6035c223a01a81377daf1
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Fri Jul 14 00:24:22 2006 -0700

    [PATCH] reiserfs: fix handling of device names with /'s in them
    
    On systems with block devices containing a slash (virtual dasd, cciss,
    etc), reiserfs will fail to initialize /proc/fs/reiserfs/<dev> due to it
    being interpreted as a subdirectory.  The generic block device code changes
    the / to !  for use in the sysfs tree.  This patch uses that convention.
    
    Tested by making dm devices use dm/<number> rather than dm-<number>
    
    [akpm@osdl.org: name variables consistently]
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bca3bffec9f37d4cb60b80fd0067f9c7550b5d57
Author: Chris Boot <bootc@bootc.net>
Date:   Fri Jul 14 00:24:21 2006 -0700

    [PATCH] net48xx LED cleanups
    
    Add the DRVNAME define to remove the two separate references of the driver
    name by string, and move the .driver.owner into the existing .driver
    sub-structure.
    
    Signed-off-by: Chris Boot <bootc@bootc.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4afee02a5dd4f20c08fca26e9b610e72d0bcbf0
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Fri Jul 14 00:24:18 2006 -0700

    [PATCH] Fix sighand->siglock usage in kernel/acct.c
    
    IRQs must be disabled before taking ->siglock.
    
    Noticed by lockdep.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e143475c22036847f898d7e76ba337c1d7dbf6f
Author: john stultz <johnstul@us.ibm.com>
Date:   Fri Jul 14 00:24:17 2006 -0700

    [PATCH] improve timekeeping resume robustness
    
    Resolve problems seen w/ APM suspend.
    
    Due to resume initialization ordering, its possible we could get a timer
    interrupt before the timekeeping resume() function is called.  This patch
    ensures we don't do any timekeeping accounting before we're fully resumed.
    
    (akpm: fixes the machine-freezes-on-APM-resume bug)
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 635adb6cd25c8f816c9017a0a0349cd389eafcd3
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Jul 14 00:24:16 2006 -0700

    [PATCH] scx200_gpio: use 1 cdev for N minors, not N for N
    
    Remove the scx200_gpio's cdev-array & ksalloc, replacing it with a single
    static struct cdev, which is sufficient for all the pins.
    
    cdev_put is commented out since kernel wont link properly with it, and its
    apparently not needed.
    
    With these patches, this driver continues to work with Chris Boot's
    leds_48xx driver.
    
    Signed-off-by  Jim Cromie <jim.cromie@gmail.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae2d1f2f5b59d00b39283c52dc4ee675397bbacd
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Fri Jul 14 00:24:16 2006 -0700

    [PATCH] scx200_gpio: 1 cdev for N minors: cleanup, prep
    
    this patch is mostly cleanup of scx200_gpio :
    - drop #include <linux/config.h>
    - s/DEVNAME/DRVNAME/    apparently a convention
    - replace variable num_pins with  #define MAX_PINS
    - s/dev/devid/   to clarify that its a dev_t, not a struct device dev.
    - move devid = MKDEV(major,0)  into branch where its needed.
    
    2 minor 'changes' :
    
    - reduced MAX_PINS from 64 to 32.  Ive never tested other pins, and
      theyre all multiplexed with other functions, some of which may be in use
      on my soekris 4801, so I dont know what testing should yield.
    
    - +EXPORT_SYMBOL(scx200_access);
    
      This exposes the driver's vtable, which another driver can use along
      with #include <linux/nsc_gpio.h>, to manipulate a gpio-pin.
    
    Signed-off-by  Jim Cromie <jim.cromie@gmail.com>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bc02d8412b422388f86b09ae40d762c0bc05290
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 14 00:24:15 2006 -0700

    [PATCH] unexport open_softirq
    
    Christoph Hellwig:
    open_softirq just enables a softirq.  The softirq array is statically
    allocated so to add a new one you would have to patch the kernel.  So
    there's no point to keep this export at all as any user would have to
    patch the enum in include/linux/interrupt.h anyway.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cccedb1a4af9e96781f206acad638c05364e73ca
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 14 00:24:14 2006 -0700

    [PATCH] drivers/block/cpqarray.c: remove an unused variable
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60198f9992db1e36d5b4cc1526ff29550f7d002c
Author: Luca Tettamanti <kronos.it@gmail.com>
Date:   Fri Jul 14 00:24:13 2006 -0700

    [PATCH] Add try_to_freeze() to rt-test kthreads
    
    When CONFIG_RT_MUTEX_TESTER is enabled kernel refuses to suspend the
    machine because it's unable to freeze the rt-test-* threads.
    
    Add try_to_freeze() after schedule() so that the threads will be freezed
    correctly; I've tested the patch and it lets the notebook suspends and
    resumes nicely.
    
    Signed-off-by: Luca Tettamanti <kronos.it@gmail.com>
    Cc: Ingo Molnar <mingo@redhat.com>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddca60c59032b2c2babc0003cf01015aff340b79
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Fri Jul 14 00:24:12 2006 -0700

    [PATCH] lockdep: annotate the BLKPG_DEL_PARTITION ioctl
    
    The delete partition IOCTL takes the bd_mutex for both the disk and the
    partition; these have an obvious hierarchical relationship and this patch
    annotates this relationship for lockdep.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e56a7dcbb974d9725d80e50d70c6eed7f71110b
Author: Herbert Valerio Riedel <hvr@gnu.org>
Date:   Fri Jul 14 00:24:11 2006 -0700

    [PATCH] RTC subsystem, Add ISL1208 support
    
    Add support for the I2C-attached Intersil ISL1208 RTC chip.
    
    [akpm@osdl.org: cleanups, fixlets]
    Signed-off-by: Herbert Valerio Riedel <hvr@gnu.org>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bef317e364f065717819fbbe7965d4401820286c
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jul 14 00:24:10 2006 -0700

    [PATCH] ramdisk blocksize Kconfig entry
    
    Make the ramdisk blocksize configurable at kernel compilation time rather
    than only at boot or module load time, like a couple of the other ramdisk
    options.  I found this handy awhile back but thought little of it, until
    recently asked by a few of the testing folks here to be able to do the same
    thing for their automated test setups.
    
    The Kconfig comment is largely lifted from comments in rd.c, and hopefully
    this will increase the chances of making folks aware that the default value
    often isn't a great choice here (for increasing values of PAGE_SIZE, even
    moreso).
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 086626a747300e37043a553dac639c5900c4a2c0
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jul 14 00:24:10 2006 -0700

    [PATCH] Update ramdisk documentation
    
    The default ramdisk blocksize is actually 1024, not 512 bytes.  Also fixes
    up some trailing whitespace issues.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22c4af4092fc2e037ce2e2922023fc222cf0c443
Author: Luke Yang <luke.adi@gmail.com>
Date:   Fri Jul 14 00:24:09 2006 -0700

    [PATCH] nommu: export two symbols for drivers to use
    
    nommu.c needs to export two more symbols for drivers to use:
    remap_pfn_range and unmap_mapping_range.
    
    Signed-off-by: Luke Yang <luke.adi@gmail.com>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52fa259b5aaf310657e5d30be48a300860741447
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Jul 14 00:24:08 2006 -0700

    [PATCH] hdrinstall: remove asm/io.h from user visibility
    
    There's no excuse for userspace abusing this kernel header -- the kernel's
    headers are not intended to provide a library of helper routines for
    userspace.  Using <asm/io.h> from userspace is broken on most architectures
    anyway.  Just say 'no'.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e035cc35e54230eb704ee7feccf476ed2fb2ae29
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Jul 14 00:24:07 2006 -0700

    [PATCH] hdrinstall: remove asm/atomic.h from user visibility
    
    This isn't suitable for userspace to see -- the kernel headers are not a
    random library of stuff for userspace; they're only there to define the
    kernel<->user ABI for system libraries and tools.  Anything which _was_
    abusing asm/atomic.h from userspace was probably broken anyway -- as it often
    didn't even give atomic operation.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 998f6fabbf439e6d518dcbaf9191cb533447b57a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Jul 14 00:24:07 2006 -0700

    [PATCH] hdrinstall: remove asm/irq.h from user visibility
    
    Remove asm/irq.h from the exported headers -- there was never any good reason
    for it to have been listed.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0009652af385a42f0e0604136f772ead406c78d
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jul 14 00:24:06 2006 -0700

    [PATCH] del_timer_sync(): add cpu_relax()
    
    Relax the CPU in the del_timer_sync() busywait loop.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52e92e5788139921352213fa6faf6e30ff1f2f5a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jul 14 00:24:05 2006 -0700

    [PATCH] remove kernel/kthread.c:kthread_stop_sem()
    
    Remove the now-unneeded kthread_stop_sem().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 098c5eea03de4707019a205140296893252b4130
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Fri Jul 14 00:24:04 2006 -0700

    [PATCH] null-terminate over-long /proc/kallsyms symbols
    
    Got a customer bug report (https://bugzilla.novell.com/190296) about kernel
    symbols longer than 127 characters which end up in a string buffer that is
    not NULL terminated, leading to garbage in /proc/kallsyms.  Using strlcpy
    prevents this from happening, even though such symbols still won't come out
    right.
    
    A better fix would be to not use a fixed-size buffer, but it's probably not
    worth the trouble.  (Modversion'ed symbols even have a length limit of 60.)
    
    [bunk@stusta.de: build fix]
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 329c6e4257d6a89990d72617d91437e2ce59e426
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jul 14 00:24:03 2006 -0700

    [PATCH] uml: header formatting cleanups
    
    Clean up whitespace and return syntax in os.h.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b076bb02ee2c489da36c89e35c640bfe45c7d27e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jul 14 00:24:03 2006 -0700

    [PATCH] uml: tidy biarch gcc support
    
    On top of the previous biarch changes for UML, this makes the preprocessor
    changes a bit cleaner.  Specify the 64-bit build in CPPFLAGS on the x86_64
    SUBARCH, rather than #undef'ing i386.  Compile-tested with i386 and x86_64
    SUBARCHs.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5df0d1a2c0f7dbd135d978d02daf2d99e62ff7a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jul 14 00:24:02 2006 -0700

    [PATCH] uml: tidy longjmp macro
    
    The UML_SETJMP macro was requiring its users to pass in a argument which it
    could supply itself, since it wasn't used outside that invocation of the
    macro.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8477b55ba11a49515b26573a90414b718179c908
Author: Vadim Lobanov <vlobanov@speakeasy.net>
Date:   Fri Jul 14 00:24:01 2006 -0700

    [PATCH] i386: remove redundant might_sleep() in user accessors.
    
    On i386, the user space accessor functions copy_from/to_user() both invoke
    might_sleep(), do a quick sanity check, and then pass the work on to their
    __copy_from/to_user() counterparts, which again invoke might_sleep().
    Given that no actual work happens between these two calls, it is best to
    eliminate one of the redundant might_sleep()s.
    
    Signed-off-by: Vadim Lobanov <vlobanov@speakeasy.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e78a887a5942d06c81ccf0793fbf2bd83e982122
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jul 14 00:24:00 2006 -0700

    [PATCH] i386 kexec: allow the kexec on panic support to compile on voyager
    
    This patch removes the foolish assumption that SMP implied local apics.
    That assumption is not-true on the Voyager subarch.  This makes that
    dependency explicit, and allows the code to build.
    
    What gets disabled is just an optimization to get better crash dumps so the
    support should work if there is a kernel that will initialization on the
    voyager subarch under those harsh conditions.
    
    Hopefully we can figure out how to initialize apics in init_IRQ and remove
    the need to disable io_apics and this dependency.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7546075e7c08821732fa04119a9005c55ab432d
Author: Catalin Marinas <catalin.marinas@gmail.com>
Date:   Fri Jul 14 00:23:59 2006 -0700

    [PATCH] Fix a memory leak in the i386 setup code
    
    Signed-off-by: Catalin Marinas <catalin.marinas@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7015331098cc156c30282588bbd30bbf7a59291
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Jul 14 00:23:58 2006 -0700

    [PATCH] i386: handle_BUG(): don't print garbage if debug info unavailable
    
    handle_BUG() tries to print file and line number even when they're not
    available (CONFIG_DEBUG_BUGVERBOSE is not set.) Change this to print a
    message stating info is unavailable instead of printing a misleading
    message.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c38c8db7225465c8d124f38b24d3024decc26bbd
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Fri Jul 14 00:23:57 2006 -0700

    [PATCH] ia64: race flushing icache in COW path
    
    There is a race condition that showed up in a threaded JIT environment.
    The situation is that a process with a JIT code page forks, so the page is
    marked read-only, then some threads are created in the child.  One of the
    threads attempts to add a new code block to the JIT page, so a
    copy-on-write fault is taken, and the kernel allocates a new page, copies
    the data, installs the new pte, and then calls lazy_mmu_prot_update() to
    flush caches to make sure that the icache and dcache are in sync.
    Unfortunately, the other thread runs right after the new pte is installed,
    but before the caches have been flushed.  It tries to execute some old JIT
    code that was already in this page, but it sees some garbage in the i-cache
    from the previous users of the new physical page.
    
    Fix: we must make the caches consistent before installing the pte.  This is
    an ia64 only fix because lazy_mmu_prot_update() is a no-op on all other
    architectures.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8757d5fa6b75e8ea906baf0309d49b980e7f9bc9
Author: Jan Kiszka <jan.kiszka@web.de>
Date:   Fri Jul 14 00:23:56 2006 -0700

    [PATCH] mm: fix oom roll-back of __vmalloc_area_node
    
    __vunmap must not rely on area->nr_pages when picking the release methode
    for area->pages.  It may be too small when __vmalloc_area_node failed early
    due to lacking memory.  Instead, use a flag in vmstruct to differentiate.
    
    Signed-off-by: Jan Kiszka <jan.kiszka@web.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e322fedf0c59938716cdfbafbe364a170919aa1a
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Jul 14 00:23:56 2006 -0700

    [PATCH] IB/core: use correct gfp_mask in sa_query
    
    Avoid bogus out of memory errors: fix sa_query to actually pass gfp_mask
    supplied by the user to idr_pre_get.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Acked-by: "Sean Hefty" <mshefty@ichips.intel.com>
    Acked-by: "Roland Dreier" <rdreier@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit adfaa888a292e7f38fb43668d8994f246e371f0f
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Jul 14 00:23:55 2006 -0700

    [PATCH] fmr pool: remove unnecessary pointer dereference
    
    ib_fmr_pool_map_phys gets the virtual address by pointer but never writes
    there, and users (e.g.  srp) seem to assume this and ignore the value
    returned.  This patch cleans up the API to get the VA by value, and updates
    all users.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Acked-by: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74f76fbac72c84ac78620698a584d403b655e62a
Author: Ira Weiny <weiny2@llnl.gov>
Date:   Fri Jul 14 00:23:54 2006 -0700

    [PATCH] IB/cm: set private data length for reject messages
    
    Set private data length for reject messages to the correct size.  Fix from
    openib svn r8483.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6583eb3dcc1f03ce969594dae5573dbefce015dc
Author: Vu Pham <vu@mellanox.com>
Date:   Fri Jul 14 00:23:53 2006 -0700

    [PATCH] srp: fix fmr error handling
    
    srp_unmap_data assumes req->fmr is NULL if the request is not mapped, so we
    must clean it out in case of an error.
    
    Signed-off-by: Vu Pham <vu@mellanox.com>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Acked-by: Roland Dreier <rolandd@cisco.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0ee3404cce2c45f8b95b341dd6311cd92e5cee0
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Jul 14 00:23:52 2006 -0700

    [PATCH] IB/addr: gid structure alignment fix
    
    The device address contains unsigned character arrays, which contain raw GID
    addresses.  The GIDs may not be naturally aligned, so do not cast them to
    structures or unions.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04c335430f6d9f9088c852bc05a3a0c8baa921c4
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Jul 14 00:23:52 2006 -0700

    [PATCH] IB/cm: drop REQ when out of memory
    
    If a user of the IB CM returns -ENOMEM from their connection callback, simply
    drop the incoming REQ - do not attempt to send a reject.  This should allow
    the sender to retry the request.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0964d9161826ca5cab5a03192490ec676c8abf8c
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Fri Jul 14 00:23:51 2006 -0700

    [PATCH] IB/mthca: comment fix
    
    After recent changes, mthca_wq_init does not actually initialize the WQ as it
    used to - it simply resets all index fields to their initial values.  So,
    let's rename it to mthca_wq_reset.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Acked-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2290d2c9f51d7ee2f45adee79b4d9e080ca15d36
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Fri Jul 14 00:23:50 2006 -0700

    [PATCH] IB/mthca: fix static rate returned by mthca_ah_query
    
    mthca_ah_query returs the static rate of the address handle in internal mthc
    format.  fix it to use rate encoding from enum ib_rate, which is what users
    expect.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de45921535bfc3b1f63b426c2a9739635f864283
Author: Kirill Korotaev <dev@sw.ru>
Date:   Fri Jul 14 00:23:49 2006 -0700

    [PATCH] struct file leakage
    
    2.6.16 leaks like hell. While testing, I found massive leakage
    (reproduced in openvz) in:
    
    *filp
    *size-4096
    
    And 1 object leaks in
    *size-32
    *size-64
    *size-128
    
    It is the fix for the first one.  filp leaks in the bowels of namei.c.
    
    Seems, size-4096 is file table leaking in expand_fdtables.
    
    I have no idea what are the rest and why they show only accompanying
    another leaks.  Some debugging structs?
    
    [akpm@osdl.org, Trond: remove the IS_ERR() check]
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Cc: Kirill Korotaev <dev@openvz.org>
    Cc: <stable@kernel.org>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ee8ab9fbf21e6b87ad227cd46c0a4be41ab749b
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 14 21:48:03 2006 -0700

    Relax /proc fix a bit
    
    Clearign all of i_mode was a bit draconian. We only really care about
    S_ISUID/ISGID, after all.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc08632f8f26d479500f8107c84e206770cb901c
Author: Michal Ludvig <michal@logix.cz>
Date:   Sat Jul 15 11:08:50 2006 +1000

    [CRYPTO] padlock: Fix alignment after aes_ctx rearrange
    
    Herbert's patch 82062c72cd643c99a9e1c231270acbab986fd23f
    in cryptodev-2.6 tree breaks alignment rules for PadLock
    xcrypt instruction leading to General protection Oopses.
    
    This patch fixes the problem.
    
    Signed-off-by: Michal Ludvig <michal@logix.cz>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit ee7022dcfbf660727d6b8553cb0dbc0d4eae8f44
Author: Marc Zyngier <maz@misterjones.org>
Date:   Fri Jul 14 16:53:50 2006 -0700

    [SPARC64] Fix PSYCHO PCI controler init.
    
    pbm->name should be initialized before calling
    pbm_register_toplevel_resources. Move the call a few lines down to
    avoid a nice Oops.
    
    Signed-off-by: Marc Zyngier <maz@misterjones.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a49261585e2c89f16b5a4bb80f623d2e9c2c1566
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jul 14 16:49:55 2006 -0700

    [SPARC64] psycho: Fix pbm->name handling in pbm_register_toplevel_resources()
    
    We shouldn't overwrite it, it's the device node full name
    already and that's what we want.
    
    Based upon a report from Marc Zyngier.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5b4bbb3d78285ab735941365c17f1c55a228c659
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jul 13 16:07:25 2006 -0700

    [SERIAL] sunsab: Fix significant typo in sab_probe()
    
    Instead of initializing both ports of a SAB device
    properly, we were setting up the first port
    structure twice and ending up only with the second
    port, oops.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c964521c54304f51705764334f7b27a9518ed65a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jul 13 16:05:57 2006 -0700

    [SERIAL] sunsu: Report keyboard and mouse ports in kernel log.
    
    Otherwise there is no explicit mention of these devices.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d8573e20d5d6974305599dde42b5dd7583310ccf
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jul 13 16:05:26 2006 -0700

    [SPARC64]: Make sure IRQs are disabled properly during early boot.
    
    Else we trigger the new irqs_disable() assertion in start_kernel().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18b0bbd8ca6d3cb90425aa0d77b99a762c6d6de3
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jul 14 16:51:34 2006 -0700

    Fix nasty /proc vulnerability
    
    We have a bad interaction with both the kernel and user space being able
    to change some of the /proc file status.  This fixes the most obvious
    part of it, but I expect we'll also make it harder for users to modify
    even their "own" files in /proc.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0610d11b53ad15200618e38e4511373e3ed09e8a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 14 16:34:22 2006 -0700

    [VLAN]: __vlan_hwaccel_rx can use the faster ether_compare_addr
    
    The inline function compare_ether_addr is faster than memcmp.
    Also, don't need to drag in proc_fs.h, the only reference to proc_dir_entry
    is a pointer so the declaration is needed here.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Acked-by: Ben Greear <greearb@candelatech.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3a6251915df9e3d80d4a0d32bd8d24223906688
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 14 16:32:27 2006 -0700

    [PKT_SCHED] HTB: initialize upper bound properly
    
    The upper bound for HTB time diff needs to be scaled to PSCHED
    units rather than just assuming usecs.  The field mbuffer is used
    in TDIFF_SAFE(), as an upper bound.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Acked-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 36902f2e35b132442746df6034462b7cdb7d82ab
Author: Auke Kok <auke\-jan.h.kok@intel.com>
Date:   Fri Jul 14 16:14:55 2006 -0700

    e1000: bump version to 7.1.9-k4
    
    Bump the version to 7.1.9-k4 to indicate three extra changes.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit eb0f8054dd2e8b3cdf3af4771583b1dc2e1327cc
Author: Auke Kok <auke\-jan.h.kok@intel.com>
Date:   Fri Jul 14 16:14:48 2006 -0700

    e1000: fix panic on large frame receive when mtu=default
    
    A panic was reported when receiving 1522 size packets if using
    the default MTU. we should set the initial rx buffer length to the
    value that e1000changemtu sets so that we can receive any packet
    that would not be dropped by LPE=0.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke.jan.h.kok@intel.com>

commit f235a2abb27b9396d2108dd2987fb8262cb508a3
Author: Auke Kok <auke\-jan.h.kok@intel.com>
Date:   Fri Jul 14 16:14:34 2006 -0700

    e1000: remove CRC bytes from measured packet length
    
    After removing the hardware CRC stripping which causes problems with
    SOL and related issues, we need to compensate for this changed size.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit d3d9e484b2ca502c87156b69fa6b8f8fd5fa18a0
Author: Auke Kok <auke\-jan.h.kok@intel.com>
Date:   Fri Jul 14 16:14:23 2006 -0700

    e1000: Redo netpoll fix to address community concerns
    
    The original suggested fix for netpoll was found to be racy on SMP
    kernels. While it is highly unlikely that this race would ever be seen
    in the real world due to current netpoll usage models, we implemented
    this updated fix to address concerns.
    
    Signed-off-by: Mitch Williams <mitch.a.williams@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 53602f92dd3691616478a40738353694bcfef171
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 14 14:49:32 2006 -0700

    [IPV4]: Clear skb cb on IP input
    
    when data arrives at IP through loopback (and possibly other devices).
    So the field needs to be cleared before it confuses the route code.
    This was seen when running netem over loopback, but there are probably
    other device cases. Maybe this should go into stable?
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b1c495ffb3ee354a2e91bedc8b9e832cb7777043
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Fri Jul 14 16:23:33 2006 +0100

    [ARM] Fix cats build
    
    Fix more fallout from 894673ee6122a3ce1958e1fe096901ba5356a96b.
    
    arch/arm/mach-footbridge/cats-hw.c: In function 'fixup_cats':
    arch/arm/mach-footbridge/cats-hw.c:81: error: 'ORIG_VIDEO_LINES' undeclared (first use in this function)
    ...
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 79bd3f8563a275d1d068bbb9189a746dc6e96f3e
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jul 14 10:29:34 2006 +0200

    [SCSI] More buffer->request_buffer changes
    
    Seem like quite a few splipped through the cracks.  Here's a patch to
    update all references I could find:
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 27b437c8b7d519aac70a0254c2e04c29eff565a2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jul 13 19:26:39 2006 -0700

    [NET]: Update frag_list in pskb_trim
    
    When pskb_trim has to defer to ___pksb_trim to trim the frag_list part of
    the packet, the frag_list is not updated to reflect the trimming.  This
    will usually work fine until you hit something that uses the packet length
    or tail from the frag_list.
    
    Examples include esp_output and ip_fragment.
    
    Another problem caused by this is that you can end up with a linear packet
    with a frag_list attached.
    
    It is possible to get away with this if we audit everything to make sure
    that they always consult skb->len before going down onto frag_list.  In
    fact we can do the samething for the paged part as well to avoid copying
    the data area of the skb.  For now though, let's do the conservative fix
    and update frag_list.
    
    Many thanks to Marco Berizzi for helping me to track down this bug.
    
    This 4-year old bug took 3 months to track down.  Marco was very patient
    indeed :)
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ab6cf0d0cb96417ef65cc2c2120c0e879edf7a4a
Merge: 0d10e47... f4dee85...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 13 16:57:04 2006 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus: (53 commits)
      [MIPS] sparsemem: fix crash in show_mem
      [MIPS] vr41xx: Update workpad setup function
      [MIPS] vr41xx: Update e55 setup function
      [MIPS] vr41xx: Removed old v2.4 VRC4173 driver
      [MIPS] vr41xx: Move IRQ numbers to asm-mips/vr41xx/irq.h
      [MIPS] MIPSsim: Build fix, rename sim_timer_setup -> plat_timer_setup.
      [MIPS] Remove unused code.
      [MIPS] IP22 Fix brown paper bag in RTC code.
      [MIPS] Atlas, Malta, SEAD: Don't disable interrupts in mips_time_init().
      [MIPS] Replace board_timer_setup function pointer by plat_timer_setup.
      [MIPS] Nuke redeclarations of board_time_init.
      [MIPS] Remove redeclarations of setup_irq().
      [MIPS] Nuke redeclarations of board_timer_setup.
      [MIPS] Print out TLB handler assembly for debugging.
      [MIPS] SMTC: Reformat to Linux style.
      [MIPS] MIPSsim: Delete redeclaration of ll_local_timer_interrupt.
      [MIPS] IP27: Reformatting.
      [MIPS] IP27: Invoke setup_irq for timer interrupt so proc stats will be shown.
      [MIPS] IP27: irq_chip startup method returns unsigned int.
      [MIPS] IP27: struct irq_desc member handler was renamed to chip.
      ...

commit 0d10e47f9635ecafe5a9dc6e10cb056a87a4daa2
Merge: 300c215... 8ba10ab...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 13 16:38:58 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6:
      [CIFS] CIFS_DEBUG2 depends on CIFS

commit 300c215acd2462223a6595d3562dad67d0e10afd
Merge: 7b69a4c... 8b1b218...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 13 16:38:30 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc
    
    * master.kernel.org:/home/rmk/linux-2.6-mmc:
      [MMC] Change SDHCI version error to a warning
      [MMC] Fix incorrect register access

commit 7b69a4c360e8787877ebf5e42609b8bab13afa6a
Merge: a23f463... 68aa2c0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 13 16:38:02 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial
    
    * master.kernel.org:/home/rmk/linux-2.6-serial:
      [SERIAL] 8250: sysrq deadlock fix
      [SERIAL] 8250: add tsi108 serial support
      [SERIAL] IP22: fix serial console hangs
      [SERIAL] dz: Fix compilation error

commit a23f4636c9ae7f1f15c448080f1552864b404136
Merge: fc81830... 5cbc1b6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 13 16:37:29 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] arch/arm/kernel/bios32.c: no need to set isa_bridge
      [ARM] 3729/3: EABI padding rules necessitate the packed attribute of floatx80
      [ARM] 3725/1: sharpsl_pm: warn about wrong temperature
      [ARM] 3723/1: collie charging
      [ARM] 3728/1: Restore missing CPU Hotplug irq helper
      [ARM] 3727/1: fix ucb initialization on collie
      [ARM] Allow Versatile to be built for AB and PB
      [ARM] 3726/1: update {ep93xx,ixp2000,ixp23xx,lpd270,onearm} defconfigs to 2.6.18-rc1
      [ARM] 3721/1: Small cleanup for locomo.c

commit fc818301a8a39fedd7f0a71f878f29130c72193d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jul 13 09:12:21 2006 +0200

    [PATCH] revert slab.c locking change
    
    Chandra Seetharaman reported SLAB crashes caused by the slab.c lock
    annotation patch.  There is only one chunk of that patch that has a
    material effect on the slab logic - this patch undoes that chunk.
    
    This was confirmed to fix the slab problem by Chandra.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Tested-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4dee85e2c6a7d7adf7ea4d6d3053a41c78175b7
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Jul 13 23:01:50 2006 +0900

    [MIPS] sparsemem: fix crash in show_mem
    
    With sparsemem, pfn should be checked by pfn_valid() before pfn_to_page().
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bddc8134db00002a9fd1b33fcb45747bdd3a2777
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jul 13 17:33:33 2006 +0900

    [MIPS] vr41xx: Update workpad setup function
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f26811e0d89d412a2f5d8e16760e71d3b5c2702c
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jul 13 17:33:24 2006 +0900

    [MIPS] vr41xx: Update e55 setup function
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit efcb487a8e9a86874cf63c3fbf6c85bbf87e6d87
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jul 13 17:33:14 2006 +0900

    [MIPS] vr41xx: Removed old v2.4 VRC4173 driver
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 66151bbd20c6c62dbe5b131484c885086e3a8d29
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jul 13 17:33:03 2006 +0900

    [MIPS] vr41xx: Move IRQ numbers to asm-mips/vr41xx/irq.h
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5fd326573876e466c7693cbf06e9c88ecf86135d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 10 02:37:21 2006 +0100

    [MIPS] MIPSsim: Build fix, rename sim_timer_setup -> plat_timer_setup.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 75da124ac0141e463cb2738fdc02dd24fc8b6e95
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 10 02:27:21 2006 +0100

    [MIPS] Remove unused code.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d1d60ded2b6cca40e2f14ea2771cbe815c11abb5
Author: Julien BLACHE <jblache@debian.org>
Date:   Sun Jul 9 00:21:24 2006 +0200

    [MIPS] IP22 Fix brown paper bag in RTC code.
    
    This patch fixes a typo in arch/mips/sgi-ip22/ip22-time.c, leading to the
    incorrect year being set into the RTC chip.
    
    Signed-off-by: Julien BLACHE <jb@jblache.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ece2246ebda3d86cedb9414e7771862a6c9a054c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 22:27:23 2006 +0100

    [MIPS] Atlas, Malta, SEAD: Don't disable interrupts in mips_time_init().
    
    By the time it's called from time_init interrupts are still disabled.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 54d0a216f40e060ba4265bb851cc36b3ca55d1a8
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 21:38:56 2006 +0100

    [MIPS] Replace board_timer_setup function pointer by plat_timer_setup.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    
    ---

commit 2c70df5b9807293705d8123d1f36579831ac09eb
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 20:53:19 2006 +0100

    [MIPS] Nuke redeclarations of board_time_init.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 046f8f705ba684312f82e36abbd42c080f4e4e9a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 20:49:41 2006 +0100

    [MIPS] Remove redeclarations of setup_irq().
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 50785a595cfc8ff9188f9be395ccb214ac43e190
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 20:42:40 2006 +0100

    [MIPS] Nuke redeclarations of board_timer_setup.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 115f2a44e07b24e6fa4d636c9a95e8e05a0d9d69
Author: Thiemo Seufer <ths@networkno.de>
Date:   Sun Jul 9 01:47:06 2006 +0100

    [MIPS] Print out TLB handler assembly for debugging.
    
    Small update, using pr_debug and pr_info.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4bf42d4272d83b42e1492215a34d42dae8e6fccc
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jul 8 11:32:58 2006 +0100

    [MIPS] SMTC: Reformat to Linux style.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 783b09dc2806429560d0211564a94d6570b96ee3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jul 8 11:25:38 2006 +0100

    [MIPS] MIPSsim: Delete redeclaration of ll_local_timer_interrupt.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 40fa4b6a07866bbd70b22b78b349960ebaef7c8e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jul 7 23:57:19 2006 +0100

    [MIPS] IP27: Reformatting.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bf283630d0990f2ad80bb4601ff275f9d41a579e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jul 7 23:56:32 2006 +0100

    [MIPS] IP27: Invoke setup_irq for timer interrupt so proc stats will be shown.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cc25ab008633ffd6010f01003ad380f9c7dd5374
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jul 7 23:53:05 2006 +0100

    [MIPS] IP27: irq_chip startup method returns unsigned int.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a365e53fe147e2ab2c902ddb35193dae4fb976e7
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jul 7 23:49:30 2006 +0100

    [MIPS] IP27: struct irq_desc member handler was renamed to chip.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b8828d3e0d0fa33ac7f6dbd7c6820d9e0f7be40d
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sat Jul 8 00:51:11 2006 +0900

    [MIPS] Remove vmlinux.rm200 target from makefile.
    
    Long ago in the dark ages this was used a MIPS a.out binary to be used
    with Milo which is obsolete since years.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2874fe55332e2fb4e9c8e672cf2b7361bb168d17
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sat Jul 8 00:42:12 2006 +0900

    [MIPS] vr41xx: Replace magic number for P4K bit with symbol.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 1058ecda9bedaa2c3438376caa5f1925f3d15bbd
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sat Jul 8 00:42:01 2006 +0900

    [MIPS] vr41xx: Changed workaround to recommended method
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 30f244aed36f569c2e3ea6e8457bf66adaf98a3d
Author: Thiemo Seufer <ths@networkno.de>
Date:   Fri Jul 7 10:38:51 2006 +0100

    [MIPS] Oprofile: Fix build failure due to warning and -Werror.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 192ef366198ce16c0379100565cdc5b7bd68511f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jul 7 14:07:18 2006 +0100

    [MIPS] TRACE_IRQFLAGS_SUPPORT support.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 8d197f3d17d4f43eb7d032491af7fc959cbed4fa
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Fri Jul 7 14:26:41 2006 +0900

    [MIPS] Fix rdhwr_op definition.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 565200a14641eb7ab7b96a726441f2e4d663d15c
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Fri Jul 7 00:26:02 2006 +0900

    [MIPS] Do not count pages in holes with sparsemem
    
    With some memory model other than FLATMEM, the single node can
    contains some holes so there might be many invalid pages.  For
    example, with two 256M memory and one 256M hole, some variables
    (num_physpage, totalpages, nr_kernel_pages, nr_all_pages, etc.) will
    indicate that there are 768MB on this system.  This is not desired
    because, for example, alloc_large_system_hash() allocates too many
    entries.
    
    Use free_area_init_node() with counted zholes_size[] instead of
    free_area_init().
    
    For num_physpages, use number of ram pages instead of max_low_pfn.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7de58fab9ccb63b4194ce39cf163a7491921d037
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Wed Jul 5 01:22:44 2006 +0900

    [MIPS] Sparsemem fixes
    
    1. MIPS should select SPARSEMEM_STATIC since allocating bootmem in
       memory_present() will corrupt bootmap area.
    2. pfn_valid() for SPARSEMEM is defined in linux/mmzone.h
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cfbae5d331b8872719b5cddb0ed5292c393ad78a
Author: Thiemo Seufer <ths@networkno.de>
Date:   Wed Jul 5 18:43:29 2006 +0100

    [MIPS] IP32: Fix wreckage caused by recent SA_* constant replacement.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4e8ab3618273b8c5f87a46f82902fbd4138f97f4
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Jul 4 22:59:41 2006 +0900

    [MIPS] VR41xx: Set VR41_CONF_BP only for PrId 0x0c80.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f72af3cf06370cedbe387364d447223e5252a000
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Jul 4 22:16:28 2006 +0900

    [MIPS] MIPS MT: Fix build error.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5af1c7a4d4942812c5172cc0806854837264fff5
Author: Thiemo Seufer <ths@networkno.de>
Date:   Wed Jul 5 14:32:51 2006 +0100

    [MIPS] BCM1480: Fix fatal typo in the rewritten interrupt handler.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6e61e85b0980f7b88cd5c4b822386ed00dd7e295
Author: Thiemo Seufer <ths@networkno.de>
Date:   Wed Jul 5 14:26:38 2006 +0100

    [MIPS] Sibyte: Improve interrupt latency again for sb1250/bcm1480
    
    this patch restores the behaviour of the old (assembly-written)
    interrupt handler, the handler is left as soon as a single interrupt
    cause is handled.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit fc5d2d279ff820172a698706d33e733d4578bd6c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jul 6 13:04:01 2006 +0100

    [MIPS] Use the proper technical term for naming some of the cache  macros.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 879ba8c88a32f2bd3d3369837afdc148bd66bb04
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jul 6 09:47:52 2006 +0100

    [MIPS] IP22: Remove SYS_SUPPORTS_SMP test code.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 57725f9eb689d04c9ae4334cef65633c0b95558f
Author: Chris Dearman <chris@mips.com>
Date:   Fri Jun 30 23:35:28 2006 +0100

    [MIPS] Panic on fp exception in kernel mode.
    
    There should never be a FP exception in kernel mode.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e1a4e469d77297fd006a3cf2b605fc6f782a8d26
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 3 17:02:35 2006 +0100

    [MIPS] Malta: Fix build of certain configs.

commit 6fe725c01c0c547c4287ba3de5ebc8f884178409
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Mon Jul 3 08:17:09 2006 +0200

    [MIPS] au1xxx: Support both YAMON and U-Boot
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c36cd4bab5084798b401d529129a950f4a48662d
Author: Thiemo Seufer <ths@networkno.de>
Date:   Mon Jul 3 13:30:01 2006 +0100

    [MIPS] Save 2k text size in cpu-probe
    
    The appended patch drops the inline for decode_configs, this saves about
    2k of text size.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3a01c49ad81d301fe7265dd63bfb15ee3c3754ef
Author: Thiemo Seufer <ths@networkno.de>
Date:   Mon Jul 3 13:30:01 2006 +0100

    [MIPS] Uses MIPS_CONF_AR instead of magic constants.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 31473747bd441719f9f6a07385684dce547533e0
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Jul 3 00:09:47 2006 +0900

    [MIPS] Make SPARSEMEM selectable on QEMU.
    
    This might be helpfull to debug sparsemem on mips.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b1c6cd429b5f9fde39f5950ba9f2993286954f6c
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Jul 3 00:09:47 2006 +0900

    [MIPS] Make SPARSEMEM selectable on QEMU.
    
    This might be helpfull to debug sparsemem on mips.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a5e68986e8e75546901010fe4e3485f6cd60b4a6
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sun Jul 2 23:17:27 2006 +0900

    [MIPS] Au1000: Remove au1000 code.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a722df087dc745a213573ed860be57a255e799bb
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sun Jul 2 23:13:34 2006 +0900

    [MIPS] vr41xx: Removed unused definitions for NEC CMBVR4133.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 722cfd90420b660ad13f933efb135daf1d0e5400
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 2 16:31:14 2006 +0100

    [MIPS] Wire up vmsplice(2) and move_pages(2).
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 94dee171df34b7955cd647da4c40ba67d55a7671
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 2 14:41:42 2006 +0100

    [MIPS] Eleminate interrupt migration helper use.
    
    > #define hw_interrupt_type       irq_chip
    > typedef struct irq_chip         hw_irq_controller;
    > #define no_irq_type             no_irq_chip
    > typedef struct irq_desc         irq_desc_t;
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e1e80b4d24eddd1a76cd386e25164cf159661bd6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jul 1 22:07:23 2006 +0100

    [MIPS] Don't include obsolete <linux/config.h>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2e128dedcd66d2f17f42a45dacc223fa2dcd8acd
Author: Chris Dearman <chris@mips.com>
Date:   Fri Jun 30 12:32:37 2006 +0100

    [MIPS] Default cpu_has_mipsmt to a runtime check
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 70ae6126090686b2e957f0abd2a3c882e94c7071
Author: Chris Dearman <chris@mips.com>
Date:   Fri Jun 30 12:32:37 2006 +0100

    [MIPS] Use KERN_DEBUG to log the SDBBP messages
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e35a5e35e0f45209a45ec2fd6df90f5ac3a05992
Author: Chris Dearman <chris@mips.com>
Date:   Fri Jun 30 14:19:45 2006 +0100

    [MIPS] Less noise on multithreading exceptions.
    
    Make the MT handler silent and output the MT exception type at debug
    priority.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 98ab66cdd182f35008fb8993bb930ddde88db923
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jul 13 21:25:57 2006 +0100

    [MIPS] Update defconfigs to 2.6.18-rc1.

commit 8717433ccae06788e58d55699027b47d042be1f4
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 25 17:42:21 2006 +0200

    [MIPS] IP27: Don't destroy interrupt routing information on shutdown irq.
    
    This fixes the "not syncing: Could not identify cpu/level ..." panic
    when a PCI irq is requested the second time.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 25969354a385f347b55aafb1040dfc21263fa7c3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jun 22 22:42:32 2006 +0100

    [MIPS] Avoid interprocessor function calls.
    
    On the 34K where multiple virtual processors are implemented in a single
    core and share a single TLB, interprocessor function calls are not needed
    to flush a cache, so avoid them.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3e705f279a942471b258b1c7a9e54aa8ff36b89f
Author: Russell King <rmk@arm.linux.org.uk>
Date:   Thu Jul 13 20:48:35 2006 +0100

    [PATCH] Fix broken kernel headers preventing ARM build
    
    As a result of 894673ee6122a3ce1958e1fe096901ba5356a96b, the ARM
    architecture is more or less unbuildable - only one defconfig appears
    to build, with all others erroring out with:
    
    	  CC      arch/arm/kernel/setup.o
    	In file included from /home/rmk/git/linux-2.6-rmk/arch/arm/kernel/setup.c:22:
    	/home/rmk/git/linux-2.6-rmk/include/linux/root_dev.h:7: warning: implicit declaration of function `MKDEV'
    	...
    
    Essentially, root_dev.h uses MKDEV and dev_t, but does not include any
    headers which provide either of these definitions.  The reason it worked
    previously is that linux/tty.h just happened to include the required
    headers for linux/root_dev.h.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1aaee53f2877a7afa55e8245c241ff60a86367d
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Thu Jul 13 14:46:03 2006 +0200

    [PATCH] lockdep: annotate mm/slab.c
    
    mm/slab.c uses nested locking when dealing with 'off-slab'
    caches, in that case it allocates the slab header from the
    (on-slab) kmalloc caches. Teach the lock validator about
    this by putting all on-slab caches into a separate class.
    
    this patch has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 873623dfabaa6ebbdc1ce16c1766a3c0ec5d9923
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jul 13 14:44:38 2006 +0200

    [PATCH] lockdep: undo mm/slab.c annotation
    
    undo existing mm/slab.c lock-validator annotations, in preparation
    of a new, less intrusive annotation patch.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b1b21853bab15fe5b60b8222786fe036c4dc365
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Jul 11 21:07:10 2006 +0200

    [MMC] Change SDHCI version error to a warning
    
    O2 Micro's controllers have a larger specification version value and are
    therefore denied by the driver. When bypassing this check they seem to work
    fine. This patch makes the code a bit more forgiving by changing the error
    to a warning.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fb61e2895170920564410baadf71c5b3561dbf42
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Tue Jul 11 21:06:48 2006 +0200

    [MMC] Fix incorrect register access
    
    There was a writel() being used on a 16-bit register.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5cbc1b6f66313111f64e779bf1df3799bf5c2df8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 11 15:37:55 2006 +0200

    [ARM] arch/arm/kernel/bios32.c: no need to set isa_bridge
    
    Since this assignment was the only place on !alpha where isa_bridge was
    touched, it didn't have any effect.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0e2ffbf650bf97499c02327719383818777651e6
Merge: 1b0f06d... a83f982...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jul 13 07:53:11 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6 of HEAD
    
    * HEAD:
      [SPARC]: Fix OF register translations under sub-PCI busses.
      [SPARC64]: Refine Sabre wsync logic.
      [SERIAL] sunsu: Handle keyboard and mouse ports directly.
      [SPARC64]: Fix 2 bugs in sabre_irq_build()
      [SPARC64]: Update defconfig.
      [SPARC64]: Fix make headers_install
      [SPARC64]: of_device_register() error checking fix

commit 1b0f06d0b4860a8a73dc0b48540d82d8897ead71
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Thu Jul 13 09:32:41 2006 +1000

    [PATCH] m68knommu: fix result type in get_user() macro
    
    Keep the result holder variable the same type as the quantity we are
    retreiving in the get_user() macro - don't go through a pointer version
    of the user space address type.
    
    Using the address type causes problems if the address type was const
    (newer versions of gcc quite rightly error out for that condition).
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b43c7cec6bf9558336fb033d1217fc765d259c47
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Wed Jul 12 16:41:15 2006 -0400

    [PATCH] i386: system.h: remove extra semicolons and fix order
    
    include/asm-i386/system.h has trailing semicolons in some of the
    macros that cause legitimate code to fail compilation, so remove
    them. Also remove extra blank lines within one group of macros.
    
    And put stts() and clts() back together; they got separated somehow.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92c0bfea9ba61ec2d3a6d4fb1af39358d5e52b71
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:34:43 2006 -0600

    [SCSI] mptfusion: bump version to 3.04.01
    
    bump version to 3.04.01
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ba856d32f2cede67fd2a59a53bc662360f17c7b5
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:34:01 2006 -0600

    [SCSI] mptfusion: misc fix's
    
    * removing obsolete 1066, 1066E from Kconfig
    * initializing aen_event_read_flag after host reset
    * remove oem references
    * remove obsolete mpt_pq_filter command line option
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0ccdb007596642dae8d7b323127d8840939b844a
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:33:13 2006 -0600

    [SCSI] mptfusion: firmware download boot fix's
    
    Fix's to insure download boot could occur when
    either channel of 1030 is reset. Necessary in order
    for onboard controller in flashless environment
    to become operational.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3dc0b03fec73339199a995acd5a47478da0b4dc4
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:32:33 2006 -0600

    [SCSI] mptfusion: task abort fix's
    
    Fix's to insure proper status is returned to midlayer
    when a task abort failed to be aborted by controller
    firmware.
    
    Also sanity checks to prevent scsi cmd from being
    double completed during error recovery.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bf4515227c36fde1887f3fc0afc25a9bb4726842
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:25:35 2006 -0600

    [SCSI] mptfusion: sas nexus loss support
    
    sas nexus loss support for systems that suport failover.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4f766dc6d30ab0d958cbeafaeab5ed2538ec7015
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:24:07 2006 -0600

    [SCSI] mptfusion: sas loginfo update
    
    Adding more sas loginfo strings.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d58b2725d28041ff9412fecb109bebf76b1a9b26
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:23:23 2006 -0600

    [SCSI] mptfusion: mptctl panic when loading
    
    Fix panic for when mptctl is loading at the same time
    when one of the fusion llds (mptsas/mptfc/mptspi) is loading.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 786899b013cdf7aeb2aaaf7390c442f02bba24af
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jul 11 17:22:22 2006 -0600

    [SCSI] mptfusion: sas enclosures with smart drive
    
    Adding support for sas enclosures with smart drives.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a9da396a37fb3da5d0f212c41c6e96bcbf8fe590
Author: Koen Kooi <koen@dominion.kabel.utwente.nl>
Date:   Thu Jul 13 13:04:24 2006 +0100

    [ARM] 3729/3: EABI padding rules necessitate the packed attribute of floatx80
    
    Patch from Koen Kooi
    
    EABI padding rules necessitate the packed attribute of floatx80,
    otherwise nwfpe complains about invalid structure sizes.
    
    Signed-off-by: Koen Kooi <koen@dominion.kabel.utwente.nl>
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a83f982313bc60dd3d87e50f8c88d6a169e8a5a0
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 12 23:19:31 2006 -0700

    [SPARC]: Fix OF register translations under sub-PCI busses.
    
    There is an implicit assumption in the code that ranges will translate
    to something that can fit in 2 32-bit cells, or a 64-bit value.  For
    certain kinds of things below PCI this isn't necessarily true.
    
    Here is what the relevant OF device hierarchy looks like for one of
    the serial controllers on an Ultra5:
    
        Node 0xf005f1e0
            ranges:      00000000.00000000.00000000.000001fe.01000000.00000000.01000000
                         01000000.00000000.00000000.000001fe.02000000.00000000.01000000
                         02000000.00000000.00000000.000001ff.00000000.00000001.00000000
                         03000000.00000000.00000000.000001ff.00000000.00000001.00000000
            device_type:  'pci'
            model:  'SUNW,sabre'
    
            Node 0xf005f9d4
                device_type:  'pci'
                model:  'SUNW,simba'
    
               Node 0xf0060d24
                    ranges:  00000010.00000000 82010810.00000000.f0000000 01000000
    			 00000014.00000000 82010814.00000000.f1000000 00800000
                    name:  'ebus'
    
                    Node 0xf0062dac
                        reg:  00000014.003083f8.00000008 --> 0x1ff.f13083f8
                        device_type:  'serial'
                        name:  'su'
    
    So the correct translation here is:
    
    1) Match "su" register to second ranges entry of 'ebus', which translates
       into a PCI triplet "82010814.00000000.f1000000" of size 00800000, which
       gives us "82010814.00000000.f13083f8".
    
    2) Pass-through "SUNW,simba" since it lacks ranges property
    
    3) Match "82010814.00000000.f13083f8" to third ranges property of PCI
       controller node 'SUNW,sabre', and we arrive at the final physical
       MMIO address of "0x1fff13083f8".
    
    Due to the 2-cell assumption, we couldn't translate to a PCI 3-cell
    value, and we couldn't perform a pass-thru on it either.
    
    It was easiest to just stop splitting the ranges application operation
    between two methods, ->map and ->translate, and just let ->map do all
    the work.  That way it would work purely on 32-bit cell arrays instead
    of having to "return" some value like a u64.
    
    It's still not %100 correct because the out-of-range check is still
    done using the 64 least significant bits of the range and address.
    But it does work for all the cases I've thrown at it so far.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9bbd952e7f965757b5c913b6f98ad37a191137bd
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 12 21:16:07 2006 -0700

    [SPARC64]: Refine Sabre wsync logic.
    
    It is only needed when there is a PCI-PCI bridge sitting
    between the device and the PCI host controller which is
    not a Simba APB bridge.
    
    Add logic to handle two special cases:
    
    1) device behind EBUS, which sits on PCI
    2) PCI controller interrupts
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 91d1ed1a6d225e3cf4bd8ede6235b1be65f7651a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 12 21:04:21 2006 -0700

    [SERIAL] sunsu: Handle keyboard and mouse ports directly.
    
    The sunsu_ports[] array exists merely to be able to easily
    use an integer index to get at the proper serial console
    port struct.
    
    We size this only for real ports, not for the keyboard and
    mouse, and thus keyboard and mouse port registration would
    fail.
    
    Fix this by dynamically allocating the port struct for the
    keyboard and mouse, instead of using the sunsu_ports[]
    array.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a23c3a86e9952a8badb49a6bb1de455c1f5bad6d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 12 15:59:53 2006 -0700

    [SPARC64]: Fix 2 bugs in sabre_irq_build()
    
    When installing the IRQ pre-handler, we were not setting up the second
    argument correctly.  It should be a pointer to the sabre_irq_data, not
    the config space PIO address.
    
    Furthermore, we only need this pre-handler installed if the device
    sits behind a PCI bridge that is not Sabre or Simba/APB.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 17556fe861d8f76ed13e975ceb6eae450671aba1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jul 12 14:01:26 2006 -0700

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 50f73fe026b2bda49e53cef2dd57a79f84879733
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Jul 12 13:56:53 2006 -0700

    [SPARC64]: Fix make headers_install
    
    A minor typo in the include/asm-sparc64/Kbuild file prevents the make
    headers_install from building a useful tree of kernel headers for
    sparc64.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Tom 'spot' Callaway <tcallawa@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6cc8b6f51eb1af72882c279f691c5de7d5a43bf2
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 15:28:54 2006 -0700

    [SPARC64]: of_device_register() error checking fix
    
    device_create_file() can fail.  This causes the sparc64 compile to
    fail when my fanatical __must_check patch is applied, due to -Werror.
    
    [ Added necessary identical fix for sparc32. -DaveM]
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e47f31787dee5bf57453e18edefff56e17fa44f9
Merge: a048640... a6f157a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 21:19:42 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6 of HEAD
    
    * HEAD:
      [NET]: fix __sk_stream_mem_reclaim
      [Bluetooth] Fix deadlock in the L2CAP layer
      [Bluetooth] Let BT_HIDP depend on INPUT
      [Bluetooth] Avoid NULL pointer dereference with tty->driver
      [Bluetooth] Remaining transitions to use kzalloc()
      [WAN]: converting generic HDLC to use netif_dormant*()
      [IPV4]: Fix error handling for fib_insert_node call
      [NETROM] lockdep: fix false positive
      [ROSE] lockdep: fix false positive
      [AX.25]: Optimize AX.25 socket list lock
      [IPCOMP]: Fix truesize after decompression
      [IPV6]: Use ipv6_addr_src_scope for link address sorting.
      [TCP] tcp_highspeed: Fix AI updates.
      [MAINTAINERS]: Add proper entry for TC classifier
      [NETROM]: Drop lock before calling nr_destroy_socket
      [NETROM]: Fix locking order when establishing a NETROM circuit.
      [AX.25]: Fix locking of ax25 protocol function list.
      [IPV6]: order addresses by scope

commit a0486407bea3f0545ee3fcfb768b6763c5c2b459
Merge: 2513eb8... 5cab828...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 21:19:23 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6 of HEAD
    
    * HEAD:
      [PATCH] hwmon: Documentation update for abituguru
      [PATCH] hwmon: Fix for first generation Abit uGuru chips
      [PATCH] hwmon: New maintainer for w83791d
      [PATCH] pca9539: Honor the force parameter
      [PATCH] i2c-algo-bit: Wipe out dead code
      [PATCH] i2c: Handle i2c_add_adapter failure in i2c algorithm drivers
      [PATCH] i2c: New mailing list
      [PATCH] i2c-ite: Plan for removal
      [PATCH] i2c-powermac: Fix master_xfer return value
      [PATCH] scx200_acb: Fix the block transactions
      [PATCH] scx200_acb: Fix the state machine
      [PATCH] i2c-iop3xx: Avoid addressing self
      [PATCH] i2c: Fix 'ignore' module parameter handling in i2c-core

commit 2513eb8e67a2483aecb5bf7fead7692d5aabbdcd
Merge: d3745f4... cd6ef2a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 21:19:06 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/gregkh/driver-2.6 of HEAD
    
    * HEAD:
      [PATCH] The scheduled unexport of insert_resource
      [PATCH] remove kernel/power/pm.c:pm_unregister_all()
      [PATCH] Driver core: bus.c cleanups
      [PATCH] Driver core: kernel-doc in drivers/base/core.c corrections
      [PATCH] Driver core: fix driver-core kernel-doc

commit d3745f46e32d86de188cf378f923b7a2ed5274f9
Merge: 70d002b... ffadcc2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 21:17:41 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6 of HEAD
    
    * HEAD:
      [PATCH] PCI: PCIE power management quirk
      [PATCH] PCI: add PCI Express AER register definitions to pci_regs.h
      [PATCH] PCI: Clear abnormal poweroff flag on VIA southbridges, fix resume
      [PATCH] PCI: poper prototype for arch/i386/pci/pcbios.c:pcibios_sort()

commit 70d002bccac5e107fafb95e83fcb7fc010a88695
Merge: 7f0852f... a969888...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 21:16:52 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6 of HEAD
    
    * HEAD: (44 commits)
      [PATCH] USB: move usb-serial.h to include/linux/usb/
      [PATCH] USB: Anydata: Fixes wrong URB callback.
      [PATCH] USB: gadget section fixups
      [PATCH] USB: another unusual device
      [PATCH] USB: Add one VID/PID to ftdi_sio
      [PATCH] USB: unusual_devs entry for Sony DSC-H5
      [PATCH] USB: unusual_devs entry for Nokia E61
      [PATCH] USB: unusual_devs entry for Nokia N91
      [PATCH] USB: add ZyXEL vendor/product ID to rtl8150 driver
      [PATCH] USB: Option driver: new product ID
      [PATCH] USB: add support for WiseGroup., Ltd SmartJoy Dual PLUS Adapter
      [PATCH] USB: ipw.c driver fix
      [PATCH] USB: remove devfs information from Kconfig
      [PATCH] USB: remove empty destructor from drivers/usb/mon/mon_text.c
      [PATCH] USB: ipaq.c timing parameters
      [PATCH] USB: ipaq.c bugfixes
      [PATCH] USB: ehci: fix bogus alteration of a local variable
      [PATCH] USB: add driver for non-composite Sierra Wireless devices
      [PATCH] USB: fix pointer dereference in drivers/usb/misc/usblcd
      [PATCH] USB: Kill compiler warning in quirk_usb_handoff_ohci
      ...

commit 7f0852f959d8e92786c684ebd7fee3332a2f4efe
Merge: 2f1b925... f01cfb3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 21:16:32 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/gregkh/w1-2.6 of HEAD
    
    * HEAD:
      [PATCH] w1: remove drivers/w1/w1.h
      [PATCH] w1: fix idle check loop in ds2482
      [PATCH] W1: remove w1 mail list from lm_sensors.

commit 2f1b9250516aa8744496abbbbb8a6066cb2b56db
Author: Linus Torvalds <torvalds@evo.osdl.org>
Date:   Wed Jul 12 21:04:16 2006 -0700

    Revert "[PATCH] pcmcia: Make ide_cs work with the memory space of CF-Cards if IO space is not available"
    
    This reverts commit 5040cb8b7e61b7a03e8837920b9eb2c839bb1947.
    
    It breaks previously working ide-cs PIO configurations, causing problems
    like
    
    	ide2: I/O resource 0xF883200E-0xF883200E not free.
    	ide2: ports already in use, skipping probe
    
    rather than a working kernel.
    
    Cc: Thomas Kleffel <tk@maintech.de>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72945b2b90a5554975b8f72673ab7139d232a121
Author: Len Brown <len.brown@intel.com>
Date:   Wed Jul 12 22:46:42 2006 -0400

    [PATCH] Revert "ACPI: execute Notify() handlers on new thread"
    
    This effectively reverts commit b8d35192c55fb055792ff0641408eaaec7c88988
    by reverts acpi_os_queue_for_execution() to what it was before that,
    except it changes the name to acpi_os_execute() to match ACPICA
    20060512.
    
    Signed-off-by: Len Brown <len.brown@intel.com>
    
    [ The thread execution doesn't actually solve the bug it set out to
      solve (see
    
    	http://bugzilla.kernel.org/show_bug.cgi?id=5534
    
      for more details) because the new events can get caught behind the AML
      semaphore or other serialization.  And when that happens, the notify
      threads keep on piling up until the system dies. ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6f157a88d1398d7ccb743c5a56138edf6f6ef0b
Author: Ian McDonald <ian.mcdonald@jandi.co.nz>
Date:   Wed Jul 12 17:58:53 2006 -0700

    [NET]: fix __sk_stream_mem_reclaim
    
    __sk_stream_mem_reclaim is only called by sk_stream_mem_reclaim.
    
    As such the check on sk->sk_forward_alloc is not needed and can be
    removed.
    
    Signed-off-by: Ian McDonald <ian.mcdonald@jandi.co.nz>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd4a59a8e5dd44299b2df4411e8d7b05902ef2e7
Merge: 155dbfd... 22e1170...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 16:32:16 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [PATCH] sky2: optimize receive restart
      [PATCH] sky2: PHY power on delays
      [PATCH] sky2: NAPI suspend/resume of dual port cards
      [PATCH] sky2: sky2_reset section mismatch
      [PATCH] sk98lin: fix truncated collision threshold mask
      [PATCH] skge: fix truncated collision threshold mask
      [PATCH] sky2: fix truncated collision threshold mask
      [PATCH] myri10ge return value fix
      [PATCH] Update smc91x driver with ARM Versatile board info
      [PATCH] ixgb: fix tx unit hang - properly calculate desciptor count
      [PATCH] smsc-ircc2: fix section reference mismatches
      [PATCH] 8139cp.c printk fix
      [PATCH] s2io driver irq fix
      [PATCH] e1000: irq naming update
      [PATCH] forcedeth: watermark fixup
      [PATCH] forcedeth: deferral fixup
      [PATCH] zd1211rw: usb_clear_halt not allowed in IRQ context
      [PATCH] bcm43xx-softmac: Fix an off-by-one condition in handle_irq_noise

commit cd6ef2ada54aa4788d5a3dee3cffaad41383a52a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 02:15:42 2006 -0700

    [PATCH] The scheduled unexport of insert_resource
    
    Implement the scheduled unexport of insert_resource.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 26865e9c26d2d336f385b821b531ce2b31008e20
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 02:15:43 2006 -0700

    [PATCH] remove kernel/power/pm.c:pm_unregister_all()
    
    Remove the deprecated and no longer used pm_unregister_all().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7e4ef085ea4b00cfc34e854edf448c729de8a0a5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 22:26:56 2006 +0200

    [PATCH] Driver core: bus.c cleanups
    
    This patch contains the following cleanups:
    - make the needlessly global bus_subsys static
    - #if 0 the unused find_bus()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 42734dafa43e453a8b6769a5ebd3a01ffc1fd116
Author: Henrik Kretzschmar <henne@nachtwindheim.de>
Date:   Wed Jul 5 00:53:19 2006 +0200

    [PATCH] Driver core: kernel-doc in drivers/base/core.c corrections
    
    Corrects the kerneldocs for device_create() and device_destroy()
    with an eye on coding style, grammar and readability.
    
    Signed-off-by: Henrik Kretzschmar <henne@nachtwindheim.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7d12e9de5d73a836f040157b27166e68990ea9b4
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jun 22 15:14:07 2006 -0700

    [PATCH] Driver core: fix driver-core kernel-doc
    
    Warning(/var/linsrc/linux-2617-g4//drivers/base/core.c:574): No description found for parameter 'class'
    Warning(/var/linsrc/linux-2617-g4//drivers/base/core.c:574): No description found for parameter 'devt'
    Warning(/var/linsrc/linux-2617-g4//drivers/base/core.c:626): No description found for parameter 'devt'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ffadcc2ff42ecedf71ea67d9051ff028927aed08
Author: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jul 12 08:59:00 2006 -0700

    [PATCH] PCI: PCIE power management quirk
    
    When changing power states from D0->DX and then from DX->D0, some
    Intel PCIE chipsets will cause a device reset to occur.  This will
    cause problems for any D State other than D3, since any state
    information that the driver will expect to be present coming from
    a D1 or D2 state will have been cleared.  This patch addes a
    flag to the pci_dev structure to indicate that devices should
    not use states D1 or D2, and will set that flag for the affected
    chipsets.  This patch also modifies pci_set_power_state() so that
    when a device driver tries to set the power state on
    a device that is downstream from an affected chipset, or on one
    of the affected devices it only allows state changes to or
    from D0 & D3.  In addition, this patch allows the delay time
    between D3->D0 to be changed via a quirk.  These chipsets also
    need additional time to change states beyond the normal 10ms.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f0312fd7e0e6f96fd847b0b2e1e0d2d2e8ef89d
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Wed Jul 12 09:41:47 2006 +0800

    [PATCH] PCI: add PCI Express AER register definitions to pci_regs.h
    
    Add new defines of PCI-Express AER registers and their bits into file
    include/linux/pci_regs.h.
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 709cf5ea7a8bea1b956d361ee7cef1945423200c
Author: Matthew Garrett <mjg59@srcf.ucam.org>
Date:   Fri Jun 30 02:31:25 2006 -0700

    [PATCH] PCI: Clear abnormal poweroff flag on VIA southbridges, fix resume
    
    Some VIA southbridges contain a flag in the ACPI register space that
    indicates whether an abnormal poweroff has occured, presumably with the
    intention that it can be cleared on clean shutdown.  Some BIOSes check this
    flag at resume time, and will re-POST the system rather than jump back to
    the OS if it's set.  Clearing it at boot time appears to be sufficient.
    I'm not sure if drivers/pci/quirks.c is the right place to do it, but I'm
    not sure where would be cleaner.
    
    [akpm@osdl.org: cleanups, build fix]
    Signed-off-by: Matthew Garrett <mjg59@srcf.ucam.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: "Brown, Len" <len.brown@intel.com>
    Cc: "Yu, Luming" <luming.yu@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6e2338992c5a7d0711ce09f1d1b79a1a27d37bca
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jun 28 18:54:33 2006 +0200

    [PATCH] PCI: poper prototype for arch/i386/pci/pcbios.c:pcibios_sort()
    
    This patch adds a proper prototype for pcibios_sort() in
    arch/i386/pci/pci.h.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a969888ce91673c7f4b86520d851a6f0d5a5fa7d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jul 11 21:22:58 2006 -0700

    [PATCH] USB: move usb-serial.h to include/linux/usb/
    
    USB serial outside of the kernel tree can not build properly due to
    usb-serial.h being buried down in the source tree.  This patch moves the
    location of the file to include/linux/usb and fixes up all of the usb
    serial drivers to handle the move properly.
    
    Cc: Sergei Organov <osv@javad.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 166ffccfd4556ac6a777982d193ae145bb0a21e0
Author: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
Date:   Tue Jul 11 14:19:25 2006 -0300

    [PATCH] USB: Anydata: Fixes wrong URB callback.
    
     Anydata is using usb_serial_generic_write_bulk_callback() for its
    read URB, but it should use usb_serial_generic_read_bulk_callback()
    instead (it's a read URB, isn't it?).
    
     Reported by Jon K Hellan <hellan@acm.org>.
    
    Signed-off-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a353678d3136306c1d00f0d2319de1dac8a6b1db
Author: David Brownell <david-b@pacbell.net>
Date:   Thu Jul 6 15:48:53 2006 -0700

    [PATCH] USB: gadget section fixups
    
    Recent section changes broke gadget builds on some platforms.  This patch
    is the best fix that's available until better section markings exist:
    
     - There's a lot of cleanup code that gets used in both init and exit paths;
       stop marking it as "__exit".
    
       (Best fix for this would be an "__init_or_exit" section marking, putting
       the cleanup in __init when __exit sections get discarded else in __exit.)
    
     - Stop marking the use-once probe routines as "__init" since references
       to those routines are not allowed from driver structures.  They're now
       marked "__devinit", which in practice is a net lose.
    
       (Best fix for this is likely to separate such use-once probe routines
       from the driver structure ... but in general, all busses that aren't
       hotpluggable will be forced to waste memory for all probe-only code.)
    
    In general these broken section rules waste an average of two to four kBytes
    per driver of code bloat ... because none of the relevant code can ever be
    reused after module initialization.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5501a48c15d4a3b81bee1358eb195e26c798d78f
Author: Phil Dibowitz <phil@ipom.com>
Date:   Tue Jul 4 12:46:43 2006 -0700

    [PATCH] USB: another unusual device
    
    Please add the attached device to unusual_devs.h.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e1979fef347f534c3797eaa3e10825235ed72766
Author: Colin Leroy <colin@colino.net>
Date:   Tue Jul 11 11:36:43 2006 +0200

    [PATCH] USB: Add one VID/PID to ftdi_sio
    
    This patch adds the Testo USB interface to the list of devices
    recognized by the ftdi_sio module. This device is based on a FT232BL
    chip, and is used as an interface to get data from digital sensors
    (thermometer, etc). See http://www.testo.com/
    
    Signed-off-by: Colin Leroy <colin@colino.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7e3bd120e52971d5e255ca800f7de6bf83d8f2d1
Author: Lars Jacob <jacob.lars@googlemail.com>
Date:   Mon Jul 10 11:53:58 2006 -0400

    [PATCH] USB: unusual_devs entry for Sony DSC-H5
    
    This patch (as749) extends the unusual_devs entry for the Sony DSC-T1 and
    T5 to cover the H5 as well.
    
    From: Lars Jacob <jacob.lars@googlemail.com>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 57b01b1e393b8b874421fb77d4f078b8ce725e63
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jul 10 11:51:12 2006 -0400

    [PATCH] USB: unusual_devs entry for Nokia E61
    
    This patch (as748) adds an unusual_devs entry for the Nokia E61 mobile
    phone.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9a01355e1779356a69d80d917aef009eda44284a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jul 7 13:45:13 2006 -0400

    [PATCH] USB: unusual_devs entry for Nokia N91
    
    This patch (as745) adds an unusual_devs entry for the Nokia N91, just like
    the entry for the N80 added a couple of weeks ago.  Apparently Nokia isn't
    using very good firmware these days...
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b6c2799dec0c9f6f6de35c2161b246c910108204
Author: Dan Streetman <ddstreet@ieee.org>
Date:   Wed Jul 5 19:17:27 2006 -0400

    [PATCH] USB: add ZyXEL vendor/product ID to rtl8150 driver
    
    I just got a "ZyXEL Prestige USB Adapter" that is actually RTL8150
    adapter.  Here is the relevant /proc/bus/usb/devices output (after
    adding the vendor/product IDs to the driver):
    
    T:  Bus=01 Lev=02 Prnt=02 Port=02 Cnt=02 Dev#=119 Spd=12  MxCh= 0
    D:  Ver= 1.10 Cls=00(>ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1
    P:  Vendor=0586 ProdID=401a Rev= 1.00
    S:  Manufacturer=ZyXEL
    S:  Product=Prestige USB Adapter
    S:  SerialNumber=1027
    C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=120mA
    I:  If#= 0 Alt= 0 #EPs= 3 Cls=ff(vend.) Sub=00 Prot=ff Driver=rtl8150
    E:  Ad=81(I) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=02(O) Atr=02(Bulk) MxPS=  64 Ivl=0ms
    E:  Ad=83(I) Atr=03(Int.) MxPS=   8 Ivl=1ms
    
    This patch adds the ZyXEL vendor ID to the rtl8150.c driver.  The
    device has absolutely no identifying marks on the outside for model
    type, just a serial number, and I can't find anything on ZyXEL's
    website, so I called the product ID PRODUCT_ID_PRESTIGE to match the
    product string.
    
    Signed-off-by: Dan Streetman <ddstreet@ieee.org>
    Acked-by: Petko Manolov <petkan@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e37de9e0d6591706a76cff63582cbc721c317333
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Thu Jul 6 13:12:53 2006 +0200

    [PATCH] USB: Option driver: new product ID
    
    Yet another "same name, somewhat different hardware" product.
    
    Signed-Off-By: Matthias Urlichs <smurf@smurf.noris.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b857c651e7e369c12098007772549f817b3bf961
Author: Navaho Gunleg <navahogunleg@gmail.com>
Date:   Fri Jun 30 09:44:03 2006 +0200

    [PATCH] USB: add support for WiseGroup., Ltd SmartJoy Dual PLUS Adapter
    
    This patch is to get the WiseGroup.,Ltd SmartJoy Dual Plus PS2-to-USB
    Adapter [0x6677:0x8802] correctly detected. It sets the NOGET and
    MULTI_INPUT quirks to make 2 joystick nodes appear in stead of only
    one.
    
    (As of yet, only confirmed working by myself.)
    
    Signed-off-by: Navaho Gunleg <navahogunleg@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b2f1b0d4649a6597c7320bf359e71014653c630d
Author: Bart Oldeman <bartoldeman@users.sourceforge.net>
Date:   Sun Jul 2 15:07:10 2006 +1200

    [PATCH] USB: ipw.c driver fix
    
    The below patch fixes the ipw module in kernel 2.6.17 for me; without
    this change it simply does not work at all (all but the first writes are
    refused because write_urb_busy is always 1).
    
    This problem was there in 2.6.15 as well, but at that point I used the
    (updated) ipw.c, version 0.4, from
    http://www.neology.co.za/products/opensource/ipwireless/ which no longer
    compiles with 2.6.17. It can be made to after a few changes but
    obviously it's easier if the built-in ipw driver works instead of having
    to download one from the neology site.
    
    From: Bart Oldeman <bartoldeman@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 49e523b90741b936c874c376b5d140add5c0084d
Author: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
Date:   Mon Jul 3 14:20:39 2006 +0200

    [PATCH] USB: remove devfs information from Kconfig
    
    Devfs is gone. We can remove that information.
    
    Signed-off-by: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 028d2a39d1cbcf17242a915f0852acdd36660822
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 02:34:47 2006 -0700

    [PATCH] USB: remove empty destructor from drivers/usb/mon/mon_text.c
    
    Remove destructor and call kmem_cache_create with NULL for the destructor.
    
    Acked-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Cc: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b33488eb5c27c13c3e88cdf29d344ccdcb0859f2
Author: Frank Gevaerts <frank.gevaerts@fks.be>
Date:   Fri Jun 30 02:34:45 2006 -0700

    [PATCH] USB: ipaq.c timing parameters
    
    Adds configurable waiting periods to the ipaq connection code. These are
    not needed when the pocketpc device is running normally when plugged in,
    but they need extra delays if they are physically connected while
    rebooting.
    
    There are two parameters :
    
    * initial_wait : this is the delay before the driver attemts to start the
      connection. This is needed because the pocktpc device takes much
      longer to boot if the driver starts sending control packets too soon.
    
    * connect_retries : this is the number of times the control urb is
      retried before finally giving up. The patch also adds a 1 second delay
      between retries.
    
    I'm not sure if the cases where this patch is useful are general enough
    to include this in the kernel.
    
    Signed-off-by: Frank Gevaerts <frank.gevaerts@fks.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b512504e5671f83638be0ddb085c4b1832f623d3
Author: Frank Gevaerts <frank.gevaerts@fks.be>
Date:   Fri Jun 30 02:34:44 2006 -0700

    [PATCH] USB: ipaq.c bugfixes
    
    This patch fixes several problems in the ipaq.c driver with connecting
    and disconnecting pocketpc devices:
    
    * The read urb stayed active if the connect failed, causing nullpointer
      dereferences later on.
    
    * If a write failed, the driver continued as if nothing happened. Now it
      handles that case the same way as other usb serial devices (fix by
      Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>)
    
    Signed-off-by: Frank Gevaerts <frank.gevaerts@fks.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b972b68c396cfa9f8af7e0b314e22705251bc218
Author: David Brownell <david-b@pacbell.net>
Date:   Fri Jun 30 02:34:42 2006 -0700

    [PATCH] USB: ehci: fix bogus alteration of a local variable
    
    In a rare and all-but-unused path, the EHCI driver could reuse a variable
    in a way that'd make trouble.  Specifically, if the first root hub port
    gets an overcurrent event (rare) during a remote wakeup scenario (all but
    unused in today's Linux, except for folk working with suspend-to-RAM and
    similar sleep states), that would look like a fatal error which would shut
    down the controller.  Fix by not reusing that variable.
    
    Spotted by Per Hallsmark <saxofon@musiker.nu>
    Fixes http://bugzilla.kernel.org/show_bug.cgi?id=6661
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 69de51fdda3fd984541978313b66e4f2c44cc23e
Author: Kevin Lloyd <linux@sierrawireless.com>
Date:   Fri Jun 30 11:17:55 2006 -0700

    [PATCH] USB: add driver for non-composite Sierra Wireless devices
    
    This patch creates a new driver, sierra.c, that supports the new
    non-composite Sierra Wireless WWAN devices. The older Sierra
    Wireless and Airprime devices are supported in airprime.c.
    
    Signed-off-by: Kevin Lloyd  <linux@sierrawireless.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 053be305d3a5ae0152991f25c6579127fb48710c
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Tue Jun 27 00:57:42 2006 +0200

    [PATCH] USB: fix pointer dereference in drivers/usb/misc/usblcd
    
    coverity spotted (id #185) that we still use urb, if the allocation
    fails in the error path. This patch fixes this by returning directly.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c1b45f247a2901de3982f33196d5caf8ca5b9799
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sun Jun 25 18:45:29 2006 -0400

    [PATCH] USB: Kill compiler warning in quirk_usb_handoff_ohci
    
    Move variables only used on !__hppa__ into that #ifndef section. This
    cleans up a compiler warning on parisc. Problem pointed out by
    Joel Soete.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 224654004ca688af67cec44d9300e8c3f647577c
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Mon Jun 26 12:59:17 2006 +0100

    [PATCH] USB serial ftdi_sio: Prevent userspace DoS
    
    This patch limits the amount of outstanding 'write' data that can be
    queued up for the ftdi_sio driver, to prevent userspace DoS attacks (or
    simple accidents) that use up all the system memory by writing lots of
    data to the serial port.
    
    The original patch was by Guillaume Autran, who in turn based it on the
    same mechanism implemented in the 'visor' driver.  I (Ian Abbott)
    re-targeted the patch to the latest sources, fixed a couple of errors,
    renamed his new structure members, and updated the implementations of
    the 'write_room' and 'chars_in_buffer' methods to take account of the
    number of outstanding 'write' bytes.  It seems to work fine, though at
    low baud rates it is still possible to queue up an amount of data that
    takes an age to shift (a job for another day!).
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 00d6058ac93048b525b86fa48b413dcb87ac2728
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Mon Jun 26 11:44:22 2006 +0100

    [PATCH] USB serial visor: fix race in open/close
    
    The anti user-DoS mechanism in the USB serial 'visor' driver can fail in
    the following way:
    
    visor_open: priv->outstanding_urbs = 0
    visor_write: ++priv->outstanding_urbs
    visor_close:
    visor_open: priv->outstanding_urbs = 0
    visor_write_bulk_callback: --priv->outstanding_urbs
    
    So priv->outstanding_urbs ends up as (unsigned long)(-1).  Not good!
    
    I haven't seen this happen with the visor driver as I don't have the
    hardware, but I have seen it while testing a patch to implement the same
    functionality in the ftdi_sio driver (patch not yet submitted).
    
    The fix is pretty simple: don't reinitialize outstanding_urbs in
    visor_open.  (Again, I haven't tested the fix in visor, but I have
    tested it in ftdi_sio.)
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5650b4dd141e823c2b1bc248cb9ad3e9ac88cf19
Author: Phil Dibowitz <phil@ipom.com>
Date:   Sat Jun 24 17:27:54 2006 -0700

    [PATCH] USB Storage: Uname in PR/SC Unneeded message
    
    This patch adds the kernel version to the usb-storage Protocol/SubClass
    unneeded message in order to help us troubleshoot such problems.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 883d989a7edf7a62e38e9150990b56209420e9e5
Author: Phil Dibowitz <phil@ipom.com>
Date:   Sat Jun 24 17:27:10 2006 -0700

    [PATCH] USB Storage: US_FL_MAX_SECTORS_64 flag
    
    This patch adds a US_FL_MAX_SECTORS_64 and removes the Genesys special-cases
    for this that were in scsiglue.c. It also adds the flag to other devices
    reported to need it.
    
    Signed-off-by: Phil Dibowitz <phil@ipom.com>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 20307949469269ceea6262aaa306dcb55cf43b25
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Wed Jun 28 11:20:41 2006 -0400

    [PATCH] usbcore: fixes for hub_port_resume
    
    This patch (as731) makes a couple of small fixes to the hub_port_resume
    routine:
    
    	Don't return status >= 0 when an error occurs;
    
    	Clear the port-change-suspend status indicator after
    	resuming a device.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d8840d60218ac80c74af3b35adbc4cee93c25f18
Author: Ernis <ernisv@gmail.com>
Date:   Mon Jun 26 16:02:43 2006 -0400

    [PATCH] USB: unusual_devs entry for Samsung MP3 player
    
    This patch (as730) contains an unusual_devs entry for a Samsung MP3
    device.
    
    From: Ernis <ernisv@gmail.com>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0ddc0634714552af355a1fa11bad6051e6cb12ff
Author: Davide Perini <perini.davide@dpsoftware.org>
Date:   Mon Jun 19 17:07:39 2006 -0400

    [PATCH] usb-storage: unusual_devs entry for Motorola RAZR V3x
    
    This patch (as725) adds an unusual_devs entry for the Motorola RAZR V3x.
    
    From: Davide Perini <perini.davide@dpsoftware.org>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b40b7a905ce57608ca93c5032d5ab1f5508d2f11
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jun 19 15:12:38 2006 -0400

    [PATCH] USB hub: don't return status > 0 from resume
    
    finish_device_resume() in the hub driver isn't careful always to return
    a negative code in all the error pathways.  It also doesn't return 0 in
    all the success pathways.  This patch (as724) fixes the behavior.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eecd11ed47c8c9bd8e7e3dff35baccae18dd0d84
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jun 19 14:50:15 2006 -0400

    [PATCH] usb-storage: fix race between reset and disconnect
    
    My recent patch converting usb-storage to use
    usb_reset_composite_device() added a bug, a race between reset and
    disconnect.  It was necessary to drop the private lock while executing a
    reset, and if a disconnect occurs at that time it will cause a crash.
    
    This patch (as722) fixes the problem by explicitly checking for an early
    termination after executing each command.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3dd2ae81f70f191f5b6751d18fdfe61dbafda7e8
Author: Oliver Neukum <oliver@neukum.name>
Date:   Fri Jun 23 09:14:17 2006 +0200

    [PATCH] USB: update for acm in quirks and debug
    
    this adds
    better debugging output &
    an update of the quirk list
    to the acm driver
    
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9189bfc2df0fd87e0e537fe7ad4cf3b66a440fe4
Author: Oliver Bock <o.bock@fh-wolfenbuettel.de>
Date:   Thu Jun 22 19:04:47 2006 +0200

    [PATCH] USB: rename Cypress CY7C63xxx driver to proper name and fix up some tiny things
    
    This is a new driver for the Cypress CY7C63xxx mirco controller series.
    It currently supports the pre-programmed CYC63001A-PC by AK Modul-Bus
    GmbH.  It's based on a kernel 2.4 driver (cyport) by Marcus Maul which I
    ported to kernel 2.6 using sysfs. I intend to support more controllers
    of this family (and more features) as soon as I get hold of the required
    IDs etc. Please see the source code's header for more information.
    
    Signed-off-by: Oliver Bock <o.bock@fh-wolfenbuettel.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 58a5b0a6346b71bf01f0d49cfcc91d3225a373aa
Author: Zoran Marceta <Zoran.Marceta@micronasnit.com>
Date:   Thu Jun 22 13:28:11 2006 -0400

    [PATCH] usbfs: use the correct signal number for disconnection
    
    usbfs stores the wrong signal number in the siginfo structure used for
    notifying user programs about device disconnect.  This patch (as726)
    fixes it.
    
    From: Zoran Marceta <Zoran.Marceta@micronasnit.com>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3b92847425a98d26ad9d2b8682d3ce6020c90752
Author: Matthew Meno <mmeno@idealcorp.com>
Date:   Wed Jun 21 15:25:53 2006 -0400

    [PATCH] USB: Support for Susteen Datapilot Universal-2 cable in pl2303
    
    The Susteen Datapilot cable
    (http://www.susteen.com/productdetail/71/producthl/Notempty) has an
    internal pl2303 to communicate with a set of dummy connector-ends that
    connect to a variety of cell phones. I've found that it works right out
    of the box by simply adding the product/vendor id to the pl2303 driver.
    
    Signed-off-by: Matt Meno <mmeno@idealcorp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5b5daf77a6250f2b1983d092d8237cb169488774
Author: Inaky Perez-Gonzalez <inaky@linux.intel.com>
Date:   Mon Jun 19 18:19:01 2006 -0700

    [PATCH] USB: Add some basic WUSB definitions
    
    This patch adds basic Wireless USB 1.0 definitions to usb_ch9.h that
    fit into the existing set of declarations. Boils down to two new
    recipients for requests (ports and remote pipes), rpipe reset and
    abort request codes and wire adapter and remote pipe descriptor
    types.
    
    Wire adapters are the USB <-> Wireless USB adaptors; remote pipes
    are used by those adapters to pipe the host <-> endpoint traffic.
    
    Signed-off-by: Inaky Perez-Gonzalez <inaky@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bd97c4f035b47c1a3ae5cc5ceccdda028b25e9d5
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Jun 21 15:03:40 2006 -0700

    [PATCH] USB: fix visor leaks
    
    This patch fixes blatant leaks in visor driver and makes it report
    mode sensible things in ->write_room (this is only needed if your visor
    is a terminal though).
    
    It is made to fit into 80 columns with a temporary variable.
    Might even save a few instructions...
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 34f8e761724ecbfe46246f3faa4c7dbfc3555c26
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed Jun 21 15:00:45 2006 -0700

    [PATCH] USB: fix usb-serial leaks, oopses on disconnect
    
    This fix addresses two issues:
    - Unattached port structures were not freed
    - My initial fix for crash when eventd runs a work in a freed port
      did not go far enough
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 92164c5dd1ade33f4e90b72e407910de6694de49
Author: David S. Miller <davem@davemloft.net>
Date:   Wed Jun 21 22:26:09 2006 -0700

    [PATCH] USB: OHCI hub code unaligned access
    
    I noticed this while debugging something unrelated on
    sparc64.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c0f8d56197f7d15f841e7d9d6f88909f4feba678
Author: Christophe Mariac <cmariac@starting-point-systems.com>
Date:   Fri Jun 23 17:36:21 2006 +0200

    [PATCH] USB: new device ids for ftdi_sio driver
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 48437486c69b4baf68ee98530d8119897148c602
Author: D. Peter Siddons <siddons@bnl.gov>
Date:   Sat Jun 17 18:09:15 2006 -0400

    [PATCH] USB: new device id for Thorlabs motor driver
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3d861494729c70d9ebeb7d93caa107897925c355
Author: Peter Moulder <Peter.Moulder@infotech.monash.edu.au>
Date:   Mon Jun 19 22:47:49 2006 +1000

    [PATCH] USB: Addition of vendor/product id pair for pl2303 driver
    
    Text from the back of the box, for your information/amusement:
    
     USB DATA CABLE
       FOR K700 Series
    
     The USB Cable is an ideal link between your mobile phone and PC. Employing
     the user-friendiy [sic] USB standard,its capacity for rapid data transfer enables functions
     such as synchronization of phone book and calendar,as well as Internet browsing via
     a modem-enabled phone.Autual [sic] connection speed is dependent on phone capacity.
    
     MADE IN CHINA
    
    From: Peter Moulder <Peter.Moulder@infotech.monash.edu.au>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7fac9a3348921e0fc626c7856ce3d1a9746b2b39
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jun 22 15:12:41 2006 -0700

    [PATCH] USB: fix usb kernel-doc
    
    Warning(/var/linsrc/linux-2617-g4//include/linux/usb.h:66): No description found for parameter 'ep_dev'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a5b7474a0364507d168c7ff473e2d82deb676b08
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Fri Jun 23 23:02:01 2006 +0200

    [PATCH] USB: ohci bits for the cirrus ep93xx
    
    This patch adds OHCI glue bits for the USB host interface in the
    Cirrus ep93xx (arm920t) CPU.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d14feb5ee4a46218f92b21ed52338b64130a151b
Author: Daniel Mack <daniel@caiaq.de>
Date:   Fri Jun 23 21:36:07 2006 +0100

    [PATCH] USB: au1200: EHCI and OHCI fixes
    
    I received an DBAU1200 eval kit from AMD a few days ago and tried to
    enable the USB2 port, but the current linux-2.6 GIT did not even
    compile with CONFIG_SOC_1200, CONFIG_SOC_AU1X00, CONFIG_USB_EHCI and
    CONFIG_USB_OHCI set.
    Furthermore, in ehci-hcd.c, platform_driver_register() was called with
    an improper argument of type 'struct device_driver *' which of course
    ended up in a kernel oops. How could that ever have worked on your
    machines?
    
    Anyway, here's a trivial patch that makes the USB subsystem working
    on my board for both OHCI and EHCI.
    It also removes the /* FIXME use "struct platform_driver" */.
    
    Signed-off-by: Daniel Mack <daniel@caiaq.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 18577a6184efbd95a72562c0c590218460d6ea33
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Fri Jun 23 11:55:43 2006 +0100

    [PATCH] USB: au1xxx: compile fixes for OHCI for au1200
    
    Compile fixes for au1200 ohci.
    
    First part looks a bit hackish... but it works for me.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5cab828bf0f52f3697a61aa99c54ee43844f53c0
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Wed Jul 5 18:09:09 2006 +0200

    [PATCH] hwmon: Documentation update for abituguru
    
    Documentation update for the new bank1_types module param.
    
    Also add what we know about different revisions of the uGuru and
    a note that the abituguru driver unfortunatly does not work with the
    latest and greatest motherboards, which have what I think is revision
    4 of the uGuru.
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9b2ad1298232a4016a407261bd6811294b09ba97
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Wed Jul 5 18:07:49 2006 +0200

    [PATCH] hwmon: Fix for first generation Abit uGuru chips
    
    Now that the abituguru driver is seeing some more widespread testing
    it has turned out that one the first generation of Abit uGuru
    motherboards, with uGuru revision 1, the autodetect bank1 sensor type
    code doesn't (always) work. This patch adds a module param to override
    the autodetect, and it adds validity checks for the value of the 2
    other autodetection override module params. An example of howto use
    the new param can be found here:
    http://lm-sensors.org/wiki/Configurations/Abit/AN7
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1392707977de9e0df18123d56c3148cb0b1c6ab5
Author: Charles Spirakis <bezaur@gmail.com>
Date:   Wed Jul 5 18:05:15 2006 +0200

    [PATCH] hwmon: New maintainer for w83791d
    
    Add Charles Spirakis as the maintainer for the w83791d sensor chip
    driver.
    
    Signed-off-by: Charles Spirakis <bezaur@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 50436a47c6b10c6e4e84e24ea44c5cb85bbcd290
Author: Ben Gardner <gardner.ben@gmail.com>
Date:   Sat Jul 1 17:22:18 2006 +0200

    [PATCH] pca9539: Honor the force parameter
    
    The pca9539 driver doesn't honor the force parameter; it always does
    detection. This patch will skip detection if forced.
    
    Signed-off-by: Ben Gardner <gardner.ben@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5313775f18f22f1dac2b548b598d47d65f90e6b0
Author: Uwe Bugla <uwe.bugla@gmx.de>
Date:   Sat Jul 1 17:25:08 2006 +0200

    [PATCH] i2c-algo-bit: Wipe out dead code
    
    i2c-algo-bit: Wipe out dead code
    
    Signed-off-by: Uwe Bugla <uwe.bugla@gmx.de>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b39ad0cf7c19fc14e8f823b1b36245f7a3711655
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Sat Jul 1 17:16:06 2006 +0200

    [PATCH] i2c: Handle i2c_add_adapter failure in i2c algorithm drivers
    
    Content-Disposition: inline; filename=i2c-algo-error-handling-fix.patch
    
    It is possible for i2c_add_adapter() to fail.  Several I2C algorithm
    drivers ignore that fact.  This (compile-tested only) patch fixes them.
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5d925fecac26651e6b0e19cf4ca16933aa640f99
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 1 17:14:32 2006 +0200

    [PATCH] i2c: New mailing list
    
    We have a new mailing list dedicated to linux i2c:
    http://lists.lm-sensors.org/mailman/listinfo/i2c
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5a0174831c48df04df83339578b409c7b5f75885
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 1 17:13:37 2006 +0200

    [PATCH] i2c-ite: Plan for removal
    
    Plan the i2c-ite and i2c-algo-ite drivers for removal.
    These drivers never compiled since they were added to the kernel
    tree 5 years ago. Also see:
    http://marc.theaimsgroup.com/?l=linux-mips&m=115040510817448
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8ced8eee8537b52ef5d77e28d7676ce81bc62359
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 1 17:12:53 2006 +0200

    [PATCH] i2c-powermac: Fix master_xfer return value
    
    Fix the value returned by the i2c-powermac's master_xfer method.
    It should return the number of messages processed successfully, but
    instead returns the number of data bytes in the first (and only)
    processed message.
    
    Also explicitly mention the master_xfer convention so that future
    implementations get it right directly.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c3efacaa68a75049a859cbfd03d52dfdebb7527b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sat Jul 1 17:06:43 2006 +0200

    [PATCH] scx200_acb: Fix the block transactions
    
    The scx200_acb i2c bus driver pretends to support SMBus block
    transactions, but in fact it implements the more simple I2C block
    transactions. Additionally, it lacks sanity checks on the length
    of the block transactions, which could lead to a buffer overrun.
    
    This fixes an oops reported by Alexander Atanasov:
    http://marc.theaimsgroup.com/?l=linux-kernel&m=114970382125094
    
    Thanks to Ben Gardner for fixing my bugs :)
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd627a01477dadaef3bc8556e5e9d0ef80310c3a
Author: Thomas Andrews <tandrews@grok.co.za>
Date:   Sat Jul 1 17:05:12 2006 +0200

    [PATCH] scx200_acb: Fix the state machine
    
    Fix the scx200_acb state machine:
    
    * Nack was sent one byte too late on reads >= 2 bytes.
    * Stop bit was set one byte too late on reads.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 39288e1ac10b3b9a68a629be67d81a0b53512c4e
Author: Peter Milne <peter.milne@d-tacq.com>
Date:   Sat Jul 1 17:03:20 2006 +0200

    [PATCH] i2c-iop3xx: Avoid addressing self
    
    Avoid addressing self when sending a slave address. Follows instruction
    in Intel 80331/80321 manuals.
    Ignoring this worked previously on 80321, but causes a hang on i2cdetect
    on 80331.
    
    Signed-off-by: Peter Milne <peter.milne@d-tacq.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2369df933f1c632ec3f230774019e37c3969b7ec
Author: Mark M. Hoffman <mhoffman@lightlink.com>
Date:   Sat Jul 1 17:01:59 2006 +0200

    [PATCH] i2c: Fix 'ignore' module parameter handling in i2c-core
    
    This patch fixes a bug in the handling of 'ignore' module parameters of I2C
    client drivers.
    
    Signed-off-by: Mark M. Hoffman <mhoffman@lightlink.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 22e1170310ec6afa41e0dc7ac9dfac735d82dcab
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:48 2006 -0700

    [PATCH] sky2: optimize receive restart
    
    When the driver handles multiple packets per NAPI poll, it is
    better to reload the receive ring, then tell the hardware. Otherwise,
    under packet storm with flow control, the driver/hardware will degrade
    down to one packet getting through per pause-exchange.
    
    Likewise on transmit, don't wakeup until a little more than minimum
    ring space is available.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit afa195da458cb06f302c37f8d37b21b177060aed
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:47 2006 -0700

    [PATCH] sky2: PHY power on delays
    
    The documentation says we need to wait after turning on the PHY.
    Also, don't enable WOL by default.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6a5706b99c98e3c974cf5b55324e4eed7f82e55a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:46 2006 -0700

    [PATCH] sky2: NAPI suspend/resume of dual port cards
    
    The changes to handle suspend/resume didn't handle the case where
    a dual port card has the first port down, but the second is running.
    In this driver, all NAPI polling is done on the primary port.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 59139528c8e7880eee437e81647ade1b36af0d41
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:45 2006 -0700

    [PATCH] sky2: sky2_reset section mismatch
    
    Since sky2_reset gets call from sky2_resume it shouldn't be tagged
    with devinit.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f326fe768b39fe4131b1e2ca266c9c385ca307f4
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:44 2006 -0700

    [PATCH] sk98lin: fix truncated collision threshold mask
    
    Patch to correct broken collision threshold mask in (same problem
    as sky2 driver).  Should be three bits wide, but the mask only allows
    for 1 bit to be set.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 83405f058eb78b515ccf5b9066fe0a51d55114a0
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:43 2006 -0700

    [PATCH] skge: fix truncated collision threshold mask
    
    Patch to correct broken collision threshold mask in (same problem
    as sky2 driver).  Should be three bits wide, but the mask only allows
    for 1 bit to be set.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fbb88b3e0b59fbc877c884f5fc978428b2fe7aea
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Jul 12 15:23:42 2006 -0700

    [PATCH] sky2: fix truncated collision threshold mask
    
    Patch to correct broken collision threshold mask in sky2 driver.  Should be
    three bits wide, but the mask only allows for 1 bit to be set.
    
    Thanks & Regards
    Neil
    
    Signed-off-by: Neil Horman <nhorman@tuxdriver.com>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    
     sky2.h |    2 +-
     1 files changed, 1 insertion(+), 1 deletion(-)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f01cfb3638a2f1ee584913f37e5ba7a8abfed8de
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jun 28 21:05:31 2006 +0400

    [PATCH] w1: remove drivers/w1/w1.h
    
    drivers/w1/w1_io.h is both a subset of drivers/w1/w1.h and no longer
    #include'd by any file.
    
    This patch therefore removes w1_io.h.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b4786f1893305312d0a3e602de9080b1b932a681
Author: Ben Gardner <gardner.ben@gmail.com>
Date:   Thu Jun 29 22:33:22 2006 +0400

    [PATCH] w1: fix idle check loop in ds2482
    
    The idle check loop has a greater-than where it should have a less-than.
    This causes the ds2482 driver to check for the idle condition exactly
    once, which causes it to fail on faster machines.
    
    Signed-off-by: Ben Gardner <gardner.ben@gmail.com>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4e35dea2f26b16735b242ed1ae876157f46f3b23
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Jun 19 09:59:02 2006 +0400

    [PATCH] W1: remove w1 mail list from lm_sensors.
    
    lm_sensors mail list is going to be splitted into separate subdev lists,
    so remove w1 from there.
    
    http://lists.lm-sensors.org/pipermail/lm-sensors/2006-June/016507.html
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd1278d720b48ad7576f64014b916cc77365cb3f
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Wed Jul 12 23:00:07 2006 +0200

    [Bluetooth] Fix deadlock in the L2CAP layer
    
    The Bluetooth L2CAP layer has 2 locks that are used in softirq context,
    (one spinlock and one rwlock, where the softirq usage is readlock) but
    where not all usages of the lock were _bh safe. The patch below corrects
    this.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 0263603a01e802f79e369ac489793e5320031560
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Wed Jul 12 22:57:52 2006 +0200

    [Bluetooth] Let BT_HIDP depend on INPUT
    
    This patch lets BT_HIDP depend on instead of select INPUT. This fixes
    the following warning during an s390 build:
    
    net/bluetooth/hidp/Kconfig:4:warning: 'select' used by config symbol
    'BT_HIDP' refer to undefined symbol 'INPUT'
    
    A dependency on INPUT also implies !S390 (and therefore makes the
    explicit dependency obsolete) since INPUT is not available on s390.
    
    The practical difference should be nearly zero, since INPUT is always
    set to y unless EMBEDDED=y (or S390=y).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 420cc3505f91246699bcfb88d30c4466adc0b87b
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Thu Jul 6 15:53:31 2006 +0200

    [Bluetooth] Avoid NULL pointer dereference with tty->driver
    
    This patch checks for tty->driver before trying to call flush_buffer().
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 25ea6db04a96d7871e7ece27d566f3228d59d932
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Thu Jul 6 15:40:09 2006 +0200

    [Bluetooth] Remaining transitions to use kzalloc()
    
    This patch makes the remaining transitions to use kzalloc().
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 4c2248cc57f83ce551511a6c1736383938dd9d1b
Author: Brice Goglin <brice@myri.com>
Date:   Sun Jul 9 21:10:18 2006 -0400

    [PATCH] myri10ge return value fix
    
    Andrew Morton wrote:
    >   All these functions return error codes, and we're not checking them.  We
    >   should.  So there's a patch which marks all these things as __must_check,
    >   which causes around 1,500 new warnings.
    >
    
    The following patch fixes such a warning in myri10ge.
    
    Check pci_enable_device() return value in myri10ge_resume().
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8431adfd37c306c05abeac8879be7b4e03273a4f
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Tue Jul 11 23:02:48 2006 -0700

    [PATCH] Update smc91x driver with ARM Versatile board info
    
    We need to specify a Versatile-specific SMC_IRQ_FLAGS value or the new
    generic IRQ layer will complain thusly:
    
    No IRQF_TRIGGER set_type function for IRQ 25 (<NULL>)
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 709cf0187d286cb1bf2c210e62bba98afdec859c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Mon Jul 10 08:51:43 2006 -0700

    [PATCH] ixgb: fix tx unit hang - properly calculate desciptor count
    
    There were some tso bugs that only showed up with heavy load and 16kB
    pages that this patch fixes by making the driver's internal use count
    of descriptors match the count that it was estimating it needed using
    the DESC_NEEDED macro.  This bug caused NETDEV_WATCHDOG resets aka
    tx timeouts.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c5d965caa1dbb54077673cf22e3f8a58e1cc866c
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 23:58:27 2006 -0700

    [PATCH] smsc-ircc2: fix section reference mismatches
    
    subsystem_configurations array is only used by an __init function,
    therefore it should be marked __initdata, not __devinitdata.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4626dd46f5e70dfb70f4b57cf527c8de9f80e4fa
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 6 23:58:26 2006 -0700

    [PATCH] 8139cp.c printk fix
    
    drivers/net/8139cp.c: In function 'cp_init_one':
    drivers/net/8139cp.c:1919: warning: format '%lx' expects type 'long unsigned int', but argument 4 has type 'resource_size_t'
    drivers/net/8139cp.c:1919: warning: format '%lx' expects type 'long unsigned int', but argument 5 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e6a8fee2098f29749e4e48321611f2d661b2eb71
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Thu Jul 6 23:58:23 2006 -0700

    [PATCH] s2io driver irq fix
    
    Modification and bug fixes with respect to irq registration.
    
    - Enable interrupts after request_irq
    
    - Restored MSI data register value at driver unload time
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 61ef5c00a6477e076b8b77be805c5f58b77539cf
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 6 23:58:19 2006 -0700

    [PATCH] e1000: irq naming update
    
    Use the new names.
    
    Cc: Auke Kok <auke-jan.h.kok@intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7d450e00711bf8c72fc781677f7abc08d227578e
Merge: 95d161c... b312d79...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Jul 12 17:40:45 2006 -0400

    Merge branch 'upstream-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream-fixes

commit 95d161cbab9d4da8b3c2d179ae11825e1294989e
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Thu Jul 6 16:46:25 2006 -0400

    [PATCH] forcedeth: watermark fixup
    
    This patch defines the watermark registers and fixes up the use of this
    register.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9744e218aad2ef4569b0de960ff193fb50f5d6e0
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Thu Jul 6 16:45:58 2006 -0400

    [PATCH] forcedeth: deferral fixup
    
    This patch adds the definition for the deferral registers and fixes up
    the use of these registers.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c2ce920468624d87ec5f91f080ea99681dae6d88
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Wed Jul 12 13:46:12 2006 -0700

    [WAN]: converting generic HDLC to use netif_dormant*()
    
    This patch converts generic HDLC (and WAN drivers using it) from
    hdlc_set_carrier() to netif_dormant*() interface.
    WAN hardware drivers should now use netif_carrier_on|off() like
    other network drivers.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b47b2ec19892ffc2b06ebf138ed4aa141275a1c2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jul 12 13:29:56 2006 -0700

    [IPV4]: Fix error handling for fib_insert_node call
    
    The error handling around fib_insert_node was broken because we always
    zeroed the error before checking it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b260a98f1afc74cd6b73ce0616d76b441dbe8c5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jul 12 13:26:26 2006 -0700

    [NETROM] lockdep: fix false positive
    
    NETROM network devices are virtual network devices encapsulating NETROM
    frames into AX.25 which will be sent through an AX.25 device, so form a
    special "super class" of normal net devices; split their locks off into a
    separate class since they always nest.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b1d21ca83c9139e7889a754934bcdd7071157560
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jul 12 13:25:56 2006 -0700

    [ROSE] lockdep: fix false positive
    
    ROSE network devices are virtual network devices encapsulating ROSE
    frames into AX.25 which will be sent through an AX.25 device, so form a
    special "super class" of normal net devices; split their locks off into
    a separate class since they always nest.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c19c4b9c9acb4ab6f5477ae9ca2c0a8619f19c7a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jul 12 13:25:23 2006 -0700

    [AX.25]: Optimize AX.25 socket list lock
    
    Right now all uses of the ax25_list_lock lock are _bh locks but knowing
    some code is only ever getting invoked from _bh context we can better.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit da952315c9c625bd513c6162613fd3fd01d91aae
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Jul 11 13:50:09 2006 -0700

    [IPCOMP]: Fix truesize after decompression
    
    The truesize check has uncovered the fact that we forgot to update truesize
    after pskb_expand_head.  Unfortunately pskb_expand_head can't update it for
    us because it's used in all sorts of different contexts, some of which would
    not allow truesize to be updated by itself.
    
    So the solution for now is to simply update it in IPComp.
    
    This patch also changes skb_put to __skb_put since we've just expanded
    tailroom by exactly that amount so we know it's there (but gcc does not).
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8a6ce0c083f5736e90dabe6d8ce077e7dd0fa35f
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Tue Jul 11 13:05:30 2006 -0700

    [IPV6]: Use ipv6_addr_src_scope for link address sorting.
    
    In the source address selection, the address must be sorted
    from global to node-local.
    
    But, ifp->scope is different from the scope for source address
    selection.
    
                                     2001::1  fe80::1     ::1
    ifp->scope                             0     0x02    0x01
    ipv6_addr_src_scope(&ifp->addr)     0x0e     0x02    0x01
    
    So, we need to use ipv6_addr_src_scope(&ifp->addr) for sorting.
    
    And, for backward compatibility, addresses should be sorted from
    new one to old one.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Acked-by: Brian Haley <brian.haley@hp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6150c22e2ac3f7dbe73e7ae7817785070d0cff1f
Author: Xiaoliang (David) Wei <davidwei79@gmail.com>
Date:   Tue Jul 11 13:03:28 2006 -0700

    [TCP] tcp_highspeed: Fix AI updates.
    
    I think there is still a problem with the AIMD parameter update in
    HighSpeed TCP code.
    
    Line 125~138 of the code (net/ipv4/tcp_highspeed.c):
    
    	/* Update AIMD parameters */
    	if (tp->snd_cwnd > hstcp_aimd_vals[ca->ai].cwnd) {
    		while (tp->snd_cwnd > hstcp_aimd_vals[ca->ai].cwnd &&
    		       ca->ai < HSTCP_AIMD_MAX - 1)
    			ca->ai++;
    	} else if (tp->snd_cwnd < hstcp_aimd_vals[ca->ai].cwnd) {
    		while (tp->snd_cwnd > hstcp_aimd_vals[ca->ai].cwnd &&
    		       ca->ai > 0)
    			ca->ai--;
    
    In fact, the second part (decreasing ca->ai) never decreases since the
    while loop's inequality is in the reverse direction. This leads to
    unfairness with multiple flows (once a flow happens to enjoy a higher
    ca->ai, it keeps enjoying that even its cwnd decreases)
    
    Here is a tentative fix (I also added a comment, trying to keep the
    change clear):
    
    Acked-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 781b456a980ec987a4be248f236c59658f651240
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jul 10 20:25:29 2006 -0700

    [MAINTAINERS]: Add proper entry for TC classifier
    
    Acked-by: Jamal Hadi Salim <hadi@cyberus.ca>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8bf2b7b1888babe182a503437f6d40062aa84037
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 10 20:21:05 2006 -0700

    [NETROM]: Drop lock before calling nr_destroy_socket
    
    nr_destroy_socket takes the socket lock itself so it should better be
    called with the socket unlocked.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5cc29e3bea77092c48e5c71d792c7461e6a6c4cf
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 10 16:23:21 2006 -0700

    [NETROM]: Fix locking order when establishing a NETROM circuit.
    
    When establishing a new circuit in nr_rx_frame the locks are taken in
    a different order than in the rest of the stack.  This should be
    harmless but triggers lockdep.  Either way, reordering the code a
    little solves the issue.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95ff9f4d3cc72b62b76498290d00d129e1e62545
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 10 16:21:29 2006 -0700

    [AX.25]: Fix locking of ax25 protocol function list.
    
    Delivery of AX.25 frame to the layer 3 protocols happens in softirq
    context so locking needs to be bh-proof.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e55ffac6011731c455856072cb23aa20bd55c367
Author: Brian Haley <brian.haley@hp.com>
Date:   Mon Jul 10 15:25:51 2006 -0700

    [IPV6]: order addresses by scope
    
    If IPv6 addresses are ordered by scope, then ipv6_dev_get_saddr() can
    break-out of the device addr_list for() loop when the candidate source
    address scope is less than the destination address scope.
    
    Signed-off-by: Brian Haley <brian.haley@hp.com>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 155dbfd8846bf165bb036c4492ad121c8b059f1d
Merge: 15e0c69... d2a5b9d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 13:03:35 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa of HEAD
    
    * HEAD:
      [ALSA] Fix undefined (missing) references in ISA MIRO sound driver
      [ALSA] make sound/isa/gus/gusextreme.c:devices static
      [ALSA] hda-codec - Fix missing array terminators in AD1988 codec support
      [ALSA] Fix a deadlock in snd-rtctimer
      [ALSA] Fix section mismatch errors in ALSA PCI drivers
      [ALSA] remove unused snd_minor.name field
      [ALSA] Fix no mpu401 interface can cause hard freeze
      [ALSA] wavefront: fix __init/__devinit confusion
      [ALSA] Fix workaround for AD1988A rev2 codec
      [ALSA] trivial: Code clean up of i2c/cs8427.c
      [ALSA] sound/i2c/cs8427.c: don't export a static function
      [ALSA] intel8x0 - Add ac97 quirk for Tyan Thunder K8WE board
      [ALSA] Reduce the string length of Terratec Aureon 7.1 Universe
      [ALSA] sound/pci/Kconfig - fix broken indenting for SND_FM801_TEA575X
      [ALSA] fix the SND_FM801_TEA575X dependencies
      [ALSA] Memory leak in sound/pcmcia/pdaudiocf/pdaudiocf.c

commit 15e0c694367332d7e7114c7c73044bc5fed9ee48
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jul 12 15:05:41 2006 +0100

    [PATCH] ide: fix Jmicron support
    
    Prior to 2.6.18rc1 you could install with devices on a JMicron chipset
    using the "all-generic-ide" option. As of this kernel the AHCI driver
    grabs the controller and rams it into AHCI mode losing the PATA ports
    and making CD drives and the like vanish. The all-generic-ide option
    fails because the AHCI driver grabbed the PCI device and reconfigured
    it.
    
    To fix this three things are needed.
    
    #1 We must put the chip into dual function mode
    #2 The AHCI driver must grab only function 0 (already in your rc1 tree)
    #3 Something must grab the PATA ports
    
    The attached patch is the minimal risk edition of this. It puts the chip
    into dual function mode so that AHCI will grab the SATA ports without
    losing the PATA ports. To keep the risk as low as possible the third
    patch adds the PCI identifiers for the PATA port and the FN check to the
    ide-generic driver. There is a more featured jmicron driver on its way
    but that adds risk and the ide-generic support is sufficient to install
    and run a system.
    
    The actual chip setup done by the quirk is the precise setup recommended
    by the vendor.
    
    (The JMB368 appears only in the ide-generic entry as it has no AHCI so
    does not need the quirk)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6dc8c5b8e04ce28720155383e971561a23899d5
Author: Chase Venters <chase.venters@clientec.com>
Date:   Sat Jul 8 11:10:29 2006 -0500

    [PATCH] Make cpu_relax() imply barrier() on all arches
    
    During the recent discussion of taking 'volatile' off of the spinlock, I
    noticed that while most arches #define cpu_relax() such that it implies
    barrier(), some arches define cpu_relax() to be empty.
    
    This patch changes the definition of cpu_relax() for frv, h8300, m68knommu,
    sh, sh64, v850 and xtensa from an empty while(0) to the compiler barrier().
    
    Signed-off-by: Chase Venters <chase.venters@clientec.com>
    Acked-by: Arjan van de Ven <arjan@Linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f74964627e0ece4ac8da0e2cd01906ec322b4fe
Author: Ingo Molnar <mingo@elte.hu>
Date:   Wed Jul 12 09:03:10 2006 -0700

    [PATCH] lockdep: HPET/RTC fix
    
    Joseph Fannin reported that hpet_rtc_interrupt() enables hardirqs
    in irq context:
    
    [   25.628000]  [<c014af4e>] trace_hardirqs_on+0xce/0x200
    [   25.628000]  [<c036cf21>] _spin_unlock_irq+0x31/0x70
    [   25.628000]  [<c0296584>] rtc_get_rtc_time+0x44/0x1a0
    [   25.628000]  [<c01198bb>] hpet_rtc_interrupt+0x21b/0x280
    [   25.628000]  [<c0161141>] handle_IRQ_event+0x31/0x70
    [   25.628000]  [<c0162d37>] handle_edge_irq+0xe7/0x210
    [   25.628000]  [<c0106192>] do_IRQ+0x92/0x120
    [   25.628000]  [<c0104121>] common_interrupt+0x25/0x2c
    
    the call of rtc_get_rtc_time() is highly suspect. At a minimum we
    need the patch below to save/restore hardirq state.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Joseph Fannin <jfannin@gmail.com>
    Cc: John Stultz <johnstul@us.ibm.com>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a29b0b74e73b66674d20a170e463fe9032f2272a
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jul 12 09:03:08 2006 -0700

    [PATCH] alloc_fdtable() expansion fix
    
    We're supposed to go the next power of two if nfds==nr.
    
    Of `nr', not of `nfsd'.
    
    Spotted by Rene Scharfe <rene.scharfe@lsrfire.ath.cx>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec572e3f87c02a6dd5be25841dc482a52356947f
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Wed Jul 12 09:03:08 2006 -0700

    [PATCH] msi: Only keep one msi_desc in each slab entry.
    
    It looks like someone confused kmem_cache_create with a different allocator
    and was attempting to give it knowledge of how many cache entries there
    were.
    
    With the unfortunate result that each slab entry was big enough to hold
    every irq.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0635170b544b01b46a81b4ac5cff5020ab59d1fc
Author: Adam B. Jerome <abj@novell.com>
Date:   Wed Jul 12 09:03:07 2006 -0700

    [PATCH] /fs/proc/: 'larger than buffer size' memory accessed by clear_user()
    
    Address a potential 'larger than buffer size' memory access by
    clear_user().  Without this patch, this call to clear_user() can attempt to
    clear too many (tsz) bytes resulting in a wrong (-EFAULT) return code by
    read_kcore().
    
    Signed-off-by: Adam B. Jerome <abj@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 232ba9dbd68bb084d5d90c511f207d18eae614da
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Wed Jul 12 09:03:06 2006 -0700

    [PATCH] lockdep: annotate the sysfs i_mutex to be a separate class
    
    sysfs has a different i_mutex lock order behavior for i_mutex than the
    other filesystems; sysfs i_mutex is called in many places with subsystem
    locks held.  At the same time, many of the VFS locking rules do not apply
    to sysfs at all (cross directory rename for example).  To untangle this
    mess (which gives false positives in lockdep), we're giving sysfs inodes
    their own class for i_mutex.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d579091b4385e9386e244622d593fe064aa8e8e7
Author: Kirill Korotaev <dev@openvz.org>
Date:   Wed Jul 12 09:03:05 2006 -0700

    [PATCH] fix fdset leakage
    
    When found, it is obvious.  nfds calculated when allocating fdsets is
    rewritten by calculation of size of fdtable, and when we are unlucky, we
    try to free fdsets of wrong size.
    
    Found due to OpenVZ resource management (User Beancounters).
    
    Signed-off-by: Alexey Kuznetsov <kuznet@ms2.inr.ac.ru>
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abf75a5033d4da7b8a7e92321d74021d1fcfb502
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Wed Jul 12 13:12:00 2006 +0200

    [PATCH] Fix prctl privilege escalation and suid_dumpable (CVE-2006-2451)
    
    Based on a patch from Ernie Petrides
    
    During security research, Red Hat discovered a behavioral flaw in core
    dump handling. A local user could create a program that would cause a
    core file to be dumped into a directory they would not normally have
    permissions to write to. This could lead to a denial of service (disk
    consumption), or allow the local user to gain root privileges.
    
    The prctl() system call should never allow to set "dumpable" to the
    value 2. Especially not for non-privileged users.
    
    This can be split into three cases:
    
      1) running as root -- then core dumps will already be done as root,
         and so prctl(PR_SET_DUMPABLE, 2) is not useful
    
      2) running as non-root w/setuid-to-root -- this is the debatable case
    
      3) running as non-root w/setuid-to-non-root -- then you definitely
         do NOT want "dumpable" to get set to 2 because you have the
         privilege escalation vulnerability
    
    With case #2, the only potential usefulness is for a program that has
    designed to run with higher privilege (than the user invoking it) that
    wants to be able to create root-owned root-validated core dumps. This
    might be useful as a debugging aid, but would only be safe if the program
    had done a chdir() to a safe directory.
    
    There is no benefit to a production setuid-to-root utility, because it
    shouldn't be dumping core in the first place. If this is true, then the
    same debugging aid could also be accomplished with the "suid_dumpable"
    sysctl.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2a5b9d45f31bf5e5a1b89a87421e218ebe1a6ba
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jul 11 12:28:25 2006 +0200

    [ALSA] Fix undefined (missing) references in ISA MIRO sound driver
    
    WARNING: /lib/modules/2.6.18-rc1-mm1/kernel/sound/isa/opti9xx/snd-miro.ko
    needs unknown symbol snd_cs4231_create
    WARNING: /lib/modules/2.6.18-rc1-mm1/kernel/sound/isa/opti9xx/snd-miro.ko
    needs unknown symbol snd_cs4231_pcm
    WARNING: /lib/modules/2.6.18-rc1-mm1/kernel/sound/isa/opti9xx/snd-miro.ko
    needs unknown symbol snd_cs4231_timer
    WARNING: /lib/modules/2.6.18-rc1-mm1/kernel/sound/isa/opti9xx/snd-miro.ko
    needs unknown symbol snd_cs4231_mixer
    WARNING: /lib/modules/2.6.18-rc1-mm1/kernel/fs/reiser4/reiser4.ko needs
    unknown symbol generic_file_read
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d35367e1cbe4cb69f6ced0bf347c0c478752d95d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jul 11 12:09:20 2006 +0200

    [ALSA] make sound/isa/gus/gusextreme.c:devices static
    
    'devices' is not a good name for a global variable.
    Thankfully, it can become static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2ece5f42a284fecfb77b1c63f2263065e12a518f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jul 6 19:16:40 2006 +0200

    [ALSA] hda-codec - Fix missing array terminators in AD1988 codec support
    
    Fixed the missing array terminators in AD1988 codec support code.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 2999ff5ba12a3dce5a86acd7078fd8787623ec63
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jul 5 17:16:58 2006 +0200

    [ALSA] Fix a deadlock in snd-rtctimer
    
    Fix a occasional deadlock occuring with snd-rtctimer driver,
    added irqsave to the lock in tasklet (ALSA bug#952).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit f40b68903ccd511ea9d658b4bce319dd032a265a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jul 5 16:51:05 2006 +0200

    [ALSA] Fix section mismatch errors in ALSA PCI drivers
    
    Fixed 'section mismatch' errors in ALSA PCI drivers:
    - removed invalid __devinitdata from pci id tables
    - fix/remove __devinit of functions called in suspend/resume
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 562b590d4e838ecaca2cfd246fd4df55dc6db18a
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Wed Jul 5 11:24:22 2006 +0200

    [ALSA] remove unused snd_minor.name field
    
    Drop the snd_minor structure's name field that was just a helper for
    devfs device deregistration.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b130807dce4a8f91f9662e93d1aa813d806e14a8
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Jul 4 14:25:26 2006 +0200

    [ALSA] Fix no mpu401 interface can cause hard freeze
    
    This patch fixes the remaining instances in our tree where a non-
    existent mpu401 interface can cause a hard freeze when i/o is issued.
    This commit closes Malone #34831.
    Bug: https://launchpad.net/distros/ubuntu/+source/linux-source-2.6.15/+bug/34831
    patch location:
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=b422309cdd980cfefe99379796c04e961d3c1544
    From: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 40e1a9c0d428740a5c10a5be2335b9d7c39df043
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Mon Jul 3 16:38:28 2006 +0200

    [ALSA] wavefront: fix __init/__devinit confusion
    
    The wavefront driver used __init in some places referenced by __devinit
    functions.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 1a806f487da563d0b60375665911009e60a7d121
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jul 3 15:58:16 2006 +0200

    [ALSA] Fix workaround for AD1988A rev2 codec
    
    Fix the workaround for AD1988A rev2 codec not to apply to AD1988B codec
    chips.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cc63935f56d1b2486fa17bea63ee3cfc7b9c1304
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 30 15:31:25 2006 +0200

    [ALSA] trivial: Code clean up of i2c/cs8427.c
    
    - Fix spaces, wrap lines in 80 columns.
    - Move EXPORT_SYMBOL() adjacent to each function.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 7fd37481b1e26edc36a011a3760f10c34fffda37
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 13:52:24 2006 +0200

    [ALSA] sound/i2c/cs8427.c: don't export a static function
    
    Static functions shouldn't be exported.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 4f42bcc19adbf22d566e6d009b76fb039a15ccd7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 29 17:05:31 2006 +0200

    [ALSA] intel8x0 - Add ac97 quirk for Tyan Thunder K8WE board
    
    Added the default ac97 quirk (hp_only) for Tyan Thunder K8WE board.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9f37c5b3ae6299b35287cfce3635439cf3cc28be
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 29 16:40:21 2006 +0200

    [ALSA] Reduce the string length of Terratec Aureon 7.1 Universe
    
    Fix the driver string name for Terratec Aureon 7.1 Universe
    to fit in 15 letters to avoid the overflow.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c775ac76e8127ce0653162f04c9672402d579b65
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jun 29 16:12:30 2006 +0200

    [ALSA] sound/pci/Kconfig - fix broken indenting for SND_FM801_TEA575X
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit efce4bb9ecd033c9e0f221549be0098bcf6a3aad
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 13:22:29 2006 +0200

    [ALSA] fix the SND_FM801_TEA575X dependencies
    
    CONFIG_SND_FM801=y, CONFIG_SND_FM801_TEA575X=m resulted in the following
    compile error:
    <--  snip  -->
    ...
      LD      vmlinux
    sound/built-in.o: In function 'snd_fm801_free':
    fm801.c:(.text+0x3c15b): undefined reference to 'snd_tea575x_exit'
    sound/built-in.o: In function 'snd_card_fm801_probe':
    fm801.c:(.text+0x3cfde): undefined reference to 'snd_tea575x_init'
    make: *** [vmlinux] Error 1
    <--  snip  -->
    This patch fixes kernel Bugzilla #6458.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cb6dd2609779e55b34876d75a9092b1a1f513142
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Apr 12 12:56:10 2006 +0200

    [ALSA] Memory leak in sound/pcmcia/pdaudiocf/pdaudiocf.c
    
    if one of the first three CS_CHECKS fails, we goto cs_failed:
    In this case parse we donr kfree() parse. Since the the last three
    CS_CHECKS might also fail, i moved the kfree() below all the CS_CHECKs
    and added one in the error path. This fixes coverity bug id #1099
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9b6d97b64eff08b368375efcf9c1d01eba582ea2
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 12 02:08:00 2006 -0400

    ACPI: scan: handle kset/kobject errors
    
    Check and handle kset_register() and kobject_register() init errors.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3bb056eb1df236f3344426860e584a8981486334
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Jul 12 11:55:39 2006 -0400

    [SCSI] NCR_D700: misc fixes (section and argument ordering)
    
    Apparently the D700 has had an argument ordering issue for quite a while
    which can cause it to get the wrong scsi_id (I just got an unbootable
    voyager system because of this).  Hopefully this patch also fixes up all
    the sectional mismatches within the driver.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6ecaff7fe84eb64796d8dfe667439290b4acfad0
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jul 11 20:53:22 2006 -0700

    [SCSI] scsi_debug: must_check fixes
    
    Check all __must_check warnings in scsi_debug.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b2d6744849b5bf6b4593b81c136772df7a238ac9
Merge: c676466... d2c993d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 08:30:57 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6:
      [S390] Fix sparse warnings.
      [S390] path grouping and path verifications fixes.
      [S390] xpram module parameter parsing.
      [S390] cpu_relax() is supposed to have barrier() semantics.
      [S390] fix futex_atomic_cmpxchg_inatomic
      [S390] subchannel register/unregister mutex.
      [S390] raw_local_save_flags/raw_local_irq_restore type check
      [S390] __builtin_trap() and gcc version.

commit c67646641cab01c93a56674bfcd963f55442dad5
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 08:29:46 2006 -0700

    Add PIIX4 APCI quirk for the 440MX chipset too
    
    This is confirmed to fix a hang due to PCI resource conflicts with
    setting up the Cardbus bridge on old laptops with the 440MX chipsets.
    Original report by Alessio Sangalli, lspci debugging help by Pekka
    Enberg, and trial patch suggested by Daniel Ritz:
    
      "From the docs available i would _guess_ this thing is really similar
       to the 82443BX/82371AB combination.  at least the SMBus base address
       register is hidden at the very same place (32bit at 0x90 in function
       3 of the "south" brigde)"
    
    The dang thing is largely undocumented, but the patch was corroborated
    by Asit Mallick:
    
      "I am trying to find the register information. 440MX is an integration of
       440BX north-bridge without AGP and PIIX4E (82371EB).  PIIX4 quirk
       should cover the ACPI and SMBus related I/O registers."
    
    and verified to fix the problem by Alessio.
    
    Cc: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
    Cc: Asit Mallick <asit.k.mallick@intel.com>
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Tested-by: Alessio Sangalli <alesan@manoweb.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 826adfe49a508f15943ce9140a3fc7f6c7661509
Merge: 7c3dec0... aadd06e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 12 08:14:48 2006 -0700

    Merge branch 'splice' of git://brick.kernel.dk/data/git/linux-2.6-block
    
    * 'splice' of git://brick.kernel.dk/data/git/linux-2.6-block:
      [PATCH] splice: fix problems with sys_tee()

commit d2c993d845781d160a7ef759a3e65c6892c4a270
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 12 16:41:55 2006 +0200

    [S390] Fix sparse warnings.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7e560814de1972e1bfc780616841d7a0032ca467
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Wed Jul 12 16:40:19 2006 +0200

    [S390] path grouping and path verifications fixes.
    
    1. Multipath devices for which SetPGID is not supported are not handled well.
       Use NOP ccws for path verification (sans path grouping) when SetPGID is not
       supported.
    2. Check for PGIDs already set with SensePGID on _all_ paths (not just the
       first one) and try to find a common one. Moan if no common PGID can be
       found (and use NOP verification). If no PGIDs have been set, use the css
       global PGID (as before). (Rationale: SetPGID will get a command reject if
       the PGID it tries to set does not match the already set PGID.)
    3. Immediately before reboot, issue RESET CHANNEL PATH (rcp) on all chpids. This
       will remove the old PGIDs. rcp will generate solicited CRWs which can be
       savely ignored by the machine check handler (all other actions create
       unsolicited CRWs).
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 5c898ba9d4b6c14fdd367b96e3641c2508b4a4a9
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 12 16:40:14 2006 +0200

    [S390] xpram module parameter parsing.
    
    The module parameters for xpram are not or in a wrong way parsed.
    The xpram module uses the module_param_array directive with an int
    parameter which causes the kernel to automatically parse the passed
    numbers. This will cause errors if arguments are omitted or cause
    wrong results if arguments have size qualifiers.
    Use module_param_array with charp and parse the arguments later.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit abdba61a4361e5d47c1633c9e7f56d32dbf4aae8
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 12 16:39:58 2006 +0200

    [S390] cpu_relax() is supposed to have barrier() semantics.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 13492c50f69bdf60a42debc6bd3ec49cc1dc941e
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Jul 12 16:39:55 2006 +0200

    [S390] fix futex_atomic_cmpxchg_inatomic
    
    futex_atomic_cmpxchg_inatomic has the same bug as the other
    atomic futex operations: the operation needs to be done in the
    user address space, not the kernel address space. Add the missing
    sacf 256 & sacf 0.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 6ab4879a0d074c938fd17dba141dce042fc17bee
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Wed Jul 12 16:39:50 2006 +0200

    [S390] subchannel register/unregister mutex.
    
    Add a reg_mutex to prevent unregistering a subchannel before it has been
    registered. Since 2.6.17, we've seen oopses in kslowcrw when a device is
    found to be not operational during sense id when doing initial device
    recognition; it is not clear yet why that particular problem was not (yet)
    observed with earlier kernels...
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 63f4f9e1281ea9b9a2304bd13d657ba9d401c9a7
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 12 16:39:47 2006 +0200

    [S390] raw_local_save_flags/raw_local_irq_restore type check
    
    Make sure that raw_local_save_flags and raw_local_irq_restore always get an
    unsigned long parameter. raw_irqs_disabled should call raw_local_save_flags
    instead of local_save_flags.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit f4a10b211ddb71d6b4e423fd529468691dec5cca
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jul 12 16:39:42 2006 +0200

    [S390] __builtin_trap() and gcc version.
    
    __builtin_trap() has the archictecture defined backend in gcc since gcc 3.3.
    To make sure the kernel builds with gcc 3.2 as well, use the old style BUG()
    statement if compiled with older gcc versions.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit e8bf39417b578a11e2ee2cd16e794a5b2d40757b
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Jul 11 17:49:34 2006 -0400

    [SCSI] scsi_transport_sas: kill the use of channel
    
    Using the port_id for the channel is completely unnecessary since the
    host_id/target_id are constructed to be globally unique.  Also move
    the mptsas driver on to virtual channel 1 for its raid devices.
    
    Acked-by: "Moore, Eric" <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a0e1b6ef3b851fe6f1dcc259432e83de79ce5e7f
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Jul 9 12:38:19 2006 -0500

    [SCSI] scsi_transport_sas: add expander backlink
    
    This patch adds the ability to add a backlink to a particular port.  The
    idea is to represent properly ports on expanders that are used
    specifically for linking to the parent device in the topology.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d568df84f987a9321c1f5826a6c8678ef2bb2b70
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 12 01:47:00 2006 -0400

    ACPI: handle firmware_register init errors
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2704f0e69f9e191c6f5873ebfc878e4be1893ef8
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Jul 11 22:56:14 2006 +0100

    [ARM] 3725/1: sharpsl_pm: warn about wrong temperature
    
    Patch from Pavel Machek
    
    Also warn users about charging in unsuitable temperature.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3821589c3becb4620dd56bf7f85c14084be1cf22
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Jul 11 22:56:13 2006 +0100

    [ARM] 3723/1: collie charging
    
    Patch from Pavel Machek
    
    It seems that sharp had charger on by default... This at least turns
    it off. Also battery reading now works and is useful.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f7ede370a2aac96903d6e25f3b04345fa6d066f2
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jul 11 22:54:34 2006 +0100

    [ARM] 3728/1: Restore missing CPU Hotplug irq helper
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    The genirq conversion of ARM lost a CPU Hotplug helper function.
    Restore it.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b94ea6c08d9f9ac5339b1c2025ce3ca87b007200
Author: Pavel Machek <pavel@ucw.cz>
Date:   Tue Jul 11 22:54:15 2006 +0100

    [ARM] 3727/1: fix ucb initialization on collie
    
    Patch from Pavel Machek
    
    From: Dirk Opfer <Dirk@Opfer-Online.de>
    
    Fix ucb initialization on collie. Wrong frequency was used and that
    led to things not working quite correctly. (I had to actually disable
    checks in my tree to get it to boot). It now includes all the
    neccessary parts to get it to compile :-).
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dc5bc8f1e96c32f28bddf32a14ef9251fb3071d0
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 10 16:33:54 2006 +0100

    [ARM] Allow Versatile to be built for AB and PB
    
    If a configuration was chosen to support both the Versatile
    AB and PB boards, the result would write to registers not
    available on the PB version of the board.  Resolve this by
    using machine_is_xxx().
    
    Also, for the CLCD, despite how the code looks, both the AB
    and PB access the same location to control the clock rate -
    it's just called something different between the two board
    versions.  Invent our own name for this location and use it
    unconditionally.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 20c4f88b7e4c2cd73bd4276417a9a0d4d22b0d66
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Jul 10 16:29:11 2006 +0100

    [ARM] 3726/1: update {ep93xx,ixp2000,ixp23xx,lpd270,onearm} defconfigs to 2.6.18-rc1
    
    Patch from Lennert Buytenhek
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7a2c3029850843210a55cf15f36227c8e578e6bd
Author: Pavel Machek <pavel@ucw.cz>
Date:   Mon Jul 10 16:29:10 2006 +0100

    [ARM] 3721/1: Small cleanup for locomo.c
    
    Patch from Pavel Machek
    
    Cleanup locomo.c.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8b0036eefd7a96f23244b969417684c8627f5ad6
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Tue Jul 11 09:11:25 2006 +0200

    [MTD] NAND: OOB buffer offset fixups
    
    In the case of data-pad-ecc-pad-data... layout the oob start position
    has to be sizeof(data) in nand_write_oob_syndrom().
    
    In nand_fill_oob() we need to copy to buf + buffer offset instead of
    buf + write offset.
    
    From: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7c3dec0679c66ce177726802adbe2f403942fc27
Author: Linus Torvalds <torvalds@macmini.osdl.org>
Date:   Mon Jul 10 22:21:43 2006 -0700

    x86 MacMini: make built-in speaker sound actually work
    
    The MacMini board table seems to largely look like any bog-standard
    Intel 945 board.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c80dc60b03d633047c7f96be87fd59cdcdbb929f
Merge: 90ca9a2... 0466684...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 10 15:14:38 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6:
      ACPI: ACPI_DOCK: Initialize the atomic notifier list
      ACPI: acpi_os_allocate() fixes
      ACPI: SBS: fix initialization, sem2mutex
      ACPI: add 'const' to several ACPI file_operations
      ACPI: delete some defaults from ACPI Kconfig
      ACPI: "Device `[%s]' is not power manageable" make message debug only
      ACPI: ACPI_DOCK Kconfig
      Revert "Revert "ACPI: dock driver""
      ACPI: acpi_os_get_thread_id() returns current
      ACPI: ACPICA 20060707

commit 90ca9a2ff4d6b89b6939c3ece19f8fed1eecdbab
Merge: 2c87e2c... 9faefb6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 10 15:13:53 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6 of HEAD
    
    * HEAD:
      [DCCP]: Fix sparse warnings.
      [TCP]: Remove TCP Compound
      [BPQ] lockdep: fix false positive
      [IPV4] inetpeer: Get rid of volatile from peer_total
      [AX.25]: Get rid of the last volatile.

commit 2c87e2cd0b57f63c226cd51f55ccc36867541a24
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jul 10 17:06:24 2006 +0200

    [PATCH] x86_64: Fix access check in ptrace compat
    
    We can't safely directly access an compat_alloc_user_space() pointer
    with the siginfo copy functions. Bounce it through the stack.
    
    Noticed by Al Viro using sparse
    
    [ This was only added post 2.6.17, not in any released kernel ]
    
    Cc: Al Viro <viro@ftp.linux.org.uk>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cfcea1b2d67987ddb84dc75f454321bcf536555
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jul 10 17:06:21 2006 +0200

    [PATCH] x86_64: Allow oprofile for model P4 models
    
    Add it for P4 model 6 - reported to work and have a similar PMU to
    earlier P4s.
    
    Add an p4force=1 module override parameter for future use.
    
    We had a discussion about that earlier - it's a trade off between the
    PMU staying compatible or not.  I think the force parameter is a
    reasonable compromise.
    
    Cc: oprofile-list@lists.sf.net
    Cc: Asit Mallick <asit.k.mallick@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46f6976101c359202422753d15955f67aafabe2b
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jul 10 17:06:18 2006 +0200

    [PATCH] x86_64: Fix up bogus defaults in ACPI Kconfig
    
    No need for video to be always in
    No need for smart battery driver to be always in
    
    Acked-by: Len Brown <len.brown@intel.com>
    Cc: linux-acpi@vger.kernel.org
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa0a9f373e3edb2c090f3fa0eb292712cfa97f81
Author: Muli Ben-Yehuda <muli@il.ibm.com>
Date:   Mon Jul 10 17:06:15 2006 +0200

    [PATCH] x86_64: Fix Calgary copyright statements per IBM guidelines
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77dac90fe4c3d05917045169ec1e3dbc589c0865
Author: Muli Ben-Yehuda <muli@il.ibm.com>
Date:   Mon Jul 10 17:06:12 2006 +0200

    [PATCH] x86_64: Add a MAINTAINERS entry for Calgary
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d2caebd562a20188a0d7f4e4f516b7ed69f319e
Author: Jacob Shin <jacob.shin@amd.com>
Date:   Mon Jul 10 17:06:09 2006 +0200

    [PATCH] x86_64: Fix hotplug problem in mce amd
    
    Signed-off-by: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3391c22e5b6aaeb289bcc1ad0d5b3f2ba5421f22
Author: Markus Schoder <lists@gammarayburst.de>
Date:   Mon Jul 10 17:06:06 2006 +0200

    [PATCH] x86_64: Bring x86-64 ia32 emul in sync with i386 on READ_IMPLIES_EXEC enabling
    
    Currently ia32 binaries behave differently with respect to enabling
    READ_IMPLIES_EXEC.  On i386 a binary with the exec_stack flag set is
    executed with READ_IMPLIES_EXEC enabled as well.  The same binary
    executes without READ_IMPLIES_EXEC on x86-64.
    
    This causes binaries that work on i386 to fail on x86-64 which goes
    somewhat against the whole 32 bit emulation idea.
    
    It has been argued that READ_IMPLIES_EXEC should not be enabled at all
    for binaries that have the exec_stack flag.  Which is probably a valid
    point.  However until this is clarified I think x86-64 should behave the
    same for ia32 binaries as i386.
    
    The following patch brings x86-64 in sync with i386 for ia32 binaries.
    
    Signed-off-by: Markus Schoder <lists@gammarayburst.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5d8ad78b05d13c658aae8f4b06b6d339f13fd58
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jul 10 17:06:03 2006 +0200

    [PATCH] x86_64: Update defconfig
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9faefb6d41f770e9cebad0fa180e7e78ef861211
Author: Alan Cox <alan@redhat.com>
Date:   Mon Jul 10 14:24:23 2006 -0700

    [DCCP]: Fix sparse warnings.
    
    No actual bugs that I can see just a couple of unmarked casts
    getting annoying in my debug log files.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c427d27452b41378e305af80db5757da048dd38e
Author: David S. Miller <davem@davemloft.net>
Date:   Mon Jul 10 14:16:32 2006 -0700

    [TCP]: Remove TCP Compound
    
    This reverts: f890f921040fef6a35e39d15b729af1fd1a35f29
    
    The inclusion of TCP Compound needs to be reverted at this time
    because it is not 100% certain that this code conforms to the
    requirements of Developer's Certificate of Origin 1.1 paragraph (b).
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1eeb7e42888b3bde403596eebdbd64452a53f4d5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 10 11:24:46 2006 -0700

    [BPQ] lockdep: fix false positive
    
    Bpqether is encapsulating AX.25 frames into ethernet frames.  There is a
    virtual bpqether device paired with each ethernet devices, so it's normal
    to pass through dev_queue_xmit twice for each frame which triggers the
    locking detector.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7466d90f858ad89dda6f47b744e0a839937907a3
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jul 9 18:18:00 2006 -0700

    [IPV4] inetpeer: Get rid of volatile from peer_total
    
    The variable peer_total is protected by a lock.  The volatile marker
    makes no sense.  This shaves off 20 bytes on i386.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bde3445c562dc72f0003550ba30db1e39be10366
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 18:16:44 2006 -0700

    [AX.25]: Get rid of the last volatile.
    
    This volatile makes no sense - not even wearing pink shades ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e2b209509ca33743864846aef2e1b2afc21f7915
Author: Shankar Anand <shanand@novell.com>
Date:   Mon Jul 10 04:45:44 2006 -0700

    [PATCH] knfsd: nfsd4: add per-operation server stats
    
    Add an nfs4 operations count array to nfsd_stats structure.  The count is
    incremented in nfsd4_proc_compound() where all the operations are handled
    by the nfsv4 server.  This count of individual nfsv4 operations is also
    entered into /proc filesystem.
    
    Signed-off-by: Shankar Anand <shanand@novell.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd6b3956e9923915da789df1c665976b5583cfb0
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Mon Jul 10 04:45:43 2006 -0700

    [PATCH] isdn: cleanup i_rdev udage
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c16e9c888985761511bd1905b00fb271169c3c0
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Jul 10 04:45:42 2006 -0700

    [PATCH] lockdep: disable lock debugging when kernel state becomes untrusted
    
    Disable lockdep debugging in two situations where the integrity of the
    kernel no longer is guaranteed: when oopsing and when hitting a
    tainting-condition.  The goal is to not get weird lockdep traces that don't
    make sense or are otherwise undebuggable, to not waste time.
    
    Lockdep assumes that the previous state it knows about is valid to operate,
    which is why lockdep turns itself off after the first violation it reports,
    after that point it can no longer make that assumption.
    
    A kernel oops means that the integrity of the kernel compromised; in
    addition anything lockdep would report is of lesser importance than the
    oops.
    
    All the tainting conditions are of similar integrity-violating nature and
    also make debugging/diagnosing more difficult.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e54695a59c278b9ff48cd4b263da7a1d392f5061
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:45:42 2006 -0700

    [PATCH] checklist update
    
    Update Documentation/SubmitChecklist.
    
    - Mention lockdep coverage
    
    - Describe documentation requirements
    
    - Number the various items to simplify the composition of caustic emails.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e62c23c751b5136ed52ac324ecf78a814e2d2fe3
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:45:40 2006 -0700

    [PATCH] proper prototype for drivers/message/i2o/device.c:i2o_parm_issue()
    
    Add a proper prototype for i2o_parm_issue() in core.h.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c59923a15c12d2b3597af913bf234a0ef264a38b
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 10 04:45:40 2006 -0700

    [PATCH] remove the tasklist_lock export
    
    As announced half a year ago this patch will remove the tasklist_lock
    export.  The previous two patches got rid of the remaining modular users.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f84dfe82962759f3355eacc8e377361bb77b5274
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 10 04:45:39 2006 -0700

    [PATCH] s390: remove BINFMT_ELF32 config option
    
    Remove BINFMT_ELF32 config option.  Support should be always compiled in if
    CONFIG_COMPAT is set.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 289fbc21ea5ac445dfb4326090b1912387e849b5
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 10 04:45:38 2006 -0700

    [PATCH] disallow modular binfmt_elf32
    
    Currently most architectures either always build binfmt_elf32 in the kernel
    image or make it a boolean option.  Only sparc64 and s390 allow to build it
    modularly.  This patch turns the option into a boolean aswell because elf
    requires various symbols that shouldn't be available to modules.  The most
    urgent one is tasklist_lock whos export this patch series kills, but there
    are others like force_sgi aswell.
    
    Note that sparc doesn't allow a modular 32bit a.out handler either, and
    that would be the more useful case as only few people want 32bit sunos
    compatibility and 99.9% of all sparc64 users need 32bit linux native elf
    support.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Acked-by: "David S. Miller" <davem@davemloft.net>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c318bef5f61baf6bbda2dcfe8c2ef71007c7fea
Author: Christoph Hellwig <hch@lst.de>
Date:   Mon Jul 10 04:45:37 2006 -0700

    [PATCH] snsc: switch from force_sig to kill_proc
    
    Currently the snsc driver uses force_sig to send init a SIGPWR when the
    system overheats.  This patch switches it to kill_proc instead which has
    the following advantages:
    
     (1) gets rid of one of the last remaining tasklist_lock users
         in modular code
     (2) simplifies the snsc code significantly
    
    The downside is that an init implementation could in theory block SIGPWR
    and it would not get delivered.  The sysvinit code used by all major
    distributions doesn't do this and blocking this signal in init would be a
    rather stupid thing to do.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit babcfade47371eea81fd7f24d892b5ff5b1786ea
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Mon Jul 10 04:45:37 2006 -0700

    [PATCH] pc8736x_gpio: fix re-modprobe errors: fix/finish cdev-init
    
    - Switch from register_chrdev() to   (register|alloc)_chrdev_region().
    
    - use a cdev.  This was intended for original patchset, but was
      overlooked.
    
      We use a single cdev for all pins (minor device-numbers), as gleaned
      from cs5535_gpio, and in contrast to whats currently done in scx200_gpio
      (which I'll fix soon)
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27385085f19a9bc9b147905554e6e2509fdaceb2
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Mon Jul 10 04:45:36 2006 -0700

    [PATCH] pc8736x_gpio: fix re-modprobe errors: undo region reservation
    
    Fix module-init-func by repairing usage of platform_device_del/put in
    module-exit-func.  IOW, it imitates Ingo's 'mishaps' patch, which fixed the
    module-init-func's undo handling.
    
    Also fixes lack of release_region to undo the earlier registration.
    
    Also starts to 'use a cdev' which was originally intended (its present in
    scx200_gpio).  Code compiles and runs, exhibits a lesser error than
    previously.  (re-register-chrdev fails)
    
    Since I had to add "include <linux/cdev.h>", I went ahead and made 2
    tweaks that fell into diff-context-window:
    - remove include <linux/config.h>      everyone's doing it
    - copyright updates - current date is 'wrong'
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f197842d0f3dd994882407f8760f2eda9005191
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Mon Jul 10 04:45:35 2006 -0700

    [PATCH] pc8736x_gpio: fix re-modprobe errors: define and use constants
    
    add constant defines - preparatory patch
    
    - adds #define CONSTs  for max-pin,  gpio-addr-range (for reserving region)
    - fix wrong max-pin check in gpio_open()
    - add 'Winbond' to module description.  NSC sold the product, Winbond
      has supported us / lm-sensors
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a87d9425e0347c0e880254816d8e9f41a0e2b0c
Author: Chris Boot <bootc@bootc.net>
Date:   Mon Jul 10 04:45:34 2006 -0700

    [PATCH] LED Class support for Soekris net48xx
    
    Add LED Class device support for the Soekris net48xx Error LED.  Tested
    only on a net4801, but should work on a net4826 as well.  I'd love to find
    a way of detecting a Soekris net48xx device but there is no DMI or any
    Soekris-specific PCI devices.
    
    [akpm@osdl.org: fixlets, cleanups]
    Signed-off-by: Chris Boot <bootc@bootc.net>
    Cc: Ben Dooks <ben-linux@fluff.org>
    Cc: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36cf96f5e7c098731a1ad9d79694d6f591b18e7f
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Mon Jul 10 04:45:33 2006 -0700

    [PATCH] Remove leftover ext3 acl declarations
    
    These functions no longer exist; remove their declarations.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2017b376c01a54bf7d26ad4f461abe9b5f9064fe
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Mon Jul 10 04:45:32 2006 -0700

    [PATCH] aoe: cleanup i_rdev usage
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21d71f513b6221f482ed6ad45e05f073ae67f319
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 10 04:45:32 2006 -0700

    [PATCH] uninline init_waitqueue_head()
    
    allyesconfig vmlinux size delta:
    
      text            data    bss     dec          filename
      20736884        6073834 3075176 29885894     vmlinux.before
      20721009        6073966 3075176 29870151     vmlinux.after
    
    ~18 bytes per callsite, 15K of text size (~0.1%) saved.
    
    (as an added bonus this also removes a lockdep annotation.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92eb7a2f28d551acedeb5752263267a64b1f5ddf
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:45:31 2006 -0700

    [PATCH] fix weird logic in alloc_fdtable()
    
    There's a fairly obvious infinite loop in there.
    
    Also, use roundup_pow_of_two() rather than open-coding stuff.
    
    Cc: Eric Dumazet <dada1@cosmosbay.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38e0e8c0550eaed1af48ec5ad9ddb8a25e8b04ae
Author: Maciej W. Rozycki <macro@linux-mips.org>
Date:   Mon Jul 10 04:45:30 2006 -0700

    [PATCH] char/rtc: Handle memory-mapped chips properly
    
    Handle memory-mapped chips properly, needed for example on DECstations.
    This support was in Linux 2.4 but for some reason got lost in 2.6.  This
    patch is taken directly from the linux-mips repository.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Cc: Paul Gortmaker <penguin@muskoka.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06c67befeeb16f2995c11b0e04a348103ddbfab1
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Jul 10 04:45:27 2006 -0700

    [PATCH] make valid_mmap_phys_addr_range() take a pfn
    
    Newer ARMs have a 40 bit physical address space, but mapping physical
    memory above 4G needs a special page table format which we (currently?) do
    not use for userspace mappings, so what happens instead is that mapping an
    address >= 4G will happily discard the upper bits and wrap.
    
    There is a valid_mmap_phys_addr_range() arch hook where we could check for
    >= 4G addresses and deny the mapping, but this hook takes an unsigned long
    address:
    
    	static inline int valid_mmap_phys_addr_range(unsigned long addr, size_t size);
    
    And drivers/char/mem.c:mmap_mem() calls it like this:
    
    	static int mmap_mem(struct file * file, struct vm_area_struct * vma)
    	{
    		size_t size = vma->vm_end - vma->vm_start;
    
    		if (!valid_mmap_phys_addr_range(vma->vm_pgoff << PAGE_SHIFT, size))
    
    So that's not much help either.
    
    This patch makes the hook take a pfn instead of a phys address.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 49c0dab7e6000888b616bedcbbc8cd4710331610
Author: Doug Thompson <norsk5@xmission.com>
Date:   Mon Jul 10 04:45:19 2006 -0700

    [PATCH] Fix and enable EDAC sysfs operation
    
    When EDAC was first introduced into the kernel it had a sysfs interface,
    but due to some problems it was disabled in 2.6.16 and remained disabled in
    2.6.17.
    
    With feedback, several of the control and attribute files of that interface
    had some good constructive feedback.  PCI Blacklist/Whitelist was a major
    set which has design issues and it has been removed in this patch.  Instead
    of storing PCI broken parity status in EDAC, it has been moved to the
    pci_dev structure itself by a previous PCI patch.  A future patch will
    enable that feature in EDAC by utilizing the pci_dev info.
    
    The sysfs is now enabled in this patch, with a minimal set of control and
    attribute files for examining EDAC state and for enabling/disabling the
    memory and PCI operations.
    
    The Documentation for EDAC has also been updated to reflect the new state
    of EDAC operation.
    
    Signed-off-by:Doug Thompson <norsk5@xmisson.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68e3c5e3b5c29ea76152dc1d1482826434d45019
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jul 10 04:45:18 2006 -0700

    [PATCH] s390: broken null test in claw driver
    
    Whoops, better hope this never gets passed a null dev in its current state.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Michael Holzheu <holzheu@de.ibm.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1c0a578ca960d10fce049765bb9e5a53fb53d2e
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jul 10 04:45:18 2006 -0700

    [PATCH] fix oddball boolean logic in s390 netiucv
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Andreas Herrmann <aherrman@de.ibm.com>
    Cc: Michael Holzheu <holzheu@de.ibm.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c4b9a9b553794d81cc8a335dac270ac86fd7798
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Mon Jul 10 04:45:17 2006 -0700

    [PATCH] s390: move var declarations behind ifdef
    
    Two variables in drivers/s390/net/qeth_main.c:qeth_send_packet() are only
    used if CONFIG_QETH_PERF_STATS.  Move their definition under the same ifdef
    to remove compiler warning.
    
    Signed-off-by: Serge Hallyn <serue@us.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d77f6fcf841261796f01cba19b4ea1ad8713936
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:16 2006 -0700

    [PATCH] uml: make mconsole version requests happen in a process
    
    Handling a host mconsole version request must be done in a process context
    rather than interrupt context now that utsname information can be
    process-specific rather than global.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03a3f824eae944e9d3649cbccf874e7fbe228477
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:15 2006 -0700

    [PATCH] uml: remove unused variable
    
    The dedevfsification of UML left an unused variable behind.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ead6feedd28091d86cde0843be914847b4e10e8
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:15 2006 -0700

    [PATCH] uml: add some EINTR protection
    
    Add some more uses of the CATCH_EINTR wrapper.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 108ffa8cbfa323d462a2f4b49f38da3205d36e5a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:14 2006 -0700

    [PATCH] uml: formatting fixes
    
    Fix a bunch of formatting problems.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d3468a6643a6a5905e2ac9ae1fa1aefc06d882a
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:13 2006 -0700

    [PATCH] uml: move _kern.c files
    
    Move most *_kern.c files in arch/um/kernel to *.c.  This makes UML somewhat
    more closely resemble the other arches.
    
    [akpm@osdl.org: use the new INTF_* flags]
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 469226a431f553a7b3ec17d87ce3c2d1c6c25fb2
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:13 2006 -0700

    [PATCH] uml: remove syscall debugging
    
    Eliminate an unused debug option.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29ac1c2142346e1e0e072f41df31688fc42ff540
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:12 2006 -0700

    [PATCH] uml: make some symbols static
    
    A few sigio-related things can be made static.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61232f2fe44f7ac12d7512d099a8f10923eff7ea
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:11 2006 -0700

    [PATCH] uml: fix exitcall ordering bug
    
    This fixes an exitcall ordering bug - calls to ignore_sigio_fd can come from
    exitcalls that come after the sigio thread has been killed.  This would cause
    shutdown to hang or crash.
    
    Fixed by having ignore_sigio_fd check that the thread is present before trying
    to communicate with it.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e64d96aeb495709c13307e2d79f3ee37e96aa4e
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:11 2006 -0700

    [PATCH] uml: remove os_isatty
    
    os_isatty can be made to disappear by moving maybe_sigio_broken from kernel to
    user code.  This also lets write_sigio_workaround become static.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfaafd7184f044c63cd937cb0ffb4334b4ec7635
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:10 2006 -0700

    [PATCH] uml: remove spinlock wrapper functions
    
    The irq_spinlock is not needed from user code any more, so the irq_lock and
    irq_unlock wrappers can go away.  This also changes the name of the lock to
    irq_lock.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ae43ff8aa60f81f5d82a4911d704ce8902d11fb
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:09 2006 -0700

    [PATCH] uml: mark forward_interrupts as being mode-specific
    
    Mark forward_interrupts as being tt-mode only.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bacf4549187ddb624a5d89129c7dccc0ca67ce7c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:09 2006 -0700

    [PATCH] uml: ifdef a mode-specific function
    
    uml_idle_timer is tt-mode only, so ifdef it as such to make it easier to spot
    when tt mode is killed.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 872aaa65a6ef30edef05a89977f7021f9840b215
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:08 2006 -0700

    [PATCH] uml: timer handler tidying
    
    Get rid of a user of timer_irq_inited (and first_tick) by observing that
    prev_ticks can be used to decide if this is the first call.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e64bd134085451fe3f751025c5d5a70729164b7c
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:07 2006 -0700

    [PATCH] uml: signal initialization cleanup
    
    It turns out that init_new_thread_signals is always called with altstack == 1,
    so we can eliminate the parameter.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9914aee827322f46c306d724b38ad73af7daa9a5
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:07 2006 -0700

    [PATCH] uml: remove useless declaration
    
    wall_to_monotonic isn't used in this file, so we can remove the declaration.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23bbd586ed7894982fd9323f63b2065afbb77773
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:06 2006 -0700

    [PATCH] uml: fix static binary segfault
    
    When UML is built as a static binary, it segfaults when run.  The reason is
    that a memory hole that is present in dynamic binaries isn't there in static
    binaries, and it contains essential stuff.
    
    This fix removes the code which maps some anonymous memory into that hole and
    cleans up some related code.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8633c2331e738218c7356633e1c4adb75726225f
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:05 2006 -0700

    [PATCH] uml: remove some useless exports
    
    Spotted by Al Viro - eliminate a couple useless exports.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aceb343464a136e1c0de5294b097a1f9ab018870
Author: Jeff Dike <jdike@addtoit.com>
Date:   Mon Jul 10 04:45:05 2006 -0700

    [PATCH] uml: timer initialization cleanup
    
    This cleans up the mess that is the timer initialization.  There used to be
    two timer handlers - one that basically ran during delay loop calibration and
    one that handled the timer afterwards.  There were also two sets of timer
    initialization code - one that starts in user code and calls into the kernel
    side of the house, and one that starts in kernel code and calls user code.
    
    This eliminates one timer handler and consolidates the two sets of
    initialization code.
    
    [akpm@osdl.org: use new INTF_ flags]
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 598d188af1a0645dc75c9541eff0017a4f6d9987
Author: Tyler <tyler@agat.net>
Date:   Mon Jul 10 04:45:03 2006 -0700

    [PATCH] uml: clean up address space limits code
    
    I was looking at the code of the UML and more precisely at the functions
    set_task_sizes_tt and set_task_sizes_skas.  I noticed that these 2 functions
    take a paramater (arg) which is not used : the function is always called with
    the value 0.
    
    I suppose that this value might change in the future (or even can be
    configured), so I added a constant in mem_user.h file.
    
    Also, I rounded CONFIG_HOST_TASk_SIZE to a 4M.
    
    Signed-off-by: Tyler <tyler@agat.net>
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f49d7247828bd2d992cf9bd78e5e33a421fb0ba
Author: Irwan Djajadi <irwan.djajadi@iname.com>
Date:   Mon Jul 10 04:45:02 2006 -0700

    [PATCH] pcf8563: remove MOD_INC_USE_COUNT, MOD_DEC_USE_COUNT
    
    It already has .owner.
    
    Signed-off-by: Irwan Djajadi <irwan.djajadi@iname.com>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32ea086b7b6423e8ab1874389741bcef4d50f938
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Mon Jul 10 04:45:02 2006 -0700

    [PATCH] cris: switch to iminor/imajor
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aeceb15738958fe59cd9fe537f40317b1a3bc731
Author: Linus Torvalds <torvalds@osdl.org>
Date:   Mon Jul 10 04:45:01 2006 -0700

    [PATCH] swsusp: fix panic when signature can't be read
    
    Do not panic a machine when swsusp signature can't be read.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 712f403af6682c942d8ff8bfbd54eed03643a796
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:45:00 2006 -0700

    [PATCH] swsusp warning fix
    
    kernel/power/swap.c: In function 'swsusp_write':
    kernel/power/swap.c:275: warning: 'start' may be used uninitialized in this function
    
    gcc isn't smart enough, so help it.
    
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: "Rafael J. Wysocki" <rjw@sisk.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95018f7c94cbe4e78fc014b6ce52004714c06e2a
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Mon Jul 10 04:45:00 2006 -0700

    [PATCH] swsusp: do not use memcpy for snapshotting memory
    
    swsusp should not use memcpy for snapshotting memory, because on some
    architectures memcpy may increase preempt_count (i386 does this when
    CONFIG_X86_USE_3DNOW is set).  Then, as a result, wrong value of preempt_count
    is stored in the image.
    
    Replace memcpy in copy_data_pages with an open-coded loop.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ba1c6c88c945b065a75094830f6b76f414e42ad
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:44:59 2006 -0700

    [PATCH] get_cmos_time() locking fix (lockdep)
    
    rtc_lock is supposed to be irq-safe.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11eebe307e4d3afa33eb25e999ac458ac4f9b41e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:56 2006 -0700

    [PATCH] i386 defconfig: set CONFIG_PM_STD_PARTITION=""
    
    Matthew Wilcox notified me that CONFIG_PM_STD_PARTITION="/dev/hda2" in the
    i386 defconfig wasn't a good idea (especially since it prevented booting
    for him due to another bug).
    
    This patch sets CONFIG_PM_STD_PARTITION="" in the i386 defconfig.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Matthew Wilcox <willy@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84e8cd6dbc00b4979e8d1c15c80d91987aeb3417
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:55 2006 -0700

    [PATCH] FRV: Introduce asm-offsets for FRV arch
    
    Introduce the use of asm-offsets into the FRV architecture.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d8c4e3b0150ff537902477ed62f8a8e9e70007b
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:55 2006 -0700

    [PATCH] FDPIC: Add coredump capability for the ELF-FDPIC binfmt
    
    Add coredump capability for the ELF-FDPIC binfmt.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4cac1a0227a6f84be0381cd350a3c8730a4a671
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:54 2006 -0700

    [PATCH] FDPIC: Move roundup() into linux/kernel.h
    
    Move the roundup() macro from binfmt_elf.c into linux/kernel.h as it's
    generally useful.
    
    [akpm@osdl.org: nuke all the other implementations]
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01bf466e1866feeb7fce0319cbafe0166e29f5e4
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:53 2006 -0700

    [PATCH] FDPIC: Define SEEK_* constants in the Linux kernel headers
    
    Add definitions for SEEK_SET, SEEK_CUR and SEEK_END to the kernel header
    files.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a2ab7f5df76b920d62b908919d987d3b8a82856
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:53 2006 -0700

    [PATCH] FDPIC: Adjust the ELF-FDPIC driver to conform more to the CodingStyle
    
    Adjust the ELF-FDPIC binfmt driver to conform much more to the CodingStyle,
    silly though it may be.
    
    Further changes:
    
     (*) Drop the casts to long for addresses in kdebug() statements (they're
         unsigned long already).
    
     (*) Use extra variables to avoid expressions longer than 80 chars by splitting
         the statement into multiple statements and letting the compiler optimise
         them back together.
    
     (*) Eliminate duplicate call of ksize() when working out how much space was
         actually allocated for the stack.
    
     (*) Discard the commented-out load_shlib prototype and op pointer as this will
         not be supported in ELF-FDPIC for the foreseeable future.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21ff821630c0e64f5d2fab96ced72000d77fa90b
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:52 2006 -0700

    [PATCH] NOMMU: Fix execution off of ramfs with mmap()
    
    Fix execution through the FDPIC binfmt of programs stored on ramfs by
    preventing the ramfs mmap() returning successfully on a private mapping of
    a ramfs file.  This causes NOMMU mmap to make a copy of the mapped portion
    of the file and map that instead.
    
    This could be improved by granting direct mapping access to read-only
    private mappings for which the data is stored on a contiguous run of pages.
     However, this is only likely to be the case if the file was extended with
    truncate before being written.
    
    ramfs is left to map the file directly for shared mappings so that SYSV IPC
    and POSIX shared memory both still work.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dec17eb577169f78d642c5424e4264186d27115
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:51 2006 -0700

    [PATCH] FRV: Fix FRV arch compile errors
    
    Fix some FRV arch compile errors, including:
    
     (*) Marking nr_kernel_pages as __meminitdata so that references to it end up
         being properly calculated rather than being assumed to be in the small
         data section (and thus calculated wrt the GP register).  Not doing this
         causes the linker to emit errors as the offset is too big to fit into the
         load instruction.
    
     (*) Move pm_power_off into an unconditionally compiled .c file as it's now
         unconditionally accessed.
    
     (*) Declare frv_change_cmode() in a header file rather than in a .c file, and
         declare it asmlinkage.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1aeb21d626327ee909fef03f72aea6e8a60e6c0c
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jul 10 04:44:50 2006 -0700

    [PATCH] FDPIC: Fix FDPIC compile errors
    
    Fix FDPIC compile errors.
    
    (akpm: we suspect it fixes a warning)
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6174df5eec9cdfd598c03d6d0807e344e109213
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Mon Jul 10 04:44:49 2006 -0700

    [PATCH] mmap zero-length hugetlb file with PROT_NONE to protect a hugetlb virtual area
    
    Sometimes, applications need below call to be successful although
    "/mnt/hugepages/file1" doesn't exist.
    
    fd = open("/mnt/hugepages/file1", O_CREAT|O_RDWR, 0755);
    *addr = mmap(NULL, 0x1024*1024*256, PROT_NONE, 0, fd, 0);
    
    As for regular pages (or files), above call does work, but as for huge
    pages, above call would fail because hugetlbfs_file_mmap would fail if
    (!(vma->vm_flags & VM_WRITE) && len > inode->i_size).
    
    This capability on huge page is useful on ia64 when the process wants to
    protect one area on region 4, so other threads couldn't read/write this
    area.  A famous JVM (Java Virtual Machine) implementation on IA64 needs the
    capability.
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Cc: David Gibson <david@gibson.dropbear.id.au>
    Cc: Hugh Dickins <hugh@veritas.com>
    [ Expand-on-mmap semantics again... this time matching normal fs's. wli ]
    Acked-by: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6b7d3b62069be60d5b13358bac8670dacdd7a81
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jul 10 04:44:47 2006 -0700

    [PATCH] usb-storage: wait for URB to complete
    
    We all failed to notice that Franck's recent update to usb-storage allowed
    an URB to complete after its context data was no longer valid.  This patch
    (as746) makes the driver wait for the URB to complete whenever there's a
    timeout.
    
    Although timeouts in usb-storage are relatively uncommon, they do occur.
    Without this patch the code in 2.6.18-rc1 will fault within an interrupt
    handler, which is not nice at all.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82081797b7d72108a47c82997349d1ea6a3eb3d5
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Mon Jul 10 04:44:46 2006 -0700

    [PATCH] pci: initialize struct pci_dev.error_state
    
    The pci channel state is currently uninitialized, thus there are two ways
    of indicating that "everything's OK": 0 and 1.  This is a bit of a burden.
    
    If a devce driver wants to check if the pci channel is in a working or a
    disconnected state, the driver writer must perform checks similar to
    
       if((pdev->error_state != 0) &&
          (pdev->error_state != pci_channel_io_normal)) {
             whatever();
       }
    
    which is rather akward.  The first check is needed because stuct pci_dev is
    inited to all-zeros.  The scond is needed because the error recovery will
    set the state to pci_channel_io_normal (which is not zero).
    
    This patch fixes this awkwardness.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e01af0384f54023b4548b7742952da2ffcafd4cd
Author: Michael Hanselmann <linux-kernel@hansmi.ch>
Date:   Mon Jul 10 04:44:45 2006 -0700

    [PATCH] powermac: Combined fixes for backlight code
    
    This patch fixes several problems:
    - pmac_backlight_key() is called under interrupt context, and therefore
      can't use mutexes or semaphores, so defer the backlight level for
      later, as it's not critical (original code by Aristeu S. Rozanski F.
      <aris@valeta.org>).
    - Add exports for functions that might be called from modules
    - Fix Kconfig depdencies on PMAC_BACKLIGHT.
    - Fix locking issues on calls from inside the driver (reported by
      Aristeu S. Rozanski F., too)
    - Fix wrong calculation of backlight values in some of the drivers
    - Replace pmac_backlight_key_up/down by inline functions
    
    [akpm@osdl.org: fix function prototypes]
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Acked-by: Aristeu S. Rozanski F. <aris@valeta.org>
    Acked-by: Rene Nussbaumer <linux-kernel@killerfox.forkbomb.ch>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58d383a6222d66be9483598c51bae34e7d3c2c37
Author: Segher Boessenkool <segher@kernel.crashing.org>
Date:   Mon Jul 10 04:44:45 2006 -0700

    [PATCH] powerpc: make OF interrupt tree parsing more strict
    
    This patch fixes a bit of boundchecking in the new Open Firmware interrupt
    tree parsing code.  It's important that it fails when things aren't correct in
    order to trigger fallback mecanisms that are necessary to make some machines
    work properly.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f620753b9584558cd3bcc1712fca16663aacdce4
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:44 2006 -0700

    [PATCH] powerpc: fix SMU driver interrupt mapping
    
    The SMU driver tries to map an interrupt from the device-tree before the
    interrupt controllers in the machine have been enumerated.  This doesn't work
    properly and cause machines like the Quad g5 to fail booting later on when
    some drivers waits endlessly for an SMU request to complete.  This is the
    second problem preventing boot on the Quad g5.  This fixes it and also makes
    the SMU driver a bit more resilient to not having an interrupt.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06fe98e6369330d522705d5e67a2eddac2fd5bba
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:43 2006 -0700

    [PATCH] powerpc: fix MPIC OF tree parsing on Apple quad g5
    
    The quad g5 currently doesn't boot due to two problems.  This patch fixes the
    first one: Apple new way of doing interrupt specifiers in OF for devices using
    the HT APIC isn't properly parsed by the new MPIC driver code.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e99e4582861578fb00d84d085f8f283569f51dd
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:42 2006 -0700

    [PATCH] powerpc: fix trigger handling in the new irq code
    
    This patch slightly reworks the new irq code to fix a small design error.  I
    removed the passing of the trigger to the map() calls entirely, it was not a
    good idea to have one call do two different things.  It also fixes a couple of
    corner cases.
    
    Mapping a linux virtual irq to a physical irq now does only that.  Setting the
    trigger is a different action which has a different call.
    
    The main changes are:
    
    - I no longer call host->ops->map() for an already mapped irq, I just return
      the virtual number that was already mapped.  It was called before to give an
      opportunity to change the trigger, but that was causing issues as that could
      happen while the interrupt was in use by a device, and because of the
      trigger change, map would potentially muck around with things in a racy way.
       That was causing much burden on a given's controller implementation of
      map() to get it right.  This is much simpler now.  map() is only called on
      the initial mapping of an irq, meaning that you know that this irq is _not_
      being used.  You can initialize the hardware if you want (though you don't
      have to).
    
    - Controllers that can handle different type of triggers (level/edge/etc...)
      now implement the standard irq_chip->set_type() call as defined by the
      generic code.  That means that you can use the standard set_irq_type() to
      configure an irq line manually if you wish or (though I don't like that
      interface), pass explicit trigger flags to request_irq() as defined by the
      generic kernel interfaces.  Also, using those interfaces guarantees that
      your controller set_type callback is called with the descriptor lock held,
      thus providing locking against activity on the same interrupt (including
      mask/unmask/etc...) automatically.  A result is that, for example, MPIC's
      own map() implementation calls irq_set_type(NONE) to configure the hardware
      to the default triggers.
    
    - To allow the above, the irq_map array entry for the new mapped interrupt
      is now set before map() callback is called for the controller.
    
    - The irq_create_of_mapping() (also used by irq_of_parse_and_map()) function
      for mapping interrupts from the device-tree now also call the separate
      set_irq_type(), and only does so if there is a change in the trigger type.
    
    - While I was at it, I changed pci_read_irq_line() (which is the helper I
      would expect most archs to use in their pcibios_fixup() to get the PCI
      interrupt routing from the device tree) to also handle a fallback when the
      DT mapping fails consisting of reading the PCI_INTERRUPT_PIN to know wether
      the device has an interrupt at all, and the the PCI_INTERRUPT_LINE to get an
      interrupt number from the device.  That number is then mapped using the
      default controller, and the trigger is set to level low.  That default
      behaviour works for several platforms that don't have a proper interrupt
      tree like Pegasos.  If it doesn't work for your platform, then either
      provide a proper interrupt tree from the firmware so that fallback isn't
      needed, or don't call pci_read_irq_line()
    
    - Add back a bit that got dropped by my main rework patch for properly
      clearing pending IPIs on pSeries when using a kexec
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50099328e4fe7c9f8981f408071a1ff82d59ddf8
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Jul 10 04:44:41 2006 -0700

    [PATCH] aoa: tas: add missing bass/treble controls
    
    This patch adds the bass/treble controls to snd-aoa that snd-powermac always
    had for tas3004 based machines.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e5102ad70aaafe49823a02b368c0c3032c91439
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Jul 10 04:44:40 2006 -0700

    [PATCH] aoa: layout fabric: add missing module aliases
    
    The layout fabric gained support for all IDs when I extracted those from the
    OSX description file.  But apparently I had forgotten to add them all as
    module aliases so the module will also load.  This patch adds them.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b8f52f5b93e08f04b08e64e62d675bc43dd618e
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Jul 10 04:44:39 2006 -0700

    [PATCH] aoa: tas: surface DRC control again
    
    This patch makes the DRC control visible again for TAS chips.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a4f57874538fc05b99bd3bf7106f3df9b23a4ab
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:39 2006 -0700

    [PATCH] aoa: tas: fix initialisation/reset
    
    This patch fixes the initialisation and reset of the tas codec.  The tas will
    often reset if the i2s clocks go away so it needs to be completely
    re-initialised when clocks come back.
    
    Also, this patch adds some code for DRC that will be exploited later to add a
    DRC control again, fixing a regression over snd-powermac.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14b42963f64b98ab61fa9723c03d71aa5ef4f862
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Jul 10 04:44:38 2006 -0700

    [PATCH] aoa: tas: change PCM1 name to PCM
    
    This patch changes the PCM1 control name to PCM to make it play nice with the
    softvol plugin (which will then go away if it sees a proper PCM slider)
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a677c8fb8aa03e6ad9c206cb7284d294761ced2c
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:37 2006 -0700

    [PATCH] aoa fabric layout: clean up messages
    
    This patch cleans up the printk's in the layout fabric and also makes it
    display which type of GPIO access it is going to use.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e53fcabc6d923e9c1cdd073ea2e2212daf907622
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:37 2006 -0700

    [PATCH] aoa: pmf gpio: report if function calling fails
    
    This patch makes the pmf GPIO layer in aoa report if calling a platform
    function failed.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 977c60238cfff1f9eb07cfd78bc02da91b7b499b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:36 2006 -0700

    [PATCH] aoa: i2sbus: revamp control layer
    
    This patch revamps the i2sbus control layer by using the macio/keylargo
    functions instead of directly mapping.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a08bc4cb09dfea4cb1d29061d82b04338ed7c21a
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:35 2006 -0700

    [PATCH] aoa: fix when all is built into the kernel
    
    This patch fixes initialisation issues when all of aoa is built into the
    kernel by re-ordering the link order in the Makefile and making the soundbus
    use subsys_initcall so it is initialised earlier.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 389ba79582b9bc2463b44ad60df62d709ebcdf97
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:34 2006 -0700

    [PATCH] aoa: i2sbus: fix for PowerMac7,2 and 7,3
    
    This patch cleans up the resource handling in i2sbus and adds workarounds for
    the broken device trees on the PowerMac7,2 and 7,3.  Some of this code will
    later move again when macio_asic is going to export all the sub-nodes too.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9d08de57b0beb6623a89d8a8f501040c5eadacb
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 10 04:44:34 2006 -0700

    [PATCH] aoa: i2sbus: move module parameter declaration up
    
    This patch moves the i2sbus 'force' module parameter declaration to the top of
    the file.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a14cf4508a77d03436f34a1f6a9bc3eee12fc08
Author: Andreas Schwab <schwab@suse.de>
Date:   Mon Jul 10 04:44:33 2006 -0700

    [PATCH] Fix snd-aoa irq conversion
    
    Use proper irq mapping interface for snd-aoa-i2sbus.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Cc: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e154ff3d2c5ad313ef0c66e6217502361cad2799
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Jul 10 04:44:32 2006 -0700

    [PATCH] adjust clock for lost ticks
    
    A large number of lost ticks can cause an overadjustment of the clock.  To
    compensate for this we look at the current error and the larger the error
    already is the more careful we are at adjusting the error.  As small extra
    fix reset the error when the clock is set.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Acked-by: john stultz <johnstul@us.ibm.com>
    Cc: Uwe Bugla <uwe.bugla@gmx.de>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32dd66fce3b0ad5857433433b795844cb397608e
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 10 04:44:31 2006 -0700

    [PATCH] vmstat: export all_vm_events()
    
    Add missing EXPORT_SYMBOL for all_vm_events(). Git commit
    f8891e5e1f93a128c3900f82035e8541357896a7 caused this:
    
      Building modules, stage 2.
      MODPOST
    WARNING: "all_vm_events" [arch/s390/appldata/appldata_mem.ko] undefined!
      CC      arch/s390/appldata/appldata_mem.mod.o
    
    Cc: Christoph Lameter <christoph@lameter.com>
    Cc: Gerald Schaefer <geraldsc@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f4599e9cd6bca0efc1000359584d1cff68f9f13
Author: Christoph Lameter <clameter@sgi.com>
Date:   Mon Jul 10 04:44:30 2006 -0700

    [PATCH] ZVC: add __inc_zone_state for !SMP configuration
    
    It turns out that there is a way to build a kernel with NUMA and no SMP.
    In that case we are missing one definition __inc_zone_state.
    
    Provide that missing __inc_zone_state.
    
    (akpm: NUMA && !SMP sounds odd, but I am told "But there is the concept of
    cpuless nodes.  A NUMA system without SMP has a single processor but multiple
    memory nodes.  This used to work before on IA64 (wasn't aware of it, never seen
    anyone with this kind of thing).")
    
    Acked-by: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06a9ec291b3aec9c7e36af0a10ad2b556bd7e84f
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jul 10 04:44:30 2006 -0700

    [PATCH] pi-futex: Validate futex type instead of oopsing
    
    Calling futex_lock_pi is called with a reference to a non PI futex and
    waiters exist already, lookup_pi_state() oopses due to pi_state == NULL.
    Check this condition and return -EINVAL to userspace.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Jakub Jelinek <jakub@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bed936f7eab946c60170bc92a1aea597da158e02
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Mon Jul 10 04:44:26 2006 -0700

    [PATCH] ACPI: fix fan/thermal resume
    
    Daniel Ritz <daniel.ritz-ml@swissonline.ch> says:
    
    The acpi driver suspend/resume patches that went in recently caused a regression
    on my box (toshiba tecra 8000 laptop): after resume from swsusp the fan turns on
    keeping blowing cold air out of my notebook. before the patches, the fan was off
    and would only make noise when required. it's the same thing described in
    bugzilla.kernel.org #5000. the acpi suspend/resume patches or at least parts of
    them originate in this bug. now the last patch in the report (attach id 8438)
    actually fixes the problem - for me and the reporter. this is a trimmed down
    version of that patch.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Cc: Len Brown <len.brown@intel.com>
    Cc: Sanjoy Mahajan <sanjoy@mrao.cam.ac.uk>
    Cc: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 868e81b8ada8fa05bdc08b5e6fa73307caaeab6d
Author: Yoshinori Sato <ysato@users.sourceforge.jp>
Date:   Mon Jul 10 04:44:24 2006 -0700

    [PATCH] h8300 remove duplicate define
    
    Signed-off-by: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80d6679a62fe45f440d042099d997a42e4e8c59d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:24 2006 -0700

    [PATCH] kernel/softirq.c: EXPORT_UNUSED_SYMBOL
    
    This patch marks an unused export as EXPORT_UNUSED_SYMBOL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69c3a5b8fd8cfa67be22f6d7ae5c681c6777d817
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:23 2006 -0700

    [PATCH] fs/read_write.c: EXPORT_UNUSED_SYMBOL
    
    This patch marks an unused export as EXPORT_UNUSED_SYMBOL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0d85c5c3009d292fe195f666cbbec7da47dabf4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:23 2006 -0700

    [PATCH] mm/mmzone.c: EXPORT_UNUSED_SYMBOL
    
    This patch marks three unused exports as EXPORT_UNUSED_SYMBOL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26fc52367af3774b123334bca409159ce37d2857
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:22 2006 -0700

    [PATCH] mm/memory.c: EXPORT_UNUSED_SYMBOL
    
    This patch marks an unused export as EXPORT_UNUSED_SYMBOL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d46cc6b9b04dc28a9c5db62db791aeec8ab2ea5
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:21 2006 -0700

    [PATCH] mm/bootmem.c: EXPORT_UNUSED_SYMBOL
    
    This patch marks an unused export as EXPORT_UNUSED_SYMBOL.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0fc84d2e5bb4a9e3ae470812a00cccba85a48b8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 10 04:44:21 2006 -0700

    [PATCH] kernel/printk.c: EXPORT_SYMBOL_UNUSED
    
    This patch marks unused exports as EXPORT_SYMBOL_UNUSED.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d0a0a5ee7a0094231a11cfe3f86d2d8f5f994e01
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:44:20 2006 -0700

    [PATCH] md: fix oops in error-handling
    
    During early MD setup (superblock reading), we don't have a personality yet.
    But the error-handling code tries to dereference mddev->pers.  Fix.
    
    Acked-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d69504325978c461b51b03cca49626026970307b
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:20 2006 -0700

    [PATCH] md: include sector number in messages about corrected read errors
    
    This is generally useful, but particularly helps see if it is the same sector
    that always needs correcting, or different ones.
    
    [akpm@osdl.org: fix printk warnings]
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67463acb646904d76a8e237cc31eaa87872f30cc
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:19 2006 -0700

    [PATCH] md: require CAP_SYS_ADMIN for (re-)configuring md devices via sysfs
    
    The ioctl requires CAP_SYS_ADMIN, so sysfs should too.  Note that we don't
    require CAP_SYS_ADMIN for reading attributes even though the ioctl does.
    There is no reason to limit the read access, and much of the information is
    already available via /proc/mdstat
    
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 80ca3a44f563a763fa872390dcb393f2d82027bf
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:18 2006 -0700

    [PATCH] md: unify usage of symbolic names for perms
    
    Some places we use number (0660) someplaces names (S_IRUGO).  Change all
    numbers to be names, and change 0655 to be what it should be.
    
    Also make some formatting more consistent.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e3db645f890660ce8774a18bcd418570298937e
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:18 2006 -0700

    [PATCH] md: fix usage of wrong variable in raid1
    
    Though it rarely matters, we should be using 's' rather than r1_bio->sector
    here.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae3c20ccf84c88d45616f12122f781a900118f09
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:17 2006 -0700

    [PATCH] md: fix some small races in bitmap plugging in raid5
    
    The comment gives more details, but I didn't quite have the sequencing write,
    so there was room for races to leave bits unset in the on-disk bitmap for
    short periods of time.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c785b7a18dc30572a49c6b75efd384269735d14
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:16 2006 -0700

    [PATCH] md: fix a plug/unplug race in raid5
    
    When a device is unplugged, requests are moved from one or two (depending on
    whether a bitmap is in use) queues to the main request queue.
    
    So whenever requests are put on either of those queues, we should make sure
    the raid5 array is 'plugged'.  However we don't.  We currently plug the raid5
    queue just before putting requests on queues, so there is room for a race.  If
    something unplugs the queue at just the wrong time, requests will be left on
    the queue and nothing will want to unplug them.  Normally something else will
    plug and unplug the queue fairly soon, but there is a risk that nothing will.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff4e8d9a9f46e3a7f89d14ade52fe5d53a82c022
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:16 2006 -0700

    [PATCH] md: fix resync speed calculation for restarted resyncs
    
    We introduced 'io_sectors' recently so we could count the sectors that causes
    io during resync separate from sectors which didn't cause IO - there can be a
    difference if a bitmap is being used to accelerate resync.
    
    However when a speed is reported, we find the number of sectors processed
    recently by subtracting an oldish io_sectors count from a current
    'curr_resync' count.  This is wrong because curr_resync counts all sectors,
    not just io sectors.
    
    So, add a field to mddev to store the curren io_sectors separately from
    curr_resync, and use that in the calculations.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b8c9de05c2a860fe6b02fedcb48763bcee648b3
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:15 2006 -0700

    [PATCH] md: delay starting md threads until array is completely setup
    
    When an array is started we start one or two threads (two if there is a
    reshape or recovery that needs to be completed).
    
    We currently start these *before* the array is completely set up and in
    particular before queue->queuedata is set.  If the thread actually starts
    very quickly on another CPU, we can end up dereferencing queue->queuedata
    and oops.
    
    This patch also makes sure we don't try to start a recovery if a reshape is
    being restarted.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31b65a0d3894566191b91fbadd122c354a363b5d
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:14 2006 -0700

    [PATCH] md: set desc_nr correctly for version-1 superblocks
    
    This has to be done in ->load_super, not ->validate_super
    
    Without this, hot-adding devices to an array doesn't always
    work right - though there is a work around in mdadm-2.5.2 to
    make this less of an issue.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4370781d83cd2e52eb515e4663155e8091e4d4e
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jul 10 04:44:14 2006 -0700

    [PATCH] md: possible fix for unplug problem
    
    I have reports of a problem with raid5 which turns out to be because the raid5
    device gets stuck in a 'plugged' state.  This shouldn't be able to happen as
    3msec after it gets plugged it should get unplugged.  However it happens
    none-the-less.  This patch fixes the problem and is a reasonable thing to do,
    though it might hurt performance slightly in some cases.
    
    Until I can find the real problem, we should probably have this workaround in
    place.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 894673ee6122a3ce1958e1fe096901ba5356a96b
Author: Jon Smirl <jonsmir@gmail.com>
Date:   Mon Jul 10 04:44:13 2006 -0700

    [PATCH] tty: Remove include of screen_info.h from tty.h
    
    screen_info.h doesn't have anything to do with the tty layer and shouldn't be
    included by tty.h.  This patches removes the include and modifies all users to
    directly include screen_info.h.  struct screen_info is mainly used to
    communicate with the console drivers in drivers/video/console.  Note that this
    patch touches every arch and I have no way of testing it.  If there is a
    mistake the worst thing that will happen is a compile error.
    
    [akpm@osdl.org: fix arm build]
    [akpm@osdl.org: fix alpha build]
    Signed-off-by: Jon Smirl <jonsmir@gmail.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8f340e394ff30b79ab5b03c67ab4c94b2ac3646
Author: Jon Smirl <jonsmir@gmail.com>
Date:   Mon Jul 10 04:44:12 2006 -0700

    [PATCH] vt: Remove VT-specific declarations and definitions from tty.h
    
    MAX_NR_CONSOLES, fg_console, want_console and last_console are more of a
    function of the VT layer than the TTY one.  Moving these to vt.h and vt_kern.h
    allows all of the framebuffer and VT console drivers to remove their
    dependency on tty.h.
    
    [akpm@osdl.org: fix alpha build]
    Signed-off-by: Jon Smirl <jonsmir@gmail.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67eb5db5874076db01febed5a1a9281628fa9fb4
Author: Karsten Keil <kkeil@suse.de>
Date:   Mon Jul 10 04:44:11 2006 -0700

    [PATCH] hisax: fix usage of __init*
    
    Fix the warnings about the section mismatches for __init* in the HiSax
    driver.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acbf8bd738f1357e0e3b97b918bef5be272b176e
Author: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
Date:   Mon Jul 10 04:44:11 2006 -0700

    [PATCH] Updates CREDITS file
    
    Updates my personal entry in the CREDITS file.
    
    Signed-off-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73ca66b97b73257a7d832d502c36fc19fe847809
Author: Magnus Damm <magnus@valinux.co.jp>
Date:   Mon Jul 10 04:44:09 2006 -0700

    [PATCH] release_firmware() fixes
    
    Use release_firmware() to free requested resources.
    
    According to Documentation/firmware_class/README the request_firmware()
    call should be followed by a release_firmware().  Some drivers do not
    however free the firmware previously allocated with request_firmware().
    This patch tries to fix this by making sure that release_firmware() is used
    as expected.
    
    Signed-off-by: Magnus Damm <magnus@valinux.co.jp>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Cc: Mauro Carvalho Chehab <mchehab@infradead.org>
    Cc: "John W. Linville" <linville@tuxdriver.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 454d6fbc48374be8f53b9bafaa86530cf8eb3bc1
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jul 10 04:44:08 2006 -0700

    [PATCH] cdrom: fix bad cgc.buflen assignment
    
    The code really means to mask off the high bits, not assign 0xff.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>
    Cc: Marcus Meissner <meissner@suse.de>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d8b2ebfa298ec4e6d9fa43e60fb013e8cd963aa
Author: Jonathan Corbet <corbet@lwn.net>
Date:   Mon Jul 10 04:44:07 2006 -0700

    [PATCH] VFS documentation tweak
    
    As I was looking over the get_sb() changes, I stumbled across a little
    mistake in the documentation updates.  Unless we're getting into an
    interesting new object-oriented realm, I doubt that get_sb() should really
    return "struct int"...
    
    Signed-off-by: Jonathan Corbet <corbet@lwn.net>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82a854ec4f46c5fbef11b06bb49078ecc5784a2d
Author: Urs Thuermann <urs@isnogud.escape.de>
Date:   Mon Jul 10 04:44:06 2006 -0700

    [PATCH] RCU Documentation fix
    
    Updater should use _rcu variant of list_del().
    
    Signed-off-by: Urs Thuermann <urs@isnogud.escape.de>
    Acked-by: "Paul E. McKenney" <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1454aed92b6b89cb1fbe3cbecd8ceaa7a122f3b7
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Mon Jul 10 04:44:05 2006 -0700

    [PATCH] put a comment at register_die_notifier that the export is used
    
    {un}register_die_notifier() is used by kdb... document this so that future
    "remove dead export" rounds can skip this export.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f86bf9b7bcc5d325687a8b80da8ee3eb56e02da7
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 10 04:44:05 2006 -0700

    [PATCH] lockdep: clean up completion initializer in smpboot.c
    
    Clean up lockdep on-stack-completion initializer.  (This also removes the
    dependency on waitqueue_lock_key.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6d897cec29252b8d0785198cfa6ca16d30c739d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 10 04:44:04 2006 -0700

    [PATCH] lockdep: core, reduce per-lock class-cache size
    
    lockdep_map is embedded into every lock, which blows up data structure
    sizes all around the kernel.  Reduce the class-cache to be for the default
    class only - that is used in 99.9% of the cases and even if we dont have a
    class cached, the lookup in the class-hash is lockless.
    
    This change reduces the per-lock dep_map overhead by 56 bytes on 64-bit
    platforms and by 28 bytes on 32-bit platforms.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55794a412fdf9af1744800e5020a4ec6b21e3cdc
Author: Arjan van de Ven <arjan@Linux.intel.com>
Date:   Mon Jul 10 04:44:03 2006 -0700

    [PATCH] lockdep: improve debug output
    
    Make lockdep print which lock is held, in the "kfree() of a live lock"
    scenario.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fca80e8b4bf5d69b900115b14342133ce81d79e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 10 04:44:02 2006 -0700

    [PATCH] lockdep: add more rwsem.h documentation
    
    Add more documentation to rwsem.h.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9829cceb686f3719215fe43c8593e5f3efe1710
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jul 10 04:44:01 2006 -0700

    [PATCH] Minor cleanup to lockdep.c
    
    - Use printk formatting for indentation
    - Don't leave NTFS in the default event filter
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f72e4028a1ff968000cec4a034f45619fbd7ec4
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:44:01 2006 -0700

    [PATCH] fadvise: remove dead comments
    
    Cc: "Michael Kerrisk" <mtk-manpages@gmx.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 25e206b54b9a20e63b6f5194aeebfa13d37e015c
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Mon Jul 10 04:44:00 2006 -0700

    [PATCH] partitions: let partitions inherit policy from disk
    
    Change the partition code in fs/partitions/check.c to initialize a newly
    detected partition's policy field with that of the containing block device
    (see patch below).
    
    My reasoning is that function set_disk_ro() in block/genhd.c modifies the
    policy field (read-only indicator) of a disk and all contained partitions.
    When a partition is detected after the call to set_disk_ro(), the policy
    field of this partition will currently not inherit the disk's policy field.
     This behavior poses a problem in cases where a block device can be
    'logically de- and reactivated' like e.g.  the s390 DASD driver because
    partition detection may run after the policy field has been modified.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Acked-by: Al Viro <viro@ftp.linux.org.uk>
    Makes-sense-to: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7691030bc9732f7d535522dda78cfdd36716def1
Author: Chuck Short <zulcss@gmail.com>
Date:   Mon Jul 10 04:43:59 2006 -0700

    [PATCH] Add Specialix IO8+ card support hotplug support
    
    Patch Description:
    Add "Specialix IO8+ card support" hotplug support
    
    patch location:
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=d795cfc591bb44f6b3d86d8f054a227cecb44bb4
    
    [akpm@osdl.org: cleanup]
    Cc: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Chuck Short <zulcss@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb0e71c7f388bfcb3f74897f23d0cf09310fc05b
Author: Chuck Short <zulcss@gmail.com>
Date:   Mon Jul 10 04:43:59 2006 -0700

    [PATCH] Add Computone IntelliPort Plus serial hotplug support
    
    Patch Description:
    Add "Computone IntelliPort Plus serial" hotplug support
    
    patch location:
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=8c36723187c0fa5efe0e5c6a9b1e66ed4b824792
    
    [akpm@osdl.org: cleanup]
    Cc: Randy Dunlap <randy.dunlap@oracle.com>
    Signed-off-by: Chuck Short <zulcss@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 64552a50bc80fecb73617336bf197375868faf6e
Author: Horms <horms@verge.net.au>
Date:   Mon Jul 10 04:43:58 2006 -0700

    [PATCH] nfs: Update Documentation/nfsroot.txt to include dhcp, syslinux and isolinux
    
    * Document the ip command a little differently to make the
      interaction between defaults and autoconfiguration a little clearer
      (I hope)
    
    * Update autoconfiguration the current set of options, including DHCP
    
    * Update the boot methods to add syslinux and isolinux, and remove
      dd of=/dev/fd0 which is no longer supported by linux
    
    * Add a referance to initramfs along side initrd.
      Should the latter and its document be removed some time soon?
    
    * Various cleanups to put the text consistently into the thrid person
    
    * Reformated a bit to fit into 80 columns a bit more nicely
    
    * Should the bootloaders documentation be removed or split
      into a separate documentation, it seems somewhat out of scope
    
    Signed-off-by: Horms <horms@verge.net.au>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73ce5934e2d855db436566297f12966eb507a435
Author: Hisashi Hifumi <hifumi.hisashi@oss.ntt.co.jp>
Date:   Mon Jul 10 04:43:56 2006 -0700

    [PATCH] reiserfs: fix journaling issue regarding fsync()
    
    When write() extends a file(i_size is increased) and fsync() is called,
    change of inode must be written to journaling area through fsync().
    But,currently the i_trans_id is not correctly updated when i_size is
    increased.  So fsync() does not kick the journal writer.
    
    Reiserfs_file_write() already updates the transaction when blocks are
    allocated, but the case when i_size increases and new blocks are not added
    is not correctly treated.
    
    Following patch fix this bug.
    
    Signed-off-by: Hisashi Hifumi <hifumi.hisashi@oss.ntt.co.jp>
    Cc: Jeff Mahoney <jeffm@suse.com>
    Cc: Chris Mason <mason@suse.com>
    Cc: Hans Reiser <reiser@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0808925ea5684a0ce25483b30e94d4f398804978
Author: Eric Paris <eparis@parisplace.org>
Date:   Mon Jul 10 04:43:55 2006 -0700

    [PATCH] SELinux: add rootcontext= option to label root inode when mounting
    
    Introduce a new rootcontext= option to FS mounting.  This option will allow
    you to explicitly label the root inode of an FS being mounted before that
    FS or inode because visible to userspace.  This was found to be useful for
    things like stateless linux, see
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=190001
    
    Signed-off-by: Eric Paris <eparis@parisplace.org>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c312feb2931ded0582378712727b7ea017a951bd
Author: Eric Paris <eparis@parisplace.org>
Date:   Mon Jul 10 04:43:53 2006 -0700

    [PATCH] SELinux: decouple fscontext/context mount options
    
    Remove the conflict between fscontext and context mount options.  If
    context= is specified without fscontext it will operate just as before, if
    both are specified we will use mount point labeling and all inodes will get
    the label specified by context=.  The superblock will be labeled with the
    label of fscontext=, thus affecting operations which check the superblock
    security context, such as associate permissions.
    
    Signed-off-by: Eric Paris <eparis@parisplace.org>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ed6e34f88a0d896a6f889b00693cae0fadacfd0
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Mon Jul 10 04:43:52 2006 -0700

    [PATCH] small kernel/sched.c cleanup
    
    - constify and optimize stat_nam (thanks to Michael Tokarev!)
    - spelling and comment fixes
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a565f7919cfb3d3df2c97d45751cbb83d858f97
Author: Peter Williams <pwil3058@bigpond.net.au>
Date:   Mon Jul 10 04:43:51 2006 -0700

    [PATCH] sched: fix bug in __migrate_task()
    
    Problem:
    
    In the function __migrate_task(), deactivate_task() followed by
    activate_task() is used to move the task from one run queue to
    another.  This has two undesirable effects:
    
    1. The task's priority is recalculated. (Nowhere else in the
    scheduler code is the priority recalculated for a change of CPU.)
    
    2. The task's time stamp is set to the current time.  At the very least,
    this makes the adjustment of the time stamp before the call to
    deactivate_task() redundant but I believe the problem is more serious
    as the time stamp now holds the time of the queue change instead of
    the time at which the task was woken.  In addition, unless dest_rq is
    the same queue as "current" is on the time stamp could be inaccurate
    due to inter CPU drift.
    
    Solution:
    
    Replace the call to activate_task() with one to __activate_task().
    
    Signed-off-by: Peter Williams <pwil3058@bigpond.net.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e45b3b6af09dab2a28a7c88b340d0bcdd173e068
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:43:50 2006 -0700

    [PATCH] count_vm_events() fix
    
    Dopey bug.  Causes hopelessly-wrong numbers from vmstat(8) and several other
    counters.
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a91023a9f172f820e292f2c5675fb9f8e2636f0
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:43:49 2006 -0700

    [PATCH] x86_64: e820.c needs pgtable.h
    
    arch/x86_64/kernel/e820.c:42: error: 'MAXMEM' undeclared here (not in a function)
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 135c294fa3660b979d71bbce1611f9ca721077b5
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 04:43:48 2006 -0700

    [PATCH] don't select CONFIG_HOTPLUG
    
    It's useful to be able to turn off CONFIG_HOTPLUG for compile-coverage testing
    and for section-checking coverage.  But a few things go and select
    CONFIG_HOTPLUG, making it a royal PITA to turn the thing off.
    
    It's only turnable offable if CONFIG_EMBEDDED anyway.  So let's make those
    things depend on HOTPLUG, not select it.
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0466684907ea1695eeef98cb28ca3399882ecc0a
Merge: c0dc250... 07a1868...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 14:20:17 2006 -0400

    Pull dock into release branch

commit 07a18684c92c0156f87ea158b5adc3022485f82a
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Mon Jul 10 14:19:15 2006 -0400

    ACPI: ACPI_DOCK: Initialize the atomic notifier list
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b312d799b324e895745ffe148def234fc60d5b74
Author: Daniel Drake <dsd@gentoo.org>
Date:   Wed Jul 5 15:57:39 2006 +0100

    [PATCH] zd1211rw: usb_clear_halt not allowed in IRQ context
    
    We will reimplement halt-clearing later, when we have periodic
    housekeeping routines in place. This will do as a temporary fix, the
    EPIPE case has not yet been seen.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 522536f6b24e63ac946259af65224f107dff7857
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Wed Jun 28 19:11:21 2006 -0500

    [PATCH] bcm43xx-softmac: Fix an off-by-one condition in handle_irq_noise
    
    An assert statement near the start of handle_irq_noise in the softmac
    version of bcm43xx_main.c is there to protect against out of bound
    addressing using variable bcm->noisecalc.nr_samples. The arrays in
    question have a dimension of 8, thus the value must be < 8.
    
    Signed-Off-By: Larry.Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit aadd06e5c56b9ff5117ec77e59eada43dc46e2fc
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jul 10 11:00:01 2006 +0200

    [PATCH] splice: fix problems with sys_tee()
    
    Several issues noticed/fixed:
    
    - We cannot reliably block in link_pipe() while holding both input and output
      mutexes. So do preparatory checks before locking down both mutexes and doing
      the link.
    
    - The ipipe->nrbufs vs i check was bad, because we could have dropped the
      ipipe lock in-between. This causes us to potentially look at unknown
      buffers if we were racing with someone else reading this pipe.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit c0dc250e89cb8af77c5689b36eda851158e8573e
Merge: 0f12b15... e21c1ca...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 02:39:47 2006 -0400

    Pull acpi_os_allocate into test branch

commit 0f12b15ebcedce115a5d8e5ff741e49a7993f67c
Merge: 20b499a... f6dd922...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 02:39:41 2006 -0400

    Pull acpica-20060707 into test branch

commit 20b499aa06edf59fa2d21f29d42d36586c6c058e
Merge: dece75b... ab8aa06...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 02:39:36 2006 -0400

    Pull bugzilla-6687 into test branch

commit dece75b3a288fa49b3aab685543ec2f5c94b8cfc
Merge: 1a39ed5... 8d7bff6...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 02:39:33 2006 -0400

    Pull dock into test branch

commit 1a39ed5888a8336ed2762d5b367195b14b878850
Merge: 1b045e5... d750803...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 02:39:26 2006 -0400

    Pull trivial into test branch

commit 1b045e5d207fc65e6708e303c2ab4249bf619982
Merge: b3cf257... 8970bfe...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 02:39:23 2006 -0400

    Pull battery into test branch

commit e21c1ca3f98529921c829a792dfdbfc5a5dc393b
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jul 10 01:35:51 2006 -0400

    ACPI: acpi_os_allocate() fixes
    
    Replace acpi_in_resume with a more general hack
    to check irqs_disabled() on any kmalloc() from ACPI.
    While setting (system_state != SYSTEM_RUNNING) on resume
    seemed more general, Andrew Morton preferred this approach.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3469
    
    Make acpi_os_allocate() into an inline function to
    allow /proc/slab_allocators to work.
    
    Delete some memset() that could fault on allocation failure.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8970bfe706345223d39d33bfce5f8b29750ab716
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 10 02:34:45 2006 -0400

    ACPI: SBS: fix initialization, sem2mutex
    
    cm_sbs_sem is being downed (via acpi_ac_init->acpi_lock_ac_dir) before it is
    initialised, with grave results.
    
    - Make it a mutex
    
    - Initialise it
    
    - Make it static
    
    - Clean other stuff up.
    
    Thanks to Paul Drynoff <pauldrynoff@gmail.com> for reporting and testing.
    
    Cc: Rich Townsend <rhdt@bartol.udel.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d75080328affb4b268da430b7074cc8139cc662a
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Tue Jul 4 13:06:00 2006 -0400

    ACPI: add 'const' to several ACPI file_operations
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e26a2b8f68dca28c734d857517788e3b40b8691d
Author: Andi Kleen <ak@suse.de>
Date:   Thu Jul 6 12:14:00 2006 -0400

    ACPI: delete some defaults from ACPI Kconfig
    
    No need for video to be always in
    No need for ACPI dock driver to be always in
    No need for smart battery driver to be always in
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit af4f949c6b4ffa5119aad980626e5b04daca961b
Author: Len Brown <len.brown@intel.com>
Date:   Sun Jul 9 16:33:26 2006 -0400

    ACPI: "Device `[%s]' is not power manageable" make message debug only
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8d7bff6c0896feba2fbd5ce37062c212aee13870
Author: Len Brown <len.brown@intel.com>
Date:   Sun Jul 9 22:09:57 2006 -0400

    ACPI: ACPI_DOCK Kconfig
    
    HOTPLUG_PCI_ACPI depends on ACPI_DOCK
    ACPI_IBM_DOCK depends on ACPI_DOCK=n
    ACPI_DOCK is EXPERIMENTAL, though that doesn't seem to mean much
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b3cf257623fabd8f1ee6700a6d328cc1c5da5a1d
Author: Stephane Eranian <eranian@hpl.hp.com>
Date:   Sun Jul 9 21:12:39 2006 -0400

    [PATCH] i386: use thread_info flags for debug regs and IO bitmaps
    
    Use thread info flags to track use of debug registers and IO bitmaps.
    
     - add TIF_DEBUG to track when debug registers are active
     - add TIF_IO_BITMAP to track when I/O bitmap is used
     - modify __switch_to() to use the new TIF flags
    
    Performance tested on Pentium II, ten runs of LMbench context switch
    benchmark (smaller is better:)
    
    	before	after
    avg	3.65	3.39
    min	3.55	3.33
    
    Signed-off-by: Stephane Eranian <eranian@hpl.hp.com>
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09075ef0fd585fb093bb9a6cd1240272114f89cf
Merge: c87fed1... 1b30dd3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 9 15:50:41 2006 -0700

    Merge commit master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6 of HEAD
    
    * HEAD:
      [AX.25]: Use kzalloc
      [ATM] net/atm/clip.c: fix PROC_FS=n compile
      [PKT_SCHED]: act_api: Fix module leak while flushing actions
      [NET]: Fix IPv4/DECnet routing rule dumping
      [NET] gso: Fix up GSO packets with broken checksums
      [NET] gso: Add skb_is_gso
      [IRDA]: fix drivers/net/irda/ali-ircc.c:ali_ircc_init()
      [ATM]: fix possible recursive locking in skb_migrate()
      [ATM]: Typo in drivers/atm/Kconfig...
      [TG3]: add amd8131 to "write reorder" chipsets
      [NET]: Fix network device interface printk message priority

commit c87fed1546bd00b42ee75f26c6b45393e4bf7559
Merge: 84e74f6... 70f0536...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 9 15:50:06 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (23 commits)
      [PATCH] 8139too deadlock fix
      [netdrvr] 3c59x: snip changelog from source code
      e1000: increase version to 7.1.9-k2
      e1000: add ich8lan device ID's
      e1000: allow user to disable ich8 lock loss workaround
      e1000: integrate ich8 support into driver
      e1000: add ich8lan core functions
      e1000: disable ERT
      e1000: check return value of _get_speed_and_duplex
      e1000: M88 PHY workaround
      e1000: fix adapter led blinking inconsistency
      e1000: disable CRC stripping workaround
      e1000: force register write flushes to circumvent broken platforms
      e1000: rework module param code with uninitialized values
      e1000: recycle skb
      e1000: change printk into DPRINTK
      e1000: add smart power down code
      e1000: small performance tweak by removing double code
      e1000: fix CONFIG_PM blocks
      e1000: Make PHY powerup/down a function
      ...

commit 84e74f6b770efe7c9beb604118695aa311b969f5
Merge: 953969d... 1959d21...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 9 15:49:36 2006 -0700

    Merge branch 'blktrace' of git://brick.kernel.dk/data/git/linux-2.6-block
    
    * 'blktrace' of git://brick.kernel.dk/data/git/linux-2.6-block:
      [PATCH] Only the first two bits in bio->bi_rw and rq->flags match
      [PATCH] blktrace: readahead support
      [PATCH] blktrace: fix barrier vs sync typo

commit c8f7a62cdde461914c6457d5f4362538ed810bf4
Author: Len Brown <len.brown@intel.com>
Date:   Sun Jul 9 17:22:28 2006 -0400

    Revert "Revert "ACPI: dock driver""
    
    This reverts 953969ddf5b049361ed1e8471cc43dc4134d2a6f commit.

commit 68aa2c0d4a36b43ea9c6d77134c94b4501fd2eb4
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 02:29:59 2006 -0700

    [SERIAL] 8250: sysrq deadlock fix
    
    Fix http://bugzilla.kernel.org/show_bug.cgi?id=6716
    
    Doing a sysrq over a serial line into an SMP machine presently deadlocks.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3be91ec7388bae3cf1bfb4febcee5ab6c65f409f
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Fri Jun 30 02:29:58 2006 -0700

    [SERIAL] 8250: add tsi108 serial support
    
    The following patch gets rid of CONFIG_TSI108_BRIDGE.  I add UPIO_TSI to
    handle IIR and IER register in serial_in and serial_out.
    
    (1) the reason to rewrite serial_in:
    
        TSI108 rev Z1 version ERRATA.  Reading the UART's Interrupt
        Identification Register (IIR) clears the Transmit Holding Register
        Empty (THRE) and Transmit buffer Empty (TEMP) interrupts even if they
        are not enabled in the Interrupt Enable Register (IER).  This leads to
        loss of the interrupts.  Interrupts are not cleared when reading UART
        registers as 32-bit word.
    
    (2) the reason to rewrite serial_out:
    
        Check for UART_IER_UUE bit in the autoconfig routine.  This section
        of autoconfig is excluded for Tsi108/109 because bits 7 and 6 are
        reserved for internal use.  They are R/W bits.  In addition to
        incorrect identification, changing these bits (from 00) will make
        Tsi108/109 UART non-functional.
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c65b15cfd6b8b74c6f2b3635bf47ee661d351ef3
Author: Julien BLACHE <jblache@debian.org>
Date:   Sun Jul 9 20:40:17 2006 +0200

    [SERIAL] IP22: fix serial console hangs
    
    The patch below fixes serial console hangs as seen on IP22
    machines. Typically, while booting, the machine hangs for ~1 minute
    displaying "INIT: ", then the same thing happens again when init
    enters in the designated runlevel and finally the getty process on
    ttyS0 hangs indefinitely (though strace'ing it helps).
    
    strace (-e raw=ioctl, otherwise the ioctl() translation is utterly
    bogus) reveals that getty hangs on ioctl() 0x540f which happens to be
    TCSETSW (I saw it hang on another console ioctl() but couldn't
    reproduce that one).
    
    A diff between ip22zilog and sunzilog revealed the following
    differences:
     1. the channel A flag being set on up.port.flags instead of up.flags
     2. the channel A flag being set on what is marked as being channel B
     3. sunzilog has a call to uart_update_timeout(port, termios->c_cflag, baud);
        at the end of sunzilog_set_termios(), which ip22zilog lacks (on
        purpose ?)
    
    The patch below addresses point 1 and fixes the serial console hangs
    just fine. However point 2 should be investigated by someone familiar
    with the IP22 Zilog; it's probably OK as is but even if it is, a
    comment in ip22zilog.c is badly needed.
    
    Point 3 is left as an exercise for whoever feels like digging into
    ip22zilog :)
    
    These are the main obvious differences between ip22zilog and
    sunzilog. Newer versions of sunzilog (Linus's git tree as of today)
    are more close to ip22zilog as the sbus_{write,read}b have been
    changed into simple {write,read}b, which shrinks the diff by a fair
    amount. Resyncing both drivers should be doable in a few hours time
    now for someone familiar with the IP22 Zilog hardware.
    
    Signed-off-by: Julien BLACHE <jb@jblache.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d608ab9917fbe9926704c07b27df72ac78133870
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Mon Jun 26 18:18:11 2006 +0200

    [SERIAL] dz: Fix compilation error
    
    Fix the following compilation error in the dz serial driver that got
    introduced with the "kernel console should send CRLF not LFCR" change.
    
      CC      drivers/serial/dz.o
    drivers/serial/dz.c: In function 'dz_console_putchar':
    drivers/serial/dz.c:679: error: 'uport' undeclared (first use in this function)
    drivers/serial/dz.c:679: error: (Each undeclared identifier is reported only once
    drivers/serial/dz.c:679: error: for each function it appears in.)
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ab8aa06a5c0b75974fb1949365cbb20a15cedf14
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jul 7 20:11:07 2006 -0400

    ACPI: acpi_os_get_thread_id() returns current
    
    Linux mutexes and the debug code that that reference
    acpi_os_get_thread_id() are happy with 0.
    But the AML mutexes in exmutex.c expect a unique non-zero
    number for each thread - as they track this thread_id
    to permit the mutex re-entrancy defined by the ACPI spec.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=6687
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f6dd9221dddb3550e60d32aee688588ec208312c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Jul 7 20:44:38 2006 -0400

    ACPI: ACPICA 20060707
    
    Added the ACPI_PACKED_POINTERS_NOT_SUPPORTED macro to
    support C compilers that do not allow the initialization
    of address pointers within packed structures - even though
    the hardware itself may support misaligned transfers. Some
    of the debug data structures are packed by default to
    minimize size.
    
    Added an error message for the case where
    acpi_os_get_thread_id() returns zero. A non-zero value is
    required by the core ACPICA code to ensure the proper
    operation of AML mutexes and recursive control methods.
    
    The DSDT is now the only ACPI table that determines whether
    the AML interpreter is in 32-bit or 64-bit mode. Not really
    a functional change, but the hooks for per-table 32/64
    switching have been removed from the code. A clarification
    to the ACPI specification is forthcoming in ACPI 3.0B.
    
    Fixed a possible leak of an Owner ID in the error
    path of tbinstal.c acpi_tb_init_table_descriptor() and
    migrated all table OwnerID deletion to a single place in
    acpi_tb_uninstall_table() to correct possible leaks when using
    the acpi_tb_delete_tables_by_type() interface (with assistance
    from Lance Ortiz.)
    
    Fixed a problem with Serialized control methods where the
    semaphore associated with the method could be over-signaled
    after multiple method invocations.
    
    Fixed two issues with the locking of the internal
    namespace data structure. Both the Unload() operator and
    acpi_unload_table() interface now lock the namespace during
    the namespace deletion associated with the table unload
    (with assistance from Linn Crosetto.)
    
    Fixed problem reports (Valery Podrezov) integrated: -
    Eliminate unnecessary memory allocation for CreateXxxxField
    http://bugzilla.kernel.org/show_bug.cgi?id=5426
    
    Fixed problem reports (Fiodor Suietov) integrated: -
    Incomplete cleanup branches in AcpiTbGetTableRsdt (BZ 369)
    - On Address Space handler deletion, needless deactivation
    call (BZ 374) - AcpiRemoveAddressSpaceHandler: validate
    Device handle parameter (BZ 375) - Possible memory leak,
    Notify sub-objects of Processor, Power, ThermalZone (BZ
    376) - AcpiRemoveAddressSpaceHandler: validate Handler
    parameter (BZ 378) - Minimum Length of RSDT should be
    validated (BZ 379) - AcpiRemoveNotifyHandler: return
    AE_NOT_EXIST if Processor Obj has no Handler (BZ (380)
    - AcpiUnloadTable: return AE_NOT_EXIST if no table of
    specified type loaded (BZ 381)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1b30dd359ebec22d035e8b145751319f63772ca1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jul 9 12:14:22 2006 -0700

    [AX.25]: Use kzalloc
    
    Replace kzalloc instead of kmalloc + memset.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 24781734643ea2e9fd864f58000e47793e2dcb04
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jul 9 12:13:18 2006 -0700

    [ATM] net/atm/clip.c: fix PROC_FS=n compile
    
    This patch fixes the following compile error with CONFIG_PROC_FS=n by
    reverting commit dcdb02752ff13a64433c36f2937a58d93ae7a19e:
    
    <--  snip  -->
    
    ...
      CC      net/atm/clip.o
    net/atm/clip.c: In function โatm_clip_initโ:
    net/atm/clip.c:975: error: โatm_proc_rootโ undeclared (first use in this function)
    net/atm/clip.c:975: error: (Each undeclared identifier is reported only once
    net/atm/clip.c:975: error: for each function it appears in.)
    net/atm/clip.c:977: error: โarp_seq_fopsโ undeclared (first use in this function)
    make[2]: *** [net/atm/clip.o] Error 1
    
    <--  snip  -->
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ebbaeab18b1c520054ea70e512ac0db7456ede01
Author: Thomas Graf <tgraf@suug.ch>
Date:   Sun Jul 9 11:36:23 2006 -0700

    [PKT_SCHED]: act_api: Fix module leak while flushing actions
    
    Module reference needs to be given back if message header
    construction fails.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 631c228cd09bd5b93090fa60bd9803ec14aa0586
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jul 8 20:42:15 2006 +0200

    [SCSI] hide EH backup data outside the scsi_cmnd
    
    Currently struct scsi_cmnd has various fields that are used to backup
    original data after the corresponding fields have been overridden for
    EH commands.  This means drivers can easily get at it and misuse it.
    Due to the old_ naming this doesn't happen for most of them, but two
    that have different names have been used wrong a lot (see previous
    patch).  Another downside is that they unessecarily bloat the scsi_cmnd
    size.
    
    This patch moves them onstack in scsi_send_eh_cmnd to fix those two
    issues aswell as allowing future EH fixes like moving the EH command
    submissions to use SG lists like everything else.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ae0fda0cdf009731a33f031f86df8566f1977ffe
Author: Dave Boutcher <boutcher@cs.umn.edu>
Date:   Thu Jul 6 22:08:49 2006 -0500

    [SCSI] ibmvscsi: handle inactive SCSI target during probe
    
    Without this patch we register an interrupt with request_irq,
    but then return a bad return code from the module probe.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6c51fe10475eda9f5c535f337411e1ed0e6915b9
Author: Dave Boutcher <boutcher@cs.umn.edu>
Date:   Thu Jul 6 22:07:47 2006 -0500

    [SCSI] ibmvscsi: allocate lpevents for ibmvscsi on iseries
    
    Allocate the correct number of lp events when running
    ibmvscsi on legacy iseries
    
    Signed-off-by: Dave Boutcher <sleddog@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d14164316d48a4319d8da9dc24be8663b2472bae
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Jul 8 14:02:26 2006 -0600

    [SCSI] aic7[9x]xx: Remove last vestiges of reverse_scan
    
    Remove last vestiges of the reverse_scan paramater from aic7xxx and aic79xx.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5e13cdfa5ba94724d6ab11de26b3ec3c94b88b00
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jul 8 20:39:30 2006 +0200

    [SCSI] aha152x: stop poking at saved scsi_cmnd members
    
    Stop poking into the old_ & co scsi_cmnd fields that should only be used
    in the EH code.  Untested, but this is required to move ahead with the
    EH fixes.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4e73ea7b02a8d2759b20ab52f13f40d5f5421044
Author: Luben Tuikov <ltuikov@yahoo.com>
Date:   Fri Jul 7 00:02:18 2006 -0700

    [SCSI] st.c: Improve sense output
    
    Convert this:
    st0: Error with sense data: <6>st: Current: sense key: Illegal Request
        Additional sense: Invalid field in cdb
    
    To this:
    st0: Current: sense key: Illegal Request
        Additional sense: Invalid field in cdb
    
    Signed-off-by: Luben Tuikov <ltuikov@yahoo.com>
    Acked-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 035bff20bff2b6779ed3ad0a24a51a1a96828bc8
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:58 2006 -0400

    [SCSI] lpfc 8.1.7: Change version number to 8.1.7
    
    Change version number to 8.1.7
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 65a29c166fe331574880a375559405ac802b027a
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:50 2006 -0400

    [SCSI] lpfc 8.1.7: Misc Fixes
    
    Misc Fixes:
     - Fix some sparse warnings - casts of address space
     - Fix handling of the adapter registration string. Each invocation
       was byteswapping, so every other adapter init attempt failed.
     - Correct comments and default value for the lpfc_max_luns parameter
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b4c026520ff0a4cb838a941bb0ed8996075e3d8c
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:43 2006 -0400

    [SCSI] lpfc 8.1.7: Add lpfc_sli_flush_mbox_queue() function
    
    Add lpfc_sli_flush_mbox_queue() function and use it in lpfc_offline() call
    to avoid deadlock on thread block.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ce8b3ce55bb0bd9318954efab0f714b088178978
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:36 2006 -0400

    [SCSI] lpfc 8.1.7: Correct the wait in attachment that delays for topology discovery
    
    Correct the wait in attachment that delays for topology discovery
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 953969ddf5b049361ed1e8471cc43dc4134d2a6f
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 9 08:47:46 2006 -0700

    Revert "ACPI: dock driver"
    
    This reverts commit a5e1b94008f2a96abf4a0c0371a55a56b320c13e.
    
    Adrian Bunk points out that it has build errors, and apparently no
    maintenance. Throw it out.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e0b43385559bfe78c1f80d71ec203effe244d9a
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:29 2006 -0400

    [SCSI] lpfc 8.1.7: Remove depricated sysfs attribute board_online
    
    Remove depricated sysfs attribute board_online, as it's replaced by the new
    issue_reset attribute
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 40496f073ffe75c59414a7236f95ecbc49562596
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:22 2006 -0400

    [SCSI] lpfc 8.1.7: Adding new issue_reset sysfs attribute
    
    Adding new issue_reset sysfs attribute
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 420b630d6e9ff41dc3e2a2a2808b67907951e094
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:16 2006 -0400

    [SCSI] lpfc 8.1.7: Fix panic in lpfc_sli_validate_fcp_iocb
    
    Fix panic in lpfc_sli_validate_fcp_iocb due to access of scsi_cmnd after
    returning it to the midlayer
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit bcf4dbfaf38502d3919e0601c06afac7d5e42685
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:08 2006 -0400

    [SCSI] lpfc 8.1.7: Consolidate dma buf cleanup into a separate function
    
    Consolidate dma buf cleanup into a separate function
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9279565046f39f3ab338818c9923a23b9f25be5f
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:50:02 2006 -0400

    [SCSI] lpfc 8.1.7: Correct bogus nodev_tmo message on NPort that changes its NPort Id
    
    Correct bogus nodev_tmo message on NPort that changes its NPort Id
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 688a88635f9d0d9251d35198e931eaac8816abef
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:49:56 2006 -0400

    [SCSI] lpfc 8.1.7: Fix txcmplq related panics on heavy IO while downloading firmware
    
    Fix txcmplq related panics on heavy IO while downloading firmware
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4db621e0f3817e14c79513b42c0479d44d8467de
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:49:49 2006 -0400

    [SCSI] lpfc 8.1.7: Issue DOWN_LINK prior to INIT_LINK to work around link failure issue
    
    Issue DOWN_LINK prior to INIT_LINK to work around link failure issue
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d0e56dad5c10e2a34a830e02dfd3aca20e63e387
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:49:42 2006 -0400

    [SCSI] lpfc 8.1.7: Fixed infinite retry of REG_LOGIN mailbox failed due to MBXERR_RPI_FULL
    
    Fixed infinite retry of REG_LOGIN mailbox failed due to MBXERR_RPI_FULL
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9f49d3b05f092b89e774be20c654ceb0c64a7d19
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:49:34 2006 -0400

    [SCSI] lpfc 8.1.7: Fix memory leak and cleanup code related to per ring lookup array
    
    Fix memory leak and cleanup code related to per ring lookup array.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e17da18e2f78845899467d6e580146ef673f5330
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:49:25 2006 -0400

    [SCSI] lpfc 8.1.7: Standardize the driver on a single define for the maximum supported targets
    
    Standardize the driver on a single define for the maximum supported targets.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5a0e326dfa6d87a1ac6929a7d6d327e8803b7aef
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu Jul 6 15:49:16 2006 -0400

    [SCSI] lpfc 8.1.7: Use mod_timer instead of add_timer in lpfc_els_timeout_handler
    
    Use mod_timer instead of add_timer in lpfc_els_timeout_handler
    
    This patch was formerly posted by Mark Haverkamp.
    http://marc.theaimsgroup.com/?l=linux-scsi&m=114246089015681&w=2
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit dc22f16d4e46cee699c3835cc6e2a8005023517f
Author: Eric Moore <eric.moore@lsil.com>
Date:   Thu Jul 6 11:23:14 2006 -0600

    [SCSI] mptsas: use unnumbered port API and remove driver porttracking
    
    This allows us to be rid of the machinery in mptsas for creating and
    tracking port numbers.  Since mptsas is merely inventing the numbers,
    the SAS transport class may as well do it instead.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a507c6a2d91c52615bd3bb5a8ff439d9e8530939
Author: Douglas Gilbert <dougg@torque.net>
Date:   Sun Jul 2 13:48:10 2006 -0400

    [SCSI] update additional sense codes and some opcode names
    
    Following on from my post titled: "additional sense codes
    need update" see the attachment against lk 2.6.17 .
    
    ChangeLog:
      - update additional sense codes table to agree with
        SPC-4 revision 5a  (14 June 2006)
      - adjust some of the opcode names
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c9fefeb26457b87f4a767faefcf77321bb90db52
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Jul 2 11:10:18 2006 -0500

    [SCSI] scsi_transport_sas: add unindexed ports
    
    Some SAS HBAs don't want to go to the trouble of tracking port numbers,
    so they'd simply like to say "add this port and give it a number".
    This is especially beneficial from the hotplug point of view, since
    tracking ports and the available number space can be a real pain.
    
    The current implementation uses an incrementing number per expander to
    add the port on.  However, since there can never be more ports than
    there are phys, a later implementation will try to be more intelligent
    about this.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 24f6d2fd314f8580fcfd96391ce9689727d55572
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 02:33:07 2006 -0700

    [SCSI] aic79xx: make ahd_done_with_status() static
    
    This patch makes a needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b862f3b099f3ea672c7438c0b282ce8201d39dfc
Author: Linus Torvalds <torvalds@macmini.osdl.org>
Date:   Sat Jul 8 15:24:18 2006 -0700

    i386: improve and correct inline asm memory constraints
    
    Use "+m" rather than a combination of "=m" and "m" for improved clarity
    and consistency.
    
    This also fixes some inlines that incorrectly didn't tell the compiler
    that they read the old value at all, potentially causing the compiler to
    generate bogus code.  It appear that all of those potential bugs were
    hidden by the use of extra "volatile" specifiers on the data structures
    in question, though.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2a3d40258fe20d205f8ed592e1e2c0d5529c2e1
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 8 15:00:28 2006 -0700

    power: improve inline asm memory constraints
    
    Use "+m" rather than a combination of "=m" and "m" for improved
    clarity and consistency.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26e0fd1ce2418b10713b569a195bdb679233066b
Author: Patrick McHardy <kaber@trash.net>
Date:   Sat Jul 8 13:38:55 2006 -0700

    [NET]: Fix IPv4/DECnet routing rule dumping
    
    When more rules are present than fit in a single skb, the remaining
    rules are incorrectly skipped.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a430a43d087545c96542ee64573237919109d370
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jul 8 13:34:56 2006 -0700

    [NET] gso: Fix up GSO packets with broken checksums
    
    Certain subsystems in the stack (e.g., netfilter) can break the partial
    checksum on GSO packets.  Until they're fixed, this patch allows this to
    work by recomputing the partial checksums through the GSO mechanism.
    
    Once they've all been converted to update the partial checksum instead of
    clearing it, this workaround can be removed.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89114afd435a486deb8583e89f490fc274444d18
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jul 8 13:34:32 2006 -0700

    [NET] gso: Add skb_is_gso
    
    This patch adds the wrapper function skb_is_gso which can be used instead
    of directly testing skb_shinfo(skb)->gso_size.  This makes things a little
    nicer and allows us to change the primary key for indicating whether an skb
    is GSO (if we ever want to do that).
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c6c6795eda34e4dc38ecac912a16b6314082beb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jul 8 13:33:28 2006 -0700

    [IRDA]: fix drivers/net/irda/ali-ircc.c:ali_ircc_init()
    
    The Coverity checker spotted, that from the changes from commit
    898b1d16f8230fb912a0c2248df685735c6ceda3 the
           if (ret)
                   platform_driver_unregister(&ali_ircc_driver);
    was dead code.
    
    This patch changes this function to what seems to have been the
    intention.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1252ecf63f77ea147bd40f5462c7d9e3d3ae2815
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Sat Jul 8 13:30:52 2006 -0700

    [ATM]: fix possible recursive locking in skb_migrate()
    
    ok this is a real potential deadlock in a way, it takes two locks of 2
    skbuffs without doing any kind of lock ordering; I think the following
    patch should fix it. Just sort the lock taking order by address of the
    skb.. it's not pretty but it's the best this can do in a minimally
    invasive way.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00181fc94648b4bb30d30ef95506055105316051
Author: Matt LaPlante <kernel1@cyberdogtech.com>
Date:   Sat Jul 8 13:30:09 2006 -0700

    [ATM]: Typo in drivers/atm/Kconfig...
    
    From: Matt LaPlante <kernel1@cyberdogtech.com>
    Signed-off-by: Charles Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c165b0040502ef0d2b5751eef3cd96ea8210ae4c
Author: John W. Linville <linville@tuxdriver.com>
Date:   Sat Jul 8 13:28:53 2006 -0700

    [TG3]: add amd8131 to "write reorder" chipsets
    
    Add the AMD 8131 bridge to the list of chipsets that reorder writes.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>
    Acked-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ba10ab128e88bfbe58f7164543827ef3c3a2c88
Author: Steve French <sfrench@us.ibm.com>
Date:   Sat Jul 8 02:17:40 2006 +0000

    [CIFS] CIFS_DEBUG2 depends on CIFS
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 5a8da02ba59a9f978e2af4c5da9a029ea5f5ee3b
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Fri Jul 7 16:54:05 2006 -0700

    [NET]: Fix network device interface printk message priority
    
    The printk's in the network device interface code should all be tagged
    with severity.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a496e25dfb25493a57bcee5d66875d6ff80a9093
Author: Dave Jones <davej@redhat.com>
Date:   Fri Jul 7 12:31:27 2006 -0400

    [PATCH] Fix cpufreq vs hotplug lockdep recursion.
    
    [ There's some not quite baked bits in cpufreq-git right now
      so sending this on as a patch instead ]
    
    On Thu, 2006-07-06 at 07:58 -0700, Tom London wrote:
    
    > After installing .2356 I get this each time I boot:
    > =======================================================
    > [ INFO: possible circular locking dependency detected ]
    > -------------------------------------------------------
    > S06cpuspeed/1620 is trying to acquire lock:
    >  (dbs_mutex){--..}, at: [<c060d6bb>] mutex_lock+0x21/0x24
    >
    > but task is already holding lock:
    >  (cpucontrol){--..}, at: [<c060d6bb>] mutex_lock+0x21/0x24
    >
    > which lock already depends on the new lock.
    >
    
    make sure the cpu hotplug recursive mutex (yuck) is taken early in the
    cpufreq codepaths to avoid a AB-BA deadlock.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d64d3722c6abbb43bccd518ececc5559e1962b4
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 23:55:00 2006 -0400

    Input: iforce - check array bounds before accessing elements
    
    Fixes Coverity #id 864
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 95349fe8144b7d18f04bdca1c2d3fb85789de4fb
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 23:54:48 2006 -0400

    Input: libps2 - warn instead of oopsing when passed bad arguments
    
    This is more user-friendly and also fixes Coverity #id 249
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 699756199d65700e8deed59ae250439ca8684686
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 23:54:30 2006 -0400

    Input: fm801-gp - fix use after free
    
    Fixes Coverity #id 916
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 90a18fab4ae07b77bf053b75a4d1285cd94faa79
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jul 6 22:37:43 2006 +0200

    make fs/jffs2/nodelist.c:jffs2_obsolete_node_frag() static
    
    This patch makes the needlessly global jffs2_obsolete_node_frag()
    static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 70f05366b71c51c35c25c0b76b4318fbc26c975a
Merge: c0bc872... 120bda2...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jul 6 13:07:32 2006 -0400

    Merge branch 'master' into upstream

commit 1959d21232931dfa686769a21161413f10d6652f
Author: Jens Axboe <axboe@suse.de>
Date:   Thu Jul 6 10:18:05 2006 +0200

    [PATCH] Only the first two bits in bio->bi_rw and rq->flags match
    
    Not three, as assumed. This causes the barrier bit to be needlessly set
    for some IO.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 40359ccb836866435b03a0cb57345002b587d875
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Jul 6 10:03:28 2006 +0200

    [PATCH] blktrace: readahead support
    
    Provide the needed kernel support for distinguishing readahead
    from regular read requests when tracing block devices.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit fc0a75ce4835187a3f76d6b35f0644d1b168eef5
Author: Nathan Scott <nathans@sgi.com>
Date:   Thu Jul 6 09:56:30 2006 +0200

    [PATCH] blktrace: fix barrier vs sync typo
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit c7948989f84ee6e9c68cc643f8c6a635eb7a904b
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jul 6 00:23:38 2006 -0400

    Input: wistron - fix section reference mismatches
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0e739d28762e78c746cad8edd33223550a1c6a3f
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 00:22:43 2006 -0400

    Input: introduce input_inject_event() function
    
    Create input_inject_event() function which is to be used by input
    handlers as opposed to input_event() which is reserved for drivers
    implementing input devices. The difference is that if device is
    "grabbed" by some process input_inject_event() will ignore events
    unless sent from the handle that is currently owns the device.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit c7e8dc6ee6d59bf72f5478fa6355a27750e6c7d2
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 00:21:03 2006 -0400

    Input: add start() method to input handlers
    
    The new start() method is called immediately after connect() and also
    when "grabbed" device is released by its owner. This will allow input
    handlers to re-synchronize state of once-grabbed device with the rest
    of devices.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit e9c8862f19958846dd0c7b39d0f6216aad6c7bee
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Thu Jul 6 00:20:47 2006 -0400

    Input: remove accept method from input_dev
    
    This method used to enforce exclusive access to iforce devices,
    but presenlty there are no known users of this method.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 120bda20c6f64b32e8bfbdd7b34feafaa5f5332e
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 21:09:49 2006 -0700

    Linux 2.6.18-rc1
    
    It's all good.

commit 075d6adf909ac8706bd0be7832e6dadb0aef314b
Merge: e2a305e... 4fe683f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 21:08:43 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [PKT_SCHED]: Fix error handling while dumping actions
      [PKT_SCHED]: Return ENOENT if action module is unavailable
      [PKT_SCHED]: Fix illegal memory dereferences when dumping actions

commit e2a305ecb5734f24d3a4496605a6fdf27ddf7108
Merge: 66337da... 37e64e5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 21:08:35 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Fix stack overflow checking in modular non-SMP kernels.
      [SPARC64]: Fix sparc64 build errors when CONFIG_PCI=n.

commit 4fe683f50d3fc8e36d4749277631dfc711393aa0
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jul 5 20:47:28 2006 -0700

    [PKT_SCHED]: Fix error handling while dumping actions
    
    "return -err" and blindly inheriting the error code in the netlink
    failure exception handler causes errors codes to be returned as
    positive value therefore making them being ignored by the caller.
    
    May lead to sending out incomplete netlink messages.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d152b4e1e9a18f332ecd9e66492d706edc083345
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jul 5 20:45:57 2006 -0700

    [PKT_SCHED]: Return ENOENT if action module is unavailable
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 26dab8930b408d5e5eb9ef496d68364dc955e249
Author: Thomas Graf <tgraf@suug.ch>
Date:   Wed Jul 5 20:45:06 2006 -0700

    [PKT_SCHED]: Fix illegal memory dereferences when dumping actions
    
    The TCA_ACT_KIND attribute is used without checking its
    availability when dumping actions therefore leading to a
    value of 0x4 being dereferenced.
    
    The use of strcmp() in tc_lookup_action_n() isn't safe
    when fed with string from an attribute without enforcing
    proper NUL termination.
    
    Both bugs can be triggered with malformed netlink message
    and don't require any privileges.
    
    Signed-off-by: Thomas Graf <tgraf@suug.ch>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37e64e5ae1a9554762b6ec494871adcf48be20cf
Author: Mikael Pettersson <mikpe@it.uu.se>
Date:   Wed Jul 5 20:42:58 2006 -0700

    [SPARC64]: Fix stack overflow checking in modular non-SMP kernels.
    
    The sparc64 kernel's EXPORT_SYMBOL(_mcount) is inside an
    #ifdef CONFIG_SMP. This breaks modules in non-SMP kernels
    built with stack overflow checking (CONFIG_STACK_DEBUG=y),
    as modules_install reports:
    
    WARNING: /lib/modules/2.6.17/kernel/drivers/ide/ide-cd.ko needs unknown symbol _mcount
    
    Trivially fixed by moving EXPORT_SYMBOL(_mcount) outside of
    the #ifdef CONFIG_SMP.
    
    Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 66337dab951a9da0873bb1d7dbf36fb668417274
Merge: a942b57... 309bade...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 20:19:30 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [PCI] Add JMicron PCI ID constants
      [PATCH] ahci: Ensure that we don't grab both functions
      [PATCH] libata-core.c: restore configuration boot messages in ata_dev_configure(), v2
      [PATCH] sata_sil24: add suspend/sleep support
      [PATCH] sata_sil24: separate out sil24_init_controller()
      [PATCH] sata_sil: add suspend/sleep support
      [PATCH] sata_sil: separate out sil_init_controller()
      [PATCH] libata: reimplement controller-wide PM
      [PATCH] libata: reimplement per-dev PM
      [PATCH] libata: implement PM EH actions
      [PATCH] libata: separate out __ata_ehi_hotplugged()
      [PATCH] libata: implement ATA_EHI_NO_AUTOPSY and QUIET
      [PATCH] libata: clean up debounce parameters and improve parameter selection
      [PATCH] libata: implement ATA_EHI_RESUME_LINK
      [PATCH] libata: replace ap_lock w/ ap->lock in ata_scsi_error()
      [PATCH] libata: fix ehc->i.action setting in ata_eh_autopsy()
      [PATCH] libata: add ap->pflags and move core dynamic flags to it
      [PATCH] libata: Conditionally set host->max_cmd_len
      [PATCH] sata_vsc: data_xfer should use mmio

commit 7233589d77fdb593b482a8b7ee867e901f54b593
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jul 5 20:18:39 2006 -0700

    [SPARC64]: Fix sparc64 build errors when CONFIG_PCI=n.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 309bade002e9226781c2d7a015340d0089e399b5
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Jul 5 23:02:48 2006 -0400

    [PCI] Add JMicron PCI ID constants
    
    They will be used in several IDE/libata files.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9545b5781cfa822ea1528bc65965dbace0c39a5d
Author: Alan Cox <alan@redhat.com>
Date:   Wed Jul 5 22:58:20 2006 -0400

    [PATCH] ahci: Ensure that we don't grab both functions
    
    When we force the chip into dual fn mode so we get PATA and AHCI we must
    be sure we don't then do anything dumb like try and grab both with the AHCI
    driver.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5afc81427f79193ed55edd7184ba2b6ce119a649
Author: Borislav Petkov <bbpetkov@yahoo.de>
Date:   Tue Jun 27 14:51:25 2006 +0200

    [PATCH] libata-core.c: restore configuration boot messages in ata_dev_configure(), v2
    
    This one looks better, IMHO.
    
    This restores the default libata configuration messages printed during booting.
    
    Signed-off-by: Borislav Petkov <petkov@math.uni-muenster.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d2298dca9a2ec8a8ff23e251d8aaab00e9d229f9
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:27 2006 +0900

    [PATCH] sata_sil24: add suspend/sleep support
    
    Add suspend/sleep support.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2a41a6108d93a62910d1c36913d83a79b550b40a
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:27 2006 +0900

    [PATCH] sata_sil24: separate out sil24_init_controller()
    
    Separate out controller initialization from sil24_init_one() into
    sil24_init_controller().  This will be used by resume.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit afb5a7cb84b1ea8b6045945e3d288303e6b71336
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:27 2006 +0900

    [PATCH] sata_sil: add suspend/sleep support
    
    Add suspend/sleep support.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3d8ec91352099b32a400f1952112dc076da28106
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:27 2006 +0900

    [PATCH] sata_sil: separate out sil_init_controller()
    
    Separate out controller initialization from sil_init_one() into
    sil_init_controller().  This will be used by resume.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 500530f652f9e5dabe7571b018dec47742ce0f16
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:27 2006 +0900

    [PATCH] libata: reimplement controller-wide PM
    
    Reimplement controller-wide PM.  ata_host_set_suspend/resume() are
    defined to suspend and resume a host_set.  While suspended, EHs for
    all ports in the host_set are pegged using ATA_FLAG_SUSPENDED and
    frozen.
    
    Because SCSI device hotplug is done asynchronously against the rest of
    libata EH and the same mutex is used when adding new device, suspend
    cannot wait for hotplug to complete.  So, if SCSI device hotplug is in
    progress, suspend fails with -EBUSY.
    
    In most cases, host_set resume is followed by device resume.  As each
    resume operation requires a reset, a single host_set-wide resume
    operation may result in multiple resets.  To avoid this, resume waits
    upto 1 second giving PM to request resume for devices.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d6f26d1f1f1128a896f38a7f8426daed0a1205a2
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:26 2006 +0900

    [PATCH] libata: reimplement per-dev PM
    
    Reimplement per-dev PM.  The original implementation directly put the
    device into suspended mode and didn't synchronize w/ EH operations
    including hotplug.  This patch reimplements ata_scsi_device_suspend()
    and ata_scsi_device_resume() such that they request EH to perform the
    respective operations.  Both functions synchronize with hotplug such
    that it doesn't operate on detached devices.
    
    Suspend waits for completion but resume just issues request and
    returns.  This allows parallel wake up of devices and thus speeds up
    system resume.
    
    Due to sdev detach synchronization, it's not feasible to separate out
    EH requesting from sdev handling; thus, ata_device_suspend/resume()
    are removed and everything is implemented in the respective
    libata-scsi functions.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 02670bf379267f55a43aa57f6895689697e90eb3
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:26 2006 +0900

    [PATCH] libata: implement PM EH actions
    
    Implement two PM per-dev EH actions - ATA_EH_SUSPEND and
    ATA_EH_RESUME.  Each action puts the target device into suspended mode
    and resumes from it respectively.
    
    Once a device is put to suspended mode, no EH operations other than
    RESUME is allowed on the device.  The device will stay suspended till
    it gets resumed and thus reset and revalidated.  To implement this, a
    new device state helper - ata_dev_ready() - is implemented and used in
    EH action implementations to make them operate only on attached &
    running devices.
    
    If all possible devices on a port are suspended, reset is skipped too.
    This prevents spurious events including hotplug events from disrupting
    suspended devices.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c0b6c0377c32fe3f6a2cf1e018db6da8a3b78379
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:26 2006 +0900

    [PATCH] libata: separate out __ata_ehi_hotplugged()
    
    Separate out __ata_ehi_hotplugged() from ata_ehi_hotplugged().  The
    underscored version doesn't set AC_ERR_ATA_BUS.  This will be used for
    resume which is a hotplug event but not an ATA bus error.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1cdaf534f829b8759ba30f97d5e8dceb2ab77ba4
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:26 2006 +0900

    [PATCH] libata: implement ATA_EHI_NO_AUTOPSY and QUIET
    
    Implement ATA_EHI_NO_AUTOPSY and QUIET.  These used to be implied by
    ATA_PFLAG_LOADING, but new power management and PMP support need to
    use these separately.  e.g. Suspend/resume operations shouldn't print
    full EH messages and resume shouldn't be recorded as an error.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e9c839142d698086d3fe33a0daafde55ddd00c4e
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:26 2006 +0900

    [PATCH] libata: clean up debounce parameters and improve parameter selection
    
    The names of predefined debounce timing parameters didn't exactly
    match their usages.  Rename to more generic names and implement param
    selection helper sata_ehc_deb_timing() which uses EHI_HOTPLUGGED to
    select params.
    
    Combined with the previous EHI_RESUME_LINK differentiation, this makes
    parameter selection accurate.  e.g. user scan resumes link but normal
    deb param is used instead of hotplug param.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 28324304350e23db24d679c55de3f06a5b1e40aa
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 16:07:26 2006 +0900

    [PATCH] libata: implement ATA_EHI_RESUME_LINK
    
    Implement ATA_EHI_RESUME_LINK, which indicates that the link needs to
    be resumed.  This used to be implied by ATA_EHI_HOTPLUGGED.  However,
    hotplug isn't the only event which requires link resume and separating
    this out allows other places to request link resume.  This
    differentiation also allows better debounce timing selection.
    
    This patch converts user scan to use ATA_EHI_RESUME_LINK.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e30349d27e093f32ef517b5416d9dce1998d4676
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 03:02:15 2006 +0900

    [PATCH] libata: replace ap_lock w/ ap->lock in ata_scsi_error()
    
    ap_lock was used because &ap->host_set->lock was too long and used a
    lot.  Now that &ap->host_set->lock is replaced with ap->lock, there's
    no reason to keep ap_lock.
    
    [ed. note: that's not entirely true.  ap_lock is a local variable,
    caching the results of a de-ref.  In theory, if the compiler is smart
    enough, this patch is cosmetic.  However, since this is not a fast
    path (it is the error path), this patch is nonetheless acceptable,
    even though it _may_ introduce a performance regression.]
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0662c58b3265f52f708a6d59476bc7862b01f9c0
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jul 3 02:54:58 2006 +0900

    [PATCH] libata: fix ehc->i.action setting in ata_eh_autopsy()
    
    ata_eh_autopsy() used to directly assign determined action mask to
    ehc->i.action thus overriding actions set by some of nested analyze
    functions.  This patch makes ata_eh_autopsy() add action masks just as
    it's done in other places.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b51e9e5db0e36239f786692f1cac6e435ed30c66
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 29 01:29:30 2006 +0900

    [PATCH] libata: add ap->pflags and move core dynamic flags to it
    
    ap->flags is way too clamped.  Separate out core dynamic flags to
    ap->pflags.  ATA_FLAG_DISABLED is a dynamic flag but left alone as
    it's referenced by a lot of LLDs and it's gonna be removed once all
    LLDs are converted to new EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e6d902a3bfd53da375588e498251f4f4f6cd9650
Author: Brian King <brking@us.ibm.com>
Date:   Wed Jun 28 08:30:31 2006 -0500

    [PATCH] libata: Conditionally set host->max_cmd_len
    
    In preparation for SAS attached SATA devices, which will
    not have a libata scsi_host, only setup host->max_cmd_len
    if ap->host exists.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a93620b860434a19820072e656f4933e101ea6d4
Author: Martin Hicks <mort@bork.org>
Date:   Wed Jun 28 12:17:47 2006 -0400

    [PATCH] sata_vsc: data_xfer should use mmio
    
    Hi,
    
    sata_vsc is an MMIO device, and should use the correct data_xfer
    function.  This problem was introduced by:
    
       commit a6b2c5d4754dc539a560fdf0d3fb78a14174394a
       Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
       Date:   Mon May 22 16:59:59 2006 +0100
    
            [PATCH] PATCH: libata. Add ->data_xfer method
    
    Signed-off-by: Martin Hicks <mort@bork.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a942b57b9577f30da46a9f16ea0ef2c372cb15a4
Merge: 887e5d5... 72dbac3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 13:05:15 2006 -0700

    Merge git://git.linux-nfs.org/pub/linux/nfs-2.6
    
    * git://git.linux-nfs.org/pub/linux/nfs-2.6:
      NLM,NFSv4: Wait on local locks before we put RPC calls on the wire
      VFS: Add support for the FL_ACCESS flag to flock_lock_file()
      NFSv4: Ensure nfs4_lock_expired() caches delegated locks
      NLM,NFSv4: Don't put UNLOCK requests on the wire unless we hold a lock
      VFS: Allow caller to determine if BSD or posix locks were actually freed
      NFS: Optimise away an excessive GETATTR call when a file is symlinked
      This fixes a panic doing the first READDIR or READDIRPLUS call when:
      NFS: Fix NFS page_state usage
      Revert "Merge branch 'odirect'"

commit 887e5d5fcc96e3a7c91e19d9bb419c10196ffdc1
Merge: e8f7558... ba854e1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 13:03:18 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3711/1: AT91 timer update
      [ARM] 3709/1: pnx4008: convert to generic irq subsystem
      [ARM] 3710/1: AT91 Serial: Use GPIO API

commit e8f75588dd5885868147b329ced4a5093dc6402e
Merge: e340221... 2c1a108...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 5 13:02:56 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (39 commits)
      [PATCH] myri10ge - Export more parameters to ethtool
      [PATCH] myri10ge - Use dev_info() when printing parameters after probe
      [PATCH] myri10ge - Drop ununsed nvidia chipset id
      [PATCH] myri10ge - Drop unused pm_state
      [PATCH] Fix freeing of net device
      [PATCH] remove dead entry in net wan Kconfig
      [PATCH] NI5010 netcard cleanup
      [PATCH] lock validator: fix ns83820.c irq-flags bug
      [PATCH] pcnet32: Cleanup rx buffers after loopback test.
      [PATCH] pcnet32: Suspend the chip rather than restart when changing multicast/promisc
      [PATCH] pcnet32: Handle memory allocation failures cleanly when resizing tx/rx rings
      [PATCH] pcnet32: Use kcalloc instead of kmalloc and memset
      [PATCH] pcnet32: Fix off-by-one in get_ringparam
      [PATCH] pcnet32: Use PCI_DEVICE macro
      [PATCH] pcnet32: Fix Section mismatch error
      [PATCH] Add support for the Cicada 8201 PHY
      [PATCH] zd1211rw: disable TX queue during stop
      [PATCH] ZyDAS ZD1211 USB-WLAN driver
      [PATCH] softmac: fix build-break from 881ee6999d66c8fc903b429b73bbe6045b38c549
      [PATCH] CONFIG_WIRELESS_EXT is neccessary after all
      ...

commit c0bc8721b8d0380ec69fa97578c91201201b05a9
Merge: bce305f... e4ac977...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Jul 5 14:32:39 2006 -0400

    Merge branch 'upstream' of git://lost.foo-projects.org/~ahkok/git/netdev-2.6 into upstream
    
    Conflicts:
    
    	drivers/net/e1000/e1000_main.c

commit bce305f4fe779f29d99d414685243f5da0803254
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Wed Jul 5 15:00:40 2006 +0200

    [PATCH] 8139too deadlock fix
    
    > stack backtrace:
    
    >  [<f9099d31>] rtl8139_start_xmit+0xd9/0xff [8139too]
    >  [<c11ad5ea>] netpoll_send_skb+0x98/0xea
    
    This seems to be a real deadlock...
    
    So netpoll_send_skb takes the _xmit_lock, which is all nitty gritty
    but then rtl8139_start_xmit comes around while that lock is taken, and
    does
    
          spin_unlock_irq(&tp->lock);
    
    which.. enables interrupts and softirqs; this is quite bad because the
    xmit lock is taken in softirq context for the watchdog like this:
      [<c1200376>] _spin_lock+0x23/0x32
      [<c11af282>] dev_watchdog+0x14/0xb1
      [<c101dab2>] run_timer_softirq+0xf2/0x14a
      [<c101a691>] __do_softirq+0x55/0xb0
      [<c1004a8d>] do_softirq+0x58/0xbd
    
    Which would deadlock now that the spin_unlock_irq() has enabled
    irqs/softirqs while the _xmit_lock is still held.
    
    The patch below turns this into a irqsave/irqrestore pair so that
    interrupts don't get enabled unconditionally.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 20ed7c094dfe33b0e15e8c60f60012b9278631d3
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Jul 5 14:28:34 2006 -0400

    [netdrvr] 3c59x: snip changelog from source code
    
    Driver source code is not the preferred place to store change history.
    
    Acked-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2c1a108890c5b57cf3f7d7909f55c4fae0f52f19
Author: Brice Goglin <brice@myri.com>
Date:   Mon Jul 3 18:16:46 2006 -0400

    [PATCH] myri10ge - Export more parameters to ethtool
    
    Add the IRQ line, the tx_boundary, and whether Write-combining and MSI
    are enabled to the list of parameters that are exported to ethtool.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d6020787488e837d3c2b24eb1b8cf9849058d340
Author: Brice Goglin <brice@myri.com>
Date:   Mon Jul 3 18:41:30 2006 -0400

    [PATCH] myri10ge - Use dev_info() when printing parameters after probe
    
    Displaying the interface name when listing the device parameters
    at the end of myri10ge_probe is not a good idea since udev might
    rename the interface soon afterwards.
    Print the bus id instead, using dev_info().
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 18ac544306855aa366d34d29755f4596acd7a58d
Author: Brice Goglin <brice@myri.com>
Date:   Mon Jul 3 18:02:32 2006 -0400

    [PATCH] myri10ge - Drop ununsed nvidia chipset id
    
    The workaround for the AER capability of the nVidia chipset has been
    removed, we don't need this PCI id anymore. Drop it.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ec590970f0f45a11c06b9525cd718dbdde22b4a3
Author: Brice Goglin <brice@myri.com>
Date:   Mon Jul 3 18:02:31 2006 -0400

    [PATCH] myri10ge - Drop unused pm_state
    
    The pm_state field in the myri10ge_priv structure is unused. Drop it.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b07db75a9f542c1a1745fcb047fd743843db8daa
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 30 13:56:13 2006 +0100

    [PATCH] Fix freeing of net device
    
    Plus optical sugar.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 22db99bd32646aa33051e23420ff3517cc70cad5
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Fri Jun 30 02:27:19 2006 -0700

    [PATCH] remove dead entry in net wan Kconfig
    
    Remove dead entry from net wan Kconfig and net wan Makefile..  This entry is
    left over from 2.4 where synclink used syncppp driver directly.  synclink
    drivers now use generic HDLC
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5b552b16420d11ec59d301494477713ab5cc1f43
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 30 02:25:07 2006 -0700

    [PATCH] NI5010 netcard cleanup
    
    - updated MAINTAINERS entry to new format
    - updated Jan-Pascal's (ACKed) and my email address
    - driver cleanup/modernization (runtime-, not hardware-tested)
    
    [bunk@stusta.de: build fix]
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Jan-Pascal van Best <jvbest@qv3pluto.leidenuniv.nl>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3a10ccebe928691d16a001687552228d32ff7910
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 30 02:25:06 2006 -0700

    [PATCH] lock validator: fix ns83820.c irq-flags bug
    
    Barry K. Nathan reported the following lockdep warning:
    
    [  197.343948] BUG: warning at kernel/lockdep.c:1856/trace_hardirqs_on()
    [  197.345928]  [<c010329b>] show_trace_log_lvl+0x5b/0x105
    [  197.346359]  [<c0103896>] show_trace+0x1b/0x20
    [  197.346759]  [<c01038ed>] dump_stack+0x1f/0x24
    [  197.347159]  [<c012efa2>] trace_hardirqs_on+0xfb/0x185
    [  197.348873]  [<c029b009>] _spin_unlock_irq+0x24/0x2d
    [  197.350620]  [<e09034e8>] do_tx_done+0x171/0x179 [ns83820]
    [  197.350895]  [<e090445c>] ns83820_irq+0x149/0x20b [ns83820]
    [  197.351166]  [<c013b4b8>] handle_IRQ_event+0x1d/0x52
    [  197.353216]  [<c013c6c2>] handle_level_irq+0x97/0xe1
    [  197.355157]  [<c01048c3>] do_IRQ+0x8b/0xac
    [  197.355612]  [<c0102d9d>] common_interrupt+0x25/0x2c
    
    this is caused because the ns83820 driver re-enables irq flags
    in hardirq context.
    
    While legal in theory, in practice it should only be done if the
    hardware is really old and has some very high overhead in its ISR.
    (such as PIO IDE)
    
    For modern hardware, running ISRs with irqs enabled is discouraged,
    because 1) new hardware is fast enough to not cause latency problems
    2) allowing the nesting of hardware interrupts only 'spreads out'
    the handling of the current ISR, causing extra cachemisses that would
    otherwise not happen. Furthermore, on architectures where ISRs share
    the kernel stacks, enabling interrupts in ISRs introduces a much
    higher kernel-stack-nesting and thus kernel-stack-overflow risk.
    3) not managing irq-flags via the _irqsave / _irqrestore variants
    is dangerous: it's easy to forget whether one function nests inside
    another, and irq flags might be mismanaged.
    
    In the few cases where re-enabling interrupts in an ISR is considered
    useful (and unavoidable), it has to be taught to the lock validator
    explicitly (because the lock validator needs the "no ISR ever enables
    hardirqs" artificial simplification to keep the IRQ/softirq locking
    dependencies manageable).
    
    This teaching is done via the explicit use local_irq_enable_in_hardirq().
    On a stock kernel this maps to local_irq_enable(). If the lock validator
    is enabled then this does not enable interrupts.
    
    Now, the analysis of drivers/net/ns83820.c's irq flags use: the
    irq-enabling in irq context seems intentional, but i dont think it's
    justified. Furthermore, the driver suffers from problem #3 above too,
    in ns83820_tx_timeout() it disables irqs via local_irq_save(), but
    then it calls do_tx_done() which does a spin_unlock_irq(),
    re-enabling for a function that does not expect it! While currently
    this bug seems harmless (only some debug printout seems to be
    affected by it), it's nevertheless something to be fixed.
    
    So this patch makes the ns83820 ISR irq-flags-safe, and cleans up
    do_tx_done() use and locking to avoid the ns83820_tx_timeout() bug.
    
    From: Arjan van de Ven <arjan@linux.intel.com>
    
      ns83820_mib_isr takes the misc_lock in IRQ context.  All other places that
      do this in the ISR already use _irqsave versions, make this consistent at
      least.  At some point in the future someone should audit the driver to see
      if all _irqsave's in the ISR can go away, this is generally an iffy/fragile
      proposition though; for now get it safe, simple and consistent.
    
    From: Arjan van de Ven <arjan@linux.intel.com>
    
    ok this is a real driver deadlock:
    
    The ns83820 driver enabled interrupts (by unlocking the misc_lock with
    _irq) while still holding the rx_info.lock, which is required to be irq
    safe since it's used in the ISR like this:
                    writel(1, dev->base + IER);
                    spin_unlock_irq(&dev->misc_lock);
                    kick_rx(ndev);
                    spin_unlock_irq(&dev->rx_info.lock);
    
    This is can cause a deadlock if an irq was pending at the first
    spin_unlock_irq already, or if one would hit during kick_rx().
    Simply remove the first _irq solves this
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Benjamin LaHaise <bcrl@kvack.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ac5bfe40f94cc8df512d247a5588897b0bc6dbea
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:55:27 2006 -0700

    [PATCH] pcnet32: Cleanup rx buffers after loopback test.
    
    More cleanup to pcnet32_loopback_test to release receive buffers if
    device is not up.  Created common routine to free rx buffers.
    
    Tested ia32 and ppc64
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit df27f4a610e22e8c8c740286368cc13e0600f22c
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:55:02 2006 -0700

    [PATCH] pcnet32: Suspend the chip rather than restart when changing multicast/promisc
    
    Suspend the chip if possible rather than stop and discard all tx and rx
    frames, when changing the mcast list or entering/leaving promiscuous
    mode.  Created common pcnet32_suspend routine.
    
    Tested ia32 and ppc64
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 06c878500893c315795fcf944ecbd85c3d023040
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:54:38 2006 -0700

    [PATCH] pcnet32: Handle memory allocation failures cleanly when resizing tx/rx rings
    
    Fix pcnet32_set_ringparam to handle memory allocation errors without
    leaving the adapter in an inoperative state and null pointers waiting to
    be dereferenced.
    
    Tested ia32 and ppc64.
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 12fa30f35b52e85b4c37a2ef3c3320c158d510fa
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:53:48 2006 -0700

    [PATCH] pcnet32: Use kcalloc instead of kmalloc and memset
    
    On 2006-03-08 Eric Sesterhenn wrote:
    converts drivers/net to kzalloc usage.
    
    Don Fry modified it to use netif_msg_drv.  Tested ia32 and ppc64.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6dcd60c2c78ca87163730472ddea6aa1a7754b61
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:53:23 2006 -0700

    [PATCH] pcnet32: Fix off-by-one in get_ringparam
    
    Fix off-by-one in pcnet32_get_ringparam
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f2622a2b16f27d0087c913115dc15ee70797d58b
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:52:58 2006 -0700

    [PATCH] pcnet32: Use PCI_DEVICE macro
    
    Jon Mason wrote on Thu, 12 Jan 2006 17:07:49 -0600:
    This patch adds the PCI_DEVICE macro to the pcnet32 driver.
    
    This has been tested on my opteron with my "trident" adapter.
    
    Don Fry modified it slightly and tested on ia32 and ppc64.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit dcaf9769801ff49268f5a7a8376045e251700dcf
Author: Don Fry <brazilnut@us.ibm.com>
Date:   Thu Jun 29 13:52:29 2006 -0700

    [PATCH] pcnet32: Fix Section mismatch error
    
    Fix Section mismatch error.  Tested ia32 and ppc64.
    
    Signed-off-by:  Don Fry <brazilnut@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0c639b31068e8e111ec330a3634d95e20c11aab6
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Wed Jun 28 21:13:23 2006 -0500

    [PATCH] Add support for the Cicada 8201 PHY
    
    Add support for the Cicada 8201 PHY, a.k.a Vitesse VSC8201.  This PHY is present on the MPC8349mITX.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c9a4b35df9a5e24065e2dd80aa18a381da62339d
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sun Jun 11 23:18:54 2006 +0100

    [PATCH] zd1211rw: disable TX queue during stop
    
    This avoids some potential races.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit e85d0918b54fbd9b38003752f7d665416b06edd8
Author: Daniel Drake <dsd@gentoo.org>
Date:   Fri Jun 2 17:11:32 2006 +0100

    [PATCH] ZyDAS ZD1211 USB-WLAN driver
    
    There are 60+ USB wifi adapters available on the market based on the ZyDAS
    ZD1211 chip.
    
    Unlike the predecessor (ZD1201), ZD1211 does not have a hardware MAC, so most
    data operations are coordinated by the device driver. The ZD1211 chip sits
    alongside an RF transceiver which is also controlled by the driver. Our driver
    currently supports 2 RF types, we know of one other available in a few marketed
    products which we will be supporting soon.
    
    Our driver also supports the newer revision of ZD1211, called ZD1211B. The
    initialization and RF operations are slightly different for the new revision,
    but the main difference is 802.11e support. Our driver does not support the
    QoS features yet, but we think we know how to use them.
    
    This driver is based on ZyDAS's own GPL driver available from www.zydas.com.tw.
    ZyDAS engineers have been responsive and supportive of our efforts, so thumbs
    up to them. Additionally, the firmware is redistributable and they have
    provided device specs.
    
    This driver has been written primarily by Ulrich Kunitz and myself. Graham
    Gower, Greg Kroah-Hartman, Remco and Bryan Rittmeyer have also contributed. The
    developers of ieee80211 and softmac have made our lives so much easier- thanks!
    
    We maintain a small info-page: http://zd1211.ath.cx/wiki/DriverRewrite
    
    If there is enough time for review, we would like to aim for inclusion in
    2.6.18. The driver works nicely as a STA, and can connect to both open and
    encrypted networks (we are using software-based encryption for now). We will
    work towards supporting more advanced features in the future (ad-hoc, master
    mode, 802.11a, ...).
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 4a232e725b5cc1bc7fc5b177424a9ff8313b23ad
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Jun 26 16:34:29 2006 -0400

    [PATCH] softmac: fix build-break from 881ee6999d66c8fc903b429b73bbe6045b38c549
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 8f7eb40749f4b0cf9d3892d9680c97b1bfce6de6
Author: Horms <horms@verge.net.au>
Date:   Mon Jun 26 17:44:38 2006 +0900

    [PATCH] CONFIG_WIRELESS_EXT is neccessary after all
    
    WARNING: /lib/modules/2.6.17-mm2/kernel/net/ieee80211/ieee80211.ko
    needs unknown symbol wireless_spy_update
    
    Someone removed the `#ifdef CONFIG_WIRELESS_EXT' from around the callsite
    in net/ieee80211/ieee80211_rx.c and didn't update Kconfig appropriately.
    
    The offending patchset seems to be 35c14b855f52c49e4f3d078b9532b056005ed321
    which is tittled
    
      [PATCH] ieee80211: remove unnecessary CONFIG_WIRELESS_EXT checking
    
    After a quick look it seems that wireless_spy_update() lives in
    net/core/wirless.c, and that file is only compiled if
    CONFIG_WIRELESS_EXT is set. Perhaps this is Kconig work, but
    in the mean time here is a reversal of the recent change.
    
    Signed-Off-By: Horms <horms@verge.net.au>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 9f101fc5e5a4810a2560841e4292a782b250cb02
Author: Joseph Jezak <josejx@gentoo.org>
Date:   Sun Jun 11 12:01:03 2006 -0400

    [PATCH] SoftMAC: Add network to ieee80211softmac_call_events when associate times out
    
    The ieee80211softmac_call_events function, when called with event type
    IEEE80211SOFTMAC_EVENT_ASSOCIATE_TIMEOUT should pass the network as the
    third parameter.  This patch does that.
    
    Signed-off-by: Joseph Jezak <josejx@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit cb74c432e321ed645b6cd88b77edc15f9478efbd
Author: Joseph Jezak <josejx@gentoo.org>
Date:   Sun Jun 11 12:00:37 2006 -0400

    [PATCH] SoftMAC: Prevent multiple authentication attempts on the same network
    
    This patch addresses the "No queue exists" messages commonly seen during
    authentication and associating.  These appear due to scheduling multiple
    authentication attempts on the same network.  To prevent this, I added a
    flag to stop multiple authentication attempts by the association layer.
    I also added a check to the wx handler to see if we're connecting to a
    different network than the one already in progress.  This scenario was
    causing multiple requests on the same network because the network BSSID
    was not being updated despite the fact that the ESSID changed.
    
    Signed-off-by: Joseph Jezak <josejx@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 4359219425a0918a72775480e125fbb077de338d
Author: Daniel Drake <dsd@gentoo.org>
Date:   Fri Jun 16 20:50:22 2006 +0100

    [PATCH] bcm43xx: enable shared key authentication
    
    I recently patched softmac to enable shared key authentication. This small patch
    will enable crazy or unfortunate bcm43xx users to use this new capability.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6d41e2651080c717c1b48389fe4171180388f042
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue Jun 20 09:19:18 2006 -0500

    [PATCH] 2.6.17 missing a call to ieee80211softmac_capabilities from ieee80211softmac_assoc_req
    
    In commit ba9b28d19a3251bb1dfe6a6f8cc89b96fb85f683, routine
    ieee80211softmac_capabilities was added to ieee80211softmac_io.c. As
    denoted by its name, it completes the capabilities IE that is
    needed in the associate and reassociate requests sent to the
    AP. For at least one AP, the Linksys WRT54G V5, the capabilities
    field must set the 'short preamble' bit or the AP refuses to
    associate. In the commit noted above, there is a call to the
    new routine from ieee80211softmac_reassoc_req, but not from
    ieee80211softmac_assoc_req. This patch fixes that oversight.
    
    As noted in the subject, v2.6.17 is affected. My bcm43xx card had been
    unable to associate since I was forced to buy a new AP. I finally was
    able to get a packet dump and traced the problem to the capabilities
    info. Although I had heard that a patch was "floating around", I had
    not seen it before 2.6.17 was released. As this bug does not affect
    security and I seem to have the only AP affected by it, there should
    be no problem in leaving it for 2.6.18.
    
    Signed-Off-By: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit fc8fd3400b716615933a47be453839d190b235bd
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Sun Jun 25 21:32:21 2006 -0500

    [PATCH] Convert bcm43xx-softmac to use the ieee80211_is_valid_channel routine
    
    The current version of bcm43xx-softmac uses local routines to check
    if a channel is valid. As noted in the comments, these routines do
    not take any regulatory information into account. This patch converts
    the code to use the equivalent routine in ieee80211, which is being
    converted to know about regulatory information.
    
    Signed-Off-By: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 60d48f1e23c25d09dbe7025ff179b808d72704b3
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Jun 21 21:05:58 2006 +0200

    [PATCH] skb used after passing to netif_rx in net/ieee80211/ieee80211_rx.c
    
    this patch fixes coverity id #913. ieee80211_monitor_rx() passes the skb
    to netif_rx() and we should not reference it any longer.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 4b301536694facb93f597281580f5ad907d36050
Author: Hong Liu <hong.liu@intel.com>
Date:   Wed Jun 21 11:35:08 2006 +0800

    [PATCH] ieee80211: fix not allocating IV+ICV space when usingencryption in ieee80211_tx_frame
    
    We should preallocate IV+ICV space when encrypting the frame.
    Currently no problem shows up just because dev_alloc_skb aligns the
    data len to SMP_CACHE_BYTES which can be used for ICV.
    
    Signed-off-by: Hong Liu <hong.liu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a1d79aaaa564abc19b7bf3a024bb371fa7648a15
Author: Michael Buesch <mb@bu3sch.de>
Date:   Sat Jun 17 15:19:05 2006 +0200

    [PATCH] bcm43xx: workaround init_board vs. IRQ race
    
    Place the Init-vs-IRQ workaround before any card register
    access, because we might not have the wireless core mapped
    at all times in init. So this will result in a Machine Check
    caused by a bus error.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit e8d596972221aea55ae7f5c2bb7d5895039f664d
Author: Daniel Drake <dsd@gentoo.org>
Date:   Wed Jun 14 17:51:14 2006 +0200

    [PATCH] bcm43xx: use softmac-suggested TX rate
    
    Use Softmac-suggested TX ratecode:
    ieee80211softmac_suggest_txrate()
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d3cef4ee2207033b9f231da308d966f357af34da
Author: Faidon Liambotis <faidon@cube.gr>
Date:   Sat Jun 10 20:54:58 2006 +0300

    [PATCH] Add two PLX device IDs
    
    This patch adds device IDs for Symbol LA-4123 and Global Sun Tech
    GL24110P to the HostAP PLX driver.
    This is not tested with real hardware, but there is no reason why it
    shouldn't work.
    Please test.
    
    Signed-off-by: Faidon Liambotis <faidon@cube.gr>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 9b91cf9daac41eeaaea57ecfe68dc13bb0305fa9
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 11:39:50 2006 -0400

    [netdrvr] use dev_xxx() printk helpers, rather than dev_printk(KERN_xxx, ...
    
    Suggested by Jiri Slaby.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2e8a538d865de0eb9813c8a0f2284e920299c0cc
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 10:47:51 2006 -0400

    [netdrvr] Use dev_printk() when ethernet interface isn't available
    
    For messages prior to register_netdev(), prefer dev_printk() because
    that prints out both our driver name and our [PCI | whatever] bus id.
    
    Updates: 8139{cp,too}, b44, bnx2, cassini, {eepro,epic}100, fealnx,
    	 hamachi, ne2k-pci, ns83820, pci-skeleton, r8169.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cabb7667dc150320ccd9d6f64fbd7a34766bc775
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 09:25:28 2006 -0400

    [netdrvr] via-velocity: remove io_size struct member, it is invariant
    
    Replace io_size struct members with VELOCITY_IO_SIZE constant.
    
    Also, constify chip_info_table[].
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e54f48933f414fa447c26d16524a4c9a8e2facc6
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 09:20:08 2006 -0400

    [netdrvr] via-velocity: misc. cleanups
    
    - const-ify pci_device_id table
    - clean up pci_device_id table with PCI_DEVICE()
    - don't store internal pointer in pci_device_id table,
      use pci_device_id::driver_data as an integer index
    - use dev_printk() for messages where eth%d prefix is unavailable
    - formatting fixes
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 46009c8bcd5d7c9fcbfc17d0455a471bea5be4d4
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 09:12:38 2006 -0400

    [netdrvr] minor cleanups in Becker-derived drivers
    
    - fealnx: convert #define to enum
    - fealnx, sundance: mark chip info table __devinitdata
    - fealnx: use dev_printk() during probe
    - fealnx: formatting cleanups
    - starfire: remove obsolete comment
    - sundance, via-rhine: add some whitespace where useful, in tables
    - sundance: prefer "{ }" table terminator
    - via-rhine: mark PCI probe table const
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8ab6f3f706f5cb91bc0793afc95c8809837ece05
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 08:56:23 2006 -0400

    [netdrvr] via-velocity: use netdev_priv() where appropriate
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c3d8e682b7d10f57d13c86ecbb15806781d6e953
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 08:54:34 2006 -0400

    [netdrvr] Remove Becker-template 'io_size' member, when invariant
    
    Becker-derived drivers often have the 'io_size' member in their chip
    info struct, indicating the minimum required size of the I/O resource
    (usually a PCI BAR).  For many situations, this number is either
    constant or irrelevant (due to pci_iomap convenience behavior).
    
    This change removes the io_size invariant member, and replaces it with a
    compile-time constant.
    
    Drivers updated: fealnx, gt96100eth, winbond-840, yellowfin
    
    Additionally,
    - gt96100eth: unused 'drv_flags' removed from gt96100eth
    - winbond-840: unused struct match_info removed
    - winbond-840: mark pci_id_tbl[] const, __devinitdata
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 03a8c6611aa18f919f8700b18f925e9008b616a8
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 07:57:22 2006 -0400

    [netdrvr] Remove Linux-specific changelogs from several Becker template drivers
    
    When in-kernel net drivers branched from Donald Becker's vanilla driver
    set, in the days before BitKeeper and git, a driver changelog was
    maintained in the driver source code.  These days, the kernel's
    changelog is far superior and much more accurate, so the in-driver
    changelogs are removed.
    
    Another relic of the Becker/kernel split was version numbering, using
    "foo-LKx.y.z" notation, resulting in weird version numbers like
    "1.17b-LK1.1.9".  These drivers are for older hardware, and see few
    changes these days, so the version numbers were all bumped to something
    more simple.
    
    Finally, in xircom_tulip_cb specifically, an additional cleanup removes
    the always-enabled CARDBUS cpp macro.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 36e1e84768b1123eb632aff153104855c71684cc
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 27 07:38:33 2006 -0400

    [netdrvr] epic100: minor cleanups
    
    - Remove in-source changelog, it's in the global kernel history.
    - convert silly and useless version to useful one
    - replace invariant pci_id_tbl[]::io_size uses with EPIC_TOTAL_SIZE
    - remove now-unused io_size member from pci_id_tbl[]
    - current kernel style prefers dev_printk() for the rare ethernet driver
      messages that cannot print an 'eth%d' prefix.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 72dbac37e3a0acf8e8f07fc65e34e83de83e0b28
Merge: 4e0641a... 01c3b86...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jul 5 13:19:25 2006 -0400

    Merge branch 'locks'

commit 4e0641a7ad98fca5646a6be17605bc80f6c4ebde
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jul 5 13:05:13 2006 -0400

    NFS: Optimise away an excessive GETATTR call when a file is symlinked
    
    In the case when compiling via a symlink tree, we want to ensure that the
    close-to-open GETATTR call is applied only to the final file, and not to
    the symlink.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit bce3481c91801665e17f8daf59ede946129f3d3f
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jul 5 13:17:12 2006 -0400

    This fixes a panic doing the first READDIR or READDIRPLUS call when:
    
    * the client is ia64 or any platform that actually implements
        flush_dcache_page(), and
    
      * the server returns fsinfo.dtpref >= client's PAGE_SIZE, and
    
      * the server does *not* return post-op attributes for the directory
        in the READDIR reply.
    
    Problem diagnosed by Greg Banks <gnb@melbourne.sgi.com>
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 83715ad54fad5a7ed330110f83e31ae92630e9d9
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jul 5 13:17:12 2006 -0400

    NFS: Fix NFS page_state usage
    
    The introduction of the FLUSH_INVALIDATE argument to nfs_sync_inode_wait()
    does not clear the nr_unstable page state counter for pages that are being
    released.
    
    Also fix a longstanding similar bug when nfs_commit_list() fails.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 01c3b861cd77b28565a2d18c7caa3ce7f938e35c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jun 29 16:38:39 2006 -0400

    NLM,NFSv4: Wait on local locks before we put RPC calls on the wire
    
    Use FL_ACCESS flag to test and/or wait for local locks before we try
    requesting a lock from the server
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f07f18dd6f29f11887b8d9cf7ecb736bf2f7dc62
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jun 29 16:38:37 2006 -0400

    VFS: Add support for the FL_ACCESS flag to flock_lock_file()
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 42a2d13eee3c895d22e9d1a52b96d15ca49adabc
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jun 29 16:38:36 2006 -0400

    NFSv4: Ensure nfs4_lock_expired() caches delegated locks
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9b07357490e5c7a1c3c2b6f4679d7ee4b4185ecd
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jun 29 16:38:34 2006 -0400

    NLM,NFSv4: Don't put UNLOCK requests on the wire unless we hold a lock
    
    Use the new behaviour of {flock,posix}_file_lock(F_UNLCK) to determine if
    we held a lock, and only send the RPC request to the server if this was the
    case.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f475ae957db66650db66916c62604ac27409d884
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jun 29 16:38:32 2006 -0400

    VFS: Allow caller to determine if BSD or posix locks were actually freed
    
    Change posix_lock_file_conf(), and flock_lock_file() so that if called
    with an F_UNLCK argument, and the FL_EXISTS flag they will indicate
    whether or not any locks were actually freed by returning 0 or -ENOENT.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5e66dd6d66ffe758b39b6dcadf2330753ee1159b
Merge: 026477c... ca78f6b...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jul 5 13:13:03 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit e340221acda6bc0bf05a0ff6e6114902c4307670
Author: Andreas Schwab <schwab@suse.de>
Date:   Wed Jul 5 18:57:48 2006 +0200

    [PATCH] Makefile typo
    
    Fix a typo in the toplevel makefile.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8e0c51c71fc973b400f6502382063553b82af5a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Jul 5 11:24:26 2006 +0100

    [PATCH] powerpc: implement missing jiffies64_to_cputime64()
    
    asm-powerpc/cputime.h doesn't declare jiffies64_to_cputime64() or
    cputime64_sub(), and due to CONFIG_VIRT_CPU_ACCOUNTING it's not picking
    up the definition from asm-generic like x86-64 & friends do.
    
    Cc: Dave Jones <davej@redhat.com>
    Cc: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba1826e5eced176cc9ec0033ad8ee0f1cd5ad2e4
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Wed Jul 5 15:36:15 2006 +1000

    [PATCH] powerpc: Fix loss of interrupts with MPIC
    
    With the new interrupt rework, an interrupt "host" map() callback can be
    called after the interrupt is already active.
    
    It's called again for an already mapped interrupt to allow changing the
    trigger setup, and currently this is not guarded with a test of wether
    the interrupt is requested or not.
    
    I plan to change some of this logic to be a bit less lenient against
    random reconfiguring of live interrupts but just not yet.
    
    The ported MPIC driver has a bug where when that happens, it will mask
    the interrupt.  This changes it to preserve the previous masking of the
    interrupt instead.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba854e18413d2d827f050984edeb8286c3335895
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Jul 5 17:22:52 2006 +0100

    [ARM] 3711/1: AT91 timer update
    
    Patch from Andrew Victor
    
    The AIC interrupt controller is the same on the Atmel AT91RM9200,
    AT91SAM9261 and AT91SAM9260 processors.
    
    This patch removes any RM9200-specific naming from the IRQ driver, and
    moves the AT91RM9200's default IRQ priority table into at91rm9200.c.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5904a7f9167cdeb95569799e0be652c2ce6d3298
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Wed Jul 5 14:47:20 2006 +0100

    [ARM] 3709/1: pnx4008: convert to generic irq subsystem
    
    Patch from Vitaly Wool
    
    Convert pnx4008 chip support to use generic irq subsystem
    
    Signed-off-by: Vitaly Wool <vitalywool@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 220b0f5755f86745e4e16d001fe6f46b448565fa
Author: Artem Bityutskiy <dedekind@infradead.org>
Date:   Wed Jul 5 11:04:02 2006 +0400

    [PATCH] [MTD] NAND: fix dead URL in Kconfig
    
    Signed-off-by: Artem Bityutskiy <dedekind@infradead.org>

commit 20e652761cbf6983fd067aef2f0242c262057737
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Wed Jul 5 14:31:13 2006 +0100

    [ARM] 3710/1: AT91 Serial: Use GPIO API
    
    Patch from Andrew Victor
    
    The AT91RM9200 errata work-around should be using the GPIO API and not
    accessing the PIO registers directly.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ca78f6baca863afe2e6a244a0fe94b3a70211d46
Merge: 7ad7153... ae90dd5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 4 14:00:26 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq:
      Move workqueue exports to where the functions are defined.
      [CPUFREQ] Misc cleanups in ondemand.
      [CPUFREQ] Make ondemand sampling per CPU and remove the mutex usage in sampling path.
      [CPUFREQ] Add queue_delayed_work_on() interface for workqueues.
      [CPUFREQ] Remove slowdown from ondemand sampling path.

commit 7ad7153b051d9628ecd6a336b543ea6ef099bd2c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 4 14:00:06 2006 -0700

    Fix up headers_install wrt devfs removal
    
    No devfs_fs.h header any more..
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fa0cb1141da80eed4f86155fb51931bc1c31888
Merge: c6482dd... 257a5bd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jul 4 12:55:45 2006 -0700

    Merge git://git.infradead.org/hdrinstall-2.6
    
    * git://git.infradead.org/hdrinstall-2.6:
      Remove export of include/linux/isdn/tpam.h
      Remove <linux/i2c-id.h> and <linux/i2c-algo-ite.h> from userspace export
      Restrict headers exported to userspace for SPARC and SPARC64
      Add empty Kbuild files for 'make headers_install' in remaining arches.
      Add Kbuild file for Alpha 'make headers_install'
      Add Kbuild file for SPARC 'make headers_install'
      Add Kbuild file for IA64 'make headers_install'
      Add Kbuild file for S390 'make headers_install'
      Add Kbuild file for i386 'make headers_install'
      Add Kbuild file for x86_64 'make headers_install'
      Add Kbuild file for PowerPC 'make headers_install'
      Add generic Kbuild files for 'make headers_install'
      Basic implementation of 'make headers_check'
      Basic implementation of 'make headers_install'

commit c6482dde1c2811afba289b2344268f850595f350
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Tue Jul 4 03:07:22 2006 -0700

    [PATCH] fix AB-BA deadlock inversion at cs46xx_dsp_remove_scb
    
    There is a code sequence where the locking is substream->self_group.lock
    -> ins->scbs[index].lock
    
    substream->self_group.lock is interrupt safe, and taken from irq context
    as well (trace is snipped for brevity)
    
    so what can happen is
    
       cpu 0                   	cpu 1
       user context			user context
    
    				take ins->scbs[index].lock without disabling interrupts
    
       get substream->self_group.lock (irqsafe)
       try to get ins->scbs[index].lock (spins)
    
    				interrupt happens
    				try to get substream->self_group.lock (spins)
    
    which is an obvious AB-BA deadlock
    
    fix is to just take the lock with _irqsafe
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Acked-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a46f9484f8926aacb2e79a0e1676de3a6a6fbae8
Author: Zach Brown <zach.brown@oracle.com>
Date:   Tue Jul 4 02:57:52 2006 -0700

    [PATCH] mthca: initialize send and receive queue locks separately
    
    mthca: initialize send and receive queue locks separately
    
    lockdep identifies a lock by the call site of its initialization.  By
    initializing the send and receive queue locks in mthca_wq_init() we confuse
    lockdep.  It warns that that the ordered acquiry of both locks in
    mthca_modify_qp() is recursive acquiry of one lock:
    
      =============================================
      [ INFO: possible recursive locking detected ]
      ---------------------------------------------
      modprobe/1192 is trying to acquire lock:
       (&wq->lock){....}, at: [<f892b4db>] mthca_modify_qp+0x60/0xa7b [ib_mthca]
      but task is already holding lock:
       (&wq->lock){....}, at: [<f892b4ce>] mthca_modify_qp+0x53/0xa7b [ib_mthca]
    
    Initializing the locks separately in mthca_alloc_qp_common() stops the
    warning and will let lockdep enforce proper ordering on paths that acquire
    both locks.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd8041f16b117f63f40fb844d6cdebe8b03514d2
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jul 4 02:57:51 2006 -0700

    [PATCH] Fix copying of pgdat array on each node for ia64 memory hotplug
    
    I found a bug in memory hot-add code for ia64.
    
    IA64's code has copies of pgdat's array on each node to reduce memory
    access over crossing node.  This array is used by NODE_DATA() macro.  When
    new node is hot-added, this pgdat's array should be updated and copied on
    new node too.
    
    However, I used for_each_online_node() in scatter_node_data() to copy
    it. This meant its array is not copied on new node.
    Because initialization of structures for new node was halfway,
    so online_node_map couldn't be set at this time.
    
    To copy arrays on new node, I changed it to check value of pgdat_list[]
    which is source array of copies.  I tested this patch with my Memory Hotadd
    emulation on Tiger4.  This patch is for 2.6.17-git20.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31304c909e6945b005af62cd55a582e9c010a0b4
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jul 4 15:04:39 2006 +1000

    [PATCH] uclinux: fix proc_task()/get_proc-task() naming
    
    Fix changed name of proc_task() to get_proc_task().
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e82ca04387dd6c98722f5f48235089839fd04268
Merge: 075395d... 309b0f1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:32:50 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6: (44 commits)
      ACPI: remove function tracing macros from drivers/acpi/*.c
      ACPI: add support for Smart Battery
      ACPI: handle battery notify event on broken BIOS
      ACPI: handle AC notify event on broken BIOS
      ACPI: asus_acpi: add S1N WLED control
      ACPI: asus_acpi: correct M6N/M6R display nodes
      ACPI: asus_acpi: add S1N WLED control
      ACPI: asus_acpi: rework model detection
      ACPI: asus_acpi: support L5D
      ACPI: asus_acpi: handle internal Bluetooth / support W5A
      ACPI: asus_acpi: support A4G
      ACPI: asus_acpi: support W3400N
      ACPI: asus_acpi: LED display support
      ACPI: asus_acpi: support A3G
      ACPI: asus_acpi: misc cleanups
      ACPI: video: Remove unneeded acpi_handle from driver.
      ACPI: thermal: Remove unneeded acpi_handle from driver.
      ACPI: power: Remove unneeded acpi_handle from driver.
      ACPI: pci_root: Remove unneeded acpi_handle from driver.
      ACPI: pci_link: Remove unneeded acpi_handle from driver.
      ...

commit 075395d228641646159dae3dd170fa3fc6ff477a
Merge: 060ec6f... 61a116e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:31:05 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-serial
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-serial:
      [SERIAL] Ensure 8250_pci quirks are not marked __devinit
      [SERIAL] Convert fifosize to an unsigned int

commit 060ec6f2fb3c8abb85927758de8ac5d1018e6a43
Merge: 0d17821... 0f1482f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:30:03 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] Fix lh7a40x_udc.c
      [ARM] Fix warning in consistent.c
      [ARM] Fix warnings in arch/arm/kernel/setup.c
      [ARM] Fix ecard.c resource warnings.
      [ARM] Fix ISA IRQ resources
      [ARM] Fix bad asm instruction in proc-arm925.S
      [ARM] More missing proc-macros.S includes
      [ARM] 3708/2: fix SMP build after section ioremap changes

commit 0d1782144e81faf6203075c5fcd0a2f0db91af5b
Merge: 67ab33d... c7afb0f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:29:08 2006 -0700

    Merge git://git.infradead.org/mtd-2.6
    
    * git://git.infradead.org/mtd-2.6:
      [JFFS2][XATTR] Fix memory leak in POSIX-ACL support
      fs/jffs2/: make 2 functions static
      [MTD] NAND: Fix broken sharpsl driver
      [JFFS2][XATTR] Fix xd->refcnt race condition
      MTD: kernel-doc fixes + additions
      MTD: fix all kernel-doc warnings
      [MTD] DOC: Fixup read functions and do a little cleanup

commit 67ab33db8be1cd466c09dfcba334d69d3e2f92e6
Merge: f7d57e4... 300b939...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:28:14 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (27 commits)
      [Bluetooth] Add RFCOMM role switch support
      [Bluetooth] Allow disabling of credit based flow control
      [Bluetooth] Small cleanup of the L2CAP source code
      [Bluetooth] Use real devices for host controllers
      [Bluetooth] Add platform device for virtual and serial devices
      [Bluetooth] Add automatic sniff mode support
      [Bluetooth] Correct SCO buffer size on request
      [Bluetooth] Add suspend/resume support to the HCI USB driver
      [Bluetooth] Use raw mode for the Frontline sniffer device
      [BRIDGE]: br_dump_ifinfo index fix
      [ATM]: add+use poison defines
      [NET]: add+use poison defines
      [IOAT]: fix kernel-doc in source files
      [IOAT]: fix header file kernel-doc
      [TG3]: Add ipv6 TSO feature
      [IPV6]: Fix ipv6 GSO payload length
      [TIPC] Fixed sk_buff panic caused by tipc_link_bundle_buf (REVISED)
      [NET]: Verify gso_type too in gso_segment
      [IPVS]: Add sysctl documentation
      [ROSE]: Try all routes when establishing a ROSE connections.
      ...

commit f7d57e42e7ebd085133506ef6325e70e822196dc
Merge: 51bece9... c4e00fa...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:27:18 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6: (57 commits)
      [SCSI] fix error handling in scsi_io_completion
      [SCSI] qla1280: fix section mismatch warnings
      [SCSI] mptsas: eliminate ghost devices
      [SCSI] qla2xxx: make some more functions static
      [SCSI] small whitespace cleanup for qlogic driver
      [SCSI] mptbase: mpt_interrupt should return IRQ_NONE
      [SCSI] mptsas: make two functions static
      [SCSI] sg.c: Fix bad error handling in
      [SCSI] 53c700: fix breakage caused by the autosense update
      [SCSI] iscsi: add async notification of session events
      [SCSI] iscsi: pass target nr to session creation
      [SCSI] iscsi: break up session creation into two stages
      [SCSI] iscsi: rm channel usage from iscsi
      [SCSI] iscsi: fix session refcouting
      [SCSI] iscsi: convert iscsi_tcp to new set/get param fns
      [SCSI] iscsi: convert iser to new set/get param fns
      [SCSI] iscsi: fixup set/get param functions
      [SCSI] iscsi: add target discvery event to transport class
      [SCSI] st: remove unused st_buffer.in_use
      [SCSI] atp870u: reduce huge stack usage
      ...

commit 51bece910d2b0aca64cd3dee9fa2a8aa7feeadd9
Merge: d8cb7c1... 63104ee...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 21:26:12 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild:
      kbuild: introduce utsrelease.h
      kbuild: explicit turn off gcc stack-protector

commit d8cb7c1ded6e5a80a7335716dde60784a0d51c1d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 3 17:32:22 2006 -0700

    [PATCH] revert "kthread: convert stop_machine into a kthread"
    
    Jiri reports that the stop_machin kthread conversion caused his machine to
    hang when suspending.  Hyperthreading is apparently involved.
    
    I don't see why that would be and I can't reproduce it.  Revert to the 2.6.17
    code.
    
    Cc: "Serge E. Hallyn" <serue@us.ibm.com>
    Cc: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38c54ee8d5338f49aca986081ea41a987c15cf9d
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 17:32:21 2006 -0700

    [PATCH] zfcp: fix incorrect usage of fsf_req_list_lock
    
      =================================
      [ INFO: inconsistent lock state ]
      ---------------------------------
      inconsistent {in-hardirq-W} -> {hardirq-on-W} usage.
      swapper/0 [HC0[0]:SC1[1]:HE1:SE0] takes:
       (&adapter->fsf_req_list_lock){++..}, at: [<0000000000274486>] zfcp_qdio_reqid_check+0x46/0x178
      {in-hardirq-W} state was registered at:
        [<000000000005fb0c>] __lock_acquire+0xad8/0xed0
        [<00000000000604ae>] lock_acquire+0x9a/0xc8
        [<000000000035a326>] _spin_lock+0x4e/0x68
        [<0000000000274486>] zfcp_qdio_reqid_check+0x46/0x178
        [<000000000027469e>] zfcp_qdio_response_handler+0xe6/0x430
        [<0000000000219dd4>] tiqdio_thinint_handler+0xd20/0x213c
        [<000000000020229a>] do_adapter_IO+0xb2/0xc0
        [<0000000000206f32>] do_IRQ+0x136/0x16c
        [<0000000000020462>] io_no_vtime+0x16/0x1c
        [<0000000000019432>] cpu_idle+0x222/0x250
      irq event stamp: 129220
      hardirqs last  enabled at (129220): [<00000000000411e6>] tasklet_hi_action+0x5a/0x19c
      hardirqs last disabled at (129219): [<00000000000411c0>] tasklet_hi_action+0x34/0x19c
      softirqs last  enabled at (129212): [<0000000000040b62>] __do_softirq+0x13a/0x180
      softirqs last disabled at (129217): [<000000000001fd58>] do_softirq+0xec/0xf0
    
      other info that might help us debug this:
      no locks held by swapper/0.
    
      stack backtrace:
      00000000012bb670 0000000000000002 0000000000000000 00000000012bb780
             00000000012bb6e8 0000000000399122 0000000000399122 0000000000016b0a
             0000000000000000 0000000000000000 0000000000000000 00000000004660e8
             0000000000000000 000000000000000d 00000000012bb6e0 00000000012bb758
             0000000000368b90 0000000000016b0a 00000000012bb6e0 00000000012bb730
      Call Trace:
      ([<0000000000016a26>] show_trace+0x76/0xdc)
       [<0000000000016b2c>] show_stack+0xa0/0xd0
       [<0000000000016b8a>] dump_stack+0x2e/0x3c
       [<000000000005e3da>] print_usage_bug+0x27e/0x290
       [<000000000005ea9c>] mark_lock+0x6b0/0x6c0
       [<000000000005f33e>] __lock_acquire+0x30a/0xed0
       [<00000000000604ae>] lock_acquire+0x9a/0xc8
       [<000000000035a326>] _spin_lock+0x4e/0x68
       [<0000000000274486>] zfcp_qdio_reqid_check+0x46/0x178
       [<000000000027469e>] zfcp_qdio_response_handler+0xe6/0x430
       [<0000000000217bd2>] tiqdio_tl+0xd02/0x2120
       [<000000000004123a>] tasklet_hi_action+0xae/0x19c
       [<0000000000040ae4>] __do_softirq+0xbc/0x180
       [<000000000001fd58>] do_softirq+0xec/0xf0
       [<0000000000040c38>] irq_exit+0x90/0xa8
       [<0000000000206f40>] do_IRQ+0x144/0x16c
       [<0000000000020462>] io_no_vtime+0x16/0x1c
       [<0000000000019432>] cpu_idle+0x222/0x250
      ([<0000000000019416>] cpu_idle+0x206/0x250)
       [<000000000001405a>] rest_init+0x5a/0x68
       [<0000000000536998>] start_kernel+0x39c/0x3dc
       [<0000000000013046>] _stext+0x46/0x1000
    
    Fix incorrect usage of fsf_req_list_lock. It's used in tasklet context
    (irqs on) as well as in irq context. Therefore use the spin_lock_irqsave
    variant to avoid deadlocks.
    
    Acked-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f09c548e185b63a3567498b96783f897b5f0399
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 17:32:20 2006 -0700

    [PATCH] zfcp: fix incorrect usage of erp_lock
    
      =================================
      [ INFO: inconsistent lock state ]
      ---------------------------------
      inconsistent {hardirq-on-W} -> {in-hardirq-W} usage.
      swapper/0 [HC1[1]:SC0[0]:HE0:SE1] takes:
       (&adapter->erp_lock){+-..}, at: [<000000000026c7f8>] zfcp_erp_async_handler+0x3c/0x70
      {hardirq-on-W} state was registered at:
        [<000000000005f33e>] __lock_acquire+0x30a/0xed0
        [<00000000000604ae>] lock_acquire+0x9a/0xc8
        [<000000000035a7ae>] _write_lock+0x4e/0x68
        [<000000000026d822>] zfcp_erp_adapter_strategy_generic+0x286/0xd94
        [<000000000026fd72>] zfcp_erp_strategy_do_action+0x91e/0x1a94
        [<0000000000271a3a>] zfcp_erp_thread+0x21a/0x1568
        [<0000000000019096>] kernel_thread_starter+0x6/0xc
        [<0000000000019090>] kernel_thread_starter+0x0/0xc
      irq event stamp: 12078
      hardirqs last  enabled at (12077): [<0000000000019416>] cpu_idle+0x206/0x250
      hardirqs last disabled at (12078): [<0000000000020458>] io_no_vtime+0xc/0x1c
      softirqs last  enabled at (12072): [<0000000000040b62>] __do_softirq+0x13a/0x180
      softirqs last disabled at (12059): [<000000000001fd58>] do_softirq+0xec/0xf0
    
      other info that might help us debug this:
      no locks held by swapper/0.
    
      stack backtrace:
      00000000012bb648 0000000000000002 0000000000000000 00000000012bb758
             00000000012bb6c0 0000000000399122 0000000000399122 0000000000016b0a
             0000000000000000 0000000000000001 0000000000000000 00000000004660e8
             0000000000000000 000000000000000d 00000000012bb6b8 00000000012bb730
             0000000000368b90 0000000000016b0a 00000000012bb6b8 00000000012bb708
      Call Trace:
      ([<0000000000016a26>] show_trace+0x76/0xdc)
       [<0000000000016b2c>] show_stack+0xa0/0xd0
       [<0000000000016b8a>] dump_stack+0x2e/0x3c
       [<000000000005e3da>] print_usage_bug+0x27e/0x290
       [<000000000005e934>] mark_lock+0x548/0x6c0
       [<000000000005fb0c>] __lock_acquire+0xad8/0xed0
       [<00000000000604ae>] lock_acquire+0x9a/0xc8
       [<000000000035a662>] _write_lock_irqsave+0x62/0x80
       [<000000000026c7f8>] zfcp_erp_async_handler+0x3c/0x70
       [<0000000000279178>] zfcp_fsf_req_dispatch+0xd8/0x1fa8
       [<000000000027e538>] zfcp_fsf_req_complete+0x104/0xe4c
       [<0000000000274534>] zfcp_qdio_reqid_check+0xf4/0x178
       [<000000000027469e>] zfcp_qdio_response_handler+0xe6/0x430
       [<0000000000219dd4>] tiqdio_thinint_handler+0xd20/0x213c
       [<000000000020229a>] do_adapter_IO+0xb2/0xc0
       [<0000000000206f32>] do_IRQ+0x136/0x16c
       [<0000000000020462>] io_no_vtime+0x16/0x1c
       [<0000000000019432>] cpu_idle+0x222/0x250
      ([<0000000000019416>] cpu_idle+0x206/0x250)
       [<000000000001405a>] rest_init+0x5a/0x68
       [<0000000000536998>] start_kernel+0x39c/0x3dc
       [<0000000000013046>] _stext+0x46/0x1000
    
    Fix incorrect usage of erp_lock. Using the write_lock() variant is wrong,
    since this might lead to deadlocks.
    
    Acked-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6a7c79a52939513ef043d6eb9fcf12a056c010e
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Mon Jul 3 17:32:20 2006 -0700

    [PATCH] Fix modular cpuid.ko
    
    With recent change, if CONFIG_HOTPLUG_CPU is disabled,
    register_cpu_notifier() is not exported.  And it breaked moduler msr/cpuid
    (msr.c was already fixed).
    
    We need to use register_hotcpu_notifier() now in module, instead of
    register_cpu_notifier().
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 300b93974ff64f1bef1ac8294547c573954f0300
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:37:55 2006 +0200

    [Bluetooth] Add RFCOMM role switch support
    
    This patch adds the support for RFCOMM role switching before the
    connection is fully established.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 7c2660b00fae0575dd4ce5c7b6bf30762b632045
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:51 2006 +0200

    [Bluetooth] Allow disabling of credit based flow control
    
    This patch adds the module parameter disable_cfc which can be used to
    disable the credit based flow control. The credit based flow control
    was introduced with the Bluetooth 1.1 specification and devices can
    negotiate its support, but for testing purpose it is helpful to allow
    disabling of it.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 0139418c943c3389cf75afc4f4d2b2fa52bbf7c9
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:46 2006 +0200

    [Bluetooth] Small cleanup of the L2CAP source code
    
    This patch is a small cleanup of the L2CAP source code. It makes some
    coding style changes and moves some functions around to avoid forward
    declarations.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit a91f2e396f5b32b21d842b4757bc8de5e88eac66
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:41 2006 +0200

    [Bluetooth] Use real devices for host controllers
    
    This patch converts the Bluetooth class devices into real devices. The
    Bluetooth class is kept and the driver core provides the appropriate
    symlinks for backward compatibility.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 27d35284258c596900e0e41c46932ec4abe6a7b1
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:37 2006 +0200

    [Bluetooth] Add platform device for virtual and serial devices
    
    This patch adds a generic Bluetooth platform device that can be used
    as parent device by virtual and serial devices.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 04837f6447c7f3ef114cda1ad761822dedbff8cf
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:33 2006 +0200

    [Bluetooth] Add automatic sniff mode support
    
    This patch introduces the automatic sniff mode feature. This allows
    the host to switch idle connections into sniff mode to safe power.
    
    Signed-off-by: Ulisses Furquim <ulissesf@gmail.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit da1f519851d1c66331363253f364bdb5d924ea96
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:29 2006 +0200

    [Bluetooth] Correct SCO buffer size on request
    
    This patch introduces a quirk that allows the drivers to tell the host
    to correct the SCO buffer size values.
    
    Signed-off-by: Olivier Galibert <galibert@pobox.com>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit dcdcf63ef12dc3fbaa17a6d04f16ada8e63bb4d0
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:24 2006 +0200

    [Bluetooth] Add suspend/resume support to the HCI USB driver
    
    This patch implements the suspend/resume methods for the HCI USB
    driver by killing all outstanding URBs on suspend, and re-issuing
    them on resume.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 2b86ad21deec4c47a1f0089298f12e4038c2aa68
Author: Marcel Holtmann <marcel@holtmann.org>
Date:   Mon Jul 3 10:02:18 2006 +0200

    [Bluetooth] Use raw mode for the Frontline sniffer device
    
    The Frontline sniffer device looks like a normal H:2 Bluetooth device,
    but it is not and so mark it as raw mode device.
    
    Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

commit 69ee20a58fa0cad6520c2a9538100a87ef0abd7d
Author: Andrey Savochkin <saw@swsoft.com>
Date:   Mon Jul 3 19:50:14 2006 -0700

    [BRIDGE]: br_dump_ifinfo index fix
    
    Fix for inability of br_dump_ifinfo to handle non-zero start index:
    loop index never increases when entered with non-zero start.
    Spotted by Kirill Korotaev.
    
    Signed-off-by: Andrey Savochkin <saw@swsoft.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3c6b377321678c649f9b3c66da0149975c614102
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 3 19:48:25 2006 -0700

    [ATM]: add+use poison defines
    
    ATM: add and use POISON define values.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4bdbf6c033ba05bff65f69989baccd7103c5a530
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 3 19:47:27 2006 -0700

    [NET]: add+use poison defines
    
    Add and use poison defines in net/.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6508871eddbbd3e62799f3b6182a6a4fd3ef31d5
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 3 19:45:31 2006 -0700

    [IOAT]: fix kernel-doc in source files
    
    Fix kernel-doc warnings in drivers/dma/:
    - use correct function & parameter names
    - add descriptions where omitted
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fe4ada2d6f0b746246e9b5bf0f4f2e4d3a07d26e
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 3 19:44:51 2006 -0700

    [IOAT]: fix header file kernel-doc
    
    Fix kernel-doc problems in include/linux/dmaengine.h:
    - add some fields/parameters
    - expand some descriptions
    - fix typos
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b0026624f1aa3e38a887cb483de61f104d600b97
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 3 19:42:14 2006 -0700

    [TG3]: Add ipv6 TSO feature
    
    Enable ipv6 TSO feature on chips that support it.
    
    Update version to 3.61.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6703931c546e6dec0431776fa616d5accd3e7162
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jul 3 19:41:11 2006 -0700

    [IPV6]: Fix ipv6 GSO payload length
    
    Fix ipv6 GSO payload length calculation.
    
    The ipv6 payload length excludes the ipv6 base header length and so
    must be subtracted.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 863fae666acb87b150f4634e6e79476ebe274f43
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Mon Jul 3 19:39:36 2006 -0700

    [TIPC] Fixed sk_buff panic caused by tipc_link_bundle_buf (REVISED)
    
    The recent change to direct inspection of bundle buffer tailroom did not
    account for the possiblity of unrequested tailroom added by skb_alloc(),
    thereby allowing a bundle to be created that exceeds the current link MTU.
    An additional check now ensures that bundling works correctly no matter
    if the bundle buffer is smaller, larger, or equal to the link MTU.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bbcf467dab42ea3c85f368df346c82af2fbba665
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Jul 3 19:38:35 2006 -0700

    [NET]: Verify gso_type too in gso_segment
    
    We don't want nasty Xen guests to pass a TCPv6 packet in with gso_type set
    to TCPv4 or even UDP (or a packet that's both TCP and UDP).
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6ce1669fdb6b0a0faf9b2e2ba08048b520c57841
Author: Horms <horms@verge.net.au>
Date:   Mon Jul 3 19:35:40 2006 -0700

    [IPVS]: Add sysctl documentation
    
    * Derived from http://www.linuxvirtualserver.org/docs/sysctl.html, v1.4
      maintained by Wensong Zhang
    
    * Adjusted preample to match ip-sysctl.txt
    
    * Sorted options into alphabetical order
    
    * Added expire_quiescent_template
    
    * Removed timeout_* which are no longer present
    
    * Incoporated doc/debug-levels.txt from IPVS source tree into
      description of ipvs_debug
    
    * Minor spelling fixes
    
    * Further editing more than welcome
    
    Signed-Off-By: Horms <horms@verge.net.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d85838c55d836c33077344fab424f200f2827d84
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 3 19:32:23 2006 -0700

    [ROSE]: Try all routes when establishing a ROSE connections.
    
    From Jean-Paul F6FBB
    
    ROSE will only try to establish a route using the first route in its
    routing table.  Fix to iterate through all additional routes if a
    connection attempt has failed.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 18601a7d30c8340af4d786793ee52828471d2630
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 3 19:31:14 2006 -0700

    [NETROM]: Use socket helpers instead of direct fiddling with struct sock
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 006f68b84fe19fc5015a8cf838a10d75f91f0218
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 3 19:30:18 2006 -0700

    [AX.25]: Reference counting for AX.25 routes.
    
    In the past routes could be freed even though the were possibly in use ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8dc22d2b642f8a6f14ef8878777a05311e5d1d7e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jul 3 19:29:15 2006 -0700

    [ROSE]: Fix dereference of skb pointer after free.
    
    If rose_route_frame return success we'll dereference a stale pointer.
    Likely this is only going to result in bad statistics for the ROSE
    interface.
    
    This fixes coverity 946.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 518d1c9679f644811adaa22d853f43a83fbdae84
Author: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
Date:   Mon Jul 3 19:28:13 2006 -0700

    [IOAT]: Fix a warning in ioatdma
    
    drivers/dma/ioatdma.c: In function 'ioat_init_module':
    drivers/dma/ioatdma.c:830: warning: control reaches end of non-void function
    
    Signed-off-by: Benoit Boissinot <benoit.boissinot@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 56e0873b7b146564a0c36e225624f5a9b2d63791
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jul 3 19:27:20 2006 -0700

    [IOAT]: drivers/dma/iovlock.c: make num_pages_spanned() static
    
    This patch makes the needlessly global num_pages_spanned() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 882d02d6fb040a246b005305ffeb790bb5ce80ad
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 3 19:26:15 2006 -0700

    [AF_UNIX]: datagram getpeersec fix
    
    The unix_get_peersec_dgram() stub should have been inlined so that it
    disappears.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c1b4df5d2a5b1a9c037fe3b2e42804cf1267c750
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 3 19:24:19 2006 -0700

    [IOAT]: fix sparse ulong warning
    
    Fix sparse warning:
    drivers/dma/ioatdma.c:444:32: warning: constant 0xFFFFFFFFFFFFFFC0 is so big it is unsigned long
    
    Also needs a MAINTAINERS entry.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 912b2539e1e062cec73e2e61448e507f7719bd08
Merge: 70b97a7... 39ab9c2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jul 3 15:28:34 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc:
      powerpc: add defconfig for Freescale MPC8349E-mITX board
      powerpc: Add base support for the Freescale MPC8349E-mITX eval board
      Documentation: correct values in MPC8548E SEC example node
      [POWERPC] Actually copy over i8259.c to arch/ppc/syslib this time
      [POWERPC] Add new interrupt mapping core and change platforms to use it
      [POWERPC] Copy i8259 code back to arch/ppc
      [POWERPC] New device-tree interrupt parsing code
      [POWERPC] Use the genirq framework
      [PATCH] genirq: Allow fasteoi handler to retrigger disabled interrupts
      [POWERPC] Update the SWIM3 (powermac) floppy driver
      [POWERPC] Fix error handling in detecting legacy serial ports
      [POWERPC] Fix booting on Momentum "Apache" board (a Maple derivative)
      [POWERPC] Fix various offb and BootX-related issues
      [POWERPC] Add a default config for 32-bit CHRP machines
      [POWERPC] fix implicit declaration on cell.
      [POWERPC] change get_property to return void *

commit 70b97a7f0b19cf1f2619deb5cc41e8b78c591aa7
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:42 2006 -0700

    [PATCH] sched: cleanup, convert sched.c-internal typedefs to struct
    
    convert:
    
     - runqueue_t to 'struct rq'
     - prio_array_t to 'struct prio_array'
     - migration_req_t to 'struct migration_req'
    
    I was the one who added these but they are both against the kernel coding
    style and also were used inconsistently at places.  So just get rid of them at
    once, now that we are flushing the scheduler patch-queue anyway.
    
    Conversion was mostly scripted, the result was reviewed and all secondary
    whitespace and style impact (if any) was fixed up by hand.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36c8b586896f60cb91a4fd526233190b34316baf
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:41 2006 -0700

    [PATCH] sched: cleanup, remove task_t, convert to struct task_struct
    
    cleanup: remove task_t and convert all the uses to struct task_struct. I
    introduced it for the scheduler anno and it was a mistake.
    
    Conversion was mostly scripted, the result was reviewed and all
    secondary whitespace and style impact (if any) was fixed up by hand.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48f24c4da1ee7f3f22289cb85e8b8a73e4df4db5
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:40 2006 -0700

    [PATCH] sched: clean up fallout of recent changes
    
    Clean up some of the impact of recent (and not so recent) scheduler
    changes:
    
     - turning macros into nice inline functions
     - sanitizing and unifying variable definitions
     - whitespace, style consistency, 80-lines, comment correctness, spelling
       and curly braces police
    
    Due to the macro hell and variable placement simplifications there's even 26
    bytes of .text saved:
    
       text    data     bss     dec     hex filename
      25510    4153     192   29855    749f sched.o.before
      25484    4153     192   29829    7485 sched.o.after
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 829035fd709119d9def124a6d40b94d317573e6f
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Jul 3 00:25:40 2006 -0700

    [PATCH] lockdep: irqtrace subsystem, move account_system_vtime() calls into kernel/softirq.c
    
    At the moment, powerpc and s390 have their own versions of do_softirq which
    include local_bh_disable() and __local_bh_enable() calls.  They end up
    calling __do_softirq (in kernel/softirq.c) which also does
    local_bh_disable/enable.
    
    Apparently the two levels of disable/enable trigger a warning from some
    validation code that Ingo is working on, and he would like to see the outer
    level removed.  But to do that, we have to move the account_system_vtime
    calls that are currently in the arch do_softirq() implementations for
    powerpc and s390 into the generic __do_softirq() (this is a no-op for other
    archs because account_system_vtime is defined to be an empty inline
    function on all other archs).  This patch does that.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8688cfcebf09b84385b5e2c461ae08fcde8a5d18
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:39 2006 -0700

    [PATCH] lockdep: annotate forcedeth.c disable_irq()
    
    nv_do_nic_poll() is called from timer softirqs, which has interrupts enabled,
    but np->lock might also be taken by some other interrupt context.
    
    The driver does disable_irq() to get around this problem, so annotate the
    disable_irq()/enable_irq() calls for lockdep.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Ayaz Abdulla <aabdulla@nvidia.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 479ceddd7baf3b387665c4d69a7398918b201ad0
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 3 00:25:37 2006 -0700

    [PATCH] forcedeth: typecast cleanup
    
    Someone went nuts in there.
    
    Cc: Ayaz Abdulla <aabdulla@nvidia.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd11acdd8542cb0c0fa7cd86590b1ba79d7e263a
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Mon Jul 3 00:25:36 2006 -0700

    [PATCH] lockdep: annotate hostap netdev ->xmit_lock
    
    On Fri, 2006-06-30 at 15:45 -0700, Miles Lane wrote:
    > Okay, I rebuilt my kernel with your combo patch applied.
    > Then, I inserted my US Robotics USR2210 PCMCIA wifi card,
    > ran "pccardutil eject", popped out the card and then inserted
    > a Compaq iPaq wifi card.  This triggered the following.
    >
    > [ INFO: possible circular locking dependency detected ]
    > -------------------------------------------------------
    > syslogd/1886 is trying to acquire lock:
    >  (&dev->queue_lock){-+..}, at: [<c11a50b5>] dev_queue_xmit+0x120/0x24b
    >
    > but task is already holding lock:
    >  (&dev->_xmit_lock){-+..}, at: [<c11a5118>] dev_queue_xmit+0x183/0x24b
    >
    > which lock already depends on the new lock.
    
    ok this appears to be hostap playing games... it has 2 network devices
    for one piece of hardware and one calls the other via the networking
    layer; there is thankfully a natural ordering between the two, so just
    making the slave one a separate type ought to make this work.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "John W. Linville" <linville@tuxdriver.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5b5bb9a053a973c23b867738c074acb3e80c0a0
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:35 2006 -0700

    [PATCH] lockdep: annotate sk_locks
    
    Teach sk_lock semantics to the lock validator.  In the softirq path the
    slock has mutex_trylock()+mutex_unlock() semantics, in the process context
    sock_lock() case it has mutex_lock()/mutex_unlock() semantics.
    
    Thus we treat sock_owned_by_user() flagged areas as an exclusion area too,
    not just those areas covered by a held sk_lock.slock.
    
    Effect on non-lockdep kernels: minimal, sk_lock_sock_init() has been turned
    into an inline function.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0afffc723c8041a005134099847ac2a2fd0316a0
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:35 2006 -0700

    [PATCH] lockdep: annotate on-stack completions, mmc
    
    lockdep needs to have the waitqueue lock initialized for on-stack
    waitqueues implicitly initialized by DECLARE_COMPLETION().
    
    Annotate mmc_wait_for_req()'s on-stack completion accordingly.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5dd8d1e9eb8b51041505966fe96d081ecbe86efe
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Jul 3 00:25:33 2006 -0700

    [PATCH] lockdep: annotate vlan net device as being a special class
    
    vlan network devices have devices nesting below it, and are a special
    "super class" of normal network devices; split their locks off into a
    separate class since they always nest.
    
    [deweerdt@free.fr: fix possible null-pointer deref]
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Frederik Deweerdt <frederik.deweerdt@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 663d440eaa496db903cc58be04b9b602ba45e43b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:33 2006 -0700

    [PATCH] lockdep: annotate blkdev nesting
    
    Teach special (recursive) locking code to the lock validator.
    
    Effects on non-lockdep kernels:
    
    - the introduction of the following function variants:
    
      extern struct block_device *open_partition_by_devnum(dev_t, unsigned);
    
      extern int blkdev_put_partition(struct block_device *);
    
      static int
      blkdev_get_whole(struct block_device *bdev, mode_t mode, unsigned flags);
    
     which on non-lockdep are the same as open_by_devnum(), blkdev_put()
     and blkdev_get().
    
    - a subclass parameter to do_open(). [unused on non-lockdep]
    
    - a subclass parameter to __blkdev_put(), which is a new internal
      function for the main blkdev_put*() functions. [parameter unused
      on non-lockdep kernels, except for two sanity check WARN_ON()s]
    
    these functions carry no semantical difference - they only express
    object dependencies towards the lockdep subsystem.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b2d5493e10051694ae3a57ea6a153e3cb4d4488
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:28 2006 -0700

    [PATCH] lockdep: annotate SLAB code
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Fix initialize-locks-via-memcpy assumptions.
    
    Effects on non-lockdep kernels: the subclass nesting parameter is passed into
    cache_free_alien() and __cache_free(), and turns one internal
    kmem_cache_free() call into an open-coded __cache_free() call.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 897c6ff9568bcb102ffc6b465ebe1def0cba829d
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Mon Jul 3 00:25:28 2006 -0700

    [PATCH] lockdep: annotate sb ->s_umount
    
    The s_umount rwsem needs to be classified as per-superblock since it's
    perfectly legit to keep multiple of those recursively in the VFS locking
    rules.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf51624999e56c88154b5f7d451a265db6aabff7
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:27 2006 -0700

    [PATCH] lockdep: annotate ->s_lock
    
    Teach special (per-filesystem) locking code to the lock validator.
    
    Minimal effect on non-lockdep kernels: one extra parameter to alloc_super().
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91ebe2a9320db7195d1e25152b5d158fc66dc133
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:25:26 2006 -0700

    [PATCH] lockdep: annotate qeth driver
    
    Annotate the qeth driver which uses a private skb-queue-head that is safely
    used in hardirq context too.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60be6b9a41cb0da0df7a9f11486da56baebf04cd
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:26 2006 -0700

    [PATCH] lockdep: annotate on-stack completions
    
    lockdep needs to have the waitqueue lock initialized for on-stack waitqueues
    implicitly initialized by DECLARE_COMPLETION().  Annotate on-stack completions
    accordingly.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 366c7f554e888e51b8395f9b07b273fe775c7ff3
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:25 2006 -0700

    [PATCH] lockdep: annotate enable_in_hardirq()
    
    Make use of local_irq_enable_in_hardirq() API to annotate places that enable
    hardirqs in hardirq context.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a9da4bd8eb30fb3f36e841c2cc72e426a17bbe2
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:24 2006 -0700

    [PATCH] lockdep: annotate 3c59x.c disable_irq()
    
    3c59x.c's vortex_timer() function knows that vp->lock can only be used by an
    irq context that it disabled - and can hence take the vp->lock without
    disabling hardirqs.  Teach lockdep about this.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e745165c6d235c03e9fa0e57984ca6fd3d3b2c50
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:23 2006 -0700

    [PATCH] lockdep: annotate 8390.c disable_irq()
    
    8390.c knows that ei_local->page_lock can only be used by an irq context that
    it disabled - and can hence take the ->page_lock without disabling hardirqs.
    Teach lockdep about this.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 933a2efc59513551dcfa7b814752dc581bd3c60b
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Jul 3 00:25:22 2006 -0700

    [PATCH] lockdep: annotate sound/core/seq/seq_device.c
    
    The ops structure has complex locking rules, where not all ops are equal, some
    are subordinate on others for some complex sound cards.  This requires for
    lockdep checking that each individual reg_mutex is considered in separation
    for its locking rules.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Takashi Iwai <tiwai@suse.de>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8371f0481fd1ad2701081d37815b0bb5d236b92
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:21 2006 -0700

    [PATCH] lockdep: annotate sound/core/seq/seq_ports.c
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Takashi Iwai <tiwai@suse.de>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e7795ef6b5fd117b22b87ea7d501de2526a25f7
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Jul 3 00:25:21 2006 -0700

    [PATCH] lockdep: annotate USBFS
    
    In usbfs's fs_remove_file() function, the aim is to remove a file or
    directory from usbfs. This is done by first taking the i_mutex of the
    parent directory of this file/dir via
      mutex_lock(&parent->d_inode->i_mutex);
    and then to call either usbfs_rmdir() for a directory or usbfs_unlink()
    for a file. Both these functions then take the i_mutex for the
    to-be-removed object themselves:
      mutex_lock(&inode->i_mutex);
    
    This is a classical parent->child locking order relationship that the VFS uses
    all over the place; the VFS locking rule is "you need to take the parent
    first".  This patch annotates the usbfs code to make this explicit and thus
    informs the lockdep code that those two locks indeed have this relationship.
    
    The rules for unlink that we already use in the VFS for unlink are to use
    I_MUTEX_PARENT for the parent directory, and a normal mutex for the file
    itself; this patch follows that convention.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c81a4197de38411fe3e27f8593fff73a5d6b868
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Jul 3 00:25:20 2006 -0700

    [PATCH] lockdep: annotate the quota code
    
    The quota code plays interesting games with the lock ordering; to quote Jan:
    
    | i_mutex of inode containing quota file is acquired after all other
    | quota locks. i_mutex of all other inodes is acquired before quota
    | locks. Quota code makes sure (by resetting inode operations and
    | setting special flag on inode) that noone tries to enter quota code
    | while holding i_mutex on a quota file...
    
    The good news is that all of this special case i_mutex grabbing happens in the
    (per filesystem) low level quota write function.  For this special case we
    need a new I_MUTEX_* nesting level, since this just entirely outside any of
    the regular VFS locking rules for i_mutex.  I trust Jan on his blue eyes that
    this is not ever going to deadlock; and based on that the patch below is what
    it takes to inform lockdep of these very interesting new locking rules.
    
    The new locking rule for the I_MUTEX_QUOTA nesting level is that this is the
    deepest possible level of nesting for i_mutex, and that this only should be
    used in quota write (and possibly read) function of filesystems.  This makes
    the lock ordering of the I_MUTEX_* levels:
    
    I_MUTEX_PARENT -> I_MUTEX_CHILD -> I_MUTEX_NORMAL -> I_MUTEX_QUOTA
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Jan Kara <jack@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59345374742ee6673c2d04b0fa8c888e881b7209
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:18 2006 -0700

    [PATCH] lockdep: annotate NTFS locking rules
    
    NTFS uses lots of type-opaque objects which acquire their true identity
    runtime - so the lock validator needs to be helped in a couple of places to
    figure out object types.
    
    Many thanks to Anton Altaparmakov for giving lots of explanations about NTFS
    locking rules.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c6573c2904231279de0584787d6214f19a128d0b
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Mon Jul 3 00:25:16 2006 -0700

    [PATCH] lockdep: annotate sunrpc code
    
    Add i_mutex ordering annotations to the sunrpc rpc_pipe code.  This code has 3
    levels of i_mutex hierarchy in some cases: parent dir, client dir and file
    inside client dir; the i_mutex ordering is I_MUTEX_PARENT -> I_MUTEX_CHILD ->
    I_MUTEX_NORMAL
    
    This patch applies this ordering annotation to the various functions.  This is
    in line with the VFS expected ordering where it is always OK to lock a child
    after locking a parent; the sunrpc code is very diligent in doing this
    correctly.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad33945175bed649ca5fe0881269db005bbb449a
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:15 2006 -0700

    [PATCH] lockdep: annotate ->mmap_sem
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d378834840907326ac9d448056d957d13cc3718f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:14 2006 -0700

    [PATCH] lockdep: annotate ieee1394 skb-queue-head locking
    
    ieee1394 reuses the skb infrastructure of the networking code, and uses two
    skb-head queues: ->pending_packet_queue and hpsbpkt_queue.  The latter is used
    in the usual fashion: processed from a kernel thread.  The other one,
    ->pending_packet_queue is also processed from hardirq context (f.e.  in
    hpsb_bus_reset()), which is not what the networking code usually does (which
    completes from softirq or process context).  This locking assymetry can be
    totally correct if done carefully, but it can also be dangerous if networking
    helper functions are reused, which could assume traditional networking use.
    
    It would probably be more robust to push this completion into a workqueue -
    but technically the code can be 100% correct, and lockdep has to be taught
    about it.  The solution is to split the ->pending_packet_queue skb-head->lock
    class from the networking lock-class by using a private lock-validator key.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@debian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c63661848581a9842dfc72d9a400285dd284fc47
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:13 2006 -0700

    [PATCH] lockdep: annotate bh_lock_sock()
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a09785a2414afb261d9f719d544742af4300df22
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:12 2006 -0700

    [PATCH] lockdep: annotate af_unix locking
    
    Teach special (recursive) locking code to the lock validator.  Also splits
    af_unix's sk_receive_queue.lock class from the other networking skb-queue
    locks.  Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da21f24dd73954c2ed0cd39a698e2c9916c05d71
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:12 2006 -0700

    [PATCH] lockdep: annotate sock_lock_init()
    
    Teach special (multi-initialized, per-address-family) locking code to the lock
    validator.  Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 543655244866b8ec648fea1eb9c32a35ffba5721
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:11 2006 -0700

    [PATCH] lockdep: annotate hrtimer base locks
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcb993712f231a4faea8393513d1276170679107
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:10 2006 -0700

    [PATCH] lockdep: annotate scheduler runqueue locks
    
    Teach per-CPU runqueue locks and recursive locking code to the lock validator.
     Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d730e882a15c38de02b63a063be636b2ff9e9ed1
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:10 2006 -0700

    [PATCH] lockdep: annotate timer base locks
    
    Split the per-CPU timer base locks up into separate lock classes, because they
    are used recursively.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06825ba3553151eea24206bc53d4fc3de49e0ab1
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:09 2006 -0700

    [PATCH] lockdep: annotate skb_queue_head_init
    
    Teach special (multi-initialized) locking code to the lock validator.  Has no
    effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3aceafc1e2596f1c2c4e053126561f00b68e3a1a
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Mon Jul 3 00:25:08 2006 -0700

    [PATCH] lockdep: annotate serio
    
    The PS/2 code has a natural device order and there is a one level recursion in
    this device order in terms of the cmd_mutex; annotate this explicit recursion
    as ok.
    
    Has no effect on non-lockdep kernels.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f20dc5f7c1adf1c4b68b7672d6f2002cb824e636
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:08 2006 -0700

    [PATCH] lockdep: annotate mm
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb4542b98c81e22e08587b747b21986a45360999
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:07 2006 -0700

    [PATCH] lockdep: annotate waitqueues
    
    Create one lock class for all waitqueue locks in the kernel.  Has no effect on
    non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 243c7621aac4ed1aa79524c9a1cecf7c05a28124
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:06 2006 -0700

    [PATCH] lockdep: annotate genirq
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b8f319fc7f4ab59f567d6a401a62659b3d37007
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:05 2006 -0700

    [PATCH] lockdep: annotate futex
    
    Teach special (recursive) locking code to the lock validator.  Introduces
    double_lock_hb() to unify double- hash-bucket-lock taking.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2eace23e924bd3f05aedea4fc505eb5508d2d93
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:05 2006 -0700

    [PATCH] lockdep: annotate i_mutex
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a90b9c05df3c1e58eaedc28795d0f5abd896c098
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:04 2006 -0700

    [PATCH] lockdep: annotate dcache
    
    Teach special (recursive) locking code to the lock validator.  Has no effect
    on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13e83599d282ddfd544600df9db5ab343ac4662f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:03 2006 -0700

    [PATCH] lockdep: annotate serial
    
    Teach special (dual-initialized) locking code to the lock validator.  Has no
    effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d8aa905b429700e8b6b6b301a8ac2d4a24f2c19b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:02 2006 -0700

    [PATCH] lockdep: annotate direct io
    
    Teach special (rwsem-in-irq) locking code to the lock validator.  Has no
    effect on non-lockdep kernels.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b105ff9cccea5533ad518bb37dc9b43a322f7b1
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:02 2006 -0700

    [PATCH] lockdep: enable on s390
    
    Enable LOCKDEP_SUPPORT on s390.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e9505279a8a2303d8feef4e464e6f48ea644f03
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:01 2006 -0700

    [PATCH] lockdep: enable on x86_64
    
    Enable LOCKDEP_SUPPORT on x86_64.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbbf437a8de3192739334eb8cae7c9acee38590f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:25:00 2006 -0700

    [PATCH] lockdep: enable on i386
    
    Enable LOCKDEP_SUPPORT on i386.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e9ccae6ee2bb19b7752b7d412e1bbbaf28e7fe1
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:25:00 2006 -0700

    [PATCH] lockdep: s390 turn validator off in machine-check handler
    
    Machine checks on s390 are always enabled (except in the machine check handler
    itself).  Therefore use lockdep_off()/on() in the machine check handler to
    avoid deadlocks in the lock validator.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6205120044bb75ca06019491d1aa0e727fdd35be
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:59 2006 -0700

    [PATCH] lockdep: fix RT_HASH_LOCK_SZ
    
    On lockdep we have a quite big spinlock_t, so keep the size down.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0f1ccfd8d37457a6d8a9e01acebeefcdfcc306e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:58 2006 -0700

    [PATCH] lockdep: do not recurse in printk
    
    Make printk()-ing from within the lock validation code safer by using the
    lockdep-recursion counter.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3047e99ede366298c6233d1870d12a520d4d92f3
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:57 2006 -0700

    [PATCH] lockdep: x86 smp alternatives workaround
    
    Disable SMP alternatives fixups (the patching in of NOPs on 1-CPU systems) if
    the lock validator is enabled: there is a binutils section handling bug that
    causes corrupted instructions when UP instructions are patched in.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2148270cd2ebe0d05e4289b7c77b1435c45481bf
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:57 2006 -0700

    [PATCH] lockdep: x86_64 early init
    
    x86_64 uses spinlocks very early - earlier than start_kernel().  So call
    lockdep_init() from the arch setup code.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c64580d522542e50f2ba689316128b7fbae497b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:56 2006 -0700

    [PATCH] lockdep: print all lock classes on SysRQ-D
    
    Print all lock-classes on SysRq-D.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d9f34ad366a7935be3d6e7cca90805e6b7a692d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:55 2006 -0700

    [PATCH] lockdep: kconfig
    
    Offer the following lock validation options:
    
     CONFIG_PROVE_LOCKING
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef5d4707b9065c0cf8a69fa3716893f3b75201ba
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:55 2006 -0700

    [PATCH] lockdep: prove mutex locking correctness
    
    Use the lock validator framework to prove mutex locking correctness.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a25d5debff2daee280e83e09d8c25d67c26a972
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:54 2006 -0700

    [PATCH] lockdep: prove spinlock rwlock locking correctness
    
    Use the lock validator framework to prove spinlock and rwlock locking
    correctness.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ea2176dfa714882e88180b474e4cbcd888b70af
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:53 2006 -0700

    [PATCH] lockdep: prove rwsem locking correctness
    
    Use the lock validator framework to prove rwsem locking correctness.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8f24a3978c5f82419e1c90dc90460731204f46f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:52 2006 -0700

    [PATCH] lockdep: procfs
    
    Lock validator /proc/lockdep and /proc/lockdep_stats support.
    (FIXME: should go into debugfs)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3e97da38e1d69d24195d76f96b912323f5ee30c
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:52 2006 -0700

    [PATCH] lockdep: design docs
    
    Lock validator design documentation.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c9076ec9cd448f43bbda871352a7067f456ee26
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:51 2006 -0700

    [PATCH] lockdep: allow read_lock() recursion of same class
    
    From: Ingo Molnar <mingo@elte.hu>
    
    lockdep so far only allowed read-recursion for the same lock instance.
    This is enough in the overwhelming majority of cases, but a hostap case
    triggered and reported by Miles Lane relies on same-class
    different-instance recursion.  So we relax the restriction on read-lock
    recursion.
    
    (This change does not allow rwsem read-recursion, which is still
    forbidden.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fbb9ce9530fd9b66096d5187fa6a115d16d9746c
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:50 2006 -0700

    [PATCH] lockdep: core
    
    Do 'make oldconfig' and accept all the defaults for new config options -
    reboot into the kernel and if everything goes well it should boot up fine and
    you should have /proc/lockdep and /proc/lockdep_stats files.
    
    Typically if the lock validator finds some problem it will print out
    voluminous debug output that begins with "BUG: ..." and which syslog output
    can be used by kernel developers to figure out the precise locking scenario.
    
    What does the lock validator do?  It "observes" and maps all locking rules as
    they occur dynamically (as triggered by the kernel's natural use of spinlocks,
    rwlocks, mutexes and rwsems).  Whenever the lock validator subsystem detects a
    new locking scenario, it validates this new rule against the existing set of
    rules.  If this new rule is consistent with the existing set of rules then the
    new rule is added transparently and the kernel continues as normal.  If the
    new rule could create a deadlock scenario then this condition is printed out.
    
    When determining validity of locking, all possible "deadlock scenarios" are
    considered: assuming arbitrary number of CPUs, arbitrary irq context and task
    context constellations, running arbitrary combinations of all the existing
    locking scenarios.  In a typical system this means millions of separate
    scenarios.  This is why we call it a "locking correctness" validator - for all
    rules that are observed the lock validator proves it with mathematical
    certainty that a deadlock could not occur (assuming that the lock validator
    implementation itself is correct and its internal data structures are not
    corrupted by some other kernel subsystem).  [see more details and conditionals
    of this statement in include/linux/lockdep.h and
    Documentation/lockdep-design.txt]
    
    Furthermore, this "all possible scenarios" property of the validator also
    enables the finding of complex, highly unlikely multi-CPU multi-context races
    via single single-context rules, increasing the likelyhood of finding bugs
    drastically.  In practical terms: the lock validator already found a bug in
    the upstream kernel that could only occur on systems with 3 or more CPUs, and
    which needed 3 very unlikely code sequences to occur at once on the 3 CPUs.
    That bug was found and reported on a single-CPU system (!).  So in essence a
    race will be found "piecemail-wise", triggering all the necessary components
    for the race, without having to reproduce the race scenario itself!  In its
    short existence the lock validator found and reported many bugs before they
    actually caused a real deadlock.
    
    To further increase the efficiency of the validator, the mapping is not per
    "lock instance", but per "lock-class".  For example, all struct inode objects
    in the kernel have inode->inotify_mutex.  If there are 10,000 inodes cached,
    then there are 10,000 lock objects.  But ->inotify_mutex is a single "lock
    type", and all locking activities that occur against ->inotify_mutex are
    "unified" into this single lock-class.  The advantage of the lock-class
    approach is that all historical ->inotify_mutex uses are mapped into a single
    (and as narrow as possible) set of locking rules - regardless of how many
    different tasks or inode structures it took to build this set of rules.  The
    set of rules persist during the lifetime of the kernel.
    
    To see the rough magnitude of checking that the lock validator does, here's a
    portion of /proc/lockdep_stats, fresh after bootup:
    
     lock-classes:                            694 [max: 2048]
     direct dependencies:                  1598 [max: 8192]
     indirect dependencies:               17896
     all direct dependencies:             16206
     dependency chains:                    1910 [max: 8192]
     in-hardirq chains:                      17
     in-softirq chains:                     105
     in-process chains:                    1065
     stack-trace entries:                 38761 [max: 131072]
     combined max dependencies:         2033928
     hardirq-safe locks:                     24
     hardirq-unsafe locks:                  176
     softirq-safe locks:                     53
     softirq-unsafe locks:                  137
     irq-safe locks:                         59
     irq-unsafe locks:                      176
    
    The lock validator has observed 1598 actual single-thread locking patterns,
    and has validated all possible 2033928 distinct locking scenarios.
    
    More details about the design of the lock validator can be found in
    Documentation/lockdep-design.txt, which can also found at:
    
       http://redhat.com/~mingo/lockdep-patches/lockdep-design.txt
    
    [bunk@stusta.de: cleanups]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cae2ed9aa573415c6e5de9a09b7ff0d74af793bc
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:48 2006 -0700

    [PATCH] lockdep: locking API self tests
    
    Introduce DEBUG_LOCKING_API_SELFTESTS, which uses the generic lock debugging
    code's silent-failure feature to run a matrix of testcases.  There are 210
    testcases currently:
    
      +-----------------------
      | Locking API testsuite:
      +------------------------------+------+------+------+------+------+------+
                                     | spin |wlock |rlock |mutex | wsem | rsem |
      -------------------------------+------+------+------+------+------+------+
                         A-A deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
                     A-B-B-A deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
                 A-B-B-C-C-A deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
                 A-B-C-A-B-C deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
             A-B-B-C-C-D-D-A deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
             A-B-C-D-B-D-D-A deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
             A-B-C-D-B-C-D-A deadlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
                        double unlock:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
                     bad unlock order:  ok  |  ok  |  ok  |  ok  |  ok  |  ok  |
      --------------------------------------+------+------+------+------+------+
                  recursive read-lock:             |  ok  |             |  ok  |
      --------------------------------------+------+------+------+------+------+
                    non-nested unlock:  ok  |  ok  |  ok  |  ok  |
      --------------------------------------+------+------+------+
         hard-irqs-on + irq-safe-A/12:  ok  |  ok  |  ok  |
         soft-irqs-on + irq-safe-A/12:  ok  |  ok  |  ok  |
         hard-irqs-on + irq-safe-A/21:  ok  |  ok  |  ok  |
         soft-irqs-on + irq-safe-A/21:  ok  |  ok  |  ok  |
           sirq-safe-A => hirqs-on/12:  ok  |  ok  |  ok  |
           sirq-safe-A => hirqs-on/21:  ok  |  ok  |  ok  |
             hard-safe-A + irqs-on/12:  ok  |  ok  |  ok  |
             soft-safe-A + irqs-on/12:  ok  |  ok  |  ok  |
             hard-safe-A + irqs-on/21:  ok  |  ok  |  ok  |
             soft-safe-A + irqs-on/21:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #1/123:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #1/123:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #1/132:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #1/132:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #1/213:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #1/213:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #1/231:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #1/231:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #1/312:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #1/312:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #1/321:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #1/321:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #2/123:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #2/123:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #2/132:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #2/132:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #2/213:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #2/213:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #2/231:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #2/231:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #2/312:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #2/312:  ok  |  ok  |  ok  |
        hard-safe-A + unsafe-B #2/321:  ok  |  ok  |  ok  |
        soft-safe-A + unsafe-B #2/321:  ok  |  ok  |  ok  |
          hard-irq lock-inversion/123:  ok  |  ok  |  ok  |
          soft-irq lock-inversion/123:  ok  |  ok  |  ok  |
          hard-irq lock-inversion/132:  ok  |  ok  |  ok  |
          soft-irq lock-inversion/132:  ok  |  ok  |  ok  |
          hard-irq lock-inversion/213:  ok  |  ok  |  ok  |
          soft-irq lock-inversion/213:  ok  |  ok  |  ok  |
          hard-irq lock-inversion/231:  ok  |  ok  |  ok  |
          soft-irq lock-inversion/231:  ok  |  ok  |  ok  |
          hard-irq lock-inversion/312:  ok  |  ok  |  ok  |
          soft-irq lock-inversion/312:  ok  |  ok  |  ok  |
          hard-irq lock-inversion/321:  ok  |  ok  |  ok  |
          soft-irq lock-inversion/321:  ok  |  ok  |  ok  |
          hard-irq read-recursion/123:  ok  |
          soft-irq read-recursion/123:  ok  |
          hard-irq read-recursion/132:  ok  |
          soft-irq read-recursion/132:  ok  |
          hard-irq read-recursion/213:  ok  |
          soft-irq read-recursion/213:  ok  |
          hard-irq read-recursion/231:  ok  |
          soft-irq read-recursion/231:  ok  |
          hard-irq read-recursion/312:  ok  |
          soft-irq read-recursion/312:  ok  |
          hard-irq read-recursion/321:  ok  |
          soft-irq read-recursion/321:  ok  |
      --------------------------------+-----+----------------
      Good, all 210 testcases passed! |
      --------------------------------+
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f194a4c393103ac925001d7e04b05fbb122580d
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:24:46 2006 -0700

    [PATCH] lockdep: irqtrace subsystem, s390 support
    
    irqtrace support for s390.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6375e2b74c620794e1a27a26e4338aec2e41346a
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:45 2006 -0700

    [PATCH] lockdep: irqtrace cleanup of include/asm-x86_64/irqflags.h
    
    Clean up the x86-64 irqflags.h file:
    
     - macro => inline function transformation
     - simplifications
     - style fixes
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2601e64d262ee5ed4d4a5737345803800d9c4db3
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:45 2006 -0700

    [PATCH] lockdep: irqtrace subsystem, x86_64 support
    
    Add irqflags-tracing support to x86_64.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c8558fcdecb1f920df8050be4f2d5f499060030e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:44 2006 -0700

    [PATCH] lockdep: irqtrace cleanup of include/asm-i386/irqflags.h
    
    Clean up the x86 irqflags.h file:
    
     - macro => inline function transformation
     - simplifications
     - style fixes
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55f327fa9e876758491a82af7491104f1cc3fc4d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:43 2006 -0700

    [PATCH] lockdep: irqtrace subsystem, i386 support
    
    Add irqflags-tracing support to i386.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55df314fbdb44c20fa7a5112d16546ee970c1d76
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:43 2006 -0700

    [PATCH] lockdep: irqtrace subsystem, docs
    
    Add Documentation/irqflags-tracing.txt.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de30a2b355ea85350ca2f58f3b9bf4e5bc007986
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:42 2006 -0700

    [PATCH] lockdep: irqtrace subsystem, core
    
    Accurate hard-IRQ-flags and softirq-flags state tracing.
    
    This allows us to attach extra functionality to IRQ flags on/off
    events (such as trace-on/off).
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bdc9b447c0076f494a56fdcd93ee8c5e78a2afd
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:24:41 2006 -0700

    [PATCH] lockdep: stacktrace subsystem, s390 support
    
    stacktrace interface for s390 as needed by lock validator.
    
    [clg@fr.ibm.com: build fix]
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Cedric Le Goater <clg@fr.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21b32bbff950771f196da91011249fa05fa83b32
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:40 2006 -0700

    [PATCH] lockdep: stacktrace subsystem, x86_64 support
    
    Framework to generate and save stacktraces quickly, without printing anything
    to the console.  x86_64 support.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a7c7197817e7180f56110334d961f4aa6ac69cb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:39 2006 -0700

    [PATCH] lockdep: stacktrace subsystem, i386 support
    
    Framework to generate and save stacktraces quickly, without printing anything
    to the console.  i386 support.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cbbd1fa72d22896332301ca7e6b7164284be105c
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:24:38 2006 -0700

    [PATCH] lockdep: s390 CONFIG_FRAME_POINTER support
    
    CONFIG_FRAME_POINTER support for s390.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8637c09901049f061b94f684915d4f18ecf91d79
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:38 2006 -0700

    [PATCH] lockdep: stacktrace subsystem, core
    
    Framework to generate and save stacktraces quickly, without printing anything
    to the console.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0a5c315eb266edc608a29971bb4ff1a3025c58f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:37 2006 -0700

    [PATCH] lockdep: i386 remove multi entry backtraces
    
    Remove CONFIG_STACK_BACKTRACE_COLS.
    
    This feature didnt work out: instead of making kernel debugging more
    efficient, it produces much harder to read stacktraces!  Check out this trace
    for example:
    
      http://static.flickr.com/47/158326090_35d0129147_b_d.jpg
    
    That backtrace could have been printed much nicer as a one-entry-per-line
    thing, taking the same amount of screen real-estate.
    
    Plus we remove 30 lines of kernel code as well.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9ca1ba5bde45839cdc4f8ab93730cb68e6ee8a6
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:36 2006 -0700

    [PATCH] lockdep: x86_64 document stack frame internals
    
    Document stack frame nesting internals some more.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3ac94932a2c859e8c57a8af091fa39334e1c3f23
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:36 2006 -0700

    [PATCH] lockdep: beautify x86_64 stacktraces
    
    Beautify x86_64 stacktraces to be more readable.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Acked-by: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4d919188554a77c798a267e098059bc9aa39726
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:34 2006 -0700

    [PATCH] lockdep: locking init debugging improvement
    
    Locking init improvement:
    
     - introduce and use __SPIN_LOCK_UNLOCKED for array initializations,
       to pass in the name string of locks, used by debugging
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9cebb5526833059f327d237a032422c762378b2a
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:33 2006 -0700

    [PATCH] lockdep: mutex section binutils workaround
    
    Work around weird section nesting build bug causing smp-alternatives failures
    under certain circumstances.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a11b49a805665e13a56aa067afaf81d43ec1514
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:33 2006 -0700

    [PATCH] lockdep: better lock debugging
    
    Generic lock debugging:
    
     - generalized lock debugging framework. For example, a bug in one lock
       subsystem turns off debugging in all lock subsystems.
    
     - got rid of the caller address passing (__IP__/__IP_DECL__/etc.) from
       the mutex/rtmutex debugging code: it caused way too much prototype
       hackery, and lockdep will give the same information anyway.
    
     - ability to do silent tests
    
     - check lock freeing in vfree too.
    
     - more finegrained debugging options, to allow distributions to
       turn off more expensive debugging features.
    
    There's no separate 'held mutexes' list anymore - but there's a 'held locks'
    stack within lockdep, which unifies deadlock detection across all lock
    classes.  (this is independent of the lockdep validation stuff - lockdep first
    checks whether we are holding a lock already)
    
    Here are the current debugging options:
    
    CONFIG_DEBUG_MUTEXES=y
    CONFIG_DEBUG_LOCK_ALLOC=y
    
    which do:
    
     config DEBUG_MUTEXES
              bool "Mutex debugging, basic checks"
    
     config DEBUG_LOCK_ALLOC
             bool "Detect incorrect freeing of live mutexes"
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb7e42413a098cc45b3adf858da290033af62bae
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:31 2006 -0700

    [PATCH] lockdep: remove mutex deadlock checking code
    
    With the lock validator we detect mutex deadlocks (and more), the mutex
    deadlock checking code is both redundant and slower.  So remove it.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36596243daf7e1d795c647de04af95e835b8c5b4
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:31 2006 -0700

    [PATCH] lockdep: remove DEBUG_BUG_ON()
    
    cleanup: remove unused DEBUG_BUG_ON() defines.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e7f4d451e99b7592a96ad0efaf8bcc1e7b2f854
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:30 2006 -0700

    [PATCH] lockdep: rename DEBUG_WARN_ON()
    
    Rename DEBUG_WARN_ON() to the less generic DEBUG_LOCKS_WARN_ON() name, so that
    it's clear that this is a lock-debugging internal mechanism.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61f4c3d6db3ecbdd4e1a2a7a1710c1410d085dd1
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:29 2006 -0700

    [PATCH] lockdep: remove RWSEM_DEBUG remnants
    
    RWSEM_DEBUG used to be a printk based 'tracing' facility, probably used for
    very early prototypes of the rwsem code.  Remove it.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c4e05116a2c4d8187127dbf77ab790aa57a47388
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:29 2006 -0700

    [PATCH] lockdep: clean up rwsems
    
    Clean up rwsems.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b3db9c542e18b71d4820da4dd9401ee030feacb
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:28 2006 -0700

    [PATCH] lockdep: add DECLARE_COMPLETION_ONSTACK() API
    
    lockdep needs to have the waitqueue lock initialized for on-stack waitqueues
    implicitly initialized by DECLARE_COMPLETION().  Introduce the API.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7e9629de051bb4b1d104588cd97673ad770809e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:27 2006 -0700

    [PATCH] lockdep: add local_irq_enable_in_hardirq() API
    
    Introduce local_irq_enable_in_hardirq() API.  It is currently aliased to
    local_irq_enable(), hence has no functional effects.
    
    This API will be used by lockdep, but even without lockdep this will better
    document places in the kernel where a hardirq context enables hardirqs.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c01d403b2e3e3f231b18ebd07ad64ecbe6a258a5
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:27 2006 -0700

    [PATCH] lockdep: add disable/enable_irq_lockdep() API
    
    lockdep wants to use the disable_irq()/enable_irq() prototypes before they are
    provied by the platform's asm/irq.h.  So move them out of the
    CONFIG_GENERIC_HARDIRQS define - all architectures have a common prototype for
    this anyway.
    
    Add special lockdep variants of irq line disabling/enabling.
    
    These should be used for locking constructs that know that a particular irq
    context which is disabled, and which is the only irq-context user of a lock,
    that it's safe to take the lock in the irq-disabled section without disabling
    hardirqs.
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a875a69f8b00a38b4f40d9632a4fc71a159f0e0d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:26 2006 -0700

    [PATCH] lockdep: add per_cpu_offset()
    
    Add the per_cpu_offset() generic method. (used by the lock validator)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d8fdf5c76816e5263073008f03f097ffc713db3
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:24:25 2006 -0700

    [PATCH] lockdep: add print_ip_sym()
    
    Provide a common print_ip_sym() function that prints the passed instruction
    pointer as well as the symbol belonging to it.  Avoids adding a bunch of
    #ifdef CONFIG_64BIT in order to get the printk format right on 32/64 bit
    platforms.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d435f9d8ff01ae726a2a84edb9c2457787a337e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:24 2006 -0700

    [PATCH] lockdep: add is_module_address()
    
    Add is_module_address() method - to be used by lockdep.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 93e028148fce0be9787de7fb097fa4c8582b78c1
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:24:24 2006 -0700

    [PATCH] lockdep: console_init after local_irq_enable()
    
    s390's console_init must enable interrupts, but early_boot_irqs_on() gets
    called later.  To avoid problems move console_init() after local_irq_enable().
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e541a4ae534a7e59ad464af9abea382b3035724
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jul 3 00:24:23 2006 -0700

    [PATCH] lockdep: floppy.c irq release fix
    
    The lock validator triggered a number of bugs in the floppy driver, all
    related to the floppy driver allocating and freeing irq and dma resources from
    interrupt context.  The initial solution was to use schedule_work() to push
    this into process context, but this caused further problems: for example the
    current floppy driver in -mm2 is totally broken and all floppy commands time
    out with an error.  (as reported by Barry K.  Nathan)
    
    This patch tries another solution: simply get rid of all that dynamic IRQ and
    DMA allocation/freeing.  I doubt it made much sense back in the heydays of
    floppies (if two devices raced for DMA or IRQ resources then we didnt handle
    those cases too gracefully anyway), and today it makes near zero sense.
    
    So the new code does the simplest and most straightforward thing: allocate IRQ
    and DMA resources at module init time, and free them at module removal time.
    Dont try to release while the driver is operational.  This, besides making the
    floppy driver functional again has an added bonus, floppy IRQ stats are
    finally persistent and visible in /proc/interrupts:
    
      6: 63 XT-PIC-level floppy
    
    Besides normal floppy IO i have also tested IO error handling, motor-off
    timeouts, etc.  - and everything seems to be working fine.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5863aa651bd79a6bb15972894306923db088e71c
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 3 00:24:22 2006 -0700

    [PATCH] sparc: resource warning fix
    
    sound/sparc/amd7930.c: In function 'amd7930_attach_common':
    sound/sparc/amd7930.c:1040: warning: format '%08lx' expects type 'long unsigned int', but argument 5 has type 'resource_size_t'
    
    sound/sparc/cs4231.c:2043: warning: format '%016lx' expects type 'long unsigned int', but argument 5 has type 'resource_size_t'
    
    sound/sparc/dbri.c: In function 'dbri_attach':
    sound/sparc/dbri.c:2650: warning: format '%016lx' expects type 'long unsigned int', but argument 5 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b8f3ef454d60e0c7ec42400400dc0fe7b5a4f7d
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 3 00:24:21 2006 -0700

    [PATCH] sparc i8042 build fix
    
    drivers/input/serio/i8042-sparcio.h:91: error: '__mod_of_device_table' aliased to undefined symbol 'i8042_match'
    
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    DESC
    sparc: resource warning fix
    EDESC
    From: Andrew Morton <akpm@osdl.org>
    
    sound/sparc/amd7930.c: In function 'amd7930_attach_common':
    sound/sparc/amd7930.c:1040: warning: format '%08lx' expects type 'long unsigned int', but argument 5 has type 'resource_size_t'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62322d2554d2f9680c8ace7bbf1f97d8fa84ad1a
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Mon Jul 3 00:24:21 2006 -0700

    [PATCH] make more file_operation structs static
    
    Mark the static struct file_operations in drivers/char as const.  Making
    them const prevents accidental bugs, and moves them to the .rodata section
    so that they no longer do any false sharing; in addition with the proper
    debug option they are then protected against corruption..
    
    [akpm@osdl.org: build fix]
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d459ec0baa5d22e111dfb139c46d6d788a9eac20
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jul 3 00:24:20 2006 -0700

    [PATCH] vt: Decrement ref count of the VT backend on deallocation
    
    When a VT is newly allocated, the module reference count of the backend
    will be incremented.  This should be balanced by a module_put() when this
    VT is deallocated.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36c9366efd63e4bab82d46e166140bddf3acc4cf
Author: Vitaly Wool <vitalywool@gmail.com>
Date:   Mon Jul 3 00:24:19 2006 -0700

    [PATCH] fbdev: Add framebuffer and display update module support for pnx4008
    
    Add support for Display Update Module and RGB framebuffer device on Philips
    PNX4008 ARM board.
    
    Signed-off-by: Grigory Tolstolytkin <gtolstolytkin@ru.mvista.com>
    Signed-off-by: Vitaly Wool <vitalywool@gmail.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8320204ab495c858da7b6501f49a71b53d828e74
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jul 3 00:24:18 2006 -0700

    [PATCH] add Mike Isely as pvrusb2 maintainer
    
    Update MAINTAINERS with contact info for Mike Isely, the PVRUSB2
    maintainer, while also adding the pvrusb2 mailing list and web site.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Cc: Mauro Carvalho Chehab <mchehab@infradead.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f40efbdf49913cad50edce5aa9756896c30424f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Mon Jul 3 00:24:15 2006 -0700

    [PATCH] kernel-doc MAINTAINERS
    
    Martin says that I can add self to MAINTAINERS.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Martin Waitz <tali@admingilde.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce51059be56f63762089412b3ece348067afda85
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Mon Jul 3 00:24:14 2006 -0700

    [PATCH] binfmt_elf: fix checks for bad address
    
    Fix check for bad address; use macro instead of open-coding two checks.
    
    Taken from RHEL4 kernel update.
    
    From: Ernie Petrides <petrides@redhat.com>
    
      For background, the BAD_ADDR() macro should return TRUE if the address is
      TASK_SIZE, because that's the lowest address that is *not* valid for
      user-space mappings.  The macro was correct in binfmt_aout.c but was wrong
      for the "equal to" case in binfmt_elf.c.  There were two in-line validations
      of user-space addresses in binfmt_elf.c, which have been appropriately
      converted to use the corrected BAD_ADDR() macro in the patch you posted
      yesterday.  Note that the size checks against TASK_SIZE are okay as coded.
    
      The additional changes that I propose are below.  These are in the error
      paths for bad ELF entry addresses once load_elf_binary() has already
      committed to exec'ing the new image (following the tearing down of the
      task's original address space).
    
      The 1st hunk deals with the interp-side of the outer "if".  There were two
      problems here.  The printk() should be removed because this path can be
      triggered at will by a bogus interpreter image created and used by a
      malicious user.  Further, the error code should not be ENOEXEC, because that
      causes the loop in search_binary_handler() to continue trying other exec
      handlers (twice, in fact).  But it's too late for this to work correctly,
      because the user address space has already been torn down, and an exec()
      failure cannot be returned to the user code because the code no longer
      exists.  The only recovery is to force a SIGSEGV, but it's best to terminate
      the search loop immediately.  I somewhat arbitrarily chose EINVAL as a
      fallback error code, but any error returned by load_elf_interp() will
      override that (but this value will never be seen by user-space).
    
      The 2nd hunk deals with the non-interp-side of the outer "if".  There were
      two problems here as well.  The SIGSEGV needs to be forced, because a prior
      sigaction() syscall might have set the associated disposition to SIG_IGN.
      And the ENOEXEC should be changed to EINVAL as described above.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Ernie Petrides <petrides@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9614634fe6a138fd8ae044950700d2af8d203f97
Author: Christoph Lameter <clameter@sgi.com>
Date:   Mon Jul 3 00:24:13 2006 -0700

    [PATCH] ZVC/zone_reclaim: Leave 1% of unmapped pagecache pages for file I/O
    
    It turns out that it is advantageous to leave a small portion of unmapped file
    backed pages if all of a zone's pages (or almost all pages) are allocated and
    so the page allocator has to go off-node.
    
    This allows recently used file I/O buffers to stay on the node and
    reduces the times that zone reclaim is invoked if file I/O occurs
    when we run out of memory in a zone.
    
    The problem is that zone reclaim runs too frequently when the page cache is
    used for file I/O (read write and therefore unmapped pages!) alone and we have
    almost all pages of the zone allocated.  Zone reclaim may remove 32 unmapped
    pages.  File I/O will use these pages for the next read/write requests and the
    unmapped pages increase.  After the zone has filled up again zone reclaim will
    remove it again after only 32 pages.  This cycle is too inefficient and there
    are potentially too many zone reclaim cycles.
    
    With the 1% boundary we may still remove all unmapped pages for file I/O in
    zone reclaim pass.  However.  it will take a large number of read and writes
    to get back to 1% again where we trigger zone reclaim again.
    
    The zone reclaim 2.6.16/17 does not show this behavior because we have a 30
    second timeout.
    
    [akpm@osdl.org: rename the /proc file and the variable]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb6358eb69d9854f65f2979c0ce9280eee041828
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Jul 3 00:24:12 2006 -0700

    [PATCH] SERIAL: allow shared 8250_pnp interrupts
    
    PNP devices can use shared interrupts, so check to see whether we'll need
    SA_SHIRQ for request_irq().
    
    The builtin PDH UART on the HP rx8640 is an example of an ACPI/PNP device
    that uses a shareable level-triggered, active-low interrupt.  The interrupt
    can be shared in very large I/O configurations or by artificially lowering
    IA64_DEF_LAST_DEVICE_VECTOR.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Cc: Matthieu Castet <castet.matthieu@free.fr>
    Cc: Li Shaohua <shaohua.li@intel.com>
    Cc: Len Brown <len.brown@intel.com>
    Acked-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c32928c579d88acd43981b59e86900da65f40762
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Jul 3 00:24:10 2006 -0700

    [PATCH] PNPACPI: support shareable interrupts
    
    ACPI supplies a "shareable" indication, but PNPACPI ignores it.  If a PNP
    device uses a shared interrupt, request_irq() fails because the PNP driver
    can't tell whether to supply SA_SHIRQ.
    
    This patch allows PNP drivers to test
        (pnp_irq_flags(dev, 0) & IORESOURCE_IRQ_SHAREABLE)
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Cc: Matthieu Castet <castet.matthieu@free.fr>
    Cc: Li Shaohua <shaohua.li@intel.com>
    Cc: Len Brown <len.brown@intel.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c61a8416ed3db84481651270032696a4781cac17
Author: Theodore Ts'o <tytso@mit.edu>
Date:   Mon Jul 3 00:24:09 2006 -0700

    [PATCH] uml build fix
    
    This is needed to fix UML compilation given that alternatives_smp_module_add
    and alternatives_smp_module_del are null inline functions if !CONFIG_SMP.
    
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6abd219c6eab92172038e4719e02905acb7b68d4
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Mon Jul 3 00:24:07 2006 -0700

    [PATCH] bcm43xx: netlink deadlock fix
    
    reported by Jure Repinc:
    
    > > http://bugzilla.kernel.org/show_bug.cgi?id=6773
    
    > > checked out dmesg output and found the message
    > >
    > > ======================================================
    > > [ BUG: hard-safe -> hard-unsafe lock order detected! ]
    > > ------------------------------------------------------
    > >
    > > starting at line 660 of the dmesg.txt that I will attach.
    
    The patch below should fix the deadlock, albeit I suspect it's not the
    "right" fix; the right fix may well be to move the rx processing in bcm43xx
    to softirq context.  [it's debatable, ipw2200 hit this exact same bug; at
    some point it's better to bite the bullet and move this to the common layer
    as my patch below does]
    
    Make the nl_table_lock irq-safe; it's taken for read in various netlink
    functions, including functions that several wireless drivers (ipw2200,
    bcm43xx) want to call from hardirq context.
    
    The deadlock was found by the lock validator.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Cc: Michael Buesch <mb@bu3sch.de>
    Cc: "John W. Linville" <linville@tuxdriver.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Acked-by: "David S. Miller" <davem@davemloft.net>
    Cc: jamal <hadi@cyberus.ca>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b02454f43578b24bc8b8ab54a239156841f56f6d
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Mon Jul 3 00:24:06 2006 -0700

    [PATCH] lockdep: special s390 print_symbol() version
    
    Have a special version of print_symbol() for s390 which clears the most
    significant bit of addr before calling __print_symbol().  This seems to be
    better than checking/changing each place in the kernel that saves an
    instruction pointer.
    
    Without this the output would look like:
    
    hardirqs last  enabled at (30907): [<80018c6a>] 0x80018c6a
    hardirqs last disabled at (30908): [<8001e48c>] 0x8001e48c
    softirqs last  enabled at (30904): [<8001dc96>] 0x8001dc96
    softirqs last disabled at (30897): [<8001dc50>] 0x8001dc50
    
    instead of this:
    
    hardirqs last  enabled at (19421): [<80018c72>] cpu_idle+0x176/0x1c4
    hardirqs last disabled at (19422): [<8001e494>] io_no_vtime+0xa/0x1a
    softirqs last  enabled at (19418): [<8001dc9e>] do_softirq+0xa6/0xe8
    softirqs last disabled at (19411): [<8001dc58>] do_softirq+0x60/0xe8
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dada0769b95602ae791b9c4cd1cbecfc367f00a9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jul 3 00:24:05 2006 -0700

    [PATCH] genirq ia64 cleanup
    
    Remove duplicate/redundant/wrong  IRQF_PERCPU definition.
    
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 88fecaa27f398d95db6c405a1908292c6f0bc3ef
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jul 3 00:24:04 2006 -0700

    [PATCH] time initialisation fix
    
    We're not reay to take a timer interrupt until timekeeping_init() has run.
    But time_init() will start the time interrupt and if it is called with
    local interrupts enabled we'll immediately take an interrupt and die.
    
    Fix that by running timekeeping_init() prior to time_init().
    
    We don't know _why_ local interrupts got enabled on Jesse Brandeburg's
    machine.  That's a separate as-yet-unsolved problem.  THe patch adds a little
    bit of debugging to detect that.
    
    This whole requirement that local interrupts be held off during early boot
    keeps on biting us.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Jesse Brandeburg <jesse.brandeburg@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39ab9c212aac48f2744f2fd7722fa639ec048eb7
Merge: 0fbfb03... 71bc7bf...
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Jul 4 07:33:28 2006 +1000

    Merge branch 'for_paulus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc

commit 0fbfb036adee72cbfff170075e84ffd9e54f1938
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue Jul 4 07:31:37 2006 +1000

    [POWERPC] Actually copy over i8259.c to arch/ppc/syslib this time
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 63104eec234bdecb55fd9c15467ae00d0a3f42ac
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Mon Jul 3 23:30:54 2006 +0200

    kbuild: introduce utsrelease.h
    
    include/linux/version.h contained both actual KERNEL version
    and UTS_RELEASE that contains a subset from git SHA1 for when
    kernel was compiled as part of a git repository.
    This had the unfortunate side-effect that all files including version.h
    would be recompiled when some git changes was made due to changes SHA1.
    Split it out so we keep independent parts in separate files.
    
    Also update checkversion.pl script to no longer check for UTS_RELEASE.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 05668381140309088443bf5dc53add4104610fbb
Merge: 34c162f... 29454dd...
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Mon Jul 3 23:24:23 2006 +0200

    Merge branch 'master' of /home/sam/kernel/linux-2.6/

commit 71bc7bf045262e82c645cad48fd56dd17e75344e
Merge: cbdb54d... 913b839...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon Jul 3 16:08:21 2006 -0500

    Merge branch '83xx' into for_paulus

commit 913b83944b9e13c60ca4ef95cf262547ff6bf93b
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Fri Jun 30 18:41:29 2006 -0500

    powerpc: add defconfig for Freescale MPC8349E-mITX board
    
    Provide default configuration for the Freescale MPC8349E-mITX board, including
    the on-board 16MB flash.
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 00280166993af8469dbfee24b779b61d3dd326c3
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Fri Jun 30 18:41:20 2006 -0500

    powerpc: Add base support for the Freescale MPC8349E-mITX eval board
    
    Added support for the Freescale MPC8343e-mITX board.  Currently based on the
    8343 SYS code.  The 2nd PHY (5-port switch) and SATA are untested (work in
    progress).
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Timur Tabi <timur@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit cbdb54d3ca986e30d0b8c1f755c3910b5573baae
Author: Kim Phillips <kim.phillips@freescale.com>
Date:   Mon Jul 3 15:10:14 2006 -0500

    Documentation: correct values in MPC8548E SEC example node
    
    Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 026477c1141b67e98e3bd8bdedb7d4b88a3ecd09
Merge: 9f2fa46... 29454dd...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Mon Jul 3 13:49:45 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit c4e00fac42f268ed0a547cdd1d12bb8399864040
Merge: 29454dd... d6b0c53...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Mon Jul 3 09:41:12 2006 -0500

    Merge ../scsi-misc-2.6
    
    Conflicts:
    
    	drivers/scsi/nsp32.c
    	drivers/scsi/pcmcia/nsp_cs.c
    
    Removal of randomness flag conflicts with SA_ -> IRQF_ global
    replacement.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0f1482fdd7e5efc473335b92f350027b8f1519fb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 15:32:47 2006 +0100

    [ARM] Fix lh7a40x_udc.c
    
    In 3ae5eaec1d2d9c0cf53745352e7d4b152810ba24, I broke this driver
    by missing a comma.  Replace the missing comma.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 61a116ef29e712147d7ee7a6738886e6f91df5f5
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 15:22:35 2006 +0100

    [SERIAL] Ensure 8250_pci quirks are not marked __devinit
    
    The 8250_pci quirks must not be marked __devinit since they may
    be used from parport_serial.  We only really need to mark those
    which might be used by cards recognised by parport_serial, but
    that wouldn't allow static checking.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 67f3a58856b6a41a46e9256a79a8ca3809f47cc6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 13:30:52 2006 +0100

    [ARM] Fix warning in consistent.c
    
    No need for 'cr' to be a local variable, which is unused in the
    SMP case, and only used once in the UP case.  Just call get_cr()
    directly.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4e19025bc7be18e4d1dc8d1fde06c2d23927eb4d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 13:29:38 2006 +0100

    [ARM] Fix warnings in arch/arm/kernel/setup.c
    
    cr_alignment is unsigned long, so should be the format string.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c9e4143c4df08f7b54ba2099480266a6a1303f17
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 13:29:03 2006 +0100

    [ARM] Fix ecard.c resource warnings.
    
    Platforms which use ecard.c always have 32-bit resources, so
    might as well lose the "long" format strings.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 020732ad9add86b71e9d90d5fa7687d51f58ef49
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 13:18:04 2006 +0100

    [ARM] Fix ISA IRQ resources
    
    The ISA IRQ code was not using named initialisers, so merging the
    64-bit resource code (which re-ordered the struct members) broke
    this.  Fix it up to use named initialisers.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 906243d07b8bfebeaa05b5aeaa0e5ab2d4034954
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 12:44:30 2006 +0100

    [ARM] Fix bad asm instruction in proc-arm925.S
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 00eb0f6b6595107dd8be80d1af2220cedb71130d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jul 3 12:36:07 2006 +0100

    [ARM] More missing proc-macros.S includes
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0ebfff1491ef85d41ddf9c633834838be144f69f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 21:36:01 2006 +1000

    [POWERPC] Add new interrupt mapping core and change platforms to use it
    
    This adds the new irq remapper core and removes the old one.  Because
    there are some fundamental conflicts with the old code, like the value
    of NO_IRQ which I'm now setting to 0 (as per discussions with Linus),
    etc..., this commit also changes the relevant platform and driver code
    over to use the new remapper (so as not to cause difficulties later
    in bisecting).
    
    This patch removes the old pre-parsing of the open firmware interrupt
    tree along with all the bogus assumptions it made to try to renumber
    interrupts according to the platform. This is all to be handled by the
    new code now.
    
    For the pSeries XICS interrupt controller, a single remapper host is
    created for the whole machine regardless of how many interrupt
    presentation and source controllers are found, and it's set to match
    any device node that isn't a 8259.  That works fine on pSeries and
    avoids having to deal with some of the complexities of split source
    controllers vs. presentation controllers in the pSeries device trees.
    
    The powerpc i8259 PIC driver now always requests the legacy interrupt
    range. It also has the feature of being able to match any device node
    (including NULL) if passed no device node as an input. That will help
    porting over platforms with broken device-trees like Pegasos who don't
    have a proper interrupt tree.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7cddc397027ddf80b2d916f6e8fb15a21e9791c5
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Jul 3 12:26:02 2006 +0100

    [ARM] 3708/2: fix SMP build after section ioremap changes
    
    Patch from Lennert Buytenhek
    
    Commit ff0daca525dde796382b9ccd563f169df2571211 broke the SMP build,
    this patch fixes it up again.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f63e115fb50db39706b955b81e3375ef6bab2268
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 19:36:30 2006 +1000

    [POWERPC] Copy i8259 code back to arch/ppc
    
    This copies the i8259 interrupt controller driver from arch/powerpc
    to arch/ppc. It's currently shared by both architectures, but the upcoming
    arch/powerpc interrupt changes will break the arch/ppc builds. The changes
    are too important to just use #ifdef's in the driver.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cc9fd71c62f542233c412b5fabc1bbe0c4d5ad08
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 19:35:17 2006 +1000

    [POWERPC] New device-tree interrupt parsing code
    
    Adds new routines to prom_parse to walk the device-tree for interrupt
    information. This includes both direct mapping of interrupts and low
    level parsing functions for use with partial trees.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b9e5b4e6a991a5a6d521f2e20a65835404b4169f
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 19:32:51 2006 +1000

    [POWERPC] Use the genirq framework
    
    This adapts the generic powerpc interrupt handling code, and all of
    the platforms except for the embedded 6xx machines, to use the new
    genirq framework.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5a43a066b11ac2fe84cf67307f20b83bea390f83
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 19:54:59 2006 +1000

    [PATCH] genirq: Allow fasteoi handler to retrigger disabled interrupts
    
    Make the fasteoi handler mark disabled interrupts as pending if they
    happen anyway. This allow implementation of a delayed disable scheme
    with the fasteoi handler.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3e9a69275f23baec86b54febc5dad0b2fc7fb200
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 17:25:26 2006 +1000

    [POWERPC] Update the SWIM3 (powermac) floppy driver
    
    Port the PowerMac floppy driver (swim3) to use the macio device
    infrastructure.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7c6efda5996c26c468eaba178af9bac8b70dbdcb
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 17:24:15 2006 +1000

    [POWERPC] Fix error handling in detecting legacy serial ports
    
    Previously we weren't checking for failures in translating device
    addresses from the firmware.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 980a65136569b841cebaad524a34482b0b1627a9
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 17:22:05 2006 +1000

    [POWERPC] Fix booting on Momentum "Apache" board (a Maple derivative)
    
    This extends the maple device-tree workarounds to work on the
    Apache board as well, and extends the maple platform probing code
    to recognize the Apache board.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ab13446616118dc61c00ea50cc49919400717dd0
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jul 3 17:19:48 2006 +1000

    [POWERPC] Fix various offb and BootX-related issues
    
    This patch fixes various issues with offb (the default fbdev used on
    powerpc when no proper fbdev is supported). It was broken when using
    BootX under some circumstances and would fail to properly get the
    framebuffer base address in others.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4ce631e7a229a0e073078a197ed37d437cabcde0
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Jul 3 16:36:17 2006 +1000

    [POWERPC] Add a default config for 32-bit CHRP machines
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 29454dde27d8e340bb1987bad9aa504af7081eba
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jul 3 02:22:22 2006 +0200

    [PATCH] genirq: Fixup ARM devel merge
    
    ARM devel merge introduced new machine functionality which was not
    covered by the ARM -> genirq patches. Fix it up and make it compile
    again.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb8d5a55a523869ebcdd004a08ed5fab86b474e3
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jul 3 02:21:18 2006 +0200

    [PATCH] ARM: Fixup missing includes in arch/arm/mm/proc-<cputype>.S
    
    For several proc-<cputype>.S files the include of proc-macros.S is
    missing. Make it compile and work again.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 284c66806eb6df7f5c66d298681f1abe81a5a9ab
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jul 3 02:20:32 2006 +0200

    [PATCH] genirq:fixup missing SA_PERCPU replacement
    
    The irqflags consolidation converted SA_PERCPU_IRQ to IRQF_PERCPU but
    did not define the new constant.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52e405eaa9806968e88b35d65e57acad954a5ab5
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jul 3 02:20:05 2006 +0200

    [PATCH] ARM: fixup irqflags breakage after ARM genirq merge
    
    The irgflags consolidation did conflict with the ARM to generic IRQ
    conversion and was not applied for ARM. Fix it up.
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d061daa0e3abdddc28e21a37c8ac4536dedbf239
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Mon Jul 3 02:18:48 2006 +0200

    [PATCH] genirq: ARM dyntick cleanup
    
    Linus: "The hacks in kernel/irq/handle.c are really horrid. REALLY
    horrid."
    
    They are indeed. Move the dyntick quirks to ARM where they belong.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f82bc1762e0e74b7e0040a4d83be06d32c37fc2e
Merge: 4ebd9ab... 4cca56c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 2 16:35:07 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-mmc
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-mmc:
      [MMC] sdhci: remove duplicate error message
      [MMC] sdhci: force DMA on some controllers
      [MMC] sdhci: quirk for broken reset
      [MMC] sdhci: Add SDHCI controller ids

commit 609c9991b193f99a9a9e941beffcdb540752f761
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 29 16:52:53 2006 -0400

    [POWERPC] fix implicit declaration on cell.
    
    (Only fails with -Werror-implicit-function-declaration, but
     it should still be fixed).
    
    arch/powerpc/platforms/cell/setup.c:145: error: implicit declaration of function 'udbg_init_rtas_console'
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a1af5b2fd49eb24ab8c024da5d853b09841d1f8f
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Thu Jun 29 20:28:18 2006 +1000

    [POWERPC] change get_property to return void *
    
    Change the get_property() function to return a void *. This allows us
    to later remove the cast done in the majority of callers.
    
    Built for pseries, iseries, pmac32, cell, cbesim, g5, systemsim, maple,
    and mpc* defconfigs
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4ebd9ab387b39c44165cd296a6637082a4f0f66a
Author: Dominik Hackl <dominik@hackl.dhs.org>
Date:   Sun Jul 2 17:29:26 2006 +0200

    [PATCH] nfs: non-procfs build fix
    
    This fixes a bug in fs/nfs which makes it impossible to build nfs
    without having procfs enabled.
    
    Signed-off-by: Dominik Hackl <dominik@hackl.dhs.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b4b9034132c7e1e4474999e688dd7d03b7d97a99
Merge: a8c4c20... 07d265d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 2 15:07:45 2006 -0700

    Merge branch 'genirq' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'genirq' of master.kernel.org:/home/rmk/linux-2.6-arm: (24 commits)
      [ARM] 3683/2:  ARM: Convert at91rm9200 to generic irq handling
      [ARM] 3682/2:  ARM: Convert ixp4xx to generic irq handling
      [ARM] 3702/1: ARM: Convert ixp23xx to generic irq handling
      [ARM] 3701/1: ARM: Convert plat-omap to generic irq handling
      [ARM] 3700/1: ARM: Convert lh7a40x to generic irq handling
      [ARM] 3699/1: ARM: Convert s3c2410 to generic irq handling
      [ARM] 3698/1: ARM: Convert sa1100 to generic irq handling
      [ARM] 3697/1: ARM: Convert shark to generic irq handling
      [ARM] 3696/1: ARM: Convert clps711x to generic irq handling
      [ARM] 3694/1: ARM: Convert ecard driver to generic irq handling
      [ARM] 3693/1: ARM: Convert omap1 to generic irq handling
      [ARM] 3691/1: ARM: Convert imx to generic irq handling
      [ARM] 3688/1: ARM: Convert clps7500 to generic irq handling
      [ARM] 3687/1: ARM: Convert integrator to generic irq handling
      [ARM] 3685/1: ARM: Convert pxa to generic irq handling
      [ARM] 3684/1: ARM: Convert l7200 to generic irq handling
      [ARM] 3681/1: ARM: Convert ixp2000 to generic irq handling
      [ARM] 3680/1: ARM: Convert footbridge to generic irq handling
      [ARM] 3695/1: ARM drivers/pcmcia: Fixup includes
      [ARM] 3689/1: ARM drivers/input/touchscreen: Fixup includes
      ...
    
    Manual conflict resolved in kernel/irq/handle.c (butt-ugly ARM tickless
    code).

commit a8c4c20dfa8b28a3c99e33c639d9c2ea5657741e
Merge: 168d04b... 2dc7667...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 2 15:04:12 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm: (44 commits)
      [ARM] 3541/2: workaround for PXA27x erratum E7
      [ARM] nommu: provide a way for correct control register value selection
      [ARM] 3705/1: add supersection support to ioremap()
      [ARM] 3707/1: iwmmxt: use the generic thread notifier infrastructure
      [ARM] 3706/2: ep93xx: add cirrus logic edb9315a support
      [ARM] 3704/1: format IOP Kconfig with tabs, create more consistency
      [ARM] 3703/1: Add help description for ARCH_EP80219
      [ARM] 3678/1: MMC: Make OMAP MMC work
      [ARM] 3677/1: OMAP: Update H2 defconfig
      [ARM] 3676/1: ARM: OMAP: Fix dmtimers and timer32k to compile on OMAP1
      [ARM] Add section support to ioremap
      [ARM] Fix sa11x0 SDRAM selection
      [ARM] Set bit 4 on section mappings correctly depending on CPU
      [ARM] 3666/1: TRIZEPS4 [1/5] core
      ARM: OMAP: Multiplexing for 24xx GPMC wait pin monitoring
      ARM: OMAP: Fix SRAM to use MT_MEMORY instead of MT_DEVICE
      ARM: OMAP: Update dmtimers
      ARM: OMAP: Make clock variables static
      ARM: OMAP: Fix GPMC compilation when DEBUG is defined
      ARM: OMAP: Mux updates for external DMA and GPIO
      ...

commit 168d04b3b4de7723eb73b3cffc9cb75224e0f393
Merge: 6ce6c7f... 2c5f394...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jul 2 14:58:03 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-mmc
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-mmc:
      [MMC] sdhci: version bump sdhci
      [MMC] sdhci: support controller specific quirks
      [MMC] sdhci: more DMA capabilities tests
      [MMC] sdhci: reset sdhci controller early
      [MMC] sdhci: check controller version
      [MMC] sdhci: check only relevant inhibit bits
      [MMC] sdhci: Test for invalid block size
      [MMC] sdhci: Avoid sdhci DMA boundaries
      [MMC] Fix sdhci PIO routines
      [MMC] sdhci: fix interrupt handling
      [MMC] sdhci: correct register order
      [MMC] sdhci: proper timeout handling
      [MMC] sdhci: fix sdhci reset timeout
      [MMC] sdhci: fix timeout loops in sdhci
      [MMC] sdhci: support for multiple voltages
      [MMC] sdhci: print device id
      [MMC] sdhci: check SDHCI base clock

commit 6ce6c7faf2d0fede5e1530b0f731a90f138fd69e
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:47 2006 -0700

    [PATCH] irq-flags: documentation: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65ca68b30073473583f6ca2f463cbd94ade43ddb
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:46 2006 -0700

    [PATCH] irq-flags: sound: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Cc: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63a43399db67d6f94364f933f68f38f58387737a
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:45 2006 -0700

    [PATCH] irq-flags: video: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d54b5caa832caa3715a458115b6ea79ad17c4f31
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:44 2006 -0700

    [PATCH] irq-flags: usb: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40663cc7f1c1ccf515d8af9470925a0cb2f59b5d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:43 2006 -0700

    [PATCH] irq-flags: serial: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d6f359a2e06296418481239f8054a878f36e819
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:42 2006 -0700

    [PATCH] irq-flags: scsi: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d8c8a2e8edc63d8aef7656678f41c6c603f0443
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:41 2006 -0700

    [PATCH] irq-flags: rio: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b4486e2e3b1044f157af44920b520f3593e3923
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:41 2006 -0700

    [PATCH] irq-flags: pci: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c56e7214effd2fa50359e58832ad9c3eb51a3de
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:40 2006 -0700

    [PATCH] irq-flags: PARISC: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1fb9df5d3069064c037c81c0ab8bf783ffa5e373
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:39 2006 -0700

    [PATCH] irq-flags: drivers/net: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dace145374b8e39aeb920304c358ab5e220341ab
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:38 2006 -0700

    [PATCH] irq-flags: misc drivers: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8076fe32a7db9a6628589ffa372808e4ba25d222
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:37 2006 -0700

    [PATCH] irq-flags: media: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Mauro Carvalho Chehab <mchehab@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ba02bec3888d391bad0fb0a8dd584f88eed6c8d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:36 2006 -0700

    [PATCH] irq-flags: isdn: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 272ee69c653d4b4f15049ed956554085d4bdaa44
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:35 2006 -0700

    [PATCH] irq-flags: firewire: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@debian.org>
    Cc: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 362537b9abf02458967fc2bd9aa7cd18e3ef576a
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:34 2006 -0700

    [PATCH] irq-flags: ide: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 935f6e3abc76e868de1acbd76cf9b760e66cf237
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:34 2006 -0700

    [PATCH] irq-flags: drivers/drm: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f2ed4c6bae23d2b7ef0ea2d272377e3de700c0c
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:33 2006 -0700

    [PATCH] irq-flags: drivers/char: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69ab3912d1b4dbf27ea1a383cb5731251fc0e109
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:32 2006 -0700

    [PATCH] irq-flags: drivers/block Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3cca53b02a5bab0f407b1add2f84c22c20243a79
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:31 2006 -0700

    [PATCH] irq-flags: generic irq: Use the new IRQF_ constants
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85ac3ab254405edcc7bef7d61b03930247882efc
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:31 2006 -0700

    [PATCH] irq-flags: XTENSA: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1e05aa2303e48b16e850c4be2513e60a3495238
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:29 2006 -0700

    [PATCH] irq-flags: x86_64: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b91fbb8338bae702f5a6c984fb05f1a01f6590c
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:28 2006 -0700

    [PATCH] irq-flags: V850: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd6aa6502e7f82c39090aea29e4b644c29e720bd
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:27 2006 -0700

    [PATCH] irq-flags: UM: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6741320247fbf147ab8aa41b2a7201425ac1e1df
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:26 2006 -0700

    [PATCH] irq-flags: SPARC: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d356d7f4f2761b1391ec41404eefe280e4f11f76
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:26 2006 -0700

    [PATCH] irq-flags: SPARC64: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d20819f8050092d40e9c99c55d82c8e26d42599
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:25 2006 -0700

    [PATCH] irq-flags: SH: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fb55ae955cee254f9e3b45636266a4855bb88a5
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:24 2006 -0700

    [PATCH] irq-flags: SH64: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dacdb3b23a918d52ff52708b25d6d45dab7ea14b
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:23 2006 -0700

    [PATCH] irq-flags: S390: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc59d2800d535ff36dc9e6c5328b4a075076bbaa
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:22 2006 -0700

    [PATCH] irq-flags: PPC: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6714465e83e784d65d0f4dbab7f2238574febfce
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:22 2006 -0700

    [PATCH] irq-flags: POWERPC: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 733ea869e5756e0fd0333728cc1ed7c42e6ddfc0
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:21 2006 -0700

    [PATCH] irq-flags: PARISC: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f40298fddcc3c8115c6135c9733f5a0de52dcea9
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:20 2006 -0700

    [PATCH] irq-flags: MIPS: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0b9fdc123cf0f1b671ac3f593d77af325ad4cf3
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:19 2006 -0700

    [PATCH] irq-flags: M68K: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6f238875c93d020efb4d51cbca464dff31ec1f9
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:18 2006 -0700

    [PATCH] irq-flags: M68KNOMMU: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aff60147049c0be346909ee2e1dbe600a5c7aa91
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:18 2006 -0700

    [PATCH] irq-flags: M32R: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 121a4226e89aae6654d667d58ab72df740b97b92
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:17 2006 -0700

    [PATCH] irq-flags: IA64: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4879d77c4c2fdc81ba1ff0ad56fa41b3676d0472
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:16 2006 -0700

    [PATCH] irq-flags: i386: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b98d3396f69f047163b3a1dc2ffabb7402a244b2
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:15 2006 -0700

    [PATCH] irq-flags: H8300: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc2e2635bd814dc893e45e866774883a0a66cd36
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:15 2006 -0700

    [PATCH] irq-flags: FRV: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aa7135ff33bf697196f2a3104d93837096c63ff0
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:14 2006 -0700

    [PATCH] irq-flags: CRIS: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Mikael Starvik <starvik@axis.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit af0f4d3609d97dc5edbed759456ae568f6ac9ca1
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:12 2006 -0700

    [PATCH] irq-flags: ARM26: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d18ecedc021351ca432a5b7e28d8f91c00957dc7
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:11 2006 -0700

    [PATCH] irq-flags: ALPHA: Use the new IRQF_ constants
    
    Use the new IRQF_ constants and remove the SA_INTERRUPT define
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e21361619328751e2637b004e14cf360aafbddc
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 19:29:03 2006 -0700

    [PATCH] irq-flags: consolidate flags for request_irq
    
    The recent interrupt rework introduced bit value conflicts with sparc.
    Instead of introducing new architecture flags mess, move the interrupt SA_
    flags out of the signal namespace and replace them by interrupt related flags.
    
    This allows to remove the obsolete SA_INTERRUPT flag and clean up the bit
    field values.
    
    This patch:
    
    Move the interrupt related SA_ flags out of linux/signal.h and rename them to
    IRQF_ .  This moves the interrupt related flags out of the signal namespace
    and allows to remove the architecture dependencies.
    
    SA_INTERRUPT is not needed by userspace and glibc so it can be removed safely.
    
    The existing SA_ constants are kept for easy transition and will be
    removed after a 6 month grace period.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Cc: Jaroslav Kysela <perex@suse.cz>
    Cc: Takashi Iwai <tiwai@suse.de>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Mauro Carvalho Chehab <mchehab@infradead.org>
    Cc: Karsten Keil <kkeil@suse.de>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@debian.org>
    Cc: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Dave Airlie <airlied@linux.ie>
    Cc: Jens Axboe <axboe@suse.de>
    Cc: Chris Zankel <chris@zankel.net>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp>
    Cc: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>                                 Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Greg Ungerer <gerg@uclinux.org>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
    Cc: David Howells <dhowells@redhat.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 947deee8904b3c2edc7f59ab6e6242499e4dc434
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jul 2 20:45:51 2006 +0100

    [SERIAL] Convert fifosize to an unsigned int
    
    Some UARTs have more than 255 bytes of FIFO, which can't be
    represented by an unsigned char.  Change the kernel's internal
    structure to be an unsigned int, but still export an unsigned char
    via the TIOCGSERIAL ioctl.  If the TIOCSSERIAL ioctl provides a
    fifo size of 0, assume this means "don't change" otherwise we'll
    corrupt the larger fifo sizes.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 34c162f79e374556dd1384437f0dab558b5dc657
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jul 2 20:21:49 2006 +0200

    kbuild: explicit turn off gcc stack-protector
    
    Ubuntu has enabled -fstack-protector per default in gcc
    breaking kernel build. Explicit turn it off for now.
    Later we may decide to make it configurable if the
    kernel starts to support it.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 4cca56c50427eecfa2428cdee722848cd82f443c
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:34 2006 -0700

    [MMC] sdhci: remove duplicate error message
    
    When there is remaining blocks untransferred, we get two error messages saying
    almost the same thing.  Make sure at most one is shown.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 98608076a21914ab12f1c858a0cdf55366260f12
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:34 2006 -0700

    [MMC] sdhci: force DMA on some controllers
    
    Some controllers incorrectly report that the cannot do DMA.  Forcefully enable
    it for those that we know it works fine on.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 645289dca5021224279e67b4655796cafdfdad00
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:33 2006 -0700

    [MMC] sdhci: quirk for broken reset
    
    Some controllers fail to complete a reset unless you touch the clock register
    first.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 067da0f4faea4cc077a346d7848eec39a58870b4
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:32 2006 -0700

    [MMC] sdhci: Add SDHCI controller ids
    
    Add ids for SDHCI controllers so that they can be identified for quirks.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d6b0c53723753fc0cfda63f56735b225c43e1e9a
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Sun Jul 2 10:06:28 2006 -0500

    [SCSI] fix error handling in scsi_io_completion
    
    There was a logic fault in scsi_io_completion() where zero transfer
    commands that complete successfully were sent to the block layer as
    not up to date.  This patch removes the if (good_bytes > 0) gate
    around the successful completion, since zero transfer commands do have
    good_bytes == 0.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2c5f394025df6e54a9c09afda03855f3877b9afa
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:32 2006 -0700

    [MMC] sdhci: version bump sdhci
    
    New version number for sdhci driver.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit df673b227ce08a7706b30fd2bf6512393d9c3c29
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:31 2006 -0700

    [MMC] sdhci: support controller specific quirks
    
    As some specific controllers will have bugs, we need a way to map special
    behaviour to certain hardware.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6743527441430586aa82a0dee1b2700a2a974ebc
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:31 2006 -0700

    [MMC] sdhci: more DMA capabilities tests
    
    Properly test for controller interface to see if it's DMA capable.  As many
    controllers are misconfigured in this regard, also add debug parameters to
    force DMA support either way.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d96649ed5ace812ffc8d86252d7c663326ca47f8
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:30 2006 -0700

    [MMC] sdhci: reset sdhci controller early
    
    The specification states that the capabilities register might need a reset to
    get correct values after boot up.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4a9655051fb1efa568e53baf5dfb21e33bad6bf6
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:29 2006 -0700

    [MMC] sdhci: check controller version
    
    Check the interface version of the controller and bail out if it's an unknown
    version.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fd2208d7c72ef5995b730f1e23b082261499e334
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:28 2006 -0700

    [MMC] sdhci: check only relevant inhibit bits
    
    Conform to the sdhci specification as to which inhibit bits should be checked
    at different times.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1d676e02970d9e511c9b96101501da90954ee265
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jul 2 16:52:10 2006 +0100

    [MMC] sdhci: Test for invalid block size
    
    The controller has an upper limit on the block size. Make sure we do not
    cross it.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bab7696184bbf0ea48d56902bd1f9ac983079ad2
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jul 2 16:51:35 2006 +0100

    [MMC] sdhci: Avoid sdhci DMA boundaries
    
    The sdhci controllers will issue an interrupt when a configurable number of
    bytes have been transfered using DMA. The purpose is to handle multiple,
    scattered memory pages.
    
    Unfortunately, it requires that all transfers are completely aligned to
    memory pages, which we cannot guarantee. So we just disable the function.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a406f5a3b68ee1db2306a2ba1c9b00dbd3505d05
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Sun Jul 2 16:50:59 2006 +0100

    [MMC] Fix sdhci PIO routines
    
    The sdhci controllers operate with blocks, not bytes. The PIO routines must
    therefore make sure that the minimum unit transfered is a complete block.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3192a28f7d34ea8f1d0fef8ca5bc0314b5b5bb19
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:26 2006 -0700

    [MMC] sdhci: fix interrupt handling
    
    The specification says that interrupts should be cleared before the source is
    removed.  We should also not set unknown bits.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c7fa9963ee6317b54e85b260791d603ea2feb8e3
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:25 2006 -0700

    [MMC] sdhci: correct register order
    
    The sdhci specification states that some registers must be written to in a
    specific order.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1c8cde92fa5c57daa9ff58d970ca6374f8d484a2
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:25 2006 -0700

    [MMC] sdhci: proper timeout handling
    
    Use the give timeout clock and calculate a proper timeout instead of using the
    maximum at all times.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e16514d8d86ecbde18a2a7495cf028861b34c157
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:24 2006 -0700

    [MMC] sdhci: fix sdhci reset timeout
    
    The reset register is automatically cleared when the reset has completed.
    Hence, we should busy wait and not have a fixed delay.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7cb2c76fa2251474e42d55b75163c9d7ed11741e
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:23 2006 -0700

    [MMC] sdhci: fix timeout loops in sdhci
    
    The current timeout loop assume that jiffies are updated.  This might not be
    the case depending on locks and if the kernel is compiled without preemption.
    Change the system to use a counter and fixed delays.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 146ad66eac836c0b976c98f428d73e1f6a75270d
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:23 2006 -0700

    [MMC] sdhci: support for multiple voltages
    
    The sdhci controllers can support up to three voltage levels.  Detect which
    and report back to the MMC layer.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 51f82bc07a9673d790c2a17de8e3fa8046543f04
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:22 2006 -0700

    [MMC] sdhci: print device id
    
    As sdhci is a generic driver, it is helpful to see some more specific
    identification of the actual hardware in dmesg.  PCI vendor, device and
    revision is sufficient in most cases.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8ef1a14379e105c1419d21e96ffac53202bc0501
Author: Pierre Ossman <drzeus@drzeus.cx>
Date:   Fri Jun 30 02:22:21 2006 -0700

    [MMC] sdhci: check SDHCI base clock
    
    A base clock value of 0 means that the driver must get the base clock through
    some other means.  As we have no other way of getting it, we must abort.
    
    Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c7afb0f97700e73109564f83c35bfeeb14cb653b
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sun Jul 2 15:13:46 2006 +0100

    [JFFS2][XATTR] Fix memory leak in POSIX-ACL support
    
    jffs2_clear_acl() which releases acl caches allocated by kmalloc()
    was defined but it was never called. Thus, we faced to the risk
    of memory leaking.
    
    This patch plugs jffs2_clear_acl() into jffs2_do_clear_inode().
    It ensures to release acl cache when inode is cleared.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d63fb6c55f5f9eb3032fc5c3ab6eb9a26dd67cdc
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Sun Jul 2 11:55:03 2006 +1000

    [PATCH] powermac: Fix some 64b resource damage
    
    The 64 bits resource patches did a bit of damage on PowerMac causing a
    buffer overflow in macio_asic and a warning in a sound driver. The
    former is fixed by reverting the sprintf of the bus_id to %08x as it was
    before. The bus_id used for macio devices is always a 32 bits value
    (macio always sits in 32 bits space) and since it's exposed to userland,
    the format of the string shouldn't be changed like that anyway. The
    second by using the proper type for printk.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07d265dd59456f702b7d2a1ac471f06ee4adc9ef
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 23:01:50 2006 +0100

    [ARM] 3683/2:  ARM: Convert at91rm9200 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 698dfe2b4513f8a13c0e082d141e8b64e63e0313
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 23:01:49 2006 +0100

    [ARM] 3682/2:  ARM: Convert ixp4xx to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae71c426ba4b5214b75bb0e624d73a4abcffbe57
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:42 2006 +0100

    [ARM] 3702/1: ARM: Convert ixp23xx to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 418ca1f0a0d3405c5f674d005363ab1ef850c367
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:41 2006 +0100

    [ARM] 3701/1: ARM: Convert plat-omap to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c75c625df7e2395d09a1aa33cdc2212d75928de6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:40 2006 +0100

    [ARM] 3700/1: ARM: Convert lh7a40x to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 544b46de259c8be67c042bcdfaf81f0bc6fa2e6d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:39 2006 +0100

    [ARM] 3699/1: ARM: Convert s3c2410 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 119c641c9e665718f080ccde3422dd97259e0fc8
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:38 2006 +0100

    [ARM] 3698/1: ARM: Convert sa1100 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5a67b777bc4dd1d02c1381ba07e9965cfa9346e8
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:37 2006 +0100

    [ARM] 3697/1: ARM: Convert shark to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6f77dde8915638003bc038a18074e84b13aba39d
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:37 2006 +0100

    [ARM] 3696/1: ARM: Convert clps711x to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 33e39f1d5b910e37d73815d7cb856786880c60e0
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:36 2006 +0100

    [ARM] 3694/1: ARM: Convert ecard driver to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d533c1289e87cc16b0590077a182f06e4d6ad8aa
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:35 2006 +0100

    [ARM] 3693/1: ARM: Convert omap1 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a6284acbe429d6afa7746530098ea1b1bbf9f6fe
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:34 2006 +0100

    [ARM] 3691/1: ARM: Convert imx to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb03f87c98526d88f457f1ae4587142842f7e12e
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:33 2006 +0100

    [ARM] 3688/1: ARM: Convert clps7500 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a03d4d2765a047914c1f278c11e98aee44dd10bb
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:32 2006 +0100

    [ARM] 3687/1: ARM: Convert integrator to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1623dee87b4b244099eb79adc87e71e3961b86d7
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:20 2006 +0100

    [ARM] 3685/1: ARM: Convert pxa to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 427923d10c2998f05ce06c5683a0f80c8be5b744
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:19 2006 +0100

    [ARM] 3684/1: ARM: Convert l7200 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 64ffae8a32b8e5a5753527860a0aeca2b17724d6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:18 2006 +0100

    [ARM] 3681/1: ARM: Convert ixp2000 to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 55e8698931c514becdc2e225c87bbbbb0f64ca1b
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:17 2006 +0100

    [ARM] 3680/1: ARM: Convert footbridge to generic irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Fixup the conversion to generic irq subsystem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ff632054ced5e1a8a28e7196c013e5af37895f7b
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:16 2006 +0100

    [ARM] 3695/1: ARM drivers/pcmcia: Fixup includes
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Include the generic header file instead of the ARM specific one.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6e3c3be8add9167c36c27f54954dfd8d7533543
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:15 2006 +0100

    [ARM] 3689/1: ARM drivers/input/touchscreen: Fixup includes
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Include the generic header file instead of the ARM specific one.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c4bfa28aec58c588de55babe99f4c172ec534704
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:32:14 2006 +0100

    [ARM] 3686/1: ARM: arm/common: convert irq handling
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Convert the files in arch/arm/common to use the generic
    irq handling functions.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4a2581a080098ca3a0c4e416d7a282e96c75ebf8
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:30:09 2006 +0100

    [ARM] 3692/1: ARM: coswitch irq handling to the generic implementation
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Switch the ARM irq core handling to the generic implementation. The
    ARM specific header files now contain mostly migration stubs and
    helper macros. Note that each machine type must be converted after
    this step seperately. This was seperated out from the patch for easier
    review.
    
    The main changes for the machine type code is the conversion of the
    type handlers to a 'type flow' and 'chip' model. This affects only the
    multiplex interrupt handlers. A conversion macro needs to be added to
    those implementations, which defines the data structure which is
    registered by the set_irq_chained_handler() macro.
    
    Some minor fixups of include files and the conversion of data
    structure access is necessary all over the place.
    
    The mostly macro based conversion was provided to allow an easy
    migration of the existing implementations.
    
    The code compiles on all defconfigs available in arch/arm/configs
    except those which were broken also before applying the conversion
    patches.
    
    The code has been boot and runtime tested on most ARM platforms. The
    results of an extensive testing and bugfixing series can be found
    at: http://www.linutronix.de/index.php?page=testing
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8b5473fcbddbfde827ecf82aa0e81fa2a878220
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:30:08 2006 +0100

    [ARM] 3690/1: genirq: Introduce and make use of dummy irq chip
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    ARM has a couple of really dumb interrupt controllers.
    Implement a generic one and fixup the ARM migration. ARM reused
    the no_irq_chip for this purpose, but this does not work out
    for platforms which are not converted to the new interrupt
    type handling model.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a2166abd06e7a9fd34eb18b7b27da18c6146e6ef
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Sat Jul 1 22:30:07 2006 +0100

    [ARM] 3679/1: ARM: Make ARM dyntick implementation work with genirq
    
    Patch from Thomas Gleixner
    
    From: Thomas Gleixner <tglx@linutronix.de>
    
    Make the ARM dyntick implementation work with the generic
    irq code. This hopefully goes away once we consolidated the
    dyntick implementations.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 309b0f125a22ee34c8f6962677255f7bf6af5e3d
Merge: d0e5f39... 635227e...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 17:21:39 2006 -0400

    Pull smart-battery into release branch

commit d0e5f39f1ee2e55d140064bb6d74c8bad25d71d0
Merge: 361ea93... 9fdae72...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 17:21:26 2006 -0400

    Pull bugzilla-3241 into release branch

commit 361ea93cbff0e42cbc6a0f3c7a8238db9ed15648
Merge: 5f765b8... 9becf5b...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 17:20:40 2006 -0400

    Pull asus_acpi-0.30 into release branch

commit 5f765b8d68fe99c8a575265d81c62382893e1e8a
Merge: b197ba3... d07a857...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 17:19:34 2006 -0400

    Pull acpi_device_handle_cleanup into release branch

commit b197ba3c70638a3a2ae39296781912f26ac0f991
Merge: fc25465... 02438d8...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 17:19:08 2006 -0400

    Pull acpi_os_free into release branch

commit 635227ee89929a6e2920fc8aa1cd48f7225d3d93
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 16:48:23 2006 -0400

    ACPI: remove function tracing macros from drivers/acpi/*.c
    
    a few invocations appeared due to the SBS and other patches.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3f86b83243d59bb50caf5938d284d22e10d082a4
Author: Rich Townsend <rhdt@bartol.udel.edu>
Date:   Sat Jul 1 11:36:54 2006 -0400

    ACPI: add support for Smart Battery
    
    Most batteries today are ACPI "Control Method" batteries,
    but some models ship with the older "Smart Battery"
    that requires this code.
    
    Rich Townsend and Bruno Ducrot were the original authors.
    Vladimir Lebedev updated to run on latest kernel.
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3734
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2dc7667b9d0674db6572723356fe3857031101a4
Author: Nicolas Pitre <nico@cam.org>
Date:   Sat Jul 1 21:29:32 2006 +0100

    [ARM] 3541/2: workaround for PXA27x erratum E7
    
    Patch from Nicolas Pitre
    
    According to the Intel PXA27x Processor Family Specification
    Update document (doc.nr. 280071-009) erratum E7, some care must be taken
    to locate the disabling and re-enabling of the MMU to the beginning of a
    cache line to avoid problems in some circumstances.
    
    Credits to Simon Vogl <simon.vogl@researchstudios.at> for bringing this
    up.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9becf5b91ec7b600a3cfea12724165aaaf4d4527
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:15:00 2006 -0400

    ACPI: asus_acpi: correct M6N/M6R display nodes
    
    This patch switches back the display nodes for M6R and M6N -- this happened
    a while ago when a patch was misapplied (only the in-tree version was
    affected).
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3f8efdbe73a5bc96e006b2379a8c8d1d8ef52a9d
Merge: a069c89... 22b1908...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jul 1 20:43:57 2006 +0100

    Merge nommu branch

commit a069c896d0d6c028581089da7a9a9037a63c2803
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jul 1 19:58:20 2006 +0100

    [ARM] 3705/1: add supersection support to ioremap()
    
    Patch from Lennert Buytenhek
    
    Analogous to the previous patch that allows ioremap() to use section
    mappings, this patch allows ioremap() to use supersection mappings.
    Original patch by Deepak Saxena.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae95bfbb2b67eba5d67a0478a8715682a87e2616
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jul 1 19:56:48 2006 +0100

    [ARM] 3707/1: iwmmxt: use the generic thread notifier infrastructure
    
    Patch from Lennert Buytenhek
    
    This patch makes the iWMMXt context switch hook use the generic
    thread notifier infrastructure that was recently merged in commit
    d6551e884cf66de072b81f8b6d23259462c40baf.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9b8417556cca8d56467fd47a39667a4cf3ae21f3
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jul 1 19:56:47 2006 +0100

    [ARM] 3706/2: ep93xx: add cirrus logic edb9315a support
    
    Patch from Lennert Buytenhek
    
    This patch adds support for the Cirrus Logic EDB9315A, an evaluation
    board based on the Cirrus Logic EP9315 SoC, with 64M RAM, two USB host
    ports, audio in/out, three serial ports, 10/100 ethernet, and IDE, VGA,
    and LCD interfaces.
    
    The EDB9315A is a low-cost version of the EDB9315, and has only 16M
    of NOR flash, while the EDB9315 has 32M.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 179d1c6ac98a46c57e08a96a6f7f44e3a4d169da
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Sat Jul 1 19:56:46 2006 +0100

    [ARM] 3704/1: format IOP Kconfig with tabs, create more consistency
    
    Patch from Martin Michlmayr
    
    Some cosmetic changes to increase the consistency of the IOP Kconfig file.  Change some space into tabs and add a dot at the end of a help description.
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 34e00cef810d0350d3ec17345786b73ccd1287ef
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Sat Jul 1 19:56:45 2006 +0100

    [ARM] 3703/1: Add help description for ARCH_EP80219
    
    Patch from Martin Michlmayr
    
    Add a brief help description for ARCH_EP80219.
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce9c1a8388e16f2a158491ceb5c58a6101b905f6
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Jul 1 19:56:44 2006 +0100

    [ARM] 3678/1: MMC: Make OMAP MMC work
    
    Patch from Tony Lindgren
    
    This patch makes OMAP MMC work again:
    
    - Fix compile errors
    - Do not ioremap base as it is already statically mapped
    - Clean-up platform device handling
    - Fix compile warnings
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0d1bca1602fb9996a3730e0e882945d7361507b1
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Jul 1 19:56:43 2006 +0100

    [ARM] 3677/1: OMAP: Update H2 defconfig
    
    Patch from Tony Lindgren
    
    Update OMAP H2 defconfig and leave out hw random for now until
    it's been updated.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 35912c799722f0c63b8c2c49c7650d4516a5fe8a
Author: Tony Lindgren <tony@atomide.com>
Date:   Sat Jul 1 19:56:42 2006 +0100

    [ARM] 3676/1: ARM: OMAP: Fix dmtimers and timer32k to compile on OMAP1
    
    Patch from Tony Lindgren
    
    Fixes compilation errors on OMAP1. Patch from Timo Teras.
    
    Signed-off-by: Timo Teras <timo.teras@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc25465f09414538afdbceacc517dd4dbabadeca
Merge: b4bc7b5... b915543...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 1 09:59:08 2006 -0700

    Merge branch 'audit.b22' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current
    
    * 'audit.b22' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current:
      [PATCH] audit syscall classes
      [PATCH] audit: support for object context filters
      [PATCH] audit: rename AUDIT_SE_* constants
      [PATCH] add rule filterkey

commit b4bc7b53ccfa0cb793591ba11af49db8f1bc5a4d
Merge: 0cadaf4... 701842e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jul 1 09:58:43 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild:
      kbuild: documentation change on allowing checkers besides sparse
      kbuild: warn when a moduled uses a symbol marked UNUSED
      kbuild: fix segv in modpost
      kconfig: enhancing accessibility of lxdialog
      kbuild: fix ia64 breakage after introducing make -rR

commit 0cadaf45bd7c19f0bef49d1eebfff38a046b9ba4
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 1 04:36:37 2006 -0700

    [PATCH] pnp: suppress request_irq() warning
    
    Suppress the "setup_irq: irq handler mismatch" coming out of pnp_check_irq():
    failures are expected here.
    
    Cc: <stable@kernel.org>
    Cc: Santiago Garcia Mantinan <manty@manty.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c7a41691f37a1538a88e5eb9b0b73df1f834542
Author: Ingo van Lil <inguin@gmx.de>
Date:   Sat Jul 1 04:36:36 2006 -0700

    [PATCH] drivers/block/nbd.c compile fix
    
    The Network Block Device driver doesn't compile if NDEBUG is defined.
    
    Signed-off-by: Ingo van Lil <inguin@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f47634b276db6956998350e5fc26a0673fdb125c
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jul 1 04:36:36 2006 -0700

    [PATCH] kernel-doc: make man/text mode function output same
    
    Make output of function descriptions in text mode match contents of 'man'
    mode by adding Name: plus function-short-description ("purpose") and
    changing Function: to Synopsis:.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit faab17ba06d86adf5568f3e9ff914e124546d19e
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sat Jul 1 04:36:34 2006 -0700

    [PATCH] Fix problem with ATAPI DMA on IT8212 in Linux
    
    Missing variable initialisation would mean it would sometimes not put ATAPI
    devices into DMA by default.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: <Jack.Lee@ite.com.tw>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d7e1d4517f11ebeb80f92e227c8fdbc3215385c
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jul 1 04:36:34 2006 -0700

    [PATCH] kernel-doc: consistent text/man mode output
    
    Add a space between data type and struct field name in man-mode
    bitfield struct output so that they don't run together.
    
    For text-mode struct output, print the struct 'purpose' or
    short description (as done in man-mode output).
    
    For text-mode enum output, print the enum 'purpose' or
    short description (as done in man-mode output).
    
    For text-mode typedef output, print the typedef 'purpose' or
    short description (as done in man-mode output).
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd535a5965cef7551da34aef5cec47f46e97b6d9
Author: Vladimir Saveliev <vs@namesys.com>
Date:   Sat Jul 1 04:36:32 2006 -0700

    [PATCH] reiserfs: update ctime and mtime on expanding truncate
    
    Reiserfs does not update ctime and mtime on expanding truncate via
    truncate().  This patch fixes it.
    
    Signed-off-by: Vladimir Saveliev <vs@namesys.com>
    Cc: Hans Reiser <reiser@namesys.com>
    Cc: Michael Kerrisk <mtk-manpages@gmx.net>
    Cc: Chris Mason <mason@suse.com>
    Cc: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d882b172512758703ff8d9efb96505eaaee48d2e
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sat Jul 1 04:36:31 2006 -0700

    [PATCH] s390: put sys_call_table into .rodata section and write protect it
    
    Put s390's syscall tables into .rodata section and write protect this
    section to prevent misuse of it.  Suggested by Arjan van de Ven
    <arjan@infradead.org>.
    
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a581c2a4697ee264699b364399b73477af408e00
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sat Jul 1 04:36:30 2006 -0700

    [PATCH] add __[start|end]_rodata sections to asm-generic/sections.h
    
    Add __start_rodata and __end_rodata to sections.h to avoid extern
    declarations.  Needed by s390 code (see following patch).
    
    [akpm@osdl.org: update architectures]
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Andi Kleen <ak@muc.de>
    Acked-by: Kyle McMartin <kyle@mcmartin.ca>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2c2770096b686b4d2456173f53cb50e01aa635c
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jul 1 04:36:30 2006 -0700

    [PATCH] hotcpu_notifier-fixes
    
    Always use do {} while (0).  Failing to do so can cause subtle compile
    failures or bugs.
    
    Cc: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1add6781c85d7e2ee512315113a16193b3e3937d
Author: Ben Dooks <ben@fluff.org.uk>
Date:   Sat Jul 1 04:36:26 2006 -0700

    [PATCH] RTC: class driver for Samsung S3C series SoC
    
    This is a renamed and tested version of the previous S3C24XX RTC class
    driver.
    
    The driver has been renamed from the original s3c2410-rtc, which is now too
    narrow for the range of devices supported.
    
    The rtc-s3c has been chosen as there is the distinct possibility of this
    driver being carried forward into newer Samsung SoC silicon.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa79837d5b562766a3e3cfad4753a3df8e0a1319
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jul 1 04:36:25 2006 -0700

    [PATCH] Fix IS_ERR Threshold Value
    
     o Raise the maximum error number in IS_ERR_VALUE to 4095.
     o Make that number available as a new constant MAX_ERRNO.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10e5dce07e6f8f9cea1b54161a888bb099484f88
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sat Jul 1 04:36:24 2006 -0700

    [PATCH] ufs: truncate should allocate block for last byte
    
    This patch fixes buggy behaviour of UFS
    in such kind of scenario:
    open(, O_TRUNC...)
    ftruncate(, 1024)
    ftruncate(, 0)
    
    Such a scenario causes ufs_panic and remount read-only.  This happen
    because of according to specification UFS should always allocate block for
    last byte, and many parts of our implementation rely on this, but
    `ufs_truncate' doesn't care about this.
    
    To make possible return error code and to know about old size, this patch
    removes `truncate' from ufs inode_operations and uses `setattr' method to
    call ufs_truncate.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eb28931e4a2c89e53d2b0c1a02a843240bff0806
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Jul 1 04:36:24 2006 -0700

    [PATCH] uml: rename and improve actually_do_remove()
    
    Rename actually_do_remove() to remove_files_and_dir(), make it call
    closedir(), make it ignore ENOENT (I see it frequently enough).
    
    ENOENT is probably due to multiple threads calling the exitcall functions
    together*, but fixing that is non-trivial; and ignoring it is perfectly ok
    in any case.
    
    * it can surely happen: last_ditch_exit() is installed as SIGTERM handler
      at boot, and it's not removed on thread creation.  So killall vmlinux
      (which I do) surely causes that.  I've seen also a crash which seems to
      do the same.
    
    Installing the handler on only the main thread would make UML do no cleanup
    when another thread exits, and we're not sure we want that.  And mutual
    exclusion in that context is tricky - we can't use spinlock in code not on
    a kernel stack (spinlock debugging uses "current" a lot).
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 912ad92220038b0bb67e3310b8447e4d8802d581
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Jul 1 04:36:23 2006 -0700

    [PATCH] uml: fix not_dead_yet when directory is in bad state
    
    The bug occurred to me when a UML left an empty ~/.uml/Sarge-norm folder -
    when trying to reuse not_dead_yet() failed one of its check.  The comment
    says that's ok and means that we can take the directory, but while normally
    not_dead_yet() removes it and returns 0 (i.e.  go on, use this), on failure
    it returns 0 but forgets to remove it.  The fix is to remove it anytime
    we're going to return 0.
    
    But since "not_dead_yet" didn't make the interface so clear, causing this
    bug, and I couldn't find a convenient name for the mix of things it did, I
    split it into two parts:
    
    is_umdir_used()      -	returns a boolean, contains all checks of not_dead_yet()
    umdir_take_if_dead   -	tries to remove the dir unless it's used - returns
    			whether it removed it, that is we now own it.
    
    With this changes the control flow is IMHO a bit clearer and needs less
    comment for control flow.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 47e5243afe0bd2a1aca1e1f05dfbcc214267fbc9
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Sat Jul 1 04:36:19 2006 -0700

    [PATCH] uml: make copy_*_user atomic
    
    Make __copy_*_user_inatomic really atomic to avoid "Sleeping function called in
    atomic context" warnings, especially from futex code.
    
    This is made by adding another kmap_atomic slot and making copy_*_user_skas
    use kmap_atomic; also copy_*_user() becomes atomic, but that's true and is not
    a problem for i386 (and we can always add might_sleep there as done
    elsewhere).  For TT mode kmap is not used, so there's no need for this.
    
    I've had to use another slot since both KM_USER0 and KM_USER1 are used
    elsewhere and could cause conflicts.  Till now we reused the kmap_atomic slot
    list from the subarch, but that's not needed as that list must contain the
    common ones (used by generic code) + the ones used in architecture specific
    code (and Uml till now used none); so I've taken the i386 one after comparing
    it with ones from other archs, and added KM_UML_USERCOPY.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ec4d41f88872e6a5980558e362c0174dce54e40
Author: Gerd Hoffmann <kraxel@suse.de>
Date:   Sat Jul 1 04:36:18 2006 -0700

    [PATCH] SMP alternatives: skip with UP kernels
    
    Hide the magic in alternative.h and provide some dummy inline functions
    for the UP case (gcc should manage to optimize away these calls).  No
    changes in module.c.
    
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27b678dd04a636f2c351816f4b3042c8815d4e9d
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:17 2006 -0700

    [PATCH] IB/ipath: namespace cleanup: replace ips with ipath
    
    Remove ips namespace from infinipath drivers.  This renames ips_common.h to
    ipath_common.h.  Definitions, data structures, etc.  that were not used by
    kernel modules have moved to user-only headers.  All names including ips have
    been renamed to ipath.  Some names have had an ipath prefix added.
    
    Signed-off-by: Christian Bell <christian.bell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 357b552ff3d82a2e6b97c63c6394f748cb217cf8
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:16 2006 -0700

    [PATCH] IB/ipath: ignore receive queue size if SRQ is specified
    
    The receive work queue size should be ignored if the QP is created to use a
    shared receive queue according to the IB spec.
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e0018bc74275ab99d223fb5dca0b65067a5ffc1
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:15 2006 -0700

    [PATCH] IB/ipath: remove some #if 0 code related to lockable memory
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35783ec07c3f7f6902abe4433e7be1b664d0bbaf
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:15 2006 -0700

    [PATCH] IB/ipath: fix a bug that results in addresses near 0 being written via DMA
    
    We can't tell for sure if any packets are in the infinipath receive buffer
    when we shut down a chip port.  Normally this is taken care of by orderly
    shutdown, but when processes are terminated, or sending process has a bug, we
    can continue to receive packets.  So rather than writing zero to the address
    registers for the closing port, we point it at a dummy memory.
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d8e9dd050ea78862b6c5e2c873ad6407f9b2428
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:14 2006 -0700

    [PATCH] IB/ipath: read/write correct sizes through diag interface
    
    We must increment uaddr by size we are reading or writing, since it's passed
    as a char *, not a pointer to the appropriate size.
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8307c28eecea917c4754075fbb85eb398a3bc516
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:13 2006 -0700

    [PATCH] IB/ipath: support more models of InfiniPath hardware
    
    We do a few more explicit checks for specific models, and now also support the
    old PathScale serial number style, or new QLogic style.
    
    This is backwards compatible with previous versions of software and hardware.
    That is, older software will see a plausible serial number and correct GUID
    when used with a new board, while newer software will correctly handle an
    older board.
    
    Signed-off-by: Mike Albaugh <mike.albaugh@qlogic.com>
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46bbeac922906559ec46454cbc76caf03bc57353
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:12 2006 -0700

    [PATCH] IB/ipath: drop the "stats" sysfs attribute group
    
    This attribute group made it into the original driver, but should not have.
    
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1eb68b990aab4c007e520acae39c74d8116693bc
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:11 2006 -0700

    [PATCH] IB/ipath: purge sps_lid and sps_mlid arrays
    
    The two arrays only had space for 4 units.
    
    Also changed from ipath_set_sps_lid() to ipath_set_lid(); the sps was
    leftover.
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12eef41f8b72b6e11e36b48c78849c17e49781c8
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:10 2006 -0700

    [PATCH] IB/ipath: rC receive interrupt performance changes
    
    This patch separates QP state used for sending and receiving RC packets so the
    processing in the receive interrupt handler can be done mostly without locks
    being held.  ACK packets are now sent without requiring synchronization with
    the send tasklet.
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fba75200ad92892bf32d8d6f1443c6f1e4f48676
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:09 2006 -0700

    [PATCH] IB/ipath: fixes to performance get counters for IB compliance
    
    This patch fixes some problems uncovered during IB compliance testing to
    return the right values for error counters returned by the Performance Get
    Counters packet.
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85322947d761d08bd84165500f35b93c702aaaf3
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:08 2006 -0700

    [PATCH] IB/ipath: check for valid LID and multicast LIDs
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7cd658cd2bca48d3a0e747b4525c72eb8855278e
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:08 2006 -0700

    [PATCH] IB/ipath: removed redundant statements
    
    The tail register read became redundant as the result of earlier receive
    interrupt bug fixes.
    
    Drop another unneeded register read.
    
    And another line that got duplicated.
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c100f622fd9e529e0f4e4324b93f66d105dde61d
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:07 2006 -0700

    [PATCH] IB/ipath: don't confuse the max message size with the MTU
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4faba98a1a11a6129cbcc772422c9ffc0c11dd2e
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:06 2006 -0700

    [PATCH] IB/ipath: disallow send of invalid packet sizes over UD
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57abad25f844e760082c0b1ab2b176dad682ea16
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:05 2006 -0700

    [PATCH] IB/ipath: fix lost interrupts on HT-400
    
    Do an extra check to see if in-memory tail changed while processing packets,
    and if so, going back through the loop again (but only once per call to
    ipath_kreceive()).  In practice, this seems to be enough to guarantee that if
    we crossed the clearing of an interrupt at start of ipath_intr with a
    scheduled tail register update, that we'll process the "extra" packet that
    lost the interrupt because we cleared it just as it was about to arrive.
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5f99929ac584126ef3f47d805dc619abc54768c
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:05 2006 -0700

    [PATCH] IB/ipath: fixed bug 9776 for real
    
    The problem was that I was updating the head register multiple times in the
    rcvhdrq processing loop, and setting the counter on each update.  Since that
    meant that the tail register was ahead of head for all but the last update, we
    would get extra interrupts.  The fix was to not write the counter value except
    on the last update.
    
    I also changed to update rcvhdrhead and rcvegrindexhead at most every 16
    packets, if there were lots of packets in the queue (and of course, on the
    last packet, regardless).
    
    I also made some small cleanups while debugging this.
    
    With these changes, xeon/monty typically sees two openib packets per interrupt
    on sdp and ipoib, opteron/monty is about 1.25 pkts/intr.
    
    I'm seeing about 3800 Mbit/s monty/xeon, and 5000-5100 opteron/monty with
    netperf sdp.  Netpipe doesn't show as good as that, peaking at about 4400 on
    opteron/monty sdp.  Plain ipoib xeon is about 2100+ netperf, opteron 2900+, at
    128KB
    
    Signed-off-by: Dave Olson <olson@eng-12.pathscale.com>
    Signed-off-by: Bryan O'Sullivan <bos@pathscale.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13aef4942c291742064c1d5ac71df6493c4a00a9
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:04 2006 -0700

    [PATCH] IB/ipath: reduce overhead on receive interrupts
    
    Also count the number of interrupts where that works (fastrcvint).  On any
    interrupt where the port0 head and tail registers are not equal, just call the
    ipath_kreceive code without reading the interrupt status, thus saving the
    approximately 0.25usec processor stall waiting for the read to return.  If any
    other interrupt bits are set, or head==tail, take the normal path, but that
    has been reordered to handle read ahead of pioavail.  Also no longer call
    ipath_kreceive() from ipath_qcheck(), because that just seems to make things
    worse, and isn't really buying us anything, these days.
    
    Also no longer loop in ipath_kreceive(); better to not hold things off too
    long (I saw many cases where we would loop 4-8 times, and handle thousands (up
    to 3500) in a single call).
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f37bda92461313ad3bbfbf5660adc849c69718bf
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:03 2006 -0700

    [PATCH] IB/ipath: memory management cleanups
    
    Made in-memory rcvhdrq tail update be in dma_alloc'ed memory, not random user
    or special kernel (needed for ppc, also "just the right thing to do").
    
    Some cleanups to make unexpected link transitions less likely to produce
    complaints about packet errors, and also to not leave SMA packets stuck and
    unable to go out.
    
    A few other random debug and comment cleanups.
    
    Always init rcvhdrq head/tail registers to 0, to avoid race conditions (should
    have been that way some time ago).
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06993ca6bc46419027b45198a58447f4f05c14f6
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:02 2006 -0700

    [PATCH] IB/ipath: use vmalloc to allocate struct ipath_devdata
    
    This is not a DMA target, so no need to use dma_alloc_coherent on it.
    
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ed9a4a0b6df0548f9ccadb62add2c0155d5262c
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:01 2006 -0700

    [PATCH] IB/ipath: use more appropriate gfp flags
    
    This helps us to survive better when memory is fragmented.
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a40f55fc333cc20d85af92887334f41f7844e0c2
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:36:00 2006 -0700

    [PATCH] IB/ipath: enable freeze mode when shutting down device
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1d8865a2075934158af41bea5fde725efb70408
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:59 2006 -0700

    [PATCH] IB/ipath: print better debug info when handling 32/64-bit DMA mask problems
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b35f004dd3276fc43f242d9a52b4cf74877137c3
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:59 2006 -0700

    [PATCH] IB/ipath: removed unused field ipath_kregvirt from struct ipath_devdata
    
    Signed-off-by: Dave Olson <dave.olson@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe62546a6afa141c4ab9aef65f5978a1b36cb523
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:58 2006 -0700

    [PATCH] IB/ipath: enforce device resource limits
    
    These limits are somewhat artificial in that we don't actually have any
    device limits.  However, the verbs layer expects that such limits exist
    and are enforced, so we make up arbitrary (but sensible) limits.
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8a88f09f21c55a7e7f570290ecde570e2c37771
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:57 2006 -0700

    [PATCH] IB/ipath: report correct device identification information in /sys
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9edbd990bb60dd7678f7f4f8ca3d92e03a1f0e67
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:56 2006 -0700

    [PATCH] IB/ipath: return an error for unknown multicast GID
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 60460dfd425e3d301831d8dd6398620d67bbda2b
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:55 2006 -0700

    [PATCH] IB/ipath: fix some memory leaks on failure paths
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a45b7d4ece0e6dc425e9f66fa8b501b72d846db
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:55 2006 -0700

    [PATCH] IB/ipath: don't allow resources to be created with illegal values
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6665ddee85bfc336d691ea5132a2c20a1d0e8053
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:54 2006 -0700

    [PATCH] IB/ipath: remove some duplicate code
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 685f97e81b5510cfcbeccf6ae0400d3664ba8ea3
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:53 2006 -0700

    [PATCH] IB/ipath: update some comments and fix typos
    
    Signed-off-by: Robert Walsh <robert.walsh@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2acb2ff36876fdfa5f7a8bf811765aadc74c1c1
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:52 2006 -0700

    [PATCH] IB/ipath: allow diags on any unit
    
    There is no longer a /dev/ipath_diag file; instead, there's
    /dev/ipath_diag0, 1, etc.
    
    It's still not possible to have diags run on more than one unit at a time,
    but that's easy to fix at some point.
    
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6700efdfc06d2dc9ef77988a00182c2ede0f1be0
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:51 2006 -0700

    [PATCH] IB/ipath: fix shared receive queues for RC
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bbb15ea8543e2e49476a27b507be3b02828a124
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:51 2006 -0700

    [PATCH] IB/ipath: fix an indenting problem
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddd4bb22108417fdc5c35324bd13a3265581ae76
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:50 2006 -0700

    [PATCH] IB/ipath: share more common code between RC and UC protocols
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 759d57686dab8169ca68bbf938ce8e965d1e107a
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:49 2006 -0700

    [PATCH] IB/ipath: update copyrights and other strings to reflect new company name
    
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 443a64abbcb130caa315eb1110d7146365846235
Author: Bryan O'Sullivan <bos@pathscale.com>
Date:   Sat Jul 1 04:35:48 2006 -0700

    [PATCH] IB/ipath: name zero counter offsets so it's clear they aren't counters
    
    Signed-off-by: Ralph Campbell <ralph.campbell@qlogic.com>
    Signed-off-by: Bryan O'Sullivan <bryan.osullivan@qlogic.com>
    Cc: "Michael S. Tsirkin" <mst@mellanox.co.il>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 345a6e6aea43cd544c682601926bbd11c09c999b
Author: Jae-hyeon Park <jhpark@tuhep.phys.tohoku.ac.jp>
Date:   Sat Jul 1 04:35:47 2006 -0700

    [PATCH] ACPI: fix not power-manageable device message
    
    Fix typo in message.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 929a40ec324e947d4ad14cc1ced785c104c560e2
Author: Doug Thompson <norsk5@xmission.com>
Date:   Sat Jul 1 04:35:45 2006 -0700

    [PATCH] EDAC: fix module names quoted in sysfs
    
    Fix the quoted module name in the sysfs for EDAC modules and reported by several
    people.
    
    Instead of  ../_edac_e752x_/   now the following will be presented, like other
    modules:   ../edac_e752x/
    
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8c4b9d003e72199a705fb5a40fcd2487fa16933
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sat Jul 1 04:35:45 2006 -0700

    [PATCH] IRQ: warning message cleanup
    
    Make warnings more consistent.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17311c03c3e2c16d64d9e8cb2a3f45be2e2f8d3b
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sat Jul 1 04:35:44 2006 -0700

    [PATCH] IRQ: Use SA_PERCPU_IRQ, not IRQ_PER_CPU, for irqaction.flags
    
    IRQ_PER_CPU is a bit in the struct irq_desc "status" field, not in the
    struct irqaction "flags", so the previous code checked the wrong bit.
    
    SA_PERCPU_IRQ is only used by drivers/char/mmtimer.c for SGI ia64 boxes.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed6f7b10e657b98b4ba89385d02852c8bdf3980e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sat Jul 1 04:35:46 2006 -0700

    [PATCH] pi-futex: futex_wake() lockup fix
    
    Fix futex_wake() exit condition bug when handling the robust-list with PI
    futexes on them.
    
    (reported by Ulrich Drepper, debugged by the lock validator.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Ulrich Drepper <drepper@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a99e4e413e1ab9f3c567b5519f5557afd786dc62
Author: Vernon Mauery <vernux@us.ibm.com>
Date:   Sat Jul 1 04:35:42 2006 -0700

    [PATCH] pi-futex: fix mm_struct memory leak
    
    lock_queue was getting called essentially twice in a row and was
    continually incrementing the mm_count ref count, thus causing a memory
    leak.
    
    Dinakar Guniguntala provided a proper fix for the problem that simply grabs
    the spinlock for the hash bucket queue rather than calling lock_queue.
    
    The second time we do a queue_lock in futex_lock_pi, we really only need to
    take the hash bucket lock.
    
    Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Vernon Mauery <vernux@us.ibm.com>
    Acked-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fdae727645215d4dbb88912b9a176ef87911a05
Author: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
Date:   Tue Jun 27 04:49:00 2006 -0400

    ACPI: handle battery notify event on broken BIOS
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3241
    
    Signed-off-by: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 03d782524e2d0511317769521c8d5daadbab8482
Author: Christian Lupien <lupien@physique.usherbrooke.ca>
Date:   Thu Aug 19 01:26:00 2004 -0400

    ACPI: handle AC notify event on broken BIOS
    
    http://bugzilla.kernel.org/show_bug.cgi?id=3241
    
    updated by Vladimir Lebedev
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 701842e3bdd7db09db6af43fc5906ee19b61338d
Author: Dustin Kirkland <dustin.kirkland@us.ibm.com>
Date:   Tue May 23 15:57:23 2006 -0500

    kbuild: documentation change on allowing checkers besides sparse
    
    Minor documentation change on allowing checkers besides sparse
    
    This patch cleans up a couple of mentions of sparse in the inline
    toplevel Makefile documentation such that it's clear that other checkers
    besides sparse can override CHECK and CHECKFLAGS.
    
    Signed-off-by: Dustin Kirkland <dustin.kirkland@us.ibm.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 37672d4c5263d54ee4302f55242f6fd5317b0f9f
Merge: b2f71ba... 2df8386...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 11:06:01 2006 -0400

    Pull asus_acpi-0.30 into release branch

commit b2f71bade430d468398167d696731bf770de2db8
Merge: ba290ab... d07a857...
Author: Len Brown <len.brown@intel.com>
Date:   Sat Jul 1 11:05:19 2006 -0400

    Pull acpi_device_handle_cleanup into release branch

commit b915543b46a2aa599fdd2169e51bcfd88812a12b
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat Jul 1 03:56:16 2006 -0400

    [PATCH] audit syscall classes
    
    Allow to tie upper bits of syscall bitmap in audit rules to kernel-defined
    sets of syscalls.  Infrastructure, a couple of classes (with 32bit counterparts
    for biarch targets) and actual tie-in on i386, amd64 and ia64.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit c96fca213737a5b4bc569e1d9a0ef6adeff661e9
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jul 1 11:44:23 2006 +0200

    kbuild: warn when a moduled uses a symbol marked UNUSED
    
    We now have infrastructure in place to mark an EXPORTed symbol
    as unused. So the natural next step is to warn during buildtime when
    a module uses a symbol marked UNUSED.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 6e5a2d1d32596850a0ebf7fb3e54c0d69901dabd
Author: Darrel Goeddel <dgoeddel@trustedcs.com>
Date:   Thu Jun 29 16:57:08 2006 -0500

    [PATCH] audit: support for object context filters
    
    This patch introduces object audit filters based on the elements
    of the SELinux context.
    
    Signed-off-by: Darrel Goeddel <dgoeddel@trustedcs.com>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    
     kernel/auditfilter.c           |   25 +++++++++++++++++++++++++
     kernel/auditsc.c               |   40 ++++++++++++++++++++++++++++++++++++++++
     security/selinux/ss/services.c |   18 +++++++++++++++++-
     3 files changed, 82 insertions(+), 1 deletion(-)
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 3a6b9f85c641a3b89420b0c8150ed377526a1fe1
Author: Darrel Goeddel <dgoeddel@trustedcs.com>
Date:   Thu Jun 29 16:56:39 2006 -0500

    [PATCH] audit: rename AUDIT_SE_* constants
    
    This patch renames some audit constant definitions and adds
    additional definitions used by the following patch.  The renaming
    avoids ambiguity with respect to the new definitions.
    
    Signed-off-by: Darrel Goeddel <dgoeddel@trustedcs.com>
    
     include/linux/audit.h          |   15 ++++++++----
     kernel/auditfilter.c           |   50 ++++++++++++++++++++---------------------
     kernel/auditsc.c               |   10 ++++----
     security/selinux/ss/services.c |   32 +++++++++++++-------------
     4 files changed, 56 insertions(+), 51 deletions(-)
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 5adc8a6adc91c4c85a64c75a70a619fffc924817
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Wed Jun 14 18:45:21 2006 -0400

    [PATCH] add rule filterkey
    
    Add support for a rule key, which can be used to tie audit records to audit
    rules.  This is useful when a watched file is accessed through a link or
    symlink, as well as for general audit log analysis.
    
    Because this patch uses a string key instead of an integer key, there is a bit
    of extra overhead to do the kstrdup() when a rule fires.  However, we're also
    allocating memory for the audit record buffer, so it's probably not that
    significant.  I went ahead with a string key because it seems more
    user-friendly.
    
    Note that the user must ensure that filterkeys are unique.  The kernel only
    checks for duplicate rules.
    
    Signed-off-by: Amy Griffis <amy.griffis@hpd.com>

commit 534b89a9f6a86a28300cd71619112c4bbca7c0ae
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jul 1 10:10:19 2006 +0200

    kbuild: fix segv in modpost
    
    Parsing an old Modules.symvers file casued modpost to SEGV.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 66392c4f2246641c13b5dc60d15b09a71e09276f
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Date:   Fri Jun 30 02:18:50 2006 -0700

    kconfig: enhancing accessibility of lxdialog
    
    Some fix that I forgot for good accessibility of lxdialog (the cursor
    should always be left at the focus location):
    
    Have the checklist display the currently highlighted entry last, for having
    the cursor left on it (rather than on the last line of the list).
    
    Signed-off-by: Samuel Thibault <samuel.thibault@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 5e8d780d745c1619aba81fe7166c5a4b5cad2b84
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jul 1 09:58:02 2006 +0200

    kbuild: fix ia64 breakage after introducing make -rR
    
    kbuild used $ยค(*F to get filename of target without extension.
    This was used in several places all over kbuild, but introducing
    make -rR broke his for all cases where we specified full path to
    target/prerequsite. It is assumed that make -rR disables old style
    suffix-rules which is why is suddenly failed.
    
    ia64 was impacted by this change because several div* routines in
    arch/ia64/lib are build using explicit paths and then kbuild failed.
    
    Thanks to David Mosberger-Tang <David.Mosberger@acm.org> for an explanation
    what was the root-cause and for testing on ia64.
    
    This patch also fixes two uses of $(*F) in arch/um
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f58f8313a6f552d1e7889926a29f0cf91c02f55d
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jun 30 02:33:14 2006 -0700

    [SCSI] qla1280: fix section mismatch warnings
    
    Fix section mismatch warnings:
    WARNING: drivers/scsi/qla1280.o - Section mismatch: reference to
    .init.data: from .text between 'qla1280_get_token' (at offset 0x2a16)
    and 'qla1280_probe_one'
    WARNING: drivers/scsi/qla1280.o - Section mismatch: reference to
    .init.data: from .text between 'qla1280_get_token' (at offset 0x2a3c)
    and 'qla1280_probe_one'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2686de27a356914e098329463d5a8cd7aa6f29a4
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Fri Jun 30 12:54:02 2006 -0500

    [SCSI] mptsas: eliminate ghost devices
    
    One of the current problems the mptsas driver has is that of "ghost"
    devices (these are devices the firmware reports as existing, but what
    they actually represent are the parents of a lower device), so for
    example in my dual expander configuration, three expanders actually show
    up, two for the real expanders but a third is created because the
    firmware reports that the lower expander also has another expander
    connected (which is simply the port going back to the upper expander).
    
    The attached patch eliminates all these ghosts by not allocating any
    devices for them if the SAS address is the SAS address of the parent.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 413975a0f1a43a896490fc5c589d05c95624c6d2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 02:33:06 2006 -0700

    [SCSI] qla2xxx: make some more functions static
    
    Make some needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 900d9f98737b502fbd0303cfcab2773b465bb1f8
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 30 02:33:07 2006 -0700

    [SCSI] small whitespace cleanup for qlogic driver
    
    Add a few spaces to MODULE_PARM_DESC() text for qla2xxx. Without these
    spaces text runs together when modinfo prints the text.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Acked-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3e00a5b28782d65b7ac91e1e9812c281c2ec7af0
Author: Eric Moore <eric.moore@lsil.com>
Date:   Thu Jun 29 17:38:43 2006 -0600

    [SCSI] mptbase: mpt_interrupt should return IRQ_NONE
    
    The way mpt_interrupt() was coded, it was impossible for the unhandled
    interrupt detection logic to ever trigger. All interrupt handlers should
    return IRQ_NONE when they have nothing to do.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.com>
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 376ac8307868f93a0b9aa277f43dee0f63c41c1b
Author: Eric Moore <eric.moore@lsil.com>
Date:   Thu Jun 29 17:36:26 2006 -0600

    [SCSI] mptsas: make two functions static
    
    Make two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.com>
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 454e8957eb60841016deb319dbbf83042fb32a39
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Thu Jun 29 16:39:54 2006 +0300

    [SCSI] sg.c: Fix bad error handling in
    
    I got a NULL derefrence in cdev_del+1 when called from sg_remove. By looking at
    the code of sg_add, sg_alloc and sg_remove (all in drivers/scsi/sg.c) I found
    out that sg_add is calling sg_alloc but if it fails afterwards it does not
    deallocate the space that was allocated in sg_alloc and the redundant entry has
    NULL in cdev. When sg_remove is being called, it tries to perform cdev_del to
    this NULL cdev and fails.
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Acked-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2df8386cec47520b76822cb39d96709f5d353cf8
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:15:00 2006 -0400

    ACPI: asus_acpi: add S1N WLED control
    
    This patch switches back the display nodes for M6R and M6N -- this happened
    a while ago when a patch was misapplied (only the in-tree version was
    affected).
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 96d1142084281ae4601fab02be061e1267e431a3
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:13:00 2006 -0400

    ACPI: asus_acpi: add S1N WLED control
    
    This small patch adds back WLED control for S1N models, this was
    accidentally removed a while ago.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ffab0d9507dc527ff6d704ec5e7e7ccfee119fb1
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:11:00 2006 -0400

    ACPI: asus_acpi: rework model detection
    
    This patch reworks laptop model detection.
    
    This addresses the Samsung P30 issue, where the INIT method would return no
    object, but the implicit return in the AML interpreter would confuse the
    driver. It also accounts for a newer batch of Asus models whose INIT
    returns ACPI_TYPE_BUFFER instead of STRING.
    
    The handling is now much leaner, if we get a buffer or a string, we check
    against known values, in every other case we use a different path
    (currently DSDT signatures). The bulk of this patch is separating the
    string matching from asus_hotk_get_info() into a separate function.
    
    This patch properly fixes http://bugme.osdl.org/show_bug.cgi?id=5067 and
    http://bugme.osdl.org/show_bug.cgi?id=5092 and makes the driver fully
    functional again with acpi=strict on all machines.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ebccb84810729f0e86a83a65681ba2de45ff84d8
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:08:00 2006 -0400

    ACPI: asus_acpi: support L5D
    
    This patch adds support for Asus L5D and thus fixes
    http://bugme.osdl.org/show_bug.cgi?id=4695
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e067aaa7612c273d4bfd70d1bd8d80313a57685c
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:07:00 2006 -0400

    ACPI: asus_acpi: handle internal Bluetooth / support W5A
    
    This patch creates a new file named "bluetooth" under /proc/acpi/asus/.
    This file controls both the internal Bluetooth adapter's presence on the
    USB bus and the associated LED.
    
    echo 1 > /proc/acpi/asus/bluetooth to enable, 0 to disable.
    
    Additionally, the patch add support for Asus W5A, the first model that uses
    this feature.
    
    Patch originally by Fernando A. P. Gomes.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f78c589d108f4b06a012817536c9ced37f473eae
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:06:00 2006 -0400

    ACPI: asus_acpi: support A4G
    
    This patch adds support for Asus A4G.
    Originally by Giuseppe Rota.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c067a7899790ed4c03b00ed186c6e3b6a3964379
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:05:00 2006 -0400

    ACPI: asus_acpi: support W3400N
    
    This patch adds support for Asus W3400N.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 42cb891295795ed9b3048c8922d93f7a71f63968
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:04:00 2006 -0400

    ACPI: asus_acpi: LED display support
    
    This patch adds handling for front LED displays found on W1N and the like.
    Additionally, W1N is given its own model_data instance.
    
    Patch originally by รric Burghard.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ed2cb07b2bb04f14793cdeecb0b384374e979525
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:03:00 2006 -0400

    ACPI: asus_acpi: support A3G
    
    This patch adds support for Asus A3G.
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a170a5317c0298538deb170028376ec1631acc2f
Author: Karol Kozimor <sziwan@hell.org.pl>
Date:   Fri Jun 30 19:03:00 2006 -0400

    ACPI: asus_acpi: misc cleanups
    
    This patch updates the version string, copyright notices and does
    whitespace cleanup (it looks weird, blame Lindent).
    
    Signed-off-by: Karol Kozimor <sziwan@hell.org.pl>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ba290ab7dace8b3339c0cc86c221d48eed21e956
Merge: 9262e91... 02438d8...
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jun 30 20:07:01 2006 -0400

    Pull kmalloc into release branch

commit 9262e9149f346a5443300f8c451b8e7631e81a42
Merge: e37a72d... 6e990b5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:40:35 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Kill sun4v virtual device layer.
      [SERIAL] sunhv: Convert to of_driver layer.
      [SPARC64]: Mask out top 8-bits in physical address when building resources.
      [SERIAL] sunsu: Missing return statement in su_probe().

commit e37a72de84d27ee8bc0e7dbb5c2f1774ed306dbb
Merge: 93fdf10... f83ef8c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:40:17 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [IPV6]: Added GSO support for TCPv6
      [NET]: Generalise TSO-specific bits from skb_setup_caps
      [IPV6]: Added GSO support for TCPv6
      [IPV6]: Remove redundant length check on input
      [NETFILTER]: SCTP conntrack: fix crash triggered by packet without chunks
      [TG3]: Update version and reldate
      [TG3]: Add TSO workaround using GSO
      [TG3]: Turn on hw fix for ASF problems
      [TG3]: Add rx BD workaround
      [TG3]: Add tg3_netif_stop() in vlan functions
      [TCP]: Reset gso_segs if packet is dodgy

commit 93fdf10d4c28edaa1b9f80e7f9c3002359186d00
Merge: 22a3e23... 0d8fdfd...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:39:49 2006 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/core: Set alternate port number when initializing QP attributes
      IB/uverbs: Set correct user handle for user SRQs

commit 22a3e233ca08a2ddc949ba1ae8f6e16ec7ef1a13
Merge: 3930217... 6ab3d56...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:39:30 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/bunk/trivial
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/bunk/trivial:
      Remove obsolete #include <linux/config.h>
      remove obsolete swsusp_encrypt
      arch/arm26/Kconfig typos
      Documentation/IPMI typos
      Kconfig: Typos in net/sched/Kconfig
      v9fs: do not include linux/version.h
      Documentation/DocBook/mtdnand.tmpl: typo fixes
      typo fixes: specfic -> specific
      typo fixes in Documentation/networking/pktgen.txt
      typo fixes: occuring -> occurring
      typo fixes: infomation -> information
      typo fixes: disadvantadge -> disadvantage
      typo fixes: aquire -> acquire
      typo fixes: mecanism -> mechanism
      typo fixes: bandwith -> bandwidth
      fix a typo in the RTC_CLASS help text
      smb is no longer maintained
    
    Manually merged trivial conflict in arch/um/kernel/vmlinux.lds.S

commit 39302175c26d74be35715c05a0f342c9e64c21bf
Merge: 1cfef5e... 4b7a89a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:36:52 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/brodo/pcmcia-2.6/
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/brodo/pcmcia-2.6/:
      [PATCH] pcmcia: fix deadlock in pcmcia_parse_events
      [PATCH] com20020_cs: more device support
      [PATCH] au1xxx: pcmcia: fix __init called from non-init
      [PATCH] kill open-coded offsetof in cm4000_cs.c ZERO_DEV()
      [PATCH] pcmcia: convert pcmcia_cs to kthread
      [PATCH] pcmcia: fix kernel-doc function name
      [PATCH] pcmcia: hostap_cs.c - 0xc00f,0x0000 conflicts with pcnet_cs
      [PATCH] pcmcia: at91_cf suspend/resume/wakeup
      [PATCH] pcmcia: Make ide_cs work with the memory space of CF-Cards if IO space is not available
      [PATCH] pcmcia: TI PCIxx12 CardBus controller support
      [PATCH] pcmcia: warn if driver requests exclusive, but gets a shared IRQ
      [PATCH] pcmcia: expose tool in pcmcia/Documentation/pcmcia/
      [PATCH] pcmcia: another ID for serial_cs.c
      [PATCH] yenta: fix hidden PCI bus numbers
      [PATCH] yenta: do power-up only after socket is configured

commit 1cfef5ed631dedc55ca3c57a5fcfd01c77db3b59
Merge: 3e8d6ad... 00819f8...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:36:19 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (4290): Add support for the TCL M2523_3DB_E tuner.
      V4L/DVB (4289): Missing statement in drivers/media/dvb/frontends/cx22700.c
      V4L/DVB (4288): Clean out a zillion sparse warnings in pvrusb2
      V4L/DVB (4287): Pvrusb2/: possible cleanups
      V4L/DVB (4285): Cx88: add support for Geniatech Digistar / Digiwave 103g
      V4L/DVB (4284): Cx24123: fix set_voltage function according to the specs
      V4L/DVB (4282): Fix: use swzigzag for swalgo
      V4L/DVB (4281): TDA9887_SET_CONFIG should only be handled by the tda9887.
      V4L/DVB (4277): Fix CI interface on PRO KNC1 cards
      V4L/DVB (4276): Fix CI on old KNC1 DVBC cards
      V4L/DVB (4275): The FE_SET_FRONTEND_TUNE_MODE ioctl always returns EOPNOTSUPP
      V4L/DVB (4274): Eliminate use of tda9887 from pvrusb2 driver
      V4L/DVB (4273): Always log pvrusb2 device register / unregister events
      V4L/DVB (4272): Fix tveeprom supported standards
      V4L/DVB (4270): Add tda9887-specific tuner configuration
      V4L/DVB (4269): Subject: videocodec: make 1-bit fields unsigned
      V4L/DVB (4267): Remove all instances of request_module("tda9887")
      V4L/DVB (4264): Cx88-blackbird: implement VIDIOC_QUERYCTRL and VIDIOC_QUERYMENU

commit 3e8d6ad9bf1f02fdb9fd119c3c266d4b73b7175d
Merge: 598736c... 55910b2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 30 15:34:15 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6: (25 commits)
      ACPI: Kconfig: ACPI_SRAT depends on ACPI
      ACPI: drivers/acpi/scan.c: make acpi_bus_type static
      ACPI: fixup memhotplug debug message
      ACPI: ACPICA 20060623
      ACPI: C-States: only demote on current bus mastering activity
      ACPI: C-States: bm_activity improvements
      ACPI: C-States: accounting of sleep states
      ACPI: additional blacklist entry for ThinkPad R40e
      ACPI: restore comment justifying 'extra' P_LVLx access
      ACPI: fix battery on HP NX6125
      ACPIPHP: prevent duplicate slot numbers when no _SUN
      ACPI: static-ize handle_hotplug_event_func()
      ACPIPHP: use ACPI dock driver
      ACPI: dock driver
      KEVENT: add new uevent for dock
      ACPI: asus_acpi_init: propagate correct return value
      [ACPI] Print error message if remove/install notify handler fails
      ACPI: delete tracing macros from drivers/acpi/*.c
      ACPI: HW P-state coordination support
      ACPI: un-export ACPI_ERROR() -- use printk(KERN_ERR...)
      ...

commit 6e990b50ed0b45d506ff6809034508d3e210497d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 30 00:07:40 2006 -0700

    [SPARC64]: Kill sun4v virtual device layer.
    
    Replace with a simple IRQ translater in the PROM
    device tree builder.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 93872ba21d1087cde1d5f9603f3265c1c54d471c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 30 00:00:22 2006 -0700

    [SERIAL] sunhv: Convert to of_driver layer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1815aed5edbc79c6f3de6f022efb0af30dd0a70d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 29 19:58:28 2006 -0700

    [SPARC64]: Mask out top 8-bits in physical address when building resources.
    
    These top 8-bits are supposed to be ignored in the ranges and
    top-level reg properties on this platform.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a1d22d3258aed732e1778ecb2e840e6c95cb668e
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 29 19:40:19 2006 -0700

    [SERIAL] sunsu: Missing return statement in su_probe().
    
    If we have a keyboard/mouse port, don't drop through to
    calling sunsu_autoconfig().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f83ef8c0b58dac17211a4c0b6df0e2b1bd6637b1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 30 13:37:03 2006 -0700

    [IPV6]: Added GSO support for TCPv6
    
    This patch adds GSO support for IPv6 and TCPv6.  This is based on a patch
    by Ananda Raju <Ananda.Raju@neterion.com>.  His original description is:
    
    	This patch enables TSO over IPv6. Currently Linux network stacks
    	restricts TSO over IPv6 by clearing of the NETIF_F_TSO bit from
    	"dev->features". This patch will remove this restriction.
    
    	This patch will introduce a new flag NETIF_F_TSO6 which will be used
    	to check whether device supports TSO over IPv6. If device support TSO
    	over IPv6 then we don't clear of NETIF_F_TSO and which will make the
    	TCP layer to create TSO packets. Any device supporting TSO over IPv6
    	will set NETIF_F_TSO6 flag in "dev->features" along with NETIF_F_TSO.
    
    	In case when user disables TSO using ethtool, NETIF_F_TSO will get
    	cleared from "dev->features". So even if we have NETIF_F_TSO6 we don't
    	get TSO packets created by TCP layer.
    
    	SKB_GSO_TCPV4 renamed to SKB_GSO_TCP to make it generic GSO packet.
    	SKB_GSO_UDPV4 renamed to SKB_GSO_UDP as UFO is not a IPv4 feature.
    	UFO is supported over IPv6 also
    
    	The following table shows there is significant improvement in
    	throughput with normal frames and CPU usage for both normal and jumbo.
    
    	--------------------------------------------------
    	|          |     1500        |      9600         |
    	|          ------------------|-------------------|
    	|          | thru     CPU    |  thru     CPU     |
    	--------------------------------------------------
    	| TSO OFF  | 2.00   5.5% id  |  5.66   20.0% id  |
    	--------------------------------------------------
    	| TSO ON   | 2.63   78.0 id  |  5.67   39.0% id  |
    	--------------------------------------------------
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bcd76111178ebccedd46a9b3eaff65c78e5a70af
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 30 13:36:35 2006 -0700

    [NET]: Generalise TSO-specific bits from skb_setup_caps
    
    This patch generalises the TSO-specific bits from sk_setup_caps by adding
    the sk_gso_type member to struct sock.  This makes sk_setup_caps generic
    so that it can be used by TCPv6 or UFO.
    
    The only catch is that whoever uses this must provide a GSO implementation
    for their protocol which I think is a fair deal :) For now UFO continues to
    live without a GSO implementation which is OK since it doesn't use the sock
    caps field at the moment.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit adcfc7d0b4d7bc3c7edac6fdde9f3ae510bd6054
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 30 13:36:15 2006 -0700

    [IPV6]: Added GSO support for TCPv6
    
    This patch adds GSO support for IPv6 and TCPv6.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2889139a6acd2945f6143eb85f7dc2a22a352e1a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 30 13:35:46 2006 -0700

    [IPV6]: Remove redundant length check on input
    
    We don't need to check skb->len when we're just about to call
    pskb_may_pull since that checks it for us.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dd7271feba61d5dc0fab1cb5365db9926d35ea3a
Author: Patrick McHardy <kaber@trash.net>
Date:   Thu Jun 29 21:40:23 2006 -0700

    [NETFILTER]: SCTP conntrack: fix crash triggered by packet without chunks
    
    When a packet without any chunks is received, the newconntrack variable
    in sctp_packet contains an out of bounds value that is used to look up an
    pointer from the array of timeouts, which is then dereferenced, resulting
    in a crash. Make sure at least a single chunk is present.
    
    Problem noticed by George A. Theall <theall@tenablesecurity.com>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2c6059bca8cf5e7f722d909f2e5edda0491ac604
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 20:16:28 2006 -0700

    [TG3]: Update version and reldate
    
    Update version to 3.61.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52c0fd834ea0e7c6ef8616ce0a1f85bac4233ed7
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 20:15:54 2006 -0700

    [TG3]: Add TSO workaround using GSO
    
    Use GSO to workaround a rare TSO bug on some chips.  This hardware
    bug may be triggered when the TSO header size is greater than 80
    bytes.  When this condition is detected in a TSO packet, the driver
    will use GSO to segment the packet to workaround the hardware bug.
    
    Thanks to Juergen Kreileder <jk@blackdown.de> for reporting the
    problem and collecting traces to help debug the problem.
    
    And thanks to Herbert Xu <herbert@gondor.apana.org.au> for providing
    the GSO mechanism that happens to be the perfect workaround for this
    problem.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1661394e78b3b2cc868cd0e89c1066974302aaca
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 20:15:13 2006 -0700

    [TG3]: Turn on hw fix for ASF problems
    
    Clear a bit to enable a hardware fix for some ASF related problem.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f92905deb9bc89834dac247ca1a0d905ebcf629b
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 20:14:29 2006 -0700

    [TG3]: Add rx BD workaround
    
    Add workaround to limit the burst size of rx BDs being DMA'ed to the
    chip.  This works around hardware errata on a number of 5750, 5752,
    and 5755 chips.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29315e8770c20cbfe607ad962d87867115a44555
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 20:12:30 2006 -0700

    [TG3]: Add tg3_netif_stop() in vlan functions
    
    Add tg3_netif_stop() when changing the vlgrp (vlan group) pointer. It
    is necessary to quiesce the device before changing that pointer.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3820c3f3e41786322c0bb225b9c77b8deff869d1
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 29 20:11:25 2006 -0700

    [TCP]: Reset gso_segs if packet is dodgy
    
    I wasn't paranoid enough in verifying GSO information.  A bogus gso_segs
    could upset drivers as much as a bogus header would.  Let's reset it in
    the per-protocol gso_segment functions.
    
    I didn't verify gso_size because that can be verified by the source of
    the dodgy packets.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0d8fdfd71bc871ffc07fe4429db8d4934185a8ec
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Fri Jun 30 14:10:14 2006 -0700

    IB/core: Set alternate port number when initializing QP attributes
    
    Set alternate port number when initializing QP attributes.  This bug
    is OpenFabrics bugzilla bug #160.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 146d26b2bf167f831d3b7442a01cfdc2b183cb0b
Author: Roland Dreier <rolandd@cisco.com>
Date:   Fri Jun 30 13:40:13 2006 -0700

    IB/uverbs: Set correct user handle for user SRQs
    
    Store away the user handle passed in from userspace when creating an
    SRQ, so that the kernel can return the correct handle when an SRQ
    asynchronous event occurs.  (A 0 was incorrectly stored as the user
    handle as part of the changes in 9ead190b, "IB/uverbs: Don't serialize
    with ib_uverbs_idr_mutex")
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4b7a89a3c1cf545b03470416aa821fc2ff826b91
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Fri Jun 30 10:31:13 2006 +0200

    [PATCH] pcmcia: fix deadlock in pcmcia_parse_events
    
    The PCMCIA layer calls pcmcia_parse_events both from user context and
    IRQ context; the lock thus needs to be irqsave to avoid deadlocks
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 6bb1c39a43d23e4cecc7e815491b6964c6758a29
Author: Marc Sowen <Marc.Sowen@ibeo-as.de>
Date:   Sun Jun 25 01:56:24 2006 -0700

    [PATCH] com20020_cs: more device support
    
    Enable the com20020_cs arcnet driver to see the SoHard (now Mercury
    Computer Systems Inc.) SH ARC-PCMCIA card.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 0973ddddca72bc8aee8a273c232060b9608d1793
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Fri Jun 23 12:06:56 2006 +0100

    [PATCH] au1xxx: pcmcia: fix __init called from non-init
    
    This must not be marked __init, as it is called from
    au1x00_drv_pcmcia_probe.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit a2bcce8ede4fbda0c2a5f2132115715dff056b9c
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Thu Jun 15 12:26:55 2006 +0100

    [PATCH] kill open-coded offsetof in cm4000_cs.c ZERO_DEV()
    
    ... to make sure that it doesn't break again when a field changes (see
    "[PATCH] pcmcia: fix zeroing of cm4000_cs.c data" for recent example).
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 1da9ab7389b8a0789a1b3ad43d3efe80b4c57c03
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Wed Jun 14 08:01:26 2006 -0500

    [PATCH] pcmcia: convert pcmcia_cs to kthread
    
    Convert pcmcia_cs to use kthread instead of the deprecated
    kernel_thread.
    
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 66005216074337e3925514456175b202f17e23ef
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 6 12:06:41 2006 -0700

    [PATCH] pcmcia: fix kernel-doc function name
    
    Fix kernel-doc function name spello.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit fd99ddd0701385344eadaf2daa6abbc5fb086750
Author: Komuro <komurojun-mbn@nifty.com>
Date:   Mon Apr 17 21:41:21 2006 +0900

    [PATCH] pcmcia: hostap_cs.c - 0xc00f,0x0000 conflicts with pcnet_cs
    
    Comment out the ID 0xc00f,0x0000 in hostap_cs.c, as it conflicts with the
    pcnet_cs driver.
    
    Signed-off-by: Komuro <komurojun-mbn@nifty.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 0db6095d4ff8918350797dfe299d572980e82fa0
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Apr 19 06:37:48 2006 -0700

    [PATCH] pcmcia: at91_cf suspend/resume/wakeup
    
    AT91 CF updates, mostly for power management:
    
     - Add suspend/resume methods to the AT91 CF driver, disabling
       non-wakeup IRQs during system suspend.  The card detect IRQ
       serves as a wakeup event source.
    
     - Convert the driver to the more-current "platform_driver" style.
    
    So inserting or removing a CF card will wake the system, unless that
    has been disabled by updating the sysfs file; and there will be no
    more warnings about spurious IRQs during suspend/resume cycles.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 5040cb8b7e61b7a03e8837920b9eb2c839bb1947
Author: Thomas Kleffel <tk@maintech.de>
Date:   Sun May 14 15:16:30 2006 +0200

    [PATCH] pcmcia: Make ide_cs work with the memory space of CF-Cards if IO space is not available
    
    This patch enables ide_cs to access CF-cards via their common memory
    rather than via their IO space.
    
    Signed-off-by: Thomas Kleffel <tk@maintech.de>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 59e35ba1257903eaff5203f62f77554da02f5b63
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Mon May 8 23:22:07 2006 -0600

    [PATCH] pcmcia: TI PCIxx12 CardBus controller support
    
    The patch below adds support for the TI PCIxx12 CardBus controllers.
    This seems to be sufficient to detect the cardbus bridge on an HP nc6320
    and works with an orinoco wifi card.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit c533120b8da215dc02310c535fa87c5c480d0f14
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue May 16 16:16:44 2006 +0100

    [PATCH] pcmcia: warn if driver requests exclusive, but gets a shared IRQ
    
    The patch below cleans up the pcmcia code a bit on the IRQ side (I did
    this while debugging the problem just so I could read wtf it was doing),
    and also adds a warning and passes back the correct information when a
    device asks for exclusive but gets given shared. This at least means the
    dmesg dump of a problem triggered by this will have a signature to find.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit d29693bf10f376870d9bfd34bde80dd061cc4575
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun May 21 20:57:42 2006 -0700

    [PATCH] pcmcia: expose tool in pcmcia/Documentation/pcmcia/
    
    Expose example and tool source files in the Documentation/ directory in
    their own files instead of being buried (almost hidden) in readme/txt files.
    
    This will make them more visible/usable to users who may need
    to use them, to developers who may need to test with them, and
    to janitors who would update them if they were more visible.
    
    Also, if any of these possibly should not be in the kernel tree at
    all, it will be clearer that they are here and we can discuss if
    they should be removed.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit fec21889cd6ef5e604b410c08b50a8c1522d74d4
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Wed Apr 26 19:57:32 2006 +0200

    [PATCH] pcmcia: another ID for serial_cs.c
    
    Add an ID for "GlobeTrotter" cards which need a CIS override
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit b435261b1e09bb2bb6acc4abbc7f6e3d885f9e62
Author: Bernhard Kaindl <bk@suse.de>
Date:   Tue May 30 18:00:34 2006 +0200

    [PATCH] yenta: fix hidden PCI bus numbers
    
    Fixup the subordinate number parent bridge of yenta Cardbus Bridges
    before the PCI bus scan starts to make the cardbus cards which are
    otherwise hidden for PCI scans work.
    
    Signed-off-by: Bernhard Kaindl <bk@suse.de>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit d250a4810402ec68f64802b66340a0e70c61cbd3
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Mon Mar 6 17:37:04 2006 +0100

    [PATCH] yenta: do power-up only after socket is configured
    
    Power-up the card only after the socket is configured. power-down in
    the old place. The point is not to power-up the card before the interrupt
    routing is set up correctly.
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>

commit 00819f87d883bb4aff97aecc7cc722ba27bd183a
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Jun 30 13:41:26 2006 -0300

    V4L/DVB (4290): Add support for the TCL M2523_3DB_E tuner.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 91a079196fba6918bdf785533dcdfca5361577cb
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Fri Jun 30 11:51:11 2006 -0300

    V4L/DVB (4289): Missing statement in drivers/media/dvb/frontends/cx22700.c
    
    Stumbled over this because of coverity (id #492),
    seems like we are missing a return statement here and fail
    to do proper bounds checking. If this assumption is false
    we should at least change the identation to make it clear
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a0fd1cb171e8b17339a9a18ae7cf09c50022010f
Author: Mike Isely <isely@pobox.com>
Date:   Fri Jun 30 11:35:28 2006 -0300

    V4L/DVB (4288): Clean out a zillion sparse warnings in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 07e337eeab3660559cbe1fee6907d1092037aea7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 11:30:20 2006 -0300

    V4L/DVB (4287): Pvrusb2/: possible cleanups
    
    This patch contains the following possible cleanups:
    - make needlessly global code static
    - #if 0 unused global functions
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c02a34f4e3e65a7b1fb64507ec5c093e8328335e
Author: Saqeb Akhter <johoja@gmail.com>
Date:   Thu Jun 29 20:29:33 2006 -0300

    V4L/DVB (4285): Cx88: add support for Geniatech Digistar / Digiwave 103g
    
    This patch adds support for the Geniatech Digistar, aka
    Digiwave 103g DVB-S card.
    Acked-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    
    Signed-off-by: Saqeb Akhter <johoja@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ccd214b27341485bd471e4e031c33d2ba1a9aaac
Author: Saqeb Akhter <johoja@gmail.com>
Date:   Thu Jun 29 20:29:29 2006 -0300

    V4L/DVB (4284): Cx24123: fix set_voltage function according to the specs
    
    The set_voltage function in cx24123.c was corrected to match how it is
    described in the CX24123 specs, producing the correct behaviour for cards
    that require it.
    Acked-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    
    Signed-off-by: Saqeb Akhter <johoja@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 70d906354fd7fe3956366ade15ab36d6b7aed971
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Thu Jun 29 22:05:23 2006 -0300

    V4L/DVB (4282): Fix: use swzigzag for swalgo
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 00e158d52a8107ebcb0eaee6442267927f149b3b
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Thu Jun 29 16:30:51 2006 -0300

    V4L/DVB (4281): TDA9887_SET_CONFIG should only be handled by the tda9887.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c5e768a1ec281926e3a3a2b804d5004a2693d7e8
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Jun 29 13:16:11 2006 -0300

    V4L/DVB (4277): Fix CI interface on PRO KNC1 cards
    
    The original driver had a restriction that if a card as an saa7113 chip,
    then it cannot have a CI interface. This is not the case.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fd6decfbb86a73f3bdf3df2281191e7a978d8b77
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Jun 29 13:16:07 2006 -0300

    V4L/DVB (4276): Fix CI on old KNC1 DVBC cards
    
    These cards do not need the tda10021 configuration change when data is
    streamed through a CAM module. This disables it for these ones.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1b172e0c4e44151cd239c1e9260c7822a4eecdbf
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Thu Jun 29 13:16:04 2006 -0300

    V4L/DVB (4275): The FE_SET_FRONTEND_TUNE_MODE ioctl always returns EOPNOTSUPP
    
    When someone added the front-end ioctl FE_SET_FRONTEND_TUNE_MODE, they
    forgot to set the return value to 0.  It always returns EOPNOTSUPP,
    causing problems for programmers who actually check for error conditions.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 591b631f030cee5f4c6cf016dd71d565a5a4eff6
Author: Mike Isely <isely@pobox.com>
Date:   Thu Jun 29 09:26:57 2006 -0300

    V4L/DVB (4274): Eliminate use of tda9887 from pvrusb2 driver
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 47ed3bc6cf03d11207ab219945fbc556885743f4
Author: Mike Isely <isely@pobox.com>
Date:   Thu Jun 29 09:26:43 2006 -0300

    V4L/DVB (4273): Always log pvrusb2 device register / unregister events
    
    Previously the pvrusb2 driver was conditionalizing printing of the
    device register / unregister messages against a debug mask.  This sort
    of information should always appear, thus this patch.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3407e387c8144e08fafcc3287bcf9452d14f1d38
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Wed Jun 28 18:17:44 2006 -0300

    V4L/DVB (4272): Fix tveeprom supported standards
    
    The supported standards by the tuner on tveeprom were too restricted.
    It were showing just the main format, instead of the format family.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ba8fc39954bf3bc51f502e8a02f959d45edd096c
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 25 15:34:39 2006 -0300

    V4L/DVB (4270): Add tda9887-specific tuner configuration
    
    Many tda9887 settings depend on the chosen tuner. Expand the tuner parameters
    to include these tda9887 settings.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0a1153736f97db48e6bc9ab27e90b51ab50729c7
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 28 15:05:11 2006 -0300

    V4L/DVB (4269): Subject: videocodec: make 1-bit fields unsigned
    
    Make 1-bit bitfields unsigned.  Removes 68 sparse errors like these:
    drivers/media/video/videocodec.h:225:17: error: dubious one-bit signed bitfield
    drivers/media/video/msp3400-driver.h:93:32: error: dubious one-bit signed bitfield
    Acked-by: Hans Verkuil <hverkuil@xs4all.nl>
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4987abed29247063bb70374e60916584a43975ef
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jun 27 00:35:41 2006 -0300

    V4L/DVB (4267): Remove all instances of request_module("tda9887")
    
    We should no longer try to load the tda9887 module, because it no longer
    exists. The tda9887 driver has been merged into the tuner module.
    This patch removes all instances of request_module("tda9887") from
    the following video4linux drivers: bttv, cx88, em28xx and saa7134.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 38a2713ada91d5e7e4c0a1a0b12e45e2ec7079c3
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 26 23:42:39 2006 -0300

    V4L/DVB (4264): Cx88-blackbird: implement VIDIOC_QUERYCTRL and VIDIOC_QUERYMENU
    
    This patch implements the newer v4l2 control features to make the
    standard user controls and mpeg encoder controls of cx88-blackbird
    video encoder boards available to userspace.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 55910b28f7ca80af8fdfac84ddd6ece201a5928b
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 05:15:00 2006 -0400

    ACPI: Kconfig: ACPI_SRAT depends on ACPI
    
    arch/i386/kernel/srat.c won't compile without CONFIG_ACPI.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9e5289f4dd2326fb8c0a3af23a954158ca99c354
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 05:15:00 2006 -0400

    ACPI: drivers/acpi/scan.c: make acpi_bus_type static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 598736c55622f7ea65b98f93c825ff95c433877c
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 01:56:20 2006 -0700

    [PATCH] i2c-801: 64bit resource fix
    
    drivers/i2c/busses/i2c-i801.c: In function 'i801_probe':
    drivers/i2c/busses/i2c-i801.c:496: warning: format '%lx' expects type 'long unsigned int', but argument 5 has type 'resource_size_t'
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Cc: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfa7b0d46964300c849243d1a38a138b870bdc13
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 01:56:20 2006 -0700

    [PATCH] infiniband: devfs fix
    
    Remove devfs leftovers.
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c9fdcfb1b64c47ed618c103b617af3f86e1239c
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:19 2006 -0700

    [PATCH] knfsd: svcrpc: gss: server-side implementation of rpcsec_gss privacy
    
    Server-side implementation of rpcsec_gss privacy, which enables encryption of
    the payload of every rpc request and response.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c04c46aec16b3267d8fe03af886f2d41e448cd0
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:19 2006 -0700

    [PATCH] knfsd: nfsd: mark rqstp to prevent use of sendfile in privacy case
    
    Add a rq_sendfile_ok flag to svc_rqst which will be cleared in the privacy
    case so that the wrapping code will get copies of the read data instead of
    real page cache pages.  This makes life simpler when we encrypt the response.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e142ede8e064cb1ae9c2bfb17f36ab145b95ccd2
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:18 2006 -0700

    [PATCH] knfsd: svcrpc: Simplify nfsd rpcsec_gss integrity code
    
    Pull out some of the integrity code into its own function, otherwise
    svcauth_gss_release() is going to become very ungainly after the addition of
    privacy code.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ecb6a08d84d0e795648d5add64f154bc406914b
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:17 2006 -0700

    [PATCH] knfsd: nfsd4: fix open flag passing
    
    Since nfsv4 actually keeps around the file descriptors it gets from open
    (instead of just using them for a single read or write operation), we need to
    make sure that we can do RDWR opens and not just RDONLY/WRONLY.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba5a6a19d83babe00be3711db3deee5c57587b8f
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:16 2006 -0700

    [PATCH] knfsd: nfsd4: fix some open argument tests
    
    These tests always returned true; clearly that wasn't what was intended.
    
    In keeping with kernel style, make them functions instead of macros while
    we're at it.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1df0cada03644e37ae6fefd7c0267d9a531991e2
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:16 2006 -0700

    [PATCH] knfsd: svcrpc: gss: simplify rsc_parse()
    
    Adopt a simpler convention for gss_mech_put(), to simplify rsc_parse().
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 270d56e536dcd37cc819a6adb51d918185411048
Author: David M. Richter <richterd@citi.umich.edu>
Date:   Fri Jun 30 01:56:15 2006 -0700

    [PATCH] knfsd: nfsd: fix misplaced fh_unlock() in nfsd_link()
    
    In the event that lookup_one_len() fails in nfsd_link(), fh_unlock() is
    skipped and locks are held overlong.
    
    Patch was tested on 2.6.17-rc2 by causing lookup_one_len() to fail and
    verifying that fh_unlock() gets called appropriately.
    
    Signed-off-by: David M. Richter <richterd@citi.umich.edu>
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e46d8a9ccbcd3273bdb6902ca2b6da62c253e73
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:14 2006 -0700

    [PATCH] knfsd: nfsd4: remove superfluous grace period checks
    
    We're checking nfs_in_grace here a few times when there isn't really any
    reason to--bad_stateid is probably the more sensible return value anyway.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7fc90ec93a5eb71f4b08403baf5ba7176b3ec6b1
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:14 2006 -0700

    [PATCH] knfsd: nfsd: call nfsd_setuser() on fh_compose(), fix nfsd4 permissions problem
    
    In the typical v2/v3 case the only new filehandles used as arguments to
    operations are filehandles taken directly off the wire, which don't get
    dentries until fh_verify() is called.
    
    But in v4 the filehandles that are arguments to operations were often created
    by previous operations (putrootfh, lookup, etc.) using fh_compose, which sets
    the dentry in the filehandle without calling nfsd_setuser().
    
    This also means that, for example, if filesystem B is mounted on filesystem A,
    and filesystem A is exported without root-squashing, then a client can bypass
    the rootsquashing on B using a compound that starts at a filehandle in A,
    crosses into B using lookups, and then does stuff in B.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8cddc5dfc1d03a91885ef27eb91418e665577ce
Author: J. Bruce Fields <bfields@citi.umich.edu>
Date:   Fri Jun 30 01:56:13 2006 -0700

    [PATCH] knfsd: nfsd4: fix open_confirm locking
    
    Fix an improper unlock in an error path.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e4053645a67097fa9bec2794d685b1d3928757a
Author: Neil Brown <neilb@suse.de>
Date:   Fri Jun 30 01:56:12 2006 -0700

    [PATCH] knfsd: ignore ref_fh when crossing a mountpoint
    
    nfsd tries to return to a client the same sort of filehandle as was used by
    the client.  This removes some filehandle aliasing issues and means that a
    server upgrade followed by a downgrade will not confused clients not restarted
    during that time.
    
    However when crossing a mountpoint, the filehandle used for one filesystem
    doesn't provide any useful information on what sort of filehandle should be
    used on the other, and can provide misleading information.  So if the
    reference filehandle is on a different filesystem to the one being generated,
    ignore it.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c9608b2f2f51e84eba72f4bf061d360259ce656
Author: Neil Brown <neilb@suse.de>
Date:   Fri Jun 30 01:56:11 2006 -0700

    [PATCH] knfsd: remove noise about filehandle being uptodate
    
    There is a perfectly valid situation where fh_update gets called on an already
    uptodate filehandle - in nfsd_create_v3 where a CREATE_UNCHECKED finds an
    existing file and wants to just set the size.
    
    We could possible optimise out the call in that case, but the only harm
    involved is that fh_update prints a warning, so it is easier to remove the
    warning.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4bdff8c0950afa6a3f2efec6cd15159d97fac1e6
Author: Frank Filz <ffilzlnx@us.ibm.com>
Date:   Fri Jun 30 01:56:11 2006 -0700

    [PATCH] knfsd: fixing missing 'expkey' support for fsid type 3
    
    Type '3' is used for the fsid in filehandles when the device number of the
    device holding the filesystem has more than 8 bits in either major or minor.
    Unfortunately expkey_parse doesn't recognise type 3.  Fix this.
    
    (Slighty modified from Frank's original)
    
    Signed-off-by: Frank Filz <ffilzlnx@us.ibm.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a56f39375a7bd183149c18286389e4a58ac9bc95
Author: Neil Brown <neilb@suse.de>
Date:   Fri Jun 30 01:56:10 2006 -0700

    [PATCH] knfsd: improve the test for cross-device-rename in nfsd
    
    Just testing the i_sb isn't really enough, at least the vfsmnt must be the
    same.  Thanks Al.
    
    Cc: Al Viro <viro@ftp.linux.org.uk>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8c2a6a40902323b739e4e740ebf91ee357a5de5b
Author: Doug Thompson <norsk5@xmission.com>
Date:   Fri Jun 30 01:56:09 2006 -0700

    [PATCH] EDAC: maintainers update
    
    Removed Dave Peterson as per his request as co-maintainer of EDAC Thanks Dave.
    
    Added Mark Gross as maintainer of edac-e752x driver Thanks Mark
    
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Signed-off-by: Dave Peterson <dsp@llnl.gov>
    Signed-off-by: Mark Gross <mark.gross@intel.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1318952514d5651c453d89989595a9df3b37267b
Author: Doug Thompson <norsk5@xmission.com>
Date:   Fri Jun 30 01:56:08 2006 -0700

    [PATCH] EDAC: probe1 cleanup 1-of-2
    
    - Add lower-level functions that handle various parts of the initialization
      done by the xxx_probe1() functions.  Some of the xxx_probe1() functions are
      much too long and complicated (see "Chapter 5: Functions" in
      Documentation/CodingStyle).
    
    - Cleanup of probe1() functions in EDAC
    
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d7bbb91c8df26c60d223205a087507430024177
Author: Doug Thompson <norsk5@xmission.com>
Date:   Fri Jun 30 01:56:08 2006 -0700

    [PATCH] EDAC: mc numbers refactor 1-of-2
    
    Remove add_mc_to_global_list().  In next patch, this function will be
    reimplemented with different semantics.
    
    1 Reimplement add_mc_to_global_list() with semantics that allow the caller to
      determine the ID number for a mem_ctl_info structure.  Then modify
      edac_mc_add_mc() so that the caller specifies the ID number for the new
      mem_ctl_info structure.  Platform-specific code should be able to assign the
      ID numbers in a platform-specific manner.  For instance, on Opteron it makes
      sense to have the ID of the mem_ctl_info structure match the ID of the node
      that the memory controller belongs to.
    
    2 Modify callers of edac_mc_add_mc() so they use the new semantics.
    
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 37f04581abac20444e5b7106c1e1f28bec5b989c
Author: Doug Thompson <norsk5@xmission.com>
Date:   Fri Jun 30 01:56:07 2006 -0700

    [PATCH] EDAC: PCI device to DEVICE cleanup
    
    Change MC drivers from using CVS revision strings for their version number,
    Now each driver has its own local string.
    
    Remove some PCI dependencies from the core EDAC module.  Made the code 'struct
    device' centric instead of 'struct pci_dev' Most of the code changes here are
    from a patch by Dave Jiang.  It may be best to eventually move the
    PCI-specific code into a separate source file.
    
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc474c891c1993c4d608bed00c425b6db93d088d
Author: Matt LaPlante <laplam@rpi.edu>
Date:   Fri Jun 30 01:56:06 2006 -0700

    [PATCH] Documentation/IPMI typos
    
    Two typos in Documentation/IPMI.
    
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f04ac062e92a37bb0fa3313405597244b4702c1
Author: Josh Triplett <josht@vnet.ibm.com>
Date:   Fri Jun 30 01:56:05 2006 -0700

    [PATCH] rcu: Add lock annotations to RCU locking primitives
    
    Add __acquire annotations to rcu_read_lock and rcu_read_lock_bh, and add
    __release annotations to rcu_read_unlock and rcu_read_unlock_bh.  This
    allows sparse to detect improperly paired calls to these functions.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Acked-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7adc28ae75854d9d0940668404a14d1f006f80c0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 01:56:04 2006 -0700

    [PATCH] drivers/cdrom/cm206.c: cleanups
    
    - make __cm206_init() __init (required since it calls
      the __init cm206_init())
    - make the needlessly global bcdbin() static
    - remove a comment with an obsolete compile command
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b2baa1f8a82d0940db6fbbaa00e5b829a99b2c9
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 01:56:02 2006 -0700

    [PATCH] show Acorn-specific block devices menu only when required
    
    Don't show a menu that can't be entered due to lack of contents on arm (the
    options are only available on arm26).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Ian Molton <spyro@f2s.com>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 304228e29ae212952726e91511eddc0ba551bd31
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Fri Jun 30 01:56:01 2006 -0700

    [PATCH] Correct rtc_wkalrm comments
    
    This corrects the comments describing the 'enabled' and 'pending' flags in
    struct rtc_wkalrm of include/linux/rtc.h.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7b384043e27bed4f23b108481b99c518dd01a01
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 01:56:00 2006 -0700

    [PATCH] cond_resched() fix
    
    Fix a bug identified by Zou Nan hai <nanhai.zou@intel.com>:
    
    If the system is in state SYSTEM_BOOTING, and need_resched() is true,
    cond_resched() returns true even though it didn't reschedule.  Consequently
    need_resched() remains true and JBD locks up.
    
    Fix that by teaching cond_resched() to only return true if it really did call
    schedule().
    
    cond_resched_lock() and cond_resched_softirq() have a problem too.  If we're
    in SYSTEM_BOOTING state and need_resched() is true, these functions will drop
    the lock and will then try to call schedule(), but the SYSTEM_BOOTING state
    will prevent schedule() from being called.  So on return, need_resched() will
    still be true, but cond_resched_lock() has to return 1 to tell the caller that
    the lock was dropped.  The caller will probably lock up.
    
    Bottom line: if these functions dropped the lock, they _must_ call schedule()
    to clear need_resched().   Make it so.
    
    Also, uninline __cond_resched().  It's largeish, and slowpath.
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92fe15a3d24fa53e7e961c549c488d0bb642d895
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:59 2006 -0700

    [PATCH] uml: add __raw_writeq definition
    
    The x86_64 build requires a definition for __raw_writeq.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff23db5373f66a818c296f4d58adaaa10f515fd3
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:58 2006 -0700

    [PATCH] uml: fix biarch gcc build on x86_64
    
    I run an x86_64 kernel with i386 userspace (Ubuntu Dapper) and decided to try
    out UML today.  I found that UML wasn't quite aware of biarch compilers (which
    Ubuntu i386 ships).  A fix similar to what was done for x86_64 should probably
    be committed (see
    http://marc.theaimsgroup.com/?l=linux-kernel&m=113425940204010&w=2).  Without
    the FLAGS changes, the build will fail at a number of places and without the
    LINK change, the final link will fail.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Sam Ravnborg <sam@ravnborg.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d115ec0f0f094683dc2588818cb28134dd75e6d1
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:57 2006 -0700

    [PATCH] uml: remove stray file
    
    Forgot to remove arch/um/kernel/time.c when it was mostly moved to
    arch/um/os-Linux.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30df49191cf8c7a3d86ccea956ba0de911c1dc36
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:57 2006 -0700

    [PATCH] uml: remove unneeded time definitions
    
    Remove um_time() and um_stime() syscalls since they are identical to
    system-wide ones.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 572e614750c3ed27da1ec6b75dc486066a11fffd
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:56 2006 -0700

    [PATCH] uml: add locking to xtime accesses
    
    do_timer must be called with xtime_lock held.  I'm not sure boot_timer_handler
    needs this, however I don't think it hurts: it simply disables irq and takes a
    spinlock.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6edb08620fbeeeba81ab63c7129a51cdb3acd8b3
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:55 2006 -0700

    [PATCH] uml: unregister useless console when it's not needed
    
    -mm in combination with an FC5 init started dying with 'stderr=1' because init
    didn't like the lack of /dev/console and exited.  The problem was that the
    stderr console, which is intended to dump printk output to the terminal before
    the regular console is initialized, isn't a tty, and so can't make
    /dev/console operational.
    
    However, since it is registered first, the normal console, when it is
    registered, doesn't become the preferred console, and isn't attached to
    /dev/console.  Thus, /dev/console is never operational.
    
    This patch makes the stderr console unregister itself in an initcall, which is
    late enough that the normal console is registered.  When that happens, the
    normal console will become the preferred console and will be able to run
    /dev/console.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 190f4939222b8c07cd62a20e1ce0c7a97fffde99
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:55 2006 -0700

    [PATCH] uml: fix off-by-one bug in VM file creation
    
    Fix an off-by-one bug in temp file creation.  Seeking to the desired length
    and writing a byte resulted in the file being one byte longer than expected.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2b7a4bb30008dc256d63802e02b6fb950958443
Author: Jeff Dike <jdike@addtoit.com>
Date:   Fri Jun 30 01:55:54 2006 -0700

    [PATCH] uml: fix /proc/mounts parsing boundary condition
    
    When parsing /proc/mounts looking for a tmpfs mount on /dev/shm, if a string
    that we are looking for if split across reads, then it won't be recognized.
    
    Fix this by refilling the buffer whenever we advance the cursor.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Cc: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd673bca474a199fb8d1b6a311832592977ecb5f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 01:55:51 2006 -0700

    [PATCH] UML: fix the INIT_ENV_ARG_LIMIT dependencies
    
    Fix the INIT_ENV_ARG_LIMIT dependencies to what seems to have been
    intended.
    
    Spotted by Jean-Luc Leger.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 033ab7f8e5c655f49ec8039930b2efd412abbbd7
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 01:55:50 2006 -0700

    [PATCH] add smp_setup_processor_id()
    
    Presently, smp_processor_id() isn't necessarily set up until setup_arch().
    But it's used in boot_cpu_init() and printk() and perhaps in other places,
    prior to setup_arch() being called.
    
    So provide a new smp_setup_processor_id() which is called before anything
    else, wire it up for Voyager (which boots on a CPU other than #0, and broke).
    
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1836a42daf5ddfe9a891973734bd9a7d62eb504
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 30 01:55:49 2006 -0700

    [PATCH] SELinux: Add security hook definition for getioprio and insert hooks
    
    Add a new security hook definition for the sys_ioprio_get operation.  At
    present, the SELinux hook function implementation for this hook is
    identical to the getscheduler implementation but a separate hook is
    introduced to allow this check to be specialized in the future if
    necessary.
    
    This patch also creates a helper function get_task_ioprio which handles the
    access check in addition to retrieving the ioprio value for the task.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Acked-by: Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a01955f99b65622a00ba5c8b39202ddc6fa65f8
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 30 01:55:48 2006 -0700

    [PATCH] SELinux: update USB code with new kill_proc_info_as_uid
    
    This patch updates the USB core to save and pass the sending task secid when
    sending signals upon AIO completion so that proper security checking can be
    applied by security modules.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f95dc58d0505516f5cc212a966aea2f2cdb5e44
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 30 01:55:47 2006 -0700

    [PATCH] SELinux: add security hook call to kill_proc_info_as_uid
    
    This patch adds a call to the extended security_task_kill hook introduced by
    the prior patch to the kill_proc_info_as_uid function so that these signals
    can be properly mediated by security modules.  It also updates the existing
    hook call in check_kill_permission.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9008e4c5c525941967b67777945aa6266ab6326
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 30 01:55:46 2006 -0700

    [PATCH] SELinux: extend task_kill hook to handle signals sent by AIO completion
    
    This patch extends the security_task_kill hook to handle signals sent by AIO
    completion.  In this case, the secid of the task responsible for the signal
    needs to be obtained and saved earlier, so a security_task_getsecid() hook is
    added, and then this saved value is passed subsequently to the extended
    task_kill hook for use in checking.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed11d9eb2228acc483c819ab353e3c41bcb158fa
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:45 2006 -0700

    [PATCH] slab: consolidate code to free slabs from freelist
    
    Post and discussion:
    http://marc.theaimsgroup.com/?t=115074342800003&r=1&w=2
    
    Code in __shrink_node() duplicates code in cache_reap()
    
    Add a new function drain_freelist that removes slabs with objects that are
    already free and use that in various places.
    
    This eliminates the __node_shrink() function and provides the interrupt
    holdoff reduction from slab_free to code that used to call __node_shrink.
    
    [akpm@osdl.org: build fixes]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8891e5e1f93a128c3900f82035e8541357896a7
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:45 2006 -0700

    [PATCH] Light weight event counters
    
    The remaining counters in page_state after the zoned VM counter patches
    have been applied are all just for show in /proc/vmstat.  They have no
    essential function for the VM.
    
    We use a simple increment of per cpu variables.  In order to avoid the most
    severe races we disable preempt.  Preempt does not prevent the race between
    an increment and an interrupt handler incrementing the same statistics
    counter.  However, that race is exceedingly rare, we may only loose one
    increment or so and there is no requirement (at least not in kernel) that
    the vm event counters have to be accurate.
    
    In the non preempt case this results in a simple increment for each
    counter.  For many architectures this will be reduced by the compiler to a
    single instruction.  This single instruction is atomic for i386 and x86_64.
     And therefore even the rare race condition in an interrupt is avoided for
    both architectures in most cases.
    
    The patchset also adds an off switch for embedded systems that allows a
    building of linux kernels without these counters.
    
    The implementation of these counters is through inline code that hopefully
    results in only a single instruction increment instruction being emitted
    (i386, x86_64) or in the increment being hidden though instruction
    concurrency (EPIC architectures such as ia64 can get that done).
    
    Benefits:
    - VM event counter operations usually reduce to a single inline instruction
      on i386 and x86_64.
    - No interrupt disable, only preempt disable for the preempt case.
      Preempt disable can also be avoided by moving the counter into a spinlock.
    - Handling is similar to zoned VM counters.
    - Simple and easily extendable.
    - Can be omitted to reduce memory use for embedded use.
    
    References:
    
    RFC http://marc.theaimsgroup.com/?l=linux-kernel&m=113512330605497&w=2
    RFC http://marc.theaimsgroup.com/?l=linux-kernel&m=114988082814934&w=2
    local_t http://marc.theaimsgroup.com/?l=linux-kernel&m=114991748606690&w=2
    V2 http://marc.theaimsgroup.com/?t=115014808400007&r=1&w=2
    V3 http://marc.theaimsgroup.com/?l=linux-kernel&m=115024767022346&w=2
    V4 http://marc.theaimsgroup.com/?l=linux-kernel&m=115047968808926&w=2
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca889e6c45e0b112cb2ca9d35afc66297519b5d5
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:44 2006 -0700

    [PATCH] Use Zoned VM Counters for NUMA statistics
    
    The numa statistics are really event counters.  But they are per node and
    so we have had special treatment for these counters through additional
    fields on the pcp structure.  We can now use the per zone nature of the
    zoned VM counters to realize these.
    
    This will shrink the size of the pcp structure on NUMA systems.  We will
    have some room to add additional per zone counters that will all still fit
    in the same cacheline.
    
     Bits	Prior pcp size	  	Size after patch	We can add
     ------------------------------------------------------------------
     64	128 bytes (16 words)	80 bytes (10 words)	48
     32	 76 bytes (19 words)	56 bytes (14 words)	8 (64 byte cacheline)
    							72 (128 byte)
    
    Remove the special statistics for numa and replace them with zoned vm
    counters.  This has the side effect that global sums of these events now
    show up in /proc/vmstat.
    
    Also take the opportunity to move the zone_statistics() function from
    page_alloc.c into vmstat.c.
    
    Discussions:
    V2 http://marc.theaimsgroup.com/?t=115048227000002&r=1&w=2
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Acked-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bab1846a0582f627f5ec22aa2dc5f4f3e82e8176
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 01:55:43 2006 -0700

    [PATCH] zoned-vm-counters: remove read_page_state()
    
    No callers.
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c24f21bda88df4574de0a32a2a1558a23adae1b8
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:42 2006 -0700

    [PATCH] zoned vm counters: remove useless struct wbs
    
    Remove writeback state
    
    We can remove some functions now that were needed to calculate the page state
    for writeback control since these statistics are now directly available.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2c5e30c9a1420902262aa923794d2ae4e0bc391
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:41 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_bounce to per zone counter
    
    Conversion of nr_bounce to a per zone counter
    
    nr_bounce is only used for proc output.  So it could be left as an event
    counter.  However, the event counters may not be accurate and nr_bounce is
    categorizing types of pages in a zone.  So we really need this to also be a
    per zone counter.
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fd39fc8561be33065306bdac0e30414e1e8ac8e1
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:40 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_unstable to per zone counter
    
    Conversion of nr_unstable to a per zone counter
    
    We need to do some special modifications to the nfs code since there are
    multiple cases of disposition and we need to have a page ref for proper
    accounting.
    
    This converts the last critical page state of the VM and therefore we need to
    remove several functions that were depending on GET_PAGE_STATE_LAST in order
    to make the kernel compile again.  We are only left with event type counters
    in page state.
    
    [akpm@osdl.org: bugfixes]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce866b34ae1b7f1ce60234cf65855886ac7e7d30
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:40 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_writeback to per zone counter
    
    Conversion of nr_writeback to per zone counter.
    
    This removes the last page_state counter from arch/i386/mm/pgtable.c so we
    drop the page_state from there.
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b1e7a8fd854d2f895730e82137400012b509650e
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:39 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_dirty to per zone counter
    
    This makes nr_dirty a per zone counter.  Looping over all processors is
    avoided during writeback state determination.
    
    The counter aggregation for nr_dirty had to be undone in the NFS layer since
    we summed up the page counts from multiple zones.  Someone more familiar with
    NFS should probably review what I have done.
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df849a1529c106f7460e51479ca78fe07b07dc8c
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:38 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_pagetables to per zone counter
    
    Conversion of nr_page_table_pages to a per zone counter
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a865ffa34b6117a5e0b67640a084d8c2e198c93
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:38 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_slab to per zone counter
    
    - Allows reclaim to access counter without looping over processor counts.
    
    - Allows accurate statistics on how many pages are used in a zone by
      the slab. This may become useful to balance slab allocations over
      various zones.
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34aa1330f9b3c5783d269851d467326525207422
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:37 2006 -0700

    [PATCH] zoned vm counters: zone_reclaim: remove /proc/sys/vm/zone_reclaim_interval
    
    The zone_reclaim_interval was necessary because we were not able to determine
    how many unmapped pages exist in a zone.  Therefore we had to scan in
    intervals to figure out if any pages were unmapped.
    
    With the zoned counters and NR_ANON_PAGES we now know the number of pagecache
    pages and the number of mapped pages in a zone.  So we can simply skip the
    reclaim if there is an insufficient number of unmapped pages.  We use
    SWAP_CLUSTER_MAX as the boundary.
    
    Drop all support for /proc/sys/vm/zone_reclaim_interval.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3dbd34460ff54962d3e3244b6bcb7f5295356e6
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:36 2006 -0700

    [PATCH] zoned vm counters: split NR_ANON_PAGES off from NR_FILE_MAPPED
    
    The current NR_FILE_MAPPED is used by zone reclaim and the dirty load
    calculation as the number of mapped pagecache pages.  However, that is not
    true.  NR_FILE_MAPPED includes the mapped anonymous pages.  This patch
    separates those and therefore allows an accurate tracking of the anonymous
    pages per zone.
    
    It then becomes possible to determine the number of unmapped pages per zone
    and we can avoid scanning for unmapped pages if there are none.
    
    Also it may now be possible to determine the mapped/unmapped ratio in
    get_dirty_limit.  Isnt the number of anonymous pages irrelevant in that
    calculation?
    
    Note that this will change the meaning of the number of mapped pages reported
    in /proc/vmstat /proc/meminfo and in the per node statistics.  This may affect
    user space tools that monitor these counters!  NR_FILE_MAPPED works like
    NR_FILE_DIRTY.  It is only valid for pagecache pages.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf02cf4b6cf931d060ad5c6ce9b960af6faefd2d
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:36 2006 -0700

    [PATCH] zoned vm counters: remove NR_FILE_MAPPED from scan control structure
    
    We can now access the number of pages in a mapped state in an inexpensive way
    in shrink_active_list.  So drop the nr_mapped field from scan_control.
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 347ce434d57da80fd5809c0c836f206a50999c26
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:35 2006 -0700

    [PATCH] zoned vm counters: conversion of nr_pagecache to per zone counter
    
    Currently a single atomic variable is used to establish the size of the page
    cache in the whole machine.  The zoned VM counters have the same method of
    implementation as the nr_pagecache code but also allow the determination of
    the pagecache size per zone.
    
    Remove the special implementation for nr_pagecache and make it a zoned counter
    named NR_FILE_PAGES.
    
    Updates of the page cache counters are always performed with interrupts off.
    We can therefore use the __ variant here.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65ba55f500a37272985d071c9bbb35256a2f7c14
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:34 2006 -0700

    [PATCH] zoned vm counters: convert nr_mapped to per zone counter
    
    nr_mapped is important because it allows a determination of how many pages of
    a zone are not mapped, which would allow a more efficient means of determining
    when we need to reclaim memory in a zone.
    
    We take the nr_mapped field out of the page state structure and define a new
    per zone counter named NR_FILE_MAPPED (the anonymous pages will be split off
    from NR_MAPPED in the next patch).
    
    We replace the use of nr_mapped in various kernel locations.  This avoids the
    looping over all processors in try_to_free_pages(), writeback, reclaim (swap +
    zone reclaim).
    
    [akpm@osdl.org: bugfix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2244b95a7bcf8d24196f8a3a44187ba5dfff754c
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:33 2006 -0700

    [PATCH] zoned vm counters: basic ZVC (zoned vm counter) implementation
    
    Per zone counter infrastructure
    
    The counters that we currently have for the VM are split per processor.  The
    processor however has not much to do with the zone these pages belong to.  We
    cannot tell f.e.  how many ZONE_DMA pages are dirty.
    
    So we are blind to potentially inbalances in the usage of memory in various
    zones.  F.e.  in a NUMA system we cannot tell how many pages are dirty on a
    particular node.  If we knew then we could put measures into the VM to balance
    the use of memory between different zones and different nodes in a NUMA
    system.  For example it would be possible to limit the dirty pages per node so
    that fast local memory is kept available even if a process is dirtying huge
    amounts of pages.
    
    Another example is zone reclaim.  We do not know how many unmapped pages exist
    per zone.  So we just have to try to reclaim.  If it is not working then we
    pause and try again later.  It would be better if we knew when it makes sense
    to reclaim unmapped pages from a zone.  This patchset allows the determination
    of the number of unmapped pages per zone.  We can remove the zone reclaim
    interval with the counters introduced here.
    
    Futhermore the ability to have various usage statistics available will allow
    the development of new NUMA balancing algorithms that may be able to improve
    the decision making in the scheduler of when to move a process to another node
    and hopefully will also enable automatic page migration through a user space
    program that can analyse the memory load distribution and then rebalance
    memory use in order to increase performance.
    
    The counter framework here implements differential counters for each processor
    in struct zone.  The differential counters are consolidated when a threshold
    is exceeded (like done in the current implementation for nr_pageache), when
    slab reaping occurs or when a consolidation function is called.
    
    Consolidation uses atomic operations and accumulates counters per zone in the
    zone structure and also globally in the vm_stat array.  VM functions can
    access the counts by simply indexing a global or zone specific array.
    
    The arrangement of counters in an array also simplifies processing when output
    has to be generated for /proc/*.
    
    Counters can be updated by calling inc/dec_zone_page_state or
    _inc/dec_zone_page_state analogous to *_page_state.  The second group of
    functions can be called if it is known that interrupts are disabled.
    
    Special optimized increment and decrement functions are provided.  These can
    avoid certain checks and use increment or decrement instructions that an
    architecture may provide.
    
    We also add a new CONFIG_DMA_IS_NORMAL that signifies that an architecture can
    do DMA to all memory and therefore ZONE_NORMAL will not be populated.  This is
    only currently set for IA64 SGI SN2 and currently only affects
    node_page_state().  In the best case node_page_state can be reduced to
    retrieving a single counter for the one zone on the node.
    
    [akpm@osdl.org: cleanups]
    [akpm@osdl.org: export vm_stat[] for filesystems]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6ac2354d791195ca40822b84d73d48a4e8b7f2b
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 30 01:55:32 2006 -0700

    [PATCH] zoned vm counters: create vmstat.c/.h from page_alloc.c/.h
    
    NOTE: ZVC are *not* the lightweight event counters.  ZVCs are reliable whereas
    event counters do not need to be.
    
    Zone based VM statistics are necessary to be able to determine what the state
    of memory in one zone is.  In a NUMA system this can be helpful for local
    reclaim and other memory optimizations that may be able to shift VM load in
    order to get more balanced memory use.
    
    It is also useful to know how the computing load affects the memory
    allocations on various zones.  This patchset allows the retrieval of that data
    from userspace.
    
    The patchset introduces a framework for counters that is a cross between the
    existing page_stats --which are simply global counters split per cpu-- and the
    approach of deferred incremental updates implemented for nr_pagecache.
    
    Small per cpu 8 bit counters are added to struct zone.  If the counter exceeds
    certain thresholds then the counters are accumulated in an array of
    atomic_long in the zone and in a global array that sums up all zone values.
    The small 8 bit counters are next to the per cpu page pointers and so they
    will be in high in the cpu cache when pages are allocated and freed.
    
    Access to VM counter information for a zone and for the whole machine is then
    possible by simply indexing an array (Thanks to Nick Piggin for pointing out
    that approach).  The access to the total number of pages of various types does
    no longer require the summing up of all per cpu counters.
    
    Benefits of this patchset right now:
    
    - Ability for UP and SMP configuration to determine how memory
      is balanced between the DMA, NORMAL and HIGHMEM zones.
    
    - loops over all processors are avoided in writeback and
      reclaim paths. We can avoid caching the writeback information
      because the needed information is directly accessible.
    
    - Special handling for nr_pagecache removed.
    
    - zone_reclaim_interval vanishes since VM stats can now determine
      when it is worth to do local reclaim.
    
    - Fast inline per node page state determination.
    
    - Accurate counters in /sys/devices/system/node/node*/meminfo. Current
      counters are counting simply which processor allocated a page somewhere
      and guestimate based on that. So the counters were not useful to show
      the actual distribution of page use on a specific zone.
    
    - The swap_prefetch patch requires per node statistics in order to
      figure out when processors of a node can prefetch. This patch provides
      some of the needed numbers.
    
    - Detailed VM counters available in more /proc and /sys status files.
    
    References to earlier discussions:
    V1 http://marc.theaimsgroup.com/?l=linux-kernel&m=113511649910826&w=2
    V2 http://marc.theaimsgroup.com/?l=linux-kernel&m=114980851924230&w=2
    V3 http://marc.theaimsgroup.com/?l=linux-kernel&m=115014697910351&w=2
    V4 http://marc.theaimsgroup.com/?l=linux-kernel&m=115024767318740&w=2
    
    Performance tests with AIM7 did not show any regressions.  Seems to be a tad
    faster even.  Tested on ia64/NUMA.  Builds fine on i386, SMP / UP.  Includes
    fixes for s390/arm/uml arch code.
    
    This patch:
    
    Move counter code from page_alloc.c/page-flags.h to vmstat.c/h.
    
    Create vmstat.c/vmstat.h by separating the counter code and the proc
    functions.
    
    Move the vm_stat_text array before zoneinfo_show.
    
    [akpm@osdl.org: s390 build fix]
    [akpm@osdl.org: HOTPLUG_CPU build fix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 672b2714ae57af16fe7d760dc4e0918a7a6cb0fa
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 01:55:30 2006 -0700

    [PATCH] fix ISTALLION=y
    
    drivers/char/istallion.c: In function รขยยstli_initbrdsรขยย:
    drivers/char/istallion.c:4150: error: implicit declaration of function รขยยstli_parsebrdรขยย
    drivers/char/istallion.c:4150: error: รขยยstli_brdspรขยย undeclared (first use in this function)
    drivers/char/istallion.c:4150: error: (Each undeclared identifier is reported only once
    drivers/char/istallion.c:4150: error: for each function it appears in.)
    drivers/char/istallion.c:4164: error: implicit declaration of function รขยยstli_argbrdsรขยย
    
    While I was at it, I also removed the #ifdef MODULE around the initialation
    code to allow it to perhaps work when built into the kernel and made a
    needlessly global function static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e09793bb9182115e6f5d15fd6571ac2b72d7a08a
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 01:55:29 2006 -0700

    [PATCH] msr.c: use register_hotcpu_notifier()
    
    register_cpu_notifier() cannot do anything in a module, in a
    !CONFIG_HOTPLUG_CPU kernel.
    
    Cc: Chandra Seetharaman <sekharan@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1017f6afd578fe519d316d7148356703c04e8f03
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 30 01:55:29 2006 -0700

    [PATCH] fix platform_device_put/del mishaps
    
    This fixes drivers/char/pc8736x_gpio.c and drivers/char/scx200_gpio.c to
    use the platform_device_del/put ops correctly.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Jim Cromie <jim.cromie@gmail.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 491d525ff19ead83b5e27ae4096b5c3e27805601
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 30 01:55:27 2006 -0700

    [PATCH] fix drivers/video/imacfb.c compilation
    
    Fix build error on x86_64.  There's nothing even remotely close to
    imacmp_seg in the kernel, so I removed the whole line.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Edgar Hucek <hostmaster@ed-soft.at>
    Cc: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ab3d5624e172c553004ecc862bfeac16d9d68b7
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Fri Jun 30 19:25:36 2006 +0200

    Remove obsolete #include <linux/config.h>
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit e02169b682bc448ccdc819dc8639ed34a23cedd8
Author: Pavel Machek <pavel@suse.cz>
Date:   Fri Jun 30 18:59:59 2006 +0200

    remove obsolete swsusp_encrypt
    
    Remove SWSUSP_ENCRYPT config option; it is no longer implemented.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit fcb4ee8852e2e9326e102f0910c029de45afabba
Author: Matt LaPlante <laplam@rpi.edu>
Date:   Fri Jun 30 18:57:59 2006 +0200

    arch/arm26/Kconfig typos
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 590abf09d62841677ac9676574f1017b7f5235e1
Author: Matt LaPlante <laplam@rpi.edu>
Date:   Fri Jun 30 18:56:29 2006 +0200

    Documentation/IPMI typos
    
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 3539c272f18d54dc1e4c109d336d33d6a5c94b93
Author: Matt LaPlante <laplam@rpi.edu>
Date:   Fri Jun 30 18:53:46 2006 +0200

    Kconfig: Typos in net/sched/Kconfig
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 779cbf0bbc75629ecffd480d2f261af42ea80bbe
Author: Paul Collins <paul@ondioline.org>
Date:   Fri Jun 30 18:50:03 2006 +0200

    v9fs: do not include linux/version.h
    
    I noticed that part of v9fs was being rebuilt when version.h changed.
    
    Signed-off-by: Paul Collins <paul@ondioline.org>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 741c80c24b20b5ce1903d767a13caeac0fef62c6
Author: Patrick Pletscher <pat@student.ethz.ch>
Date:   Fri Jun 30 18:35:56 2006 +0200

    Documentation/DocBook/mtdnand.tmpl: typo fixes
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit d254c8f70abcb560d941e68c8c1f3b816c44a020
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:29:51 2006 +0200

    typo fixes: specfic -> specific
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit d0f19d82173e46bd7f7544d0207aec7d467b3fe4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:28:43 2006 +0200

    typo fixes in Documentation/networking/pktgen.txt
    
    Three typos in only one line...
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 80f7228b59e4bbe9d840af3ff0f2fe480d6e7c79
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:27:16 2006 +0200

    typo fixes: occuring -> occurring
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 47bdd718c6547d84c8e140cd0f495c016f13b08b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:25:18 2006 +0200

    typo fixes: infomation -> information
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit fd245f00695cbcf0f8430f35841c216559d243df
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:23:39 2006 +0200

    typo fixes: disadvantadge -> disadvantage
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 0418726bb5c7b5a70c7e7e82e860d5979d0c78cf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:23:04 2006 +0200

    typo fixes: aquire -> acquire
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b3c2ffd5343645fc9b46f67e8c0eaac1e2dde7b4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:20:44 2006 +0200

    typo fixes: mecanism -> mechanism
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 9aaeded72f923212e6d9d7b6b8e3830e983f323e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:19:55 2006 +0200

    typo fixes: bandwith -> bandwidth
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 27ae4104b69bd5e3d9006ba31b39fc186020f38e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:18:41 2006 +0200

    fix a typo in the RTC_CLASS help text
    
    This patch fixes a typo spotted by
    Matt LaPlante <webmaster@cyberdogtech.com>.
    
    This patch fixes kernel Bugzilla #6704.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 9c4d3ef7b5f61625651304eb848b9be95c6c7c9a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 30 18:17:39 2006 +0200

    smb is no longer maintained
    
    The smb filesystem in the Linux kernel is unmaintained for years.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 0a1f1ab8de815cb63a48d24450f6b5fbb1b1f89c
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 30 03:15:00 2006 -0400

    ACPI: fixup memhotplug debug message
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 02438d8771ae6a4b215938959827692026380bf9
Author: Len Brown <len.brown@intel.com>
Date:   Fri Jun 30 03:19:10 2006 -0400

    ACPI: delete acpi_os_free(), use kfree() directly
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d07a8577f695c807977af003b6e75f996e01a15f
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:52 2006 -0400

    ACPI: video: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8a4444bf5a3fd890441e6cbd5022a3c24edbe69a
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:51 2006 -0400

    ACPI: thermal: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 14747204055d4b8fb2f8517beca91985ac617c17
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:51 2006 -0400

    ACPI: power: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 432bfaba7d4e70483fc5af164e020066f4921bff
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:51 2006 -0400

    ACPI: pci_root: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e0e4e117d4c898b0df749d5b88c86955151abf53
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:50 2006 -0400

    ACPI: pci_link: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 579c896cc91434e4feb938f780eba580c93fa0da
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:50 2006 -0400

    ACPI: fan: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 6c689537726ec665246d2f60c48475be2efac2d0
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:50 2006 -0400

    ACPI: button: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 39cb61e26771891f843cb433ee6febd9159bce73
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:49 2006 -0400

    ACPI: battery: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9453ece92688fedd7755d2ea54b2efe88822a91b
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:49 2006 -0400

    ACPI: acpi_memhotplug: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1b5b8b81bddd1c5dcf690f43422e20b0e964c349
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:49 2006 -0400

    ACPI: ac: Remove unneeded acpi_handle from driver.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 901302688cb85b49a9551ec1f6aa86fb081ae49e
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:48 2006 -0400

    ACPI: video: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 38ba7c9ed2e1a222103332031f76c28b726573f5
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:48 2006 -0400

    ACPI: thermal: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5fbc19efdbedf9c9125774f66f80d6a6ccce4566
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:43 2006 -0400

    ACPI: power: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2d1e0a02f16f84c2358843d91d6ca0131a0587ce
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:43 2006 -0400

    ACPI: pci_root: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 67a7136573b24a0d1f85a4aab131558a02910d25
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:42 2006 -0400

    ACPI: pci_link: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit dc8c2b2744f8563aa5feb07488e4cc207a70ac70
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:42 2006 -0400

    ACPI: fan: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 27b1d3e85b1dfd9037d3fbb98b2e2aacca01da39
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:42 2006 -0400

    ACPI: button: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3b073ec3667ee63e35b66752a30eeedef1e1e772
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:41 2006 -0400

    ACPI: battery: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b863278523f7adbacb9e34133f4b6397cdab9977
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:41 2006 -0400

    ACPI: acpi_memhotplug: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a6ba5ebef91a59fabd45962e576c02468dbcd33f
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:41 2006 -0400

    ACPI: ac: Use acpi_device's handle instead of driver's
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e6afa0de1476290a876dfd1237a97cce7735581c
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:40 2006 -0400

    ACPI: video: add struct acpi_device to struct acpi_video_bus.
    
    - Use it instead of acpi_bus_get_device() in acpi_video_bus_notify()
      and use the one from struct acpi_video_device in
      acpi_video_device_notify().
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 415985728895ba3127116bc4f999caf94420ed85
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:40 2006 -0400

    ACPI: power: add struct acpi_device to struct acpi_power_resource
    
    - Use it instead of acpi_bus_get_device() where we can..
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8348e1b19a06b1932f65e84e1d59be29e1626c2b
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:40 2006 -0400

    ACPI: thermal: add struct acpi_device to struct acpi_thermal.
    
    - Use it instead of acpi_bus_get_device() where we can..
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 32917e5b589d813c9dc0f2d140d8c52898ddb6fb
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:39 2006 -0400

    ACPI: pci root: add struct acpi_device to struct acpi_pci_root.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 74b142e0fe039fcde42030c064763577e11ca004
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:39 2006 -0400

    ACPI: fan: add struct acpi_device to struct acpi_fan.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 145def84a177c01cf3cc6cfbb67a029f39a8ac35
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:39 2006 -0400

    ACPI: battery: add struct acpi_device to struct acpi_battery.
    
    - Use it instead of acpi_bus_get_device()..
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3b74863df5d46f794052b5ee010cfc8fd66819dd
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:38 2006 -0400

    ACPI: acpi_memhotplug: add struct acpi_device to struct acpi_memory_device.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit af96179a8298832cc58be212d0e4988d8a1e11bf
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Fri May 19 16:54:32 2006 -0400

    ACPI: ac: Add struct acpi_device to struct acpi_ac.
    
    Signed-off-by: Patrick Mochel <mochel@linux.intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ae90dd5dbee461652b90d9f7d292ba47dc3dc4b8
Author: Dave Jones <davej@redhat.com>
Date:   Fri Jun 30 01:40:45 2006 -0400

    Move workqueue exports to where the functions are defined.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit ffac80e925e54d84f6ea580231aa46d0ef051756
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Jun 28 13:52:18 2006 -0700

    [CPUFREQ] Misc cleanups in ondemand.
    
    Misc cleanups in ondemand. Should have zero functional impact.
    Also adding Alexey as author.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2f8a835c705794f71726eb12c06fb0f24fe07ed3
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Jun 28 13:51:19 2006 -0700

    [CPUFREQ] Make ondemand sampling per CPU and remove the mutex usage in sampling path.
    
    Make ondemand sampling per CPU and remove the mutex usage in sampling path.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7a6bc1cdd506cf81f856f0fef4e56a2ba0c5a26d
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Jun 28 13:50:33 2006 -0700

    [CPUFREQ] Add queue_delayed_work_on() interface for workqueues.
    
    Add queue_delayed_work_on() interface for workqueues.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit ccb2fe209dac9ff67f6351e783e610073afaaeaf
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Jun 28 13:49:52 2006 -0700

    [CPUFREQ] Remove slowdown from ondemand sampling path.
    
    Remove slowdown from ondemand sampling path. This reduces the code path length
    in dbs_check_cpu() by half. slowdown was not used by ondemand by default.
    If there are any user level tools that were using this tunable, they
    may report error now.
    
    Signed-off-by: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 501b7c77de3e90519e95fd99e923bf9a29cd120d
Merge: 74e651f... 184d7d2...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 17:44:21 2006 -0700

    Merge branch 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2
    
    * 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2:
      ocfs2: remove redundant NULL checks in ocfs2_direct_IO_get_blocks()
      ocfs2: clean up some osb fields
      ocfs2: fix init of uuid_net_key
      ocfs2: silence a debug print
      ocfs2: silence ENOENT during lookup of broken links
      ocfs2: Cleanup message prints
      ocfs2: silence -EEXIST from ocfs2_extent_map_insert/lookup
      [PATCH] fs/ocfs2/dlm/dlmrecovery.c: make dlm_lockres_master_requery() static
      ocfs2: warn the user on a dead timeout mismatch
      ocfs2: OCFS2_FS must depend on SYSFS
      ocfs2: Compile-time disabling of ocfs2 debugging output.
      configfs: Clear up a few extra spaces where there should be TABs.
      configfs: Release memory in configfs_example.

commit 74e651f0aa100f3e5d3432a8dd8869c089e8d72f
Merge: 6002e45... 0702056...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 17:43:43 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (30 commits)
      [TIPC]: Initial activation message now includes TIPC version number
      [TIPC]: Improve response to requests for node/link information
      [TIPC]: Fixed skb_under_panic caused by tipc_link_bundle_buf
      [IrDA]: Fix the AU1000 FIR dependencies
      [IrDA]: Fix RCU lock pairing on error path
      [XFRM]: unexport xfrm_state_mtu
      [NET]: make skb_release_data() static
      [NETFILTE] ipv4: Fix typo (Bugzilla #6753)
      [IrDA]: MCS7780 usb_driver struct should be static
      [BNX2]: Turn off link during shutdown
      [BNX2]: Use dev_kfree_skb() instead of the _irq version
      [ATM]: basic sysfs support for ATM devices
      [ATM]: [suni] change suni_init to __devinit
      [ATM]: [iphase] should be __devinit not __init
      [ATM]: [idt77105] should be __devinit not __init
      [BNX2]: Add NETIF_F_TSO_ECN
      [NET]: Add ECN support for TSO
      [AF_UNIX]: Datagram getpeersec
      [NET]: Fix logical error in skb_gso_ok
      [PKT_SCHED]: PSCHED_TADD() and PSCHED_TADD2() can result,tv_usec >= 1000000
      ...

commit 0702056f9f41274a06e21cb05f12b4265b4867a2
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Thu Jun 29 12:33:51 2006 -0700

    [TIPC]: Initial activation message now includes TIPC version number
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ea13847b240e689e8f291355c36b46de9f44ddf9
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Thu Jun 29 12:33:20 2006 -0700

    [TIPC]: Improve response to requests for node/link information
    
    Now allocates reply space for "get links" request based on number of actual
    links, not number of potential links.  Also, limits reply to "get links" and
    "get nodes" requests to 32KB to match capabilities of tipc-config utility
    that issued request.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>

commit e49060c7cab6ca856d048e1e10d71c0e6fedf376
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Thu Jun 29 12:32:46 2006 -0700

    [TIPC]: Fixed skb_under_panic caused by tipc_link_bundle_buf
    
    Now determines tailroom of bundle buffer by directly inspection of buffer.
    Previously, buffer was assumed to have a max capacity equal to the link MTU,
    but the addition of link MTU negotiation means that the link MTU can increase
    after the bundle buffer is allocated.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit caf430f37119af5faac9252ec4e18cb1c55dde26
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 17:03:19 2006 -0700

    [IrDA]: Fix the AU1000 FIR dependencies
    
    AU1000 FIR is broken, it should depend on SOC_AU1000.
    
    Spotted by Jean-Luc Leger.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1bc1731133140dccdd08899a59bbc06d975d0a15
Author: Josh Triplett <josh@freedesktop.org>
Date:   Thu Jun 29 17:02:31 2006 -0700

    [IrDA]: Fix RCU lock pairing on error path
    
    irlan_client_discovery_indication calls rcu_read_lock and rcu_read_unlock, but
    returns without unlocking in an error case.  Fix that by replacing the return
    with a goto so that the rcu_read_unlock always gets executed.
    
    Signed-off-by: Josh Triplett <josh@freedesktop.org>
    Acked-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 244055fdc8dd39407a33d4eb9f4053dd4ca8f1bb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 13:04:41 2006 -0700

    [XFRM]: unexport xfrm_state_mtu
    
    This patch removes the unused EXPORT_SYMBOL(xfrm_state_mtu).
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5bba17127e7c78e819560519449db237e1b0f99b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 13:02:35 2006 -0700

    [NET]: make skb_release_data() static
    
    skb_release_data() no longer has any users in other files.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c22751b73a3770b3046102bb97b139218ff1875b
Author: Matt LaPlante <laplam@rpi.edu>
Date:   Thu Jun 29 12:51:15 2006 -0700

    [NETFILTE] ipv4: Fix typo (Bugzilla #6753)
    
    This patch fixes bugzilla #6753, a typo in the netfilter Kconfig
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7263ade1e1e72e34fc3c179f3aeaa07a11872d22
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 12:39:07 2006 -0700

    [IrDA]: MCS7780 usb_driver struct should be static
    
    This patch makes a needlessly global struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6c4f095eae35e83eb6148dec7f72874eeadf0c9b
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 12:38:15 2006 -0700

    [BNX2]: Turn off link during shutdown
    
    Minor change in shutdown logic to effect a link down.
    
    Update version to 1.4.43.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 745720e58303f940e12944bf7fab52bc9ce48bda
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 12:37:41 2006 -0700

    [BNX2]: Use dev_kfree_skb() instead of the _irq version
    
    Change all dev_kfree_skb_irq() and dev_kfree_skb_any() to
    dev_kfree_skb().  These calls are never used in irq context.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 656d98b09d57d4e1185c5d2436a42600d48fbcb5
Author: Roman Kagan <rkagan@mail.ru>
Date:   Thu Jun 29 12:36:34 2006 -0700

    [ATM]: basic sysfs support for ATM devices
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d17f086550a6fdb13fe82371d60ebf80904c6f96
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Jun 29 12:35:49 2006 -0700

    [ATM]: [suni] change suni_init to __devinit
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 249c14b55c8576ad8c6ec23c7c1b3b2219b33e54
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Jun 29 12:35:32 2006 -0700

    [ATM]: [iphase] should be __devinit not __init
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b47eb0eb9bb5fcee6394f0d9bde0b471f7329841
Author: Chas Williams <chas@cmf.nrl.navy.mil>
Date:   Thu Jun 29 12:35:02 2006 -0700

    [ATM]: [idt77105] should be __devinit not __init
    
    Signed-off-by: Chas Williams <chas@cmf.nrl.navy.mil>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b11d6213529b33d81c21eeba97343e3b714e62e7
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 12:31:21 2006 -0700

    [BNX2]: Add NETIF_F_TSO_ECN
    
    Add NETIF_F_TSO_ECN feature for all bnx2 hardware.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b0da8537037f337103348f239ad901477e907aa8
Author: Michael Chan <mchan@broadcom.com>
Date:   Thu Jun 29 12:30:00 2006 -0700

    [NET]: Add ECN support for TSO
    
    In the current TSO implementation, NETIF_F_TSO and ECN cannot be
    turned on together in a TCP connection.  The problem is that most
    hardware that supports TSO does not handle CWR correctly if it is set
    in the TSO packet.  Correct handling requires CWR to be set in the
    first packet only if it is set in the TSO header.
    
    This patch adds the ability to turn on NETIF_F_TSO and ECN using
    GSO if necessary to handle TSO packets with CWR set.  Hardware
    that handles CWR correctly can turn on NETIF_F_TSO_ECN in the dev->
    features flag.
    
    All TSO packets with CWR set will have the SKB_GSO_TCPV4_ECN set.  If
    the output device does not have the NETIF_F_TSO_ECN feature set, GSO
    will split the packet up correctly with CWR only set in the first
    segment.
    
    With help from Herbert Xu <herbert@gondor.apana.org.au>.
    
    Since ECN can always be enabled with TSO, the SOCK_NO_LARGESEND sock
    flag is completely removed.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 877ce7c1b3afd69a9b1caeb1b9964c992641f52a
Author: Catherine Zhang <cxzhang@watson.ibm.com>
Date:   Thu Jun 29 12:27:47 2006 -0700

    [AF_UNIX]: Datagram getpeersec
    
    This patch implements an API whereby an application can determine the
    label of its peer's Unix datagram sockets via the auxiliary data mechanism of
    recvmsg.
    
    Patch purpose:
    
    This patch enables a security-aware application to retrieve the
    security context of the peer of a Unix datagram socket.  The application
    can then use this security context to determine the security context for
    processing on behalf of the peer who sent the packet.
    
    Patch design and implementation:
    
    The design and implementation is very similar to the UDP case for INET
    sockets.  Basically we build upon the existing Unix domain socket API for
    retrieving user credentials.  Linux offers the API for obtaining user
    credentials via ancillary messages (i.e., out of band/control messages
    that are bundled together with a normal message).  To retrieve the security
    context, the application first indicates to the kernel such desire by
    setting the SO_PASSSEC option via getsockopt.  Then the application
    retrieves the security context using the auxiliary data mechanism.
    
    An example server application for Unix datagram socket should look like this:
    
    toggle = 1;
    toggle_len = sizeof(toggle);
    
    setsockopt(sockfd, SOL_SOCKET, SO_PASSSEC, &toggle, &toggle_len);
    recvmsg(sockfd, &msg_hdr, 0);
    if (msg_hdr.msg_controllen > sizeof(struct cmsghdr)) {
        cmsg_hdr = CMSG_FIRSTHDR(&msg_hdr);
        if (cmsg_hdr->cmsg_len <= CMSG_LEN(sizeof(scontext)) &&
            cmsg_hdr->cmsg_level == SOL_SOCKET &&
            cmsg_hdr->cmsg_type == SCM_SECURITY) {
            memcpy(&scontext, CMSG_DATA(cmsg_hdr), sizeof(scontext));
        }
    }
    
    sock_setsockopt is enhanced with a new socket option SOCK_PASSSEC to allow
    a server socket to receive security context of the peer.
    
    Testing:
    
    We have tested the patch by setting up Unix datagram client and server
    applications.  We verified that the server can retrieve the security context
    using the auxiliary data mechanism of recvmsg.
    
    Signed-off-by: Catherine Zhang <cxzhang@watson.ibm.com>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d6b4991ad5d1a9840e12db507be1a6593def01fe
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 29 12:25:53 2006 -0700

    [NET]: Fix logical error in skb_gso_ok
    
    The test in skb_gso_ok is backwards.  Noticed by Michael Chan
    <mchan@broadcom.com>.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4ee303dfeac6451b402e3d8512723d3a0f861857
Author: Shuya MAEDA <maeda-sxb@necst.nec.co.jp>
Date:   Wed Jun 28 01:40:35 2006 -0700

    [PKT_SCHED]: PSCHED_TADD() and PSCHED_TADD2() can result,tv_usec >= 1000000
    
    Signed-off-by: Shuya MAEDA <maeda-sxb@necst.nec.co.jp>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d3a85337937bb5e3db676eeb4f3bf7f02533b44
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Jun 27 13:33:10 2006 -0700

    [NET]: Make illegal_highdma more anal
    
    Rather than having illegal_highdma as a macro when HIGHMEM is off, we
    can turn it into an inline function that returns zero.  This will catch
    callers that give it bad arguments.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 47da8ee681d04e68ca1b1812c10e28162150d453
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Tue Jun 27 13:29:00 2006 -0700

    [TCP]: Export accept queue len of a TCP listening socket via rx_queue
    
    While debugging a TCP server hang issue, we noticed that currently there is
    no way for a user to get the acceptq backlog value for a TCP listen socket.
    
    All the standard networking utilities that display socket info like netstat,
    ss and /proc/net/tcp have 2 fields called rx_queue and tx_queue. These
    fields do not mean much for listening sockets. This patch uses one of these
    unused fields(rx_queue) to export the accept queue len for listening sockets.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7bdb545d23026b18be53289fd866d1ac07f5f8c
Author: Darrel Goeddel <dgoeddel@trustedcs.com>
Date:   Tue Jun 27 13:26:11 2006 -0700

    [NETLINK]: Encapsulate eff_cap usage within security framework.
    
    This patch encapsulates the usage of eff_cap (in netlink_skb_params) within
    the security framework by extending security_netlink_recv to include a required
    capability parameter and converting all direct usage of eff_caps outside
    of the lsm modules to use the interface.  It also updates the SELinux
    implementation of the security_netlink_send and security_netlink_recv
    hooks to take advantage of the sid in the netlink_skb_params struct.
    This also enables SELinux to perform auditing of netlink capability checks.
    Please apply, for 2.6.18 if possible.
    
    Signed-off-by: Darrel Goeddel <dgoeddel@trustedcs.com>
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by:  James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 576a30eb6453439b3c37ba24455ac7090c247b5a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue Jun 27 13:22:38 2006 -0700

    [NET]: Added GSO header verification
    
    When GSO packets come from an untrusted source (e.g., a Xen guest domain),
    we need to verify the header integrity before passing it to the hardware.
    
    Since the first step in GSO is to verify the header, we can reuse that
    code by adding a new bit to gso_type: SKB_GSO_DODGY.  Packets with this
    bit set can only be fed directly to devices with the corresponding bit
    NETIF_F_GSO_ROBUST.  If the device doesn't have that bit, then the skb
    is fed to the GSO engine which will allow the packet to be sent to the
    hardware if it passes the header check.
    
    This patch changes the sg flag to a full features flag.  The same method
    can be used to implement TSO ECN support.  We simply have to mark packets
    with CWR set with SKB_GSO_ECN so that only hardware with a corresponding
    NETIF_F_TSO_ECN can accept them.  The GSO engine can either fully segment
    the packet, or segment the first MTU and pass the rest to the hardware for
    further segmentation.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 68c1692e3ea5d79f24cb5cc566c4a73939d13d25
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 27 03:02:14 2006 -0700

    [NETFILTER]: statistic match: add missing Kconfig help text
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ef47c6a7b8e36e3b160433673b1b68db799aabcd
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 27 03:01:48 2006 -0700

    [NETFILTER]: ip_queue/nfnetlink_queue: drop bridge port references when dev disappears
    
    When a device that is acting as a bridge port is unregistered, the
    ip_queue/nfnetlink_queue notifier doesn't check if its one of
    physindev/physoutdev and doesn't release the references if it is.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d120cfb544ed6161b9d32fb6c4648c471807ee6b
Merge: 9dce0e9... bf7e851...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 29 19:57:46 2006 -0400

    merge linus into release branch
    
    Conflicts:
    
    	drivers/acpi/acpi_memhotplug.c

commit 1c7e47726a88303e4cfa2785f0a357bf1ceecee1
Author: Jorge Matias <jorge.matias@motorola.com>
Date:   Tue Jun 27 03:01:25 2006 -0700

    [NETFILTER]: xt_sctp: fix --chunk-types matching
    
    xt_sctp uses an incorrect header offset when --chunk-types is used.
    
    Signed-off-by: Jorge Matias <jorge.matias@motorola.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9abdcf6b6cf387035d934c77bf9ebe5e747166f9
Author: Yuri Gushin <yuri@ecl-labs.org>
Date:   Tue Jun 27 03:01:03 2006 -0700

    [NETFILTER]: xt_tcpudp: fix double unregistration in error path
    
    "xt_unregister_match(AF_INET, &tcp_matchstruct)" is called twice,
    leaving "udp_matchstruct" registered, in case of a failure in the
    registration of the udp6 structure.
    
    Signed-off-by: Yuri Gushin <yuri@ecl-labs.org>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 40a839fdbd5d76cebb2a61980bc1fc7ecd784be2
Author: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
Date:   Tue Jun 27 03:00:35 2006 -0700

    [NETFILTER]: nf_conntrack: Fix undefined references to local_bh_*
    
      CC      net/netfilter/nf_conntrack_proto_sctp.o
    net/netfilter/nf_conntrack_proto_sctp.c: In function `sctp_print_conntrack':
    net/netfilter/nf_conntrack_proto_sctp.c:206: warning: implicit declaration of function `local_bh_disable'
    net/netfilter/nf_conntrack_proto_sctp.c:208: warning: implicit declaration of function `local_bh_enable'
      CC      net/netfilter/nf_conntrack_netlink.o
    net/netfilter/nf_conntrack_netlink.c: In function `ctnetlink_dump_table':
    net/netfilter/nf_conntrack_netlink.c:429: warning: implicit declaration of function `local_bh_disable'
    net/netfilter/nf_conntrack_netlink.c:452: warning: implicit declaration of function `local_bh_enable'
    
    Spotted by Toralf Fรถrster
    
    Signed-off-by: Yasuyuki Kozakai <yasuyuki.kozakai@toshiba.co.jp>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit da298d3a4f01dbc10c54da75d6b5717a99fb9cbc
Author: Patrick McHardy <kaber@trash.net>
Date:   Tue Jun 27 03:00:09 2006 -0700

    [NETFILTER]: x_tables: fix xt_register_table error propagation
    
    When xt_register_table fails the error is not properly propagated back.
    Based on patch by Lepton Wu <ytht.net@gmail.com>.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9dce0e950dbfab4148f35ac6f297d8638cdc63c4
Merge: f1b2ad5... 967440e...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 29 19:55:27 2006 -0400

    Pull acpica into release branch

commit 6002e45045a190a112bc3bc2134d0ff4fac7ced7
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 29 16:20:12 2006 -0700

    [SUNHME]: Mark SBUS probing routines as __devinit.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 675f740e557bc752cdcdb0739d80666b488abb58
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 29 15:48:59 2006 -0700

    [SPARC64]: Print symbol name of regs->tpc on kernel unaligned accesses.
    
    This makes things easier to track down, especially in modules.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f57caaefacc2ffa7ace11a325c663e569e2b4164
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:42:29 2006 -0700

    [SERIO] i8042-sparcio.h: Convert to of_driver framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ff0d2fc6a60624df46055f47ea7261c8198c7862
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:28:05 2006 -0700

    [SPARC64]: time: Kill unnecessary asm/{fhc,sbus,ebus,isa}.h includes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit abbce6e2fd156cbcab2fc1247c7dec8a0c68e7e3
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:22:46 2006 -0700

    [SPARC64] power: Convert to of_driver.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f2ad06a20133125e5b6ab6497c6d90e63ded4761
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:22:22 2006 -0700

    [SPARC64] auxio: Remove asm/{sbus,ebus}.h includes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89d1d0ab4d99e1e0fe193352e1dd857787a0bfc0
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:18:50 2006 -0700

    [SERIAL] sunsab: Fix section mis-match errors.
    
    sunsab_init_one() needs to be __devinit, not __init
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c4d37215a824820e1b614ff9f6969af72cd953f4
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:17:47 2006 -0700

    [SERIAL] sunsab: Convert to of_driver framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9efc3715f7b13127fd202108304352e1be76e077
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:14:17 2006 -0700

    [SERIAL] sun{su,zilog}: Add missing MODULE_*() niceties.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1708d242d222e751a0922e3c56ef857cf60bbedd
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:14:03 2006 -0700

    [SERIAL] sunsu: Convert to of_driver framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4fa97dcf9d48b02934c60a48873199850351e760
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:13:40 2006 -0700

    [SERIAL] sunzilog: Fix bugs in device deregristration.
    
    1) Need to unregister 2 ports per of_device.
    2) Need to of_iounmap() 1 mapping per of_device.
    3) Need to free up the IRQ only after all devices
       have been unregistered.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3676463178401293d625a102a00da0473fa33a1b
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:13:17 2006 -0700

    [SERIAL] sunzilog: Convert to of_driver.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f96cd1a69d4c43e3473406a1fdf15cd9f1de5e5
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:08:02 2006 -0700

    [SPARC]: sparc32 side of of_device layer IRQ resolution.
    
    Happily, life is much simpler on 32-bit sparc systems.
    The "intr" property, preferred over the "interrupts"
    property is used-as.  Some minor translations of this
    value happen on sun4d systems.
    
    The stage is now set to rewrite the sparc serial driver
    probing to use the of_driver framework, and then to convert
    all SBUS, EBUS, and ISA drivers in-kind so that we can nuke
    all those special bus frameworks.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2b1e59787198e75fb2ffb3bb4fb247da1c55ac12
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 15:07:37 2006 -0700

    [SPARC64]: of_device layer IRQ resolution
    
    Do IRQ determination generically by parsing the PROM properties,
    and using IRQ controller drivers for final resolution.
    
    One immediate positive effect is that all of the IRQ frobbing
    in the EBUS, ISA, and PCI controller layers has been eliminated.
    We just look up the of_device and use the properly computed
    value.
    
    The PCI controller irq_build() routines are gone and no longer
    used.  Unfortunately sbus_build_irq() has to remain as there is
    a direct reference to this in the sunzilog driver.  That can be
    killed off once the sparc32 side of this is written and the
    sunzilog driver is transformed into an "of" bus driver.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c3a8b85f5ac2c21f4ef75e87bfe55ee7a753ffcf
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:43:37 2006 -0700

    [SPARC64]: Fix typo in clock_probe().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 915214853d7681416d6bdd1591787cdbded459e7
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:39:40 2006 -0700

    [SPARC64] clock: Only probe central fhc clock on Enterprise boxes.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00cde6748255a84beecfdea4caeaf7c9cd05a527
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:39:11 2006 -0700

    [SPARC64] power: Do not pass SA_SHIRQ to request_irq().
    
    This needs to be a unique interrupt source because we do
    not have a register or similar to poll to make sure the
    IRQ is really for us.  We do not have any dev_id to pass
    in anyways, and the generic IRQ layer is now enforcing
    that when SA_SHIRQ is specified, dev_id must be non-NULL.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d44b3be88ed58bb1bbbf7d70c533598b3dc3d870
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:38:51 2006 -0700

    [SPARC64]: Fix typo in isa_dev_get_irq_using_imap().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 24ac26d425c96659b12cf16de7cbfe3bcbd73f05
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:38:21 2006 -0700

    [SPARC64]: Let irq_install_pre_handler() get called multiple times.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 946ea09962a56674fe564b41c3007933bb41a068
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:37:09 2006 -0700

    [SPARC]: Kill interrupt stuff and linux_phandle from device_node.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ee5caf0ee19f65a5e29bf20a0dffd8be8b4827fd
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:36:52 2006 -0700

    [SPARC]: Convert clock drivers to of_driver framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 36a59bd89c50c1090c7438db89f751720974a6fc
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:36:35 2006 -0700

    [SPARC64] auxio: Convert to pure of_device driver.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 50312ce9dd794eef3df9e64194ba95ca730d82c8
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:35:52 2006 -0700

    [SPARC]: Convert all FB SBUS drivers to of_driver framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ca9fab410fbef6fc3a13284f5c26faccade21d1
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:35:33 2006 -0700

    [SPARC]: Add of_io{remap,unmap}().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95714e12dfb4794ee120f058fdf763e61baaad82
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:35:14 2006 -0700

    [SPARC]: Encode I/O space into resource flags on sparc32.
    
    On sparc64 we don't need to do this because the resource
    values are large enough to encode the full physical address.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cf44bbc26cf1361b692ab68c884f6a0df7da2fdb
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:34:50 2006 -0700

    [SPARC]: Beginnings of generic of_device framework.
    
    The idea is to fully construct the device register and
    interrupt values into these of_device objects, and convert
    all of SBUS, EBUS, ISA drivers to use this new stuff.
    
    Much ideas and code taken from Ben H.'s powerpc work.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ae9a3489a4e2ba665a344a9250c2af05b7b0c59
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:34:12 2006 -0700

    [SPARC]: Add of_n_{addr,size}_cells().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 286bbe87c143ca7ecee5bb499cd78048c5a05d49
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 29 14:27:13 2006 -0700

    [SPARC64]: Kill starfire_cookie from SBUS/PCI.
    
    Totally unused.
    
    We need to traverse the list of global IRQ translaters,
    so storing it in the per-bus structures was useless.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 184d7d20d352c7374f70ebca7468dc8cd5cc618a
Author: Florin Malita <fmalita@gmail.com>
Date:   Sat Jun 3 19:30:10 2006 -0400

    ocfs2: remove redundant NULL checks in ocfs2_direct_IO_get_blocks()
    
    Signed-off-by: Florin Malita <fmalita@gmail.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 784270435b001164054e803421a624ef1098519d
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu May 4 12:03:26 2006 -0700

    ocfs2: clean up some osb fields
    
    Get rid of osb->uuid, osb->proc_sub_dir, and osb->osb_id. Those fields were
    unused, or could easily be removed. As a result, we also no longer need
    MAX_OSB_ID or ocfs2_globals_lock.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a75a6e4c3ada10b15e26f6d12f72c03efde266e0
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu May 4 11:49:22 2006 -0700

    ocfs2: fix init of uuid_net_key
    
    ocfs2_initialize_super() should be copying from the beginning of the uuid.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e7607ab3daeeaea50b3b5aebe8dfa29a1dfb8311
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu Apr 27 17:53:22 2006 -0700

    ocfs2: silence a debug print
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit d426721cf10824391fd38bd42f38357ace2b1c08
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Thu Apr 27 16:44:13 2006 -0700

    ocfs2: silence ENOENT during lookup of broken links
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 781ee3e2b1ea41d56ed86ae1c85fc40b7f330205
Author: Sunil Mushran <sunil.mushran@oracle.com>
Date:   Thu Apr 27 16:41:31 2006 -0700

    ocfs2: Cleanup message prints
    
    Signed-off-by: Sunil Mushran <sunil.mushran@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a43db30c7c614c08851a97476aeb317ca2e14475
Author: Joel Becker <joel.becker@oracle.com>
Date:   Thu Apr 27 16:36:14 2006 -0700

    ocfs2: silence -EEXIST from ocfs2_extent_map_insert/lookup
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 8169cae5a13b9f8ae53edc183825d20b4f4daeeb
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Mar 31 16:53:55 2006 +0200

    [PATCH] fs/ocfs2/dlm/dlmrecovery.c: make dlm_lockres_master_requery() static
    
    dlm_lockres_master_requery() became global without any external usage.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 0db638f44e7db9732d9c5704ca837f57ce061f42
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Tue May 9 15:09:35 2006 -0700

    ocfs2: warn the user on a dead timeout mismatch
    
    Print a warning to the user when a node with a different dead count joins
    the region.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c05d52c748da10a3f27f6e638875514153776b15
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 22 12:03:35 2006 +0200

    fs/jffs2/: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4ba63adce06bc7549e1dd36344123dbaccdaa52f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Mar 26 14:25:52 2006 +0200

    ocfs2: OCFS2_FS must depend on SYSFS
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 2b388c67906ee8cd3bf1a600a7023cd0807d414f
Author: Joel Becker <joel.becker@oracle.com>
Date:   Wed May 10 18:28:59 2006 -0700

    ocfs2: Compile-time disabling of ocfs2 debugging output.
    
    Give gcc the chance to compile out the debug logging code in ocfs2.
    This saves some size at the expense of being able to debug the code.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e7515d065d09f6450c996a8fa206ad66569e183c
Author: Joel Becker <joel.becker@oracle.com>
Date:   Fri Mar 10 11:42:30 2006 -0800

    configfs: Clear up a few extra spaces where there should be TABs.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 257a5bdeb0441789d8e34e1b3e92b26d0f51bbf0
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Jun 29 22:40:06 2006 +0100

    Remove export of include/linux/isdn/tpam.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 22dd0e88b70f5faa3a0101081e290431c3439189
Author: Joel Becker <joel.becker@oracle.com>
Date:   Wed Apr 12 18:34:43 2006 -0700

    configfs: Release memory in configfs_example.
    
    The configfs_example module was missing a ->release().
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit bf7e8511088963078484132636839b59e25cf14f
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Thu Jun 29 12:40:00 2006 -0700

    [PATCH] usb gadget: fixup pxa2xx_udc to include asm/arch/udc.h again
    
    This fixes pxa2xx_udc.c to include asm/arch/udc.h again to fix current
    build breakage.
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    [ forwarded by David Brownell <david-b@pacbell.net> ]
    [ fixed to apply properly by Linus ]
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 602cada851b28c5792339786efe872fbdc1f5d41
Merge: 82991c6... fee68d1...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 14:19:21 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/devfs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/devfs-2.6: (22 commits)
      [PATCH] devfs: Remove it from the feature_removal.txt file
      [PATCH] devfs: Last little devfs cleanups throughout the kernel tree.
      [PATCH] devfs: Rename TTY_DRIVER_NO_DEVFS to TTY_DRIVER_DYNAMIC_DEV
      [PATCH] devfs: Remove the tty_driver devfs_name field as it's no longer needed
      [PATCH] devfs: Remove the line_driver devfs_name field as it's no longer needed
      [PATCH] devfs: Remove the videodevice devfs_name field as it's no longer needed
      [PATCH] devfs: Remove the gendisk devfs_name field as it's no longer needed
      [PATCH] devfs: Remove the miscdevice devfs_name field as it's no longer needed
      [PATCH] devfs: Remove the devfs_fs_kernel.h file from the tree
      [PATCH] devfs: Remove devfs_remove() function from the kernel tree
      [PATCH] devfs: Remove devfs_mk_cdev() function from the kernel tree
      [PATCH] devfs: Remove devfs_mk_bdev() function from the kernel tree
      [PATCH] devfs: Remove devfs_mk_symlink() function from the kernel tree
      [PATCH] devfs: Remove devfs_mk_dir() function from the kernel tree
      [PATCH] devfs: Remove devfs_*_tape() functions from the kernel tree
      [PATCH] devfs: Remove devfs support from the sound subsystem
      [PATCH] devfs: Remove devfs support from the ide subsystem.
      [PATCH] devfs: Remove devfs support from the serial subsystem
      [PATCH] devfs: Remove devfs from the init code
      [PATCH] devfs: Remove devfs from the partition code
      ...

commit ff0daca525dde796382b9ccd563f169df2571211
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 29 20:17:15 2006 +0100

    [ARM] Add section support to ioremap
    
    Allow section mappings to be setup using ioremap() and torn down
    with iounmap().  This requires additional support in the MM
    context switch to ensure that mappings are properly synchronised
    when mapped in.
    
    Based an original implementation by Deepak Saxena, reworked and
    ARMv6 support added by rmk.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 82991c6f2c361acc17279b8124d9bf1878973435
Merge: 8d231c1... 55b4d6a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 13:49:29 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] Make AGP depend on PCI
      [AGPGART] remove unused variable
      [AGPGART] Fix pci_register_driver checking in amd64-agp
      [AGPGART] Compile fix for ati-agp
      [AGPGART] Suspend/Resume support for nVidia nForce AGP.
      [AGPGART] Suspend/Resume improvements for ATI AGP
      [AGPGART] Whitespace cleanups for ati-agp

commit 8d231c11fd0b694c447e59e687754b6999eea0a2
Merge: 1f1332f... 8db089c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 13:44:45 2006 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus: (33 commits)
      [MIPS] Add missing backslashes to macro definitions.
      [MIPS] Death list of board support to be removed after 2.6.18.
      [MIPS] Remove BSD and Sys V compat data types.
      [MIPS] ioc3.h: Uses u8, so include <linux/types.h>.
      [MIPS] 74K: Assume it will also have an AR bit in config7
      [MIPS] Treat CPUs with AR bit as physically indexed.
      [MIPS] Oprofile: Support VSMP on 34K.
      [MIPS] MIPS32/MIPS64 S-cache fix and cleanup
      [MIPS] excite: PCI makefile needs to use += if it wants a chance to work.
      [MIPS] excite: plat_setup -> plat_mem_setup.
      [MIPS] au1xxx: export dbdma functions
      [MIPS] au1xxx: dbdma, no sleeping under spin_lock
      [MIPS] au1xxx: fix PSC_SMBTXRX_RSR.
      [MIPS] Early printk for IP27.
      [MIPS] Fix handling of 0 length I & D caches.
      [MIPS] Typo fixes.
      [MIPS] MIPS32/MIPS64 secondary cache management
      [MIPS] Fix FIXADDR_TOP for TX39/TX49.
      [MIPS] Remove first timer interrupt setup in wrppmc_timer_setup()
      [MIPS] Fix configuration of R2 CPU features and multithreading.
      ...

commit 8db089c6b5594c961fb6bc6d613b9926e0d3d98f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jun 29 20:06:53 2006 +0100

    [MIPS] Add missing backslashes to macro definitions.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 127fe6af38fe237374fc158c11da6bb44bcfdc9a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 28 12:28:27 2006 +0100

    [MIPS] Death list of board support to be removed after 2.6.18.
    
    As usual fixes would be prefered.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit fc103349bb7d3f011ffe9678da86a35634f4b6fc
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 28 11:24:12 2006 +0100

    [MIPS] Remove BSD and Sys V compat data types.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 89e22d15910a47fe026fe607710ec4646efc100a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Jun 27 17:34:35 2006 +0100

    [MIPS] ioc3.h: Uses u8, so include <linux/types.h>.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2e78ae3f48b2596797101fa365abd6348143299f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 23 18:48:21 2006 +0100

    [MIPS] 74K: Assume it will also have an AR bit in config7
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit beab375a48f0cd90eb08f04e2c1dad67b9e6d3f8
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 19 21:56:25 2006 +0100

    [MIPS] Treat CPUs with AR bit as physically indexed.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 92c7b62fd1a6898fbfaf1db790ba4e70e90f39d2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 23 18:39:00 2006 +0100

    [MIPS] Oprofile: Support VSMP on 34K.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a2c2bc4b263828a380813a236fa6fcf8185b460b
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Jun 22 19:42:43 2006 +0900

    [MIPS] MIPS32/MIPS64 S-cache fix and cleanup
    
    Use blast_scache_range, blast_inv_scache_range for mips32/mips64 scache
    routine.  Also initialize waybit for MIPS32/MIPS64 S-cache.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 86165879a20753e7ed86be4c2e9bba3f32ed0aff
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 23 15:02:03 2006 +0100

    [MIPS] excite: PCI makefile needs to use += if it wants a chance to work.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit ec52d7bff060171a74a7b1826a42bd60d5b1b07d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 23 15:00:38 2006 +0100

    [MIPS] excite: plat_setup -> plat_mem_setup.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3e2c6ef3c67bfebe28215a18338641ecffbe73bc
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Fri Jun 23 12:00:21 2006 +0200

    [MIPS] au1xxx: export dbdma functions
    
    These are needed for au1550_ac97 module.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c06138941c2b5331e752546cf4ef7f4a2735ec99
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Fri Jun 23 11:59:50 2006 +0200

    [MIPS] au1xxx: dbdma, no sleeping under spin_lock
    
    kmalloc under spin_lock can't sleep.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 38e9156147e5b0defb71a3eb7e9eff74609c496a
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Fri Jun 23 11:58:31 2006 +0200

    [MIPS] au1xxx: fix PSC_SMBTXRX_RSR.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a3d45391866d2c244363c3000fc6c1acb3dfcb0b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jun 22 20:09:04 2006 +0100

    [MIPS] Early printk for IP27.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 73f403527b9ec5367376076eafb3d2f505d8e2e3
Author: Chris Dearman <chris@mips.com>
Date:   Tue Jun 20 18:06:52 2006 +0100

    [MIPS] Fix handling of 0 length I & D caches.
    
    Don't ask.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c09b47d8a99104897afd682b48f292e05461a0c2
Author: Chris Dearman <chris@mips.com>
Date:   Tue Jun 20 17:15:20 2006 +0100

    [MIPS] Typo fixes.
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9318c51acd9689505850152cc98277a6d6f2d752
Author: Chris Dearman <chris@mips.com>
Date:   Tue Jun 20 17:15:20 2006 +0100

    [MIPS] MIPS32/MIPS64 secondary cache management
    
    Signed-off-by: Chris Dearman <chris@mips.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f7a849153be3b66326b52dce0d07896b56cb4cd7
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Jun 20 23:59:11 2006 +0900

    [MIPS] Fix FIXADDR_TOP for TX39/TX49.
    
    FIXADDR_TOP is used for HIGHMEM and for upper limit of vmalloc area on
    32bit kernel.  TX39XX and TX49XX have "reserved" segment in CKSEG3
    area.  0xff000000-0xff3fffff on TX49XX and 0xff000000-0xfffeffff on
    TX39XX are reserved (unmapped, uncached) therefore can not be used as
    mapped area.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6feb6efaec9858dfb673fc5c89b8280b1b73bb08
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Jun 20 23:55:17 2006 +0900

    [MIPS] Remove first timer interrupt setup in wrppmc_timer_setup()
    
    The first timer interrupt setup already happens in time_init().
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f41ae0b2b9e5b4455cfc68dcc885f4fa2a973384
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 5 17:24:46 2006 +0100

    [MIPS] Fix configuration of R2 CPU features and multithreading.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e73ea273ef87a04ff59fc368fa33333dca275dde
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 4 11:51:46 2006 +0100

    [MIPS] Fix build error: don't offer SMP on systems that don't have SMP.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a620dbe378f3940dc058435d8ce89f5a4a7b77d5
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 4 00:35:10 2006 +0100

    [MIPS] Limit MIPS_MT to MIPS32R2 only.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 08aecfb9eaf019f07384175101c970ede271c17a
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Jun 20 23:26:30 2006 +0900

    [MIPS] Remove set_c0_status(ST0_IM) from wrppmc's irq.c.
    
    mips_cpu_irq_init() does clear_c0_status(ST0_IM) first, so
    set_c0_status(ST0_IM) isn't necessary.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 1500b9a0f4381831e41f7e02f61dbef980ded342
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Jun 20 23:17:18 2006 +0900

    [MIPS] Remove unused system type name for DDB5074 and DDB5476.
    
    This patch removes unused system type name.
    DDB5074 and DDB5476 were already removed.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7ae7cdab97f33d6a5d42664b411be52b46572e5b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jun 29 21:10:50 2006 +0100

    elf-em.h: Define and explain both EM_MIPS_RS3_LE and EM_MIPS_RS4_BE.
    
    They have been obsoleted by the ELF header EI_CLASS and EI_DATA fields
    in combination with e_flags.  Afaics EM_MIPS_RS3_LE and EM_MIPS_RS4_BE
    never had any practical relevance.  Binutils will not produce such
    binaries and the kernel will not accept them as MIPS binaries.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 0ef831b1ff1ff0bcd8bf5b1890913ef6bb263250
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Tue Jun 20 21:33:02 2006 +0900

    [MIPS] Removes unused functions for GT64120
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4277ff5ee55694f67d9c6586bb4c06991e221a68
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 3 22:40:15 2006 +0100

    [MIPS] Fix use of ehb instruction for non-R2 configurations.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b4ab24e1c8c1442b2928bab1325b56bdbbcf898e
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 3 22:30:58 2006 +0100

    [MIPS] Define ARCH_HAS_IRQ_PER_CPU for all SMP systems.
    
    Without SMTC on non-Malta will blow up.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 14cd8015015199d6e8dea8aa4948b559137df7b7
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jun 29 21:10:47 2006 +0100

    [MIPS] Consistent formatting for Qemu makefile segment.

commit 136d47d3e1cc455e9e1d9cb7b9d513a8581d3835
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Apr 15 11:16:19 2006 +0200

    [MIPS] Wire up tee(2).
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 10edd8b9d5e42d5fb0a51061a0e97bc4009aeb1a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu Jun 29 21:10:46 2006 +0100

    Remove au1x00_uart from feature-removal-schedule.txt.
    
    The driver has been removed a while ago already.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 6adb5fe7020e8f99d27da932157ea27325df9263
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Tue Jun 20 12:47:53 2006 +0100

    [MIPS] Only register RAM as resources if UNCAC_BASE != IO_BASE.
    
    This fixes a resource collision of RAM and I/O memory on systems that
    use the physical address space multiple times.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9247857f5acadf0ea87fd6a9514c633644634f08
Author: Mark.Zhan <rongkai.zhan@windriver.com>
Date:   Tue Jun 20 18:15:02 2006 +0800

    [MIPS] Fix the build error of Wind River PPMC board, rewrite irq code to C
    
     o Fix the build error Wind River PPMC board caused by the change of
       plat_setup hook interface.
     o Rewrite first level interrupt dispatch code to C.
    
    Signed-off-by: Rongkai.Zhan <rongkai.zhan@windriver.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 55b4d6a52195a8f277ffddf755ddaff359878f41
Merge: adf8a28... 1f1332f...
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 29 16:01:54 2006 -0400

    Merge ../linus
    
    Conflicts:
    
    	drivers/char/agp/Kconfig

commit ba53201180e267bd1f0792e6c375ced7c100738e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 29 20:56:47 2006 +0100

    [ARM] Fix sa11x0 SDRAM selection
    
    Avoid folk having to edit cpu-sa1110.c to select their RAM type;
    instead, allow the SDRAM type to be selected via the kernel
    command line.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f1b2ad5d2a8e1791d806ef244164d19c3d5c8b83
Merge: a51a69c... c4a001b...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 29 15:58:09 2006 -0400

    Pull c-states into release branch

commit a51a69c0ed955f4fa6f64b4377378c744f9b737b
Merge: 49fee98... f831335...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 29 15:57:42 2006 -0400

    Pull trivial into release branch

commit 27a288677de33c50af980e55abec5643db4cd0b8
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu Jun 29 21:25:10 2006 +0200

    [MTD] NAND: Fix broken sharpsl driver
    
    Remove the not longer supported NO_VIRTBLOCKS flag and remove
    an unused variable while at it.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 1f1332f727c3229eb2166a83fec5d3de6a73dce2
Author: Matt LaPlante <laplam@rpi.edu>
Date:   Thu Jun 29 01:32:47 2006 -0400

    [PATCH] KConfig: Spellchecking 'similarity' and 'independent'
    
    Several KConfig files had 'similarity' and 'independent' spelled incorrectly...
    
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09fca29de4bdfd7eff47acbc6bd71c5fb5b79d79
Author: Karsten Keil <kkeil@suse.de>
Date:   Thu Jun 29 13:16:29 2006 +0200

    [PATCH] i4l:add some checks for valid drvid and driver pointer
    
    If all drivers go away before all ISDN network interfaces are closed we got
    a OOps on removing interfaces, this patch avoid it.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f6c10ead876492b386a19474e6dca4710eeef8e
Author: Karsten Keil <kkeil@suse.de>
Date:   Thu Jun 29 13:14:51 2006 +0200

    [PATCH] i4l make PCMCIA for all cards working with shared IRQ
    
    most current laptops do not work without allowing shared cardbus IRQs.
    This patch enables IRQ sharing, so these cards work again.
    This was tested with shared and none shared cardbus IRQs on different laptops
    without problems.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0950c358ee8e969fce45ba363ca1deaf211e57b0
Merge: 3aa590c... 8caf7aa...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 11:53:31 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa
    
    * master.kernel.org:/pub/scm/linux/kernel/git/perex/alsa:
      [ALSA] echoaudio - Remove kfree_nocheck()
      [ALSA] echoaudio - Fix Makefile
      [ALSA] Add Intel D965 board support
      [ALSA] Fix/add support of Realtek ALC883 / ALC888 and ALC861 codecs
      [ALSA] Fix a typo in echoaudio/midi.c
      [ALSA] snd-aoa: enable dual-edge in GPIOs
      [ALSA] snd-aoa: support iMac G5 iSight
      [ALSA] snd-aoa: not experimental
      [ALSA] Add echoaudio sound drivers
      [ALSA] ak4xxx-adda - Code clean-up
      [ALSA] Remove CONFIG_EXPERIMENTAL from intel8x0m driver
      [ALSA] Stereo controls for M-Audio Revolution cards
      [ALSA] Fix misuse of __list_add() in seq_ports.c
      [ALSA] hda-codec - Add model entry for Samsung X60 Chane
      [ALSA] make CONFIG_SND_DYNAMIC_MINORS non-experimental
      [ALSA] Fix wrong dependencies of snd-aoa driver
      [ALSA] fix build failure due to snd-aoa
      [ALSA] AD1888 mixer controls for DC mode
      [ALSA] Suppress irq handler mismatch messages in ALSA ISA drivers
      [ALSA] usb-audio support for Turtle Beach Roadie

commit 3aa590c6b7c89d844f81c2e96f295cf2c6967773
Merge: 4d3ce21... 339d76c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 11:32:34 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc: (43 commits)
      [POWERPC] Use little-endian bit from firmware ibm,pa-features property
      [POWERPC] Make sure smp_processor_id works very early in boot
      [POWERPC] U4 DART improvements
      [POWERPC] todc: add support for Time-Of-Day-Clock
      [POWERPC] Make lparcfg.c work when both iseries and pseries are selected
      [POWERPC] Fix idr locking in init_new_context
      [POWERPC] mpc7448hpc2 (taiga) board config file
      [POWERPC] Add tsi108 pci and platform device data register function
      [POWERPC] Add general support for mpc7448hpc2 (Taiga) platform
      [POWERPC] Correct the MAX_CONTEXT definition
      powerpc: minor cleanups for mpc86xx
      [POWERPC] Make sure we select CONFIG_NEW_LEDS if ADB_PMU_LED is set
      [POWERPC] Simplify the code defining the 64-bit CPU features
      [POWERPC] powerpc: kconfig warning fix
      [POWERPC] Consolidate some of kernel/misc*.S
      [POWERPC] Remove unused function call_with_mmu_off
      [POWERPC] update asm-powerpc/time.h
      [POWERPC] Clean up it_lp_queue.h
      [POWERPC] Skip the "copy down" of the kernel if it is already at zero.
      [POWERPC] Add the use of the firmware soft-reset-nmi to kdump.
      ...

commit 4d3ce21fa9d2eaeda113aa2f9c2da80d972bef64
Merge: b026188... c1a7a75...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 11:30:45 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/kyle/parisc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/kyle/parisc-2.6: (23 commits)
      [PARISC] Move os_id_to_string() inside #ifndef __ASSEMBLY__
      [PARISC] Fix do_gettimeofday() hang
      [PARISC] Fix PCREL22F relocation problem for most modules
      [PARISC] Refactor show_regs in traps.c
      [PARISC] Add os_id_to_string helper
      [PARISC] OS_ID_LINUX == 0x0006
      [PARISC] Ensure Space ID hashing is turned off
      [PARISC] Match show_cache_info with reality
      [PARISC] Remove unused macro fixup_branch in syscall.S
      [PARISC] Add is_compat_task() helper
      [PARISC] Update Thibaut Varene's CREDITS entry
      [PARISC] Reduce data footprint in pdc_stable.c
      [PARISC] pdc_stable version 0.30
      [PARISC] Work around machines which do not support chassis warnings
      [PARISC] PDC_CHASSIS is implemented on all machines
      [PARISC] Remove unconditional #define PIC in syscall macros
      [PARISC] Use MFIA in current_text_addr on pa2.0 processors
      [PARISC] Remove dead function pc_in_user_space
      [PARISC] Test ioc_needs_fdc variable instead of open coding
      [PARISC] Fix gcc 4.1 warnings in sba_iommu.c
      ...

commit b026188e8214ce87790730a56f3017d0bd222751
Merge: 1903ac5... 94bb063...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 11:01:17 2006 -0700

    Merge branch 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6
    
    * 'for-linus' of git://git390.osdl.marist.edu/pub/scm/linux-2.6: (28 commits)
      [S390] rework of channel measurement facility.
      [S390] appldata enhancements.
      [S390] Add vmpanic parameter.
      [S390] add PAV support to the dasd driver.
      [S390] remove export of sys_call_table
      [S390] remove unused macros from binfmt_elf32.c
      [S390] fix duplicate export of overflow{ug}id
      [S390] cio chpid offline.
      [S390] avenrun export in appdata_base.c
      Convert s390_collect_crw_info() in s390mach.c from being started
      [S390] dasd eer data format.
      [S390] preempt_count initialization.
      [S390] head.S code moving.
      [S390] dasd whitespace and other cosmetics.
      [S390] virtual cpu accounting vs. machine checks.
      [S390] add __cpuinit to appldata cpu hotplug notifier.
      [S390] dasd_eckd_dump_sense bug.
      [S390] missing check in dasd_eer_open.
      [S390] modular 3270 driver.
      [S390] console_unblank woes.
      ...

commit 1903ac54f8536b11478e4f01c339e10b538f59e0
Merge: 47c2a3a... 8793747...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 29 10:49:17 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6:
      [PATCH] i386: export memory more than 4G through /proc/iomem
      [PATCH] 64bit Resource: finally enable 64bit resource sizes
      [PATCH] 64bit Resource: convert a few remaining drivers to use resource_size_t where needed
      [PATCH] 64bit resource: change pnp core to use resource_size_t
      [PATCH] 64bit resource: change pci core and arch code to use resource_size_t
      [PATCH] 64bit resource: change resource core to use resource_size_t
      [PATCH] 64bit resource: introduce resource_size_t for the start and end of struct resource
      [PATCH] 64bit resource: fix up printks for resources in misc drivers
      [PATCH] 64bit resource: fix up printks for resources in arch and core code
      [PATCH] 64bit resource: fix up printks for resources in pcmcia drivers
      [PATCH] 64bit resource: fix up printks for resources in video drivers
      [PATCH] 64bit resource: fix up printks for resources in ide drivers
      [PATCH] 64bit resource: fix up printks for resources in mtd drivers
      [PATCH] 64bit resource: fix up printks for resources in pci core and hotplug drivers
      [PATCH] 64bit resource: fix up printks for resources in networks drivers
      [PATCH] 64bit resource: fix up printks for resources in sound drivers
      [PATCH] 64bit resource: C99 changes for struct resource declarations
    
    Fixed up trivial conflict in drivers/ide/pci/cmd64x.c (the printk that
    was changed by the 64-bit resources had been deleted in the meantime ;)

commit 47c2a3aa4475d27073dd3c7e183fcc13f495c8f5
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:25:03 2006 -0700

    [PATCH] genirq: add chip->eoi(), fastack -> fasteoi
    
    Clean up the fastack concept by turning it into fasteoi and introducing the
    ->eoi() method for chips.
    
    This also allows the cleanup of an i386 EOI quirk - now the quirk is
    cleanly separated from the pure ACK implementation.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f702d7013c7470284843a6370aaa53b8b75c5a40
Author: Eric W. Biederman <ebiederman@xmission.com>
Date:   Thu Jun 29 02:25:02 2006 -0700

    [PATCH] genirq: irq: document what an IRQ is
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Rajesh Shah <rajesh.shah@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: "Protasevich, Natalie" <Natalie.Protasevich@UNISYS.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98bb244b685eb2a297aa60fa2e5c0631f95828e1
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jun 29 02:25:01 2006 -0700

    [PATCH] genirq: fasteoi handler: handle interrupt disabling
    
    Note when a disable interrupt happened with the fasteoi handler as well so
    that delayed disable can be implemented with fasteoi-type controllers.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f210be198ddd3f54b17d4aa6e69b829f75f226e5
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Thu Jun 29 02:25:00 2006 -0700

    [PATCH] genirq: add IRQ_TYPE_SENSE_MASK
    
    Add a #define for the mask of the part of IRQ_TYPE that represents the
    trigger type.  I use that in my in-progress work as I've standardized the
    way the irq description in the firmware device-tree get translated to linux
    useable things by using those constants.  Having this mask to isolate the
    "trigger type" part of the flags is useful in a few places.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43f7775944e40221827e4b3aec43824aa4c4e4a9
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:58 2006 -0700

    [PATCH] genirq: more verbose debugging on unexpected IRQ vectors
    
    One frequent sign of IRQ handling bugs is the appearance of unexpected
    vectors.  Print out all the IRQ state in that case.  We dont want this patch
    upstream, but it is useful during initial testing.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1c2662cbc6a0a9772655649bdf579803d33470b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:57 2006 -0700

    [PATCH] genirq: cleanup: no_irq_type -> no_irq_chip rename
    
    Rename no_irq_type to no_irq_chip.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e76de9f8eb67b7acc1cc6f28c4be8583adf0a90c
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:56 2006 -0700

    [PATCH] genirq: add SA_TRIGGER support
    
    Enable drivers to request an IRQ with a given irq-flow (trigger/polarity)
    setting.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba9a2331bae5da8f65be3722b9e2d210f1987857
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:55 2006 -0700

    [PATCH] genirq: add irq-wake (power-management) support
    
    Enable platforms to set the irq-wake (power-management) properties of an IRQ.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a55713ab456d267815fd5ca3c3d0fd14301f306
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:54 2006 -0700

    [PATCH] genirq: add handle_bad_irq()
    
    Handle bad IRQ vectors via the irqchip mechanism.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd87eb3a24c4527741122713e223d74b85d43c85
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:53 2006 -0700

    [PATCH] genirq: add irq-chip support
    
    Enable platforms to use the irq-chip and irq-flow abstractions: allow setting
    of the chip, the type and provide highlevel handlers for common irq-flows.
    
    [rostedt@goodmis.org: misroute-irq: Don't call desc->chip->end because of edge interrupts]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dae8620421833bb2e9a01c4ccc42bdc3759b81df
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:52 2006 -0700

    [PATCH] genirq MSI fixes
    
    This is a fixed up and cleaned up replacement for genirq-msi-fixes.patch,
    which should solve the i386 4KSTACKS problem.  I also added Ben's idea of
    pushing the __do_IRQ() check into generic_handle_irq().
    
    I booted this with MSI enabled, but i only have MSI devices, not MSI-X
    devices.  I'd still expect MSI-X to work now.
    
    irqchip migration helper: call __do_IRQ() if a descriptor is attached to an
    irqtype-style controller.  This also fixes MSI-X IRQ handling on i386 and
    x86_64.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6a6de9ef5850d063c3d3fb50784bfe3a6d0712c6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:51 2006 -0700

    [PATCH] genirq: core
    
    Core genirq support: add the irq-chip and irq-flow abstractions.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a34db9b28a1c63317e1d6f1080a12d711579e7d0
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:50 2006 -0700

    [PATCH] genirq: update copyrights
    
    Update/add copyrights in the generic IRQ code.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94d39e1f6e8132ea982a1d61acbe0423d3d14365
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:50 2006 -0700

    [PATCH] genirq: add IRQ_NOAUTOEN support
    
    Enable platforms to disable the automatic enabling of freshly set up irqs.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6550c775cb5ee94c132d93d84de3bb23f0abf37b
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:49 2006 -0700

    [PATCH] genirq: add IRQ_NOREQUEST support
    
    Enable platforms to disable request_irq() for certain interrupts.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3418d72404e35eb19e7995cbf3e7a76ba8fefbce
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:49 2006 -0700

    [PATCH] genirq: add IRQ_NOPROBE support
    
    Introduce IRQ_NOPROBE: enables platforms to control chip-probing.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4633adcdbc15ac51afcd0e1395de58cee27cf92
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:48 2006 -0700

    [PATCH] genirq: add genirq sw IRQ-retrigger
    
    Enable platforms that do not have a hardware-assisted hardirq-resend mechanism
    to resend them via a softirq-driven IRQ emulation mechanism.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11c869eaf1a9c97ef273f824a697fac017d68286
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:47 2006 -0700

    [PATCH] genirq: doc: add design documentation
    
    Add docbook file - includes API documentation.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77a5afecdb15e65034ab8390b46b824c186c62a8
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:46 2006 -0700

    [PATCH] genirq: cleanup: no_irq_type cleanups
    
    Clean up no_irq_type: share the NOP functions where possible, and properly
    name the ack_bad() function.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d28bc751bb9ad479e33964d5d9eedfe5fb488a5
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:46 2006 -0700

    [PATCH] genirq: doc: handle_IRQ_event() and __do_IRQ() comments
    
    Document handle_IRQ_event() and __do_IRQ().
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8fee5c36177ee098fa41f5fe72999609fef4df6b
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:45 2006 -0700

    [PATCH] genirq: doc: comment include/linux/irq.h structures
    
    Better document the hw_interrupt_type and irq_desc structures.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0ad90a32fb60f4129d0e24dfd5fd7128e2e09f2
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:44 2006 -0700

    [PATCH] genirq: add ->retrigger() irq op to consolidate hw_irq_resend()
    
    Add ->retrigger() irq op to consolidate hw_irq_resend() implementations.
    (Most architectures had it defined to NOP anyway.)
    
    NOTE: ia64 needs testing. i386 and x86_64 tested.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 096c8131c573ed37939dc3f1440221c92c87e74b
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Thu Jun 29 02:24:44 2006 -0700

    [PATCH] genirq: debug: better debug printout in enable_irq()
    
    Make enable_irq() debug printouts user-readable.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d7012a968d006e277eb0fe20edd7a9b5563c2b7
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:43 2006 -0700

    [PATCH] genirq: cleanup: turn ARCH_HAS_IRQ_PER_CPU into CONFIG_IRQ_PER_CPU
    
    Cleanup: change ARCH_HAS_IRQ_PER_CPU into a Kconfig method.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd916d31cc31273eca8a620fae02b7bf7f577559
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:42 2006 -0700

    [PATCH] genirq: cleanup: merge pending_irq_cpumask[] into irq_desc[]
    
    Consolidation: remove the pending_irq_cpumask[NR_IRQS] array and move it into
    the irq_desc[NR_IRQS].pending_mask field.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a733ee12618cf3ec25cbc337a5e0ba3ad5d7fb6
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:42 2006 -0700

    [PATCH] genirq: cleanup: merge irq_dir[], smp_affinity_entry[] into irq_desc[]
    
    Consolidation: remove the irq_dir[NR_IRQS] and the smp_affinity_entry[NR_IRQS]
    arrays and move them into the irq_desc[] array.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71d218b75fa91219c6bd310fbdd257dfbcac6c88
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:41 2006 -0700

    [PATCH] genirq: cleanup: include/linux/irq.h
    
    Small cleanups in include/linux/irq.h.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34ffdb7233d5847808d2b63ca6761dac3af9c942
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:40 2006 -0700

    [PATCH] genirq: cleanup: reduce irq_desc_t use, mark it obsolete
    
    Cleanup: remove irq_desc_t use from the generic IRQ code, and mark it
    obsolete.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06fcb0c6fb3aae9570a32ac3b72a8222563baa69
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:40 2006 -0700

    [PATCH] genirq: cleanup: misc code cleanups
    
    Assorted code cleanups to the generic IRQ code.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e60bbb6d50de654d8e68f115161e27878b5e72d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:39 2006 -0700

    [PATCH] genirq: cleanup: remove fastcall
    
    Now that i386 defaults to regparm, explicit uses of fastcall are not needed
    anymore.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8553acd6c14e827078779c0a0ee1c18f27b2403
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:38 2006 -0700

    [PATCH] genirq: cleanup: remove irq_descp()
    
    Cleanup: remove irq_descp() - explicit use of irq_desc[] is shorter and more
    readable.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a53da52fd743fd637637572838c0a7af23a2d038
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:38 2006 -0700

    [PATCH] genirq: cleanup: merge irq_affinity[] into irq_desc[]
    
    Consolidation: remove the irq_affinity[NR_IRQS] array and move it into the
    irq_desc[NR_IRQS].affinity field.
    
    [akpm@osdl.org: sparc64 build fix]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74ffd553a3a7fbae34be70b751852d5b6fe5acac
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:37 2006 -0700

    [PATCH] genirq: sem2mutex probe_sem -> probing_active
    
    Convert the irq auto-probing semaphore to a mutex.  (This allows us to find
    probing API usage bugs sooner, via the mutex debugging code.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d1bef4ed5faf7d9872337b33c4269e45ae1bf960
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Jun 29 02:24:36 2006 -0700

    [PATCH] genirq: rename desc->handler to desc->chip
    
    This patch-queue improves the generic IRQ layer to be truly generic, by adding
    various abstractions and features to it, without impacting existing
    functionality.
    
    While the queue can be best described as "fix and improve everything in the
    generic IRQ layer that we could think of", and thus it consists of many
    smaller features and lots of cleanups, the one feature that stands out most is
    the new 'irq chip' abstraction.
    
    The irq-chip abstraction is about describing and coding and IRQ controller
    driver by mapping its raw hardware capabilities [and quirks, if needed] in a
    straightforward way, without having to think about "IRQ flow"
    (level/edge/etc.) type of details.
    
    This stands in contrast with the current 'irq-type' model of genirq
    architectures, which 'mixes' raw hardware capabilities with 'flow' details.
    The patchset supports both types of irq controller designs at once, and
    converts i386 and x86_64 to the new irq-chip design.
    
    As a bonus side-effect of the irq-chip approach, chained interrupt controllers
    (master/slave PIC constructs, etc.) are now supported by design as well.
    
    The end result of this patchset intends to be simpler architecture-level code
    and more consolidation between architectures.
    
    We reused many bits of code and many concepts from Russell King's ARM IRQ
    layer, the merging of which was one of the motivations for this patchset.
    
    This patch:
    
    rename desc->handler to desc->chip.
    
    Originally i did not want to do this, because it's a big patch.  But having
    both "desc->handler", "desc->handle_irq" and "action->handler" caused a
    large degree of confusion and made the code appear alot less clean than it
    truly is.
    
    I have also attempted a dual approach as well by introducing a
    desc->chip alias - but that just wasnt robust enough and broke
    frequently.
    
    So lets get over with this quickly.  The conversion was done automatically
    via scripts and converts all the code in the kernel.
    
    This renaming patch is the first one amongst the patches, so that the
    remaining patches can stay flexible and can be merged and split up
    without having some big monolithic patch act as a merge barrier.
    
    [akpm@osdl.org: build fix]
    [akpm@osdl.org: another build fix]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfb9e32f2ff32ef5265c1c80fe68dd1a7f03a604
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 02:24:34 2006 -0700

    [PATCH] drivers/md/raid5.c: remove an unused variable
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d81931d9a2ec3e2e2cd8238b72f20c5fe44ccc7b
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Thu Jun 29 02:24:34 2006 -0700

    [PATCH] SKB leak in drivers/isdn/i4l/isdn_x25iface.c
    
    Coverity spotted this leak (id #613), when we are not configured, we return
    without freeing the allocated skb.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dc3885dfbebc76f4461b19e1af15e704ff4fcb0
Author: Karsten Keil <kkeil@suse.de>
Date:   Thu Jun 29 02:24:33 2006 -0700

    [PATCH] i4l: remove unneeded include/linux/isdn/tpam.h
    
    The TPAM isdn driver was removed in 2.6.12, but include/linux/isdn/tpam.h
    was missed.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 699352c30da8525a6224116983dab012689a0a76
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 29 02:24:32 2006 -0700

    [PATCH] GPIO for SCx200 & PC-8736x: x86-only
    
    AFAICT, this is x86 only, so the patch below is needed to stop this new
    option showing up on PPC, IA64, etc..
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e53cfc8f20345713fab7e290e19514a8032bb06
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Thu Jun 29 02:24:32 2006 -0700

    [PATCH] Deref in drivers/block/paride/pf.c
    
    Another possible dereference detected by coverity (id #759).  pf_probe()
    might call pf_identify() which might call get_capacity() which dereferences
    pf->disk
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 85bd84345f64cb953101ddd8ab1340dde351c579
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 29 02:24:31 2006 -0700

    [PATCH] remove devinit from ioc4 pci_driver
    
    Documention/pci.txt states..
    "The struct pci_driver shouldn't be marked with any of these tags."
    (Referring to __devinit and friends).
    
    (akpm: good documentation, that.  Link this driver into vmlinux with hotplug
    CPU disabled and it'll crash).
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Brent Casavant <bcasavan@sgi.com>
    Cc: Pat Gefre <pfg@sgi.com>
    Cc: Jes Sorensen <jes@sgi.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e075d58d667eb919a5df428b593ea7133e13d9c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 02:24:30 2006 -0700

    [PATCH] re-add CONFIG_SOUND_SSCAPE
    
    Due to a regression in the correcponding ALSA driver (ALSA #2234), the
    OSS driver should stay until it's fixed.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e41142bf52002d604e16798dc3f1c28f46cc4b6
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 02:24:30 2006 -0700

    [PATCH] arch/i386/mach-visws/setup.c: remove dummy function calls
    
    Thankfully, these dummy function calls are no longer required to avoid
    warnings - if they weren't eliminated as dead code but accidentially executed
    there would be a guaranteed NULL dereference.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7256d819e43f89af6ba30047936c96c683436941
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 29 02:24:29 2006 -0700

    [PATCH] ufs: printk() fix
    
    fs/ufs/inode.c: In function `ufs_frag_map':
    fs/ufs/inode.c:101: warning: long long unsigned int format, u64 arg (arg 4)
    fs/ufs/inode.c: In function `ufs_getfrag_block':
    fs/ufs/inode.c:432: warning: long long unsigned int format, u64 arg (arg 2)
    
    Cc: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e54f08543d05e519e601368571cc3787fefae96
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jun 29 02:24:28 2006 -0700

    [PATCH] Keys: Allow in-kernel key requestor to pass auxiliary data to upcaller
    
    The proposed NFS key type uses its own method of passing key requests to
    userspace (upcalling) rather than invoking /sbin/request-key.  This is
    because the responsible userspace daemon should already be running and will
    be contacted through rpc_pipefs.
    
    This patch permits the NFS filesystem to pass auxiliary data to the upcall
    operation (struct key_type::request_key) so that the upcaller can use a
    pre-existing communications channel more easily.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-By: Kevin Coffman <kwc@citi.umich.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94583779e6625154e8d7fce33d097ae7d089e9de
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 29 02:24:27 2006 -0700

    [PATCH] sparc: register_cpu() build fix
    
    arch/sparc/kernel/setup.c: In function 'topology_init':
    arch/sparc/kernel/setup.c:528: error: too many arguments to function 'register_cpu'
    
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc57637b0b015fb5d70dbbec740de516d33af07d
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Thu Jun 29 02:24:27 2006 -0700

    [PATCH] solve config broken: undefined reference to `online_page'
    
    Memory hotplug code of i386 adds memory to only highmem.  So, if
    CONFIG_HIGHMEM is not set, CONFIG_MEMORY_HOTPLUG shouldn't be set.
    Otherwise, it causes compile error.
    
    In addition, many architecture can't use memory hotplug feature yet.  So, I
    introduce CONFIG_ARCH_ENABLE_MEMORY_HOTPLUG.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81b0c8713385ce1b1b9058e916edcf9561ad76d6
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 29 02:24:26 2006 -0700

    [PATCH] generic_file_buffered_write(): handle zero-length iovec segments
    
    The recent generic_file_write() deadlock fix caused
    generic_file_buffered_write() to loop inifinitely when presented with a
    zero-length iovec segment.  Fix.
    
    Note that this fix deliberately avoids calling ->prepare_write(),
    ->commit_write() etc with a zero-length write.  This is because I don't trust
    all filesystems to get that right.
    
    This is a cautious approach, for 2.6.17.x.  For 2.6.18 we should just go ahead
    and call ->prepare_write() and ->commit_write() with the zero length and fix
    any broken filesystems.  So I'll make that change once this code is stabilised
    and backported into 2.6.17.x.
    
    The reason for preferring to call ->prepare_write() and ->commit_write() with
    the zero-length segment: a zero-length segment _should_ be sufficiently
    uncommon that this is the correct way of handling it.  We don't want to
    optimise for poorly-written userspace at the expense of well-written
    userspace.
    
    Cc: "Vladimir V. Saveliev" <vs@namesys.com>
    Cc: Neil Brown <neilb@suse.de>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: <stable@kernel.org>
    Cc: walt <wa1ter@myrealbox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0686cd8fbe3e5fb1441ae84b9cbc813f9297b879
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 29 02:24:25 2006 -0700

    [PATCH] fix sgivwfb compile
    
    drivers/built-in.o: In function `sgivwfb_set_par':
    sgivwfb.c:(.text+0x88583): undefined reference to `sgivwfb_mem_phys'
    sgivwfb.c:(.text+0x88596): undefined reference to `sgivwfb_mem_phys'
    sgivwfb.c:(.text+0x885a8): undefined reference to `sgivwfb_mem_phys'
    drivers/built-in.o: In function `sgivwfb_check_var':
    sgivwfb.c:(.text+0x88ad0): undefined reference to `sgivwfb_mem_size'
    drivers/built-in.o: In function `sgivwfb_mmap':
    sgivwfb.c:(.text+0x88c75): undefined reference to `sgivwfb_mem_size'
    sgivwfb.c:(.text+0x88c7f): undefined reference to `sgivwfb_mem_phys'
    drivers/built-in.o: In function `sgivwfb_probe':
    sgivwfb.c:(.init.text+0x4060): undefined reference to `sgivwfb_mem_size'
    sgivwfb.c:(.init.text+0x4065): undefined reference to `sgivwfb_mem_phys'
    sgivwfb.c:(.init.text+0x4076): undefined reference to `sgivwfb_mem_phys'
    sgivwfb.c:(.init.text+0x409c): undefined reference to `sgivwfb_mem_size'
    sgivwfb.c:(.init.text+0x410e): undefined reference to `sgivwfb_mem_size'
    sgivwfb.c:(.init.text+0x4113): undefined reference to `sgivwfb_mem_phys'
    sgivwfb.c:(.init.text+0x4162): undefined reference to `sgivwfb_mem_size'
    sgivwfb.c:(.init.text+0x4168): undefined reference to `sgivwfb_mem_phys'
    make: *** [.tmp_vmlinux1] Error 1
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8799ee9f49f6171fd58f4d64f8c067ca49006a5d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 29 18:24:21 2006 +0100

    [ARM] Set bit 4 on section mappings correctly depending on CPU
    
    On some CPUs, bit 4 of section mappings means "update the
    cache when written to".  On others, this bit is required to
    be one, and others it's required to be zero.  Finally, on
    ARMv6 and above, setting it turns on "no execute" and prevents
    speculative prefetches.
    
    With all these combinations, no one value fits all CPUs, so we
    have to pick a value depending on the CPU type, and the area
    we're mapping.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0f13fc09db68de92585558984bff1c51b87db72f
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Jun 29 13:02:11 2006 -0400

    [SCSI] 53c700: fix breakage caused by the autosense update
    
    A bit of a brown paper bag issue.  The previous patch to remove the soon
    to be ripped out fields that were used in autosense actually broke the
    driver.  This patch fixes it and has been tested (honestly).
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 326764a85b7676388db3ebad6488f312631d7661
Author: Juergen Schindele <linux@schindele.name>
Date:   Thu Jun 29 16:01:43 2006 +0100

    [ARM] 3666/1: TRIZEPS4 [1/5] core
    
    Patch from Juergen Schindele
    
    This patch adds support for Trizeps4 SoM and ConXS-evalboard
    from "Keith und Koep" This DIMM-module is based on PXA270.
    
    Signed-off-by: Juergen Schindele <linux@schindele.name>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a144a5633c1e625c3134c2ce8d549a054468fd98
Merge: 8fc5ffa... 3cbc960...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 29 16:23:47 2006 +0100

    Merge omap tree
    
    * master.kernel.org:/pub/scm/linux/kernel/git/tmlind/linux-omap-upstream: (26 commits)
      ARM: OMAP: Multiplexing for 24xx GPMC wait pin monitoring
      ARM: OMAP: Fix SRAM to use MT_MEMORY instead of MT_DEVICE
      ARM: OMAP: Update dmtimers
      ARM: OMAP: Make clock variables static
      ARM: OMAP: Fix GPMC compilation when DEBUG is defined
      ARM: OMAP: Mux updates for external DMA and GPIO
      ARM: OMAP: Add OMAP_TAG_CAMERA_SENSOR
      ARM: OMAP: Add initial 24xx suspend support
      ARM: OMAP: Update cpufreq support for 24xx
      ARM: OMAP: Add GPMC support for OMAP2
      ARM: OMAP: Fix DMA channel irq handling for omap24xx
      ARM: OMAP: OMAP2 DMA burst support
      ARM: OMAP: Fix 32 kHz timer and modify GP timer to use GPT1
      ARM: OMAP: Port dmtimers to OMAP2 and implement PWM support
      ARM: OMAP: Correct two bugs in arch/arm/mach-omap2/clock.c
      ARM: OMAP: Register the 24xx McSPI device
      ARM: OMAP: Add bitbank SPI driver for Innovator 1510 touchscreen
      ARM: OMAP: Aic23 alsa platform driver code for board-innovator
      ARM: OMAP: Fix GPIO IRQ mask handling
      ARM: OMAP: DMA transfer parameter configuration fix
      ...

commit 53cb8a1f45e06a2627a6d89b151cccb95fa45cbf
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:32 2006 -0500

    [SCSI] iscsi: add async notification of session events
    
    This patch adds or modifies the transport class functions
    used to notify userspace of session state events.
    
    We modify the session addition up event and add a destruction event
    to notify userspace of session creation, relogin and destruction.
    
    And we modify the conn error event to be sent by broadcast
    since multiple listeners may want to listen for it.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6a8a0d3621745279a131d95f0204dc9ddac60d55
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:31 2006 -0500

    [SCSI] iscsi: pass target nr to session creation
    
    So the drivers do not use the channel numbers, but some do
    use the target numbers. We were just adding some goofy
    variable that just increases for the target nr. This is useless
    for software iscsi because it is always zero. And for qla4xxx
    the target nr is actually the index of the target/session
    in its FW or FLASH tables. We needed to expose this to userspace
    so apps could access those numbers so this patch just adds the
    target nr to the iscsi session creation functions. This way
    when qla4xxx's Hw thinks a session is at target nr 4
    in its hw, it is exposed as that number in sysfs.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8434aa8b6fe5af27a33b8aa830c24e3680356c83
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:30 2006 -0500

    [SCSI] iscsi: break up session creation into two stages
    
    qla4xxx is initialized in two steps like other HW drivers.
    It allocates the host, sets up the HW, then adds the host.
    For iscsi part of HW setup is setting up persistent iscsi
    sessions. At that time, the interupts are off and the driver
    is not completely set up so we just want to allocate them.
    We do not want to add them to sysfs and expose them to userspace
    because userspace could try to do lots of fun things with them
    like scanning and at that time the driver is not ready.
    
    So this patch breakes up the session creation like other
    functions that use the driver model in two the alloc
    and add parts. When the driver is ready, it can then add
    the sessions and userspace can begin using them.
    
    This also fixes a bug in the addition error patch where
    we forgot to do a get on the session.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e6f3b63f50b4bb9fdc9025e0c3994acd265ad3a2
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:29 2006 -0500

    [SCSI] iscsi: rm channel usage from iscsi
    
    I do not remember what I was thinking when we added the channel
    as a argument to the session create function. It was probably
    due to too much cut and paste work from the FC transport class.
    
    The channel is meaningless for iscsi drivers so this patch drops
    its usage everywhere in the iscsi related code.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f53a88da18e3c04c3ade07bc5eff520ee4259c3e
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:27 2006 -0500

    [SCSI] iscsi: fix session refcouting
    
    iscsi_tcp and iser cannot be rmmod from the kernel when sessions
    are running because session removal is driven from userspace. For
    those modules we get a module reference when a session is
    created then drop it when the session is removed.
    
    For qla4xxx, they can jsut remove the sessions from the pci remove
    function like normal HW drivers, so this patch moves the module
    reference from the transport class functions shared by all
    drivers to the libiscsi functions only used be software iscsi
    modules.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5c75b7fcf0c0e3921391fd93f5fa58ec9a6c428f
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:26 2006 -0500

    [SCSI] iscsi: convert iscsi_tcp to new set/get param fns
    
    Convert iscsi_tcp to new lib functions.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 358ff019b89aa530ab6c0dd139d8089c932b103f
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:25 2006 -0500

    [SCSI] iscsi: convert iser to new set/get param fns
    
    Convert iser to libiscsi get/set param functions.
    Fix bugs in it returning old error return values and
    have it expose exp_statsn.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a54a52caad4bd6166cb7fa64e4e93031fa2fda5d
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:23 2006 -0500

    [SCSI] iscsi: fixup set/get param functions
    
    Reduce duplication in the software iscsi_transport modules by
    adding a libiscsi function to handle the common grunt work.
    
    This also has the drivers return specifc -EXXX values for different
    errors so userspace can finally handle them in a sane way.
    
    Also just pass the sysfs buffers to the drivers so HW iscsi can
    get/set its string values, like targetname, and initiatorname.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 01cb225dad8da2e717356fab03240e2f4a8d01bf
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Wed Jun 28 12:00:22 2006 -0500

    [SCSI] iscsi: add target discvery event to transport class
    
    Patch from david.somayajulu@qlogic.com:
    
    Add target discovery event. We may have a setup where the iscsi traffic
    is on a different netowrk than the other network traffic. In this case
    we will want to do discovery though the iscsi card. This patch adds
    a event to the transport class that can be used by hw iscsi cards that
    support this.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8fc5ffa063f6551c9e6dd66cab89c46ad41e59c5
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Thu Jun 29 16:06:33 2006 +0100

    [ARM] 3675/2: Preparing for AT91SAM926 support
    
    Patch from Andrew Victor
    
    This prepares the way for adding support for the new Atmel AT91SAM926x
    processors.
    
    Major changes:
    - Rename time.c to at91rm9200_time.c
    - Rename common.c to at91rm9200.c
    - Introduce ARCH_AT91, of which ARCH_AT91RM9200, ARCH_AT91SAM9260 and
    ARCH_AT91SAM9261 are dependent.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1100c257ad11954416df5fcf4bcfcab43de54f57
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 29 16:06:31 2006 +0100

    [ARM] 3674/1: ep93xx: add cirrus logic edb9302 support
    
    Patch from Lennert Buytenhek
    
    This patch adds support for the Cirrus Logic EDB9302, an evaluation
    board based on the Cirrus Logic EP9302 SoC, with 32M RAM, one USB host
    port, audio in/out, two serial ports and a 10/100 ethernet interface.
    
    George Kashperko submitted the original patch, this patch is a rewrite
    using the newer physmap platform driver.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 332959cb521af6bb0281c7aae797f1f91dcb4c42
Author: Martin Habets <errandir_news@mph.eclipse.co.uk>
Date:   Wed Jun 28 15:40:36 2006 +0100

    [SCSI] st: remove unused st_buffer.in_use
    
    I noticed that in_use in st_buffer is not used. The patch below
    against 2.6.17-rc3 removes it, assuming there is no future use for it.
    It was tested in a sparc SS20 with a DLT4000.
    
    Signed-off-by: Martin Habets <errandir_news@mph.eclipse.co.uk>
    Acked-by: Kai Makisara <kai.makisara@kolumbus.fi>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 656602978e43a4e5d929423d766be0448bdacc1e
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 29 16:06:30 2006 +0100

    [ARM] 3673/1: lpd270: parse lcd= command line parameter
    
    Patch from Lennert Buytenhek
    
    The bootloader on the LogicPD PXA270 platform informs the kernel of
    which type of TFT screen is connected via an lcd=$FOO kernel command
    line parameter.
    
    Before this patch, we ignored this parameter and just hardcoded the use
    of the Sharp lq64d343 display kit.  This patch implement parsing of the
    command line option, and chooses the right pxafb_mach_info to use (six
    choices) based on this command line option.
    
    Also fix the fb settings to correspond with those of the bootloader.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c6e8c6ccf96e9249805d0e9828b994f4c926ad51
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Thu Jun 29 15:33:02 2006 +0100

    [JFFS2][XATTR] Fix xd->refcnt race condition
    
    When xd->refcnt is checked whether this xdatum should be released
    or not, atomic_dec_and_lock() is used to ensure holding the
    c->erase_completion_lock.
    
    This fix change a specification of delete_xattr_datum().
    Previously, it's only called when xd->refcnt equals zero.
    (calling it with positive xd->refcnt cause a BUG())
    If you applied this patch, the function checks whether
    xd->refcnt is zero or not under the spinlock if necessary.
    Then, it marks xd DEAD flahs and links with xattr_dead_list
    or releases it immediately when xd->refcnt become zero.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 22b1908610dd7ff68471cd4fbd383dbdfe5e0ecd
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 29 15:09:57 2006 +0100

    [ARM] nommu: provide a way for correct control register value selection
    
    Most MMU-based CPUs have a restriction on the setting of the data cache
    enable and mmu enable bits in the control register, whereby if the data
    cache is enabled, the MMU must also be enabled.  Enabling the data
    cache without the MMU is an invalid combination.
    
    However, there are CPUs where the data cache can be enabled without the
    MMU.
    
    In order to allow these CPUs to take advantage of that, provide a
    method whereby each proc-*.S file defines the control regsiter value
    for use with nommu (with the MMU disabled.)  Later on, when we add
    support for enabling the MMU on these devices, we can adjust the
    "crval" macro to also enable the data cache for nommu.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 264edb35ce5c85749bfdd2942c74b786ea1cde41
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 29 15:03:09 2006 +0100

    [ARM] Remove yucky ifdefs to print "id(wb)BRR" suffix on CPU name
    
    The "id(wb)BRR" suffix reports which CPU debugging options were (or
    were not) selected at kernel build time.  Rather than have every
    proc-*.S file implement this, report the control register value,
    from which this information can be deduced.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 94bb063312d872d9269deb2e5c0c7c6d5b0318e1
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Thu Jun 29 15:08:41 2006 +0200

    [S390] rework of channel measurement facility.
    
    Fixes for several channel measurement facility bugs:
    * Blocks copied from the hardware might not be consistent. Solve this
      by moving the copying into idle state and repeating the copying.
    * avg_sample_interval changed with every read, even though no new block
      was available. Solve this by storing a timestamp when the last new
      block was received.
    * Several locking issues.
    * Measurements were not reenabled after a disconnected device became
      available again.
    * Remove #defines for ioctls that were never implemented.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 5b5dd21a8e6652fc8b58a32757575cc7fce2b54d
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Thu Jun 29 15:08:35 2006 +0200

    [S390] appldata enhancements.
    
    Add CPU ID and steal time, and make OS record size variable.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 585c3047a881d0f54b93a0dd8ab499b07ed25d09
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Thu Jun 29 15:08:25 2006 +0200

    [S390] Add vmpanic parameter.
    
    Implementation of new kernel parameter vmpanic that provides a means to
    perform a z/VM CP command after a kernel panic occurred.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 405455734e1cdec09c37233216f9240cb1a058e5
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Thu Jun 29 15:08:18 2006 +0200

    [S390] add PAV support to the dasd driver.
    
    Add support for parallel-access-volumes to the dasd driver. This
    allows concurrent access to dasd devices with multiple channel
    programs.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 8f27766a883149926e7c1f69d9f1d8f68efcd65f
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Jun 29 15:03:54 2006 +0200

    [S390] remove export of sys_call_table
    
    Remove export of the sys_call_table symbol to prevent the misuse of it.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 65b73c69c527a295ff3730b0b14e73359a8b4a16
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Jun 29 15:03:48 2006 +0200

    [S390] remove unused macros from binfmt_elf32.c
    
    The two macros NEW_TO_OLD_UID and NEW_TO_OLD_GID in binfmt_elf32.c
    are not used by any code. Remove them.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 8e0474f3b43e8bec1be164006a378e9dbd439b2c
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Thu Jun 29 15:03:42 2006 +0200

    [S390] fix duplicate export of overflow{ug}id
    
    overflowuid and overflowgid were exported twice.  Remove the export
    from s390_ksyms.c
    
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b4f7b1ee577857aca467e6825122a3b29d6c3c0e
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Thu Jun 29 15:03:35 2006 +0200

    [S390] cio chpid offline.
    
    After setting a path to a dasd offline at the SE, I/O hangs on that
    dasd for 5 minutes, then continues.
    I/O for which an interrupt will not be reported after the channel
    path has been disabled was not terminated by the common I/O layer,
    causing the dasd MIH to hit after 5 minutes.
    
    Be more aggressive in terminating I/O after setting a channel path
    offline. Also make sure to generate a fake irb if the device
    driver issues an I/O request after being notified of the killed
    I/O and clear residual information from the irb before trying to
    start the delayed verification.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 3ee526841ba409f7b23f825f120772a79e7d7bd2
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Thu Jun 29 15:03:28 2006 +0200

    [S390] avenrun export in appdata_base.c
    
    Remove EXPORT_SYMBOL_GPL(avenrun) from appdata_base.c, since it is
    already exported in kernel/timer.c
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 84d11c5dcc4cdfe962fcd58a0302711befcdceda
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Thu Jun 29 15:03:17 2006 +0200

    Convert s390_collect_crw_info() in s390mach.c from being started
    as a deprecated kernel_thread to a kthread.
    
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 774fc4ef718f7343306ba3695e8a2622cbd9764d
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Thu Jun 29 15:02:59 2006 +0200

    [S390] dasd eer data format.
    
    The struct dasd_eer_header needs the packed attribute, or there will
    be 6 additional bytes of random data between the fixed header and
    the variable length part of the eer data.
    
    Signed-off-by: Stefan Weinhuber <wein@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit cc43ec1ab0ae67c9cd5b3c2483a731afc98cbc2c
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 29 15:02:47 2006 +0200

    [S390] preempt_count initialization.
    
    The preempt_count in the thread_info structure must be initialized to 1.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit b1b70306911a35b3851a73c87e6e9bd45a08b893
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 29 14:58:17 2006 +0200

    [S390] head.S code moving.
    
    There is almost no room left for any new code between 0x10000
    and 0x10480. Move the code from 0x10000 to 0x11000.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 138c014dcba74211dc4e835658f34a787c40cf17
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Thu Jun 29 14:58:12 2006 +0200

    [S390] dasd whitespace and other cosmetics.
    
    Dasd code cleanup: 1) remove white space, 2) remove the emacs override
    sections, and 3) use kzalloc instead of kmalloc.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 63b122466484e44d09af12bba33b34019757a3c2
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Jun 29 14:58:05 2006 +0200

    [S390] virtual cpu accounting vs. machine checks.
    
    If a machine checks interrupts the external or the i/o interrupt
    handler before they have completed the cpu time calculations, the
    accounting goes wrong. After the cpu returned from the machine check
    handler to the interrupted interrupt handler, a negative cpu time delta
    can occur.  If the accumulated cpu time in lowcore is small enough
    this value can get negative as well. The next jiffy interrupt will pick
    up that negative value, shift it by 12 and add the now huge positive
    value to the cpu time of the process.
    To solve this the machine check handler is modified not to change any
    of the timestamps in the lowcore if the machine check interrupted kernel
    context.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 9faf06547efe11ccb51678c6805037c7377b85ee
Author: Gerald Schaefer <geraldsc@de.ibm.com>
Date:   Thu Jun 29 14:57:58 2006 +0200

    [S390] add __cpuinit to appldata cpu hotplug notifier.
    
    Signed-off-by: Gerald Schaefer <geraldsc@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 445b5b499e0ca1584ee3aa8af298c9ef8c84d711
Author: Horst Hummel <horst.hummel@de.ibm.com>
Date:   Thu Jun 29 14:57:52 2006 +0200

    [S390] dasd_eckd_dump_sense bug.
    
    The ccw dump function dasd_eckd_dump_ccw_range can crash because
    it does not take care about the IDAL flag in the ccw.
    Check for IDALs flag set in CCW and follow the indirect list to
    print the data that is refered by the ccw.
    
    Signed-off-by: Horst Hummel <horst.hummel@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit f45a43d847c96949d22e702879e52385a1547f6b
Author: Stefan Weinhuber <wein@de.ibm.com>
Date:   Thu Jun 29 14:57:46 2006 +0200

    [S390] missing check in dasd_eer_open.
    
    Check the return value of kzalloc in dasd_eer_open.
    
    Signed-off-by: Stefan Weinhuber <wein@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 132fab13635a56a8151641671a2f896be00fd215
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Jun 29 14:57:39 2006 +0200

    [S390] modular 3270 driver.
    
    The initial i/o to a 3270 device is done using the static module variables
    raw3270_init_data and raw3270_init_request. If the 3270 device driver is
    built as a module and gets loaded above 2GB, the initial i/o will fail
    because these variables will get addresses > 2GB. To make it work the
    two variables are moved to struct raw3270 and the data structure is
    allocated with GFP_DMA.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 06fa46a2fcb7e13386707a3eac74f11140a9f818
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Thu Jun 29 14:57:32 2006 +0200

    [S390] console_unblank woes.
    
    The software watchdog calls machine_restart from a timer function.
    The s390 machine_restart calls console_unblank to flush the console
    output. This is needed for panic to get the panic message printed.
    If console_unblank is called in interrupt a BUG is triggered in
    acquire_console_sem. That makes the software watchdog panic instead
    of restarting the machine. To get around this problem the call to
    console_unblank is made conditionally on !in_interrupt() ||
    oops_in_progress.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 4980082db1a8aa3ec45aa22cd4a10021955e22ed
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 29 14:57:25 2006 +0200

    [S390] __syscall_return error check.
    
    Fix __syscall_return macro: valid error numbers are in the range
    of -1..-4095.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 40154b824331cd9c81c06545761338f3d80a36e2
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Thu Jun 29 14:57:03 2006 +0200

    [S390] cio async subchannel reprobe.
    
    Changes in the DASD driver require an asynchronous implementation of the
    subchannel reprobe loop. This loop was so far only used by the blacklisting
    mechanism but is now available to all CCW device drivers.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 887ab5992925736ab23985c35f8149739e9de354
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Thu Jun 29 14:56:52 2006 +0200

    [S390] ccwgroup device unregister.
    
    Work around the problem that a device cannot be unregistered from
    driver_for_each_device() because of klist node refcounting: Get device
    after device owned by the driver to be unregistered with driver_find_device()
    and then unregister it. This works because driver_get_device() gets us out of
    the region of the elevated klist node refcount. driver_find_device() will
    always get the next device in the list after the found one has been
    unregistered.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 231caa1cac555bdd5cb64bf91b554b38e8ddf715
Author: Cornelia Huck <cornelia.huck@de.ibm.com>
Date:   Thu Jun 29 14:56:45 2006 +0200

    [S390] channel measurement fix.
    
    Specify correct sizeof() in chp_measurement_read() and return
    correct amount of read data.
    
    Signed-off-by: Cornelia Huck <cornelia.huck@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit da039bd1e872b89e1c92c6c891c43b96d0a1bc41
Author: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
Date:   Thu Jun 29 14:56:38 2006 +0200

    [S390] cio long busy in read configuration data.
    
    Trying to set a DASD root device online can fail under some circumstances
    with the message "Read configuration data returned error -5". The cause
    is that read configuration data incorrectly aborts with -EIO when it
    encounters a temporary busy condition at a storage server.
    Perform retry when encountering temporary busy conditions.
    
    Signed-off-by: Peter Oberparleiter <peter.oberparleiter@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit d7d23702554dc13297cff5eaf7a551c802daeab3
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 29 14:56:32 2006 +0200

    [S390] memory detection.
    
    The wrong base register is used to read a value from the sclp data
    structure. The value is used to calculate the memory size.
    Use correct register %r4.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit 7380534314865528ef080593b291bba32fba60e8
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 29 14:56:23 2006 +0200

    [S390] incomplete stack traces.
    
    show_stack() passes a pointer to the current stack frame to show_trace().
    Because of tail call optimization the pointer doesn't point to the original
    stack frame anymory and therefore traces are wrong. Don't pass the pointer
    of the current stack frame to show_trace(). Instead let show_trace()
    calculate the pointer on its own.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit c406abd3a6d0cf5ce8db4db155a729a28fb98c4f
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Thu Jun 29 14:56:13 2006 +0200

    [S390] cleanup bitops.h.
    
    Encapsulate complete bitops.h with #ifdef __KERNEL__ and remove the now
    superfluous ALIGN_CS define and its users.
    This patch is needed for compiling klibc.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>

commit ea9b6dcc152f09c207117ab121d4fa03d2db282a
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 28 21:48:38 2006 -0700

    MTD: kernel-doc fixes + additions
    
    Fix some kernel-doc typos/spellos.
    Use kernel-doc syntax in places where it was almost used.
    Correct/add struct, struct field, and function param names where needed.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 844d3b427ef1a4f96e54866747bdb6c6cbca4c6a
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 28 21:48:27 2006 -0700

    MTD: fix all kernel-doc warnings
    
    Fix all kernel-doc warnings in MTD headers and source files:
    - add some missing struct fields;
    - correct some function parameter names;
    - use kernel-doc format for function doc. headers;
    - nand_ecc.c contains only exported interfaces, no internal ones;
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 339d76c54336443f5050b00172beb675f35e3be0
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Jun 29 17:12:30 2006 +1000

    [POWERPC] Use little-endian bit from firmware ibm,pa-features property
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 33dbcf72f607f5da791402e161feaf1ccf5d5be4
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Jun 28 13:18:53 2006 +1000

    [POWERPC] Make sure smp_processor_id works very early in boot
    
    There's a small period early in boot where we don't know which cpu we're
    running on. That's ok, except that it means we have no paca, or more
    correctly that our paca pointer points somewhere random.
    
    So that we can safely call things like smp_processor_id(), we need a paca,
    so just assume we're on cpu 0. No code should _write_ to the paca before
    we've set the correct one up.
    
    We setup the proper paca after we've scanned the flat device tree in
    early_setup(), so there's no need to do it again in start_here_common.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit feb76c7b23fb660f015583359a4c75a1139c0d36
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Jun 28 02:50:36 2006 -0700

    [POWERPC] U4 DART improvements
    
    Better late than never...
    
    Respin based on previous comment. Only remaining issue last time was an
    extra mb() that I've taken out.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c220153654ede57b41900159eb8d1f6029d85642
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Wed Jun 28 14:13:20 2006 -0700

    [POWERPC] todc: add support for Time-Of-Day-Clock
    
    This is a resubmit with a proper subject and with all comments addressed.
    Applies cleanly to powerpc.git 649e85797259162f7fdc696420e7492f20226f2d
    
    Mark
    --
    
    The todc code from arch/ppc supports many todc/rtc chips and is needed
    in arch/powerpc.  This patch adds the todc code to arch/powerpc.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    --
    
     arch/powerpc/Kconfig         |    7
     arch/powerpc/sysdev/Makefile |    1
     arch/powerpc/sysdev/todc.c   |  392 ++++++++++++++++++++++++++++++++++
     include/asm-powerpc/todc.h   |  487 +++++++++++++++++++++++++++++++++++++++++++
     4 files changed, 887 insertions(+)
    --
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 16e9f994442b599987ce5dd4a5ebe50865e6573d
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Jun 29 15:07:42 2006 +1000

    [POWERPC] Make lparcfg.c work when both iseries and pseries are selected
    
    This also consolidates the initial bits of lparcfg_data() and adds the
    partition number to the iSeries flattened device tree.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f86c9747fe1cd72b2c5c6bdf72d17aeb2a3c6cb0
Author: Sonny Rao <sonny@burdell.org>
Date:   Tue Jun 27 08:46:09 2006 -0400

    [POWERPC] Fix idr locking in init_new_context
    
    We always need to serialize accesses to mmu_context_idr.
    
    I hit this bug when testing with a small number of mmu contexts.
    
    Signed-off-by: Sonny Rao <sonny@burdell.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 975b365895b638a62da55f9fb180b0a71d05874d
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Tue Jun 13 15:07:29 2006 +0800

    [POWERPC] mpc7448hpc2 (taiga) board config file
    
    Add default config for mpc7448 hpc2 (taiga) board.
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2b9d7467a6dbc41872c605511e105cbde1eda100
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Tue Jun 13 15:07:23 2006 +0800

    [POWERPC] Add tsi108 pci and platform device data register function
    
    Add Tundra Semiconductor tsi108 pci and platform device data register
    function support.
    
    Signed-off-by: Alexandre Bounine <alexandreb@tundra.com>
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    
     ---
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c5d56332fd6c2f0c7cf9d1f65416076f2711ea28
Author: Zang Roy <tie-fei.zang@freescale.com>
Date:   Tue Jun 13 15:07:15 2006 +0800

    [POWERPC] Add general support for mpc7448hpc2 (Taiga) platform
    
    Add support for Freescale mpc7448 (Taiga) board support
    
    Signed-off-by: Roy Zang <tie-fei.zang@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1729dc7833014eaba3520091a673dbdc9242d9f9
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Jun 29 16:16:15 2006 +1000

    [POWERPC] Correct the MAX_CONTEXT definition
    
    When we increased the address space per process to 2^44 bytes, the
    number of contexts that we could actually use reduced, but we forgot
    to decrease the MAX_CONTEXT definition.  (Fortunately this would only
    cause problems if we actually had more than 512k user processes
    running.)  This patch corrects the definition.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9f2fa466383ce100b90fe52cb4489d7a26bf72a9
Merge: 607f31e... 0a6047e...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 28 23:27:48 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit 0a6047eef1c465c38aacfbdab193161b3f0cd144
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 28 17:09:34 2006 -0700

    Fix vsnprintf off-by-one bug
    
    The recent vsnprintf() fix introduced an off-by-one, and it's now
    possible to overrun the target buffer by one byte.
    
    The "end" pointer points to past the end of the buffer, so if we
    have to truncate the result, it needs to be done though "end[-1]".
    
    [ This is just an alternate and simpler patch to one proposed by Andrew
      and Jeremy, who actually noticed the problem ]
    
    Acked-by: Andrew Morton <akpm@osdl.org>
    Acked-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27d68a36c4f1ca2fc6be82620843493462c08c51
Merge: 76a2227... 583e7f5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 28 16:20:49 2006 -0700

    Merge branch 'nommu' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'nommu' of master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] nommu: backtrace code must not reference a discarded section
      [ARM] nommu: Initial uCLinux support for MMU-based CPUs
      [ARM] nommu: prevent Xscale-based machines being selected
      [ARM] nommu: export flush_dcache_page()
      [ARM] nommu: remove fault-armv, mmap and mm-armv files from nommu build
      [ARM] Remove TABLE_SIZE, and several unused function prototypes
      [ARM] nommu: Provide a simple flush_dcache_page implementation
      [ARM] nommu: add arch/arm/Kconfig-nommu to Kconfig files
      [ARM] nommu: add stubs for ioremap and friends
      [ARM] nommu: avoid selecting TLB and CPU specific copy code
      [ARM] nommu: uaccess tweaks
      [ARM] nommu: adjust headers for !MMU ARM systems
      [ARM] nommu: we need the TLS register emulation for nommu mode

commit 76a22271fd14e3fe7660f8646db12f0780fa4fd2
Merge: fffcb48... e033108...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 28 16:20:26 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3672/1: PXA: don't probe output GPIOs for interrupt
      [ARM] 3671/1: ep93xx: add cirrus logic edb9315 support
      [ARM] 3370/2: ep93xx: add crunch support
      [ARM] 3665/1: crunch: add ptrace support
      [ARM] 3664/1: crunch: add signal frame save/restore
      [ARM] 3663/1: fix resource->end off-by-one thinko during physmap conversion
      [ARM] 3662/1: ixp23xx: don't include asm/hardware.h in uncompress.h
      [ARM] 3660/1: Remove legacy defines
      [ARM] 3661/1: S3C2412: Fix compilation if CPU_S3C2410 only
      [ARM] 3658/1: S3C244X: Change usb-gadget name to s3c2440-usbgadget
      [ARM] Remove the __arch_* layer from uaccess.h

commit fffcb480e4224f25c965b93fa65541bfc7dd732e
Merge: b445979... 56fb9e5...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 28 16:03:06 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog
    
    * master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog:
      [WATCHDOG] Documentation/watchdog update
      [WATCHDOG] convert AT91RM9200 watchdog to platform driver
      [WATCHDOG] add WDIOC_GETTIMELEFT ioctl
      [WATCHDOG] Pre-Timeout flags

commit b44597906e03d5e2b467c17a3b73585596c0d7be
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Wed Jun 28 17:14:07 2006 +0200

    [PATCH] Fix plist include dependency
    
    plist.h uses container_of, which is defined in kernel.h.
    Include kernel.h in plist.h as the kernel.h include does not longer
    happen automatically on all architectures.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 980a01c9bfb090cb8a991e39e56ac379c30c61b8
Author: David Brownell <david-b@pacbell.net>
Date:   Wed Jun 28 07:47:15 2006 -0700

    [PATCH] SPI: infrastructure to initialize spi_device.mode early
    
    This patch adds earlier initialization of spi_device.mode, as needed
    on boards using nondefault chipselect polarity.  An example would be
    ones using the RS5C348 RTC without an external signal inverter between
    the RTC chipselect and the SPI controller.
    
    Without this mechanism, the first setup() call for that chip would
    wrongly enable chips, corrupting transfers to/from other chips sharing
    that SPI bus.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f7c58814eb75bf97b8bc18d107b2e26f28b6585
Merge: 1c952af... 0a3a6d6...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 28 15:12:25 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/dtor/input
    
    * master.kernel.org:/pub/scm/linux/kernel/git/dtor/input:
      Input: db9 - fix potential buffer overrun
      Input: atkbd - fix hardware autorepeat
      Input: wistron - add mapping for Wistron MS 2111

commit 1c952af548012bcf281623dafa2173897bfc6a77
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:44:14 2006 +1000

    [PATCH] m68knommu: remove fixed ROM region setups from linker script
    
    Remove the hard coded ROM region setups. Use Kconfig options to specify
    these in a generic way for platorms that want them.
    
    This builds on top of the other recent m68knommu linker script changes
    to completely remove fixed board configurations.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c750a012da6bc11ca4e49a5e170b417c4b344ffc
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:39:19 2006 +1000

    [PATCH] m68knommu: configuration options for ROM region
    
    Use Kconfig options to setup the optional ROM region used on some
    platforms. We used to define this in the linker script on a per
    board basis. The configure options are more flexible and clean up
    the linker script a lot.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3448ff8967a00067cbc3b6ebe9a3741b4e72f6d0
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:23:14 2006 +1000

    [PATCH] m68knommu: fix 68EZ328/config.c asm
    
    Fix 68EZ328/config.c asm to be clean for new gcc versions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69614fc66a11222baf61e05a3e5b98ef2e3427be
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:21:56 2006 +1000

    [PATCH] m68knommu: fix 68VZ328/config.c asm
    
    Fix 68VZ328/config.c asm to be clean for new gcc versions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bda658382614198714b27581528f9bfb60c05a71
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:21:38 2006 +1000

    [PATCH] m68knommu: fix 68360/config.c asm
    
    Fix 68360/config.c asm to be clean for new gcc versions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f7cfcc5bf2a1380f6cb8660f9e0127a5a872cbb
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:09:41 2006 +1000

    [PATCH] m68knommu: include irqnode.h in 68360/ints.c
    
    The irqnode_t struct has moved to irqnode.h, need to include that
    68360 ints.c.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0aee77b221a68bf8ef5401712bb55c89e36b461c
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 16:12:45 2006 +1000

    [PATCH] m68knommu: fix clobber list in uCdimm/uCsimm helper asm
    
    Fix clobber list in uCsimm/uCdimm boot load helper asm.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 541960fef7f0bd98be3a27052c8845e9c4b6a2ac
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 15:59:54 2006 +1000

    [PATCH] m68knommu: build support for 68328 romvec.S
    
    Conditionaly compile the 68328 romvec code based on the ROM configuration
    being enabled.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d44269e1fb1118473cae36958c96f08cf69905b
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 15:56:22 2006 +1000

    [PATCH] m68knommu: remove romvec asm code from ints.c
    
    Remove the inline 68328 romvec section asm code into its own file.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 727dda800f5076ce6f4653393fab651706959c93
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 15:54:22 2006 +1000

    [PATCH] m68knommu: fix compilation problems with 68328serial driver
    
    Clean out the 68328serial driver:
    
    . remove use of cli/sti
    . fix usage of tty_* calls
    . remove unused variables
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a9bb6fb343c4ce54cc67d83f77ca52c9d18d01b
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Wed Jun 28 15:58:18 2006 +1000

    [PATCH] m68knommu: create romvec.S for 68328
    
    Create the 68328 romvec section in its own assembler file. It can be
    compiled in when required.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 873d8898b7f6aeb4f2085381dbc201d68a37d02b
Merge: d9a5685... d3e5e1a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 28 15:00:49 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/aegl/linux-2.6:
      [IA64-SGI] fix prom revision checks in SN kernel
      [IA64] tiger_defconfig s/NR_CPUS=4/NR_CPUS=16/
      [IA64-SGI] - Pass OS logical cpu number to the SN prom (bios)
      [IA64] palinfo.c: s/register_cpu_notifier/register_hotcpu_notifier/

commit d9a5685436b0dd08a6386a2f9423103cb4689dbc
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 28 04:27:04 2006 -0700

    [PATCH] x86_64: oprofile build fix
    
    WARNING: "unset_nmi_callback" [arch/x86_64/oprofile/oprofile.ko] undefined!
    WARNING: "set_nmi_callback" [arch/x86_64/oprofile/oprofile.ko] undefined!
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3706a8728bcedfad54ed665e1a144e95b90f1ac7
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:27:03 2006 -0700

    [PATCH] Set err_stops_fifo for newer Promise as well
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57e834e2fb0590b4bf9ecffa4d5c87b6f44c5b6b
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:27:03 2006 -0700

    [PATCH] ide: clean up pdc202xx_old so its more readable (done so I could work on libata ports)
    
    Also sets the new fifo flag so that we don't hang on some errors with this
    chipset.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f201f5046ddaeeccb036bdf6848549bf5cb51bb1
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:27:02 2006 -0700

    [PATCH] ide: housekeeping on IDE drivers
    
    Move auto arrays to static (const).  Clean up using PCI_DEVICE in places,
    remove unreachable junk and dead code.
    
    Fix the serverworks cable detect logic (if ordering is wrong).  Backport
    from libata.  Plenty of scope for more cleanup left.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da574af755bcb1d604e01feadf2a8c31b364447c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:27:01 2006 -0700

    [PATCH] ide: fix error handling for drives which clear the FIFO on error
    
    If the controller FIFO cleared automatically on error we must not try
    and drain it as this will hang some chips.
    
    Based in concept on a broken patch from -mm some while back
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2930d1bed7ffea3062e43b8acdeb9e0587bfc6a9
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:27:00 2006 -0700

    [PATCH] SC1200 debug printk
    
    Kill a pair of long escaped debug printk calls
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19c1ef5f671b5793622a7a3d03940ef3f20a3ba0
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:26:59 2006 -0700

    [PATCH] ide: clean up siimage
    
    Remove all the ifdef preparation for enhanced features that never occcurred
    and is only in libata.  For the SATA chips (but not yet PATA ones) politely
    suggest to the user that libata may offer more features.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Cc: Sergei Shtylylov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a1276e7b6cba549553285f74e87f702bfff6fac
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:26:58 2006 -0700

    [PATCH] Old IDE, fix SATA detection for cabling
    
    This is based on the proposed patches flying around but also checks that
    the device in question is new enough to have word 93 rather thanb blindly
    assuming word 93 == 0 means SATA (see ATA-5, ATA-7)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e866f0bf89e829736a12599bb7f476d1c378646
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 28 04:26:58 2006 -0700

    [PATCH] oss/via: make bitfield unsigned
    
    Make a 1-bit field unsigned like all of the others near it.
    sound/oss/via82cxxx_audio.c:311:21: error: dubious one-bit signed bitfield
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be6990e7473fcd11becda747c24b94a478413245
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 28 04:26:57 2006 -0700

    [PATCH] ac97_codec: make bitfield unsigned
    
    Make a 1-bit bitfield unsigned (no space for sign bit).
    Removes 24 sparse warnings from this one file:
    include/linux/ac97_codec.h:262:13: error: dubious one-bit signed bitfield
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e85f8dcc2750685e50139df4da8bdb68475393fc
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 28 04:26:56 2006 -0700

    [PATCH] sound: fix cs4232 section mismatch
    
    Fix section mismatch: adds __init to probe function,
    frees some init memory, not critical.
    WARNING: sound/oss/cs4232.o - Section mismatch: reference to .init.text: from .text after 'cs4232_pnp_probe' (at offset 0x152)
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cab267c65f44337974e4f1eae490b21dce0e9811
Author: Michael Hanselmann <linux-kernel@hansmi.ch>
Date:   Wed Jun 28 04:26:55 2006 -0700

    [PATCH] powermac backlight fixes
    
    Fix a erroneous calculation of the legacy brightness values as reported by
    Paul Collins.  Additionally, it moves the calculation of the negative value
    in the radeonfb driver after the value check.
    
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Acked-by: Paul Collins <paul@briny.ondioline.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96febe9fb7b04f2a078882d08bd6a997dee7cfa3
Author: Corey Minyard <minyard@acm.org>
Date:   Wed Jun 28 04:26:55 2006 -0700

    [PATCH] IPMI: watchdog handle panic properly
    
    Modify the watchdog timeout in IPMI to only do things at panic/reboot time if
    the watchdog timer was already running.  Some BIOSes do not disable the
    watchdog timer at startup, and this led to a reboot a while later if the new
    OS running didn't start monitoring the watchdog, even if the watchdog was not
    running before.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a245866f8a417250c0f82b16f7a6dcf0b812f58
Author: Corey Minyard <minyard@acm.org>
Date:   Wed Jun 28 04:26:54 2006 -0700

    [PATCH] IPMI: remove high res timer code
    
    There was some old high-res-timer code in the IPMI driver that is dead.
    Remove it.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 409035e088ce15178c5aa157cab493bc22096b6d
Author: Corey Minyard <minyard@acm.org>
Date:   Wed Jun 28 04:26:53 2006 -0700

    [PATCH] IPMI: tidy msghandler timer
    
    Tidy up the timer usage in the IPMI driver.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ac4360b95496f4137ee19b54e9f7dfa3946984d
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:26:52 2006 -0700

    [PATCH] istallion: cleanups
    
    Turned out to be rather a monster
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit effc8b704b48c3c727715abf49592a57547b6818
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed Jun 28 04:26:51 2006 -0700

    [PATCH] stallion: fix recent SMP locking cleanup
    
    Works better on SMP if...
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9d7fa40098253a6768cfc3ffbbd5988ba852d364
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Wed Jun 28 04:26:51 2006 -0700

    [PATCH] v9fs: fix fid check in v9fs_create
    
    Fix an incorrect check whether a fid was allocated in v9fs_create and if it
    should be freed on error.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@ericvh.myip.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94374e7cc369b972855cebd13ba942f4eb1be1ac
Author: Latchesar Ionkov <lucho@ionkov.net>
Date:   Wed Jun 28 04:26:50 2006 -0700

    [PATCH] v9fs: return the correct error when interrupted by signal
    
    If a signal interrupts the user process, v9fs sends a flush request to the
    file server and waits for its response.  It error code is incorrectly set
    to the error code of the flush message instead of ERESTARTSYS.  The patch
    sets the error code to the correct value.
    
    Signed-off-by: Latchesar Ionkov <lucho@ionkov.net>
    Cc: Eric Van Hensbergen <ericvh@ericvh.myip.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33b37a33c242542fac2980b8ccd90977388b7a8d
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Wed Jun 28 04:26:49 2006 -0700

    [PATCH] remove active field from tty buffer structure
    
    Remove 'active' field from tty buffer structure.  This was added in 2.6.16
    as part of a patch to make the new tty buffering SMP safe.  This field is
    unnecessary with the more intelligently written flush_to_ldisc that adds
    receive_room handling.
    
    Removing this field reverts to simpler logic where the tail buffer is
    always the 'active' buffer, which should not be freed by flush_to_ldisc.
    (active == buffer being filled with new data)
    
    The result is simpler, smaller, and faster tty buffer code.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Theodore Ts'o <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c3bb20f46709a0adfa7ea408013edbcab945d5a
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Wed Jun 28 04:26:48 2006 -0700

    [PATCH] add receive_room flow control to flush_to_ldisc
    
    Flush data serially to line discipline in blocks no larger than
    tty->receive_room to avoid losing data if line discipline is busy (such as
    N_TTY operating at high speed on heavily loaded system) or does not accept
    data in large blocks (such as N_MOUSE).
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 817d6d3bceaf34c99f5343820f9b9e6021f0655c
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Wed Jun 28 04:26:47 2006 -0700

    [PATCH] remove TTY_DONT_FLIP
    
    Remove TTY_DONT_FLIP tty flag.  This flag was introduced in 2.1.X kernels
    to prevent the N_TTY line discipline functions read_chan() and
    n_tty_receive_buf() from running at the same time.  2.2.15 introduced
    tty->read_lock to protect access to the N_TTY read buffer, which is the
    only state requiring protection between these two functions.
    
    The current TTY_DONT_FLIP implementation is broken for SMP, and is not
    universally honored by drivers that send data directly to the line
    discipline receive_buf function.
    
    Because TTY_DONT_FLIP is not necessary, is broken in implementation, and is
    not universally honored, it is removed.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Theodore Ts'o <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0ac4761fa52acda90f9f53819c81474b511e3af
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Wed Jun 28 04:26:47 2006 -0700

    [PATCH] RTC: add rtc-rs5c348 driver
    
    Add an SPI driver for the Ricoh RS5C348 RTC chip.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Acked-by: Alessandro Zummo <a.zummo@towertech.it>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 84860f9979804cfd97638ce0ec9d583daf338e0d
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 28 04:26:46 2006 -0700

    [PATCH] load_module() cleanup
    
    Undo bizarre declaration in load_module().
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f71d20e961474dde77e6558396efb93d6ac80a4b
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Wed Jun 28 04:26:45 2006 -0700

    [PATCH] Add EXPORT_UNUSED_SYMBOL and EXPORT_UNUSED_SYMBOL_GPL
    
    Temporarily add EXPORT_UNUSED_SYMBOL and EXPORT_UNUSED_SYMBOL_GPL.  These
    will be used as a transition measure for symbols that aren't used in the
    kernel and are on the way out.  When a module uses such a symbol, a warning
    is printk'd at modprobe time.
    
    The main reason for removing unused exports is size: eacho export takes
    roughly between 100 and 150 bytes of kernel space in the binary.  This
    patch gives users the option to immediately get this size gain via a config
    option.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5e54d6e53a20cef45af7499e86164f0e0d16bb2
Author: Christoph Hellwig <hch@lst.de>
Date:   Wed Jun 28 04:26:44 2006 -0700

    [PATCH] mark address_space_operations const
    
    Same as with already do with the file operations: keep them in .rodata and
    prevents people from doing runtime patching.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Cc: Steven French <sfrench@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a052b68b1e7a31f1e6a721290035e9deb0f6fed9
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 28 04:26:43 2006 -0700

    [PATCH] x86: do_IRQ(): check irq number
    
    We recently changed x86 to handle more than 256 IRQs.  Add a check in do_IRQ()
    just to make sure that nothing went wrong with that implementation.
    
    [chrisw@sous-sol.org: do x86_64 too]
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Cc: "Protasevich, Natalie" <Natalie.Protasevich@UNISYS.com>
    Cc: <Christian.Limpach@cl.cam.ac.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 607f31e80b6f982d7c0dd7a5045377fc368fe507
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed Jun 28 16:52:45 2006 -0400

    Revert "Merge branch 'odirect'"
    
    This reverts ccf01ef7aa9c6c293a1c64c27331a2ce227916ec commit.
    
    No idea how git managed this one: when I asked it to merge the odirect
    topic branch it actually generated a patch which reverted the change.
    
    Reverting the 'merge' will once again reveal Chuck's recent NFS/O_DIRECT
    work to the world.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 56fb9e5346b99bc6b77def79b3739097bc13ea8a
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun May 21 20:58:10 2006 -0700

    [WATCHDOG] Documentation/watchdog update
    
    Documentation/watchdog/:
    Expose example and tool source files in the Documentation/ directory in
    their own files instead of being buried (almost hidden) in readme/txt files.
    
    This will make them more visible/usable to users who may need
    to use them, to developers who may need to test with them, and
    to janitors who would update them if they were more visible.
    
    Also, if any of these possibly should not be in the kernel tree at
    all, it will be clearer that they are here and we can discuss if
    they should be removed.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 79bc79b07c9c6f8ae9290704e9e503a9327fcbb2
Author: pageexec <pageexec@freemail.hu>
Date:   Wed Jun 28 20:44:16 2006 +0200

    [PATCH] small fix for not releasing the mmap semaphore in i386/arch_setup_additional_pages
    
    the VDSO randomization code on i386 fails to release the mmap semaphore
    if insert_vm_struct() fails.
    
    [ Made the conditional unlikely. -- Linus ]
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f28e71617ddaf2483e3e5c5237103484a303743f
Merge: dc6a78f... a39727f...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Wed Jun 28 14:06:39 2006 -0400

    Merge ../linux-2.6/
    
    Conflicts:
    
    	drivers/scsi/aacraid/comminit.c
    
    Fixed up by removing the now renamed CONFIG_IOMMU option from
    aacraid
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit adf8a287150667feb5747f8beade62acacc17d4e
Author: Dave Jones <davej@redhat.com>
Date:   Wed Jun 28 13:38:43 2006 -0400

    [AGPGART] Make AGP depend on PCI
    
    Fixes possible compile error in amd64 with pci=n
    pointed out by Adrian Bunk.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8caf7aa26e0797e5706043f94c491acd1a08636a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 28 16:39:36 2006 +0200

    [ALSA] echoaudio - Remove kfree_nocheck()
    
    Remove obsoleted kfree_nochec() (for debug).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ccb99eee9c2430ad7ce2e7026fae93d6668d2d27
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 28 16:35:49 2006 +0200

    [ALSA] echoaudio - Fix Makefile
    
    Fix missing makefile entries for echoaudio drivers
    (sorry for cut-n-paste error!)
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 19039bd0079f282b1023e61212285b5653e3a8ad
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 28 15:52:16 2006 +0200

    [ALSA] Add Intel D965 board support
    
    Added the support for Intel D965 boards with STAC9227 codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 9c7f852e8b2cc37da5dc5e1ba416238166a37d0f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 28 15:08:22 2006 +0200

    [ALSA] Fix/add support of Realtek ALC883 / ALC888 and ALC861 codecs
    
    Patch from Realtek:
    - Fix ALC883 support code
    - Add support of ALC888 codec
    - Add ALC660 support (ALC861-compatible)
    - Add HP xw4400/6400/8400/9400 support (model=hp-bpc)
    - Code clean-up: fix spaces and indentation
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 8c42d5bafa08baad5d647dd0b9050086ffe36e15
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 28 14:15:09 2006 +0200

    [ALSA] Fix a typo in echoaudio/midi.c
    
    Fixed a typo in echoaudio/midi.c.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit bd66f3bbc369191279d18c21f305341c8bc9cafe
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jun 28 14:00:58 2006 +0200

    [ALSA] snd-aoa: enable dual-edge in GPIOs
    
    Apparently some firmware versions forget enabling the dual-edge bit,
    snd-powermac did that too and even OSX does sometimes. This should fix
    headphone plug detection on those machines.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c6feefd03ed12d89af591345fb9c26de7098764d
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jun 28 13:59:50 2006 +0200

    [ALSA] snd-aoa: support iMac G5 iSight
    
    This properly adds support for the iMac G5 iSight.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d91c4e8c63a61c2d9ec96fc6a9aa5a65d468befc
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jun 28 13:59:19 2006 +0200

    [ALSA] snd-aoa: not experimental
    
    The dependencies in the soundbus Kconfig were wrong, it isn't
    experimental any more.
    This patch fixes that and makes it select SND_PCM too instead of
    depending on it.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit dd7b254d8dd3a9528f423ac3bf875e6f0c8da561
Author: Giuliano Pochini <pochini@shiny.it>
Date:   Wed Jun 28 13:53:41 2006 +0200

    [ALSA] Add echoaudio sound drivers
    
    From: Giuliano Pochini <pochini@shiny.it>Add echoaudio sound drivers (darla20, darla24, echo3g, gina20, gina24,
    indigo, indigodj, indigoio, layla20, lala24, mia, mona)
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cb9d24e4349013628259b5fee97e692173731b07
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 27 17:49:12 2006 +0200

    [ALSA] ak4xxx-adda - Code clean-up
    
    Fix spaces, fold lines to fit 80 columns in ak4xxx-adda driver codes.
    Split a long reset function to each codec routine just for better
    readability.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit cf1756e9cd7c1d160fe72944af51d87e96285a32
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 27 15:05:38 2006 +0200

    [ALSA] Remove CONFIG_EXPERIMENTAL from intel8x0m driver
    
    Removed CONFIG_EXPERIMENTAL from intel8x0m driver.
    The driver has been working well without problems.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c83c0c470565a0aed2f6fcbaa6c80a98ef250586
Author: Jani Alinikula <janialinikula@gmail.com>
Date:   Tue Jun 27 15:00:55 2006 +0200

    [ALSA] Stereo controls for M-Audio Revolution cards
    
    This patch adds stereo controls to revo cards by making the ak4xxx
    driver mixers configurable from the card driver.
    
    Signed-off-by: Jani Alinikula <janialinikula@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit be7ee27822975cee5dabb2cfd7f03e7fde38e3f4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 27 13:07:04 2006 +0200

    [ALSA] Fix misuse of __list_add() in seq_ports.c
    
    seq_ports.c::snd_seq_delete_all_ports() uses __list_add() to replace the
    whole list entries.  This results in BUG() with recent FC5 kernel due to
    a sanity check in __list_add().
    The patch fixes this misue of __list_add() by using standard macros
    instead (although a bit more code is needed).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b2e1b0cc729ebbf27713a64a32c49e27fa81e600
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 27 12:48:59 2006 +0200

    [ALSA] hda-codec - Add model entry for Samsung X60 Chane
    
    Added the model entry 'laptop-eapd' for Samsung X60 Chane with
    AD1986A codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit b10e539129c080486ef08feb2b28dd05ab95ba16
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue Jun 27 08:41:26 2006 +0200

    [ALSA] make CONFIG_SND_DYNAMIC_MINORS non-experimental
    
    The dynamic minors code is mature, has been tested, and seems to work
    fine.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e8b98ff428f1c0eb5311d732043c0e4d28ffce8e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jun 26 13:15:07 2006 +0200

    [ALSA] Fix wrong dependencies of snd-aoa driver
    
    Fixed wrong dependencies of snd-aoa driver.  It selects PCM instead.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 30833195ec8d2b8bcc17fb06659e91506edf5b63
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon Jun 26 13:11:09 2006 +0200

    [ALSA] fix build failure due to snd-aoa
    
    When snd-aoa is not built or built as modules, but CONFIG_SND is yes,
    kernel build fails due to a bug I introduced when adding snd-aoa. This
    patch fixes it.
    From: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 02856b5684677b74095069c3be4774c2992e4fdc
Author: Jaya Kumar <jayakumar.alsa@gmail.com>
Date:   Fri Jun 23 15:18:41 2006 +0200

    [ALSA] AD1888 mixer controls for DC mode
    
    This patch adds two mixer controls. The V_REFOUT enable is a
    documented register that couples the microphone input lines
    to the V_REFOUT DC source. The High Pass Filter enable in the
    AC97_AD_TEST2 (0x5c) is an undocumented register provided by
    Miller Puckette via Analog Devices that enables the AD codec
    to apply a high pass filter to the input.
    
    Signed-off-by: Jaya Kumar <jayakumar.alsa@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 02ada9c112eb00ecb9d2c04b6132f48ade534dbf
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 23 15:13:57 2006 +0200

    [ALSA] Suppress irq handler mismatch messages in ALSA ISA drivers
    
    Suppress 'irq handler mismatch' messages at auto-probing of irqs
    in ALSA ISA drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit e217e30c359edafce3225d2c4fbbda06ae5a408b
Author: Sam Revitch <sam.revitch@gmail.com>
Date:   Fri Jun 23 15:10:18 2006 +0200

    [ALSA] usb-audio support for Turtle Beach Roadie
    
    From: Sam Revitch <sam.revitch@gmail.com>Recently a Turtle Beach Audio Advantage Roadie device ended up in my
    possession.  It seems to work with the snd-usb-audio driver, but only
    using the headphone jack in 2-channel mode.  The device has a DIN
    connector carrying six more channels that are otherwise silent.
    C-Media has freely available documentation for the CM106 chip around
    which this device is based, and enabling 8-channel output, or
    6-channel output with the headphone jack following the front pair is a
    matter of setting one of its registers.
    Attached is a patch to try to enable 5.1 output mode at probe time.
    It seems to work correctly with my device.  There is quite list of
    other configurables for this device that might deserve controls.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit d3e5e1a1b4f43bcfa1a34516e233911487c67307
Author: Aaron Young <ayoung@google.engr.sgi.com>
Date:   Wed Jun 28 08:34:55 2006 -0700

    [IA64-SGI] fix prom revision checks in SN kernel
    
    The following patch fixes two spots in the SN kernel
    that check a fixed prom revision number to determine prom
    feature support. These checks are only valid on shub1 systems.
    They are invalid on shub2 systems which have a different prom
    with different revision numbers.
    
    Signed-off-by: Aaron Young <ayoung@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 583e7f5d36547f0d84caf71d43b71f0530a47766
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 21 20:43:55 2006 +0100

    [ARM] nommu: backtrace code must not reference a discarded section
    
    The code in "1007:" is in the .fixup section, which in the mmuless
    case is discarded.  Since this code is referenced from the .text
    section, it causes an link error.  Move this code into the .text
    section instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d090dddaba7c8da6401bb259340dce05ca32f564
Author: Hyok S. Choi <hyok.choi@samsung.com>
Date:   Wed Jun 28 14:10:01 2006 +0100

    [ARM] nommu: Initial uCLinux support for MMU-based CPUs
    
    In noMMU mode, various of functions which are defined in mm/proc-*.S
    is not valid or needed to be avoided. i.g. switch_mm is not needed,
    just returns and this makes the I & D caches are valid which shows
    great improvement of performance including task switching and IPC.
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a4f7e76367f7775ecf534a37b4623c83d9d7ba74
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 28 12:52:41 2006 +0100

    [ARM] nommu: prevent Xscale-based machines being selected
    
    Hyok says Intel Xscale is not currently supported by uCLinux.
    Rather than adding #error statements to the Xscale support files
    and causing !MMU+Xscale configurations to fail to build, prevent
    Xscale-based machines from being selected in !MMU mode.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3e3612259560abde89615e0df1deb1f2303a0bc4
Author: Hyok S. Choi <hyok.choi@samsung.com>
Date:   Tue Jun 27 20:55:43 2006 +0100

    [ARM] nommu: export flush_dcache_page()
    
    This is a trivial patch to export flush_dcache_page in mm/nommu.c.
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 092c1952e18fec06f3a951113fe1d87492d6e840
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 17:34:50 2006 +0100

    [ARM] nommu: remove fault-armv, mmap and mm-armv files from nommu build
    
    Remove fault-armv.o, mmap.o and mm-armv.o from uclinux builds - these
    are concerned with MMU-ful operations, and as such are redundant for
    uclinux.
    
    Since this also removes iotable_init() and iotable_init() is used
    extensively in the platform support files, just make it a no-op.
    
    Based upon a couple of patches by Hyok.
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 888e7bf166a0059480da137f3bd28dcd51175f3d
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 17:20:13 2006 +0100

    [ARM] Remove TABLE_SIZE, and several unused function prototypes
    
    TABLE_SIZE is never used in arch/arm/mm/init.c.  create_memmap_holes(),
    memtable_init, and setup_io_desc() no longer exist in the kernel.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6b1b38c520d85388ab6538001265cc342e81a70
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 10:46:23 2006 +0100

    [ARM] nommu: Provide a simple flush_dcache_page implementation
    
    nommu doesn't require a complex flush_dcache_page implementation
    like the MMU-ful CPUs do, so provide a simplified version in nommu.c
    and omit flush.c from the build as appropriate.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3b93e7b08fc3e87e5b451ee5e47cfe142779d0cd
Author: Hyok S. Choi <hyok.choi@samsung.com>
Date:   Thu Jun 22 11:48:56 2006 +0100

    [ARM] nommu: add arch/arm/Kconfig-nommu to Kconfig files
    
    Include Kconfig-nommu when MMU is not selected.
    
    (This is part of a patch from Hyok.)
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5924486dc0f205ebc2bbf4c262eec902ff38e802
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 22 15:05:36 2006 +0100

    [ARM] nommu: add stubs for ioremap and friends
    
    nommu doesn't have any form of remapping support, so ioremap, etc
    become stubs which just return the casted address, doing nothing
    else.
    
    Move ioport_map(), ioport_unmap(), pci_iomap(), pci_iounmap()
    into a separate file which is always built.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f9c21a6ee7e040be0f623a6b8dcfb5ec4f7532f5
Author: Hyok S. Choi <hyok.choi@samsung.com>
Date:   Wed Jun 21 22:26:29 2006 +0100

    [ARM] nommu: avoid selecting TLB and CPU specific copy code
    
    Since uclinux doesn't make use of the TLB, including the TLB
    maintainence and CPU-optimised copypage functions does not
    make sense.  Remove them.
    
    (This is part of one of Hyok's patches.)
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 9641c7cc5a7f6d5c9dc9b43eea4e5f8c3c08c94e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 21 20:38:17 2006 +0100

    [ARM] nommu: uaccess tweaks
    
    MMUless systems have only one address space for all threads, so
    both the usual access_ok() checks, and the exception handling do
    not make much sense.
    
    Hence, discard the fixup and exception tables at link time, use
    memcpy/memset for the user copy/clearing functions, and define
    the permission check macros to be constants.
    
    Some of this patch was derived from the equivalent patch by
    Hyok S. Choi.
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 002547b4f86c27bfac5bae344b723d250857be6b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 20 20:46:52 2006 +0100

    [ARM] nommu: adjust headers for !MMU ARM systems
    
    Majorily based on Hyok Choi's patches, this fixes up the asm-arm
    header files for mmuless systems.  Over and above Hyok's patches:
    
    - nommu.h merged into mmu.h (it's only a structure)
    - nommu_context.h is essentially the same as mmu_context.h, but
      without the MM switching code.
    
    so there's no point having separate files.  Also, in memory.h,
    there's no point #ifndef'ing PHYS_OFFSET and END_MEM - both
    CONFIG_DRAM_BASE and CONFIG_DRAM_SIZE will always be set by the
    configuration scripts.
    
    Other files have minor formatting changes, but are essentially
    the same.  Hyok's original patches were signed off thusly:
    
      Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 60b6cf6851d0e12956c109987966f2e7417ce212
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 19 17:36:43 2006 +0100

    [ARM] nommu: we need the TLS register emulation for nommu mode
    
    Since there can be no fixed location for the TLS value with nommu
    systems, we must provide TLS register emulation in order to support
    TLS binaries on CPUs without the thread register.
    
    Part of a patch from Hyok S. Choi, and cleaned up by rmk.
    
    Signed-off-by: Hyok S. Choi <hyok.choi@samsung.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 59e2e6892087ba05101f86309a23c4f5a3ac04a6
Author: Tony Luck <tony.luck@intel.com>
Date:   Tue Jun 27 15:32:24 2006 -0700

    [IA64] tiger_defconfig s/NR_CPUS=4/NR_CPUS=16/
    
    Montecito is coming with dual core and threading, so this
    four socket box can now have sixteen logical cpus.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9d56d878ae12dbb9af744cec2858ed35dffde2b2
Author: Jack Steiner <steiner@sgi.com>
Date:   Thu Apr 27 20:01:05 2006 -0500

    [IA64-SGI] - Pass OS logical cpu number to the SN prom (bios)
    
    Pass the OS logical cpu number to the PROM. This allows PROM
    to log the OS logical cpu number in error records viewed thru POD.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f1206641ef4a8cb7a7b15b75e8cfdc7c6bfaf213
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 28 09:55:13 2006 -0700

    [IA64] palinfo.c: s/register_cpu_notifier/register_hotcpu_notifier/
    
    Chandra Seetharaman missed one place in commit:
     65edc68c345cbe21d0b0375c3452a3ed5e322868
    [but it only shows up when building the ski simulator configuration
     of ia64, so thats understandable]
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit e033108bf7e585755350b554048229d1fd10a02e
Author: Guennadi Liakhovetski <gl@dsa-ac.de>
Date:   Wed Jun 28 16:42:02 2006 +0100

    [ARM] 3672/1: PXA: don't probe output GPIOs for interrupt
    
    Patch from Guennadi Liakhovetski
    
    Currently probe_irq_on() on PXA will silently reconfigure all output GPIOs, that are not configured as alternate functions, for input. Avoid that. Upon CPU reset all GPIOs are configured as inputs, so, if a GPIO is configured as output, it has been done so intentionally.
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 87c01737b1ccf821b93f74a26a0dc991dba16d19
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 23:03:04 2006 +0100

    [ARM] 3671/1: ep93xx: add cirrus logic edb9315 support
    
    Patch from Lennert Buytenhek
    
    This patch adds support for the Cirrus Logic EDB9315, an evaluation
    board based on the Cirrus Logic EP9315 SoC, with 64M RAM, two USB host
    ports, audio in/out, three serial ports, 10/100 ethernet, and IDE, VGA,
    and LCD interfaces.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c17fad11f3105ca4d5bbb2686725aad208f5ead4
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 23:03:03 2006 +0100

    [ARM] 3370/2: ep93xx: add crunch support
    
    Patch from Lennert Buytenhek
    
    Add the necessary kernel bits for crunch task switching.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5429b060df6d556f396b78364ad017686015bc34
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 22:56:19 2006 +0100

    [ARM] 3665/1: crunch: add ptrace support
    
    Patch from Lennert Buytenhek
    
    This patch makes it possible to get/set a task's Crunch state via
    the ptrace(2) system call.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3bec6ded282b331552587267d67a06ed7fd95ddd
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 22:56:18 2006 +0100

    [ARM] 3664/1: crunch: add signal frame save/restore
    
    Patch from Lennert Buytenhek
    
    This patch makes the kernel save Crunch state in userland signal frames,
    so that any userland signal handler can safely use the Crunch coprocessor
    without corrupting the Crunch state of the code it preempted.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 562ca1e32a9c2514551559691db809606502a15a
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 22:56:17 2006 +0100

    [ARM] 3663/1: fix resource->end off-by-one thinko during physmap conversion
    
    Patch from Lennert Buytenhek
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 02c4293194432c7466efe9477126d6179d6fda07
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 22:56:16 2006 +0100

    [ARM] 3662/1: ixp23xx: don't include asm/hardware.h in uncompress.h
    
    Patch from Lennert Buytenhek
    
    ixp23xx was including asm/hardware.h in its version of uncompress.h,
    to get at the physical address of the debug UART, but this include was
    causing various inline functions that are totally unrelated to the
    decompressor, defined in headers in include/asm-arm/arch-ixp23xx, to
    be included in the decompressor image.
    
    Include asm/arch/ixp23xx.h instead, and move the sole inline function
    in ixp23xx.h to another header.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 313f53e3823c00bd0aa3601f01897573f2fc326d
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 27 22:54:39 2006 +0100

    [ARM] 3660/1: Remove legacy defines
    
    Patch from Andrew Victor
    
    Remove the remaining legacy __virt_to_bus__is_a_macro and
    __bus_to_virt__is_a_macro defines in some ARM platforms.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2b8b4913efa20f76718f524accf40e6d02a3bf0a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 27 22:53:04 2006 +0100

    [ARM] 3661/1: S3C2412: Fix compilation if CPU_S3C2410 only
    
    Patch from Ben Dooks
    
    If only the S3C2412 based machines are selected,
    then the regs-dsc.h does not export the S3C2412_DSC
    registers as it is wrapped in CONFIG_CPU_S3C2440.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b8ccca4a57c91dfd81b0a50e16942699bb01600a
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 27 22:53:03 2006 +0100

    [ARM] 3658/1: S3C244X: Change usb-gadget name to s3c2440-usbgadget
    
    Patch from Ben Dooks
    
    The S3C2440 and S3C2442 have an extended USB gadget
    controller, so re-name the platform device to inform
    the driver that it needs to change some parameters
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 02fcb974369d21c3df61d4ac5a2e1a58dce86495
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 21 14:44:52 2006 +0100

    [ARM] Remove the __arch_* layer from uaccess.h
    
    Back in the days when we had armo (26-bit) and armv (32-bit) combined,
    we had an additional layer to the uaccess macros to ensure correct
    typing.  Since we no longer have 26-bit in this tree, we no longer
    need this layer, so eliminate it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 49fee981fa98f3c0a21f3d6c8193eddcc15e84e9
Author: Vladimir Lebedev <vladimir.p.lebedev@intel.com>
Date:   Tue Jun 20 16:46:00 2006 -0400

    ACPI: fix battery on HP NX6125
    
    EC problem was cause of both battery and AC issues.
    http://bugzilla.kernel.org/show_bug.cgi?id=6455
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit dc6a78f1af10d28fb8c395034ae1e099b85c05b0
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 22:01:28 2006 -0700

    [SCSI] atp870u: reduce huge stack usage
    
    The atp870u driver is the largest stack eater reported by checkstack
    (on x86_864, allmodconfig).  This converts the offending function
    to kmalloc+kfree struct atp_unit instead of allocating it on the stack.
    Was:
    0x0000164c atp870u_probe [atp870u]:			3176
    Now:
    0x0000164c atp870u_probe [atp870u]:			408
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 87cf89866790a373edcf88c12b64d6d38560acdd
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jun 27 16:09:26 2006 -0600

    [SCSI] mptsas: Adding 1078 ROC support
    
    * Adding 1078 ROC (Raid On Chip) Support - New host adapter
    
    * Moving all PCI Vendor/Device ids to using internal defines; a request
    from Christoph/James B. some time ago for when the next chip was added.
    
    * Removing SAS 1066/1066E Vendor/Device IDs, as there are no plans to
    manufacture that controller.
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 547f9a218436ea35baf9a52e981753e44d9cff1f
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jun 27 14:42:12 2006 -0600

    [SCSI] mptsas: wide port support
    
    * Wide port support added - using James Bottomley's new SAS wide port API.
    (There is a known problem in sas transport layer reported yesterday to
    James. The Kobject dev.bus_ids for end devices are not unique across
    expanders. I have added a work around in this patch, where I asigning
    an unique port identifier for every port within the host - this solves
    the problem, but I expect a fix from James in the sas transport).
    
    * Adding target_alloc and target_destroy entry points, and moving code over
    from the slave entry points.
    
    * The renaming of some mptscsih_xxx functions declared in mptsas.c,
    to mptsas_xxx.
    
    * Target Reset moved from slave_destroy to hotplug work thread
    handling (with regard to device removal). Also inhibit IO to end device
    while device is being broken down . Talked to James Smart about this
    at Linux Expo (with questions of how the fc transport handles this).
    
    * Cleaning up the kzalloc's, and kfree's
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 65c92b09acf0218b64f1c7ba4fdabeb8b732c876
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Wed Jun 28 12:22:50 2006 -0400

    [SCSI] scsi_transport_sas: introduce a sas_port entity
    
    this patch introduces a port object, separates out ports and phys,
    with ports becoming the primary objects of the tree.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 2076eb6ab8339bf09620a0160be3607bbbb61a50
Author: Eric Moore <eric.moore@lsil.com>
Date:   Tue Jun 27 14:39:06 2006 -0600

    [SCSI] fusion : mpi header update
    
    MPI Header Update
    
    Signed-off-by: Eric Moore <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 309bd271211caa5a04a8137649cebd7691376351
Author: Brian King <brking@us.ibm.com>
Date:   Tue Jun 27 11:10:43 2006 -0500

    [SCSI] scsi: Device scanning oops for offlined devices (resend)
    
    If a device gets offlined as a result of the Inquiry sent
    during scanning, the following oops can occur. After the
    disk gets put into the SDEV_OFFLINE state, the error handler
    sends back the failed inquiry, which wakes the thread doing
    the scan. This starts a race between the scanning thread
    freeing the scsi device and the error handler calling
    scsi_run_host_queues to restart the host. Since the disk
    is in the SDEV_OFFLINE state, scsi_device_get will still
    work, which results in __scsi_iterate_devices getting
    a reference to the scsi disk when it shouldn't.
    
    The following execution thread causes the oops:
    
    CPU 0 (scan)				CPU 1 (eh)
    
    ---------------------------------------------------------
    scsi_probe_and_add_lun
                            ....
                                            scsi_eh_offline_sdevs
                                            scsi_eh_flush_done_q
    scsi_destroy_sdev
    scsi_device_dev_release
                                            scsi_restart_operations
                                             scsi_run_host_queues
                                              __scsi_iterate_devices
                                               get_device
    scsi_device_dev_release_usercontext
                                              scsi_run_queue
                                                <---OOPS--->
    
    The patch fixes this by changing the state of the sdev to SDEV_DEL
    before doing the final put_device, which should prevent the race
    from occurring.
    
    Original oops follows:
    
    Badness in kref_get at lib/kref.c:32
    Call Trace:
    [C00000002F4476D0] [C00000000000EE20] .show_stack+0x68/0x1b0 (unreliable)
    [C00000002F447770] [C00000000037515C] .program_check_exception+0x1cc/0x5a8
    [C00000002F447840] [C00000000000446C] program_check_common+0xec/0x100
     Exception: 700 at .kref_get+0x10/0x28
        LR = .kobject_get+0x20/0x3c
    [C00000002F447B30] [C00000002F447BC0] 0xc00000002f447bc0 (unreliable)
    [C00000002F447BB0] [C000000000254BDC] .get_device+0x20/0x3c
    [C00000002F447C30] [D000000000063188] .scsi_device_get+0x34/0xdc [scsi_mod]
    [C00000002F447CC0] [D0000000000633EC] .__scsi_iterate_devices+0x50/0xbc [scsi_mod]
    [C00000002F447D60] [D00000000006A910] .scsi_run_host_queues+0x34/0x5c [scsi_mod]
    [C00000002F447DF0] [D000000000069054] .scsi_error_handler+0xdb4/0xe44 [scsi_mod]
    [C00000002F447EE0] [C00000000007B4E0] .kthread+0x128/0x178
    [C00000002F447F90] [C000000000025E84] .kernel_thread+0x4c/0x68
    Unable to handle kernel paging request for <7>PCI: Enabling device: (0002:41:01.1), cmd 143
    data at address 0x000001b8
    Faulting instruction address: 0xd0000000000698e4
    sym1: <1010-66> rev 0x1 at pci 0002:41:01.1 irq 216
    sym1: No NVRAM, ID 7, Fast-80, LVD, parity checking
    sym1: SCSI BUS has been reset.
    scsi2 : sym-2.2.2
    cpu 0x0: Vector: 300 (Data Access) at [c00000002f447a30]
        pc: d0000000000698e4: .scsi_run_queue+0x2c/0x218 [scsi_mod]
        lr: d00000000006a904: .scsi_run_host_queues+0x28/0x5c [scsi_mod]
        sp: c00000002f447cb0
       msr: 9000000000009032
       dar: 1b8
     dsisr: 40000000
      current = 0xc0000000045fecd0
      paca    = 0xc00000000048ee80
        pid   = 1123, comm = scsi_eh_1
    enter ? for help
    [c00000002f447d60] d00000000006a904 .scsi_run_host_queues+0x28/0x5c [scsi_mod]
    [c00000002f447df0] d000000000069054 .scsi_error_handler+0xdb4/0xe44 [scsi_mod]
    [c00000002f447ee0] c00000000007b4e0 .kthread+0x128/0x178
    [c00000002f447f90] c000000000025e84 .kernel_thread+0x4c/0x68
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a144c5ae0956fb262e6c82624c82b1110a451437
Author: Brian King <brking@us.ibm.com>
Date:   Tue Jun 27 11:10:31 2006 -0500

    [SCSI] scsi: Add allow_restart sysfs class attribute
    
    This is a resend of a patch I generated in response to an email sent
    by Ruben Faelens <parasietje@gmail.com>. His original email to
    linux-scsi requested a method in which he could spin down a scsi disk
    when not in use and have the kernel automatically spin it back up when
    an I/O was generated to the disk. The infrastructure to automatically
    spin a disk up has been in the scsi error handler for some time now,
    but it is not enabled by default. This patch adds an sd sysfs attribute
    which allows userspace to enable this behavior.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7f8a894066b826a4baea49c2a3adbba0a56a192f
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Wed Jun 28 10:11:33 2006 +0200

    [MTD] DOC: Fixup read functions and do a little cleanup
    
    The NAND rework resulted in non ECC based reads. Fix it up and
    do a bit of cleanup while at it.
    
    Pointed out by Adrian Bunk.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit f831335d42a9aed26449a264266763fb542dbbe3
Author: Bartlomiej Swiercz <swierczu@dmcs.p.lodz.pl>
Date:   Mon May 29 07:16:00 2006 -0400

    ACPI: additional blacklist entry for ThinkPad R40e
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b488f02156d3deb08f5ad7816d565c370a8cc6f1
Author: Andreas Mohr <[andi@rhlx01.fht-esslingen.de]>
Date:   Mon Jun 26 15:58:00 2006 -0400

    ACPI: restore comment justifying 'extra' P_LVLx access
    
    While trying to look for superfluous I/O accesses that can be optimized
    away, I stumbled upon this ACPI sleep I/O access and couldn't figure out
    why the hell this dummy op was necessary.
    After more than one hour of internet research, I had collected a sufficient
    number of documents (among those very old kernel versions) that finally
    told me what this dummy read was about: STPCLK# doesn't get asserted in time
    on (some) chipsets, which is why we need to have a dummy I/O read to delay
    further instruction processing until the CPU is fully stopped.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c4a001b1ea32e09f7556178249b8885418858b5c
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Sat Jun 24 19:37:00 2006 -0400

    ACPI: C-States: only demote on current bus mastering activity
    
    Only if bus master activity is going on at the present, we should avoid
    entering C3-type sleep, as it might be a faulty transition.  As long as the
    bm_activity bitmask was based on the number of calls to the ACPI idle
    function, looking at previous moments made sense.  Now, with it being based on
    what happened this jiffy, looking at this jiffy should be sufficient.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c5ab81ca01ad4a8870b456f93dd2fb3d815f91d9
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Sat Jun 24 19:37:00 2006 -0400

    ACPI: C-States: bm_activity improvements
    
    Do not assume there was bus mastering activity if the idle handler didn't get
    called, as there's only reason to not enter C3-type sleep if there is bus
    master activity going on.  Only for the "promotion" into C3-type sleep bus
    mastering activity is taken into account, and there only current bus mastering
    activity, and not pure guessing should lead to the decision on whether to
    enter C3-type sleep or not.
    
    Also, as bm_activity is a jiffy-based bitmask (bit 0: bus mastering activity
    during this juffy, bit 31: bus mastering activity 31 jiffies ago), fix the
    setting of bit 0, as it might be called multiple times within one jiffy.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a3c6598f92cf27d3d201a2a5b052563148156837
Author: Dominik Brodowski <linux@dominikbrodowski.net>
Date:   Sat Jun 24 19:37:00 2006 -0400

    ACPI: C-States: accounting of sleep states
    
    Track the actual time spent in C-States (C2 upwards, we can't determine this
    for C1), not only the number of invocations.  This is especially useful for
    dynamic ticks / "tickless systems", but is also of interest on normal systems,
    as any interrupt activity leads to C-States being exited, not only the timer
    interrupt.
    
    The time is being measured in PM timer ticks, so an increase by one equals 279
    nanoseconds.
    
    Signed-off-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 967440e3be1af06ad4dc7bb18d2e3c16130fe067
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Jun 23 17:04:00 2006 -0400

    ACPI: ACPICA 20060623
    
    Implemented a new acpi_spinlock type for the OSL lock
    interfaces.  This allows the type to be customized to
    the host OS for improved efficiency (since a spinlock is
    usually a very small object.)
    
    Implemented support for "ignored" bits in the ACPI
    registers.  According to the ACPI specification, these
    bits should be preserved when writing the registers via
    a read/modify/write cycle. There are 3 bits preserved
    in this manner: PM1_CONTROL[0] (SCI_EN), PM1_CONTROL[9],
    and PM1_STATUS[11].
    http://bugzilla.kernel.org/show_bug.cgi?id=3691
    
    Implemented the initial deployment of new OSL mutex
    interfaces.  Since some host operating systems have
    separate mutex and semaphore objects, this feature was
    requested. The base code now uses mutexes (and the new
    mutex interfaces) wherever a binary semaphore was used
    previously. However, for the current release, the mutex
    interfaces are defined as macros to map them to the
    existing semaphore interfaces.
    
    Fixed several problems with the support for the control
    method SyncLevel parameter. The SyncLevel now works
    according to the ACPI specification and in concert with the
    Mutex SyncLevel parameter, since the current SyncLevel is
    a property of the executing thread. Mutual exclusion for
    control methods is now implemented with a mutex instead
    of a semaphore.
    
    Fixed three instances of the use of the C shift operator
    in the bitfield support code (exfldio.c) to avoid the use
    of a shift value larger than the target data width. The
    behavior of C compilers is undefined in this case and can
    cause unpredictable results, and therefore the case must
    be detected and avoided.  (Fiodor Suietov)
    
    Added an info message whenever an SSDT or OEM table
    is loaded dynamically via the Load() or LoadTable()
    ASL operators. This should improve debugging capability
    since it will show exactly what tables have been loaded
    (beyond the tables present in the RSDT/XSDT.)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 95b38b3f453c16de0f8cddcde3e71050bbfb37b9
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jun 28 03:09:54 2006 -0400

    ACPIPHP: prevent duplicate slot numbers when no _SUN
    
    Dock bridges generally do not implement _SUN, yet show up as ejectable
    slots.  If you have more than one ejectable slot that does not implement
    SUN, with the current code you will get duplicate slot numbers.  So, if
    there is no _SUN, use the current count of the number of slots found
    instead.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2b85e1307fe3a84eca2e1a21c6c857359908dab4
Author: Len Brown <len.brown@intel.com>
Date:   Tue Jun 27 01:50:14 2006 -0400

    ACPI: static-ize handle_hotplug_event_func()
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4e8662bbd680c54496189ac68f398e847f3ca374
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jun 28 03:08:06 2006 -0400

    ACPIPHP: use ACPI dock driver
    
    Modify the acpiphp driver to use the ACPI dock driver for dock
    notifications.  Only load the acpiphp driver if we find we have pci dock
    devices.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a5e1b94008f2a96abf4a0c0371a55a56b320c13e
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Wed Jun 28 03:07:16 2006 -0400

    ACPI: dock driver
    
    Create a driver which lives in the acpi subsystem to handle dock events.
    This driver is not an "ACPI" driver, because acpi drivers require that the
    object be present when the driver is loaded.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 489244498ec99c949ecbd7105299066cff283dcd
Merge: 649e857... 9ad494f...
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 28 16:10:53 2006 +1000

    Merge branch 'for_paulus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc

commit 9ad494f62444ee37209e85173377c67612e66ef1
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Wed Jun 28 00:37:45 2006 -0500

    powerpc: minor cleanups for mpc86xx
    
    * Remove duplicated cputable entry for 8641 (matches w/7448)
    * Removed __init from function prototypes in mpc86xx.h
    * Moved pci fixups into board specific code
    * Moved mpc86xx_exclude_device to generic mpc86xx pci code
    * Fixed sparse warnings in mpc86xx_smp.c
    * Removed board specific header include from asm-powerpc/mpc86xx.h
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 649e85797259162f7fdc696420e7492f20226f2d
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 28 13:57:16 2006 +1000

    [POWERPC] Make sure we select CONFIG_NEW_LEDS if ADB_PMU_LED is set
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3965f8c59778b0d37460ec268f92c0c382546b5c
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 28 13:50:39 2006 +1000

    [POWERPC] Simplify the code defining the 64-bit CPU features
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f127a2b5cf542968ea1c428f86ffc780ea929452
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 01:49:07 2006 -0700

    [POWERPC] powerpc: kconfig warning fix
    
    arch/powerpc/Kconfig:420:warning: leading whitespace ignored
    
    Stop doing that.
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 127efeb286bb772019236182a1b4fc14ff2ae00c
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Jun 28 11:55:49 2006 +1000

    [POWERPC] Consolidate some of kernel/misc*.S
    
    There were some common functions (mainly i/o).
    
    Also some small white space cleanups and remove a couple of small unused
    functions.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a240da35a1087804cbdc3faba949445e64d1eecb
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Jun 28 11:53:56 2006 +1000

    [POWERPC] Remove unused function call_with_mmu_off
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9b47569a9d410199aea6386917fd0662809c60be
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Jun 28 11:51:41 2006 +1000

    [POWERPC] update asm-powerpc/time.h
    
    If we ever build a combined kernel including iSeries, then this will
    be needed.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 612f02d6d6eadd9c5dde5a5b97b55a3a620d28e5
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Wed Jun 28 11:49:10 2006 +1000

    [POWERPC] Clean up it_lp_queue.h
    
    No more StudlyCaps.
    Remove from a couple of places it is no longer needed.
    Use C style comments.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d0b79c54fc14f1f2db64180a21b84146028c598b
Author: Jimi Xenidis <jimix@watson.ibm.com>
Date:   Mon Jun 26 04:56:58 2006 -0400

    [POWERPC] Skip the "copy down" of the kernel if it is already at zero.
    
    This patch allows the kernel to recognized that it was loaded at zero
    and the copy down of the image is unnecessary.  This is useful for
    Simulators and kexec models.
    On a typical 3.8 MiB vmlinux.strip this saves about 2.3 million instructions.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c0ce7d0886cf0c2579c604eac41a7e125bc0e96d
Author: David Wilder <dwilder@us.ibm.com>
Date:   Fri Jun 23 15:29:34 2006 -0700

    [POWERPC] Add the use of the firmware soft-reset-nmi to kdump.
    
    With this patch, kdump uses the firmware soft-reset NMI for two purposes:
    1) Initiate the kdump (take a crash dump) by issuing a soft-reset.
    2) Break a CPU out of a deadlock condition that is detected during kdump
    processing.
    
    When a soft-reset is initiated each CPU will enter
    system_reset_exception() and set its corresponding bit in the global
    bit-array cpus_in_sr then call die(). When die() finds the CPU's bit set
    in cpu_in_sr crash_kexec() is called to initiate a crash dump. The first
    CPU to enter crash_kexec() is called the "crashing CPU". All other CPUs
    are "secondary CPUs". The secondary CPU's pass through to
    crash_kexec_secondary() and sleep. The crashing CPU waits for all CPUs
    to enter via soft-reset then boots the kdump kernel (see
    crash_soft_reset_check())
    
    When the system crashes due to a panic or exception, crash_kexec() is
    called by panic() or die(). The crashing CPU sends an IPI to all other
    CPUs to notify them of the pending shutdown. If a CPU is in a deadlock
    or hung state with interrupts disabled, the IPI will not be delivered.
    The result being, that the kdump kernel is not booted. This problem is
    solved with the use of a firmware generated soft-reset. After the
    crashing_cpu has issued the IPI, it waits for 10 sec for all CPUs to
    enter crash_ipi_callback(). A CPU signifies its entry to
    crash_ipi_callback() by setting its corresponding bit in the
    cpus_in_crash bit array. After 10 sec, if one or more CPUs have not set
    their bit in cpus_in_crash we assume that the CPU(s) is deadlocked. The
    operator is then prompted to generate a soft-reset to break the
    deadlock. Each CPU enters the soft reset handler as described above.
    
    Two conditions must be handled at this point:
    1) The system crashed because the operator generated a soft-reset. See
    2) The system had crashed before the soft-reset was generated ( in the
    case of a Panic or oops).
    
    The first CPU to enter crash_kexec() uses the state of the kexec_lock to
    determine this state. If kexec_lock is already held then condition 2 is
    true and crash_kexec_secondary() is called, else; this CPU is flagged as
    the crashing CPU, the kexec_lock is acquired and crash_kexec() proceeds
    as described above.
    
    Each additional CPUs responding to the soft-reset will pass through
    crash_kexec() to kexec_secondary(). All secondary CPUs call
    crash_ipi_callback() readying them self's for the shutdown. When ready
    they clear their bit in cpus_in_sr. The crashing CPU waits in
    kexec_secondary() until all other CPUs have cleared their bits in
    cpus_in_sr. The kexec kernel boot is then started.
    
    Signed-off-by: Haren Myneni <haren@us.ibm.com>
    Signed-off-by: David Wilder <dwilder@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2cd90bc8fba8720ef7f3fdfd1e0c1a5397a18271
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Fri Jun 23 20:57:50 2006 +0200

    [POWERPC] spufs: fix class0 interrupt assignment
    
    The class zero interrupt handling for spus was confusing alignment and
    error interrupts, so swap them.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0a3a6d69b7e9f1d7fa5add7db528e7b81cbd422e
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Tue Jun 27 23:42:33 2006 -0400

    Input: db9 - fix potential buffer overrun
    
    Fixes Coverity #id 483
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f8b4c46c0c3667a56148a59bca54d945d246a3f3
Author: Dmitry Torokhov <dtor@insightbb.com>
Date:   Tue Jun 27 23:42:17 2006 -0400

    Input: atkbd - fix hardware autorepeat
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a39727f212426b9d5f9267b3318a2afaf9922d3b
Merge: 936813a... 1f1bd5f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 19:15:50 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6:
      [netdrvr] Remove long-unused bits from Becker template drivers
      [netdrvr] natsemi: minor cleanups
      [netdrvr] natsemi: Separate out media initialization code
      [PATCH] WAN: update info page for a bunch of my drivers
      [PATCH] drivers/net/hamradio/dmascc.c: fix section mismatch
      [PATCH] Fix phy id for LXT971A/LXT972A
      [PATCH] DM9000 - minor code cleanups
      [PATCH] DM9000 - do no re-init spin lock
      [PATCH] DM9000 - check for MAC left in by bootloader
      [PATCH] DM9000 - better checks for platform resources

commit 936813a8807c5684c6a97f1081b31027403d4a93
Merge: 73a0e40... 6a93096...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 19:13:56 2006 -0700

    Merge git://git.infradead.org/mtd-2.6
    
    * git://git.infradead.org/mtd-2.6:
      [MTD] NAND: Select chip before checking write protect status
      [MTD] CORE mtdchar.c: fix off-by-one error in lseek()
      [MTD] NAND: Fix typo in mtd/nand/ts7250.c
      [JFFS2][XATTR] coexistence between xattr and write buffering support.
      [JFFS2][XATTR] Fix wrong copyright
      [JFFS2][XATTR] Re-define xd->refcnt as atomic_t
      [JFFS2][XATTR] Fix memory leak with jffs2_xattr_ref
      [JFFS2][XATTR] rid unnecessary writing of delete marker.
      [JFFS2][XATTR] Fix ACL bug when updating null xattr by null ACL.
      [JFFS2][XATTR] using 'delete marker' for xdatum/xref deletion
      [MTD] Fix off-by-one error in physmap.c
      [MTD] Remove unused 'nr_banks' variable from ixp2000 map driver
      [MTD NAND] s3c2412 support in s3c2410.c
      [MTD] Initialize 'writesize'
      [MTD] NAND: ndfc fix address offset thinko
      [MTD] NAND: S3C2410 convert prinks to dev_*()s
      [MTD] NAND: Missing fixups

commit 73a0e405dce7d720808536b708f7c738b413b1a2
Merge: 03529d9... 5493a0f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 19:09:16 2006 -0700

    Merge git://oss.sgi.com:8090/nathans/xfs-2.6
    
    * git://oss.sgi.com:8090/nathans/xfs-2.6:
      [XFS] Fixup whitespace damage in log_write, remove final warning.
      [XFS] Rework code snippets slightly to remove remaining recent-gcc
      [XFS] Fix realtime subvolume expansion, a porting bug b0rked it.  Coverity
      [XFS] Remove a race condition where a linked inode could BUG_ON in
      [XFS] Remove redundant directory checks from inode link operation.
      [XFS] Remove a couple of no-longer-used macros.
      [XFS] Reduce size of xfs_trans_t structure. * remove ->t_forw, ->t_back --
      [XFS] remove unused behaviour lock - shrink XFS vnode as a side effect.
      [XFS] * There is trivial "inode => vnode => inode" conversion, but only
      [XFS] link(2) on directory is banned in VFS.

commit 03529d9f66b7995c67ddceb8f83258df3c9915da
Merge: 11bcab9... 2154cfa...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 19:07:21 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev:
      [PATCH] ata_piix: add ICH6/7/8 to Kconfig
      [PATCH] sata_sil: disable hotplug interrupts on two ATI IXPs
      [PATCH] libata: cosmetic updates
      [PATCH] ata: add some NVIDIA chipset IDs
      [PATCH] libata reduce timeouts
      [PATCH] libata: implement ata_port_max_devices()
      [PATCH] libata: make two functions global
      [PATCH] libata: update ata_do_simple_cmd()
      [PATCH] libata: move ata_do_simple_cmd() below ata_exec_internal()
      [PATCH] libata: clear EH action on device detach
      [PATCH] libata: implement and use ata_deh_dev_action()
      [PATCH] libata: move ata_eh_clear_action() upward
      [PATCH] libata.h needs scatterlist.h
      [libata] sata_vsc: partially revert a PCI ID-related commit
      [libata] Bump versions

commit 4da30d15b6d5036b0d96422d6946ca758111fae3
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri Jun 23 20:57:49 2006 +0200

    [POWERPC] spufs: fix memory hotplug dependency
    
    spufs_base.c calls __add_pages, which depends on CONFIG_MEMORY_HOTPLUG.
    
    Moved the selection of CONFIG_MEMORY_HOTPLUG from CONFIG_SPUFS_MMAP
    to CONFIG_SPU_FS.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 910ab66b1c94a2758725874d389136cf9acdc04c
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Jun 23 20:57:48 2006 +0200

    [POWERPC] spufs: fix MFC command queue purge
    
    In the context save/restore code, the SPU MFC command queue purge
    code has a bug:
    
    static inline void wait_purge_complete(struct spu_state *csa, struct
    				       spu *spu)
    {
        struct spu_priv2 __iomem *priv2 = spu->priv2;
    
        /* Save, Step 28:
         *     Poll MFC_CNTL[Ps] until value '11' is
         *     read
         *      (purge complete).
         */
        POLL_WHILE_FALSE(in_be64(&priv2->mfc_control_RW)
    		     & MFC_CNTL_PURGE_DMA_COMPLETE);
    }
    
    This will exit as soon as _one_ of the 2 bits that compose
    MFC_CNTL_PURGE_DMA_COMPLETE is set, and one of them happens to be
    "purge in progress"...  which means that we'll happily continue
    restoring the MFC while it's being purged at the same time.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 23cc770107c2d27dd1f5dee53177ea1163ee9295
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Fri Jun 23 20:57:47 2006 +0200

    [POWERPC] spufs: map mmio space as guarded into user space
    
    This fixes a bug where we don't properly map SPE MMIO space as guarded,
    causing various test cases to fail, probably due to write combining and other
    niceties caused by the lack of the G bit.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6b7290be0c045f3978c6b12f0a8aedd21ca6fa9c
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:24 2006 +1000

    [POWERPC] Enable XMON in cell_defconfig
    
    Now that we have the udbg callbacks we can enable XMON by default.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 94b60ec166bc410d544d7635c9575ea5e53ec052
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:22 2006 +1000

    [POWERPC] Enable the RTAS udbg console on IBM Cell Blade
    
    Enable the RTAS udbg console on IBM Cell Blade, this allows xmon
    to work.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cc46bb98c0d52695f26c239de701050660f5c79f
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:16 2006 +1000

    [POWERPC] Add udbg support for RTAS console
    
    Add udbg hooks for the RTAS console, based on the RTAS put-term-char
    and get-term-char calls. Along with my previous patches, this should
    enable debugging as soon as early_init_dt_scan_rtas() is called.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 458148c00b97864a27ecf528a1d45a8e5ebd9bbc
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:13 2006 +1000

    [POWERPC] Setup RTAS values earlier, to enable rtas_call() earlier
    
    Althought RTAS is instantiated when we enter the kernel, we can't actually
    call into it until we know its entry point address. Currently we grab that
    in rtas_initialize(), however that's quite late in the boot sequence.
    
    To enable rtas_call() earlier, we can grab the RTAS entry etc. values while
    we're scanning the flattened device tree. There's existing code to retrieve
    the values from /chosen, however we don't store them there anymore, so remove
    that code.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ab3ab74d9b6b3920be70f502b40cb3f7f08d23fa
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:11 2006 +1000

    [POWERPC] Move RTAS exports next to their declarations
    
    Move RTAS exports next to their declarations.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 24da3dd53430ec07ce9110b1eaaad080c3c7ecf6
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:10 2006 +1000

    [POWERPC] Make rtas_call() safe if RTAS hasn't been initialised
    
    Currently it's unsafe to call rtas_call() prior to rtas_initialize(). This
    is because the rtas.entry value hasn't been setup and so we don't know
    where to enter, but we just try anyway.
    
    We can't do anything intelligent without rtas.entry, so if it's not set, just
    return. Code that calls rtas_call() early needs to be aware that the call
    might fail.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4ba99b97dadd35b9ce1438b2bc7c992a4a14a8b1
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:20:09 2006 +1000

    [POWERPC] Setup the boot cpu's paca pointer in C rather than asm
    
    There's no need to set the boot cpu paca in asm, so do it in C so us
    mere mortals can understand it.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit aa98c50dcb5d5b85d2a4c26d54fa1e3c31c11e4b
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:17:32 2006 +1000

    [POWERPC] Make kexec_setup() a regular initcall
    
    There's no reason kexec_setup() needs to be called explicitly from
    setup_system(), it can just be a regular initcall.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c30a4df3f134f511e8cdf828da429e333753daab
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:16:39 2006 +1000

    [POWERPC] Use ppc_md.hpte_insert() in htab_bolt_mapping()
    
    With the ppc_md htab pointers setup earlier, we can use ppc_md.hpte_insert
    in htab_bolt_mapping(), rather than deciding which version to call by hand.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7d0daae4ae1a3e80d78b83cddf414a3b98a962f4
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:16:38 2006 +1000

    [POWERPC] powerpc: Initialise ppc_md htab pointers earlier
    
    Initialise the ppc_md htab callbacks earlier, in the probe routines. This
    allows us to call htab_finish_init() from htab_initialize(), and makes it
    private to hash_utils_64.c. Move htab_finish_init() and make_bl() above
    htab_initialize() to avoid forward declarations.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7a4571ae553e2972b7958306fd796a2fd24fd7d1
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:16:03 2006 +1000

    [POWERPC] Export flat device tree via debugfs for debugging
    
    If DEBUG is turned on in prom.c, export the flat device tree via debugfs.
    This has been handy on several occasions.
    
    To look at it:
     # mount -t debugfs none /sys/kernel/debug
     # od -a /sys/kernel/debug/powerpc/flat-device-tree
     and/or
     # dtc -fI dtb /sys/kernel/debug/powerpc/flat-device-tree -O dts
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1dce0e30471ac863fd141d137c98e3644817975e
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Fri Jun 23 18:15:37 2006 +1000

    [POWERPC] Remove remaining iSeries debugger cruft
    
    None of this seems to be necessary, so let's see if can remove it and not
    break anything. Booted on iSeries & pSeries here.
    
    NB. we don't remove the hvReleaseData, we just move it down so that the file
    reads more clearly.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5f50867b4f1938ab80d249206efbec37bba48c39
Author: Haren Myneni <haren@us.ibm.com>
Date:   Thu Jun 22 23:35:10 2006 -0700

    [POWERPC] kdump: Reserve the existing TCE mappings left by the first kernel
    
    During kdump boot, noticed some machines checkstop on dma protection
    fault for ongoing DMA left in the first kernel. Instead of initializing
    TCE entries in iommu_init() for the kdump boot, this patch fixes this
    issue by walking through the each TCE table and checks whether the
    entries are in use by the first kernel. If so, reserve those entries by
    setting the corresponding bit in tbl->it_map such that these entries
    will not be available for the kdump boot.
    
    However it could be possible that all TCE entries might be used up due
    to the driver bug that does continuous mapping. My observation is around
    1700 TCE  entries are used on some systems (Ex: P4) at some point of
    time during kdump boot and saving dump (either write into the disk or
    sending to remote machine). Hence, this patch will make sure that
    minimum of 2048 entries will be available such that kdump boot could be
    successful in some cases.
    
    Signed-off-by: Haren Myneni <haren@us.ibm.com>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f93d6d071fdbf27141c5331d6cd988664650bc1f
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Jun 22 13:02:58 2006 -0500

    [POWERPC] Remove obsolete #include <linux/config.h>.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 790d427616ae68559b711bf4348003c17249abf4
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Jun 22 13:01:48 2006 -0500

    [POWERPC] Remove redundant STD_MMU selection.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f17607fb17aabd3a963da39799bde17d81211ab0
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Jun 22 13:00:46 2006 -0500

    [POWERPC] Move I8259 selection under MPC8641HPCN board
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c53b33420a2e0ed1eb86be1c00b2dc21bb92bd6e
Author: Jon Loeliger <jdl@freescale.com>
Date:   Thu Jun 22 12:59:25 2006 -0500

    [POWERPC] Remove redundant PPC_86XX check.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6d7c466292fc7c90bb160c1c7df74035c7c12595
Author: Jimi Xenidis <jimix@watson.ibm.com>
Date:   Wed Jun 21 19:15:55 2006 -0400

    [POWERPC] Don't access HID registers if running on a Hypervisor.
    
    The following patch avoids accessing Hypervisor privilege HID
    registers when running on a Hypervisor (MSR[HV]=0).
    
    Signed-off-by: Jimi Xenidis <jimix@watson.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 70c3967d4f8029f3d53323a9f0490df61d8cb77d
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jun 21 12:11:16 2006 +0200

    [POWERPC] Convert powermac ide blink to new led infrastructure
    
    This patch removes the old pmac ide led blink code and
    adds generic LED subsystem support for the LED.
    
    It maintains backward compatibility with the old
    BLK_DEV_IDE_PMAC_BLINK Kconfig option which now
    simply selects the new code and influences the
    default trigger.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 11bcab9071ac204b1ca2bb0514ad1641bc4c280b
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 18:47:18 2006 -0700

    Properly delete sound/ppc/toonie.c
    
    The previous "delete" had actually just truncated it to a zero
    size, something that can easily happen if you just apply a patch.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6fcb3b9cf776e3f748709cd3091a72cb3855c29
Author: Daniel Ritz <daniel.ritz-ml@swissonline.ch>
Date:   Tue Jun 27 18:40:54 2006 +0200

    [PATCH] i2c-i801.c: don't pci_disable_device() after it was just enabled
    
    Commit 02dd7ae2892e5ceff111d032769c78d3377df970 ("[PATCH] i2c-i801:
    Merge setup function") has a missing return 0 in the _probe() function.
    This means the error path is always executed and pci_disable_device() is
    called even when the device just got successfully enabled.
    
    Having the SMBus device disabled makes some systems (eg.
    Fujitsu-Siemens Lifebook E8010) hang hard during power-off.
    
    Intead of reverting the whole commit this patch fixes it up:
    - don't ever call pci_disable_device(), also not in the _remove() function
      to avoid hangs
    - fix missing pci_release_region() in error path
    
    Signed-off-by: Daniel Ritz <daniel.ritz@gmx.ch>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f17a2686b11453680e9662ef8bdc8d948d0dce18
Merge: 01f7e67... f40c562...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 18:31:57 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sfrench/cifs-2.6: (25 commits)
      [CIFS] Fix authentication choice so we do not force NTLMv2 unless the
      [CIFS] Fix alignment of unicode strings in previous patch
      [CIFS] Fix allocation of buffers for new session setup routine to allow
      [CIFS] Remove calls to to take f_owner.lock
      [CIFS] remove some redundant null pointer checks
      [CIFS] Fix compile warning when CONFIG_CIFS_EXPERIMENTAL is off
      [CIFS] Enable sec flags on mount for cifs (part one)
      [CIFS] Fix suspend/resume problem which causes EIO on subsequent access to
      [CIFS] fix minor compile warning when config_cifs_weak_security is off
      [CIFS] NTLMv2 support part 5
      [CIFS] Add support for readdir to legacy servers
      [CIFS] NTLMv2 support part 4
      [CIFS] NTLMv2 support part 3
      [CIFS] NTLMv2 support part 2
      [CIFS] Fix mask so can set new cifs security flags properly
      CIFS] Support for older servers which require plaintext passwords - part 2
      [CIFS] Support for older servers which require plaintext passwords
      [CIFS] Fix mapping of old SMB return code Invalid Net Name so it is
      [CIFS] Missing brace
      [CIFS] Do not overwrite aops
      ...

commit 01f7e67367f75257ea5e8e5a21eddba9fa660f17
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jun 27 13:27:02 2006 +1000

    [PATCH] m68knommu: use Kconfig RAM config options in 68328 startup code
    
    Switch to using the new RAM Kconfig settings, instead of linker defined
    regions in ROM specific 68328 startup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5c7726ffc994f1826415852e7196bcb6c664d44
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jun 27 13:27:13 2006 +1000

    [PATCH] m68knommu: use Kconfig RAM config options in 68360 ROM startup code
    
    Switch to using the new RAM Kconfig settings, instead of linker defined
    regions in ROM specific 68360 startup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d046f6118bb2a207870e35db1411b958199a3750
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jun 27 13:27:08 2006 +1000

    [PATCH] m68knommu: use Kconfig RAM config options in 68360 RAM startup code
    
    Switch to using the new RAM Kconfig settings, instead of linker defined
    regions in RAM specific 68360 startup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 999567d829b191b2cb7fd8dee31d5bccc81d7c55
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jun 27 13:22:07 2006 +1000

    [PATCH] m68knommu: remove NO_FORMAT_VECi from ptrace.h header
    
    Remove NO_FORMAT_VEC conditional check. It is not used or defined anywhere.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e702ab38b0eed1ea5968f3b60b352e814172c27
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jun 27 13:19:33 2006 +1000

    [PATCH] m68knommu: FEC driver event/irq fixes
    
    Collection of fixes for the ColdFire FEC ethernet driver:
    
    . reworked event setting so that it occurs after the MII setup.
      roucaries bastien <roucaries.bastien@gmail.com>
    . Do not read cbd_sc in memory for each bit we test. Once per buffer is enough.
    . Overrun errors must increase `rx_fifo_errors', not `rx_crc_errors'
    . No need for a special value to activate rx or tx.  Only write access matters.
    . Simplify parameter of eth_copy_and_sum : `data' has already the right value.
    . Some spelling fixes.
    
    Signed-off-by: Philippe De Muyter <phdm@macqel.be>
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83901fc1c786c642c576f51302d79df849ad7d71
Author: Willson Callan <wcallan@racepointmedia.com>
Date:   Tue Jun 27 13:13:44 2006 +1000

    [PATCH] m68knommu: FEC driver set different priority/level on each IRQ
    
    Set different irq priority levels for each IRQ requested.
    According to the Freescale ColdFire documentation each separate IRQ
    must have its own unique priority/level combination.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b2652936b9e61df47664a8dde46872a74d7dba2
Author: Matt Waddel <Matt.Waddel@freescale.com>
Date:   Tue Jun 27 13:10:56 2006 +1000

    [PATCH] m68knommu: FEC driver support for the ColdFire 523x CPU family
    
    Add support for the FEC module in the ColdFire 532x CPU family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 677177c5319f7079c22d04926c23b31166d7d405
Author: Philippe De Muyter <phdm@macqel.be>
Date:   Tue Jun 27 13:05:33 2006 +1000

    [PATCH] m68knommu: avoid fec driver hang when link disappears
    
    Avoid requesting a `Graceful Transmit Stop' when link has disappeared,
    because that request cannot complete without link.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67bdd9842430f946213d0482862aae1ed8fd3ad0
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Tue Jun 27 12:59:35 2006 +1000

    [PATCH] m68knommu: update m68knommu defconfnig
    
    Updated defconfig for m68knommu arch. Includes recent changes to the clock
    and RAM configuration options.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a6404b4d96aa82d05d8ed57e9eabea2b7920c7a
Author: Matt Waddel <Matt.Waddel@freescale.com>
Date:   Tue Jun 27 12:50:53 2006 +1000

    [PATCH] m68knommu: build support for the Freescale 532x CPU family
    
    Add build support for the M523x ColdFire CPU family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 121036e5c57dbf03882cce9eb810d6042683c925
Author: Daniel Alomar <dalomar@serrasold.com>
Date:   Tue Jun 27 12:49:11 2006 +1000

    [PATCH] m68knommu: build support for the Avnet/5282 board
    
    Add support for the Avnet/5282 board.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f787bff45e1880044e6ab3900b6a40214ae905f
Author: Philipe De Muyter <phdm@macqel.be>
Date:   Tue Jun 27 12:47:00 2006 +1000

    [PATCH] m68knommu: remove useless compiler args
    
    Here is a small patch that made my kernel .text segment shrink by 8k IIRC
    on my 5272-based board, by removing `-Wa,-S' from CFLAGS.
    
    The `-Wa,-S' option prevents `gas' from using short forms of jsr.
    Without it, `gas' replaces `jsr xxx.l' (6 bytes) by `jsr xxx@pc'
    (4 bytes) when possible.  On 5272, both forms are equally fast.
    
    The `-Wa,-m5307' option is useless, because gcc already gives it
    to `gas' from the `-m5307' option.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c101cf024c3f126e174bf0d8946c587127e3c30
Author: James Bottomley <James.Bottomley@HansenPartnership.com>
Date:   Mon Jun 26 21:33:09 2006 -0500

    [PATCH] voyager: add cpu_present_map
    
    Voyager stopped booting some time in the 2.6.16-2.6.17 timeframe;
    the reason was that it doesn't have a cpu_present_map, so add
    one.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12e56b601f66a415f88e7d60f6b6707a19c430c9
Merge: ca6f879... c78059f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 27 18:22:13 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb: (26 commits)
      V4L/DVB (4263): Fix warning when compiling on 64 bit machines
      V4L/DVB (4261): Included required header for in-kernel compilation
      V4L/DVB (4260): Stradis.c: make 2 functions static
      V4L/DVB (4259): Pass an explicit log prefix to cx2341x_log_status
      V4L/DVB (4257): Fix 64-bit compile warnings.
      V4L/DVB (4255): Tda9887 default TOP value is 0x10
      V4L/DVB (4254): Remove obsoleted tuner_debug option.
      V4L/DVB (4253): IVTV VBI format description too long.
      V4L/DVB (4252): Remove duplicate 'tda9887' in info messages.
      V4L/DVB (4245): Reduce the amount of pvrusb2-sourced noise going into the system log
      V4L/DVB (4244): Implement use of cx2341x module in pvrusb2 driver
      V4L/DVB (4243): Exploit new V4L control features in pvrusb2
      V4L/DVB (4242): Don't suspend encoder when changing its attributes (in pvrusb2)
      V4L/DVB (4241): Fix faulty encoder error recovery in pvrusb2
      V4L/DVB (4240): Various V4L control enhancements in pvrusb2
      V4L/DVB (4239): Handle boolean controls in pvrusb2
      V4L/DVB (4238): Make sure flags field is initialized when quering a control in pvrusb2
      V4L/DVB (4237): Move LOG_STATUS bracketing to a different part of the pvrusb2 driver
      V4L/DVB (4236): Rearrange things in pvrusb2 driver in preparation for using cx2341x module
      V4L/DVB (4235): Increase the maximum number of controls that pvrusb2-sysfs.c can handle.
      ...

commit 5493a0fcba8a94baa5c1d80aca21d6ae4b3b573e
Author: Nathan Scott <nathans@sgi.com>
Date:   Wed Jun 28 11:17:28 2006 +1000

    [XFS] Fixup whitespace damage in log_write, remove final warning.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26366a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ca6f8792bd5281ebaf04bf23a43ed486e5e453a9
Author: Karsten Keil <kkeil@suse.de>
Date:   Tue Jun 27 13:01:27 2006 +0200

    [PATCH] i4l fix DLE masking in isdn_tty_try_read
    
    DLE masking was non-functional since the new tty handling.
    
    Found by Peter Evertz <leo2@pec.homeip.net>
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 91bf46026966926f3b63539db423144b8c66eab4
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 27 02:55:09 2006 -0700

    [PATCH] do_IRQ() warning fix
    
    arch/i386/kernel/irq.c: In function 'do_IRQ':
    arch/i386/kernel/irq.c:104: warning: suggest parentheses around arithmetic in operand of |
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 775d584c63818595dd6ba635438753cf3c18e4b1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jun 27 02:55:08 2006 -0700

    [PATCH] drivers/message/i2o/iop.c: unexport i2o_msg_nop()
    
    It's available in a header as a static inline - there's no need to export it.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Markus Lidel <Markus.Lidel@shadowconnect.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 456229a91d2bdf884f0c01b33f1ecee762abba7d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jun 27 02:55:07 2006 -0700

    [PATCH] drivers/char/ipmi/ipmi_msghandler.c: make proc_ipmi_root static
    
    Make struct proc_ipmi_root static.
    
    Besides this, tremove removes an unused #ifdef CONFIG_PROC_FS from
    include/linux/ipmi.h.
    
    Acked-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f7607803717e9d045965b210cd16a25d80cd04b
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Jun 27 02:55:06 2006 -0700

    [PATCH] Remove redundant NULL checks before [kv]free - in drivers/
    
    Remove redundant NULL chck before kfree + tiny CodingStyle cleanup for
    drivers/
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a66a53f558efc2619a438278d2919b3c9a7f673
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Jun 27 02:55:05 2006 -0700

    [PATCH] Remove redundant NULL checks before [kv]free - in kernel/
    
    Remove redundant kfree NULL checks from kernel/
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ad98457aa545bc4d03d417da86325507aa586ec
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Jun 27 02:55:04 2006 -0700

    [PATCH] Remove redundant NULL checks before [kv]free - in fs/
    
    Remove redundant NULL checks before kfree for fs/
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Acked-by: Mark Fasheh <mark.fasheh@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59e0e0ace7d33e8c0c125042f153f80fcc56b39e
Author: Sebastien Dugue <sebastien.dugue@bull.net>
Date:   Tue Jun 27 02:55:03 2006 -0700

    [PATCH] futex_requeue() optimization
    
    In futex_requeue(), when the 2 futexes keys hash to the same bucket, there
    is no need to move the futex_q to the end of the bucket list.
    
    Signed-off-by: Sebastien Dugue <sebastien.dugue@bull.net>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95e02ca9bb5324360e7dea1ea1c563036d84a5e6
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 27 02:55:02 2006 -0700

    [PATCH] rtmutex: Propagate priority settings into PI lock chains
    
    When the priority of a task, which is blocked on a lock, changes we must
    propagate this change into the PI lock chain.  Therefor the chain walk code
    is changed to get rid of the references to current to avoid false positives
    in the deadlock detector, as setscheduler might be called by a task which
    holds the lock on which the task whose priority is changed is blocked.
    
    Also add some comments about the get/put_task_struct usage to avoid
    confusion.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bafd214e4ba55dc1fb81a3031d0249292f1bc05
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 27 02:55:01 2006 -0700

    [PATCH] rtmutex: Modify rtmutex-tester to test the setscheduler propagation
    
    Make test suite setscheduler calls asynchronously.  Remove the waits in the
    test cases and add a new testcase to verify the correctness of the
    setscheduler priority propagation.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e74c69f46d93d29eea0ad8647863d1c6488f0f55
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 27 02:55:00 2006 -0700

    [PATCH] Drop tasklist lock in do_sched_setscheduler
    
    There is no need to hold tasklist_lock across the setscheduler call, when
    we pin the task structure with get_task_struct().  Interrupts are disabled
    in setscheduler anyway and the permission checks do not need interrupts
    disabled.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Steven Rostedt <rostedt@goodmis.org>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a1583d3e83cae1c58870602efc6328c34b644c01
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Tue Jun 27 02:55:00 2006 -0700

    [PATCH] fix rt-mutex defaults and dependencies
    
    Fix defaults and dependencies.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c87e2837be82df479a6bae9f155c43516d2feebc
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:58 2006 -0700

    [PATCH] pi-futex: futex_lock_pi/futex_unlock_pi support
    
    This adds the actual pi-futex implementation, based on rt-mutexes.
    
    [dino@in.ibm.com: fix an oops-causing race]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Dinakar Guniguntala <dino@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cdbee9920fb37eb2dc49b860c2b28862d647adc
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:57 2006 -0700

    [PATCH] pi-futex: rt mutex futex api
    
    Add proxy-locking rt-mutex functionality needed by pi-futexes.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61a87122869b6340a63b6f9f84097d3688604b90
Author: Thomas Gleixner <tglx@linutronix.de>
Date:   Tue Jun 27 02:54:56 2006 -0700

    [PATCH] pi-futex: rt mutex tester
    
    RT-mutex tester: scriptable tester for rt mutexes, which allows userspace
    scripting of mutex unit-tests (and dynamic tests as well), using the actual
    rt-mutex implementation of the kernel.
    
    [akpm@osdl.org: fixlet]
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7eebaf6a81b956c989f184ee4b27277c88f8afe
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:55 2006 -0700

    [PATCH] pi-futex: rt mutex debug
    
    Runtime debugging functionality for rt-mutexes.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a6537be9324c67b41f6d98f5a60a1bd5a8e02861
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Tue Jun 27 02:54:54 2006 -0700

    [PATCH] pi-futex: rt mutex docs
    
    Add rt-mutex documentation.
    
    [rostedt@goodmis.org: Update rt-mutex-design.txt as per Randy Dunlap suggestions]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Cc: "Randy Dunlap" <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23f78d4a03c53cbd75d87a795378ea540aa08c86
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:53 2006 -0700

    [PATCH] pi-futex: rt mutex core
    
    Core functions for the rt-mutex subsystem.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b29739f902ee76a05493fb7d2303490fc75364f4
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:51 2006 -0700

    [PATCH] pi-futex: scheduler support for pi
    
    Add framework to boost/unboost the priority of RT tasks.
    
    This consists of:
    
     - caching the 'normal' priority in ->normal_prio
     - providing a functions to set/get the priority of the task
     - make sched_setscheduler() aware of boosting
    
    The effective_prio() cleanups also fix a priority-calculation bug pointed out
    by Andrey Gelman, in set_user_nice().
    
    has_rt_policy() fix: Peter Williams <pwil3058@bigpond.net.au>
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Andrey Gelman <agelman@012.net.il>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77ba89c5cf28d5d98a3cae17f67a3e42b102cc25
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:51 2006 -0700

    [PATCH] pi-futex: add plist implementation
    
    Add the priority-sorted list (plist) implementation.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8eb94f80dd2da5977c35cd094f0802c1501a12cd
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:50 2006 -0700

    [PATCH] pi-futex: introduce WARN_ON_SMP
    
    Introduce a new WARN_ON variant: WARN_ON_SMP(cond).
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9b8404cf8f8456dfa83459510762b700dc00385
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:49 2006 -0700

    [PATCH] pi-futex: introduce debug_check_no_locks_freed()
    
    Add debug_check_no_locks_freed(), as a central inline to add
    bad-lock-free-debugging functionality to.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6abdce7680e3e8436b3292b345d77b67d5ec9ea8
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:48 2006 -0700

    [PATCH] pi-futex: robust futex docs fix
    
    Fix typo in Documentation/robust-futexes.txt.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2970f2fb6950183a34e8545faa093eb49d186e1
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:54:47 2006 -0700

    [PATCH] pi-futex: futex code cleanups
    
    We are pleased to announce "lightweight userspace priority inheritance" (PI)
    support for futexes.  The following patchset and glibc patch implements it,
    ontop of the robust-futexes patchset which is included in 2.6.16-mm1.
    
    We are calling it lightweight for 3 reasons:
    
     - in the user-space fastpath a PI-enabled futex involves no kernel work
       (or any other PI complexity) at all.  No registration, no extra kernel
       calls - just pure fast atomic ops in userspace.
    
     - in the slowpath (in the lock-contention case), the system call and
       scheduling pattern is in fact better than that of normal futexes, due to
       the 'integrated' nature of FUTEX_LOCK_PI.  [more about that further down]
    
     - the in-kernel PI implementation is streamlined around the mutex
       abstraction, with strict rules that keep the implementation relatively
       simple: only a single owner may own a lock (i.e.  no read-write lock
       support), only the owner may unlock a lock, no recursive locking, etc.
    
      Priority Inheritance - why, oh why???
      -------------------------------------
    
    Many of you heard the horror stories about the evil PI code circling Linux for
    years, which makes no real sense at all and is only used by buggy applications
    and which has horrible overhead.  Some of you have dreaded this very moment,
    when someone actually submits working PI code ;-)
    
    So why would we like to see PI support for futexes?
    
    We'd like to see it done purely for technological reasons.  We dont think it's
    a buggy concept, we think it's useful functionality to offer to applications,
    which functionality cannot be achieved in other ways.  We also think it's the
    right thing to do, and we think we've got the right arguments and the right
    numbers to prove that.  We also believe that we can address all the
    counter-arguments as well.  For these reasons (and the reasons outlined below)
    we are submitting this patch-set for upstream kernel inclusion.
    
    What are the benefits of PI?
    
      The short reply:
      ----------------
    
    User-space PI helps achieving/improving determinism for user-space
    applications.  In the best-case, it can help achieve determinism and
    well-bound latencies.  Even in the worst-case, PI will improve the statistical
    distribution of locking related application delays.
    
      The longer reply:
      -----------------
    
    Firstly, sharing locks between multiple tasks is a common programming
    technique that often cannot be replaced with lockless algorithms.  As we can
    see it in the kernel [which is a quite complex program in itself], lockless
    structures are rather the exception than the norm - the current ratio of
    lockless vs.  locky code for shared data structures is somewhere between 1:10
    and 1:100.  Lockless is hard, and the complexity of lockless algorithms often
    endangers to ability to do robust reviews of said code.  I.e.  critical RT
    apps often choose lock structures to protect critical data structures, instead
    of lockless algorithms.  Furthermore, there are cases (like shared hardware,
    or other resource limits) where lockless access is mathematically impossible.
    
    Media players (such as Jack) are an example of reasonable application design
    with multiple tasks (with multiple priority levels) sharing short-held locks:
    for example, a highprio audio playback thread is combined with medium-prio
    construct-audio-data threads and low-prio display-colory-stuff threads.  Add
    video and decoding to the mix and we've got even more priority levels.
    
    So once we accept that synchronization objects (locks) are an unavoidable fact
    of life, and once we accept that multi-task userspace apps have a very fair
    expectation of being able to use locks, we've got to think about how to offer
    the option of a deterministic locking implementation to user-space.
    
    Most of the technical counter-arguments against doing priority inheritance
    only apply to kernel-space locks.  But user-space locks are different, there
    we cannot disable interrupts or make the task non-preemptible in a critical
    section, so the 'use spinlocks' argument does not apply (user-space spinlocks
    have the same priority inversion problems as other user-space locking
    constructs).  Fact is, pretty much the only technique that currently enables
    good determinism for userspace locks (such as futex-based pthread mutexes) is
    priority inheritance:
    
    Currently (without PI), if a high-prio and a low-prio task shares a lock [this
    is a quite common scenario for most non-trivial RT applications], even if all
    critical sections are coded carefully to be deterministic (i.e.  all critical
    sections are short in duration and only execute a limited number of
    instructions), the kernel cannot guarantee any deterministic execution of the
    high-prio task: any medium-priority task could preempt the low-prio task while
    it holds the shared lock and executes the critical section, and could delay it
    indefinitely.
    
      Implementation:
      ---------------
    
    As mentioned before, the userspace fastpath of PI-enabled pthread mutexes
    involves no kernel work at all - they behave quite similarly to normal
    futex-based locks: a 0 value means unlocked, and a value==TID means locked.
    (This is the same method as used by list-based robust futexes.) Userspace uses
    atomic ops to lock/unlock these mutexes without entering the kernel.
    
    To handle the slowpath, we have added two new futex ops:
    
      FUTEX_LOCK_PI
      FUTEX_UNLOCK_PI
    
    If the lock-acquire fastpath fails, [i.e.  an atomic transition from 0 to TID
    fails], then FUTEX_LOCK_PI is called.  The kernel does all the remaining work:
    if there is no futex-queue attached to the futex address yet then the code
    looks up the task that owns the futex [it has put its own TID into the futex
    value], and attaches a 'PI state' structure to the futex-queue.  The pi_state
    includes an rt-mutex, which is a PI-aware, kernel-based synchronization
    object.  The 'other' task is made the owner of the rt-mutex, and the
    FUTEX_WAITERS bit is atomically set in the futex value.  Then this task tries
    to lock the rt-mutex, on which it blocks.  Once it returns, it has the mutex
    acquired, and it sets the futex value to its own TID and returns.  Userspace
    has no other work to perform - it now owns the lock, and futex value contains
    FUTEX_WAITERS|TID.
    
    If the unlock side fastpath succeeds, [i.e.  userspace manages to do a TID ->
    0 atomic transition of the futex value], then no kernel work is triggered.
    
    If the unlock fastpath fails (because the FUTEX_WAITERS bit is set), then
    FUTEX_UNLOCK_PI is called, and the kernel unlocks the futex on the behalf of
    userspace - and it also unlocks the attached pi_state->rt_mutex and thus wakes
    up any potential waiters.
    
    Note that under this approach, contrary to other PI-futex approaches, there is
    no prior 'registration' of a PI-futex.  [which is not quite possible anyway,
    due to existing ABI properties of pthread mutexes.]
    
    Also, under this scheme, 'robustness' and 'PI' are two orthogonal properties
    of futexes, and all four combinations are possible: futex, robust-futex,
    PI-futex, robust+PI-futex.
    
      glibc support:
      --------------
    
    Ulrich Drepper and Jakub Jelinek have written glibc support for PI-futexes
    (and robust futexes), enabling robust and PI (PTHREAD_PRIO_INHERIT) POSIX
    mutexes.  (PTHREAD_PRIO_PROTECT support will be added later on too, no
    additional kernel changes are needed for that).  [NOTE: The glibc patch is
    obviously inofficial and unsupported without matching upstream kernel
    functionality.]
    
    the patch-queue and the glibc patch can also be downloaded from:
    
      http://redhat.com/~mingo/PI-futex-patches/
    
    Many thanks go to the people who helped us create this kernel feature: Steven
    Rostedt, Esben Nielsen, Benedikt Spranger, Daniel Walker, John Cooper, Arjan
    van de Ven, Oleg Nesterov and others.  Credits for related prior projects goes
    to Dirk Grambow, Inaky Perez-Gonzalez, Bill Huey and many others.
    
    Clean up the futex code, before adding more features to it:
    
     - use u32 as the futex field type - that's the ABI
     - use __user and pointers to u32 instead of unsigned long
     - code style / comment style cleanups
     - rename hash-bucket name from 'bh' to 'hb'.
    
    I checked the pre and post futex.o object files to make sure this
    patch has no code effects.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Ulrich Drepper <drepper@redhat.com>
    Cc: Jakub Jelinek <jakub@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66e5393a78b3fcca63e7748e38221dcca61c4aab
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Tue Jun 27 02:54:44 2006 -0700

    [PATCH] BUG() if setscheduler is called from interrupt context
    
    Thomas Gleixner is adding the call to a rtmutex function in setscheduler.
    This call grabs a spin_lock that is not always protected by interrupts
    disabled.  So this means that setscheduler cant be called from interrupt
    context.
    
    To prevent this from happening in the future, this patch adds a
    BUG_ON(in_interrupt()) in that function.  (Thanks to akpm <aka.  Andrew
    Morton> for this suggestion).
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9fea80e4d984d411aa188baa31225c273ebe0fe6
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Tue Jun 27 02:54:42 2006 -0700

    [PATCH] sched: uninline task_rq_lock()
    
    Saves 543 bytes from sched.o (gcc 3.3.3).
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Con Kolivas <kernel@kolivas.org>
    Cc: Peter Williams <pwil3058@bigpond.net.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c45bf279d378d436ce45825c0f136696c7b6109
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Tue Jun 27 02:54:42 2006 -0700

    [PATCH] sched: mc/smt power savings sched policy
    
    sysfs entries 'sched_mc_power_savings' and 'sched_smt_power_savings' in
    /sys/devices/system/cpu/ control the MC/SMT power savings policy for the
    scheduler.
    
    Based on the values (1-enable, 0-disable) for these controls, sched groups
    cpu power will be determined for different domains.  When power savings
    policy is enabled and under light load conditions, scheduler will minimize
    the physical packages/cpu cores carrying the load and thus conserving
    power(with a perf impact based on the workload characteristics...  see OLS
    2005 CMP kernel scheduler paper for more details..)
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Con Kolivas <kernel@kolivas.org>
    Cc: "Chen, Kenneth W" <kenneth.w.chen@intel.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 369381694ddcf03f1de403501c8b97099b5109ec
Author: Srivatsa Vaddagiri <vatsa@in.ibm.com>
Date:   Tue Jun 27 02:54:41 2006 -0700

    [PATCH] sched_domai: Allocate sched_group structures dynamically
    
    As explained here:
    	http://marc.theaimsgroup.com/?l=linux-kernel&m=114327539012323&w=2
    
    there is a problem with sharing sched_group structures between two
    separate sched_group structures for different sched_domains.
    
    The patch has been tested and found to avoid the kernel lockup problem
    described in above URL.
    
    Signed-off-by: Srivatsa Vaddagiri <vatsa@in.ibm.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15f0b676a482fb4067cfe25de417c417dda3440a
Author: Srivatsa Vaddagiri <vatsa@in.ibm.com>
Date:   Tue Jun 27 02:54:40 2006 -0700

    [PATCH] sched_domai: Use kmalloc_node
    
    The sched group structures used to represent various nodes need to be
    allocated from respective nodes (as suggested here also:
    
    	http://uwsg.ucs.indiana.edu/hypermail/linux/kernel/0603.3/0051.html)
    
    Signed-off-by: Srivatsa Vaddagiri <vatsa@in.ibm.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d3a5aa9858cc9cecc3aadac7311d376c7c9e101a
Author: Srivatsa Vaddagiri <vatsa@in.ibm.com>
Date:   Tue Jun 27 02:54:39 2006 -0700

    [PATCH] sched_domai: Don't use GFP_ATOMIC
    
    Replace GFP_ATOMIC allocation for sched_group_nodes with GFP_KERNEL based
    allocation.
    
    Signed-off-by: Srivatsa Vaddagiri <vatsa@in.ibm.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51888ca25a03125e742ef84d4ddfd74e139707a0
Author: Srivatsa Vaddagiri <vatsa@in.ibm.com>
Date:   Tue Jun 27 02:54:38 2006 -0700

    [PATCH] sched_domain: handle kmalloc failure
    
    Try to handle mem allocation failures in build_sched_domains by bailing out
    and cleaning up thus-far allocated memory.  The patch has a direct consequence
    that we disable load balancing completely (even at sibling level) upon *any*
    memory allocation failure.
    
    [Lee.Schermerhorn@hp.com: bugfix]
    Signed-off-by: Srivatsa Vaddagir <vatsa@in.ibm.com>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Signed-off-by: Lee Schermerhorn <lee.schermerhorn@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 615052dc3bf96278a843a64d3d1eea03532028c3
Author: Peter Williams <pwil3058@bigpond.net.au>
Date:   Tue Jun 27 02:54:37 2006 -0700

    [PATCH] sched: Avoid unnecessarily moving highest priority task move_tasks()
    
    Problem:
    
    To help distribute high priority tasks evenly across the available CPUs
    move_tasks() does not, under some circumstances, skip tasks whose load
    weight is bigger than the designated amount.  Because the highest priority
    task on the busiest queue may be on the expired array it may be moved as a
    result of this mechanism.  Apart from not being the most desirable way to
    redistribute the high priority tasks (we'd rather move the second highest
    priority task), there is a risk that this could set up a loop with this
    task bouncing backwards and forwards between the two queues.  (This latter
    possibility can be demonstrated by running a nice==-20 CPU bound task on an
    otherwise quiet 2 CPU system.)
    
    Solution:
    
    Modify the mechanism so that it does not override skip for the highest
    priority task on the CPU.  Of course, if there are more than one tasks at
    the highest priority then it will allow the override for one of them as
    this is a desirable redistribution of high priority tasks.
    
    Signed-off-by: Peter Williams <pwil3058@bigpond.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50ddd96917e4548b3813bfb5dd6f97f052b652bd
Author: Peter Williams <pwil3058@bigpond.net.au>
Date:   Tue Jun 27 02:54:36 2006 -0700

    [PATCH] sched: modify move_tasks() to improve load balancing outcomes
    
    Problem:
    
    The move_tasks() function is designed to move UP TO the amount of load it
    is asked to move and in doing this it skips over tasks looking for ones
    whose load weights are less than or equal to the remaining load to be
    moved.  This is (in general) a good thing but it has the unfortunate result
    of breaking one of the original load balancer's good points: namely, that
    (within the limits imposed by the active/expired array model and the fact
    the expired is processed first) it moves high priority tasks before low
    priority ones and this means there's a good chance (see active/expired
    problem for why it's only a chance) that the highest priority task on the
    queue but not actually on the CPU will be moved to the other CPU where (as
    a high priority task) it may preempt the current task.
    
    Solution:
    
    Modify move_tasks() so that high priority tasks are not skipped when moving
    them will make them the highest priority task on their new run queue.
    
    Signed-off-by: Peter Williams <pwil3058@bigpond.com.au>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Cc: "Chen, Kenneth W" <kenneth.w.chen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2dd73a4f09beacadde827a032cf15fd8b1fa3d48
Author: Peter Williams <pwil3058@bigpond.net.au>
Date:   Tue Jun 27 02:54:34 2006 -0700

    [PATCH] sched: implement smpnice
    
    Problem:
    
    The introduction of separate run queues per CPU has brought with it "nice"
    enforcement problems that are best described by a simple example.
    
    For the sake of argument suppose that on a single CPU machine with a
    nice==19 hard spinner and a nice==0 hard spinner running that the nice==0
    task gets 95% of the CPU and the nice==19 task gets 5% of the CPU.  Now
    suppose that there is a system with 2 CPUs and 2 nice==19 hard spinners and
    2 nice==0 hard spinners running.  The user of this system would be entitled
    to expect that the nice==0 tasks each get 95% of a CPU and the nice==19
    tasks only get 5% each.  However, whether this expectation is met is pretty
    much down to luck as there are four equally likely distributions of the
    tasks to the CPUs that the load balancing code will consider to be balanced
    with loads of 2.0 for each CPU.  Two of these distributions involve one
    nice==0 and one nice==19 task per CPU and in these circumstances the users
    expectations will be met.  The other two distributions both involve both
    nice==0 tasks being on one CPU and both nice==19 being on the other CPU and
    each task will get 50% of a CPU and the user's expectations will not be
    met.
    
    Solution:
    
    The solution to this problem that is implemented in the attached patch is
    to use weighted loads when determining if the system is balanced and, when
    an imbalance is detected, to move an amount of weighted load between run
    queues (as opposed to a number of tasks) to restore the balance.  Once
    again, the easiest way to explain why both of these measures are necessary
    is to use a simple example.  Suppose that (in a slight variation of the
    above example) that we have a two CPU system with 4 nice==0 and 4 nice=19
    hard spinning tasks running and that the 4 nice==0 tasks are on one CPU and
    the 4 nice==19 tasks are on the other CPU.  The weighted loads for the two
    CPUs would be 4.0 and 0.2 respectively and the load balancing code would
    move 2 tasks resulting in one CPU with a load of 2.0 and the other with
    load of 2.2.  If this was considered to be a big enough imbalance to
    justify moving a task and that task was moved using the current
    move_tasks() then it would move the highest priority task that it found and
    this would result in one CPU with a load of 3.0 and the other with a load
    of 1.2 which would result in the movement of a task in the opposite
    direction and so on -- infinite loop.  If, on the other hand, an amount of
    load to be moved is calculated from the imbalance (in this case 0.1) and
    move_tasks() skips tasks until it find ones whose contributions to the
    weighted load are less than this amount it would move two of the nice==19
    tasks resulting in a system with 2 nice==0 and 2 nice=19 on each CPU with
    loads of 2.1 for each CPU.
    
    One of the advantages of this mechanism is that on a system where all tasks
    have nice==0 the load balancing calculations would be mathematically
    identical to the current load balancing code.
    
    Notes:
    
    struct task_struct:
    
    has a new field load_weight which (in a trade off of space for speed)
    stores the contribution that this task makes to a CPU's weighted load when
    it is runnable.
    
    struct runqueue:
    
    has a new field raw_weighted_load which is the sum of the load_weight
    values for the currently runnable tasks on this run queue.  This field
    always needs to be updated when nr_running is updated so two new inline
    functions inc_nr_running() and dec_nr_running() have been created to make
    sure that this happens.  This also offers a convenient way to optimize away
    this part of the smpnice mechanism when CONFIG_SMP is not defined.
    
    int try_to_wake_up():
    
    in this function the value SCHED_LOAD_BALANCE is used to represent the load
    contribution of a single task in various calculations in the code that
    decides which CPU to put the waking task on.  While this would be a valid
    on a system where the nice values for the runnable tasks were distributed
    evenly around zero it will lead to anomalous load balancing if the
    distribution is skewed in either direction.  To overcome this problem
    SCHED_LOAD_SCALE has been replaced by the load_weight for the relevant task
    or by the average load_weight per task for the queue in question (as
    appropriate).
    
    int move_tasks():
    
    The modifications to this function were complicated by the fact that
    active_load_balance() uses it to move exactly one task without checking
    whether an imbalance actually exists.  This precluded the simple
    overloading of max_nr_move with max_load_move and necessitated the addition
    of the latter as an extra argument to the function.  The internal
    implementation is then modified to move up to max_nr_move tasks and
    max_load_move of weighted load.  This slightly complicates the code where
    move_tasks() is called and if ever active_load_balance() is changed to not
    use move_tasks() the implementation of move_tasks() should be simplified
    accordingly.
    
    struct sched_group *find_busiest_group():
    
    Similar to try_to_wake_up(), there are places in this function where
    SCHED_LOAD_SCALE is used to represent the load contribution of a single
    task and the same issues are created.  A similar solution is adopted except
    that it is now the average per task contribution to a group's load (as
    opposed to a run queue) that is required.  As this value is not directly
    available from the group it is calculated on the fly as the queues in the
    groups are visited when determining the busiest group.
    
    A key change to this function is that it is no longer to scale down
    *imbalance on exit as move_tasks() uses the load in its scaled form.
    
    void set_user_nice():
    
    has been modified to update the task's load_weight field when it's nice
    value and also to ensure that its run queue's raw_weighted_load field is
    updated if it was runnable.
    
    From: "Suresh Siddha" <suresh.b.siddha@intel.com>
    
    With smpnice, sched groups with highest priority tasks can mask the imbalance
    between the other sched groups with in the same domain.  This patch fixes some
    of the listed down scenarios by not considering the sched groups which are
    lightly loaded.
    
    a) on a simple 4-way MP system, if we have one high priority and 4 normal
       priority tasks, with smpnice we would like to see the high priority task
       scheduled on one cpu, two other cpus getting one normal task each and the
       fourth cpu getting the remaining two normal tasks.  but with current
       smpnice extra normal priority task keeps jumping from one cpu to another
       cpu having the normal priority task.  This is because of the
       busiest_has_loaded_cpus, nr_loaded_cpus logic..  We are not including the
       cpu with high priority task in max_load calculations but including that in
       total and avg_load calcuations..  leading to max_load < avg_load and load
       balance between cpus running normal priority tasks(2 Vs 1) will always show
       imbalanace as one normal priority and the extra normal priority task will
       keep moving from one cpu to another cpu having normal priority task..
    
    b) 4-way system with HT (8 logical processors).  Package-P0 T0 has a
       highest priority task, T1 is idle.  Package-P1 Both T0 and T1 have 1 normal
       priority task each..  P2 and P3 are idle.  With this patch, one of the
       normal priority tasks on P1 will be moved to P2 or P3..
    
    c) With the current weighted smp nice calculations, it doesn't always make
       sense to look at the highest weighted runqueue in the busy group..
       Consider a load balance scenario on a DP with HT system, with Package-0
       containing one high priority and one low priority, Package-1 containing one
       low priority(with other thread being idle)..  Package-1 thinks that it need
       to take the low priority thread from Package-0.  And find_busiest_queue()
       returns the cpu thread with highest priority task..  And ultimately(with
       help of active load balance) we move high priority task to Package-1.  And
       same continues with Package-0 now, moving high priority task from package-1
       to package-0..  Even without the presence of active load balance, load
       balance will fail to balance the above scenario..  Fix find_busiest_queue
       to use "imbalance" when it is lightly loaded.
    
    [kernel@kolivas.org: sched: store weighted load on up]
    [kernel@kolivas.org: sched: add discrete weighted cpu load function]
    [suresh.b.siddha@intel.com: sched: remove dead code]
    Signed-off-by: Peter Williams <pwil3058@bigpond.com.au>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Cc: "Chen, Kenneth W" <kenneth.w.chen@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Cc: John Hawkes <hawkes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit efc30814a88bdbe2bfe4ac94de2eb089ad80bee3
Author: Kirill Korotaev <dev@sw.ru>
Date:   Tue Jun 27 02:54:32 2006 -0700

    [PATCH] sched: CPU hotplug race vs. set_cpus_allowed()
    
    There is a race between set_cpus_allowed() and move_task_off_dead_cpu().
    __migrate_task() doesn't report any err code, so task can be left on its
    runqueue if its cpus_allowed mask changed so that dest_cpu is not longer a
    possible target.  Also, chaning cpus_allowed mask requires rq->lock being
    held.
    
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Acked-By: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc94abfcbc9fed0048365ce1fb8dc81353408bf8
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Tue Jun 27 02:54:31 2006 -0700

    [PATCH] unnecessary long index i in sched
    
    Unless we expect to have more than 2G CPUs, there's no reason to have 'i'
    as a long long here.
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72d2854d4ebf5faf086ebccb2ed575c6b68a05dc
Author: Con Kolivas <kernel@kolivas.org>
Date:   Tue Jun 27 02:54:30 2006 -0700

    [PATCH] sched: fix interactive ceiling code
    
    The relationship between INTERACTIVE_SLEEP and the ceiling is not perfect
    and not explicit enough.  The sleep boost is not supposed to be any larger
    than without this code and the comment is not clear enough about what
    exactly it does, just the reason it does it.  Fix it.
    
    There is a ceiling to the priority beyond which tasks that only ever sleep
    for very long periods cannot surpass.  Fix it.
    
    Prevent the on-runqueue bonus logic from defeating the idle sleep logic.
    
    Opportunity to micro-optimise.
    
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Signed-off-by: Mike Galbraith <efault@gmx.de>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d444886e149a8413159da8b43ada2bc287e69b0c
Author: Steven Rostedt <rostedt@goodmis.org>
Date:   Tue Jun 27 02:54:29 2006 -0700

    [PATCH] sched: simplify bitmap definition
    
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c96d145e71c5c84601322d85748512e09d7b325f
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Tue Jun 27 02:54:28 2006 -0700

    [PATCH] sched: fix smt nice lock contention and optimization
    
    Initial report and lock contention fix from Chris Mason:
    
    Recent benchmarks showed some performance regressions between 2.6.16 and
    2.6.5.  We tracked down one of the regressions to lock contention in
    schedule heavy workloads (~70,000 context switches per second)
    
    kernel/sched.c:dependent_sleeper() was responsible for most of the lock
    contention, hammering on the run queue locks.  The patch below is more of a
    discussion point than a suggested fix (although it does reduce lock
    contention significantly).  The dependent_sleeper code looks very expensive
    to me, especially for using a spinlock to bounce control between two
    different siblings in the same cpu.
    
    It is further optimized:
    
    * perform dependent_sleeper check after next task is determined
    * convert wake_sleeping_dependent to use trylock
    * skip smt runqueue check if trylock fails
    * optimize double_rq_lock now that smt nice is converted to trylock
    * early exit in searching first SD_SHARE_CPUPOWER domain
    * speedup fast path of dependent_sleeper
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Con Kolivas <kernel@kolivas.org>
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Acked-by: Chris Mason <mason@suse.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a8e2a5ea4cf43c0edd6db56a156549edb0eee98
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:27 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add proper Kconfig, Makefile entries
    
    Replace the temp makefile hacks with proper CONFIG entries, which are also
    added to Kconfig.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 23916a8e3d8f41aa91474e834ac99808b197c39e
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:26 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: display pin values in/out in gpio_dump
    
    Add current pin settings to gpio_dump() output.  This adds the last 'word' to
    the syslog lines, which displays the input and output values that the pin is
    set to.
    
      pc8736x_gpio.0: io00: 0x0044 TS OD PUE  EDGE LO DEBOUNCE        io:1/1
    
    The 2 values may differ for a number of reasons:
    1- the pin output circuitry is diaabled, (as the above 'TS' indicates)
    2- it needs a pullup resistor to drive the attached circuit,
    3- the external circuit needs a pullup so the open-drain has something
       to pull-down
    4- the pin is wired to Vcc or Ground
    
    It might be appropriate to add a WARN for 2,3,4, since they could
    damage the chip and/or circuit, esp if misconfig goes unnoticed.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec312310e43acd5bb8b49314c6d472bb60d2d30c
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:25 2006 -0700

    [PATCH] gpio-patchset-fixups: include linux/io.h
    
    Hmm.  Im somewhat ambivalent about this patch, since with it, driver wont
    build for vanilla 17 or older.
    
    Its also only 1/2 of your suggestion - when I tried it, I was building against
    vanilla 17, and asm/uaccess.h cause compilation failure.  Looking back, Im
    perplexed as to why linux/io.h didnt cause same failure ?!?
    
    use linux/io.h rather than asm/io.h
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bcf6135c3e8cdfab375f4041a48721483519eee
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:25 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: replace spinlocks w mutexes
    
    Replace spinlocks guarding gpio config ops with mutexes.  This is a me-too
    patch, and is justifiable insofar as mutexes have stricter semantics and
    better debugging support, so are preferred where they are applicable.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cad56fd884b7eb85ae193c94b688fe76680fcbf
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:24 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: fix gpio_current, use shadow regs
    
    Add a working gpio_current() to pc8736x_gpio.c (the previous implementation
    just threw a dev_warn), and fix gpio_change() to use gpio_current() rather
    than the incorrect (and temporary) gpio_get().  Initialize shadow-regs so this
    all works.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f31000e573da052b6b8bcc21faff520b4e2eda7a
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:23 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: use dev_dbg in common module
    
    Use of dev_dbg() and friends is considered good practice.  dev_dbg() needs a
    struct device *devp, but nsc_gpio is only a helper module, so it doesnt
    have/need its own.  To provide devp to the user-modules (scx200 & pc8736x
    _gpio), we add it to the vtable, and set it during init.
    
    Also squeeze nsc_gpio_dump()'s format a little.
    
    [  199.259879]  pc8736x_gpio.0: io09: 0x0044 TS OD PUE  EDGE LO DEBOUNCE
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58b087cda1e9e46c7061c2282f92bd8e1970bfe7
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:22 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add platform_device for use w dev_dbg
    
    Adds platform-device to (just introduced) driver, and uses it to replace many
    printks with dev_dbg() etc.  This could trivially be merged into previous
    patch, but this way matches better with the corresponding patch that does the
    same change to scx200_gpio.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 681a3e7dab868a8c390724494e8b79dc596b9e0f
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:21 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add new pc8736x_gpio module
    
    Add the brand new pc8736x_gpio driver.  This is mostly based upon
    scx200_gpio.c, but the platform_dev is treated separately, since its fairly
    big too.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e41ef3c51ea7dbb764616f60a90700647fc8518
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:20 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: migrate gpio_dump to common module
    
    Since the meaning of config-bits is the same for scx200 and pc8736x _gpios, we
    can share a function to deliver this to user.  Since it is called via the
    vtable, its also completely replaceable.  For now, we keep using printk...
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a66fdf083bf2b60c4d12feb970bc7373b59e33a
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:20 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: migrate file-ops to common module
    
    Now that the read(), write() file-ops are dispatching gpio-ops via the vtable,
    they are generic, and can be moved 'verbatim' to the nsc_gpio common-support
    module.  After the move, various symbols are renamed to update 'scx200_' to
    'nsc_', and headers are adjusted accordingly.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ca5df0a4cbd17a9536e63c5f69d4717c6538eb0
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:19 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add empty common-module
    
    Add the nsc_gpio common-support module as an empty shell.  Next patch starts
    the migration of the common gpio support routines.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3dc8071eedaac8c8a05c30fe20b78452a818dd9
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:18 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: dispatch via vtable
    
    Now actually call the gpio operations thru the vtable.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe3a168a2ce1c93837cdf8fe27a3e67795155f90
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:18 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add gpio-ops vtable
    
    Abstract the gpio operations into a new nsc_gpio_ops vtable.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b170b8fdbd14a197ad26b4354f3810c65a96602
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:17 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: refactor scx200_probe to better segregate _gpio initialization
    
    Pull shadow-reg initialization into separate function now, rather than doing
    it 2x later (scx200, pc8736x).  When we revisit 2nd drvr below, it will be to
    reimplement an init function, rather than another refactor.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9550a339e1ab1709dd53d92a1b76eecae2df9f3c
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:16 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add 'v' command to device-file
    
    Add a new driver command: 'v' which calls gpio_dump() on the pin.  The output
    goes to the log, like all other INFO messages in the original driver.  Giving
    the user control over the feedback they 'need' is construed to be a
    user-friendly feature, and allows us (later) to dial down many INFO messages
    to DEBUG log-level.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d424aa8744b7b7db1d32476ae6c8015d10eebe1c
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:16 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: put gpio_dump on a diet
    
    Shrink scx200_gpio_dump() to a single printk with ternary ops.  The function
    is still ifdef'd out, this is corrected in next patch, when it is actually
    used.
    
    The patch 'inadvertently' changed loglevel from DEBUG to INFO.  This is Good,
    because in next patch, its wired to a 'command' which the user can invoke when
    they want.  When they do so, its because they want INFO to support their
    developement effort, and we want to give it to them without compiling a DEBUG
    version of the driver.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55b8c0455b8aeb80f94183fa3aa42e3fa62b1705
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:15 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: device minor numbers are unsigned ints
    
    Per kernel headers, device minor numbers are unsigned ints.  Do the same in
    this driver.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 979b5ec3a7055d35b212f657e80257ec1346aa0e
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:14 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: add platforn_device for use w dev_dbg
    
    Add a platform-device to scx200_gpio, and use its struct device dev member
    (ie: devp) in dev_dbg() once.
    
    There are 2 alternatives here (Im soliciting guidance/commentary):
    
    - use isa_device, if/when its added to the kernel.
    
    - alter scx200.c to EXPORT_GPL its private devp so that both scx200_gpio,
      and the (to be added) nsc_gpio module can use it.  Since the available devp
      is in 'grandparent', this seems like too much 'action at a distance'.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d7f212661d68d231fdfaead03dda0dd44d5bbbb
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:14 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: modernize driver init to 2.6 api
    
    Adopt many modern 2.6 coding practices, ala LDD3, chapter 3.  Changes are
    limited to initialization calls from module init, ie: cdev_init, cdev_add,
    *_chrdev_region, mkdev.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62c83cde9282a9580994a12b3063e677181b5ebe
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Tue Jun 27 02:54:13 2006 -0700

    [PATCH] chardev: GPIO for SCx200 & PC-8736x: whitespace pre-clean
    
    GPIO SUPPORT FOR SCx200 & PC8736x
    
    The patch-set reworks the 2.4 vintage scx200_gpio driver for modern 2.6, and
    refactors GPIO support to reuse it in a new driver for the GPIO on PC-8736x
    chips.  Its handy for the Soekris.com net-4801, which has both chips.
    
    These patches have been seen recently on Kernel-Mentors, and then
    Kernel-Newbies ML, where Jesper Juhl kindly reviewed it.  His feedback has
    been incorporated.  Thanks Jesper !
    
    Its also gone to soekris-tech@soekris.com for possible testing by linux folks,
    I've gotten 1 promise so far.  Theyre mostly BSD folk over there, but we'll
    see..
    
    Device-file & Sysfs
    
    The driver preserves the existing device-file interface, including the
    write/cmd set, but adds v to 'view' the pin-settings & configs by inducing,
    via gpio_dump(), a dev_info() call.  Its a fairly crappy way to get status,
    but it sticks to the syslog approach, conservatively.
    
    Allowing users to voluntarily trigger logging is good, it gives them a
    familiar way to confirm their app's control & use of the pins, and I've thus
    reduced the pin-mode-updates from dev_info to dev_dbg.
    
    I've recently bolted on a proto sysfs interface for both new drivers.  Im not
    including those patches here; they (the patch + doc-pre-patch) are still quite
    raw (and unreviewed on KNML), and since they 'invent' a convention for GPIO, a
    proper vetting is needed.  Since this patchset is much bigger than my previous
    ones, Id like to keep things simpler, and address it 1st, before bolting on
    more stuff.
    
    The driver-split
    
    The Geode CPU and the PC-87366 Super-IO chip have GPIO units which share a
    common pin-architecture (same pin features, with same bits controlling), but
    with different addressing mechanics and port organizations.
    
    The vintage driver expresses the pin capabilities with pin-mode commands
    [OoPpTt],etc that change the pin configurations, and since the 2 chips share
    pin-arch, we can reuse the read(), write() commands, once the implementation
    is suitably adjusted.
    
    The patchset adds a vtable: struct nsc_gpio_ops, to abstract the existing gpio
    operations, then adjusts fileops.write() code to invoke operations via that
    vtable.  Driver specific open()s set private_data to the vtable so its
    available for use by write().
    
    The vtable gets the gpio_dump() too, since its user-friendly, and (could be
    construed as) part of the current device-file interface.  To support use of
    dev_dbg() in write() & _dump(), the vtable gets a dev ptr too, set by both
    scx200 & pc8736x _gpio drivers.
    
    heres how the pins are presented in syslog:
    
    [ 1890.176223]  scx200_gpio.0: io00: 0x0044 TS OD PUE  EDGE LO DEBOUNCE
    [ 1890.287223]  scx200_gpio.0: io01: 0x0003 OE PP PUD  EDGE LO
    
    nsc_gpio.c: new file is new home of several file-ops methods, which are
    modified to get their vtable from filp->private_data, and use it where needed.
    
    scx200_gpio.c: keeps some of its existing gpio routines, but now wires them up
    via the vtable (they're invoked by nsc_gpio.c:nsc_gpio_write() thru this
    vtable).  A driver-spcific open() initializes filp->private_data with the
    vtable.
    
    Once the split is clean, and the scx200_gpio driver is working, we copy and
    modify the function and variable names, and rework the access-method bodies
    for the different addressing scheme.
    
    Heres a working overview of the patchset:
    
    # series file for GPIO
    
    # Spring Cleaning
    gpio-scx/patch.preclean        # scripts/Lindent fixes, editor-ctrl comments
    
    # API Modernization
    
    gpio-scx/patch.api26        # what I learned from LDD3
    gpio-scx/patch.platform-dev-2    # get pdev, support for dev_dbg()
    gpio-scx/patch.unsigned-minor    # fix to match std practice
    
    # Debuggability
    
    gpio-scx/patch.dump-diet    # shrink gpio_dump()
    gpio-scx/patch.viewpins        # add new 'command' to call dump()
    gpio-scx/patch.init-refactor    # pull shadow-register init to sub
    
    # Access-Abstraction (add vtable)
    
    gpio-scx/patch.access-vtable    # introduce nsg_gpio_ops vtable, w dump
    gpio-scx/patch.vtable-calls    # add & use the vtable in scx200_gpio
    gpio-scx/patch.nscgpio-shell    # add empty driver for common-fops
    
    # move code under abstraction
    gpio-scx/patch.migrate-fops    # move file-ops methods from scx200_gpio
    gpio-scx/patch.common-dump    # mv scx200.c:scx200_gpio_dump() to nsc_gpio.c
    gpio-scx/patch.add-pc8736x-gpio    # add new driver, like old, w chip adapt
    # gpio-scx/patch.add-DEBUG    # enable all dev_dbg()s
    
    # Cleanups
    
    # finish printk -> dev_dbg() etc
    gpio-scx/patch.pdev-pc8736x    # new drvr needs pdev too,
    gpio-scx/patch.devdbg-nscgpio    # add device to 'vtable', use in dev_dbg()
    
    # gpio-scx/patch.pin-config-view    # another 'c' 'command'
    # gpio-scx/quiet-getset        # take out excess dbg stuff (pretty quiet
    now)
    gpio-scx/patch.shadow-current    # imitate scx200_gpio's shadow regs in
    pc87*
    
    # post KMentors-post patches ..
    
    gpio-scx/patch.mutexes        # use mutexes for config-locks
    gpio-scx/patch.viewpins-values    # extend dump to obsolete separate 'c' cmd
    
    gpio-scx/patch.kconfig        # add stuff for kbuild
    
    # TBC
    # combine api26 with pdev, which is just one step.
    # merge c&v commands to single do-all-fn
    # delay viewpins, dump-diet should also un-ifdef it too.
    
    diff.sys-gpio-rollup-1
    
    This patch:
    
    Removed editor format-control comments, and used scripts/Lindent to clean up
    whitespace, then deleted the bogus chunks :-(
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a67e4c5b6faaccf31740a07d93704166405d880
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:11 2006 -0700

    [PATCH] cpu hotplug: use hotplug version of cpu notifier in appropriate places
    
    Make use the of newly defined hotplug version of cpu_notifier functionality
    wherever appropriate.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39f4885c56073ecafd482d7e10dd7b17900fa312
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:10 2006 -0700

    [PATCH] cpu hotplug: add hotplug versions of cpu_notifier
    
    Define new macros register_hotcpu_notifier() and unregister_hotcpu_notifier()
    that redefines register_cpu_notifier() and unregister_cpu_notifier() for use
    only when HOTPLUG_CPU is defined.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26c2143b63b8078d08d562733716de142927e17a
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:10 2006 -0700

    [PATCH] cpu hotplug: make cpu_notifier related notifier calls __cpuinit only
    
    Make notifier_calls associated with cpu_notifier as __cpuinit.
    
    __cpuinit makes sure that the function is init time only unless
    CONFIG_HOTPLUG_CPU is defined.
    
    [akpm@osdl.org: section fix]
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74b85f3790aa2550c617fe14439482e13e615fa0
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:09 2006 -0700

    [PATCH] cpu hotplug: make cpu_notifier related notifier blocks __cpuinit only
    
    Make notifier_blocks associated with cpu_notifier as __cpuinitdata.
    
    __cpuinitdata makes sure that the data is init time only unless
    CONFIG_HOTPLUG_CPU is defined.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 65edc68c345cbe21d0b0375c3452a3ed5e322868
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:08 2006 -0700

    [PATCH] cpu hotplug: make [un]register_cpu_notifier init time only
    
    CPUs come online only at init time (unless CONFIG_HOTPLUG_CPU is defined).
    So, cpu_notifier functionality need to be available only at init time.
    
    This patch makes register_cpu_notifier() available only at init time, unless
    CONFIG_HOTPLUG_CPU is defined.
    
    This patch exports register_cpu_notifier() and unregister_cpu_notifier() only
    if CONFIG_HOTPLUG_CPU is defined.
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 054cc8a2d808822dadf488a61729e3e550f114c4
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:07 2006 -0700

    [PATCH] cpu hotplug: revert initdata patch submitted for 2.6.17
    
    This patch reverts notifier_block changes made in 2.6.17
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c7b216d23e820e0e148d5be01bbb5bd2d8378fe
Author: Chandra Seetharaman <sekharan@us.ibm.com>
Date:   Tue Jun 27 02:54:07 2006 -0700

    [PATCH] cpu hotplug: revert init patch submitted for 2.6.17
    
    In 2.6.17, there was a problem with cpu_notifiers and XFS.  I provided a
    band-aid solution to solve that problem.  In the process, i undid all the
    changes you both were making to ensure that these notifiers were available
    only at init time (unless CONFIG_HOTPLUG_CPU is defined).
    
    We deferred the real fix to 2.6.18.  Here is a set of patches that fixes the
    XFS problem cleanly and makes the cpu notifiers available only at init time
    (unless CONFIG_HOTPLUG_CPU is defined).
    
    If CONFIG_HOTPLUG_CPU is defined then cpu notifiers are available at run
    time.
    
    This patch reverts the notifier_call changes made in 2.6.17
    
    Signed-off-by: Chandra Seetharaman <sekharan@us.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ac12dfe9c2027cd3c5ed603f11d1bb4f04906fe
Author: Sonny Rao <sonny@burdell.org>
Date:   Tue Jun 27 02:54:06 2006 -0700

    [PATCH] rtc: fix idr locking
    
    We need to serialize access to the global rtc_idr even in this error path.
    
    Signed-off-by: Sonny Rao <sonny@burdell.org>
    Acked-by: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b65b5b59f98aa317df399318b0b2770f50732d3c
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue Jun 27 02:54:05 2006 -0700

    [PATCH] stallion clean up
    
    There are two locking sets involved.  One locks the board mappings and the
    other is the tty open/close locking.  The low level code was clearly
    designed to be ported to OS's with spin locks already so pretty much comes
    out in the wash
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33979734cd35ae0624337cdbc529921e4350d96f
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 27 02:54:04 2006 -0700

    [PATCH] IPMI: use schedule in kthread
    
    Corey Minyard <minyard@acm.org>
    
    The kthread used to speed up polling for IPMI was using udelay in its
    busy-wait polling loop when the lower-level state machine told it to do a
    short delay.  This just used CPU and didn't help scheduling, thus causing
    bad problems with other tasks.  Call schedule() instead.
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Acked-by: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c32e066057fe0914da262c94e52cefb142f965b4
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Tue Jun 27 02:54:04 2006 -0700

    [PATCH] rcutorture: add call_rcu_bh() operations
    
    Add operations for the call_rcu_bh() variant of RCU.  Also add an
    rcu_batches_completed_bh() function, which is needed by rcutorture.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72e9bb549280b354311af30640c9433474f3a32c
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Tue Jun 27 02:54:03 2006 -0700

    [PATCH] rcutorture: add ops vector and Classic RCU ops
    
    Add an ops vector to rcutorture, and add the ops for Classic RCU.  Update
    the rcutorture documentation to reflect slight change to the dmesg formats.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29766f1eb3d8d6cfaf1d6623fb4c3f7e5a822fe4
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Tue Jun 27 02:54:02 2006 -0700

    [PATCH] rcutorture: catchup doc fixes for idle-hz tests
    
    This just catches the RCU torture documentation up with the recent fixes
    that test RCU for architectures that turn of the scheduling-clock interrupt
    for idle CPUs and the addition of a SUCCESS/FAILURE indication, fixing up
    an obsolete comment as well.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1dbe83c3445a1604546620a60888cf26b63f8782
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 02:54:01 2006 -0700

    [PATCH] fix kernel-doc in kernel/ dir
    
    Fix kernel-doc parameters in kernel/
    
    Warning(/var/linsrc/linux-2617-g9//kernel/auditsc.c:1376): No description found for parameter 'u_abs_timeout'
    Warning(/var/linsrc/linux-2617-g9//kernel/auditsc.c:1420): No description found for parameter 'u_msg_prio'
    Warning(/var/linsrc/linux-2617-g9//kernel/auditsc.c:1420): No description found for parameter 'u_abs_timeout'
    Warning(/var/linsrc/linux-2617-g9//kernel/acct.c:526): No description found for parameter 'pacct'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 283fef59d6e934e8da11631446ea8e2e93fce14c
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Tue Jun 27 02:54:00 2006 -0700

    [PATCH] tty: fix TCSBRK comment
    
    Fix TCSBRK comment to prevent confusion or accidental removal.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05f225dc8729d3e5703b8c34e750fdca67bcefe6
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Tue Jun 27 02:53:59 2006 -0700

    [PATCH] ufs: ufs_read_inode cleanup
    
    Add missed ufsi->i_dir_start_lookup initialization in ufs_read_inode in
    UFS2 case.  Also it cleans ufs_read_inode function to prevent such kind of
    situation in the future: it move depend on UFS type parts of code into
    separate functions and leaves in ufs_read_inode only generic code.  It
    cleans code and avoids duplication.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ca06664902d82ff0cb962cc4a72f63ab4bf4991
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Jun 27 02:53:58 2006 -0700

    [PATCH] RTC: Add a comment for ENOIOCTLCMD in ds1553_rtc_ioctl
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6527c2bdf1f833cc18e8f42bd97973d583e4aa83
Author: Vladimir V. Saveliev <vs@namesys.com>
Date:   Tue Jun 27 02:53:57 2006 -0700

    [PATCH] generic_file_buffered_write(): deadlock on vectored write
    
    generic_file_buffered_write() prefaults in user pages in order to avoid
    deadlock on copying from the same page as write goes to.
    
    However, it looks like there is a problem when write is vectored:
    fault_in_pages_readable brings in current segment or its part (maxlen).
    OTOH, filemap_copy_from_user_iovec is called to copy number of bytes
    (bytes) which may exceed current segment, so filemap_copy_from_user_iovec
    switches to the next segment which is not brought in yet.  Pagefault is
    generated.  That causes the deadlock if pagefault is for the same page
    write goes to: page being written is locked and not uptodate, pagefault
    will deadlock trying to lock locked page.
    
    [akpm@osdl.org: somewhat rewritten]
    Cc: Neil Brown <neilb@suse.de>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c0f16e5cdff59f3b132a1b0c0d44a941f8813d2
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Jun 27 02:53:56 2006 -0700

    [PATCH] Remove gratuitous inclusion of <linux/config.h> from <linux/dmaengine.h>
    
    We include config.h on the compiler command line. There's no need for it
    to be included again.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34af946a22724c4e2b204957f2b24b22a0fb121c
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:53:55 2006 -0700

    [PATCH] spin/rwlock init cleanups
    
    locking init cleanups:
    
     - convert " = SPIN_LOCK_UNLOCKED" to spin_lock_init() or DEFINE_SPINLOCK()
     - convert rwlocks in a similar manner
    
    this patch was generated automatically.
    
    Motivation:
    
     - cleanliness
     - lockdep needs control of lock initialization, which the open-coded
       variants do not give
     - it's also useful for -rt and for lock debugging in general
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6cd0b772dcc5dc9b4c03d53946474dee399fa72
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Jun 27 02:53:54 2006 -0700

    [PATCH] fs/buffer.c: cleanups
    
    - add a proper prototype for the following global function:
      - buffer_init()
    
    - make the following needlessly global function static:
      - end_buffer_async_write()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7807a32bbb027ab9955b96734fdc7f1e6497a9f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 02:53:54 2006 -0700

    [PATCH] poison: add & use more constants
    
    Add more poison values to include/linux/poison.h.  It's not clear to me
    whether some others should be added or not, so I haven't added any of
    these:
    
    ./include/linux/libata.h:#define ATA_TAG_POISON		0xfafbfcfdU
    ./arch/ppc/8260_io/fcc_enet.c:1918:	memset((char *)(&(immap->im_dprambase[(mem_addr+64)])), 0x88, 32);
    ./drivers/usb/mon/mon_text.c:429:	memset(mem, 0xe5, sizeof(struct mon_event_text));
    ./drivers/char/ftape/lowlevel/ftape-ctl.c:738:		memset(ft_buffer[i]->address, 0xAA, FT_BUFF_SIZE);
    ./drivers/block/sx8.c:/* 0xf is just arbitrary, non-zero noise; this is sorta like poisoning */
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3c681e09193559ba15f6c9562bd37045f120a96
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 02:53:53 2006 -0700

    [PATCH] update two drivers for poison.h
    
    Update two drivers to use poison.h.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9cf55285e87ac423c45d9efca750d3f50234d10
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 02:53:52 2006 -0700

    [PATCH] add poison.h and patch primary users
    
    Localize poison values into one header file for better documentation and
    easier/quicker debugging and so that the same values won't be used for
    multiple purposes.
    
    Use these constants in core arch., mm, driver, and fs code.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Matt Mackall <mpm@selenic.com>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6e5494cb23d1933735ee47cc674ffe1c4afed6f
Author: Ingo Molnar <mingo@elte.hu>
Date:   Tue Jun 27 02:53:50 2006 -0700

    [PATCH] vdso: randomize the i386 vDSO by moving it into a vma
    
    Move the i386 VDSO down into a vma and thus randomize it.
    
    Besides the security implications, this feature also helps debuggers, which
    can COW a vma-backed VDSO just like a normal DSO and can thus do
    single-stepping and other debugging features.
    
    It's good for hypervisors (Xen, VMWare) too, which typically live in the same
    high-mapped address space as the VDSO, hence whenever the VDSO is used, they
    get lots of guest pagefaults and have to fix such guest accesses up - which
    slows things down instead of speeding things up (the primary purpose of the
    VDSO).
    
    There's a new CONFIG_COMPAT_VDSO (default=y) option, which provides support
    for older glibcs that still rely on a prelinked high-mapped VDSO.  Newer
    distributions (using glibc 2.3.3 or later) can turn this option off.  Turning
    it off is also recommended for security reasons: attackers cannot use the
    predictable high-mapped VDSO page as syscall trampoline anymore.
    
    There is a new vdso=[0|1] boot option as well, and a runtime
    /proc/sys/vm/vdso_enabled sysctl switch, that allows the VDSO to be turned
    on/off.
    
    (This version of the VDSO-randomization patch also has working ELF
    coredumping, the previous patch crashed in the coredumping code.)
    
    This code is a combined work of the exec-shield VDSO randomization
    code and Gerd Hoffmann's hypervisor-centric VDSO patch. Rusty Russell
    started this patch and i completed it.
    
    [akpm@osdl.org: cleanups]
    [akpm@osdl.org: compile fix]
    [akpm@osdl.org: compile fix 2]
    [akpm@osdl.org: compile fix 3]
    [akpm@osdl.org: revernt MAXMEM change]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Cc: Gerd Hoffmann <kraxel@suse.de>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5fb34261dcd32c9cb3b28121fdc46308db513a1
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Jun 27 02:53:50 2006 -0700

    [PATCH] voyager: fix compile after setup rework
    
    The following
    
    [PATCH] Clean up and refactor i386 sub-architecture setup
    
    Doesn't quite work, since it leaves out an include of asm/io.h, without
    which the use of inb/outb in the setup file won.t work.  This corrects that
    and also removes a spurious acpi reference that apparently crept in ages
    ago but should never have been there.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96c52749036eca2b131f435d3895a3c6aba92e76
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Jun 27 02:53:49 2006 -0700

    [PATCH] fix subarchitecture breakage with CONFIG_SCHED_SMT
    
    Commit 1e9f28fa1eb9773bf65bae08288c6a0a38eef4a7 ("[PATCH] sched: new
    sched domain for representing multi-core") incorrectly made SCHED_SMT
    and some of the structures it uses dependent on SMP.
    
    However, this is wrong, the structures are only defined if X86_HT, so
    SCHED_SMT has to depend on that as well.
    
    The patch broke voyager, since it doesn't provide any of the multi-core
    or hyperthreading structures.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4031ff388138b58e5cd472dccce38828bcb8c706
Author: Aleksey Gorelov <Aleksey_Gorelov@Phoenix.com>
Date:   Tue Jun 27 02:53:48 2006 -0700

    [PATCH] fix broken vm86 interrupt/signal handling
    
    Commit c3ff8ec31c1249d268cd11390649768a12bec1b9 ("[PATCH] i386: Don't
    miss pending signals returning to user mode after signal processing")
    meant that vm86 interrupt/signal handling got broken for the case when
    vm86 is called from kernel space.
    
    In this scenario, if signal is pending because of vm86 interrupt,
    do_notify_resume/do_signal exits immediately due to user_mode() check,
    without processing any signals.  Thus, resume_userspace handler is spinning
    in a tight loop with signal pending and TIF_SIGPENDING is set.  Previously
    everything worked Ok.
    
    No in-tree usage of vm86() from kernel space exists, but I've heard
    about a number of projects out there which use vm86 calls from kernel,
    one of them being this, for instance:
    
    	http://dev.gentoo.org/~spock/projects/vesafb-tng/
    
    The following patch fixes the issue.
    
    Signed-off-by: Aleksey Gorelov <aleksey_gorelov@phoenix.com>
    Cc: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c723e084606ca1c81e91b80b2c0c44bde7bbc4df
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Tue Jun 27 02:53:47 2006 -0700

    [PATCH] i386: use C code for current_thread_info()
    
    Using C code for current_thread_info() lets the compiler optimize it.
    With gcc 4.0.2, kernel is smaller:
    
        text           data     bss     dec     hex filename
     3645212         555556  312024 4512792  44dc18 2.6.17-rc6-nb-post/vmlinux
     3647276         555556  312024 4514856  44e428 2.6.17-rc6-nb/vmlinux
     -------
       -2064
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b89aff930d632be10d557d08d1b60dee7163dbe
Author: Rohit Seth <rohitseth@google.com>
Date:   Tue Jun 27 02:53:46 2006 -0700

    [PATCH] i386: move phys_proc_id and cpu_core_id to cpuinfo_x86
    
    Move the phys_core_id and cpu_core_id to cpuinfo_x86 structure.  Similar
    patch for x86_64 is already accepted by Andi earlier this week.
    
    [akpm@osdl.org: fix warning]
    Signed-off-by: Rohit Seth <rohitseth@google.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f35bf929ffe2b3967c8f398880fcb78fcd2ab5c
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Tue Jun 27 02:53:45 2006 -0700

    [PATCH] x86: constify some parts of arch/i386/kernel/cpu/
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19eadf98c8167eac843580683317b99572e2abf0
Author: Rusty Russell <rusty@rustcorp.com.au>
Date:   Tue Jun 27 02:53:44 2006 -0700

    [PATCH] x86: increase interrupt vector range
    
    Remove the limit of 256 interrupt vectors by changing the value stored in
    orig_{e,r}ax to be the complemented interrupt vector.  The orig_{e,r}ax
    needs to be < 0 to allow the signal code to distinguish between return from
    interrupt and return from syscall.  With this change applied, NR_IRQS can
    be > 256.
    
    Xen extends the IRQ numbering space to include room for dynamically
    allocated virtual interrupts (in the range 256-511), which requires a more
    permissive interface to do_IRQ.
    
    Signed-off-by: Ian Pratt <ian.pratt@xensource.com>
    Signed-off-by: Christian Limpach <Christian.Limpach@cl.cam.ac.uk>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
    Cc: "Protasevich, Natalie" <Natalie.Protasevich@UNISYS.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd9e0b74f52dbac6241643fadca2393808b14c7a
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Tue Jun 27 02:53:43 2006 -0700

    [PATCH] x86: cpu_init(): avoid GFP_KERNEL allocation while atomic
    
    The patch fixes two issues:
    
    1.  cpu_init is called with interrupt disabled.  Allocating gdt table
       there isn't good at runtime.
    
    2. gdt table page cause memory leak in CPU hotplug case.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Cc: Zachary Amsden <zach@vmware.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28eba5bf9d4bf3ba4d58d985abf3a2903b7f2125
Author: Michael LeMay <mdlemay@epoch.ncsc.mil>
Date:   Tue Jun 27 02:53:42 2006 -0700

    [PATCH] selinux: inherit /proc/self/attr/keycreate across fork
    
    Update SELinux to cause the keycreate process attribute held in
    /proc/self/attr/keycreate to be inherited across a fork and reset upon
    execve.  This is consistent with the handling of the other process
    attributes provided by SELinux and also makes it simpler to adapt logon
    programs to properly handle the keycreate attribute.
    
    Signed-off-by: Michael LeMay <mdlemay@epoch.ncsc.mil>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76b67ed9dce69a6a329cdd66f94af1787f417b62
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:41 2006 -0700

    [PATCH] node hotplug: register cpu: remove node struct
    
    With Goto-san's patch, we can add new pgdat/node at runtime.  I'm now
    considering node-hot-add with cpu + memory on ACPI.
    
    I found acpi container, which describes node, could evaluate cpu before
    memory. This means cpu-hot-add occurs before memory hot add.
    
    In most part, cpu-hot-add doesn't depend on node hot add.  But register_cpu(),
    which creates symbolic link from node to cpu, requires that node should be
    onlined before register_cpu().  When a node is onlined, its pgdat should be
    there.
    
    This patch-set holds off creating symbolic link from node to cpu
    until node is onlined.
    
    This removes node arguments from register_cpu().
    
    Now, register_cpu() requires 'struct node' as its argument.  But the array of
    struct node is now unified in driver/base/node.c now (By Goto's node hotplug
    patch).  We can get struct node in generic way.  So, this argument is not
    necessary now.
    
    This patch also guarantees add cpu under node only when node is onlined.  It
    is necessary for node-hot-add vs.  cpu-hot-add patch following this.
    
    Moreover, register_cpu calculates cpu->node_id by cpu_to_node() without regard
    to its 'struct node *root' argument.  This patch removes it.
    
    Also modify callers of register_cpu()/unregister_cpu, whose args are changed
    by register-cpu-remove-node-struct patch.
    
    [Brice.Goglin@ens-lyon.org: fix it]
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Brice Goglin <Brice.Goglin@ens-lyon.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd0932d9d4301bd58a4d5a634a3a8298c4fc5e24
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:40 2006 -0700

    [PATCH] pgdat allocation and update for ia64 of memory hotplug: allocate pgdat and per node data
    
    This is a patch to allocate pgdat and per node data area for ia64.  The size
    for them can be calculated by compute_pernodesize().
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7049027c6f0098eb6b23b8f6ca65a905541faf81
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:39 2006 -0700

    [PATCH] pgdat allocation and update for ia64 of memory hotplug: update pgdat address array
    
    This is to refresh node_data[] array for ia64.  As I mentioned previous
    patches, ia64 has copies of information of pgdat address array on each node as
    per node data.
    
    At v2 of node_add, this function used stop_machine_run() to update them.  (I
    wished that they were copied safety as much as possible.) But, in this patch,
    this arrays are just copied simply, and set node_online_map bit after
    completion of pgdat initialization.
    
    So, kernel must touch NODE_DATA() macro after checking node_online_map().
    (Current code has already done it.) This is more simple way for just
    hot-add.....
    
    Note : It will be problem when hot-remove will occur,
           because, even if online_map bit is set, kernel may
           touch NODE_DATA() due to race condition. :-(
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae5a2c1c9b2bc3633032f97d02e60ae547a6047c
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:38 2006 -0700

    [PATCH] pgdat allocation and update for ia64 of memory hotplug: hold pgdat address at system running
    
    This is a preparatory patch to make common code for updating of NODE_DATA() of
    ia64 between boottime and hotplug.
    
    Current code remembers pgdat address in mem_data which is used at just boot
    time.  But its information can be used at hotplug time by moving to global
    value.  The next patch uses this array.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fc44159bfcb5b0afa178f9c3f50db23aebc76ff
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:38 2006 -0700

    [PATCH] Register sysfs file for hotplugged new node
    
    When new node becomes enable by hot-add, new sysfs file must be created for
    new node.  So, if new node is enabled by add_memory(), register_one_node() is
    called to create it.  In addition, I386's arch_register_node() and a part of
    register_nodes() of powerpc are consolidated to register_one_node() as a
    generic_code().
    
    This is tested by Tiger4(IPF) with node hot-plug emulation.
    
    Signed-off-by: Keiichiro Tokunaga <tokuanga.keiich@jp.fujitsu.com>
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f04bbd2d396a701c5af2e5b92bad896c2550c16
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:37 2006 -0700

    [PATCH] sparc64: support sparsemem and !memory hotplug
    
    Fix "undefined reference to `arch_add_memory'" on sparc64 allmodconfig.
    
    sparc64 doesn't support memory hotplug.  But we want it to support
    sparsemem.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2842f11419704f8707fffc82e10d2263427fc130
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:36 2006 -0700

    [PATCH] catch valid mem range at onlining memory
    
    This patch allows hot-add memory which is not aligned to section.
    
    Now, hot-added memory has to be aligned to section size.  Considering big
    section sized archs, this is not useful.
    
    When hot-added memory is registerd as iomem resoruce by iomem resource
    patch, we can make use of that information to detect valid memory range.
    
    Note: With this, not-aligned memory can be registerd. To allow hot-add
          memory with holes, we have to do more work around add_memory().
          (It doesn't allows add memory to already existing mem section.)
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a54703904a4a206686b4e8c3f5a6927b60747aa
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:35 2006 -0700

    [PATCH] register hot-added memory to iomem resource
    
    Register hot-added memory to iomem_resource.  With this, /proc/iomem can
    show hot-added memory.
    
    Note: kdump uses /proc/iomem to catch memory range when it is installed.
          So, kdump should be re-installed after /proc/iomem change.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9af3c2dea3a3ae4248d81a70b556adfe1dc65d55
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:34 2006 -0700

    [PATCH] pgdat allocation for new node add (call pgdat allocation)
    
    Add node-hot-add support to add_memory().
    
    node hotadd uses this sequence.
    1. allocate pgdat.
    2. refresh NODE_DATA()
    3. call free_area_init_node() to initialize
    4. create sysfs entry
    5. add memory (old add_memory())
    6. set node online
    7. run kswapd for new node.
    (8). update zonelist after pages are onlined. (This is already merged in -mm
       due to update phase is difference.)
    
    Note:
      To make common function as much as possible,
      there is 2 changes from v2.
        - The old add_memory(), which is defiend by each archs,
          is renamed to arch_add_memory(). New add_memory becomes
          caller of arch dependent function as a common code.
    
        - This patch changes add_memory()'s interface
            From: add_memory(start, end)
            TO  : add_memory(nid, start, end).
          It was cause of similar code that finding node id from
          physical address is inside of old add_memory() on each arch.
    
          In addition, acpi memory hotplug driver can find node id easier.
          In v2, it must walk DSDT'S _CRS by matching physical address to
          get the handle of its memory device, then get _PXM and node id.
          Because input is just physical address.
          However, in v3, the acpi driver can use handle to get _PXM and node id
          for the new memory device. It can pass just node id to add_memory().
    
    Fix interface of arch_add_memory() is in next patche.
    
    Signed-off-by: Yasunori Goto     <y-goto@jp.fujitsu.com>
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3218ae14b1e3ee2ab81df30ed690c8e864d23316
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:33 2006 -0700

    [PATCH] pgdat allocation for new node add (export kswapd start func)
    
    When node is hot-added, kswapd for the node should start.  This export kswapd
    start function as kswapd_run() to use at add_memory().
    
    [akpm@osdl.org: daemonize() isn't needed when using the kthread API]
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10ad400b49aca15ecf83b0fde7e35e4064b15c85
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:33 2006 -0700

    [PATCH] pgdat allocation for new node add (refresh node_data[])
    
    Refresh NODE_DATA() for generic archs.  In this case, NODE_DATA(nid) ==
    node_data[nid].  node_data[] is array of address of pgdat.  So, refresh is
    quite simple.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 306d6cbe86e2e6603ac3162e1294d5c75cfdeca6
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:32 2006 -0700

    [PATCH] pgdat allocation for new node add (generic alloc node_data)
    
    For node hotplug, basically we have to allocate new pgdat.  But, there are
    several types of implementations of pgdat.
    
    1. Allocate only pgdat.
       This style allocate only pgdat area.
       And its address is recorded in node_data[].
       It is most popular style.
    
    2. Static array of pgdat
       In this case, all of pgdats are static array.
       Some archs use this style.
    
    3. Allocate not only pgdat, but also per node data.
       To increase performance, each node has copy of some data as
       a per node data. So, this area must be allocated too.
    
       Ia64 is this style. Ia64 has the copies of node_data[] array
       on each per node data to increase performance.
    
    In this series of patches, treat (1) as generic arch.
    
    generic archs can use generic function. (2) and (3) should have
    its own if necessary.
    
    This patch defines pgdat allocator.
    Updating NODE_DATA() macro function is in other patch.
    
    Signed-off-by: Yasonori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e3590e2e4a38e8390fdac5bda23330bf2801838
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:31 2006 -0700

    [PATCH] pgdat allocation for new node add (get node id by acpi)
    
    This is to find node id from acpi's handle of memory_device in DSDT.  _PXM for
    the new node can be found by acpi_get_pxm() by using new memory's handle.  So,
    node id can be found by pxm_to_nid_map[].
    
      This patch becomes simpler than v2 of node hot-add patch.
      Because old add_memory() function doesn't have node id parameter.
      So, kernel must find its handle by physical address via DSDT again.
      But, v3 just give node id to add_memory() now.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc02af93dd2bbddce1b55e0a493f833a1b7cf140
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:30 2006 -0700

    [PATCH] pgdat allocation for new node add (specify node id)
    
    Change the name of old add_memory() to arch_add_memory.  And use node id to
    get pgdat for the node at NODE_DATA().
    
    Note: Powerpc's old add_memory() is defined as __devinit. However,
          add_memory() is usually called only after bootup.
          I suppose it may be redundant. But, I'm not well known about powerpc.
          So, I keep it. (But, __meminit is better at least.)
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd56a8e36f91f63c0a31e8a118d87b7cf01526b8
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:29 2006 -0700

    [PATCH] Catch notification of memory add event of ACPI via container driver. (avoid redundant call add_memory)
    
    When acpi_memory_device_init() is called at boottime to register struct
    memory acpi_memory_device, acpi_bus_add() are called via
    acpi_driver_attach().
    
    But it also calls ops->start() function.  It is called even if the memory
    blocks are initialized at early boottime.  In this case add_memory() return
    -EEXIST, and the memory blocks becomes INVALID state even if it is normal.
    
    This is patch to avoid calling add_memory() for already available memory.
    
    [akpm@osdl.org: coding cleanups]
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1f425994f96d85540d47eee98daabc1e211b454e
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:28 2006 -0700

    [PATCH] Catch notification of memory add event of ACPI via container driver. (register start func for memory device)
    
    This is a patch to call add_memroy() when notify reaches for new node's add
    event.
    
    When new node is added, notify of ACPI reaches container device which means
    the node.
    
    Container device driver calls acpi_bus_scan() to find and add belonging
    devices (which means cpu, memory and so on).  Its function calls add and
    start function of belonging devices's driver.
    
    Howevever, current memory hotplug driver just register add function to
    create sysfs file for its memory.  But, acpi_memory_enable_device() is not
    called because it is considered just the case that notify reaches memory
    device directly.  So, if notify reaches container device nothing can call
    add_memory().
    
    This is a patch to create start function which calls add_memory().
    add_memory() can be called by this when notify reaches container device.
    
    [akpm@osdl.org: coding cleanups]
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ac023989e6dd1b97140b47fb942a7940d0b2af2
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Tue Jun 27 02:53:27 2006 -0700

    [PATCH] acpi memory hotplug cannot manage _CRS with plural resoureces
    
    Current acpi memory hotplug just looks into the first entry of resources in
    _CRS.  But, _CRS can contain plural resources.  So, if _CRS contains plural
    resoureces, acpi memory hot add cannot add all memory.
    
    With this patch, acpi memory hotplug can deal with Memory Device, whose
    _CRS contains plural resources.
    
    Tested on ia64 memory hotplug test envrionment (not emulation, uses alpha
    version firmware which supports dynamic reconfiguration of NUMA.)
    
    Note: Microsoft's Windows Server 2003 requires big (>4G)resoureces to be
          divided into small (<4G) resources. looks crazy, but not invalid.
          (See http://www.microsoft.com/whdc/system/pnppwr/hotadd/hotaddmem.mspx)
          For this reason, a firmware vendor who supports Windows writes plural
          resources in a _CRS even if they are contiguous.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c31f2738ab124ebc1f8948a5fc17dd7a08ed1ec
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Jun 27 02:53:26 2006 -0700

    [PATCH] pm_trace is dangerous
    
    CONFIG_PM_TRACES scrogs your RTC.  Mark it as experimental, and defaulting to
    `off'.
    
    Also beef up the help message a bit.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b762450e84e20a179ee5993b065caaad99a65fbf
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 02:53:26 2006 -0700

    [PATCH] zlib inflate: fix function definitions
    
    Fix function definitions to be ANSI-compliant:
    lib/zlib_inflate/inffast.c:68:1: warning: non-ANSI definition of function 'inflate_fast'
    lib/zlib_inflate/inftrees.c:33:1: warning: non-ANSI definition of function 'zlib_inflate_table'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f32a25f63358aa993a3403c047f3ecfa6d96367
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Jun 27 02:53:25 2006 -0700

    [PATCH] kernel/acct: fix function definition
    
    kernel/acct.c:579:19: warning: non-ANSI function declaration of function 'acct_process'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6fdf8ccc09fd764a9cce11006aa3fca53ac1c895
Author: Nathan Scott <nathans@sgi.com>
Date:   Wed Jun 28 10:13:52 2006 +1000

    [XFS] Rework code snippets slightly to remove remaining recent-gcc
    warnings.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26364a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f40c562855294bf4e7268274d7461dc32c1e6b25
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Jun 28 00:13:38 2006 +0000

    [CIFS] Fix authentication choice so we do not force NTLMv2 unless the
    user specifies it is required or turns of ntlm
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit c1a7a755be26f68d7f21ee769584149a96185ea8
Author: Kyle McMartin <kyle@athena.road.mcmartin.ca>
Date:   Mon Jun 26 11:28:09 2006 -0400

    [PARISC] Move os_id_to_string() inside #ifndef __ASSEMBLY__
    
    Assembly files should be protected from os_id_to_string()... Pass me
    a brown paper bag, please.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 61c340166d8c62086b6de00afc7670eea27eb2ab
Author: James Bottomley <jejb@parisc-linux.org>
Date:   Sat Jun 24 16:05:18 2006 +0000

    [PARISC] Fix do_gettimeofday() hang
    
    Apparently gettimeoffset can return small negative values (usually in
    the 100us range).  If xtime.tv_nsec is accidentally less than this,
    though (a fortunately unlikely event) it triggers the loop forever.
    
    I've added a test and correct adjustment for this case.  It has a
    warning printk in there which I'd like to leave for the time being
    just in case this problem implicates some other part of the kernel.
    
    Signed-off-by: James Bottomley <jejb@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 6e1b9585aaae2fa4f9590f363b32c5d3b6339ba6
Author: James Bottomley <jejb@parisc-linux.org>
Date:   Fri Jun 23 14:15:20 2006 -0600

    [PARISC] Fix PCREL22F relocation problem for most modules
    
    The new problem, which has been affecting many more modules was that
    our new ioremap really takes chunks out of our vmalloc space.  The net
    result being that any two kernel vmalloc's now have to slot into the
    chunked up space.  So the vmallocs for a modules init and core sectons
    are no longer necessarily contiguous.  Unfortunately, the module loader
    thinks that any internal symbol references should be satisfiable using the
    jump instruction, which isn't true if the symbol is referenced from init
    to core and vmalloc placed them a long way apart.
    
    Fix this by introducing a new stub type for intra module inter sectional
    jumps and using it.
    
    Signed-off-by: James Bottomley <jejb@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 1c63b4b8474700f3fb5e3442a78897766f153437
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Wed Jun 21 16:49:38 2006 +0000

    [PARISC] Refactor show_regs in traps.c
    
    show_regs() was one bloaty function. Split it into a few cleaner
    functions and define a clean macro to print a line of registers.
    
    [And from Thibaut, only print fprs on a usermode trap.]
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 67a061a191017f984a1ef0ff73ae988b9b15f6d3
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sun Jun 25 16:58:57 2006 +0000

    [PARISC] Add os_id_to_string helper
    
    Add a helper to asm/pdc.h to translate OS_ID values to strings
    and use it in the pdc_stable driver.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit ec1fdc24c2ae012b078ba0187ceef208e08a3aec
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Wed Jun 21 19:27:29 2006 +0000

    [PARISC] OS_ID_LINUX == 0x0006
    
    We were assigned an OS_ID of 0x0006. Consistently use OS_ID_LINUX
    instead of using the magic number. Also update the OS_ID_ defines in
    asm/pdc.h to reflect this.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit a9d2d386c42b816a81eb1d02dfb7b502ba8cea82
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Fri Jun 16 18:20:00 2006 -0400

    [PARISC] Ensure Space ID hashing is turned off
    
    Check PDC_CACHE to see if spaceid hashing is turned on, and fail to
    boot if that is the case.
    
    However, some old machines do not implement the PDC_CACHE_RET_SPID
    firmware call, so continue to boot if the call fails because of
    PDC_BAD_OPTION (but fail in all other error returns).
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit e5a2e7fdb53028ce187c0ce0ae0d45ca7546fd5e
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Wed Jun 14 20:26:25 2006 +0000

    [PARISC] Match show_cache_info with reality
    
    show_cache_info and struct pdc_cache_cf were out of sync with
    published documentation. Fix the reporting of cache associativity
    and update the pdc_cache_cf bitfields to match documentation.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 667baef53fcd5b839ca8e74ed65811d9df22bd7b
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sat Jun 17 17:53:43 2006 +0000

    [PARISC] Remove unused macro fixup_branch in syscall.S
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit a3ea84fabacd9cc5bcc3fda67c35e692ca10dc8c
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Fri Jun 16 19:10:02 2006 +0000

    [PARISC] Add is_compat_task() helper
    
    ... And convert signal.c and ptrace.c to use it instead of open
    coded equivalents.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit d71624c95a231873ec3727ee9bff7b68e692de70
Author: Thibaut Varene <varenet@parisc-linux.org>
Date:   Sun May 7 04:54:28 2006 -0600

    [PARISC] Update Thibaut Varene's CREDITS entry
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit b0e8bfca2f6cdef6145e377ff0797fc42473b659
Author: Thibaut Varene <varenet@parisc-linux.org>
Date:   Thu May 4 18:43:34 2006 -0600

    [PARISC] Reduce data footprint in pdc_stable.c
    
    No code change - reduce data footprint.
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3f9edb53f74b4e18f92783da7b6f5ad1d36e05b2
Author: Thibaut Varene <varenet@parisc-linux.org>
Date:   Thu May 4 18:43:34 2006 -0600

    [PARISC] pdc_stable version 0.30
    
    pdc_stable v0.30:
    
    This patch introduces 3 more files to the /sys/firmware/stable tree:
    - diagnostic, which contains a cryptic hex string
    - osdep1, a 16 bytes os-dependent storage area always available
    - osdep2, another os-dependent storage area which existence/size depends
    on hversion.
    
    This patch also adds code to setup the "Linux" signature in stable
    storage. That is to say that starting with this patch, the kernel will
    now sign its OSID (0x0006, thx LaMont) in Stable Storage upon boot,
    whether pdc_stable is enabled or not.
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 9b0703fed7ca1af95d4454f45e2f25733f0afa76
Author: Thibaut Varene <varenet@parisc-linux.org>
Date:   Thu May 4 09:29:32 2006 -0600

    [PARISC] Work around machines which do not support chassis warnings
    
    pdc_chassis v0.05:
    
    Some machines seems not to implement Chassis warn support. Work around these.
    Also cleanup a bit of the code.
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 8ffaeaf42e91930888df09d696a8a6ebe056d0e0
Author: Thibaut Varene <varenet@parisc-linux.org>
Date:   Wed May 3 17:27:35 2006 -0600

    [PARISC] PDC_CHASSIS is implemented on all machines
    
    This patch removes a limitation of the original code, so that CHASSIS
    codes can be sent to all machines. On machines with a LCD panel, this
    code displays "INI" during bootup, "RUN" when the system is booted and
    running, "FLT" when a panic occurs, etc.
    
    This part of the code can be enabled/disabled through CONFIG_PDC_CHASSIS
    
    This patch also adds minimalistic support for Chassis warnings, through
    a proc entry '/proc/chassis', which will reflect the warnings status (PSU
    or fans failure when they happen, NVRAM battery level and temperature
    thresholds overflows).
    
    This part of the code can be enabled/disabled through CONFIG_PDC_CHASSIS_WARN
    
    Signed-off-by: Thibaut VARENE <varenet@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c95f2e5f2f6f61d734a025414c9eb81872a5c831
Author: Carlos O'Donell <carlos@parisc-linux.org>
Date:   Wed Jun 21 03:43:52 2006 +0000

    [PARISC] Remove unconditional #define PIC in syscall macros
    
    Signed-off-by: Carlos O'Donell <carlos@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 1b6d1b5e073ad9313ad64da49dff649f5c06e546
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Fri May 19 20:18:17 2006 +0000

    [PARISC] Use MFIA in current_text_addr on pa2.0 processors
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 7514b7a500411faa1c2ff1d5dc3198b855f5cdcc
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Thu May 25 16:22:30 2006 +0000

    [PARISC] Remove dead function pc_in_user_space
    
    This code has been crufting up the file without any use for quite
    a long time, so let's kill it.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 692086e0b3ca9a6cb876b901bfa87717044cb20f
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Tue May 30 17:50:29 2006 +0000

    [PARISC] Test ioc_needs_fdc variable instead of open coding
    
    Some debugging code in sba_iommu.c should be testing ioc_needs_fdc,
    not directly testing boot_cpu_data.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 40d78de1aced7e0f3ce112698d847adcc643efdf
Author: Grant Grundler <grundler@parisc-linux.org>
Date:   Thu May 11 00:31:31 2006 -0600

    [PARISC] Fix gcc 4.1 warnings in sba_iommu.c
    
    Clean up gcc 4.1 warnings noted by Joel Soete.
    Kyle McMartin gets kudos for pointing out the issues.
    Matthew Wilcox noticed sba_iommu was using open coded versions
    of (read|write)X.
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Matthew Wilcox <willy@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 3fd3a74f45c935f7d6d5c2fb48f06324b18826b7
Author: Carlos O'Donell <carlos@parisc-linux.org>
Date:   Sat Apr 22 14:47:21 2006 -0600

    [PARISC] Use FIXUP_BRANCH_CLOBBER to asm clobber list
    
    Joel Soete noticed correctly that the fixup's clobbers must be listed
    as the ASM clobbers. FIXUP_BRANCH in unaligned.c has a new macro which
    lists all the clobbers in the fixup, we use this throughout the file
    to simplify the process of listing clobbers in the future.
    
    A missing "r1" clobber is added to our uaccess.h for the 64-bit
    __put_kernel_asm. Interestingly this is a pretty serious bug since gcc
    generates pretty good use of r1 as a temporary and the uses of
    __put_kernel_asm are varied and dangerous if r1 is scratched during
    an invalid write.
    
    Signed-off-by: Joel Soete <soete.joel@tiscali.be>
    Signed-off-by: Carlos O'Donell <carlos@parisc-linux.org>
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit c8224e0074f1dce12e95e53ca469f6fe49cc9101
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Fri Apr 21 02:20:37 2006 +0000

    [PARISC] Whitespace clean up in asm/pgtable.h
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 64f495323c9a902b3e59fe0a588585102bb3b13e
Author: Kyle McMartin <kyle@parisc-linux.org>
Date:   Sat Apr 22 00:48:22 2006 -0600

    [PARISC] Ensure all ldcw uses are ldcw,co on pa2.0
    
    ldcw,co should always be used on pa2.0, otherwise the strict cache
    width alignment requirement is not relaxed.
    
    Signed-off-by: Kyle McMartin <kyle@parisc-linux.org>

commit 73024cf11522c0233228453984b2a2b37885e336
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Jun 28 08:42:26 2006 +1000

    [XFS] Fix realtime subvolume expansion, a porting bug b0rked it.  Coverity
    made me look at this code (bug id #344). We only return with
    XFS_ERROR(EINVAL) if mp->m_rtdev_targp is valid and pass it otherwise to
    xfs_read_buf() where some function calls later it gets dereferenced by an
    assert.
    
    SGI-PV: 954266
    SGI-Modid: xfs-linux-melb:xfs-kern:26363a
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6a93096195305f6f2a39544a034e77e2e74d5799
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Wed Jun 28 00:11:45 2006 +0200

    [MTD] NAND: Select chip before checking write protect status
    
    The other way round works not really well with boards which have a
    static NAND chipselect.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1887f517e3cdf5f1e9c0e4daaa864450415a8f61
Author: Herbert Valerio Riedel <hvr@gnu.org>
Date:   Sat Jun 24 00:03:36 2006 +0200

    [MTD] CORE mtdchar.c: fix off-by-one error in lseek()
    
    Allow lseek(mtdchar_fd, 0, SEEK_END) to succeed, which currently fails
    with EINVAL.
    
    lseek(fd, 0, SEEK_END) should result into the same fileposition as
    lseek(fd, 0, SEEK_SET) + read(fd, buf, length(fd))
    
    Furthermore, lseek(fd, 0, SEEK_CUR) should return the current file position,
    which in case of an encountered EOF should not result in EINVAL
    
    Signed-off-by: Herbert Valerio Riedel <hvr@gnu.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0e4ced59de7c0c23588d2b3f6d302592545cd12e
Author: Petr Stetiar <ynezz@true.cz>
Date:   Fri Jun 23 19:17:03 2006 +0200

    [MTD] NAND: Fix typo in mtd/nand/ts7250.c
    
    I was unable to compile ts7250.c after your refactor commit,
    it's a typo probably.
    
    -- ynezz
    
    From: Petr Stetiar <ynezz@true.cz>
    Signed-off-by: Thomas Gleixner  <tglx@linutronix.de>

commit 266bee88699ddbde42ab303bbc426a105cc49809
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jun 27 12:59:15 2006 -0700

    [PATCH] fix static linking of NFS
    
    Builds on ARM report link problems with common configurations like
    statically linked NFS (for nfsroot).  The symptom is that __init
    section code references __exit section code; that won't work since
    the exit sections are discarded (since they can never be called).
    
    The best fix for these particular cases would be an "__init_or_exit"
    section annotation.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7374e48009a15a680d53bd1f9828b9b79a8aac9
Author: Dmitry Torokhov <dmitry.torokhov@gmail.com>
Date:   Tue Jun 27 08:30:31 2006 -0400

    Input: fix resetting name, phys and uniq when unregistering device
    
    It should be done before calling class_device_unregister() because
    it will destroy the device and free memory if there are no other
    references to the device.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0223cf0b10bdb3b557d8884b1a957cc64be843c3
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Jun 27 19:50:57 2006 +0000

    [CIFS] Fix alignment of unicode strings in previous patch
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 87937472ff8e34ad5c7b798a8a52e4368af216df
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Thu Jun 1 20:39:02 2006 -0700

    [PATCH] i386: export memory more than 4G through /proc/iomem
    
    Currently /proc/iomem exports physical memory also apart from io device
    memory.  But on i386, it truncates any memory more than 4GB.  This leads to
    problems for kexec/kdump.
    
    Kexec reads /proc/iomem to determine the system memory layout and prepares a
    memory map based on that and passes it to the kernel being kexeced.  Given the
    fact that memory more than 4GB has been truncated, new kernel never gets to
    see and use that memory.
    
    Kdump also reads /proc/iomem to determine the physical memory layout of the
    system and encodes this informaiton in ELF headers.  After a crash new kernel
    parses these ELF headers being used by previous kernel and vmcore is prepared
    accordingly.  As memory more than 4GB has been truncated, kdump never sees
    that memory and never prepares ELF headers for it.  Hence vmcore is truncated
    and limited to 4GB even if there is more physical memory in the system.
    
    This patch exports memory more than 4GB through /proc/iomem on i386.
    
    Cc: Maneesh Soni <maneesh@in.ibm.com>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6550e07f41ce8473ed684dac54fbfbd42183ffda
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 17:11:31 2006 -0700

    [PATCH] 64bit Resource: finally enable 64bit resource sizes
    
    Introduce the Kconfig entry and actually switch to a 64bit value, if
    wanted, for resource_size_t.
    
    Based on a patch series originally from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2427ddd8fae2febe3f5ac1ba76b092541304d9f0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 17:07:52 2006 -0700

    [PATCH] 64bit Resource: convert a few remaining drivers to use resource_size_t where needed
    
    Based on a patch series originally from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b60ba8343b78b182c03cf239d4342785376c1ad1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 17:07:07 2006 -0700

    [PATCH] 64bit resource: change pnp core to use resource_size_t
    
    Based on a patch series originally from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e31dd6e4520439ceae4753f32dd2da2c345e929a
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 17:06:02 2006 -0700

    [PATCH] 64bit resource: change pci core and arch code to use resource_size_t
    
    Based on a patch series originally from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d75fc8bbccf7c019994bcfd6255d5b56335ed21d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 16:09:23 2006 -0700

    [PATCH] 64bit resource: change resource core to use resource_size_t
    
    Based on a patch series originally from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf7c712c11fb881842534efe98a07f36f1c86c65
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:49:31 2006 -0700

    [PATCH] 64bit resource: introduce resource_size_t for the start and end of struct resource
    
    But do not change it from what it currently is (unsigned long)
    
    Based on a patch series originally from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e29419fffceb8ec36def3c922040e1ca7bcd3de5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:20:16 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in misc drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 685143ac1f7a579a3fac9c7f2ac8f82e95af6864
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:18:31 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in arch and core code
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com> and
    Andrew Morton.
    
    (tweaked by Andy Isaacson <adi@hexapodia.org>)
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andy Isaacson <adi@hexapodia.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 490ab72af6a7a74b1d77e8f1b67fdfad04371876
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:17:34 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in pcmcia drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 228aef63d9a5f4ddc9cc9213215e789f35f2cd00
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:16:52 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in video drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 08f46de9a0e7c293db34cf44f9451d18ef609770
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:15:59 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in ide drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 176dfc633bbe4e03f4557d2beeefb4f0cc7f0efa
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:15:17 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in mtd drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1396a8c3f7cec9f5e0d00bd089be21fc468f0f1c
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:14:29 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in pci core and hotplug drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c7459d1f91abdf1e31ef80cad526e83e8b8ba4e
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 15:13:08 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in networks drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aa0a2ddc54fa8a22060d17a9ca7bbc4bcc51f260
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 14:50:27 2006 -0700

    [PATCH] 64bit resource: fix up printks for resources in sound drivers
    
    This is needed if we wish to change the size of the resource structures.
    
    Based on an original patch from Vivek Goyal <vgoyal@in.ibm.com>
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 740e518efcd84ce5e53ecf3c4c9be08cf8f3747c
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 12 14:47:06 2006 -0700

    [PATCH] 64bit resource: C99 changes for struct resource declarations
    
    Based on an original patch from Ralf Baechle <ralf@linux-mips.org> and
    Vivek Goyal <vgoyal@in.ibm.com>.  This is needed in order to prepare for
    changing the size of resources.
    
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e4ac9773be2ea01b707da0496ab1527ec6cdda4e
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:34 2006 -0700

    e1000: increase version to 7.1.9-k2
    
    Increment the version to 7.1.9-k2
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit ae2c3860eb18712b71861bb6fc8d7e11e0f79e6d
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:30 2006 -0700

    e1000: add ich8lan device ID's
    
    Add the device ID's of the supported ICH8 LAN devices.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 1f9e7e3d32f7ff3fd3a936fc9ad59770b3d29774
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:26 2006 -0700

    e1000: allow user to disable ich8 lock loss workaround
    
    The workaround for the ich8 lock loss problem is only needed for
    a very small amount of systems. This adds an option for the user
    to disable the workaround.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit cd94dd0b648ceb64ca5e41d9ccfa99c1e30e92ef
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:22 2006 -0700

    e1000: integrate ich8 support into driver
    
    This hooks up the ich8 structure into the driver itself.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit d37ea5d56293b7a883d2a993df5d8b9fb660ed3b
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:17 2006 -0700

    e1000: add ich8lan core functions
    
    This implements the core new functions needed for ich8's internal
    NIC. This includes:
    
    * ich8 specific read/write code
    * flash/nvm access code
    * software semaphore flag functions
    * 10/100 PHY (fe - no gigabit speed) support for low-end versions
    * A workaround for a powerdown sequence problem discovered that
    affects a small number of motherboard.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit ab7bc0ad72a12ef8eacc1560c9342aa567f3531d
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:13 2006 -0700

    e1000: disable ERT
    
    Hardware is reported to have problems with ERT. We disable it for
    all hardware to make sure we are not seeing unexplainable user
    problems.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 592600a0536f0d5aab4dc95f19515a37d03430f8
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:09 2006 -0700

    e1000: check return value of _get_speed_and_duplex
    
    We were not checking the return value of get_speed_and_duplex
    properly, whih may contain an error value.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit ee04022a21764a12e29eee144b72344ebfe0a55c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:08:03 2006 -0700

    e1000: M88 PHY workaround
    
    M88 rev 2 PHY needs a longer downshift to function properly. This adds
    a much longer downshift counter for this specific device.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit f1b3a85354d3877fae45ef448e7e49c2efd692d5
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:07:56 2006 -0700

    e1000: fix adapter led blinking inconsistency
    
    Several e1000 adapters were not blinking correctly or inconsistently. This
    patch cleans this up and makes them all behave the same as far as possible.
    
    Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 7dfee0cb1d506897805b663dd95e9651619a4d4d
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:07:50 2006 -0700

    e1000: disable CRC stripping workaround
    
    CRC stripping is breaking SMBUS-connected BMC's. We disable this
    feature to make it work. This fixes related bugs regarding SOL.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 4ca213a6957318219822c024c8e4c61b3e42a7dc
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:07:08 2006 -0700

    e1000: force register write flushes to circumvent broken platforms
    
    A certain AMD64 bridge (8132) has an option to turn on write combining
    which breaks our adapter. To circumvent this we need to flush every write.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 17231712ab89fa085bc235ef19c1e6e0c163e4fc
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:59 2006 -0700

    e1000: rework module param code with uninitialized values
    
    We can take uninitialized values into account which minimizes code
    and allows us to simplify the parameter checking code greatly.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 864c4e45ec6d1bfe16a14d887d5baad201419aba
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:53 2006 -0700

    e1000: recycle skb
    
    Recycle an skb to improve performance a bit.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit a5eafce2ce2fd3a1956657d85908ca691b870e5d
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:49 2006 -0700

    e1000: change printk into DPRINTK
    
    Changing a printk message to make clear that this message is originating
    from e1000.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 9a53a2029885e0088e9149679215b95d04deb57b
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:45 2006 -0700

    e1000: add smart power down code
    
    Smart Power Down is a power saving feature in newer e1000 hardware. We
    disable it because it causes time to link to be long, but make it a
    user choice.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 0cbabbb0725fa34a37d6b7870b2d2fe17d1a0a94
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:41 2006 -0700

    e1000: small performance tweak by removing double code
    
    buffer_info is already filled at the end of this while() loop.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 6fdfef162426766611b1f640138e4720f56e45f8
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:36 2006 -0700

    e1000: fix CONFIG_PM blocks
    
    e1000_suspend is called even when !CONFIG_PM. The non-PM code inside of it
    is properly #ifdef'd. This fixes the compiler warnings when !CONFIG_PM.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 79f05bf0ba9b41561600f3cdfdf86b5184fc6675
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:32 2006 -0700

    e1000: Make PHY powerup/down a function
    
    In relation to the irq work done earlier we also move the PHY powerup
    and powerdown functions into separate functions and move the calls to
    _close and _open, making the PHY stay in it's power state as long as
    the device is _up.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 2db10a081c5c1082d58809a1bcf1a6073f4db160
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:28 2006 -0700

    e1000: rework driver hardware reset locking
    
    After studying the driver mac reset code it was found that there
    were multiple race conditions possible to reset the unit twice or
    bring it e1000_up() double. This fixes all occurences where the
    driver needs to reset the mac.
    
    We also remove irq requesting/releasing into _open and _close so
    that while the device is _up we will never touch the irq's. This fixes
    the double free irq bug that people saw.
    
    To make sure that the watchdog task doesn't cause another race we let
    it run as a non-scheduled task.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit acfbc9fde2ec7f304398f6ad7644002e07bf84bc
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Jun 27 09:06:24 2006 -0700

    e1000: fix loopback ethtool test
    
    Ethtool was reporting that loopback failed randomly on esb2
    systems. Upon study it was found that the phy manual was changed
    with respect to the loopback mode bits. The new value fixes it.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 3bdad7bd253f17ead00b4af2e82f84e9522c95ac
Author: James Smart <James.Smart@Emulex.Com>
Date:   Mon Jun 26 14:19:59 2006 -0400

    [SCSI] fc transport: bug fix: correct references
    
    Original post was incorrect as it didn't realize that we already had
    a self-referenc due to device_initialize(), and we were really only
    missing the put on our own reference. This was hidden by the other bug
    which had the midlayer reusing stargets after they were already free,
    which was doing too many puts on our rport.
    
    Updating FC transport for:
    - Add put in fc_rport_final_delete(), to release the rport.
      Prior, we were leaving the rport with a reference, thus the shost
      with references, etc. If the driver was unloaded, shosts and rports
      remained, along with work threads, etc
    - Fix fc_rport_create failure path - too many put's on parent
    - Add commenting to easily track ref taking.
    
    Signed-off-by: James Smart <james.smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1c9e16e47a22c61d99aabb1c154e5106ddbf3575
Author: James Smart <James.Smart@Emulex.Com>
Date:   Tue May 16 16:13:36 2006 -0400

    [SCSI] update max sdev block limit
    
    Updated patch to address comments from Pat Mansfield and Michael Reed:
    Bumped max to 600 (10mins). Set default dev_loss_tmo to a value other
    than the max (30s).
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a0785edff7b316cad566bdc369d3d034c4c1a39c
Author: James Smart <James.Smart@Emulex.Com>
Date:   Thu May 11 13:27:09 2006 -0400

    [SCSI] fc transport: resolve scan vs delete deadlocks
    
    In a prior posting to linux-scsi on the fc transport and workq
    deadlocks, we noted a second error that did not have a patch:
      http://marc.theaimsgroup.com/?l=linux-scsi&m=114467847711383&w=2
      - There's a deadlock where scsi_remove_target() has to sit behind
        scsi_scan_target() due to contention over the scan_lock().
    
    Subsequently we posted a request for comments about the deadlock:
      http://marc.theaimsgroup.com/?l=linux-scsi&m=114469358829500&w=2
    
    This posting resolves the second error. Here's what we now understand,
    and are implementing:
    
      If the lldd deletes the rport while a scan is active, the sdev's queue
      is blocked which stops the issuing of commands associated with the scan.
      At this point, the scan stalls, and does so with the shost->scan_mutex held.
      If, at this point, if any scan or delete request is made on the host, it
      will stall waiting for the scan_mutex.
    
      For the FC transport, we queue all delete work to a single workq.
      So, things worked fine when competing with the scan, as long as the
      target blocking the scan was the same target at the top of our delete
      workq, as the delete workq routine always unblocked just prior to
      requesting the delete.  Unfortunately, if the top of our delete workq
      was for a different target, we deadlock.  Additionally, if the target
      blocking scan returned, we were unblocking it in the scan workq routine,
      which really won't execute until the existing stalled scan workq
      completes (e.g. we're re-scheduling it while it is in the midst of its
      execution).
    
      This patch moves the unblock out of the workq routines and moves it to
      the context that is scheduling the work. This ensures that at some point,
      we will unblock the target that is blocking scan.  Please note, however,
      that the deadlock condition may still occur while it waits for the
      transport to timeout an unblock on a target.  Worst case, this is bounded
      by the transport dev_loss_tmo (default: 30 seconds).
    
    Finally, Michael Reed deserves the credit for the bulk of this patch,
    analysis, and it's testing. Thank you for your help.
    
    Note: The request for comments statements about the gross-ness of the
      scan_mutex still stand.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Signed-off-by: James Smart <james.smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 79ac6745e4d95cd583bca744d313a323deb4adc2
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Mar 8 14:50:18 2006 -0500

    [SCSI] Block I/O while SG reset operation in progress - lpfc portion
    
    This removes the duplicate functionality which had been added to
    the lpfc driver.
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d7a1bb0a04ca835bffc0a91e64ab827dfba7d8f5
Author: James Smart <James.Smart@Emulex.Com>
Date:   Wed Mar 8 14:50:12 2006 -0500

    [SCSI] Block I/O while SG reset operation in progress - the midlayer patch
    
    The scsi midlayer portion of the patch
    
    Signed-off-by: James Smart <James.Smart@emulex.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 04510dee3c21ac208351cc6de7b70a5459ab3029
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat Jun 24 09:21:13 2006 +0900

    [JFFS2][XATTR] coexistence between xattr and write buffering support.
    
    Drop '&& !JFFS2_FS_WRITEBUFFER' from fs/Kconfig.
    The series of previous patches enables to use those
    functionality at same time.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 332a6b99c587161a972eaa1b00ae0e0dc49fbbfd
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat Jun 24 09:17:42 2006 +0900

    [JFFS2][XATTR] Fix wrong copyright
    
    summary.c was modified at 2006.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2c887e2359f6e7217cdaa17994ca94ef328b658f
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat Jun 24 09:16:50 2006 +0900

    [JFFS2][XATTR] Re-define xd->refcnt as atomic_t
    
    In jffs2_release_xattr_datum(), it refers xd->refcnt to ensure
    whether releasing xd is allowed or not.
    But we can't hold xattr_sem since this function is called under
    spin_lock(&c->erase_completion_lock). Thus we have to refer it
    without any locking.
    
    This patch redefine xd->refcnt as atomic_t. It enables to refer
    xd->refcnt without any locking.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 355ed4e141203fd7266ef9d90d57be0c61bd1aa4
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat Jun 24 09:15:36 2006 +0900

    [JFFS2][XATTR] Fix memory leak with jffs2_xattr_ref
    
    If xattr_ref is associated with an orphan inode_cache
    on filesystem mounting, those xattr_refs are not
    released even if this inode_cache is released.
    
    This patch enables to call jffs2_xattr_delete_inode()
    for such a irregular inode_cachde too.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8a13695cbe4e8311b363f9bd25162904b984ca74
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat Jun 24 09:14:13 2006 +0900

    [JFFS2][XATTR] rid unnecessary writing of delete marker.
    
    In the followinf situation, an explicit delete marker is not
    necessary, because we can certainlly detect those obsolete
    xattr_datum or xattr_ref on next mounting.
    
    - When to delete xattr_datum node.
    - When to delete xattr_ref node on removing inode.
    - When to delete xattr_ref node on updating xattr.
    
    This patch rids writing delete marker in those situations.
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a1ae76e96a18edf4b8a4d4e102762060c26d1c6a
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sun Jun 11 10:45:22 2006 +0900

    [JFFS2][XATTR] Fix ACL bug when updating null xattr by null ACL.
    
    This patch enable to handle the case when updating null xattr
    by null ACL.
    
    When we try to set NULL into NULL xattr, xattr subsystem returns
    -ENODATA. This patch enables to handle this error code.
    
    [2/3] jffs2-xattr-v6-02-fix_posixacl_bug.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c9f700f840bd481b3e01fcad1ba8da01794a6726
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sun Jun 11 10:35:15 2006 +0900

    [JFFS2][XATTR] using 'delete marker' for xdatum/xref deletion
    
    - When xdatum is removed, a new xdatum with 'delete marker' is
      written. (version==0xffffffff means 'delete marker')
    - When xref is removed, a new xref with 'delete marker' is written.
      (odd-numbered xseqno means 'delete marker')
    
    - delete_xattr_(datum/xref)_delay() are new deletion functions
      are added. We can only use them if we can detect the target
      obsolete xdatum/xref as a orphan or errir one.
      (e.g when inode deletion, or detecting crc error)
    
    [1/3] jffs2-xattr-v6-01-delete_marker.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6d4f8224d4ee065e0e3186cc554468d735e6015d
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Tue Jun 27 14:38:15 2006 +0100

    [MTD] Fix off-by-one error in physmap.c
    
    This patch fixes a simple off-by-one error in the mtd physmap driver.
    
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ce5b0968b1caa6b93e366e88a3c5fa2fd59029ce
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 27 14:36:20 2006 +0100

    [MTD] Remove unused 'nr_banks' variable from ixp2000 map driver
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2c06a0821711a53d51a3d0492a9be0671b7152e5
Author: Ben Dooks <ben-mtd@fluff.org>
Date:   Tue Jun 27 14:35:46 2006 +0100

    [MTD NAND] s3c2412 support in s3c2410.c
    
    Add support for both the S3C2412 and S3C2412 Samsung SoCs to
    the increasingly mis-named s3c2410.c driver.
    
    This currently only supports SLC ECCs, and a chip on nFCE0.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 750d1151a6c95ef9b9a188bb7cff6b80ee30da17
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Jun 27 06:28:30 2006 +0000

    [CIFS] Fix allocation of buffers for new session setup routine to allow
    longer user and domain names and allow passing sec options on mount
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 97dfd70c8958a634157e0b35711cca01ff6f959b
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 27 16:13:46 2006 +1000

    [XFS] Remove a race condition where a linked inode could BUG_ON in
    d_instantiate, due to fast transaction committal removing the last
    remaining reference before we were all done.
    
    SGI-PV: 953287
    SGI-Modid: xfs-linux-melb:xfs-kern:26347a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 05a3332885dd143496694bcecff223339880d7c9
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 27 16:13:29 2006 +1000

    [XFS] Remove redundant directory checks from inode link operation.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26343a
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ebe1090549a7821faac09c467fc80b2245d0d30e
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 27 16:13:02 2006 +1000

    [XFS] Remove a couple of no-longer-used macros.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26339a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1998764e5a1700ffad2cab29b7b2a175364e5b70
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 27 16:12:40 2006 +1000

    [XFS] Reduce size of xfs_trans_t structure. * remove ->t_forw, ->t_back --
    unused * ->t_ag_freeblks_delta, ->t_ag_flist_delta, ->t_ag_btree_delta
    are debugging aid -- wrap them in everyone's favourite way.    As a
    result, cut "xfs_trans" slab object size from 592 to 572 bytes here.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26319a
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b3bbed1d08e925a12ebbe6326d17554902b3d9ab
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 27 16:12:15 2006 +1000

    [XFS] remove unused behaviour lock - shrink XFS vnode as a side effect.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26299a
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 9000195bb7ea959939b1e5fdad336e5bac59c9e9
Author: Frank de Lange <frank@unternet.org>
Date:   Tue Jun 27 01:48:24 2006 -0400

    Input: wistron - add mapping for Wistron MS 2111
    
    Wistron MS 2111 (aka Medion 'Titanium' MD 9783, aka ALDI PC,
    aka Fujitsu-Siemens AMILO D7800, aka ...) has 5 extra buttons,
    map them. Unfortunately we only have DMI data for the Medion
    box.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a6a888b3c20cf559c8a2e6e4d86c570dda2ef0f5
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Sat Jun 24 19:36:00 2006 -0400

    KEVENT: add new uevent for dock
    
    so that userspace can be notified of dock and undock events.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5e7d8818114f08ad9078d2c1a8a88d78d49de8dc
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Jun 24 19:36:00 2006 -0400

    ACPI: asus_acpi_init: propagate correct return value
    
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e8406b4485730031d91872086456bd052948686b
Author: Thomas Renninger <trenn@suse.de>
Date:   Fri Jun 2 15:58:00 2006 -0400

    [ACPI] Print error message if remove/install notify handler fails
    
    Signed-off-by: Thomas Renninger <trenn@suse.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d550d98d3317378d93a4869db204725d270ec812
Author: Patrick Mochel <mochel@linux.intel.com>
Date:   Tue Jun 27 00:41:40 2006 -0400

    ACPI: delete tracing macros from drivers/acpi/*.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 71306f3b880539fb4c579fbd16da552ebb10f29b
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 27 14:10:29 2006 +1000

    [XFS] * There is trivial "inode => vnode => inode" conversion, but only
    flags and   mode of final inode are looked at. Pass original inode
    instead. * Two occurences of bhv_vnode_t go out.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26298a
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d7fa2589bbe7ab53fd5eb20e8c7e388d5aff6f16
Merge: 6468463... 46f18e3...
Author: Thomas Renninger <trenn@suse.de>
Date:   Tue Jun 27 00:06:37 2006 -0400

    Pull bugzilla-5737 into release branch

commit 6468463abd7051fcc29f3ee7c931f9bbbb26f5a4
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jun 26 23:41:38 2006 -0400

    ACPI: un-export ACPI_ERROR() -- use printk(KERN_ERR...)
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cece92969762b8ed7930d4e23008b76b06411dee
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jun 26 23:04:31 2006 -0400

    ACPI: un-export ACPI_WARNING() -- use printk(KERN_WARNING...)
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 64dedfb8fdbbc4fabb8c131e4b597cd4bc7f3881
Author: Jae-hyeon Park <hpark@tuhep.phys.tohoku.ac.jp>
Date:   Mon Jun 26 22:34:03 2006 -0400

    ACPI: Device [kobj-name] is not power manageable
    
    print kobj name in this message.
    lenb changed to use printk.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9e7e2c047503db5a094ab30c7b4b8a5a0a324915
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: acpi_os_wait_semaphore(): silence complaint
    
    The ASL Acquire operator (17.5.1 in ACPI 3.0 spec) is allowed to time out
    and return True without acquiring the semaphore.  There's no indication in
    the spec that this is an actual error, so this message should be
    debug-only, as the message for successful acquisition is.
    
    This used to be an ACPI_DEBUG_PRINT, but it was mis-classified as
    ACPI_DB_ERROR rather than ACPI_DB_MUTEX, so it got swept up in Thomas'
    recent patch to enable ACPI error messages even without CONFIG_ACPI_DEBUG.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit be63c925a123b492fc05063c98ca7e9f7453a58a
Author: Thomas Renninger <trenn@suse.de>
Date:   Fri Jun 2 15:58:00 2006 -0400

    ACPI: Export symbols for ACPI_ERROR/EXCEPTION/WARNING macros
    
    Signed-off-by: Thomas Renninger <trenn@suse.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a6fc67202e0224e6c9d1d285cc0b444bce887ed5
Author: Thomas Renninger <trenn@suse.de>
Date:   Mon Jun 26 23:58:43 2006 -0400

    ACPI: Enable ACPI error messages w/o CONFIG_ACPI_DEBUG
    
    Signed-off-by: Thomas Renninger <trenn@suse.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1f1bd5fc326a46d8c49132260f661b7cc954846f
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jun 26 23:47:50 2006 -0400

    [netdrvr] Remove long-unused bits from Becker template drivers
    
    Symbols such as PCI_USES_IO, PCI_ADDR0, etc. originated from Donald
    Becker's net driver template, but have been long unused.  Remove.
    
    In a few drivers, this allows the further eliminate of the pci_flags (or
    just plain flags) member in the template driver probe structure.
    
    Most of this logic is simply open-coded in most drivers, since it never
    changes.
    
    Made a few other cleanups while I was in there, too:
    * constify, __devinitdata several PCI ID tables
    * replace table terminating entries such as "{0,}," and "{NULL},"
      with a more-clean "{ }".
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c78059f0a948404fb515db6be4bca5ec93eecd2a
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Jun 27 00:03:43 2006 -0300

    V4L/DVB (4263): Fix warning when compiling on 64 bit machines
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ce4260c39d7e6d97aad525e5ce726b755ee0dcb2
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon Jun 26 22:26:08 2006 -0300

    V4L/DVB (4261): Included required header for in-kernel compilation
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b9553d7b0cd51b89dc078ffc42cad51a2c4258bc
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 22:40:20 2006 -0300

    V4L/DVB (4260): Stradis.c: make 2 functions static
    
    This patch makes two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 99eb44fe941b35b28914881774515005fa2ab7f6
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jun 26 18:24:05 2006 -0300

    V4L/DVB (4259): Pass an explicit log prefix to cx2341x_log_status
    
    A card number is not unique enough. Instead, let the caller specify the
    prefix of the status messages.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4d6b5aee9d19d1a982d9db0b5ffea20ee94816c6
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jun 26 09:31:18 2006 -0300

    V4L/DVB (4257): Fix 64-bit compile warnings.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f5b0142ad683a96d7c8d64cbdb95f255da8fd151
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 25 15:37:29 2006 -0300

    V4L/DVB (4255): Tda9887 default TOP value is 0x10
    
    For most tuners the default TOP value is 0x10, regardless of TV norm.
    So revert earlier change that sets the TOP value to 0x14 for PAL/SECAM.
    This is incorrect.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1b58841aa7011670d8a32f53554e21b3fae9c047
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 25 15:33:12 2006 -0300

    V4L/DVB (4254): Remove obsoleted tuner_debug option.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 995235118ee7eaab7d9e9a1a661b12ef44e2a224
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 25 11:18:54 2006 -0300

    V4L/DVB (4253): IVTV VBI format description too long.
    
    Format description was cut off. It's been shortened.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 343f92c293af979ddf6070b167306e96c776187b
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 25 11:02:02 2006 -0300

    V4L/DVB (4252): Remove duplicate 'tda9887' in info messages.
    
    Remove the duplicate '(tda9887)' in these messages:
    tda9887 8-0043 (tda9887): tda988[5/6/7] found @ 0x43 (tuner)
    The same string is already printed as the prefix in this line.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0885ba1d5ebd5a526993e7329ca4fb6c866f3315
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 21:30:47 2006 -0300

    V4L/DVB (4245): Reduce the amount of pvrusb2-sourced noise going into the system log
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b30d244176846de3480ae17097a5f7831ec6aaf6
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:05:01 2006 -0300

    V4L/DVB (4244): Implement use of cx2341x module in pvrusb2 driver
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1d9f8461f1a870571f9403a312c26deec3305be5
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:58 2006 -0300

    V4L/DVB (4243): Exploit new V4L control features in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b46cfa805ed12c11fea0adc8e4058000c2e67314
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:53 2006 -0300

    V4L/DVB (4242): Don't suspend encoder when changing its attributes (in pvrusb2)
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit eb8e0ee4f51a89d569c01d5b09a8cbc935c72a4c
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:47 2006 -0300

    V4L/DVB (4241): Fix faulty encoder error recovery in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a761f4311b3e31008c7d168c3a8c254a9c7e35ac
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:44 2006 -0300

    V4L/DVB (4240): Various V4L control enhancements in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 332139635a8c0431cc2eb67adf1e983eb96728e3
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:40 2006 -0300

    V4L/DVB (4239): Handle boolean controls in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 077203a7d464f6ea7c94b4f3ea4b5bd246285fcd
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:37 2006 -0300

    V4L/DVB (4238): Make sure flags field is initialized when quering a control in pvrusb2
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4f1a3e5bc4e541477729c2ab888c761342329920
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:31 2006 -0300

    V4L/DVB (4237): Move LOG_STATUS bracketing to a different part of the pvrusb2 driver
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c05c0462da0e3aac70ec5316ea500f9a7499cca7
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:25 2006 -0300

    V4L/DVB (4236): Rearrange things in pvrusb2 driver in preparation for using cx2341x module
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3948199e8aff71b1ebe3c1ff2749f42add17a41e
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:20 2006 -0300

    V4L/DVB (4235): Increase the maximum number of controls that pvrusb2-sysfs.c can handle.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 039c430f896640f77bc073f9e8ac71018721aab0
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:16 2006 -0300

    V4L/DVB (4234): Clean up long-standing video format handling mess in pvrusb2-v4l2.c
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4588677121d894ec989e938129da4ae02d332b6c
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:13 2006 -0300

    V4L/DVB (4233): Don't print empty enum values in pvrusb2-sysfs.c
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit eacbe7c51f0fe770252e03ef2433a1ed4c990a17
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:04:06 2006 -0300

    V4L/DVB (4232): Rearrange things in pvrusb2-encoder in preparation for use of cx2341x module
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b2bbaa93940627aec1d92191cf28a36e6048de6e
Author: Mike Isely <isely@pobox.com>
Date:   Sun Jun 25 20:03:59 2006 -0300

    V4L/DVB (4231): Include some extra headers that we need.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4656fb63716af240452adf7b1aab3a9573452fd9
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jun 25 18:35:24 2006 -0300

    V4L/DVB (4229): Cx88-blackbird: implement VIDIOC_LOG_STATUS
    
    implemented VIDIOC_LOG_STATUS in the cx88-blackbird driver
    to show the status of i2c clients and the cx23416 mpeg encoder.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d855497edbfbf9e19a17f4a1154bca69cb4bd9ba
Author: Mike Isely <isely@isely.net>
Date:   Mon Jun 26 20:58:46 2006 -0300

    V4L/DVB (4228a): pvrusb2 to kernel 2.6.18
    
    Implement V4L2 driver for the Hauppauge PVR USB2 TV tuner.
    
    The Hauppauge PVR USB2 is a USB connected TV tuner with an embedded
    cx23416 hardware MPEG2 encoder.  There are two major variants of this
    device; this driver handles both.  Any V4L2 application which
    understands MPEG2 video stream data should be able to work with this
    device.
    
    Signed-off-by: Mike Isely <isely@pobox.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a2b524b2ec6caa0499aea56a58fdb67a6d10db90
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jun 26 22:48:38 2006 -0400

    [netdrvr] natsemi: minor cleanups
    
    * make eeprom size a variable, prepping for future patch
    * eliminate unused PCI_xxx stuff left over from Becker driver template
    * convert a few #defines to enum
    * mark PCI table const, __devinitdata
    * don't bother with named constant for PCI device id
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b71d300c8bc0f3617eef4a9c96aebbadeb259177
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 27 12:45:17 2006 +1000

    [XFS] link(2) on directory is banned in VFS.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26293a
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 5a40f09baa3d74e9e6f1bd86a9998a10fbba012a
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jun 26 22:24:03 2006 -0400

    [netdrvr] natsemi: Separate out media initialization code
    
    This makes it easier to merge an upcoming patch, and overall makes the
    code a bit more clean.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 467c432a4d63349025d92f5dbdd0b9ba8ff40fd5
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Mon Jun 26 21:36:52 2006 +0200

    [PATCH] WAN: update info page for a bunch of my drivers
    
    Updates generic HDLC info page address, I should have done it
    long time ago.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e2fdbc039aeac4ce614ee29f4b14bcef5ba000dd
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 12:31:46 2006 +0200

    [PATCH] drivers/net/hamradio/dmascc.c: fix section mismatch
    
    dev_setup() is using the __initdata variables ax25_broadcast and
    ax25_test.
    
    Since the only caller of dev_setup() (setup_adapter()) is already
    __init, the solution is to make dev_setup() __init, too.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 600991b003039bd86d89aed0a88de89987ccbcd1
Author: Uwe Zeisberger <Uwe_Zeisberger@digi.com>
Date:   Sun Jun 25 01:44:37 2006 -0700

    [PATCH] Fix phy id for LXT971A/LXT972A
    
    From: Uwe Zeisberger <Uwe_Zeisberger@digi.com>
    
    The phy ids used are taken from an driver that used a right shift of 4 to chop
    off the revision number.  This driver does not shift, so the id and mask
    values are wrong and must be left shifted by 4 to actually detect the chips.
    
    Signed-off-by: Uwe Zeisberger <Uwe_Zeisberger@digi.com>
    Acked-by: Andy Fleming <afleming@freescale.com>
    
    [akpm: this is a previously-nacked patch, but the problem is real]
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5d22a312b7afddaed3cbb2fffb3cceb0c22a6cf5
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jun 14 00:09:17 2006 +0100

    [PATCH] DM9000 - minor code cleanups
    
    Ensure the driver's module owner field is
    initialised for when this is being built and
    loaded as a module.
    
    Also change make the dm9000_tx_done function
    static, as it is not exported elsewhere.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 19af5a8b2b3fcf2a65e3077deafe95706a1d4282
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jun 14 00:05:50 2006 +0100

    [PATCH] DM9000 - do no re-init spin lock
    
    The DM9000 initialisation sequence for the
    hardware re-initialise the board spin-lock,
    which is in my view wrong.
    
    This patch removes the extra spin lock
    initialisation
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5b55dda6f40c46e93006b3c88f75550e0d3b3032
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 13 23:50:15 2006 +0100

    [PATCH] DM9000 - check for MAC left in by bootloader
    
    The DM9000 driver does not deal with the case
    where there is no serial EEPROM to store the
    configuration, and the bootloader has placed
    an MAC address into the device already.
    
    If there is no valid MAC in the EEPROM, read
    the one already in the chip and check to see
    if that one is valid.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b4ed03ff12e4bf228aaf15b2a364134348ebe8a9
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 13 23:47:19 2006 +0100

    [PATCH] DM9000 - better checks for platform resources
    
    The current DM9000 driver cannot cope if it
    is given more than 3 resources (for example, if
    it is being passed an wake-up irq that it is
    not using yet).
    
    Check that we have been given at-least one IRQ
    resource.
    
    Also fix the minor type-casting for the case
    of 2 resources.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2154cfa6ba560401d25f6cc083fe3fb996cbb571
Author: Auke Kok <sofar@foo-projects.org>
Date:   Mon Jun 26 07:51:28 2006 -0700

    [PATCH] ata_piix: add ICH6/7/8 to Kconfig
    
    Ata_piix's Kconfig entry still refers only to ICH5, while it supports ICH6
    through 8. This creates confusion with people who are looking to see
    if their newer SATA enabled motherboards are supported. The
    following patch makes this clear.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 201ce85946504ea0e6bd9a365de26684b437121e
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 26 21:23:52 2006 +0900

    [PATCH] sata_sil: disable hotplug interrupts on two ATI IXPs
    
    Some SATA controllers embedded in ATI IXPs seem to have broken
    SATA_IRQ bit in their bmdma2 registers which is always stuck at 1.
    This makes the driver believe that there has been a hotplug event and
    freeze the port whenever there's an interrupt thus failing all
    commands.
    
    This patch disables SATA_IRQ for those controllers.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 88574551b46ba69b0f145d2775006f2e7dfebc84
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Jun 25 20:00:35 2006 +0900

    [PATCH] libata: cosmetic updates
    
    Cosmetic updates in libata-core.c.
    
    * trim trailing whitespaces
    * break lines which are over 80 column
    * kill unnecessary braces
    * make indentation consistent
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 353dcf7c89519a2cb9b7699f3bcf70bb685f22e1
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Sun Jun 25 01:36:55 2006 -0700

    [PATCH] ata: add some NVIDIA chipset IDs
    
    From: Randy Dunlap <randy.dunlap@oracle.com>
    
    Add some nVidia chipset ID's support.
    
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=b407680553280f9999a20706d5ab2a3be65312c1;hp=ce4cb48010ab2cca537432b5ccb47d4b1fb489e5
    
    Snagged from lkml.
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a8601e5f6b77aa4f223058a93bc5f77e1ee45638
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 01:36:52 2006 -0700

    [PATCH] libata reduce timeouts
    
    From: Andrew Morton <akpm@osdl.org>
    
    Provide a module parameter to override the default 30-second-per-device SATA
    probing timeout.
    
    Cc: Tejun Heo <htejun@gmail.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5806db22cffc7557b675d3c9229f327980aee797
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:19 2006 +0900

    [PATCH] libata: implement ata_port_max_devices()
    
    Implement ata_port_max_devices().  This function returns the number of
    possible devices on a port.  This will be used by new PM
    implementation.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 77b08fb56a41e84b5e78b14f24d79879235e3337
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:19 2006 +0900

    [PATCH] libata: make two functions global
    
    Make ata_do_simple_cmd() and ata_flush_cache() global.  These will be
    used from libata-eh.c.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 977e6b9f3a9b17f1c608a9d1e5a7b5c46a5f7d4a
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:19 2006 +0900

    [PATCH] libata: update ata_do_simple_cmd()
    
    * the function has always returned AC_ERR_* masks not -errno but its
      return type was int.  Make return type unsigned int.
    
    * don't print error message automatically.  it's the caller's
      responsibility.
    
    * add header comment
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e58eb583969ff662c8c337e9b3b50ab5ef37e27e
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:19 2006 +0900

    [PATCH] libata: move ata_do_simple_cmd() below ata_exec_internal()
    
    Move ata_do_simple_cmd() below ata_exec_internal() for consistency.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit beb07c1a56e2cff3842e22c473bd1aaaea08e532
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:19 2006 +0900

    [PATCH] libata: clear EH action on device detach
    
    Clear related EH action on device detach such that new device doesn't
    receive EH actions scheduled for the old one.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 64f65ca6e7a5a42df22ff29dadfff389dc388f65
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:18 2006 +0900

    [PATCH] libata: implement and use ata_deh_dev_action()
    
    Implement and use ata_eh_dev_action() which returns EH action mask for
    a device.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit af181c2d765ec9735356bc313ab9e844ec2c7a24
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 24 20:30:18 2006 +0900

    [PATCH] libata: move ata_eh_clear_action() upward
    
    Move ata_eh_clear_action() upward.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 41542dbe12e34165e586de1e3fe0a245707aa39e
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 04:18:31 2006 -0700

    [PATCH] libata.h needs scatterlist.h
    
    From: Andrew Morton <akpm@osdl.org>
    
    s390:
    
    In file included from drivers/scsi/libata-bmdma.c:39:                           include/linux/libata.h:391: error: field 'sgent' has incomplete type
    include/linux/libata.h:392: error: field 'pad_sgent' has incomplete type
    include/linux/libata.h: In function 'ata_sg_is_last':                           include/linux/libata.h:849: error: arithmetic on pointer to an incomplete type
    include/linux/libata.h:849: error: arithmetic on pointer to an incomplete type
    include/linux/libata.h: In function 'ata_qc_next_sg':
    include/linux/libata.h:869: error: increment of pointer to unknown structure
    include/linux/libata.h:869: error: arithmetic on pointer to an incomplete type
    include/linux/libata.h:869: error: arithmetic on pointer to an incomplete type
    include/linux/libata.h:869: error: arithmetic on pointer to an incomplete type
    
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 438bc9c3dec27ab37f0ff78471d0b8b91addd2dd
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jun 26 20:52:17 2006 -0400

    [libata] sata_vsc: partially revert a PCI ID-related commit
    
    Partially revert 74d0a988d3aa359b6b8a8536c8cb92cce02ca5d5:
    
    	[PATCH] PCI: Move various PCI IDs to header file
    
    libata policy is to avoid use of named PCI device ID constants.
    These are often single-use constants, which have little value over
    direct numeric constants save for constant include/linux/pci_ids.h
    patching/merging headaches.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8676ce07d38a09e0f41497d178357a314c4620cf
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jun 26 20:41:33 2006 -0400

    [libata] Bump versions
    
    Update major version for libata, and several drivers.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d38b69689c349f35502b92e20dafb30c62d49d63
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 16:59:26 2006 -0700

    Revert "kbuild: fix make -rR breakage"
    
    This reverts commit e5c44fd88c146755da6941d047de4d97651404a9.
    
    Thanks to Daniel Ritz and Michal Piotrowski for noticing the problem.
    
    Daniel says:
    
      "[The] reason is a recent change that made modules always shows as
       module.mod.  it breaks modprobe and probably many scripts..besides
       lsmod looking horrible
    
       stuff like this in modprobe.conf:
            install pcmcia_core /sbin/modprobe --ignore-install pcmcia_core; /sbin/modprobe pcmcia
       makes modprobe fork/exec endlessly calling itself...until oom
       interrupts it"
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3cbc96050b02d8e5764bd0970067ef294737e324
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:25 2006 -0700

    ARM: OMAP: Multiplexing for 24xx GPMC wait pin monitoring
    
    Multiplexing for 24xx GPMC wait pin monitoring
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ce2deca27acc761ab90a0e79bd31d6816df38960
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:24 2006 -0700

    ARM: OMAP: Fix SRAM to use MT_MEMORY instead of MT_DEVICE
    
    MT_MEMORY is needed in order to execute code in SRAM. Also
    need to use section mapping.
    
    Based on a patch by Richard Woodruff.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 83379c81f6f05a6e80db66ae33378feb4cbca6b3
Author: Timo Teras <timo.teras@solidboot.com>
Date:   Mon Jun 26 16:16:23 2006 -0700

    ARM: OMAP: Update dmtimers
    
    - Initialize timer outside of spinlock to reduce the time the spinlock is held
    - Do clk_get to the source clocks during initialization to avoid sleeping later
    - New function to set counter register
    
    Signed-off-by: Timo Teras <timo.teras@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 7df3450e5c22ba3969e4253dce0d7807dd210bf0
Author: Juha Yrjola <juha.yrjola@solidboot.com>
Date:   Mon Jun 26 16:16:22 2006 -0700

    ARM: OMAP: Make clock variables static
    
    Since the mutex protecting the clock list is static, the list
    itself should be too.
    
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 2aab6468b7f88df60828f8e07cfdf8c87338ed8d
Author: Juha Yrjola <juha.yrjola@solidboot.com>
Date:   Mon Jun 26 16:16:21 2006 -0700

    ARM: OMAP: Fix GPMC compilation when DEBUG is defined
    
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 5ac4215349163baa66c9a26a94e220dcb6c44050
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:20 2006 -0700

    ARM: OMAP: Mux updates for external DMA and GPIO
    
    Mux updates for external DMA and GPIO. GPIO updates
    by Igor Stoppa.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit c6e5980e565d6c2457e28ecd41ed31c28d33bc8a
Author: Samuel Ortiz <samuel.ortiz@solidboot.com>
Date:   Mon Jun 26 16:16:19 2006 -0700

    ARM: OMAP: Add OMAP_TAG_CAMERA_SENSOR
    
    Add platform config data for camera sensors.  Since it includes pointers,
    it should not be passed from the bootloader.
    
    Signed-off-by: Samuel Ortiz <samuel.ortiz@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 22a16f39e36e62f7bd221e5b279ea02fb3c43425
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:18 2006 -0700

    ARM: OMAP: Add initial 24xx suspend support
    
    This patch adds support for omap24xx power domains and
    allows suspend to work.
    
    Please note that for some reason core power domain still
    does not seem to idle.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit a7ca9d2b0199f79480800e18f643328bb43f521d
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:17 2006 -0700

    ARM: OMAP: Update cpufreq support for 24xx
    
    Update cpufreq support for 24xx
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 4bbbc1adc2095c6504a556819dd8842135df300b
Author: Juha Yrjola <juha.yrjola@solidboot.com>
Date:   Mon Jun 26 16:16:16 2006 -0700

    ARM: OMAP: Add GPMC support for OMAP2
    
    Implement basic support for General-Purpose Memory Controller
    as found on OMAP2420.
    
    Dynamic CS address space allocation still needs to be done.
    
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 7ff879dbcd2083c95933a56bce65ae45ecab3f35
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:15 2006 -0700

    ARM: OMAP: Fix DMA channel irq handling for omap24xx
    
    - DMA CSR register is cleared by reading on omap1, but on
      omap2 it is cleard by writing to it.
    
    - DMA TOUT interrupt does not exist on omap24xx, rename it
    
    - Add SECURE and MISALIGNED errors by default for omap24xx
    
    - Add defines for external DMA request lines
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 6dc3c8f20159530d5553d0f8decc9454916d7495
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Mon Jun 26 16:16:14 2006 -0700

    ARM: OMAP: OMAP2 DMA burst support
    
    OMAP2 DMA burst setting support
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit e32f7ec2e8bf00756c74a5e6a80bc59e949dd81d
Author: Timo Teras <timo.teras@solidboot.com>
Date:   Mon Jun 26 16:16:13 2006 -0700

    ARM: OMAP: Fix 32 kHz timer and modify GP timer to use GPT1
    
    The dmtimer framework update broke 32 kHz timer as udelay() does not work
    before system timer is started (and GPT1 should not be reset).
    This also makes the GP timer use GPT1. This requires a fix in clock framework.
    
    Signed-off-by: Timo Teras <timo.teras@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 77900a2fc3bfb1eb6eaa6d43eef4591e1f7c600d
Author: Timo Teras <timo.teras@solidboot.com>
Date:   Mon Jun 26 16:16:12 2006 -0700

    ARM: OMAP: Port dmtimers to OMAP2 and implement PWM support
    
    Port dmtimer framework to OMAP2.
    Modify the dmtimers API to support setting of PWM configuration and prescaler.
    Convert 32 kHz timer and GP timer to use the dmtimer framework.
    
    Signed-off-by: Timo Teras <timo.teras@solidboot.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 6e711ec6d249c0d3f8bc225066738d064ed90032
Author: Jarkko Nikula <jarkko.nikula@nokia.com>
Date:   Mon Jun 26 16:16:11 2006 -0700

    ARM: OMAP: Correct two bugs in arch/arm/mach-omap2/clock.c
    
    omap2_clk_set_rate: dif_off must use clk->rate_offset, not clk->src_off.
    omap2_get_src_field: for the case CM_SYSCLKOUT_SEL1, val must be 2 for
    96MHz and 3 for 54MHz.
    
    Signed-off-by: Jarkko Nikula <jarkko.nikula@nokia.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ed7eb9d90a24bbe93fa47e19b61528bd5cfe584c
Author: Juha Yrjola <juha.yrjola@solidboot.com>
Date:   Mon Jun 26 16:16:10 2006 -0700

    ARM: OMAP: Register the 24xx McSPI device
    
    Register the 24xx McSPI device as an OMAP2 platform device.  The driver
    module and Kconfig option were merged already some time ago.
    
    Signed-off-by: Juha Yrjola <juha.yrjola@solidboot.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit c15e5d10b160ca0fe71f5865c771bf4ad0e7ed85
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Mon Jun 26 16:16:09 2006 -0700

    ARM: OMAP: Add bitbank SPI driver for Innovator 1510 touchscreen
    
    Add bitbang SPI driver for Innovator 1510 touchscreen, using the new
    framework.  Compile-tested only.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 284185c73d3156f4438d5599ae69793b44d825ab
Author: lamikr <lamikr@cc.jyu.fi>
Date:   Mon Jun 26 16:16:08 2006 -0700

    ARM: OMAP: Aic23 alsa platform driver code for board-innovator
    
    Add platform driver init-code required by the aic23-alsa driver to
    omap-innovator.
    
    Signed-off-by: Mika Laitio <lamikr@cc.jyu.fi>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 99c477074de4a91a388aff863646dc3e2eb783e2
Author: Imre Deak <imre.deak@nokia.com>
Date:   Mon Jun 26 16:16:07 2006 -0700

    ARM: OMAP: Fix GPIO IRQ mask handling
    
    The GPIO IRQ mask was retrieved incorrectly in cases where we have a mask
    register instead of an enable register. Also we should only return the
    valid bits depending on the bank size.
    
    This fixes a bug on 1510/1610 based OMAPs where GPIO IRQs are not
    delivered.
    
    Signed-off-by: Imre Deak <imre.deak@nokia.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit eca9e56eb8dfcf2b8b966c1c49e4622196f0586d
Author: Peter Ujfalusi <peter.ujfalusi@nokia.com>
Date:   Mon Jun 26 16:16:06 2006 -0700

    ARM: OMAP: DMA transfer parameter configuration fix
    
    Fix for re-using OMAP DMA channel with different transfer parameters.
    Bits in the CCR register need to be cleaned as well in some cases.
    
    Signed-off-by: Peter Ujfalusi <peter.ujfalusi@nokia.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit e8cdf7bdf3efbb1e285fd82a86a3f8fae5ae2665
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Mon Jun 26 16:16:04 2006 -0700

    ARM: OMAP: Mistral ads7846 pendown state
    
    Syncing the ads7846 code with mainstream means that the Mistral support
    needs to include a callback to read the pendown state.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 495f71db30e279a5a696fa6622fc75451caa8366
Author: Brian Swetland <swetland@google.com>
Date:   Mon Jun 26 16:16:03 2006 -0700

    ARM: OMAP: Add core fsample support
    
    This patch adds core support for the TI F-Sample Board (OMAP 850).
    
    Signed-off-by: Brian Swetland <swetland@google.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ffb7a80f932550590ef54791b60db7e6ffce63f3
Author: Tony Lindgren <tony@atomide.com>
Date:   Mon Jun 26 16:16:02 2006 -0700

    ARM: OMAP: Fix gpt2_ick clock bit
    
    CM_ICLKEN1_CORE bit should be 4, not 0 as noted by
    Richard Woodruff.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 0711615290510bfba11c3f4eabcde6ac92c0766e
Author: Jonathan McDowell <noodles@earth.li>
Date:   Mon Jun 26 16:16:01 2006 -0700

    ARM: OMAP: Readd Amstrad Delta USB support
    
    One of the recent merges from mainline removed the Amstrad Delta USB
    support. This patch adds it back in; it's the same as was in
    2.6.16-omap2.
    
    Signed-off-by: Jonathan McDowell <noodles@earth.li>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit ea6dedd7fbd0f760ebf37eb0bcc8c64856475a13
Author: Imre Deak <imre.deak@nokia.com>
Date:   Mon Jun 26 16:16:00 2006 -0700

    ARM: OMAP: GPIO IRQ lazy IRQ disable fix
    
    - The current OMAP GPIO IRQ framework doesn't use the do_edge_IRQ,
      do_level_IRQ handlers, but instead calls do_simple_IRQ. This
      doesn't handle disabled interrupts properly, so drivers will
      still get interrupts after calling disable_irq. The patch solves
      this by respecting the irq_desc.disable_depth and irq_desc.running
      counters.  When one of these is non-zero the handler is not called,
      the interrupt is masked and marked as pending. The pending interrupt
      will be serviced when the running handler returns. This is according
      to the same semantics as the standard do_edge_IRQ and do_level_IRQ
      handlers have, so one day we should use them instead of do_simple_IRQ.
    
    - Process only interrupts that are not masked. The ISR may contain
      pending interrupts that are masked these shouldn't be processed.
    
    - Move the bank IRQ unmasking out of the IRQ dispatch loop. If there
      are further iterations we shouldn't unmask it if there are level
      triggered interrupts pending.
    
    Signed-off-by: Imre Deak <imre.deak@nokia.com>
    Signed-off-by: Juha Yrjola <juha.yrjola@nokia.com>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit 7876284178b386ab6e97f96733ccbc19eda743a3
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Mon Jun 26 16:15:59 2006 -0700

    ARM: OMAP: Mistral board updates (spi, ...)
    
    This adds the OSK/Mistral specific glue for the omap_uwire driver and
    its ADS 7846 touchscreen.  It also moves the lcd and keypad setup so
    it's grouped with the other Mistral-specific setup code, and provides
    comments about which switch maps to which reported key.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Tony Lindgren <tony@atomide.com>

commit eb99adde31b7d85c67a5e1c2fa5e098e1056dd79
Merge: f6e6e88... 3fb5a98...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 16:06:08 2006 -0700

    Merge branch 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2
    
    * 'upstream-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/mfasheh/ocfs2: (56 commits)
      [PATCH] fs/ocfs2/dlm/: cleanups
      ocfs2: fix compiler warnings in dlm_convert_lock_handler()
      ocfs2: dlm_print_one_mle() needs to be defined
      ocfs2: remove whitespace in dlmunlock.c
      ocfs2: move dlm work to a private work queue
      ocfs2: fix incorrect error returns
      ocfs2: tune down some noisy messages during dlm recovery
      ocfs2: display message before waiting for recovery to complete
      ocfs2: mlog in dlm_convert_lock_handler() should be ML_ERROR
      ocfs2: retry operations when a lock is marked in recovery
      ocfs2: use cond_resched() in dlm_thread()
      ocfs2: use GFP_NOFS in some dlm operations
      ocfs2: wait for recovery when starting lock mastery
      ocfs2: continue recovery when a dead node is encountered
      ocfs2: remove unneccesary spin_unlock() in dlm_remaster_locks()
      ocfs2: dlm_remaster_locks() should never exit without completing
      ocfs2: special case recovery lock in dlmlock_remote()
      ocfs2: pending mastery asserts and migrations should block each other
      ocfs2: temporarily disable automatic lock migration
      ocfs2: do not unconditionally purge the lockres in dlmlock_remote()
      ...

commit f6e6e883730aff2718610d3eba7608fcf73328ed
Merge: ba262e4... f964c30...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 15:01:05 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm:
      [ARM] 3657/1: S3C24XX: Documentation update of Overview.txt
      [ARM] Update mach-types
      [ARM] 3656/1: S3C2412: Add S3C2412 and S3C2413 documenation
      [ARM] 3654/1: add ajeco 1arm sbc support
      [ARM] fix drivers/mfd/ucb1x00-core.c IRQ probing bug
      [ARM] 3651/1: S3C24XX: Make arch list more detailed
      [ARM] 3650/1: S3C2412: Update s3c2410_defconfig
      [ARM] 3649/1: S3C24XX: Fix capitalisation of CPU on SMDK2440
      [ARM] 3612/1: make pci bus optional for ixp4xx platform
      [ARM] Remove MODE_(SVC|IRQ|FIQ|USR) and DEFAULT_FIQ
      [ARM] Remove save_lr/restore_pc macros
      [ARM] Remove partial non-v6 binutils compatibility
      [ARM] Remove LOADREGS macro
      [ARM] Remove RETINSTR macro

commit ba262e4a4d4c23b5e6c15dbb3a99696b562e8035
Merge: a09ab7e... b07076e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 15:00:33 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial
    
    * master.kernel.org:/home/rmk/linux-2.6-serial:
      [SERIAL] 8250_pnp: add support for other Wacom tablets

commit f964c303fe33b0d2ee563349bc8bea4d57d7a265
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 26 22:51:08 2006 +0100

    [ARM] 3657/1: S3C24XX: Documentation update of Overview.txt
    
    Patch from Ben Dooks
    
    Update the list of supported devices, and remove the
    changelog. Add SMDK2413 information.--
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 18555656de7268c7af77ea2b99a2fc984e7a23fb
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 26 22:50:21 2006 +0100

    [ARM] Update mach-types
    
    Usual mach-types update.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 12e9b5fb96028aab26af65bb06d2dee56c428a6e
Author: Salyzyn, Mark <mark_salyzyn@adaptec.com>
Date:   Mon Jun 26 08:37:39 2006 -0400

    [SCSI] aacraid: remove x86_64 IOMMU dependent code
    
    This may seem like a DILLIGAF, but after chatting with the F/W folks,
    there is no harm in dropping the page calculation as denoted in the
    enclosed patch for these older adapters in this new age of 4GB+ memory
    sticks. Any resource optimization within the old-old-old adapters for
    systems with less than 4G of memory is of little consequence. The
    existing AAC_QUIRK_31BIT flag in linit.c should look after the rest of
    the legacy hardware DMA limitations.
    
    Signed-off-by: Mark Salyzyn <aacraid@adaptec.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3fb5a9891dbb553dda96783dbc0dc4e77cbb2529
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue May 16 17:26:41 2006 +0200

    [PATCH] fs/ocfs2/dlm/: cleanups
    
    This patch #if 0's the no longer used dlm_dump_lock_resources().
    
    Since this makes dlmdebug.h empty, this patch also removes this header.
    
    Additionally, the needlessly global dlm_is_node_recovered() is made
    static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 43dee336c903fae15783b90983dfdedd2c7ffefc
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Mon May 1 14:56:57 2006 -0700

    ocfs2: fix compiler warnings in dlm_convert_lock_handler()
    
    We need to cast to unsigned long long.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 8a9343fa24d8d3fcb189bed2b7afcf4b8a8c1c8d
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Mon May 1 14:55:10 2006 -0700

    ocfs2: dlm_print_one_mle() needs to be defined
    
    Fixes compile breakage.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 0032abd674a606c3cf2d9961c8119f5d72c411d0
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:39:57 2006 -0700

    ocfs2: remove whitespace in dlmunlock.c
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 3156d267016627fe427a6b0d4ed8a9678557e91e
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:39:29 2006 -0700

    ocfs2: move dlm work to a private work queue
    
    The work that is done can block for long periods of time and so is not
    appropriate for keventd.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 495ac96e638cb0ad33baa7113531d742bfb328d4
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:34:08 2006 -0700

    ocfs2: fix incorrect error returns
    
    Use DLM_REJECTED instead of DLM_RECOVERING.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 3b3b84a892d37ba336391e411eb5f8b013b9a669
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:31:37 2006 -0700

    ocfs2: tune down some noisy messages during dlm recovery
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 56a7c104bc91b4a5f970d7372ebb04eebc633c68
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:30:39 2006 -0700

    ocfs2: display message before waiting for recovery to complete
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 44a7f1d063bbe45773353903f36d9d88fb73d82a
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:29:59 2006 -0700

    ocfs2: mlog in dlm_convert_lock_handler() should be ML_ERROR
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit b220532a71adf65d45c3aa8a284bfa7ec57957bd
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:29:28 2006 -0700

    ocfs2: retry operations when a lock is marked in recovery
    
    Before checking for a nonexistent lock, make sure the lockres is not marked
    RECOVERING. The caller will just retry and the state should be fixed up when
    recovery completes.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit f85cd47a5825b77a146bad6870b2ddcf08415c13
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:27:41 2006 -0700

    ocfs2: use cond_resched() in dlm_thread()
    
    yield() does not yield.  cond_resched() does.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit ad8100e0d20e0123def9f83c040b68c96c8638f0
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 14:25:21 2006 -0700

    ocfs2: use GFP_NOFS in some dlm operations
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit b7084ab538ac2bd71ce494cf1cbbea9fe9db2c07
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:54:07 2006 -0700

    ocfs2: wait for recovery when starting lock mastery
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c27069e6cfa242a3b84eb3442934c6fe51ee9066
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:51:49 2006 -0700

    ocfs2: continue recovery when a dead node is encountered
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 67a187412baa84dfff2d423961d86663b7fc7d3c
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:50:12 2006 -0700

    ocfs2: remove unneccesary spin_unlock() in dlm_remaster_locks()
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 6a41321121ee2af33b8ac55c87657603df480b25
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:49:20 2006 -0700

    ocfs2: dlm_remaster_locks() should never exit without completing
    
    We cannot restart recovery. Once we begin to recover a node, keep the state
    of the recovery intact and follow through, regardless of any other node
    deaths that may occur.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c8df412e1c746dd21094966d04b3a79aad0f4d08
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:47:50 2006 -0700

    ocfs2: special case recovery lock in dlmlock_remote()
    
    If the previous master of the recovery lock dies, let calc_usage take it
    down completely and let the caller completely redo the dlmlock() call.
    Otherwise, there will never be an opportunity to re-master the lockres and
    recovery wont be able to progress.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 36407488b1cbc4d84bc2bd14e03f3f9b768090d9
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:32:27 2006 -0700

    ocfs2: pending mastery asserts and migrations should block each other
    
    Use the existing structure for blocking migrations when ASTs are pending to
    achieve the same result. If we can catch the assert before it goes on the
    wire, just cancel it and let the migration continue.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c87a9ae7059f718bf1bb87a702fcbef535e32111
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:30:49 2006 -0700

    ocfs2: temporarily disable automatic lock migration
    
    Now we never change the owner of a lock resource until unmount or node
    death. This will be re-enabled once some issues in the algorithm used have
    been resolved.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 2abaf97e62e51fdd09d5a46703b3b680f24bdd8b
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 13:27:10 2006 -0700

    ocfs2: do not unconditionally purge the lockres in dlmlock_remote()
    
    In dlmlock_remote(), do not call purge_lockres until the lock resource
    actually changes. otherwise, the mastery info on the lockres will go away
    underneath the caller.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit aa087b84977173395c0e3a1e0c1773314958f277
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 12:02:07 2006 -0700

    ocfs2: increase backoff before waiting for recovery
    
    When mastering non-recovery lock resources, additional time was frequently
    needed to allow the disk heartbeat to catch up with the network timeout. the
    recovery lock resource is time critical and avoids this path.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit f42a100b2272bc5cb44fb2aa03526b436b1d6833
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:53:33 2006 -0700

    ocfs2: have dlm_pre_master_reco_lockres() ignore dead nodes
    
    Recovery will spin in dlm_pre_master_reco_lockres if we do not ignore
    timed-out network responses from dead nodes.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 6ff06a93916b3f95e83c346f7530cf2f5c68ae0c
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:51:45 2006 -0700

    ocfs2: give the dlm dirty list a reference on the lockres
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e7e69eb38946ebef86e27442d01514fcf9c854ee
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:49:52 2006 -0700

    ocfs2: teach dlm_restart_lock_mastery() to wait on recovery
    
    Change behavior of dlm_restart_lock_mastery() when a node goes down.  Dump
    all responses that have been collected and start over.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit e4eb03681a8313168d99c2f93175331a898a2c16
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:46:59 2006 -0700

    ocfs2: gracefully handle stale create_lock messages.
    
    This is an error on the sending side, so gracefully error out on the
    receiving end.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit ccd8b1f916bc5e4b2156f03ccd3546be7f65f6b3
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:32:14 2006 -0700

    ocfs2: update lvb immediately during recovery
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 588e00902b06528c476eed38019dba4a087def01
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:22:06 2006 -0700

    ocfs2: do not send master requests to localhost
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 8b2198097ae6a5b54ed92345989ec343070f916b
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:16:45 2006 -0700

    ocfs2: purge lockres' sooner
    
    Immediately purge a lockress that the local node is not the master of.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 343e26a4007d14c2154c1d13d1209797dce5c535
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:15:04 2006 -0700

    ocfs2: dump mismatching migrated lvbs before BUG()
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 466d1a4591c4e1bc3affd5c0cf3df5ad20338fb9
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 11:11:13 2006 -0700

    ocfs2: make dlm recovery finalization 2 stage
    
    Makes it easier for the recovery process to deal with node death.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 69d72b066cc5971318d9e29e34289b74cf8a9d22
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Mon May 1 10:57:51 2006 -0700

    ocfs2: dlm recovery / lockres reference count fix
    
    Take a reference on lockres structures while they are on the recovery list.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a9ee4c8a67b962db0208addf0e32935aa571af6b
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 19:26:15 2006 -0700

    ocfs2: better error handling during assert master message
    
    handle errors during lock assert master by either killing self or other node
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a7f90d83ea8dc8b0999ab7c1c0539af9a6ed69d2
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 19:24:21 2006 -0700

    ocfs2: dump lockres info before we BUG() on a bad reference
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c0a8520c7333dd62624683772f31864c7f9c46d9
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu Apr 27 19:07:45 2006 -0700

    ocfs2: do LVB puts in place
    
    Don't wait until the AST will be fired to do the LVB copy into the lock
    resource.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit aa85235427992b8d3040297d9174d69dd1d8a675
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 19:04:49 2006 -0700

    ocfs2: mle ref count debugging
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit dc2ed195dda848c8e4b24f3f0e1952fa74f74f6b
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 19:03:18 2006 -0700

    ocfs2: allow for an assert message during lock mastery
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 2d1a868c563f07c07c681836d273d69efb7c5ad8
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 19:01:35 2006 -0700

    ocfs2: take mle reference during migration
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 41b8c8a101ba77f59d9a4b3cac6c846cb8a34840
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 19:00:26 2006 -0700

    ocfs2: properly initialize the mle structure
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit da01ad05528bf6f6bcb286329b14225a71713325
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:53:04 2006 -0700

    ocfs2: detach mle from heartbeat events
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a2bf04774bf4aa0a75036c1e92e3d2fd1cce2aff
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:51:26 2006 -0700

    ocfs2: mle ref counting fixes
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 958837197e6415009cba0f31bbb5aacdb936ef09
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:47:41 2006 -0700

    ocfs2: better mle debugging
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit d6dea6e9732f5319b723e14f7adbc5f99cd69aec
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:08:51 2006 -0700

    ocfs2: clean up recovery related messages
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 29c0fa0f56f20b4512f65b0f3e55bc8af50485b7
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:06:58 2006 -0700

    ocfs2: handle network errors during recovery
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c3187ce5e335cf8e06391236cc1ad7d1b1e193ed
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:05:41 2006 -0700

    ocfs2: only recover one dead node at a time
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit ab27eb6f47092923a92f7c164dcf9be3b76f3944
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:03:49 2006 -0700

    ocfs2: Better tracking for recovery state changes
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 8bc674cb4834fb25206b7f7f5e37fe571aa76b34
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:02:10 2006 -0700

    ocfs2: Fix empty lvb check
    
    The check for an empty lvb should check the entire buffer not just the first
    byte.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit aba9aac78817d88aa2b223f1aedf1e9815ae97b8
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 18:00:21 2006 -0700

    ocfs2: fix inverted logic in dlm_is_node_dead
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 2580a580e029f9a59a66cd230b1fd7e2d9ee339d
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 17:59:46 2006 -0700

    ocfs2: recheck lockres master before sending an unlock request.
    
    Recovery may have happened and it may now be mastered locally.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 8d79d088e88198d5456861ee9e6a8226dcd08799
Author: Kurt Hackel <kurt.hackel@oracle.com>
Date:   Thu Apr 27 17:58:23 2006 -0700

    ocfs2: add a small delay after a failed migration
    
    Otherwise we risk starving other threads.
    
    Signed-off-by: Kurt Hackel <kurt.hackel@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 685f1adb3872d904e08e22fab699f34432d5068a
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu Mar 23 11:23:29 2006 -0800

    ocfs2: silence a compile warning in dlm_alloc_pagevec()
    
    Reported by Andrew Morton.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit c8f33b6e86af74ee7b800f57cac7b3c8559318fe
Author: Joel Becker <Joel.Becker@oracle.com>
Date:   Thu Mar 16 17:40:37 2006 -0800

    [PATCH] ocfs2: Alloc at least a page for the DLM hash
    
    The OCFS2 DLM allocates a number of pages for a hash to lookup locks.
    There was a bug where a PAGE_SIZE bigger than the hash size (eg, 64K
    pages) would result in zero pages allocated.
    
    Signed-off-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 03d864c02c3ea803b1718940ac6953a257182d7a
Author: Daniel Phillips <phillips@google.com>
Date:   Fri Mar 10 18:08:16 2006 -0800

    ocfs2: allocate lockres hash pages in an array
    
    This allows us to have a hash table greater than a single page which greatly
    improves dlm performance on some tests.
    
    Signed-off-by: Daniel Phillips <phillips@google.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 95c4f581d6551de55cf5b8693db98b01ce07021b
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Fri Mar 10 13:44:00 2006 -0800

    ocfs2: inline dlm_lockres_get()
    
    It's called on every lookup so this might help performance a bit.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 4198985f7ae119a23f83503a692dd822bd574080
Author: Daniel Phillips <phillips@google.com>
Date:   Fri Mar 10 13:31:47 2006 -0800

    [PATCH] Clean up ocfs2 hash probe and make it faster
    
    Signed-Off-By: Daniel Phillips <phillips@google.com>
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit a3d3329159ea76bae0b3b8680691a1c3ecf5801f
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Thu Mar 9 17:55:56 2006 -0800

    ocfs2: calculate lockid hash values outside of the spinlock
    
    Fixes a performance bug - pointed out by Andrew.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 65c491d833a06fd0d1383297590772c75d28155c
Author: Mark Fasheh <mark.fasheh@oracle.com>
Date:   Mon Mar 6 15:36:17 2006 -0800

    ocfs2: move lockres qstr next to hlist_node structure
    
    Gains us a bit of performance on loads which heavily hit the lockres hash.
    Patch suggested by Daniel Phillips <phillips@google.com>.
    
    Signed-off-by: Mark Fasheh <mark.fasheh@oracle.com>

commit 99d19bb75b88cc997d3cd611903908714c735981
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Jun 25 01:58:54 2006 -0700

    [SCSI] random: remove redundant SA_SAMPLE_RANDOM from NinjaSCSI
    
    The scsi layer is already calling add_disk_randomness in scsi_end_request.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d55a786febd077f3a0db9f0672dfa1288b452af
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Jun 25 01:58:58 2006 -0700

    [SCSI] Bogus disk geometry on large disks
    
    We currently stuff a truncated size into the geometry logic and return the
    result which can produce bizarre reports for a 4Tb array.  Since that
    mapping logic isn't useful for disks that big don't try and map this way at
    all.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3e7196cf6070821ff8246b15dfd219ffa6409062
Author: GOTO Masanori <gotom@sanori.org>
Date:   Sun Jun 25 01:58:56 2006 -0700

    [SCSI] Add scsi_add_host() failure handling for nsp32
    
    Add scsi_add_host() failure handling for nsp32
    and silence warning.
      drivers/scsi/nsp32.c:2888: warning: ignoring return value of 'Scsi_add_host', declared with attribute warn_unused_result
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: GOTO Masanori <gotom@sanori.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 041976fb6ae851cd18d96584a5d6361b564c9974
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 01:58:51 2006 -0700

    [SCSI] lpfc: sparse NULL warnings
    
    From: Randy Dunlap <rdunlap@xenotime.net>
    
    Fix sparse warnings: use NULL instead of 0 for pointers:
    drivers/scsi/lpfc/lpfc_els.c:827:56: warning: Using plain integer as NULL pointer
    drivers/scsi/lpfc/lpfc_els.c:2781:18: warning: Using plain integer as NULL pointer
    drivers/scsi/lpfc/lpfc_els.c:2782:18: warning: Using plain integer as NULL pointer
    drivers/scsi/lpfc/lpfc_init.c:951:21: warning: Using plain integer as NULL pointer
    drivers/scsi/lpfc/lpfc_init.c:956:20: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Acked-by: James Smart <James.Smart@Emulex.Com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 76c1534e0bd78e9a7662edcf5c994bac63d939fd
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:32 2006 -0700

    [SCSI] qla2xxx: Update version number to 8.01.05-k3.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3ea66e28c20e3b23749c9001c58b37ad44263442
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:27 2006 -0700

    [SCSI] qla2xxx: Correctly set the firmware NOS/OLS timeout during initialization.
    
    Original code incorrectly assigned it to the driver's
    link-down-timeout value (a value in seconds).
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7ee613970947bdf5f722bb01547c97f4fc80fe9f
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:22 2006 -0700

    [SCSI] qla2xxx: Convert from pci_module_init() to pci_register_driver().
    
    Also remove qla2xxx_probe_one/qla2xxx_remove_one stubs previously
    used with external firmware module loaders.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7d7abc77cc469ff41dde8eea606e1dab88d4ba86
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:17 2006 -0700

    [SCSI] qla2xxx: Correct 'loop-down' determination logic in qla2x00_fw_ready().
    
    As there is no point in failing the initialization process when
    firmware informs the host software that it could not transition
    beyond a CONFIG_WAIT nor WAIT_FOR_LOGIN state.  Previous logic
    would mark such conditions as a general *failure* and subsequently
    tear-down the scsi-host during initialization.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0181944fe647cae18d545ac1167df3d15d393701
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:10 2006 -0700

    [SCSI] qla2xxx: Add support for extended error logging.
    
    Similar in form to QLogic's standard offering -- via
    the 'extended_error_logging' module parameter.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 744f11fdb1118c9306303529263e5ed09b463a0f
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:05 2006 -0700

    [SCSI] qla2xxx: Cleanup DEBUG macro usage.
    
    - macro usage statements should terminate with a ';'
    - remove unused macros.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7469059d52c5f762890cc060ef3f0452c097b91e
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:11:00 2006 -0700

    [SCSI] qla2xxx: Remove no-op IOCTL codes and macros.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7914d004bcff3e59ca7c0d628f9862fe6655429c
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:10:55 2006 -0700

    [SCSI] qla2xxx: Create an VPD sysfs entry for supported ISPs only.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 88729e53a4798df20e7a7ef68e0a816f4a268da4
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:10:50 2006 -0700

    [SCSI] qla2xxx: Add DMI (Diagnostics Monitoring Interface) support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8baa51a6f027a2f581930da12f867d8054907656
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:10:44 2006 -0700

    [SCSI] qla2xxx: Honour 'skip process-login' option during fabric-login IOCB.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d4c760c2119fca982f335d83ff9095479c5d6737
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:10:39 2006 -0700

    [SCSI] qla2xxx: Add NVRAM 'Disable Serdes' bit support.
    
    The host section of ISP24xx NVRAMs contain a new bit which
    allows a user to selectively disable ports of an HBA.  These
    ports (hosts) will not be presented to the midlayer.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 395e0808fad28b08b982dd9f299fe4723e7c579b
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:10:34 2006 -0700

    [SCSI] qla2xxx: Resync with latest HBA SSID specification -- 2.2j.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a7a167bf7e2d196fc33f292e7b02e90fee03bc9a
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Fri Jun 23 16:10:29 2006 -0700

    [SCSI] qla2xxx: Rework firmware-trace facilities.
    
    - Defer firmware dump-data raw-to-textual conversion to
      user-space.
    - Add module parameter (ql2xallocfwdump) to allow for per-HBA
      allocations of firmware dump memory.
    - Dump request and response queue data as per firmware group
      request.
    - Add extended firmware trace support for ISP24XX/ISP54XX chips.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a09ab7e2fcd22f0490a270bb310536c651d53cb9
Author: mark gross <mgross@linux.intel.com>
Date:   Fri Jun 23 15:13:07 2006 -0700

    [PATCH] type-oh bug in tlclk.c
    
    Mark Bellon found a bug in my tlclk driver.  Thanks!
    
    I botch the register mask for store_received_ref_clk3a.
    
    See http://download.intel.com/design/network/manuals/30412001.pdf
    tables 124 and 136 for details.
    
    Signed-off-by: Mark Gross <mark.gross@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da206c9e68cb93fcab43592d46276c02889c1250
Merge: 916d154... 2e2d0dc...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 13:33:14 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/bunk/trivial
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/bunk/trivial:
      typo fixes
      Clean up 'inline is not at beginning' warnings for usb storage
      Storage class should be first
      i386: Trivial typo fixes
      ixj: make ixj_set_tone_off() static
      spelling fixes
      fix paniced->panicked typos
      Spelling fixes for Documentation/atomic_ops.txt
      move acknowledgment for Mark Adler to CREDITS
      remove the bouncing email address of David Campbell

commit 916d15445f4ad2a9018e5451760734f36083be77
Author: Karsten Keil <kkeil@suse.de>
Date:   Mon Jun 26 20:21:01 2006 +0200

    [PATCH] fix processing of the last byte in isdn_readbchan_tty()
    
    The changes in the tty handling contain a bug while accessing
    the last byte in the skb. Since special sequence for control of
    DTMF and FAX via ttyI* devices handled via this path, these services
    do not work anymore.
    
    Signed-off-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fee68d1cc0d9bd863e51c16cdcd707737b16bb38
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove it from the feature_removal.txt file
    
    This file was created due to the issue regarding how to notify people
    that devfs was going to be removed.  Finally remove the entry as it has
    served its purpose.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 890fbae2818a045350b8d1e3bda61ceb88ff1d17
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Last little devfs cleanups throughout the kernel tree.
    
    Just removes a few unused #defines and fixes some comments due to
    devfs now being gone.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 331b831983f9d706f4a40d08a996d5c2c7a6ea7b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Rename TTY_DRIVER_NO_DEVFS to TTY_DRIVER_DYNAMIC_DEV
    
    I've always found this flag confusing.  Now that devfs is no longer around, it
    has been renamed, and the documentation for when this flag should be used has
    been updated.
    
    Also fixes all drivers that use this flag.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f4eaa37017a5a68f67ef86729508022c13fb8e6d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove the tty_driver devfs_name field as it's no longer needed
    
    Also fixes all drivers that set this field.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 264f48646e6829b4d00a0e058452578318e6fb15
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove the line_driver devfs_name field as it's no longer needed
    
    Also fixes all drivers that set this field.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e483075a1f9862a65af648d1d939499969c7b5d
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove the videodevice devfs_name field as it's no longer needed
    
    Also fixes all drivers that set this field.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ce7b0f46bbf4bff8daab2dd3d878b9e72a623d09
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove the gendisk devfs_name field as it's no longer needed
    
    And remove the now unneeded number field.
    Also fixes all drivers that set these fields.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 96192ff1a9d0c6ef365d21667080259d83ea2f5b
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove the miscdevice devfs_name field as it's no longer needed
    
    Also fixes all drivers that set this field.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ff23eca3e8f613034e0d20ff86f6a89b62f5a14e
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove the devfs_fs_kernel.h file from the tree
    
    Also fixes up all files that #include it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8ab5e4c15b53e147c08031a959d9f776823dbe73
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs_remove() function from the kernel tree
    
    Removes the devfs_remove() function and all callers of it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c69ef79741910883d5543caafa06aca3ebadbd1
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs_mk_cdev() function from the kernel tree
    
    Removes the devfs_mk_cdev() function and all callers of it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1a715c5cf917326a285533d1116d725f5f2593c2
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs_mk_bdev() function from the kernel tree
    
    Removes the devfs_mk_bdev() function and all callers of it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 79021a625c36162d24c852bbbdb04f0c1cb32db3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs_mk_symlink() function from the kernel tree
    
    Removes the devfs_mk_symlink() function and all callers of it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 95dc112a5770dc670a1b45a3d9ee346fdd2b2697
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs_mk_dir() function from the kernel tree
    
    Removes the devfs_mk_dir() function and all callers of it.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0e6c62da7cd929b0389fc4a7e41464bb738647dc
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs_*_tape() functions from the kernel tree
    
    Removes the devfs_register_tape() and devfs_unregister_tape() functions
    and all callers of them.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0936f26f55918af595b108208e64c37a0a481722
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs support from the sound subsystem
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 94f6c59dcf16f10a20fbe3d1f098b159433f94bd
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs support from the ide subsystem.
    
    Also removes the ide drive devfs_name field as it's no longer needed
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aa4148cfc7b3b93eeaf755a7d14f10afaffe9a96
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs support from the serial subsystem
    
    Also fixes all serial drivers.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bdaf8529385d5126ef791e8f1914afff8cd59bcf
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs from the init code
    
    This patch removes the devfs code from the init/ directory.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a29641883f57f36424e3219ae9ff48dd6cd34de0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs from the partition code
    
    This patch removes the devfs code from the fs/partitions/ directory.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5c3927dc3468f47b803c9e1bb82cbed2bbd411ab
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs documentation from the kernel tree
    
    Removes the Documentaiton/filesystems/devfs/ directory
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d8deac5094988c7ad1127ee61f52c59a952fcabb
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 20 21:15:16 2005 -0700

    [PATCH] devfs: Remove devfs from the kernel tree
    
    This is the first patch in a series of patches that removes devfs
    support from the kernel.  This patch removes the core devfs code, and
    its private header file.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5fd571cbc13db113bda26c20673e1ec54bfd26b4
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Jun 21 20:56:26 2006 +0200

    [PATCH] Array overrun in drivers/infiniband/core/cma.c
    
    This was spotted by coverity #id 1300.  Since the array has only four
    elements, we should just use those four.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Acked-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09c0dc68625c06f5b1e786aad0d5369b592179e6
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 11:55:42 2006 -0700

    Revert "[PATCH] kthread: update loop.c to use kthread"
    
    This reverts commit c7b2eff059fcc2d1b7085ee3d84b79fd657a537b.
    
    Hugh Dickins explains:
    
     "It seems too little tested: "losetup -d /dev/loop0" fails with
      EINVAL because nothing sets lo_thread; but even when you patch
      loop_thread() to set lo->lo_thread = current, it can't survive
      more than a few dozen iterations of the loop below (with a tmpfs
      mounted on /tst):
    
    	j=0
    	cp /dev/zero /tst
    	while :
    	do
    	    let j=j+1
    	    echo "Doing pass $j"
    	    losetup /dev/loop0 /tst/zero
    	    mkfs -t ext2 -b 1024 /dev/loop0 >/dev/null 2>&1
    	    mount -t ext2 /dev/loop0 /mnt
    	    umount /mnt
    	    losetup -d /dev/loop0
    	done
    
      it collapses with failed ioctl then BUG_ON(!bio).
    
      I think the original lo_done completion was more subtle and safe
      than the kthread conversion has allowed for."
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e58f5c9a841e59233c5997df082e93329ea61e0
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 26 19:46:39 2006 +0100

    [ARM] 3656/1: S3C2412: Add S3C2412 and S3C2413 documenation
    
    Patch from Ben Dooks
    
    Add some basic documentation about the support for
    the S3C2412 and S3C2413 CPUs--
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2a2ed2db353d949c06b6ef8b6913f65b39111eab
Merge: 972d19e... 070b98b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 11:05:15 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/sam/kbuild: (40 commits)
      kbuild: trivial fixes in Makefile
      kbuild: adding symbols in Kconfig and defconfig to TAGS
      kbuild: replace abort() with exit(1)
      kbuild: support for %.symtypes files
      kbuild: fix silentoldconfig recursion
      kbuild: add option for stripping modules while installing them
      kbuild: kill some false positives from modpost
      kbuild: export-symbol usage report generator
      kbuild: fix make -rR breakage
      kbuild: append -dirty for updated but uncommited changes
      kbuild: append git revision for all untagged commits
      kbuild: fix module.symvers parsing in modpost
      kbuild: ignore make's built-in rules & variables
      kbuild: bugfix with initramfs
      kbuild: modpost build fix
      kbuild: check license compatibility when building modules
      kbuild: export-type enhancement to modpost.c
      kbuild: add dependency on kernel.release to the package targets
      kbuild: `make kernelrelease' speedup
      kconfig: KCONFIG_OVERWRITECONFIG
      ...

commit 972d19e837833b93466c6f6a8ef2a7d653000aa3
Merge: cdf4f38... b9d0a25...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 11:03:29 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/herbert/crypto-2.6:
      [CRYPTO] tcrypt: Forbid tcrypt from being built-in
      [CRYPTO] aes: Add wrappers for assembly routines
      [CRYPTO] tcrypt: Speed benchmark support for digest algorithms
      [CRYPTO] tcrypt: Return -EAGAIN from module_init()
      [CRYPTO] api: Allow replacement when registering new algorithms
      [CRYPTO] api: Removed const from cra_name/cra_driver_name
      [CRYPTO] api: Added cra_init/cra_exit
      [CRYPTO] api: Fixed incorrect passing of context instead of tfm
      [CRYPTO] padlock: Rearrange context structure to reduce code size
      [CRYPTO] all: Pass tfm instead of ctx to algorithms
      [CRYPTO] digest: Remove unnecessary zeroing during init
      [CRYPTO] aes-i586: Get rid of useless function wrappers
      [CRYPTO] digest: Add alignment handling
      [CRYPTO] khazad: Use 32-bit reads on key

commit cdf4f383a4b0ffbf458f65380ecffbeee1f79841
Merge: 954b36d... e2e8115...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 11:01:58 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/dtor/input
    
    * master.kernel.org:/pub/scm/linux/kernel/git/dtor/input:
      Input: iforce - remove some pointless casts
      Input: psmouse - add support for Intellimouse 4.0
      Input: atkbd - fix HANGEUL/HANJA keys
      Input: fix misspelling of Hangeul key
      Input: via-pmu - add input device support
      Input: rearrange exports
      Input: fix formatting to better follow CodingStyle
      Input: reset name, phys and uniq when unregistering
      Input: return correct size when reading modalias attribute
      Input: change my e-mail address in MAINTAINERS file
      Input: fix potential overflows in driver/input/keyboard
      Input: fix potential overflows in driver/input/touchscreen
      Input: fix potential overflows in driver/input/joystick
      Input: fix potential overflows in driver/input/mouse
      Input: fix accuracy of fixp-arith.h
      Input: iforce - use ENOSPC instead of ENOMEM
      Input: constify drivers/char/keyboard.c

commit 954b36d48b495afed2880320750858a2eae312c9
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 16:33:15 2006 +1000

    [PATCH] m68knommu: use configurable RAM setup page_offset.h
    
    Remove board specific base RAM conditionals from page_offset.h
    With the Kconfig time configurable RAM setup none of this is required.
    It is all based on the Kconfig (CONFIG_RAMBASE) option now.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 12ddae3348def8808fb755b23225b18fc4adfbe3
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 16:33:09 2006 +1000

    [PATCH] m68knommu: use configurable RAM setup in start up code
    
    Change to using a configurable RAM setup in startup code. This cleans up
    the whole RAM base/sizing issue, and removes a lot of board specific code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73e2fba8dc1e0a686073a5183be1a99e9285d2ac
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 16:33:05 2006 +1000

    [PATCH] m68knommu: use configurable RAM setup in linker script
    
    Remove the fixed RAM configurations for each board type from the
    linker script. Replace with simple defines usng the flexible RAM
    configuration options. This cleans out of lot of board specific
    munging of addresses.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 63e413d19db0018e443a43c6c7a482993edf79cf
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 16:32:59 2006 +1000

    [PATCH] m68knommu: create configurable RAM setup
    
    Reworked the way RAM regions are defined. Instead of coding all the
    variations for each board type we now just configure RAM base and size
    in the usual Kconfig setup. This much simplifies the code, and makes it
    a lot more flexible when setting up new boards or board varients.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2f386d7c182c1420f797093d67bb09a7251f113
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 16:34:09 2006 +1000

    [PATCH] m68knommu: remove unused vars from generic 68328 start code
    
    Clean out unused variable definitions from 68328 start up code.
    Also use a more appropriate start address for the case of relocating
    the kernel code to RAM (from ROM/flash).
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ae9cb6bd4c23616b229b135ea57a93a6a24e13a
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 16:34:04 2006 +1000

    [PATCH] m68knommu: remove __ramvec from 68328/pilot start code
    
    __ramvec has been removed from the linker script. The vector base
    address is defined as a configurable option, use that. Remove its
    use from the 68328/pilot startup code.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f2f444136abdb13dbd2094555aa65fc252aef6c
Merge: 81a07d7... 33f40b3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 10:54:02 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb:
      V4L/DVB (4227): Update this driver for recent header file movement.
      V4L/DVB (4223): Add V4L2_CID_MPEG_STREAM_VBI_FMT control
      V4L/DVB (4222): Always switch tuner mode when calling VIDIOC_S_FREQUENCY.
      V4L/DVB (4221): Add HM12 YUV format define.
      V4L/DVB (4219): Av7110: analog sound output of DVB-C rev 2.3
      V4L/DVB (4217): Fix a misplaced closing bracket/else, which caused swzigzag not to be called
      V4L/DVB (4215): Make VIDEO_CX88_BLACKBIRD a separate build option
      V4L/DVB (4214): Make VIDEO_CX2341X a selectable build option
      V4L/DVB (4213): Cx88: cleanups
      V4L/DVB (4211): Fix an Oops for all fe that have get_frontend_algo == NULL

commit 81a07d7588d376c530d006e24d7981304ce96e16
Merge: 8871e73... 8501a2f...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 10:51:09 2006 -0700

    Merge branch 'x86-64'
    
    * x86-64: (83 commits)
      [PATCH] x86_64: x86_64 stack usage debugging
      [PATCH] x86_64: (resend) x86_64 stack overflow debugging
      [PATCH] x86_64: msi_apic.c build fix
      [PATCH] x86_64: i386/x86-64 Add nmi watchdog support for new Intel CPUs
      [PATCH] x86_64: Avoid broadcasting NMI IPIs
      [PATCH] x86_64: fix apic error on bootup
      [PATCH] x86_64: enlarge window for stack growth
      [PATCH] x86_64: Minor string functions optimizations
      [PATCH] x86_64: Move export symbols to their C functions
      [PATCH] x86_64: Standardize i386/x86_64 handling of NMI_VECTOR
      [PATCH] x86_64: Fix modular pc speaker
      [PATCH] x86_64: remove sys32_ni_syscall()
      [PATCH] x86_64: Do not use -ffunction-sections for modules
      [PATCH] x86_64: Add cpu_relax to apic_wait_icr_idle
      [PATCH] x86_64: adjust kstack_depth_to_print default
      [PATCH] i386/x86-64: adjust /proc/interrupts column headings
      [PATCH] x86_64: Fix race in cpu_local_* on preemptible kernels
      [PATCH] x86_64: Fix fast check in safe_smp_processor_id
      [PATCH] x86_64: x86_64 setup.c - printing cmp related boottime information
      [PATCH] i386/x86-64/ia64: Move polling flag into thread_info_status
      ...
    
    Manual resolve of trivial conflict in arch/i386/kernel/Makefile

commit 8501a2fbe762b21d2504ed3aca3b52be61b5e6e4
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Mon Jun 26 14:00:08 2006 +0200

    [PATCH] x86_64: x86_64 stack usage debugging
    
    Applies to git & 2.6.17-rc6 after CONFIG_DEBUG_STACKOVERFLOW patch
    
    uses same stack-zeroing mechanism as on i386 to discover maximum stack
    excursions.
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4961f10e2205d0ededa291e12ec634efc58aa93c
Author: Eric Sandeen <sandeen@sgi.com>
Date:   Mon Jun 26 14:00:05 2006 +0200

    [PATCH] x86_64: (resend) x86_64 stack overflow debugging
    
    Take two, now without spurious whitespace :(  Applies to git & 2.6.17-rc6
    
    CONFIG_DEBUG_STACKOVERFLOW existed for x86_64 in 2.4, but seems to have gone AWOL in 2.6.
    
    I've pretty much just copied this over from the 2.4 code, with
    appropriate tweaks for the 2.6 kernel, plus a bugfix.  I'd personally
    rather see it printed out the way other arches do it, i.e.
    bytes-remaining-until-overflow, rather than having to do the subtraction
    yourself.  Also, only 128 bytes remaining seems awfully late to issue a
    warning.  But I'll start here :)
    
    Signed-off-by: Eric Sandeen <sandeen@sgi.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4cffb6444c327677f901323ecf1a13d6bd2df3f
Author: Christian Kujau <evil@g-house.de>
Date:   Mon Jun 26 14:00:02 2006 +0200

    [PATCH] x86_64: msi_apic.c build fix
    
          CC      drivers/pci/msi-apic.o
    In file included from include/asm/msi.h:11,
                      from drivers/pci/msi.h:71,
                      from drivers/pci/msi-apic.c:8:
    include/asm/smp.h:103: error: syntax error before '->' token
    
    akpm: nasty.  It appears to be
    
      static inline unsigned int cpu_mask_to_apicid(cpumask_t cpumask)
    
    conflicting with include/asm-x86_64/mach_apic.h's
    
      #define cpu_mask_to_apicid (genapic->cpu_mask_to_apicid)
    
    And I don't know which patch in rc4-mm1 triggered this.
    
    Fixing this in the .c file seems wrong.
    
    Including asm/smp.h instead of linux/smp.h seems wrong too.  Need that
    .config.
    
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0080e667550db5ae8c9318181500c413b99ff164
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Jun 26 13:59:59 2006 +0200

    [PATCH] x86_64: i386/x86-64 Add nmi watchdog support for new Intel CPUs
    
    Intel now has support for Architectural Performance Monitoring Counters
    ( Refer to IA-32 Intel Architecture Software Developer's Manual
    http://www.intel.com/design/pentium4/manuals/253669.htm ). This
    feature is present starting from Intel Core Duo and Intel Core Solo processors.
    
    What this means is, the performance monitoring counters and some performance
    monitoring events are now defined in an architectural way (using cpuid).
    And there will be no need to check for family/model etc for these architectural
    events.
    
    Below is the patch to use this performance counters in nmi watchdog driver.
    Patch handles both i386 and x86-64 kernels.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e77deacb7b078156fcadf27b838a4ce1a65eda04
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Jun 26 13:59:56 2006 +0200

    [PATCH] x86_64: Avoid broadcasting NMI IPIs
    
    On some i386/x86_64 systems, sending an NMI IPI as a broadcast will
    reset the system.  This seems to be a BIOS bug which affects machines
    where one or more cpus are not under OS control.  It occurs on HT
    systems with a version of the OS that is not compiled without HT
    support.  It also occurs when a system is booted with max_cpus=n where
    2 <= n < cpus known to the BIOS.  The fix is to always send NMI IPI as
    a mask instead of as a broadcast.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 704fc59e1d056de80beaf30174bc8e0b1682efbb
Author: Suresh Siddha <suresh.b.siddha@intel.com>
Date:   Mon Jun 26 13:59:53 2006 +0200

    [PATCH] x86_64: fix apic error on bootup
    
    Appended patch fixes the "APIC error on CPUX: 00(40)" observed during bootup.
    
    From SDM Vol-3A "Valid Interrupt Vectors" section:
    	"When an illegal vector value (0-15) is written to an LVT entry
    	and the delivery mode is Fixed, the APIC may signal an illegal
    	vector error, with out regard to whether the mask bit is set
    	or whether an interrupt is actually seen on input."
    
    Signed-off-by: Suresh Siddha <suresh.b.siddha@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03fdc2c277afdbd217eccd1ce0cfeff77ebd8b77
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Mon Jun 26 13:59:50 2006 +0200

    [PATCH] x86_64: enlarge window for stack growth
    
    Allow stack growth so the 'enter' instruction works.  Also
    fixes problem in compat_sys_kexec_load() which could allocate
    more than 128 bytes using compat_alloc_user_space().
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bfa9bb5195c68f75bd3937e4d77cb0bfe852d0d
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:59:47 2006 +0200

    [PATCH] x86_64: Minor string functions optimizations
    
     - Use tail call from clear_user to __clear_user to save some code size
     - Use standard memcpy for forward memmove
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ee60e17896c65da1df5780d3196c050bccb7d10
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:59:44 2006 +0200

    [PATCH] x86_64: Move export symbols to their C functions
    
    Only exports for assembler files are left in x8664_ksyms.c
    
    Originally inspired by a patch from Al Viro
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45486f81c9aa07218b73a38cbcf62ffa66e99088
Author: Keith Owens <kaos@sgi.com>
Date:   Mon Jun 26 13:59:41 2006 +0200

    [PATCH] x86_64: Standardize i386/x86_64 handling of NMI_VECTOR
    
    x86_64 and i386 behave inconsistently when sending an IPI on vector 2
    (NMI_VECTOR).  Make both behave the same, so IPI 2 is sent as NMI.
    
    The crash code was abusing send_IPI_allbutself() by passing a code
    instead of a vector, it only worked because crash knew about the
    internal code of send_IPI_allbutself().  Change crash to use NMI_VECTOR
    instead, and remove the comment about how crash was abusing the function.
    
    This patch is a pre-requisite for fixing the problem where sending an
    IPI as NMI would reboot some Dell Xeon systems.  I cannot fix that
    problem while crash continus to abuse send_IPI_allbutself().
    
    It also removes the inconsistency between i386 and x86_64 for
    NMI_VECTOR.  That will simplify all the RAS code that needs to bring
    all the cpus to a clean stop, even when one or more cpus are spinning
    disabled.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c63f8738734eb7e6d3f76ca03186f16ef88edf5
Author: Piotr Kaczuba <pepe@attika.ath.cx>
Date:   Mon Jun 26 13:59:38 2006 +0200

    [PATCH] x86_64: Fix modular pc speaker
    
    It turned out that the following change is needed when the speaker is
    compiled as a module.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d39159c27fe1375bb7773d364213b1047265022c
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 13:59:35 2006 +0200

    [PATCH] x86_64: remove sys32_ni_syscall()
    
    This patch removes the no longer used sys32_ni_syscall()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 409f89e0efcfea1a8b25f9c4a050c0cf1f1cb87c
Author: Sergey Vlasov <vsu@altlinux.ru>
Date:   Mon Jun 26 13:59:32 2006 +0200

    [PATCH] x86_64: Do not use -ffunction-sections for modules
    
    Currently CONFIG_REORDER uses -ffunction-sections for all code;
    however, creating a separate section for each function is not useful
    for modules and just adds bloat.  Moving this option from CFLAGS to
    CFLAGS_KERNEL shrinks module object files (e.g., the module tree for a
    kernel built with most drivers as modules shrinked from 54M to 46M),
    and decreases the number of sysfs files in /sys/module/*/sections/
    directories.
    
    Signed-off-by: Sergey Vlasov <vsu@altlinux.ru>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 899ced0dd9457b9c349663ca4cb4ec09167728a6
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Mon Jun 26 13:59:29 2006 +0200

    [PATCH] x86_64: Add cpu_relax to apic_wait_icr_idle
    
    This one is adding a cpu_relax() that already existed in the i386 version.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cab093b9d4b40c71c6261a11ba8f1ca027e09008
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:59:26 2006 +0200

    [PATCH] x86_64: adjust kstack_depth_to_print default
    
    Defaulting to a value not evenly divisible by four makes little sense,
    as four values are displayed per line (and hence the rest of the line
    would otherwise be wasted).
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bdbdaa791fb5b97ba5b3124c7593ffe308e2afef
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:59:23 2006 +0200

    [PATCH] i386/x86-64: adjust /proc/interrupts column headings
    
    With (significantly) more than 10 CPUs online, the column headings
    drifted off the positions of the column contents with growing CPU
    numbers.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit da5311258d2afb96fc592c8b11e818facfa46dc3
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:59:20 2006 +0200

    [PATCH] x86_64: Fix race in cpu_local_* on preemptible kernels
    
    When a process changes CPUs while doing the non atomic cpu_local_*
    operations it might operate on the local_t of a different CPUs.
    
    Fix that by disabling preemption.
    
    Pointed out by Christopher Lameter
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75bd665cc9f4d0f67164d9145e446ae554d4ed3f
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:59:17 2006 +0200

    [PATCH] x86_64: Fix fast check in safe_smp_processor_id
    
    The APIC ID returned by hard_smp_processor_id can be beyond
    NR_CPUS and then overflow the x86_cpu_to_apic[] array.
    
    Add a check for overflow. If it happens then the slow loop below
    will catch.
    
    Bug pointed out by Doug Thompson
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e42f94373764d825e2c0464092738f66f5d3effb
Author: Rohit Seth <rohitseth@google.com>
Date:   Mon Jun 26 13:59:14 2006 +0200

    [PATCH] x86_64: x86_64 setup.c - printing cmp related boottime information
    
    Getting phys_proc_id and cpu_core_id information to be printed at boot
    time for AMD processors.  Also matching the Node related boot time
    information that gets printed for Intel and AMD processors for NUMA
    configurations.
    
    Signed-off-by: Rohit Seth <rohitseth@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 495ab9c045e1b0e5c82951b762257fe1c9d81564
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:59:11 2006 +0200

    [PATCH] i386/x86-64/ia64: Move polling flag into thread_info_status
    
    During some profiling I noticed that default_idle causes a lot of
    memory traffic. I think that is caused by the atomic operations
    to clear/set the polling flag in thread_info. There is actually
    no reason to make this atomic - only the idle thread does it
    to itself, other CPUs only read it. So I moved it into ti->status.
    
    Converted i386/x86-64/ia64 for now because that was the easiest
    way to fix ACPI which also manipulates these flags in its idle
    function.
    
    Cc: Nick Piggin <npiggin@novell.com>
    Cc: Tony Luck <tony.luck@intel.com>
    Cc: Len Brown <len.brown@intel.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d9005b52de7bc9b20afa93e06d3e15843bafc12f
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:59:08 2006 +0200

    [PATCH] x86_64: Remove bogus RED-PEN comment in signal.c
    
    No red zone possible/needed on the alternative stack.
    
    It caused confusion.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8fa3d6fc5e952300c26490167a93bf502de03a99
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 26 13:59:05 2006 +0200

    [PATCH] x86_64: check_addr() cleanups
    
     - Use DMA_32BIT_MASK
    
     - Use %z for size_t
    
     - 80-cols
    
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f51e139d8b29116779044f26f84cceae34c31a4
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:59:02 2006 +0200

    [PATCH] x86_64: miscellaneous mm/init.c fixes
    
     - fix an off-by-one error in phys_pmd_init()
     - prevent phys_pmd_init() from removing mappings established earlier
     - fix the direct mapping early printk to in fact show the end of the range
     - remove an apparently orphan comment
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b633237e9c1b91b86c431c5d41266b47408b4642
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:58:59 2006 +0200

    [PATCH] x86_64: Mark mce_amd cpu notifier __cpuinit/__cpuinitdata
    
    Cc: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2903ee85ce462d66955b800a0c48e26e51de0aae
Author: Jacob Shin <jacob.w.shin@gmail.com>
Date:   Mon Jun 26 13:58:56 2006 +0200

    [PATCH] x86_64: mce_amd cleanup
    
    Clean up mce_amd.c for readability and remove code no
    longer needed.
    
    Signed-off-by: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95268664390b19962ed41a3506c5bc8149db71e8
Author: Jacob Shin <jacob.w.shin@gmail.com>
Date:   Mon Jun 26 13:58:53 2006 +0200

    [PATCH] x86_64: mce_amd support for family 0x10 processors
    
    Add support for mce threshold registers found in future
    AMD family 0x10 processors.  Backwards compatible with
    family 0xF hardware.
    
    AK: fixed build on !SMP
    
    Signed-off-by: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fff2e89f11dd9b9b45e9212bc543154ca3d028a1
Author: Jacob Shin <jacob.w.shin@gmail.com>
Date:   Mon Jun 26 13:58:50 2006 +0200

    [PATCH] x86_64: mce_amd relocate sysfs files
    
    Get rid of /sys/devices/system/threshold directory and move
    mce_amd thresholding files into the machine sysfs directory --
    /sys/devices/system/machinecheck.
    
    AK: Fixed warning
    
    Signed-off-by: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17fc14ff1bdbc393e1cf4f6fd1e1e53d72ab9fe5
Author: Jacob Shin <jacob.w.shin@gmail.com>
Date:   Mon Jun 26 13:58:47 2006 +0200

    [PATCH] x86_64: apic support for extended apic interrupt
    
    Add support for extended APIC LVT found in future AMD processors.
    
    Signed-off-by: Jacob Shin <jacob.shin@amd.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c38bfdc85aae0c6d1458269c0e063c2f4a116711
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:58:44 2006 +0200

    [PATCH] x86_64: Move VM86 config into arch/i386/Kconfig
    
    Architecture specific configs like this have no business at all
    in init/Kconfig. This prevents it from being set on x86-64
    
    Pointed out by H.Peter Anvin
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bf660254e0d430e5d991e432d5dad8d6714828f6
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:58:41 2006 +0200

    [PATCH] i386/x86-64: Fix isoimage when syslinux is in /usr/share
    
    It's like this on SUSE systems.
    
    Cc: hpa@zytor.com
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f82bde472184f989283c173c1eb95bab455a774
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:38 2006 +0200

    [PATCH] x86_64: Update copyright in time.c
    
    Update my copyright dates in arch/x86-64/kernel/time.c
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b2df3ddb68fc02e3bae78b7adaeca8561d02ea6d
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:35 2006 +0200

    [PATCH] x86_64: Explain why HPET T0_CMP register is written twice
    
    After writing the CFG register, the first value written to the T0_CMP
    register is the value at which next interrupt should be triggered, every
    value after that sets the period of the interrupt. For that reason, the code
    needs to write the value twice - to set both the phase and period.
    
    [AK: I had already figured it out by myself, but it's still useful
    to have a comment for this.]
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4221133845f81ab4428c79a89e37be2c87624c1a
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:32 2006 +0200

    [PATCH] x86_64: Make use of the *PER* constants in time.c
    
    This patch makes use of the newly added conversion constants
    in time.h to x86-64 time.c. The code gets significantly easier
    to understand.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e30db3e69948dafb616d121e52c8d62d38dab68c
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:29 2006 +0200

    [PATCH] x86_64: Remove hack to manually enable HPET on AMD8111 southbridges
    
    Remove #ifdefed code to manually enable HPET on AMD8111, where the
    BIOS doesn't have ACPI HPET tables and doesn't enable it for us.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b0e85012581a9a8b12a8191d365716bf3ca3d3c
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:26 2006 +0200

    [PATCH] x86_64: Add X86_FEATURE_RDTSCP, fix rdtscp in /proc/cpuinfo
    
    This patch adds the X86_FEATURE_RDTSCP #define, so that kernel code can
    check for the feature easily and also fixes the location of the "rdtscp"
    string in the cpuinfo tables.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8bf3c65a962530821fa9a9b4bad43d8c7e13574
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:23 2006 +0200

    [PATCH] x86_64: Rename oem_force_hpet_timer to apic_is_clustered_box
    
    Rename oem_force_hpet_timer to apic_is_clustered_box, to give the
    function a better fitting name - it really isn't at all about HPET.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05ebb76109f302b949e745724bbf0f0634dba43f
Author: Vojtech Pavlik <vojtech@suse.cz>
Date:   Mon Jun 26 13:58:20 2006 +0200

    [PATCH] x86_64: Add useful constants to time.h
    
    In timekeeping code, one often does need to use conversion constants. Naming
    these leads to code that's easier to understand, showing the reader between
    which units the conversion is made.
    
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3fa8ebc25129bb69929e20b0c84049c39029d8d
Author: Rohit Seth <rohitseth@google.com>
Date:   Mon Jun 26 13:58:17 2006 +0200

    [PATCH] x86_64: moving phys_proc_id and cpu_core_id to cpuinfo_x86
    
    Most of the fields of cpuinfo are defined in cpuinfo_x86 structure.
    This patch moves the phys_proc_id and cpu_core_id for each processor to
    cpuinfo_x86 structure as well.
    
    Signed-off-by: Rohit Seth <rohitseth@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e465058d55a88feb4c7ecabe63eea7ea7147e206
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:58:14 2006 +0200

    [PATCH] x86_64: Calgary IOMMU - Calgary specific bits
    
    This patch hooks Calgary into the build, the x86-64 IOMMU
    initialization paths, and introduces the Calgary specific bits.  The
    implementation draws inspiration from both PPC (which has support for
    the same chip but requires firmware support which we don't have on
    x86-64) and gart. Calgary is different from gart in that it support a
    translation table per PHB, as opposed to the single gart aperture.
    
    Changes from previous version:
     * Addition of boot-time disablement for bus-level translation/isolation
       (e.g, enable userspace DMA for things like X)
     * Usage of newer IOMMU abstraction functions
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0dc243ae10c8309c170a3af9f1adad1924a9f217
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:58:11 2006 +0200

    [PATCH] x86_64: Calgary IOMMU - IOMMU abstractions
    
    This patch creates a new interface for IOMMUs by adding a centralized
    location for IOMMU allocation (for translation tables/apertures) and
    IOMMU initialization.  In creating these, code was moved around for
    abstraction, uniformity, and consiceness.
    
    Take note of the move of the iommu_setup bootarg parsing code to
    __setup.  This is enabled by moving back the location of the aperture
    allocation/detection to mem init (which while ugly, was already the
    location of the swiotlb_init).
    
    While a slight departure from the previous patch, I belive this provides
    the true intention of the previous versions of the patch which changed
    this code.  It also makes the addition of the upcoming calgary code much
    cleaner than previous patches.
    
    [AK: Removed one broken change. iommu_setup still has to be called
    early]
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a3c042a0f022dade8e02bf6c9be5d2379d7e133c
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:58:08 2006 +0200

    [PATCH] x86_64: Calgary IOMMU - move valid_dma_direction into the callers
    
    Based on Andi Kleen's comments on the original Calgary patch, move
    valid_dma_direction into the calling functions.
    
    Signed-off-by: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d4f6b93a4aaa6b56b600cd1165c971f4395e4b3
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:58:05 2006 +0200

    [PATCH] x86_64: Calgary IOMMU - introduce iommu_detected
    
    swiotlb relies on the gart specific iommu_aperture variable to know if
    we discovered a hardware IOMMU before swiotlb initialization.  Introduce
    iommu_detected to do the same thing, but in a HW IOMMU neutral manner,
    in preparation for adding the Calgary HW IOMMU.
    
    Signed-Off-By: Muli Ben-Yehuda <muli@il.ibm.com>
    Signed-Off-By: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2bbc419f9d51b44f3fdeea12c5b786bdace82b8e
Author: Rohit Seth <rohitseth@google.com>
Date:   Mon Jun 26 13:58:02 2006 +0200

    [PATCH] x86_64: Change assembly to use regular cpuid_count macro
    
    Minor cleanup patch:
    
    Replacing the asm statement with cpuid_count macro(which already
    provides the same functionality).
    
    Signed-off-by: Rohit Seth <rohitseth@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 46d13a384bc695ec61458e5dcbac1eee6d623a9b
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:59 2006 +0200

    [PATCH] x86_64: use halt() instead of raw inline assembly
    
    Use abstractions whenever possible.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2ae5b5f6afd3c4caaf82444102a4372135cb994
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:57:56 2006 +0200

    [PATCH] x86_64: Get rid of pud_offset_k / __pud_offset_k
    
    pud_offset_k() equivalent to pud_offset() now.  Pointed out by Jan Beulich
    Similar for __pud_offset_ok, which needs a small change in the callers.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b79c4df714ff190f7149d3d5a86278bdc25a90ec
Author: Carl-Daniel Hailfinger <c-d.hailfinger.devel.2006@gmx.net>
Date:   Mon Jun 26 13:57:53 2006 +0200

    [PATCH] i386/x86-64: Consolidate arch/{i386,x86_64}/boot/compressed/misc.c
    
    Clean up arch/{i386,x86_64}/boot/compressed/misc.c a bit to reduce their
    differences. Should have zero effect on code generation.
    
    Signed-off-by: Carl-Daniel Hailfinger <c-d.hailfinger.devel.2006@gmx.net>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83f4fcce7fdd213bd570b899862c3838871f8cf7
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:50 2006 +0200

    [PATCH] x86_64: allow unwinder to build without module support
    
    Add proper conditionals to be able to build with CONFIG_MODULES=n.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c33bd9aac0597eeedaaa01ea5aafe456894b2f2b
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:47 2006 +0200

    [PATCH] i386/x86-64: fall back to old-style call trace if no unwinding
    
    If no unwinding is possible at all for a certain exception instance,
    fall back to the old style call trace instead of not showing any trace
    at all.
    
    Also, allow setting the stack trace mode at the command line.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe7cacc1c25e286872b878c5d46880b620cd1e2d
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:44 2006 +0200

    [PATCH] i386: reliable stack trace support i386 entry.S
    
    To increase the usefulness of reliable stack unwinding, this adds CFI
    unwind annotations to many low-level i386 routines.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 176a2718f408ce92788b29127050b04dfd6e4f68
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:41 2006 +0200

    [PATCH] i386: reliable stack trace support (i386)
    
    These are the i386-specific pieces to enable reliable stack traces. This is
    going to be even more useful once CFI annotations get added to he assembly
    code, namely to entry.S.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dffead4e421e289c8434351400d24fd35723e874
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:38 2006 +0200

    [PATCH] x86_64: reliable stack trace support (x86-64 syscall
    
    Adjust the CFA offset for 64- and 32-bit syscall entries so that the five
    slots pre-subtracted from the stack pointer do not appear to reside outside
    of the current frame.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1de9c3f67ec6fddfb85325bab551f4094f55f410
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:35 2006 +0200

    [PATCH] x86_64: reliable stack trace support (x86-64 IRQ stack
    
    Change the switching to/from the IRQ stack so that unwind annotations can
    be added for it without requiring CFA expressions.
    
    AK: I cleaned it up a bit, making it unconditional and removing the
    obsolete DEBUG_INFO full frame code.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b538ed278b80641ee6d7b75497d5e14de1bb1137
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:32 2006 +0200

    [PATCH] x86_64: reliable stack trace support (x86-64)
    
    These are the x86_64-specific pieces to enable reliable stack traces. The
    only restriction with this is that it currently cannot unwind across the
    interrupt->normal stack boundary, as that transition is lacking proper
    annotation.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4552d5dc08b79868829b4be8951b29b07284753f
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:57:28 2006 +0200

    [PATCH] x86_64: reliable stack trace support
    
    These are the generic bits needed to enable reliable stack traces based
    on Dwarf2-like (.eh_frame) unwind information. Subsequent patches will
    enable x86-64 and i386 to make use of this.
    
    Thanks to Andi Kleen and Ingo Molnar, who pointed out several possibilities
    for improvement.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b28592b07223d7fc0691ce3fe57d495dc9cbe3a
Author: bibo,mao <bibo.mao@intel.com>
Date:   Mon Jun 26 13:57:25 2006 +0200

    [PATCH] x86_64: x86_86 msi miss one entry handler
    
      In x86_64 architecture, if device driver with msi function
    gets 0xee vector by assign_irq_vector() function, system will
    crash if this interrupt happens. It is because 0xee interrupt
    entry is empty. This patch modifies this. This patch is based
    on 2.6.17-rc6.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a813ce432f27c4f5011c7b5ac9d2bbbfeb41d9a7
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:57:22 2006 +0200

    [PATCH] x86_64: Rename IOMMU option, fix help and mark option embedded.
    
     - Rename the GART_IOMMU option to IOMMU to make clear it's not
       just for AMD
     - Rewrite the help text to better emphatise this fact
     - Make it an embedded option because too many people get it wrong.
    
    To my astonishment I discovered the aacraid driver tests this
    symbol directly. This looks quite broken to me - it's an internal
    implementation detail of the PCI DMA API. Can the maintainer
    please clarify what this test was intended to do?
    
    Cc: linux-scsi@vger.kernel.org
    Cc: alan@redhat.com
    Cc: markh@osdl.org
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d9bc79cd28b779610d9590b3a96a28a0f64a25a
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:57:19 2006 +0200

    [PATCH] x86_64: Make sure is_compat_task works early
    
    Previously it would only work in the first 32bit system call, not during
    early process setup.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 26a3c49cec96ffb9cfcc30dfa0cd05ccc25dcb3a
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 13:57:16 2006 +0200

    [PATCH] x86_64: fix vector_lock deadlock in io_apic.c
    
    Fix a potential deadlock scenario introduced by io_apic.c's new vector_lock
    on i386 and x86_64.
    
    Found by the locking correctness validator. The patch was boot-tested on
    x86. For details of the deadlock scenario, see the validator output:
    
      ======================================================
      [ BUG: hard-safe -> hard-unsafe lock order detected! ]
      ------------------------------------------------------
      idle/1 [HC0[0]:SC0[0]:HE0:SE1] is trying to acquire:
       (msi_lock){....}, at: [<c04ff8d2>] startup_msi_irq_wo_maskbit+0x10/0x35
    
      and this task is already holding:
       (&irq_desc[i].lock){++..}, at: [<c015b924>] probe_irq_on+0x36/0x107
      which would create a new lock dependency:
       (&irq_desc[i].lock){++..} -> (msi_lock){....}
    
      but this new dependency connects a hard-irq-safe lock:
       (&irq_desc[i].lock){++..}
      ... which became hard-irq-safe at:
        [<c01468c4>] lockdep_acquire+0x68/0x84
        [<c10485e9>] _spin_lock+0x21/0x2f
        [<c015aff5>] __do_IRQ+0x3d/0x113
        [<c01062d3>] do_IRQ+0x8c/0xad
    
      to a hard-irq-unsafe lock:
       (vector_lock){--..}
      ... which became hard-irq-unsafe at:
      ...  [<c01468c4>] lockdep_acquire+0x68/0x84
        [<c10485e9>] _spin_lock+0x21/0x2f
        [<c011b5e8>] assign_irq_vector+0x34/0xc8
        [<c1aa82fa>] setup_IO_APIC+0x45a/0xcff
        [<c1aa56e3>] smp_prepare_cpus+0x5ea/0x8aa
        [<c010033f>] init+0x32/0x2cb
        [<c0102005>] kernel_thread_helper+0x5/0xb
    
      which could potentially lead to deadlocks!
    
      other info that might help us debug this:
    
      3 locks held by idle/1:
       #0:  (port_mutex){--..}, at: [<c067070d>] uart_add_one_port+0x61/0x289
       #1:  (&state->mutex){--..}, at: [<c067071f>] uart_add_one_port+0x73/0x289
       #2:  (&irq_desc[i].lock){++..}, at: [<c015b924>] probe_irq_on+0x36/0x107
    
      the hard-irq-safe lock's dependencies:
      -> (&irq_desc[i].lock){++..} ops: 9861 {
         initial-use  at:
                              [<c01468c4>] lockdep_acquire+0x68/0x84
                              [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                              [<c015b415>] setup_irq+0x9b/0x14d
                              [<c1aaa4c4>] time_init_hook+0xf/0x11
                              [<c1a9f320>] time_init+0x44/0x46
                              [<c1a9955f>] start_kernel+0x191/0x38f
                              [<c0100210>] 0xc0100210
         in-hardirq-W at:
                              [<c01468c4>] lockdep_acquire+0x68/0x84
                              [<c10485e9>] _spin_lock+0x21/0x2f
                              [<c015aff5>] __do_IRQ+0x3d/0x113
                              [<c01062d3>] do_IRQ+0x8c/0xad
         in-softirq-W at:
                              [<c01468c4>] lockdep_acquire+0x68/0x84
                              [<c10485e9>] _spin_lock+0x21/0x2f
                              [<c015aff5>] __do_IRQ+0x3d/0x113
                              [<c01062d3>] do_IRQ+0x8c/0xad
       }
       ... key      at: [<c1ea31e0>] irq_desc_lock_type+0x0/0x20
        -> (i8259A_lock){++..} ops: 5149 {
           initial-use  at:
                            [<c01468c4>] lockdep_acquire+0x68/0x84
                            [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                            [<c0108090>] init_8259A+0x11/0x8f
                            [<c1aa0d22>] init_ISA_irqs+0x12/0x4d
                            [<c1aaa4f0>] pre_intr_init_hook+0x8/0xa
                            [<c1aa0cb9>] init_IRQ+0xe/0x65
                            [<c1a99546>] start_kernel+0x178/0x38f
                            [<c0100210>] 0xc0100210
           in-hardirq-W at:
                            [<c01468c4>] lockdep_acquire+0x68/0x84
                            [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                            [<c0107fb0>] mask_and_ack_8259A+0x1b/0xcc
                            [<c015b007>] __do_IRQ+0x4f/0x113
                            [<c01062d3>] do_IRQ+0x8c/0xad
           in-softirq-W at:
                            [<c01468c4>] lockdep_acquire+0x68/0x84
                            [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                            [<c0107fb0>] mask_and_ack_8259A+0x1b/0xcc
                            [<c015b007>] __do_IRQ+0x4f/0x113
                            [<c01062d3>] do_IRQ+0x8c/0xad
         }
         ... key      at: [<c142f174>] i8259A_lock+0x14/0x40
       ... acquired at:
         [<c01468c4>] lockdep_acquire+0x68/0x84
         [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
         [<c0107eb2>] enable_8259A_irq+0x10/0x47
         [<c0107f12>] startup_8259A_irq+0x8/0xc
         [<c015b45e>] setup_irq+0xe4/0x14d
         [<c1aaa4c4>] time_init_hook+0xf/0x11
         [<c1a9f320>] time_init+0x44/0x46
         [<c1a9955f>] start_kernel+0x191/0x38f
         [<c0100210>] 0xc0100210
    
        -> (ioapic_lock){+...} ops: 122 {
           initial-use  at:
                            [<c01468c4>] lockdep_acquire+0x68/0x84
                            [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                            [<c1aa71db>] io_apic_get_version+0x16/0x55
                            [<c1aa5c73>] mp_register_ioapic+0xc6/0x127
                            [<c1aa382e>] acpi_parse_ioapic+0x2d/0x39
                            [<c1abe031>] acpi_table_parse_madt_family+0xb4/0x100
                            [<c1abe093>] acpi_table_parse_madt+0x16/0x18
                            [<c1aa3c8a>] acpi_boot_init+0x132/0x251
                            [<c1aa08ea>] setup_arch+0xd36/0xe37
                            [<c1a99434>] start_kernel+0x66/0x38f
                            [<c0100210>] 0xc0100210
           in-hardirq-W at:
                            [<c01468c4>] lockdep_acquire+0x68/0x84
                            [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                            [<c011bce1>] mask_IO_APIC_irq+0x11/0x31
                            [<c011c5cc>] ack_edge_ioapic_vector+0x31/0x41
                            [<c015b007>] __do_IRQ+0x4f/0x113
                            [<c01062d3>] do_IRQ+0x8c/0xad
         }
         ... key      at: [<c1432514>] ioapic_lock+0x14/0x3c
          -> (i8259A_lock){++..} ops: 5149 {
             initial-use  at:
                             [<c01468c4>] lockdep_acquire+0x68/0x84
                             [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                             [<c0108090>] init_8259A+0x11/0x8f
                             [<c1aa0d22>] init_ISA_irqs+0x12/0x4d
                             [<c1aaa4f0>] pre_intr_init_hook+0x8/0xa
                             [<c1aa0cb9>] init_IRQ+0xe/0x65
                             [<c1a99546>] start_kernel+0x178/0x38f
                             [<c0100210>] 0xc0100210
             in-hardirq-W at:
                             [<c01468c4>] lockdep_acquire+0x68/0x84
                             [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                             [<c0107fb0>] mask_and_ack_8259A+0x1b/0xcc
                             [<c015b007>] __do_IRQ+0x4f/0x113
                             [<c01062d3>] do_IRQ+0x8c/0xad
             in-softirq-W at:
                             [<c01468c4>] lockdep_acquire+0x68/0x84
                             [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
                             [<c0107fb0>] mask_and_ack_8259A+0x1b/0xcc
                             [<c015b007>] __do_IRQ+0x4f/0x113
                             [<c01062d3>] do_IRQ+0x8c/0xad
           }
           ... key      at: [<c142f174>] i8259A_lock+0x14/0x40
         ... acquired at:
         [<c01468c4>] lockdep_acquire+0x68/0x84
         [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
         [<c0107e6b>] disable_8259A_irq+0x10/0x47
         [<c011bdbd>] startup_edge_ioapic_vector+0x31/0x58
         [<c015b45e>] setup_irq+0xe4/0x14d
         [<c015b5a1>] request_irq+0xda/0xf9
         [<c1ac983a>] rtc_init+0x6a/0x1a7
         [<c0100457>] init+0x14a/0x2cb
         [<c0102005>] kernel_thread_helper+0x5/0xb
    
       ... acquired at:
         [<c01468c4>] lockdep_acquire+0x68/0x84
         [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
         [<c011bce1>] mask_IO_APIC_irq+0x11/0x31
         [<c011c5cc>] ack_edge_ioapic_vector+0x31/0x41
         [<c015b007>] __do_IRQ+0x4f/0x113
         [<c01062d3>] do_IRQ+0x8c/0xad
    
      the hard-irq-unsafe lock's dependencies:
      -> (vector_lock){--..} ops: 31 {
         initial-use  at:
                              [<c01468c4>] lockdep_acquire+0x68/0x84
                              [<c10485e9>] _spin_lock+0x21/0x2f
                              [<c011b5e8>] assign_irq_vector+0x34/0xc8
                              [<c1aa82fa>] setup_IO_APIC+0x45a/0xcff
                              [<c1aa56e3>] smp_prepare_cpus+0x5ea/0x8aa
                              [<c010033f>] init+0x32/0x2cb
                              [<c0102005>] kernel_thread_helper+0x5/0xb
         softirq-on-W at:
                              [<c01468c4>] lockdep_acquire+0x68/0x84
                              [<c10485e9>] _spin_lock+0x21/0x2f
                              [<c011b5e8>] assign_irq_vector+0x34/0xc8
                              [<c1aa82fa>] setup_IO_APIC+0x45a/0xcff
                              [<c1aa56e3>] smp_prepare_cpus+0x5ea/0x8aa
                              [<c010033f>] init+0x32/0x2cb
                              [<c0102005>] kernel_thread_helper+0x5/0xb
         hardirq-on-W at:
                              [<c01468c4>] lockdep_acquire+0x68/0x84
                              [<c10485e9>] _spin_lock+0x21/0x2f
                              [<c011b5e8>] assign_irq_vector+0x34/0xc8
                              [<c1aa82fa>] setup_IO_APIC+0x45a/0xcff
                              [<c1aa56e3>] smp_prepare_cpus+0x5ea/0x8aa
                              [<c010033f>] init+0x32/0x2cb
                              [<c0102005>] kernel_thread_helper+0x5/0xb
       }
       ... key      at: [<c1432574>] vector_lock+0x14/0x3c
    
      stack backtrace:
       [<c0104f36>] show_trace+0xd/0xf
       [<c010543e>] dump_stack+0x17/0x19
       [<c0144e34>] check_usage+0x1f6/0x203
       [<c0146395>] __lockdep_acquire+0x8c2/0xaa5
       [<c01468c4>] lockdep_acquire+0x68/0x84
       [<c10487f4>] _spin_lock_irqsave+0x2a/0x3a
       [<c04ff8d2>] startup_msi_irq_wo_maskbit+0x10/0x35
       [<c015b932>] probe_irq_on+0x44/0x107
       [<c0673d58>] serial8250_config_port+0x84b/0x986
       [<c06707b1>] uart_add_one_port+0x105/0x289
       [<c1ace54b>] serial8250_init+0xc3/0x10a
       [<c0100457>] init+0x14a/0x2cb
       [<c0102005>] kernel_thread_helper+0x5/0xb
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Jan Beulich <jbeulich@novell.com>
    Cc: Andi Kleen <ak@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 357c2b9056df447390b7df3e49960a4c609a89a9
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:57:13 2006 +0200

    [PATCH] x86_64: remove unused gart header file
    
    include/asm-x86_64/gart-mapping.h is only ever used in
    arch/x86_64/kernel/setup.c and none of its contents are referenced.
    Looks to be leftover cruft not removed in the dma_ops patch.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 08cd36570e47176c7b6bd3e80125aa46c4638097
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:57:10 2006 +0200

    [PATCH] x86_64: Optimize bitmap_weight for small bitmaps
    
    Use inline code bitmaps <= BITS_PER_LONG in bitmap_weight. This
    gives _much_ better code.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5282aab87a8be3f5e6c36a4c2ee4b71852def1bb
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:57:07 2006 +0200

    [PATCH] x86_64: Remove ia32_sys_call_table export
    
    It was originally added for 2.4 oprofile, but 2.6 oprofile doesn't
    need that anymore. Shouldn't be any use in tree anymore and it doesn't
    make much sense to export the ia32 syscalls when the main syscalls
    are not exported.
    
    I think Adrian Bunk asked for removing it several times.
    
    Also included hunk from Adrian to remove the .globl ia32_sys_call_table
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c0f80fab3724aa44b3352d88155fe0eaae0e54a
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:57:04 2006 +0200

    [PATCH] x86_64: Remove long obsolete CVS
    
    Early development of x86-64 Linux was in CVS, but that hasn't been
    the case for a long time now. Remove the obsolete $Id$s.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e4ff115740c28dea463561aa1405a3c0de0d2d0
Author: Don Zickus <dzickus@redhat.com>
Date:   Mon Jun 26 13:57:01 2006 +0200

    [PATCH] x86_64: nmi watchdog header cleanup
    
    Misc header cleanup for nmi watchdog.
    
    Signed-off-by: Don Zickus <dzickus@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 14118c3cdd46d72e503ee2f727b11d881f72f755
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 13:56:58 2006 +0200

    [PATCH] x86_64: fix unlikely profiling & vsyscalls on x86_64
    
    fix unlikely profiling in vsyscalls ...
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4b787e0b831c71c6b09902b66575dadb2260a7c8
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:56:55 2006 +0200

    [PATCH] x86_64: add END()/ENDPROC() annotations to entry.S
    
    Since END()/ENDPROC() are now available, add respective annotations to
    x86_64's entry.S. This should help debugging activities.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bebfa1013eee1d91b3242e5801cc8fbdfaf148ec
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:52 2006 +0200

    [PATCH] x86_64: Add compat_printk and sysctl to turn off compat layer warnings
    
    Sometimes e.g. with crashme the compat layer warnings can be noisy.
    Add a way to turn them off by gating all output through compat_printk
    that checks a global sysctl. The default is not changed.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f201611fcecdfa825471dc425ee007997228fae4
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:49 2006 +0200

    [PATCH] x86_64: Use -ENODEV in IOMMU initialization
    
    Fix
    
    initcall at 0xffffffff806c5b89: pci_iommu_init+0x0/0x53c(): returned with error code -1
    
    Return -ENODEV instead when the IOMMU is not used.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ebcc00e95fa78218a048a88d8d5ee491aa7d6d0
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:56:46 2006 +0200

    [PATCH] i386/x86-64: simplify ioapic_register_intr()
    
    Simplify (remove duplication of) code in ioapic_register_intr().
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0a1ad60d7a7eb433095bc1b2c8b475f3f278f61d
Author: Jan Beulich <jbeulich@novell.com>
Date:   Mon Jun 26 13:56:43 2006 +0200

    [PATCH] x86_64: serialize assign_irq_vector() use of static variables
    
    Since assign_irq_vector() can be called at runtime, its access of static
    variables should be protected by a lock.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a32073bffc656ca4bde6002b6cf7c1a8e0e22712
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:40 2006 +0200

    [PATCH] x86_64: Clean and enhance up K8 northbridge access code
    
     - Factor out the duplicated access/cache code into a single file
       * Shared between i386/x86-64.
     - Share flush code between AGP and IOMMU
       * Fix a bug: AGP didn't wait for end of flush before
     - Drop 8 northbridges limit and allocate dynamically
     - Add lock to serialize AGP and IOMMU GART flushes
     - Add PCI ID for next AMD northbridge
     - Random related cleanups
    
    The old K8 NUMA discovery code is unchanged. New systems
    should all use SRAT for this.
    
    Cc: "Navin Boppuri" <navin.boppuri@newisys.com>
    Cc: Dave Jones <davej@redhat.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c2d9cd218916276e52a5dae827b84a159fe5c96
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:56:37 2006 +0200

    [PATCH] x86_64: trivial gart clean-up
    
    A trivial change to have gart_unmap_sg call gart_unmap_single directly,
    instead of bouncing through the dma_unmap_single wrapper in
    dma-mapping.h.
    
    This change required moving the gart_unmap_single above gart_unmap_sg,
    and under gart_map_single (which seems a more logical place that its
    current location IMHO).
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0f2d6536e3515b5b1b7ae97dc8f176860c8c2ce
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:34 2006 +0200

    [PATCH] x86_64: Implement compat functions for PTRACE_SETSIGINFO/GETSIGINFO
    
    Previously we would just silently provide 64 bit services
    for this to 32bit processes.
    
    I also added all the other cases explicitely to the ptrace
    compat wrapper to make sure this doesn't happen again.
    
    And removed one bogus check in the wrapper.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5adc9c79d3a15478c0028139c54453ff3900488
Author: Mike Waychison <mikew@google.com>
Date:   Mon Jun 26 13:56:31 2006 +0200

    [PATCH] x86_64: iommu_gart_bitmap search to cross next_bit
    
    Allow search for a contiguous block of iommu space to cross the next_bit
    marker if we have already committed ourselves to flushing the gart.
    
    There shouldn't be any reason why we'd restrict the search.
    
    Signed-off-by: Mike Waychison <mikew@google.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed0a893fc8866baf116323acbcd883a3cc4a36a3
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:28 2006 +0200

    [PATCH] x86_64: Remove bogus comment in topology.h
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c5846470c30580bbcb4d5f2339f75a2c88cfe6e
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 13:56:25 2006 +0200

    [PATCH] x86_64: x86_64-enable-large-bzImage.patch
    
    enable large bzImages on x86_64. (fix is from x86's build.c) Using this
    patch i have successfully built and booted an allyesconfig 13MB+ bzImage
    on x86_64 too:
    
     $ size64 vmlinux
        text    data     bss     dec     hex filename
     23444831        8202642 3439360 35086833        21761f1 vmlinux
    
     -rw-rw-r--  1 mingo mingo 13121740 Apr 19 09:32 arch/x86_64/boot/bzImage
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c90bb87730613709e65c03c86d614e31a675d4f
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:22 2006 +0200

    [PATCH] x86_64: Remove most of ia32_unistd.h
    
    It's only needed for three system calls, no need to maintain
    a full list forever.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f2036f3e280ef1df072c5b2ca115a0e766c1d10
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Mon Jun 26 13:56:19 2006 +0200

    [PATCH] x86_64: pci-dma.c clean-up - trivial
    
    Replace hard coded DMA masks with #defines from
    include/linux/dma-mapping.h
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d167a51877e94dda73dd656c51f363502309f713
Author: Gerd Hoffmann <kraxel@suse.de>
Date:   Mon Jun 26 13:56:16 2006 +0200

    [PATCH] x86_64: x86_64 version of the smp alternative patch.
    
    Changes are largely identical to the i386 version:
    
     * alternative #define are moved to the new alternative.h file.
     * one new elf section with pointers to the lock prefixes which can be
       nop'ed out for non-smp.
     * two new elf sections simliar to the "classic" alternatives to
       replace SMP code with simpler UP code.
     * fixup headers to use alternative.h instead of defining their own
       LOCK / LOCK_PREFIX macros.
    
    The patch reuses the i386 version of the alternatives code to avoid code
    duplication.  The code in alternatives.c was shuffled around a bit to
    reduce the number of #ifdefs needed.  It also got some tweaks needed for
    x86_64 (vsyscall page handling) and new features (noreplacement option
    which was x86_64 only up to now).  Debug printk's are changed from
    compile-time to runtime.
    
    Loosely based on a early version from Bastian Blank <waldi@debian.org>
    
    Signed-off-by: Gerd Hoffmann <kraxel@suse.de>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 240cd6a80642da528bfa382ec2ae4e3cb8991ea7
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:13 2006 +0200

    [PATCH] i386/x86-64: Emulate CPUID4 on AMD
    
    Intel systems report the cache level data from CPUID 4 in sysfs.
    Add a CPUID 4 emulation for AMD CPUs to report the same
    information for them. This allows programs to read this
    information in a uniform way.
    
    The AMD way to report this is less flexible so some assumptions
    are hardcoded (e.g. no L3)
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit faee9a5dc9d8399cc3b1b8e18b6d7ff7b17f1af1
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:10 2006 +0200

    [PATCH] i386/x86-64: Use new official CPUID to get APICID/core split on AMD platforms
    
    Previously the apicid<->coreid split was computed based on the max
    number of cores. Now use a new CPUID AMD defined for that. On most
    systems right now it should be 0 and the old method will be used.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79121ea9f098934850347eeed3857ffd836810c3
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:07 2006 +0200

    [PATCH] x86_64: Use __always_inline for __inline_memcpy
    
    Inspired from i386 changes
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f4fdb7fba0b3ec66df39d0e743e701404161fb8
Author: ravikiran thirumalai <kiran@scalex86.org>
Date:   Mon Jun 26 13:56:04 2006 +0200

    [PATCH] x86_64: Use local APIC ID from local APIC instead of CPUID
    
    vSMPowered systems use apic_cluster too.  Forcing apic_physflat works
    on these systems too, but only if we change phys_pkg_id to use
    hard_smp_prcoessor_id() instead of cpuid_ebx.  I am guessing other
    multichassi cluster systems would need this too.
    
    Signed-off-by: ravikiran thirumalai <kiran@scalex86.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c393e7b95bceafcefd5357afdda9f5047b6aa69
Author: Andi Kleen <ak@suse.de>
Date:   Mon Jun 26 13:56:01 2006 +0200

    [PATCH] x86_64: Update defconfig
    
    Enable some hwmon drivers as modules and tulip and stack unwinding
    
    Kernel image should be somewhat bigger now because of the unwind
    information being included, but you'll get exact backtraces for that.
    
    Signed-off-by: Andi Kleen <ak@suse.de>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8871e73fdbde07d0a41393f7ee30787b65387b36
Merge: 61a46dc... 749805d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 10:08:32 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC]: Add iomap interfaces.
      [OPENPROM]: Rewrite driver to use in-kernel device tree.
      [OPENPROMFS]: Rewrite using in-kernel device tree and seq_file.
      [SPARC]: Add unique device_node IDs and a ".node" property.
      [SPARC]: Add of_set_property() interface.
      [SPARC64]: Export auxio_register to modules.
      [SPARC64]: Add missing interfaces to dma-mapping.h
      [SPARC64]: Export _PAGE_IE to modules.
      [SPARC64]: Allow floppy driver to build modular.
      [SPARC]: Export x_bus_type to modules.
      [RIOWATCHDOG]: Fix the build.
      [CPWATCHDOG]: Fix the build.
      [PARPORT] sunbpp: Fix typo.
      [MTD] sun_uflash: Port to new EBUS device layer.

commit 61a46dc9d1c10d07a2ed6b7d346b868803b52506
Merge: b78709c... 8070b2b...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 26 10:08:13 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (42 commits)
      [IOAT]: Do not dereference THIS_MODULE directly to set unsafe.
      [NETROM]: Fix possible null pointer dereference.
      [NET] netpoll: break recursive loop in netpoll rx path
      [NET] netpoll: don't spin forever sending to stopped queues
      [IRDA]: add some IBM think pads
      [ATM]: atm/mpc.c warning fix
      [NET]: skb_find_text ignores to argument
      [NET]: make net/core/dev.c:netdev_nit static
      [NET]: Fix GSO problems in dev_hard_start_xmit()
      [NET]: Fix CHECKSUM_HW GSO problems.
      [TIPC]: Fix incorrect correction to discovery timer frequency computation.
      [TIPC]: Get rid of dynamically allocated arrays in broadcast code.
      [TIPC]: Fixed link switchover bugs
      [TIPC]: Enhanced & cleaned up system messages; fixed 2 obscure memory leaks.
      [TIPC]: First phase of assert() cleanup
      [TIPC]: Disallow config operations that aren't supported in certain modes.
      [TIPC]: Fixed memory leak in tipc_link_send() when destination is unreachable
      [TIPC]: Added missing warning for out-of-memory condition
      [TIPC]: Withdrawing all names from nameless port now returns success, not error
      [TIPC]: Optimized argument validation done by connect().
      ...

commit 2e2d0dcc1bd7ca7c26ea5e29efb7f34bbd564f1c
Author: olecom <olecom@mail.ru>
Date:   Mon Jun 26 19:05:40 2006 +0200

    typo fixes
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit b78709cfd4387c15a9894748bcada8a4ca75c561
Author: Peter Williams <pwil3058@bigpond.net.au>
Date:   Mon Jun 26 16:58:00 2006 +1000

    [PATCH] sched: fix SCHED_FIFO bug in sys_sched_rr_get_interval()
    
    The introduction of SCHED_BATCH scheduling class with a value of 3 means
    that the expression (p->policy & SCHED_FIFO) will return true if policy
    is SCHED_BATCH or SCHED_FIFO.
    
    Unfortunately, this expression is used in sys_sched_rr_get_interval()
    and in the absence of a comment to say that this is intentional I
    presume that it is unintentional and erroneous.
    
    The fix is to change the expression to (p->policy == SCHED_FIFO).
    
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f274afc9933e5fd5987a4a2a5f02687958f8ba65
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Mon Jun 26 19:01:01 2006 +0200

    Clean up 'inline is not at beginning' warnings for usb storage
    
    Usually we don't care much about 'gcc -W' warnings, but some of us do build
    kernels that way to look for problems, and then the fewer warnings we have
    to wade through the better. Especially when they are very easy and
    non-intrusive to clean up. Which is the case for the following warnings
    spewed by drivers/usb/storage/usb.h :
    
      drivers/usb/storage/usb.h:163: warning: `inline' is not at beginning of
    +declaration
      drivers/usb/storage/usb.h:166: warning: `inline' is not at beginning of
    +declaration
    
    There's also some precedence for cleaning up these warnings. I've had
    a few patches merged in the past that remove exactly this class of
    warnings.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 2139a7fbf3effd8cad505871e3a3c308780ada32
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Mon Jun 26 00:28:02 2006 -0700

    [PATCH] initramfs overwrite fix
    
    This patch ensures that initramfs overwrites work correctly, even when dealing
    with device nodes of different types.  Furthermore, when replacing a file
    which already exists, we must make very certain that we truncate the existing
    file.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Cc: Michael Neuling <mikey@neuling.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05381954243de2348def8e338ca23fb40a0a721d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 00:28:01 2006 -0700

    [PATCH] drivers/md/md.c: make code static
    
    Make needlessly global code static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f655675b3fe09c4d0506d357527fe07544623009
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:28:01 2006 -0700

    [PATCH] md: Allow the write_mostly flag to be set via sysfs
    
    It appears in /sys/mdX/md/dev-YYY/state
    and can be set or cleared by writing 'writemostly' or '-writemostly'
    respectively.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a94213b1fa7b26dcc271bf4b4f9eebf1f1af33a2
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:28:00 2006 -0700

    [PATCH] md: Allow resync_start to be set and queried via sysfs
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d4dbd0250ea1d24bb3d2d13559432fa069d795e2
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:59 2006 -0700

    [PATCH] md: Allow raid 'layout' to be read and set via sysfs
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45dc2de1e53a29f898b81326b8a16e6192d52e4e
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:58 2006 -0700

    [PATCH] md: Allow rdev state to be set via sysfs
    
    The md/dev-XXX/state file can now be written:
    
     "faulty" simulates an error on the device
     "remove" removes the device from the array (if it is not busy)
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e653b6342c94016f5cc9937061ef99e9c4b4045
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:58 2006 -0700

    [PATCH] md: Set/get state of array via sysfs
    
    This allows the state of an md/array to be directly controlled via sysfs and
    adds the ability to stop and array without tearing it down.
    
    Array states/settings:
    
     clear
         No devices, no size, no level
         Equivalent to STOP_ARRAY ioctl
     inactive
         May have some settings, but array is not active
            all IO results in error
         When written, doesn't tear down array, but just stops it
     suspended (not supported yet)
         All IO requests will block. The array can be reconfigured.
         Writing this, if accepted, will block until array is quiescent
     readonly
         no resync can happen.  no superblocks get written.
         write requests fail
     read-auto
         like readonly, but behaves like 'clean' on a write request.
    
     clean - no pending writes, but otherwise active.
         When written to inactive array, starts without resync
         If a write request arrives then
           if metadata is known, mark 'dirty' and switch to 'active'.
           if not known, block and switch to write-pending
         If written to an active array that has pending writes, then fails.
     active
         fully active: IO and resync can be happening.
         When written to inactive array, starts with resync
    
     write-pending (not supported yet)
         clean, but writes are blocked waiting for 'active' to be written.
    
     active-idle
         like active, but no writes have been seen for a while (100msec).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42543769142d2375f2b5f8fc9cac999f84bd4c4c
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:57 2006 -0700

    [PATCH] md: Don't write dirty/clean update to spares - leave them alone
    
    - record the 'event' count on each individual device (they
      might sometimes be slightly different now)
    - add a new value for 'sb_dirty': '3' means that the super
      block only needs to be updated to record a clean<->dirty
      transition.
    - Prefer odd event numbers for dirty states and even numbers
      for clean states
    - Using all the above, don't update the superblock on
      a spare device if the update is just doing a clean-dirty
      transition.  To accomodate this, a transition from
      dirty back to clean might now decrement the events counter
      if nothing else has changed.
    
    The net effect of this is that spare drives will not see any IO requests
    during normal running of the array, so they can go to sleep if that is what
    they want to do.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 07d84d109d8beedd68df9da2e4e9f25c8217e7fb
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:56 2006 -0700

    [PATCH] md: Allow re-add to work on array without bitmaps
    
    When an array has a bitmap, a device can be removed and re-added and only
    blocks changes since the removal (as recorded in the bitmap) will be resynced.
    
    It should be possible to do a similar thing to arrays without bitmaps.  i.e.
    if a device is removed and re-added and *no* changes have been made in the
    interim, then the add should not require a resync.
    
    This patch allows that option.  This means that when assembling an array one
    device at a time (e.g.  during device discovery) the array can be enabled
    read-only as soon as enough devices are available, but extra devices can still
    be added without causing a resync.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3285edf152cefff482f95ceb90b1bd46ac169df1
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:55 2006 -0700

    [PATCH] md: Fix bug that stops raid5 resync from happening
    
    As data_disks is *less* than raid_disks, the current test here is obviously
    wrong.  And as the difference is already available in conf->max_degraded, it
    makes much more sense to use that.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b3cc9ec76ba44d010f4c820c4608b91aaf28a0b9
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 26 00:27:54 2006 -0700

    [PATCH] md: Fix Kconfig error
    
    RAID5 recently changed to RAID456
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4d2554d045497d1be3204cf67385f966f01cc9bd
Author: Justin Piszcz <jpiszcz@lucidpixels.com>
Date:   Mon Jun 26 00:27:50 2006 -0700

    [PATCH] md: md Kconfig speeling feex
    
    I was experimenting with Linux SW raid today and found a spelling error when
    reading the help menus...  (and fly spell found more).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8838832830d2c6c28ae2db93188ae90652eb7fc2
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:50 2006 -0700

    [PATCH] md: Calculate correct array size for raid10 in new offset mode
    
    The size calculation made assumtion which the new offset mode didn't
    follow.  This gets the size right in all cases.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce25c31bdd3b39266debd86a7732007e05983a67
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:49 2006 -0700

    [PATCH] md: Change md/bitmap file handling to use bmap to file blocks-fix
    
    Fix problems with new bmap based access to bitmap files.
    
    1/ When not using a file based bitmap, attach a NULL list of buffers
       to each page so the common free_buffer routine can cope.
    2/ Use submit_bh to read as well as write, rather than vfs_read.
       This makes read and write more symetric.
    3/ sync the file before reading, to ensure that the page cache has no
       dirty pages that might get written out later.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d785a06a0b9d0cd86b3cc1bf8e236e62af7b47ed
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:48 2006 -0700

    [PATCH] md/bitmap: change md/bitmap file handling to use bmap to file blocks
    
    If md is asked to store a bitmap in a file, it tries to hold onto the page
    cache pages for that file, manipulate them directly, and call a cocktail of
    operations to write the file out.  I don't believe this is a supportable
    approach.
    
    This patch changes the approach to use the same approach as swap files.  i.e.
    bmap is used to enumerate all the block address of parts of the file and we
    write directly to those blocks of the device.
    
    swapfile only uses parts of the file that provide a full pages at contiguous
    addresses.  We don't have that luxury so we have to cope with pages that are
    non-contiguous in storage.  To handle this we attach buffers to each page, and
    store the addresses in those buffers.
    
    With this approach the pagecache may contain data which is inconsistent with
    what is on disk.  To alleviate the problems this can cause, md invalidates the
    pagecache when releasing the file.  If the file is to be examined while the
    array is active (a non-critical but occasionally useful function), O_DIRECT io
    must be used.  And new version of mdadm will have support for this.
    
    This approach simplifies a lot of code:
     - we no longer need to keep a list of pages which we need to wait for,
       as the b_endio function can keep track of how many outstanding
       writes there are.  This saves a mempool.
     - -EAGAIN returns from write_page are no longer possible (not sure if
        they ever were actually).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acc55e220166a5ad898e66ad6153fd62eaaac76d
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:47 2006 -0700

    [PATCH] md/bitmap: tidy up i_writecount handling in md/bitmap
    
    md/bitmap modifies i_writecount of a bitmap file to make sure that no-one else
    writes to it.  The reverting of the change is sometimes done twice, and there
    is one error path where it is omitted.
    
    This patch tidies that up.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0cdd02cabd86b5d547f882005e23a93929f0ace9
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:47 2006 -0700

    [PATCH] md/bitmap: remove dead code from md/bitmap
    
    bitmap_active is never called, and the BITMAP_ACTIVE flag is never users or
    tested, so discard them both.
    
    Also remove some out-of-date 'todo' comments.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a647e4bc5ce697e25ff50d2e22de68a581b1ed38
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:46 2006 -0700

    [PATCH] md/bitmap: remove unnecessary page reference manipulations from md/bitmap code
    
    md/bitmap gets a collection of pages representing the bitmap when it
    initialises the bitmap, and puts all the references when discarding the
    bitmap.
    
    It also occasionally takes extra references without any good reason, and
    sometimes drops them ...  though it doesn't always drop them, which can result
    in a memory leak.
    
    This patch removes the unnecessary 'get_page' calls, and the corresponding
    'put_page' calls.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e16b68b6e456a61b895a198baf5aa473cf2a32bf
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:45 2006 -0700

    [PATCH] md/bitmap: use set_bit etc for bitmap page attributes
    
    In particular, this means that we use 4 bits per page instead of a whole
    unsigned long.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ec7a3197f4777eff5039251d0e08a031b3372d6c
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:45 2006 -0700

    [PATCH] md/bitmap: cleaner separation of page attribute handlers in md/bitmap
    
    md/bitmap has some attributes per-page.  Handling of these attributes in
    largely abstracted in set_page_attr and clear_page_attr.  However
    get_page_attr exposes the format used to store them.  So prior to changing
    that format, introduce test_page_attr instead of get_page_attr, and make
    appropriate usage changes.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b79ccf0cdd9f59e5f99017e1a5d23da336544b2
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:44 2006 -0700

    [PATCH] md/bitmap: remove bitmap writeback daemon
    
    md/bitmap currently has a separate thread to wait for writes to the bitmap
    file to complete (as we cannot get a callback on that action).
    
    However this isn't needed as bitmap_unplug is called from process context and
    waits for the writeback thread to do it's work.  The same result can be
    achieved by doing the waiting directly in bitmap_unplug.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7375ab324971e7acbea9f02a0269ae7348f4147
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:43 2006 -0700

    [PATCH] md/bitmap: fix online removal of file-backed bitmaps
    
    When "mdadm --grow /dev/mdX --bitmap=none" is used to remove a filebacked
    bitmap, the bitmap was disconnected from the array, but the file wasn't closed
    (until the array was stopped).
    
    The file also wasn't closed if adding the bitmap file failed.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 52c03291a832d86c093996d0491a326de4a6b79b
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:43 2006 -0700

    [PATCH] md: split reshape portion of raid5 sync_request into a separate function
    
    ... as raid5 sync_request is WAY too big.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e56341d029f0c2cf31e78dc01d4c861ba4d6a5e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 00:27:42 2006 -0700

    [PATCH] md: make md_print_devices() static
    
    This patch makes the needlessly global md_print_devices() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c93983bf517c100a31e40ef087e19bd3d7aa2d28
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:41 2006 -0700

    [PATCH] md: support stripe/offset mode in raid10
    
    The "industry standard" DDF format allows for a stripe/offset layout where
    data is duplicated on different stripes.  e.g.
    
      A  B  C  D
      D  A  B  C
      E  F  G  H
      H  E  F  G
    
    (columns are drives, rows are stripes, LETTERS are chunks of data).
    
    This is similar to raid10's 'far' mode, but not quite the same.  So enhance
    'far' mode with a 'far/offset' option which follows the layout of DDFs
    stripe/offset.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c7546ccf6463edbeee8d9aac6de7be1cd80d08a
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:41 2006 -0700

    [PATCH] md: allow a linear array to have drives added while active
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fd6c1dce06ec24ef3de20fe0c7ecf2ba9fe5ef9
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:40 2006 -0700

    [PATCH] md: allow checkpoint of recovery with version-1 superblock
    
    For a while we have had checkpointing of resync.  The version-1 superblock
    allows recovery to be checkpointed as well, and this patch implements that.
    
    Due to early carelessness we need to add a feature flag to signal that the
    recovery_offset field is in use, otherwise older kernels would assume that a
    partially recovered array is in fact fully recovered.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8a55c387da28d67d98f56e4f5021462cb61f7a6
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:39 2006 -0700

    [PATCH] md: remove nuisance message at shutdown
    
    At shutdown, we switch all arrays to read-only, which creates a message for
    every instantiated array, even those which aren't actually active.
    
    So remove the message for non-active arrays.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16a53ecc35f2a80dc285be2e769768847d89ca37
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:38 2006 -0700

    [PATCH] md: merge raid5 and raid6 code
    
    There is a lot of commonality between raid5.c and raid6main.c.  This patches
    merges both into one module called raid456.  This saves a lot of code, and
    paves the way for online raid5->raid6 migrations.
    
    There is still duplication, e.g.  between handle_stripe5 and handle_stripe6.
    This will probably be cleaned up later.
    
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 16f17b39f385212b73278a76d482cdcaaebe6c02
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:37 2006 -0700

    [PATCH] md: increase the delay before marking metadata clean, and make it configurable
    
    When a md array has been idle (no writes) for 20msecs it is marked as 'clean'.
     This delay turns out to be too short for some real workloads.  So increase it
    to 200msec (the time to update the metadata should be a tiny fraction of that)
    and make it sysfs-configurable.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9443a1d1f72c688646278c06d0a9a3c79e895325
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:37 2006 -0700

    [PATCH] md: remove useless ioctl warning
    
    This warning was slightly useful back in 2.2 days, but is more an annoyance
    now.  It makes it awkward to add new ioctls (that we we are likely to do that
    in the current climate, but it is possible).
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8932c2e0dcae52e73430878fd8a7a7800176eada
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:36 2006 -0700

    [PATCH] md: remove arbitrary limit on chunk size
    
    The largest chunk size the code can support without substantial surgery is
    2^30 bytes, so make that the limit instead of an arbitrary 4Meg.  Some day,
    the 'chunksize' should change to a sector-shift instead of a byte-count.  Then
    no limit would be needed.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c70810b327a247d12805554d0aa4605e257effb8
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:35 2006 -0700

    [PATCH] md: reformat code in raid1_end_write_request to avoid goto
    
    A recent change made this goto unnecessary, so reformat the code to make it
    clearer what is happening.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72d9486169a2a8353e022813185ba2f32d7dde69
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:35 2006 -0700

    [PATCH] dm: improve error message consistency
    
    Tidy device-mapper error messages to include context information
    automatically.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5c6bd75d06db512515a3781aa97e42df2faf0815
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:34 2006 -0700

    [PATCH] dm: prevent removal if open
    
    If you misuse the device-mapper interface (or there's a bug in your userspace
    tools) it's possible to end up with 'unlinked' mapped devices that cannot be
    removed until you reboot (along with uninterruptible processes).
    
    This patch prevents you from removing a device that is still open.
    
    It introduces dm_lock_for_deletion() which is called when a device is about to
    be removed to ensure that nothing has it open and nothing further can open it.
     It uses a private open_count for this which also lets us remove one of the
    problematic bdget_disk() calls elsewhere.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c2ade42dd35466d90aa6fc7cc717f396e165492f
Author: David Teigland <teigland@redhat.com>
Date:   Mon Jun 26 00:27:33 2006 -0700

    [PATCH] dm: create error table
    
    Add a library function dm_create_error_table() to create a table that rejects
    any I/O sent to a device with EIO.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17b2f66f2a39a4e4d1ed456f35ee3bb598e41d35
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:33 2006 -0700

    [PATCH] dm: add exports
    
    Move definitions of core device-mapper functions for manipulating mapped
    devices and their tables to <linux/device-mapper.h> advertising their
    availability for use elsewhere in the kernel.
    
    Protect the contents of device-mapper.h with ifdef __KERNEL__.  And throw
    in a few formatting clean-ups and extra comments.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b06cfff12f0f87c4bc4d4c4dd76997e72c360ba
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:32 2006 -0700

    [PATCH] dm: consolidate creation functions
    
    Merge dm_create() and dm_create_with_minor() by introducing the special value
    DM_ANY_MINOR to request the allocation of the next available minor number.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 814d68629b40e863997fa0eea459be4cc99a06cc
Author: David Teigland <teigland@redhat.com>
Date:   Mon Jun 26 00:27:31 2006 -0700

    [PATCH] dm table split_args: handle no input
    
    Return sense if dm_split_args is called with a NULL input parameter.
    
    Signed-off-by: David Teigland <teigland@redhat.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce503f59ae899c3e75a8a1cf46f2d44c0c5b5c7c
Author: Jonathan Brassow <jbrassow@redhat.com>
Date:   Mon Jun 26 00:27:30 2006 -0700

    [PATCH] dm kcopyd: error accumulation fix
    
    kcopyd should accumulate errors - otherwise I/O failures may be ignored
    unintentionally.
    
    And invert 'success' (used in a future patch), using a more intuitive
    !(read_err || write_err).
    
    Signed-off-by: Jonathan Brassow <jbrassow@redhat.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a835f11bce68ed990533e49b5dedb00bee46d71
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:30 2006 -0700

    [PATCH] dm mirror log: sync_count fix
    
    When a mirror is reduced in size, clear the part of the bitmap that is no
    longer used.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 29121bd0b00ebb9524971a583fea4a2f7afe8041
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:29 2006 -0700

    [PATCH] dm mirror log: bitset_size fix
    
    Fix the 'sizeof' in the region log bitmap size calculation: it's uint32_t, not
    unsigned long - this breaks on some archs.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b7cca195c4cc051210f3e60a859b779ca833a2e4
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:29 2006 -0700

    [PATCH] dm mirror log: refactor context
    
    Refactor the code that creates the core and disk log contexts to avoid the
    repeated allocation of clean_bits introduced by the last patch.
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 702ca6f0be9ef95087ee2c9f31e6517492554483
Author: Kevin Corry <kevcorry@us.ibm.com>
Date:   Mon Jun 26 00:27:28 2006 -0700

    [PATCH] dm mirror log: sector size fix
    
    On-disk logs for dm-mirror devices are currently hard-coded to use 512 byte
    hard-sector-sizes.  This patch fixes dm-log so it will work with devices with
    non-512-byte hard-sector-sizes.
    
    To maintain full compatibility, instead of moving the clean-bits bitset to a
    bitset, and enlarges the disk-header buffer to encompass both the header and
    the bitset.  The I/O routines for the bitset are removed, and the I/O routines
    for the disk-header now also read/write the bitset.
    
    Signed-off-by: Kevin Corry <kevcorry@us.ibm.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 143535396c7ebd9395a931a000b3963f457712b8
Author: Milan Broz <mbroz@redhat.com>
Date:   Mon Jun 26 00:27:27 2006 -0700

    [PATCH] dm table: get_target: fix last index
    
    The table is indexed from 0, so an index equal to t->num_targets should be
    rejected.
    
    (There is no code in the current tree that would exercise this bug.)
    
    Signed-off-by: Milan Broz <mbroz@redhat.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4c8b3ba34cc1aeab451c7a5cc843c5fd62cbe3d
Author: Neil Brown <neilb@suse.de>
Date:   Mon Jun 26 00:27:26 2006 -0700

    [PATCH] dm: mirror sector offset fix
    
    The device-mapper core does not perform any remapping of bios before passing
    them to the targets.  If a particular mapping begins part-way into a device,
    targets obtain the sector relative to the start of the mapping by subtracting
    ti->begin.
    
    The dm-raid1 target didn't do this everywhere: this patch fixes it, taking
    care to subtract ti->begin exactly once for each bio.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f0b04115368ff383654a3bd26baf8f4be5e81132
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:25 2006 -0700

    [PATCH] dm: fix block device initialisation
    
    In alloc_dev(), we register the device with the block layer and then continue
    to initialize the device.  But register_disk() makes the device available to
    be opened before we have completed initialising it.
    
    This patch moves the final bits of the initialization above the disk
    registration.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 10da4f795f965f22039aa2930b6f80964aad3ee5
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:25 2006 -0700

    [PATCH] dm: add module ref counting
    
    The reference counting on dm-mod is zero if no mapped devices are open.  This
    is incorrect, and can lead to an oops if the module is unloaded while mapped
    devices exist.
    
    This patch claims a reference to the module whenever a device is created, and
    drops it again when the device is freed.
    
    Devices must be removed before dm-mod is unloaded.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ec75f254742766eb729f1d1024a5b4e6692fc5f
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:24 2006 -0700

    [PATCH] dm: fix mapped device ref counting
    
    To avoid races, _minor_lock must be held while changing mapped device
    reference counts.
    
    There are a few paths where a mapped_device pointer is returned before a
    reference is taken.  This patch fixes them.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fba9f90e568e17c326257ee293207b75880b39d6
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:23 2006 -0700

    [PATCH] dm: add DMF_FREEING
    
    There is a chicken and egg problem between the block layer and dm in which the
    gendisk associated with a mapping keeps a reference-less pointer to the
    mapped_device.
    
    This patch uses a new flag DMF_FREEING to indicate when the mapped_device is
    no longer valid.  This is checked to prevent any attempt to open the device
    from succeeding while the device is being destroyed.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f32c10b09940cffc3620ce111315ec44343fd3ca
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:22 2006 -0700

    [PATCH] dm: change minor_lock to spinlock
    
    While removing a device, another another thread might attempt to resurrect it.
    
    This patch replaces the _minor_lock mutex with a spinlock and uses
    atomic_dec_and_lock() to serialize reference counting in dm_put().
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 62f75c2f3244553b1290447abd1f1e6b1144d3e9
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:21 2006 -0700

    [PATCH] dm: move idr_pre_get
    
    idr_pre_get() can sleep while allocating memory.
    
    The next patch will change _minor_lock into a spinlock, so this patch moves
    idr_pre_get() outside the lock in preparation.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba61fdd17d73ddb5c892a9f12383c6c560a20d56
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:21 2006 -0700

    [PATCH] dm: fix idr minor allocation
    
    One part of the system can attempt to use a mapped device before another has
    finished initialising it or while it is being freed.
    
    This patch introduces a place holder value, MINOR_ALLOCED, to mark the minor
    as allocated but in a state where it can't be used, such as mid-allocation or
    mid-free.  At the end of the initialization, it replaces the place holder with
    the pointer to the mapped_device, making it available to the rest of the dm
    subsystem.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5806f07cd2c32920d5105e0f9ff3117338f34eec
Author: Jeff Mahoney <jeffm@suse.com>
Date:   Mon Jun 26 00:27:19 2006 -0700

    [PATCH] lib: add idr_replace
    
    This patch adds idr_replace() to replace an existing pointer in a single
    operation.
    
    Device-mapper will use this to update the pointer it stored against a given
    id.
    
    Signed-off-by: Jeff Mahoney <jeffm@suse.com>
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c51c2752491e5e771de6c8861a85ba46752d7888
Author: Alasdair G Kergon <agk@redhat.com>
Date:   Mon Jun 26 00:27:18 2006 -0700

    [PATCH] dm snapshot: unify chunk_size
    
    Persistent snapshots currently store a private copy of the chunk size.
    Userspace also supplies the chunk size when loading a snapshot.  Ensure
    consistency by only storing the chunk_size in one place instead of two.
    
    Currently the two sizes will differ if the chunk size supplied by userspace
    does not match the chunk size an existing snapshot actually uses.  Amongst
    other problems, this causes an incorrect 'percentage full' to be reported.
    
    The patch ensures consistency by only storing the chunk_size in one place,
    removing it from struct pstore.  Some initialisation is delayed until the
    correct chunk_size is known.  If read_header() discovers that the wrong chunk
    size was supplied, the 'area' buffer (which the header already got read into)
    is reinitialised to the correct size.
    
    [akpm: too late for 2.6.17 - suitable for 2.6.17.x after it has settled]
    
    Signed-off-by: Alasdair G Kergon <agk@redhat.com>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b877a96409a3a99f2ce27b3c6473c9b28298ac7c
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:17 2006 -0700

    [PATCH] VT binding: Make sticon support binding
    
    Do not mark sticon_startup() as __init
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2aea875da2b7e403b13dd05a9dc80665f39d85e4
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:16 2006 -0700

    [PATCH] VT binding: Make promcon support binding
    
    Do not mark promcon_startup() and promcon_init_unimap() as __init
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e86bb8acc0fdca82d22d12d46ef5482ecc408b26
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:15 2006 -0700

    [PATCH] VT binding: Make newport_con support binding
    
    - move register ioremap from newport_startup() to newport_console_init()
    - fonts are freed multiple times, do it only once
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ac08dae816d3ea5160bb3e8420e87c03bf42224b
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:15 2006 -0700

    [PATCH] VT binding: Make mdacon support binding
    
    Do not mark mdacon_startup __init.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6690075d0b97837aca533b92715e6357ad6de279
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:14 2006 -0700

    [PATCH] VT binding: Update documentation
    
    Update Documentation/fb/fbcon.txt and Documentatin/console/console.txt to
    reflect the following changes:
    
    1. sysfs attributes are relocated to /sys/class/vtconsole
    
    2. feature is selectable in Kconfig
    
    3. add sample scripts to fbcon.txt
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5bd42536b395944a1134baa3624b2e0cff6ac7bf
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:13 2006 -0700

    [PATCH] VT binding: Do not create a device file for class device 'fbcon'
    
    The class device "fbcon" does not need to be a device file.  Do not create one
    by passing a major and minor number of zero to
    class_device_create()/destroy().
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13ae66458971b4967350765a8bfaf2a636442e5f
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:12 2006 -0700

    [PATCH] VT binding: Make VT binding a Kconfig option
    
    To enable this feature, CONFIG_VT_HW_CONSOLE_BINDING must be set to 'y'.  This
    feature will default to 'n' to minimize users accidentally corrupting their
    virtual terminals.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6db4063c5b72b46e9793b0f141a7a3984ac6facf
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:12 2006 -0700

    [PATCH] VT binding: Add sysfs control to the VT layer
    
    Add sysfs control to the VT layer.  A new sysfs class, 'vtconsole', and class
    devices 'vtcon[n]' are added.  Each class device file has the following
    attributes:
    
    /sys/class/vtconsole/vtcon[n]/name - read-only attribute showing the
                                         name of the current backend
    
    /sys/class/vtconsole/vtcon[n]/bind - read/write attribute
                 where: 0 - backend is unbound/unbind backend from the VT layer
                        1 - backend is bound/bind backend to the VT layer
    
    In addition, if any of the consoles are in KD_GRAPHICS mode, binding and
    unbinding will not succeed.  KD_GRAPHICS mode usually indicates that the
    underlying console hardware is used for other purposes other than displaying
    text (ie X).  This feature should prevent binding/unbinding from interfering
    with a graphics application using the VT.
    
    [akpm@osdl.org: warning fixes]
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 79062a0d396272f5b103d5223f3c96c58fd27451
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:11 2006 -0700

    [PATCH] VT binding: Add new doc file describing the feature
    
    This newly added file will:
    
    - Describe the characteristics of 2 general types of console drivers
    - How to use the sysfs to unbind and bind console drivers
    - Uses for this feature
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 418d1ce61839251004fee6525f58a4581a75239e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:10 2006 -0700

    [PATCH] VT binding: fbcon: Update documentation
    
    Update Documentation/fb/fbcon.txt to reflect the following changes:
    
    1. Simple illustration of the binding of the console down to individual
       framebuffer drivers
    
    2. Usage of userspace tools to help with recovery of text console
    
    3. How to use the attributes in /sys/class/tty/console to unload fbcon and
       the framebuffer drivers
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e614b18dcedb247ce6f848e623cdf2336df2b476
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:09 2006 -0700

    [PATCH] VT binding: Update fbcon to support binding
    
    The control for binding/unbinding is moved from fbcon to the console layer.
    Thus the fbcon sysfs attributes, attach and detach, are also gone.
    
        1. Add a notifier event that tells fbcon if a framebuffer driver has been
           unregistered.  If no registered driver remains, fbcon will unregister
           itself from the console layer.
    
        2. Replaced calls to give_up_console() with unregister_con_driver().
    
        3. Still use take_over_console() instead of register_con_driver() to
           maintain compatibility
    
        4. Respect the parameter first_fb_vc and last_fb_vc instead of using 0 and
           MAX_NR_CONSOLES - 1. These parameters are settable by the user.
    
        5. When fbcon is completely unbound from the console layer, fbcon will
           also release (iow, decrement module reference counts to zero) all fbdev
           drivers. In other words, a bind or unbind request from the console layer
           will propagate down to the framebuffer drivers.
    
        6. If fbcon is not bound to the console, it will ignore all notifier
           events (except driver registration and unregistration) and all sysfs
           requests.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e795de7631b2366d7301182c8d91f6d2911467b
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:08 2006 -0700

    [PATCH] VT binding: Add binding/unbinding support for the VT console
    
    The framebuffer console is now able to dynamically bind and unbind from the VT
    console layer.  Due to the way the VT console layer works, the drivers
    themselves decide when to bind or unbind.  However, it was decided that
    binding must be controlled, not by the drivers themselves, but by the VT
    console layer.  With this, dynamic binding is possible for all VT console
    drivers, not just fbcon.
    
    Thus, the VT console layer will impose the following to all VT console
    drivers:
    
    - all registered VT console drivers will be entered in a private list
    - drivers can register themselves to the VT console layer, but they cannot
      decide when to bind or unbind. (Exception: To maintain backwards
      compatibility, take_over_console() will automatically bind the driver after
      registration.)
    - drivers can remove themselves from the list by unregistering from the VT
      console layer. A prerequisite for unregistration is that the driver must not
      be bound.
    
    The following functions are new in the vt.c:
    
    register_con_driver() - public function, this function adds the VT console
    driver to an internal list maintained by the VT console
    
    bind_con_driver() - private function, it binds the driver to the console
    
    take_over_console() is changed to call register_con_driver() followed by a
    bind_con_driver().  This is the only time drivers can decide when to bind to
    the VT layer.  This is to maintain backwards compatibility.
    
    unbind_con_driver() - private function, it unbinds the driver from its
    console.  The vacated consoles will be taken over by the default boot console
    driver.
    
    unregister_con_driver() - public function, removes the driver from the
    internal list maintained by the VT console.  It will only succeed if the
    driver is currently unbound.
    
    con_is_bound() checks if the driver is currently bound or not
    
    give_up_console() is just a wrapper to unregister_con_driver().
    
    There are also 3 additional functions meant to be called only by the tty layer
    for sysfs control:
    
    	vt_bind() - calls bind_con_driver()
    	vt_unbind() - calls unbind_con_driver()
    	vt_show_drivers() - shows the list of registered drivers
    
    Most VT console drivers will continue to work as is, but might have problems
    when unbinding or binding which should be fixable with minimal changes.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4a73e1f0283850edc143d28502c1c517c6ab49c
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:07 2006 -0700

    [PATCH] Detaching fbcon: update documentation
    
    Update Documentation/fb/fbcon.txt on the following:
    
    1. sysfs attributes are now located in class/graphics/fbcon
    2. instructions on how to attach, detach and/or unload fbcon
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5428b04405af1bb441aa8aabd314e48b870bc58e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:06 2006 -0700

    [PATCH] Detaching fbcon: add capability to attach/detach fbcon
    
    Add the ability to detach and attach the framebuffer console to and from the
    vt layer.  This is done by echo'ing any value to sysfs attributes located in
    class/graphics/fbcon.  The two attributes are:
    
          attach - bind fbcon to the vt layer
          detach - unbind fbcon from the vt layer
    
    Once fbcon is detached from the vt layer, fbcon can be unloaded if compiled as
    a module.  This feature is quite useful for developers who work on the
    framebuffer or console subsystem.  This is also useful for users who want to
    go to text mode or graphics mode without having to reboot.
    
    Directly unloading the fbcon module is not possible because the vt layer
    increments the module reference count for all bound consoles.  Detaching fbcon
    decrements the module reference count to zero so unloading becomes possible.
    
    Detaching fbcon may interfere with X and/or DRM.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e55186fe5fad31962d0ea5ef267bf0c23d98abd4
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:05 2006 -0700

    [PATCH] Detaching fbcon: clean up exit code
    
    To detach fbcon, it must also clean up all resources it allocated.  This was
    never done before because fbcon cannot be unloaded.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9a17917671d407d37bf23a527aa55acca3cb4735
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:05 2006 -0700

    [PATCH] Detaching fbcon: sdd sysfs class device entry for fbcon
    
    In order for this feature to work, an interface will be needed.  The most
    appropriate is sysfs.  However, the framebuffer console has no sysfs entry
    yet.  This will create a sysfs class device entry for fbcon under
    /sys/class/graphics.
    
    Add a class_device entry 'fbcon' under class 'graphics'.  Console-specific
    attributes which where previously under class/graphics/fb[x] are moved to
    class/graphics/fbcon.  These attributes, 'con_rotate' and 'con_rotate_all',
    are also renamed to 'rotate' and 'rotate_all' respectively.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a06630f3e7fb29f2524e1d7b009eb8b5a278ba23
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:04 2006 -0700

    [PATCH] Detaching fbcon: remove calls to pci_disable_device()
    
    Detaching fbcon allows individual drivers to be unloaded.  However several
    drivers call pci_disable_device() upon exit.  This function will disable the
    BAR's which will kill VGA text mode and/or affect X/DRM.
    
    To prevent this, remove calls to pci_disable_device() from several drivers.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c8ce271fe707d26b7bca4e490067fe65694b363
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:03 2006 -0700

    [PATCH] Detaching fbcon: fix give_up_console()
    
    To allow for detaching fbcon, it must be able to give up the console.
    However, the function give_up_console() is plain broken.  It just sets the
    entries in the console driver map to NULL, it leaves the vt layer without a
    console driver, and does not decrement the module reference count.  Calling
    give_up_console() is guaranteed to hang the machine..
    
    To fix this problem, ensure that the virtual consoles are not left dangling
    without a driver.  All systems have a default boot driver (either vgacon or
    dummycon) which is never unloaded.  For those vt's that lost their driver, the
    default boot driver is reassigned back to them.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50ec42edd9784fad6a37b05be03064ea24098db6
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:27:02 2006 -0700

    [PATCH] Detaching fbcon: fix vgacon to allow retaking of the console
    
    One of the limitations of the framebuffer console system is its inablity to
    unload or detach itself from the console layer.  And once it loads, it also
    locks in framebuffer drivers preventing their unload. Although the con2fbmap
    utility does provide a means to unload individual drivers, it requires that at
    least one framebuffer driver is loaded for use by fbcon.
    
    With this change, it is possible to detach fbcon from the console layer. If it
    is detached, it will reattach the boot console driver (which is permanently
    loaded) back to the console layer so the system can continue to work.  As a
    consequence, fbcon will also decrement its reference count of individual
    framebuffer drivers, allowing all of these drivers to be unloaded even if
    fbcon is still loaded.
    
    Unless you use drivers that restores the display to text mode (rivafb and
    i810fb, for example), detaching fbcon does require assistance from userspace
    tools (ie, vbetools) for text mode to be restored completely.  Without the
    help of these tools, fbcon will leave the VGA console corrupted. The methods
    that can be used will be described in Documentation/fb/fbcon.txt.
    
    Because the vt layer also increments the module reference count for each
    console driver, fbcon cannot be directly unloaded.  It must be detached first
    prior to unload.
    
    Similarly, fbcon can be reattached to the console layer without having to
    reload the module.  A nice feature if fbcon is compiled statically.
    
    Attaching and detaching fbcon is done via sysfs attributes. A class device
    entry for fbcon is created in /sys/class/graphics. The two attributes that
    controls this feature are detach and attach. Two other attributes that are
    piggybacked under /sys/class/graphics/fb[n] that are fbcon-specific,
    'con_rotate' and 'con_rotate_all' are moved to fbcon.  They are renamed as
    'rotate' and 'rotate_all' respectively.
    
    Overall, this feature is a great help for developers working in the
    framebuffer or console layer.  There is not need to continually reboot the
    kernel for every small change. It is also useful for regular users who wants
    to choose between a graphical console or a text console without having to
    reboot.
    
    Example usage for x86:
    
    /* start in text mode */
    modprobe xxxfb
    modprobe fbcon
    /* graphical mode with fbcon using xxxfb */
    echo 1 > /sys/class/graphics/fbcon/detach
    /* back to text mode, will produce corrupt display unless vbetool is used */
    rmmod xxxfb
    modprobe yyyfb
    /* back to graphical mode with fbcon using yyyfb */
    
    Before trying out this feature, please read Documentation/fb/fbcon.txt.
    
    This patch:
    
    In order for fbcon to detach itself from the console layer, vgacon, which is a
    boot console driver, must be fixed so it can retake the console multiple
    times, not just during init.  The following needs to be done:
    
    - remove __init from the vgacon_startup, this is called again by
      take_over_console().
    
    - vc->rows and vc->cols are set manually by vgacon during init. After init,
      vc_resize() can be used
    
    - make sure the scrollback_buffer is not reallocated
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dac73a4ec2c0a791bbfc6630dc4629ce11e68b9
Author: Daniel R Thompson <daniel.thompson@st.com>
Date:   Mon Jun 26 00:27:00 2006 -0700

    [PATCH] fbdev: tag by scantype in sysfs
    
    Modify the sysfs description of a video mode such that modes are tagged with
    their scan type, (p)rogessive, (i)nterlaced, (d)ouble scan.  For example,
    U:1920x1080i-50.  This is useful to disambiguate some of the 'consumer' video
    timings found in CEA-861 (especially those for EDTV).
    
    Signed-off-by: Daniel R Thompson <daniel.thompson@st.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 90b4f9aca4d124d114e02bbb3d1d4f3d1d47138f
Author: Edgar Hucek <hostmaster@ed-soft.at>
Date:   Mon Jun 26 00:26:59 2006 -0700

    [PATCH] imacfb: Add Intel-based Macintosh Framebuffer Support
    
    This patch adds a new framebuffer driver for the Intel Based macs.  This
    framebuffer is needed when booting from EFI to get something out the box.
    
    [akpm: note: doesn't support modular building]
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Edgar Hucek <hostmaster@ed-soft.at>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a8c9795290361cef232fd54f425a57d143108a8
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:58 2006 -0700

    [PATCH] atyfb: Fix section warnings
    
    Fix the following warning:
    
    WARNING: drivers/video/aty/atyfb.o - Section mismatch: reference to
    .init.text:aty_init_cursor from .text between 'aty_init' (at offset 0x241d)
    and 'atyfb_blank'
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9b27915b6aa33b5fbc17beb8c7d5d0b662419018
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:57 2006 -0700

    [PATCH] macmodes: Fix section warning
    
    Fix the following warning:
    
    WARNING: drivers/video/macmodes.o - Section mismatch: reference to
    .init.text:mac_find_mode from __ksymtab after '__ksymtab_mac_find_mode' (at
    offset 0x10)
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f837e6f73fe3f04594dad9829df6c7baa5b64a85
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:56 2006 -0700

    [PATCH] fbdev: Fix logo rotation if width != height
    
    Logo drawing crashes or produces a corrupt display if the logo width and
    height are not equal.  The dimensions are transposed prior to the actual
    rotation and the width is used instead of the height in the actual rotation
    code.  These produce a corrupt image.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4efefd1d8ea4eaf71bacc4f71fa017c202fa67ec
Author: Christian Trefzer <ctrefzer@gmx.de>
Date:   Mon Jun 26 00:26:55 2006 -0700

    [PATCH] neofb: fix unblank logic interfering with lid toggled backlight
    
    This is a fix for the most annoying problem that remained with neofb:
    
    After "setterm -powersave powerdown" the console blanker will disable the
    backlight after the given timeout expires.  If this happens after the lid
    has been shut, we read "LCD off" from the register and store that in the
    driver.  Once the lid is opened, the backlight turns on, but any key press
    that would awaken the blanked console will switch the backlight off again.
    
    The workaround so far was to use the "display config toggle" Fn key combo -
    once if no external display is attached, otherwise as often as required to
    restore the desired display setup.
    
    The following patch fixes the issue at least for the LCD-only case, with no
    external monitor attached.  Other display setup permutations are pending
    further testing, but so far I can guarantee at least no negative change in
    behaviour, if any at all.
    
    Signed-off-by: Christian Trefzer <ctrefzer@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc1c43e972c95b82416cc87258dbc037d6de5923
Author: Arnaldo Carvalho de Melo <acme@ghostprotocols.net>
Date:   Mon Jun 26 00:26:51 2006 -0700

    [PATCH] skeletonfb: remove duplicate module init, exit, license lines
    
    Signed-off-by: Arnaldo Carvalho de Melo <acme@mandriva.com>
    Acked-by: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f77f50ca1a236ae213d1b9cef4ac042090c98ae6
Author: Rodolfo Giometti <giometti@linux.it>
Date:   Mon Jun 26 00:26:49 2006 -0700

    [PATCH] au1100fb: add power management support
    
    Add power management support
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Rodolfo Giometti <giometti@linux.it>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 137a8899b1dba82b54463811844995a33b21ca39
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:49 2006 -0700

    [PATCH] backlight: Fix Kconfig dependency
    
    CONFIG_FB = m and CONFIG_{BACKLIGHT:LCD}_CLASS_DEVICE = y is possible
    resulting in link errors.  Fix by making backlight and lcd class also depend
    on FB
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6931a764e1cff26c59be23fbde94cd51fe96bf42
Author: Arnaud Patard <arnaud.patard@rtp-net.org>
Date:   Mon Jun 26 00:26:45 2006 -0700

    [PATCH] s3c2410fb: Fix resume
    
    regs.lcdcon1 was not updated on suspend.  The result was a garbaged display on
    resume.  This bug was first noticed by Christer Weinigel.  This patch is a
    modified version of the one he sent to me.
    
    Signed-off-by: Arnaud Patard <arnaud.patard@rtp-net.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c72755b3bdcf551dcfb1d061c8f09fc243e28f49
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 00:26:45 2006 -0700

    [PATCH] fbdev: Remove unused exports
    
    This patch removes the following unused EXPORT_SYMBOL's:
    - fbcvt.c: fb_find_mode_cvt
    - fbmem.c: fb_con_duit
    - fbmem.c: fb_new_modelist
    - macmodes.c: mac_var_to_vmode
    - modedb.c: fb_delete_videomode
    - modedb.c: fb_destroy_modelist
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17cc6281c12b26425209c58e3d8825a9568db3cc
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:44 2006 -0700

    [PATCH] fbdev: Coverity Bug 90
    
    It's a false positive, but let's suppress it anyway.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8126a044f9e686f4ecf95e32fd89ad1dd48b4183
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:43 2006 -0700

    [PATCH] fbdev: Coverity Bug 85
    
    It's a false positive, but let's suppress it anyway.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0fa67f84f445e8c567f8a189f2262dd9f8334bc1
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:43 2006 -0700

    [PATCH] atyfb: Fix dead code
    
    Coverity Bug 68:
    
    Fix dead code
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ee1acce49d616e0e3fbff76fa1dea0c7350535d
Author: David Hollister <david.hollister@amd.com>
Date:   Mon Jun 26 00:26:41 2006 -0700

    [PATCH] vt: Delay the update of the visible console
    
    Delay the update of the visible framebuffer console until all other consoles
    have been initialized in order to avoid losing information.  This only seems
    to be a problem with modules, not with built-in drivers.
    
    Signed-off-by: David Hollister <david.hollister@amd.com>
    Signed-off-by: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6dbde380ca525bbfedd65e11402f345e1d64cba9
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:41 2006 -0700

    [PATCH] vesafb: Prefer VGA registers over PMI
    
    - As per VESA specs, use the VGA registers to set the palette if the mode is
      VGA compatible.  Otherwise, use the protected mode interface.
    
    - Make pmi_setpal default to 1
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 313ca22f0bfab792adeb447146d9cb86536c64d3
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:40 2006 -0700

    [PATCH] vesafb: Fix return code of vesafb_setcolreg
    
    If the hardware palette cannot be accessed, make vesafb_setcolreg return a
    nonzero value.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f71689e4139a91c98cc476240aca40bd091d4538
Author: Dennis Munsie <dmunsie@cecropia.com>
Date:   Mon Jun 26 00:26:39 2006 -0700

    [PATCH] fbdev: Add 1366x768 (WXGA) mode to mode database
    
    Adds 1366x768 @ 60Hz to drivers/video/modedb.c.
    
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe610671d7a88e363e8cebcb7e2f32078b0151ce
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:38 2006 -0700

    [PATCH] nvidiafb: Add support for Geforce 6100 and related chipsets
    
    Add support for Geforce 6100 and related chipsets (PCI device id 0x024x)
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba70710e59c701734aad524bc441b3400700e94b
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:37 2006 -0700

    [PATCH] fbdev: Firmware EDID fixes
    
    - make firmware edid independent from framebuffer (No need to choose
      framebuffer just to disable this option
    
    - enable this option in X86_64
    
    - check if VBE/DDC function is implemented before calling actual function
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 026fbe16c29848648599df9967b98250a6b86916
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:36 2006 -0700

    [PATCH] savagefb: Whitespace cleanup
    
    Whitespace cleanup
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c683dbfc017e52e632853b33981be1a49276ba6
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:36 2006 -0700

    [PATCH] fbdev: Static pseudocolor with depth less than 4 does exist
    
    A static pseudocolor visual with depth less than 4 does exist, so let's not
    accidentally upscale the depth with this configuration
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae6d3218760f3cc28192de1f7ff594be744495b4
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:35 2006 -0700

    [PATCH] vga16fb: Update platform code
    
    Update platform code to dynamically allocate the platform device
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20cecf6a6ade62e3a721eb31540f22126df7462b
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:34 2006 -0700

    [PATCH] vfb: Update platform code
    
    Update platform code to dynamically allocate the platform device
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 103edf024b98ff6a1feef9c43886f39b00c5753d
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:33 2006 -0700

    [PATCH] vesafb: Update platform code
    
    Update platform code to dynamically allocate the platform device
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 673681c1b575a73159606ae3c4498de851596489
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:33 2006 -0700

    [PATCH] epson1355fb: Update platform code
    
    Update platform code to dynamically allocate the platform device
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7914cb27eebed4868bac01a28f550ea966fb422e
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:32 2006 -0700

    [PATCH] atyfb: Set correct acceleration flags
    
    Set the appropriate acceleration flags so fbcon can choose the optimal
    scrolling mode.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58221097a8d8aa2151a70cbf749977998bb3d815
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:31 2006 -0700

    [PATCH] atyfb: Remove unneeded calls to wait_for_idle
    
    The drawing functions of atyfb is unecessary syncing the GPU which is
    affecting performance.  Remove the calls, any direct access by fbcon to the
    framebuffer will always be preceeded by a call to atyfb_sync().
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 72c24cc51aef31219f2e258b4dcb68e09399e040
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:31 2006 -0700

    [PATCH] atyfb: Fix hardware cursor handling
    
    Fix image and color handling in atyfb_cursor()
    
    - In the 2-bit scheme of the cursor image, just set the first bit to be
      always zero (turn off transparency and/or XOR), and just do the masking
      manually
    
    - The cursor color is converted into 32-bit RGBA8888 using struct fb_cmap.
      Each component in the cmap is u16 in size, so mask the upper 8 bits.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8eec4981080dc9dcf8fd5931a947c6f066ee0be6
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:30 2006 -0700

    [PATCH] nvidiafb: Revise pci_device_id table
    
    nVidia is churning out chipsets like there's no tomorrow.  And even though the
    pci_device_id table now has numerous entries, it is still not guaranteed that
    all supported devices are included or will be included.
    
    Fortunately, nvidiafb has chipset detection logic built in.  So, change the
    contents of the pci_device_id table so it will capture all nVidia devices of
    the display class.  Unsupported chipsets will then be filtered out by
    nvidiafb's detection logic.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3007683144b2d53008363f5a7b36a78c53710db4
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:29 2006 -0700

    [PATCH] fbdev: More accurate sync range extrapolation
    
    The EDID block should specify the display's operating limits (vertical and
    horizontal sync ranges, and maximum dot clock).  If not given by the EDID
    block, the ranges are extrapolated from the modelist.  However, the
    computation used is only a rough approximation, and the resulting values may
    not reflect the actual capability of the display.  This problem is frequently
    encountered when the EDID block has a single entry, the single mode entry will
    fail validation.
    
    To prevent this, calculate the values based on the same method used in
    fb_validate_mode().
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22f4a00fd5207a107fb81984f7b4cc09e5047b45
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 00:26:28 2006 -0700

    [PATCH] fbdev: Remove duplicate #include's
    
    Remove unneeded duplicate #include's of the same header file.
    
    In the case of fbmon.c linux/pci.h is now #include'd unconditional, but
    this should be safe.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31c5cdba69c3c6e9bb1aaf15870f5c23402267e0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 00:26:28 2006 -0700

    [PATCH] fbdev: cleanup the CONFIG_VIDEO_SELECT mess
    
    We had three (sic) VIDEO_SELECT options:
    - two in drivers/video/Kconfig
    - one in drivers/video/console/Kconfig
    
    This patch removes the two options in drivers/video/Kconfig and also removes
    the unneeded usage in drivers/video/sis/sis_main.c .
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e4423781850025726b6c4e24ba3d93c7ff9cd826
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 26 00:26:27 2006 -0700

    [PATCH] backlight: LOCOMO Backlight Driver updates
    
    Add backlight intensity control to the LOCOMO lcd/backlight driver using the
    backlight class and add basic power management support.
    
    This is a reimplementation and improvement of patches by John Lenz and Pavel
    Machek
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f8020dc560fde089becc05de1d0ada1f7f46dc51
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:24 2006 -0700

    [PATCH] savagefb: Add state save and_restore hooks
    
    Reported by: Rich (Bugzilla Bug 6417)
    
    "if savage driver is used in x.org together with savagefb, it results in
    seriously garbled and distorted screen - coupled with severe slowdowns."
    
    This bug is the result of Xorg unable to handle savagefb altering the
    hardware which results in X failing to start properly and/or failed console
    switching.
    
    Add savagefb_state_save and savagefb_state_restore. These hooks will only
    save and restore the extended VGA registers.  Standard VGA registers will be
    left alone.  This is enough to make savagefb play nicely with the latest
    Xorg savage driver, and perhaps with savage DRI. (Transient screen artifacts
    may appear before X loads and during console switches).
    
    (Unfortunately, blanking the screen also leaves Xorg in a blanked state, so I
    have to unblank the screen before Xorg loads.  So I doubt if the transient
    screen artifacts will be completely invisible but hopefully it will only be
    for a shorter duration (not much).)
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Cc: <rich@hq.vsaa.lv>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2356614b08bf8769790c4f1f55c83d95f802bc51
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon Jun 26 00:26:23 2006 -0700

    [PATCH] savagefb: Allocate space for current and saved register states
    
    Allocate space for 2 register states: 'current' for the current state of
    the hardware, and 'saved', to be used for restoring the hardware to a sane
    state.  This is in preparation for the addition of state save and restore
    hooks to make savagefb work together with the latest Xorg savage driver.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ba70a019599b4fa3e091c6dbc4a04e2c607eea3
Author: Tobias Oed <tobiasoed@hotmail.com>
Date:   Mon Jun 26 00:26:19 2006 -0700

    [PATCH] Remove code that has long been commented out from pdc20265_old
    
    Signed-off-by: Tobias Oed <tobiasoed@hotmail.com>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb4ece268bfebaa9f8084b3aa854b56867935724
Author: Tobias Oed <tobiasoed@hotmail.com>
Date:   Mon Jun 26 00:26:18 2006 -0700

    [PATCH] pdc202xx_old depends on CONFIG_BLK_DEV_IDEDMA
    
    The driver pdc202xx_old requires CONFIG_BLK_DEV_IDEDMA, so it's always
    defined
    
    Signed-off-by: Tobias Oed <tobiasoed@hotmail.com>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d1c1cc962cebaae6a70fd89a0adb29ad10a2a12
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 00:26:17 2006 -0700

    [PATCH] fix IDE deadlock in error reporting code
    
    Michal Piotrowski reported the following validator assert:
    
     hdd: set_drive_speed_status: status=0x51 { DriveReady SeekComplete Error }
     hdd: set_drive_speed_status: error=0xb4 { AbortedCommand LastFailedSense=0x0b }
    
     ============================
     [ BUG: illegal lock usage! ]
     ----------------------------
     illegal {in-hardirq-W} -> {hardirq-on-W} usage.
     hdparm/1821 [HC0[0]:SC0[0]:HE1:SE1] takes:
      (ide_lock){++..}, at: [<c0268388>] ide_dump_opcode+0x13/0x9b
    
     [...]
    
     stack backtrace:
      [<c0104513>] show_trace+0x1b/0x20
      [<c01045f1>] dump_stack+0x1f/0x24
      [<c013976c>] print_usage_bug+0x1a5/0x1b1
      [<c0139e90>] mark_lock+0x2ca/0x4f7
      [<c013aa96>] __lockdep_acquire+0x47e/0xaa4
      [<c013b536>] lockdep_acquire+0x67/0x7f
      [<c030552d>] _spin_lock+0x24/0x32
      [<c0268388>] ide_dump_opcode+0x13/0x9b
      [<c02688b6>] ide_dump_status+0x4a6/0x4cc
      [<c0267ae6>] ide_config_drive_speed+0x32a/0x33a
      [<c0262dc5>] piix_tune_chipset+0x2ed/0x2f8
      [<c0262e31>] piix_config_drive_xfer_rate+0x61/0xb5
      [<c0263a82>] set_using_dma+0x2f/0x60
      [<c0263bee>] ide_write_setting+0x4a/0xc3
      [<c02647ca>] generic_ide_ioctl+0x8a/0x47f
      [<f886003a>] idecd_ioctl+0xfd/0x133 [ide_cd]
      [<c01f1fff>] blkdev_driver_ioctl+0x4b/0x5f
      [<c01f2783>] blkdev_ioctl+0x770/0x7bd
      [<c017dc0d>] block_ioctl+0x1f/0x21
      [<c0189353>] do_ioctl+0x27/0x6e
      [<c0189604>] vfs_ioctl+0x26a/0x280
      [<c0189667>] sys_ioctl+0x4d/0x7e
      [<c0305ed2>] sysenter_past_esp+0x63/0xa1
    
    in ide_dump_opcode() takes the ide_lock in an irq-unsafe manner, i.e.  this
    function expects to be called with irqs disabled.  But
    ide_dump_ata[pi]_status() doesnt do that - it enables interrupts specifically.
     That is a no-no - what guarantees that another IDE port couldnt generate an
    IDE interrupt while we are dumping this error?  The fix is to turn the
    irq-enabling in these functions into irq-disabling.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Michal Piotrowski <michal.k.k.piotrowski@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8b6ebe016bf68fc9b3f3f2ce79c1918b0808481c
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Mon Jun 26 00:26:16 2006 -0700

    [PATCH] ide: pdc202xx_old: remove the obsolete busproc
    
    Remove the busproc from pdc202xx_old.c because:
    
    - it handles the obsolete HDIO_TRISTATE_HWIF ioctl instead of the modern
      HDIO_SET_BUSSTATE, so treats its argument wrong;
    
    - I don't think that tristating both channels is good idea (probably can't
      be done otherwise since there seems to be only single bit controlling this).
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17c1033d331a430ce631805e15215e63b4cce764
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Mon Jun 26 00:26:15 2006 -0700

    [PATCH] ide: actually honor drive's minimum PIO/DMA cycle times
    
    The function ide_timing_compute() fails to *actually* take drive's
    specified minimum PIO/DMA cycle times into account -- when doing this, it
    calls ide_timing_merge() on the 'struct ide_timing' argument which contains
    garbage at the moment, and then ultimately destroys the read cycle time by
    quantizing the ide_timing[] entry, instead of copying from that entry to
    the argument structure, and only then doing a merge/quantize.
    
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 178184b60979992508130741f16499c360bc9c9a
Author: Al Boldi <a1426z@gawab.com>
Date:   Mon Jun 26 00:26:13 2006 -0700

    [PATCH] ide-io: increase timeout value to allow for slave wakeup
    
    During an STR resume cycle, the ide master disk times-out when there is
    also a slave present (especially CD).  Increasing the timeout in ide-io
    from 10,000 to 100,000 fixes this problem.
    
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4fb0f76d8cf4f7a3ffc36dd5e1bc8ca977b68824
Author: Alan Cox <alan@redhat.com>
Date:   Mon Jun 26 00:26:12 2006 -0700

    [PATCH] Fix IDE locking error
    
    This bit us a few kernels ago, and for some reason never made it's way
    upstream.
    
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=144743
    Kernel panic - not syncing: drivers/ide/pci/piix.c:231:
    spin_lock(drivers/ide/ide.c:c03cef28) already locked by driver/ide/ide-iops.c/1153.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Dave Jones <davej@redhat.com>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5cdccf841d7d29fb96e03de5a64ed395e0fde61
Author: Tobias Oed <tobiasoed@hotmail.com>
Date:   Mon Jun 26 00:26:11 2006 -0700

    [PATCH] ide: pdc202xx_old.c: remove unneeded tuneproc() call
    
    Remove a call to hwif->tuneproc() on the error path of
    config_chipset_for_dma(), as its single caller
    (pdc202xx_config_drive_xfer_rate()) will do the call in that case.
    
    Signed-off-by: Tobias Oed <tobiasoed@hotmail.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Acked-by: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf2dfbfbf4c5cb489ea12defd85a484307b955b8
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:10 2006 -0700

    [PATCH] coredump: copy_process: don't check SIGNAL_GROUP_EXIT
    
    After the previous patch SIGNAL_GROUP_EXIT implies a pending SIGKILL, we
    can remove this check from copy_process() because we already checked
    !signal_pending().
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5debfa6da5b06954bc79fe8deed0d1062c58dcec
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:09 2006 -0700

    [PATCH] coredump: shutdown current process first
    
    This patch optimizes zap_threads() for the case when there are no ->mm
    users except the current's thread group.  In that case we can avoid
    'for_each_process()' loop.
    
    It also adds a useful invariant: SIGNAL_GROUP_EXIT (if checked under
    ->siglock) always implies that all threads (except may be current) have
    pending SIGKILL.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcf560c59330945a231d5e52f95dfedde4e32c9d
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:08 2006 -0700

    [PATCH] coredump: some code relocations
    
    This is a preparation for the next patch.  No functional changes.
    Basically, this patch moves '->flags & SIGNAL_GROUP_EXIT' check into
    zap_threads(), and 'complete(vfork_done)' into coredump_wait outside of
    ->mmap_sem protected area.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b1c6154fa8bb937e0b1b4f2adbb315d70270f10
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:08 2006 -0700

    [PATCH] coredump: don't take tasklist_lock
    
    This patch removes tasklist_lock from zap_threads().
    This is safe wrt:
    
    	do_exit:
    		The caller holds mm->mmap_sem. This means that task which
    		shares the same ->mm can't pass exit_mm(), so it can't be
    		unhashed from init_task.tasks or ->thread_group lists.
    
    	fork:
    		None of sub-threads can fork after zap_process(leader). All
    		processes which were created before this point should be
    		visible to zap_threads() because copy_process() adds the new
    		process to the tail of init_task.tasks list, and ->siglock
    		lock/unlock provides a memory barrier.
    
    	de_thread:
    		It does list_replace_rcu(&leader->tasks, &current->tasks).
    		So zap_threads() will see either old or new leader, it does
    		not matter. However, it can change p->sighand, so we should
    		use lock_task_sighand() in zap_process().
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d5f70c00ad24cd1158d3678b44ff969b4c971d49
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:07 2006 -0700

    [PATCH] coredump: kill ptrace related stuff
    
    With this patch zap_process() sets SIGNAL_GROUP_EXIT while sending SIGKILL to
    the thread group.  This means that a TASK_TRACED task
    
    	1. Will be awakened by signal_wake_up(1)
    
    	2. Can't sleep again via ptrace_notify()
    
    	3. Can't go to do_signal_stop() after return
    	   from ptrace_stop() in get_signal_to_deliver()
    
    So we can remove all ptrace related stuff from coredump path.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 281de339ceb822ca6c04d4373ecb9a45c1890ce4
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:06 2006 -0700

    [PATCH] coredump: speedup SIGKILL sending
    
    With this patch a thread group is killed atomically under ->siglock.  This is
    faster because we can use sigaddset() instead of force_sig_info() and this is
    used in further patches.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Acked-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aceecc041217b35df753d1ed6e25bd17c0c558d8
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:05 2006 -0700

    [PATCH] coredump: optimize ->mm users traversal
    
    zap_threads() iterates over all threads to find those ones which share
    current->mm.  All threads in the thread group share the same ->mm, so we can
    skip entire thread group if it has another ->mm.
    
    This patch shifts the killing of thread group into the newly added
    zap_process() function.  This looks as unnecessary complication, but it is
    used in further patches.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Acked-by: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2ceb8693ef63ae3d154ce1a05d275f2bb20a5e4c
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:04 2006 -0700

    [PATCH] de_thread: fix lockless do_each_thread
    
    We should keep the value of old_leader->tasks.next in de_thread, otherwise
    we can't do for_each_process/do_each_thread without tasklist_lock held.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42c3e03ef6b298813557cdb997bd6db619cd65a2
Author: Eric Paris <eparis@redhat.com>
Date:   Mon Jun 26 00:26:03 2006 -0700

    [PATCH] SELinux: Add sockcreate node to procattr API
    
    Below is a patch to add a new /proc/self/attr/sockcreate A process may write a
    context into this interface and all subsequent sockets created will be labeled
    with that context.  This is the same idea as the fscreate interface where a
    process can specify the label of a file about to be created.  At this time one
    envisioned user of this will be xinetd.  It will be able to better label
    sockets for the actual services.  At this time all sockets take the label of
    the creating process, so all xinitd sockets would just be labeled the same.
    
    I tested this by creating a tcp sender and listener.  The sender was able to
    write to this new proc file and then create sockets with the specified label.
    I am able to be sure the new label was used since the avc denial messages
    kicked out by the kernel included both the new security permission
    setsockcreate and all the socket denials were for the new label, not the label
    of the running process.
    
    Signed-off-by: Eric Paris <eparis@redhat.com>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c1df7fb88a011b39ea722ac00975c5b8a803261b
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:02 2006 -0700

    [PATCH] cleanup next_tid()
    
    Try to make next_tid() a bit more readable and deletes unnecessary
    "pid_alive(pos)" check.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a872ff0cb2218dc9688b990c5ccda064dc40946b
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Mon Jun 26 00:26:01 2006 -0700

    [PATCH] simplify/fix first_tid()
    
    first_tid:
    
    	/* If nr exceeds the number of threads there is nothing todo */
    	if (nr) {
    		if (nr >= get_nr_threads(leader))
    			goto done;
    	}
    
    This is not reliable: sub-threads can exit after this check, so the
    'for' loop below can overlap and proc_task_readdir() can return an
    already filldir'ed dirents.
    
    	for (; pos && pid_alive(pos); pos = next_thread(pos)) {
    		if (--nr > 0)
    			continue;
    
    Off-by-one error, will return 'leader' when nr == 1.
    
    This patch tries to fix these problems and simplify the code.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc288738c9ae3c64d3c50b86604044d1f6d22941
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:26:01 2006 -0700

    [PATCH] proc: Remove tasklist_lock from proc_task_readdir.
    
    This is just like my previous removal of tasklist_lock from first_tgid, and
    next_tgid.  It simply had to wait until it was rcu safe to walk the thread
    list.
    
    This should be the last instance of the tasklist_lock in proc.  So user
    processes should not be able to influence the tasklist lock hold times.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df26c40e567356caeefe2861311e19c54444d917
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:59 2006 -0700

    [PATCH] proc: Cleanup proc_fd_access_allowed
    
    In process of getting proc_fd_access_allowed to work it has developed a few
    warts.  In particular the special case that always allows introspection and
    the special case to allow inspection of kernel threads.
    
    The special case for introspection is needed for /proc/self/mem.
    
    The special case for kernel threads really should be overridable
    by security modules.
    
    So consolidate these checks into ptrace.c:may_attach().
    
    The check to always allow introspection is trivial.
    
    The check to allow access to kernel threads, and zombies is a little
    trickier.  mem_read and mem_write already verify an mm exists so it isn't
    needed twice.  proc_fd_access_allowed only doesn't want a check to verify
    task->mm exits, s it prevents all access to kernel threads.  So just move
    the task->mm check into ptrace_attach where it is needed for practical
    reasons.
    
    I did a quick audit and none of the security modules in the kernel seem to
    care if they are passed a task without an mm into security_ptrace.  So the
    above move should be safe and it allows security modules to come up with
    more restrictive policy.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Cc: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 778c1144771f0064b6f51bee865cceb0d996f2f9
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:58 2006 -0700

    [PATCH] proc: Use sane permission checks on the /proc/<pid>/fd/ symlinks
    
    Since 2.2 we have been doing a chroot check to see if it is appropriate to
    return a read or follow one of these magic symlinks.  The chroot check was
    asking a question about the visibility of files to the calling process and
    it was actually checking the destination process, and not the files
    themselves.  That test was clearly bogus.
    
    In my first pass through I simply fixed the test to check the visibility of
    the files themselves.  That naive approach to fixing the permissions was
    too strict and resulted in cases where a task could not even see all of
    it's file descriptors.
    
    What has disturbed me about relaxing this check is that file descriptors
    are per-process private things, and they are occasionaly used a user space
    capability tokens.  Looking a little farther into the symlink path on /proc
    I did find userid checks and a check for capability (CAP_DAC_OVERRIDE) so
    there were permissions checking this.
    
    But I was still concerned about privacy.  Besides /proc there is only one
    other way to find out this kind of information, and that is ptrace.  ptrace
    has been around for a long time and it has a well established security
    model.
    
    So after thinking about it I finally realized that the permission checks
    that make sense are the permission checks applied to ptrace_attach.  The
    checks are simple per process, and won't cause nasty surprises for people
    coming from less capable unices.
    
    Unfortunately there is one case that the current ptrace_attach test does
    not cover: Zombies and kernel threads.  Single stepping those kinds of
    processes is impossible.  Being able to see which file descriptors are open
    on these tasks is important to lsof, fuser and friends.  So for these
    special processes I made the rule you can't find out unless you have
    CAP_SYS_PTRACE.
    
    These proc permission checks should now conform to the principle of least
    surprise.  As well as using much less code to implement :)
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b0c1dd38b66e2dd0cf655aa845e341b50b93ddd
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:57 2006 -0700

    [PATCH] proc: optimize proc_check_dentry_visible
    
    The code doesn't need to sleep to when making this check so I can just do the
    comparison and not worry about the reference counts.
    
    TODO: While looking at this I realized that my original cleanup did not push
    the permission check far enough down into the stack.  The call of
    proc_check_dentry_visible needs to move out of the generic proc
    readlink/follow link code and into the individual get_link instances.
    Otherwise the shared resources checks are not quite correct (shared
    files_struct does not require a shared fs_struct), and there are races with
    unshare.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13b41b09491e5d75e8027dca1ee78f5e073bc4c0
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:56 2006 -0700

    [PATCH] proc: Use struct pid not struct task_ref
    
    Incrementally update my proc-dont-lock-task_structs-indefinitely patches so
    that they work with struct pid instead of struct task_ref.
    
    Mostly this is a straight 1-1 substitution.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 99f895518368252ba862cc15ce4eb98ebbe1bec6
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:55 2006 -0700

    [PATCH] proc: don't lock task_structs indefinitely
    
    Every inode in /proc holds a reference to a struct task_struct.  If a
    directory or file is opened and remains open after the the task exits this
    pinning continues.  With 8K stacks on a 32bit machine the amount pinned per
    file descriptor is about 10K.
    
    Normally I would figure a reasonable per user process limit is about 100
    processes.  With 80 processes, with a 1000 file descriptors each I can trigger
    the 00M killer on a 32bit kernel, because I have pinned about 800MB of useless
    data.
    
    This patch replaces the struct task_struct pointer with a pointer to a struct
    task_ref which has a struct task_struct pointer.  The so the pinning of dead
    tasks does not happen.
    
    The code now has to contend with the fact that the task may now exit at any
    time.  Which is a little but not muh more complicated.
    
    With this change it takes about 1000 processes each opening up 1000 file
    descriptors before I can trigger the OOM killer.  Much better.
    
    [mlp@google.com: task_mmu small fixes]
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Paul Jackson <pj@sgi.com>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Albert Cahalan <acahalan@gmail.com>
    Signed-off-by: Prasanna Meda <mlp@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8578cea7509cbdec25b31d08b48a92fcc3b1a9e3
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:54 2006 -0700

    [PATCH] proc: make PROC_NUMBUF the buffer size for holding integers as strings
    
    Currently in /proc at several different places we define buffers to hold a
    process id, or a file descriptor .  In most of them we use either a hard coded
    number or a different define.  Modify them all to use PROC_NUMBUF, so the code
    has a chance of being maintained.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9cc8cbc7f8b7bc3db48bf6d59a731af728e786ce
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:52 2006 -0700

    [PATCH] simply fix first_tgid
    
    Like the bug Oleg spotted in first_tid there was also a small off by one
    error in first_tgid, when a seek was done on the /proc directory.  This
    fixes that and changes the code structure to make it a little more obvious
    what is going on.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de7587343bfebc186995ad294e3de0da382eb9bc
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:51 2006 -0700

    [PATCH] proc: Remove tasklist_lock from proc_pid_lookup() and proc_task_lookup()
    
    Since we no longer need the tasklist_lock for get_task_struct the lookup
    methods no longer need the tasklist_lock.
    
    This just depends on my previous patch that makes get_task_struct() rcu
    safe.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 454cc105ef690f2a0ba7c6b194d55666b4e918ce
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:51 2006 -0700

    [PATCH] proc: Remove tasklist_lock from proc_pid_readdir
    
    We don't need the tasklist_lock to safely iterate through processes
    anymore.
    
    This depends on my previous to task patches that make get_task_struct rcu
    safe, and that make next_task() rcu safe.  I haven't gotten
    first_tid/next_tid yet only because next_thread is missing an
    rcu_dereference.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0bc58a910220be3446eedc8e77fd45c0a16d8f25
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:50 2006 -0700

    [PATCH] proc: refactor reading directories of tasks
    
    There are a couple of problems this patch addresses.
    - /proc/<tgid>/task currently does not work correctly if you stop reading
      in the middle of a directory.
    
    - /proc/ currently requires a full pass through the task list with
      the tasklist lock held, to determine there are no more processes to read.
    
    - The hand rolled integer to string conversion does not properly running
      out of buffer space.
    
    - We seem to be batching reading of pids from the tasklist without reason,
      and complicating the logic of the code.
    
    This patch addresses that by changing how tasks are processed.  A
    first_<task_type> function is built that handles restarts, and a
    next_<task_type> function is built that just advances to the next task.
    
    first_<task_type> when it detects a restart usually uses find_task_by_pid.  If
    that doesn't work because there has been a seek on the directory, or we have
    already given a complete directory listing, it first checks the number tasks
    of that type, and only if we are under that count does it walk through all of
    the tasks to find the one we are interested in.
    
    The code that fills in the directory is simpler because there is only a single
    for loop.
    
    The hand rolled integer to string conversion is replaced by snprintf which
    should handle the the out of buffer case correctly.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cd6a3ce9ec040c0b56ea92a81ff710417798c559
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:49 2006 -0700

    [PATCH] proc: Close the race of a process dying durning lookup
    
    proc_lookup and task exiting are not synchronized, although some of the
    previous code may have suggested that.  Every time before we reuse a dentry
    namei.c calls d_op->derevalidate which prevents us from reusing a stale dcache
    entry.  Unfortunately it does not prevent us from returning a stale dcache
    entry.  This race has been explicitly plugged in proc_pid_lookup but there is
    nothing to confine it to just that proc lookup function.
    
    So to prevent the race I call revalidate explictily in all of the proc lookup
    functions after I call d_add, and report an error if the revalidate does not
    succeed.
    
    Years ago Al Viro did something similar but those changes got lost in the
    churn.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 48e6484d49020dba3578ad117b461e8a391e8f0f
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:48 2006 -0700

    [PATCH] proc: Rewrite the proc dentry flush on exit optimization
    
    To keep the dcache from filling up with dead /proc entries we flush them on
    process exit.  However over the years that code has gotten hairy with a
    dentry_pointer and a lock in task_struct and misdocumented as a correctness
    feature.
    
    I have rewritten this code to look and see if we have a corresponding entry in
    the dcache and if so flush it on process exit.  This removes the extra fields
    in the task_struct and allows me to trivially handle the case of a
    /proc/<tgid>/task/<pid> entry as well as the current /proc/<pid> entries.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 662795deb854b31501e0ffb42b7f0cce802c134a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:48 2006 -0700

    [PATCH] proc: Move proc_maps_operations into task_mmu.c
    
    All of the functions for proc_maps_operations are already defined in
    task_mmu.c so move the operations structure to keep the functionality
    together.
    
    Since task_nommu.c implements a dummy version of /proc/<pid>/maps give it a
    simplified version of proc_maps_operations that it can modify to best suit its
    needs.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e66b52bf587f0dd9a8e0a581b9570e5c1969e33
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:47 2006 -0700

    [PATCH] proc: Fix the link count for /proc/<pid>/task
    
    Use getattr to get an accurate link count when needed.  This is cheaper and
    more accurate than trying to derive it by walking the thread list of a
    process.
    
    Especially as it happens when needed stat instead of at readdir time.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f2fe20f55c85f26efaf14feeb69c7c2eb3f7a75
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:46 2006 -0700

    [PATCH] proc: Properly filter out files that are not visible to a process
    
    Long ago and far away in 2.2 we started checking to ensure the files we
    displayed in /proc were visible to the current process.  It was an
    unsophisticated time and no one was worried about functions full of FIXMES in
    a stable kernel.  As time passed the function became sacred and was enshrined
    in the shrine of how things have always been.  The fixes came in but only to
    keep the function working no one really remembering or documenting why we did
    things that way.
    
    The intent and the functionality make a lot of sense.  Don't let /proc be an
    access point for files a process can see no other way.  The implementation
    however is completely wrong.
    
    We are currently checking the root directories of the two processes, we are
    not checking the actual file descriptors themselves.
    
    We are strangely checking with a permission method instead of just when we use
    the data.
    
    This patch fixes the logic to actually check the file descriptors and make a
    note that implementing a permission method for this part of /proc almost
    certainly indicates a bug in the reasoning.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22c2c5d75e6ad4b9ac41269476b32ba8c9fe263f
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:45 2006 -0700

    [PATCH] proc: Kill proc_mem_inode_operations
    
    The inode operations only exist to support the proc_permission function.
    Currently mem_read and mem_write have all the same permission checks as
    ptrace.  The fs check makes no sense in this context, and we can trivially get
    around it by calling ptrace.
    
    So simply the code by killing the strange weird case.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68602066c3327fa340899609d715781eda423751
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:45 2006 -0700

    [PATCH] proc: Remove bogus proc_task_permission
    
    First we can access every /proc/<tgid>/task/<pid> directory as /proc/<pid> so
    proc_task_permission is not usefully limiting visibility.
    
    Second having related filesystems information should have nothing to do with
    process visibility.  kill does not implement any checks like that.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aed7a6c476d90660ac5af860158407ae9fe61c68
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:44 2006 -0700

    [PATCH] proc: Replace proc_inode.type with proc_inode.fd
    
    The sole renaming use of proc_inode.type is to discover the file descriptor
    number, so just store the file descriptor number and don't wory about
    processing this field.  This removes any /proc limits on the maximum number of
    file descriptors, and clears the path to make the hard coded /proc inode
    numbers go away.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87bfbf679ffb1e95dd9ada694f66aafc4bfa5959
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:43 2006 -0700

    [PATCH] proc: Simplify the ownership rules for /proc
    
    Currently in /proc if the task is dumpable all of files are owned by the tasks
    effective users.  Otherwise the files are owned by root.  Unless it is the
    /proc/<tgid>/ or /proc/<tgid>/task/<pid> directory in that case we always make
    the directory owned by the effective user.
    
    However the special case for directories is pointless except as a way to read
    the effective user, because the permissions on both of those directories are
    world readable, and executable.
    
    /proc/<tgid>/status provides a much better way to read a processes effecitve
    userid, so it is silly to try to provide that on the directory.
    
    So this patch simplifies the code by removing a pointless special case and
    gets us one step closer to being able to remove the hard coded /proc inode
    numbers.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 167965495153ba9829d0a34b6800dbf5d94de8c8
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:42 2006 -0700

    [PATCH] proc: Remove unnecessary and misleading assignments from proc_pid_make_inode
    
    The removed fields are already set by proc_alloc_inode.  Initializing them in
    proc_alloc_inode implies they need it for proper cleanup.  At least ei->pde
    was not set on all paths making it look like proc_alloc_inode was buggy.  So
    just remove the redundant assignments.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff9724a3f7a69f7b443c05981f84e28017c2fc5a
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:42 2006 -0700

    [PATCH] proc: Remove useless BKL in proc_pid_readlink
    
    We already call everything except do_proc_readlink outside of the BKL in
    proc_pid_followlink, and there appears to be nothing in do_proc_readlink that
    needs any special protection.
    
    So remove this leftover from one of the BKL cleanup efforts.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5634708b5fce807bdf2091cfafc2fb24d791f0c8
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Mon Jun 26 00:25:40 2006 -0700

    [PATCH] proc: Fix the .. inode number on /proc/<pid>/fd
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f05e15b59467d97c30fbffed80db9e00b73d640b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Jun 26 00:25:39 2006 -0700

    [PATCH] nfsd kconfig: select things at the closest tristate instead of bool
    
    I noticed recently that my CONFIG_CRYPTO_MD5 turned into a y again instead
    of m.  It turns out that CONFIG_NFSD_V4 is selecting it to be y even though
    I've chosen to compile nfsd as a module.
    
    In general when we have a bool sitting under a tristate it is better to
    select things you need from the tristate rather than the bool since that
    allows the things you select to be modules.
    
    The following patch does it for nfsd.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5024ad4af69b3570e18d312786dc46318a1bad1a
Author: Hansjoerg Lipp <hjlipp@web.de>
Date:   Mon Jun 26 00:25:35 2006 -0700

    [PATCH] i4l: Gigaset drivers: add IOCTLs to compat_ioctl.h
    
    Add the IOCTLs of the Gigaset drivers to compat_ioctl.h in order to make
    them available for 32 bit programs on 64 bit platforms.  Please merge.
    
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Acked-by: Tilman Schmidt <tilman@imap.cc>
    Cc: Karsten Keil <kkeil@suse.de>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 698e3ed9d4f47286134f66ea333b6679b29e59e4
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Mon Jun 26 00:25:34 2006 -0700

    [PATCH] isdn4linux: Gigaset driver cleanup
    
    The following patch to the common part of the Siemens Gigaset driver
    prevents it from trying to send the +++ break sequence if the device has
    been disconnected, and removes a couple of assignments which didn't have
    any effect.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Acked-by: Hansjoerg Lipp <hjlipp@web.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06163f86349f0b39948a86d21b2db0d53e47fd8c
Author: Tilman Schmidt <tilman@imap.cc>
Date:   Mon Jun 26 00:25:33 2006 -0700

    [PATCH] isdn4linux: Gigaset base driver: improve error recovery
    
    The following patch to the Siemens Gigaset base driver adds graceful
    recovery for some frequently encountered error conditions, by retrying
    failed control requests (eg.  stalled control pipe), and by closing and
    reopening the AT command channel when it appears to be stuck.
    
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Acked-by: Hansjoerg Lipp <hjlipp@web.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f13fae2479ed2e2801d538d6a22309123c704f6
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Mon Jun 26 00:25:32 2006 -0700

    [PATCH] Fix typo in drivers/isdn/hisax/q931.c
    
    This fixes coverity bug #517.
    
    Since IESIZE is greater than IESIZE_NI1 we might run past the end of
    ielist_ni1.  This fixes it by using the proper IESIZE_NI1 define.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Acked-by: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6aa65472d18703064898eefb5eb58f7ecd0d8912
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:30 2006 -0700

    [PATCH] CAPI crash / race condition
    
    I am getting more or less reproducible crashes from the CAPI subsystem
    using the fcdsl driver:
    
    Unable to handle kernel NULL pointer dereference at virtual address 00000010
     printing eip:
    c39bbca4
    *pde = 00000000
    Oops: 0000 [#1]
    Modules linked in: netconsole capi capifs 3c59x mii fcdsl kernelcapi uhci_hcd usbcore ide_cd cdrom
    CPU:    0
    EIP:    0060:[<c39bbca4>]    Tainted: P      VLI
    EFLAGS: 00010202   (2.6.16.11 #3)
    EIP is at handle_minor_send+0x17a/0x241 [capi]
    eax: c24abbc0   ebx: c0b4c980   ecx: 00000010   edx: 00000010
    esi: c1679140   edi: c2783016   ebp: 0000c28d   esp: c0327e24
    ds: 007b   es: 007b   ss: 0068
    Process swapper (pid: 0, threadinfo=c0326000 task=c02e1300)
    Stack: <0>000005b4 c1679180 00000000 c28d0000 c1ce04e0 c2f69654 c221604e c1679140
           c39bc19a 00000038 c20c0400 c075c560 c1f2f800 00000000 c01dc9b5 c1e96a40
           c075c560 c2ed64c0 c1e96a40 c01dcd3b c2fb94e8 c075c560 c0327f00 c1e96a40
    Call Trace:
     [<c39bc19a>] capinc_tty_write+0xda/0xf3 [capi]
     [<c01dc9b5>] ppp_sync_push+0x52/0xfe
     [<c01dcd3b>] ppp_sync_send+0x1f5/0x204
     [<c01d9bc1>] ppp_push+0x3e/0x9c
     [<c01dacd4>] ppp_xmit_process+0x422/0x4cc
     [<c01daf3f>] ppp_start_xmit+0x1c1/0x1f6
     [<c0213ea5>] qdisc_restart+0xa7/0x135
     [<c020b112>] dev_queue_xmit+0xba/0x19e
     [<c0223f69>] ip_output+0x1eb/0x236
     [<c0220907>] ip_forward+0x1c1/0x21a
     [<c021fa6c>] ip_rcv+0x38e/0x3ea
     [<c020b4c2>] netif_receive_skb+0x166/0x195
     [<c020b55e>] process_backlog+0x6d/0xd2
     [<c020a30f>] net_rx_action+0x6a/0xff
     [<c0112909>] __do_softirq+0x35/0x7d
     [<c0112973>] do_softirq+0x22/0x26
     [<c0103a9d>] do_IRQ+0x1e/0x25
     [<c010255a>] common_interrupt+0x1a/0x20
     [<c01013c5>] default_idle+0x2b/0x53
     [<c0101426>] cpu_idle+0x39/0x4e
     [<c0328386>] start_kernel+0x20b/0x20d
    Code: c0 e8 b3 b6 77 fc 85 c0 75 10 68 d8 c8 9b c3 e8 82 3d 75 fc 8b 43 60 5a eb 50 8d 56 50 c7 00 00 00 00 00 66 89 68 04 eb 02 89
    ca <8b> 0a 85 c9 75 f8 89 02 89 da ff 46 54 8b 46 10 e8 30 79 fd ff
     <0>Kernel panic - not syncing: Fatal exception in interrupt
    
    That oops took me to the "ackqueue" implementation in capi.c.  The crash
    occured in capincci_add_ack() (auto-inlined by the compiler).
    
    I read the code a bit and finally decided to replace the custom linked list
    implementation (struct capiminor->ackqueue) by a struct list_head.  That
    did not solve the crash, but produced the following interresting oops:
    
    Unable to handle kernel paging request at virtual address 00200200
     printing eip:
    c39bb1f5
    *pde = 00000000
    Oops: 0002 [#1]
    Modules linked in: netconsole capi capifs 3c59x mii fcdsl kernelcapi uhci_hcd usbcore ide_cd cdrom
    CPU:    0
    EIP:    0060:[<c39bb1f5>]    Tainted: P      VLI
    EFLAGS: 00010246   (2.6.16.11 #3)
    EIP is at capiminor_del_ack+0x18/0x49 [capi]
    eax: 00200200   ebx: c18d41a0   ecx: c1385620   edx: 00100100
    esi: 0000d147   edi: 00001103   ebp: 0000d147   esp: c1093f3c
    ds: 007b   es: 007b   ss: 0068
    Process events/0 (pid: 3, threadinfo=c1092000 task=c1089030)
    Stack: <0>c2a17580 c18d41a0 c39bbd16 00000038 c18d41e0 00000000 d147c640 c29e0b68
           c29e0b90 00000212 c29e0b68 c39932b2 c29e0bb0 c10736a0 c0119ef0 c399326c
           c10736a8 c10736a0 c10736b0 c0119f93 c011a06e 00000001 00000000 00000000
    Call Trace:
     [<c39bbd16>] handle_minor_send+0x1af/0x241 [capi]
     [<c39932b2>] recv_handler+0x46/0x5f [kernelcapi]
     [<c0119ef0>] run_workqueue+0x5e/0x8d
     [<c399326c>] recv_handler+0x0/0x5f [kernelcapi]
     [<c0119f93>] worker_thread+0x0/0x10b
     [<c011a06e>] worker_thread+0xdb/0x10b
     [<c010c998>] default_wake_function+0x0/0xc
     [<c011c399>] kthread+0x90/0xbc
     [<c011c309>] kthread+0x0/0xbc
     [<c0100a65>] kernel_thread_helper+0x5/0xb
    Code: 7e 02 89 ee 89 f0 5a f7 d0 c1 f8 1f 5b 21 f0 5e 5f 5d c3 56 53 8b 48 50 89 d6 89 c3 8b 11 eb 2f 66 39 71 08 75 25 8b 41 04 8b 11 <89> 10 89 42 04 c7 01 00 01 10 00 89 c8 c7 41 04 00 02 20 00 e8
    
    The interresting part of it is the "virtual address 00200200", which is
    LIST_POISON2.  I thought about some race condition, but as this is an UP
    system, it leads to questions on how it can happen.  If we look at EFLAGS:
    00010202, we see that interrupts are enabled at the time of the crash
    (eflags & 0x200).
    
    Finally, I don't understand all the capi code, but I think that
    handle_minor_send() is racing somehow against capi_recv_message(), which
    call both capiminor_del_ack().  So if an IRQ occurs in the middle of
    capiminor_del_ack() and another instance of it is invoked, it leads to
    linked list corruption.
    
    I came up with the following patch.  With this, I could not reproduce the
    crash anymore.  Clearly, this is not the correct fix for the issue.  As this
    seems to be some locking issue, there might be more locking issues in that
    code.  For example, doesn't the whole struct capiminor have to be locked
    somehow?
    
    Cc: Carsten Paeth <calle@calle.de>
    Cc: Kai Germaschewski <kai.germaschewski@gmx.de>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6f47f978bcd5413fff610613b18e9e0eab9bc1b
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:29 2006 -0700

    [PATCH] Notify page fault call chain
    
    With this patch Kprobes now registers for page fault notifications only when
    their is an active probe registered.  Once all the active probes are
    unregistered their is no need to be notified of page faults and kprobes
    unregisters itself from the page fault notifications.  Hence we will have ZERO
    side effects when no probes are active.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3d5631e0631a11633c649bc995a6537ec21b67b4
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:28 2006 -0700

    [PATCH] Kprobes registers for notify page fault
    
    Kprobes now registers for page fault notifications.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavmurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d98f8f05188b45168db43df8ddc9feeb0b1cd512
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:27 2006 -0700

    [PATCH] Notify page fault call chain for sparc64
    
    Overloading of page fault notification with the notify_die() has performance
    issues(since the only interested components for page fault is kprobes and/or
    kdb) and hence this patch introduces the new notifier call chain exclusively
    for page fault notifications their by avoiding notifying unnecessary
    components in the do_page_fault() code path.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f9e87c0454059e80f3811f95ad9f40ed28c69a2
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:27 2006 -0700

    [PATCH] Notify page fault call chain for powerpc
    
    Overloading of page fault notification with the notify_die() has performance
    issues(since the only interested components for page fault is kprobes and/or
    kdb) and hence this patch introduces the new notifier call chain exclusively
    for page fault notifications their by avoiding notifying unnecessary
    components in the do_page_fault() code path.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ae9a5b85655d7133ab8e7c99b742ef20c8dbb7d2
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:26 2006 -0700

    [PATCH] Notify page fault call chain for ia64
    
    Overloading of page fault notification with the notify_die() has performance
    issues(since the only interested components for page fault is kprobes and/or
    kdb) and hence this patch introduces the new notifier call chain exclusively
    for page fault notifications their by avoiding notifying unnecessary
    components in the do_page_fault() code path.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b71b5b652852db1b499d22aaabed8f5043acafad
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:25 2006 -0700

    [PATCH] Notify page fault call chain for i386
    
    Overloading of page fault notification with the notify_die() has performance
    issues(since the only interested components for page fault is kprobes and/or
    kdb) and hence this patch introduces the new notifier call chain exclusively
    for page fault notifications their by avoiding notifying unnecessary
    components in the do_page_fault() code path.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bd858a507937cef6e8ca5efc6820a5744e73683
Author: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
Date:   Mon Jun 26 00:25:25 2006 -0700

    [PATCH] Notify page fault call chain for x86_64
    
    Currently in the do_page_fault() code path, we call notify_die(DIE_PAGE_FAULT,
    ...) to notify the page fault.  Since notify_die() is highly overloaded, this
    page fault notification is currently being sent to all the components
    registered with register_die_notification() which uses the same die_chain to
    loop for all the registered components which is unnecessary.
    
    In order to optimize the do_page_fault() code path, this critical page fault
    notification is now moved to different call chain and the test results showed
    great improvements.
    
    And the kprobes which is interested in this notifications, now registers onto
    this new call chain only when it need to, i.e Kprobes now registers for page
    fault notification only when their are an active probes and unregisters from
    this page fault notification when no probes are active.
    
    I have incorporated all the feedback given by Ananth and Keith and everyone,
    and thanks for all the review feedback.
    
    This patch:
    
    Overloading of page fault notification with the notify_die() has performance
    issues(since the only interested components for page fault is kprobes and/or
    kdb) and hence this patch introduces the new notifier call chain exclusively
    for page fault notifications their by avoiding notifying unnecessary
    components in the do_page_fault() code path.
    
    Signed-off-by: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36721656776f177280ccb50477a02e86e6444292
Author: mao, bibo <bibo.mao@intel.com>
Date:   Mon Jun 26 00:25:22 2006 -0700

    [PATCH] Kprobe: multi kprobe posthandler for booster
    
    If there are multi kprobes on the same probepoint, there will be one extra
    aggr_kprobe on the head of kprobe list.  The aggr_kprobe has
    aggr_post_handler/aggr_break_handler whether the other kprobe
    post_hander/break_handler is NULL or not.  This patch modifies this, only
    when there is one or more kprobe in the list whose post_handler is not
    NULL, post_handler of aggr_kprobe will be set as aggr_post_handler.
    
    [soshima@redhat.com: !CONFIG_PREEMPT fix]
    Signed-off-by: bibo, mao <bibo.mao@intel.com>
    Cc: Masami Hiramatsu <hiramatu@sdl.hitachi.co.jp>
    Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Cc: "Keshavamurthy, Anil S" <anil.s.keshavamurthy@intel.com>
    Cc: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Cc: Jim Keniston <jkenisto@us.ibm.com>
    Cc: Yumiko Sugita <sugita@sdl.hitachi.co.jp>
    Cc: Hideo Aoki <haoki@redhat.com>
    Signed-off-by: Satoshi Oshima <soshima@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 585deacaca3e7bfc63580623f0344d1fa9c47f11
Author: Masami Hiramatsu <hiramatu@sdl.hitachi.co.jp>
Date:   Mon Jun 26 00:25:19 2006 -0700

    [PATCH] kprobe: boost 2byte-opcodes on i386
    
    Previous kprobe-booster patch has not handled any 2byte opcodes and
    prefixes.  I checked whole IA32 opcode map and classified it.
    
    This patch enables kprobe to boost those 2byte opcodes and prefixes.
    
    Signed-off-by: Masami Hiramatsu <hiramatu@sdl.hitachi.co.jp>
    Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Cc: "Keshavamurthy, Anil S" <anil.s.keshavamurthy@intel.com>
    Cc: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Cc: Jim Keniston <jkenisto@us.ibm.com>
    Cc: Yumiko Sugita <sugita@sdl.hitachi.co.jp>
    Cc: Satoshi Oshima <soshima@redhat.com>
    Cc: Hideo Aoki <haoki@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ae7440e6b7a46f4c119c60580aa9384c1b463f7
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Mon Jun 26 00:25:19 2006 -0700

    [PATCH] GTOD: add scx200 HRT clocksource
    
    Add a GTOD clocksource driver based on the Geode SCx200's Hi-Res Timer.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: john stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19923c190e0932bf0ac1e1d06a48f5c3678dd0de
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Mon Jun 26 00:25:18 2006 -0700

    [PATCH] fix and optimize clock source update
    
    This fixes the clock source updates in update_wall_time() to correctly
    track the time coming in via current_tick_length().  Optimize the fast
    paths to be as short as possible to keep the overhead low.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Acked-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6415ce9a922a1446e7ee0ac9b016082232ebe373
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:16 2006 -0700

    [PATCH] time: fix time going backward w/ clock=pit
    
    Here is the PIT fix against the TOD patches that Tim pointed out.  Many
    thanks to Tim for hunting this down.
    
    Cc: Tim Mann <mann@vmware.com>
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f9f303aa33c7acc7b4aa9ebea25cbd990bc707b
Author: Jim Cromie <jim.cromie@gmail.com>
Date:   Mon Jun 26 00:25:15 2006 -0700

    [PATCH] generic-time: add macro to simplify/hide mask constants
    
    Add a CLOCKSOURCE_MASK macro to simplify initializing the mask for a struct
    clocksource, and use it to replace literal mask constants in the various
    clocksource drivers.
    
    Signed-off-by: Jim Cromie <jim.cromie@gmail.com>
    Acked-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d622d4794490cef933c20e4a6279e43e03fafad
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Mon Jun 26 00:25:14 2006 -0700

    [PATCH] make pmtmr_ioport __read_mostly
    
    - written on init only, accessed for every timer read --> __read_mostly
    - fix broken sentence
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Cc: john stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a275254975a29c51929ee175b92ac471ac2a0043
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:14 2006 -0700

    [PATCH] time: rename clocksource functions
    
    As suggested by Roman Zippel, change clocksource functions to use
    clocksource_xyz rather then xyz_clocksource to avoid polluting the
    namespace.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d0cf410e94b1f1ff852c3f210d22cc6c5a27ffa
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:12 2006 -0700

    [PATCH] Time: i386 Clocksource Drivers
    
    Implement the time sources for i386 (acpi_pm, cyclone, hpet, pit, and tsc).
    With this patch, the conversion of the i386 arch to the generic timekeeping
    code should be complete.
    
    The patch should be fairly straight forward, only adding the new clocksources.
    
    [hirofumi@mail.parknet.co.jp: acpi_pm cleanup]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61743fe445213b87fb55a389c8d073785323ca3e
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:12 2006 -0700

    [PATCH] Time: i386 Conversion - part 4: Remove Old timer_opts Code
    
    Remove the old timers/timer_opts infrastructure which has been disabled.  It
    is a fairly straightforward set of deletions
    
    Note that this does not provide any i386 clocksources, so you will only have
    the jiffies clocksource.  To get full replacements for the code being removed
    here, the timeofday-clocks-i386 patch will be needed.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f84fa2f3edc8902cfed02cd510c7c58334bb9bd
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:11 2006 -0700

    [PATCH] Time: i386 Conversion - part 3: Enable Generic Timekeeping
    
    This converts the i386 arch to use the generic timeofday subsystem.  It
    enabled the GENERIC_TIME option, disables the timer_opts code and other arch
    specific timekeeping code and reworks the delay code.
    
    While this patch enables the generic timekeeping, please note that this patch
    does not provide any i386 clocksource.  Thus only the jiffies clocksource will
    be available.  To get full replacements for the code being disabled here, the
    timeofday-clocks-i386 patch will needed.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 539eb11e6e904f2cd4f62908cc5e44d724879721
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:10 2006 -0700

    [PATCH] Time: i386 Conversion - part 2: Rework TSC Support
    
    As part of the i386 conversion to the generic timekeeping infrastructure, this
    introduces a new tsc.c file.  The code in this file replaces the TSC
    initialization, management and access code currently in timer_tsc.c (which
    will be removed) that we want to preserve.
    
    The code also introduces the following functionality:
    
    o tsc_khz: like cpu_khz but stores the TSC frequency on systems that do not
      change TSC frequency w/ CPU frequency
    
    o check/mark_tsc_unstable: accessor/modifier flag for TSC timekeeping
      usability
    
    o minor cleanups to calibration math.
    
    This patch also includes a one line __cpuinitdata fix from Zwane Mwaikambo.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d016ef1380a2a9a5ca5742ede04334199868f82
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:09 2006 -0700

    [PATCH] Time: i386 Conversion - part 1: Move timer_pit.c to i8253.c
    
    A simple cleanup for the i386 arch in preparation of moving to the generic
    timeofday infrastructure.  It simply moves the PIT initialization code, locks,
    and other code we want to keep from some code from timer_pit.c (which will be
    removed) to i8253.c.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ede65f3926a284f07765b94d6d9fd10d63791174
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 26 00:25:09 2006 -0700

    [PATCH] hangcheck: remove monotomic_clock on x86
    
    John's about to nuke x86's monotonic clock without grepping for it first.  The
    patch lamely borrows the ppc64 code for x86.
    
    hangcheck-timer shouldn't be doing it this way
    
    a) HAVE_MONOTONIC should be CONFIG_MONOTONIC_CLOCK and it should be defined
       in arch/xxx/Kconfig.
    
    b) That ifdef tangle shouldn't be in hangcheck-timer.c.  It should be using
       arch-provided helper functions, which CONFIG_MONOTONIC_CLOCK-enabling
       architectures implement in arch/something.c
    
    Cc: john stultz <johnstul@us.ibm.com>
    Acked-by: Joel Becker <joel.becker@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cf3c769b4b0dd1146da84d5cf045dcfe53bd0f13
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:08 2006 -0700

    [PATCH] Time: Introduce arch generic time accessors
    
    Introduces clocksource switching code and the arch generic time accessor
    functions that use the clocksource infrastructure.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5eb6d20533d14a432df714520939a6181e28f099
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:07 2006 -0700

    [PATCH] Time: Use clocksource abstraction for NTP adjustments
    
    Instead of incrementing xtime by tick_nsec + ntp adjustments, use the
    clocksource abstraction to increment and scale time.  Using the clocksource
    abstraction allows other clocksources to be used consistently in the face of
    late or lost ticks, while preserving the existing behavior via the jiffies
    clocksource.
    
    This removes the need to keep time_phase adjustments as we just use the
    current_tick_length() function as the NTP interface and accumulate time using
    shifted nanoseconds.
    
    The basics of this design was by Roman Zippel, however it is my own
    interpretation and implementation, so the credit should go to him and the
    blame to me.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 260a42309b31cbc54eb4b6b85649e412bcad053f
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:07 2006 -0700

    [PATCH] Time: Let user request precision from current_tick_length()
    
    Change the current_tick_length() function so it takes an argument which
    specifies how much precision to return in shifted nanoseconds.  This provides
    a simple way to convert between NTPs internal nanoseconds shifted by
    (SHIFT_SCALE - 10) to other shifted nanosecond units that are used by the
    clocksource abstraction.
    
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad596171ed635c51a9eef829187af100cbf8dcf7
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:06 2006 -0700

    [PATCH] Time: Use clocksource infrastructure for update_wall_time
    
    Modify the update_wall_time function so it increments time using the
    clocksource abstraction instead of jiffies.  Since the only clocksource driver
    currently provided is the jiffies clocksource, this should result in no
    functional change.  Additionally, a timekeeping_init and timekeeping_resume
    function has been added to initialize and maintain some of the new timekeping
    state.
    
    [hirofumi@mail.parknet.co.jp: fixlet]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 734efb467b31e56c2f9430590a9aa867ecf3eea1
Author: john stultz <johnstul@us.ibm.com>
Date:   Mon Jun 26 00:25:05 2006 -0700

    [PATCH] Time: Clocksource Infrastructure
    
    This introduces the clocksource management infrastructure.  A clocksource is a
    driver-like architecture generic abstraction of a free-running counter.  This
    code defines the clocksource structure, and provides management code for
    registering, selecting, accessing and scaling clocksources.
    
    Additionally, this includes the trivial jiffies clocksource, a lowest common
    denominator clocksource, provided mainly for use as an example.
    
    [hirofumi@mail.parknet.co.jp: Don't enable IRQ too early]
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Paul Mundt <lethal@linux-sh.org>
    Signed-off-by: John Stultz <johnstul@us.ibm.com>
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ade1a29e168ba08b699a418ff5e762315fa33f70
Author: Badari Pulavarty <pbadari@us.ibm.com>
Date:   Mon Jun 26 00:25:04 2006 -0700

    [PATCH] ext3: Add "-o bh" option
    
    This patch adds "-o bh" option to force use of buffer_heads.  This option
    is needed when we make "nobh" as default - and if we run into problems.
    
    Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 71c0cd7042672fce2463d82183d20bfb574f4cb5
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:04 2006 -0700

    [PATCH] Add bcm43xx HW RNG support
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebc915ad26d881ddcafbe4e0975203d23289f36f
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:03 2006 -0700

    [PATCH] Add TI OMAP CPU family HW RNG driver
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d7174bcb919c15b295271e37c3f65c716710715c
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:02 2006 -0700

    [PATCH] Add ixp4xx HW RNG driver
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 13523363577d49b9af3cad06fcb757126bedc61b
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:02 2006 -0700

    [PATCH] Add VIA HW RNG driver
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ef5d862734b84239e0140319a95fb0bbff5ef394
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:01 2006 -0700

    [PATCH] Add Geode HW RNG driver
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96d63c0297ccfd6d9059c614b3f5555d9441a2b3
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:25:00 2006 -0700

    [PATCH] Add AMD HW RNG driver
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca644bd5039566725b7c71a559e65ea91b7abfb5
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:24:59 2006 -0700

    [PATCH] Add Intel HW RNG driver
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 844dd05fec172d98b0dacecd9b9e9f6595204c13
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:24:59 2006 -0700

    [PATCH] Add new generic HW RNG core
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59f5d35f83738bf07e66f8cdcff32a433df804a3
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 26 00:24:58 2006 -0700

    [PATCH] Remove old HW RNG support
    
    This patch series replaces the old non-generic Hardware Random Number
    Generator support by a fully generic RNG API.
    
    This makes it possible to register additional RNGs from modules.  With this
    patch series applied, Laptops with a bcm43xx chip (PowerBook) have a HW RNG
    available now.
    
    Additionally two new RNG drivers are added for the "ixp4xx" and "omap"
    devices.  (Written by Deepak Saxena).  This patch series includes the old
    patches by Deepak Saxena.
    
    The old x86-rng driver has beed split.
    
    The userspace RNG daemon can later be updated to select the RNG through
    /sys/class/misc/hw_random/ for convenience.  For now it is sufficient to use
    cat and echo -n on the sysfs attributes.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9637f28f8b9facff53b00bea6b5d27c9b150b422
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 26 00:24:57 2006 -0700

    [PATCH] reiserfs: remove reiserfs_aio_write()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: <reiserfs-dev@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4eb582cf1fbd7b9e5f466e3718a59c957e75254e
Author: Michael LeMay <mdlemay@epoch.ncsc.mil>
Date:   Mon Jun 26 00:24:57 2006 -0700

    [PATCH] keys: add a way to store the appropriate context for newly-created keys
    
    Add a /proc/<pid>/attr/keycreate entry that stores the appropriate context for
    newly-created keys.  Modify the selinux_key_alloc hook to make use of the new
    entry.  Update the flask headers to include a new "setkeycreate" permission
    for processes.  Update the flask headers to include a new "create" permission
    for keys.  Use the create permission to restrict which SIDs each task can
    assign to newly-created keys.  Add a new parameter to the security hook
    "security_key_alloc" to indicate whether it is being invoked by the kernel, or
    from userspace.  If it is being invoked by the kernel, the security hook
    should never fail.  Update the documentation to reflect these changes.
    
    Signed-off-by: Michael LeMay <mdlemay@epoch.ncsc.mil>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 06ec7be557a1259611d6093a00463c42650dc71a
Author: Michael LeMay <mdlemay@epoch.ncsc.mil>
Date:   Mon Jun 26 00:24:56 2006 -0700

    [PATCH] keys: restrict contents of /proc/keys to Viewable keys
    
    Restrict /proc/keys such that only those keys to which the current task is
    granted View permission are presented.
    
    The documentation is also updated to reflect these changes.
    
    Signed-off-by: Michael LeMay <mdlemay@epoch.ncsc.mil>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e51f6d343789a4f0a2a7587ad7ec7746969d5c1c
Author: Michael LeMay <mdlemay@epoch.ncsc.mil>
Date:   Mon Jun 26 00:24:54 2006 -0700

    [PATCH] keys: allocate key serial numbers randomly
    
    Cause key_alloc_serial() to generate key serial numbers randomly rather than
    in linear sequence.
    
    Using an linear sequence permits a covert communication channel to be
    established, in which one process can communicate with another by creating or
    not creating new keys within a certain timeframe.  The second process can
    probe for the expected next key serial number and judge its existence by the
    error returned.
    
    This is a problem as the serial number namespace is globally shared between
    all tasks, regardless of their context.
    
    For more information on this topic, this old TCSEC guide is recommended:
    
    	http://www.radium.ncsc.mil/tpep/library/rainbow/NCSC-TG-030.html
    
    Signed-off-by: Michael LeMay <mdlemay@epoch.ncsc.mil>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5801649d8b83e7cb9b15839761bdee594653c294
Author: Fredrik Tolf <fredrik@dolda2000.com>
Date:   Mon Jun 26 00:24:51 2006 -0700

    [PATCH] keys: let keyctl_chown() change a key's owner
    
    Let keyctl_chown() change a key's owner, including attempting to transfer the
    quota burden to the new user.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31204ed925b067d2bb65adb89501656f8274a32a
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jun 26 00:24:51 2006 -0700

    [PATCH] keys: discard the contents of a key on revocation
    
    Cause the keys linked to a keyring to be unlinked from it when revoked and it
    causes the data attached to a user-defined key to be discarded when revoked.
    
    This frees up most of the quota a key occupied at that point, rather than
    waiting for the key to actually be destroyed.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e047ef5fe2d52e83020e856b1bf2556a6a2ce98
Author: David Howells <dhowells@redhat.com>
Date:   Mon Jun 26 00:24:50 2006 -0700

    [PATCH] keys: sort out key quota system
    
    Add the ability for key creation to overrun the user's quota in some
    circumstances - notably when a session keyring is created and assigned to a
    process that didn't previously have one.
    
    This means it's still possible to log in, should PAM require the creation of a
    new session keyring, and fix an overburdened key quota.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f116629d03655adaf7832b93b03c99391d09d4a7
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Jun 26 00:24:46 2006 -0700

    [PATCH] fs: use list_move()
    
    This patch converts the combination of list_del(A) and list_add(A, B) to
    list_move(A, B) under fs/.
    
    Cc: Ian Kent <raven@themaw.net>
    Acked-by: Joel Becker <joel.becker@oracle.com>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Cc: Hans Reiser <reiserfs-dev@namesys.com>
    Cc: Urban Widmark <urban@teststation.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Acked-by: Mark Fasheh <mark.fasheh@oracle.com>
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 179e09172ab663b8587ecc46bb18a56a770304a9
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Jun 26 00:24:41 2006 -0700

    [PATCH] drivers: use list_move()
    
    This patch converts the combination of list_del(A) and list_add(A, B) to
    list_move(A, B) under drivers/.
    
    Acked-by: Corey Minyard <minyard@mvista.com>
    Cc: Ben Collins <bcollins@debian.org>
    Acked-by: Roland Dreier <rolandd@cisco.com>
    Cc: Alasdair Kergon <dm-devel@redhat.com>
    Cc: Gerd Knorr <kraxel@bytesex.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Frank Pavlic <fpavlic@de.ibm.com>
    Acked-by: Matthew Wilcox <matthew@wil.cx>
    Cc: Andrew Vasquez <linux-driver@qlogic.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a842ef297fd91b1b93f2aa5898d2efd19e95f6a5
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Jun 26 00:24:40 2006 -0700

    [PATCH] net/rxrpc: use list_move()
    
    This patch converts the combination of list_del(A) and list_add(A, B) to
    list_move(A, B) under net/rxrpc.
    
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1bfba4e8ea0e555e3a0296051517d96253660ccc
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Jun 26 00:24:40 2006 -0700

    [PATCH] core: use list_move()
    
    This patch converts the combination of list_del(A) and list_add(A, B) to
    list_move(A, B).
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Ram Pai <linuxram@us.ibm.com>
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7addcea6ac7c0e9733a48cda06ca0880f116a48
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Jun 26 00:24:39 2006 -0700

    [PATCH] arch: use list_move()
    
    This patch converts the combination of list_del(A) and list_add(A, B) to
    list_move(A, B) under arch/.
    
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e13059a37252c45ab7173a0e4bac05e4a444ab6
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Jun 26 00:24:37 2006 -0700

    [PATCH] use list_add_tail() instead of list_add()
    
    This patch converts list_add(A, B.prev) to list_add_tail(A, &B) for
    readability.
    
    Acked-by: Karsten Keil <kkeil@suse.de>
    Cc: Jan Harkes <jaharkes@cs.cmu.edu>
    Acked-by: Jan Kara <jack@suse.cz>
    AOLed-by: David Woodhouse <dwmw2@infradead.org>
    Cc: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 38e13929c391e6964b00840b765ed601a3377d33
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon Jun 26 00:24:36 2006 -0700

    [PATCH] Correct tty doc
    
    This method died some time ago, so kill the doc for it.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2be8ee53856c3c510d4d38f534979747db65d96
Author: Fredrik Roubert <roubert@df.lth.se>
Date:   Mon Jun 26 00:24:35 2006 -0700

    [PATCH] fix magic sysrq on strange keyboards
    
    Magic sysrq fails to work on many keyboards, particulary most of notebook
    keyboards.  This patch fixes it.
    
    The idea is quite simple: Discard the SysRq break code if Alt is still being
    held down.  This way the broken keyboard can send the break code (or the user
    with a normal keyboard can release the SysRq key) and the kernel waits until
    the next key is pressed or the Alt key is released.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c6856f702732d3cfc33eb59303e998ad6961de8
Author: Markus Armbruster <armbru@redhat.com>
Date:   Mon Jun 26 00:24:34 2006 -0700

    [PATCH] oprofile: Fix unnecessary cleverness
    
    nmi_create_files() in arch/i386/oprofile/nmi_int.c depends on
    model->num_counters (number of performance counters) being less than 10.
    While this is currently the case, it's too clever by half.
    
    Other archs aren't quite as clever: they assume 100.  I suggest to
    normalize them all to 1000.
    
    Cc: Philippe Elie <phil.el@wanadoo.fr>
    Cc: John Levon <levon@movementarian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57136ca6d57359c7f21a9bbb4a5a0a61eeb53f2b
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Mon Jun 26 00:24:33 2006 -0700

    [PATCH] Bluetooth: fix potential NULL ptr deref in dtl1_cs.c::dtl1_hci_send_frame()
    
    There's a problem in drivers/bluetooth/dtl1_cs.c::dtl1_hci_send_frame()
    
    If bt_skb_alloc() returns NULL, then skb_reserve(s, NSHL); will cause a
    NULL pointer deref - ouch.  If we can't allocate the resources we require
    we need to tell the caller by returning -ENOMEM.
    
    Found by the coverity checker as bug #409
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Acked-by: Marcel Holtmann <marcel@holtmann.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 81615b624a45621b758380ec45d750483eae281d
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 00:24:32 2006 -0700

    [PATCH] Convert kernel/cpu.c to mutexes
    
    Convert kernel/cpu.c from semaphore to mutex.
    
    I've reviewed all lock_cpu_hotplug() critical sections, and they all seem to
    fit mutex semantics.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1fb00c6cbd8356f43b46322742f3c01c2a1f02da
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 00:24:31 2006 -0700

    [PATCH] work around ppc64 bootup bug by making mutex-debugging save/restore irqs
    
    It seems ppc64 wants to lock mutexes in early bootup code, with interrupts
    disabled, and they expect interrupts to stay disabled, else they crash.
    
    Work around this bug by making mutex debugging variants save/restore irq
    flags.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 20c5426f8155a89b6df06325f9b278f5052b8c7e
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 26 00:24:30 2006 -0700

    [PATCH] fix "USB: move <linux/usb_input.h> to <linux/usb/input.h>"
    
    Update this driver for recent header file movement.
    
    Cc: David Brownell <david-b@pacbell.net>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2efe55a9cec8418f0e0cde3dc3787a42fddc4411
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Mon Jun 26 18:57:34 2006 +0200

    Storage class should be first
    
    Storage class should be before const
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit b184a4c9a4e542890265b4cdd3ff7908f4adc9c4
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Mon Jun 26 17:48:29 2006 +0100

    [ARM] 3654/1: add ajeco 1arm sbc support
    
    Patch from Lennert Buytenhek
    
    This patch adds support for the Ajeco 1ARM Single Board Computer, a
    VME form factor SBC based on the Atmel AT91 SoC, with 64M RAM, seven
    serial ports, three ethernet ports, IDE, CF, USB host and device,
    and S-Video/VGA out.--
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 48a1204c462985378e02b4c5129901f3dbc93f80
Author: Egry Gabor <gaboregry@t-online.hu>
Date:   Mon Jun 26 18:47:15 2006 +0200

    i386: Trivial typo fixes
    
    Trivial typo fixes in Kconfig files (i386).
    
    Signed-off-by: Egry Gabor <gaboregry@t-online.hu>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit bc940c40c6473cb40178458e2c74aea6b45aac03
Author: Matthew Martin <lihnucks@gmail.com>
Date:   Mon Jun 26 18:43:54 2006 +0200

    ixj: make ixj_set_tone_off() static
    
    Signed-off-by: Matthew Martin <lihnucks@gmail.com>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit d6e05edc59ecd79e8badf440c0d295a979bdfa3e
Author: Andreas Mohr <andi@lisas.de>
Date:   Mon Jun 26 18:35:02 2006 +0200

    spelling fixes
    
    acquired (aquired)
    contiguous (contigious)
    successful (succesful, succesfull)
    surprise (suprise)
    whether (weather)
    some other misspellings
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit f18190bd3407554ba6df30a1927e07e6cba93e56
Author: Lee Revell <rlrevell@joe-job.com>
Date:   Mon Jun 26 18:30:00 2006 +0200

    fix paniced->panicked typos
    
    In a testament to the utter simplicity and logic of the English
    language ;-), I found a single correct use - in kernel/panic.c - and
    10-15 incorrect ones.
    
    Signed-Off-By: Lee Revell <rlrevell@joe-job.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit a0ebb3ffd6c195011f7e4abdfc40f98342d36ce2
Author: Michael Hayes <mike@aiinc.ca>
Date:   Mon Jun 26 18:27:35 2006 +0200

    Spelling fixes for Documentation/atomic_ops.txt
    
    Spelling and typo fixes for Documentation/atomic_ops.txt
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 0ecbf4b5fc38479ba29149455d56c11a23b131c0
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 18:21:37 2006 +0200

    move acknowledgment for Mark Adler to CREDITS
    
    The place in the documentation of the Linux kernel to acknowledge
    contributions is the CREDITS file.
    
    Give Mark Adler an entry there instead of including a string in the
    kernel image.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit bdca3f202dbeaca2fcc4fb47219476286c999b0d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon Jun 26 18:19:23 2006 +0200

    remove the bouncing email address of David Campbell
    
    This patch removes a bouncing email address from the kernel sources.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>

commit 62ed948cb1405fe95d61d8c6445c102e0c9da0a6
Merge: 17ffc7b... fcc18e8...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Jun 26 16:35:44 2006 +0100

    Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 9ea7290902abcf22f796e9aeae4dc2e71d3f7e67
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jun 23 14:25:34 2006 -0400

    [SCSI] SCSI core: Allow QUIESCE -> CANCEL sdev transition
    
    We have to be able to remove SCSI devices even when they are suspended, so
    QUIESCE -> CANCEL must be a legal state transition.  This patch (as727)
    adds the transition to the state machine.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 03aba2f79594ca94d159c8bab454de9bcc385b76
Author: Luben Tuikov <ltuikov@yahoo.com>
Date:   Fri Jun 23 09:39:09 2006 -0700

    [SCSI] sd/scsi_lib simplify sd_rw_intr and scsi_io_completion
    
    This patch simplifies "good_bytes" computation in sd_rw_intr().
    sd: "good_bytes" computation is always done in terms of the resolution
    of the device's medium, since after that it is the number of good bytes
    we pass around and other layers/contexts (as opposed ot sd) can translate
    that to their own resolution (block layer:512).  It also makes
    scsi_io_completion() processing more straightforward, eliminating the
    3rd argument to the function.
    
    It also fixes a couple of bugs like not checking return value,
    using "break" instead of "return;", etc.
    
    I've been running with this patch for some time now on a
    test (do-it-all) system.
    
    Signed-off-by: Luben Tuikov <ltuikov@yahoo.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f89d0a4e1d01168f20f9e8273de7dfc094b2a430
Author: Hannes Reinecke <hare@suse.de>
Date:   Thu Jun 22 11:45:00 2006 +0200

    [SCSI] aic79xx: remove slave_destroy
    
    Even with the latest fixes aic79xx still occasionally triggers the
    BUG_ON in slave_destroy. Rather than trying to figure out the various
    levels of interaction here I've decided to remove the callback altogether.
    
    The primary reason for the slave_alloc / slave_destroy is to keep an
    index of pointers to the sdevs associated with a given target.
    However, by changing the arguments to the affected functions slightly
    it's possible to avoid the use of that index entirely.
    The only performance penalty we'll incur is in writing the
    information for /proc/scsi/XXX, as we'll have to recurse over all
    available sdevs to find the correct ones. But I doubt that reading
    from /proc is in any way time-critical.
    
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9ba0883cfc5ab69820c05f1bf2b7711bb0a0103c
Author: Hannes Reinecke <hare@suse.de>
Date:   Thu Jun 22 09:19:51 2006 +0200

    [SCSI] HP XP devinfo update
    
    According to Anthony Cheung all HP XP arrays with "OPEN-"
    types support REPORT_LUN. So there is no reason why we
    shouldn't use it.
    
    Signed-off-by: Anthony Cheung <anthony.cheung@hp.com>
    Signed-off-by: Hannes Reinecke <hare@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 0e98936c924e2329f876b0b7791b45249c2e2129
Author: Sumant Patro <sumantp@lsil.com>
Date:   Tue Jun 20 15:32:37 2006 -0700

    [SCSI] megaraid_sas: zcr with fix
    
    The patch adds support for a ZCR controller (Device ID : 0x413).
    
    It also has a critical bug fix :
    
    Disable controller interrupt before firing INIT cmd to FW.  Interrupt
    is enabled after required initialization is over. This is done to
    ensure that driver is ready to handle interrupts when it is generated
    by the controller.
    
    Signed-off-by: Sumant Patro <Sumant.Patro@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cfc736564fd01ee008d746913b1bbb90e3eb1f99
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 15:26:13 2006 +0100

    [ARM] fix drivers/mfd/ucb1x00-core.c IRQ probing bug
    
    While reviewing the IRQ autoprobing code i found the attached buglet.
    probe_irq_on()/off() calls must always be in pairs, because the generic IRQ
    code uses a global semaphore to serialize all autoprobing activites.
    (which does make sense) The ARM code's probe_irq_*() implementation does
    not do this, but if this driver is ever used on another platform, this bug
    might bite.
    
    (It probably does not trigger in practice, because a zero probing mask
    returned should be rare - but still.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b07076e6173a2593e369c3375f07c1cd7d78c36f
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 26 15:24:36 2006 +0100

    [SERIAL] 8250_pnp: add support for other Wacom tablets
    
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=6a242b6c279af7805a6cca8f39dbc5bfe1f78cd1
    
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cefbda2d6cd9bf78a93768130729a6d142588d67
Author: Dave Boutcher <boutcher@cs.umn.edu>
Date:   Mon Jun 12 21:22:51 2006 -0500

    [SCSI] ibmvscsi: treat busy and error conditions separately
    
    This patch fixes a condition where ibmvscsi treats a transport error as a
    "busy" condition, so no errors were returned to the scsi mid-layer.
    In a RAID environment this means that I/O hung rather than failing
    over.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cd701aa27e4cfab5c99c7da13d404b1f3a0aecfb
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 26 15:12:58 2006 +0100

    [ARM] 3651/1: S3C24XX: Make arch list more detailed
    
    Patch from Ben Dooks
    
    Add the rest of the supported S3C24XX family to the
    configuration selection for ARCH_S3C2410. This should
    try and make it clearer for people trying to find the
    S3C2440 or freinds where they can be found.--
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 28c68e3450a19930d12e1798950d62e09f447ae1
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 26 15:12:57 2006 +0100

    [ARM] 3650/1: S3C2412: Update s3c2410_defconfig
    
    Patch from Ben Dooks
    
    Add SMDK2413 to the list of the machines being
    built for ARCH_S3C2410, thus ensursing our all
    machines build has an representitive of the
    S3C2412/S3C2413 CPU series--
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 52c5ceceb145fad10b9996ce414dadcb6b02d959
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 26 15:12:56 2006 +0100

    [ARM] 3649/1: S3C24XX: Fix capitalisation of CPU on SMDK2440
    
    Patch from Ben Dooks
    
    Make CPU uppercase on the SMDK2440 KConfig entries--
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c65b1445d153a66ca91b00c1f10187e495c17918
Author: Douglas Gilbert <dougg@torque.net>
Date:   Tue Jun 6 00:11:24 2006 -0400

    [SCSI] scsi_debug version 1.79
    
      - add 'virtual_gb' parameter to simulate large storage
        (by wrapping in dev_size_mb megabytes of actual ram)
      - add 'no_lun_0' parameter to skip lun 0 on each target
        (but still respond as required to INQUIRY + REPORT LUNS)
      - add well know lu support
      - add MODE SELECT commands support [pages: 0xa and 0x1c]
      - add LOG SENSE command support [pages: 0xd and 0x2f]
      - add READ CAPACITY (16) support
      - increase number of mode pages supported (to read),
        mainly transport specific (SAS) mode (sub)pages
      - add more VPD pages and extend others, including
        ATA information VPD page
      - START STOP UNIT now maintains a state machine
      - READ (16) and WRITE (16) cope with lbas larger
        than 32 bits (needed for the 'virtual_gb' parameter)
      - allow single command transfers up to 32 MB
      - more precise error (sense data) messages
    
    Signed-off-by: Douglas Gilbert <dougg@torque.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4311fa60b0d1cb5a2f62f646978294bca7b46cbb
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 22 15:46:15 2006 -0400

    [SCSI] kmalloc argument switcheroo in recent 53c700 change.
    
    On Wed, Jun 21, 2006 at 07:00:34PM +0000, Linux Kernel wrote:
     > commit 67d59dfdeb21df2c16dcd478b66177e91178ecd0
     > tree ae85703651d81740f4a6cd398f9dd4d6aabe6a2f
     > parent 6db874fbdbedba5e15e76cc03b42f52ea70338c0
     > author James Bottomley <James.Bottomley@SteelEye.com> Wed, 14 Jun 2006 07:31:19 -0500
     > committer James Bottomley <jejb@mulgrave.il.SteelEye.com> Tue, 20 Jun 2006 05:34:01 -0500
     >
     > [SCSI] 53c700: remove reliance on deprecated cmnd fields
     >  ...
     >
     > +	SDp->hostdata = kmalloc(GFP_KERNEL, sizeof(struct NCR_700_sense));
     > +
     > +	if (!SDp->hostdata)
     > +		return -ENOMEM;
    
    "I'll take reversed arguments for $100 please Alex".
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 124a27fe32398a69d16bae374aeb17ad67a0ebbf
Author: Ingo Molnar <mingo@elte.hu>
Date:   Mon Jun 26 13:47:59 2006 +0000

    [CIFS] Remove calls to to take f_owner.lock
    
    CIFS takes/releases f_owner.lock - why?  It does not change anything in the
    fowner state.  Remove this locking.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 33f40b3b023b9f00b40ecfb3a39286de13516b33
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 17:48:22 2006 -0300

    V4L/DVB (4227): Update this driver for recent header file movement.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8cbde94be34f95c01515ba19ce32bcd51ab3949e
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Jun 24 14:36:02 2006 -0300

    V4L/DVB (4223): Add V4L2_CID_MPEG_STREAM_VBI_FMT control
    
    V4L2_CID_MPEG_STREAM_VBI_FMT controls if and how VBI data is embedded in
    an MPEG stream. Currently only one format is supported: the format designed
    for the ivtv driver. This should be extended with new standard formats
    (such as defined for DVB) in the future.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4f725cb3fa46fabe7fd7c7175fa77e12616bfdb8
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Jun 24 09:47:56 2006 -0300

    V4L/DVB (4222): Always switch tuner mode when calling VIDIOC_S_FREQUENCY.
    
    Fixes the weird and incorrect condition in VIDIOC_S_FREQUENCY.
    The tuner should always be switched to the mode specified in the
    v4l2_frequency struct. Much simpler and also corresponding to the
    v4l2 specification.
    The old condition made it impossible to switch from radio to
    analog tv mode using VIDIOC_S_FREQUENCY. Instead the (tv) frequency would
    be given to the radio tuner.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 91a972910df042a0a308b2ffd3aa6fd42b0242e3
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Jun 24 09:26:43 2006 -0300

    V4L/DVB (4221): Add HM12 YUV format define.
    
    HM12 is a YUV 4:1:1 format used by the cx2341x MPEG encoder/decoder for
    the raw YUV input/output. The Y and UV planes are broken up in 16x16
    macroblocks and each macroblock is transmitted in turn (row by row).
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 61391e0446e97bea44d93bd1624e5b32d3cc8474
Author: Tim Kaiser <timkaiser@t-online.de>
Date:   Sun Jun 25 09:14:07 2006 -0300

    V4L/DVB (4219): Av7110: analog sound output of DVB-C rev 2.3
    
    Added support for the msp34x5 audio dac. Analog sound output of
    Technotrend DVB-C 2300 (aka Hauppauge Nexus-CA) works now.
    
    Signed-off-by: Tim Kaiser <timkaiser@t-online.de>
    Signed-off-by: Marco Schluessler <marco@lordzodiac.de>
    Signed-off-by: Oliver Endriss <o.endriss@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4a4edcca22bf46622f34db74a876a7eb91d95865
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Sun Jun 25 05:46:26 2006 -0300

    V4L/DVB (4217): Fix a misplaced closing bracket/else, which caused swzigzag not to be called
    
    Thanks to Oliver Endriss for spotting this.
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7670d73266d37d18ded5b328db2804c9a7ab7921
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Jun 24 21:05:12 2006 -0300

    V4L/DVB (4215): Make VIDEO_CX88_BLACKBIRD a separate build option
    
    This patch creates a new Kconfig menu option, entitled,
    "Blackbird MPEG encoder support (cx2388x + cx23416)"
    so that the cx88-blackbird mpeg encoder module can be
    chosen separately.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3446807d6e9ccf4b21476b0b143d35fcc964be4b
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Jun 24 20:47:21 2006 -0300

    V4L/DVB (4214): Make VIDEO_CX2341X a selectable build option
    
    The cx2341x mpeg encoder module is used by cx88-blackbird, pvrusb2 and
    the external ivtv driver. This patch allows for cx2341x to be selected without
    having to also select cx88-blackbird. This will be needed to build the external
    ivtv driver or the standalone pvrusb2 driver against kernel 2.6.18
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dff47bf21be002b3f0a6562d368474c41971b448
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Jun 24 19:25:43 2006 -0300

    V4L/DVB (4213): Cx88: cleanups
    
    remove the following unused hooks:
    - cx88-blackbird.c: cx88_ioctl_hook()
    - cx88-blackbird.c: cx88_ioctl_translator()
    make the following needlessly global functions static:
    - cx88-tvaudio.c: cx88_detect_nicam()
    remove the following unused EXPORT_SYMBOL's:
    - cx88-cards.c: cx88_bcount
    - cx88-cards.c: cx88_subids
    - cx88-cards.c: cx88_idcount
    - cx88-cards.c: cx88_card_list
    - cx88-cards.c: cx88_card_setup
    - cx88-core.c: cx88_start_audio_dma
    - cx88-core.c: cx88_stop_audio_dma
    - cx88-i2c.c: cx88_i2c_init
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d772bd03bc38794c84811be9d2537c225e08c9b8
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Sat Jun 24 11:18:58 2006 -0300

    V4L/DVB (4211): Fix an Oops for all fe that have get_frontend_algo == NULL
    
    Thanks to Johannes Stezenbach for pointing it out
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b9d0a25a484a90c1d60b974d115eff2fe580ce16
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 10 18:06:34 2006 +1000

    [CRYPTO] tcrypt: Forbid tcrypt from being built-in
    
    It makes no sense to build tcrypt into the kernel.  In fact, now that
    the driver init function's return status is being checked, it is in
    fact harmful to do so.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit e90b1a2be6010acf01673b0625cfbf18240f7744
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 2 08:42:25 2006 +1000

    [CRYPTO] aes: Add wrappers for assembly routines
    
    The wrapper routines are required when asmlinkage differs from the usual
    calling convention.  So we need to have them.  However, by rearranging
    the parameters, they will get optimised away to a single jump for most
    people.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit e805792851bcb0bb42f0c8a352be64564c13e374
Author: Michal Ludvig <michal@logix.cz>
Date:   Tue May 30 22:04:19 2006 +1000

    [CRYPTO] tcrypt: Speed benchmark support for digest algorithms
    
    This patch adds speed tests (benchmarks) for digest algorithms.
    Tests are run with different buffer sizes (16 bytes, ... 8 kBytes)
    and with each buffer multiple tests are run with different update()
    sizes (e.g. hash 64 bytes buffer in four 16 byte updates).
    There is no correctness checking of the result and all tests and
    algorithms use the same input buffer.
    
    Signed-off-by: Michal Ludvig <michal@logix.cz>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 14fdf477a7e3ff54f8e67fe506dd2677a36c56e4
Author: Michal Ludvig <michal@logix.cz>
Date:   Tue May 30 14:49:38 2006 +1000

    [CRYPTO] tcrypt: Return -EAGAIN from module_init()
    
    Intentionaly return -EAGAIN from module_init() to ensure
    it doesn't stay loaded in the kernel.  The module does all
    its work from init() and doesn't offer any runtime
    functionality => we don't need it in the memory, do we?
    
    Signed-off-by: Michal Ludvig <michal@logix.cz>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 996e2523cc347cc98237d2da3454aedc779fdcba
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun May 21 11:57:20 2006 +1000

    [CRYPTO] api: Allow replacement when registering new algorithms
    
    We already allow asynchronous removal of existing algorithm modules.  By
    allowing the replacement of existing algorithms, we can replace algorithms
    without having to wait for for all existing users to complete.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit d913ea0d6b6a48dd6eed8fc5e299b8b10e049186
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun May 21 08:45:26 2006 +1000

    [CRYPTO] api: Removed const from cra_name/cra_driver_name
    
    We do need to change these names now and even more so in future with
    instantiated algorithms.  So let's stop lying to the compiler and get
    rid of the const modifiers.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit c7fc05992afcf1d63d6d5fb6142c8d39094dbca9
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed May 24 13:02:26 2006 +1000

    [CRYPTO] api: Added cra_init/cra_exit
    
    This patch adds the hooks cra_init/cra_exit which are called during a tfm's
    construction and destruction respectively.  This will be used by the instances
    to allocate child tfm's.
    
    For now this lets us get rid of the coa_init/coa_exit functions which are
    used for exactly that purpose (unlike the dia_init function which is called
    for each transaction).
    
    In fact the coa_exit path is currently buggy as it may get called twice
    when an error is encountered during initialisation.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 110bf1c0e932615cbe43a8af8a07bc3750ae4295
Author: Michal Ludvig <michal@logix.cz>
Date:   Mon May 22 08:28:06 2006 +1000

    [CRYPTO] api: Fixed incorrect passing of context instead of tfm
    
    Fix a few omissions in passing TFM instead of CTX to algorithms.
    
    Signed-off-by: Michal Ludvig <michal@logix.cz>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 82062c72cd643c99a9e1c231270acbab986fd23f
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 16 22:20:34 2006 +1000

    [CRYPTO] padlock: Rearrange context structure to reduce code size
    
    i386 assembly has more compact instructions for accessing 7-bit offsets.
    So by moving the large members to the end of the structure we can save
    quite a bit of code size.  This patch shaves about 10% or 300 bytes off
    the padlock-aes file.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 6c2bb98bc33ae33c7a33a133a4cd5a06395fece5
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 16 22:09:29 2006 +1000

    [CRYPTO] all: Pass tfm instead of ctx to algorithms
    
    Up until now algorithms have been happy to get a context pointer since
    they know everything that's in the tfm already (e.g., alignment, block
    size).
    
    However, once we have parameterised algorithms, such information will
    be specific to each tfm.  So the algorithm API needs to be changed to
    pass the tfm structure instead of the context pointer.
    
    This patch is basically a text substitution.  The only tricky bit is
    the assembly routines that need to get the context pointer offset
    through asm-offsets.h.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 43600106e32809a4dead79fec67a63e9860e3d5d
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Tue May 16 22:06:54 2006 +1000

    [CRYPTO] digest: Remove unnecessary zeroing during init
    
    Various digest algorithms operate one block at a time and therefore
    keep a temporary buffer of partial blocks.  This buffer does not need
    to be initialised since there is a counter which indicates what is and
    isn't valid in it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 8b55ba0303bb59c34fab8e015634018780491614
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun May 14 11:00:39 2006 +1000

    [CRYPTO] aes-i586: Get rid of useless function wrappers
    
    The wrappers aes_encrypt/aes_decrypt simply reverse the order of the
    function arguments.  It's just as easy to get the actual assembly code
    to read them in the opposite order.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit e1147d8f47eb8fef93f98a30858192145137d2b2
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Mon Apr 10 08:42:35 2006 +1000

    [CRYPTO] digest: Add alignment handling
    
    Some hash modules load/store data words directly.  The digest layer
    should pass properly aligned buffer to update()/final() method.  This
    patch also add cra_alignmask to some hash modules.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit d00e708cef16442cabaf23f653baf924f5d66e83
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Thu Apr 6 03:26:01 2006 +1000

    [CRYPTO] khazad: Use 32-bit reads on key
    
    On 64-bit platform, reading 64-bit keys (which is supposed to be
    32-bit aligned) at a time will result in unaligned access.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

commit 8070b2b1ecbeb5437c92c33b4dcea1d8d80399ee
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jun 26 00:10:46 2006 -0700

    [IOAT]: Do not dereference THIS_MODULE directly to set unsafe.
    
    Use the __unsafe() macro instead.
    
    Noticed by Miles Lane.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52383678a8ac80e6679f94f60c897f9292e0e8b9
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 26 00:05:23 2006 -0700

    [NETROM]: Fix possible null pointer dereference.
    
    If in nr_link_failed the neighbour list is non-empty but the node list
    is empty we'll end dereferencing a  in a NULL pointer.
    
    This fixes coverity 362.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 068c6e98bc7ec4419299b38cd40be26ebf4bdeda
Author: Neil Horman <nhorman@tuxdriver.com>
Date:   Mon Jun 26 00:04:27 2006 -0700

    [NET] netpoll: break recursive loop in netpoll rx path
    
    The netpoll system currently has a rx to tx path via:
    
    netpoll_rx
     __netpoll_rx
      arp_reply
       netpoll_send_skb
        dev->hard_start_tx
    
    This rx->tx loop places network drivers at risk of inadvertently causing a
    deadlock or BUG halt by recursively trying to acquire a spinlock that is
    used in both their rx and tx paths (this problem was origionally reported
    to me in the 3c59x driver, which shares a spinlock between the
    boomerang_interrupt and boomerang_start_xmit routines).
    
    This patch breaks this loop, by queueing arp frames, so that they can be
    responded to after all receive operations have been completed.  Tested by
    myself and the reported with successful results.
    
    Specifically it was tested with netdump.  Heres the BZ with details:
    https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=194055
    
    Signed-off-by: Neil Horman <nhorman@tuxdriver.com>
    Acked-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8834807b43200b1658b49d3b779e74a4f77e4ffb
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Mon Jun 26 00:03:40 2006 -0700

    [NET] netpoll: don't spin forever sending to stopped queues
    
    When transmitting a skb in netpoll_send_skb(), only retry a limited number
    of times if the device queue is stopped.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Acked-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d83561a4d67863b4aa297e8f598823dd4dfe855e
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 26 00:02:47 2006 -0700

    [IRDA]: add some IBM think pads
    
    [UBUNTU:nsc-ircc] Add some IBM think pads
    Add Thinkpad T60/X60/Z60/T43/R52 Infrared driver support.
    
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=7b8d2713435a9fb69719a282ba75e117f3f76a5b
    
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 1e4fd51e2c830f2a10c9b143986757d8ea35b0fc
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 26 00:01:58 2006 -0700

    [ATM]: atm/mpc.c warning fix
    
    net/atm/mpc.c: In function 'MPOA_res_reply_rcvd':
    net/atm/mpc.c:1116: warning: unused variable 'ip'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f72b948dcbb8558d639214536c2ace1b0760f41d
Author: Phil Oester <kernel@linuxace.com>
Date:   Mon Jun 26 00:00:57 2006 -0700

    [NET]: skb_find_text ignores to argument
    
    skb_find_text takes a "to" argument which is supposed to limit how
    far into the skb it will search for the given text.  At present,
    it seems to ignore that argument on the first skb, and instead
    return a match even if the text occurs beyond the limit.
    
    Patch below fixes this, after adjusting for the "from" starting
    point.  This consequently fixes the netfilter string match's "--to"
    handling, which currently is broken.
    
    Signed-off-by: Phil Oester <kernel@linuxace.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6048126440dcb3ba01316f961465c0ff5a255dd1
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 25 23:58:10 2006 -0700

    [NET]: make net/core/dev.c:netdev_nit static
    
    netdev_nit can now become static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f54d9e8d7f7dd60f26157c12acda3fc94fcd9ab7
Author: Michael Chan <mchan@broadcom.com>
Date:   Sun Jun 25 23:57:04 2006 -0700

    [NET]: Fix GSO problems in dev_hard_start_xmit()
    
    Fix 2 problems in dev_hard_start_xmit():
    
    1. nskb->next needs to link back to skb->next if hard_start_xmit()
    returns non-zero.
    
    2. Since the total number of GSO fragments may exceed MAX_SKB_FRAGS + 1,
    it needs to stop transmitting if the netif_queue is stopped.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0718bcc09b3597c51e87f265c72135a4928d3c0b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sun Jun 25 23:55:46 2006 -0700

    [NET]: Fix CHECKSUM_HW GSO problems.
    
    Fix checksum problems in the GSO code path for CHECKSUM_HW packets.
    
    The ipv4 TCP pseudo header checksum has to be adjusted for GSO
    segmented packets.
    
    The adjustment is needed because the length field in the pseudo-header
    changes.  However, because we have the inequality oldlen > newlen, we
    know that delta = (u16)~oldlen + newlen is still a 16-bit quantity.
    This also means that htonl(delta) + th->check still fits in 32 bits.
    Therefore we don't have to use csum_add on this operations.
    
    This is based on a patch by Michael Chan <mchan@broadcom.com>.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Acked-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ba07e65b288f00cc4d2420f1da46309b1cb5a0c
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:53:47 2006 -0700

    [TIPC]: Fix incorrect correction to discovery timer frequency computation.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65f51ef0971f01d64027cb3bca2c5827fb5b19cb
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:53:20 2006 -0700

    [TIPC]: Get rid of dynamically allocated arrays in broadcast code.
    
    This change improves an earlier change which replaced the large local
    variable arrays used during broadcasting with dynamically allocated arrays.
    The temporary arrays are now incoprorated into the multicast link data
    structure.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5392d646886d8f1ae01be69c10600b8df5284c41
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:52:50 2006 -0700

    [TIPC]: Fixed link switchover bugs
    
    Incorporates several related fixes:
    - switchover now occurs when switching from an active link to a standby link
    - failure of a standby link no longer initiates switchover
    - links now display correct # of received packtes following reactivation
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a10bd924a421e0e5d5bb9640735b9317b8e473b5
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:52:17 2006 -0700

    [TIPC]: Enhanced & cleaned up system messages; fixed 2 obscure memory leaks.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f131072c3da84e70a0f65d71b3a3f6611c6a22bc
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:51:37 2006 -0700

    [TIPC]: First phase of assert() cleanup
    
    This also contains enhancements to simplify comparisons in name table
    publication removal algorithm and to simplify name table sanity checking
    when shutting down TIPC.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e100ae92a68c55e7ba287866c20fe1b0ad4fcdee
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:51:08 2006 -0700

    [TIPC]: Disallow config operations that aren't supported in certain modes.
    
    This change provides user-friendly feedback when TIPC is unable to perform
    certain configuration operations that don't work properly in certain modes.
    (In particular, any reconfiguration request that would temporarily take TIPC
    from network mode to standalone mode, or from standalone mode to not running
    mode, is disallowed.)
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c33d53b23589d9133af85effefbaa619853eb7f0
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:50:30 2006 -0700

    [TIPC]: Fixed memory leak in tipc_link_send() when destination is unreachable
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a75bf874278d8318ffe11043f3acb9b281fa911a
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:50:01 2006 -0700

    [TIPC]: Added missing warning for out-of-memory condition
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a7513528cd0deeb62624c229c21054472ec976e6
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:49:33 2006 -0700

    [TIPC]: Withdrawing all names from nameless port now returns success, not error
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 51f9cc1ff8aa0866ff8fb3c06be4c64b5edbb2e8
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:49:06 2006 -0700

    [TIPC]: Optimized argument validation done by connect().
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a3b0a5a9d004002a9cf9cf7a9d10cf1447a73d2b
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:48:22 2006 -0700

    [TIPC]: Simplify code for returning partial success of stream send request.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b087b28a629cc9388e42fdccdcd929deaa7ac81
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:47:44 2006 -0700

    [TIPC]: recvmsg() now returns TIPC ancillary data using correct level (SOL_TIPC)
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 499786516fc12791223f075d682a45ea1129eb04
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:47:18 2006 -0700

    [TIPC]: Improved performance of error checking during socket creation.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1303e8f173a8a5000ee6e2fba876fec9474ed1f6
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:46:50 2006 -0700

    [TIPC]: Stream socket send indicates partial success if data partially sent.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bdd94789d2348e20d13c1d5e477c8cf830dd204b
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:45:53 2006 -0700

    [TIPC]: Connected send now checks socket state when retrying congested send.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3546c7508d7e97fd855f8ac37afdd09622fa5ce1
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:45:24 2006 -0700

    [TIPC]: Can now return destination name of form {0,x,y} via ancillary data.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3388007bc4d662e50c2c01a7fb1fa2c31cea98ad
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:44:57 2006 -0700

    [TIPC]: Implied connect now saves dest name for retrieval as ancillary data.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b384de853c9f05e5e6da6c95edb475b96dd2cc1
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:44:27 2006 -0700

    [TIPC]: Fixed connect() to detect a dest address that is missing or too short.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e9024f0f79c3f847a793d6a16bf4fefc6d7a4649
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:43:57 2006 -0700

    [TIPC]: Non-operation-affecting corrections to comments & function definitions.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 687a25f1cdfc6ee1f2f60f299dbd294908eb0d59
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:43:21 2006 -0700

    [TIPC]: Validate entire interface name when locating bearer to enable.
    
    This fix prevents a bearer from being enabled using the wrong interface.
    For example, specifying "eth:eth14" might enable "eth:eth1" by mistake.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>

commit a592ea6362a967a49eb4b5d1cd36b78d8f180622
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:42:47 2006 -0700

    [TIPC]: Added support for MODULE_VERSION capability.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8b1f0a92e98a67e1e69aa37d538f8956d1640cba
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:42:19 2006 -0700

    [TIPC]: Fix misleading comment in buf_discard() routine.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70cb23477019b8739d23ead223539c7e6dfc509c
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:41:47 2006 -0700

    [TIPC]: Fixed privilege checking typo in dest_name_check().
    
    This patch originated by Stephane Ouellette <ouellettes@videotron.ca>.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3ac90216abc7d39e694533aec2805efeb06bf8ac
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Sun Jun 25 23:41:15 2006 -0700

    [TIPC] Fix for NULL pointer dereference
    
    This fixes a bug spotted by the coverity checker, bug id #366. If
    (mod(seqno - prev) != 1) we set buf to NULL, dereference it in the for
    case, and set it to whatever value happes to be at adress 0+next, if it
    happens to be non-zero, we even stay in the loop. It seems that the author
    intended to break there.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a4e0927902508a5f7f04be56d3c3e1b174481705
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:40:35 2006 -0700

    [TIPC]: Allow compilation when CONFIG_TIPC_DEBUG is not set.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d356eeba8e34786621d85468e5176052813a3059
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:40:01 2006 -0700

    [TIPC]: Multicast link failure now resets all links to "nacking" node.
    
    This fix prevents node from crashing.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 260082471ed3f6d751e9767e5a278d4e495d83f7
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:39:31 2006 -0700

    [TIPC]: Links now validate destination node specified by incoming messages.
    
    This fix prevents link flopping and name table inconsistency problems arising
    when a node is assigned a different <Z.C.N> value than it used previously.
    (Changing the <Z.C.N> value causes other nodes to have two link endpoints
    sending to the same MAC address using two different destination <Z.C.N> values,
    requiring the receiving node to filter out the unwanted messages.)
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9688243b635ecede23fe4492ba23f36439398095
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:38:58 2006 -0700

    [TIPC]: Allow ports to receive multicast messages through native API.
    
    This fix prevents a kernel panic if an application mistakenly sends a
    multicast message to  TIPC's topology service or configuration service.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 49384507896ee26e67266cebef6b6a9f2e31081c
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:38:29 2006 -0700

    [TIPC]: Corrected potential misuse of tipc_media_addr structure.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2535ec50b7a51833ff65dc97ca85e1155d4090f8
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:38:00 2006 -0700

    [TIPC]: Use correct upper bound when validating network zone number.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ab230f82f404e534387dda6067072291441a34d
Author: Allan Stephens <allan.stephens@windriver.com>
Date:   Sun Jun 25 23:37:24 2006 -0700

    [TIPC]: Prevent name table corruption if no room for new publication
    
    Now exits cleanly if attempt to allocate larger array of subsequences fails,
    without losing track of pointer to existing array.
    
    Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e3c8854c1898828ffb0141d4ac4e6190aa9eb4e
Author: Jon Maloy <jon.maloy@ericsson.com>
Date:   Sun Jun 25 23:36:43 2006 -0700

    [TIPC] Improved tolerance to promiscuous mode interface
    
    Signed-off-by: Jon Maloy <jon.maloy@ericsson.com>
    Signed-off-by: Per Liden <per.liden@ericsson.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 749805dc10e955b0170573061f9522a6a21cbae0
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 23:24:24 2006 -0700

    [SPARC]: Add iomap interfaces.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8e48aec714f1faf581949f23ae0e3d6e2317433b
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 25 23:19:30 2006 -0700

    [OPENPROM]: Rewrite driver to use in-kernel device tree.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d824a46b7210ea3b0a13ab0d0fbd7f6e2e91ddf
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 25 23:19:14 2006 -0700

    [OPENPROMFS]: Rewrite using in-kernel device tree and seq_file.
    
    We lose property writing functionality for the time being, but
    that will be easy to add back.  The code and framework is so
    much simpler now.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 87b385da1f5a5f4a12a28e00fe597bcde8d6fea3
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 25 23:18:57 2006 -0700

    [SPARC]: Add unique device_node IDs and a ".node" property.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fb7cd9d9acfb52dc1b9fbd5079445e4732667bbc
Author: David S. Miller <davem@davemloft.net>
Date:   Sun Jun 25 23:18:36 2006 -0700

    [SPARC]: Add of_set_property() interface.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit dda9beb41414035de230e78cb53416f3e551295a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 02:08:47 2006 -0700

    [SPARC64]: Export auxio_register to modules.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 36321426e320c2c6bc2f8a1587d6f4d695fca84c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 02:07:52 2006 -0700

    [SPARC64]: Add missing interfaces to dma-mapping.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 987c74fcb7a4479a04c44745098089785c16f5fe
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 01:34:43 2006 -0700

    [SPARC64]: Export _PAGE_IE to modules.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 350559961593a9680244b22b32733a49e21f25d6
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 01:32:25 2006 -0700

    [SPARC64]: Allow floppy driver to build modular.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 698539187aee83ea6843e29875dde70b473f8bc1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 01:21:38 2006 -0700

    [SPARC]: Export x_bus_type to modules.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 95b0ce9d6d95819e65a7456261a0a5573b65ef1c
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 00:17:11 2006 -0700

    [RIOWATCHDOG]: Fix the build.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1715f5ef0db94d12d9131d5afa9134e26f77529f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 00:11:21 2006 -0700

    [CPWATCHDOG]: Fix the build.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 09ec431476aa6efca436faf1e1aaadb4fa283972
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sun Jun 25 00:04:43 2006 -0700

    [PARPORT] sunbpp: Fix typo.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29f7ac7ecc853037cd7273f1fa35b1d996f8234a
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Sat Jun 24 23:27:00 2006 -0700

    [MTD] sun_uflash: Port to new EBUS device layer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e2e8115b54aa6f159ac3dfec8d3d23b0af5fbfa0
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Mon Jun 26 01:59:52 2006 -0400

    Input: iforce - remove some pointless casts
    
    The 'private' member of struct input_dev is a void*, so no need to
    cast it when assigning it to a struct iforce* variable.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b0c9ad8e0ff154f8c4730b8c4383f49b846c97c4
Author: Pozsar Balazs <pozsy@uhulinux.hu>
Date:   Mon Jun 26 01:56:08 2006 -0400

    Input: psmouse - add support for Intellimouse 4.0
    
    Add support for the H-Wheel present on Microsoft Intellimouse 4.0
    (AKA "tilt mouse")
    
    Signed-off-by: Pozsar Balazs <pozsy@uhulinux.hu>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0ae051a19092d36112b5ba60ff8b5df7a5d5d23b
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:52:34 2006 -0400

    Input: atkbd - fix HANGEUL/HANJA keys
    
    Make atkbd report HANGEUL/HANJA keys by default and use correct scan
    codes for these keys (they were swapped). Also make sure their scancodes
    reported as EV_MSC/MSC_SCAN events.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b9ab58dd8e771d30df110c56e785db1ae5e073df
Author: Jerome Pinot <ngc891@gmail.com>
Date:   Mon Jun 26 01:51:23 2006 -0400

    Input: fix misspelling of Hangeul key
    
    Fix a mispelling of the korean alphabet name in the input subsystem.
    See http://en.wikipedia.org/wiki/Hangeul#Names for more details.
    
    KEY_HANGUEL left to not break people
    
    Signed-off-by: Jerome Pinot <ngc891@gmail.com>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 9e8e30a0cc0ccb43773d14d8b8b84bcc585e9cc1
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Jun 26 01:49:55 2006 -0400

    Input: via-pmu - add input device support
    
    Add an input device for the button and lid switch so that userspace gets
    notified about the user pressing them via the standard input layer.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit ca56fe07f46e1c174b544e714be183f1476fecea
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:49:21 2006 -0400

    Input: rearrange exports
    
    New style is to mark symbol as exported right after its definition.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 1e0afb288e56d469ca1c583342bb9782d49333c6
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:48:47 2006 -0400

    Input: fix formatting to better follow CodingStyle
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit f60d2b111cd55c335c2b70e50d66a612d2b10856
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:48:36 2006 -0400

    Input: reset name, phys and uniq when unregistering
    
    Name, phys and uniq are quite often constant strings in moules implementing
    particular input device. If a module unregisters input device and then gets
    unloaded, the device could still be present in memory (pinned via sysfs),
    but aforementioned members would point to some random memory. Set them all
    to NULL when unregistering so sysfs handlers won't try dereferencing them.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 8a3cf456adbde8317a15fc038cfe82c630512f2e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 26 01:48:21 2006 -0400

    Input: return correct size when reading modalias attribute
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 62f7caf9273e3596aab1ec399b5c1e02cfb390da
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:47:56 2006 -0400

    Input: change my e-mail address in MAINTAINERS file
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit ea08c6faa0a8dc93b016663de55e49822ed0b33f
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:46:17 2006 -0400

    Input: fix potential overflows in driver/input/keyboard
    
    Change all sprintfs into snprintfs to make sure we won't stomp on
    data adjacent to our buffers.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit a21466cc77b25dc2afd1292c79c7fc8fd454a1a7
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:46:04 2006 -0400

    Input: fix potential overflows in driver/input/touchscreen
    
    Change all sprintfs into snprintfs to make sure we won't stomp on
    data adjacent to our buffers.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 10ca4c0a622a942e55dc8a6d57ebd441089c9e38
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:45:48 2006 -0400

    Input: fix potential overflows in driver/input/joystick
    
    Change all sprintfs into snprintfs to make sure we won't stomp on
    data adjacent to our buffers.
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 08ffce4560e0133e10634b0dd85eecee11257a1c
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:45:10 2006 -0400

    Input: fix potential overflows in driver/input/mouse
    
    Change all sprintfs into snprintfs to make sure we won't stomp on
    data adjacent to our buffers.
    
    Noticed by Wouter Paesen <wouter@kangaroot.net>
    
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 4854c7b27f0975a2b629f35ea3996d2968eb7c4f
Merge: 3cbd5b3... fcc18e8...
Author: Dmitry Torokhov <dtor_core@ameritech.net>
Date:   Mon Jun 26 01:31:38 2006 -0400

    Merge rsync://rsync.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit 46f18e3a28295a9e11a6ffa4478241c19bc93735
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Mon Jun 26 00:34:43 2006 -0400

    ACPI: HW P-state coordination support
    
    Treat HW coordination as independent CPUs.
    This enables per-cpu monintoring of P-states
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5737
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cd49b492fe3fef0b6348f18001f0d73f2577eb01
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Jun 26 04:22:36 2006 +0000

    [CIFS] remove some redundant null pointer checks
    
    some of them pointed out by Dave Jones
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit fcc18e83e1f6fd9fa6b333735bf0fcd530655511
Author: Malcolm Parsons <malcolm.parsons@gmail.com>
Date:   Mon Jun 26 11:49:41 2006 +1000

    [PATCH] uclinux: use PER_LINUX_32BIT in binfmt_flat
    
    binfmt_flat.c calls set_personality with PER_LINUX as the personality.
    On the arm architecture this results in the program running in 26bit
    usermode.  PER_LINUX_32BIT should be used instead.  This doesn't affect
    other architectures that use binfmt_flat.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 091487772c3312f3de599d99ca1d73395b54ed61
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 11:47:35 2006 +1000

    [PATCH] m68knommu: make enable_irq() macro statement
    
    Change enable_irq() macro to be a statement, not expression.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afd1b836a0dfadeba43ec2167646ac7d428fb800
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 11:43:35 2006 +1000

    [PATCH] m68knommu: fix ColdFire 5249 PLL set
    
    Fix PLL setting for the Coldfire 5249 CPU. This brings it into line with
    the new style frequency configuration of m68knommu parts.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b1a9bd2777878c5ff0091e8742364c78341be71
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 11:40:44 2006 +1000

    [PATCH] m68knommu: ColdFire cache flush fixups
    
    Fix flush code for the ColdFire 5206/5206e/5272 cases.
    Add support for the new ColdFire 532x CPU family
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 623f523cc05c35a385c04fde2114925f5954192b
Author: Philippe De Muyter <phdm@macqel.be>
Date:   Mon Jun 26 11:37:57 2006 +1000

    [PATCH] m68knommu: improve syscall entry and fix strace
    
    Here is a patch to the system call handling for 5307/5272/etc to:
    
    - fix the strace support (one tested the wrong bit)
    - make all system calls a little bit faster by inlining set_esp0 and
      supporting ENOSYS out of the critical path.
    - remove extraneous spaces
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bf9a37d8df1e7db82784117d28bb98da5f53f2f
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 11:01:32 2006 +1000

    [PATCH] m68knommu: force stack alignment on ColdFire
    
    This patch solve a bug triggered by execvp (this function use calloc to
    store the argument list and gcc 3.4.x align the stack to word, not to dword).
    This situation aren't related to signal handling and all 2.6.x have the bug.
    On ColdFire targets we must force the stack to be aligned.
    
    Original patch from Andrea Tarani <andrea.tarani@gilbarco.com>,
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 31f4fde38c5027ca05941db4a05c163d6314278e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:58:09 2006 +1000

    [PATCH] m68knommu: configurable frequency selection header
    
    Remove list of fixed clock frequency options used for configuring master
    clock, and make field an int. Much more flexible this way, no need to add
    more options for every new used freqency.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e648cd2688547516f86709b1d00ad4f8b618d635
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:55:36 2006 +1000

    [PATCH] m68knommu: configurable frequency selection
    
    Remove list of fixed clock frequency options used for configuring master
    clock, and make field an int. Much more flexible this way, no need to add
    more options for every new used freqency.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04860bd22f2892cb01b1d3232c656fa1e843090e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:47:13 2006 +1000

    [PATCH] m68knommu: configure support for Avnet5282 board
    
    Add support for the AVNET 5282 board.
    Patch submitted by Daniel Alomar <dalomar@serrasold.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d36f8eb387eb38cd8224de721f6edb8697450af
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:45:45 2006 +1000

    [PATCH] m68knommu: ColdFire 532x CPU configure support
    
    Add configure support for the new Freescale 532x family of CPUs.
    Patch submitted by Matt Waddel <Matt.Waddel@freescale.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3448097fccdce4ea8f0fcad4f37f502a8cd72e68
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jun 25 18:41:00 2006 -0700

    Revert "swsusp special saveable pages support" commits
    
    This reverts commits
    
      3e3318dee0878d42ed62a19c292a2ac284135db3 [PATCH] swsusp: x86_64 mark special saveable/unsaveable pages
      b6370d96e09944c6e3ae8d5743ca8a8ab1f79f6c [PATCH] swsusp: i386 mark special saveable/unsaveable pages
      ce4ab0012b32c1a4a1d6e934aeb73bf3151c48d9 [PATCH] swsusp: add architecture special saveable pages support
    
    because not only do they apparently cause page faults on x86, the
    infrastructure doesn't compile on powerpc.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5503967307f3fa443f5770a4df5ea4fbe9fb3917
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: ColdFire 532x CPU platform build support
    
    Add build support for the new Freescale 532x CPU platforms.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f3dd71209472b93340c1a940cc832c2712307b3e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: add ColdFire 532x UART address support
    
    Add support for the UART addressing on the new Freescale M532x CPU family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f7399c3d96d852ae2105f51de766a50b9b021b18
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: add ColdFire 532x timer build support
    
    Add build support for new Freescale M532x CPU family timer.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7877d01e8ea205e047fa308e20e5e05c58952b1a
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: cleanup setup.c
    
    A cleanup of m68knommu/kernel/setup.c :
    
    - No need to initialize global pointers to NULL, they will have that value
      automatically, and they eat up space in my data segment image in FLASH.
    - Remove get_cpuinfo.  It has been replaced by show_cpuinfo.
    
    Signed-off-by: Philippe De Muyter <phdm@macqel.be>
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb28632c0d651f26dddf99afb7d7703e8e0ce293
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: check DEBUG defined arch code
    
    Don't rely on DEBUG having a value, check for it being defined.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f57622a32e6bdc0a585c8be6f25bb8e75a3ff9e
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: include ColdFire 532x register definitions
    
    Include the ColdFire 532x support when including ColdFire peripharp
    support definitions.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit df8fbe1e7f250b157c5815a005a9650548315d1f
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: add ColdFire 532x cache init
    
    Add cache init support for the new ColdFire 532x CPU family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76aa698f331475147825ae135eae98bfd457825b
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: 532x UART support
    
    ColdFire serial driver support for the new 532x CPU family UARTs.
    
    Patch submitted by Matt Waddel <Matt.Waddel@freescale.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c99df64f0be6763bf5079560ccd96911c231b7b
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: ColdFire 532x register definitions
    
    Register definitions for the new Freescale 532x Coldfire CPU family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3196cf83ad410d9549e78f69aa45db75540334b7
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: ColdFire 532x CPU startup code
    
    Add kernel startup code for the new Freescale 532x CPU family.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b671b653da35cd38897c7b19e9baed64e7a9e1a1
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: read/write register access for PIT timer
    
    Modify the m68knommu/ColdFire PIT timer code to use register offsets
    with raw_read/raw_write access, instead of a mapped struct.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2082b477dc7e9d5b3f773a36aae2dbc55b4263c2
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: remove use of rom_length
    
    Remove use of rom_length. It serves not real purpose, and when we move
    to new stye RAM configuration it will not be needed.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 36a248fadf96cd78c6b344442046db5b85cf9a70
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: switch arch config name to CONFIG_M68K
    
    Switch to naming the architecture config options for the m68knommu branch
    as "M68K", dropping "M68KNOMMU".  The CONFIG_MMU separates the 2 now, and
    the m68knommu branch is still strictly speaking an M68K (including the
    ColdFire parts).
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0b7ac8e479f311f8ef15fbea3f849dded9f3ccd9
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: read/write register access for ColdFire core timer
    
    Modify the m68knommu/ColdFire core timer code to use register offsets
    with raw_read/raw_write access, instead of a mapped struct.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c88b36e2c828c78c51e90002351f9d9068b75dec
Author: Greg Ungerer <gerg@snapgear.com>
Date:   Mon Jun 26 10:33:10 2006 +1000

    [PATCH] m68knommu: 532x FEC eth struct map
    
    Specify the struct mapping used on the new Freescale 532x CPU family's
    FEC ethernet core.
    
    Patch submitted by Matt Waddel <Matt.Waddel@freescale.com>.
    
    Signed-off-by: Greg Ungerer <gerg@uclinux.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 73b6af8a21184f2178a7219eb4d64ea5a71aedf9
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Sun Jun 25 16:42:33 2006 -0700

    [PATCH] spufs: update ->flush method proto
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e788f8d1ad71fea99a763114eae73c3ad55bc30
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jun 25 16:42:33 2006 -0700

    [PATCH] xfs: update ->flush method proto
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 61b9175808670d9abf52156803ae0ed1e3706ac4
Merge: f36f44d... 3f1244a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jun 25 16:07:58 2006 -0700

    Merge branch 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of master.kernel.org:/pub/scm/linux/kernel/git/roland/infiniband:
      IB/iser: iSER Kconfig and Makefile
      IB/iser: iSER handling of memory for RDMA
      IB/iser: iSER RDMA CM (CMA) and IB verbs interaction
      IB/iser: iSER initiator iSCSI PDU and TX/RX
      IB/iser: iSCSI iSER transport provider high level code
      IB/iser: iSCSI iSER transport provider header file
      IB/uverbs: Remove unnecessary list_del()s
      IB/uverbs: Don't free wr list when it's known to be empty

commit 689391210a4a8a1bf35119f87c51b3e01ef549e6
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Sun Jun 25 22:12:12 2006 +0100

    [ARM] 3612/1: make pci bus optional for ixp4xx platform
    
    Patch from Milan Svoboda
    
    IXP4XX platform can happily live without pci bus. This patch modifies
    Kconfig to support this option and modifies Makefile so pci only files
    are compiled only when pci is really selected.
    
    Patch is tested and ixdp465 runs fine with or without the pci bus.--
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f36f44de721db44b4c2944133c3c5c2e06f633f0
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jun 25 12:30:33 2006 -0700

    Fix NFS2 compile error
    
    Trond had apparently merged the same patch twice, causing a duplicate
    include of the "internal.h" file, with resulting obvious confusion.
    
    Tssk.  I'm the only one allowed to send out trees that don't even
    compile! Who does this Trond guy think he is?
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5d157e0675ac11188a8d429a062b1938bb2d353
Author: Bjorn Steinbrink <B.Steinbrink@gmx.de>
Date:   Sun Jun 25 16:24:40 2006 +0200

    [PATCH] i386: Fix softirq accounting with 4K stacks
    
    Copy the softirq bits in preempt_count from the current context into the
    hardirq context when using 4K stacks to make the softirq_count macro work
    correctly and thereby fix softirq cpu time accounting.
    
    Signed-off-by: Bjorn Steinbrink <B.Steinbrink@gmx.de>
    Acked-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d77062b1402aef5b26e1d3776991126e8026bde
Merge: 25581ad... 76a9f26...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jun 25 10:54:14 2006 -0700

    Merge git://git.linux-nfs.org/pub/linux/nfs-2.6
    
    * git://git.linux-nfs.org/pub/linux/nfs-2.6: (51 commits)
      nfs: remove nfs_put_link()
      nfs-build-fix-99
      git-nfs-build-fixes
      Merge branch 'odirect'
      NFS: alloc nfs_read/write_data as direct I/O is scheduled
      NFS: Eliminate nfs_get_user_pages()
      NFS: refactor nfs_direct_free_user_pages
      NFS: remove user_addr, user_count, and pos from nfs_direct_req
      NFS: "open code" the NFS direct write rescheduler
      NFS: Separate functions for counting outstanding NFS direct I/Os
      NLM: Fix reclaim races
      NLM: sem to mutex conversion
      locks.c: add the fl_owner to nlm_compare_locks
      NFS: Display the chosen RPCSEC_GSS security flavour in /proc/mounts
      NFS: Split fs/nfs/inode.c
      NFS: Fix typo in nfs_do_clone_mount()
      NFS: Fix compile errors introduced by referrals patches
      NFSv4: Ensure that referral mounts bind to a reserved port
      NFSv4: A root pathname is sent as a zero component4
      NFSv4: Follow a referral
      ...

commit 25581ad107be24b89d805da51a03d616f8f3d1be
Merge: 72cf270... 7477dda...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jun 25 10:09:31 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb
    
    * master.kernel.org:/pub/scm/linux/kernel/git/mchehab/v4l-dvb: (244 commits)
      V4L/DVB (4210b): git-dvb: tea575x-tuner build fix
      V4L/DVB (4210a): git-dvb versus matroxfb
      V4L/DVB (4209): Added some BTTV PCI IDs for newer boards
      Fixes some sync issues between V4L/DVB development and GIT
      V4L/DVB (4206): Cx88-blackbird: always set encoder height based on tvnorm->id
      V4L/DVB (4205): Merge tda9887 module into tuner.
      V4L/DVB (4203): Explicitly set the enum values.
      V4L/DVB (4202): allow selecting CX2341x port mode
      V4L/DVB (4200): Disable bitrate_mode when encoding mpeg-1.
      V4L/DVB (4199): Add cx2341x-specific control array to cx2341x.c
      V4L/DVB (4198): Avoid newer usages of obsoleted experimental MPEGCOMP API
      V4L/DVB (4197): Port new MPEG API to saa7134-empress with saa6752hs
      V4L/DVB (4196): Port cx88-blackbird to the new MPEG API.
      V4L/DVB (4193): Update cx2341x fw encoding API doc.
      V4L/DVB (4192): Use control helpers for saa7115, cx25840, msp3400.
      V4L/DVB (4191): Add CX2341X MPEG encoder module.
      V4L/DVB (4190): Add helper functions for control processing to v4l2-common.
      V4L/DVB (4189): Add videodev support for VIDIOC_S/G/TRY_EXT_CTRLS.
      V4L/DVB (4188): Add new MPEG control/ioctl definitions to videodev2.h
      V4L/DVB (4186): Add support for the DNTV Live! mini DVB-T card.
      ...

commit 72cf2709bf8e0410800f118c4298bfbf8715b303
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sun Jun 25 10:04:15 2006 -0700

    Fix PM_TRACE dependency: works only on 32-bit x86 for now
    
    Not that x86-64 and other architecture support should be difficult to
    add (trivial fixups to the data format and add the proper linker script
    entry).
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1eec00565d849ceda67f425e089c3233e3ef2ca2
Author: Sonny Rao <sonny@burdell.org>
Date:   Sun Jun 25 05:49:34 2006 -0700

    [PATCH] fix race in idr code
    
    I ran into a bug where the kernel died in the idr code:
    
    cpu 0x1d: Vector: 300 (Data Access) at [c000000b7096f710]
        pc: c0000000001f8984: .idr_get_new_above_int+0x140/0x330
        lr: c0000000001f89b4: .idr_get_new_above_int+0x170/0x330
        sp: c000000b7096f990
       msr: 800000000000b032
       dar: 0
     dsisr: 40010000
      current = 0xc000000b70d43830
      paca    = 0xc000000000556900
        pid   = 2022, comm = hwup
    1d:mon> t
    [c000000b7096f990] c0000000000d2ad8 .expand_files+0x2e8/0x364 (unreliable)
    [c000000b7096faa0] c0000000001f8bf8 .idr_get_new_above+0x18/0x68
    [c000000b7096fb20] c00000000002a054 .init_new_context+0x5c/0xf0
    [c000000b7096fbc0] c000000000049dc8 .copy_process+0x91c/0x1404
    [c000000b7096fcd0] c00000000004a988 .do_fork+0xd8/0x224
    [c000000b7096fdc0] c00000000000ebdc .sys_clone+0x5c/0x74
    [c000000b7096fe30] c000000000008950 .ppc_clone+0x8/0xc

commit a45219483e2894af3c07f959cbd4edb4575b4f8c
Author: Jan Engelhardt <jengelh@linux01.gwdg.de>
Date:   Sun Jun 25 05:49:33 2006 -0700

    [PATCH] update-devices.txt
    
    Update Documentation/devices.txt with a new version from the LANANA site
    http://www.lanana.org/docs/device-list/devices-2.6+.txt
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f58a1ebb22f128fccfeafb2b18557c87741cd627
Author: Hua Zhong <hzhong@gmail.com>
Date:   Sun Jun 25 05:49:32 2006 -0700

    [PATCH] remove unlikely(sb) in prune_dcache
    
    likely profiling shows that the following is a miss.
    
    After boot:
    [+- ] Type | # True | # False | Function:Filename@Line
    +unlikely |     1074|        0  prune_dcache()@:fs/dcache.c@409
    
    After a bonnie++ run:
    +unlikely |    66716|    19584  prune_dcache()@:fs/dcache.c@409
    
    So remove it.
    
    Signed-off-by: Hua Zhong <hzhong@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d84a84775bba661d5a3fd06757bbb419381937f3
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jun 25 05:49:32 2006 -0700

    [PATCH] Fix "biovec-(256)" in /proc/slabinfo
    
    Stringify does what it was told to do.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 00212fef814612245ed0261cbac8426d0c9a31a5
Author: Amul Shah <amul.shah@unisys.com>
Date:   Sun Jun 25 05:49:31 2006 -0700

    [PATCH] Fix kdump Crash Kernel boot memory reservation for NUMA machines
    
    This patch will fix a boot memory reservation bug that trashes memory on
    the ES7000 when loading the kdump crash kernel.
    
    The code in arch/x86_64/kernel/setup.c to reserve boot memory for the crash
    kernel uses the non-numa aware "reserve_bootmem" function instead of the
    NUMA aware "reserve_bootmem_generic".  I checked to make sure that no other
    function was using "reserve_bootmem" and found none, except the ones that
    had NUMA ifdef'ed out.
    
    I have tested this patch only on an ES7000 with NUMA on and off (numa=off)
    in a single (non-NUMA) and multi-cell (NUMA) configurations.
    
    Signed-off-by: Amul Shah <amul.shah@unisys.com>
    Looks-good-to: Vivek Goyal <vgoyal@in.ibm.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc13ad6217018833e590a0e2ef5937aa16162d34
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun Jun 25 05:49:30 2006 -0700

    [PATCH] s390: setup.c cleanup + build fix
    
    Cleanup & fix 31 bit compilation:
    
      CC      arch/s390/kernel/setup.o
    arch/s390/kernel/setup.c:83: error: initializer element is not computable at
                                        load time
    arch/s390/kernel/setup.c:83: error: (near initialization for
                                        'code_resource.start')
    Not sure which patch in the -mm tree breaks this, but since this can be
    considered a cleanup it can be merged anyway.
    
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bb12b76e2d795431fa9fd306eb274c69e5054dc7
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Sun Jun 25 05:49:29 2006 -0700

    [PATCH] au1xxx: oss sound support for au1200
    
    au1550 ac97 driver works fine on au1200 too.
    
    Comments at the top of file state this code is GPL, so lets
    mark it as GPL too.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d469722779c9fe0b415163e8fe837440f9c70dc
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:29 2006 -0700

    [PATCH] parport: add to kernel-doc
    
    Add parport interfaces to kernel-doc template.  Small doc.  cleanups in 2
    parport source files.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e37ed37b1a70a65185736fbec543ca4ad64a673
Author: Domen Puncer <domen.puncer@ultra.si>
Date:   Sun Jun 25 05:49:27 2006 -0700

    [PATCH] au1550_ac97: spin_unlock in error path
    
    Error paths didn't spin_unlock.
    
    Signed-off-by: Domen Puncer <domen.puncer@ultra.si>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7d93a1a53a72aa704a8fef6e0fb4f6c6cd6aa07a
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:49:27 2006 -0700

    [PATCH] ext2: cleanup: put_page and comment fix
    
    Things which force me think a little: why so?
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77787bfb44da6e6166af088226707aeccee27968
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sun Jun 25 05:49:26 2006 -0700

    [PATCH] pacct: none-delayed process accounting accumulation
    
    In current 2.6.17 implementation, signal_struct refered from task_struct is
    used for per-process data structure.  The pacct facility also uses it as a
    per-process data structure to store stime, utime, minflt, majflt.  But those
    members are saved in __exit_signal().  It's too late.
    
    For example, if some threads exits at same time, pacct facility has a
    possibility to drop accountings for a part of those threads.  (see, the
    following 'The results of original 2.6.17 kernel') I think accounting
    information should be completely collected into the per-process data structure
    before writing out an accounting record.
    
    This patch fixes this matter.  Accumulation of stime, utime, minflt and majflt
    are done before generating accounting record.
    
    [mingo@elte.hu: fix acct_collect() siglock bug found by lockdep]
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6ec29a42d7ac3b309a9cef179b686d23986ab98
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sun Jun 25 05:49:25 2006 -0700

    [PATCH] pacct: avoidance to refer the last thread as a representation of the process
    
    When pacct facility generate an 'ac_flag' field in accounting record, it
    refers a task_struct of the thread which died last in the process.  But any
    other task_structs are ignored.
    
    Therefore, pacct facility drops ASU flag even if root-privilege operations are
    used by any other threads except the last one.  In addition, AFORK flag is
    always set when the thread of group-leader didn't die last, although this
    process has called execve() after fork().
    
    We have a same matter in ac_exitcode.  The recorded ac_exitcode is an exit
    code of the last thread in the process.  There is a possibility this exitcode
    is not the group leader's one.

commit 0e4648141af02331f21aabcd34940c70f09a2d04
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sun Jun 25 05:49:24 2006 -0700

    [PATCH] pacct: add pacct_struct to fix some pacct bugs.
    
    The pacct facility need an i/o operation when an accounting record is
    generated.  There is a possibility to wake OOM killer up.  If OOM killer is
    activated, it kills some processes to make them release process memory
    regions.
    
    But acct_process() is called in the killed processes context before calling
    exit_mm(), so those processes cannot release own memory.  In the results, any
    processes stop in this point and it finally cause a system stall.

commit 6bc392741d661eb84be503d1fdf14b6746615e4c
Author: David Howells <dhowells@redhat.com>
Date:   Sun Jun 25 05:49:22 2006 -0700

    [PATCH] Corrections to memory barrier doc
    
    Apply some small corrections to the memory barrier document, as contributed by:
    
    	Christoph Lameter <clameter@sgi.com>
    	Kirill Smelkov <kirr@mns.spb.ru>
    	Randy Dunlap <rdunlap@xenotime.net>
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f84be84b4cde72fa2a2f0d10ac284a31e923200
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Sun Jun 25 05:49:22 2006 -0700

    [PATCH] synclink_gt: add GT2 adapter support
    
    Add support for SyncLink GT2 adapter to driver.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 294dad05311416718c2a172738e1ca4071449877
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Sun Jun 25 05:49:21 2006 -0700

    [PATCH] fix synclink_gt diagnostics error reporting
    
    Fix diagnostics error reporting that was being overwritten by incorrect use
    of return codes from individual diagnostic functions.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04b374d0f5a97761b91a0c3ff6d10f80abd206b0
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Sun Jun 25 05:49:21 2006 -0700

    [PATCH] add synclink_gt crc return feature
    
    Add ability to return HDLC CRC to user application.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 643f3319b9132c768081ce94f938a29139a16de9
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Sun Jun 25 05:49:20 2006 -0700

    [PATCH] add synclink_gt custom hdlc idle
    
    Add custom HDLC idle pattern feature.
    
    It allows the user to specify an arbitrary 8 or 16 bit repeating pattern on
    the transmit data pin between HDLC frames.
    
    In most cases the idle pattern is continuous ones or flags as supported by off
    the shelf synchronous controllers and defined in the ISO3309 standard.  Some
    applications (radio/satellite modems, connections to legacy military hardware)
    require non-standard patterns.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ed6a209024c23dbb39bfaa7361eb0b9c3fcc2b93
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:49:19 2006 -0700

    [PATCH] irda-usb printk fix
    
    drivers/net/irda/irda-usb.c: In function 'stir421x_patch_device':
    drivers/net/irda/irda-usb.c:1108: warning: format '%u' expects type 'unsigned int', but argument 4 has type 'size_t'
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e37bd301ee130598fa1406c1281caa159473bf8
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:19 2006 -0700

    [PATCH] kthread: move kernel-doc and put it into DocBook
    
    Move kthread API kernel-doc from kthread.h to kthread.c & fix it.
    Add kthread API to kernel-api DocBook.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0ef371e3f9fa3b2571058be366a6780827ec0bf
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:18 2006 -0700

    [PATCH] DMI: cleanup kernel-doc, add to DocBook
    
    Add DMI interface functions to a new Firmware Interfaces chapter in the
    kernel-api DocBook.  Clean up kernel-doc in drivers/firmware/dmi_scan.c.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e905914f96e11862b130dd229f73045dad9a34e8
Author: Jeremy Fitzhardinge <jeremy@xensource.com>
Date:   Sun Jun 25 05:49:17 2006 -0700

    [PATCH] Implement kasprintf
    
    Implement kasprintf, a kernel version of asprintf.  This allocates the
    memory required for the formatted string, including the trailing '\0'.
    Returns NULL on allocation failure.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f796937a062c7aeb44cd0e75e1586c8543634a7d
Author: Jeremy Fitzhardinge <jeremy@xensource.com>
Date:   Sun Jun 25 05:49:17 2006 -0700

    [PATCH] Fix bounds check in vsnprintf, to allow for a 0 size and NULL buffer
    
    This change allows callers to use a 0-byte buffer and a NULL buffer pointer
    with vsnprintf, so it can be used to determine how large the resulting
    formatted string will be.
    
    Previously the code effectively treated a size of 0 as a size of 4G (on
    32-bit systems), with other checks preventing it from actually trying to
    emit the string - but the terminal \0 would still be written, which would
    crash if the buffer is NULL.
    
    This change changes the boundary check so that 'end' points to the putative
    location of the terminal '\0', which is only written if size > 0.
    
    vsnprintf still allows the buffer size to be set very large, to allow
    unbounded buffer sizes (to implement sprintf, etc).
    
    [akpm@osdl.org: fix long-vs-longlong confusion]
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 891c668b90ded38cec36f0852c4983573597170d
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Jun 25 05:49:15 2006 -0700

    [PATCH] LED: add LED heartbeat trigger
    
    Add an LED trigger acts like a heart beat.  This can be used as a
    replacement of CONFIG_HEARTBEAT code exists in some arch's timer code.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Acked-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: "Nish Aravamudan" <nish.aravamudan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa9799e33d362aeca4555cd6318735bab1c04d16
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:15 2006 -0700

    [PATCH] ktime/hrtimer: fix kernel-doc comments
    
    Fix kernel-doc formatting in ktime.h and hrtimer.[ch] files.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9dc65576d67dc45e529062e41ca34066e02f03e5
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:14 2006 -0700

    [PATCH] reed-solomon: fix kernel-doc comments
    
    Fix kernel-doc formatting in Reed-Solomon code.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c51d3dac321df417d59a47574caa7ab61b30d447
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:14 2006 -0700

    [PATCH] kernel-doc: use Members for struct fields consistently
    
    kernel-doc struct fields should be consistently called "Members", not
    "Arguments", so switch man-mode output to use "Members" like all of the
    other formats do.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ecfb251a95dfca6ca0dba63414e9c91fcbb92335
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:49:13 2006 -0700

    [PATCH] kernel-doc: don't use XML escapes in text or man output mode
    
    For kernel-doc output modes of text and man, do not use XML escapes for
    less-than, greater-than, and ampersand characters.  I.e., leave the text
    and man output clean and readable.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cc44a817f65f9b4651643d334f6351b6d1f5e6c2
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Sun Jun 25 05:49:12 2006 -0700

    [PATCH] fix memory leak in rocketport rp_do_receive
    
    Fix memory leak caused by incorrect use of tty buffer facility.  tty
    buffers are allocated but never processed by call to tty_flip_buffer_push
    so they accumulate on the full buffer list.  Current code uses the buffers
    as a temporary storage for data before passing it directly to the line
    discipline.
    
    Signed-off-by: Paul Fulghum <paulkf@microgate.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 45c9b11a1d07770cabb48cb0f7960a77650ffc64
Author: Ulrich Drepper <drepper@redhat.com>
Date:   Sun Jun 25 05:49:11 2006 -0700

    [PATCH] Implement AT_SYMLINK_FOLLOW flag for linkat
    
    When the linkat() syscall was added the flag parameter was added in the
    last minute but it wasn't used so far.  The following patch should change
    that.  My tests show that this is all that's needed.
    
    If OLDNAME is a symlink setting the flag causes linkat to follow the
    symlink and create a hardlink with the target.  This is actually the
    behavior POSIX demands for link() as well but Linux wisely does not do
    this.  With this flag (which will most likely be in the next POSIX
    revision) the programmer can choose the behavior, defaulting to the safe
    variant.  As a side effect it is now possible to implement a
    POSIX-compliant link(2) function for those who are interested.
    
      touch file
      ln -s file symlink
    
      linkat(fd, "symlink", fd, "newlink", 0)
        -> newlink is hardlink of symlink
    
      linkat(fd, "symlink", fd, "newlink", AT_SYMLINK_FOLLOW)
        -> newlink is hardlink of file
    
    The value of AT_SYMLINK_FOLLOW is determined by the definition we already
    use in glibc.
    
    Signed-off-by: Ulrich Drepper <drepper@redhat.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 584e1236bbcdfec3f64c751908b8b4fe868c2d20
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Sun Jun 25 05:49:11 2006 -0700

    [PATCH] add "select GPIO_VR41XX" for TANBAC_TB0229
    
    TANBAC_TB0229 requires GPIO_VR41XX.  This patch adds "select GPIO_VR41XX"
    for TANBAC_TB0229.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fc75cdfa5b43ac4d3232b490800cd35063adafd3
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Sun Jun 25 05:49:10 2006 -0700

    [PATCH] cpu hotplug: fix CPU_UP_CANCEL handling
    
    If a cpu hotplug callback fails on CPU_UP_PREPARE, all callbacks will be
    called with CPU_UP_CANCELED.  A few of these callbacks assume that on
    CPU_UP_PREPARE a pointer to task has been stored in a percpu array.  This
    assumption is not true if CPU_UP_PREPARE fails and the following calls to
    kthread_bind() in CPU_UP_CANCELED will cause an addressing exception
    because of passing a NULL pointer.
    
    Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Ashok Raj <ashok.raj@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04a3446c90137a473837288b04b517b19dc67a0d
Author: Frode Isaksen <frode.isaksen@gmail.com>
Date:   Sun Jun 25 05:49:09 2006 -0700

    [PATCH] fs: sys_poll with timeout -1 bug fix
    
    If you do a poll() call with timeout -1, the wait will be a big number
    (depending on HZ) instead of infinite wait, since -1 is passed to the
    msecs_to_jiffies function.
    
    Signed-off-by: Frode Isaksen <frode.isaksen@gmail.com>
    Acked-by: Nishanth Aravamudan <nacc@us.ibm.com>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bdd1d1250d55afe403ac4affa6ccc5f9e60468f
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Sun Jun 25 05:49:08 2006 -0700

    [PATCH] kthread: convert stop_machine into a kthread
    
    - Update stop_machine.c to spawn stop_machine as kthreads rather than the
      deprecated kernel_threads.
    
    - Update stop_machine to use the more efficient kthread_bind() before
      running task in place of set_cpus_allowed() after.
    
    [akpm@osdl.org: remove now-wrong set_cpus_allowed()]
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b943cf09d75c0dfbfd22548988df48f6c24c727
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Sun Jun 25 05:49:08 2006 -0700

    [PATCH] fix %s in affs_fill_super()
    
    %s is only valid if array is known to contain NUL or precision is given and
    does not exceed the size of array.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f82ccdb992d694f46b28f0478f62468260f45607
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:07 2006 -0700

    [PATCH] CCISS: tidy up product table indentation
    
    Make each one fit on a line so it's easier to read.  I re-ordered
    COMPAQ_CISSC/0x4091, which was out of order.  I double-checked these, but it
    would be good if you'd also check them to make sure I didn't miss any.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c8328355609be6d229e1a5e016a0115e9328b83
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:06 2006 -0700

    [PATCH] CCISS: run through Lindent
    
    cciss is full of inconsistent style ("for (" vs.  "for(", lines that end with
    whitespace, lines beginning with a mix of spaces & tabs, etc).
    
    This patch changes only whitespace.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e2019b58fac87b93c04d9efc08324a28fd23d601
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:05 2006 -0700

    [PATCH] CCISS: remove parens around return values
    
    Typical Linux style is "return -EINVAL", not "return(-EINVAL)".
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d14c4ab58c77c9a03b716c28f230ef944b08dc34
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:04 2006 -0700

    [PATCH] CCISS: fix a few spelling errors
    
    Fix a few spelling errors.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e8621e8bdc2460da516d5f1a5c71d3467ded5d2
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:03 2006 -0700

    [PATCH] CCISS: use ARRAY_SIZE without intermediates
    
    It's easier to verify loop bounds if the array name is mentioned the for()
    statement that steps through the array.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 40aabb5815723551e7c92dd08ed3ea82ec000ccd
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:03 2006 -0700

    [PATCH] CCISS: announce cciss%d devices with PCI address/IRQ/DAC info
    
    We already print "cciss: using DAC cycles" or similar for every adapter found:
    why not just identify the device we're talking about and include other useful
    information?
    
    Jeff Garzik <jeff@garzik.org>:
    
      Although this patch is correct, I would consider using dev_printk() rather
      than referencing pci_name() in printk() arguments.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4e570309e80f7c7a532fe0074e74df26ff8ef5d2
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:02 2006 -0700

    [PATCH] CCISS: request all PCI resources
    
    We should call pci_request_regions() to claim all resources the device
    decodes.  Previously, we claimed only the I/O port range.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c33ac89bc7d697e23ce09ddae73e0ece5f65ad48
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Sun Jun 25 05:49:01 2006 -0700

    [PATCH] CCISS: disable device when returning failure
    
    If something fails after we call pci_enable_device(), we should call
    pci_disable_device() before returning the failure.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Acked-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7b69055820a221d7da29092fd553fd7cd6a97d1
Author: Rob Landley <rob@landley.net>
Date:   Sun Jun 25 05:49:00 2006 -0700

    [PATCH] Initramfs docs update
    
    New section on creating an external initramfs image using cpio (with
    script), a warning about bad advice in the cpio man page, a bit of
    debugging advice (hello world and rdinit=/bin/sh), and a few minor tweaks
    to other parts of it.
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa366ad5d7fe05abaae44a1cd216348669e42ef8
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Sun Jun 25 05:49:00 2006 -0700

    [PATCH] kthread: convert smbiod
    
    Update smbiod to use kthread instead of deprecated kernel_thread.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7b2eff059fcc2d1b7085ee3d84b79fd657a537b
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Sun Jun 25 05:48:59 2006 -0700

    [PATCH] kthread: update loop.c to use kthread
    
    Update loop.c to use a kthread instead of a deprecated kernel_thread for
    loop devices.
    
    [akpm@osdl.org: don't change the thread's name]
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2f72100c01dd31d769097c58874e8ab1e70b2518
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:59 2006 -0700

    [PATCH] kernel-doc for lib/crc*.c
    
    Make kernel-doc corrections & additions to lib/crc*.c.  Add crc functions to
    kernel-api.tmpl in DocBook.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 28e83baac20e3fe624af89a55eb06c2a7cab6828
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:58 2006 -0700

    [PATCH] kernel-doc for lib/cmdline.c
    
    Add a new chapter for kernel-lib functions to kernel-api.tmpl.  Add
    lib/cmdline.c to the new kernel-lib chapter.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e1907ffdc694023712b5e6516933a29e1be954f
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:57 2006 -0700

    [PATCH] kernel-doc for lib/bitmap.c
    
    Make corrections/fixes to kernel-doc in lib/bitmap.c and include it in DocBook
    template.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 099a71d99578a53bdf5f383c55e4095f1c59410c
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Sun Jun 25 05:48:57 2006 -0700

    [PATCH] Remove needless checks in fs/9p/vfs_inode.c
    
    coverity found two needless checks in vfs_inode.c (cid #1165 and #1164)
    In both cases inode is always NULL when we goto error; either because it
    is still initialized to NULL or is set to NULL explicitly. This patch
    simply removes these checks to save some code.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Acked-by: Eric Van Hensbergen <ericvh@gmail.com>
    Cc: Ron Minnich <rminnich@lanl.gov>
    Cc: Latchesar Ionkov <lucho@ionkov.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 18cddac3d17781d9cbc109522d70ab021c846e2b
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:56 2006 -0700

    [PATCH] ide-floppy: fix debug-only syntax error
    
    Fix debug-only printk syntax error.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 850622dfaf3d62907c96707773e0f8e84b3c0c06
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:55 2006 -0700

    [PATCH] kernel-doc: warn on malformed function docs.
    
    When the verbose (-v) option is used with scripts/kernel-doc, this option
    reports when the kernel-doc format is malformed and apparently contains
    function description lines before function parameters.  In these cases, the
    kernel-doc script will print something like: Warning(filemap.c:335):
    contents before sections
    
    I have fixed the problems in mm/filemap.c and added lots of kernel-doc to
    that file (posted to the linux-mm mailing list Mon.  2006-June-12).
    
    The real goal (as requested by Andrew Morton) is to allow the short
    function description to be more than one line long.  This patch is both a
    kernel-doc checker and a tool en route to that goal.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c8ef5614da22666e339b125263d315cfaa89109
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:55 2006 -0700

    [PATCH] fuse: scramble lock owner ID
    
    VFS uses current->files pointer as lock owner ID, and it wouldn't be
    prudent to expose this value to userspace.  So scramble it with XTEA using
    a per connection random key, known only to the kernel.  Only one direction
    needs to be implemented, since the ID is never sent in the reverse
    direction.
    
    The XTEA algorithm is implemented inline since it's simple enough to do so,
    and this adds less complexity than if the crypto API were used.
    
    Thanks to Jesper Juhl for the idea.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a4d27e75ffb7b8ecb7eed0c7db0df975525f3fd7
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:54 2006 -0700

    [PATCH] fuse: add request interruption
    
    Add synchronous request interruption.  This is needed for file locking
    operations which have to be interruptible.  However filesystem may implement
    interruptibility of other operations (e.g.  like NFS 'intr' mount option).
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9a2842e5612b93fa20a624a8baa6c2a7ecea504
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:53 2006 -0700

    [PATCH] fuse: rename the interrupted flag
    
    Rename the 'interrupted' flag to 'aborted', since it indicates exactly that,
    and next patch will introduce an 'interrupted' flag for a
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 33649c91a3df57c1090a657637d44b896de367e7
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:52 2006 -0700

    [PATCH] fuse: ensure FLUSH reaches userspace
    
    All POSIX locks owned by the current task are removed on close().  If the
    FLUSH request resulting initiated by close() fails to reach userspace, there
    might be locks remaining, which cannot be removed.
    
    The only reason it could fail, is if allocating the request fails.  In this
    case use the request reserved for RELEASE, or if that is currently used by
    another FLUSH, wait for it to become available.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7142125937e1482ad3ae4366594c6586153dfc86
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:52 2006 -0700

    [PATCH] fuse: add POSIX file locking support
    
    This patch adds POSIX file locking support to the fuse interface.
    
    This implementation doesn't keep any locking state in kernel.  Unlocking on
    close() is handled by the FLUSH message, which now contains the lock owner id.
    
    Mandatory locking is not supported.  The filesystem may enfoce mandatory
    locking in userspace if needed.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bafa96541b250a7051e3fbc5de6e8369daf8ffec
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:51 2006 -0700

    [PATCH] fuse: add control filesystem
    
    Add a control filesystem to fuse, replacing the attributes currently exported
    through sysfs.  An empty directory '/sys/fs/fuse/connections' is still created
    in sysfs, and mounting the control filesystem here provides backward
    compatibility.
    
    Advantages of the control filesystem over the previous solution:
    
      - allows the object directory and the attributes to be owned by the
        filesystem owner, hence letting unpriviled users abort the
        filesystem connection
    
      - does not suffer from module unload race
    
    [akpm@osdl.org: fix this fs for recent dhowells depredations]
    [akpm@osdl.org: fix 64-bit printk warnings]
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51eb01e73599efb88c6c20b1c226d20309a75450
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Sun Jun 25 05:48:50 2006 -0700

    [PATCH] fuse: no backgrounding on interrupt
    
    Don't put requests into the background when a fatal interrupt occurs while the
    request is in userspace.  This removes a major wart from the implementation.
    
    Backgrounding of requests was introduced to allow breaking of deadlocks.
    However now the same can be achieved by aborting the filesystem through the
    'abort' sysfs attribute.
    
    This is a change in the interface, but should not cause problems, since these
    kinds of deadlocks never happen during normal operation.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e8c54fad89144b8d63cc41619f363df1ec7cc42
Author: Jan Engelhardt <jengelh@linux01.gwdg.de>
Date:   Sun Jun 25 05:48:49 2006 -0700

    [PATCH] fuse: use MISC_MAJOR
    
    The following patches add POSIX file locking to the fuse interface.
    
    Additional changes ralated to this are:
    
      - asynchronous interrupt of requests by SIGKILL no longer supported
    
      - separate control filesystem, instead of using sysfs objects
    
      - add support for synchronously interrupting requests
    
    Details are documented in Documentation/filesystems/fuse.txt throughout the
    patches.
    
    This patch:
    
    Have fuse.h use MISC_MAJOR rather than a hardcoded '10'.
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2b94895b9281976cf2a0f2f89bf41ee219742235
Author: David Howells <dhowells@redhat.com>
Date:   Sun Jun 25 05:48:49 2006 -0700

    [PATCH] Another couple of alterations to the memory barrier doc
    
    Make another couple of alterations to the memory barrier document following
    suggestions by Alan Stern and in co-operation with Paul McKenney:
    
     (*) Rework the point of introduction of memory barriers and the description
         of what they are to reiterate why they're needed.
    
     (*) Modify a statement about the use of data dependency barriers to note that
         other barriers can be used instead (as they imply DD-barriers).
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-By: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 326f28e9ec4b2619c2fd410593fc95fcb0ba6b41
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Sun Jun 25 05:48:48 2006 -0700

    [PATCH] More !tty cleanups in drivers/char
    
    Another bunch of checks in the char drivers .put_char() and .write()
    routines, where tty can never be NULL.  This patch removes these checks to
    save some code.  Coverity choked at those with the following bug ids:
    
    isicom.c  767, 766
    specialix.c 773, 774
    synclink_cs.c 779, 781
    synclink_gt.c 784, 785
    synclinkmp.c 784, 785
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Cc: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fa791f5bdfa026a9abe1b48934943fd39f1e300b
Author: Niels Kristian Bech Jensen <nkbj1970@hotmail.com>
Date:   Sun Jun 25 05:48:47 2006 -0700

    [PATCH] Update contact information in CREDITS
    
    Update my contact information in CREDITS.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f9022f66336b8ad680884d4810f1c421fff899e3
Author: Ian Kent <raven@themaw.net>
Date:   Sun Jun 25 05:48:47 2006 -0700

    [PATCH] autofs4: need to invalidate children on tree mount expire
    
    I've found a case where invalid dentrys in a mount tree, waiting to be
    cleaned up by d_invalidate, prevent the expected expire.
    
    In this case dentrys created during a lookup for which a mount fails or has
    no entry in the mount map contribute to the d_count of the parent dentry.
    These dentrys may not be invalidated prior to comparing the interanl usage
    count of valid autofs dentrys against the dentry d_count which makes a
    mount tree appear busy so it doesn't expire.
    
    Signed-off-by: Ian Kent <raven@themaw.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2f20c7c274b6241767330c902b3111b9326d901
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Sun Jun 25 05:48:46 2006 -0700

    [PATCH] Clean up char/esp.c
    
    coverity choked at another two !tty checks, in places where tty can
    never be NULL. Since it removes some code we should remove
    these checks. (Coverity ids #763,#762)
    
    Signed-off-by Eric Sesterhenn <snakebyte@gmx.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 969dd061d81d9e2bc7f954859452ac81cc639711
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Sun Jun 25 05:48:45 2006 -0700

    [PATCH] Cyclades Cleanup
    
    coverity choked at two !tty checks, in places where tty can never be NULL.
    Since it removes some code we should remove these checks.  (Coverity ids
    #763,#762)
    
    [akpm@osdl.org: even cleaner!]
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2aa92581fb13e04e1440e5041b412cc06c782e0e
Author: Anton Blanchard <anton@samba.org>
Date:   Sun Jun 25 05:48:44 2006 -0700

    [PATCH] Link error when futexes are disabled on 64bit architectures
    
    If futexes are disabled we fail to link on ppc64.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 165d6c78ee24127dde5c750b2af0a239f9c11d1a
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Sun Jun 25 05:48:44 2006 -0700

    [PATCH] RCU documentation: self-limiting updates and call_rcu()
    
    An update to the RCU documentation calling out the
    self-limiting-update-rate advantages of synchronize_rcu(), and describing
    how to use call_rcu() in a way that results in self-limiting updates.
    Self-limiting updates are important to avoiding RCU-induced OOM in face of
    denial-of-service attacks.
    
    Signed-off-by: Paul E. McKenney <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76d42bd96984832c4ea8bc8cbd74e496ac31409e
Author: Wu Fengguang <wfg@mail.ustc.edu.cn>
Date:   Sun Jun 25 05:48:43 2006 -0700

    [PATCH] readahead: backoff on I/O error
    
    Backoff readahead size exponentially on I/O error.
    
    Michael Tokarev <mjt@tls.msk.ru> described the problem as:
    
    [QUOTE]
    Suppose there's a CD-rom with a scratch/etc, one sector is unreadable.
    In order to "fix" it, one have to read it and write to another CD-rom,
    or something.. or just ignore the error (if it's just a skip in a video
    stream).  Let's assume the unreadable block is number U.
    
    But current behavior is just insane.  An application requests block
    number N, which is before U. Kernel tries to read-ahead blocks N..U.
    Cdrom drive tries to read it, re-read it.. for some time.  Finally,
    when all the N..U-1 blocks are read, kernel returns block number N
    (as requested) to an application, successefully.
    
    Now an app requests block number N+1, and kernel tries to read
    blocks N+1..U+1.  Retrying again as in previous step.
    
    And so on, up to when an app requests block number U-1.  And when,
    finally, it requests block U, it receives read error.
    
    So, kernel currentry tries to re-read the same failing block as
    many times as the current readahead value (256 (times?) by default).
    
    This whole process already killed my cdrom drive (I posted about it
    to LKML several months ago) - literally, the drive has fried, and
    does not work anymore.  Ofcourse that problem was a bug in firmware
    (or whatever) of the drive *too*, but.. main problem with that is
    current readahead logic as described above.
    [/QUOTE]
    
    Which was confirmed by Jens Axboe <axboe@suse.de>:
    
    [QUOTE]
    For ide-cd, it tends do only end the first part of the request on a
    medium error. So you may see a lot of repeats :/
    [/QUOTE]
    
    With this patch, retries are expected to be reduced from, say, 256, to 5.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Wu Fengguang <wfg@mail.ustc.edu.cn>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78dbe706e22f54bce61571ad837238382e1ba5f9
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 25 05:48:41 2006 -0700

    [PATCH] R3964: fix GFP_KERNEL allocations in timer function
    
    In the error case, add_msg() gets called from timer functions, so should
    be using GFP_ATOMIC instead of GFP_KERNEL.
    
    Ref: http://bugzilla.kernel.org/show_bug.cgi?id=6659.  Thanks to Christian
    Werner <chw@ch-werner.de> for reporting, and for the initial fix.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c836043e708d50bb301479d0db8e0dc77d4f52ca
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:40 2006 -0700

    [PATCH] advansys section fixes
    
    Priority: not critical.
    Mark 3 functions __init.  Saves a little memory.
    This makes these functions' calls to AdvWaitEEPCmd() (which is __init)
    be clean (i.e., eliminates text -> init -> text call chain).
    
    Fix multiple section mismatch warnings:
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet3550EEPConfig' (at offset 0x7a22) and 'AdvSet38C0800EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet3550EEPConfig' (at offset 0x7a4e) and 'AdvSet38C0800EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet3550EEPConfig' (at offset 0x7a79) and 'AdvSet38C0800EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet3550EEPConfig' (at offset 0x7aa2) and 'AdvSet38C0800EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet3550EEPConfig' (at offset 0x7abb) and 'AdvSet38C0800EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C0800EEPConfig' (at offset 0x7ae0) and 'AdvSet38C1600EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C0800EEPConfig' (at offset 0x7b0c) and 'AdvSet38C1600EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C0800EEPConfig' (at offset 0x7b37) and 'AdvSet38C1600EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C0800EEPConfig' (at offset 0x7b60) and 'AdvSet38C1600EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C0800EEPConfig' (at offset 0x7b79) and 'AdvSet38C1600EEPConfig'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C1600EEPConfig' (at offset 0x7b9e) and 'AdvExeScsiQueue'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C1600EEPConfig' (at offset 0x7bca) and 'AdvExeScsiQueue'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C1600EEPConfig' (at offset 0x7bf5) and 'AdvExeScsiQueue'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C1600EEPConfig' (at offset 0x7c1e) and 'AdvExeScsiQueue'
    WARNING: drivers/scsi/advansys.o - Section mismatch: reference to .init.text: from .text between 'AdvSet38C1600EEPConfig' (at offset 0x7c37) and 'AdvExeScsiQueue'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 673e321cf9a12ecc2d6ce683fa9105f3443c1cbd
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:39 2006 -0700

    [PATCH] char/ip2: more section fixes (replacement)
    
    Priority: tossup.
    In theory some of these (previously) __init functions could be called
    after init, but that problem has not been observed AFAIK.
    
    There were 2 cases of cleanup_module() (module_exit) calling __init
    functions (clear_requested_irq() & have_requested_irq()).
    These are more serious, but still not observed AFAIK.
    
    Fix sections mismatch:
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'cleanup_module' (at offset 0x228b) and 'ip2_loadmain'
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'cleanup_module' (at offset 0x22ae) and 'ip2_loadmain'
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'ip2_loadmain' (at offset 0x2501) and 'set_irq'
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'ip2_loadmain' (at offset 0x25de) and 'set_irq'
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'ip2_loadmain' (at offset 0x2698) and 'set_irq'
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'ip2_loadmain' (at offset 0x2922) and 'set_irq'
    WARNING: drivers/char/ip2/ip2main.o - Section mismatch: reference to .init.text: from .text between 'ip2_loadmain' (at offset 0x299e) and 'set_irq'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cad2af5eb7470f9a0b85498f5ffac894e3cdcd27
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:38 2006 -0700

    [PATCH] cdrom/mcdx: section fixes
    
    Priority: not critical.
    Make __mcdx_init() __init and static.  Saves a little memory.
    
    Fix section mismatch warning and make the function static while there:
    WARNING: drivers/cdrom/mcdx.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x8be) and 'mcdx_transfer'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 474ab45a1f7de888df63da86b46785fe19d7fbe7
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:38 2006 -0700

    [PATCH] trident fb section fixes
    
    Priority: not critical.
    Change 3 functions from __init to __devinit.
    Could be an init/probe problem in theory, but not observed, so not
    high priority IMO.
    
    Fix section mismatch warnings:
    WARNING: drivers/video/tridentfb.o - Section mismatch: reference to .init.text: from .text between 'trident_pci_probe' (at offset 0x1aad) and 'trident_pci_remove'
    WARNING: drivers/video/tridentfb.o - Section mismatch: reference to .init.text: from .text between 'trident_pci_probe' (at offset 0x1b22) and 'trident_pci_remove'
    WARNING: drivers/video/tridentfb.o - Section mismatch: reference to .init.text: from .text between 'trident_pci_probe' (at offset 0x1b31) and 'trident_pci_remove'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96ebb92840b6bbb2e2fd8ad6b2b55d9cd76a06a0
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:37 2006 -0700

    [PATCH] wan/sdla section fixes
    
    netdev->set_config can be called at any time, so these references
    to __initdata would be a real problem.
    However, problem has not been observed AFAIK.
    
    Fix section mismatch warnings:
    WARNING: drivers/net/wan/sdla.o - Section mismatch: reference to .init.data: from .text between 'sdla_set_config' (at offset 0x1b8e) and 'sdla_stats'
    WARNING: drivers/net/wan/sdla.o - Section mismatch: reference to .init.data: from .text between 'sdla_set_config' (at offset 0x1e76) and 'sdla_stats'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e656be899993f450a765056cdc8d87e58906508
Author: Peter Staubach <staubach@redhat.com>
Date:   Sun Jun 25 05:48:36 2006 -0700

    [PATCH] ftruncate does not always update m/ctime
    
    In the course of trying to track down a bug where a file mtime was not
    being updated correctly, it was discovered that the m/ctime updates were
    not quite being handled correctly for ftruncate() calls.
    
    Quoth SUSv3:
    
    open(2):
    
            If O_TRUNC is set and the file did previously exist, upon
            successful completion, open() shall mark for update the st_ctime
            and st_mtime fields of the file.
    
    truncate(2):
    
            Upon successful completion, if the file size is changed, this
            function shall mark for update the st_ctime and st_mtime fields
            of the file, and the S_ISUID and S_ISGID bits of the file mode
            may be cleared.
    
    ftruncate(2):
    
            Upon successful completion, if fildes refers to a regular file,
            the ftruncate() function shall mark for update the st_ctime and
            st_mtime fields of the file and the S_ISUID and S_ISGID bits of
            the file mode may be cleared. If the ftruncate() function is
            unsuccessful, the file is unaffected.
    
    The open(O_TRUNC) and truncate cases were being handled correctly, but the
    ftruncate case was being handled like the truncate case.  The semantics of
    truncate and ftruncate don't quite match, so ftruncate needs to be handled
    slightly differently.
    
    The attached patch addresses this issue for ftruncate(2).
    
    My thanx to Stephen Tweedie and Trond Myklebust for their help in
    understanding the situation and semantics.
    
    Signed-off-by: Peter Staubach <staubach@redhat.com>
    Cc: "Stephen C. Tweedie" <sct@redhat.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Al Viro <viro@www.linux.org.uk>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 838cd153a5250a79a302f6c5d68a4794b70c4ccb
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:48:35 2006 -0700

    [PATCH] N32 sigset and __COMPAT_ENDIAN_SWAP__
    
    I'm testing glibc on MIPS64, little-endian, N32, O32 and N64 multilibs.
    
    Among the NPTL test failures seen are some arising from sigsuspend problems
    for N32: it blocks the wrong signals, so SIGCANCEL (SIGRTMIN) is blocked
    despite glibc's carefully excluding it from sets of signals to block.
    Specifically, testing suggests it blocks signal N^32 instead of signal N,
    so (in the example tested) blocking SIGUSR1 (17) blocks signal 49 instead.
    
    glibc's sigset_t uses an array of unsigned long, as does the kernel.
    In both cases, signal N+1 is represented as
    (1UL << (N % (8 * sizeof (unsigned long)))) in word number
    (N / (8 * sizeof (unsigned long))).
    
    Thus the N32 glibc uses an array of 32-bit words and the N64 kernel uses an
    array of 64-bit words.  For little-endian, the layout is the same, with
    signals 1-32 in the first 4 bytes, signals 33-64 in the second, etc.; for
    big-endian, userspace has that layout while in the kernel each 8 bytes have
    the two halves swapped from the userspace layout.
    
    The N32 sigsuspend syscall uses sigset_from_compat to convert the userspace
    sigset to kernel format.  If __COMPAT_ENDIAN_SWAP__ is *not* set, this uses
    logic of the form
    
      set->sig[0] = compat->sig[0] | (((long)compat->sig[1]) << 32 )
    
    to convert the userspace sigset to a kernel one.  This looks correct to me
    for both big and little endian, given that in userspace compat->sig[1] will
    represent signals 33-64, and so will the high 32 bits of set->sig[0] in the
    kernel.  If however __COMPAT_ENDIAN_SWAP__ *is* set, as it is for
    __MIPSEL__, it uses
    
      set->sig[0] = compat->sig[1] | (((long)compat->sig[0]) << 32 );
    
    which seems incorrect for both big and little endian, and would
    explain the observed symptoms.
    
    This code is the only use of __COMPAT_ENDIAN_SWAP__, so if incorrect
    then that macro serves no purpose, in which case something like the
    following patch would seem appropriate to remove it.
    
    Signed-off-by: Joseph Myers <joseph@codesourcery.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92eeccd8badbfebe12383b6e5326b27dc707601d
Author: Johann Lombardi <johann.lombardi@bull.net>
Date:   Sun Jun 25 05:48:33 2006 -0700

    [PATCH] ext3: cleanup dead code in ext3_add_entry()
    
    The variables nlen and rlen are defined/initialized but not used in
    ext3_add_entry().
    
    Signed-off-by: Johann Lombardi <johann.lombardi@bull.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0710d36a0fd5db3176369397f0fc49db32a63507
Author: Florin Malita <fmalita@gmail.com>
Date:   Sun Jun 25 05:48:31 2006 -0700

    [PATCH] 9pfs: missing result check in v9fs_vfs_readlink() and v9fs_vfs_link()
    
    __getname() may fail and return NULL (as pointed out by Coverity 437 &
    1220).
    
    Signed-off-by: Florin Malita <fmalita@gmail.com>
    Acked-by: Eric Van Hensbergen <ericvh@gmail.com>
    Cc: <rminnich@lanl.gov>
    Cc: Latchesar Ionkov <lucho@ionkov.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eab03ac7bd3e0da99eb9dc068772a85a5e3f3577
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Jun 25 05:48:31 2006 -0700

    [PATCH] Get rid of /proc/sys/proc
    
    The table is empty, why does it still exist?
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ad2914d9cc55be651ef3bd676981a72c9001a47
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:29 2006 -0700

    [PATCH] checkstack: print module names
    
    Finding "init_module" high stack usage problems is challenging when there
    are over 1600 "init_module" functions in the kernel tree, so make
    checkstack.pl print out the filename where the stack usage occurs.  This is
    useful for code built as loadable modules.
    
    For built-in code, it just prints the kernel image file name, like
    "vmlinux".  Examples:
    
    (before patch:)
    0x0000000d callback:					1928
    0xffffffff81678c09 huft_build:				1560
    0x0018 init_module:					1512
    
    (after patch:)
    0x0000000d callback [divacapi]:				1928
    0xffffffff81678c09 huft_build [vmlinux]:		1560
    0x0018 init_module [hdaps]:				1512
    
    Also change one if-series to use elsif to cut down on unneeded tests.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Acked-by: Joern Engel <joern@wh.fh-wedel.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5ec3e4b7aefbb8613b27ec4449fa8f9916ab9099
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Jun 25 05:48:29 2006 -0700

    [PATCH] RTC: add rtc-ds1742 driver
    
    Add an RTC driver for the Dallas DS1742 RTC chip.
    
    [akpm@osdl.org: cleanups, compile fix]
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9bf5b4f5f53707aee5813f373279d03920ba6f65
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Jun 25 05:48:28 2006 -0700

    [PATCH] RTC: add rtc-ds1553 driver
    
    Add an RTC driver for the Dallas DS1553 RTC chip.
    
    [akpm@osdl.org: cleanups, compile fix]
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7a8bb12c24af8e3e4bdf18a7484699acc9dbedb
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:48:27 2006 -0700

    [PATCH] at91rm9200-rtc-driver-tidy
    
    - whitespace fixes (80-col display)
    
    - one unneeded cast of void*
    
    Cc: Andrew Victor <andrew@sanpeople.com>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 788b1fc619a31ebdbadd3a8863631f59a4bd2944
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Sun Jun 25 05:48:27 2006 -0700

    [PATCH] AT91RM9200 RTC driver
    
    Adds support for the RTC integrated in the Atmel AT91RM9200 SoC.
    
    Driver was originally written for 2.4 by Rick Bronson.  Then converted to
    2.6 ARM RTC API by Steven Scholz.  Now converted to the RTC class model.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8232212e0b4ee4eb3e407f5a9b098f6377820164
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Sun Jun 25 05:48:25 2006 -0700

    [PATCH] RTC: Add rtc_year_days() to calculate tm_yday
    
    RTC: Add exported function rtc_year_days() to calculate the tm_yday value.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 362600fe60fd18a25b4de8ec544b9e24e77e1484
Author: Raphael Assenat <raph@raphnet.net>
Date:   Sun Jun 25 05:48:24 2006 -0700

    [PATCH] Add v3020 RTC support
    
    This patch adds support for the v3020 RTC from EM Microelectronic.
    
    The v3020 RTC is designed to be connected on a bus using only one data bit.
     Since any data bit may be used, it is necessary to specify this to the
    driver by passing a struct v3020_platform_data pointer (see
    include/linux/rtc-v3020.h) to the driver.
    
    Part of the following code comes from the kernel patchs produced by
    Compulab for their products.  The original file (available here:
    http://raph.people.8d.com/misc/emv3020.c) was released under the terms of
    the GPL license.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Raphael Assenat <raph@raphnet.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9be05b57bd9152b7c26b1599b87aeb42a102f0cf
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 25 05:48:23 2006 -0700

    [PATCH] rtc: small documentation update
    
    Rtc driver documentation update
    
    * Mention the max-user-freq control file.
    * Add missing header in example code.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e12ecc2b5a4521a338d7681e7d5547080fc6f71
Author: Raphael Assenat <raph@raphnet.net>
Date:   Sun Jun 25 05:48:23 2006 -0700

    [PATCH] Add max6902 RTC support
    
    Add support for the MAX6902 SPI RTC chip.  Tested on a pxa2xx cpu.
    
    The compulab code comes from the kernel patch the produce for their
    cn-x255 board. (inside a zip file on the
    http://www.compulab.co.il/x255/html/x255-developer.htm)
    
    The original file (drivers/char/max6902.c) was GPL, which is of course
    an appropriate licence:
    
    /*
     * max6902.c
     *
     * Driver for MAX6902 RTC
     *
     * Copyright (C) 2004 Compulab Ltd.
     *
     *
     * This program is free software; you can redistribute it and/or modify
     * it under the terms of the GNU General Public License version 2 as
     * published by the Free Software Foundation.
     *
     *
     */
    
    For reference, you can get the original file here:
    http://raph.people.8d.com/misc/max6902.c
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Raphael Assenat <raph@raphnet.net>
    Cc: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 110d693d5898649da606cd6e5f6af4d7f70a405f
Author: Alessandro Zummo <alessandro.zummo@towertech.it>
Date:   Sun Jun 25 05:48:20 2006 -0700

    [PATCH] rtc subsystem: add capability checks
    
    Centralize CAP_SYS_XXX checks to avoid duplicate code and missing checks in
    the drivers.
    
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Richard Purdie <rpurdie@rpsys.net>
    Cc: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56f10c634e145d75e45b56a73f59fb6dff1caa8e
Author: Alessandro Zummo <alessandro.zummo@towertech.it>
Date:   Sun Jun 25 05:48:20 2006 -0700

    [PATCH] rtc subsystem, fix capability checks in kernel interface
    
    Remove commented capability checks and add some others.
    
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c0c570576d02000063e28faadcce8c07396755d
Author: G. Liakhovetski <gl@dsa-ac.de>
Date:   Sun Jun 25 05:48:18 2006 -0700

    [PATCH] drivers/acorn/char/pcf8583.[hc] vs. RTC subsystem
    
    A port of the driver for the pcf8583 i2c rtc controller to the generic RTC
    framework by Alessandro Zummo.  Based on
    drivers/acorn/char/{pcf8583.[hc],i2c.c}.  Hopefully, acorn can be converted
    too to use this driver in the future.
    
    Signed-off-by: G. Liakhovetski <gl@dsa-ac.de>
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 655066c3835e7b51794c4d56f042eb78b5a79f53
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Jun 25 05:48:17 2006 -0700

    [PATCH] RTC: rtc-dev UIE emulation
    
    Import genrtc's RTC UIE emulation (CONFIG_GEN_RTC_X) to rtc-dev driver with
    slight adjustments/refinements.  This makes UIE-less rtc drivers work
    better with programs doing read/poll on /dev/rtc, such as hwclock.  This
    emulation should not harm rtc drivers with UIE support, since
    rtc_dev_ioctl() calls underlaying rtc driver's ioctl() first.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Acked-by: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1abb0dc92d706e8c73c7a62ca813738fe2259a7f
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Jun 25 05:48:17 2006 -0700

    [PATCH] "RTC-framework" driver for DS1307 and similar RTC chips
    
    This is an "RTC-framework" driver for DS1307 and similar RTC chips,
    
    It should be a full replacement for the existing ds1337.c driver (using the
    older RTC glue), giving a net increase in the number of RTC chips that work
    out-of-the-box.  There's a whole cluster of RTCs that are very similar, but
    the 1337 driver was a bit too picky to work with most of them.
    
    Still no support for RTC alarm IRQs (on chips that support them).
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: James Chapman <jchapman@katalix.com>
    Signed-off-by: Alessandro Zummo <a.zummo@towertech.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3eecd1dc57971b2beff699b3704058866c25dedc
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun Jun 25 05:48:16 2006 -0700

    [PATCH] Correct sa'K' description in sysrq.txt
    
    sysrq SAK is described as being something you should mistake for SAK from
    c2 compliant systems - whoops.  What's meant is that it should *not* be
    mistaken as such.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b9c04106b70e46803c69d13d5da32f6129fa76d
Author: Jan Engelhardt <jengelh@linux01.gwdg.de>
Date:   Sun Jun 25 05:48:15 2006 -0700

    [PATCH] printk time parameter
    
    Currently, enabling/disabling printk timestamps is only possible through
    reboot (bootparam) or recompile.  I normally do not run with timestamps
    (since syslog handles that in a good manner), but for measuring small
    kernel delays (e.g.  irq probing - see parport thread) I needed subsecond
    precision, but then again, just for some minutes rather than all kernel
    messages to come.  The following patch adds a module_param() with which the
    timestamps can be en-/disabled in a live system through
    /sys/modules/printk/parameters/printk_time.
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e5dcd90b53d601a04482db9800336a0ccf190880
Author: Wu Fengguang <wfg@mail.ustc.edu.cn>
Date:   Sun Jun 25 05:48:14 2006 -0700

    [PATCH] radixtree: normalize radix_tree_tag_get() return value
    
    In radix_tree_tag_get(), return normalized value of 0/1, as indicated
    by its comment.
    
    Signed-off-by: Wu Fengguang <wfg@mail.ustc.edu.cn>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3419b23a919698f75944d3e0d97eb1d9c51e4bb6
Author: Davide Libenzi <davidel@xmailserver.org>
Date:   Sun Jun 25 05:48:14 2006 -0700

    [PATCH] epoll: use unlocked wqueue operations
    
    A few days ago Arjan signaled a lockdep red flag on epoll locks, and
    precisely between the epoll's device structure lock (->lock) and the wait
    queue head lock (->lock).
    
    Like I explained in another email, and directly to Arjan, this can't happen
    in reality because of the explicit check at eventpoll.c:592, that does not
    allow to drop an epoll fd inside the same epoll fd.  Since lockdep is
    working on per-structure locks, it will never be able to know of policies
    enforced in other parts of the code.
    
    It was decided time ago of having the ability to drop epoll fds inside
    other epoll fds, that triggers a very trick wakeup operations (due to
    possibly reentrant callback-driven wakeups) handled by the
    ep_poll_safewake() function.  While looking again at the code though, I
    noticed that all the operations done on the epoll's main structure wait
    queue head (->wq) are already protected by the epoll lock (->lock), so that
    locked-style functions can be used to manipulate the ->wq member.  This
    makes both a lock-acquire save, and lockdep happy.
    
    Running totalmess on my dual opteron for a while did not reveal any problem
    so far:
    
    http://www.xmailserver.org/totalmess.c
    
    Signed-off-by: Davide Libenzi <davidel@xmailserver.org>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4ad3bcf3146aa12f41262bb5dd1d9f1778e085b1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jun 25 05:48:13 2006 -0700

    [PATCH] nbd: endian annotations
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Paul Clements <Paul.Clements@SteelEye.com>
    Cc: Jens Axboe <axboe@suse.de>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21730eed11de42f22afcbd43f450a1872a0b5ea1
Author: Val Henson <val_henson@linux.intel.com>
Date:   Sun Jun 25 05:48:12 2006 -0700

    [PATCH] Make EXT2_DEBUG work again
    
    This patch makes EXT2_DEBUG work again.  Due to lack of proper include
    file, EXT2_DEBUG was undefined in bitmap.c and ext2_count_free() is left
    out.  Moved to balloc.c and removed bitmap.c entirely.
    
    Second, debug versions of ext2_count_free_{inodes/blocks} reacquires
    superblock lock.  Moved lock into callers.
    
    Signed-off-by: Val Henson <val_henson@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 42225a359aa8094242651191ad0ac9c338503d81
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jun 25 05:48:11 2006 -0700

    [PATCH] emu10k1: mark midi_spinlock as used
    
    Why is it marked unused when in fact it's used?
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9de9adb615bddbdb786273c41ec3c03837e32fa5
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:48:10 2006 -0700

    [PATCH] for_each_cpu_mask() warning fix
    
    On UP, this:
    
           cpumask_t mask = node_to_cpumask(numa_node_id());
    
           for_each_cpu_mask(cpu, mask)
    
    does this:
    
    mm/readahead.c: In function `node_readahead_aging':
    mm/readahead.c:850: warning: unused variable `mask'
    
    which is unpleasantly fixed by this:
    
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eab98702afa567927c9b052499b43acad2f25a1c
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Sun Jun 25 05:48:10 2006 -0700

    [PATCH] Make sysctl obligatory except under CONFIG_EMBEDDED
    
    Make makes sysctl non-optional unless EMBEDDED is set.  There are a number
    of interfaces exposed via sysctl, enough that it has to be considered core
    kernel functionality at this point.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74bb6a09b2e1e69d91eb6069eb4a7f0c06b84812
Author: Ingo Molnar <mingo@elte.hu>
Date:   Sun Jun 25 05:48:09 2006 -0700

    [PATCH] introduce WARN_ON_ONCE(cond)
    
    Add WARN_ON_ONCE(cond) to print once-per-bootup messages.
    
    [rostedt@goodmis.org: improve code generation]
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 69755652c92106855b4b096b7c2935b59e6252c6
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Sun Jun 25 05:48:08 2006 -0700

    [PATCH] Make procfs obligatory except under CONFIG_EMBEDDED
    
    Make procfs non-optional unless EMBEDDED is set, just like sysfs.  procfs
    is already de facto required for a large subset of Linux functionality.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd40cddae2211950c81c41f25a818189f80fd0b5
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:08 2006 -0700

    [PATCH] kernel-doc: mm/readhead fixup
    
    Put short function description for read_cache_pages() on one line as needed
    by kernel-doc.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43d23f9039fc810ecd621f1e4f9d578eadce058a
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Jun 25 05:48:07 2006 -0700

    [PATCH] ext3_fsblk_t: the rest of in-kernel filesystem blocks conversion
    
    Convert the ext3 in-kernel filesystem blocks to ext3_fsblk_t.  Convert the
    rest of all unsigned long type in-kernel filesystem blocks to ext3_fsblk_t,
    and replace the printk format string respondingly.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1c2bf374a4b8c2e1a3e6ff3a64fb67272a8cd2e2
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Jun 25 05:48:06 2006 -0700

    [PATCH] ext3_fsblk_t: filesystem, group blocks and bug fixes
    
    Some of the in-kernel ext3 block variable type are treated as signed 4 bytes
    int type, thus limited ext3 filesystem to 8TB (4kblock size based).  While
    trying to fix them, it seems quite confusing in the ext3 code where some
    blocks are filesystem-wide blocks, some are group relative offsets that need
    to be signed value (as -1 has special meaning).  So it seem saner to define
    two types of physical blocks: one is filesystem wide blocks, another is
    group-relative blocks.  The following patches clarify these two types of
    blocks in the ext3 code, and fix the type bugs which limit current 32 bit ext3
    filesystem limit to 8TB.
    
    With this series of patches and the percpu counter data type changes in the mm
    tree, we are able to extend exts filesystem limit to 16TB.
    
    This work is also a pre-request for the recent >32 bit ext3 work, and makes
    the kernel to able to address 48 bit ext3 block a lot easier: Simply redefine
    ext3_fsblk_t from unsigned long to sector_t and redefine the format string for
    ext3 filesystem block corresponding.
    
    Two RFC with a series patches have been posted to ext2-devel list and have
    been reviewed and discussed:
    http://marc.theaimsgroup.com/?l=ext2-devel&m=114722190816690&w=2
    
    http://marc.theaimsgroup.com/?l=ext2-devel&m=114784919525942&w=2
    
    Patches are tested on both 32 bit machine and 64 bit machine, <8TB ext3 and
    >8TB ext3 filesystem(with the latest to be released e2fsprogs-1.39).  Tests
    includes overnight fsx, tiobench, dbench and fsstress.
    
    This patch:
    
    Defines ext3_fsblk_t and ext3_grpblk_t, and the printk format string for
    filesystem wide blocks.
    
    This patch classifies all block group relative blocks, and ext3_fsblk_t blocks
    occurs in the same function where used to be confusing before.  Also include
    kernel bug fixes for filesystem wide in-kernel block variables.  There are
    some fileystem wide blocks are treated as int/unsigned int type in the kernel
    currently, especially in ext3 block allocation and reservation code.  This
    patch fixed those bugs by converting those variables to ext3_fsblk_t(unsigned
    long) type.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cedfb178ada245b6c52a654936b34d7996e26a1d
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:05 2006 -0700

    [PATCH] megaraid_mbox: fix section mismatch warnings
    
    Fix section warning:
    WARNING: drivers/scsi/megaraid/megaraid_mbox.o - Section mismatch: reference to .init.text: from .text between 'megaraid_probe_one' (at offset 0x171e) and 'megaraid_queue_command'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9bcf9c117b0a39f7e59c9682a7b32a9253c0544
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:48:05 2006 -0700

    [PATCH] wd7000: fix section mismatch warnings
    
    From: Randy Dunlap <rdunlap@xenotime.net>
    
    Fix section mismatch in wd7000 driver:
    WARNING: drivers/scsi/wd7000.o - Section mismatch: reference to .init.text: from .text after 'wd7000_detect' (at offset 0xa5d)
    WARNING: drivers/scsi/wd7000.o - Section mismatch: reference to .init.text: from .text after 'wd7000_detect' (at offset 0xab6)
    WARNING: drivers/scsi/wd7000.o - Section mismatch: reference to .init.text: from .text after 'wd7000_detect' (at offset 0xb67
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ad4063b0b2ffd7c8359b62c830e88152fc39ab20
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 25 05:48:03 2006 -0700

    [PATCH] AX88796 parallel port driver
    
    Driver for the simple parallel port interface on the Asix AX88796 chip on
    an platform_bus.
    
    [akpm@osdl.org: x86_64 build fix]
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11e64757f9fb32f13f51596bbf01988f42fca764
Author: Matt Helsley <matthltc@us.ibm.com>
Date:   Sun Jun 25 05:48:03 2006 -0700

    [PATCH] Remove unecessary NULL check in kernel/acct.c
    
    copy_process() appears to be the only caller of acct_clear_integrals() and
    does not pass in NULL task pointers.  Remove the unecessary check.
    
    Signed-off-by: Matt Helsley <matthltc@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7c12d81134b130ccd4c286b434ca48c4cda71a2f
Author: Neil Brown <neilb@suse.de>
Date:   Sun Jun 25 05:48:02 2006 -0700

    [PATCH] Make copy_from_user_inatomic NOT zero the tail on i386
    
    As described in a previous patch and documented in mm/filemap.h,
    copy_from_user_inatomic* shouldn't zero out the tail of the buffer after an
    incomplete copy.
    
    This patch implements that change for i386.
    
    For the _nocache version, a new __copy_user_intel_nocache is defined similar
    to copy_user_zeroio_intel_nocache, and this is ultimately used for the copy.
    
    For the regular version, __copy_from_user_ll_nozero is defined which uses
    __copy_user and __copy_user_intel - the later needs casts to reposition the
    __user annotations.
    
    If copy_from_user_atomic is given a constant length of 1, 2, or 4, then we do
    still zero the destintion on failure.  This didn't seem worth the effort of
    fixing as the places where it is used really don't care.
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 01408c4939479ec46c15aa7ef6e2406be50eeeca
Author: Neil Brown <neilb@suse.de>
Date:   Sun Jun 25 05:47:58 2006 -0700

    [PATCH] Prepare for __copy_from_user_inatomic to not zero missed bytes
    
    The problem is that when we write to a file, the copy from userspace to
    pagecache is first done with preemption disabled, so if the source address is
    not immediately available the copy fails *and* *zeros* *the* *destination*.
    
    This is a problem because a concurrent read (which admittedly is an odd thing
    to do) might see zeros rather that was there before the write, or what was
    there after, or some mixture of the two (any of these being a reasonable thing
    to see).
    
    If the copy did fail, it will immediately be retried with preemption
    re-enabled so any transient problem with accessing the source won't cause an
    error.
    
    The first copying does not need to zero any uncopied bytes, and doing so
    causes the problem.  It uses copy_from_user_atomic rather than copy_from_user
    so the simple expedient is to change copy_from_user_atomic to *not* zero out
    bytes on failure.
    
    The first of these two patches prepares for the change by fixing two places
    which assume copy_from_user_atomic does zero the tail.  The two usages are
    very similar pieces of code which copy from a userspace iovec into one or more
    page-cache pages.  These are changed to remove the assumption.
    
    The second patch changes __copy_from_user_inatomic* to not zero the tail.
    Once these are accepted, I will look at similar patches of other architectures
    where this is important (ppc, mips and sparc being the ones I can find).
    
    This patch:
    
    There is a problem with __copy_from_user_inatomic zeroing the tail of the
    buffer in the case of an error.  As it is called in atomic context, the error
    may be transient, so it results in zeros being written where maybe they
    shouldn't be.
    
    In the usage in filemap, this opens a window for a well timed read to see data
    (zeros) which is not consistent with any ordering of reads and writes.
    
    Most cases where __copy_from_user_inatomic is called, a failure results in
    __copy_from_user being called immediately.  As long as the latter zeros the
    tail, the former doesn't need to.  However in *copy_from_user_iovec
    implementations (in both filemap and ntfs/file), it is assumed that
    copy_from_user_inatomic will zero the tail.
    
    This patch removes that assumption, so that after this patch it will
    be safe for copy_from_user_inatomic to not zero the tail.
    
    This patch also adds some commentary to filemap.h and asm-i386/uaccess.h.
    
    After this patch, all architectures that might disable preempt when
    kmap_atomic is called need to have their __copy_from_user_inatomic* "fixed".
    This includes
     - powerpc
     - i386
     - mips
     - sparc
    
    Signed-off-by: Neil Brown <neilb@suse.de>
    Cc: David Howells <dhowells@redhat.com>
    Cc: Anton Altaparmakov <aia21@cantab.net>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5f507d9e05b4dbfee34f3d967623ad3fbf0f28b3
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Sun Jun 25 05:47:57 2006 -0700

    [PATCH] constify libcrc32c table
    
    constify a medium-large CRC code table.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3b364b8d584b94777f8446a943b3c65e75e758f8
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Sun Jun 25 05:47:56 2006 -0700

    [PATCH] constify parts of kernel/power/
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 43b0bc00fdbf2f1503a57f0c2c1338438c5d2805
Author: Chris Wright <chrisw@sous-sol.org>
Date:   Sun Jun 25 05:47:55 2006 -0700

    [PATCH] cpuset: remove extra cpuset_zone_allowed check in __alloc_pages
    
    This is redundant with check in wakeup_kswapd.
    
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Acked-by: Paul Jackson <pj@sgi.com>
    Acked-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dc851a0fd2736e8dc3e90bd990cb911a0013da67
Author: David Wilder <dwilder@us.ibm.com>
Date:   Sun Jun 25 05:47:55 2006 -0700

    [PATCH] Updated kdump documentation
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ea2c2ecfcc1f31eaba8d1995b2e734ba821806a
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun Jun 25 05:47:54 2006 -0700

    [PATCH] moxa: partial CodingStyle cleanup & spelling fixes
    
    Do a *partial* CodingStyle cleanup, correct some spelling in printk()'s &&
    convert C++ comments to C comments - in moxa driver.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8a7f7c9307962ffdf81561ec8742fde1fad9fe10
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun Jun 25 05:47:53 2006 -0700

    [PATCH] moxa: remove pointless check of 'tty' argument vs NULL
    
    Remove pointless check of 'tty' argument vs NULL from moxa driver.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 56e139f62bd7b82430cfcf01fcbd42e1d84fb738
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun Jun 25 05:47:52 2006 -0700

    [PATCH] moxa: remove pointless casts
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Acked-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d2e5b13c4a7c68fdbcf389c9fffc12cfa2c185af
Author: Theodore Ts'o <tytso@mit.edu>
Date:   Sun Jun 25 05:47:52 2006 -0700

    [PATCH] ext3: remove inconsistent space before exclamation point in mount code
    
    This was reported as Debian bug #336604.
    
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f1c6227a0bc9b1e3a7e87cd31f650a909f647f
Author: Theodore Ts'o <tytso@mit.edu>
Date:   Sun Jun 25 05:47:51 2006 -0700

    [PATCH] ext3: fix memory leak when the journal file is corrupted
    
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f16fdadba28add689b567cf03c21dd6dec8e43be
Author: Theodore Ts'o <tytso@mit.edu>
Date:   Sun Jun 25 05:47:50 2006 -0700

    [PATCH] ext2: clean up dead code from mount code
    
    The variable i is guaranteed to be the same as db_count given the previous
    for loop.  So get rid of it since it's dead code.
    
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fcd5df35882b128ef3e160fab3074e6fe7ae501b
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Sun Jun 25 05:47:50 2006 -0700

    [PATCH] Avoid disk sector_t overflow for >2TB ext3 filesystem
    
    If ext3 filesystem is larger than 2TB, and sector_t is a u32 (i.e.
    CONFIG_LBD not defined in the kernel), the calculation of the disk sector
    will overflow.  Add check at ext3_fill_super() and ext3_group_extend() to
    prevent mount/remount/resize >2TB ext3 filesystem if sector_t size is 4
    bytes.
    
    Verified this patch on a 32 bit platform without CONFIG_LBD defined
    (sector_t is 32 bits long), mount refuse to mount a 10TB ext3.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Acked-by: Andreas Dilger <adilger@clusterfs.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b61367732fc273977cc3fb85c272ce1a7bb1f533
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:47:49 2006 -0700

    [PATCH] schedule_on_each_cpu(): reduce kmalloc() size
    
    schedule_on_each_cpu() presently does a large kmalloc - 96 kbytes on 1024 CPU
    64-bit.
    
    Rework it so that we do one 8192-byte allocation and then a pile of tiny ones,
    via alloc_percpu().  This has a much higher chance of success (100% in the
    current VM).
    
    This also has the effect of reducing the memory requirements from NR_CPUS*n to
    num_possible_cpus()*n.
    
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 232acbcf5304c29f5bb03b0dddeaefd0f98ef45e
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:47:48 2006 -0700

    [PATCH] kernel-doc: script cleanups
    
    Fix indentation.
    Quote a brace '{' so that vi won't be fooled by it.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 05189497d10c715bf41c05fb2fd89aa2cf7602f1
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:47:47 2006 -0700

    [PATCH] kernel-doc: drop leading space in sections
    
    Drop leading space of kernel-doc section contents.
    
    "Section" data (contents) are split from the section header
    (e.g., Note: below is a section header:
     * Note: list_empty on entry does not return true after this, the entry is
     * in an undefined state.
    ).
    
    Currently the data/contents begins with a space and is left that way, which
    causes it to look bad when printed (in text mode; see example below), so
    just remove the leading space.
    
    Note:
    
    list_empty on entry does not return true after this, the entry is in an
    undefined state.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d18639a833e9f034b055dcbb16a980be627f475
Author: Chris Wedgwood <cw@f00f.org>
Date:   Sun Jun 25 05:47:46 2006 -0700

    [PATCH] EDD isn't EXPERIMENTAL anymore
    
    Lots of people use this.  Apparently RH has for over 18 months so lets
    drop EXPERIMENTAL.
    
    Signed-off-by: Chris Wedgwood <cw@f00f.org>
    Cc: Matt Domsch <Matt_Domsch@dell.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d616e09ab33aa4d013a93c9b393efd5cebf78521
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:47:46 2006 -0700

    [PATCH] pdflush: handle resume wakeups
    
    pdflush is carefully designed to ensure that all wakeups have some
    corresponding work to do - if a woken-up pdflush thread discovers that it
    hasn't been given any work to do then this is considered an error.
    
    That all broke when swsusp came along - because a timer-delivered wakeup to a
    frozen pdflush thread will just get lost.  This causes the pdflush thread to
    get lost as well: the writeback timer is supposed to be re-armed by pdflush in
    process context, but pdflush doesn't execute the callout which does this.
    
    Fix that up by ignoring the return value from try_to_freeze(): jsut proceed,
    see if we have any work pending and only go back to sleep if that is not the
    case.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bc64863814b14a4f75884746e68d3bf9f96b3559
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:47:45 2006 -0700

    [PATCH] cpqarray section fix
    
    WARNING: drivers/block/cpqarray.o - Section mismatch: reference to .init.text: from .text between 'cpqarray_register_ctlr' (at offset 0xe98) and 'alloc_cpqarray_hba'
    WARNING: drivers/block/cpqarray.o - Section mismatch: reference to .init.text: from .text between 'cpqarray_register_ctlr' (at offset 0xe9c) and 'alloc_cpqarray_hba'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbe217af3be08346f4b1abb885c2d9ec29c98fac
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Sun Jun 25 05:47:44 2006 -0700

    [PATCH] IDE CD end-of media error fix
    
    This is a patch from Alan that fixes a real ide-cd.c regression causing
    bogus "Media Check" failures for perfectly valid Fedora install ISOs, on
    certain CD-ROM drives.
    
    This is a forward port to 2.6.16 (from RHEL) of the minimal changes for the
    end of media problem.  It may not be sufficient for some controllers
    (promise notably) and it does not touch the locking so the error path
    locking is as horked as in mainstream.
    
    From: Ingo Molnar <mingo@elte.hu>
    
    I have ported the patch to 2.6.17-rc4 and tested it by provoking
    end-of-media IO errors with an unaligned ISO image.  Unlike the vanilla
    kernel, the patched kernel interpreted the error condition correctly with
    512 byte granularity:
    
     hdc: command error: status=0x51 { DriveReady SeekComplete Error }
     hdc: command error: error=0x54 { AbortedCommand LastFailedSense=0x05 }
     ide: failed opcode was: unknown
     ATAPI device hdc:
       Error: Illegal request -- (Sense key=0x05)
       Illegal mode for this track or incompatible medium -- (asc=0x64, ascq=0x00)
       The failed "Read 10" packet command was:
       "28 00 00 04 fb 78 00 00 06 00 00 00 00 00 00 00 "
     end_request: I/O error, dev hdc, sector 1306080
     Buffer I/O error on device hdc, logical block 163260
     Buffer I/O error on device hdc, logical block 163261
     Buffer I/O error on device hdc, logical block 163262
    
    the unpatched kernel produces an incorrect error dump:
    
     hdc: command error: status=0x51 { DriveReady SeekComplete Error }
     hdc: command error: error=0x54 { AbortedCommand LastFailedSense=0x05 }
     ide: failed opcode was: unknown
     end_request: I/O error, dev hdc, sector 1306080
     Buffer I/O error on device hdc, logical block 163260
     hdc: command error: status=0x51 { DriveReady SeekComplete Error }
     hdc: command error: error=0x54 { AbortedCommand LastFailedSense=0x05 }
     ide: failed opcode was: unknown
     end_request: I/O error, dev hdc, sector 1306088
     Buffer I/O error on device hdc, logical block 163261
     hdc: command error: status=0x51 { DriveReady SeekComplete Error }
     hdc: command error: error=0x54 { AbortedCommand LastFailedSense=0x05 }
     ide: failed opcode was: unknown
     end_request: I/O error, dev hdc, sector 1306096
     Buffer I/O error on device hdc, logical block 163262
    
    I do not have the right type of CD-ROM drive to reproduce the end-of-media
    data corruption bug myself, but this same patch in RHEL solved it.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Jens Axboe <axboe@suse.de>
    Cc: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e3a67a99231f9f3f476bc3449e93c9a6a17f2e0
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:47:43 2006 -0700

    [PATCH] list.h doc: change "counter" to "cursor"
    
    Use loop "cursor" instead of loop "counter" for list iterator descriptions.
    They are not counters, they are pointers or positions.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fe96e57d77481c8c1b6b0381d7e086870ac394fa
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sun Jun 25 05:47:42 2006 -0700

    [PATCH] fix list.h kernel-doc
    
    kernel-doc:
    
    Put all short function descriptions on one line or if they are too long,
    omit the short description & add a Description: section for them.
    
    Change some list iterator descriptions to use "current" point instead of
    "existing" point.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dbf492d6c1a1bf5a8bda40274f479119f4c42ca4
Author: Pavel Machek <pavel@ucw.cz>
Date:   Sun Jun 25 05:47:42 2006 -0700

    [PATCH] nbd: kill obsolete changelog, add GPL
    
    nbd abuses file header as a changelog (and obsolete one, too), and fails to
    mention GPL.  This fixes it.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Cc: <Paul.Clements@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83cc5ed3c4c65fc4c3729a5cec2111ede1ebf85e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 25 05:47:41 2006 -0700

    [PATCH] kernel/sys.c: cleanups
    
    - proper prototypes for the following functions:
      - ctrl_alt_del()  (in include/linux/reboot.h)
      - getrusage()     (in include/linux/resource.h)
    - make the following needlessly global functions static:
      - kernel_restart_prepare()
      - kernel_kexec()
    
    [akpm@osdl.org: compile fix]
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 76a8ad293912cd2f01eca075d80cd0ddec30c627
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Sun Jun 25 05:47:40 2006 -0700

    [PATCH] Make printk work for really early debugging
    
    Currently printk is no use for early debugging because it refuses to
    actually print anything to the console unless
    cpu_online(smp_processor_id()) is true.
    
    The stated explanation is that console drivers may require per-cpu
    resources, or otherwise barf, because the system is not yet setup
    correctly.  Fair enough.
    
    However some console drivers might be quite happy running early during
    boot, in fact we have one, and so it'd be nice if printk understood that.
    
    So I added a flag (which I would have called CON_BOOT, but that's taken)
    called CON_ANYTIME, which indicates that a console is happy to be called
    anytime, even if the cpu is not yet online.
    
    Tested on a Power 5 machine, with both a CON_ANYTIME driver and a bogus
    console driver that BUG()s if called while offline.  No problems AFAICT.
    Built for i386 UP & SMP.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ae6e163c1b637e1cb125613726ffbd31ca44fdf
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Sun Jun 25 05:47:38 2006 -0700

    [PATCH] Add driver for ARM AMBA PL031 RTC
    
    Add a driver for the ARM PL031 RTC found on some ARM SOCs.  The driver is
    fairly trivial as the RTC only provides a read/write and alarm capability.
    
    [akpm@osdl.org: compile fix]
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Acked-by: Alessandro Zummo <a.zummo@towertech.it>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dcd96379613a3cbe87c30e1c20122ecdcdf3a4b8
Author: Daniel Walker <dwalker@mvista.com>
Date:   Sun Jun 25 05:47:37 2006 -0700

    [PATCH] idetape gcc 4.1 warning fix
    
    In both the read and write cases it will return an error if
    copy_{from/to}_user faults.  However, I let the driver try to read/write as
    much as it can just as it normally would , then finally it returns an error
    if there was one.  This was the most straight forward way to handle the
    error , since there isn't a clear way to clean up the buffers on error .
    
    I moved retval in idetape_chrdev_write() down into the actual code blocks
    since it's really once used there, and it conflicted with my ret variable.
    
    Fixes the following warning,
    
    drivers/ide/ide-tape.c: In function รขยยidetape_copy_stage_from_userรขยย:
    drivers/ide/ide-tape.c:2662: warning: ignoring return value of รขยยcopy_from_userรขยย, declared with attribute warn_unused_result
    drivers/ide/ide-tape.c: In function รขยยidetape_copy_stage_to_userรขยย:
    drivers/ide/ide-tape.c:2689: warning: ignoring return value of รขยยcopy_to_userรขยย, declared with attribute warn_unused_result
    
    Signed-off-by: Daniel Walker <dwalker@mvista.com>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a04ee14636fa339c4609766bd6173629d4f9026e
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Sun Jun 25 05:47:36 2006 -0700

    [PATCH] openpromfs: factorize out
    
    "Move" "common code" out to PTR_NOD, which does the conversion from private
    pointer to node number.  This is to reduce potential casting/conversion errors
    due to redundancy.  (The naming PTR_NOD follows PTR_ERR, turning a pointer
    into xyz.)
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 515decdccf81cfbf5273d7f0085aea954ecd26c4
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Sun Jun 25 05:47:35 2006 -0700

    [PATCH] openpromfs: remove unnecessary casts
    
    Remove unnecessary casts in fs/openpromfs/inode.c
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0928d68056fa25456830b1de9f0ee89bc37447cd
Author: Jan Engelhardt <jengelh@gmx.de>
Date:   Sun Jun 25 05:47:35 2006 -0700

    [PATCH] openpromfs: fix missing NUL
    
    tchars is not '\0'-terminated so the strtoul may run into problems.  Fix that.
     Also make tchars as big as a long in hexadecimal form would take rather than
    just 16.
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e6113908fe76a06295cb243f1f2f0eea055b0c2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 25 05:47:34 2006 -0700

    [PATCH] drivers/char/applicom.c: proper module_{init,exit}
    
    Convert the driver to use module_{init,exit}.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 59cc185ada89245204c658ebcf64422968736672
Author: Markus Armbruster <armbru@redhat.com>
Date:   Sun Jun 25 05:47:33 2006 -0700

    [PATCH] oprofile: convert from semaphores to mutexes
    
    Signed-off-by: Markus Armbruster <armbru@redhat.com>
    Cc: Philippe Elie <phil.el@wanadoo.fr>
    Cc: John Levon <levon@movementarian.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a2926b1449bcc3d348e2228114b04869dc2f3986
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:47:32 2006 -0700

    [PATCH] msnd section fix
    
    WARNING: sound/oss/msnd.o - Section mismatch: reference to .init.text:msnd_register from __ksymtab between '__ksymtab_msnd_register' (at offset 0x0) and '__ksymtab_msnd_unregister'
    
    This symbol is exported.  It'll oops if the driver is nonmodular and the
    caller is modular.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 138bb68ac9d49b0ea7eeecb3a245dc4e20f181da
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 25 05:47:32 2006 -0700

    [PATCH] fs/ufs/inode.c: make 2 functions static
    
    Make two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 098d5af7be694c66af44093f7217da3d22af1057
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:31 2006 -0700

    [PATCH] ufs: ubh_ll_rw_block cleanup
    
    In ufs code there is function: ubh_ll_rw_block, it has parameter how many
    ufs_buffer_head it should handle, but it always called with "1" on the place
    of this parameter.  This patch removes unused parameter of "ubh_ll_wr_block".
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ee3ffd6c126323693b3b32a71a1f1acfce30bd66
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:30 2006 -0700

    [PATCH] ufs: make fsck -f happy
    
    ufs super block contains some statistic about file systems, like amount of
    directories, free blocks, inodes and so on.
    
    UFS1 hold this information in one location and uses 32bit integers for such
    information, UFS2 hold statistic in another location and uses 64bit integers.
    
    There is transition variant, if UFS1 has type 44BSD and flags field in super
    block has some special value this mean that we work with statistic like UFS2
    does.  and this also means that nobody care about old(UFS1) statistic.
    
    So if start fsck against such file system, after usage linux ufs driver, it
    found error: at now only UFS1 like statistic is updated.
    
    This patch should fix this.  Also it contains some minor cleanup: CodingSytle
    and remove unused variables.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 577a82752f95a5680d7c14569ffd3fd630d9fb22
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:30 2006 -0700

    [PATCH] ufs: fsync implementation
    
    Presently ufs doesn't support "fsync", this make some applications unhappy,
    for example vim.  This patch fixes this situation.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 647b7e87b56f594daf648f44abfbeeb5eb6a9457
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:29 2006 -0700

    [PATCH] ufs: one way to access super block
    
    Super block of UFS usually has size >512, because of fragment size may be 512,
    this cause some problems.
    
    Currently, there are two methods to work with ufs super block:
    
    1) split structure which describes ufs super blocks into structures with
       size <=512
    
    2) use one structure which describes ufs super block, and hope that array
       of "buffer_head" which holds "super block", has such construction:
    
    	bh[n]->b_data + bh[n]->b_size == bh[n + 1]->b_data
    
    The second variant may cause some problems in the future, and usage of two
    variants cause unnecessary code duplication.
    
    This patch remove the second variant.  Also patch contains some CodingStyle
    fixes.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f391475812ba39afa322c835217ffe936f5e754a
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:28 2006 -0700

    [PATCH] ufs: missed brelse and wrong baseblk
    
    This patch fixes two bugs, which introduced by previous patches:
    
    1) Missed "brelse"
    
    2) Sometimes "baseblk" may be wrongly calculated, if i_size is equal to
       zero, which lead infinite cycle in "mpage_writepages".
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 96710b29e05f3b470bc4206366021b56e28d5208
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:47:28 2006 -0700

    [PATCH] ufs: printk warning fixes
    
    fs/ufs/super.c: In function `ufs_print_super_stuff':
    fs/ufs/super.c:103: warning: unsigned int format, different type arg (arg 2)    fs/ufs/super.c: In function `ufs2_print_super_stuff':                           fs/ufs/super.c:147: warning: unsigned int format, different type arg (arg 2)    fs/ufs/super.c: In function `ufs_print_cylinder_stuff':
    fs/ufs/super.c:175: warning: unsigned int format, different type arg (arg 2)
    
    Cc: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 022a6dc5f461a30615bcd1687569abeee7ef8ba2
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:27 2006 -0700

    [PATCH] ufs: zero metadata
    
    Presently if we allocate several "metadata" blocks (pointers to indirect
    blocks for example), we fill with zeroes only the first block.  This cause
    some problems in "truncate" function.  Also this patch remove some unused
    arguments from several functions and add comments.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2e006393ba5b599d9c43f94f8d8989e68131433e
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:26 2006 -0700

    [PATCH] ufs: unlock_super without lock
    
    ufs_free_blocks function looks now in so way:
    if (err)
     goto failed;
     lock_super();
    failed:
     unlock_super();
    
    So if error happen we'll unlock not locked super.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 50aa4eb0b978f4a0283471c776ed812269ac8af5
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:26 2006 -0700

    [PATCH] ufs: i_blocks wrong count
    
    At now UFS code uses DQUOT_* mechanism, but it also update inode->i_blocks
    manually, this cause wrong i_blocks value.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit dd187a2603d9904ddc410441348f0cfc558a5233
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:25 2006 -0700

    [PATCH] ufs: little directory lookup optimization
    
    This patch make little optimization of ufs_find_entry like "ext2" does.  Save
    number of page and reuse it again in the next call.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit abf5d15fd2e52517dd56a17a846d5a1f900b7db4
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:24 2006 -0700

    [PATCH] ufs: easy debug
    
    Currently to turn on debug mode "user" has to edit ~10 files, to turn off he
    has to do it again.
    
    This patch introduce such changes:
    1)turn on(off) debug messages via ".config"
    2)remove unnecessary duplication of code
    3)make "UFSD" macros more similar to function
    4)fix some compiler warnings
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5afb3145c9a733166174e1f5a07c46410b5c4091
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:24 2006 -0700

    [PATCH] ufs: Unmark CONFIG_UFS_FS_WRITE as BROKEN
    
    To find new bugs, I suggest revert this patch:
    http://lkml.org/lkml/2006/1/31/275 in -mm tree.
    
    So others can test "write support" of UFS.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e41f597b1595479e4a1b2e6b17b3542120ef165
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:23 2006 -0700

    [PATCH] ufs: not usual amounts of fragments per block
    
    The writing to UFS file system with block/fragment!=8 may cause bogus
    behaviour.  The problem in "ufs_bitmap_search" function, which doesn't work
    correctly in "block/fragment!=8" case.  The idea is stolen from BSD code.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9695ef16ed4e00b59303f39f9a4a422a2c6a3b89
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:22 2006 -0700

    [PATCH] ufs: wrong type cast
    
    There are two ugly macros in ufs code:
    #define UCPI_UBH ((struct ufs_buffer_head *)ucpi)
    #define USPI_UBH ((struct ufs_buffer_head *)uspi)
    when uspi looks like
    struct {
    struct ufs_buffer_head ;
    }
    and USPI_UBH has some sence,
    ucpi looks like
    struct {
    struct not_ufs_buffer_head;
    }
    
    To prevent bugs in future, this patch convert macros to inline function and
    fix "ucpi" structure.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b71034e5e67d1577424cebe7bbb7d0ce134a4cd8
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:22 2006 -0700

    [PATCH] ufs: directory and page cache: from blocks to pages
    
    Change function in fs/ufs/dir.c and fs/ufs/namei.c to work with pages
    instead of straight work with blocks.  It fixed such bugs:
    
    * for i in `seq 1 1000`; do touch $i; done - crash system
    * mkdir create directory without "." and ".." entries
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 826843a347cc8fd596a4c73d3fbdf04a1f130b8a
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:21 2006 -0700

    [PATCH] ufs: directory and page cache: install aops
    
    This series of patches finished "bugs fixing" mentioned
    here http://lkml.org/lkml/2006/1/31/275 .
    
    The main bugs:
    * for i in `seq 1 1000`; do touch $i; done - crash system
    * mkdir create directory without "." and ".." entries
    
    The suggested solution is work with page cache instead of straight work
    with blocks.  Such solution has following advantages
    
    * reduce code size and its complexity
    * some global locks go away
    * fix bugs
    
    The most part of code is stolen from ext2, because of it has similar
    directory structure.
    
    Patches testes with UFS1 and UFS2 file systems.
    
    This patch installs i_mapping->a_ops for directory inodes and removes some
    duplicated code.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ef4d6bf86a82965896eaa1a189177239ec2bbab
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:20 2006 -0700

    [PATCH] ufs: change block number on the fly
    
    First of all some necessary notes about UFS by it self: To avoid waste of disk
    space the tail of file consists not from blocks (which is ordinary big enough,
    16K usually), it consists from fragments(which is ordinary 2K).  When file is
    growing its tail occupy 1 fragment, 2 fragments...  At some stage decision to
    allocate whole block is made and all fragments are moved to one block.
    
    How this situation was handled before:
    
      ufs_prepare_write
      ->block_prepare_write
        ->ufs_getfrag_block
          ->...
            ->ufs_new_fragments:
    
    	bh = sb_bread
    	bh->b_blocknr = result + i;
    	mark_buffer_dirty (bh);
    
    This is wrong solution, because:
    
    - it didn't take into consideration that there is another cache: "inode page
      cache"
    
    - because of sb_getblk uses not b_blocknr, (it uses page->index) to find
      certain block, this breaks sb_getblk.
    
    How this situation is handled now: we go though all "page inode cache", if
    there are no such page in cache we load it into cache, and change b_blocknr.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c9a27b5dca52bbd0955e065e49e56eb313d02c34
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:19 2006 -0700

    [PATCH] ufs: right block allocation
    
    * After block allocation, we map it on the same "address" as 8 others
      blocks
    
    * We nullify block several times: once in ufs/block.c and once in
      block_*write_full_page, and use different "caches" for this.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2061df0f89201c0abeb4c17d343309c9fae5b861
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Sun Jun 25 05:47:18 2006 -0700

    [PATCH] ufs: ufs_trunc_indirect: infinite cycle
    
    Currently, ufs write support have two sets of problems: work with files and
    work with directories.
    
    This series of patches should solve the first problem.
    
    This patch is similar to http://lkml.org/lkml/2006/1/17/61 this patch
    complements it.
    
    The situation the same: in ufs_trunc_(not direct), we read block, check if
    count of links to it is equal to one, if so we finish cycle, if not
    continue.  Because of "count of links" always >=2 this operation cause
    infinite cycle and hang up the kernel.
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a9adb8dbcd7a337620862106f8c17aeb5e7278c7
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun Jun 25 05:47:17 2006 -0700

    [PATCH] pnp: card_probe(): fix memory leak
    
    We can leak `clink' if drv->probe == 0.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Adam Belay <ambx1@neo.rr.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 552c03483e49a69312c9e7384fda9282c991880a
Author: Cliff Wickman <cpw@sgi.com>
Date:   Sun Jun 25 05:47:16 2006 -0700

    [PATCH] fs/freevxfs: cleanup of spelling errors
    
    Fix of some spelling errors in fs/freevxfs error messages and comments
    
    Signed-off-by: Cliff Wickman <cpw@sgi.com>
    Cc: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bbb1747d4e44ce49acc73daa8d66e5f6bd546f1b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Sun Jun 25 05:47:15 2006 -0700

    [PATCH] Allow raw_notifier callouts to unregister themselves
    
    Since raw_notifier chains don't benefit from any centralized locking
    protections, they shouldn't suffer from the associated limitations.  Under
    some circumstances it might make sense for a raw_notifier callout routine
    to unregister itself from the notifier chain.  This patch (as678) changes
    the notifier core to allow for such things.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bfe5d834195b3089b8846577311340376cc0f450
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Jun 25 05:47:14 2006 -0700

    [PATCH] Define __raw_get_cpu_var and use it
    
    There are several instances of per_cpu(foo, raw_smp_processor_id()), which
    is semantically equivalent to __get_cpu_var(foo) but without the warning
    that smp_processor_id() can give if CONFIG_DEBUG_PREEMPT is enabled.  For
    those architectures with optimized per-cpu implementations, namely ia64,
    powerpc, s390, sparc64 and x86_64, per_cpu() turns into more and slower
    code than __get_cpu_var(), so it would be preferable to use __get_cpu_var
    on those platforms.
    
    This defines a __raw_get_cpu_var(x) macro which turns into per_cpu(x,
    raw_smp_processor_id()) on architectures that use the generic per-cpu
    implementation, and turns into __get_cpu_var(x) on the architectures that
    have an optimized per-cpu implementation.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Acked-by: David S. Miller <davem@davemloft.net>
    Acked-by: Ingo Molnar <mingo@elte.hu>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6ceab8a936c302c0cea2bfe55617c76e2f5746fa
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Jun 25 05:47:13 2006 -0700

    [PATCH] random: remove redundant SA_SAMPLE_RANDOM from touchscreen drivers
    
    The core input layer is already calling add_input_randomness.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0f41a53a6699209216327cd4b506711610ad24c5
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Jun 25 05:47:12 2006 -0700

    [PATCH] random: change cpqarray to use add_disk_randomness
    
    Disk devices should use add_disk_randomness rather than SA_SAMPLE_RANDOM
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Cc: <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8bd0b97e95d378df57938d4773ad674194278ac1
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Jun 25 05:47:11 2006 -0700

    [PATCH] random: make CCISS use add_disk_randomness
    
    Disk devices should use the add_disk_randomness API rather than
    SA_SAMPLE_RANDOM.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Cc: <mike.miller@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afedfd016a78ea1b678886ab6236acbc7650fcfb
Author: Matt Mackall <mpm@selenic.com>
Date:   Sun Jun 25 05:47:11 2006 -0700

    [PATCH] random: remove SA_SAMPLE_RANDOM from floppy driver
    
    The floppy driver is already calling add_disk_randomness as it should, so this
    was redundant.
    
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 51849738cf3af4d2c43a657e811a89e7f69eccc2
Author: Rob Landley <rob@landley.net>
Date:   Sun Jun 25 05:47:10 2006 -0700

    [PATCH] bloat-o-meter: gcc-4 fix
    
    Upgrade scripts/bloat-o-meter to handle the names gcc 4 gives static
    symbols.
    
    Signed-off-by: Rob Landley <rob@landley.net>
    Signed-off-by: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f867d2a2e5f3f0ce6356f452cc27b70d577de7c7
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun Jun 25 05:47:09 2006 -0700

    [PATCH] ensure NULL deref can't possibly happen in is_exported()
    
    If CONFIG_KALLSYMS is defined and if it should happen that is_exported() is
    given a NULL 'mod' and lookup_symbol(name, __start___ksymtab,
    __stop___ksymtab) returns 0, then we'll end up dereferencing a NULL
    pointer.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Rusty Russell <rusty@rustcorp.com.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5474c120aafe78ca54bf272f7a01107c42da2b21
Author: Michael Hanselmann <linux-kernel@hansmi.ch>
Date:   Sun Jun 25 05:47:08 2006 -0700

    [PATCH] Rewritten backlight infrastructure for portable Apple computers
    
    This patch contains a total rewrite of the backlight infrastructure for
    portable Apple computers.  Backward compatibility is retained.  A sysfs
    interface allows userland to control the brightness with more steps than
    before.  Userland is allowed to upload a brightness curve for different
    monitors, similar to Mac OS X.
    
    [akpm@osdl.org: add needed exports]
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Richard Purdie <rpurdie@rpsys.net>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 17660bdd5c1f1a165273c1a59cb5b87670a81cc4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sun Jun 25 05:47:06 2006 -0700

    [PATCH] uml: remove dead declaration
    
    Became irrelevant when x86_64 unexported ia32_sys_call_table.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 200a3d352cd5e0ae8fb96bfcf8103f7b7c60645b
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:06 2006 -0700

    [PATCH] m68k: convert VME irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ebba61d5b05ecfda388dd4c156bafdb78d398055
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:05 2006 -0700

    [PATCH] m68k: convert sun3 irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 77dda339e512c729bb27abd452e6632465490986
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:05 2006 -0700

    [PATCH] m68k: convert q40 irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9c5f4afdfbe72d5d1c814ad7286a4524d00c7b96
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:04 2006 -0700

    [PATCH] m68k: convert mac irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35353bb8b869f3a0a153d0674cdafbe4f64aaa05
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:03 2006 -0700

    [PATCH] m68k: convert hp300 irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 734085651c9b80aa3f9e6027b156102de214a0b2
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:03 2006 -0700

    [PATCH] m68k: convert atari irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0aa78106c661cf6c251fd56e92f0c76a7459d244
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:02 2006 -0700

    [PATCH] m68k: convert apollo irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 74be8d0835f91f0f77a2f1554dfa7242f1f7b652
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:01 2006 -0700

    [PATCH] m68k: convert amiga irq code
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68387c448b7f2b3e2bfa0f606391cd3b602b1997
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:01 2006 -0700

    [PATCH] m68k: convert generic irq code to irq controller
    
    Convert the generic irq code to use irq controller, this gets rid of the
    machine specific callbacks and gives better control over irq handling without
    duplicating lots of code.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b5dc7840b3ebe9c7967dd8ba73db957767009ff9
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:00 2006 -0700

    [PATCH] m68k: introduce irq controller
    
    Introduce irq controller and use it to manage auto vector interrupts.
    Introduce setup_irq() which can be used for irq setup.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d174cfb0f2a8967433e157bae9c2d4dcdee5324
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:47:00 2006 -0700

    [PATCH] m68k: cleanup amiga irq numbering
    
    Fix amiga irq numbering, so they are after the generic IRQ_AUTO defines and
    remove the IRQ_AMIGA_AUTO defines.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4facfde9f1d7b8a61fb0017460da45e23e60115c
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:59 2006 -0700

    [PATCH] m68k: cleanup generic irq names
    
    Rename IRQ1..IRQ7 to IRQ_AUTO_1..IRQ_AUTO_7 and remove the duplicate
    defintions.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 92445eaaadc1f03f5a177ecc957bda76bf2ba8d5
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:58 2006 -0700

    [PATCH] m68k: separate handler for auto and user vector interrupt
    
    Use separate entry points for auto and user vector interrupts and cleanup
    naming a little.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2325ecebc5b7988fd49968bd3a660fd1594dc84
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:58 2006 -0700

    [PATCH] m68k: fix show_registers()
    
    Move some of the prints in die_if_kernel() to show_registers() and call that
    instead of show_stack(), so show_registers() prints now similiar info as other
    archs.  Clean up the function a little.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 742636f5bfd92ad67f4a48f4b7a2ac655797e0f3
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:57 2006 -0700

    [PATCH] m68k: dma API addition
    
    Additions to dma API with some small cleanups.
    
    Signed-off-by: Richard Hirst <rhirst@levanta.com>
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b035c96b2da7258bb2bba31812b5f9dda3499f00
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:56 2006 -0700

    [PATCH] m68k: Add the generic dma API functions
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3921ee21e01ac5faecda640daa6071dc8f0e29c9
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:56 2006 -0700

    [PATCH] m68k: small flush_icache() cleanup
    
    Make flush_icache() an inline function and clean it up a litte.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a7b1a1a3089aaf1168e3b68a40e98532063d7811
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:55 2006 -0700

    [PATCH] m68k: fix __iounmap for 030
    
    Ignore empty pmd entry during iomap (these are the holes between the
    mappings).
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6bf9f755c3f30c81df17fce7d2f8dda11b9516a4
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:54 2006 -0700

    [PATCH] m68k: fix constraints of the signal functions and some cleanup
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53617825ccf3ff8a71e6efcf3dcf58885ed6f3e5
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 25 05:46:53 2006 -0700

    [PATCH] m68k: fix uaccess.h for gcc-3.x
    
    gcc-3.x has a few problems detecting a constant parameter.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit caad3c2a15dfa2e0da8cf51a57c052372123483c
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Sun Jun 25 05:46:53 2006 -0700

    [PATCH] i386: cpu_relax() in crash.c and doublefault.c
    
    Add cpu_relax() to infinite loops in crash.c and doublefault.c.  This is
    the safest change.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 186989177e627c2571a3026d39ea1433e4ddc097
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Sun Jun 25 05:46:52 2006 -0700

    [PATCH] cpu_relax(): smpboot.c
    
    Add cpu_relax() to various smpboot.c init loops.  cpu_relax() always implies a
    barrier (according to Arjan), so remove those as well.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e75eac33b5c7f797e4b2ddcb39183cf268e26822
Author: Jeremy Fitzhardinge <jeremy@xensource.com>
Date:   Sun Jun 25 05:46:50 2006 -0700

    [PATCH] Clean up and refactor i386 sub-architecture setup
    
    Clean up and refactor i386 sub-architecture setup.
    
    This change moves all the code from the
    asm-i386/mach-*/setup_arch_pre/post.h headers, into
    arch/i386/mach-*/setup.c.  mach-*/setup_arch_pre.h is renamed to
    setup_arch.h, and contains only things which should be in header files.  It
    is purely code-motion; there should be no functional changes at all.
    
    Several functions in arch/i386/kernel/setup.c needed to be made non-static
    so that they're visible to the code in mach-*/setup.c.  asm-i386/setup.h is
    used to hold the prototypes for these functions.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
    Signed-off-by: Chris Wright <chrisw@sous-sol.org>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Cc: Christian Limpach <Christian.Limpach@cl.cam.ac.uk>
    Cc: Martin Bligh <mbligh@google.com>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Cc: Andrey Panin <pazke@donpac.ru>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6a1530d692d6a60cdf15dfbcfea07f5324d7b9f
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sun Jun 25 05:46:49 2006 -0700

    [PATCH] Allow migration of mlocked pages
    
    Hugh clarified the role of VM_LOCKED.  So we can now implement page
    migration for mlocked pages.
    
    Allow the migration of mlocked pages.  This means that try_to_unmap must
    unmap mlocked pages in the migration case.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b2259b3e53f128c10a9fded0965e69d4a949847
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sun Jun 25 05:46:48 2006 -0700

    [PATCH] page migration: Support a vma migration function
    
    Hooks for calling vma specific migration functions
    
    With this patch a vma may define a vma->vm_ops->migrate function.  That
    function may perform page migration on its own (some vmas may not contain page
    structs and therefore cannot be handled by regular page migration.  Pages in a
    vma may require special preparatory treatment before migration is possible
    etc) .  Only mmap_sem is held when the migration function is called.  The
    migrate() function gets passed two sets of nodemasks describing the source and
    the target of the migration.  The flags parameter either contains
    
    MPOL_MF_MOVE	which means that only pages used exclusively by
    		the specified mm should be moved
    
    or
    
    MPOL_MF_MOVE_ALL which means that pages shared with other processes
    		should also be moved.
    
    The migration function returns 0 on success or an error condition.  An error
    condition will prevent regular page migration from occurring.
    
    On its own this patch cannot be included since there are no users for this
    functionality.  But it seems that the uncached allocator will need this
    functionality at some point.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 68402ddc677005ed1b1359bbc1f279548cfc0928
Author: Christoph Lameter <clameter@sgi.com>
Date:   Sun Jun 25 05:46:47 2006 -0700

    [PATCH] mm: remove VM_LOCKED before remap_pfn_range and drop VM_SHM
    
    Remove VM_LOCKED before remap_pfn range from device drivers and get rid of
    VM_SHM.
    
    remap_pfn_range() already sets VM_IO.  There is no need to set VM_SHM since
    it does nothing.  VM_LOCKED is of no use since the remap_pfn_range does not
    place pages on the LRU.  The pages are therefore never subject to swap
    anyways.  Remove all the vm_flags settings before calling remap_pfn_range.
    
    After removing all the vm_flag settings no use of VM_SHM is left.  Drop it.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Acked-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f1a3cfcffaed2fbb3206179295c79ca8289f5c3
Author: Zach Brown <zach.brown@oracle.com>
Date:   Sun Jun 25 05:46:46 2006 -0700

    [PATCH] AOP_TRUNCATED_PAGE victims in read_pages() belong in the LRU
    
    AOP_TRUNCATED_PAGE victims in read_pages() belong in the LRU
    
    Nick Piggin rightly pointed out that the introduction of AOP_TRUNCATED_PAGE
    to read_pages() was wrong to leave A_T_P victim pages in the page cache but
    not put them in the LRU.  Failing to do so hid them from the VM.
    
    A_T_P just means that the aop method unlocked the page rather than
    performing IO.  It would be very rare that the page was truncated between
    the unlock and testing A_T_P.  So we leave the pages in the LRU for likely
    reuse soon rather than backing them back out of the page cache.  We do this
    by matching the behaviour before the A_T_P introduction which added pages
    to the LRU regardless of what ->readpage() did.
    
    This doesn't include the unrelated cleanup in Nick's initial fix which
    changed read_pages() to return void to match its only caller's behaviour of
    ignoring errors.
    
    Signed-off-by: Nick Piggin <nickpiggin@yahoo.com.au>
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09a9a45dc62fef5f46a0dc98a3cefdb464cc4aaa
Author: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date:   Sun Jun 25 05:46:44 2006 -0700

    [PATCH] ieee1394: nodemgr: do not peek into struct semaphore
    
    Also revert patch "frv: ieee1394 is borken on frv", as it no longer is.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: David Howells <dhowells@redhat.com>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fb1bb34d45400f12e0a33f8c487b3795674908a7
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:46:43 2006 -0700

    [PATCH] remove for_each_cpu()
    
    Convert a few stragglers over to for_each_possible_cpu(), remove
    for_each_cpu().
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e48275adc8c94c3281e646c8beb829f8e6f5bfc
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 05:46:42 2006 -0700

    [PATCH] more for_each_cpu() removal
    
    It's going away.
    
    I wonder if this code really meant to iterate across not-present, not-online
    CPUs.
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f90f00a358fe887fe5c3454897521064bdace7cc
Author: Steve French <sfrench@us.ibm.com>
Date:   Sun Jun 25 15:59:32 2006 +0000

    [CIFS] Fix compile warning when CONFIG_CIFS_EXPERIMENTAL is off
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit bbe5d235ee201705530a7153b57e141cd77d818b
Merge: 189acaa... dfd8317...
Author: Steve French <sfrench@us.ibm.com>
Date:   Sun Jun 25 15:57:32 2006 +0000

    Merge with /pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 801194e3bcf7cde163b23c6279c559e69cb4ca57
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 25 12:01:48 2006 +0100

    [ARM] Remove MODE_(SVC|IRQ|FIQ|USR) and DEFAULT_FIQ
    
    DEFAULT_FIQ was entirely unused.  MODE_* are just redefinitions
    of *_MODE.  Use *_MODE instead.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 76a9f26c9e40e9c0ed5dc8f0cedd74e733f0088d
Merge: 9bf2aa1... dfd8317...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sun Jun 25 06:44:44 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit 9bf2aa129a107a0e9e2a5318d35aca731ae7e666
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jun 25 02:41:28 2006 -0700

    nfs: remove nfs_put_link()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6ab86aa13045e7f6742af0b3c3c45f952f9fbb8d
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 02:41:27 2006 -0700

    nfs-build-fix-99
    
    fs/built-in.o:(__param+0x20): undefined reference to `nfs_idmap_cache_timeout'
    fs/built-in.o:(__param+0x48): undefined reference to `nfs_callback_set_tcpport'
    
    Cc: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Andreas Gruenbacher <agruen@suse.de>
    Cc: Andy Adamson <andros@citi.umich.edu>
    Cc: Chuck Lever <cel@netapp.com>
    Cc: David Howells <dhowells@redhat.com>
    Cc: J. Bruce Fields <bfields@fieldses.org>
    Cc: Manoj Naik <manoj@almaden.ibm.com>
    Cc: Marc Eshel <eshel@almaden.ibm.com>
    Cc: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d75d54147db9db5194040bd1c5022df6ba36ee48
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun Jun 25 02:41:26 2006 -0700

    git-nfs-build-fixes
    
    Fix various problems with nfs4 disabled.  And various other things.
    
    In file included from fs/nfs/inode.c:50:
    fs/nfs/internal.h:24: error: static declaration of 'nfs_do_refmount' follows non-static declaration
    include/linux/nfs_fs.h:320: error: previous declaration of 'nfs_do_refmount' was here
    fs/nfs/internal.h:65: warning: 'struct nfs4_fs_locations' declared inside parameter list
    fs/nfs/internal.h:65: warning: its scope is only this definition or declaration, which is probably not what you want
    fs/nfs/internal.h: In function 'nfs4_path':
    fs/nfs/internal.h:97: error: 'struct nfs_server' has no member named 'mnt_path'
    fs/nfs/inode.c: In function 'init_once':
    fs/nfs/inode.c:1116: error: 'struct nfs_inode' has no member named 'open_states'
    fs/nfs/inode.c:1116: error: 'struct nfs_inode' has no member named 'delegation'
    fs/nfs/inode.c:1116: error: 'struct nfs_inode' has no member named 'delegation_state'
    fs/nfs/inode.c:1116: error: 'struct nfs_inode' has no member named 'rwsem'
    distcc[26452] ERROR: compile fs/nfs/inode.c on g5/64 failed
    make[1]: *** [fs/nfs/inode.o] Error 1
    make: *** [fs/nfs/inode.o] Error 2
    make: *** Waiting for unfinished jobs....
    In file included from fs/nfs/nfs3xdr.c:26:
    fs/nfs/internal.h:24: error: static declaration of 'nfs_do_refmount' follows non-static declaration
    include/linux/nfs_fs.h:320: error: previous declaration of 'nfs_do_refmount' was here
    fs/nfs/internal.h:65: warning: 'struct nfs4_fs_locations' declared inside parameter list
    fs/nfs/internal.h:65: warning: its scope is only this definition or declaration, which is probably not what you want
    fs/nfs/internal.h: In function 'nfs4_path':
    fs/nfs/internal.h:97: error: 'struct nfs_server' has no member named 'mnt_path'
    distcc[26486] ERROR: compile fs/nfs/nfs3xdr.c on g5/64 failed
    make[1]: *** [fs/nfs/nfs3xdr.o] Error 1
    make: *** [fs/nfs/nfs3xdr.o] Error 2
    In file included from fs/nfs/nfs3proc.c:24:
    fs/nfs/internal.h:24: error: static declaration of 'nfs_do_refmount' follows non-static declaration
    include/linux/nfs_fs.h:320: error: previous declaration of 'nfs_do_refmount' was here
    fs/nfs/internal.h:65: warning: 'struct nfs4_fs_locations' declared inside parameter list
    fs/nfs/internal.h:65: warning: its scope is only this definition or declaration, which is probably not what you want
    fs/nfs/internal.h: In function 'nfs4_path':
    fs/nfs/internal.h:97: error: 'struct nfs_server' has no member named 'mnt_path'
    distcc[26469] ERROR: compile fs/nfs/nfs3proc.c on bix/32 failed
    make[1]: *** [fs/nfs/nfs3proc.o] Error 1
    make: *** [fs/nfs/nfs3proc.o] Error 2
    **FAILED**
    
    Cc: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Andreas Gruenbacher <agruen@suse.de>
    Cc: Andy Adamson <andros@citi.umich.edu>
    Cc: Chuck Lever <cel@netapp.com>
    Cc: David Howells <dhowells@redhat.com>
    Cc: J. Bruce Fields <bfields@fieldses.org>
    Cc: Manoj Naik <manoj@almaden.ibm.com>
    Cc: Marc Eshel <eshel@almaden.ibm.com>
    Cc: Trond Myklebust <Trond.Myklebust@netapp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 405040a78b33e39edf4180fc993b9608f07d3c41
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 25 11:37:09 2006 +0100

    [ARM] Remove save_lr/restore_pc macros
    
    As for RETINSTR/LOADREGS macros, these were for compatibility
    with 26-bit ARMs.  No longer required, so remove them.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 800d8b5c4b322798414100c253524aaf1bb9cb86
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 25 11:31:22 2006 +0100

    [ARM] Remove partial non-v6 binutils compatibility
    
    proc-v6 contains some compatibility to be able to use the V6
    "cps" instruction.  However, the kernel makes use of this
    instruction elsewhere extensively, so there's no point keeping
    this compatibility anymore.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ccf01ef7aa9c6c293a1c64c27331a2ce227916ec
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sun Jun 25 06:27:31 2006 -0400

    Merge branch 'odirect'

commit 1b93a71755f2b15450b3e3045dab58a633e37b18
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 25 11:23:45 2006 +0100

    [ARM] Remove LOADREGS macro
    
    As for RETINSTR, LOADREGS is a left-over from the 26-bit days.
    Remove it.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7999d8d7a611bee902446939952859caf1367c25
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 25 11:17:23 2006 +0100

    [ARM] Remove RETINSTR macro
    
    RETINSTR is a left-over from the days when we had 26-bit and
    32-bit CPU support integrated into the same tree.  Since this
    is no longer the case, we can now remove RETINSTR.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7477ddaa4d2d69bbcd49e12990af158dbb03f2f2
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 21 01:29:38 2006 -0300

    V4L/DVB (4210b): git-dvb: tea575x-tuner build fix
    
    In file included from sound/i2c/other/tea575x-tuner.c:30:
    include/sound/tea575x-tuner.h:36: error: field 'vd' has incomplete type
    include/sound/tea575x-tuner.h:37: error: field 'fops' has incomplete type
    sound/i2c/other/tea575x-tuner.c:89: warning: 'struct inode' declared inside parameter list
    sound/i2c/other/tea575x-tuner.c:89: warning: its scope is only this definition or declaration, which is probably not what you want
    sound/i2c/other/tea575x-tuner.c: In function 'snd_tea575x_ioctl':
    sound/i2c/other/tea575x-tuner.c:91: warning: implicit declaration of function 'video_devdata'
    sound/i2c/other/tea575x-tuner.c:91: warning: initialization makes pointer from integer without a cast
    sound/i2c/other/tea575x-tuner.c:92: warning: implicit declaration of function 'video_get_drvdata'
    sound/i2c/other/tea575x-tuner.c:92: warning: initialization makes pointer from integer without a cast
    sound/i2c/other/tea575x-tuner.c:96: warning: implicit declaration of function '_IOR'
    sound/i2c/other/tea575x-tuner.c:96: error: syntax error before 'struct'
    sound/i2c/other/tea575x-tuner.c:99: error: 'v' undeclared (first use in this function)
    sound/i2c/other/tea575x-tuner.c:99: error: (Each undeclared identifier is reported only once
    sound/i2c/other/tea575x-tuner.c:99: error: for each function it appears in.)
    sound/i2c/other/tea575x-tuner.c:108: warning: implicit declaration of function 'copy_to_user'
    sound/i2c/other/tea575x-tuner.c:112: warning: implicit declaration of function '_IOWR'
    sound/i2c/other/tea575x-tuner.c:112: error: syntax error before 'struct'
    sound/i2c/other/tea575x-tuner.c:115: warning: implicit declaration of function 'copy_from_user'
    sound/i2c/other/tea575x-tuner.c: At top level:
    sound/i2c/other/tea575x-tuner.c:129: error: syntax error before 'case'
    sound/i2c/other/tea575x-tuner.c:146: warning: type defaults to 'int' in declaration of 'snd_tea575x_set_freq'
    sound/i2c/other/tea575x-tuner.c:146: warning: parameter names (without types) in function declaration
    sound/i2c/other/tea575x-tuner.c:146: error: conflicting types for 'snd_tea575x_set_freq'
    sound/i2c/other/tea575x-tuner.c:62: error: previous definition of 'snd_tea575x_set_freq' was here
    sound/i2c/other/tea575x-tuner.c:146: warning: data definition has no type or storage class
    sound/i2c/other/tea575x-tuner.c:147: error: syntax error before 'return'
    sound/i2c/other/tea575x-tuner.c:151: error: syntax error before '&' token
    sound/i2c/other/tea575x-tuner.c:152: error: syntax error before '.' token
    sound/i2c/other/tea575x-tuner.c:152: warning: type defaults to 'int' in declaration of 'strcpy'
    sound/i2c/other/tea575x-tuner.c:152: warning: function declaration isn't a prototype
    sound/i2c/other/tea575x-tuner.c:152: error: conflicting types for 'strcpy'
    sound/i2c/other/tea575x-tuner.c:152: warning: data definition has no type or storage class
    sound/i2c/other/tea575x-tuner.c: In function 'snd_tea575x_init':
    sound/i2c/other/tea575x-tuner.c:194: warning: implicit declaration of function 'video_set_drvdata'
    sound/i2c/other/tea575x-tuner.c:197: error: 'video_exclusive_open' undeclared (first use in this function)
    sound/i2c/other/tea575x-tuner.c:198: error: 'video_exclusive_release' undeclared (first use in this function)
    sound/i2c/other/tea575x-tuner.c:200: warning: implicit declaration of function 'video_register_device'
    sound/i2c/other/tea575x-tuner.c:200: error: 'VFL_TYPE_RADIO' undeclared (first use in this function)
    sound/i2c/other/tea575x-tuner.c: In function 'snd_tea575x_exit':
    sound/i2c/other/tea575x-tuner.c:215: warning: implicit declaration of function 'video_unregister_device'
    distcc[7333] ERROR: compile sound/i2c/other/tea575x-tuner.c on x/32 failed
    make[1]: *** [sound/i2c/other/tea575x-tuner.o] Error 1
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a50d913f48b21aa22d31469e953fd6428540bf5b
Author: Andrew Morton <akpm@osdl.org>
Date:   Wed Jun 21 01:57:39 2006 -0300

    V4L/DVB (4210a): git-dvb versus matroxfb
    
    drivers/video/matrox/matroxfb_base.c: In function 'matroxfb_ioctl':
    drivers/video/matrox/matroxfb_base.c:1140: error: 'VIDIOC_S_CTRL_OLD' undeclared (first use in this function)
    drivers/video/matrox/matroxfb_base.c:1140: error: (Each undeclared identifier is reported only once                                                             drivers/video/matrox/matroxfb_base.c:1140: error: for each function it appears in.)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b3bd5be8d4a3502898a561e8fa43febe04b6ff50
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jun 24 08:20:05 2006 -0300

    V4L/DVB (4209): Added some BTTV PCI IDs for newer boards
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b57e5578f913a304e97cb66aa0044a894ca47f2f
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jun 23 16:13:56 2006 -0300

    Fixes some sync issues between V4L/DVB development and GIT
    
    Some changes didn't went ok to -git, probably due to changes at merging
    patches.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 45f87a21735804760dd7db0e2e3c609c332b15e3
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Jun 22 21:47:07 2006 -0300

    V4L/DVB (4206): Cx88-blackbird: always set encoder height based on tvnorm->id
    
    Removed the switch..case block in blackbird_probe for setting encoder height
    based on video standard. All blackbird devices can rely on tvnorm->id to
    retrieve this information from the cx2388x video decoder - tuner_formats
    should not be used to determine the encoding video standard.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 153962364dc6fa4a24571885fbe76506d8968610
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jun 23 16:13:56 2006 -0300

    V4L/DVB (4205): Merge tda9887 module into tuner.
    
    Most uses a tda988[5/6/7] IF demodulator as part of the device.
    Having this as a separate stuff makes harder to configure it, since there
    are some tda9887 options that are tuner-dependent and should be bound into
    tuner-types structures.
    This patch merges tda9887 module into tuner. More work is required to make
    tuner-types to properly use it.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0ccac4af1a8f22e2e96d89b9bf8766dc7286a972
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Fri Jun 23 15:52:50 2006 -0300

    V4L/DVB (4203): Explicitly set the enum values.
    
    It's better to use explicit enums. It reduces the chance of someone
    inserting new enums in the middle which would break things.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 45ad9f8b44b06bf1e91b4b3c338406c2233f0482
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Wed Jun 21 17:04:13 2006 -0300

    V4L/DVB (4202): allow selecting CX2341x port mode
    
    CX2341X port was always set to 'memory', but 'streaming' is also possible
    
    ivtv uses the memory (DMA) interface with the CX2341X, while pvrusb2 and
    cx88-blackbird use the streaming interface. This setting is now selectable
    by the driver.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 54aa9a21ca03cf41d911ada969e86f27ce58bab9
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jun 19 18:00:06 2006 -0300

    V4L/DVB (4200): Disable bitrate_mode when encoding mpeg-1.
    
    MPEG-1 always uses CBR, so make the BITRATE_MODE control inactive.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cc7bc648690d4e6f3992cfadb18a4c7e0181e6ea
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Mon Jun 19 17:53:08 2006 -0300

    V4L/DVB (4199): Add cx2341x-specific control array to cx2341x.c
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f81cf7533b4b8411a0d2fa943adcede340dfdab6
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 16:54:20 2006 -0300

    V4L/DVB (4198): Avoid newer usages of obsoleted experimental MPEGCOMP API
    
    Put old MPEGCOMP API under #if __KERNEL__ and issue warnings when used.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 86b79d662453b0f0107d03cc939dd737d6076436
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 16:40:10 2006 -0300

    V4L/DVB (4197): Port new MPEG API to saa7134-empress with saa6752hs
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f022156b33ffa32c26a86540fe4f6fe56cff0963
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 16:11:06 2006 -0300

    V4L/DVB (4196): Port cx88-blackbird to the new MPEG API.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 54f577b7f46f48b8bea0bd5eb8c42d711b3e006f
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 14:56:12 2006 -0300

    V4L/DVB (4193): Update cx2341x fw encoding API doc.
    
    Based on recent tests it turned out that some features are not implemented.
    This has now been documented.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 18318e00040e0a5c783f6d79c136c2141b779dbd
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 14:49:52 2006 -0300

    V4L/DVB (4192): Use control helpers for saa7115, cx25840, msp3400.
    
    Replace hardcoded control description by the standard ones supplied
    by v4l2-common.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5d1a9ae6d9d7fc14b2259cd550eb87364a21190a
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 14:40:30 2006 -0300

    V4L/DVB (4191): Add CX2341X MPEG encoder module.
    
    Adds the cx2341x.c module that handles the programming of the Conexant
    cx23415/6 MPEG encoder chip used by cx88-blackbird, pvrusb2 and ivtv.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9cb2318b885d2039eeb3eb5394fa215046be058f
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 14:11:08 2006 -0300

    V4L/DVB (4190): Add helper functions for control processing to v4l2-common.
    
    Control processing is often duplicated in the various drivers. Unfortunately,
    simple things like the names of controls are often different between drivers,
    even though it is the same controls. Adding in the new extended controls and
    the need for having control helper functions became apparent.
    Several functions have now been added to v4l2-common to do things like
    filling the v4l2_queryctrl and v4l2_querymenu structs, to check for
    valid control input and to move to the next control when enumerating
    over all controls.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0597691456cf3b08974d9949e4caa830e1d3c520
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 13:43:28 2006 -0300

    V4L/DVB (4189): Add videodev support for VIDIOC_S/G/TRY_EXT_CTRLS.
    
    videodev.c copies the control list specified in struct v4l2_ext_controls
    to kernel space.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4f341712120abde54d9113856e9118e6580d7061
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Jun 18 13:27:19 2006 -0300

    V4L/DVB (4188): Add new MPEG control/ioctl definitions to videodev2.h
    
    The old, experimental, VIDIOC_S/G_CODEC API to pass MPEG parameters is now
    obsolete and is replaced by 'extended controls' which offer more flexibility
    and are hopefully more future proof.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 442d15d5d8ba6a39d0c883585d68503e949a2fe1
Author: Cameron Hutchinson <camh@xdna.net>
Date:   Wed Jun 21 18:45:31 2006 -0300

    V4L/DVB (4186): Add support for the DNTV Live! mini DVB-T card.
    
    Signed-off-by: Cameron Hutchinson <camh@xdna.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ceee526617a805eea908a59fced26635634c9035
Author: Yeasah Pell <yeasah@schwide.net>
Date:   Wed Jun 21 18:28:13 2006 -0300

    V4L/DVB (4185): Conditionally enable 5 byte diseqc commands
    
    Signed-off-by: Yeasah Pell <yeasah@schwide.net>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9ce8b68fc036275986f005b38660d5d1795af8e8
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Jun 21 18:06:34 2006 -0300

    V4L/DVB (4184): Static variables mustn't be EXPORT_SYMBOL 'ed
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1fd57f60f81147dc70f8249da62af48fe451f2b1
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 17:03:42 2006 -0300

    V4L/DVB (4182): Comment out MMI functions for now
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1f19456d9760431f3a888b21fff035f875ddd189
Author: Henrik Sjoberg <hsjo@epact.se>
Date:   Wed Jun 21 16:33:21 2006 -0300

    V4L/DVB (4181): Fix CA Info and Application Info
    
    Signed-off-by: Henrik Sjoberg <hsjo@epact.se>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3e357fd8a29cbcf91badd2a6d3b8ef5d4cb05025
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 15:06:49 2006 -0300

    V4L/DVB (4180): Initial go at MMI
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cdd4208c059e01d4cdc10a538bbbebbb60aa9b9f
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:41:45 2006 -0300

    V4L/DVB (4179): VLF fixes for DCT
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7ef53b1ab739b09a39271998ab14605769697292
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:41:41 2006 -0300

    V4L/DVB (4178): Replace NEWTUNE with TS188
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 63ad4e445d683fc1bee748171a7fcb589546bf04
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:41:37 2006 -0300

    V4L/DVB (4177): DCTNEW and ATSC fixes
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 77e0be12100a3d40abfa46ef54c323b6cfff41ed
Author: Sigmund Augdal Helberg <sigmund@snap.tv>
Date:   Wed Jun 21 10:35:48 2006 -0300

    V4L/DVB (4176): Bug-fix: Fix memory overflow
    
    Do not overflow kernel memory when more than BT878_MAX devices are
    present.
    
    Signed-off-by: Sigmund Augdal Helberg <sigmund@snap.tv>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b32474cb8341bb828f2c2800d5dd615b7cd02182
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:31 2006 -0300

    V4L/DVB (4175): Fix a bug in tuner detection
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit de1e6ec9f21ebd65d779524b614307291228a623
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:27 2006 -0300

    V4L/DVB (4174): Distinguish between STV0299 and MB86A15 based NIM's
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9500c7b05b1a618a32d49a249c28c98bcb039e35
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:23 2006 -0300

    V4L/DVB (4173): Dprintk macro beautification
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6cd94745fb3b97fb6ecd730c0aa9d1fb4fdf9c10
Author: Sigmund Augdal Helberg <sigmund@snap.tv>
Date:   Wed Jun 21 10:28:19 2006 -0300

    V4L/DVB (4172): Remove spurious newlines in dprintk's. Add dst(card-num) as prefix in dprintk
    
    Signed-off-by: Sigmund Augdal Helberg <sigmund@snap.tv>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5aef20aeff7e9b0741ecc80365a3f7416900e494
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:16 2006 -0300

    V4L/DVB (4171): Fix Daughterboard detection
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3da2f4c0c64f4267594016c7bda3cc13fe7c95fb
Author: Bryan Scott <sirbryan@gmail.com>
Date:   Wed Jun 21 10:28:12 2006 -0300

    V4L/DVB (4170): ATSC typecheck bugfix
    
    Signed-off-by: Bryan Scott <sirbryan@gmail.com>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4e7024bd3278f14fdc435e6ff11c37cee752de99
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:09 2006 -0300

    V4L/DVB (4169): Add more Firmware and Tuner names
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1da5e8d3cf561508ddbc62283e65dc079d750550
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:05 2006 -0300

    V4L/DVB (4168): ATSC tuner doesn't have variable length field
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 364f255af783a105b262eae018f0cad68e186681
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:28:01 2006 -0300

    V4L/DVB (4167): Add Board Names
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 351634d27a90a7668554452f4ba1688043aa1128
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:57 2006 -0300

    V4L/DVB (4166): Fix string length
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b633c6d6a39a1cb78091fb04f093b16bdf8cbf59
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:53 2006 -0300

    V4L/DVB (4165): Add in tuner names
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 396cffd63ed460ae2544d62745fabd22296af99a
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:49 2006 -0300

    V4L/DVB (4164): Add DVB-S specific demod names
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1c4e7339e55af69bad55eb9a8f9d5b03a552020b
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:46 2006 -0300

    V4L/DVB (4163): Initialize ATSC frontend
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c65f1c57094273144c614dc9f199c5decf7d27db
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:40 2006 -0300

    V4L/DVB (4162): Explicit defining of type is not necessary with MULTI_FE
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cdd393ccbf99c0465b1db0b3f5a5687fb1340250
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:36 2006 -0300

    V4L/DVB (4161): Utilize the device specific algorithm callbacks
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0249ef16fa1eb4a85411d0e1b6e6a906e26ed1ac
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:31 2006 -0300

    V4L/DVB (4160): Use device specific algorithms
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8cfba6301c3c7e0d3332e237b99fefc0db001163
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:26 2006 -0300

    V4L/DVB (4159): Implement tuning algorithm as a module parameter
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2e506a0faff0caa62e4c9531611684ff61cf1ca4
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:20 2006 -0300

    V4L/DVB (4158): Make ASIC RESET Conditional
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ed3d1065a4aa7b1e8e5d35ece0eeeafa5bfa6bd1
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:15 2006 -0300

    V4L/DVB (4157): Add support for VP-3250 ATSC card
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit bc7386ba43c4e06e1fdf150c37ea6cbd778fb00c
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:05 2006 -0300

    V4L/DVB (4156): Add basic ATSC support to DST
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4821fb1d8447a5786ea12c861b4ab5f69d400bfa
Author: Manu Abraham <abraham.manu@gmail.com>
Date:   Wed Jun 21 10:27:00 2006 -0300

    V4L/DVB (4155): ATSC frontend support
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit bafefc0cf8e4b34fbb159ea2e2aef2358ebff935
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 13:27:36 2006 -0300

    V4L/DVB (4154): Fix use-after-free bug in cpia2 driver
    
    The coverity checker detected a use-after-free error in
    drivers/media/video/cpia2/cpia2_v4l.c::cpia2_close() (coverity
    error #1281).
    What happens is that we lock cam->busy_lock, then proceed to free
    resources, and in the case of (--cam->open_count == 0) we finish off by
    doing a kfree(cam) and then at the end of the function we do a
    mutex_unlock(&cam->busy_lock) which will explode since it'll dereference
    the free'd `cam' :
    ...
    mutex_lock(&cam->busy_lock);
    ...
    if (--cam->open_count == 0) {
        ...
        if (!cam->present) {
            video_unregister_device(dev);
            kfree(cam);
        }
    }
    mutex_unlock(&cam->busy_lock);   <--- PROBLEM, cam no longer around.
    ...
    Since this only happens in the case of open_count going down to zero I
    don't see a problem with just releasing the mutex after unregistering the
    device and just before the kfree().  In this case there is nothing around
    that we can race against; we are in the release method, open_count is zero,
    (!cam->present) and the device has just been unregistered, so letting go of
    the mutex at this point looks safe to me.
    Patch below to implement that solution.
    Acked-by: Randy Dunlap <rdunlap@xenotime.net>
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7597e8e71f897449a26d5a32eedc09f8e76ae52a
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Jun 22 23:13:06 2006 -0300

    V4L/DVB (4150): Cx88: clear EN_I2SIN_ENABLE bit for ASUS PVR-416 to enable audio
    
    clear EN_I2SIN_ENABLE bit for ASUS PVR-416 to enable audio
    streaming in both raw video and blackbird mpeg encoder modes.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ec675bce403b46570e6ab93eb9a226e966de1010
Author: Dave Jones <davej@redhat.com>
Date:   Fri Jun 23 09:01:42 2006 -0300

    V4L/DVB (4149): Fix up funky logic in dvb
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c18cb01ca139716a39f4fb92286b6096e8b3f968
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri Jun 23 07:05:22 2006 -0300

    V4L/DVB (4148): Fix userbits debug prints
    
    Previously, it were showing the pointer value, instead of
    the setted bits.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b20c3cf0c225df1445fa220de175b8d9bc1c3659
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 06:49:34 2006 -0300

    V4L/DVB (4147): Drivers/media/video/pwc/: make code static
    
    This patch makes the following needlessly global code static:
    - pwc-ctrl.c: pwc_get_leds()
    - pwc_preferred_compression
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dc46ace15e50cb8af3f3072c00aaf3429770b0e2
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 06:42:44 2006 -0300

    V4L/DVB (4146): Drivers/media/video/vivi.c: make 2 functions static
    
    Make two needlessly global functions static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 65271bff0fb11557d04d389df728d12dfba75dc3
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Wed Jun 21 16:04:33 2006 -0300

    V4L/DVB (4144): Cx88: add support for FusionHDTV 3 Gold (original revision)
    
    Add support for FusionHDTV 3 Gold (original revision), using the
    card definition for FusionHDTV3 Gold-Q
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1138ead47c4cb367cdb8fe6e41724eac0aa3a60b
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 19 09:54:00 2006 -0300

    V4L/DVB (4135): Cx88-tvaudio.c must #include <linux/config.h>
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b63535f4058eca81b64485c885610008784d2bb0
Author: Ricardo Cerqueira <v4l@cerqueira.org>
Date:   Sun Jun 18 00:21:49 2006 -0300

    V4L/DVB (4132): Don't kill cx88 DMA sound on channel change
    
    There's a call at cx88-tvaudio to reset DMA sound on channel change; that
    call was killing cx88-alsa whenever the channel was changed, resulting
    in no sound. Remove those calls if cx88-alsa is selected to be compiled.
    
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0f4b56807b443927600112c1351a181ce664929c
Author: Ricardo Cerqueira <v4l@cerqueira.org>
Date:   Sun Jun 18 00:19:22 2006 -0300

    V4L/DVB (4131): Fix cx88-alsa vs IRQ remote conflict
    
    cx88-alsa was resetting the card on load, causing the IRQ IR handler
    to go away (maybe others, too). There's no actual need to reset the
    card, though, so that line was removed
    
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c2eaa68f7950ef51ce480766bc11eb8b3c20c90a
Author: Ricardo Cerqueira <v4l@cerqueira.org>
Date:   Sun Jun 18 00:17:35 2006 -0300

    V4L/DVB (4130): Fix card cx88 #50 remote
    
    There was an unmasked bit in the keycodes that was causing random
    behaviour (the code could be N or N+1). Masked that bit now.
    
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8ca4deb259f17a9a209030baa36aca39ec03ceaf
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jun 20 15:56:02 2006 -0300

    V4L/DVB (4124): Kconfig: fix description for saa7115 module
    
    This Kconfig description is incorrect, due to a previous merge a while back.
    CONFIG_SAA711X builds module saa7115, which is the newer module, and is
    not obsoleted.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 87057d29f84b031f2e84ac78be5caa51a96f678e
Author: Mac Michaels <wmichaels@earthlink.net>
Date:   Tue Jun 20 09:18:13 2006 -0300

    V4L/DVB (4122): Lgdt330x: fix missing line in VSB snr decoding logic
    
    - fix missing line in VSB snr decoding logic for lgdt3303
    
    Signed-off-by: Mac Michaels <wmichaels@earthlink.net>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cebdd4136d704f9afeb67e9685dfd398a6a2e655
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jun 20 09:17:48 2006 -0300

    V4L/DVB (4121): Update cardlist documentation
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5e2fb0824a5aa42c8d1b1b177ab287e84685be39
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Tue Jun 20 15:03:19 2006 -0300

    V4L/DVB (4120): Ovcamship position at Kconfig changed
    
    Ovcamship is used only on some USB webcams (OV511 and W9968CF)
    Bettet to leave this item just after those webcams.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 657de3cd32285831a56f9f96deb85c64205c42fc
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jun 20 00:30:57 2006 -0300

    V4L/DVB (4118): Whitespace cleanups
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f49ba8d7cd252eac19004e2ebe18dfffe548c2c3
Author: Zac Bowling <zac@zacbowling.com>
Date:   Mon Jun 19 19:49:20 2006 -0300

    V4L/DVB (4115): Saa7134 card (LifeView3000 NTSC)
    
    Add detection for the LifeView3000 NTSC model (right now the PAL version is
    the only one in there, which is sort of annoying for me living in the US
    and all..  sigh...)
    This is one of those things that I like to classify "as a works for me so
    take it or leave it" :-) .  Not that worried because its an $18 video
    capture card that didn't look it was selling to well in the US, but then
    again who knows.
    The documentation needs updating too I bet but its behind anyways usually
    to what is in the code.
    
    Signed-off-by: Zac Bowling <zac@zacbowling.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4ceb04e1b1cf724b6ed805955adfbbdfa8a3d436
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jun 17 08:52:30 2006 -0300

    V4L/DVB (4112): Fix: videodev.c were cleaning the pointer, not the values
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 35a303b1d788623939756136d85aecccf2d82686
Author: Jose Alberto Reguero <jareguero@telefonica.net>
Date:   Sat Jun 17 08:05:41 2006 -0300

    V4L/DVB (4110): Small bug in saa7127.c
    
    Fix wrong wss debug info.
    
    Signed-off-by: Jose Alberto Reguero <jareguero@telefonica.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 89a58c83f8f1056583f30c4d4258b1fec39bb0e2
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Jun 17 07:57:03 2006 -0300

    V4L/DVB (4108): Fixes some userspace dependencies at V4L2 public api header
    
    Make life easier for distro guys, by removing the need of including
    at the userspace header.
    Also, linux/compiler.h is not needed at userspace.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5dab71b1e85356fdd7cbc29d338ca6c0bd0e4e49
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Sat Jun 17 07:48:03 2006 -0300

    V4L/DVB (4106): Fix problems with AV7110 firmware building
    
    Fix missing $() on variable name in dvb/ttpci/Makefile
    Fix AV7110 firmware dependencies so that parallel builds work correctly.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 81e47e33add6874dc0ee094bd2a672241cbba829
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Jun 20 01:26:39 2006 -0300

    V4L/DVB (4105): Remove uneeded prototype
    
    Uneeded extern prototype is removed, as the function is
    prototyped at media/v4l2-common.h.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 44f7f2b363a33e20ba9812e4a5c16fa7cc07a3ee
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Sat Jun 17 07:46:31 2006 -0300

    V4L/DVB (4104): Default "yes", no.  default y, yes.
    
    The Kernel config programs expect 'default y' and don't understand
    'default "yes"'.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0f102910de010bb877cb6b37557b4e7b98b1039d
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 12 14:18:26 2006 -0300

    V4L/DVB (4099): Cx88-dvb: clean up long linewraps
    
    This patch splits up dvb_pll_attach and isl6421_attach function calls
    such that the lines do not exceed 80 columns. This patch is purely cosmetic,
    with no functional change at all.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c2af3cd68e0680a659166d0cecc24afb93b2000e
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 12 14:06:22 2006 -0300

    V4L/DVB (4098): Cx88: #ifdef cleanups
    
    - moved CX88_BOARD_DVICO_FUSIONHDTV_DVB_T_DUAL frontend_attach code up
      to share the #ifdef block with CX88_BOARD_DVICO_FUSIONHDTV_DVB_T_PLUS
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 66dd0fccbdbb77db897dd5870a67cb8022899adc
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 12 13:41:47 2006 -0300

    V4L/DVB (4097): Cx88: add support for DViCO FusionHDTV DVB-T Dual PCI based on zl10353
    
    This patch adds support for a newer version of this device
    using the zl10353 frontend instead of the mt352 frontend.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fd174c67253505d6af4a32c6e3d7ec8cbaed320d
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Jun 12 13:40:37 2006 -0300

    V4L/DVB (4096): CinergyT2: whitespace cleanup
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c9ce394017162a90d79a4abc99eed3c7b2aed606
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Jun 11 04:24:31 2006 -0300

    V4L/DVB (4094): Cxusb: add support for DViCO FusionHDTV DVB-T Dual USB based on zl10353
    
    This patch adds support for a newer version of this device
    using the zl10353 frontend instead of the mt352 frontend.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f14ac0bc455a255c48f9110080e8889c6d65cec2
Author: Jelle Foks <jelle@foks.8m.com>
Date:   Thu Mar 9 17:44:07 2006 -0300

    V4L/DVB (3426): PATCH cx88-mpeg: cx8802_restart_queue() for blackbird
    
    Fixes "cx8802_restart_queue: queue is empty" storm in syslog
    
    Signed-off-by: Jelle Foks <jelle@foks.8m.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 774dd5d9bdcbfe2efb3425e8a0be0b4d01a65c26
Author: Axel Dyks <xl@xlsigned.net>
Date:   Sun Jun 11 17:14:35 2006 -0300

    V4L/DVB (4090): Fix cinergyt2_poll() to allow non-blocking IO on frontend
    
    cinergyt2_poll()" shouldn't return (POLLIN | POLLRDNORM | POLLPRI) when
    there are no pending events. User space programs that do non-bocking IO
    using "select()" and/or "poll()" would otherwise produce high system load.
    Acked-by: Andreas Oberritter <obi@linuxtv.org>
    
    Signed-off-by: Axel Dyks <xl@xlsigned.net>
    Acked-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit be4f451975c6514a9e12451c2ae2ce91d5673b06
Author: Ricardo Cerqueira <v4l@cerqueira.org>
Date:   Thu Jun 8 17:36:17 2006 -0300

    V4L/DVB (4088): Fixes for card cx88 #50
    
    The description of the card has been updated to it's full name/model.
    The tuner has also been switched to a more compatible one (radio
    wasn't working, now it is)
    
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2ed64eb9e7b4cf27055f78a7bd2ccf33a912d0cd
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Jun 8 17:16:46 2006 -0300

    V4L/DVB (4086): There were a cross-reference on cpia and cpia_pp/cpia_usb
    
    Those cross-references were generating an error:
    *** Warning: "cpia_pp_init" [/home/v4l/master/v4l/cpia.ko] undefined!
    *** Warning: "cpia_usb/_init" [/home/v4l/master/v4l/cpia.ko] undefined!
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 60110ce2b2ce74d8a49a4600ce58ba0b44f82800
Author: Lothar Englisch <Lothar.Englisch@lycos.de>
Date:   Tue Jun 6 16:13:46 2006 -0300

    V4L/DVB (4073): Support for new version of Satelco EasyWatch DVB-S light
    
    This patch adds support for Satelco EasyWatch DVB-S light card,
    a clone of the KNC 1, with PCI subsystem ID 1894:001e
    
    Signed-off-by: Lothar Englisch <Lothar.Englisch@lycos.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 47ee2f387961cf300ffebfd56faa3a5823586c8b
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Jun 6 15:51:38 2006 -0300

    V4L/DVB (4072): Cx88: whitespace cleanup
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 845f16abad37e2a255ac1c167375f6588502f93f
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Tue Jun 6 11:20:08 2006 -0300

    V4L/DVB (4070): Zoran strncpy() fix
    
    The zoran driver uses strncpy() in an unsafe way.  This patch uses the proper
    sizeof()-1 size parameter.  Since all strncpy() targets are initialised with
    memset() the trailing '\0' is already set.  Where std->name was the target for
    the strncpy() we overwrote 8 Bytes of the std structure with zeros.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5e87efa3b29c105f81fea785babafb098e4e046d
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon Jun 5 10:26:32 2006 -0300

    V4L/DVB (4068): Removed all references to kernel stuff from videodev.h and videodev2.h
    
    The videodev.h and videodev2.h describe the public API for V4L and V4L2.
    It shouldn't have there any kernel-specific stuff. Those were moved to
    v4l2-dev.h.
    This patch removes some uneeded headers and include v4l2-common.h on all
    V4L driver. This header includes device implementation of V4L2 API provided
    on v4l2-dev.h as well as V4L2 internal ioctls that provides connections
    between master driver and its i2c devices.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 839e4a4acb90fd34e3f6765bef6fe03ee82dbc58
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jun 4 12:15:55 2006 -0300

    V4L/DVB (4067): Fixed cx25840 to work with PAL/M
    
    Sub-carrier frequency for PAL/M is slicely different than NTSC/M.
    Without this patch, colors don't work on PAL/M.
    Setting method also improved to allow other video standards to be included.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c820cc45366377a84a5f66066db4e16b7a6e5b8c
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jun 4 10:34:12 2006 -0300

    V4L/DVB (4066): Vivi.c were ported to the newer videodev2 format.
    
    Several common handling codes were removed. Maybe even more
    stuff may be handled at common infrastructure.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 401998fa96fe18b057af3f906527196522dd2d9d
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jun 4 10:06:18 2006 -0300

    V4L/DVB (4065): Several improvements at videodev.c
    
    Videodev now is capable of better handling V4L2 api, by
    processing V4L2 ioctls and using callbacks to the driver.
    The drivers should be migrated to the newer way and the older
    one will be obsoleted soon.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7565ab082de88ec274283d6b83980144e520a2fc
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun Jun 4 09:11:13 2006 -0300

    V4L/DVB (4064): No drivers should use VIDIOC_*_OLD
    
    V4L core functions handle VIDIOC_*_OLD older ioctls.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dd00b1e02081b4b543dac3619cc9c7f26c4bced4
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 29 12:31:44 2006 -0300

    V4L/DVB (4060): Make dvb/b2c2/flexcop-fe-tuner.c:alps_tdee4_stv0297_tuner_set_params() static
    
    This patch makes the needlessly global
    alps_tdee4_stv0297_tuner_set_params() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 52398efcfa77aeb7e95ef99c9edadd909eb562a5
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Fri May 26 02:13:15 2006 -0300

    V4L/DVB (4058): Bttv: add autodetection support for Osprey 230
    
    - use eeprom data to detect Osprey 230
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2de873e630b9385c6cd5896753335c5bf4829f0c
Author: Malcolm Valentine <farkit@iinet.net.au>
Date:   Mon May 29 13:56:24 2006 -0300

    V4L/DVB (4057): Cx88: IR remote support for DTV2000H
    
    Adds support for the Y0400052 remote supplied with this card.
    In addition to adding a number of buttons to the current winfast definition,
    it enables all the keys currently masked out with #ifdef 0.
    
    It is supplied separately as it remaps two keys from the current definition,
    The teletext button now sends KEY_TEXT instead of KEY_SUBTITLE, as that
    keycode is used by the subtitle button.
    KEY_BACK was changed to KEY_LAST to group it with KEY_NEXT.
    
    Other then that the keys don't overlap, so this should support several
    different versions of the Leadtek remotes.
    
    Signed-off-by: Malcolm Valentine <farkit@iinet.net.au>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4bd6e9d968af68c73bee92bd93cd56937e2e80d8
Author: Malcolm Valentine <farkit@iinet.net.au>
Date:   Mon May 29 13:51:59 2006 -0300

    V4L/DVB (4056): Cx88: Add basic support for Leadtek Winfast DTV2000H card
    
    Add DVB-T and PAL-G television support for Winfast DTV2000H
    
    Signed-off-by: Malcolm Valentine <farkit@iinet.net.au>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit bc53f78306a70d58e26f93d40ce19e61297cc18f
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun May 28 01:43:35 2006 -0300

    V4L/DVB (4053): KWorld HardwareMpegTV XPert: enable s-video/composite video inputs
    
    - Enabled s-video and composite video inputs.
    - Updated comments to reflect the current support for this card.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 741b5bb6498e09178f14a3a5b2cc46e9970f46ed
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sun May 28 15:45:54 2006 -0300

    V4L/DVB (4052): Wrong syntax: instead of bool, it was written boolean
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3e3bf277f1d2487307227e2c5329763cf3af44bc
Author: Christopher Neufeld <television@cneufeld.ca>
Date:   Wed May 24 10:16:45 2006 -0300

    V4L/DVB (4050): Add NTSC sliced VBI support to the cx25840 module.
    
    NTSC sliced VBI support by Christopher Neufeld <television@cneufeld.ca>
    with additional fixes by Hans Verkuil <hverkuil@xs4all.nl>.
    
    Signed-off-by: Christopher Neufeld <television@cneufeld.ca>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 88ca8ed0b7f2f04a055ff3c389f398ba3ad3d27d
Author: Scott Alfter <salfter@ssai.us>
Date:   Sat May 20 16:04:31 2006 -0300

    V4L/DVB (4048): Add support for the Texas Instruments TLV320AIC23B audio codec
    
    Signed-off-by: Scott Alfter <salfter@ssai.us>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a22f1cbc2d3acd99986e96092109f6ced0f0022e
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri May 26 10:32:13 2006 -0300

    V4L/DVB (4047): Doc. sources: expose video4linux/
    
    Documentation/video4linux/:
    Expose example and tool source files in the Documentation/ directory in
    their own files instead of being buried (almost hidden) in readme/txt files.
    This will make them more visible/usable to users who may need
    to use them, to developers who may need to test with them, and
    to janitors who would update them if they were more visible.
    Also, if any of these possibly should not be in the kernel tree at
    all, it will be clearer that they are here and we can discuss if
    they should be removed.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c003d467bd71a7da22554e0d812a646ab58abea5
Author: David Mosberger-Tang <David.Mosberger@acm.org>
Date:   Fri May 26 10:28:13 2006 -0300

    V4L/DVB (4046): Trivial videodev2.h patch
    
    linux/videodev2.h uses types such as __u8 but it fails to include
    <linux/types.h>.  Within the kernel, that's not a problem because
    <linux/time.h> already includes <linux/types.h>.  However, there are
    user apps that try to include videodev2.h (e.g., ekiga) and at least
    on ia64, it causes compilation failures since <linux/types.h> doesn't
    get included for any other reason, leaving __u8 etc. undefined.  The
    attached patch fixes the problem for me.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dea74869f3c62b0b7addd67017b22b394e942aac
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Sun May 14 05:01:31 2006 -0300

    V4L/DVB (4028): Change dvb_frontend_ops to be a real field instead of a pointer field inside dvb_frontend
    
    The dvb_frontend_ops is a pointer inside dvb_frontend. That's why every demod-driver
    is having a field of dvb_frontend_ops in its private-state-struct and
    using the reference for filling the pointer-field in dvb_frontend.
    - It saves at least two lines of code per demod-driver,
    - reduces object size (one less dereference per frontend_ops-access),
    - be coherent with dvb_tuner_ops,
    - makes it a little bit easier for newbies to understand how it works and
    - avoids stupid mistakes because you would have to copy the dvb_frontend_ops
      always, before you could assign the static pointer directly, which was
      dangerous.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 332bed5fc25ab0eb84215ecd89a4acd48219eee0
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Sun May 14 04:49:00 2006 -0300

    V4L/DVB (4027): Fixes after dvb_tuner_ops-conversion
    
    Some of the dvb_tuner_ops-pointer were set before having a dvb_frontend creating.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2938d7800f2ea2f8ad88d5b241cbda868875e965
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue May 23 18:39:29 2006 -0300

    V4L/DVB (4043): Miropcm20: fix sub-optimal header inclusion for sound/oss/aci.h
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6e2040900467f3a80a3be558c7094ff022fb8cb4
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue May 23 17:41:31 2006 -0300

    V4L/DVB (4042): Documentation: whitespace cleanup
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 680543c5d2756ad3496f8ef197ba8825b78d6840
Author: Ricardo Cerqueira <v4l@cerqueira.org>
Date:   Mon May 22 07:44:02 2006 -0300

    V4L/DVB (4038): New cx88 card #50: NPG Tech RealTV
    
    Added support for a new cx88 card, including it's remote
    
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d6144028af6b151018c50c160e794a4d7f686333
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Fri May 19 13:08:09 2006 -0300

    V4L/DVB (4036): Fix some compilation warnings
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0463f12c5cdc3d5577002826c302471b95b2532c
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue May 16 17:22:02 2006 -0300

    V4L/DVB (4032): Fix Pinnacle 300i
    
    I had broken the mt352 tuning when a non-directly connected PLL was used -
    uncommon, but this is what is used on the pinnacle card.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 976e3483799ce5f718753d67454378d46500f0da
Author: Patrick Boettcher <pb@linuxtv.org>
Date:   Sun May 14 13:29:48 2006 -0300

    V4L/DVB (4030): Minor code cleanup on the genpix-module
    
    Minor code cleanup on the genpix-module.
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9bbe076f364aa7ba8c2e49e417a76d628ffb164c
Author: Alan Nisota <alannisota@gmail.com>
Date:   Sun May 14 13:23:56 2006 -0300

    V4L/DVB (4029): [PATCH] Genpix 8PSK->USB driver (Take 2)
    
    This is a patch which includes support for the GENPIX 8PSK->USB module.  The
    board supports QPSK, BPSK and 8PSK decoding (though I don't think it will be
    DVB-S2 compliant) With the following patch, the boad is equivalent to a budget
    card (no CA Module)
    The patch which adds 8psk suppot will follow, but is seperate, as it requires
    DVB-S2 support
    More info on the board can be found at www.genpix-electronics.com (and they
    host the requisite firmwares there as well)
    Signed off by: Alan Nisota <alannisota@gmail.com>
    
    Signed-off-by: Patrick Boettcher <pb@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6daa4f86e9a01da6296f4c2bf40f8180a22718a8
Author: Ricardo Cerqueira <rmcc@linuxtv.org>
Date:   Thu May 18 12:19:57 2006 -0300

    V4L/DVB (4026): Bttv-gpio-irq is no longer used, remove it
    
    This functionality was used when remote control input for BTTV was handled
    by a standalone module, to hook some functions of that module into the main
    bttv core.
    Since that module is now extinct, this can go away
    
    Signed-off-by: Ricardo Cerqueira <rmcc@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b93eedb62e358588c5e595b07fb85efa1f597a9f
Author: Sylvain Pasche <sylvain.pasche@gmail.com>
Date:   Sat Mar 25 23:14:42 2006 -0300

    V4L/DVB (4023): Subject: Pinnacle PCTV grey remote control support
    
    This adds support for the older (?) Pinnacle PCTV remotes (with all buttons
    colored in grey). There's no autodetection for the type of remote, though;
    saa7134 defaults to the colored one, to use the grey remote the
    "pinnacle_remote=1" option must be passed to the saa7134 module
    
    Signed-off-by: Sylvain Pasche <sylvain.pasche@gmail.com>
    Signed-off-by: Ricardo Cerqueira <v4l@cerqueira.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e48a9c6283c1ca2565167f0b4bce4d0be7f49fae
Author: Jaya Kumar <jayakumar.video@gmail.com>
Date:   Wed May 17 15:01:07 2006 -0300

    V4L/DVB (4018): Usbvideo/quickcam_messenger driver v4l
    
    Adds a usbvideo driver for the Logitech Quickcam Messenger USB webcam.
    
    Signed-off-by: Jaya Kumar <jayakumar.video@gmail.com>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a31246220c4681387799d435ee1d48e65db6d5f6
Author: Angelo Marconi <am@massalombarda.net>
Date:   Tue May 9 18:27:48 2006 -0300

    V4L/DVB (4016): Cx88-blackbird: add support for ProLink Pixelview Playtv@P7000
    
    - Add support for ProLink Pixelview Playtv@P7000
    Raw video and MPEG encoded video confirmed to work properly.
    SVideo, Composite and FM inputs are untested - disabled for now.
    
    Signed-off-by: Angelo Marconi <am@massalombarda.net>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8397703ee0cc9ca27df5c058f60c4d4f1dc69595
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Fri May 12 20:36:24 2006 -0300

    V4L/DVB (4014): Remove the spagetti code gotos that aren't useful
    
    Some code had pointless gotos that just didn't make any sense.  They didn't
    make the code smaller, or faster, or easier to understand.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 19b7ad314897cf4a2122208c6b9a372c50308c19
Author: Per Dalaon <perda@oden.cnwab.se>
Date:   Fri May 12 20:31:51 2006 -0300

    V4L/DVB (4013): Change the sweeprate for TT C1500 using QAM64
    
    This patch changes the sweeprate for TT C1500 using QAM64.
    It has been proven to work using QAM64 at a SRate of 6875 for the two
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cd20ca9f194323c74ecccf15a3f5ff6c44effe69
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri May 12 20:31:51 2006 -0300

    V4L/DVB (4012): Fix cx24123 diseqc
    
    Rework diseqc support to be more in line with the other demod drivers.
    Fix Nova-S-Plus/Nova-SE2 diseqc.
    Cleanup API.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9a10655ffa20b596fd162b1c96301f3bed752918
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Fri May 12 20:31:51 2006 -0300

    V4L/DVB (4011): Fix PLL refactoring breakage to WinTV NOVA T USB 2 driver
    
    The calls to set the pll ops were in the wrong place - moved them.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2e2aef7d5a8ac9d1c9b2c07a9fc96a7908d51d72
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Apr 29 12:26:46 2006 -0300

    V4L/DVB (4008): Audio soft reset improvements
    
    The soft reset (de)assert commands where not at the right place.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c0c044a71f3d0a0a73c954b389cbc4b55ed4c2ba
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Apr 29 12:11:18 2006 -0300

    V4L/DVB (4006): Stop/start microcontroller when changing sampling frequency
    
    Stop/start microcontroller when changing sampling frequency to prevent
    tinny audio.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e2b8cf4ced47465b24d6fe911714827475fb0412
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sat Apr 22 10:22:46 2006 -0300

    V4L/DVB (4005): Add support for the cx25836/7 video decoder.
    
    Signed-off-by: Scott Alfter <salfter@ssai.us>
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3eb731705556b643df2cbae1bc98976335451548
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue May 23 23:54:44 2006 -0300

    V4L/DVB (4002): Adjust VBI offset to match value reported in VBI format
    
    The actual offset of the start of VBI data is incorrectly documented for both
    the cx2388x and bt8x8.  For the cx2388x, it appears to be about 220 to 224 +
    VBI_V_DEL*2.  The driver has been incorrectly reporting an offset of 244.
    This patch adjusts VBI_V_DEL to 10, so that the offset of 244 is correct.
    This is the same offset as the bttv driver, and expected by some software.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 419ac5d466db4dba3eb6bd79ffe993b4a4e81b4f
Author: Michael Schimek <mschimek@gmx.at>
Date:   Mon May 22 10:32:11 2006 -0300

    V4L/DVB (4001): Cx88 NTSC VBI fixes
    
    VBI (Closed Caption, CC) capturing never worked in NTSC mode with the
    cx88 driver.
    They were tested with libzvbi and a patched version of tvtime.
    
    Signed-off-by: Michael H. Schimek <mschimek@gmx.at>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7f2c8a9c5377bf48dcf1d1df7df11a3ef442c505
Author: Christoph Pfister <christophpfister@bluemail.ch>
Date:   Mon May 22 10:32:09 2006 -0300

    V4L/DVB (3996): Make the table static
    
    Signed-off-by: Christoph Pfister <christophpfister@bluemail.ch>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit cbee936f472d2d7fb42bb595acf8c451cdb73759
Author: Manu Abraham <manu@linuxtv.org>
Date:   Mon May 22 10:32:08 2006 -0300

    V4L/DVB (3995): Add missing include
    
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fc066478605330d929a90101be02efa2822f3cc0
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon May 22 10:32:05 2006 -0300

    V4L/DVB (3991): Cx88: add autodetection for another Twinhan VP-3054 board.
    
    Added autodetection for PCI subsystem id 1822:0019 to use
    the card definition for CX88_BOARD_DNTV_LIVE_DVB_T_PRO
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit da22d0e758bf011be5921421bf490ce69c387784
Author: Christoph Pfister <christophpfister@bluemail.ch>
Date:   Mon May 22 10:32:04 2006 -0300

    V4L/DVB (3988): Add math routines required by DVB demods
    
    Signed-off-by: Christoph Pfister <christophpfister@bluemail.ch>
    Signed-off-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5c1208ba457a1668c81868060c08496a2d053be0
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon May 22 10:32:02 2006 -0300

    V4L/DVB (3984): Fix CI interface on KNC1 DVBT and DVBC cards
    
    These cards need special handling for CI - reinitialising the frontend
    device when the CI module is reset. Additionally the tda10021 needs to be set
    into a different transport stream mode when a CI module is present.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 48c35756a762e2d569dfd9ab2f24d1b63ea657b9
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon May 22 10:32:00 2006 -0300

    V4L/DVB (3982): Cx88-blackbird: use encoder firmware filename defined in cx2341x.h
    
    Since the filename of the cx23416 encoder firmware image
    is defined in cx2341x.h, we don't need to explicitly define
    it in cx88-blackbird.c anymore.
    This changeset removes BLACKBIRD_FIRM_ENC_FILENAME,
    replacing all occurrances with CX2341X_FIRM_ENC_FILENAME.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2544bf2d619d09b564fbdd451fe4b1ba798f9c03
Author: Valentin Zagura <puthre@gmail.com>
Date:   Mon May 22 10:31:59 2006 -0300

    V4L/DVB (3973): Cx88-blackbird: pause the encoder during frequency change
    
    Added code to cx88-blackbird.c to treat the VIDIOC_S_FREQUENCY ioctl
    to stop mpeg stream before changing the frequency and restart it after.
    It seems that the mpeg stream needs to be paused while changing the
    channel frequency, otherwise the mpeg encoder enters into a bad state,
    producing artifacts.
    
    Signed-off-by: Valentin Zagura <puthre@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 07f640f0ddd72e6158fca7f0694dbaf95cee4d2c
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon May 22 10:31:57 2006 -0300

    V4L/DVB (3973a): Return value is ssize_t
    
    This patch fix a difference between v4l/dvb tree and kernel tree.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 861018a6a9b55ca1a5bf8cd0ff2d47944ce88827
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon May 22 10:31:55 2006 -0300

    V4L/DVB (3971): Cx88-blackbird: use standard filename for cx23416 firmware
    
    cx88-blackbird uses the same encoder firmware for the cx23416 chip that is
    used by ivtv and pvrusb2.
    This patch alters the driver to expect the cx23416 encoder firmware to be
    located in the file, "v4l-cx2341x-enc.fw", instead of using
    "blackbird-fw-enc.bin"
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 855dbada9b551d12a63754b92f67e34c113adf34
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon May 22 10:31:54 2006 -0300

    V4L/DVB (3970): Cx88-blackbird: use firmware api commands defined in cx2341x.h
    
    This patch removes all of the BLACKBIRD_API #define's, instead
    using the equivalent CX2341X_ENC #define's in cx2341x.h
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d762052e1eafd95f3b4622e1990f40dfd0d45b0f
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon May 22 10:31:52 2006 -0300

    V4L/DVB (3968): Fix checking logic for a broken xawtv version
    
    moved from if to ifndef.
    Also added such tests at gentree script. Gentree updated to its latest
    version.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f6320bd3df5964619346bac77b36d03c5a82f6fd
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon May 22 10:31:50 2006 -0300

    V4L/DVB (3968a): Remove compatibility check for I2C_PEC
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7923dee035ec81f6e4ad696e3edddbdd34d37873
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 22 10:31:49 2006 -0300

    V4L/DVB (3967): Pwc-dec23 oops fix
    
    drivers/media/video/pwc/pwc-dec23.c: In function `pwc_dec23_decompress':
    drivers/media/video/pwc/pwc-dec23.c:885: warning: null argument where non-null required (arg 2)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 18232ca61b4c73b849850200a5e6ec40517f35ab
Author: Christian Praehauser <cpraehaus@cosy.sbg.ac.at>
Date:   Mon May 22 10:31:47 2006 -0300

    V4L/DVB (3966): Core: ULE fixes and RFC4326 additions
    
    Fix some problems regarding support for Unidirectional Lightweight
    Encapsulation (ULE) in dvbnet.c.
    The original ULE code was based on a draft.  In the meantime, ULE has been
    published in RFC 4326 (ftp://ftp.rfc-editor.org/in-notes/rfc4326.txt).
    With these fixes, and some additions (which are included in the patch), the
    decaps code should now be complient to RFC4326.
    
    Signed-off-by: Christian Praehauser <cpraehaus@cosy.sbg.ac.at>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit adcb0fa2504aac35e0ed285147b11e75a6db34c7
Author: Adrian Bunk <bunk@stusta.de>
Date:   Mon May 22 10:31:42 2006 -0300

    V4L/DVB (3963): Em28xx/: possible cleanups
    
    This patch contains the following possible cleanups:
    - make the following needlessly global functions static:
      - em28xx-core.c: em28xx_accumulator_set()
      - em28xx-core.c: em28xx_capture_area_set()
      - em28xx-core.c: em28xx_scaler_set()
      - em28xx-core.c: em28xx_isocIrq()
    - remove the following unused EXPORT_SYMBOL's:
      - em28xx-cards.c: em28xx_boards
      - em28xx-cards.c: em28xx_bcount
      - em28xx-cards.c: em28xx_id_table
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a9686e0d204e3faa544434c709ccb599f8165252
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon May 22 10:31:40 2006 -0300

    V4L/DVB (3935): Add missing pll gate control calls
    
    I'd missed some of these out, breaking the av7110 tuning. I then checked for
    more and added them in where necessary. They may not actually be necessary
    in all these locations, but if not, they'll simply have no effect.
    Add small delay to stv0299 pll gate control to fix tuning problems.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ebfbc305bda90deadf73898493c707cce3b465e6
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon May 22 10:31:38 2006 -0300

    V4L/DVB (3809c): Added cx2341x header file
    
    Date:
    
    There are several drivers now using those cx2341x registers. This patch
    creates a separate header for those registers.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 447d6fb8ccdc3a581a13fe4b5a62c384dc9fd36a
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon May 22 10:31:37 2006 -0300

    V4L/DVB (3809b): Added missing docs at kernel tree
    
    Date:
    
    From: Mauro Carvalho Chehab <mchehab@infradead.org>
    
    There are some docs at V4L/DVB tree that were never included at kernel.
    This patch includes those docs.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b8d4c235d50f8512bbc9d67730c24da3309b0307
Author: Thomas Kaiser <linux-dvb@kaiser-linux.li>
Date:   Thu Apr 27 21:45:20 2006 -0300

    V4L/DVB (3934): Support new dvb-ttusb-budget boards with stv0297
    
    Added config switch to stv0297 to control i2c STOP during write behaviour.
    Update frontend init in dvb-ttusb-budget.
    Enable i2c STOP on other users of stv0297.
    
    Signed-off-by: Thomas Kaiser <linux-dvb@kaiser-linux.li>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 21c2858235a81ce4fa1862432eb0c98d8dbdee1e
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Apr 27 21:45:09 2006 -0300

    V4L/DVB (3933): Add isl6421 module
    
    Driver for the ISL6421 LNB chip
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d020542fdaaa69e3061e15d096f11fbc4aeeb93f
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Apr 27 21:45:01 2006 -0300

    V4L/DVB (3932): Convert lnbp21 to a module
    
    Convert lnbp21.h into a linux kernel module.
    Fix up previous users to use it.
    Convert dvb-ttusb-budget to use it.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 972c3517b792520a513d0ecd897ac6719e46fe0d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 27 21:06:50 2006 -0300

    V4L/DVB (3931): Vivi.c: possible cleanups
    
    This patch contains the following possible cleanup:
    - make needlessly global functions static
    - remove unused #ifndef kzalloc kzalloc() #define
    - remove inline's from functions
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9a8e10e034b268237af77e7ce73a54251eaf9fe2
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Thu Apr 27 18:34:03 2006 -0300

    V4L/DVB (3929): Compilation for DVB_AV7110_FIRMWARE seems to be weird
    
    Some systems use a previous config information to generate
    a default config. This seems to cause troubles on some
    systems.
    
    This patch also fixes compilation for AV7110 firmware
    inside V4L/DVB tree.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6b3ccab75ce082f7d63a43903ebd75da4266f77e
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Apr 20 12:01:47 2006 -0300

    V4L/DVB (3895): Additional frontend_init safety checks
    
    Don't try and set the tuner ops if the demod was not detected.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 159f8a6eda8c2ee359bb87bf62be70da2da14918
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Wed Apr 19 18:31:03 2006 -0300

    V4L/DVB (3894): Fix tda10046 tuning
    
    I'd missed the i2c gate ctrl function out of the tda10046, so tuning didn't work
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit bd4956b8ec2075e965492647e0c7006a36efe5d9
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 21:38:49 2006 -0300

    V4L/DVB (3893): Convert calls from _pllbuf() to _calc_reg()
    
    Johannes Stezenbach suggested this change - definite improvement.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b12faeffb179e5397c7c443b0e86e447891125a6
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3888): Convert cxusb to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Attach dvb-pll where possible.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 56e0314d7bf56ada38f16edc44bec61741975b4d
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3886): Convert flexcop-fe-tuner to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Attach dvb-pll where possible.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 30fa61a5ee91bc546f9ebea70c7abda04b5b3e1e
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Apr 27 01:31:26 2006 -0300

    V4L/DVB (3920): Dvb: rename dvb_pll_tdvs_tua6034 to dvb_pll_lg_tdvs_h06xf
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 9c26c8b169f4a7e2db9a3d5abd3ba74ea032dafd
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Apr 27 01:29:17 2006 -0300

    V4L/DVB (3919): V4l: rename TUNER_LG_TDVS_H062F to TUNER_LG_TDVS_H06XF
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fbe60daac4c34e39d1ca69684bcb76e62461ac21
Author: Martin Samuelsson <sam@home.se>
Date:   Thu Apr 27 10:17:00 2006 -0300

    V4L/DVB (3916): AverMedia 6 Eyes AVS6EYES support
    
    Add support for the AverMedia 6 Eyes MJPEG card.
    - Updated drivers/media/video/Kconfig with AVS6EYES
      options.
    - Added CONFIG_VIDEO_ZORAN_AVS6EYES to
      drivers/media/video/Makefile.
    - Added I2C_DRIVERID_BT866 and I2C_DRIVERID_KS0127 to
      include/linux/i2c-id.h
    - Added drivers/media/video/ks0127.c, imported and modified from
      the Marvel project.
    - Added drivers/media/video/ks0127.h, imported and modified from
      the Marvel project.
    - Added drivers/media/video/bt866.c, ported from a 2.4 version
      by Christer Weinigel.
    - Added AVS6EYES to drivers/media/video/zoran_card.c
    - Added input_mux to all cards in drivers/media/video/zoran_card.c
    - Added input mux module parameter to drivers/media/video/zoran_card.c
    - Added AVS6EYES to card_type in drivers/media/video/zoran.h
    - Added input_mux to card_info in drivers/media/video/zoran.h
    - Upped BUZ_MAX_INPUT in drivers/media/video/zoran.h from 8 to 16,
      as the AVS6EYES has 10.
    - Updated Documentation/video4linux/Zoran with information about AVS6EYES.
    
    Signed-off-by: Martin Samuelsson <sam@home.se>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a87cde0bfbf0020a5d0a80f94a80fc1470546999
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Wed Apr 26 10:19:49 2006 -0300

    V4L/DVB (3906): ZC0301 driver updates
    
    This is a patch fixing a small bug in zc0301_start_transfer()
    introduced in the ZC0301 driver v1.04.
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 81ad3428660d06f8faa45eacdf6eb0f1424cd404
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Apr 24 23:21:46 2006 -0300

    V4L/DVB (3900): Rename fe_lgh06xf.h to lg_h06xf.h
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d3b9d6217e8f96d220a94bb5eebc786b62af817b
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 25 05:36:19 2006 -0300

    V4L/DVB (3898): Fix dvb-usb tuner code
    
    I had forgotten to rename some of the tuner functions in the refactoring.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f6adb91c9e9b12b727cf6afb95282d759d103743
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 21:37:20 2006 -0300

    V4L/DVB (3892): Trim documentation
    
    Trim excess documentation down to the essentials.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f54376e275415588d5cb1c54b9edf895391efd71
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:56:10 2006 -0300

    V4L/DVB (3891): Convert cx88-dvb to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Attach dvb-pll where possible.
    Add pll gate control calls where appropriate.
    Sort out the hybrid cards to work with the revamped mt352/sl10353 demods
    supporting external tuners.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8dec073225b0926a26656f416a8d32573205a78f
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3890): Add support for non-attached tuners to zl10353
    
    Add no_tuner setting like in mt352.
    Update to use correct tuner API calls.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4e2eccae27d13d756826533e7cd1214b5825d97c
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3889): Sort out support for non-attached tuners on mt352
    
    Make it use set_params/pllbuf as appropriate so it works with
    dvb_pll_attach()ed tuners.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 74aa7a29fea916cb40c98c38e885cc2087c78774
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3887): Convert bt8xx to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Attach dvb-pll where possible.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 272bc4db791bc49d50d5f77f24c688be6d1907f8
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3885): Convert dvb-pll to be a refactored tuner
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Remove BUG_ON() and convert to a soft error.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a263394b4866a89860d7b5dbcacf33a32f00d206
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3884): Convert dibusb* to refactored tuner code
    
    Hook tuner call into tuner_ops.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit aac9ee95ad655593b5b7438714be5a485dc7cb73
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:12 2006 -0300

    V4L/DVB (3883): Convert digtv to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2546b62ee70b2fc0e06814cfdb0ad586356d7a05
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3882): Convert dvb-usb/umt-010 to refactored tuner code
    
    Hook tuner call into tuner_ops.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ee6a2cb65c67c3d87478469f04fd023632dca345
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3881): Convert core dvb-usb pll code to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 651b81be154ccf001890e77fbd45cdcac079e253
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3880): Convert dvb-ttusb-budget to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a79ddae9fe993adab8d728a7a2a6a4038f0861c8
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3879): Convert saa7134-dvb to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Attach dvb-pll where possible.
    Add pll gate control calls where appropriate.
    Move europa specific code from tda1104x into card driver using ops overrides
    (this is how it should ebe done instead of hacking card specific code into
    the demod driver).
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2d15fd2f01fc76dc6856a5c551e32e4510f2b492
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3878): Convert ttpci/budget-patch to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e87d41c4952ceef7a9f760f38f9343d015279662
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3877): Convert ttpci/budget-av to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0f591d409b63999ee8053df9cfbedd77bfbf3b22
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3876): Convert ttpci/budget-ci to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 067145bdd41bcb090510c73cc6ecd7b09213f038
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3875): Convert ttpci/budget to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit fa006d86716891657dc8cc9b330b546d1899a7b4
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3874): Convert ttpci/av7110 to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    Add pll gate control calls where appropriate.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4b4c9150dafda804a24885683162a898bcc564f2
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3873): Convert pluto2 to refactored tuner code
    
    Rename pll calls to appropriate tuner calls.
    Remove pll functions from demod structures.
    Hook tuner call into tuner_ops.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c72bf909c1d65c4a95fee8c42cf47a5f5a5ff246
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3872): Convert bsbe1/bsru6 to refactored tuner code
    
    Convert to tuner_ops call API.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 02269f37727901e326adf52d61512e4f00c85597
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3871): Convert lgdt330x to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 261143ff12eadbf17d7497cd471f70cacaca9586
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3870): Convert dib3000* to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 20b14562852a0d0327b86283d7391f45aa9293ef
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3869): Convert cx24123 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e994b8d97807536a0f02cff87058d284b29810b7
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3868): Convert zl10353 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Use standardised pllbuf call.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 605ee41c432e550a4e6a4f6fd82013b2989e36a3
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:11 2006 -0300

    V4L/DVB (3867): Convert nxt6000 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 638a3fba39748b63bdfa391bd65144e487a02e3c
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3866): Convert nxt200x to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Standardise the calls used to retrieve tuner data.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 44d92aa7817efa8f9f80f3bde2279221890a4cd2
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3865): Convert or51132 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove dvb-pll code - done elsewhere now.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 089e980939ae4f0ff14d1fe816885aa8f00c6e75
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3864): Convert dvb_dummy_fe to refactored tuner code
    
    Make it call the tuner calls - in case someone wants to use it to develop a
    tuner without a demod.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 81d8a8da8233eb63f783eb3241805ab629b15907
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3863): Convert cx24110 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Remove unneeded sleep function completely.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit f1e809191c6b960aef721aa6aa8a8c103039d937
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3862): Convert tda10021 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d1544ecb3b0589089ddb928affa7bd4255f9442e
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3861): Convert mt352 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointer from structure.
    Use standardised pllbuf function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b800aae382bc3f79045ea544ad77bf03398d4443
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3860): Convert l64871 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a98af2246b3d0e85566b3b489ffbc8018b21b4a3
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3859): Convert s5h1420 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 74349bef1a5b5a287721a42bec08c226b095e8b0
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3858): Convert tda1004x to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    Remove europa specific hack (moved into appropriate card driver)
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e9f9c0d87b1d532b82618bc154246e2dba20934b
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3857): Convert sp8870 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 085542dc8611d969ef698120c98288e24d5f4f9d
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3856): Convert sp887x to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 53a8ee3e903659482e009481ab51d6a6572e6a57
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3855): Convert stv0299 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    Remove extra exported function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 66292ebee9c30e05d5df0229b2fa966883082cd3
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3854): Convert ves1x93 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 58b119e8a94e2f734cd3e43d1225281ed2d47c11
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:10 2006 -0300

    V4L/DVB (3853): Convert ves1820 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d21eac0385dd11d3118ffd374451916fa413c0df
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:09 2006 -0300

    V4L/DVB (3851): Convert tda8083 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 58ac7d36179e27d82e067752b792b1cc573fc590
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:09 2006 -0300

    V4L/DVB (3850): Convert stv0297 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    Remove extra exported pll gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a81870e00bf502db2c579dcb9721adab3775ba58
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:09 2006 -0300

    V4L/DVB (3849): Convert mt312 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0244422220f149d2e930deab89515fd5ca9a6bdd
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:09 2006 -0300

    V4L/DVB (3848): Convert cx22702 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    Remove dvb-pll support - done elsewhere now.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5becb3b045c21001eeeec37bae0738d8ede3a882
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:09 2006 -0300

    V4L/DVB (3847): Convert cx22700 to refactored tuner code
    
    Convert to tuner_ops calls.
    Remove pll function pointers from structure.
    Remove unneeded tuner calls.
    Add i2c gate control function.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7eef5dd6daecf3ee305116c9cf41ae7166270c4c
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Tue Apr 18 17:47:09 2006 -0300

    V4L/DVB (3845): DVB core changes for PLL refactoring
    
    Add tuner_ops structure.
    Add calls into dvb_frontend to support the new tuner architecture.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7c25039dbb45f3e6a34dabe715107d34d298dc40
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 18 17:47:08 2006 -0300

    V4L/DVB (3844): B2c2-flexcop: use fe_lgh06xf.h
    
    - removed duplicated tuning code for LG TDVS H061F
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 55bbcdefc525236bd6ed691456923322be4a82c7
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 18 17:47:08 2006 -0300

    V4L/DVB (3843): Cxusb: use fe_lgh06xf.h
    
    - removed duplicated tuning code for LG TDVS H064F
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7e557743360104cf71aab1f34df58ef5e7d0b042
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 18 17:47:08 2006 -0300

    V4L/DVB (3842): Cx88-dvb: use fe_lgh06xf.h
    
    - removed duplicated tuning code for LG TDVS H062F/H064F
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3d043661064b37f54e8123d17b436aea05da19d6
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 18 17:47:08 2006 -0300

    V4L/DVB (3841): Dvb-bt8xx: use fe_lgh06xf.h
    
    - removed duplicated tuning code for LG TDVS H064F
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8f611b87f437703b95b725afe0388e4fb9cd6587
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 18 17:47:08 2006 -0300

    V4L/DVB (3840): Create standalone fe_lgh064f header
    
    move all pll_set functions for lg-tdvs-h06xf atsc tuners to a standalone header
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0230185d337be9810eeaf4a873fa1fa9f7bc52bf
Author: Luca Risolia <luca.risolia@studio.unibo.it>
Date:   Mon Apr 24 11:28:23 2006 -0300

    V4L/DVB (3838): ZC0301 driver updates
    
    ZC0301 driver updates:
    - Add support for PB-0330 image sensor
    - Generic documentation cleanups and updates
    
    Signed-off-by: Luca Risolia <luca.risolia@studio.unibo.it>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2b455db6d456ef2d44808a8377fd3bc832e08317
Author: Luc Saillard <luc@saillard.org>
Date:   Mon Apr 24 10:29:46 2006 -0300

    V4L/DVB (3835): [PATCH] update pwc driver
    
    Add v4l2 compatibility
    Include the decompressor (legal problem has been resolv by Alan Cox)
    Faster decoder and easier to maintain, optimize, ...
    Can export to userland compressed stream
    Support more cameras, lot of bugs are fixed.
    
    Signed-off-by: Luc Saillard <luc@saillard.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d9e12f25cf538d103426946121d214dff332efbb
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sat Apr 22 16:15:11 2006 -0300

    V4L/DVB (3830): Fix display name for LG TDVS-H06xF
    
    This patch fixes the display name for LG TDVS-H06xF tuners
    in both tuner and dvb-pll modules.
    Changing the names of the actual pll_desc struct and tuner definitions
    has been held back until after the dvb tuner refactoring gets merged.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0b5f56d67821587495eb47014750e2ae7373d635
Author: Valentin Zagura <puthre@gmail.com>
Date:   Thu Apr 20 22:56:25 2006 -0300

    V4L/DVB (3827): Cx88-blackbird: clean up the buffers when closing the MPEG stream
    
    This patch cleans up the buffer queue when the MPEG stream is closed,
    preventing the message, 'cx8802_timeout'
    
    Signed-off-by: Valentin Zagura <puthre@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 6fe00b0ed10833a3faf18319be10620ed565bd24
Author: Adrian Bunk <bunk@stusta.de>
Date:   Wed Apr 19 20:49:28 2006 -0300

    V4L/DVB (3820): Drivers/media/dvb/dvb-usb/: possible cleanups
    
    - make the following needlessly global struct static:
      dvb-usb/cxusb.c: cxusb_mt352_config
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 01a9cd99cfd5b91ca38df74db60629d76e83cb94
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 18 00:22:09 2006 -0300

    V4L/DVB (3817): KWorld HardwareMpegTV XPert: set encoder video standard based on tvnorm
    
    The KWorld HardwareMpegTV XPert uses a multistandard tuner, tda8290 + tda8275.
    Without checking the video standard in blackbird_probe, the encoder defaults
    to PAL, even if the incoming video stream is NTSC. This patch checks the video
    standard set by the cx2388x decoder, and sets the encoding height and frame
    accordingly.
    This patch is designed to only affect the KWorld HardwareMpegTV XPert.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c344933af5a8610d71bd0d92fe43a1519ed72ed8
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Wed Apr 19 18:50:35 2006 -0300

    V4L/DVB (3814): Add support for Samsung TCPG 6121P30A PAL tuner.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8d6cdd235d19c3bb1f86f40bf0305049c1a61955
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Apr 16 13:19:24 2006 -0300

    V4L/DVB (3811): Cxusb: lgh064f: set auxiliary byte in pll_set
    
    This changeset removes pll_init, and instead sets the tuner
    auxiliary byte in pll_set.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 3febc04d42d4a0bda64af0c929fdb871370e2a7a
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Apr 16 12:17:34 2006 -0300

    V4L/DVB (3810): KWorld HardwareMpegTV XPert: Enable Blackbird MPEG encoder support
    
    - clear I2SIN to deliver the audio stream to the cx23416 mpeg encoder.
    - enable blackbird support on the KWorld HardwareMpegTV XPert
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 1b77c54ee11ebe36ce4d0fe805e50aaafa6304b4
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Apr 27 12:01:18 2006 -0300

    V4L/DVB (3809a): Remove compat stuff for DMX_GET_EVENT
    
    The ioctl were removed by:
    V4L/DVB (3727): Remove DMX_GET_EVENT and associated data structures
    due to the ioctl DMX_GET_EVENT has never been implemented, and also
    scrambling events can't be generated in a useful way by the hardware.
    
    This patch removes the corresponding entry at fs/compat_ioctl.c
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8a17ef975648ce96b6a83b872b6ff4be6fdcd2a4
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Apr 13 18:43:50 2006 -0300

    V4L/DVB (3807): Cx88-blackbird: fix typo
    
    BLACKBIRD_FIELD1_SAA7115 was repeated.  Corrected version reads:
    blackbird_api_cmd(dev, BLACKBIRD_API_SET_CAPTURE_LINES, 2, 0,
                    BLACKBIRD_FIELD1_SAA7115,
                    BLACKBIRD_FIELD2_SAA7115
    )
    
    Thanks-to: Valentin Zagura <puthre@gmail.com> for pointing this out.
    Acked-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 707f813729a87e4368532e0a53349192ddabb2e1
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Apr 13 17:41:52 2006 -0300

    V4L/DVB (3806): Cx88-blackbird: allow proper detection of PAL vs. NTSC video standard
    
    - removed test for CX88_BOARD_HAUPPAUGE_ROSLYN prior to determining whether
      the video standard in use is NTSC or PAL.
    Acked-by: Hans Verkuil <hverkuil@xs4all.nl>
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 473f54276a814810d4a06616b223a7d6829e1ad5
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Apr 13 17:29:07 2006 -0300

    V4L/DVB (3805): Fix KNC1 card frontend detection
    
    Since I reordered the CI/frontend detection, it turns out the frontend needs
    to have a GPIO set to power it on; otherwise frontend init fails.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7a3165a1520c608f10a66588ab48275e1ce253f5
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Thu Apr 13 13:06:28 2006 -0300

    V4L/DVB (3801): Cx88-tvaudio: replace 'if' with 'switch..case'
    
    This patch cleans up a potential mess that has yet to occur in the
    card-specific part of cx88-tvaudio.c that sets sound input from external adc.
    It may be a good idea to move this setting into cx88-cards.c in the future.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b3038304c91aa710fe651c7f42568e252fc54908
Author: Valentin Zagura <puthre@gmail.com>
Date:   Thu Apr 13 12:41:43 2006 -0300

    V4L/DVB (3800): Cx88: added support for KWorld MCE 200 Deluxe
    
    This patch adds support for KWorld MCE 200 Deluxe.
    Raw video is working perfectly, MPEG capture using
    cx88-blackbird is also working, but the quality
    could be improved.
    svideo and radio until they can be tested also.
    
    Signed-off-by: Valentin Zagura <puthre@gmail.com>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 7d0dc26952fe0b49f9139f3264318abf195fe596
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Sun Apr 9 18:48:04 2006 -0300

    V4L/DVB (3757): Fix alignment after the replacement from semaphore to muxex
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 5d7dc8c4f667070dbc9a65e93b0e88ba9d19f22a
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Apr 11 10:26:57 2006 -0300

    V4L/DVB (3770): Kill drivers/media/common/saa7146_vv_ksyms.c
    
    This patch moves the EXPORT_SYMBOL's from
    drivers/media/common/saa7146_vv_ksyms.c to the files with the actual
    functions.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit a8558577ff5562fe52c2c493e5bbc3dcdec7ce2f
Author: Uwe Bugla <uwe.bugla@gmx.de>
Date:   Tue Apr 11 10:21:37 2006 -0300

    V4L/DVB (3769): Fix a type error in dvb_frontend.c
    
    Signed-off-by: Uwe Bugla <uwe.bugla@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit ed7f36b6c68a18260798b16ba48ad7b22f54c2e6
Author: Uwe Bugla <uwe.bugla@gmx.de>
Date:   Tue Apr 11 10:20:34 2006 -0300

    V4L/DVB (3768): Fix a tab error in cx14110.c, dprintk
    
    Signed-off-by: Uwe Bugla <uwe.bugla@gmx.de>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 8c99024b88b5da3a73f0575dad98527c9a278d1b
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Tue Apr 11 01:46:46 2006 -0300

    V4L/DVB (3765): Dvb-bt8xx: add support for DViCO FusionHDTV DVB-T Lite 2nd revision
    
    This patch adds support for the new revision of the DViCO
    FusionHDTV DVB-T Lite, based on the zl10353 demod instead
    of mt352.
    Both mt352 and zl10353 revisions of this card have the
    same PCI subsystem ID.
    
    Acked-by: Chris Pascoe <c.pascoe@itee.uq.edu.au>
    Ack'd-by: Manu Abraham <manu@linuxtv.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 20fe4f6599ed300ebd5ef5ef20545a1297c094fa
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Apr 10 09:40:40 2006 -0300

    V4L/DVB (3764): Lgdt330x: update supported cards list in comments
    
    - pcHDTV HD5500 ATSC/QAM uses LG DT3303
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d09dbf92ada861244056d914a8f68b8be99891ed
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Mon Apr 10 09:27:37 2006 -0300

    V4L/DVB (3762): Add sysfs device links to dvb devices
    
    Currently in /sys/class/dvb/dvbX.demuxY/ we have:
    	dev
    	uevent
    With the patch, we have (for a PCI DVB device):
    	dev
    	device -> ../../../devices/pci0000:00/0000:00:1e.0/0000:03:0d.0
    	uevent
    So userspace tools can (finally) work out which physical device a DVB adapter
    refers to. Previously you had to kinda look through dmesg and hope that it
    hadn't been dumped out of the buffer. This makes debugging a lot easier if
    the system has been up for a long time!
    This is done by adding an extra 'struct device *' parameter to
    dvb_register_adapter(). It will work with any kind of standard
    linux 'device'. Additionally, if someone has an embedded system which does
    things differently, they can simply supply 'NULL' and the behaviour will be
    as before - the link will simply not appear.
    
    Ack'd-by: Manu Abraham <manu@linuxtv.org>
    Acked-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 76d313bfea356550a614be51454d526e5090014d
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Mon Apr 10 09:27:08 2006 -0300

    V4L/DVB (3761): Silence some dprintk's in cx88-mpeg
    
    Changeset 395c7c4d8f0c changed several dprintks from level 1 to level 0
    (always on).  They generate four lines every time DMA starts, which don't
    containing any information with a use outside of debugging.  This turns them
    back to level 1.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 4286c6f65ec01efa8f5108cadea402ecf3b12279
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Sat Apr 8 16:06:16 2006 -0300

    V4L/DVB (3753): Whitespace cleanups at media/radio
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dcdda65fd5e70a698dd3d7e65762e178290284b7
Author: Andrew de Quincey <adq_dvb@lidskialf.net>
Date:   Thu Apr 6 10:37:56 2006 -0300

    V4L/DVB (3741): Budget-core doesn't check if register adapter fails
    
    If you have more than DVB_MAX_ADAPTERS in your machine, this causes an oops.
    
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0dbbc0a7ce1acc3a20857f25aa656bf2f5925766
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Thu Apr 6 06:03:09 2006 -0300

    V4L/DVB (3739): Add support for FE_GET_FRONTEND to or51132 frontend
    
    Adds the FE_GET_FRONTEND ioctl to the or51132 frontend.  Current modulation is
    read from the hardware, while frequency is taken from the driver's state.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit e142e7c4186821f03890ff223925cdc7fc963742
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Fri Apr 7 03:24:54 2006 -0300

    V4L/DVB (3736): Cx88 cleanup: move CX88_BOARD_PCHDTV_HD5500 to the end of the cards array
    
    - new cards should always be added to the end of the list.
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit da215d22d82d547c5312f61ac9881ad571e67eea
Author: Rusty Scott <rustys@ieee.org>
Date:   Fri Apr 7 02:21:31 2006 -0300

    V4L/DVB (3735): Add support for pcHDTV HD5500 ATSC/QAM
    
    Added card definitions for the pcHDTV HD5500 ATSC/QAM card
    
    Signed-off-by: Rusty Scott <rustys@ieee.org>
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 62838084b4c4c83cd511893132e2d8da84f48813
Author: Andreas Oberritter <obi@linuxtv.org>
Date:   Wed Apr 5 16:36:51 2006 -0300

    V4L/DVB (3727): Remove DMX_GET_EVENT and associated data structures
    
    The ioctl DMX_GET_EVENT has never been implemented.
    I guess no software is using it because of its lack of implementation.
    Future software won't use it, too, because this API doesn't make much
    sense the way it is: Frontend events have their own different API.
    Scrambling events can't be generated in a useful way by the hardware I
    know of.
    
    Signed-off-by: Andreas Oberritter <obi@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 68ef505e31bb182131c208d139c9b6da33d8d330
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Apr 4 09:30:33 2006 -0300

    V4L/DVB (3724): Remove a wee bit of cruft
    
    A few lines that do nothing in the or51132 frontend, removed.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 87184554722b9d06154d70a48aa63ad744ef3fa9
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Apr 4 09:30:29 2006 -0300

    V4L/DVB (3723): Avoid unnecessary firmware re-loads in or51132 frontend
    
    As QAM_64, QAM_256, and QAM_AUTO all use the same firmware, switching
    between these modulations doesn't require a firmware re-load.  This also
    fixes a mishandled error condition, in which the firmware file is loaded
    into the kernel, the clock mode is changed, but then the firmware upload
    to the device fails.  The modulation change is aborted, but the clock
    mode would still be changed.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 005b541f884975544594ceb8f2ff81b623500745
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Tue Apr 4 01:56:30 2006 -0300

    V4L/DVB (3721): Fix spelling
    
    It's "Terrestrial"
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit d147ed2aa46c3cfcbfeadb5d689e80b14cf1f160
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Mon Apr 3 01:29:09 2006 -0300

    V4L/DVB (3720): Fix spelling error / typo in comments
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c3291069c2c22c3154e0809345f34ec9962d7d24
Author: Michael Krufky <mkrufky@linuxtv.org>
Date:   Sun Apr 2 19:11:10 2006 -0300

    V4L/DVB (3718): Removed trailing newlines
    
    Signed-off-by: Michael Krufky <mkrufky@linuxtv.org>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2e7c6dc3989136844eb63e05f9e4dc6608a763c6
Author: Mauro Carvalho Chehab <mchehab@infradead.org>
Date:   Mon Apr 3 07:53:40 2006 -0300

    V4L/DVB (3715): Change all emails to the currently used one.
    
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit c7c0b34c27bbf0671807e902fbfea6270c8f138d
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Apr 2 13:35:00 2006 -0300

    V4L/DVB (3712): Fix video input setting of em28xx, use _INT_S_VIDEO_ROUTING in tvp5150
    
    - Use new routing input defines in em28xx-cards.c
    - Fix S-Video settings for tvp5150-based cards (input was copied from saa7115
      based cards and worked only because S-Video was selected in the default: case)
    - Replace VIDIOC_S_INPUT by VIDIOC_INT_S_VIDEO_ROUTING in em28xx-video.c
    - Remove the now obsolete VIDIOC_S_INPUT handler in saa7115.c
    - Add VIDIOC_INT_G/S_VIDEO_ROUTING in tvp5150.c
    - Add new media/tvp5150.h with the routing defines.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit b7f8292c96463810edfecff70dd4631d47e5a36b
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Apr 2 12:50:42 2006 -0300

    V4L/DVB (3711): Add support for VIDIOC_INT_S_CRYSTAL_FREQ internal command.
    
    Some saa7115-based cards use a different crystal frequency and a different
    audio clock generation. Add a new VIDIOC_INT_S_CRYSTAL_FREQ command to be
    able to set these values.
    Also change the default APLL setting to 0. It makes no sense to have the
    audio clock independent from the video clock, this can lead to audio/video
    synchronization problems. Setting this to 0 is also consistent with the old
    saa7114.c source and the way the Hauppauge Windows driver sets it.
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 2eb606db1134ce860cc0cbf8b533b6315d182e21
Author: Hans Verkuil <hverkuil@xs4all.nl>
Date:   Sun Apr 2 08:21:02 2006 -0300

    V4L/DVB (3709): Improve line-in handling
    
    - improve handling of the EXTERN input: don't start an unnecessary carrier scan
    - improve the LOG_STATUS output
    - ensure that a carrier scan is started again when switching back to the tuner.
    - set correct prescale for L-NICAM
    
    Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit 0ead09180a0620eaef761da84259262bfcf21090
Author: Trent Piepho <xyzzy@speakeasy.org>
Date:   Sun Apr 2 20:40:33 2006 -0300

    V4L/DVB (3708a): Clean up some cruft in or51132 frontend
    
    There is some old code in the or51133 firmware loading function that
    has no effect.  Left a comment to in case it helps someone trying
    to reverse engineer the chip.
    
    Signed-off-by: Trent Piepho <xyzzy@speakeasy.org>
    Signed-off-by: Andrew de Quincey <adq_dvb@lidskialf.net>
    Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>

commit dfd8317d3340f03bc06eba6b58f0ec0861da4a13
Merge: 83626b0... c089785...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 17:48:14 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm: (25 commits)
      [ARM] 3648/1: Update struct ucontext layout for coprocessor registers
      [ARM] Add identifying number for non-rt sigframe
      [ARM] Gather common sigframe saving code into setup_sigframe()
      [ARM] Gather common sigframe restoration code into restore_sigframe()
      [ARM] Re-use sigframe within rt_sigframe
      [ARM] Merge sigcontext and sigmask members of sigframe
      [ARM] Replace extramask with a full copy of the sigmask
      [ARM] Remove rt_sigframe puc and pinfo pointers
      [ARM] 3647/1: S3C24XX: add Osiris to the list of simtec pm machines
      [ARM] 3645/1: S3C2412: irq support for external interrupts
      [ARM] 3643/1: S3C2410: Add new usb clocks
      [ARM] 3642/1: S3C24XX: Add machine SMDK2413
      [ARM] 3641/1: S3C2412: Fixup gpio register naming
      [ARM] 3640/1: S3C2412: Use S3C24XX_DCLKCON instead of S3C2410_DCLKCON
      [ARM] 3639/1: S3C2412: serial port support
      [ARM] 3638/1: S3C2412: core clocks
      [ARM] 3637/1: S3C24XX: Add mpll clock, and set as fclk parent
      [ARM] 3636/1: S3C2412: Add selection of CPU_ARM926
      [ARM] 3635/1: S3C24XX: Add S3C2412 core cpu support
      [ARM] 3633/1: S3C24XX: s3c2410 gpio bugfix - wrong pin nos
      ...

commit 83626b01275d0228516b4d97da008328fc37c934
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 17:47:09 2006 -0700

    Revert "[PATCH] usb: drivers/usb/core/devio.c dereferences a userspace pointer"
    
    This reverts commit 786dc1d3d7333f269e17d742886eac2188a2d9cc.
    
    As Al so eloquently points out, the patch is crap. The old code was fine,
    the new code was bogus.
    
    It never dereferenced a user pointer, the "->" operator was to an array
    member, which gives the _address_ of the member (in user space), not an
    actual dereference at all.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c0897856553d45aee1780bed455b7c2e888dd64b
Merge: e11c910... 85fe068...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 23:53:01 2006 +0100

    Merge signal handler branch

commit 85fe068123aa11d3477ce88c7d365e233b1f2e10
Author: Daniel Jacobowitz <drow@false.org>
Date:   Sat Jun 24 23:46:21 2006 +0100

    [ARM] 3648/1: Update struct ucontext layout for coprocessor registers
    
    Patch from Daniel Jacobowitz
    
    In order for userspace to find saved coprocessor registers, move them from
    struct rt_sigframe into struct ucontext.  Also allow space for glibc's
    sigset_t, so that userspace and kernelspace can use the same ucontext
    layout.  Define the magic numbers for iWMMXt in the header file for easier
    reference.  Include the size of the coprocessor data in the magic numbers.
    
    Also define magic numbers and layout for VFP, not yet saved.
    
    Signed-off-by: Daniel Jacobowitz <dan@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 070b98bfda3d27269519067c1c67eaef695f3e0c
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sun Jun 25 00:07:55 2006 +0200

    kbuild: trivial fixes in Makefile
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e838db685fcfd2e9a0548ffc5cb9447e6c3c11be
Author: Masatake YAMATO <jet@gyve.org>
Date:   Thu Jun 22 12:21:20 2006 +0900

    kbuild: adding symbols in Kconfig and defconfig to TAGS
    
    I'm using TAGS generated from "make TAGS" to read the kernel source code.
    
    When I met a ifdef block
    
    	  #ifdef CONFIG_FOO
    	  	 ...
    	  #endif
    
    in the soruce code I would like to know the meaning CONFIG_FOO
    to decide whether I should read inside the ifdef block
    or not. meaning CONFIG_FOO is well documented in Kconfig.
    So it is nice if I can jump to CONFIG_FOO entry in Kconfig
    from "#ifdef CONFIG_FOO" with the tag jump.
    
    Here is the patch to add symbols in Kconfig and defconfig to TAGS
    in "make TAGS" operation.
    
    Signed-off-by: Masatake YAMATO <jet@gyve.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit abb1cf3cb9532d824c8bda00a111adb106dd457d
Merge: b464f57... c499aeb...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 14:48:43 2006 -0700

    Merge branch 'drm-patches' of git://git.kernel.org/pub/scm/linux/kernel/git/airlied/drm-2.6
    
    * 'drm-patches' of git://git.kernel.org/pub/scm/linux/kernel/git/airlied/drm-2.6:
      drm: radeon constify radeon microcode
      Add i915 ioctls to configure pipes for vblank interrupt.
      drm: update radeon to 1.25 add r200 vertex program support
      drm: radeon add a tcl state flush before accessing tcl vector space

commit b464f5794619bbe98a92e1bc4180986e39615ac4
Merge: b9d8be7... 0fe6e2d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 14:48:35 2006 -0700

    Merge branch 'intelfb-patches' of git://git.kernel.org/pub/scm/linux/kernel/git/airlied/intelfb-2.6
    
    * 'intelfb-patches' of git://git.kernel.org/pub/scm/linux/kernel/git/airlied/intelfb-2.6:
      intelfb delousing

commit b9d8be7828e974f076717f0da608d052440fe192
Merge: d02f40e... 1812fd4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 14:48:24 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6: (40 commits)
      [SPARC64]: Update defconfig.
      [SPARC64]: Make auxio a real driver.
      [PARPORT] sunbpp: Convert to new SBUS device framework.
      [Documentation]: Update probing info in sbus_drivers.txt
      [SCSI] qlogicpti: Convert to new SBUS device framework.
      [SCSI] esp: Fix bug in esp_remove_common.
      [NET] sunhme: Kill useless loop over sdevs in quattro_sbus_find().
      [NET] myri_sbus: Kill unused next_module struct member.
      [NET] myri_sbus: Convert to new SBUS device layer.
      [NET] sunqe: Convert to new SBUS driver layer.
      [NET] sunbmac: Convert over to new SBUS device framework.
      [NET] sunlance: Convert to new SBUS driver framework.
      [NET] sunhme: Convert to new SBUS driver framework.
      [NET] sunhme: Kill __sparc__ and __sparc_v9__ ifdefs.
      [SCSI] sparc: Port esp to new SBUS driver layer.
      [SOUND] sparc: Port amd7930 to new SBUS device layer.
      [SBUS]: Rewrite and plug into of_device framework.
      [SPARC]: Port of_device layer and make ebus use it.
      [SPARC]: Port sparc64 in-kernel device tree code to sparc32.
      [SPARC64]: Add of_device layer and make ebus/isa use it.
      ...

commit d02f40e81e003be6ddba5c176f2e40ea290c3729
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 14:32:18 2006 -0700

    Enable minimal per-device resume tracing
    
    This is the minimal resume trace code to find which device resume (if
    any) results in problems.  Usually, you'd use the information this
    generates as a starting point to adding more fine-grained trace event
    points.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6803dc0ea85ad21b2cb3ec88decff5e27d7a390b
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jun 24 23:46:54 2006 +0200

    kbuild: replace abort() with exit(1)
    
    We have had no use of the coredump file for a long time.
    So just exit(1) and avoid coredumping.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit eb71c87a492b7090ff9e8ac46912c480a1687e38
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Sat Jun 24 14:27:42 2006 -0700

    Add some basic resume trace facilities
    
    Considering that there isn't a lot of hw we can depend on during resume,
    this is about as good as it gets.
    
    This is x86-only for now, although the basic concept (and most of the
    code) will certainly work on almost any platform.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 15fde6751886fd972a64ed65ba49db309919c504
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Tue May 9 20:37:30 2006 +0200

    kbuild: support for %.symtypes files
    
    Here is a patch that adds a new -T option to genksyms for generating dumps of
    the type definition that makes up the symbol version hashes. This allows to
    trace modversion changes back to what caused them. The dump format is the
    name of the type defined, followed by its definition (which is almost C):
    
      s#list_head struct list_head { s#list_head * next , * prev ; }
    
    The s#, u#, e#, and t# prefixes stand for struct, union, enum, and typedef.
    The exported symbols do not define types, and thus do not have an x# prefix:
    
      nfs4_acl_get_whotype int nfs4_acl_get_whotype ( char * , t#u32 )
    
    The symbol type defintion of a single file can be generated with:
    
      make fs/jbd/journal.symtypes
    
    If KBUILD_SYMTYPES is defined, all the *.symtypes of all object files that
    export symbols are generated.
    
    The single *.symtypes files can be combined into a single file after a kernel
    build with a script like the following:
    
    for f in $(find -name '*.symtypes' | sort); do
        f=${f#./}
        echo "/* ${f%.symtypes}.o */"
        cat $f
        echo
    done \
    | sed -e '\:UNKNOWN:d' \
          -e 's:[,;] }:}:g' \
          -e 's:\([[({]\) :\1:g' \
          -e 's: \([])},;]\):\1:g' \
          -e 's: $::' \
          $f \
    | awk '
    /^.#/   { if (defined[$1] == $0) {
                print $1
                next
              }
              defined[$1] = $0
            }
            { print }
    '
    
    When the kernel ABI changes, diffing individual *.symtype files, or the
    combined files, against each other will show which symbol changes caused the
    ABI changes. This can save a tremendous amount of time.
    
    Dump the types that make up modversions
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit ca195cfec9fff622a61b1b72534e73360747f735
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 22:41:09 2006 +0100

    [ARM] Add identifying number for non-rt sigframe
    
    GDB couldn't reliably tell the difference between the old and new
    non-rt sigframes, so provide it with a number at the beginning which
    will never appear in the old sigframe, and hence provide gdb with a
    reliable way to tell the two apart.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3041e47e8b08d51188b2cbdbd9c1e6f43314c8f1
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Sun Jun 18 21:09:09 2006 -0700

    kbuild: fix silentoldconfig recursion
    
    kconfig-fix-config-dependencies causes this:
    
    make CC=cc  KBUILD_VERBOSE=1 -C /usr/src/25 SUBDIRS=/home/akpm/NVIDIA-Linux-x86_64-1.0-8762-pkg2/usr/src/nv modules
    make -f /usr/src/devel/Makefile silentoldconfig
    make -f /usr/src/devel/Makefile silentoldconfig
    make -f /usr/src/devel/Makefile silentoldconfig
    
    The basic problem is if we compile external modules, config-targets isn't
    set which can cause recursive calls to silentoldconfig to update the
    kernel configuration.
    
    Bail out and ask the user to update manually.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e11c910b5bcc1dbc38a5af7a24be2812fc956b27
Merge: c1e08ad... c9b949a...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 22:21:49 2006 +0100

    Merge S3C24xx branch

commit c1e08adc86f886ba0ad7c8f29c240d6e833e7ec7
Merge: 52e3e77... 1f64eb3...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sat Jun 24 22:21:35 2006 +0100

    Merge ep93xx branch

commit ac031f26e89cc04fc7504f31ae137857eb83a051
Author: Theodore Ts'o <tytso@mit.edu>
Date:   Wed Jun 21 20:53:09 2006 -0400

    kbuild: add option for stripping modules while installing them
    
    Add option for stripping modules while installing them.
    
    This function adds support for stripping modules while they are being
    installed.  CONFIG_DEBUG_KERNEL (which will probably become more
    popular as developers use kdump) causes the size of the installed
    modules to grow by a factor of 9 or so.
    
    Some kernel package systems solve this problem by stripping the debug
    information from /lib/modules after running "make modules_install",
    but that may not work for people who are installing directly into
    /lib/modules --- root partitions that were sized to handle 16 megs
    worth of modules may not be quite so happy with 145 megs of modules,
    so the "make modules_install" never succeeds.
    
    This patch allows such users to request modules_install to strip the
    modules as they are installed.
    
    Signed-off-by: "Theodore Ts'o" <tytso@mit.edu>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 468d949401d729b28eed6ea5be25695c5731d3f1
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 23:22:43 2006 +0100

    kbuild: kill some false positives from modpost
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c5e3003381f4e39773a1758a9eb68dff9740a56c
Author: Ram Pai <linuxram@us.ibm.com>
Date:   Fri Jun 23 16:44:38 2006 -0700

    kbuild: export-symbol usage report generator
    
    The following patch provides the ability to generate a report of
    	(1) All the exported symbols and their in-kernel-module usage count
    	(2) For each module, lists the modules and their exported symbols, on
    	                  which it depends.
    
    	the report can be generated by executing:
    	perl scripts/export_report
    
    The tool warns if the modules are not build using MODVERSIONING.
    
    Signed-off-by: Ram Pai <linuxram@us.ibm.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e5c44fd88c146755da6941d047de4d97651404a9
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jun 24 22:50:18 2006 +0200

    kbuild: fix make -rR breakage
    
    make failed to supply the filename when using make -rR and using $(*F)
    to get target filename without extension.
    This bug was not reproduceable in small scale but using:
    $(basename $(notdir $@)) fixes it with same functionality.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c9b949a734adef5d05cbaa0b0546b924ca517155
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:22:35 2006 +0100

    [ARM] 3647/1: S3C24XX: add Osiris to the list of simtec pm machines
    
    Patch from Ben Dooks
    
    Enable power management for Simtec Osiris
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a019f4a9a7b4ec4986918e9aefa06815cf77b714
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:37 2006 +0100

    [ARM] 3645/1: S3C2412: irq support for external interrupts
    
    Patch from Ben Dooks
    
    Move the decoding of the IRQ_EXT4 and above out of
    the entry macro, and into an chained irq handler
    as the EXTINT registers move depending on the CPU
    being used.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 22346aea8d39372d6fd207468701e90bf546b882
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:36 2006 +0100

    [ARM] 3643/1: S3C2410: Add new usb clocks
    
    Patch from Ben Dooks
    
    Make the S3C2410 use the same usb clock naming
    as the S3C2412
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66c594098db1ee885f486a684b66937e28e792b1
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:35 2006 +0100

    [ARM] 3642/1: S3C24XX: Add machine SMDK2413
    
    Patch from Ben Dooks
    
    Add basic support for the Samsung/Aiji SMDK2413
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 44cc7c9c15124c4506da96304e5f9eb88200fc35
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:33 2006 +0100

    [ARM] 3641/1: S3C2412: Fixup gpio register naming
    
    Patch from Ben Dooks
    
    The current S3C2412 has used to moving S3C24XX_
    for the generic form of an register has been
    moved from the S3C2410.
    
    Fixup S3C2410_EXTINTx and S3C2410_EINFLTx to
    S3C24XX_EXTINTx and S3C24XX_EXTINTx
    
    Depends on Patch #3635/1, Patch #3640/1
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 46491c94d39a519178ba8c6b5b5d6a839210124d
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:32 2006 +0100

    [ARM] 3640/1: S3C2412: Use S3C24XX_DCLKCON instead of S3C2410_DCLKCON
    
    Patch from Ben Dooks
    
    The current S3C2412 support has moved to using
    S3C24XX_DCLKCON unless the specific DCLKCON is
    required (S3C2412_DCLKCON or S3C2410_DKCLKCON)
    
    Move the few places using S3C2410_DCLKCON to
    S3C24XX_DCLKCON
    
    Depends on Patch #3635/1
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 73e55cb3b3549d0174d1dadb755200938232e8d0
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:32 2006 +0100

    [ARM] 3639/1: S3C2412: serial port support
    
    Patch from Ben Dooks
    
    Serial port support for the on-board UART blocks
    on the Samsung S3C2412 and S3C2413 UARTs.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 736855f0c748dacb624070b8d6ffffe4532cf4dc
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:31 2006 +0100

    [ARM] 3638/1: S3C2412: core clocks
    
    Patch from Ben Dooks
    
    Clock support for the clocks on the Samsung S3C2412
    and S3C2413 SoCs. This provides clock enables and
    parent selection for all the standard clocks.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 513846f82829efd5bab5359bdc33509e6386fd49
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:29 2006 +0100

    [ARM] 3637/1: S3C24XX: Add mpll clock, and set as fclk parent
    
    Patch from Ben Dooks
    
    Update the clocks with the MPLL clock, and
    use it as the parent. Also export these to
    the rest of arch/arm/mach-s3c2410
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3434d9d9fc0fec0b96ab128ee0d743b6a0d90160
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:28 2006 +0100

    [ARM] 3636/1: S3C2412: Add selection of CPU_ARM926
    
    Patch from Ben Dooks
    
    Select CONFIG_CPU_ARM926 when CONFIG_CPU_S3C2412 is
    selected.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 68d9ab394f06f95fd4ca612c08edf13e410fd8d0
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:27 2006 +0100

    [ARM] 3635/1: S3C24XX: Add S3C2412 core cpu support
    
    Patch from Ben Dooks
    
    Add support for the Samsung S3C2412 and S3C2413 range
    of SoCs. This patch contains the core identification,
    debug macros, and basic register updates to get these
    to build.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a3ff55026e59687040f00fc35680fc0e774859f4
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sat Jun 24 21:21:26 2006 +0100

    [ARM] 3633/1: S3C24XX: s3c2410 gpio bugfix - wrong pin nos
    
    Patch from Ben Dooks
    
    The s3c2410 gpio functions have a pair of bugs where
    the code is using the pin function definitions instead
    of the pin gpio numbers.
    
    Also remove the changelog
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 82b145c5a572f7fa7211dffe2097234dc91bcecc
Author: Chuck Lever <cel@netapp.com>
Date:   Tue Jun 20 12:57:03 2006 -0400

    NFS: alloc nfs_read/write_data as direct I/O is scheduled
    
    Re-arrange the logic in the NFS direct I/O path so that nfs_read/write_data
    structs are allocated just before they are scheduled, rather than
    allocating them all at once before we start scheduling requests.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 06cf6f2ed0b19629700794727d86ed57b9c0583e
Author: Chuck Lever <cel@netapp.com>
Date:   Tue Jun 20 12:56:49 2006 -0400

    NFS: Eliminate nfs_get_user_pages()
    
    Neil Brown observed that the kmalloc() in nfs_get_user_pages() is more
    likely to fail if the I/O is large enough to require the allocation of more
    than a single page to keep track of all the pinned pages in the user's
    buffer.
    
    Instead of tracking one large page array per dreq/iocb, track pages per
    nfs_read/write_data, just like the cached I/O path does.  An array for
    pages is already allocated for us by nfs_readdata_alloc() (and the write
    and commit equivalents).
    
    This is also required for adding support for vectored I/O to the NFS direct
    I/O path.
    
    The original reason to pin the user buffer and allocate all the NFS data
    structures before trying to schedule I/O was to ensure all needed resources
    are allocated on the client before starting to send requests.  This reduces
    the chance that resource exhaustion on the client will cause a short read
    or write.
    
    On the other hand, for an application making very large application I/O
    requests, this means that it will be nearly impossible for the application
    to make forward progress on a resource-limited client.
    
    Thus, moving the buffer pinning functionality into the I/O scheduling
    loops should be good for scalability.  The next patch will do the same for
    NFS data structure allocation.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9c93ab7dff5eb22027ab15010557bb73f9b44c99
Author: Chuck Lever <cel@netapp.com>
Date:   Tue Jun 20 12:56:31 2006 -0400

    NFS: refactor nfs_direct_free_user_pages
    
    Clean-up and fix a minor bug: the logic was dirtying page cache pages on
    both read and write operations.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 51a7bc6caec94bab256b272bffd24d00ea81c698
Author: Chuck Lever <cel@netapp.com>
Date:   Tue Jun 20 12:56:16 2006 -0400

    NFS: remove user_addr, user_count, and pos from nfs_direct_req
    
    Make the user_addr, user_count, and pos parameters explicit to the
    scheduler routines, and remove the fields from nfs_direct_req.  The
    iovec API will be passing in a series of these, not just one set.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit fedb595c66e1fbd5acafe0d43b7e95c13c936d61
Author: Chuck Lever <cel@netapp.com>
Date:   Tue Jun 20 12:55:45 2006 -0400

    NFS: "open code" the NFS direct write rescheduler
    
    An NFSv3/v4 client must reschedule on-the-wire writes if the writes are
    UNSTABLE, and the server reboots before the client can complete a
    subsequent COMMIT request.
    
    To support direct asynchronous scatter-gather writes, the write
    rescheduler in fs/nfs/direct.c must not depend on the I/O parameters
    in the controlling nfs_direct_req structure.  iovecs can be somewhat
    arbitrarily complex, so there could be an unbounded amount of information
    to save for a rarely encountered requirement.
    
    Refactor the direct write rescheduler so it uses information from each
    nfs_write_data structure to reschedule writes, instead of caching that
    information in the controlling nfs_direct_req structure.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b1c5921c5b715c207d7fe77cd7aaafbb322f09f5
Author: Chuck Lever <cel@netapp.com>
Date:   Tue Jun 20 12:55:19 2006 -0400

    NFS: Separate functions for counting outstanding NFS direct I/Os
    
    Factor out the logic that increments and decrements the outstanding I/O
    count.  This will be a commonly used bit of code in upcoming patches.
    Also make this an atomic_t again, since it will be very often manipulated
    outside dreq->spin lock.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 816724e65c72a90a44fbad0ef0b59b186c85fa90
Merge: 70ac438... d384ea6...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Sat Jun 24 08:41:41 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/
    
    Conflicts:
    
    	fs/nfs/inode.c
    	fs/super.c
    
    Fix conflicts between patch 'NFS: Split fs/nfs/inode.c' and patch
    'VFS: Permit filesystem to override root dentry on mount'

commit 52e3e772a098274df3c6f5f1ad58cd7fe24089bf
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Sat Jun 24 09:58:14 2006 +0100

    [ARM] 3631/1: Remove legacy __mem_isa() definitions
    
    Patch from Andrew Victor
    
    Remove the remaining legacy __mem_isa() definitions for the ARM
    platforms.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fc8ea7a1eae3034505f70f02981d33bbc1284a86
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 24 09:57:14 2006 +0100

    [ARM] 3644/1: ixp2000: export gpio_line_config()
    
    Patch from Lennert Buytenhek
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1f64eb379cfc95d5f627b779685f7ac6721df322
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 24 10:33:03 2006 +0100

    [ARM] 3646/1: ep93xx: instantiate ep93xx-ohci platform device
    
    Patch from Lennert Buytenhek
    
    The ep93xx ohci bits have been merged into the gregkh-2.6 tree, which
    means that they will probably go upstream soon, so make the core ep93xx
    code instantiate an appropriate ep93xx-ohci platform device.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1d81eedb8f6c13c262a70b8167530ec24b09c0ff
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 24 10:33:02 2006 +0100

    [ARM] 3634/1: ep93xx: initial implementation of the clk_* API
    
    Patch from Lennert Buytenhek
    
    Add an initial implementation of the clk_* API for the cirrus ep93xx
    to the tree.  The initial implementation is somewhat minimal, with the
    intention of extending it as we go along.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3da4bd2bfc672a484d2a5df9f89b79f5e1e634dc
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sat Jun 24 09:57:13 2006 +0100

    [ARM] 3632/1: iwmmxt: fix up argument comment for iwmmxt_task_restore()
    
    Patch from Lennert Buytenhek
    
    Commit d6551e884cf66de072b81f8b6d23259462c40baf forgot to update the
    description of what goes into r2 when calling iwmmxt_task_restore().
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c499aeb08cb24bed60e5bfc80720597bcf1a720d
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 24 17:37:48 2006 +1000

    drm: radeon constify radeon microcode
    
    From: Tilman (DRM CVS)
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 702880f24373dfb31edb0bcd997ff924d07decc3
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 24 17:07:34 2006 +1000

    Add i915 ioctls to configure pipes for vblank interrupt.
    
    i915 vblanks can be generated from either pipe a or b, however a disabled
    pipe generates no interrupts. This change allows the X server to select
    which pipe generates vblank interrupts.
    
    From: Keith Packard <keith.packard@intel.com> via DRM CVS
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d6fece051a4ef330922bfafb9d64e3e133e3a8a6
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 24 17:04:07 2006 +1000

    drm: update radeon to 1.25 add r200 vertex program support
    
    Add support for r200 vertex programs (R200_EMIT_VAP_PVS_CNTL, and new
    packet type for making it possible to address whole tcl vector space
    and have a larger count)
    
    From: Roland Scheidegger (DRM CVS)
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit f2a2279ffc0dfd27f6909184a29910e40ae7eebd
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat Jun 24 16:55:34 2006 +1000

    drm: radeon add a tcl state flush before accessing tcl vector space
    
    Do a tcl state flush before accessing tcl vector space. This fixes some
    more problems with flickering (bug #6637). drm may not be appropriate
    place for this, since doing that flush there might both be overkill and
    insufficient in some cases. However, it's hard to figure out when that
    flush is needed, so this has to suffice. There does not seem to be a
    performance penalty associated with it.
    
    From: Roland Scheidegger (DRM CVS)
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0fe6e2d2928e089d16ec5ed7ba634c1d60916020
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Jun 23 06:05:39 2006 +0100

    intelfb delousing
    
    ring_head is offset in card memory, not iomem pointer.  Fixed, removed
    fuckloads of amazingly bogus casts somebody had sprinkled all over the
    place.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1812fd40725c13cf050c29791a6dd35d593eb8d8
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 23:17:48 2006 -0700

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b5ba0740f852f4ad86ba7f21267bc77027d60703
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 22:46:49 2006 -0700

    [SPARC64]: Make auxio a real driver.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4f62d158a32d9f470377a7bd6dcb797b42afe5f3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 22:22:13 2006 -0700

    [PARPORT] sunbpp: Convert to new SBUS device framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9eccf1b3121f7e407d3159908f29252887194a16
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 22:12:39 2006 -0700

    [Documentation]: Update probing info in sbus_drivers.txt
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3d4253d9afabd6d42c33812a839ba67b8c9bbe49
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 22:00:34 2006 -0700

    [SCSI] qlogicpti: Convert to new SBUS device framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7bd5ed5dd4f12ba56c99c9b5a8838afbf121f397
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 21:58:34 2006 -0700

    [SCSI] esp: Fix bug in esp_remove_common.
    
    Do not try to kfree(esp), scsi_host_put() takes care of that.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 96399487ad84b0d935923fe3652943159f36fb64
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 21:36:46 2006 -0700

    [NET] sunhme: Kill useless loop over sdevs in quattro_sbus_find().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c0442209e41b3453736ef974ee709a6ae15d99fb
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 21:33:44 2006 -0700

    [NET] myri_sbus: Kill unused next_module struct member.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a46c30fd62636d5d0f4209fed79c99c01dd58218
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 21:32:48 2006 -0700

    [NET] myri_sbus: Convert to new SBUS device layer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ecba38abfdaf012713b661177c2a6db12bb996c3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 21:23:01 2006 -0700

    [NET] sunqe: Convert to new SBUS driver layer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 52a34c7fe43afcbcd0e1ecfdef6b3dfdb9a90180
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 18:48:04 2006 -0700

    [NET] sunbmac: Convert over to new SBUS device framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2d81e63ced3e81b8b71087b9af44da26171ba36
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 18:39:40 2006 -0700

    [NET] sunlance: Convert to new SBUS driver framework.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 050bbb196392b9c178f82b1205a23dd2f915ee93
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 18:21:02 2006 -0700

    [NET] sunhme: Convert to new SBUS driver framework.
    
    And make it a real PCI driver too.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9e326acf567b605cf4177081cc7367c24ec10a66
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 17:31:12 2006 -0700

    [NET] sunhme: Kill __sparc__ and __sparc_v9__ ifdefs.
    
    Use CONFIG_SPARC and CONFIG_SPARC64 instead.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 411aa5540536feace62c97478a8ea5dab7469377
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 17:29:28 2006 -0700

    [SCSI] sparc: Port esp to new SBUS driver layer.
    
    This also turns the driver into a new-style scsi driver.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 69b5c4f18b2ceab3da9e854d02f8d9a2aa5b8431
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 16:23:12 2006 -0700

    [SOUND] sparc: Port amd7930 to new SBUS device layer.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 576c352e89e57cfa6c9f493e549d10d86f60a0cf
Author: David S. Miller <davem@davemloft.net>
Date:   Fri Jun 23 15:55:45 2006 -0700

    [SBUS]: Rewrite and plug into of_device framework.
    
    I severely apologize, I was still learning how to program
    in C when I wrote this stuff 10 years ago...
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd5314311634245172d40ccb418d89dac91d6ad6
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 15:55:17 2006 -0700

    [SPARC]: Port of_device layer and make ebus use it.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 942a6bdd1c4d2419a42be77ba1c964e4ba8dae9e
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 15:53:31 2006 -0700

    [SPARC]: Port sparc64 in-kernel device tree code to sparc32.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a2bd4fd17926d715a470fbe0ebe05128ba410984
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Fri Jun 23 01:44:10 2006 -0700

    [SPARC64]: Add of_device layer and make ebus/isa use it.
    
    Sparcspkr and power drivers are converted, to make sure it works.
    Eventually the SBUS device layer will use this as a sub-class.
    
    I really cannot cut loose on that bit until sparc32 is given the
    same infrastructure.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8cd24ed4f8031636fb5dacb04adee9e02556ecd5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 22:08:58 2006 -0700

    [SPARC64]: Expand of_*() interfaces some more.
    
    Import some more stuff from powerpc.
    
    Add of_device_is_compatible(), and of_find_compatible_node().
    Export some more of the other routines to modules.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 92c4e22593c22eb0943b232c61c98b517081637d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 20:23:56 2006 -0700

    [SPARC64]: Kill unused local vars in map_prom_timers().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 25c7581bcdd11cf9b82a8ef062a10bea310cc9e9
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 20:21:22 2006 -0700

    [SPARC64]: Kill off some more prom_getproperty() remnants.
    
    The remaining ones occur before we have imported the
    device tree.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 44bdef5e8f2e64ba5974b587989a829d57126bad
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 20:04:30 2006 -0700

    [SPARC64]: Convert Cheetah memory controller driver to in-kernel PROM tree.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cecc4e9222c4e2bca59834750e493eea6be97613
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 19:53:24 2006 -0700

    [SPARC64]: Convert central bus layer to in-kernel PROM device tree.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9c10a58ed634d98114c5717e2da761d8a63f2cd4
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 19:31:11 2006 -0700

    [SPARC64]: Kill ebus/isa range and interrupt mapping struct members.
    
    Unused outside of initial bus probe scan.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 690c8fd31f1e35985d0f35772fde514da59ec9d1
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 19:12:03 2006 -0700

    [SPARC64]: Use in-kernel PROM tree for EBUS and ISA.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit de8d28b16f5614aeb12bb69c8f9a38578b8d3ada
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 16:18:54 2006 -0700

    [SPARC64]: Convert sparc64 PCI layer to in-kernel device tree.
    
    One thing this change pointed out was that we really should
    pull the "get 'local-mac-address' property" logic into a helper
    function all the network drivers can call.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 765b5f32730cfd2608291e679060b0391570c8b3
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 00:49:15 2006 -0700

    [SPARC64]: Must run smp_setup_cpu_possible_map() after paging_init()
    
    Otherwise the in-kernel PROM device tree isn't built yet,
    and therefore the present cpu bits don't get set properly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c2a5a46be4a1c682e18e29e67785126b7610b14d
Author: David S. Miller <davem@davemloft.net>
Date:   Thu Jun 22 00:01:56 2006 -0700

    [SPARC64]: Fix for Niagara memory corruption.
    
    On some sun4v systems, after netboot the ethernet controller and it's
    DMA mappings can be left active.  The net result is that the kernel
    can end up using memory the ethernet controller will continue to DMA
    into, resulting in corruption.
    
    To deal with this, we are more careful about importing IOMMU
    translations which OBP has left in the IO-TLB.  If the mapping maps
    into an area the firmware claimed was free and available memory for
    the kernel to use, we demap instead of import that IOMMU entry.
    
    This is going to cause the network chip to take a PCI master abort on
    the next DMA it attempts, if it has been left going like this.  All
    tests show that this is handled properly by the PCI layer and the e1000
    drivers.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 486ad10a7e1b2bb61ea9e48c4d9510f50cd74fc5
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 22 00:00:00 2006 -0700

    [SPARC64]: Minor bug fix to obp_read_memory().
    
    If we end up zero'ing out the size of one of the entries,
    pop it out of the array completely because some code that
    examines these things cannot handle a zero length element
    properly.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 07f8e5f358a0b7240f1dad6b3819f2fd1103f159
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 23:34:02 2006 -0700

    [SPARC64]: Convert cpu_find_by_*() interface to in-kernel PROM device tree.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6d307724cb6a6b8466cad4fdf13d8a409bc2433f
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 23:07:29 2006 -0700

    [SPARC64]: Add of_getintprop_default().
    
    This encodes a common idiomatic coding pattern used when
    dealing with integer properties.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6760d28bc691bb255c501c9b680f2fc1162258b2
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 22:56:20 2006 -0700

    [SPARC64]: Convert sun4v virtual-device layer to in-kernel PROM device tree.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 27cc64c7cc9e41788e53655c717aeca2f55f2041
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 22:31:08 2006 -0700

    [SPARC64]: Rate limited kernel unaligned trap logging, ala IA64.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 20edac8ad487b784a286c1e59cc24819cb8d3b86
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 22:07:21 2006 -0700

    [SPARC64]: Disable verbose PCI IRQ probing messages by default.
    
    Allow them to be enabled with "pci=irq_verbose" on the
    boot command line.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e87dc35020bc555969810452f44bceaf8394eafa
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 18:18:47 2006 -0700

    [SPARC64]: Use in-kernel OBP device tree for PCI controller probing.
    
    It can be pushed even further down, but this is a first step.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aaf7cec2769942035985716452107fc5ba0b11f6
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 16:33:54 2006 -0700

    [SPARC64]: Add of_find_node_by_{name,type}().
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 372b07bb5a13f8a1b8a3ce49cd76d39a79dbd3bd
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Wed Jun 21 15:35:28 2006 -0700

    [SPARC64]: Import OBP device tree into kernel data structures.
    
    The basic framework is based on the PowerPC OF code.
    
    This code even tries to get the device addressing components
    correct in the full path names.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8fae097debdf8ac9b66d220ac258535ea09f3898
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Jun 20 15:23:28 2006 -0700

    [SBUS]: Start cleaning up generic sbus support layer.
    
    In particular, move the IRQ probing out to sparc32/sparc64
    arch specific code where it belongs.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4280370efe0e9c527ccd6188d6211a10bcb22b1e
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 12:55:46 2006 +0200

    [AGPGART] remove unused variable
    
    This patch removes an unused variable.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit d384ea691fe4ea8c2dd5b9b8d9042eb181776f18
Author: Dave Jones <davej@redhat.com>
Date:   Sat Jun 24 00:33:08 2006 -0400

    [PATCH] fix typo in acpi video brightness changes.
    
    Prevent possible null dereference due to misplaced ;
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6edad161cd4dfe1df772e7a74ab63cab53b5e8c1
Merge: 236ee8c... 0dd4b21...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 23 15:58:44 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/libata-dev: (258 commits)
      [libata] conversion to new debug scheme, part 1 of $N
      [PATCH] libata: Add ata_scsi_dev_disabled
      [libata] Add host lock to struct ata_port
      [PATCH] libata: implement per-dev EH action mask eh_info->dev_action[]
      [PATCH] libata-dev: move the CDB-intr DMA blacklisting
      [PATCH] ahci: disable NCQ support on vt8251
      [libata] ahci: add JMicron PCI IDs
      [libata] sata_nv: add PCI IDs
      [libata] ahci: Add NVIDIA PCI IDs.
      [PATCH] libata: convert several bmdma-style controllers to new EH, take #3
      [PATCH] sata_via: convert to new EH, take #3
      [libata] sata_nv: s/spin_lock_irqsave/spin_lock/ in irq handler
      [PATCH] sata_nv: add hotplug support
      [PATCH] sata_nv: convert to new EH
      [PATCH] sata_nv: better irq handlers
      [PATCH] sata_nv: simplify constants
      [PATCH] sata_nv: kill struct nv_host_desc and nv_host
      [PATCH] sata_nv: kill not-working hotplug code
      [libata] Update docs to reflect current driver API
      [PATCH] libata: add host_set->next for legacy two host_sets case, take #3
      ...

commit 236ee8c33277ab48671995f26dc68a4639936418
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Jun 23 13:49:25 2006 -0700

    [IA64] fix ia64 build (fadt_descriptor)
    
    arch/ia64/kernel/acpi.c got forgotten when include/acpi/actbl.h
    got a cleanup.
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 8cf60e04a131310199d5776e2f9e915f0c468899
Merge: 1323523... 95eaa5f...
Author: Tony Luck <tony.luck@intel.com>
Date:   Fri Jun 23 13:46:23 2006 -0700

    Auto-update from upstream

commit 95eaa5fa8eb2c345244acd5f65b200b115ae8c65
Author: Nicolas Pitre <nico@cam.org>
Date:   Fri Jun 23 11:40:53 2006 -0400

    [PATCH] fix silly ARM non-EABI build error
    
    My bad.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5cf4b9a02cb9b8ac16eaafb0fcd7fd24215146e
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 04:01:35 2006 -0700

    [PATCH] s390_hypfs filesystem: get_sb_single() fix
    
    Update hypfs for dhowells API changes.
    
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Ingo Oeser <ioe-lkml@rameria.de>
    Cc: Joern Engel <joern@wohnheim.fh-wedel.de>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 138a0128c01899ee8492858a50856b90d0d9d815
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 03:31:19 2006 -0700

    [PATCH] cpufreq build fix
    
    drivers/cpufreq/cpufreq_ondemand.c: In function 'do_dbs_timer':
    drivers/cpufreq/cpufreq_ondemand.c:374: warning: implicit declaration of function 'lock_cpu_hotplug'
    drivers/cpufreq/cpufreq_ondemand.c:381: warning: implicit declaration of function 'unlock_cpu_hotplug'
    drivers/cpufreq/cpufreq_conservative.c: In function 'do_dbs_timer':
    drivers/cpufreq/cpufreq_conservative.c:425: warning: implicit declaration of function 'lock_cpu_hotplug'
    drivers/cpufreq/cpufreq_conservative.c:432: warning: implicit declaration of function 'unlock_cpu_hotplug'
    
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8269730b389d4793348d521140f9c76fb1828249
Author: Andi Kleen <ak@suse.de>
Date:   Wed Jun 21 14:48:09 2006 +0200

    [BLOCK] Fix bounce limit address check
    
    Do a safer check for when to enable DMA. Currently we enable ISA DMA
    for cases that do not need it, resulting in OOM conditions when ZONE_DMA
    runs out of space.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit dd67d051529387f6e44d22d1d5540ef281965fdd
Author: Jens Axboe <axboe@suse.de>
Date:   Wed Jun 21 09:36:18 2006 +0200

    [PATCH] rbtree: support functions used by the io schedulers
    
    They all duplicate macros to check for empty root and/or node, and
    clearing a node. So put those in rbtree.h.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 9e94cd4fd1812bab45237f998b3c6fa1b24023fd
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jun 20 15:01:12 2006 +0200

    [PATCH] splice: retrieve mapping after locking the page
    
    Otherwise we could be racing with truncate/mapping removal.
    
    Problem found/fixed by Nick Piggin <npiggin@suse.de>, logic rewritten
    by me.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit fd61af0384014ca29428ace7c17a978b755aeddd
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Jun 16 15:35:39 2006 +0200

    [PATCH] cfq-iosched: rq update fixes
    
    - Remember to set ->last_sector so that the cfq_choose_req() logic
      works correctly.
    
    - Remove redundant call to cfq_choose_req()
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit caaa5f9f0a75d1dc5e812e69afdbb8720e077fd3
Author: Jens Axboe <axboe@suse.de>
Date:   Fri Jun 16 11:23:00 2006 +0200

    [PATCH] cfq-iosched: many performance fixes
    
    This is a collection of patches that greatly improve CFQ performance
    in some circumstances.
    
    - Change the idling logic to only kick in after a request is done and we
      are deciding what to do. Before the idling included the request service
      time, so it was hard to adjust. Now it's true think/idle time.
    
    - Take advantage of TCQ/NCQ/queueing for seeky sync workloads, but keep
      it in control for sync and sequential (or close to) workloads.
    
    - Expire queues immediately and move on to other busy queues, if we are
      not going to idle after the current one finishes.
    
    - Don't rearm idle timer if there are no busy queues. Just leave the
      system idle.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 35e6077cb16f93517ba5a51ba849b186d2474d60
Author: Jens Axboe <axboe@suse.de>
Date:   Wed Jun 14 09:10:45 2006 +0200

    [PATCH] cfq-iosched: correctly set ioprio on both targets
    
    Patch originally from Vasily Tarasov <vtaras@sw.ru>
    
    If you set io-priority of process 1 using sys_ioprio_set system call by
    another process 2 (like ionice do), then cfq_init_prio_data() function
    sets priority of process 2 (current) on queue of process 1 and clears
    the flag, that designates change of ioprio.  So the process  1 will work
    like with priority of process 2.
    
    I propose not to call cfq_init_prio_data() on io-priority change, but
    only mark queue as queue with changed prority.  Every time when new
    request comes cfq-scheduler checks for this flag and atomaticaly changes
    priority of queue to new value.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit b17fd9bceb99610f6dc7998c9a4ed6b71520be2b
Author: Jens Axboe <axboe@suse.de>
Date:   Mon Jun 19 10:06:48 2006 +0200

    [PATCH] Make CFQ the default IO scheduler
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 8f34ee75decb80007ba77bba5a7384eadff4866d
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jun 13 09:02:34 2006 +0200

    [PATCH] Rearrange a few struct request members
    
    This saves 8 bytes of data in 64-bit archs.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit ad3caddaa1708e506f20b8e25a4a8ae586fc7d5b
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jun 13 08:46:57 2006 +0200

    [PATCH] Get rid of struct request request_pm_state member
    
    The IDE power management can just use the ->end_io_data member to store
    it's data.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit b31dc66a54ad986b6b73bdc49c8efc17cbad1833
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jun 13 08:26:10 2006 +0200

    [PATCH] Kill PF_SYNCWRITE flag
    
    A process flag to indicate whether we are doing sync io is incredibly
    ugly. It also causes performance problems when one does a lot of async
    io and then proceeds to sync it. Part of the io will go out as async,
    and the other part as sync. This causes a disconnect between the
    previously submitted io and the synced io. For io schedulers such as CFQ,
    this will cause us lost merges and suboptimal behaviour in scheduling.
    
    Remove PF_SYNCWRITE completely from the fsync/msync paths, and let
    the O_DIRECT path just directly indicate that the writes are sync
    by using WRITE_SYNC instead.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit 271f18f102c789f59644bb6c53a69da1df72b2f4
Author: Jens Axboe <axboe@suse.de>
Date:   Tue Jun 13 08:08:38 2006 +0200

    [PATCH] cfq-iosched: Don't set the queue batching limits
    
    We cannot update them if the user changes nr_requests, so don't
    set it in the first place. The gains are pretty questionable as
    well. The batching loss has been shown to decrease throughput.
    
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit acf421755593f7d7bd9352d57eda796c6eb4fa43
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jun 12 14:20:58 2006 +0200

    [PATCH] remove dead code from elevator switching
    
    We already drop the refcount in elevator_exit(), and as
    we're setting 'e' to NULL, we'll never take that branch anyway.
    Finally, as 'e' is a local var that isn't referenced afterwards,
    setting it to NULL is pointless.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit fda151d9feafc0e8418f23c716587c44394fcdbf
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 5 12:09:50 2006 +0200

    [PATCH] blktrace_api.h: endian annotations
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit a038e2536472b4dd932399b5277e65f188811de5
Author: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
Date:   Mon Jun 5 12:09:01 2006 +0200

    [PATCH] blk_start_queue() must be called with irq disabled - add warning
    
    The queue lock can be taken from interrupts so it must always be taken with
    irq disabling primitives.  Some primitives already verify this.
    blk_start_queue() is called under this lock, so interrupts must be
    disabled.
    
    Also document this requirement clearly in blk_init_queue(), where the queue
    spinlock is set.
    
    Signed-off-by: Paolo 'Blaisorblade' Giarrusso <blaisorblade@yahoo.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jens Axboe <axboe@suse.de>

commit bae386f7884aa3720cc7880b36a41a1d2b9c327b
Author: Akinobu Mita <mita@miraclelinux.com>
Date:   Mon Apr 24 21:12:59 2006 +0200

    [PATCH] iosched: use hlist for request hashtable
    
    Use hlist instead of list_head for request hashtable in deadline-iosched
    and as-iosched. It also can remove the flag to know hashed or unhashed.
    
    Signed-off-by: Akinobu Mita <mita@miraclelinux.com>
    Signed-off-by: Jens Axboe <axboe@suse.de>
    
     block/as-iosched.c       |   45 +++++++++++++++++++--------------------------
     block/deadline-iosched.c |   39 ++++++++++++++++-----------------------
     2 files changed, 35 insertions(+), 49 deletions(-)

commit 199f4c9f76fd8b030405abddf294e771f888de03
Merge: 3722447... ca6bb5d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 23 08:00:01 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [NET]: Require CAP_NET_ADMIN to create tuntap devices.
      [NET]: fix net-core kernel-doc
      [TCP]: Move inclusion of <linux/dmaengine.h> to correct place in <linux/tcp.h>
      [IPSEC]: Handle GSO packets
      [NET]: Added GSO toggle
      [NET]: Add software TSOv4
      [NET]: Add generic segmentation offload
      [NET]: Merge TSO/UFO fields in sk_buff
      [NET]: Prevent transmission after dev_deactivate
      [IPV6] ADDRCONF: Fix default source address selection without CONFIG_IPV6_PRIVACY
      [IPV6]: Fix source address selection.
      [NET]: Avoid allocating skb in skb_pad

commit 37224470c8c6d90a4062e76a08d4dc1fcf91fc89
Merge: e833195... ae6c859...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Fri Jun 23 07:52:36 2006 -0700

    Merge branch 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6
    
    * 'release' of git://git.kernel.org/pub/scm/linux/kernel/git/lenb/linux-acpi-2.6: (65 commits)
      ACPI: suppress power button event on S3 resume
      ACPI: resolve merge conflict between sem2mutex and processor_perflib.c
      ACPI: use for_each_possible_cpu() instead of for_each_cpu()
      ACPI: delete newly added debugging macros in processor_perflib.c
      ACPI: UP build fix for bugzilla-5737
      Enable P-state software coordination via _PDC
      P-state software coordination for speedstep-centrino
      P-state software coordination for acpi-cpufreq
      P-state software coordination for ACPI core
      ACPI: create acpi_thermal_resume()
      ACPI: create acpi_fan_suspend()/acpi_fan_resume()
      ACPI: pass pm_message_t from acpi_device_suspend() to root_suspend()
      ACPI: create acpi_device_suspend()/acpi_device_resume()
      ACPI: replace spin_lock_irq with mutex for ec poll mode
      ACPI: Allow a WAN module enable/disable on a Thinkpad X60.
      sem2mutex: acpi, acpi_link_lock
      ACPI: delete unused acpi_bus_drivers_lock
      sem2mutex: drivers/acpi/processor_perflib.c
      ACPI add ia64 exports to build acpi_memhotplug as a module
      ACPI: asus_acpi_init(): propagate correct return value
      ...
    
    Manual resolve of conflicts in:
    
    	arch/i386/kernel/cpu/cpufreq/acpi-cpufreq.c
    	arch/i386/kernel/cpu/cpufreq/speedstep-centrino.c
    	include/acpi/processor.h

commit e83319510b04dd51a60da8a0b4ccf8b92b3ab1ad
Author: Bob Copeland <me@bobcopeland.com>
Date:   Fri Jun 23 02:06:09 2006 -0700

    [PATCH] docs: update sparse.txt with CHECK_ENDIAN
    
    Update the sparse documentation to omit the -Wbitwise flag example (as it
    is now passed by default), and document the kernel defines to enable
    endianness checking.
    
    Signed-off-by: Bob Copeland <me@bobcopeland.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit eefe85ee350ece1bdf3e9a61e941d3394a528660
Author: Constantine Sapuntzakis <csapuntz@gmail.com>
Date:   Fri Jun 23 02:06:08 2006 -0700

    [PATCH] drivers/block/loop.c: don't return garbage if LOOP_SET_STATUS not called
    
    While writing a version of losetup, I ran into the problem that the loop
    device was returning total garbage.
    
    It turns out the problem was that this losetup was only issuing the
    LOOP_SET_FD ioctl and not issuing a subsequent LOOP_SET_STATUS ioctl.  This
    losetup didn't have any special status to set, so it left out the call.
    
    The deeper cause is that loop_set_fd sets the transfer function to NULL,
    which causes no transfer to happen lo_do_transfer.
    
    This patch fixes the problem by setting transfer to transfer_none in
    loop_set_fd.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98bd34eaf1a7d1f2ed9c4e5d3a9664d3dcdd2159
Author: Mike Miller <mike.miller@hp.com>
Date:   Fri Jun 23 02:06:07 2006 -0700

    [PATCH] make kernel warn about incorrectly sized partitions
    
    Sometimes partitions claim to be larger than the reported capacity of a
    disk device.  This patch makes the kernel warn about those partitions.
    
    We still permit these patitions to be used.  Quoting Andries Brouwer
    <Andries.Brouwer@cwi.nl>:
    
     Case 1: The kernel is mistaken about the size of the disk.  (There are
     commands to clip a disk to a certain capacity, there are jumpers to tell a
     disk that it should report a certain capacity etc.  Usually this is because
     of BIOS bugs.  In bad cases the machine will crash in the BIOS and hence fail
     to boot if the disk reports full capacity.) In such cases actually accessing
     the blocks of the partition may work fine, or may work fine after running an
     unclip utility.  I wrote "setmax" some years ago precisely for this reason.
    
     Case 2: There was a messy partition table (maybe just a rounding error) but
     the actual filesystem on the partition is contained in the physical disk.
     Now using the filesystem goes without problem.
    
     Case 3: Both partition and filesystem extend beyond the end of the disk.  In
     forensic or debugging situations one often uses a copy of the start of a
     disk.  Now access beyond the end gives an expected I/O error.
    
    Signed-off-by: Mike Miller <mike.miller@hp.com>
    Signed-off-by: Stephen Cameron <steve.cameron@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 125e18745f16685f69a34fd6130d47598fc4bf54
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Fri Jun 23 02:06:06 2006 -0700

    [PATCH] More BUG_ON conversion
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Acked-by: "Salyzyn, Mark" <mark_salyzyn@adaptec.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 78ce89c92bc6eaf5933b5664bff64253a7103bd7
Author: Jan Kara <jack@suse.cz>
Date:   Fri Jun 23 02:06:05 2006 -0700

    [PATCH] JBD: split checkpoint lists
    
    Split the checkpoint list of the transaction into two lists.  In the first
    list we keep the buffers that need to be submitted for IO.  In the second
    list are kept buffers that were already submitted and we just have to wait
    for the IO to complete.  This should simplify a handling of checkpoint
    lists a bit and can eventually be also a performance gain.
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Cc: Mark Fasheh <mark.fasheh@oracle.com>
    Cc: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cdaad343b561cdeb38b0578bb038eb5e87ed5551
Author: Peter Hagervall <hager@cs.umu.se>
Date:   Fri Jun 23 02:06:04 2006 -0700

    [PATCH] Sparse fixes for synclink_cs
    
    Mark a few non-exported functions static.
    
    Signed-off-by: Peter Hagervall <hager@cs.umu.se>
    Cc: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 908dcecda1d18803b5823f30e6c47d2882dc0cf1
Author: Jan Beulich <jbeulich@novell.com>
Date:   Fri Jun 23 02:06:00 2006 -0700

    [PATCH] adjust handle_IRR_event() return type
    
    Correct the return type of handle_IRQ_event() (inconsistency noticed during
    Xen development), and remove redundant declarations.  The return type
    adjustment required breaking out the definition of irqreturn_t into a
    separate header, in order to satisfy current include order dependencies.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Cc: Ian Molton <spyro@f2s.com>
    Cc: Mikael Starvik <starvik@axis.com>
    Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
    Cc: Hirokazu Takata <takata.hirokazu@renesas.com>
    Cc: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Miles Bader <uclinux-v850@lsi.nec.co.jp>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a5d6839b75ca4a29b5e0a5595914a8715e8f746d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 02:05:59 2006 -0700

    [PATCH] drivers/md/raid6algos.c: fix a NULL dereference
    
    This patch fixes a NULL dereference spotted by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: "H. Peter Anvin" <hpa@zytor.com>
    Cc: Neil Brown <neilb@cse.unsw.edu.au>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 226a6b84aaaf1fac7a5d41cf4e7387fd9ba895d5
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jun 23 02:05:58 2006 -0700

    [PATCH] CodingStyle: add typedefs chapter
    
    Add a chapter on typedefs, copied from an email from Linus to lkml on Feb.
    3, 2006.  (Subject: Re: [RFC][PATCH 1/5] Virtualization/containers:
    startup)
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3439dd86e34580384d3b58cf8d54a9283cd7a342
Author: Porpoise <porpoise.chiang@gmail.com>
Date:   Fri Jun 23 02:05:56 2006 -0700

    [PATCH] When CONFIG_BASE_SMALL=1, cascade() may enter an infinite loop
    
    When CONFIG_BASE_SAMLL=1, cascade() in may enter the infinite loop.
    Because of CONFIG_BASE_SMALL=1(TVR_BITS=6 and TVN_BITS=4), the list
    base->tv5 may cascade into base->tv5.  So, the kernel enters the infinite
    loop in the function cascade().
    
    I created a test module to verify this bug, and a patch to fix it.
    
    #include <linux/kernel.h>
    #include <linux/module.h>
    #include <linux/init.h>
    #include <linux/timer.h>
    #if 0
    #include <linux/kdb.h>
    #else
    #define kdb_printf printk
    #endif
    
    #define TVN_BITS (CONFIG_BASE_SMALL ? 4 : 6)
    #define TVR_BITS (CONFIG_BASE_SMALL ? 6 : 8)
    #define TVN_SIZE (1 << TVN_BITS)
    #define TVR_SIZE (1 << TVR_BITS)
    #define TVN_MASK (TVN_SIZE - 1)
    #define TVR_MASK (TVR_SIZE - 1)
    
    #define TV_SIZE(N)  (N*TVN_BITS  + TVR_BITS)
    
    struct timer_list timer0;
    struct timer_list dummy_timer1;
    struct timer_list dummy_timer2;
    
    void dummy_timer_fun(unsigned long data) {
    }
    unsigned long j=0;
    void check_timer_base(unsigned long data)
    {
            kdb_printf("check_timer_base %08x\n",jiffies);
            mod_timer(&timer0,(jiffies & (~0xFFF)) + 0x1FFF);
    }
    
    int init_module(void)
    {
            init_timer(&timer0);
            timer0.data = (unsigned long)0;
            timer0.function = check_timer_base;
            mod_timer(&timer0,jiffies+1);
    
            init_timer(&dummy_timer1);
            dummy_timer1.data = (unsigned long)0;
            dummy_timer1.function = dummy_timer_fun;
    
            init_timer(&dummy_timer2);
            dummy_timer2.data = (unsigned long)0;
            dummy_timer2.function = dummy_timer_fun;
    
            j=jiffies;
            j&=(~((1<<TV_SIZE(3))-1));
            j+=(1<<TV_SIZE(3));
            j+=(1<<TV_SIZE(4));
    
            kdb_printf("mod_timer %08x\n",j);
    
            mod_timer(&dummy_timer1, j );
            mod_timer(&dummy_timer2, j );
    
            return 0;
    }
    
    void cleanup_module()
    {
            del_timer_sync(&timer0);
            del_timer_sync(&dummy_timer1);
            del_timer_sync(&dummy_timer2);
    }
    
    (Cleanups from Oleg)
    
    [oleg@tv-sign.ru: use list_replace_init()]
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Matt Mackall <mpm@selenic.com>
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 626ab0e69d376fa07599af669af8ba92d58e87c1
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Fri Jun 23 02:05:55 2006 -0700

    [PATCH] list: use list_replace_init() instead of list_splice_init()
    
    list_splice_init(list, head) does unneeded job if it is known that
    list_empty(head) == 1.  We can use list_replace_init() instead.
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Acked-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 54e73770357142e297c916c7865f5fca7499f69c
Author: Oleg Nesterov <oleg@tv-sign.ru>
Date:   Fri Jun 23 02:05:54 2006 -0700

    [PATCH] list: introduce list_replace() helper
    
    list_replace() is similar to list_replace_rcu(), but unlike
    list_replace_rcu() it
    
    	could be used when list_empty(old) == 1
    
    	doesn't use barriers
    
    Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb259f07b1daacafac3b12ecd7f180faf7e506b0
Author: bjdouma <bjdouma@xs4all.nl>
Date:   Fri Jun 23 02:05:53 2006 -0700

    [PATCH] two additions to ./linux/Documentation/ioctl-number.txt
    
    Cc: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f5befceb5cfecba49fdf61f8e0eb4d453200eac9
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Fri Jun 23 02:05:52 2006 -0700

    [PATCH] SGI IOC4: Detect IO card variant
    
    There are three different IO cards which an SGI IOC4 controller may find
    itself on.  One of these variants does not bring out the IDE and serial
    signals, so we need to disable attaching the corresponding IOC4 subdrivers
    to such cards.
    
    Cleans up message clutter emitted during device probing.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 862f5f0133f1c8a179dd93adc03d43f8f7e8bac5
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jun 23 02:05:52 2006 -0700

    [PATCH] Doc: add audit & acct to DocBook
    
    Fix one audit kernel-doc description (one parameter was missing).
    Add audit*.c interfaces to DocBook.
    Add BSD accounting interfaces to DocBook.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d83015b8f62ee3fcd338f6f009051ed57f77a531
Author: Paul E. McKenney <paulmck@us.ibm.com>
Date:   Fri Jun 23 02:05:51 2006 -0700

    [PATCH] Make RCU API inaccessible to non-GPL Linux kernel modules
    
    Remove synchronize_kernel() (deprecated 2-APR-2005 in
    http://lkml.org/lkml/2005/4/3/11) and makes the RCU API inaccessible to
    non-GPL Linux kernel modules (as was announced more than one year ago in
    http://lkml.org/lkml/2005/4/3/8).  Tested on x86 and ppc64.
    
    Signed-off-by: "Paul E. McKenney" <paulmck@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55f4e8d156d23709739029afb108932ef94cac94
Author: Jes Sorensen <jes@sgi.com>
Date:   Fri Jun 23 02:05:50 2006 -0700

    [PATCH] kernel/sys.c doesn't need init.h
    
    kernel/sys.c doesn't have anything in it relying on linux/init.h -
    remove the include.
    
    Signed-off-by: Jes Sorensen <jes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 915a56d2394f4ef70e9cb7115a9bdad778276338
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jun 23 02:05:49 2006 -0700

    [PATCH] add Doc/SubmitChecklist
    
    Provide a checklist of techniques to aid kernel patch submitters in
    producing healthy patches and in lessening a burden on maintainers.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0f23603fb2607315ce52432cc4225df410828cf
Author: Neil Brown <neilb@suse.de>
Date:   Fri Jun 23 02:05:48 2006 -0700

    [PATCH] Remove semi-softlockup from invalidate_mapping_pages
    
    If invalidate_mapping_pages is called to invalidate a very large mapping
    (e.g.  a very large block device) and if the only active page in that
    device is near the end (or at least, at a very large index), such as, say,
    the superblock of an md array, and if that page happens to be locked when
    invalidate_mapping_pages is called, then
    
      pagevec_lookup will return this page and
      as it is locked, 'next' will be incremented and pagevec_lookup
      will be called again. and again. and again.
      while we count from 0 upto a very large number.
    
    We should really always set 'next' to 'page->index+1' before going around
    the loop again, not just if the page isn't locked.
    
    Cc: "Steinar H. Gunderson" <sgunderson@bigfoot.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 57ae2508610d50893cb3e3bbb869ff70ff724a2a
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:05:47 2006 -0700

    [PATCH] CONFIG_NET=n build fix
    
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit deb0e9b234af24f4a827757fae9ff5542a3d2a12
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:05:46 2006 -0700

    [PATCH] connector-exports
    
    Put the connector exports at the functions so people can see them in context.
    
    Cc: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 66f969d064e46e6690c3426e2af846e76fb80e83
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:05:45 2006 -0700

    [PATCH] ipmi: strstrip conversion
    
    Switch an open-coded strstrip() to use the new API.
    
    Acked-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 481fad483487ea967fe20bbc9e565d787f7bf20f
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:05:44 2006 -0700

    [PATCH] strstrip() API
    
    Add a new strstrip() function to lib/string.c for removing leading and
    trailing whitespace from a string.
    
    Cc: Michael Holzheu <holzheu@de.ibm.com>
    Acked-by: Ingo Oeser <ioe-lkml@rameria.de>
    Acked-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Cc: Corey Minyard <minyard@acm.org>
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Acked-by: Michael Holzheu <HOLZHEU@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3fa2164d03fb7af17fcfe4f8800dd754fbd99ff7
Author: Matt Helsley <matthltc@us.ibm.com>
Date:   Fri Jun 23 02:05:44 2006 -0700

    [PATCH] Process Events: License Change
    
    Change the license on the process event structure passed between kernel and
    userspace.
    
    Signed-off-by: Matt Helsley <matthltc@us.ibm.com>
    Acked-by: Guillaume Thouvenin <guillaume.thouvenin@bull.net>
    Acked-by: Nguyen Anh Quynh <aquynh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d31a4ea8cf7a2afc7299d1d3d8732ca54a5934e
Author: Matt Helsley <matthltc@us.ibm.com>
Date:   Fri Jun 23 02:05:42 2006 -0700

    [PATCH] Process Events - Header Cleanup
    
    Move connector header include to precisely where it's needed.
    
    Remove unused time.h header file as well.  This was leftover from previous
    iterations of the process events patches.
    
    Signed-off-by: Matt Helsley <matthltc@us.ibm.com>
    Cc: Guillaume Thouvenin <guillaume.thouvenin@bull.net>
    Cc: Nguyen Anh Quynh <aquynh@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 368a5fa1f28589e6b54588a139ea872d5b4b1914
Author: Hua Zhong <hzhong@gmail.com>
Date:   Fri Jun 23 02:05:42 2006 -0700

    [PATCH] remove unlikely() in might_sleep_if()
    
    The likely() profiling tools show that __alloc_page() causes a lot of misses:
    
    !       132    119193 __alloc_pages():mm/page_alloc.c@937
    
    Because most __alloc_page() calls are not atomic.
    
    Signed-off-by: Hua Zhong <hzhong@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0216bfcffe424a5473daa4da47440881b36c1f41
Author: Mingming Cao <cmm@us.ibm.com>
Date:   Fri Jun 23 02:05:41 2006 -0700

    [PATCH] percpu counter data type changes to suppport more than 2**31 ext3 free blocks counter
    
    The percpu counter data type are changed in this set of patches to support
    more users like ext3 who need more than 32 bit to store the free blocks
    total in the filesystem.
    
    - Generic perpcu counters data type changes.  The size of the global counter
      and local counter were explictly specified using s64 and s32.  The global
      counter is changed from long to s64, while the local counter is changed from
      long to s32, so we could avoid doing 64 bit update in most cases.
    
    - Users of the percpu counters are updated to make use of the new
      percpu_counter_init() routine now taking an additional parameter to allow
      users to pass the initial value of the global counter.
    
    Signed-off-by: Mingming Cao <cmm@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3cbc564024d8f174202f023e8a2991782f6a9431
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Fri Jun 23 02:05:40 2006 -0700

    [PATCH] percpu_counters: create lib/percpu_counter.c
    
    - Move percpu_counter routines from mm/swap.c to lib/percpu_counter.c
    
    Signed-off-by: Ravikiran G Thirumalai <kiran@scalex86.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d09042da7284a86ffbdd18695f517a71514ed598
Author: Laurent MEYER <meyerlau@fr.ibm.com>
Date:   Fri Jun 23 02:05:36 2006 -0700

    [PATCH] fix incorrect SA_ONSTACK behaviour for 64-bit processes
    
    - When setting a sighandler using sigaction() call, if the flag
      SA_ONSTACK is set and no alternate stack is provided via sigaltstack(),
      the kernel still try to install the alternate stack.  This behavior is
      the opposite of the one which is documented in Single Unix Specifications
      V3.
    
    - Also when setting an alternate stack using sigaltstack() with the flag
      SS_DISABLE, the kernel try to install the alternate stack on signal
      delivery.
    
    These two use cases makes the process crash at signal delivery.
    
    Signed-off-by: Laurent Meyer <meyerlau@fr.ibm.com>
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: David Howells <dhowells@redhat.com>
    Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Kyle McMartin <kyle@mcmartin.ca>
    Cc: Paul Mundt <lethal@linux-sh.org>
    Cc: Kazumoto Kojima <kkojima@rr.iij4u.or.jp>
    Cc: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 785d55708c24c28d7646f3d1fe6c9f82fb714311
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 02:05:35 2006 -0700

    [PATCH] binflt_elf: remove more casts
    
    Remove redundant casts from NEW_AUX_ENT() arguments in fs/binfmt_elf.c
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f4e5cc2c44bf760c02875cf48c886c50ec7d2734
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 02:05:35 2006 -0700

    [PATCH] binfmt_elf: CodingStyle cleanup and remove some pointless casts
    
    Do a CodingStyle cleanup of fs/binfmt_elf.c and also remove some pointless
    casts of kmalloc() return values in the same file.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 11420211b8123d0e2f71945ad022e8eec28ebfce
Author: Jan Engelhardt <jengelh@linux01.gwdg.de>
Date:   Fri Jun 23 02:05:34 2006 -0700

    [PATCH] Update devices.txt
    
    Update Documentation/devices.txt with a new version from the LANANA site
    http://www.lanana.org/docs/device-list/devices-2.6+.txt
    
    Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
    Cc: Torben Mathiasen <device@lanana.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9becde79d2c5e382d955167c07017b5e34b142f0
Author: Jonathan McDowell <noodles@earth.li>
Date:   Fri Jun 23 02:05:33 2006 -0700

    [PATCH] leds: Amstrad Delta LED support
    
    Use the new LED infrastructure to support the 6 LEDs present on the Amstrad
    Delta.
    
    [akpm@osdl.org: cleanup]
    Signed-off-by: Jonathan McDowell <noodles@earth.li>
    Ackde-by: Richard Purdie <rpurdie@rpsys.net>
    Cc: Ben Dooks <ben@fluff.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 83d4e6e7fba0b2a01092f0cf14ba2e33bd1253e9
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:05:32 2006 -0700

    [PATCH] make noirqdebug/irqfixup __read_mostly, add (un)likely()
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e6022603b9aa7d61d20b392e69edcdbbc1789969
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:05:32 2006 -0700

    [PATCH] ext3_clear_inode(): avoid kfree(NULL)
    
    Steven Rostedt <rostedt@goodmis.org> points out that `rsv' here is usually
    NULL, so we should avoid calling kfree().
    
    Also, fix up some nearby whitespace damage.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 304c4c841a31c780a45d65e389b07706babf5d36
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:05:31 2006 -0700

    [PATCH] jbd: avoid kfree(NULL)
    
    There are a couple of places where JBD has to check to see whether an unneeded
    memory allocation was performed.  Usually it _was_ needed, so we end up
    calling kfree(NULL).  We can micro-optimise that by checking the pointer
    before calling kfree().
    
    Thanks to Steven Rostedt <rostedt@goodmis.org> for identifying this.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22722051fb6bcbb95c895e68dad10d34a9db7e4d
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:05:30 2006 -0700

    [PATCH] x86/powerpc make hardirq_ctx and softirq_ctx __read_mostly
    
    The hardirq_ctx and softirq_ctx variables are written to on init only,
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 89d0cf01c0aa9e8241cc3703a359ecd6abf3c28a
Author: Daniel Walker <dwalker@mvista.com>
Date:   Fri Jun 23 02:05:29 2006 -0700

    [PATCH] invert irq/migration.c brach prediction
    
    If you get to that point in the code it means that desc->move_irq is set,
    pending_irq_cpumask[irq] and cpu_online_map should have a value.  Still
    pretty good chance anding those two you'll still have a value.  So these
    two branch predictors should be inverted.
    
    Signed-off-by: Daniel Walker <dwalker@mvista.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d20d04bc9befbd752092b4aa42bb8254a1af0776
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 02:05:28 2006 -0700

    [PATCH] ISDN: correctly handle isdn_writebuf_stub() errors
    
    isdn_writebuf_stub() forgets to detect memory allocation and uaccess errors.
    And when that's fixed, if a error happens the caller will just keep on
    looping.
    
    So change the caller to detect the error, and to return it.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 94a6735cd67375029c2092e6d46f14b2721e6793
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 02:05:27 2006 -0700

    [PATCH] i4l: memory leak fix for sc_ioctl().
    
    Fix leak of `rcvmsg' in sc_ioctl().
    
    There are two returns in the switch in sc_ioctl (the SCIOCSTART case) that
    may leak `rcvmsg'.  This patch fixes that by adding a kfree() call at the
    beginning of that case.
    
    Bug found by the coverity checker as #1098
    
    Eric Sesterhenn send me a patch to fix the leak(s) by adding 2 kfree()
    calls before the returns, I changed that into just a single call at the
    beginning.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Cc: Karsten Keil <kkeil@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2eebb1925d25cfd7e7cd2eb18ac4d4e6d189dba0
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 02:05:26 2006 -0700

    [PATCH] OSS: cs46xx cleanup and tiny bugfix
    
    Here's a patch for cs46xx that
     - (mostly) cleans up the cs46xx driver according to CodingStyle
     - removes a bunch of pointless casts
     - fixes a small, potential use of uninitialized variable, bug
     - reduces the size of the compiled code by 36 bytes
     - reduces the size of the source file by 1831 bytes
    
    I know I should probably have split this into bits, but since I only
    thought of that *after* doing all the edits, splitting it up would have
    been a royal pain. And since these are all pretty trivial changes I thought
    I'd just submit the one huge patch and hope people could live with it (if
    not, then just tell me and I'll split it).
    
    The bug fix that's in there may be hard to spot, so I'll point it out. It's
    the
       -       int val, valsave, mapped, ret;
       +       int val, valsave, ret;
       +       int mapped = 0;
    bit.
    Without that change we may use `mapped' uninitialized if, in cs_ioctl, the
    first test of "if(state)" is false and the second "if(state)" test is true.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9ada7340987aa24395809570840c7c6847044f52
Author: Jan Kara <jack@suse.cz>
Date:   Fri Jun 23 02:05:25 2006 -0700

    [PATCH] jbd: fix BUG in journal_commit_transaction()
    
    Fix possible assertion failure in journal_commit_transaction() on
    jh->b_next_transaction == NULL (when we are processing BJ_Forget list and
    buffer is not jbddirty).
    
    !jbddirty buffers can be placed on BJ_Forget list for example by
    journal_forget() or by __dispose_buffer() - generally such buffer means
    that it has been freed by this transaction.
    
    Freed buffers should not be reallocated until the transaction has committed
    (that's why we have the assertion there) but they *can* be reallocated when
    the transaction has already been committed to disk and we are just
    processing the BJ_Forget list (as soon as we remove b_committed_data from
    the bitmap bh, ext3 will be able to reallocate buffers freed by the
    committing transaction).  So we have to also count with the case that the
    buffer has been reallocated and b_next_transaction has been already set.
    
    And one more subtle point: it can happen that we manage to reallocate the
    buffer and also mark it jbddirty.  Then we also add the freed buffer to the
    checkpoint list of the committing trasaction.  But that should do no harm.
    
    Non-jbddirty buffers should be filed to BJ_Reserved and not BJ_Metadata
    list.  It can actually happen that we refile such buffers during the commit
    phase when we reallocate in the running transaction blocks deleted in
    committing transaction (and that can happen if the committing transaction
    already wrote all the data and is just cleaning up BJ_Forget list).
    
    Signed-off-by: Jan Kara <jack@suse.cz>
    Acked-by: "Stephen C. Tweedie" <sct@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8e0a43d8fa953179505869ec28de78550246e795
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 23 02:05:23 2006 -0700

    [PATCH] cond_resched() might_sleep() fix
    
    add the __might_sleep() check back to cond_resched().
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6e6672604773b9bae44d88d38afdf0763c104b1c
Author: Prasanna Meda <mlp@google.com>
Date:   Fri Jun 23 02:05:23 2006 -0700

    [PATCH] dup fd error fix
    
    Set errorp in dup_fd, it will be used in sys_unshare also.
    
    Signed-off-by: Prasanna Meda <mlp@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 538c5902b81cc384e93ad3834b6d4a0b3fcb2285
Author: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
Date:   Fri Jun 23 02:05:22 2006 -0700

    [PATCH] clean up default value of IP_DCCP_ACKVEC
    
    Default values for boolean and tristate options can only be 'y', 'm' or 'n'.
    This patch removes wrong default for IP_DCCP_ACKVEC.
    
    Signed-off-by: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    Cc: Arnaldo Carvalho de Melo <acme@conectiva.com.br>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a9d6e0632b867ca71d3ee1e7e5c2365b6711031
Author: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
Date:   Fri Jun 23 02:05:21 2006 -0700

    [PATCH] clean up default value of USB_ISP116X_HCD, USB_SL811_HCD and USB_SL811_CS
    
    Default values for boolean and tristate options can only be 'y', 'm' or 'n'.
    This patch removes wrong default for USB_ISP116X_HCD, USB_SL811_HCD and
    USB_SL811_CS.
    
    Signed-off-by: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c7a43575518702fe6829d970c3d04acd91ae5c91
Author: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
Date:   Fri Jun 23 02:05:20 2006 -0700

    [PATCH] clean up default value of SYSCALL_DEBUG
    
    Default values for boolean and tristate options can only be 'y', 'm' or 'n'.
    This patch removes wrong default for SYSCALL_DEBUG.
    
    Signed-off-by: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1e11d2782b2f8e86d22ad92c75b70ec8cad14dcf
Author: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
Date:   Fri Jun 23 02:05:19 2006 -0700

    [PATCH] clean up default value of SCHED_SMT
    
    Default values for boolean and tristate options can only be 'y', 'm' or 'n'.
    This patch removes wrong default for SCHED_SMT.
    
    Signed-off-by: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 260ea1013283d8acbb451459ed1ca560c1445c20
Author: Eric W. Biederman <ebiederm@xmission.com>
Date:   Fri Jun 23 02:05:18 2006 -0700

    [PATCH] ptrace: document the locking rules
    
    After a lot of reading the code and thinking about how it behaves I have
    managed to figure out what the current ptrace locking rules are.  The
    current code is in much better that it appears at first glance.  The
    troublesome code paths are actually the code paths that violate the current
    rules.
    
    ptrace uses simple exclusive access as it's locking.  You can only touch
    task->ptrace if the task is stopped and you are the ptracer, or if the task
    is running and are the task itself.
    
    Very simple, very easy to maintain.  It just needs to be documented so
    people know not to touch ptrace from elsewhere.
    
    Currently we do have a few pieces of code that are in violation of this
    rule.  Particularly the core dump code, and ptrace_attach.  But so far the
    code looks fixable.
    
    Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: Roland McGrath <roland@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4a4b69f79ba7286794765a856349e380f984a6cb
Author: Vadim Lobanov <vlobanov@speakeasy.net>
Date:   Fri Jun 23 02:05:16 2006 -0700

    [PATCH] Poll cleanups/microoptimizations
    
    The "count" and "pt" variables are declared and modified by do_poll(), as
    well as accessed and written indirectly in the do_pollfd() subroutine.
    
    This patch pulls all handling of these variables into the do_poll()
    function, thereby eliminating the odd use of indirection in do_pollfd().
    This is done by pulling the "struct pollfd" traversal loop from do_pollfd()
    into its only caller do_poll().  As an added bonus, the patch saves a few
    clock cycles, and also adds comments to make the code easier to follow.
    
    Signed-off-by: Vadim Lobanov <vlobanov@speakeasy.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2da132646358c853d5caf296d079aefc69358d46
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 02:05:15 2006 -0700

    [PATCH] fs/fat/misc.c: unexport fat_sync_bhs
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0ae26f1b3159f3acb21ae1e866c3c7e16edd450f
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:05:15 2006 -0700

    [PATCH] mmput() might sleep
    
    exit_aio() and exit_mmap() can sleep.  But it's easy to accidentally call
    mmput() from inside locks.
    
    Cc: Dave Peterson <dsp@llnl.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 32797f976d62af709943aae38a9457b5a6dbcd8a
Author: Domen Puncer <domen@coderock.org>
Date:   Fri Jun 23 02:05:14 2006 -0700

    [PATCH] Remove CONFIG_PARPORT_ARC, drivers/parport/parport_arc.c
    
    It's wasn't referenced in Makefile since at least 2.2.8, unbuildable due to
    trivial typos and things like DATA_LATCH and arc_write_control() which
    doesn't exist.
    
    Adrian Bunk:
    adapted the patch to unrelated context changes
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d27e9084b372441dc8c9cf361a965ee58032767
Author: Xose Vazquez Perez <xose.vazquez@gmail.com>
Date:   Fri Jun 23 02:05:13 2006 -0700

    [PATCH] module.h: updated comments with a new license
    
    "Dual MIT/GPL" is also accepted (kernel/module.c), so updated comments.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b0904e147f7cbe4be3b4dae49ddccd627bb66f16
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 02:05:13 2006 -0700

    [PATCH] fs/locks.c: make posix_locks_deadlock() static
    
    We can now make posix_locks_deadlock() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 75e1fcc0b18df0a65ab113198e9dc0e98999a08c
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Jun 23 02:05:12 2006 -0700

    [PATCH] vfs: add lock owner argument to flush operation
    
    Pass the POSIX lock owner ID to the flush operation.
    
    This is useful for filesystems which don't want to store any locking state
    in inode->i_flock but want to handle locking/unlocking POSIX locks
    internally.  FUSE is one such filesystem but I think it possible that some
    network filesystems would need this also.
    
    Also add a flag to indicate that a POSIX locking request was generated by
    close(), so filesystems using the above feature won't send an extra locking
    request in this case.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ff7b86b82083f24b8637dff1528c7101c18c7f39
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Jun 23 02:05:11 2006 -0700

    [PATCH] locks: clean up locks_remove_posix()
    
    locks_remove_posix() can use posix_lock_file() instead of doing the lock
    removal by hand.  posix_lock_file() now does exacly the same.
    
    The comment about pids no longer applies, posix_lock_file() takes only the
    owner into account.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 39005d022ad221b76dc2de0ac62ef475a796433b
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Jun 23 02:05:10 2006 -0700

    [PATCH] locks: don't do unnecessary allocations
    
    posix_lock_file() always allocates new locks in advance, even if it's easy to
    determine that no allocations will be needed.
    
    Optimize these cases:
    
     - FL_ACCESS flag is set
    
     - Unlocking the whole range
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0d9a490abe1f69fda220f7866f6f23af41daa128
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Fri Jun 23 02:05:09 2006 -0700

    [PATCH] locks: don't unnecessarily fail posix lock operations
    
    posix_lock_file() was too cautious, failing operations on OOM, even if they
    didn't actually require an allocation.
    
    This has the disadvantage, that a failing unlock on process exit could lead to
    a memory leak.  There are two possibilites for this:
    
    - filesystem implements .lock() and calls back to posix_lock_file().  On
    cleanup of files_struct locks_remove_posix() is called which should remove all
    locks belonging to files_struct.  However if filesystem calls
    posix_lock_file() which fails, then those locks will never be freed.
    
    - if a file is closed while a lock is blocked, then after acquiring
    fcntl_setlk() will undo the lock.  But this unlock itself might fail on OOM,
    again possibly leaking the lock.
    
    The solution is to move the checking of the allocations until after it is sure
    that they will be needed.  This will solve the above problem since unlock will
    always succeed unless it splits an existing region.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 090d2b185d8680fc26a2eaf4245d4171dcf4baf1
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:05:08 2006 -0700

    [PATCH] read_mapping_page for address space
    
    Add read_mapping_page() which is used for callers that pass
    mapping->a_ops->readpage as the filler for read_cache_page.  This removes
    some duplication from filesystem code.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c330dda908b5a46469a997eea90b66f2f9f02b34
Author: Jeff Moyer <jmoyer@redhat.com>
Date:   Fri Jun 23 02:05:07 2006 -0700

    [PATCH] Add a sysfs file to determine if a kexec kernel is loaded
    
    Create two files in /sys/kernel, kexec_loaded and kexec_crash_loaded.  Each
    file contains a simple boolean value indicating whether the relevant kernel
    has been loaded into memory.  The motivation for this is geared around
    support.
    
    Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 24bbb1faf3f0420eb252dd0fdc1e477b1d4d73bd
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Fri Jun 23 02:05:06 2006 -0700

    [PATCH] s390_hypfs filesystem
    
    On zSeries machines there exists an interface which allows the operating
    system to retrieve LPAR hypervisor accounting data.  For example, it is
    possible to get usage data for physical and virtual cpus.  In order to
    provide this information to user space programs, I implemented a new
    virtual Linux file system named 's390_hypfs' using the Linux 2.6 libfs
    framework.  The name 's390_hypfs' stands for 'S390 Hypervisor Filesystem'.
    All the accounting information is put into different virtual files which
    can be accessed from user space.  All data is represented as ASCII strings.
    
    When the file system is mounted the accounting information is retrieved and
    a file system tree is created with the attribute files containing the cpu
    information.  The content of the files remains unchanged until a new update
    is made.  An update can be triggered from user space through writing
    'something' into a special purpose update file.
    
    We create the following directory structure:
    
    <mount-point>/
            update
            cpus/
                    <cpu-id>
                            type
                            mgmtime
                    <cpu-id>
                            ...
            hyp/
                    type
            systems/
                    <lpar-name>
                            cpus/
                                    <cpu-id>
                                            type
                                            mgmtime
                                            cputime
                                            onlinetime
                                    <cpu-id>
                                            ...
                    <lpar-name>
                            cpus/
                                    ...
    
    - update: File to trigger update
    - cpus/: Directory for all physical cpus
    - cpus/<cpu-id>/: Directory for one physical cpu.
    - cpus/<cpu-id>/type: Type name of physical zSeries cpu.
    - cpus/<cpu-id>/mgmtime: Physical-LPAR-management time in microseconds.
    - hyp/: Directory for hypervisor information
    - hyp/type: Typ of hypervisor (currently only 'LPAR Hypervisor')
    - systems/: Directory for all LPARs
    - systems/<lpar-name>/: Directory for one LPAR.
    - systems/<lpar-name>/cpus/<cpu-id>/: Directory for the virtual cpus
    - systems/<lpar-name>/cpus/<cpu-id>/type: Typ of cpu.
    - systems/<lpar-name>/cpus/<cpu-id>/mgmtime:
    Accumulated number of microseconds during which a physical
    CPU was assigned to the logical cpu and the cpu time was
    consumed by the hypervisor and was not provided to
    the LPAR (LPAR overhead).
    
    - systems/<lpar-name>/cpus/<cpu-id>/cputime:
    Accumulated number of microseconds during which a physical CPU
    was assigned to the logical cpu and the cpu time was consumed
    by the LPAR.
    
    - systems/<lpar-name>/cpus/<cpu-id>/onlinetime:
    Accumulated number of microseconds during which the logical CPU
    has been online.
    
    As mount point for the filesystem /sys/hypervisor/s390 is created.
    
    The update process is triggered when writing 'something' into the
    'update' file at the top level hypfs directory. You can do this e.g.
    with 'echo 1 > update'. During the update the whole directory structure
    is deleted and built up again.
    
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Ingo Oeser <ioe-lkml@rameria.de>
    Cc: Joern Engel <joern@wohnheim.fh-wedel.de>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b9e122c80cd2e10fe18678c63db4717871ed31cf
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri Jun 23 02:05:04 2006 -0700

    [PATCH] xtensa: remove verify_area macros
    
    verify_area() is still alive on xtensa in 2.6.17-rc3-git13 It would be nice
    to finally be rid of that function across the board.
    
    Signed-off-by: Chris Zankel <chris@zankel.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f36d17a87ea9c2584aa8f649e438334bd69e32f
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Jun 23 02:05:03 2006 -0700

    [PATCH] m68k: windfarm is powerpc-only, don't do it on m68k macs
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f1b5e520bb65e98d27632cd270d931838bd2a5da
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Fri Jun 23 02:05:03 2006 -0700

    [PATCH] m68k traps.c constraints
    
    Cast is not an lvalue; =r constraint wants an lvalue and really couldn't
    care whether it's void * or other pointer type.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de290166552a037234bca44ed4bcbf4a4e9f5be9
Author: Jan Altenberg <tb10alj@tglx.de>
Date:   Fri Jun 23 02:05:01 2006 -0700

    [PATCH] m68k: ptrace.h typo fix
    
    Signed-off-by: Jan Altenberg <tb10alj@tglx.de>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Cc: Greg Ungerer <gerg@snapgear.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d94af931af42152e34539dd4782b1724084a89fb
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:05:00 2006 -0700

    [PATCH] m68k: clean up uaccess.h
    
    This uninlines a few large functions in uaccess.h and cleans up the rest.
    It includes a (hopefully temporary) workaround for the broken typeof of
    gcc-4.1.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: Geert Uytterhoeven <geert@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1a23989475846547e5b7ce14e77f072894aaff54
Author: Finn Thain <fthain@telegraphics.com.au>
Date:   Fri Jun 23 02:04:59 2006 -0700

    [PATCH] m68k: m68k mac VIA2 fixes and cleanups
    
    Some fixes and cleanups from the linux-mac68k repo.  Fix mac_esp by clearing
    the VIA2 SCSI IRQ flag before the SCSI IRQ handler is invoked.  Also fix a
    race condition caused by unmasking a nubus slot IRQ then setting the relevant
    nubus_active bit.
    
    Signed-off-by: Finn Thain <fthain@telegraphics.com.au>
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6d2f16a8917eb77a8b79849686159f3a5eae2501
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:59 2006 -0700

    [PATCH] m68k: adjust to changed HARDIRQ_MASK
    
    Adjust entry.S to the changed HARDIRQ_MASK, add a check to prevent it from
    silently breaking again.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2dcf15b78d14c8d92fa1ce1be95b75e8d27ef99f
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:58 2006 -0700

    [PATCH] m68k: use proper defines for zone initialization
    
    MAX_NR_ZONES changed, so use correct defines now.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 882905c7ff81763a3aa3413629f7253b75587cb1
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:57 2006 -0700

    [PATCH] m68k: wd33c93: extra delay
    
    The wd33c93 needs a small delay before a new command can be started.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: James Bottomley <James.Bottomley@SteelEye.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5fa28ea42f28342ca6efaa2d23789f3fec5adff6
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:56 2006 -0700

    [PATCH] m68k: restore amikbd compatibility with 2.4
    
    Dump the extra mapping in the amikbd interrupt handler, so old Amiga keymaps
    work again.  Amigas need a special keymap anyway, standard keymaps are not
    usable and recreating all keymaps is simply not worth the trouble.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: Dmitry Torokhov <dtor_core@ameritech.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb7d390df391402c9630940d5a2ea1571fc5cde2
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:56 2006 -0700

    [PATCH] m68k: print correct stack trace
    
    Pass unmodified stack argument to show_trace().
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f6c4192e77dffbc50ee1b9a24a1063ff961aaf04
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:55 2006 -0700

    [PATCH] m68k: use c99 initializer
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 98317f1271e7fd472983b013c76df6cc15fbef22
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:54 2006 -0700

    [PATCH] m68k: Remove some unused definitions in zorro.h
    
    These definitions have long been superseded by asm-offsets.h
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a232eafedc385249ef1931d186169f9eed2ad93
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:54 2006 -0700

    [PATCH] m68k: cleanup unistd.h
    
    Remove long obsolete kernel syscalls, only execve is still used.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 078517e4118dc60a97c4eda127b849383eb26f8e
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:53 2006 -0700

    [PATCH] m68k: atyfb_base compile fix for CONFIG_PCI=n
    
    The atyfb_driver structure is only available if CONFIG_PCI is set.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2c3e0262e0cb5395fe02cdf27c229ee7414ab0c0
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:51 2006 -0700

    [PATCH] m68k: completely initialize hw_regs_t in ide_setup_ports
    
    ide_setup_ports does not completely initialize the hw_regs_t structure which
    can cause random failures, as the structure is often on the stack.  None of
    the callers expect a partially initialized structure, i.e.  none of them do
    any setup of their own before calling ide_setup_ports().
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl>
    Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit daacf8bc0dd37a6ad3a87d1a667599e15940815e
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri Jun 23 02:04:50 2006 -0700

    [PATCH] move do_suspend_lowlevel to correct segment
    
    Move do_suspend_lowlevel to correct segment.  If it is in the same hugepage
    with ro data, mark_rodata_ro will make it unexecutable.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Cc: Len Brown <len.brown@intel.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e084dbd3a995f99f5444a9046e66d93c1b92c348
Author: Pavel Machek <pavel@ucw.cz>
Date:   Fri Jun 23 02:04:50 2006 -0700

    [PATCH] swsusp: documentation updates
    
    Update documentation a bit, add more machines to video.txt list.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 55b2355eefc2f160246226d4d69fed431173a4d5
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri Jun 23 02:04:49 2006 -0700

    [PATCH] don't use flush_tlb_all in suspend time
    
    flush_tlb_all uses on_each_cpu, which will disable/enable interrupt.
    In suspend/resume time, this will make interrupt wrongly enabled.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 968808b8956e332e556b1eae9b4f7df77518f53b
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Fri Jun 23 02:04:48 2006 -0700

    [PATCH] swsusp: use less memory during resume
    
    Make swsusp allocate only as much memory as needed to store the image data
    and metadata during resume.
    
    Without this patch swsusp additionally allocates many page frames that will
    conflict with the "original" locations of the image data and are considered
    as "unsafe", treating them as "eaten" pages (ie.  allocated but unusable).
    
    The patch makes swsusp allocate as many pages as it'll need to store the
    data read from the image in one shot, creating a list of allocated "safe"
    pages, and use the observation that all pages allocated by it are marked
    with the PG_nosave and PG_nosave_free flags set.  ยNamely, when it's about
    to load an image page, swsusp can check whether the page frame
    corresponding to the "original" location of this page has been allocated
    (ie.  if the page frame has the PG_nosave and PG_nosave_free flags set) and
    if so, it can load the page directly into this page frame.  ยOtherwise it
    uses an allocated "safe" page from the list to store the data that will be
    copied to their "original" location later on.
    
    This allows us to save many page copyings and page allocations during
    resume and in the future it may allow us to load images greater than 50% of
    the normal zone.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Acked-by: "Pavel Machek" <pavel@suse.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7bff24e255ee11ecbc304315a252fcbd84f9ffce
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 02:04:47 2006 -0700

    [PATCH] kernel/power/snapshot.c: cleanups
    
    - make needlessly global functions static
    - make dummy functions static inline
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a938c356d5b007fe6d28251c0ddbf6c11d0d92b5
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Fri Jun 23 02:04:46 2006 -0700

    [PATCH] swsusp: take lowmem reserves into account
    
    swsusp allocates memory from the normal zone, so it cannot use lowmem
    reserve pages from the lower zones.  Therefore it should not count these
    pages as available to it.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Cc: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3e3318dee0878d42ed62a19c292a2ac284135db3
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri Jun 23 02:04:46 2006 -0700

    [PATCH] swsusp: x86_64 mark special saveable/unsaveable pages
    
    Pages (Reserved/ACPI NVS/ACPI Data) below end_pfn will be saved/restored by S4
    currently.  We should mark 'Reserved' pages not saveable.
    
    Pages (Reserved/ACPI NVS/ACPI Data) above end_pfn will not be saved/restored
    by S4 currently.  We should save the 'ACPI NVS/ACPI Data' pages.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: "Rafael J. Wysocki" <rjw@sisk.pl>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b6370d96e09944c6e3ae8d5743ca8a8ab1f79f6c
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri Jun 23 02:04:45 2006 -0700

    [PATCH] swsusp: i386 mark special saveable/unsaveable pages
    
    Pages (Reserved/ACPI NVS/ACPI Data) below max_low_pfn will be saved/restored
    by S4 currently.  We should mark 'Reserved' pages not saveable.
    
    Pages (Reserved/ACPI NVS/ACPI Data) above max_low_pfn will not be
    saved/restored by S4 currently.  We should save the 'ACPI NVS/ACPI Data'
    pages.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: "Rafael J. Wysocki" <rjw@sisk.pl>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ce4ab0012b32c1a4a1d6e934aeb73bf3151c48d9
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri Jun 23 02:04:44 2006 -0700

    [PATCH] swsusp: add architecture special saveable pages support
    
    1. Add architecture specific pages save/restore support.  Next two patches
       will use this to save/restore 'ACPI NVS' pages.
    
    2. Allow reserved pages 'nosave'.  This could avoid save/restore BIOS
       reserved pages.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Cc: Pavel Machek <pavel@ucw.cz>
    Cc: "Rafael J. Wysocki" <rjw@sisk.pl>
    Cc: Nigel Cunningham <nigel@suspend2.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 82dcaafc92fdfbe2c1d6c50b9f5e17d533caf950
Author: Mathieu Chouquet-Stringer <mchouque@free.fr>
Date:   Fri Jun 23 02:04:40 2006 -0700

    [PATCH] Remove duplicate symbol exports on Alpha
    
    WARNING: vmlinux: 'enable_irq' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'disable_irq' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'disable_irq_nosync' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'probe_irq_mask' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'sys_open' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'sys_read' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'strstr' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'memscan' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'memcmp' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'strnlen' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'strncmp' exported twice. Previous export was in vmlinux
    WARNING: vmlinux: 'strcmp' exported twice. Previous export was in vmlinux
    
    Signed-off-by: Mathieu Chouquet-Stringer <mchouque@free.fr>
    Cc: Richard Henderson <rth@twiddle.net>
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30343d6c3d4e3fe961369e7be19935683e808c88
Author: Kirill Smelkov <kirr@mns.spb.ru>
Date:   Fri Jun 23 02:04:33 2006 -0700

    [PATCH] x86: compile fix for asm-i386/alternatives.h
    
    compile fix:  <asm-i386/alternative.h>  needs  <asm/types.h> for 'u8' --
    just look at struct alt_instr.
    
    My module includes <asm/bitops.h> as the first header, and as of 2.6.17 this
    leads to compilation errors.
    
    Signed-off-by: Kirill Smelkov <kirr@mns.spb.ru>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 224f611c1639cb6c134a934dae7f7b9f0ac3b540
Author: Michal Ludvig <michal@logix.cz>
Date:   Fri Jun 23 02:04:32 2006 -0700

    [PATCH] x86: VIA C7 CPU flags
    
    New CPU flags for next generation of crypto engine as found in VIA C7
    processors.
    
    Signed-off-by: Michal Ludvig <michal@logix.cz>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7e04a1183eac3e6b3570a154c8677fd9184b51e7
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Jun 23 02:04:31 2006 -0700

    [PATCH] i386: extra checks in show_registers()
    
    Sometimes thread_info and task_struct get out-of-sync with each other.
    Printing task.thread_info in show_registers() can help spot this.  And when
    task_struct is corrupt then task.comm can contain garbage, so only print as
    many characters as it can hold.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 722f4f5b2600b8930b63a096e48b878cd6e0e15a
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Fri Jun 23 02:04:31 2006 -0700

    [PATCH] x86: fix __range_ok constraint
    
    An immediate operand can't be the destination of the cmpl instruction,
    so exclude it.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Cc: Mattia Dongili <malattia@linux.it>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6444541671bd821b950dbaafee70d65188198aa6
Author: Zachary Amsden <zach@vmware.com>
Date:   Fri Jun 23 02:04:30 2006 -0700

    [PATCH] i386: don't try kprobes for v8086 mode
    
    Never allow int3 traps from V8086 mode to enter the kprobes handler.
    
    Signed-off-by: Zachary Amsden <zach@vmware.com>
    Cc: Prasanna S Panchamukhi <prasanna@in.ibm.com>
    Cc: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Cc: Anil S Keshavamurthy <anil.s.keshavamurthy@intel.com>
    Cc: Chuck Ebbert <76306.1226@compuserve.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 19964fecf25c17f865dec07ae242b1a40ea93f16
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Jun 23 02:04:29 2006 -0700

    [PATCH] i386: fix get_segment_eip() with vm86 segments
    
    We need to check for vm86 mode first before looking at selector privilege
    bits.
    
    Segment limit is always base + 64k and only the low 16 bits of EIP are
    significant in vm86 mode.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Zachary Amsden <zach@vmware.com>
    Cc: Rohit Seth <rohitseth@google.com>
    Acked-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 110cb1d2e343443c4a4b5f7e081928aa4da90f93
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:28 2006 -0700

    [PATCH] x86: use proper defines for i8259A I/O
    
    Use proper defines instead of open-coded values.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0de1f0a5038a957d50893db7a0d47e385fb2915
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:28 2006 -0700

    [PATCH] x86: constify arch/i386/pci/irq.c
    
    constify structs and add one __initdata.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9f22271898707aed2f84cc75ab3bd109173cdbbf
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:27 2006 -0700

    [PATCH] make ACPI errata __read_mostly
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7b0c2d92180dbd9c7cd0c4b9bd38b06bb0f12843
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:26 2006 -0700

    [PATCH] x86: make i387 mxcsr_feature_mask __read_mostly
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cefc01130ba2bb0a81abda14b3f00fcc2e70dd43
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:26 2006 -0700

    [PATCH] x86: cyrix code CONFIG_PCI fix / add __initdata
    
    PCI code was outside of CONFIG_PCI, add __initdata at cyrix_55x0 (since
    accessed within __init function only).
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit acae9d32436122959667470b84da517d7b1b9c2d
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:25 2006 -0700

    [PATCH] x86: make using_apic_timer __read_mostly
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 21528454f6dd18231ae20102f98aa8f51b6ec1b9
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Fri Jun 23 02:04:23 2006 -0700

    [PATCH] i386: let usermode execute the "enter" instruction
    
    The i386 page fault handler does not allow enough slack when checking for
    userspace access below the current stack pointer.  This prevents use of the
    enter instruction by user code.  Fix this by allowing enough slack for
    "enter $65535,$31" to execute.
    
    Problem reported by Tomasz Malesinski <tmal@mimuw.edu.pl>
    
    Tested using this program, based on the original from Tomasz:
    
    	.file	"ovflow.S"
    	.version	"01.01"
    gcc2_compiled.:
    .section	.rodata
    .LC0:
    	.string	"asdf\n"
    .text
    	.align 4
    .globl main
    	.type	 main,@function
    main:
    nest_level=0
    .rept 30
    	enter $0,$nest_level
    nest_level=nest_level+1
    .endr
    	enter $65535,$30
    	enter $65535,$31
    	addl $-12,%esp
    	pushl $.LC0
    	call printf
    	addl $16,%esp
    .L2:
    .rept 32
    	leave
    .endr
    	ret
    .Lfe1:
    	.size	 main,.Lfe1-main
    	.ident	"GCC: (GNU) 2.95.4 20011002 (Debian prerelease)"
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b61b910e99059abdd54c93aa70e84e076e33d16
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Fri Jun 23 02:04:22 2006 -0700

    [PATCH] x86: kernel irq balance doesn't work
    
    On i386, kernel irq balance doesn't work.
    
    1) In function do_irq_balance, after kernel finds the min_loaded cpu but
       before calling set_pending_irq to really pin the selected_irq to the
       target cpu, kernel does a cpus_and with irq_affinity[selected_irq].
       Later on, when the irq is acked, kernel would calls
       move_native_irq=>desc->handler->set_affinity to change the irq affinity.
        However, every function pointed by
       hw_interrupt_type->set_affinity(unsigned int irq, cpumask_t cpumask)
       always changes irq_affinity[irq] to cpumask.  Next time when recalling
       do_irq_balance, it has to do cpu_ands again with
       irq_affinity[selected_irq], but irq_affinity[selected_irq] already
       becomes one cpu selected by the first irq balance.
    
    2) Function balance_irq in file arch/i386/kernel/io_apic.c has the same
       issue.
    
    [akpm@osdl.org: cleanups]
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit afa024c3dbccf026e45121f4b9de54cda48edbea
Author: Linus Torvalds <torvalds@osdl.org>
Date:   Fri Jun 23 02:04:21 2006 -0700

    [PATCH] x86: call eisa_set_level_irq() in pbibios_lookup_irq()
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a03a3e287b119c7bcbcff1d68f81864ce33b1ad2
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Jun 23 02:04:20 2006 -0700

    [PATCH] Don't trigger full rebuild via CONFIG_X86_MCE
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b88d4f1d390a6a232938d27d551f24cf08a2c7e0
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 23 02:04:20 2006 -0700

    [PATCH] i386: break out of recursion in stackframe walk
    
    If CONFIG_FRAME_POINTERS is enabled, and one does a dump_stack() during
    early SMP init, an infinite stackdump and a bootup hang happens:
    
     [<c0104e7f>] show_trace+0xd/0xf
     [<c0104e96>] dump_stack+0x15/0x17
     [<c01440df>] save_trace+0xc3/0xce
     [<c014527d>] mark_lock+0x8c/0x4fe
     [<c0145df5>] __lockdep_acquire+0x44e/0xaa5
     [<c0146798>] lockdep_acquire+0x68/0x84
     [<c1048699>] _spin_lock+0x21/0x2f
     [<c010d918>] prepare_set+0xd/0x5d
     [<c010daa8>] generic_set_all+0x1d/0x201
     [<c010ca9a>] mtrr_ap_init+0x23/0x3b
     [<c010ada8>] identify_cpu+0x2a7/0x2af
     [<c01192a7>] smp_store_cpu_info+0x2f/0xb4
     [<c01197d0>] start_secondary+0xb5/0x3ec
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [<c104ec11>] end_of_stack_stop_unwind_function+0x1/0x4
     [...]
    
    Due to "end_of_stack_stop_unwind_function" recursing back to itself in the
    EBP stackframe-walker.  So avoid this type of recursion when walking the
    stack .
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ba528f2854e8632c8d04ddcd45f06c47bc7188b0
Author: Jan Beulich <jbeulich@novell.com>
Date:   Fri Jun 23 02:04:19 2006 -0700

    [PATCH] fix x86 microcode driver handling of multiple matching revisions
    
    When multiple updates matching a given CPU are found in the update file, the
    action taken by the microcode update driver was inappropriate:
    
    - when lower revision microcode was found before matching or higher revision
      one, the driver would needlessly complain that it would not downgrade the
      CPU
    - when microcode matching the currently installed revision was found before
      newer revision code, no update would actually take place
    
    To change this behavior, the driver now concludes about possibly updates and
    issues messages only when the entire input was parsed.
    
    Additionally, this adds back (in different places, and conditionalized upon
    a new module option) some messages removed by a previous patch.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Cc: "Suresh Siddha" <suresh.b.siddha@intel.com>
    Cc: Tigran Aivazian <tigran_aivazian@symantec.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 27b07da7332f03a935cd13b6a6beb780bf19e7a4
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Fri Jun 23 02:04:18 2006 -0700

    [PATCH] Don't trigger full rebuild via CONFIG_MTRR
    
    Only drm, framebuffer, mtrr parts + misc files here and there.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 87af2ffd4ccd0e6a2ff316fd008a9bedb4a4cb66
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Fri Jun 23 02:04:17 2006 -0700

    [PATCH] i386 apm.c optimization
    
    - avoid expensive modulo (integer division) which happened
      since APM_MAX_EVENTS is 20 (non-power-of-2)
    - kill compiler warnings by initializing two variables
    - add __read_mostly to some important static variables that are read often
      (by idle loop etc.)
    - constify several structures
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a0b4da91f4c5710b9c20219a19e905145647b48b
Author: Adrian Bunk <bunk@stusta.de>
Date:   Fri Jun 23 02:04:17 2006 -0700

    [PATCH] arch/i386/kernel/apic.c: make modern_apic() static
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c22ce143d15eb288543fe9873e1c5ac1c01b69a1
Author: Hiro Yoshioka <hyoshiok@miraclelinux.com>
Date:   Fri Jun 23 02:04:16 2006 -0700

    [PATCH] x86: cache pollution aware __copy_from_user_ll()
    
    Use the x86 cache-bypassing copy instructions for copy_from_user().
    
    Some performance data are
    
    Total of GLOBAL_POWER_EVENTS (CPU cycle samples)
    
    2.6.12.4.orig    1921587
    2.6.12.4.nt      1599424
    1599424/1921587=83.23% (16.77% reduction)
    
    BSQ_CACHE_REFERENCE (L3 cache miss)
    2.6.12.4.orig      57427
    2.6.12.4.nt        20858
    20858/57427=36.32% (63.7% reduction)
    
    L3 cache miss reduction of __copy_from_user_ll
    samples  %
    37408    65.1412  vmlinux                  __copy_from_user_ll
    23        0.1103  vmlinux                  __copy_user_zeroing_intel_nocache
    23/37408=0.061% (99.94% reduction)
    
    Top 5 of 2.6.12.4.nt
    Counted GLOBAL_POWER_EVENTS events (time during which processor is not stopped) with a unit mask of 0x01 (mandatory) count 100000
    samples  %        app name                 symbol name
    128392    8.0274  vmlinux                  __copy_user_zeroing_intel_nocache
    64206     4.0143  vmlinux                  journal_add_journal_head
    59746     3.7355  vmlinux                  do_get_write_access
    47674     2.9807  vmlinux                  journal_put_journal_head
    46021     2.8774  vmlinux                  journal_dirty_metadata
    pattern9-0-cpu4-0-09011728/summary.out
    
    Counted BSQ_CACHE_REFERENCE events (cache references seen by the bus unit) with a unit mask of 0x3f (multiple flags) count 3000
    samples  %        app name                 symbol name
    69755     4.2861  vmlinux                  __copy_user_zeroing_intel_nocache
    55685     3.4215  vmlinux                  journal_add_journal_head
    52371     3.2179  vmlinux                  __find_get_block
    45504     2.7960  vmlinux                  journal_put_journal_head
    36005     2.2123  vmlinux                  journal_stop
    pattern9-0-cpu4-0-09011744/summary.out
    
    Counted BSQ_CACHE_REFERENCE events (cache references seen by the bus unit) with a unit mask of 0x200 (read 3rd level cache miss) count 3000
    samples  %        app name                 symbol name
    1147      5.4994  vmlinux                  journal_add_journal_head
    881       4.2240  vmlinux                  journal_dirty_data
    872       4.1809  vmlinux                  blk_rq_map_sg
    734       3.5192  vmlinux                  journal_commit_transaction
    617       2.9582  vmlinux                  radix_tree_delete
    pattern9-0-cpu4-0-09011731/summary.out
    
    iozone results are
    
    original 2.6.12.4 CPU time = 207.768 sec
    cache aware       CPU time = 184.783 sec
    (three times run)
    184.783/207.768=88.94% (11.06% reduction)
    
    original:
    pattern9-0-cpu4-0-08191720/iozone.out:  CPU Utilization: Wall time   45.997    CPU time   64.527    CPU utilization 140.28 %
    pattern9-0-cpu4-0-08191741/iozone.out:  CPU Utilization: Wall time   46.878    CPU time   71.933    CPU utilization 153.45 %
    pattern9-0-cpu4-0-08191743/iozone.out:  CPU Utilization: Wall time   45.152    CPU time   71.308    CPU utilization 157.93 %
    
    cache awre:
    pattern9-0-cpu4-0-09011728/iozone.out:  CPU Utilization: Wall time   44.842    CPU time   62.465    CPU utilization 139.30 %
    pattern9-0-cpu4-0-09011731/iozone.out:  CPU Utilization: Wall time   44.718    CPU time   59.273    CPU utilization 132.55 %
    pattern9-0-cpu4-0-09011744/iozone.out:  CPU Utilization: Wall time   44.367    CPU time   63.045    CPU utilization 142.10 %
    
    Signed-off-by: Hiro Yoshioka <hyoshiok@miraclelinux.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7dbdf43cfa635ddc3701cc8d1eab07597cd731c0
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Fri Jun 23 02:04:14 2006 -0700

    [PATCH] mips: fix number of mremap arguments
    
    mremap syscall takes 5 arguments. Fixed by Ralf Baechle.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f2c780c1fdbe5008c902c2d7e37242ac5e60f0b9
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Fri Jun 23 02:04:13 2006 -0700

    [PATCH] Au1550/1200: add missing PSC #define's, make OSS driver use the proper ones
    
    Add missing PSC #define's required for the drivers using PSC on DBAu1550
    board (also fixing Au1550 PSC3 address) and all Au1200-based boards as
    well.  Make the OSS driver use the correct PSC definitions fo each board.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Cc: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c52c17622e27876c2395f59cfe342497a399de41
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:13 2006 -0700

    [PATCH] frv: clean frv unistd.h
    
    Remove _syscall invocations that aren't used in the kernel.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8ccd05670309084c2dd2003b6840a4becb5acca0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:12 2006 -0700

    [PATCH] frv: trivial cleanups in frv_ksyms.c
    
    Remove duplicate EXPORT_SYMBOL annotations from the FRV arch.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5e591a55576b60156ac3dbc5087660ed82646d66
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:11 2006 -0700

    [PATCH] frv: Add missing qualifier to memcpy_fromio() prototype
    
    The memcpy_fromio() function should have a const qualifier on its source
    pointer.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a73df4dfdb0e01a1cbf119416a00e520a5e22306
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:10 2006 -0700

    [PATCH] frv: ieee1394 is borken on frv
    
    The ieee1394 assumes it may make direct use of ->count in the semaphore
    structure.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Cc: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: Ben Collins <bcollins@ubuntu.com>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f788435568795c4cd29301bb4ccf7aff54f5051
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:09 2006 -0700

    [PATCH] frv: NULL noise removal in frv xchg()
    
    Clean up the FRV arch's xchg() function.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ffca11104c06aff1641b9787f9e5b1099187ff83
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:09 2006 -0700

    [PATCH] frv: initrd is grossly broken on frv (never built)
    
    The FRV arch doesn't currently support initrd, so it should be disabled
    automatically for the moment.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0c426f26cce71626ed39cd7b9496ea7f460ea9d0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:08 2006 -0700

    [PATCH] ext2 XIP won't build without MMU
    
    Disable Ext2 XIP if the kernel is configured in no-MMU mode as the former
    won't build.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit be2338f3ceb6d80170ebb495190d6aee79d8c7e3
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:07 2006 -0700

    [PATCH] frv: wrong syscall
    
    The FRV arch should use fstatat64 not newfstatat.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 576132b42647e3facd28e3148a20307fadfd9afc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:07 2006 -0700

    [PATCH] frv: misc sparse annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 53470aaa02ef3c83187f1ffe0d2cb647274fe397
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:06 2006 -0700

    [PATCH] frv: misc __user annotations
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 530018bf3d93e04533eec9c6516e3ce8f5310e13
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:05 2006 -0700

    [PATCH] frv: binfmt_elf_fdpic __user annotations
    
    Add __user annotations to binfmt_elf_fdpic.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7ab76d722a0d64369080ec96f0fd9fca2138e3c5
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:05 2006 -0700

    [PATCH] frv: sysctl __user annotations
    
    Add __user annotations to FRV-specific sysctl stuff.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9e4d11f8630d5350adc5d4d65180e69991c498f8
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:04 2006 -0700

    [PATCH] frv: signal annotations
    
    Add annotations to the FRV signal handling for sparse.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3f4cd389c3564caf1eec70957fcbd9d88c995d45
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:03 2006 -0700

    [PATCH] frv: basic __iomem annotations
    
    Add annotations to the FRV I/O handling functions for sparse.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a8a77573c9e5345bcf6a963858745cd83c923f44
Author: Al Viro <viro@www.linux.org.uk>
Date:   Fri Jun 23 02:04:03 2006 -0700

    [PATCH] frv: __user infrastructure
    
    Add general annotations to the FRV arch for sparse.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86c3a7645c05a7d06b72653aa4b2bea4e7229d1b
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 23 02:04:02 2006 -0700

    [PATCH] SELinux: add security_task_movememory calls to mm code
    
    This patch inserts security_task_movememory hook calls into memory management
    code to enable security modules to mediate this operation between tasks.
    
    Since the last posting, the hook has been renamed following feedback from
    Christoph Lameter.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Andi Kleen <ak@muc.de>
    Acked-by: Christoph Lameter <clameter@sgi.com>
    Acked-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 35601547baf92d984b6e59cf3583649da04baea5
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 23 02:04:01 2006 -0700

    [PATCH] SELinux: add task_movememory hook
    
    This patch adds new security hook, task_movememory, to be called when memory
    owened by a task is to be moved (e.g.  when migrating pages to a this hook is
    identical to the setscheduler implementation, but a separate hook introduced
    to allow this check to be specialized in the future if necessary.
    
    Since the last posting, the hook has been renamed following feedback from
    Christoph Lameter.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Cc: Christoph Lameter <clameter@sgi.com>
    Cc: Andi Kleen <ak@muc.de>
    Acked-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 22fb52dd736a62e24c44c50739007496265dc38c
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 23 02:04:00 2006 -0700

    [PATCH] SELinux: add security hook call to mediate attach_task (kernel/cpuset.c)
    
    Add a security hook call to enable security modules to control the ability
    to attach a task to a cpuset.  While limited control over this operation is
    possible via permission checks on the pseudo fs interface, those checks are
    not sufficient to control access to the target task, which is looked up in
    this function.  The existing task_setscheduler hook is re-used for this
    operation since this falls under the same class of operations.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Acked-by: Paul Jackson <pj@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7834f8fccd791225a1cf91c2c3e740ad8e2e145
Author: David Quigley <dpquigl@tycho.nsa.gov>
Date:   Fri Jun 23 02:03:59 2006 -0700

    [PATCH] SELinux: add security hooks to {get,set}affinity
    
    This patch adds LSM hooks into the setaffinity and getaffinity functions to
    enable security modules to control these operations between tasks with
    task_setscheduler and task_getscheduler LSM hooks.
    
    Signed-off-by: David Quigley <dpquigl@tycho.nsa.gov>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 03e68060636e05989ea94bcb671ab633948f328c
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 23 02:03:58 2006 -0700

    [PATCH] lsm: add task_setioprio hook
    
    Implement an LSM hook for setting a task's IO priority, similar to the hook
    for setting a tasks's nice value.
    
    A previous version of this LSM hook was included in an older version of
    multiadm by Jan Engelhardt, although I don't recall it being submitted
    upstream.
    
    Also included is the corresponding SELinux hook, which re-uses the setsched
    permission in the proccess class.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Acked-by:  Stephen Smalley <sds@tycho.nsa.gov>
    Cc: Jan Engelhardt <jengelh@linux01.gwdg.de>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Cc: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9216dfad4fc97ab639ef0885efc713f3d7a20d5b
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:57 2006 -0700

    [PATCH] move_pages: fix 32 -> 64 bit compat function
    
    The definition of the third parameter is a pointer to an array of virtual
    addresses which give us some trouble.  The existing code calculated the
    wrong address in the array since I used void to avoid having to specify a
    type.
    
    I now use the correct type "compat_uptr_t __user *" in the definition of
    the function in kernel/compat.c.
    
    However, I used __u32 in syscalls.h.  Would have to include compat.h there
    in order to provide the same definition which would generate an ugly
    include situation.
    
    On both ia64 and x86_64 compat_uptr_t is u32. So this works although
    parameter declarations differ.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1b2db9fb7adc4d67d9ce7d16ce79c41ee84730fe
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:56 2006 -0700

    [PATCH] sys_move_pages: 32bit support (i386, x86_64)
    
    sys_move_pages() support for 32bit (i386 plus x86_64 compat layer)
    
    Add support for move_pages() on i386 and also add the compat functions
    necessary to run 32 bit binaries on x86_64.
    
    Add compat_sys_move_pages to the x86_64 32bit binary layer.  Note that it is
    not up to date so I added the missing pieces.  Not sure if this is done the
    right way.
    
    [akpm@osdl.org: compile fix]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b63d64a324056cf3c2f7a1a1fe8134100edbb058
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:56 2006 -0700

    [PATCH] sys_move_pages: x86_64 support
    
    sys_move_pages support for x86_64
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 742755a1d8ce2b548428f7aacf1758b4bba50080
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:55 2006 -0700

    [PATCH] page migration: sys_move_pages(): support moving of individual pages
    
    move_pages() is used to move individual pages of a process. The function can
    be used to determine the location of pages and to move them onto the desired
    node. move_pages() returns status information for each page.
    
    long move_pages(pid, number_of_pages_to_move,
    		addresses_of_pages[],
    		nodes[] or NULL,
    		status[],
    		flags);
    
    The addresses of pages is an array of void * pointing to the
    pages to be moved.
    
    The nodes array contains the node numbers that the pages should be moved
    to. If a NULL is passed instead of an array then no pages are moved but
    the status array is updated. The status request may be used to determine
    the page state before issuing another move_pages() to move pages.
    
    The status array will contain the state of all individual page migration
    attempts when the function terminates. The status array is only valid if
    move_pages() completed successfullly.
    
    Possible page states in status[]:
    
    0..MAX_NUMNODES	The page is now on the indicated node.
    
    -ENOENT		Page is not present
    
    -EACCES		Page is mapped by multiple processes and can only
    		be moved if MPOL_MF_MOVE_ALL is specified.
    
    -EPERM		The page has been mlocked by a process/driver and
    		cannot be moved.
    
    -EBUSY		Page is busy and cannot be moved. Try again later.
    
    -EFAULT		Invalid address (no VMA or zero page).
    
    -ENOMEM		Unable to allocate memory on target node.
    
    -EIO		Unable to write back page. The page must be written
    		back in order to move it since the page is dirty and the
    		filesystem does not provide a migration function that
    		would allow the moving of dirty pages.
    
    -EINVAL		A dirty page cannot be moved. The filesystem does not provide
    		a migration function and has no ability to write back pages.
    
    The flags parameter indicates what types of pages to move:
    
    MPOL_MF_MOVE	Move pages that are only mapped by the process.
    
    MPOL_MF_MOVE_ALL Also move pages that are mapped by multiple processes.
    		Requires sufficient capabilities.
    
    Possible return codes from move_pages()
    
    -ENOENT		No pages found that would require moving. All pages
    		are either already on the target node, not present, had an
    		invalid address or could not be moved because they were
    		mapped by multiple processes.
    
    -EINVAL		Flags other than MPOL_MF_MOVE(_ALL) specified or an attempt
    		to migrate pages in a kernel thread.
    
    -EPERM		MPOL_MF_MOVE_ALL specified without sufficient priviledges.
    		or an attempt to move a process belonging to another user.
    
    -EACCES		One of the target nodes is not allowed by the current cpuset.
    
    -ENODEV		One of the target nodes is not online.
    
    -ESRCH		Process does not exist.
    
    -E2BIG		Too many pages to move.
    
    -ENOMEM		Not enough memory to allocate control array.
    
    -EFAULT		Parameters could not be accessed.
    
    A test program for move_pages() may be found with the patches
    on ftp.kernel.org:/pub/linux/kernel/people/christoph/pmig/patches-2.6.17-rc4-mm3
    
    From: Christoph Lameter <clameter@sgi.com>
    
      Detailed results for sys_move_pages()
    
      Pass a pointer to an integer to get_new_page() that may be used to
      indicate where the completion status of a migration operation should be
      placed.  This allows sys_move_pags() to report back exactly what happened to
      each page.
    
      Wish there would be a better way to do this. Looks a bit hacky.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Jes Sorensen <jes@trained-monkey.org>
    Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Lee Schermerhorn <lee.schermerhorn@hp.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Michael Kerrisk <mtk-manpages@gmx.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 95a402c3847cc16f4ba03013cd01404fa0f14c2e
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:53 2006 -0700

    [PATCH] page migration: use allocator function for migrate_pages()
    
    Instead of passing a list of new pages, pass a function to allocate a new
    page.  This allows the correct placement of MPOL_INTERLEAVE pages during page
    migration.  It also further simplifies the callers of migrate pages.
    migrate_pages() becomes similar to migrate_pages_to() so drop
    migrate_pages_to().  The batching of new page allocations becomes unnecessary.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Jes Sorensen <jes@trained-monkey.org>
    Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Lee Schermerhorn <lee.schermerhorn@hp.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit aaa994b300a172afafab47938804836b923e5ef7
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:52 2006 -0700

    [PATCH] page migration: handle freeing of pages in migrate_pages()
    
    Do not leave pages on the lists passed to migrate_pages().  Seems that we will
    not need any postprocessing of pages.  This will simplify the handling of
    pages by the callers of migrate_pages().
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Jes Sorensen <jes@trained-monkey.org>
    Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Lee Schermerhorn <lee.schermerhorn@hp.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e24f0b8f76cc3dd96f36f5b6a9f020f6c3fce198
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:51 2006 -0700

    [PATCH] page migration: simplify migrate_pages()
    
    Currently migrate_pages() is mess with lots of goto.  Extract two functions
    from migrate_pages() and get rid of the gotos.
    
    Plus we can just unconditionally set the locked bit on the new page since we
    are the only one holding a reference.  Locking is to stop others from
    accessing the page once we establish references to the new page.
    
    Remove the list_del from move_to_lru in order to have finer control over list
    processing.
    
    [akpm@osdl.org: add debug check]
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Cc: Jes Sorensen <jes@trained-monkey.org>
    Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Lee Schermerhorn <lee.schermerhorn@hp.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8f9de51a4a98ba32f839903b7d009788bc2c295d
Author: Kirill Korotaev <dev@openvz.org>
Date:   Fri Jun 23 02:03:50 2006 -0700

    [PATCH] printk() should not be called under zone->lock
    
    This patch fixes printk() under zone->lock in show_free_areas().  It can be
    unsafe to call printk() under this lock, since caller can try to
    allocate/free some memory and selfdeadlock on this lock.  I found
    allocations/freeing mem both in netconsole and serial console.
    
    This issue was faced in reallity when meminfo was periodically printed for
    debug purposes and netconsole was used.
    
    Signed-off-by: Kirill Korotaev <dev@openvz.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d501e62bc7796e90b0312648e23ac39490dfbf87
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 23 02:03:50 2006 -0700

    [PATCH] Delete unused definitions of kvaddr_to_nid
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 485bb99b49a173a22a0bbf4e189465414947ecac
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri Jun 23 02:03:49 2006 -0700

    [PATCH] kernel-doc for mm/filemap.c
    
    mm/filemap.c:
    - add lots of kernel-doc;
    - fix some typos and kernel-doc errors;
    - drop some blank lines between function close and EXPORT_SYMBOL();
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 800590f523bf3bde9fa6c8e4d6763e4bf6a2c8ec
Author: Paul Drynoff <pauldrynoff@gmail.com>
Date:   Fri Jun 23 02:03:48 2006 -0700

    [PATCH] slab: kmalloc, kzalloc comments cleanup and fix
    
    - Move comments for kmalloc to right place, currently it near __do_kmalloc
    
    - Comments for kzalloc
    
    - More detailed comments for kmalloc
    
    - Appearance of "kmalloc" and "kzalloc" man pages after "make mandocs"
    
    [rdunlap@xenotime.net: simplification]
    Signed-off-by: Paul Drynoff <pauldrynoff@gmail.com>
    Acked-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5a4d43615921575b0c8299a5407ce4836e4138fd
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:47 2006 -0700

    [PATCH] update vm_total_pages at memory hotadd
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd1e22b8e0a90f9a91e4c27db14ca15773659bf7
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:03:47 2006 -0700

    [PATCH] initialise total_memory() earlier
    
    Initialise total_memory earlier in boot.  Because if for some reason we run
    page reclaim early in boot, we don't want total_memory to be zero when we use
    it as a divisor.
    
    And rename total_memory to vm_total_pages to avoid naming clashes with
    architectures.
    
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Cc: Martin Bligh <mbligh@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e0a42726794f71336ff4b26084d453dd597471ce
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 23 02:03:46 2006 -0700

    [PATCH] mm/slab.c: fix early init assumption
    
    The SLAB bootstrap code assumes that the first two kmalloc caches created
    (the INDEX_AC and INDEX_L3 kmalloc caches) wont be off-slab.  But due to AC
    and L3 structure size increase in lockdep, one of them ended up being
    off-slab, and subsequently crashing with:
    
    Unable to handle kernel NULL pointer dereference at 0000000000000000 RIP:
     [<ffffffff80267478>] kmem_cache_alloc+0x26/0x7d
    
    The fix is to introduce a bootstrap flag and to use it to prevent off-slab
    caches being created so early during bootup.
    
    (The calculation for off-slab caches is quite complex so i didnt want to
    complicate things with introducing yet another INDEX_ calculation, the flag
    approach is simpler and smaller.)
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Cc: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 668e0d8f1a02fd75f1c1e8142a6b08455914242c
Author: Hugh Dickins <hugh@veritas.com>
Date:   Fri Jun 23 02:03:45 2006 -0700

    [PATCH] fix update_mmu_cache in fremap.c
    
    There are two calls to update_mmu_cache in fremap.c, both defective.
    The one in install_page needs to be accompanied by lazy_mmu_prot_update
    (some other cleanup time, move that into ia64 update_mmu_cache itself); and
    the one in install_file_pte should be removed since the pte is not present.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 185606fc6a120dbebffa6d06a559c20ec2b20034
Author: Hugh Dickins <hugh@veritas.com>
Date:   Fri Jun 23 02:03:45 2006 -0700

    [PATCH] remove unused o_flags from do_shmat
    
    Remove the unused variable o_flags from do_shmat.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 70af7c5c6492ef6ad137dbff6c4568c73edbcaf0
Author: Hugh Dickins <hugh@veritas.com>
Date:   Fri Jun 23 02:03:44 2006 -0700

    [PATCH] swapoff: use atomic_inc_not_zero() on mm_users
    
    Now that we have atomic_inc_not_zero, it's more elegant for try_to_unuse to
    use that on mm_users: doesn't actually matter at present, but safer to be
    sure that once mm_users has gone to 0, nothing raises it for an instant.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 9637a5efd4fbe36164c5ce7f6a0ee68b2bf22b7f
Author: David Howells <dhowells@redhat.com>
Date:   Fri Jun 23 02:03:43 2006 -0700

    [PATCH] add page_mkwrite() vm_operations method
    
    Add a new VMA operation to notify a filesystem or other driver about the
    MMU generating a fault because userspace attempted to write to a page
    mapped through a read-only PTE.
    
    This facility permits the filesystem or driver to:
    
     (*) Implement storage allocation/reservation on attempted write, and so to
         deal with problems such as ENOSPC more gracefully (perhaps by generating
         SIGBUS).
    
     (*) Delay making the page writable until the contents have been written to a
         backing cache. This is useful for NFS/AFS when using FS-Cache/CacheFS.
         It permits the filesystem to have some guarantee about the state of the
         cache.
    
     (*) Account and limit number of dirty pages. This is one piece of the puzzle
         needed to make shared writable mapping work safely in FUSE.
    
    Needed by cachefs (Or is it cachefiles?  Or fscache? <head spins>).
    
    At least four other groups have stated an interest in it or a desire to use
    the functionality it provides: FUSE, OCFS2, NTFS and JFFS2.  Also, things like
    EXT3 really ought to use it to deal with the case of shared-writable mmap
    encountering ENOSPC before we permit the page to be dirtied.
    
    From: Peter Zijlstra <a.p.zijlstra@chello.nl>
    
      get_user_pages(.write=1, .force=1) can generate COW hits on read-only
      shared mappings, this patch traps those as mkpage_write candidates and fails
      to handle them the old way.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Cc: Miklos Szeredi <miklos@szeredi.hu>
    Cc: Joel Becker <Joel.Becker@oracle.com>
    Cc: Mark Fasheh <mark.fasheh@oracle.com>
    Cc: Anton Altaparmakov <aia21@cantab.net>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bd96b9eb7cfd6ab24ba244360a09980a720874d2
Author: Con Kolivas <kernel@kolivas.org>
Date:   Fri Jun 23 02:03:42 2006 -0700

    [PATCH] mm: fix swap unused warning
    
    If CONFIG_SWAP is not defined we get:
    
    mm/vmscan.c: In function รขยยremove_mappingรขยย:
    mm/vmscan.c:387: warning: unused variable รขยยswapรขยย
    
    Convert defines in swap.h into blank inline functions to fix this warning
    and be consistent.
    
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 30c253e6da655d73eb8bfe2adca9b8f4d82fb81e
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Fri Jun 23 02:03:41 2006 -0700

    [PATCH] sparsemem: record nid during memory present
    
    Record the node id as we mark sections for instantiation.  Use this nid
    during instantiation to direct allocations.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Cc: Mike Kravetz <kravetz@us.ibm.com>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: Mel Gorman <mel@csn.ul.ie>
    Cc: Bob Picco <bob.picco@hp.com>
    Cc: Jack Steiner <steiner@sgi.com>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: Martin Bligh <mbligh@google.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ddc2e812d592457747c4367fb73edcaa8e1e49ff
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:03:40 2006 -0700

    [PATCH] slab: verify pointers before free
    
    Passing an invalid pointer to kfree() and kmem_cache_free() is likely to
    cause bad memory corruption or even take down the whole system because the
    bad pointer is likely reused immediately due to the per-CPU caches.  Until
    now, we don't do any verification for this if CONFIG_DEBUG_SLAB is
    disabled.
    
    As suggested by Linus, add PageSlab check to page_to_cache() and
    page_to_slab() to verify pointers passed to kfree().  Also, move the
    stronger check from cache_free_debugcheck() to kmem_cache_free() to ensure
    the passed pointer actually belongs to the cache we're about to free the
    object.
    
    For page_to_cache() and page_to_slab(), the assertions should have
    virtually no extra cost (two instructions, no data cache pressure) and for
    kmem_cache_free() the overhead should be minimal.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Cc: Manfred Spraul <manfred@colorfullife.com>
    Cc: Christoph Lameter <clameter@engr.sgi.com>
    Cc: Linus Torvalds <torvalds@osdl.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8d3c138b77f195ca0eee6fb639ae73f5ea9edb6b
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:39 2006 -0700

    [PATCH] page migration: Update documentation
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04e62a29bf157ce1edd168f2b71b533c80d13628
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:38 2006 -0700

    [PATCH] More page migration: use migration entries for file pages
    
    This implements the use of migration entries to preserve ptes of file backed
    pages during migration.  Processes can therefore be migrated back and forth
    without loosing their connection to pagecache pages.
    
    Note that we implement the migration entries only for linear mappings.
    Nonlinear mappings still require the unmapping of the ptes for migration.
    
    And another writepage() ugliness shows up.  writepage() can drop the page
    lock.  Therefore we have to remove migration ptes before calling writepages()
    in order to avoid having migration entries point to unlocked pages.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 442c9137de8d769053e81d325709dca72f0b5e44
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:38 2006 -0700

    [PATCH] More page migration: do not inc/dec rss counters
    
    If we install a migration entry then the rss not really decreases since the
    page is just moved somewhere else.  We can save ourselves the work of
    decrementing and later incrementing which will just eventually cause cacheline
    bouncing.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6c5240ae7f48c83fcaa8e24fa63e7eb09aba5651
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:37 2006 -0700

    [PATCH] Swapless page migration: modify core logic
    
    Use the migration entries for page migration
    
    This modifies the migration code to use the new migration entries.  It now
    becomes possible to migrate anonymous pages without having to add a swap
    entry.
    
    We add a couple of new functions to replace migration entries with the proper
    ptes.
    
    We cannot take the tree_lock for migrating anonymous pages anymore.  However,
    we know that we hold the only remaining reference to the page when the page
    count reaches 1.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d75a0fcda2cfc71b50e16dc89e0c32c57d427e85
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:36 2006 -0700

    [PATCH] Swapless page migration: rip out swap based logic
    
    Rip the page migration logic out.
    
    Remove all code that has to do with swapping during page migration.
    
    This also guts the ability to migrate pages to swap.  No one used that so lets
    let it go for good.
    
    Page migration should be a bit broken after this patch.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0697212a411c1dae03c27845f2de2f3adb32c331
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:35 2006 -0700

    [PATCH] Swapless page migration: add R/W migration entries
    
    Implement read/write migration ptes
    
    We take the upper two swapfiles for the two types of migration ptes and define
    a series of macros in swapops.h.
    
    The VM is modified to handle the migration entries.  migration entries can
    only be encountered when the page they are pointing to is locked.  This limits
    the number of places one has to fix.  We also check in copy_pte_range and in
    mprotect_pte_range() for migration ptes.
    
    We check for migration ptes in do_swap_cache and call a function that will
    then wait on the page lock.  This allows us to effectively stop all accesses
    to apge.
    
    Migration entries are created by try_to_unmap if called for migration and
    removed by local functions in migrate.c
    
    From: Hugh Dickins <hugh@veritas.com>
    
      Several times while testing swapless page migration (I've no NUMA, just
      hacking it up to migrate recklessly while running load), I've hit the
      BUG_ON(!PageLocked(p)) in migration_entry_to_page.
    
      This comes from an orphaned migration entry, unrelated to the current
      correctly locked migration, but hit by remove_anon_migration_ptes as it
      checks an address in each vma of the anon_vma list.
    
      Such an orphan may be left behind if an earlier migration raced with fork:
      copy_one_pte can duplicate a migration entry from parent to child, after
      remove_anon_migration_ptes has checked the child vma, but before it has
      removed it from the parent vma.  (If the process were later to fault on this
      orphaned entry, it would hit the same BUG from migration_entry_wait.)
    
      This could be fixed by locking anon_vma in copy_one_pte, but we'd rather
      not.  There's no such problem with file pages, because vma_prio_tree_add
      adds child vma after parent vma, and the page table locking at each end is
      enough to serialize.  Follow that example with anon_vma: add new vmas to the
      tail instead of the head.
    
      (There's no corresponding problem when inserting migration entries,
      because a missed pte will leave the page count and mapcount high, which is
      allowed for.  And there's no corresponding problem when migrating via swap,
      because a leftover swap entry will be correctly faulted.  But the swapless
      method has no refcounting of its entries.)
    
    From: Ingo Molnar <mingo@elte.hu>
    
      pte_unmap_unlock() takes the pte pointer as an argument.
    
    From: Hugh Dickins <hugh@veritas.com>
    
      Several times while testing swapless page migration, gcc has tried to exec
      a pointer instead of a string: smells like COW mappings are not being
      properly write-protected on fork.
    
      The protection in copy_one_pte looks very convincing, until at last you
      realize that the second arg to make_migration_entry is a boolean "write",
      and SWP_MIGRATION_READ is 30.
    
      Anyway, it's better done like in change_pte_range, using
      is_write_migration_entry and make_migration_entry_read.
    
    From: Hugh Dickins <hugh@veritas.com>
    
      Remove unnecessary obfuscation from sys_swapon's range check on swap type,
      which blew up causing memory corruption once swapless migration made
      MAX_SWAPFILES no longer 2 ^ MAX_SWAPFILES_SHIFT.
    
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Christoph Lameter <clameter@engr.sgi.com>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    From: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 8351a6e4785218a2b03c142be92926baff95ba5c
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:33 2006 -0700

    [PATCH] page migration cleanup: move fallback handling into special function
    
    Move the fallback code into a new fallback function and make the function
    behave like any other migration function.  This requires retaking the lock if
    pageout() drops it.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 2d1db3b1170db4e8bf0531dd636742269c2cf579
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:33 2006 -0700

    [PATCH] page migration cleanup: pass "mapping" to migration functions
    
    Change handling of address spaces.
    
    Pass a pointer to the address space in which the page is migrated to all
    migration function.  This avoids repeatedly having to retrieve the address
    space pointer from the page and checking it for validity.  The old page
    mapping will change once migration has gone to a certain step, so it is less
    confusing to have the pointer always available.
    
    Move the setting of the mapping and index for the new page into
    migrate_pages().
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c3fcf8a5daacf350f0632e1379414c01f34eeea3
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:32 2006 -0700

    [PATCH] page migration cleanup: extract try_to_unmap from migration functions
    
    Extract try_to_unmap and rename remove_references -> move_mapping
    
    try_to_unmap() may significantly change the page state by for example setting
    the dirty bit.  It is therefore best to unmap in migrate_pages() before
    calling any migration functions.
    
    migrate_page_remove_references() will then only move the new page in place of
    the old page in the mapping.  Rename the function to
    migrate_page_move_mapping().
    
    This allows us to get rid of the special unmapping for the fallback path.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5b5c7120e2154239837fad5e3c7b7b781092b19c
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:29 2006 -0700

    [PATCH] page migration cleanup: drop nr_refs in remove_references()
    
    Drop nr_refs parameter from migrate_page_remove_references()
    
    The nr_refs parameter is not really useful since the number of remaining
    references is always
    
    1 for anonymous pages without a mapping
    2 for pages with a mapping
    3 for pages with a mapping and PagePrivate set.
    
    Remove the early check for the number of references since we are checking
    page_mapcount() earlier.  Ultimately only the refcount matters after the
    tree_lock has been obtained.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.coim>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e7340f73307abed9283d0a07570d06e228c205dd
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:29 2006 -0700

    [PATCH] page migration cleanup: remove useless definitions
    
    Remove the export for migrate_page_remove_references() and migrate_page_copy()
    that are unlikely to be used directly by filesystems implementing migration.
    The export was useful when buffer_migrate_page() lived in fs/buffer.c but it
    has now been moved to migrate.c in the migration reorg.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1d8b85ccf1ed53a71b092fb5d807edf1ea7dabdd
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:28 2006 -0700

    [PATCH] page migration cleanup: group functions
    
    Reorder functions in migrate.c.  Group all migration functions for struct
    address_space_operations together.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7352349a19e84b28f10668eca9cbb6bbbfa9d38e
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:27 2006 -0700

    [PATCH] page migration cleanup: rename "ignrefs" to "migration"
    
    migrate is a better name since it is only used by page migration.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 111ebb6e6f7bd7de6d722c5848e95621f43700d9
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Fri Jun 23 02:03:26 2006 -0700

    [PATCH] writeback: fix range handling
    
    When a writeback_control's `start' and `end' fields are used to
    indicate a one-byte-range starting at file offset zero, the required
    values of .start=0,.end=0 mean that the ->writepages() implementation
    has no way of telling that it is being asked to perform a range
    request.  Because we're currently overloading (start == 0 && end == 0)
    to mean "this is not a write-a-range request".
    
    To make all this sane, the patch changes range of writeback_control.
    
    So caller does: If it is calling ->writepages() to write pages, it
    sets range (range_start/end or range_cyclic) always.
    
    And if range_cyclic is true, ->writepages() thinks the range is
    cyclic, otherwise it just uses range_start and range_end.
    
    This patch does,
    
        - Add LLONG_MAX, LLONG_MIN, ULLONG_MAX to include/linux/kernel.h
          -1 is usually ok for range_end (type is long long). But, if someone did,
    
    		range_end += val;		range_end is "val - 1"
    		u64val = range_end >> bits;	u64val is "~(0ULL)"
    
          or something, they are wrong. So, this adds LLONG_MAX to avoid nasty
          things, and uses LLONG_MAX for range_end.
    
        - All callers of ->writepages() sets range_start/end or range_cyclic.
    
        - Fix updates of ->writeback_index. It seems already bit strange.
          If it starts at 0 and ended by check of nr_to_write, this last
          index may reduce chance to scan end of file.  So, this updates
          ->writeback_index only if range_cyclic is true or whole-file is
          scanned.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Cc: Nathan Scott <nathans@sgi.com>
    Cc: Anton Altaparmakov <aia21@cantab.net>
    Cc: Steven French <sfrench@us.ibm.com>
    Cc: "Vladimir V. Saveliev" <vs@namesys.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4c91c3648c620003cb7b21b8858f36cd6132e168
Author: Peter Zijlstra <a.p.zijlstra@chello.nl>
Date:   Fri Jun 23 02:03:25 2006 -0700

    [PATCH] buglet in radix_tree_tag_set
    
    The comment states: 'Setting a tag on a not-present item is a BUG.' Hence
    if 'index' is larger than the maxindex; the item _cannot_ be presen; it
    should also be a BUG.
    
    Also, this allows the following statement (assume a fresh tree):
    
      radix_tree_tag_set(root, 16, 1);
    
    to fail silently, but when preceded by:
    
      radix_tree_insert(root, 32, item);
    
    it would BUG, because the height has been extended by the insert.
    
    In neither case was 16 present.
    
    Signed-off-by: Peter Zijlstra <a.p.zijlstra@chello.nl>
    Acked-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58ce1fd5805647a58a050bbbbd2252ea5ecb47b3
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:03:24 2006 -0700

    [PATCH] slab: redzone double-free detection
    
    At present our slab debugging tells us that it detected a double-free or
    corruption - it does not distinguish between them.  Sometimes it's useful
    to be able to differentiate between these two types of information.
    
    Add double-free detection to redzone verification when freeing an object.
    As explained by Manfred, when we are freeing an object, both redzones
    should be RED_ACTIVE.  However, if both are RED_INACTIVE, we are trying to
    free an object that was already free'd.
    
    Signed-off-by: Manfred Spraul <manfred@colorfullife.com>
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit b344e05c585406904c70865e531e02467c4c7931
Author: Hua Zhong <hzhong@gmail.com>
Date:   Fri Jun 23 02:03:23 2006 -0700

    [PATCH] likely cleanup: remove unlikely in sys_mprotect()
    
    With likely/unlikely profiling on my not-so-busy-typical-developmentsystem
    there are 5k misses vs 2k hits.  So I guess we should remove the unlikely.
    
    Signed-off-by: Hua Zhong <hzhong@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cfd9b7df4abd3257c9e381b0e445817b26a51c0c
Author: Nick Piggin <npiggin@suse.de>
Date:   Fri Jun 23 02:03:22 2006 -0700

    [PATCH] radix-tree: small
    
    Reduce radix tree node memory usage by about a factor of 4 for small files
    (< 64K).  There are pointer traversal and memory usage costs for large
    files with dense pagecache.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 612d6c19db2fd0dc97b0fa370613ecd4a305ffc3
Author: Nick Piggin <npiggin@suse.de>
Date:   Fri Jun 23 02:03:22 2006 -0700

    [PATCH] radix-tree: direct data
    
    The ability to have height 0 radix trees (a direct pointer to the data item
    rather than going through a full node->slot) quietly disappeared with
    old-2.6-bkcvs commit ffee171812d51652f9ba284302d9e5c5cc14bdfd.  On 64-bit
    machines this causes nearly 600 bytes to be used for every <= 4K file in
    pagecache.
    
    Re-introduce this feature, root tags stored in spare ->gfp_mask bits.
    
    Simplify radix_tree_delete's complex tag clearing arrangement (which would
    become even more complex) by just falling back to tag clearing functions
    (the pagecache radix-tree never uses this path anyway, so the icache
    savings will mean it's actually a speedup).
    
    On my 4GB G5, this saves 8MB RAM per kernel kernel source+object tree in
    pagecache.
    
    Pagecache lookup, insertion, and removal speed for small files will also be
    improved.
    
    This makes RCU radix tree harder, but it's worth it.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 929f97276bcf7f4a95272ed08a85339b98ba210d
Author: Dean Nelson <dcn@sgi.com>
Date:   Fri Jun 23 02:03:21 2006 -0700

    [PATCH] change gen_pool allocator to not touch managed memory
    
    Modify the gen_pool allocator (lib/genalloc.c) to utilize a bitmap scheme
    instead of the buddy scheme.  The purpose of this change is to eliminate
    the touching of the actual memory being allocated.
    
    Since the change modifies the interface, a change to the uncached allocator
    (arch/ia64/kernel/uncached.c) is also required.
    
    Both Andrey Volkov and Jes Sorenson have expressed a desire that the
    gen_pool allocator not write to the memory being managed. See the
    following:
    
      http://marc.theaimsgroup.com/?l=linux-kernel&m=113518602713125&w=2
      http://marc.theaimsgroup.com/?l=linux-kernel&m=113533568827916&w=2
    
    Signed-off-by: Dean Nelson <dcn@sgi.com>
    Cc: Andrey Volkov <avolkov@varma-el.com>
    Acked-by: Jes Sorensen <jes@trained-monkey.org>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 833423143c3a7c6545e409d65febd0d92deb351b
Author: Nick Piggin <npiggin@suse.de>
Date:   Fri Jun 23 02:03:20 2006 -0700

    [PATCH] mm: introduce remap_vmalloc_range()
    
    Add remap_vmalloc_range, vmalloc_user, and vmalloc_32_user so that drivers
    can have a nice interface for remapping vmalloc memory.
    
    Signed-off-by: Nick Piggin <npiggin@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 762834e8bf46bf41ce9034d062a7c1f8563175f3
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:19 2006 -0700

    [PATCH] Unify pxm_to_node() and node_to_pxm()
    
    Consolidate the various arch-specific implementations of pxm_to_node() and
    node_to_pxm() into a single generic version.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: "Brown, Len" <len.brown@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6277db4ab271862ed599da08d78961c70f00002
Author: Rafael J. Wysocki <rjw@sisk.pl>
Date:   Fri Jun 23 02:03:18 2006 -0700

    [PATCH] swsusp: rework memory shrinker
    
    Rework the swsusp's memory shrinker in the following way:
    
    - Simplify balance_pgdat() by removing all of the swsusp-related code
      from it.
    
    - Make shrink_all_memory() use shrink_slab() and a new function
      shrink_all_zones() which calls shrink_active_list() and
      shrink_inactive_list() directly for each zone in a way that's optimized
      for suspend.
    
    In shrink_all_memory() we try to free exactly as many pages as the caller
    asks for, preferably in one shot, starting from easier targets.  ยIf slab
    caches are huge, they are most likely to have enough pages to reclaim.
    ยThe inactive lists are next (the zones with more inactive pages go first)
    etc.
    
    Each time shrink_all_memory() attempts to shrink the active and inactive
    lists for each zone in 5 passes.  ยIn the first pass, only the inactive
    lists are taken into consideration.  ยIn the next two passes the active
    lists are also shrunk, but mapped pages are not reclaimed.  ยIn the last
    two passes the active and inactive lists are shrunk and mapped pages are
    reclaimed as well.  The aim of this is to alter the reclaim logic to choose
    the best pages to keep on resume and improve the responsiveness of the
    resumed system.
    
    Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
    Signed-off-by: Con Kolivas <kernel@kolivas.org>
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7a7c381d25067b9a2bfe025dfcb16459daec0373
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 23 02:03:17 2006 -0700

    [PATCH] slab: stop using list_for_each
    
    Use the _entry variant everywhere to clean the code up a tiny bit.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e1b6aa6f1404f162697650df2cdb6c374b1d6a5b
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 23 02:03:17 2006 -0700

    [PATCH] slab: clean up kmem_getpages
    
    The last ifdef addition hit the ugliness treshold on this functions, so:
    
     - rename the variable i to nr_pages so it's somewhat descriptive
     - remove the addr variable and do the page_address call at the very end
     - instead of ifdef'ing the whole alloc_pages_node call just make the
       __GFP_COMP addition to flags conditional
     - rewrite the __GFP_COMP comment to make sense
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit a43a8c39bbb493c9e93f6764b350de2e33e18e92
Author: Chen, Kenneth W <kenneth.w.chen@intel.com>
Date:   Fri Jun 23 02:03:15 2006 -0700

    [PATCH] tightening hugetlb strict accounting
    
    Current hugetlb strict accounting for shared mapping always assume mapping
    starts at zero file offset and reserves pages between zero and size of the
    file.  This assumption often reserves (or lock down) a lot more pages then
    necessary if application maps at none zero file offset.  libhugetlbfs is
    one example that requires proper reservation on shared mapping starts at
    none zero offset.
    
    This patch extends the reservation and hugetlb strict accounting to support
    any arbitrary pair of (offset, len), resulting a much more robust and
    accurate scheme.  More importantly, it won't lock down any hugetlb pages
    outside file mapping.
    
    Signed-off-by: Ken Chen <kenneth.w.chen@intel.com>
    Acked-by: Adam Litke <agl@us.ibm.com>
    Cc: David Gibson <david@gibson.dropbear.id.au>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit e8f03d02080b25f53cd6bba8dc3a297803f18c01
Author: Andreas Dilger <adilger@shaw.ca>
Date:   Fri Jun 23 02:03:14 2006 -0700

    [PATCH] reserve space for swap label
    
    Reserve space in the swap disk header for a LABEL and UUID to be specified.
     This has been possible with util-linux-2.12b (via e2fsprogs 1.36
    libblkid), and is used by at least FC3 and later.  The kernel doesn't
    really care about this, but the space shouldn't accidentally be used by
    something else either.
    
    Also make the on-disk structures be fixed-size types, instead of "int",
    though I don't know of any architecture in use where an "int" isn't the
    same size as a "__u32" (all current kernel arches have it as "unsigned
    int").
    
    Signed-off-by: Andreas Dilger <adilger@shaw.ca>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6937a25cff818d32d0f9ff58a518c9ab96760aeb
Author: Dave Peterson <dsp@llnl.gov>
Date:   Fri Jun 23 02:03:13 2006 -0700

    [PATCH] mm: fix typos in comments in mm/oom_kill.c
    
    This fixes a few typos in the comments in mm/oom_kill.c.
    
    Signed-off-by: David S. Peterson <dsp@llnl.gov>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit fadd8fbd153c12963f8fe3c9ef7f8967f286f98b
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:13 2006 -0700

    [PATCH] support for panic at OOM
    
    This patch adds panic_on_oom sysctl under sys.vm.
    
    When sysctl vm.panic_on_oom = 1, the kernel panics intead of killing rogue
    processes.  And if vm.panic_on_oom is 0 the kernel will do oom_kill() in
    the same way as it does today.  Of course, the default value is 0 and only
    root can modifies it.
    
    In general, oom_killer works well and kill rogue processes.  So the whole
    system can survive.  But there are environments where panic is preferable
    rather than kill some processes.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67de648211fa041fe08a0c25241a4980bbb90698
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Fri Jun 23 02:03:12 2006 -0700

    [PATCH] squash duplicate page_to_pfn and pfn_to_page
    
    We have architectures where the size of page_to_pfn and pfn_to_page are
    significant enough to overall image size that they wish to push them out of
    line.  However, in the process we have grown a second copy of the
    implementation of each of these routines for each memory model.  Share the
    implmentation exposing it either inline or out-of-line as required.
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6811378e7d8b9aa4fca2a1ca73d24c9d67c9cb12
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:11 2006 -0700

    [PATCH] wait_table and zonelist initializing for memory hotadd: update zonelists
    
    In current code, zonelist is considered to be build once, no modification.
    But MemoryHotplug can add new zone/pgdat.  It must be updated.
    
    This patch modifies build_all_zonelists().  By this, build_all_zonelist() can
    reconfig pgdat's zonelists.
    
    To update them safety, this patch use stop_machine_run().  Other cpus don't
    touch among updating them by using it.
    
    In old version (V2 of node hotadd), kernel updated them after zone
    initialization.  But present_page of its new zone is still 0, because
    online_page() is not called yet at this time.  Build_zonelists() checks
    present_pages to find present zone.  It was too early.  So, I changed it after
    online_pages().
    
    Signed-off-by: Yasunori Goto     <y-goto@jp.fujitsu.com>
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cca448fe92246fb59efe55ba2e048ded0971a9af
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:10 2006 -0700

    [PATCH] wait_table and zonelist initializing for memory hotadd: wait_table initialization
    
    Wait_table is initialized according to zone size at boot time.  But, we cannot
    know the maixmum zone size when memory hotplug is enabled.  It can be
    changed....  And resizing of wait_table is hard.
    
    So kernel allocate and initialzie wait_table as its maximum size.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 718127cc3170454f4aa274fdd2f1e01574fecd66
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:10 2006 -0700

    [PATCH] wait_table and zonelist initializing for memory hotadd: add return code for init_current_empty_zone
    
    When add_zone() is called against empty zone (not populated zone), we have to
    initialize the zone which didn't initialize at boot time.  But,
    init_currently_empty_zone() may fail due to allocation of wait table.  So,
    this patch is to catch its error code.
    
    Changes against wait_table is in the next patch.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 86356ab147669bd3bcb2149fd9561d1280835c24
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:09 2006 -0700

    [PATCH] wait_table and zonelist initializing for memory hotadd: change to meminit for build_zonelist
    
    Change definitions of some functions and data from __init to __meminit.
    
    These functions and data can be used after bootup by this patch to be used for
    hot-add codes.
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02b694dea473ad3db1e2d1b14c1fef8fbd92e5e6
Author: Yasunori Goto <y-goto@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:08 2006 -0700

    [PATCH] wait_table and zonelist initializing for memory hotadd: change name of wait_table_size()
    
    This is just to rename from wait_table_size() to wait_table_hash_nr_entries().
    
    Signed-off-by: Yasunori Goto <y-goto@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 3c5a87f476bed45616e7e543dcaea4440c77bf93
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:08 2006 -0700

    [PATCH] migration: remove unnecessary PageSwapCache checks
    
    Remove two unnecessary PageSwapCache checks.  The page refcount is raised
    and therefore page migration cannot occur in both functions.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4776874ff096cd410382c0eca5d75f69c9dfa58f
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:03:07 2006 -0700

    [PATCH] slab: page mapping cleanup
    
    Clean up slab allocator page mapping a bit.  The memory allocated for a
    slab is physically contiguous so it is okay to assume struct pages are too
    so kill the long-standing comment.  Furthermore, rename set_slab_attr to
    slab_map_pages and add a comment explaining why its needed.
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f886ed443fedb109e2062988bf120a531f0ec80a
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 23 02:03:06 2006 -0700

    [PATCH] PG_uncached is ia64 only
    
    As Nick points out, only ia64 uses PG_uncached.  So we can push it up into the
    higher bits of the lower half of page->flags and make room for another flag on
    32-bit machines.
    
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Cc: Jesse Barnes <jbarnes@sgi.com>
    Cc: Jes Sorensen <jes@trained-monkey.org>
    Cc: Nick Piggin <nickpiggin@yahoo.com.au>
    Cc: Andy Whitcroft <apw@shadowen.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 729bd0b74ce9ac6c829109052fcd565f5c366ca5
Author: Pekka Enberg <penberg@cs.helsinki.fi>
Date:   Fri Jun 23 02:03:05 2006 -0700

    [PATCH] slab: extract cache_free_alien from __cache_free
    
    Move alien object freeing to cache_free_alien() to reduce #ifdef clutter in
    __cache_free().
    
    Signed-off-by: Pekka Enberg <penberg@cs.helsinki.fi>
    Acked-by: Christoph Lameter <clameter@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4da5eda0dca9730f59f391230304526ab4bffec7
Author: Christoph Lameter <clameter@sgi.com>
Date:   Fri Jun 23 02:03:04 2006 -0700

    [PATCH] Page Migration: Make do_swap_page redo the fault
    
    It is better to redo the complete fault if do_swap_page() finds that the
    page is not in PageSwapCache() because the page migration code may have
    replaced the swap pte already with a pte pointing to valid memory.
    
    do_swap_page() may interpret an invalid swap entry without this patch
    because we do not reload the pte if we are looping back.  The page
    migration code may already have reused the swap entry referenced by our
    local swp_entry.
    
    Signed-off-by: Christoph Lameter <clameter@sgi.com>
    Cc: Hugh Dickins <hugh@veritas.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit cb2b95e1c6b56e3d2369d3a5f4bc97f4fa180683
Author: Andy Whitcroft <apw@shadowen.org>
Date:   Fri Jun 23 02:03:01 2006 -0700

    [PATCH] zone handle unaligned zone boundaries
    
    The buddy allocator has a requirement that boundaries between contigious
    zones occur aligned with the the MAX_ORDER ranges.  Where they do not we
    will incorrectly merge pages cross zone boundaries.  This can lead to pages
    from the wrong zone being handed out.
    
    Originally the buddy allocator would check that buddies were in the same
    zone by referencing the zone start and end page frame numbers.  This was
    removed as it became very expensive and the buddy allocator already made
    the assumption that zones boundaries were aligned.
    
    It is clear that not all configurations and architectures are honouring
    this alignment requirement.  Therefore it seems safest to reintroduce
    support for non-aligned zone boundaries.  This patch introduces a new check
    when considering a page a buddy it compares the zone_table index for the
    two pages and refuses to merge the pages where they do not match.  The
    zone_table index is unique for each node/zone combination when
    FLATMEM/DISCONTIGMEM is enabled and for each section/zone combination when
    SPARSEMEM is enabled (a SPARSEMEM section is at least a MAX_ORDER size).
    
    Signed-off-by: Andy Whitcroft <apw@shadowen.org>
    Cc: Dave Hansen <haveblue@us.ibm.com>
    Cc: Mel Gorman <mel@csn.ul.ie>
    Cc: Yasunori Goto <y-goto@jp.fujitsu.com>
    Cc: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6f0419e06a3b151ab616a31accdabef41dc2d1b0
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Fri Jun 23 02:03:00 2006 -0700

    [PATCH] for_each_possible_cpu: xfs
    
    for_each_cpu() actually iterates across all possible CPUs.  We've had mistakes
    in the past where people were using for_each_cpu() where they should have been
    iterating across only online or present CPUs.  This is inefficient and
    possibly buggy.
    
    We're renaming for_each_cpu() to for_each_possible_cpu() to avoid this in the
    future.
    
    This patch replaces for_each_cpu with for_each_possible_cpu.
    in xfs.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Acked-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d6938d1b2768fbf94d1091207d334ef7df786e5a
Author: David Howells <dhowells@redhat.com>
Date:   Fri Jun 23 02:02:59 2006 -0700

    [PATCH] XFS: Use the dentry passed to statfs() to limit the scope of the results
    
    Enable XFS to limit the statfs() results to the project quota covering the
    dentry used as a base for call.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 726c334223180e3c0197cc980a432681370d4baf
Author: David Howells <dhowells@redhat.com>
Date:   Fri Jun 23 02:02:58 2006 -0700

    [PATCH] VFS: Permit filesystem to perform statfs with a known root dentry
    
    Give the statfs superblock operation a dentry pointer rather than a superblock
    pointer.
    
    This complements the get_sb() patch.  That reduced the significance of
    sb->s_root, allowing NFS to place a fake root there.  However, NFS does
    require a dentry to use as a target for the statfs operation.  This permits
    the root in the vfsmount to be used instead.
    
    linux/mount.h has been added where necessary to make allyesconfig build
    successfully.
    
    Interest has also been expressed for use with the FUSE and XFS filesystems.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Cc: Nathan Scott <nathans@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 454e2398be9b9fa30433fccc548db34d19aa9958
Author: David Howells <dhowells@redhat.com>
Date:   Fri Jun 23 02:02:57 2006 -0700

    [PATCH] VFS: Permit filesystem to override root dentry on mount
    
    Extend the get_sb() filesystem operation to take an extra argument that
    permits the VFS to pass in the target vfsmount that defines the mountpoint.
    
    The filesystem is then required to manually set the superblock and root dentry
    pointers.  For most filesystems, this should be done with simple_set_mnt()
    which will set the superblock pointer and then set the root dentry to the
    superblock's s_root (as per the old default behaviour).
    
    The get_sb() op now returns an integer as there's now no need to return the
    superblock pointer.
    
    This patch permits a superblock to be implicitly shared amongst several mount
    points, such as can be done with NFS to avoid potential inode aliasing.  In
    such a case, simple_set_mnt() would not be called, and instead the mnt_root
    and mnt_sb would be set directly.
    
    The patch also makes the following changes:
    
     (*) the get_sb_*() convenience functions in the core kernel now take a vfsmount
         pointer argument and return an integer, so most filesystems have to change
         very little.
    
     (*) If one of the convenience function is not used, then get_sb() should
         normally call simple_set_mnt() to instantiate the vfsmount. This will
         always return 0, and so can be tail-called from get_sb().
    
     (*) generic_shutdown_super() now calls shrink_dcache_sb() to clean up the
         dcache upon superblock destruction rather than shrink_dcache_anon().
    
         This is required because the superblock may now have multiple trees that
         aren't actually bound to s_root, but that still need to be cleaned up. The
         currently called functions assume that the whole tree is rooted at s_root,
         and that anonymous dentries are not the roots of trees which results in
         dentries being left unculled.
    
         However, with the way NFS superblock sharing are currently set to be
         implemented, these assumptions are violated: the root of the filesystem is
         simply a dummy dentry and inode (the real inode for '/' may well be
         inaccessible), and all the vfsmounts are rooted on anonymous[*] dentries
         with child trees.
    
         [*] Anonymous until discovered from another tree.
    
     (*) The documentation has been adjusted, including the additional bit of
         changing ext2_* into foo_* in the documentation.
    
    [akpm@osdl.org: convert ipath_fs, do other stuff]
    Signed-off-by: David Howells <dhowells@redhat.com>
    Acked-by: Al Viro <viro@www.linux.org.uk>
    Cc: Nathan Scott <nathans@sgi.com>
    Cc: Roland Dreier <rolandd@cisco.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1ad5544098a69d7dc1fa508cbb17e13a7a952fd8
Author: Rachita Kothiyal <rachita@in.ibm.com>
Date:   Fri Jun 23 02:02:56 2006 -0700

    [PATCH] Fix cdrom being confused on using kdump
    
    I have seen the cdrom drive appearing confused on using kdump on certain
    x86_64 systems.  During the booting up of the second kernel, the following
    message would keep flooding the console, and the booting would not proceed
    any further.
    
    hda: cdrom_pc_intr: The drive appears confused (ireason = 0x01)
    
    In this patch, whenever we are hitting a confused state in the interrupt
    handler with the DRQ set, we end the request and return ide_stopped.  Using
    this I dont see the status error.
    
    Signed-off-by: Rachita Kothiyal <rachita@in.ibm.com>
    Acked-by: Jens Axboe <axboe@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit ca6bb5d7ab22ac79f608fe6cbc6b12de6a5a19f0
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Jun 22 16:07:52 2006 -0700

    [NET]: Require CAP_NET_ADMIN to create tuntap devices.
    
    The tuntap driver allows an admin to create persistent devices and
    assign ownership of them to individual users. Unfortunately, relaxing
    the permissions on the /dev/net/tun device node so that they can
    actually use those devices will _also_ allow those users to create
    arbitrary new devices of their own. This patch corrects that, and
    adjusts the recommended permissions for the device node accordingly.
    
    Signed-off-By: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f4b8ea7849544114e9d3d682df4d400180854677
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jun 22 16:00:11 2006 -0700

    [NET]: fix net-core kernel-doc
    
    Warning(/var/linsrc/linux-2617-g4//include/linux/skbuff.h:304): No description found for parameter 'dma_cookie'
    Warning(/var/linsrc/linux-2617-g4//include/net/sock.h:1274): No description found for parameter 'copied_early'
    Warning(/var/linsrc/linux-2617-g4//net/core/dev.c:3309): No description found for parameter 'chan'
    Warning(/var/linsrc/linux-2617-g4//net/core/dev.c:3309): No description found for parameter 'event'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8a553ad7f0bf943047943a758cf07017819cb3c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Jun 22 14:28:09 2006 -0700

    [TCP]: Move inclusion of <linux/dmaengine.h> to correct place in <linux/tcp.h>
    
    The new <linux/dmaengine.h> header shouldn't be included from
    the !__KERNEL__ portion of tcp.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 09b8f7a93efd4b2c4ef391e2fbf076f28c6d36d6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 22 03:08:03 2006 -0700

    [IPSEC]: Handle GSO packets
    
    This patch segments GSO packets received by the IPsec stack.  This can
    happen when a NIC driver injects GSO packets into the stack which are
    then forwarded to another host.
    
    The primary application of this is going to be Xen where its backend
    driver may inject GSO packets into dom0.
    
    Of course this also can be used by other virtualisation schemes such as
    VMWare or UML since the tap device could be modified to inject GSO packets
    received through splice.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37c3185a02d4b85fbe134bf5204535405dd2c957
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 22 03:07:29 2006 -0700

    [NET]: Added GSO toggle
    
    This patch adds a generic segmentation offload toggle that can be turned
    on/off for each net device.  For now it only supports in TCPv4.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f4c50d990dcf11a296679dc05de3873783236711
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 22 03:02:40 2006 -0700

    [NET]: Add software TSOv4
    
    This patch adds the GSO implementation for IPv4 TCP.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f6a78bfcb141f963187464bac838d46a81c3882a
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 22 02:57:17 2006 -0700

    [NET]: Add generic segmentation offload
    
    This patch adds the infrastructure for generic segmentation offload.
    The idea is to tap into the potential savings of TSO without hardware
    support by postponing the allocation of segmented skb's until just
    before the entry point into the NIC driver.
    
    The same structure can be used to support software IPv6 TSO, as well as
    UFO and segmentation offload for other relevant protocols, e.g., DCCP.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7967168cefdbc63bf332d6b1548eca7cd65ebbcc
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 22 02:40:14 2006 -0700

    [NET]: Merge TSO/UFO fields in sk_buff
    
    Having separate fields in sk_buff for TSO/UFO (tso_size/ufo_size) is not
    going to scale if we add any more segmentation methods (e.g., DCCP).  So
    let's merge them.
    
    They were used to tell the protocol of a packet.  This function has been
    subsumed by the new gso_type field.  This is essentially a set of netdev
    feature bits (shifted by 16 bits) that are required to process a specific
    skb.  As such it's easy to tell whether a given device can process a GSO
    skb: you just have to and the gso_type field and the netdev's features
    field.
    
    I've made gso_type a conjunction.  The idea is that you have a base type
    (e.g., SKB_GSO_TCPV4) that can be modified further to support new features.
    For example, if we add a hardware TSO type that supports ECN, they would
    declare NETIF_F_TSO | NETIF_F_TSO_ECN.  All TSO packets with CWR set would
    have a gso_type of SKB_GSO_TCPV4 | SKB_GSO_TCPV4_ECN while all other TSO
    packets would be SKB_GSO_TCPV4.  This means that only the CWR packets need
    to be emulated in software.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d4828d85d188dc70ed172802e798d3978bb6e29e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Thu Jun 22 02:28:18 2006 -0700

    [NET]: Prevent transmission after dev_deactivate
    
    The dev_deactivate function has bit-rotted since the introduction of
    lockless drivers.  In particular, the spin_unlock_wait call at the end
    has no effect on the xmit routine of lockless drivers.
    
    With a little bit of work, we can make it much more useful by providing
    the guarantee that when it returns, no more calls to the xmit routine
    of the underlying driver will be made.
    
    The idea is simple.  There are two entry points in to the xmit routine.
    The first comes from dev_queue_xmit.  That one is easily stopped by
    using synchronize_rcu.  This works because we set the qdisc to noop_qdisc
    before the synchronize_rcu call.  That in turn causes all subsequent
    packets sent to dev_queue_xmit to be dropped.  The synchronize_rcu call
    also ensures all outstanding calls leave their critical section.
    
    The other entry point is from qdisc_run.  Since we now have a bit that
    indicates whether it's running, all we have to do is to wait until the
    bit is off.
    
    I've removed the loop to wait for __LINK_STATE_SCHED to clear.  This is
    useless because netif_wake_queue can cause it to be set again.  It is
    also harmless because we've disarmed qdisc_run.
    
    I've also removed the spin_unlock_wait on xmit_lock because its only
    purpose of making sure that all outstanding xmit_lock holders have
    exited is also given by dev_watchdog_down.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e2707fa3aed8c24075087cbaea2628725adbe55
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Thu Jun 22 01:41:18 2006 -0700

    [IPV6] ADDRCONF: Fix default source address selection without CONFIG_IPV6_PRIVACY
    
    We need to update hiscore.rule even if we don't enable CONFIG_IPV6_PRIVACY,
    because we have more less significant rule; longest match.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 102128e3a27821bdcbacb10f4f2bba253f587ba4
Author: Aukasz Stelmach <stlman@poczta.fm>
Date:   Thu Jun 22 01:37:19 2006 -0700

    [IPV6]: Fix source address selection.
    
    Two additional labels (RFC 3484, sec. 10.3) for IPv6 addreses
    are defined to make a distinction between global unicast
    addresses and Unique Local Addresses (fc00::/7, RFC 4193) and
    Teredo (2001::/32, RFC 4380). It is necessary to avoid attempts
    of connection that would either fail (eg. fec0:: to 2001:feed::)
    or be sub-optimal (2001:0:: to 2001:feed::).
    
    Signed-off-by: Aukasz Stelmach <stlman@poczta.fm>
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5b057c6b1a25d57edf2b4d1e956e50936480a9ff
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 23 02:06:41 2006 -0700

    [NET]: Avoid allocating skb in skb_pad
    
    First of all it is unnecessary to allocate a new skb in skb_pad since
    the existing one is not shared.  More importantly, our hard_start_xmit
    interface does not allow a new skb to be allocated since that breaks
    requeueing.
    
    This patch uses pskb_expand_head to expand the existing skb and linearize
    it if needed.  Actually, someone should sift through every instance of
    skb_pad on a non-linear skb as they do not fit the reasons why this was
    originally created.
    
    Incidentally, this fixes a minor bug when the skb is cloned (tcpdump,
    TCP, etc.).  As it is skb_pad will simply write over a cloned skb.  Because
    of the position of the write it is unlikely to cause problems but still
    it's best if we don't do it.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0dd4b21f517e138ea113db255645fbae1bf5eef3
Author: Borislav Petkov <bbpetkov@yahoo.de>
Date:   Fri Jun 23 02:29:08 2006 -0400

    [libata] conversion to new debug scheme, part 1 of $N
    
    The first 25% of libata-core.c converted to the new debugging scheme.
    
    Signed-off-by: Borislav Petkov <petkov@math.uni-muenster.de>
    
    (with addition of ATA_MSG_WARN to standard msg_enable by me)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5fa21d821f6972e70942f2c555ec29dde962bdb2
Merge: 8542e58... 5d9fd16...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 23:09:42 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/usb-2.6:
      [PATCH] Driver core: fix locking issues with the devices that are attached to classes
      [PATCH] USB: get USB suspend to work again

commit 5d9fd169c9fbdaecdc430431e59bf94ff40b93d3
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 22 17:17:32 2006 -0700

    [PATCH] Driver core: fix locking issues with the devices that are attached to classes
    
    Doh, that was foolish...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0517587e5896cef1d5f99d3b24f5f2ca15d952ad
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Jun 22 13:29:52 2006 -0700

    [PATCH] USB: get USB suspend to work again
    
    Yeah, it's a hack, but it is only temporary until Alan's patches
    reworking this area make it in.  We really should not care what devices
    below us are doing, especially when we do not really know what type of
    devices they are.  This patch relies on the fact that the endpoint
    devices do not have a driver assigned to us.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 8542e5893c2b10b4f6c80149e7dc3fdd2dc38bc6
Merge: 6f3cafc... b44fb7a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 22:47:06 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-mmc
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-mmc:
      [ARM] 3565/1: AT91RM9200 MMC update
      [MMC] Convert all hosts except mmci to use data->blksz

commit 6f3cafce0ed24372084b5648c9e8a6aacbaf9900
Merge: 0c97f52... 0291652...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 22:46:28 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm: (21 commits)
      [ARM] 3629/1: S3C24XX: fix missing bracket in regs-dsc.h
      [ARM] 3537/1: Rework DMA-bounce locking for finer granularity
      [ARM] 3601/1: i.MX/MX1 DMA error handling for signaled channels only
      [ARM] 3597/1: ixp4xx/nslu2: Board support for new LED subsystem
      [ARM] 3595/1: ixp4xx/nas100d: Board support for new LED subsystem
      [ARM] 3626/1: ARM EABI: fix syscall restarting
      [ARM] 3628/1: S3C24XX: add get_rate call to struct clk
      [ARM] 3627/1: S3C24XX: split s3c2410 clocks from core clocks
      [ARM] 3613/1: S3C2410: Add sysdev and sysclass
      [ARM] 3624/1: Report true modem control line states
      [ARM] 3620/2: ixp23xx: add uengine loader support
      [ARM] 3618/1: add defconfig for logicpd pxa270 card engine
      [ARM] 3617/1: ep93xx: fix slightly incorrect timer tick rate
      [ARM] 3616/1: fix timer handler wrap logic for a number of platforms
      [ARM] 3615/1: ixp23xx: use platform devices for physmap flash
      [ARM] 3614/1: ep93xx: use platform devices for physmap flash
      [ARM] 3621/1: fix compilation breakage for pnx4008
      [ARM] 3623/1: pnx4008: move GPIO-related defines to gpio.h
      [ARM] 3622/1: pnx4008: remove clk_use/clk_unuse
      [ARM] Enable VFP to be built when non-VFP capable CPUs are selected
      ...

commit 0c97f524fc16004602f97ba19c36acdcc0fb9688
Merge: c71bd69... 4faf4e0...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 22:45:53 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-serial
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-serial:
      [ARM] 3600/1: increase amba-pl010 UART_NR to 8
      [ARM] 3571/1: netX: serial driver for Hilscher netX

commit c71bd6944eb1458b7887af1783101f5a46140c40
Merge: 065a3e1... 4ec223d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 22:40:00 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq:
      [CPUFREQ] Fix ondemand vs suspend deadlock
      [CPUFREQ] Fix powernow-k8 SMP kernel on UP hardware bug.
      [PATCH] redirect speedstep-centrino maintainer mail to cpufreq list
      [CPUFREQ] correct powernow-k8 fid/vid masks for extended parts
      [CPUFREQ] Clarify powernow-k8 cpu_family statements

commit 065a3e17baa36d1d48eb7376138820035b44775e
Merge: 45c091b... bfcbb00...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 22:15:09 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (33 commits)
      [PATCH] myri10ge - drop workaround pci_save_state() disabling MSI
      [PATCH] myri10ge - drop workaround for the missing AER ext cap on nVidia CK804
      via-velocity: the link is not correctly detected when the device starts
      [PATCH] add b44 to maintainers
      [PATCH] WAN: ioremap() failure checks in drivers
      [PATCH] WAN: register_hdlc_device() doesn't need dev_alloc_name()
      [PATCH] skb_padto()-area fixes in 8390, wavelan
      [PATCH] make drivers/net/forcedeth.c:nv_update_pause() static
      [PATCH] network driver for Hilscher netx
      [PATCH] Dereference in tokenring/olympic.c
      [PATCH] Array overrun in drivers/net/wireless/wavelan.c
      [PATCH] Remove useless check in drivers/net/pcmcia/xirc2ps_cs.c
      [PATCH] 8139cp: add ethtool eeprom support
      [PATCH] 8139cp: fix eeprom read command length
      [PATCH] b44: update b44 Kconfig entry
      [PATCH] b44: update version to 1.01
      [PATCH] b44: add wol for old nic
      [PATCH] b44: add parameter
      [PATCH] b44: add wol
      [PATCH] b44: fix manual speed/duplex/autoneg settings
      ...

commit 45c091bb2d453ce4a8b06cf19872ec7a77fc4799
Merge: d588fcb... 2191fe3...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 22:11:30 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/paulus/powerpc: (139 commits)
      [POWERPC] re-enable OProfile for iSeries, using timer interrupt
      [POWERPC] support ibm,extended-*-frequency properties
      [POWERPC] Extra sanity check in EEH code
      [POWERPC] Dont look for class-code in pci children
      [POWERPC] Fix mdelay badness on shared processor partitions
      [POWERPC] disable floating point exceptions for init
      [POWERPC] Unify ppc syscall tables
      [POWERPC] mpic: add support for serial mode interrupts
      [POWERPC] pseries: Print PCI slot location code on failure
      [POWERPC] spufs: one more fix for 64k pages
      [POWERPC] spufs: fail spu_create with invalid flags
      [POWERPC] spufs: clear class2 interrupt status before wakeup
      [POWERPC] spufs: fix Makefile for "make clean"
      [POWERPC] spufs: remove stop_code from struct spu
      [POWERPC] spufs: fix spu irq affinity setting
      [POWERPC] spufs: further abstract priv1 register access
      [POWERPC] spufs: split the Cell BE support into generic and platform dependant parts
      [POWERPC] spufs: dont try to access SPE channel 1 count
      [POWERPC] spufs: use kzalloc in create_spu
      [POWERPC] spufs: fix initial state of wbox file
      ...
    
    Manually resolved conflicts in:
    	drivers/net/phy/Makefile
    	include/asm-powerpc/spu.h

commit 99ba9e093d058f6dff54f475136018e2e281d50f
Author: Brian King <brking@us.ibm.com>
Date:   Mon Jun 12 14:54:17 2006 -0500

    [PATCH] libata: Add ata_scsi_dev_disabled
    
    Separate out parts of ata_scsi_find_dev to be reused in
    future SAS/SATA patches.
    
    Acked-by: Jeff Garzik <jgarzik@pobox.com>
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ba6a13083c1b720a47c05bee7bedbb6ef06c4611
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 23:46:10 2006 -0400

    [libata] Add host lock to struct ata_port
    
    Prepare for changes required to support SATA devices
    attached to SAS HBAs. For these devices we don't want to
    use host_set at all, since libata will not be the owner
    of struct scsi_host.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    
    (with slight merge modifications made by...)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 47005f255ed126a4b48a1a2f63164fb1d83bcb0a
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 19 18:27:23 2006 +0900

    [PATCH] libata: implement per-dev EH action mask eh_info->dev_action[]
    
    Currently, the only per-dev EH action is REVALIDATE.  EH used to
    exploit ehi->dev to do selective revalidation on a ATA bus.  However,
    this is a bit hacky and makes it impossible to request selective
    revalidation from outside of EH or add another per-dev EH action.
    
    This patch adds per-dev EH action mask eh_info->dev_action[] and
    update EH to use this field for REVALIDATE.  Note that per-dev actions
    can still be specified at port-level and it has the same effect of
    specifying the action for all devices on the port.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bfcbb00855db21dacd3c154ea13ec3fdd98e747b
Author: Brice Goglin <brice@myri.com>
Date:   Thu Jun 22 21:12:36 2006 -0400

    [PATCH] myri10ge - drop workaround pci_save_state() disabling MSI
    
    We don't need to restore the state right after saving it for later recovery
    since commit 99dc804d9bcc2c53f4c20c291bf4e185312a1a0c (PCI: disable msi mode
    in pci_disable_device) now prevents pci_save_state() from disabling MSI.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 69eb887b0c2380791d33f7c07bfba88d7c5cef15
Author: Brice Goglin <brice@myri.com>
Date:   Thu Jun 22 21:11:59 2006 -0400

    [PATCH] myri10ge - drop workaround for the missing AER ext cap on nVidia CK804
    
    We don't need to hardcode the AER capability of the nVidia CK804 chipset
    anymore since commit cf34a8e07f02c76f3f1232eecb681301a3d7b10b (PCI: nVidia
    quirk to make AER PCI-E extended capability visible) now makes sure that
    this cap will be available to pci_find_ext_capability().
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit af57d238aa2107e1b45d8dacad6e50db938f0567
Merge: 3910589... 8a22ddd...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 23:33:23 2006 -0400

    Merge branch 'upstream' of git://electric-eye.fr.zoreil.com/home/romieu/linux-2.6 into upstream

commit 39105890516b06319ffcf5ef0d0cea6c7f65bc96
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Thu Jun 22 17:26:20 2006 -0700

    [PATCH] add b44 to maintainers
    
    Add b44 to the MAINTAINERS file.
    
    Signed-off-by: Gary Zambrano <zambrano@broadcom.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4446065a2c9b65398ceb115f4d8c256eb1bb9647
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Thu Jun 22 22:29:28 2006 +0200

    [PATCH] WAN: ioremap() failure checks in drivers
    
    Eric Sesterhenn found that pci200syn initialization lacks return
    statement in ioremap() error path (coverity bug id #195). It looks
    like more WAN drivers have problems with ioremap().
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4a31e348e3ecaf54c50240109ac4574b180f8840
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Thu Jun 22 22:20:19 2006 +0200

    [PATCH] WAN: register_hdlc_device() doesn't need dev_alloc_name()
    
    David Boggs noticed that register_hdlc_device() no longer needs
    to call dev_alloc_name() as it's called by register_netdev().
    register_hdlc_device() is currently equivalent to register_netdev().
    
    hdlc_setup() is now EXPORTed as per David's request.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit aa95abefccc25efea5c8654bc3475e8161319b94
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Thu Jun 22 14:25:34 2006 +0100

    [PATCH] skb_padto()-area fixes in 8390, wavelan
    
    Ar Iau, 2006-06-22 am 21:29 +1000, ysgrifennodd Herbert Xu:
    > Alan Cox <alan@lxorguk.ukuu.org.uk> wrote:
    > >
    > > The 8390 change (corrected version) also makes 8390.c faster so should
    > > be applied anyway, and the orinoco one fixes some code that isn't even
    > > needed and someone forgot to remove long ago. Otherwise the skb_padto
    >
    > Yeah I agree totally.  However, I haven't actually seen the fixed 8390
    > version being posted yet or at least not to netdev :)
    
    Ah the resounding clang of a subtle hint ;)
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    
    - Return 8390.c to the old way of handling short packets (which is also
    faster)
    
    - Remove the skb_padto from orinoco. This got left in when the padding bad
    write patch was added and is actually not needed. This is fixing a merge
    error way back when.
    
    - Wavelan can also use the stack based buffer trick if you want
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c7985051dec26dc5ae2562a975a0b37b70621f3f
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Jun 22 12:03:29 2006 +0200

    [PATCH] make drivers/net/forcedeth.c:nv_update_pause() static
    
    This patch makes the needlessly global nv_update_pause() static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 92aa674d721d089c440301ab95cb6be19c78727e
Author: Sascha Hauer <s.hauer@pengutronix.de>
Date:   Thu Jun 22 07:11:13 2006 +0200

    [PATCH] network driver for Hilscher netx
    
    This is a patch for the Hilscher netx builtin ethernet ports. The
    netx board support was merged into 2.6.17-git2.
    The netx is a arm926 based SoC.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    
    --
     drivers/net/Kconfig             |   11
     drivers/net/Makefile            |    1
     drivers/net/netx-eth.c          |  516 ++++++++++++++++++++++++++++++++++++++++
     include/asm-arm/arch-netx/eth.h |   27 ++
     4 files changed, 555 insertions(+)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3a778275626c0eb97674e92875efeba01189ce0e
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Thu Jun 22 13:00:25 2006 +0800

    [PATCH] libata-dev: move the CDB-intr DMA blacklisting
    
    Move the DMA blacklisting of the CDB-intr devices
    from ata_check_atapi_dma() to ata_dma_blacklisted(), where it makes more sense.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6d56ab936237b429366ade0d2a1540c7e41beb87
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Jun 21 16:17:17 2006 +0200

    [PATCH] Dereference in tokenring/olympic.c
    
    hi,
    
    coverity found (bug id #225) that we might call free_netdev()
    with NULL argument, when alloc_trdev() fails. This patch
    changes the goto, so we dont call free_netdev() for
    dev == NULL.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a192491ad58098f2c57d2d1efe721ea0634dc0aa
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Jun 21 16:40:24 2006 +0200

    [PATCH] Array overrun in drivers/net/wireless/wavelan.c
    
    hi,
    
    this is another array overrun spotted by coverity (#id 507)
    we should check the index against array size before using it.
    Not sure why the driver doesnt use ARRAY_SIZE instead of its
    own macro.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 71f0737b2889b86f774a94afaf1342c2c0d61cb5
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Jun 21 23:12:48 2006 +0900

    [PATCH] ahci: disable NCQ support on vt8251
    
    vt8251 chokes on NCQ commands.  Two different disks from different
    vendors are showing the same symptom and it seems that the windows
    driver from via doesn't support NCQ either.  Disable NCQ support on
    this controller for the time being.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Cc: Aalderd Bouwman <boac@wanadoo.nl>
    Cc: Bastiaan Jacques <b.jacques@planet.nl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit da4f5ccf6040b998b64c60db8fa5f4ee03fdaf95
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed Jun 21 16:10:48 2006 +0200

    [PATCH] Remove useless check in drivers/net/pcmcia/xirc2ps_cs.c
    
    hi,
    
    coverity choked at this check (id #223), assuming that
    skb might be NULL and used anyways later. Since
    start_hard_xmit() always gets called with a valid
    skb, the check is useless and this patch removes it.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 722fdb33591bc7308a661913fb2f829128236b6f
Author: Philip Craig <philipc@snapgear.com>
Date:   Wed Jun 21 11:33:27 2006 +1000

    [PATCH] 8139cp: add ethtool eeprom support
    
    Implement the ethtool eeprom operations for the 8139cp driver.
    Tested on x86 and big-endian ARM.
    
    Signed-off-by: Philip Craig <philipc@snapgear.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d73f1e3c3b0703e25728ce5bdda9806d6f2c576f
Author: Philip Craig <philipc@snapgear.com>
Date:   Wed Jun 21 11:33:26 2006 +1000

    [PATCH] 8139cp: fix eeprom read command length
    
    The read command for the 93C46/93C56 EEPROMS should be 3 bits plus
    the address.  This doesn't appear to affect the operation of the
    read command, but similar errors for write commands do cause failures.
    
    Signed-off-by: Philip Craig <philipc@snapgear.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8fa29b23d9e0ef976dc578aab98297d4f24f70da
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 23:19:15 2006 -0400

    [libata] ahci: add JMicron PCI IDs
    
    Originally contributed by Justin @ JMicron.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fc13dcae24bfd877aeff07774c035b2b896e05ca
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Tue Jun 20 15:34:46 2006 -0700

    [PATCH] b44: update b44 Kconfig entry
    
    Deleted "EXPERIMENTAL" from b44 entry in Kconfig.
    
    Signed-off-by: Gary Zambrano <zambrano@broadcom.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4d1dabdb52ee49f24cf874b6af2cd2c9efd9444a
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Tue Jun 20 15:34:40 2006 -0700

    [PATCH] b44: update version to 1.01
    
    Update the driver version to 1.01
    
    Signed-off-by: Gary Zambrano <zambrano@broadcom.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 725ad800b73a71fe91bfd8859f928852de688ea0
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Tue Jun 20 15:34:36 2006 -0700

    [PATCH] b44: add wol for old nic
    
    This patch adds wol support for the older 440x nics that use pattern matching.
    This patch is a redo thanks to feedback from Michael Chan and Francois Romieu.
    
    Signed-off-by: Gary Zambrano  <zambrano@broadcom.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 00e8b3aa1cfd7577fd4019a24f7c3980506f83f3
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Tue Jun 20 15:34:26 2006 -0700

    [PATCH] b44: add parameter
    
    This patch adds a parameter to init_hw() to not completely initialize
    the nic for wol.
    
    Signed-off-by: Gary Zambrano <zambrano@broadcom.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 52cafd965507b7a7bb962486539f6d7422552692
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Tue Jun 20 15:34:23 2006 -0700

    [PATCH] b44: add wol
    
    Adds wol to the driver.
    This is a redo of a previous patch thanks to feedback from Francois Romieu.
    
    Signed-off-by Gary Zambrano <zambrano@broadcom.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 47b9c3b1e6afa3c40e3ac1822cd13946567b5955
Author: Gary Zambrano <zambrano@broadcom.com>
Date:   Tue Jun 20 15:34:15 2006 -0700

    [PATCH] b44: fix manual speed/duplex/autoneg settings
    
    Fixes for speed/duplex/autoneg settings and driver settings info.
    This is a redo of a previous patch thanks to feedback from Jeff Garzik.
    
    Signed-off-by: Gary Zambrano <zambrano@broadcom.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c57c064994f1544a5ed2e9b319ebd0bc087ea540
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 23:12:24 2006 -0400

    [libata] sata_nv: add PCI IDs
    
    Based on a patch contributed by Andrew Chew @ NVIDIA.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fe7fa31aa0749d7d247d21e1880f0c5aea15b158
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 23:05:36 2006 -0400

    [libata] ahci: Add NVIDIA PCI IDs.
    
    Based on a patch by Andrew Chew @ NVIDIA.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 00e5edcbfdb7030f6cbb8d5d89fdc2848133a182
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 12:19:13 2006 +0200

    [PATCH] AT91RM9200 Ethernet #4: Suspend/Resume
    
    Adds power-management (suspend/resume) support to the AT91RM9200
    Ethernet driver.
    Patch from David Brownell.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 427d269f17fd02d192e9ae3bd93bdc07790fa02c
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 12:10:57 2006 +0200

    [PATCH] AT91RM9200 Ethernet #3: Cleanup
    
    Moved global ether_clk variable into controller data structure.
    Patch from David Brownell.
    
    Davicom 9161 PHY was being incorrectly displayed as "9196".
    Patch from Brian Stafford.
    
    clk_get() doesn't return NULL on error, so the return value needs to be
    tested with IS_ERR().
    
    Whitespace cleanup.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ca5585ed248dc01ce918002ee9a9c9c41ae4f7c0
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 11:59:05 2006 +0200

    [PATCH] AT91RM9200 Ethernet #2: MII interface
    
    Adds support for the MII ioctls via generic_mii_ioctl().
    Patch from Brian Stafford.
    
    Set the mii.phy_id to the detected PHY address, otherwise ethtool cannot
    access PHYs other than 0.
    Patch from Roman Kolesnikov.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 775637df0caccc204628ebacca2b07f35c88b96b
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 11:50:23 2006 +0200

    [PATCH] AT91RM9200 Ethernet #1: Link poll
    
    For Ethernet PHYs that don't have an IRQ pin or boards that don't
    connect the IRQ pin to the processor, we enable a timer to poll the
    PHY's link state.
    
    Patch originally supplied by Eric Benard and Roman Kolesnikov.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d955d90b90db4b3ac2a3e56d271f372c41fb00d6
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 17 18:57:39 2006 +0100

    [PATCH] IP27: Really set PCI64_ATTR_VIRTUAL, not PCI64_ATTR_PREC.
    
    IOC3's homegrown DMA mapping functions that are used to optimize things
    a little on IP27 set the wrong bit.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit dbe1ab9514c231c9b062140a107d9dea0eabefcc
Merge: 612eff0... d588fcb...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 22:51:46 2006 -0400

    Merge branch 'master' into upstream

commit 189acaaef81b1d71aedd0d28810de24160c2e781
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Jun 23 02:33:48 2006 +0000

    [CIFS] Enable sec flags on mount for cifs (part one)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 71d530cd1b6d97094481002a04c77fea1c8e1c22
Merge: d7a80da... d588fcb...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 22 22:11:56 2006 -0400

    Merge branch 'master' into upstream
    
    Conflicts:
    
    	drivers/scsi/libata-core.c
    	drivers/scsi/libata-scsi.c
    	include/linux/pci_ids.h

commit 8a22dddb2a5b5834577afd9e25b5392218715611
Author: Francois Romieu <romieu@fr.zoreil.com>
Date:   Fri Jun 23 00:47:06 2006 +0200

    via-velocity: the link is not correctly detected when the device starts
    
    The patch fixes http://bugzilla.kernel.org/show_bug.cgi?id=6711
    
    Signed-off-by: Roy Marples <uberlord@gentoo.org>
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>

commit d588fcbe5a7ba8bba2cebf7799ab2d573717a806
Merge: eaa8568... 4941b39...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 15:08:56 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/i2c-2.6: (44 commits)
      [PATCH] I2C: I2C controllers go into right place on sysfs
      [PATCH] hwmon-vid: Add support for Intel Core and Conroe
      [PATCH] lm70: New hardware monitoring driver
      [PATCH] hwmon: Fix the Kconfig header
      [PATCH] i2c-i801: Merge setup function
      [PATCH] i2c-i801: Better pci subsystem integration
      [PATCH] i2c-i801: Cleanups
      [PATCH] i2c-i801: Remove PCI function check
      [PATCH] i2c-i801: Remove force_addr parameter
      [PATCH] i2c-i801: Fix block transaction poll loops
      [PATCH] scx200_acb: Documentation update
      [PATCH] scx200_acb: Mark scx200_acb_probe __init
      [PATCH] scx200_acb: Use PCI I/O resource when appropriate
      [PATCH] i2c: Mark block write buffers as const
      [PATCH] i2c-ocores: Minor cleanups
      [PATCH] abituguru: Fix fan detection
      [PATCH] abituguru: Review fixes
      [PATCH] abituguru: New hardware monitoring driver
      [PATCH] w83792d: Add missing data access locks
      [PATCH] w83792d: Fix setting the PWM value
      ...

commit eaa8568901b3164197ce727c4c9b4067383e526c
Merge: 6c763eb... c6976a4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 15:08:34 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/w1-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/w1-2.6:
      [PATCH] w1: warning fix
      [PATCH] w1: clean up W1_CON dependency.
      [PATCH] drivers/w1/w1.c: fix a compile error
      [PATCH] W1: fix dependencies of W1_SLAVE_DS2433_CRC
      [PATCH] W1: possible cleanups
      [PATCH] W1: cleanups
      [PATCH] w1 exports
      [PATCH] w1: Use mutexes instead of semaphores.
      [PATCH] w1: Make w1 connector notifications depend on connector.
      [PATCH] w1: netlink: Mark netlink group 1 as unused.
      [PATCH] w1: Move w1-connector definitions into linux/include/connector.h
      [PATCH] w1: Userspace communication protocol over connector.
      [PATCH] w1: Replace dscore and ds_w1_bridge with ds2490 driver.
      [PATCH] w1: Added default generic read/write operations.

commit 6c763eb9ead86c612492b59287b36c0dcf7d09b1
Merge: dcc1a66... cf34a8e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Thu Jun 22 15:07:59 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6: (27 commits)
      [PATCH] PCI: nVidia quirk to make AER PCI-E extended capability visible
      [PATCH] PCI: fix issues with extended conf space when MMCONFIG disabled because of e820
      [PATCH] PCI: Bus Parity Status sysfs interface
      [PATCH] PCI: fix memory leak in MMCONFIG error path
      [PATCH] PCI: fix error with pci_get_device() call in the mpc85xx driver
      [PATCH] PCI: MSI-K8T-Neo2-Fir: run only where needed
      [PATCH] PCI: fix race with pci_walk_bus and pci_destroy_dev
      [PATCH] PCI: clean up pci documentation to be more specific
      [PATCH] PCI: remove unneeded msi code
      [PATCH] PCI: don't move ioapics below PCI bridge
      [PATCH] PCI: cleanup unused variable about msi driver
      [PATCH] PCI: disable msi mode in pci_disable_device
      [PATCH] PCI: Allow MSI to work on kexec kernel
      [PATCH] PCI: AMD 8131 MSI quirk called too late, bus_flags not inherited ?
      [PATCH] PCI: Move various PCI IDs to header file
      [PATCH] PCI Bus Parity Status-broken hardware attribute, EDAC foundation
      [PATCH] PCI: i386/x86_84: disable PCI resource decode on device disable
      [PATCH] PCI ACPI: Rename the functions to avoid multiple instances.
      [PATCH] PCI: don't enable device if already enabled
      [PATCH] PCI: Add a "enable" sysfs attribute to the pci devices to allow userspace (Xorg) to enable devices without doing foul direct access
      ...

commit dcc1a66a09420ccc5a22671bddc5a842f92d67e5
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 22 14:47:35 2006 -0700

    [PATCH] x86_64: use select for GART_IOMMU to enable AGP
    
    The AGP default doesn't work well with other selects, so use a select for
    GART_IOMMU as well.  Remove a redundant default for SWIOTLB as well.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andi Kleen <ak@suse.de>
    Cc: Andi Kleen <ak@muc.de>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Cc: Dave Airlie <airlied@linux.ie>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f3865fb57a04db7cca068fed1c15badc064a302
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Thu Jun 22 14:47:34 2006 -0700

    [PATCH] zlib_inflate: Upgrade library code to a recent version
    
    Upgrade the zlib_inflate implementation in the kernel from a patched
    version 1.1.3/4 to a patched 1.2.3.
    
    The code in the kernel is about seven years old and I noticed that the
    external zlib library's inflate performance was significantly faster (~50%)
    than the code in the kernel on ARM (and faster again on x86_32).
    
    For comparison the newer deflate code is 20% slower on ARM and 50% slower
    on x86_32 but gives an approx 1% compression ratio improvement.  I don't
    consider this to be an improvement for kernel use so have no plans to
    change the zlib_deflate code.
    
    Various changes have been made to the zlib code in the kernel, the most
    significant being the extra functions/flush option used by ppp_deflate.
    This update reimplements the features PPP needs to ensure it continues to
    work.
    
    This code has been tested on ARM under both JFFS2 (with zlib compression
    enabled) and ppp_deflate and on x86_32.  JFFS2 sees an approx.  10% real
    world file read speed improvement.
    
    This patch also removes ZLIB_VERSION as it no longer has a correct value.
    We don't need version checks anyway as the kernel's module handling will
    take care of that for us.  This removal is also more in keeping with the
    zlib author's wishes (http://www.zlib.net/zlib_faq.html#faq24) and I've
    added something to the zlib.h header to note its a modified version.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Acked-by: Joern Engel <joern@wh.fh-wedel.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 4f1bcaf094ccc512c23e10104c05a6f8e5b7a9e4
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Jun 22 14:47:32 2006 -0700

    [PATCH] vgacon: make VGA_MAP_MEM take size, remove extra use
    
    VGA_MAP_MEM translates to ioremap() on some architectures.  It makes sense
    to do this to vga_vram_base, because we're going to access memory between
    vga_vram_base and vga_vram_end.
    
    But it doesn't really make sense to map starting at vga_vram_end, because
    we aren't going to access memory starting there.  On ia64, which always has
    to be different, ioremapping vga_vram_end gives you something completely
    incompatible with ioremapped vga_vram_start, so vga_vram_size ends up being
    nonsense.
    
    As a bonus, we often know the size up front, so we can use ioremap()
    correctly, rather than giving it a zero size.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Cc: "Antonino A. Daplas" <adaplas@pol.net>
    Cc: "Luck, Tony" <tony.luck@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d702ccb342e49f7591df5a87c3857c698183b0fa
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 22 14:47:31 2006 -0700

    [PATCH] prune_one_dentry() tweaks
    
    - Add description of d_lock handling to comments over prune_one_dentry().
    
    - It has three callsites - uninline it, saving 200 bytes of text.
    
    Cc: Jan Blunck <jblunck@suse.de>
    Cc: Kirill Korotaev <dev@openvz.org>
    Cc: Olaf Hering <olh@suse.de>
    Cc: Balbir Singh <balbir@in.ibm.com>
    Cc: Neil Brown <neilb@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0feae5c47aabdde59cbbec32d150e17102de37f0
Author: Neil Brown <neilb@suse.de>
Date:   Thu Jun 22 14:47:28 2006 -0700

    [PATCH] Fix dcache race during umount
    
    The race is that the shrink_dcache_memory shrinker could get called while a
    filesystem is being unmounted, and could try to prune a dentry belonging to
    that filesystem.
    
    If it does, then it will call in to iput on the inode while the dentry is
    no longer able to be found by the umounting process.  If iput takes a
    while, generic_shutdown_super could get all the way though
    shrink_dcache_parent and shrink_dcache_anon and invalidate_inodes without
    ever waiting on this particular inode.
    
    Eventually the superblock gets freed anyway and if the iput tried to touch
    it (which some filesystems certainly do), it will lose.  The promised
    "Self-destruct in 5 seconds" doesn't lead to a nice day.
    
    The race is closed by holding s_umount while calling prune_one_dentry on
    someone else's dentry.  As a down_read_trylock is used,
    shrink_dcache_memory will no longer try to prune the dentry of a filesystem
    that is being unmounted, and unmount will not be able to start until any
    such active prune_one_dentry completes.
    
    This requires that prune_dcache *knows* which filesystem (if any) it is
    doing the prune on behalf of so that it can be careful of other
    filesystems.  shrink_dcache_memory isn't called it on behalf of any
    filesystem, and so is careful of everything.
    
    shrink_dcache_anon is now passed a super_block rather than the s_anon list
    out of the superblock, so it can get the s_anon list itself, and can pass
    the superblock down to prune_dcache.
    
    If prune_dcache finds a dentry that it cannot free, it leaves it where it
    is (at the tail of the list) and exits, on the assumption that some other
    thread will be removing that dentry soon.  To try to make sure that some
    work gets done, a limited number of dnetries which are untouchable are
    skipped over while choosing the dentry to work on.
    
    I believe this race was first found by Kirill Korotaev.
    
    Cc: Jan Blunck <jblunck@suse.de>
    Acked-by: Kirill Korotaev <dev@openvz.org>
    Cc: Olaf Hering <olh@suse.de>
    Acked-by: Balbir Singh <balbir@in.ibm.com>
    Signed-off-by: Neil Brown <neilb@suse.de>
    Signed-off-by: Balbir Singh <balbir@in.ibm.com>
    Acked-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit de047c1bcd7f7bcfbdc29eb5b439fb332594da3f
Author: Ravikiran G Thirumalai <kiran@scalex86.org>
Date:   Thu Jun 22 14:47:26 2006 -0700

    [PATCH] avoid tasklist_lock at getrusage for multithreaded case too
    
    Avoid taking tasklist_lock for at getrusage for the multithreaded case too.
    We don't need to take the tasklist lock for thread traversal of a process
    since Oleg's do-__unhash_process-under-siglock.patch and related work.
    
    Signed-off-by: Ravikiran G Thirumalai <kiran@scalex86.org>
    Cc: Oleg Nesterov <oleg@tv-sign.ru>
    Cc: "Eric W. Biederman" <ebiederm@xmission.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit c89681ed7d0e4a61d35bdc12c06c6733b718b2cb
Author: Miklos Szeredi <miklos@szeredi.hu>
Date:   Thu Jun 22 14:47:22 2006 -0700

    [PATCH] remove steal_locks()
    
    This patch removes the steal_locks() function.
    
    steal_locks() doesn't work correctly with any filesystem that does it's own
    lock management, including NFS, CIFS, etc.
    
    In addition it has weird semantics on local filesystems in case tasks
    sharing file-descriptor tables are doing POSIX locking operations in
    parallel to execve().
    
    The steal_locks() function has an effect on applications doing:
    
    clone(CLONE_FILES)
      /* in child */
      lock
      execve
      lock
    
    POSIX locks acquired before execve (by "child", "parent" or any further
    task sharing files_struct) will after the execve be owned exclusively by
    "child".
    
    According to Chris Wright some LSB/LTP kind of suite triggers without the
    stealing behavior, but there's no known real-world application that would
    also fail.
    
    Apps using NPTL are not affected, since all other threads are killed before
    execve.
    
    Apps using LinuxThreads are only affected if they
    
      - have multiple threads during exec (LinuxThreads doesn't kill other
        threads, the app may do it with pthread_kill_other_threads_np())
      - rely on POSIX locks being inherited across exec
    
    Both conditions are documented, but not their interaction.
    
    Apps using clone() natively are affected if they
    
      - use clone(CLONE_FILES)
      - rely on POSIX locks being inherited across exec
    
    The above scenarios are unlikely, but possible.
    
    If the patch is vetoed, there's a plan B, that involves mostly keeping the
    weird stealing semantics, but changing the way lock ownership is handled so
    that network and local filesystems work consistently.
    
    That would add more complexity though, so this solution seems to be
    preferred by most people.
    
    Signed-off-by: Miklos Szeredi <miklos@szeredi.hu>
    Cc: Trond Myklebust <trond.myklebust@fys.uio.no>
    Cc: Matthew Wilcox <willy@debian.org>
    Cc: Chris Wright <chrisw@sous-sol.org>
    Cc: Christoph Hellwig <hch@lst.de>
    Cc: Steven French <sfrench@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 09d967c6f32b35eab15b45862ae16e4f06259d8e
Author: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
Date:   Thu Jun 22 14:47:21 2006 -0700

    [PATCH] Fix a race condition between ->i_mapping and iput()
    
    This race became a cause of oops, and can reproduce by the following.
    
        while true; do
    	dd if=/dev/zero of=/dev/.static/dev/hdg1 bs=512 count=1000 & sync
        done
    
    This race condition was between __sync_single_inode() and iput().
    
              cpu0 (fs's inode)                 cpu1 (bdev's inode)
              -----------------                 -------------------
                                           close("/dev/hda2")
                                           [...]
    __sync_single_inode()
       /* copy the bdev's ->i_mapping */
       mapping = inode->i_mapping;
    
                                           generic_forget_inode()
                                              bdev_clear_inode()
    					     /* restre the fs's ->i_mapping */
    				             inode->i_mapping = &inode->i_data;
    				          /* bdev's inode was freed */
                                              destroy_inode(inode);
    
       if (wait) {
          /* dereference a freed bdev's mapping->host */
          filemap_fdatawait(mapping);  /* Oops */
    
    Since __sync_single_inode() is only taking a ref-count of fs's inode, the
    another process can be close() and freeing the bdev's inode while writing
    fs's inode.  So, __sync_signle_inode() accesses the freed ->i_mapping,
    oops.
    
    This patch takes a ref-count on the bdev's inode for the fs's inode before
    setting a ->i_mapping, and the clear_inode() of the fs's inode does iput() on
    the bdev's inode.  So if the fs's inode is still living, bdev's inode
    shouldn't be freed.
    
    Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 0e5b3781591cc954037c08ef78edf7f1192d38c5
Author: Brice Goglin <brice@myri.com>
Date:   Thu Jun 22 14:47:20 2006 -0700

    [PATCH] PCI: Add PCI_CAP_ID_VNDR
    
    Add the vendor-specific extended capability PCI_CAP_ID_VNDR.  It is required
    by the Myri-10G Ethernet driver.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: "David S. Miller" <davem@davemloft.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit bec0e85910b95c325a008ead7c3bbe047cc39672
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 22 14:47:19 2006 -0700

    [PATCH] myri10ge build fix
    
    Someone changed skb_linearize().
    
    Cc: Brice Goglin <bgoglin@myri.com>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: Jeff Garzik <jeff@garzik.org>
    Cc: Herbert Xu <herbert@gondor.apana.org.au>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6cc0719181a7aa8883855140541e7892250e66af
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 22 14:47:18 2006 -0700

    [PATCH] suspend_console() warning fix
    
    kernel/power/main.c: In function 'suspend_prepare':
    kernel/power/main.c:89: warning: implicit declaration of function 'suspend_console'
    kernel/power/main.c: In function 'suspend_finish':
    kernel/power/main.c:137: warning: implicit declaration of function 'resume_console'
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 04c567d9313e4927b9835361d8ac0318ce65af6b
Author: David Howells <dhowells@redhat.com>
Date:   Thu Jun 22 14:47:18 2006 -0700

    [PATCH] Keys: Fix race between two instantiators of a key
    
    Add a revocation notification method to the key type and calls it whilst
    the key's semaphore is still write-locked after setting the revocation
    flag.
    
    The patch then uses this to maintain a reference on the task_struct of the
    process that calls request_key() for as long as the authorisation key
    remains unrevoked.
    
    This fixes a potential race between two processes both of which have
    assumed the authority to instantiate a key (one may have forked the other
    for example).  The problem is that there's no locking around the check for
    revocation of the auth key and the use of the task_struct it points to, nor
    does the auth key keep a reference on the task_struct.
    
    Access to the "context" pointer in the auth key must thenceforth be done
    with the auth key semaphore held.  The revocation method is called with the
    target key semaphore held write-locked and the search of the context
    process's keyrings is done with the auth key semaphore read-locked.
    
    The check for the revocation state of the auth key just prior to searching
    it is done after the auth key is read-locked for the search.  This ensures
    that the auth key can't be revoked between the check and the search.
    
    The revocation notification method is added so that the context task_struct
    can be released as soon as instantiation happens rather than waiting for
    the auth key to be destroyed, thus avoiding the unnecessary pinning of the
    requesting process.
    
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit d720024e94de4e8b7f10ee83c532926f3ad5d708
Author: Michael LeMay <mdlemay@epoch.ncsc.mil>
Date:   Thu Jun 22 14:47:17 2006 -0700

    [PATCH] selinux: add hooks for key subsystem
    
    Introduce SELinux hooks to support the access key retention subsystem
    within the kernel.  Incorporate new flask headers from a modified version
    of the SELinux reference policy, with support for the new security class
    representing retained keys.  Extend the "key_alloc" security hook with a
    task parameter representing the intended ownership context for the key
    being allocated.  Attach security information to root's default keyrings
    within the SELinux initialization routine.
    
    Has passed David's testsuite.
    
    Signed-off-by: Michael LeMay <mdlemay@epoch.ncsc.mil>
    Signed-off-by: David Howells <dhowells@redhat.com>
    Signed-off-by: James Morris <jmorris@namei.org>
    Acked-by: Chris Wright <chrisw@sous-sol.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit f893afbe1262e27e91234506f72e17716190dd2f
Author: Anton Altaparmakov <aia21@cam.ac.uk>
Date:   Thu Jun 22 14:47:15 2006 -0700

    [PATCH] NTFS: Critical bug fix (affects MIPS and possibly others)
    
    Many thanks to Pauline Ng for the detailed bug report and analysis!
    
    Signed-off-by: Anton Altaparmakov <aia21@cantab.net>
    Cc: <stable@kernel.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5d2170ad1092b2940138dc3ae4a944d7bf87ae9e
Author: Al Viro <viro@ftp.linux.org.uk>
Date:   Thu Jun 22 14:47:14 2006 -0700

    [PATCH] sparc build breakage
    
    rd_prompt et.al.  depend on CONFIG_BLK_DEV_RAM, not CONFIG_BLK_INITRD; now
    that those are independent, setup.c blows with INITRD on and BLK_DEV_RAM
    off.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Cc: "David S. Miller" <davem@davemloft.net>
    Cc: William Lee Irwin III <wli@holomorphy.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 7f98a44b9d09580036da7e7f8b33e66f411cf374
Author: Jeff Dike <jdike@addtoit.com>
Date:   Thu Jun 22 14:47:09 2006 -0700

    [PATCH] UML: fix wall_to_monotonic initialization
    
    Change a variable from unsigned to signed in order to get sign-extension
    when the thing is negated.  Without this, uptime is horribly confused.
    
    Signed-off-by: Jeff Dike <jdike@addtoit.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 02916526133aebc0b3b6c486d1b0af95221033bd
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 22 22:57:54 2006 +0100

    [ARM] 3629/1: S3C24XX: fix missing bracket in regs-dsc.h
    
    Patch from Ben Dooks
    
    Fix missing bracket in include/asm-arm/arch-s3c2410/regs-dsc.h
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 823588c18689ddd49d4643eda7654302f18a275f
Author: Kevin Hilman <khilman@deeprooted.net>
Date:   Thu Jun 22 22:27:14 2006 +0100

    [ARM] 3537/1: Rework DMA-bounce locking for finer granularity
    
    Patch from Kevin Hilman
    
    This time with IRQ versions of locks.
    
    Rework also enables compatability with realtime-preemption patch.
    With the current locking via interrupt disabling, under RT,
    potentially sleeping functions can be called with interrupts
    disabled.
    
    Signed-off-by: Kevin Hilman <khilman@mvista.com>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fa3e686a34f4c33de31a128cc36def0b466bfe1a
Author: Pavel Pisa <ppisa@pikron.com>
Date:   Thu Jun 22 22:21:03 2006 +0100

    [ARM] 3601/1: i.MX/MX1 DMA error handling for signaled channels only
    
    Patch from Pavel Pisa
    
    There has been bug, that dma_err_handler() touches even
    channels not signaling error condition.
    
    Problem noticed by Andrea Paterniani.
    
    Signed-off-by: Pavel Pisa <pisa@cmp.felk.cvut.cz>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e22b04fb6b1689aee208b65966fa9fb19e098006
Author: Rod Whitby <rod@whitby.id.au>
Date:   Thu Jun 22 22:21:02 2006 +0100

    [ARM] 3597/1: ixp4xx/nslu2: Board support for new LED subsystem
    
    Patch from Rod Whitby
    
    This patch implements NEW_LEDS support for the Linksys NSLU2.  The
    NSLU2 has four LED indicators, which are the only form of output for
    an unmodified device - there is no keyboard or display on an NSLU2.
    For an NSLU2 which has been modified to bring out the serial port
    console, it is important to register that device first separately, to
    enable debugging of other device support.
    
    Signed-off-by: John Bowler <jbowler@acm.org>
    Signed-off-by: Rod Whitby <rod@whitby.id.au>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit df6934b33c43a3ad517244935fe9c19715d9dc15
Author: Rod Whitby <rod@whitby.id.au>
Date:   Thu Jun 22 22:21:01 2006 +0100

    [ARM] 3595/1: ixp4xx/nas100d: Board support for new LED subsystem
    
    Patch from Rod Whitby
    
    This patch implements NEW_LEDS support for the IOMega NAS100d.  The
    NAS100d has three LED indicators, which are the only form of output
    for an unmodified device - there is no keyboard or display on an
    NAS100d.  For an NAS100d which has been modified to bring out the
    serial port console, it is important to register that device first
    separately, to enable debugging of other device support.
    
    Signed-off-by: John Bowler <jbowler@acm.org>
    Signed-off-by: Rod Whitby <rod@whitby.id.au>
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f606a6ff222dc7dceeb4d0e214ce4f55d9c6b0e6
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Jun 22 22:18:45 2006 +0100

    [ARM] 3626/1: ARM EABI: fix syscall restarting
    
    Patch from Nicolas Pitre
    
    The RESTARTBLOCK case currently store some code on the stack to invoke
    sys_restart_syscall.  However this is ABI dependent and there is a
    mismatch with the way __NR_restart_syscall gets defined when the kernel
    is compiled for EABI.
    
    There is also a long standing bug in the thumb case since with OABI the
    __NR_restart_syscall value includes __NR_SYSCALL_BASE which should not
    be the case for Thumb syscalls.
    
    Credits to Yauheni Kaliuta <yauheni.kaliuta@gmail.com> for finding the
    EABI bug.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 92b7eb8ffc0741f1fd5fbd5458a466d608310442
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 22 22:18:21 2006 +0100

    [ARM] 3628/1: S3C24XX: add get_rate call to struct clk
    
    Patch from Ben Dooks
    
    Add a get_rate call to allow an given clock
    to over-ride the clk_get_rate() call.
    
    This provides support for clocks which rely on
    division of their parent to correctly report
    their frequency when the parent can also change.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 99c13853ffa26dd6527995b3f47548e075f201fb
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 22 22:18:20 2006 +0100

    [ARM] 3627/1: S3C24XX: split s3c2410 clocks from core clocks
    
    Patch from Ben Dooks
    
    Split the s3c2410 specific clocks from the core
    clock code, as part of the work to support more
    of the Samsung line of SoCs.
    
    The patch does not use the sysdev mechanism as
    the clocks are needed for the timer init, which
    is very early in the kernel init sequence.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a341305e94982c66a2e94125a24b860605da9066
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Thu Jun 22 22:18:13 2006 +0100

    [ARM] 3613/1: S3C2410: Add sysdev and sysclass
    
    Patch from Ben Dooks
    
    The S3C2440 and S3C2442 both have their own sysdev
    and sysclass for differentiating them from the
    currently default S3C2410.
    
    Add a sysdev for the S3C2410 as part of the work
    to make the code be non-dependant on the S3C2410.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0dad31d2da706ef114bc5c21123123be2f405d5b
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jun 22 21:35:11 2006 +0200

    [ALSA] version 1.0.12rc1

commit 607c0fbee7272be4d5455d6b29f6ffb092573eff
Author: Jaroslav Kysela <perex@suse.cz>
Date:   Thu Jun 22 17:49:58 2006 +0200

    [ALSA] aoa driver - Kconfig - remove spaces for SND!=n
    
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 5885492ab4fb18c155000d12f920754f7f35fbab
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 21 19:19:25 2006 +0200

    [ALSA] hda-codec - Show EAPD and pin-detection capabilities in proc
    
    Show EAPD and pin-detection capabilities in proc files.
    They are often required to support the proper audio functionality.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 45df379798b5c3b2ea937735ef04c58ce0f532a7
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 21 16:37:54 2006 +0200

    [ALSA] Remove nested mutexes in seq_ports.c
    
    Removed nested mutexes in the removal routine of port connections.
    The port is guaranteed to be offline before calling it, so no mutex
    is needed.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 555fdc2e9fb2071fdd10ff1d86b8d63265d80241
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 21 16:23:31 2006 +0200

    [ALSA] Remove ppc/toonie.c
    
    Remove obsoleted ppc/toonie.c.
    The function is replaced with new snd-aoa driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 55c385ad5e1f3cda887cd6a8ad69a6d74b4b9125
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jun 21 15:43:44 2006 +0200

    [ALSA] snd-powermac: no longer handle anything with a layout-id property
    
    This patch removes from snd-powermac the code that check for the layout-id
    and instead adds code that makes it refuse loading when a layout-id property
    is present, nothing that snd-aoa should be used.
    It also removes the 'toonie' codec from snd-powermac which was only ever
    used on the mac mini which has a layout-id property.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f3d9478b2ce468c3115b02ecae7e975990697f15
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Jun 21 15:42:43 2006 +0200

    [ALSA] snd-aoa: add snd-aoa
    
    This large patch adds all of snd-aoa.
    Consisting of many modules, it currently replaces snd-powermac
    for all layout-id based machines and handles many more (for
    example new powerbooks and powermacs with digital output that
    previously couldn't be used at all).
    It also has support for all layout-IDs that Apple has (judging
    from their Info.plist file) but not all are tested.
    The driver currently has 2 known regressions over snd-powermac:
     * it doesn't handle powermac 7,2 and 7,3
     * it doesn't have a DRC control on snapper-based machines
    I will fix those during the 2.6.18 development cycle.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 41f0cd3a0c4c6547860cf3b1c2d7968008e6c071
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 21 12:14:40 2006 +0200

    [ALSA] hda-codec - Use 3stack model for ASUS P5RD2-VM / P5GPL-X SE
    
    Use 3stack model as default for ASUS P5RD2-VM and P5GPL-X SE
    boards with AD1986A codec (ALSA bug#2103).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6dac9a65f05600bc29316e3cf3365236efe69041
Author: Daniel T Chen <crimsun@ubuntu.com>
Date:   Wed Jun 21 08:51:07 2006 +0200

    [ALSA] HDA - Lenovo 3000 N100-07684JU - enable laptop-eapd by default
    
    Justin Sunseri reports that sound is audible on his Lenovo 3000
    N100-07684JU by passing 'model=laptop-eapd' to modprobe, so this
    patch adds the pci ids for his sound device to patch_analog.c .
    This commit closes LP#39517. Alexey Parshin also confirmed the fix at
    http://bugs.gentoo.org/137245
    TODO: Mute onboard speakers when device is plugged into the headphone
    jack. Muting the 'External Amplifier' mixer element while a device is
    plugged into the headphone jack allows sound to be played only from the
    headphone jack.
    From: Daniel T Chen <crimsun@ubuntu.com>
    Signed-off-by: Daniel T Chen <crimsun@ubuntu.com>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit c4a87ef4de9860d00460dce30776f7cc17e77459
Author: Ben Williamson <ben.williamson@greyinnovation.com>
Date:   Mon Jun 19 17:20:09 2006 +0200

    [ALSA] USB midi: Remove duplicate CS_AUDIO_* #defines
    
    Removed the CS_AUDIO_* #defines, which were duplicates of the
    class-specific USB_DT_CS_* #defines in <linux/usb_ch9.h>.
    
    Signed-off-by: Ben Williamson <ben.williamson@greyinnovation.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1561f09a2f91bc258a72225f919807c9e51c8290
Author: Jaya Kumar <jayakumar.alsa@gmail.com>
Date:   Mon Jun 19 15:06:14 2006 +0200

    [ALSA] AD1888 suspend/resume fix
    
    This patch adds a write to an undocumented register, 0x60 Extended
    Codec Register Page in the AD1888 codec. It is neccessary in order
    to make suspend/resume work with the AD1888.
    
    Signed-off-by: Jaya Kumar <jayakumar.alsa@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1459c7849ea24fd71e4d2e678caa1cc3fef754e2
Author: Rodolfo Giometti <giometti@linux.it>
Date:   Mon Jun 19 15:04:54 2006 +0200

    [ALSA] Disable AC97 AUX and VIDEO controls for WM9705 touchscreen
    
    This patch by Rodolfo Giometti disables the AC97 AUX and VIDEO controls
    on the WM9705 when the touchscreen is selected as the AUX and VIDEO
    lines are shared with the touch controller.
    Changes:-
     o Added AC97_HAS_NO_AUX flag
     o Test for AC97_HAS_NO_AUX flag in snd_ac97_mixer_build()
     o Sets AC97_HAS_NO_VIDEO and AC97_HAS_NO_AUX in patch_wolfson05() when
    WM9705 touch driver is selected.
    
    Signed-off-by: Rodolfo Giometti <giometti@linux.it>
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 396f739e21f3b7ea9ece08bf0abf0a45693c3047
Author: Karsten Wiese <annabellesgarden@yahoo.de>
Date:   Mon Jun 19 13:22:52 2006 +0200

    [ALSA] via82xx - Default to variable samplerate enabled for MSI K8T Neo2-FI
    
    Default to variable samplerate enabled for MSI K8T Neo2-FI
    No crackles here with 44100.
    
    Signed-off-by: Karsten Wiese <annabellesgarden@yahoo.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d4199f01750f3fa6a5b8bacdac9bd0051fee95ef
Author: Daniel T Chen <crimsun@ubuntu.com>
Date:   Fri Jun 16 16:21:54 2006 +0200

    [ALSA] Add hp_only quirk for pci id [161f:2032] to via82xx
    
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=eae2cc78de39502595f67b7fc1f821f5963bb8ae
    UpstreamStatus: Not merged
    Christian Bjalevik reports in LP#38546 that his sound chipset requires
    the 'hp_only' quirk to allow him to control sound volume correctly when
    headphones are inserted. This patch adds the appropriate pci id to the
    via82xx ALSA driver so that the quirk is applied automatically, thereby
    removing the need for users to modify /etc/modprobe.d/alsa-base (or to
    unload and reload snd-via82xx with ac97_quirk=hp_only).
    This patch closes LP#38546.
    
    Signed-off-by: Daniel T Chen <crimsun@ubuntu.com>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1781a9af1d95256ed45abac4b0b87f48f64b9b87
Author: Daniel T Chen <crimsun@ubuntu.com>
Date:   Fri Jun 16 12:13:00 2006 +0200

    [ALSA] sound/pci/: Add hp_only quirk for Dell D800 laptops
    
    http://www.kernel.org/git/?p=linux/kernel/git/bcollins/ubuntu-dapper.git;a=commitdiff;h=9ad787cd9670c3f3b8f3db235e84baf00a2ea526
    Anders Ostling comments in Malone #41015 that his Dell D800 laptop's
    volume control works correctly when the hp_only quirk is passed to
    modprobe. This commit adds his hardware's sub{vendor,device} ids to
    the quirk list for the intel8x0 driver.
    
    Signed-off-by: Daniel T Chen <crimsun@ubuntu.com>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 40a4f7a014339712a9f81b5fad99558611e99ca1
Author: Jaya Kumar <jayakumar.alsa@gmail.com>
Date:   Tue Jun 13 12:01:14 2006 +0200

    [ALSA] cs5535audio - trivial debug printk
    
    Following is a trivial patch to get more info for boards where
    the AC97_VENDOR_ID2 register (or others) time out.
    
    Signed-off-by: Jaya Kumar <jayakumar.alsa@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 63eb1e4bd2975f1d1102c1f44e4fd6fcd76f7792
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Jun 13 11:58:12 2006 +0200

    [ALSA] fix potential NULL pointer deref in snd_sb8dsp_midi_interrupt()
    
    First testing if a pointer is NULL and if it is (or might be), proceeding
    with code that dereferences that same pointer is clearly a mistake.
    This happens in sound/isa/sb/sb8_midi.c::snd_sb8dsp_midi_interrupt()
    The patch below reworks the code so this unfortunate case doesn't happen.
    Also remove some blank comments.
    Found by the Coverity checker as bug #367
    Patch is compile testted only due to lack of hardware.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6540dffa6ecfe0d99fb263548dcc4b35ccefe784
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 13 11:57:22 2006 +0200

    [ALSA] hda-codec - Add SPDIF support to Thinkpad T/X/Z60
    
    Added IEC958 (SPDIF) output support to Thinkpad T/X/Z60 with
    AD1981HD codec.  The spdif jack is on docking station.
    Also, renamed 'IEC958 Playback Route' to 'IEC958 Playback Source'
    to avoid the mixer name confliction with IEC958 switch.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 70c5acbdcc7bb1651bb166f9e4b2345759a9fb18
Author: Jaya Kumar <jayakumar.alsa@gmail.com>
Date:   Mon Jun 12 10:08:02 2006 +0200

    [ALSA] ac97_codec - fix duplicate control creation in AC97
    
    This patch conditions AC97 control creation by whether or not the
    codec is an AD18xx codec. This fixes the case where the default control
    would get created and then snd_ac97_mixer_build fails out when creation
    of ad18xx specific control would get attempted. This problem was found
    and debuged by Marcelo Tosatti.
    
    Signed-off-by: Jaya Kumar <jayakumar.alsa@gmail.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit ecb594e66e740dc390a301768d89662777f1fde2
Author: Remy Bruno <remy.bruno@trinnov.com>
Date:   Mon Jun 12 09:25:22 2006 +0200

    [ALSA] RME HDSP - fixed proc interface (missing {})
    
    From: Remy Bruno <remy.bruno@trinnov.com>
    Signed-off-by: Jaroslav Kysela <perex@suse.cz>

commit 58398895663f855aa32b440b164c426cfae4450c
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sat Jun 10 09:16:49 2006 +0100

    [ALSA] snd-ca0106: Update playback to 24bit. Fix typo is comment.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 2e74eba3e2f000184ade92833c80e799af41c180
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Jun 9 15:28:07 2006 +0200

    [ALSA] Fix invalid __init in ALSA ISA drivers
    
    Replaced invalid __init with __devinit in snd-sbawe and snd-opl3sa2
    drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3f3488b84c261ab3cb64b9f0b9f40b61e33edb98
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jun 8 12:01:44 2006 +0200

    [ALSA] sound/vxpocket: fix printk warning
    
    Fix printk format warning:
    sound/pcmcia/vx/vxp_ops.c:205: warning: format '%x' expects type 'unsigned int', but argument 5 has type 'size_t'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3758d4e601552a3d9066913a31ccb8dc6a25ee69
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Jun 7 18:12:31 2006 +0200

    [ALSA] Remove bogus check of mmap_count in snd_pcm_release()
    
    Removed a bogus check of mmap_count in snd_pcm_release().
    This is no longer true for the shared streams.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 688956f23bdbfb1c3551bfafc819f989b36bb8ae
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Jun 6 15:44:34 2006 +0200

    [ALSA] Fix races in irq handler and ioremap
    
    Call ioremap before request_irq for avoiding possible races
    in the irq handler.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c5533bf36b4a6629dab0e08c4951247050928853
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Fri Jun 2 09:15:44 2006 +0200

    [ALSA] virmidi: revert erroneous removal of zero initialization
    
    The last patch that tried to remove zero initializations of static
    variables accidentally removed a not-quite-zero initialization too.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f8e9f340da753c021c071f318f97ac9046c1316a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 1 21:08:53 2006 +0200

    [ALSA] hda-codec - Add model entry for HP nx6320
    
    Added a model entry for HP nx6320 with AD1981HD codec.
    It wasn't covered by the generic HP entry because of a hardware
    bug (the SSID is reversed).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a43c4d4d7326c2894be9fd04519b109c438ee78b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 1 17:16:41 2006 +0200

    [ALSA] ac97 - Add Thinkpad T41p to AD1981 jack-sense blacklist
    
    Added Thinkpad T41p to the blacklist to disable HP/line jack-sensing
    with AD1981B.  The jack-sensing is just harmful on this laptop.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0a50d2b2951cb7ae12726814f9a198e1c699aa0b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 1 14:47:29 2006 +0200

    [ALSA] Fix possible races in PCI driver removal
    
    Call free_irq() before releasing others to avoid races when
    shared irq is issued.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f079c25ab8a7d223875c5bac9b23b484e4a18f88
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu Jun 1 11:42:14 2006 +0200

    [ALSA] hda-intel - Fix race in remove
    
    Call iounmap after free_irq to avoid invalid accesses in the
    shared irq.  The patch is taken from
    	https://bugzilla.novell.com/show_bug.cgi?id=167869
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 29463dfea754b8b360f638244f002c751aaad1b0
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu Jun 1 08:33:48 2006 +0200

    [ALSA] bt87x: add Voodoo TV 200 whitelist entry
    
    This adds a whitelist entry for the digital audio input of the Voodoo TV 200.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit d20cad602fc3d92902dc3b4ed252359ab05eae0f
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Wed May 31 11:55:17 2006 +0200

    [ALSA] NULL pointer dereference in sound/synth/emux/soundfont.c
    
    this is about coverity id #100.
    It seems the if statement is negated, since the else branch calls
    remove_info() with sflist->currsf as a parameter where it gets
    dereferenced.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f26eb78fcfb5b76fbe6d3e740b6fedda611f8395
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon May 29 19:05:28 2006 +0200

    [ALSA] cmipci - Fix a typo in 'PC Speaker Playback Switch' control
    
    Fixed a typo in  'PC Speaker Playback Switch' control name.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cf78ee2ccc96d59e602188e0e6e3fe3522b6d3f6
Author: Alan Horstmann <gineera@aspect135.co.uk>
Date:   Fri May 26 17:19:34 2006 +0200

    [ALSA] ice1712 - Set mpu401 info flags from _card_info
    
    To permit use, in ice1712, of the mpu401 info flags recently added to
    mpu401_uart, adds info_flags in snd_ice1712_card_info so that additional
    flags can be set, if desired. ย'MPU401_INFO_INTEGRATED' is always set with
    the ice1712. ยThe flags are passed on to snd_mpu401_uart_new().
    _INFO_OUTPUT is set for DMX6fire mpu2.
    
    Signed-off-by: Alan Horstmann <gineera@aspect135.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 766a6c36f3a0b12e1c55dddc1df6673db6b22bfb
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 26 14:58:29 2006 +0200

    [ALSA] hda-codec - Fix model for HP dc7600
    
    Changed the assigned model for HP dc7600 with ALC260 codec
    to match better with the actual I/O assignment.
    Patch taken from ALSA bug#2157.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c51302710546f075e65b1e70487707e8324abf2f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 23 15:46:10 2006 +0200

    [ALSA] ice1724 - Add functionality for Audiotrak Prodigy 7.1 LT
    
    This patch adds support for useable front audio channels,
    user controllable headphone channel and optical output.
    From: Anho Ki
    Signed-off-by: Matt Taylor <mwtaylor@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d5a31b8b6e79145c832d530743ca80bf5f58a965
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 23 13:30:59 2006 +0200

    [ALSA] au88x0 - Fix 64bit address of MPU401 MMIO port
    
    Fix 64bit address of MPU401 MMIO port on au88x0 chip.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 721b8a297279276699900a662fa8299232ebc0e8
Author: Alan Horstmann <gineera@aspect135.co.uk>
Date:   Tue May 23 13:29:51 2006 +0200

    [ALSA] ice1712 - Disable AC97 for DMX6fire
    
    Consumer AC97 is not used by the Terratec DMX6fire, but eeprom bit indicates
    it is; change the stored value to disable failing consumer mode.
    
    Signed-off-by: Alan Horstmann <gineera@aspect135.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 302e4c2f9e2b9f07c69649782330a61c60001ac4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 23 13:24:30 2006 +0200

    [ALSA] Change an arugment of snd_mpu401_uart_new() to bit flags
    
    Change the 5th argument of snd_mpu401_uart_new() to bit flags
    instead of a boolean.  The argument takes bits that consist of
    MPU401_INFO_XXX flags.
    The callers that used the value 1 there are replaced with
    MPU401_INFO_INTEGRATED.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 140432fd2fbe68d59fe6fcddbcd4bcd0f84e951a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon May 22 14:31:57 2006 +0200

    [ALSA] hdsp - Fix compilation with hdsp driver built in kernel
    
    Fixed the compilation with hdsp driver built in kernel.
    The traditional hwdep loader is used in this case.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c00bd74a0dd69c4b39e4d95a20253e735616bdb9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri May 19 19:22:34 2006 +0200

    [ALSA] Fix description of cs5535audio driver in ALSA-Configuration.txt
    
    Fix the description of cs5535audio driver in ALSA-Configuraiton.txt.
    Now it supports only single device.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 77389b432344c811832962ca7f8181b8b3da3449
Author: Jaya Kumar <jayakumar.alsa@gmail.com>
Date:   Fri May 19 12:04:22 2006 +0200

    [ALSA] Single variables for cs5535audio
    
    As per Takashi's feedback, this is a cleanup to make cs5535audio be
    single device per system. The diff is against 2.6.17-rc4 with
    Takashi's patch adding the module_params for index, id and enable.
    
    Signed-off-by: Jaya Kumar <jayakumar.alsa@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2851d963e0038c53d2175970daac4217abed7af2
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 18 14:48:26 2006 +0200

    [ALSA] mpu401_uart - Fix coding style and code clean up
    
    - fold lines and fix spaces to follow the standard style
    - added some comments
    - moved EXPORT_SYMBOL() near the definition
    - some code clean up
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f8c7579051763d6be275bf88a430ffb1c5234bad
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 18 14:47:03 2006 +0200

    [ALSA] usbaudio - Fix a typo
    
    Fix a typo introduced by the last fix.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c77a03551b3fd8ef6434153dfadff83ae404e526
Author: Alan Horstmann <gineera@aspect135.co.uk>
Date:   Thu May 18 14:24:30 2006 +0200

    [ALSA] Remove ENTER_UART from au88x0 init
    
    Remove an unnecessary ENTER_UART instruction during au88x0 init as it makes
    the first/subsequent midi open to fail.
    
    Signed-off-by: Alan Horstmann <gineera@aspect135.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit faf8d11743961c720c85be191f8a08c00e5c5d60
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Thu May 18 09:35:15 2006 +0200

    [ALSA] usb-audio: add workaround for CSR Bluetooth Headphones (Saitek A-250)
    
    Some devices don't have the required class-specific endpoint descriptors.
    Instead of making this case an error, this patch makes the driver guess the
    endpoint attributes.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 474167d646cb2147b9fcd7bacf5cdf8177ed43c4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 17 17:17:43 2006 +0200

    [ALSA] hda-codec - Fix init verbs for ALC260 hp model
    
    Use the basic init verbs for ALC260 instead of hp init verbs
    since hp init verbs seem incomplete and not working on some machines.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 6581f4e74d8541dd7d579f64e94822622cbb1654
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 17 17:14:51 2006 +0200

    [ALSA] Remove zero-initialization of static variables
    
    Removed zero-initializations of static variables.
    A tiny optimization.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0fbf405c583e6ee6d7227eb938a096d0998f7e78
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 17 17:10:35 2006 +0200

    [ALSA] Fix pcm-draining of capture stream in PCM middle layer
    
    Fix the draining of PCM capture stream in the PCM middle layer.
    snd_pcm_drain() ignored capture streams, but it should change
    the state to SNDRV_PCM_DRAINING.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9b87819b61060a3d32d5982f5ee998c22ab8ca27
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 17 11:26:39 2006 +0200

    [ALSA] Fix description of snd-hda-intel driver in document
    
    Fixed the description of snd-hda-intel driver in ALSA-Configuration.txt
    document.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 778b6e1b2da260adf3d3254aaa35bffd1eb05b42
Author: Felix Kuehling <fkuehlin@ati.com>
Date:   Wed May 17 11:22:21 2006 +0200

    [ALSA] hda - Add support for the ATI RS600 HDMI audio device
    
    Add support for the ATI RS600 HDMI audio device. It has a one-stream
    pure digital stereo codec that isn't handled by the generic codec
    support.
    
    Signed-off-by: Felix Kuehling <fkuehlin@ati.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e2f872608af7f3c00beaa61ff6037e3cc5a66cf1
Author: Andreas Mohr <andi@lisas.de>
Date:   Wed May 17 11:04:19 2006 +0200

    [ALSA] azt3328.c: use kernel coding style
    
    Scope braces were not done the One True Kernel Way.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 13769e3f21d6e9c59999c9bf6908278b878d05c5
Author: Andreas Mohr <andi@lisas.de>
Date:   Wed May 17 11:03:16 2006 +0200

    [ALSA] azt3328.c: add 3D sound mixer switch/rename controls
    
    - add 3D sound pre-3D/post-3D switch, as seen in standard AC-97
    - rename controls to shorter and more accurate strings
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ca54bde3634360afecd0dada9c59399bbe88bd32
Author: Andreas Mohr <andi@lisas.de>
Date:   Wed May 17 11:02:24 2006 +0200

    [ALSA] azt3328.c: add suspend/resume support
    
    - add suspend/resume handlers
    - fix problem (private_data members not set)
    Playing a file while suspending will resume correctly with this patch,
    so I assume the hardware to get fully correctly reinitialized with
    this patch.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 746df94898554b3d8e91d855e934852e626c701c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Mon May 15 19:49:05 2006 +0200

    [ALSA] Fix rwlock around snd_iprintf() in sound core
    
    Fixed rwlock around snd_iprintf() in sound core part.
    Replaced with mutex.
    Also, make mutex and flags static variables with addition of
    snd_card_locked() function (just for sound.c).
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0defb2672d7cde8d048eec35c183da7b88adbd9e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 11 18:12:23 2006 +0200

    [ALSA] hda-codec - Fix handling of capture controls on ALC882 3/6-stack models
    
    Fixed the handling of capture controls on ALC882 3/6-stack models.
    Now the driver checks the availability of NID 07h.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ed7cbe3e4175e5fe9386793fbffee786840d7e9c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 11 11:30:10 2006 +0200

    [ALSA] Remove obsolete description from ALSA-Configuration.txt
    
    Remove obsolete descriptions about the dependency on CONFIG_ISA
    for vxpocket and pdaudiocf drivers.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3206b9ca9fba8dc8d6ddd371a3ff455c67ad137f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 10 16:33:11 2006 +0200

    [ALSA] hda-codec - Add support for Sony Vaio VGN-S3HP
    
    Added the missing support for Sony Vaio VGN-S3HP with ALC260 codec.
    The patch taken from ALSA bug#2101.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2ce7fb579f842f76a0216618c105bffd334d9233
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 10 16:24:42 2006 +0200

    [ALSA] rme96 - Fix OSS full-duplex
    
    Fixed a bug in rme96 driver that the full-duplex on OSS emulation
    doesn't work due to the invalid period size parameter.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 62fe78e90dc25b269362034487dc450cd8453e8c
Author: Sam Revitch <samr7@cs.washington.edu>
Date:   Wed May 10 15:09:17 2006 +0200

    [ALSA] hda-codec - Add support for Apple Mac Mini (early 2006)
    
    Add support for some audio quirks of the Apple Mac Mini (early 2006)
    
    Signed-off-by: Sam Revitch <samr7@cs.washington.edu>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4d1a70dad0e1c44dc0725de6de25aceead48599e
Author: Raimonds Cicans <ray@vardes.lv>
Date:   Fri May 5 09:49:53 2006 +0200

    [ALSA] add support for SB Live! 24-Bit External remote control
    
    This patch rewrites the remote control code to use a table for
    the peculiarities of the various SB models, and adds support
    for a third model.
    
    Signed-off-by: Raimonds Cicans <ray@vardes.lv>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit cab5c4c97a98e46359faa52e86787c1f0ccd773c
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 4 14:36:08 2006 +0200

    [ALSA] cmipci - Disable integrated mpu401 as default
    
    Enable the support of mpu401 PCI port only when mpu_port=1 module
    option is given, i.e. disabled as default.
    It turned out that the check of integrated midi port isn't perfect
    and caused hang-ups on some boards.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a7306336e818fe83f08a476c91ae2616e7fb209f
Author: Takashi Iwai <tiwai@suse.de>
Date:   Thu May 4 11:58:43 2006 +0200

    [ALSA] Fix a typo in writing-an-alsa-driver document
    
    Fixed a typo in writing-an-alsa-driver document.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 520290e43f9880da34e542185838816c6d79a340
Author: Alan Horstmann <gineera@aspect135.co.uk>
Date:   Wed May 3 17:07:29 2006 +0200

    [ALSA] au88x0 - Init before create components
    
    Change the order in vortex_probe to set the card details before creating the
    components, meaning for example that card->shortname is available when
    registering the midi port.
    I have also added extra to card->shortname, and a line to overwrite the midi
    name following snd_mpu401_uart_new.
    
    Signed-off-by: Alan Horstmann <gineera@aspect135.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a59524faf3a2050e14a1c9038eb006ce96025394
Author: Matt Porter <mporter@embeddedalley.com>
Date:   Wed May 3 14:08:33 2006 +0200

    [ALSA] hda: add sigmatel 9227/9228/9229 ids
    
    Adds support for the 9227/9228/9229 sigmatel hda codecs.
    
    Signed-off-by: Matt Porter <mporter@embeddedalley.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a9393d70e564e4afe0333b1e26dda48af8b9305e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed May 3 11:59:03 2006 +0200

    [ALSA] hda-codec - Fix mute switch on VAIO laptops with STAC7661
    
    Fixed the master mute switch on VAIO laptops with STAC7661
    codec chip.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 1dbfd8c56bd7366d86e58b3e510a75de93e1978b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 2 18:31:31 2006 +0200

    [ALSA] cs5535audio - Add missing module_param*() and MODULE_PARM_DESC()
    
    Added missing module_param*() and MODULE_PARM_DESC() for
    cs5535audio driver.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit eed656493a459bbc0fdf687fa8f43f87946d8d3a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 2 18:22:06 2006 +0200

    [ALSA] Add a workaround for ASUS A6KM
    
    Added a workaround for ASUS A6KM board that requires EAPD
    rather than SPDIF-in.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 886da8677d2e4e942fc8984b22bfb8da45e810ec
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue May 2 18:17:57 2006 +0200

    [ALSA] hda-codec - Add support for LG S1 laptop
    
    Added the model entry for LG S1 laptop.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit a7b928ac5fcd8e1b5c7c69926d8845b1d0500af3
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 2 16:22:12 2006 +0200

    [ALSA] rawmidi: add get_port_info callback for sequencer information flags
    
    Add a get_port_info callback to the snd_rawmidi_global_ops structure to
    allow the USB MIDI driver to supply information flags for the sequencer
    ports created by seq_midi.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 450047a78f3c35a905576e121abfbee2ccd45993
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 2 16:08:41 2006 +0200

    [ALSA] add more sequencer port type information bits
    
    Add four new information flags SNDRV_SEQ_PORT_TYPE_HARDWARE, _SOFTWARE,
    _SYNTHESIZER, _PORT for sequencer ports.  This makes it easier for apps
    like Rosegarden to make policy decisions based on the port type.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit c97f3dd85490e51ba48782dd0c063cdade352c0d
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 2 15:50:05 2006 +0200

    [ALSA] fix port type bits
    
    Fix the port information about non-MIDI messages that had wrong values
    for some OPL3 and EmuX ports.
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit f4a747f155fe375231196ec3d26fcb6e3675d82f
Author: Clemens Ladisch <clemens@ladisch.de>
Date:   Tue May 2 15:33:25 2006 +0200

    [ALSA] fix a wrong lock
    
    fix a typo in the info locking code
    
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 170a34605c14a90df5f4a78e0b4ca643be6ef8ba
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:29:15 2006 +0200

    [ALSA] Fix compile warning in timer.c
    
    Fix a compile warning in timer.c due to unused variables.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9c323fcbc51493f79f9700cb20830d0857c72d99
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:41 2006 +0200

    [ALSA] Fix mmap_count with O_APPEND opened streams
    
    Move mmap_count to snd_pcm_substream instead of runtime struct
    so that multiplly opened substreams via O_APPEND can be handled
    correctly.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 0df63e44c3e315ec0fe427ae62558231864108bd
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:41 2006 +0200

    [ALSA] Add O_APPEND flag support to PCM
    
    Added O_APPEND flag support to PCM to enable shared substreams
    among multiple processes.  This mechanism is used by dmix and
    dsnoop plugins.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit f001c3acf64b8ca18fe40af592629abb261b321e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:41 2006 +0200

    [ALSA] Insert might_sleep() in snd_iprintf()
    
    Inserted might_sleep() in snd_iprintf() for sanity check.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d689e34b524b69c111db0b7c844d71c8e1a53b15
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:41 2006 +0200

    [ALSA] Remove spinlocks around proc prints
    
    Don't lock during showing proc read.  snd_iprintf() might sleep.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit bf850204a71a97eb5a6afaf27263bb667f9cab0a
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:41 2006 +0200

    [ALSA] Remove unneeded read/write_size fields in proc text ops
    
    Remove unneeded read/write_size fields in proc text ops.
    snd_info_set_text_ops() is fixed, too.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7e4eeec8a30fa9e00cac67a37ca9ddf6cbdb79c4
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] Make buffer size of proc text interface variable
    
    Make the read/write buffer size of proc text interface variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2f4ca8e5c7cf6a6f7935483d8ee4aa8b039bdd7d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] Clean up ugly hacks in pcm_lib.c
    
    Clean up ugly hacks for sync with alsa-lib code in pcm_lib.c.
    Also, optimize snd_pcm_hw_params_choose() with a loop.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e88e8ae639a4908b903d9406c54e99a729b01a28
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] Move OSS-specific hw_params helper to snd-pcm-oss module
    
    Move EXPORT_SYMBOL()s to places adjacent to functions/variables.
    Also move OSS-specific hw_params helper functions to pcm_oss.c.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit e5e8a1d4618595ea406336da3cdbd0c6eb6f260d
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] hda-codec - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 57c65c116e1c03c54ac7c4bf38f2b4086d2c1a17
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] i2c - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit fa325eb3afc3cdaf7fba6ee3eaf05b243f5614a3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] vx - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 95ff17564b6db34cad0cd67678fb79174e77531e
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] emux - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit cbef55f3d8e4e7efef4703c82302a0021d781483
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:40 2006 +0200

    [ALSA] trident - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 2dd31deeeb238a4f40c9fc9e219dc210fcbf8765
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] emu10k1 - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 4181e5fe4b27b0a049402a359a4a5d8b80308528
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] opl4 - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit ac19e19b3664feda8040fb9fb7885183a9eb7a80
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] opl3 - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7b09679c431ba91551a90203f7e7dadbb4c26d1b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] ac97 - Move EXPORT_SYMBOL() to adjacent to each function
    
    Move EXPORT_SYMBOL() to adjacent to each exported function/variable.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 91715ed934fb645948ff17b6c20c6f7fd7688a70
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] Clean up EXPORT_SYMBOL()s in snd-seq module
    
    Move EXPORT_SYMBOL()s to places adjacent to functions/variables.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit c0d3fb39e9511c6fad17d059a3a50d1be33add24
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] Clean up EXPORT_SYMBOL()s in snd module
    
    Move EXPORT_SYMBOL()s to places adjacent to functions/variables.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9bb22e215c28204faee73dd7ac0ad98c075d6f7b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Fri Apr 28 15:13:39 2006 +0200

    [ALSA] Clean up ugly hacks in pcm_params.h
    
    Clean up ugly hacks for sync with alsa-lib in pcm_params.h.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 9ac25594e68a4b61516e7c1140d8c0f7ef449e20
Author: Jaya Kumar <jayakumar.alsa@gmail.com>
Date:   Fri Apr 28 14:34:49 2006 +0200

    [ALSA] PM support for cs5535audio
    
    Appended is my patch adding PM support to the cs5535audio driver.
    I also added the ac97 quirk but it's not yet confirmed which
    boards need to be in the quirk list. The patch also includes some
    Kconfig and misc cleanup.
    
    Signed-off-by: Jaya Kumar <jayakumar.alsa@gmail.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 5e1b1518a53fc62d9f39a13819c849336c6d8dd4
Author: Kenneth Crudup <kenny@panix.com>
Date:   Fri Apr 28 13:03:48 2006 +0200

    [ALSA] hda-codec - Add support for Sony Vaio VGN-A790 laptop
    
    Added the model entry for Sony Vaio VGN-A790 laptop with ALC260 codec.
    From: Kenneth Crudup <kenny@panix.com>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 3bef229e4f13790402b1387ea8147906f217a766
Author: Alan Horstmann <gineera@aspect135.co.uk>
Date:   Wed Apr 26 18:13:59 2006 +0200

    [ALSA] ice1712 - Provides specified midi port names instead of defaults
    
    Patch provides for the ice1712 card driver to overwrite the midi port name
    string given by default in mpu401_uart, with one specified in
    snd_ice1712_card_info.
    
    Signed-off-by: Alan Horstmann <gineera@aspect135.co.uk>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 78fc030bdbbeebdea436f2b02a616d67e5f9bd9b
Author: Alan Horstmann <gineera@aspect135.co.uk>
Date:   Fri Apr 21 08:39:20 2006 +0200

    [ALSA] Change seq_midi.c so client name is card, rather than port, specific
    
    Change snd_seq_midisynth_register_port() in seq_midi.c so that if a new client
    is created, the client name string is based on card->shortname not
    (port-specific) info->name.
    
    Signed-off-by: Alan Horstmann <gineera@aspect135.co.uk>
    Signed-off-by: Clemens Ladisch <clemens@ladisch.de>

commit 887709be9063d233eb5abef25aafcd94615b03f9
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Apr 18 13:27:31 2006 +0200

    [ALSA] hda-codec - Fix a typo
    
    Fixed a typo of 'pci_subsystem' in the last changeset.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 01686c5fce4682350849f9f2c262fcaf67ec73c3
Author: Takashi Iwai <tiwai@suse.de>
Date:   Tue Apr 18 12:54:11 2006 +0200

    [ALSA] hda-codec - Add Thinkpad X60/T60/Z60 support
    
    Added the support for Thinkpad X60/T60/Z60 laptops with AD1981HD codec.
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 7152447df98b3981d621224be947a2c8d77aed06
Author: Rene Herman <rene.herman@keyaccess.nl>
Date:   Thu Apr 13 12:58:06 2006 +0200

    [ALSA] unregister platform device again if probe was unsuccessful
    
    This second one unregisters the platform device again when the probe is
    unsuccesful for sound/drivers, sound/arm/sa11xx-uda1341.c and
    sound/ppc/powermac.c. This gets them all.
    
    Signed-off-by: Rene Herman <rene.herman@keyaccess.nl>
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit 79ca4f3f625e14212310f953b096e2e45110ac6b
Author: Takashi Iwai <tiwai@suse.de>
Date:   Wed Apr 12 12:54:55 2006 +0200

    [ALSA] vxpocket - Fix a typo
    
    Fix a typo of return value from vxpocket_config().
    
    Signed-off-by: Takashi Iwai <tiwai@suse.de>

commit d7f6f1157f73dffe0a6afd12b90557e484b7fb35
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Tue Apr 11 21:47:27 2006 +0100

    [ALSA] AC97: Correct Mic Boost label.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit be0b7b0113300c324034e94a12244c4ac3f4b354
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Apr 9 20:48:44 2006 +0100

    [ALSA] ca0106: Fixes MSI K8N's SB Live 24 bit, no sound from line-in.
    
    Fixed bug#1331
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 3969f6178b86613fd443e70d11b8848451552bdd
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Apr 9 17:44:13 2006 +0100

    [ALSA] Add p17v.h file.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 21fdddea8e4cc54341d389916d0c17db8c1ca452
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Apr 9 17:36:39 2006 +0100

    [ALSA] emu10k1: Add support for Audigy4 (not Pro)
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit 6129daaa0d2b84c0e376b6b17b3d3740c4d1d1ca
Author: James Courtier-Dutton <James@superbug.co.uk>
Date:   Sun Apr 9 13:01:34 2006 +0100

    [ALSA] ca0106: Add analog capture controls.
    
    Signed-off-by: James Courtier-Dutton <James@superbug.co.uk>

commit c6976a4eb3c9ead165de950899b45db0840b8e30
Author: Andrew Morton <akpm@osdl.org>
Date:   Sun May 14 21:43:50 2006 -0700

    [PATCH] w1: warning fix
    
    drivers/w1/w1.c:423: warning: long long unsigned int format, __u64 arg (arg 8)
    
    u64 is not, never has been and never will be "unsigned long long"!
    
    While we're there, fix up some code layout - it looks awful in an 80-col
    display.
    
    Cc: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 30841711c88dc2d9ce31bfa3fa5479aa823804cf
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Apr 27 19:40:27 2006 +0400

    [PATCH] w1: clean up W1_CON dependency.
    
    If w1 is not enabled, w1_con should not appear in configuration,
    even if no logic is turned on without w1.
    W1_CON should depend on W1 also.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6a873403d387c34c4466cc81649acc8acd66874d
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 27 02:29:18 2006 -0700

    [PATCH] drivers/w1/w1.c: fix a compile error
    
    From: Adrian Bunk <bunk@stusta.de>
    
    drivers/w1/w1.c:197: error: static declaration of 'w1_bus_type' follows non-static declaration
    drivers/w1/w1.h:217: error: previous declaration of 'w1_bus_type' was here
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f621e1c78134f7cea0d2cf2c2822c917bedec516
Author: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
Date:   Tue Apr 18 21:18:20 2006 -0700

    [PATCH] W1: fix dependencies of W1_SLAVE_DS2433_CRC
    
    From: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    
    Default values for boolean and tristate options can only be 'y', 'm' or 'n'.
    This patch fixes dependencies of W1_SLAVE_DS2433_CRC.
    
    Signed-off-by: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 70d484bff43013e9b08f5d970b1c5941e9d98e16
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Apr 24 10:46:14 2006 +0400

    [PATCH] W1: possible cleanups
    
    This patch contains the following possible cleanups:
    - the following file did't #include the header with the prototypes for
      it's global functions:
      - w1_int.c
    - #if 0 the following unused global function:
      - w1_family.c: w1_family_get()
    - make the following needlessly global functions static:
      - w1_family.c: __w1_family_put()
      - w1_io.c: w1_delay()
      - w1_io.c: w1_touch_bit()
      - w1_io.c: w1_read_8()
    - remove the following unused EXPORT_SYMBOL's:
      - w1_family.c: w1_family_put
      - w1_family.c: w1_family_registered
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2c5bfdac33607a618d8cf1532ef235ca9eccd49e
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Tue Apr 4 20:35:22 2006 +0400

    [PATCH] W1: cleanups
    
    Nice cleanup spotted by Adrian Bunk, which was lost due to moving to the
    completely new functionality.
    
    Shame-shame-shame on me.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 339f07236b481371ffb4993cf309dd1f1b3382ab
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Apr 3 22:51:17 2006 -0700

    [PATCH] w1 exports
    
    From: Andrew Morton <akpm@osdl.org>
    
    WARNING: "w1_read_block" [drivers/w1/slaves/w1_therm.ko] undefined!
    WARNING: "w1_write_8" [drivers/w1/slaves/w1_therm.ko] undefined!
    WARNING: "w1_reset_select_slave" [drivers/w1/slaves/w1_therm.ko] undefined!
    WARNING: "w1_reset_bus" [drivers/w1/slaves/w1_ds2433.ko] undefined!
    WARNING: "w1_write_8" [drivers/w1/slaves/w1_ds2433.ko] undefined!
    WARNING: "w1_read_block" [drivers/w1/slaves/w1_ds2433.ko] undefined!
    WARNING: "w1_write_block" [drivers/w1/slaves/w1_ds2433.ko] undefined!
    WARNING: "w1_reset_select_slave" [drivers/w1/slaves/w1_ds2433.ko] undefined!
    
    Cc: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit abd52a13206e02537ca1dc08fc5438c7d27bdbf1
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Apr 3 12:04:27 2006 +0400

    [PATCH] w1: Use mutexes instead of semaphores.
    
    Use mutexes instead of semaphores.
    Patch tested on x86_64 and i386 with test bus master driver.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 46e07f6e5eb0e465e086b8f485f4238bd453e3e9
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Apr 3 12:01:12 2006 +0400

    [PATCH] w1: Make w1 connector notifications depend on connector.
    
    Make w1 connector notifications depend on connector.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bb5427b5466782ba0bbf56a4ed752e08b65a5d08
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Mar 23 19:11:58 2006 +0300

    [PATCH] w1: netlink: Mark netlink group 1 as unused.
    
    netlink_w1 was moved to connector.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b6043fcab4b2b06b9fcde4c783ab253cdc2c1129
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Mar 23 19:11:58 2006 +0300

    [PATCH] w1: Move w1-connector definitions into linux/include/connector.h
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 12003375acd879e498c6c511faf27531296f9640
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Mar 23 19:11:58 2006 +0300

    [PATCH] w1: Userspace communication protocol over connector.
    
    There are three types of messages between w1 core and userspace:
    1. Events. They are generated each time new master or slave device found
    	either due to automatic or requested search.
    2. Userspace commands. Includes read/write and search/alarm search comamnds.
    3. Replies to userspace commands.
    
    From: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 81f6075ebcf3b0800321b7d81e4845d6ad9566d8
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Mar 23 19:11:58 2006 +0300

    [PATCH] w1: Replace dscore and ds_w1_bridge with ds2490 driver.

commit f522d2396138e68bcb9cc5650aa368a81d7f7ff0
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Thu Mar 23 19:11:58 2006 +0300

    [PATCH] w1: Added default generic read/write operations.
    
    Special file in each w1 slave device's directory called "rw" is created
    each time new slave and no appropriate w1 family is registered.
    "rw" file supports read and write operations, which allows to perform
    almost any kind of operations. Each logical operation is a transaction
    in nature, which can contain several (two or one) low-level operations.
    Let's see how one can read EEPROM context:
    1. one must write control buffer, i.e. buffer containing command byte
    and two byte address. At this step bus is reset and appropriate device
    is selected using either W1_SKIP_ROM or W1_MATCH_ROM command.
    Then provided control buffer is being written to the wire.
    2. reading. This will issue reading eeprom response.
    
    It is possible that between 1. and 2. w1 master thread will reset bus for
    searching and slave device will be even removed, but in this case 0xff will
    be read, since no device was selected.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4941b395b3c2635a8c16d88791a789fb6ac6be43
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jun 13 09:47:27 2006 -0700

    [PATCH] I2C: I2C controllers go into right place on sysfs
    
    I2C creates some sysfs nodes in the wrong places:  not as children of parent
    controllers, but as their peers (!).  This puts them into the right place
    always, instead of just when the adapter is on the platform bus.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6af586dc58820d052aa538abef4d4d15c2a9e33e
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Mon Jun 12 22:00:53 2006 +0200

    [PATCH] hwmon-vid: Add support for Intel Core and Conroe
    
    This patch adds support for two new VID codes, supporting Intel mobile Core
    processors and new Conroe based platforms.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e1a8e913f97e36cc5a23a24a8b4717e84998f13c
Author: Kaiwan N Billimoria <kaiwan@designergraphix.com>
Date:   Mon Jun 12 22:00:05 2006 +0200

    [PATCH] lm70: New hardware monitoring driver
    
    This driver implements support for the National Semiconductor LM70
    temperature sensor.
    
    The LM70 temperature sensor chip supports a single temperature sensor.
    It communicates with a host processor (or microcontroller) via an
    SPI/Microwire Bus interface.
    
    Communication with the LM70 is simple: when the temperature is to be sensed,
    the driver accesses the LM70 using SPI communication: 16 SCLK cycles
    comprise the MOSI/MISO loop. At the end of the transfer, the 11-bit 2's
    complement digital temperature (sent via the SIO line), is available in the
    driver for interpretation. This driver makes use of the kernel's in-core
    SPI support.
    
    Signed-off-by: Kaiwan N Billimoria <kaiwan@designergraphix.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 060b2f5584bf3bbb0268c83c24d5a506780fb702
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:55:28 2006 +0200

    [PATCH] hwmon: Fix the Kconfig header
    
    Hardware monitoring chips don't have to be on the I2C bus.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 02dd7ae2892e5ceff111d032769c78d3377df970
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:53:41 2006 +0200

    [PATCH] i2c-i801: Merge setup function
    
    i2c-i801: Merge setup function
    
    Merge i801_setup into i801_probe, as it doesn't make much sense to
    have them split. This lets us handle errors better. Christopher
    Hellwig had been suggesting this back in March 2003 when the driver
    was merged.
    
    Also drop two useless debug messages (revision and base address can be
    obtained from lspci, procfs or sysfs.)
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6dcc19dfbc84b2ea5428711b7a47146b5b1788bb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:53:02 2006 +0200

    [PATCH] i2c-i801: Better pci subsystem integration
    
    i2c-i801: Better pci subsystem integration
    
    Integrate the i2c-i801 driver better with the pci subsystem, by
    calling pci_{enable,disable}_device and requesting the I/O region
    by BAR rather than direct configuration space access.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 455f332323a17446fb66ea7b2f65f2751f1a3f06
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:52:02 2006 +0200

    [PATCH] i2c-i801: Cleanups
    
    i2c-i801: Cleanups
    
    Various cleanups to the i2c-i801 driver:
    * Fix documentation file and self file name references.
    * i801_setup can be marked __devinit.
    * Drop useless error local variable and label in i801_setup.
    * Avoid a double PCI configuration register write in some cases.
    * Use symbolic names for SMBHSTCFG bits.
    * Transmit the error code returned by i801_setup instead of forcing it
      to an arbitrary value.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 520e64d5c081c76b77b4ee87d241cd3e40edc43a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:51:20 2006 +0200

    [PATCH] i2c-i801: Remove PCI function check
    
    i2c-i801: Remove PCI function check
    
    Remove the PCI function number check when probing devices.
    This check is redundant, each function has a separate PCI device
    ID, so checking for that ID is sufficient.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d8db8f98562c1e358e42503bb920f75f15a5c6d2
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:50:11 2006 +0200

    [PATCH] i2c-i801: Remove force_addr parameter
    
    i2c-i801: Remove force_addr parameter
    
    Remove the force_addr module parameter. It doesn't appear to ever
    have been needed, and PCI resources shouldn't be arbitrarily
    changed anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 397e2f66a23469e2b8a13b764cb2d9ff2444ad5a
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:49:36 2006 +0200

    [PATCH] i2c-i801: Fix block transaction poll loops
    
    i2c-i801: Fix block transaction poll loops
    
    Two of the three poll loops have the poll and sleep swapped,
    causing an extra sleep to occur after the polled condition is
    fulfilled. In practice, this doubles the amount of sleep time for
    every block transaction.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 62aaa288ab0425b058fd337c5135a32e8c1aeace
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:48:08 2006 +0200

    [PATCH] scx200_acb: Documentation update
    
    Documentation update for the scx200_acb driver. Hopefully this will
    help future users.
    
    References:
    
    [lm-sensors] Support of i2c-nscacb (April, May 2005)
      http://lists.lm-sensors.org/pipermail/lm-sensors/2005-April/011756.html
      http://lists.lm-sensors.org/pipermail/lm-sensors/2005-May/012043.html
    
    [lm-sensors] making a geode i2c slave driver (April 2006)
      http://lists.lm-sensors.org/pipermail/lm-sensors/2006-April/015998.html
    
    Kernel bug #6445
      http://bugzilla.kernel.org/show_bug.cgi?id=6445
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9917392608c6d8b8952bce9f7b5867b1e9149235
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 12 21:46:04 2006 +0200

    [PATCH] scx200_acb: Mark scx200_acb_probe __init
    
    In i2c bus driver scx200_acb, function scx200_acb_probe can be
    tagged __init.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80cd3a8769c66203d55cdf635390bdcebd742091
Author: Jordan Crouse <jordan.crouse@amd.com>
Date:   Mon Jun 12 21:44:28 2006 +0200

    [PATCH] scx200_acb: Use PCI I/O resource when appropriate
    
    On the CS5535 and CS5536, the I/O resource is allocated through PCI,
    so use that instead of using the MSR backdoor.
    
    Signed-off-by: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 46f5ed753fac512f73069bd07455555b41a8a06e
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Mon Jun 12 21:42:20 2006 +0200

    [PATCH] i2c: Mark block write buffers as const
    
    The attached patch marks i2c_smbus_write_block_data() and
    i2c_smbus_write_i2c_block_data() buffers as const.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1ded969fb97fba33e7310ef95f0b3e3123d4d92a
Author: Peter Korsgaard <jacmet@sunsite.dk>
Date:   Mon Jun 12 21:40:53 2006 +0200

    [PATCH] i2c-ocores: Minor cleanups
    
    Minor cleanup to the i2c-ocores driver.
    
    Peter Korsgaard will maintain the i2c-ocores driver.
    
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b7c066044f4355d9fbe1ac45e03303b78d21e8d4
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Sun Jun 4 20:24:11 2006 +0200

    [PATCH] abituguru: Fix fan detection
    
    One of my testers had a problem where the driver only saw 2 of the 4 fan
    sensors his uGuru has, this fixes this.
     -accept 0x40 (bit 6) being high as a valid fan sensor setting for all fans
      not just fan 1, I have a feeling this bit indicates whether or not a fan is
      actually connected .
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a2392e0b907b9633c31be14ee75bb39fce348b01
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Sun Jun 4 20:23:01 2006 +0200

    [PATCH] abituguru: Review fixes
    
    Fixes to the Abit uGuru driver as requested in review by Jean Delvare:
     - exactly calculate the sysfs_names array length using macro
     - use snprintf when generating names to double check that the sysfs_names
       array does not overflow.
     - use ARRAY_SIZE and / or defines to determine number of loops in for loops
       instead of using hardcoded values.
     - In abituguru_probe(), refactor the error path leaving a single call to kfree
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f2b84bbcebfdbe4855bab532909eef6621999f9f
Author: Hans de Goede <j.w.r.degoede@hhs.nl>
Date:   Sun Jun 4 20:22:24 2006 +0200

    [PATCH] abituguru: New hardware monitoring driver
    
    New hardware monitoring driver for the Abit uGuru
    
    Signed-off-by: Hans de Goede <j.w.r.degoede@hhs.nl>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bed730821b74be4c7d135098842219473f7c8f2c
Author: Yuan Mu <ymu@winbond.com.tw>
Date:   Sun Jun 4 20:18:45 2006 +0200

    [PATCH] w83792d: Add missing data access locks
    
    Add missing data lock in w83792d driver to avoid unexpected
    data change.
    
    Signed-off-by: Yuan Mu <ymu@winbond.com.tw>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 53e2761bb2e4ed58913c266ad13e8c10692aec1e
Author: Yuan Mu <ymu@winbond.com.tw>
Date:   Sun Jun 4 20:18:05 2006 +0200

    [PATCH] w83792d: Fix setting the PWM value
    
    W83792D use pwm register low 4 bits to store PWM/DC value, bit 7
    is used to store fan PWM/DC mode. The store_pwm function did not
    convert the pwm input correctly, so it may change the fan mode
    when new value is set.
    
    This fix the problem. Change the "index" value of pwm*_mode
    and pwm* SENSOR_ATTR to simplify code.
    
    Signed-off-by: Yuan Mu <ymu@winbond.com.tw>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3dc26c600cbae8e8e7566136148aef5667e8342b
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 4 20:13:01 2006 +0200

    [PATCH] hwmon: Drop some maintainers entries
    
    I no more wish to be listed as the maintainer for the smsc47m1 and
    w83l785ts drivers. I have no test device, and people will fallback
    to me as the general hardware monitoring maintainer anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0a704681f37f8cd84fa10312728a39e9fcf2c2c5
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 4 20:10:55 2006 +0200

    [PATCH] hwmon: Fix a typo in the hdaps driver
    
    Fix a typo in the hdaps driver.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Acked-by: Robert Love <rml@novell.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 740e06a89fb905ee1979c57442c544afe51ed21c
Author: Jean Delvare <khali@linux-fr.org>
Date:   Mon Jun 5 20:31:20 2006 +0200

    [PATCH] hwmon: Sysfs interface documentation update, 2 of 2, take 2
    
    Reword and complete certain parts of the hwmon sysfs-interface
    documentation file. Hopefully this will make things clearer for new
    driver authors.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 057bc350992fa2ac31fcd2ff80add269bdf32a80
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Sun Jun 4 20:03:39 2006 +0200

    [PATCH] hwmon: Sysfs interface documentation update, 1 of 2
    
    This patch cleans up hwmon sysfs documentation file, plus introduces
    the description of DC/PWM selection for fan speed control.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 18f98b1e3147afdb51e545cc6ff2b016c7d088a7
Author: Peter Korsgaard <jacmet@sunsite.dk>
Date:   Sun Jun 4 20:01:08 2006 +0200

    [PATCH] i2c: New bus driver for the OpenCores I2C controller
    
    The following patch adds support for the OpenCores I2C controller IP
    core (See http://www.opencores.org/projects.cgi/web/i2c/overview).
    
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aee62305345863430a937af289b9bd080a100dac
Author: Jean Delvare <khali@linux-fr.org>
Date:   Sun Jun 4 19:59:57 2006 +0200

    [PATCH] i2c: Suggest N for rare devices in Kconfig
    
    Improve the Kconfig help text of the follwing i2c drivers:
    * busses/i2c-pca-isa.c
    * chips/pcf8574.c
    * chips/pcf8591.c
    These are hard to detect and building them into the kernel
    results in long delays at boot.
    
    March 2006, thread "I2C_PCA_ISA causes boot delays"
    http://marc.theaimsgroup.com/?l=linux-kernel&m=114360399415744&w=2
    
    April 2006, thread "i2c-related 1-minute hang during bootup"
    http://marc.theaimsgroup.com/?l=linux-kernel&m=114640992330721&w=2
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 177d165d7c2ec424007d6241a93d0cb83d953c51
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Tue Apr 25 14:24:46 2006 +0200

    [PATCH] HWMON: Trim VID values to correct number of bits
    
    Following patch trims the VID value to correct number of bits
    for each VRM.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0d0001dd956d4ae2c8739c2877fa660eec68ed5f
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 25 14:23:01 2006 +0200

    [PATCH] HWMON: Improve the help text for CONFIG_HWMON
    
    Improve the help text for CONFIG_HWMON to let the users know how they
    pick the right hardware monitoring driver(s) for their system.
    
    Also fix a couple typos in the related documentation file and improve
    some parts a bit.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 114cc0c0c1e98f0b8e205f91ae7b2471e0ad5325
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 25 14:22:14 2006 +0200

    [PATCH] HWMON: lm83: Documentation update
    
    One more motherboard confirmed to have an LM83 temperature sensor chip.
    Thanks to Steven Hardy for reporting.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9873964d6eb24bd0205394f9b791de9eddbcb855
Author: Charles Spirakis <bezaur@gmail.com>
Date:   Tue Apr 25 14:21:03 2006 +0200

    [PATCH] HWMON: w83791d: New hardware monitoring driver for the Winbond W83791D
    
    Add support for the w83791d sensor chip. The w83791d hardware is
    somewhere between the w83781d and the w83792d and this driver code
    is derived from the code that supports those chips.
    
    Signed-off-by: Charles Spirakis <bezaur@gmail.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4f507ea1560805b16cf4a4359e304ae0db0c2dcb
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 25 14:20:11 2006 +0200

    [PATCH] HWMON: hdaps: Update the list of supported systems
    
    Update the list of systems supported by the hdaps driver:
    * Add the "ThinkPad Z60m" entry, reported by Arkadiusz Miskiewicz.
    * Add the "ThinkPad H" entry, reported by Frank Gevaerts for some
      ThinkPad R52 models (1846AQG).
    * Drop the "ThinkPad X41 Tablet" entry, which looks redundant to me.
    And a comment update for good measure.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Cc: Arkadiusz Miskiewicz <arekm@maven.pl>
    Cc: Frank Gevaerts <frank@gevaerts.be>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5c7ae65899a4c5b05b6277f856018d1eeeb98907
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 25 14:18:16 2006 +0200

    [PATCH] I2C: i2c-nforce2: Add support for the nForce4 MCP51 and MCP55
    
    Add support for the new nForce4 MCP51 (also known as nForce 410 or
    430) and nForce4 MCP55 to the i2c-nforce2 driver. Some code changes
    were required because the base I/O address registers have changed in
    these versions. Standard BARs are now being used, while the original
    nForce2 chips used non-standard ones.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f9ba6c04ef1dcf16f7179b7883e9751baaac218e
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 25 13:37:25 2006 +0200

    [PATCH] I2C: i2c-piix4: Document the IBM problem more clearly
    
    Properly document on which systems the i2c-piix4 SMBus driver will
    refuse to load. Hopefully this will make it clearer for users, which
    were often wondering why their destop or server systems were detected
    as laptops.
    
    Closes bug #6429.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7aadb8f943f6f8fb48962099cfba05ad0518b0ac
Author: Jean Delvare <khali@linux-fr.org>
Date:   Tue Apr 25 13:29:26 2006 +0200

    [PATCH] I2C: i2c-piix4: Fix typo in documentation
    
    Fix i2c-piix4 documentation typo.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 54aaa1ca1022d95d854315743241bb6bf59f531f
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Tue Apr 25 13:06:41 2006 +0200

    [PATCH] I2C: i2c-piix4: Remove the fix_hstcfg parameter
    
    This patch removes the fix_hstcfg option from the driver and related
    SMBus Interrupt Select register magic because now we know what are
    valid values for this register. This patch updates the documentation
    and adds new IRQ mode check so we are sure not to miss any new
    "unusual" value.
    
    The PCI quirk for users of fix_hstcfg was not developed because the
    chipset lacks of subsystem ID registers and DMI is stated "To be
    filled". Impact to existing systems is minimal because the problem
    showed up on motherboards like 10 years back. On the other hand users
    of newer Serverworks and HT1000 systems won't be misleaded by the
    message suggesting to try the fix_hstcfg any more.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5e9f4f2e5a02bb6908278a819952aa31fffefaa2
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Tue Apr 25 13:04:54 2006 +0200

    [PATCH] I2C: m41t00: Add support for the ST M41T81 and M41T85
    
    This patch adds support for the ST m41t81 and m41t85 i2c rtc chips
    to the existing m41t00 driver.
    
    Since there is no way to reliably determine what type of rtc chip
    is in use, the chip type is passed in via platform_data.  The i2c
    address and square wave frequency are passed in via platform_data
    as well.  To accommodate the use of platform_data, a new header
    file include/linux/m41t00.h has been added.
    
    The m41t81 and m41t85 chips halt the updating of their time registers
    while they are being accessed.  They resume when a stop condition
    exists on the i2c bus or when non-time related regs are accessed.
    To make the best use of that facility and to make more efficient
    use of the i2c bus, this patch replaces multiple i2c_smbus_xxx calls
    with a single i2c_transfer call.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e931b8d8a428f87e6ea488d2fd80007bb66b3ea8
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Fri Mar 31 23:06:46 2006 +0200

    [PATCH] i2c: cleanup m41t00
    
    This patch does some cleanup to the m41t00 i2c/rtc driver including:
    - use BCD2BIN/BIN2BCD instead of BCD_TO_BIN/BIN_TO_BCD
    - use strlcpy instead of strncpy
    - some whitespace cleanup
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 02e0c5d5c2e00374b6808a42f8eea4ea9baaa216
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Thu Mar 23 16:48:09 2006 +0100

    [PATCH] i2c-piix4: Add ATI IXP200/300/400 support
    
    This patch adds the ATI IXP southbridges support to i2c-piix4,
    as it turned out those chips are compatible with it.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 400b48ecd95a7fac6b126042d37b7efe0202b582
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 23 16:46:47 2006 +0100

    [PATCH] hwmon: Add sysfs interface for individual alarm files
    
    Extend the sysfs interface of hardware monitoring chips, by adding
    individual alarm and beep files. Contrary to the old aggregated "alarms"
    and "beeps" files, individual files constitute a standard way to access
    the status information, making it finally possible to implement a
    chip-independant hardware monitoring chip access library (once all
    drivers have been added this new interface, that is.)
    
    If future drivers need more individual files, the interface will be
    extended as needed at the same time these drivers are merged into the
    kernel tree.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 568825c8ed3c902981ce908ed5693abb3c9ddf59
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 23 16:40:23 2006 +0100

    [PATCH] f71805f: Resource needs not be global
    
    The F71805F I/O resource structure needs not be a global variable,
    as the platform core allocs its own copy of it anyway.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 59ac83677f72ea2cc25b5426e7df9589aa7a5384
Author: Hartmut Rick <linux@rick.claranet.de>
Date:   Thu Mar 23 16:37:23 2006 +0100

    [PATCH] smsc47m192: New hwmon driver for SMSC LPC47M192/997
    
    New driver (smsc47m192) which supports voltage and temperature
    measurement features of SMSC LPC47M192 and LPC47M997 chips.
    
    Signed-off-by: Hartmut Rick <linux@rick.claranet.de>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a4589dbb4e2dc758d1aadb8b5d7e5a598ccb0341
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Mar 23 16:30:29 2006 +0100

    [PATCH] w83627ehf: Add alarms support
    
    Add alarms support for the W83627EHF/EHG hardware monitoring chip.
    
    This is based on an earlier patch from Rudolf Marek.
    
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf0676fe42c8e14c4c7ed5895e2fe5d17f779b43
Author: Rudolf Marek <r.marek@sh.cvut.cz>
Date:   Thu Mar 23 16:25:22 2006 +0100

    [PATCH] w83627ehf: Add voltage inputs support
    
    Add the voltage measuring support to W83627EHF. The code is based
    on the patch provided by Yuan Mu from Winbond.
    
    Signed-off-by: Yuan Mu <Ymu@winbond.com.tw>
    Signed-off-by: Rudolf Marek <r.marek@sh.cvut.cz>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 43cb7ebee2f478d3f987ad773d4e6b07fc23c631
Author: Jordan Crouse <jordan.crouse@amd.com>
Date:   Thu Mar 23 16:19:49 2006 +0100

    [PATCH] lm83: Add LM82 support
    
    Add LM82 temperature sensor support (similar to the LM83,
    but less featureful).
    
    Signed-off-by: Jordan Crouse <jordan.crouse@amd.com>
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 005b5e4d0c7795d2ec298c34c96cbe2c1e1902b0
Author: Uli Luckas <u.luckas@road-gmbh.de>
Date:   Thu Jun 22 16:49:54 2006 +0100

    [ARM] 3624/1: Report true modem control line states
    
    Patch from Uli Luckas
    
    This patch removes the fake return from serial_pxa_get_mctrl.
    
    Signed-off-by: Uli Luckas <u.luckas@road-gmbh.de>
    I just can't remember why this return was there.
    Being in the first column clearly indicates it was meant to be removed.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3f1244a2f8d3892f991b662cea49b2a0b4e0c115
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu May 11 10:03:30 2006 +0300

    IB/iser: iSER Kconfig and Makefile
    
    Kconfig and Makefile for iSER.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6461f64ab51e6929680df064b2682004a1548290
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu May 11 10:03:08 2006 +0300

    IB/iser: iSER handling of memory for RDMA
    
    This file contains the processing carried over an SG list associated with
    a SCSI command such that it can be registered with the IB verbs. The
    registration produces a network virtual address (VA) and a remote access
    key (RKEY or STAG in iSER spec notation) which are used by the target for
    its RDMA operation.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1cfa0a75dbef1d5bf687aacafabb023288f6b36a
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu May 11 10:02:46 2006 +0300

    IB/iser: iSER RDMA CM (CMA) and IB verbs interaction
    
    This file contains the low level interaction with the RDMA CM
    and the IB verbs, where iSER is consumer of both.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e85b24b5e7de9f507c6253183d089370f37618c5
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu May 11 10:02:19 2006 +0300

    IB/iser: iSER initiator iSCSI PDU and TX/RX
    
    This file contains the iSER initiator processing of iSCSI PDUs - controls,
    commands and data-outs along with processing of TX and RX completions.
    It interacts with the lower level iser code doing the memory registration
    and and the cma and verbs calls.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 65e7ae7bfc71219f13162b3bbad44e6471cd67f9
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu May 11 10:00:44 2006 +0300

    IB/iser: iSCSI iSER transport provider high level code
    
    This file contains the code that registeres with the iscsi transport manager
    and with the SCSI Mid Layer, where much of the provided functions to iSCSI and
    SCSI are implemented in libiscsi.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 49cd5382f629bde2aee9f817cefb271106dc47ee
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Thu May 11 10:00:21 2006 +0300

    IB/iser: iSCSI iSER transport provider header file
    
    iSER (iSCSI Extensions for RDMA) transport provider driver for the iSCSI
    initiator, whose other parts (under drivers/scsi) are scsi_transport_iscsi
    - the transport management module, iscsi_tcp - the TCP transport provider
    module and libiscsi - a kernel library (module) implementing functionality
    needed by both TCP and iSER transports. iSER is both a provider of the iSCSI
    transport api and a SCSI low level driver.
    
    This file contains internal data structures and non static service functions.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9b8efc0242777353d5d62bfaa7766ebf0b5598b4
Author: Roland Dreier <rolandd@cisco.com>
Date:   Thu Jun 22 07:47:27 2006 -0700

    IB/uverbs: Remove unnecessary list_del()s
    
    In ib_uverbs_cleanup_ucontext(), when iterating through the lists of
    objects, there's no reason to do list_del() to remove the objects,
    since both the objects and the lists that contain them are about to be
    freed anyway.  Since list_del() is a moderately big inline function,
    getting rid of this extra work saves quite a bit of .text:
    
    add/remove: 0/0 grow/shrink: 1/2 up/down: 3/-217 (-214)
    function                                     old     new   delta
    ib_uverbs_comp_handler                       225     228      +3
    ib_uverbs_async_handler                      256     255      -1
    ib_uverbs_close                              905     689    -216
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 183208284e3ab3816189fc0e23faf29675ce6c9f
Author: Krishna Kumar <krkumar2@in.ibm.com>
Date:   Thu Jun 22 07:47:27 2006 -0700

    IB/uverbs: Don't free wr list when it's known to be empty
    
    In ib_uverbs_post_send(), move the "out:" label after the loop that
    frees the list of work requests, since the only place that jumps there
    is before any work requests could possibly be added to the list.
    
    This removes a compile warning: "is_ud might be used uninitialized in
    this function".
    
    Signed-off-by: Krishna Kumar <krkumar2@in.ibm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 17ffc7ba6d7ea68b8d5f55a5ca1b87163e69720d
Author: Artem Bityutskiy <dedekind@sauron.oktetlabs.ru>
Date:   Thu Jun 22 18:15:48 2006 +0400

    [MTD] Initialize 'writesize'
    
    Signed-off-by: Artem Bityutskiy <dedekind@infradead.org>

commit 1bca9f2e5bd7f92fe4b34753e57bf4f47d3a2f01
Author: Jean Delvare <khali@linux-fr.org>
Date:   Thu Jun 22 14:24:31 2006 +0100

    Remove <linux/i2c-id.h> and <linux/i2c-algo-ite.h> from userspace export
    
    Do not export the following i2c header files to user space:
    
    * i2c-id.h: These IDs are internal to the kernel and user space
      does not need them.
    * i2c-algo-ite.h: The driver is broken and planned for removal, so
      let's not export it for now. The extra ioctl defined here can
      be standardized and moved to i2c-core/i2c-dev if really needed.
    
    Signed-off-by: Jean Delvare <khali@linux-fr.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1794c13002918c2216e2e11913eb299d071a5731
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu Jun 22 13:06:43 2006 +0200

    [MTD] NAND: ndfc fix address offset thinko
    
    The rework of the command handling in the nand driver
    led to wrong address setting in the command control
    function. Use the correct address again.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8b76a68c6caafef5a91cdc80958aecaca76a8896
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 22 10:30:56 2006 +0100

    [ARM] 3620/2: ixp23xx: add uengine loader support
    
    Patch from Lennert Buytenhek
    
    This patch allows the ixp2000 uengine loader that is already in the
    tree to also be used on the ixp23xx.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 744da2cb598639767ddcc90ca855771bc524fe76
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 22 10:30:55 2006 +0100

    [ARM] 3618/1: add defconfig for logicpd pxa270 card engine
    
    Patch from Lennert Buytenhek
    
    As it's slightly nontrivial to make it possible to build a single
    kernel image for both the mainstone and the logicpd pxa270 card engine,
    add a separate defconfig for the logicpd pxa270 card engine for now.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a059e33ce67cec5e990fdec43f242d3b06c60d1a
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 22 10:30:54 2006 +0100

    [ARM] 3617/1: ep93xx: fix slightly incorrect timer tick rate
    
    Patch from Lennert Buytenhek
    
    The tick rate of timers 1-3 isn't exactly 508 kHz as some parts of the
    relevant documentation claim, but more like 508.469 kHz (14.7456 MHz
    divided by 29.)
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f869afab8f36c5f8561557f74b4b9846719092da
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 22 10:30:53 2006 +0100

    [ARM] 3616/1: fix timer handler wrap logic for a number of platforms
    
    Patch from Lennert Buytenhek
    
    A couple of platforms aren't using the right comparison type in their
    timer interrupt handlers (as we're comparing two wrapping timestamps,
    we need a bmi/bpl-type comparison, not an unsigned comparison) -- this
    patch fixes them up.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 84b61f6d3ad8a5761e61d83076588f64a289a574
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 22 10:30:52 2006 +0100

    [ARM] 3615/1: ixp23xx: use platform devices for physmap flash
    
    Patch from Lennert Buytenhek
    
    Now that the physmap platform device rewrite is in, make the ixp23xx
    boards use platform devices for physmap flash.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 0967b5f0790cff737c86e9797cbbbdf420eb00f3
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Thu Jun 22 10:30:51 2006 +0100

    [ARM] 3614/1: ep93xx: use platform devices for physmap flash
    
    Patch from Lennert Buytenhek
    
    Now that the physmap platform device rewrite is in, make the ep93xx
    boards use platform devices for physmap flash.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ae2a120ce50e9dc8092f9bd4d76d8c8150a12c48
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Thu Jun 22 10:27:15 2006 +0100

    [ARM] 3621/1: fix compilation breakage for pnx4008
    
    Patch from Vitaly Wool
    
    pnx4008_defconfig fails to build:
    
    include/asm/hardware/debug-8250.S: Assembler messages:
    include/asm/hardware/debug-8250.S:12: Error: Macro with this name was already defined.
    
    This is due to senduart macro erroneously defined in include/asm-arm/arch-pnx4008/debug-macro.S. This patch removes it from that file.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b741483d7d8d86d215daf2a1f77bc3d3770746a6
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Thu Jun 22 10:26:21 2006 +0100

    [ARM] 3623/1: pnx4008: move GPIO-related defines to gpio.h
    
    Patch from Vitaly Wool
    
    This patch moves GPIO-related defines and static inline funcs from include/asm-arm/arch-pnx4008/pm.h to include/asm-arm/arch-pnx4008/gpio.h.
    Also, some more GPIO-related defines are added to include/asm-arm/arch-pnx4008/gpio.h as they are needed for the USB host driver (coming soon...)
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e9931b5da6247c18cbf4db8e9e924c980758f41a
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Thu Jun 22 10:26:20 2006 +0100

    [ARM] 3622/1: pnx4008: remove clk_use/clk_unuse
    
    Patch from Vitaly Wool
    
    clk_use/clk_unuse functions are no longer needed, so removing those from arch/arm/mach-pnx4008/clock.c.
    Also, the order of functions is rearranged a bit, to avoid forward declarations.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1a6be26d5b1a86f66ef60e5b73bae64d50873724
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 21 13:51:41 2006 +0100

    [ARM] Enable VFP to be built when non-VFP capable CPUs are selected
    
    Since we pass flags to the compiler to control code generation based
    on the least capable selected CPU, if we want to include VFP support,
    we must tweak the assembler flags to allow the VFP instructions.
    Moreover, we must not use the mrrc/mcrr versions since these will not
    be recognised by the assembler.
    
    We do not convert all instructions to the VFP-equivalent (yet) since
    binutils appears to barf on "fmrx rn, fpinst" and doesn't provide any
    other way (other than using the mrc equivalent) to encode this
    instruction - which is rather a problem when you have a VFP
    implementation which requires these instructions.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d6551e884cf66de072b81f8b6d23259462c40baf
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Wed Jun 21 13:31:52 2006 +0100

    [ARM] Add thread_notify infrastructure
    
    Some machine classes need to allow VFP support to be built into the
    kernel, but still allow the kernel to run even though VFP isn't
    present.  Unfortunately, the kernel hard-codes VFP instructions
    into the thread switch, which prevents this being run-time selectable.
    
    Solve this by introducing a notifier which things such as VFP can
    hook into to be informed of events which affect the VFP subsystem
    (eg, creation and destruction of threads, switches between threads.)
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 52ab3f3dc711eeccbfbcc5d4f5c5d9b9ff59650f
Merge: 43104f1... 98174e4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 21 18:10:19 2006 -0700

    Merge git://oss.sgi.com:8090/xfs-2.6
    
    * git://oss.sgi.com:8090/xfs-2.6: (43 commits)
      [XFS] Remove files from the build that are now unused.
      [XFS] Fix a Makefile issue related to exports.o handling.
      [XFS] Remove version 1 directory code.	Never functioned on Linux, just
      [XFS] Map EFSCORRUPTED to an actual error code, not just a made up one
      [XFS] Kill direct access to ->count in valusema(); all we ever use it for
      [XFS] Remove unneeded conditional code on NFS export interface related
      [XFS] Remove an incorrect use of unlikely() on a relatively likely code
      [XFS] Push some common code out of write path into core XFS code for
      [XFS] Remove unnecessary local from open_exec dmapi path.
      [XFS] Minor XFS documentation updates.
      [XFS] Fix broken const use inside local suffix_strtoul routine.
      [XFS] Fix nused counter.  It's currently getting set to -1 rather than
      [XFS] Fix mismerge of the fs_writable cleanup patch causing a freeze/thaw
      [XFS] Fix up debug code so that bulkstat wont generate thousands of
      [XFS] Remove unused parameter from di2xflags routine.
      [XFS] Cleanup a missed porting conversion, and freezing.
      [XFS] Resolve a namespace collision on remaining vtypes for FreeBSD
      [XFS] Resolve a namespace collision on vnode/vnodeops for FreeBSD porters.
      [XFS] Resolve a namespace collision on vfs/vfsops for FreeBSD porters.
      [XFS] statvfs component of directory/project quota support, code
      ...

commit 4ec223d02f4d5f5a3129edc0e3d22550d6ac8a32
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Jun 21 15:18:34 2006 -0700

    [CPUFREQ] Fix ondemand vs suspend deadlock
    
    Rootcaused the bug to a deadlock in cpufreq and ondemand. Due to non-existent
    ordering between cpu_hotplug lock and dbs_mutex. Basically a race condition
    between cpu_down() and do_dbs_timer().
    
    cpu_down() flow:
    * cpu_down() call for CPU 1
    * Takes hot plug lock
    * Calls pre down notifier
    *     cpufreq notifier handler calls cpufreq_driver_target() which takes
          cpu_hotplug lock again. OK as cpu_hotplug lock is recursive in same
          process context
    * CPU 1 goes down
    * Calls post down notifier
    *     cpufreq notifier handler calls ondemand event stop which takes dbs_mutex
    
    So, cpu_hotplug lock is taken before dbs_mutex in this flow.
    
    do_dbs_timer is triggerred by a periodic timer event.
    It first takes dbs_mutex and then takes cpu_hotplug lock in
    cpufreq_driver_target().
    Note the reverse order here compared to above. So, if this timer event happens
    at right moment during cpu_down, system will deadlok.
    
    Attached patch fixes the issue for both ondemand and conservative.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 43104f1da88f5335e9a45695df92a735ad550dda
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 20 15:14:07 2006 -0700

    [PATCH] USB: only make /sys/class/usb show up when there is something in it
    
    Now /sys/class/usb is dynamically created when we have something to put
    in it, and removed when all devices go away.
    
    Just trying to cut down on the clutter in sysfs...
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bd00949647ddcea47ce4ea8bb2cfcfc98ebf9f2a
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 20 13:09:50 2006 -0700

    [PATCH] USB: convert usb class devices to real devices
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c182274ffe1277f4e7c564719a696a37cacf74ea
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Mon Jun 19 23:59:31 2006 -0700

    [PATCH] USB: move usb_device_class class devices to be real devices
    
    This moves the usb class devices that control the usbfs nodes to show up
    in the proper place in the larger device tree.
    
    No userspace changes is needed, this is compatible due to the symlinks
    generated by the driver core.
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9bde7497e0b54178c317fac47a18be7f948dd471
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 14 12:14:34 2006 -0700

    [PATCH] USB: make endpoints real struct devices
    
    This will allow for us to give endpoints a major/minor to create a
    "usbfs2-like" way to access endpoints directly from userspace in an
    easier manner than the current usbfs provides us.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 36679ea59846d8f34a48f71ca1a37671ca0ad3c5
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 14 12:14:34 2006 -0700

    [PATCH] USB: make usb_create_ep_files take a struct device
    
    Instead of a kobject, will make things easier in the future (don't know
    what I was thinking when I did this originally...)
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 84412f6291b50690febd81899e46f0f0ef7a13e0
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 14 12:14:34 2006 -0700

    [PATCH] USB: move the endpoint specific sysfs code to it's own file
    
    This makes it easier to modify in the future without touching anything else.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ae0dadcf0f912cbab2ac84caa437454620bf71b2
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jun 13 10:04:34 2006 -0700

    [PATCH] USB: move <linux/usb_input.h> to <linux/usb/input.h>
    
    Move <linux/usb_input.h> to <linux/usb/input.h> and remove some
    redundant includes.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 325a4af60dc945bf2da9cbcdbabb276e312b297c
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jun 13 09:59:32 2006 -0700

    [PATCH] USB: move hardware-specific <linux/usb_*.h> to <linux/usb/*.h>
    
    This moves header files for controller-specific platform data
    from <linux/usb_XXX.h> to <linux/usb/XXX.h> to start reducing
    some clutter.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a8c28f2389942bab376e39351d27525499630248
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jun 13 09:57:47 2006 -0700

    [PATCH] USB: move <linux/usb_cdc.h> to <linux/usb/cdc.h>
    
    This moves <linux/usb_cdc.h> to <linux/usb/cdc.h> to reduce some of the
    clutter of usb header files.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7e27f18c8a37ffb95f677e4e9c3cca818a3e9eb1
Author: David Brownell <david-b@pacbell.net>
Date:   Tue Jun 13 09:54:40 2006 -0700

    [PATCH] USB: whitespace removal from usb/gadget/ether
    
    This removes extraneous whitespace from the Ethernet/RNDIS gadget driver.
    It's all space-at-EOL, spaces-before-tabs, or tabs-then-spaces.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d5681fe8110e1169902df37a8fd8bd01c2b7810e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jun 13 09:59:32 2006 -0400

    [PATCH] USB: unusual_devs entry for Nokia N80
    
    Here is a patch (as720) adding an unusual_devs entry for the Nokia N80
    mobile phone.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit db54a53d26322e978e66482208afabaab9cd0752
Author: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
Date:   Mon Jun 12 22:46:20 2006 -0300

    [PATCH] usbserial: Fixes wrong return values.
    
    Some usbserial functions returns -EINVAL if the port doesn't exist or if
    it's not opened. However, the right error code for such situations is
    -ENODEV.
    
    Signed-off-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 043ea18b2e145c4c9cb3c30757a65fe0f1678a35
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Mon May 29 03:34:00 2006 -0700

    [PATCH] usb gadget: update pxa2xx_udc.c driver to fully support IXP4xx platform
    
    This patch adds IXP465 into the list of known devices and
    adds IXP425 and IXP465 to the list of devices that have cfr. This
    is not described in the hardware documentation, but without
    it driver won't work.
    
    Workaround (#if 1) that seemed to get rid of lost
    status irqs is disabled for IXP4XX as it caused freezes
    during testing of control messages. No lost irqs are
    visible on IXP4XX.
    
    Driver survived tests running over night without any
    visible problems.
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 44df45a09c7c20bbd641b1c30b6406d54ba7e2c8
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Mon May 29 03:34:00 2006 -0700

    [PATCH] usb gadget: fix compile errors
    
    This patch fixes compile errors when pxa2xx_udc is to be compiled
    for ixp4xx platform.
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7c0642c196beb41b7770571b8a61151bdd418bbe
Author: Milan Svoboda <msvoboda@ra.rockwell.com>
Date:   Mon May 29 03:34:00 2006 -0700

    [PATCH] usb gadget: allow drivers support speeds higher than full speed
    
    This patch removes limitation which prevents use of drivers that support
    speeds different that full speed.
    
    Signed-off-by: Milan Svoboda <msvoboda@ra.rockwell.com>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ca094f1186ef50ef8983325072cdc4f051830f13
Author: Franck Bui-Huu <vagabon.xyz@gmail.com>
Date:   Wed Jun 14 10:47:18 2006 +0200

    [PATCH] USB: gadget-serial: do not save/restore IRQ flags in gs_close()
    
    As pointed out by David Brownell, we know that IRQs are never
    blocked when calling gs_close function. So the save/restore
    IRQ flags are pointless.
    
    Signed-off-by: Franck Bui-Huu <vagabon.xyz@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 943e1b4d60dc7acfabe2ebad31189bcb3b853688
Author: Franck Bui-Huu <vagabon.xyz@gmail.com>
Date:   Wed Jun 14 10:29:21 2006 +0200

    [PATCH] USB: gadget-serial: fix a deadlock when closing the serial device
    
    When closing the device, the driver acquires/release twice the
    port lock before/after waiting for the data to be completely
    sent. Therefore it will dead lock.
    
    This patch fixes it and also uses the generic scheduler services
    for waiting for an event.
    
    Signed-off-by: Franck Bui-Huu <vagabon.xyz@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b059c81af7a1759a911cfc20ce8a4bf47c435830
Author: Frank Gevaerts <frank.gevaerts@fks.be>
Date:   Wed Jun 14 15:52:05 2006 +0200

    [PATCH] USB Serial: clean tty fields on failed device open
    
    If either the driver's open() method or try_module_get() fails, we need to
    set 'tty->driver_data' and 'port->tty' to NULL in serial_open(), otherwise
    we'll get an OOPS in usb_device_disconnect() when the device is disconnected.
    
    Signed-off-by: Frank Gevaerts <frank.gevaerts@fks.be>
    Acked-by: Luiz Fernando N. Capitulino <lcapitulino@mandriva.com.br>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4186c29ca199063facdda49851b4c863699687b1
Author: Matt Reimer <mattjreimer@gmail.com>
Date:   Wed Jun 7 11:46:13 2006 -0700

    [PATCH] USB: trivial DEBUG message correction in gadget ether driver
    
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4255e6f6d98ad092c27fa2b83ac314cbe8a0c56f
Author: Oliver Bock <o.bock@fh-wolfenbuettel.de>
Date:   Sat Jun 10 00:42:19 2006 +0200

    [PATCH] USB: new driver for Cypress CY7C63xxx mirco controllers
    
    This is a new driver for the Cypress CY7C63xxx mirco controller series.
    It currently supports the pre-programmed CYC63001A-PC by AK Modul-Bus
    GmbH.  It's based on a kernel 2.4 driver (cyport) by Marcus Maul which I
    ported to kernel 2.6 using sysfs. I intend to support more controllers
    of this family (and more features) as soon as I get hold of the required
    IDs etc. Please see the source code's header for more information.
    
    Signed-off-by: Oliver Bock <o.bock@fh-wolfenbuettel.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d9ac2cfc3aaf3bc37da4192d3edfa11d2ad2e96f
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon Jun 12 20:09:39 2006 -0700

    [PATCH] USB: update usbmon.txt
    
    Fix up the documentation. Apparently, I left unedited copy-paste results
    in examples. Also, Alan helped me to improve the most confusing parts.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 12e72feab5d9a23107f245b0f241a2484cbb5a4e
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Fri Jun 9 22:03:32 2006 -0700

    [PATCH] USB: implement error event in usbmon
    
    Implement the "error" event in usbmon.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5b1c674d223eef6c6494be8be91e9e3a3054817e
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Fri Jun 9 20:10:10 2006 -0700

    [PATCH] USB: update usbmon, fix glued lines
    
    This update contains one bug fix: some lines can come out truncated,
    because of the safety cutoff. This happened because I forgot to update
    the size when status packets began to be printed.
    
    The rest is:
     - Comments updates
     - Allow snooping with pkmap on x86_64, which is cache-coherent
     - Enlarge event buffers (certainly we can have a couple of pages)
     - Add event counter
    
    First touch upon usbmon for 2.6.18.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4bc203d997c0dc1eada4cc9681372c2f7a456c46
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Tue Jun 6 18:18:33 2006 -0700

    [PATCH] USB: io_edgeport touch-up
    
    Al Borchers suggested to do this in his review of my previous patch.
    I guess that I skipped this initially because of my visceral dislike
    of sizeof(data). But in this case it seems well localized.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 34ab86e140e9810d6c5162971b6dcf01fcc0f11c
Author: Timothy Sipples <Timothy.Sipples@us.ibm.com>
Date:   Fri Jun 16 20:42:59 2006 +0900

    [PATCH] airprime.c: add Kyocera Wireless KPC650/Passport support
    
    Adds vendor & product IDs to drivers/usb/serial/airprime.c for Kyocera
    Wireless KPC650/Passport EV-DO/1xRTT PC Cards.
    
    Signed-off-by: Timothy Sipples <Timothy.Sipples@us.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c5e3b741a3fec6077a480aa65ded29d79ded8898
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jun 5 12:28:57 2006 -0400

    [PATCH] UHCI: Improve FSBR-off timing
    
    This patch (as707) improves the FSBR operation in uhci-hcd by turning it
    off more quickly when it isn't needed.  FSBR puts a noticeable load on a
    computer's PCI bus, so it should be disabled as soon as possible when it
    isn't in use.  The patch leaves it running for only 10 ms after the last
    URB stops using it, on the theory that this should be long enough for a
    driver to submit another URB if it wants keep FSBR going.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e323de46e83b6df2f330651907ac823f8d53308a
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon Jun 5 12:21:30 2006 -0400

    [PATCH] UHCI: remove hc_inaccessible flag
    
    This patch (as706) removes the private hc_inaccessible flag from
    uhci-hcd.  It's not needed because it conveys exactly the same
    information as the generic HCD_FLAG_HW_ACCESSIBLE bit.
    
    In its place goes a new flag recording whether the controller is dead.
    The new code allows a complete device reset to resurrect a dead
    controller (although usbcore doesn't yet implement such a facility).
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit be3cbc5f87d4b1fbd714644b6824ce4eb229f372
Author: David Brownell <david-b@pacbell.net>
Date:   Mon Jun 5 12:16:39 2006 -0400

    [PATCH] UHCI: various updates
    
    This patch (as705) contains a small set of updates for uhci-hcd written
    mostly by Dave Brownell:
    
      * Root hub suspend messages come out labeled as root hub messages;
        PCI messages should only come out when the pci device suspends.
    
      * Rename the reset() method to better match its init() role
    
      * Behave more like the other HCDs by returning -ESHUTDOWN for root-hub
        suspend/resume errors.
    
      * When an URB fails, associate the message with the usb device not
        the host controller (it still hides endpoint and direction)
    
    From: David Brownell <david-b@pacbell.net>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ae671813affd947d2f21ff8e3cd329e466ee85b2
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue Jun 6 15:19:17 2006 -0400

    [PATCH] usb-storage: unusual_devs entry for Nikon DSC D70s
    
    This patch (as704) adds an unusual_devs entry for the Nikon DSC D70s,
    which uses a different Product ID from the D70.  It also moves the entry
    for the DSC E2000 up in the list, to preserve the numerical ordering.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5c218e3b86510f9685bfae5b0d2d7cc8468056c1
Author: Rene Rebe <rene@exactcode.de>
Date:   Sun Jun 4 11:39:09 2006 +0200

    [PATCH] USB: Add Apple MacBook product IDs to usbhid
    
    This adds the Apple MacBook product IDs for the Fn translation
    to the usbhid.
    
    Signed-off-by: Rene Rebe <rene@exactcode.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit dfbaa7d8a4056436b6a170625d64986ebb648486
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 3 23:58:55 2006 +0100

    [PATCH] USB: EHCI on non-Au1200 build fix
    
    Including ehci-au1xxx.c on a non-Au1200 Alchemy only to have it throw
    an error is stupid.
    
    From: Ralf Baechle <ralf@linux-mips.org>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bfd5df3c0cf65bdf10a3a00baff036cb096140f6
Author: Chris Lund <docmax@gmail.com>
Date:   Sat Jun 3 13:58:19 2006 -0700

    [PATCH] USB: free allocated memory on io_edgeport startup memory failure
    
    While an Edgeport is allocating individual port structures, if kmalloc
    returns NULL, the serial structure is freed and -ENOMEM, but the ports
    allocated before the failure are not freed.  This patch addresses that
    condition.
    
    Signed-off-by: Christopher Lund <docmax@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 14f76cc7ab75b1c9db036dcd6b247e0dcc8952be
Author: Matthias Urlichs <smurf@smurf.noris.de>
Date:   Fri Jun 2 11:48:56 2006 +0200

    [PATCH] USB: new devices for the Option driver
    
    This patch extends the "option" driver with a few more devices, some of
    which are actually connected to USB the "right" way -- as opposed to
    doing it via PCMCIA and OHCI.
    
    Signed-Off-By: Matthias Urlichs <smurf@debian.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 786dc1d3d7333f269e17d742886eac2188a2d9cc
Author: Philippe Retornaz <couriousous@mandriva.org>
Date:   Thu Jun 1 20:48:46 2006 -0700

    [PATCH] usb: drivers/usb/core/devio.c dereferences a userspace pointer
    
    See http://bugzilla.kernel.org/show_bug.cgi?id=6617.
    
    This function dereference a __user pointer.
    
    Signed-off-by: Philippe Retornaz <couriousous@mandriva.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6ad07129a8ed2e13dcd7e6313c201c32bcf7cc32
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Jun 1 13:59:16 2006 -0400

    [PATCH] usbcore: recovery from Set-Configuration failure
    
    This patch (as703) improves the error handling when a Set-Configuration
    request fails.  The old interfaces are all unregistered before the
    request is sent, and if the request fails then we don't know what config
    the device is using.  So it makes no sense to leave actconfig pointing
    to the old configuration with its invalid interfaces.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit df9a1f482d1252045210f50048911e2efba61e62
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Jun 1 13:55:28 2006 -0400

    [PATCH] usbhid: use usb_reset_composite_device
    
    This patch (as702) makes usbhid use the new usb_reset_composite_device
    API.  Now HID interfaces can coexist with other interfaces on the same
    device, and a reset can safely be requested by any of the drivers.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 47104b0dd32cec467574822b0dc3517b3de3f0ad
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Jun 1 13:52:56 2006 -0400

    [PATCH] usb-storage: use usb_reset_composite_device
    
    This patch (as701) modifies usb-storage to take advantage of the new
    usb_reset_composite_device() API.  Now we will be able to safely request
    port resets even if other drivers are bound to a mass-storage device.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7de18d8bf4b470752e799e219b38b6dff4b49993
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Jun 1 13:37:24 2006 -0400

    [PATCH] USB hub: use usb_reset_composite_device
    
    This patch (as700) modifies the hub driver to take advantage of the new
    usb_reset_composite_device API.  The existing code had special-case
    calls stuck into usb_reset_device, just before and after the reset.
    With the new version there's no need for special-case stuff; it all
    happens naturally in the form of pre_reset and post_reset notifications.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 79efa097e75018a2918155f343f0e08e61ee8a8c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Jun 1 13:33:42 2006 -0400

    [PATCH] usbcore: port reset for composite devices
    
    This patch (as699) adds usb_reset_composite_device(), a routine for
    sending a USB port reset to a device with multiple interfaces owned by
    different drivers.  Drivers are notified about impending and completed
    resets through two new methods in the usb_driver structure.
    
    The patch modifieds the usbfs ioctl code to make it use the new routine
    instead of usb_reset_device().  Follow-up patches will modify the hub,
    usb-storage, and usbhid drivers so they can utilize this new API.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit efcaa20525fde82bbb4fb8cd9e9016f6fabc6509
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 30 20:49:29 2006 -0700

    [PATCH] USB: cdc_ether: recognize olympus r1000 (fix regression)
    
    Earlier work splitting the "usbnet" driver out into a core plus driver
    modules was missing a blacklist entry for the Olympus R-1000; it must
    not use the CDC Ethernet driver, only the "zaurus" support works with
    it.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d5ce1379be9c79d4bcf201c20c5cc87bb2bc973c
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Thu Jun 1 20:48:45 2006 -0700

    [PATCH] USB: negative index in drivers/usb/host/isp116x-hcd.c
    
    From: Eric Sesterhenn <snakebyte@gmx.de>
    
    This fixes coverity Bug #390.
    
    With the following code
    
    	ret = ep->branch = balance(isp116x, ep->period, ep->load);
    	if (ret < 0)
    		goto fail;
    
    the problem is that ret and balance are of the type int, and ep->branch is u16.
    so the int balance() returns gets reduced to u16 and then converted to an int again,
    which removes the sign. Maybe the following little c program can explain it better:

commit b10cee9d035db54d0bf5a9f9fa622dcfc3f740c6
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Wed May 31 11:21:52 2006 -0700

    [PATCH] USB: Add Sierra Wireless MC5720 ID to airprime.c
    
    Recognize the Sierra Wireless MC5720.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 09fd6bc8b453c9215e81911cbb6882556aa03639
Author: Stuart MacDonald <stuartm@connecttech.com>
Date:   Wed May 31 13:28:40 2006 -0400

    [PATCH] USB: Whiteheat: fix firmware spurious errors
    
    Attached patch fixes spurious errors during firmware load.
    
    Signed-off-by: Stuart MacDonald <stuartm@connecttech.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 069e8a65cd7970b15672825541be59218d9a8a0f
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri May 26 13:17:09 2006 -0700

    [PATCH] Driver for Apple Cinema Display
    
    This is a driver to control the brightness of an Apple Cinema Display over
    USB.  It updates the local brightness value if the user presses a button on
    the display.
    
    Signed-off-by: Michael Hanselmann <linux-kernel@hansmi.ch>
    Cc: Oliver Neukum <oliver@neukum.org>
    Cc: Paul Mackerras <paulus@samba.org>
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit eb79b4fda4654eaa7e6421ad41b0a75c7b4f0608
Author: Ian Abbott <abbotti@mev.co.uk>
Date:   Tue May 30 12:36:30 2006 +0100

    [PATCH] USB: ftdi_sio: add support for Yost Engineering ServoCenter3.1
    
    This patch adds support for Yost Engineering Inc's ServoCenter 3.1 USB
    product to the ftdi_sio driver's device ID table.  The PID was supplied
    by Aaron Prose of Yost Engineering on the ftdi-usb-sio-devel list.  The
    PID 0xE050 matches the Windows INF files for this device.
    
    Signed-off-by: Ian Abbott <abbotti@mev.co.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 633a7ecf89587879161179ac4f5a03722626866f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Tue May 30 10:21:14 2006 -0400

    [PATCH] usbhid: Remove unneeded blacklist entries
    
    Now that usbhid automatically applies HID_QUIRK_NOGET to keyboards and
    mice, we no longer need the blacklist entries that were present for no
    other purpose.  This patch (as698) removes them.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Acked-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3f8f4a18f4f76a67fe5b80da1d3a3940e41a14a8
Author: Giridhar Pemmasani <giri@lmc.cs.sunysb.edu>
Date:   Tue May 30 10:12:30 2006 -0400

    [PATCH] usbcore: Fix broken RNDIS config selection
    
    RNDIS devices don't get configured owing to a typo in
    choose_configuration().  This patch from Giridhar Pemmasani fixes the
    typo.
    
    From: Giridhar Pemmasani <giri@lmc.cs.sunysb.edu>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1fbe75e12f0dd567c86533e13ba2605f3ecad2e1
Author: Daniel Drake <dsd@gentoo.org>
Date:   Fri May 26 21:36:28 2006 +0100

    [PATCH] USB: print message when device is rejected due to insufficient power
    
    2.6.16 introduces USB power budgeting in the Linux kernel, and since then, a
    fair number of users have observed that some of their devices no longer work in
    unpowered hubs (this is not a bug, the devices claim that they need more than
    100mA).
    
    The very least we can do is print an informational message to the kernel log
    when this happens, otherwise it is not at all clear why the device was not
    accepted.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 955a260829b5848fa90721678bab003234c93356
Author: David Brownell <david-b@pacbell.net>
Date:   Fri May 26 10:17:03 2006 -0700

    [PATCH] USB: more pegasus log spamming removed
    
    Remove more log spamming from pegasus:  stop talking to the device once we
    see ENODEV reported.  It may take a while before khubd notifies us.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b5600339cd37472455d99b39963f3106411070b6
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu May 25 20:08:50 2006 -0700

    [PATCH] ub: random cleanups
    
    Remove some silly messages and cast in stone "temporary" messages which
    we keep around. Also, I am hesitant to remove the initialization retries
    without having the hardware to test (anyone who was at KS04 has a spare?)
    
    Signed-off-by: Pete Zaitcev <zaitcev@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 688e9fb1bbdd4e5a51b5030b7f9b1c811fd5e5e3
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Thu May 25 20:04:54 2006 -0700

    [PATCH] ub: atomic add_disk
    
    <zaitcev> I am taling about this: "if (disk->flags & GENHD_FL_UP) del_gendisk(disk);"
    <zaitcev> If del_gendisk() undoes add_disk() like viro just said, why is it conditional?
    <viro> huh?
    <viro> add_disk() sets the damn flag
    <zaitcev> So, I should not need to check ever
    <viro> so the above is "if I've called add_disk(), call gendisk()"
    <viro> which might be what you want, of course
    <viro> but usually you know if you'd done add_disk() on that puppy anyway
    
    In ub, nobody upstream should ever see half-constructed disks before
    they were passed to add_disk. To that end, only add the struct lun to
    the list on the path of no return. With that fix in place, we do
    not need to test GENHD_FL_UP.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2f8ad9a1b91bc6856860a2fea8b07e0c82c0ad0a
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Wed May 24 11:04:04 2006 -0700

    [PATCH] USB: rmmod pl2303 after -28
    
    Wait for the scheduled work to finish before freeing memory, prevent oops.
    http://bugzilla.kernel.org/show_bug.cgi?id=6596
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ba47f66bd9fc451e9ce88f291e057b2f4910d01c
Author: Dan Streetman <ddstreet@ieee.org>
Date:   Wed May 24 09:39:16 2006 -0700

    [PATCH] improved TT scheduling for EHCI
    
    This updates the EHCI driver by adding an improved scheduler for the
    transaction translators, found in USB 2.0 hubs and used for low and
    full speed devices.
    
     - adds periodic_tt_usecs() and some helper functions, which does
       the same thing that "periodic_usecs" does, except on the other
       side of the TT, i.e.  it calculates the low/fullspeed bandwidth
       usage instead of highspeed.
    
     - adds a tt_available() function which is the new implementation
       of what tt_no_collision() does ... while tt_no_collision() ensures
       that each TT handles only 1 periodic transfer at a time (a very
       pessimistic approach) this version instead tracks bandwidth and
       allows each TT to handle as many transfers as will fit on each TT's
       downstream bus (closer to best-case).
    
    The new scheduler is selected by a config option, marked as EXPERIMENTAL
    so it can be tested (and more broadly reviewed) for a while until it
    seems safe to remove the original scheduler.
    
    Signed-off-by: Dan Streetman <ddstreet@ieee.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3428cc43d23f125dcb31c981aa91535dd3c4cb0d
Author: Franck Bui-Huu <fbh.work@gmail.com>
Date:   Wed May 24 16:57:28 2006 +0200

    [PATCH] usb-storage: get rid of the timer during URB submission
    
    This patch uses completion timeout instead of a timer to implement
    a timeout when submitting an URB.
    
    It also put the task in interruptible state instead of an
    uninterruptible one while waiting for the completion.
    
    Signed-off-by: Franck Bui-Huu <vagabon.xyz@gmail.com>
    Signed-off-by: Matthew Dharm <mdharm-usb@one-eyed-alien.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 80b47853b19114dd53e83e15bf1db3e183a66824
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon May 22 22:05:17 2006 -0700

    [PATCH] USB: Syntax cleanup for pl2303 (trailing backslash)
    
    Remove the silly trailing backslash.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6f065f70c0c1bfb0b8212438cee21e68aa155887
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon May 22 22:02:32 2006 -0700

    [PATCH] USB: Improve Kconfig comment for mct_u232
    
    Add a couple of supported devices into the help message.
    
    It's a long story... I promised this comment changed to a user long ago,
    so I'd like to have that promise kept. In reality though, nobody is
    likely to read this anyway.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf2c7481d2ff7f0c266de873b2fe93883e9782f9
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon May 22 21:58:49 2006 -0700

    [PATCH] USB serial: encapsulate schedule_work, remove double-calling
    
    I'm going to throw schedule_work away, it's retarded. But for starters,
    let's have it encapsulated.
    
    Also, generic and whiteheat were both calling usb_serial_port_softint
    and scheduled work. Only one was necessary.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ad93375a30334cd97a61f7076d242e1cfdb66abc
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Mon May 22 21:49:44 2006 -0700

    [PATCH] usb: io_edgeport, cleanup to unicode handling
    
    Clean up the unicode handling in io_edgeport. Make get_string size-limited.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9da2150f59e885d88b9eabe0a677f0fa4962f7b4
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon May 22 16:47:13 2006 -0400

    [PATCH] usbtest: report errors in iso tests
    
    This patch (as693b) makes the usbtest driver report errors in the
    isochronous bulk transfer tests instead of always returning 0.  As an
    arbitrary cutoff, an error is returned if more than 10% of the packet
    transfers fail.  It also stops a test immediately upon receiving an URB
    submission error.
    
    For a test harness, it's especially important to report when errors occur!
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0ae4ea8092e1277cfca07cade7eaba5f594076c1
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon May 22 12:27:38 2006 -0400

    [PATCH] gadgetfs: fix memory leaks
    
    This patch (as692) fixes a few memory leaks in some unimportant error
    pathways of the gadgetfs driver.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Acked-by: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 83196b52053068f0240371ad2efd9d6ad685bbeb
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon May 22 12:26:31 2006 -0400

    [PATCH] gadgetfs: fix AIO interface bugs
    
    This patch (as691) fixes a few errors in the AIO interface for the
    gadgetfs driver.  Now requests will complete properly instead of hanging.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 212a4b4ed1ea9a969f3f967b3e3a8075ad1cb4de
Author: Vitja Makarov <vitja.makarov@gmail.com>
Date:   Wed May 31 00:40:06 2006 +0400

    [PATCH] USB: new cp2101 device
    
    By the way I have to ask you to add new (vid,pid) pair to cp2101 driver.
    
    This device is argussoft's avr in-system programmer AS3M,
    http://atmel.argussoft.ru/hard.htm
    it's based on cp2101 chip and works pretty well with the linux driver.
    
    It could be used with argussoft's `asisp1109.exe'
    (http://atmel.argussoft.ru/download/software/as-tools.soft/asisp.zip)
    tool run under wine.
    
    Signed-off-by: Vitja Makarov <vitja.makarov@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 782a7a632e4b0581ade665e3d89ee97c8db0f441
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Fri May 19 13:20:20 2006 -0700

    [PATCH] USB: add usb_interrupt_msg() function for api completeness.
    
    Really just a wrapper around usb_bulk_msg() but now it's documented
    much better.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit caa2a1226741e023a103e091a7f6dce7c42e82ee
Author: Franck Bui-Huu <vagabon.xyz@gmail.com>
Date:   Mon May 15 19:23:53 2006 +0200

    [PATCH] Fix a deadlock in usbtest
    
    ctrl_complete functions acquires ctx->lock and tries to unlink
    all queued urbs in case of errors through usb_unlink_urb func.
    In its turn usb_unlink_urb calls, through the hcd driver,
    usb_hcd_giveback_urb which calls ctrl_complete again. At this
    time, ctx->lock is already taken by the same function.
    
    Signed-off-by: Franck Bui-Huu <vagabon.xyz@gmail.com>
    Cc: David Brownell <david-b@pacbell.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c8155cc5d839838f8425dbea568fc537337176a7
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 19 16:52:35 2006 -0400

    [PATCH] UHCI: remove ISO TDs as they are used
    
    This patch (as690) does the same thing for ISO TDs as as680 did for
    non-ISO TDs: free them as they are used rather than all at once when an
    URB is complete.  At the same time it fixes a minor buglet (I'm not
    aware of it ever affecting anyone): An ISO TD should be retired when its
    frame is over, regardless of whether or not the hardware has marked it
    inactive.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit caf3827a65af476c71eaeb79636869a4ab128d48
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 19 16:44:55 2006 -0400

    [PATCH] UHCI: store the period in the queue header
    
    This patch (as689) stores the period for periodic transfers (interrupt
    and ISO) in the queue header.  This is necessary for proper bandwidth
    tracking (not yet implemented).  It also makes the scheduling of ISO
    transfers a bit more rigorous, with checks for out-of-bounds frame
    numbers.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 10b8e47d6b32bfba22874354c62770cb4e42aa6c
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 19 16:39:52 2006 -0400

    [PATCH] UHCI: fix race in ISO dequeuing
    
    This patch (as688) fixes a small race in uhci-hcd.  Because ISO queues
    aren't controlled by queue headers, they can't be unlinked.  Only
    individual URBs can.  So whenever multiple ISO URBs are dequeued, it's
    necessary to make sure the hardware is done with each one.  We can't
    assume that dequeuing the first URB will suffice to unlink the entire
    queue.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c433472658b4df11bd3590a59be79194a1ff43ae
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 19 16:34:57 2006 -0400

    [PATCH] UHCI: use integer-sized frame numbers
    
    This patch (as687) changes uhci-hcd to keep track of frame numbers as
    full-sized integers rather than 11-bit values.  This makes them a lot
    easier to handle and makes it possible to schedule beyond a 2-second
    window, should anyone ever want to do so.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3612242e527eb47ee4756b5350f8bdf791aa5ede
Author: Micah Dowty <micah@vmware.com>
Date:   Fri May 19 11:26:24 2006 -0700

    [PATCH] USB: Allow high-bandwidth isochronous packets via usbfs
    
    This patch increases an arbitrary limit on the size of
    individual isochronous packets submitted via usbfs. The
    limit is still arbitrary, but it's now large enough to
    support the maximum packet size used by high-bandwidth
    isochronous transfers.
    
    Signed-off-by: Micah Dowty <micah@vmware.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e016683d595aacde78b9385aabd0b98c8915d885
Author: Micah Dowty <micah@vmware.com>
Date:   Fri May 19 11:20:11 2006 -0700

    [PATCH] USB: Remove 4088-byte limit on usbfs control URBs
    
    This patch removes the artificial 4088-byte limit that usbfs
    currently places on Control transfers. The USB spec does not
    specify a strict limit on the size of an entire control transfer.
    It does, however, state that the data stage "follows the same
    protocol rules as bulk transfers." (USB 2, 8.5.3)
    
    The level of support for large control transfers in real host
    controllers varies, but it's important to support at least 4K
    transfers. Windows enforces a maximum control transfer size
    of 4K, so there exists some hardware that requires a full 4096
    byte data stage. Without this patch, we fall short of that by
    8 bytes on architectures with a 4K page size, and it becomes
    impossible to support such hardware with a user-space driver.
    
    Since any limit placed on control transfers by usbfs would be
    arbitrary, this patch replaces the PAGE_SIZE limit with the same
    arbitrary limit used by bulk transfers.
    
    Signed-off-by: Micah Dowty <micah@vmware.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b9827e4b29edb4af1481b75efdf9ea2d8a7ffc96
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 16 17:33:14 2006 -0700

    [PATCH] USB: correct the USB info in Documentation/power/swsusp.txt
    
    The swsusp.txt documentation harshes confusingly on USB, and this patch
    addresses the issue.  It's harsh because it blames USB for some issues
    that are generic to all drivers -- especially those supporting removable
    media -- and it's confusing since it says that USB has the issue with
    "suspend" not just swsusp ... while in reality, USB doesn't have the
    issue when real system suspend states are used.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Acked-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b761d9d867bcc29e8de3e62d1d72b27e75078ca6
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 12 11:41:59 2006 -0400

    [PATCH] UHCI: Work around old Intel bug
    
    Some old Intel UHCI controllers have a bug that has shown up in a few
    systems (the PIIX3 "Neptune" chip set).  Until now there has not been
    any simple way to work around the bug, but the lastest changes in
    uhci-hcd have made it easy.  This patch (as684) adds the work-around.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 84afddd7ac58adad00cb0e50d0af25fcf825668b
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 12 11:35:45 2006 -0400

    [PATCH] UHCI: Reimplement FSBR
    
    This patch (as683) re-implements Full-Speed Bandwidth Reclamation (FSBR)
    properly.  It keeps track of which endpoint queues have advanced, and
    when none have advanced for a sufficiently long time, FSBR is turned
    off.  The next TD on each of the non-moving queues is modified to
    generate an interrupt on completion, so that FSBR can be re-enabled as
    soon as the hardware starts to make some progress.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 04538a255ac8b404c20cbf15867c9829254c470f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 12 11:29:04 2006 -0400

    [PATCH] UHCI: Eliminate the TD-removal list
    
    This patch (as682) gets rid of the TD-removal list in uhci-hcd.  It is
    no longer needed because now TDs are not freed until we know the
    hardware isn't using them.  It also simplifies the code for adding and
    removing TDs to/from URBs.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0b458b64b2a3a4cb806dd5cd889bbf6c7e9d686
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 12 11:23:19 2006 -0400

    [PATCH] UHCI: Move code for cleaning up unlinked URBs
    
    This patch (as681) moves some code for cleaning up after unlinked URBs
    out of the general completion pathway into the unlinking pathway.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 59e29ed91cff90b27d393c7a3d3ac9c3fcaea7dd
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 12 11:19:19 2006 -0400

    [PATCH] UHCI: Remove non-iso TDs as they are used
    
    This patch (as680) frees non-isochronous TDs as they are used, rather
    than all at once when an URB is complete.  Although not a terribly
    important change in itself, it opens the door to a later enhancement
    that will reduce storage requirements by allocating only a limited
    number of TDs at any time for each endpoint queue.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b1869000a60b0c72022811f24110a52d3e300b1e
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 12 11:14:25 2006 -0400

    [PATCH] UHCI: Common result routine for Control/Bulk/Interrupt
    
    This patch (as679) combines the result routine for Control URBs with the
    routine for Bulk/Interrupt URBs.  Along the way I eliminated the
    debugging printouts for Control transfers unless the debugging level is
    set higher than 1.  I also eliminated a long-unused (#ifdef'ed-out)
    section that works around some buggy old APC BackUPS devices.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 0f28b55db543001d360e4319bfc3f2c4e28ba05f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Mon May 15 14:49:04 2006 -0400

    [PATCH] usbhid: automatically set HID_QUIRK_NOGET for keyboards and mice
    
    It seems to be relatively common for USB keyboards and mice to dislike
    being polled for reports.  Since there's no need to poll a keyboard or
    a mouse, this patch (as685) automatically sets the HID_QUIRK_NOGET flag
    for devices that advertise themselves as either sort of device with boot
    protocol support.
    
    This won't cure all the problems since some devices don't support the
    boot protocol, but it's simple and easy and it should fix quite a few
    problems.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a82e49b8aeb9f8dafdf6cf2e617c8b95bf056257
Author: Bart Massey <bart@cs.pdx.edu>
Date:   Mon May 8 14:40:13 2006 -0700

    [PATCH] USB HID/HIDBP, INPUT DRIVERS: fix various usb/input/hid-input.c bugs that make Apple Mighty Mouse work poorly
    
    Transposed lines of code in drivers/usb/input/hid-input.c causes the
    capability bits for a new HID device to be set before quirks are applied
    at configuration time.  When an HID event is then sent up to the input
    layer, it may then be discarded as irrelevant because the wrong
    capability bit is set.
    
    Further, the quirks for the Apple Mighty Mouse are not quite right: the
    horizontal scrolling needs its axis reversed, and the left and center
    buttons are transposed.  Also, the mouse is labeled in the kernel with
    its earlier name (I think) of Apple PowerMouse.
    
    Steps to reproduce problem: Plug in an Apple Mighty Mouse.  Note that
    horizontal scrolling doesn't work at all, and in fact doesn't generate
    any input events on /dev/input/eventN.  Note also that pushing the
    middle button performs the right button action, and vice versa.  Once
    you have the horizontal scrolling working, note that it is backward WRT
    both to vertical scrolling and to common sense.
    
    This patch maybe should be broken up, as it does address two problems.
    The transposed code in hidinput_configure_usage() probably creates bugs
    beyond just the Mighty Mouse.  The rest of the patch renames POWERMOUSE
    to MIGHTYMOUSE everywhere (which I *believe* is correct), fixes the
    MIGHTYMOUSE quirk to swap the center and right mouse buttons, and adds a
    new quirk HID_QUIRK_INVERT_HWHEEL also assigned to the MIGHTYMOUSE with
    code in hidinput_hid_event() to implement it.
    
    Signed-off-by: Bart Massey <bart@cs.pdx.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2775562ad2af2fc131ef7987166db6e42217528f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 5 16:32:02 2006 -0400

    [PATCH] USB: UHCI: fix obscure bug in enqueue()
    
    This patch (as676) fixes a small bug in uhci-hcd's enqueue routine.  When
    an URB is unlinked or gets an error and the completion handler queues
    another URB for the same endpoint, the queue shouldn't be allowed to start
    up again until the handler returns.  Not even if the new URB is the only
    one on its queue.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4de7d2c231a8624a47417977be0768c5b5257c4f
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 5 16:26:58 2006 -0400

    [PATCH] USB: UHCI: store the endpoint type in the QH structure
    
    This patch (as675) simplifies uhci-hcd slightly by storing each endpoint's
    type in the corresponding Queue Header structure.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2d61bde7a0e630e1906e6478b6b2a7aeaaa8f8da
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri May 5 16:23:42 2006 -0400

    [PATCH] USB: net2280: add a shutdown routine
    
    The net2280 board has an annoying habit of surviving soft reboots with
    interrupts enabled.  This patch (as674) adds a shutdown routine to the
    driver so that the board can be put in a quiescent state.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b383539e04c413e040d998aedcc120c49aa670da
Author: Daniel Drake <dsd@gentoo.org>
Date:   Tue May 9 01:45:27 2006 +0100

    [PATCH] USB: usb-storage alauda: Fix transport info mismerge
    
    Unfortunately it looks like the transport entry for this subdriver was merged
    into the protocol section, making this driver unusable :(
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f9347c52347f24244c550871eab8ecb0fb5704d6
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon May 8 23:43:02 2006 +0100

    [PATCH] USB shuttle_usbat: hardcode flash detection for now
    
    After some further testing with my flash device I realised that our current
    probe doesn't always work (e.g. when no media is inserted).
    
    Now that Peter Chubb's patch has simplified the detection of 99% of the HP CD
    writers out there, we have a much smaller range of hardware to work with on
    the shared device ID, so it should be possible to try some of the previous
    probe options again: we just need to find another tester with a USBAT2-based HP
    CD writer.
    
    This patch hardcodes the flash detection until someone comes along with one of
    these obscure CD drives. Note that these devices are extremely rare, so even if
    we can't ever find a decent probe method, at least we will be supporting almost
    all of the USBAT-based hardware out there.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bdcfd9e349eff9398a1d85eaa517294f493bb3c8
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 2 18:29:34 2006 +0100

    [PATCH] USB: shuttle_usbat: Hardcode detection of HP CDRW devices
    
    Use USB vendor and product IDs to determine whether the attached
    device is a CDROM or a Flash device.  Daniel Drake says that the
    *same* vendor and product IDs for non-HP vendor ID could be either
    flash or cdrom, so try to probe for them.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 141804d401631f0384feabfa5fc3e2ce1321c0f0
Author: Peter Chubb <peterc@gelato.unsw.edu.au>
Date:   Tue May 2 18:30:12 2006 +0100

    [PATCH] USB: shuttle_usbat: Fix handling of scatter-gather buffers
    
    I've worked out what's going wrong.  The scsi layer is now much
    more likely to pass down scatterlists instead of plain buffers.  So
    you have to make sure that they're handled correctly.  In one of the
    changes along the way, usbat_write_block and friends stopped obeying
    the srb->use_sg flag.
    
    Anyway, with the appended patch, and the one I'm putting in the next email, it
    all seems to work for the HP cd4e.  Of course, someone's going to have
    to test it with the flash drives as well....
    
    This patch teaches the usbat_{read,write}_block functions to
    obey the use_sg flag in the scsi-request.
    
    Signed-off-by: Peter Chubb <peterc@gelato.unsw.edu.au>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 69165c29bb4db9bafead7c6574c73ce245965f3a
Author: Sean Young <sean@mess.org>
Date:   Tue May 2 11:44:43 2006 +0000

    [PATCH] USB Phidget InterfaceKit: make inputs pollable and new device support
    
    Make inputs pollable using sysfs_notify and add support for the Phidget
    InterfaceKit 0/16/16. Various cleanups.
    
    Signed-off-by: Sean Young <sean@mess.org>
    Signed-off-by: Daniel Saakes <daniel@saakes.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a01c4ef1cc9622fcce5c10ddb8e9e7f76206959e
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Fri Apr 28 18:58:57 2006 +0200

    [PATCH] USBATM: remove no-longer needed #include
    
    We #include <linux/netdevice.h> only because <linux/etherdevice.h>
    needed it, but didn't #include it itself.  But that's been fixed now.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fcf4830a525d37b9bd3ba60430b5729b8621062d
Author: Duncan Sands <duncan.sands@math.u-psud.fr>
Date:   Fri Apr 28 18:53:45 2006 +0200

    [PATCH] USBATM: remove pointless inline
    
    Remove pointless inline.
    
    Signed-off-by: Duncan Sands <baldrick@free.fr>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 41fea55e0382b7d59d694d8055b39aa69c793b1f
Author: Pete Zaitcev <zaitcev@redhat.com>
Date:   Fri Apr 28 20:45:49 2006 -0700

    [PATCH] USB: clean out an unnecessary NULL check from ub
    
    Remove the check for NULL which makes no sense. Suggested by Al.
    
    Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4489a5712b086621a6c3f669057d2996245cd3fb
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Thu Apr 27 15:54:22 2006 -0400

    [PATCH] USB: usbcore: always turn on hub port power
    
    Some hubs claim not to support port-power switching, and right now the
    hub driver believes them and does not enable power to their ports.
    However it turns out that even though they don't actually switch power,
    they do ignore all events on a port until told to turn on the power!
    This problem has been reported by several users.
    
    This revised patch (as672b) makes the hub driver always try to turn on
    port power to all hubs, regardless of what the hub descriptor says.  It
    also adds a comment explaining the need for this.
    
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9effa978f1d51f6d0426ebabcf6cb32336bb3153
Author: Nicolas Boichat <nicolas@boichat.ch>
Date:   Wed Apr 19 23:36:40 2006 +0200

    [PATCH] USB: MacBook Pro touchpad support
    
    Add support for MacBook touchpad in appletouch driver.
    Thanks to Alex Harper for the informations.
    
    Use u16 instead of int16_t in atp_is_geyser* functions.
    
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: Stelian Pop <stelian@popies.net>
    Signed-off-by: Nicolas Boichat <nicolas@boichat.ch>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 73e487fdb75f8abf230968dbf73a3dc3b16808d3
Author: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Date:   Tue Apr 25 07:46:17 2006 +0200

    [PATCH] USB console: fix disconnection issues
    
    Prevent sending further output to a USB-serial console after the dongle is
    disconnected, take care not to leak kref.
    
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ca85485c1f482e6625f36aceb85eaaeff4b22d79
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Thu Apr 13 22:28:17 2006 +0200

    [PATCH] USB: console: prevent ENODEV on node
    
    Prevent ENODEV on a /dev/ttyUSBx, used as a USB-serial console.
    
    From: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 57845bd104233cb75b9ab3624f7ea7662298bc27
Author: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Date:   Thu Apr 13 22:27:12 2006 +0200

    [PATCH] USB: console: fix oops
    
    Prevent NULL dereference when used as a USB-serial console.
    
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c10746dbb39d41e5fc27badfebe61448210c426d
Author: Paul Fulghum <paulkf@microgate.com>
Date:   Thu Apr 13 22:26:35 2006 +0200

    [PATCH] USB: console: fix cr/lf issues
    
    Append Carriage-Returns after Line-Feeds, analogous to the serial driver.
    
    From: Paul Fulghum <paulkf@microgate.com>
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 01cced250722d22d99c2342979490f93ca886521
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Apr 11 10:07:16 2006 -0500

    [PATCH] USB: allow multiple types of EHCI controllers to be built as modules
    
    In some systems we may have both a platform EHCI controller and PCI EHCI
    controller.  Previously we couldn't build the EHCI support as a module due
    to conflicting module_init() calls in the code.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit df47e5330b0f5decb0a5736e9a81fff49d46d151
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Apr 15 11:17:27 2006 +0200

    [PATCH] USB: sisusbvga: possible cleanups
    
    This patch contains the following possible cleanups:
    - make needlessly global functions static
    - function and struct declarations belong into header files
    - make SiS_VCLKData const
    - #if 0 the following unused global functions:
      - sisusb.c: sisusb_writew()
      - sisusb.c: sisusb_readw()
      - sisusb_init.c: SiSUSB_GetModeID()
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2682d27c5884550857cd96231db5b22b3acced53
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Tue Mar 28 01:00:21 2006 -0800

    [PATCH] USB: convert the semaphores in the sisusb driver to mutexes
    
    From: Arjan van de Ven <arjan@infradead.org>
    
    Convert the semaphores-used-as-mutex to mutexes in the sisusb video driver;
    this required manual checking due to the "return as locked" stuff in this
    driver, but the ->lock semaphore is still used as mutex in the end.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Cc: Thomas Winischhofer <winischhofer.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7327413c745c2f8e8d4b92f76759821263b095c1
Author: Eduard Warkentin <eduard.warkentin@gmx.de>
Date:   Thu May 18 01:13:17 2006 -0700

    [PATCH] USB: added support for ASIX 88178 chipset USB Gigabit Ethernet adaptor
    
    Add support for detection and dworking with a ASIX 88178 based USB-Gigabit
    adaptor.  With the patch, it is detected and handled correctly by the asix
    module.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f44f725f7d635e8b9786eef13f836dc1a2851495
Author: David Brownell <david-b@pacbell.net>
Date:   Fri May 12 19:24:34 2006 -0700

    [PATCH] USB: usbnet, zaurus mtu fixup
    
    This includes an MTU fixup which could affect larger packets with newer
    Zaurii, described as http://bugzilla.kernel.org/show_bug.cgi?id=6286;
    plus minor whitespace cleanup.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 86478944eba887f149e151bacc023ae4b2d23ea6
Author: Oliver Neukum <neukum@fachschaft.cup.uni-muenchen.de>
Date:   Sat May 13 22:50:47 2006 +0200

    [PATCH] USB: cdc-acm: add a new special case for modems with buggy firmware
    
    this fixes the "duplicated text" bug. There's a modem that cannot cope
    with large transfers and more than one urb in flight. This patch adds a
    special case to the driver.
    
    Signed-off-by: Oliver Neukum <oliver@neukum.name>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5cd330f4f30eb154e7af9210bed42dfcd447997f
Author: Henk Vergonet <Henk.Vergonet@gmail.com>
Date:   Mon May 15 12:34:43 2006 +0200

    [PATCH] USB: add YEALINK phones to the HID_QUIRK_IGNORE blacklist
    
    Keys on Yealink based phones will not function properly when using the
    generic HID driver. This patch prevents the generic HID code from
    grabbing the device before the regular yealink driver can get a grip on
    it.
    
    Signed-off-by: Henk Vergonet <Henk.Vergonet@gmail.com>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c32ba30f76eb18b3d4449072fe9c345a9574796b
Author: Paul Serice <paul@serice.net>
Date:   Wed Jun 7 10:23:38 2006 -0700

    [PATCH] USB: EHCI works again on NVidia controllers with >2GB RAM
    
    From: Paul Serice <paul@serice.net>
    
    The workaround in commit f7201c3dcd7799f2aa3d6ec427b194225360ecee
    broke.  The work around requires memory for DMA transfers for some
    NVidia EHCI controllers to be below 2GB, but recent changes have
    caused some DMA memory to be allocated before the DMA mask is set.
    
    Signed-off-by: Paul Serice <paul@serice.net>
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1323523f505606cfd24af6122369afddefc3b09d
Merge: 9ba8933... 32e62c6...
Author: Tony Luck <tony.luck@intel.com>
Date:   Wed Jun 21 14:50:10 2006 -0700

    Pull rework-memory-attribute-aliasing into release branch

commit 9ba89334552b96e2127dcafb1c46ce255ecf2667
Author: Ian Wienand <ianw@gelato.unsw.edu.au>
Date:   Wed Jun 21 10:33:04 2006 +1000

    [IA64] SKI Simulator boot
    
    Sorry I didn't notice earlier, but that BUG_ON triggers for me on the
    simulator.  AFAICS the mask for itv is set in cpu_init(), which comes
    after sal_init().  Consequently on the simulator the itv still has its
    start value of zero.  I've probably missed something, but I wonder why
    at this stage of the boot you even need to save and restore the itv?
    
    Signed-Off-By: Ian Wienand <ianw@gelato.unsw.edu.au>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit f640f94ec4f39e8a4d91d58354d3e09b28769edf
Author: Mike Habeck <habeck@sgi.com>
Date:   Mon Jun 19 15:38:10 2006 -0500

    [IA64-SGI] fix SGI Altix tioce_bus_fixup() bug
    
    The following patch fixes a bug in the SGI Altix tioce_bus_fixup()
    code.  ce_dre_comp_err_addr needs to be zero'd out not ~0ULL.  As
    a result completion errors weren't being captured.
    
    Signed-off-by: Mike Habeck <habeck@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit d270acbc24f0ce451c773c214ac0e92e95396b2f
Author: Keith Owens <kaos@ocs.com.au>
Date:   Fri Apr 7 18:08:11 2006 +1000

    [IA64] Sanitize assembler code for ia64_sal_os_state
    
    struct ia64_sal_os_state has three semi-independent sections.  The code
    in mca_asm.S assumes that these three sections are contiguous, which
    makes it very awkward to add new data to this structure.  Remove the
    assumption that the sections are contiguous.  Define a macro to shorten
    references to offsets in ia64_sal_os_state.
    
    This patch does not change the way that the code behaves.  It just
    makes it easier to update the code in future and to add fields to
    ia64_sal_os_state when debugging the MCA/INIT handlers.
    
    Signed-off-by: Keith Owens <kaos@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit b7bb575c3fa3694811a072109f4e9c2f4705d8f5
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri Apr 28 11:50:43 2006 +0900

    [IA64] Make PCI Express support selectable
    
    When I tried to use PCI Express Hotplug driver on my ia64 box, I
    noticed that "PCI Express support" is not even selectable on ia64.
    This patch makes PCI Express support selectable.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit ea95972f18481089e73368f9e62f6d70087bf4de
Author: Russ Anderson <rja@efs.americas.sgi.com>
Date:   Wed May 10 11:09:01 2006 -0500

    [IA64-SGI] Remove SN SAL error handling feature bit that is no longer needed
    
    Due to improvements in linux & SAL MCA handling, the
    SAL_ERR_FEAT_MCA_SLV_TO_OS_INIT_SLV error handling features bit
    is no longer needed.
    
    Signed-off-by: Russ Anderson <rja@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 4092e256ca35e62b431ebad4e0c42c6360acee08
Author: Dave Jones <davej@redhat.com>
Date:   Wed Jun 21 17:36:24 2006 -0400

    [AGPGART] Fix pci_register_driver checking in amd64-agp
    
    pci_register_driver() never returns a positive number.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 65884734902c8f0b4d83293985678ab83b24ef72
Author: David Mosberger-Tang <David.Mosberger@acm.org>
Date:   Wed May 24 22:16:03 2006 -0600

    [IA64] make efi_stub.S fit in 80 cols
    
    Just a trivial cleanup patch
    
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 9ed059e1551bf36092215b965838502ac21f42e4
Author: Randy Dunlap <randy.dunlap@oracle.com>
Date:   Tue Jun 20 22:32:56 2006 -0700

    [CPUFREQ] Fix powernow-k8 SMP kernel on UP hardware bug.
    
    Fix powernow-k8 doesn't load bug.
    Reference: https://launchpad.net/distros/ubuntu/+source/linux-source-2.6.15/+bug/35145
    
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 491b07c98f2ac75f1a4370af76ae2403a4c579f5
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Wed Jun 21 13:15:48 2006 -0700

    [PATCH] redirect speedstep-centrino maintainer mail to cpufreq list
    
    I haven't really maintained this driver for a while, and I'm not
    keeping up with the latest in Intel power management.  I get a steady
    stream of mail which I don't really do anything useful with; the
    cpufreq list seems like a better destination, unless someone wants to
    get the mail directly.
    
    Also clean up a couple of ancient comments which don't really apply
    anymore (as far as I know, nobody has ever damaged a CPU with this
    driver).
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit a1d7057727bc9e20a0a417812f538fe6b8a02c03
Author: Jack Steiner <steiner@sgi.com>
Date:   Wed May 31 08:58:08 2006 -0500

    [IA64-SGI] SN topology fix for large systems
    
    There is an SN bug in sn_hwperf.c that affects systems with 1024n or 1024p.
    The bug manifests itself 2 ways: IO interrupts are not always
    targeted to the nearest node, and 2) the "cat /proc/sgi_sn/sn_topology"
    commands fails with "cannot allocate memory".
    
    The code is using the wrong macros for validating node numbers.
    
    Signed-off-by: Jack Steiner <steiner@sgi.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 5eb1d63f5fc8455269c2756223b3cf3779fd2f7a
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Tue Jun 6 10:36:27 2006 -0600

    [IA64] sanity check reserved region usage
    
    One more trivial, stand-alone patch from the Xen/ia64 review.  Sanity
    check usage of the reserved region numbers.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 120b286d3c94a4e59fdb8069d42e8d49ea468ffd
Author: Alex Williamson <alex.williamson@hp.com>
Date:   Tue Jun 6 10:23:34 2006 -0600

    [IA64] add vmlinuz target
    
    This is a trivial stand-alone patch out of the Xen/ia64 patches.  Add
    a vmlinuz build target to be more compatible with x86-ish targets.
    
    Signed-off-by: Alex Williamson <alex.williamson@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 0d204094d15dac2e8a439b993f71eda385b4dccd
Merge: a487a8f... 612eff0...
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Wed Jun 21 13:43:50 2006 -0700

    Merge branch 'upstream' of git://git.kernel.org/pub/scm/linux/kernel/git/jgarzik/netdev-2.6

commit a5117ba7da37deb09df5eb802dace229b3fb1e9f
Author: Rene Herman <rene.herman@keyaccess.nl>
Date:   Tue Jun 6 23:54:02 2006 +0200

    [PATCH] Driver model: add ISA bus
    
    During the recent "isa drivers using platform devices" discussion it was
    pointed out that (ALSA) ISA drivers ran into the problem of not having
    the option to fail driver load (device registration rather) upon not
    finding their hardware due to a probe() error not being passed up
    through the driver model. In the course of that, I suggested a seperate
    ISA bus might be best; Russell King agreed and suggested this bus could
    use the .match() method for the actual device discovery.
    
    The attached does this. For this old non (generically) discoverable ISA
    hardware only the driver itself can do discovery so as a difference with
    the platform_bus, this isa_bus also distributes match() up to the driver.
    
    As another difference: these devices only exist in the driver model due
    to the driver creating them because it might want to drive them, meaning
    that all device creation has been made internal as well.
    
    The usage model this provides is nice, and has been acked from the ALSA
    side by Takashi Iwai and Jaroslav Kysela. The ALSA driver module_init's
    now (for oldisa-only drivers) become:
    
    static int __init alsa_card_foo_init(void)
    {
    	return isa_register_driver(&snd_foo_isa_driver, SNDRV_CARDS);
    }
    
    static void __exit alsa_card_foo_exit(void)
    {
    	isa_unregister_driver(&snd_foo_isa_driver);
    }
    
    Quite like the other bus models therefore. This removes a lot of
    duplicated init code from the ALSA ISA drivers.
    
    The passed in isa_driver struct is the regular driver struct embedding a
    struct device_driver, the normal probe/remove/shutdown/suspend/resume
    callbacks, and as indicated that .match callback.
    
    The "SNDRV_CARDS" you see being passed in is a "unsigned int ndev"
    parameter, indicating how many devices to create and call our methods with.
    
    The platform_driver callbacks are called with a platform_device param;
    the isa_driver callbacks are being called with a "struct device *dev,
    unsigned int id" pair directly -- with the device creation completely
    internal to the bus it's much cleaner to not leak isa_dev's by passing
    them in at all. The id is the only thing we ever want other then the
    struct device * anyways, and it makes for nicer code in the callbacks as
    well.
    
    With this additional .match() callback ISA drivers have all options. If
    ALSA would want to keep the old non-load behaviour, it could stick all
    of the old .probe in .match, which would only keep them registered after
    everything was found to be present and accounted for. If it wanted the
    behaviour of always loading as it inadvertently did for a bit after the
    changeover to platform devices, it could just not provide a .match() and
    do everything in .probe() as before.
    
    If it, as Takashi Iwai already suggested earlier as a way of following
    the model from saner buses more closely, wants to load when a later bind
    could conceivably succeed, it could use .match() for the prerequisites
    (such as checking the user wants the card enabled and that port/irq/dma
    values have been passed in) and .probe() for everything else. This is
    the nicest model.
    
    To the code...
    
    This exports only two functions; isa_{,un}register_driver().
    
    isa_register_driver() register's the struct device_driver, and then
    loops over the passed in ndev creating devices and registering them.
    This causes the bus match method to be called for them, which is:
    
    int isa_bus_match(struct device *dev, struct device_driver *driver)
    {
              struct isa_driver *isa_driver = to_isa_driver(driver);
    
              if (dev->platform_data == isa_driver) {
                      if (!isa_driver->match ||
                              isa_driver->match(dev, to_isa_dev(dev)->id))
                              return 1;
                      dev->platform_data = NULL;
              }
              return 0;
    }
    
    The first thing this does is check if this device is in fact one of this
    driver's devices by seeing if the device's platform_data pointer is set
    to this driver. Platform devices compare strings, but we don't need to
    do that with everything being internal, so isa_register_driver() abuses
    dev->platform_data as a isa_driver pointer which we can then check here.
    I believe platform_data is available for this, but if rather not, moving
    the isa_driver pointer to the private struct isa_dev is ofcourse fine as
    well.
    
    Then, if the the driver did not provide a .match, it matches. If it did,
    the driver match() method is called to determine a match.
    
    If it did _not_ match, dev->platform_data is reset to indicate this to
    isa_register_driver which can then unregister the device again.
    
    If during all this, there's any error, or no devices matched at all
    everything is backed out again and the error, or -ENODEV, is returned.
    
    isa_unregister_driver() just unregisters the matched devices and the
    driver itself.
    
    More global points/questions...
    
    - I'm introducing include/linux/isa.h. It was available but is ofcourse
    a somewhat generic name. Moving more isa stuff over to it in time is
    ofcourse fine, so can I have it please? :)
    
    - I'm using device_initcall() and added the isa.o (dependent on
    CONFIG_ISA) after the base driver model things in the Makefile. Will
    this do, or I really need to stick it in drivers/base/init.c, inside
    #ifdef CONFIG_ISA? It's working fine.
    
    Lastly -- I also looked, a bit, into integrating with PnP. "Old ISA"
    could be another pnp_protocol, but this does not seem to be a good
    match, largely due to the same reason platform_devices weren't -- the
    devices do not have a life of their own outside the driver, meaning the
    pnp_protocol {get,set}_resources callbacks would need to callback into
    driver -- which again means you first need to _have_ that driver. Even
    if there's clean way around that, you only end up inventing fake but
    valid-form PnP IDs and generally catering to the PnP layer without any
    practical advantages over this very simple isa_bus. The thing I also
    suggested earlier about the user echoing values into /sys to set up the
    hardware from userspace first is... well, cute, but a horrible idea from
    a user standpoint.
    
    Comments ofcourse appreciated. Hope it's okay. As said, the usage model
    is nice at least.
    
    Signed-off-by: Rene Herman <rene.herman@keyaccess.nl>

commit 3e95637a48820ff8bedb33e6439def96ccff1de5
Author: Alan Stern <stern@rowland.harvard.edu>
Date:   Fri Jun 16 17:10:48 2006 -0400

    [PATCH] Driver Core: Make dev_info and friends print the bus name if there is no driver
    
    This patch (as721) makes dev_info and related macros print the device's
    bus name if the device doesn't have a driver, instead of printing just a
    blank.  If the device isn't on a bus either... well, then it does leave
    a blank space.  But it will be easier for someone else to change if they
    want.
    
    Cc: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e9a7d305faec364ba973d6c22c9b1e802ef79204
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 20 13:59:20 2006 -0700

    [PATCH] Driver core: add proper symlinks for devices
    
    We need to create the "compatible" symlinks that class_devices used to
    create when they were in the class directories so that userspace does
    not know anything changed at all.
    
    Yeah, we have a lot of symlinks now, but we should be able to get rid of
    them in a year or two... (wishful thinking...)
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b9d9c82b4d081feb464f62dfc786c8621d09ecd2
Author: Kay Sievers <kay.sievers@suse.de>
Date:   Thu Jun 15 15:31:56 2006 +0200

    [PATCH] Driver core: add generic "subsystem" link to all devices
    
    Like the SUBSYTEM= key we find in the environment of the uevent, this
    creates a generic "subsystem" link in sysfs for every device. Userspace
    usually doesn't care at all if its a "class" or a "bus" device. This
    provides an unified way to determine the subsytem of a device, regardless
    of the way the driver core has created it.
    
    Signed-off-by: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 23681e479129854305da1da32f7f1eaf635ef22c
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Wed Jun 14 12:14:34 2006 -0700

    [PATCH] Driver core: allow struct device to have a dev_t
    
    This is the first step in moving class_device to being replaced by
    struct device.  It allows struct device to export a dev_t and makes it
    easy to dynamically create and destroy struct device as long as they are
    associated with a specific class.
    
    Cc: Kay Sievers <kay.sievers@vrfy.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aa49b9136e3d44cc264811d77eef4ded88456717
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 20 13:59:20 2006 -0700

    [PATCH] Driver core: change make_class_name() to take kobjects
    
    This is needed for a future patch for the device code to create the
    proper symlinks for devices that are "class devices".
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cad1e55d4d19a49c2b82b74562a6e4e555b05f38
Author: Laura Garcia <nevola@gmail.com>
Date:   Tue May 23 23:22:38 2006 +0200

    [PATCH] firmware_class: s/semaphores/mutexes
    
    Hi, this patch converts semaphores to mutexes for Randy's firmware_class.
    
    Signed-off-by: Laura Garcia Liebana <nevola@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd869db6eb1ea0ffe251e53a113dbf259400f4f6
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 16 17:03:25 2006 -0700

    [PATCH] Driver core: PM_DEBUG device suspend() messages become informative
    
    This makes the driver model PM suspend debug messages more useful, by
    
      (a) explaining what event is being sent, since not all suspend()
          requests mean the same thing;
    
      (b) reporting when a PM_EVENT_SUSPEND call is allowing the device
          to issue wakeup events.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1e724845034eb898c97dc6636207f0a231af9432
Author: David Brownell <david-b@pacbell.net>
Date:   Tue May 16 17:00:08 2006 -0700

    [PATCH] remove duplication from Documentation/power/devices.txt
    
    Remove a chunk of duplicated documentation text.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4039483fd3065920f035eed39ec59085421c0a4f
Author: Michael Holzheu <holzheu@de.ibm.com>
Date:   Tue May 9 12:53:49 2006 +0200

    [PATCH] Driver Core: Add /sys/hypervisor when needed
    
    To have a home for all hypervisors, this patch creates /sys/hypervisor.
    A new config option SYS_HYPERVISOR is introduced, which should to be set
    by architecture dependent hypervisors (e.g. s390 or Xen).
    
    Acked-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Michael Holzheu <holzheu@de.ibm.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e391553222211e07dfbe2f01c413b4e6d0ae32aa
Author: Russell King <rmk+lkml@arm.linux.org.uk>
Date:   Sat May 6 08:15:26 2006 +0100

    [PATCH] Driver Core: Fix platform_device_add to use device_add
    
    platform_device_add() should be using device_add() rather
    than device_register() - any platform device passed to
    platform_device_add() should have already been initialised,
    either by platform_device_alloc() or platform_device_register().
    
    Signed-off-by: Russell King <rmk@arm.linux.org.uk>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 670dd90d81f60ef429cbba54ad235e9207f4d444
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Mon May 8 13:45:57 2006 +0800

    [PATCH] Driver Core: Allow sysdev_class have attributes
    
    allow sysdev_class adding attribute. Next patch will use the new API to
    add an attribute under /sys/device/system/cpu/.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1740757e8f94c6899705eb6f5434de9404992778
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue May 2 16:59:59 2006 +0200

    [PATCH] Driver Core: remove unused exports
    
    Cc: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a0245f7ad5214cb00131d7cd176446e067c913dc
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 29 10:37:33 2006 -0700

    [PATCH] platform_bus learns about modalias
    
    This patch adds modalias support to platform devices, for simpler
    hotplug/coldplug driven driver setup.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 05967118a6c354eaa5950429c70ad4c8daca94bf
Author: David Brownell <david-b@pacbell.net>
Date:   Mon May 1 13:58:33 2006 -0700

    [PATCH] Driver Core: CONFIG_DEBUG_PM covers drivers/base/power too
    
    The drivers/base/power PM debug messages should appear when
    either PM or driver model debug are enabled.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b7fe4a60f3a5a428832bf5dd9388e80f0d02fc2e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Wed Apr 26 09:53:14 2006 -0700

    [PATCH] Driver core: class_device_add needs error checks
    
    class_device_add needs to check the return value of all the setup it
    does. It doesn't handle out of memory well. This is not complete, probably
    more needs to be done.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 3dda4e373c7474cfe280f4270b70c1563f92a2a7
Author: Hansjoerg Lipp <hjlipp@web.de>
Date:   Sat Apr 22 18:43:00 2006 +0200

    [PATCH] i4l gigaset: move sysfs entry to tty class device
    
    Using the class device pointer returned by tty_register_device() with
    part 1 of the patch, attach the Gigaset drivers' "cidmode" sysfs entry
    to its tty class device, where it can be found more easily by users
    who do not know nor care which USB port the device is attached to.
    
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1cdcb6b43fda7424b7435dac8f80b2b5d8a48899
Author: Hansjoerg Lipp <hjlipp@web.de>
Date:   Sat Apr 22 18:36:53 2006 +0200

    [PATCH] TTY: return class device pointer from tty_register_device()
    
    Let tty_register_device() return a pointer to the class device it creates.
    This allows registrants to add their own sysfs files under the class
    device node.
    
    Signed-off-by: Hansjoerg Lipp <hjlipp@web.de>
    Signed-off-by: Tilman Schmidt <tilman@imap.cc>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 53877d06d53a412d901bb323f080296c363d8b51
Author: Kay Sievers <kay.sievers@suse.de>
Date:   Tue Apr 4 20:42:26 2006 +0200

    [PATCH] Driver core: bus device event delay
    
    split bus_add_device() and send device uevents after sysfs population
    
    Signed-off-by: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 27c0ff868f2ad3c9732ce45abbb8dd7e1723931f
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Apr 27 15:46:39 2006 -0700

    [PATCH] CCISS: add device symlink to the block cciss block devices in sysfs
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c18f6365fdbaf30611a8822afcd7097865dcaa32
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu Apr 27 14:10:12 2006 -0700

    [PATCH] Add kernel<->userspace ABI stability documentation
    
    Signed-off-by: Kay Sievers <kay.sievers@suse.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 183bd5b3da82b80920c30c4772222df8027fc364
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Thu May 18 10:39:21 2006 -0700

    [PATCH] kobject: make people pay attention to kobject_add errors
    
    These really need to be fixed, shout it out to the world.
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cf34a8e07f02c76f3f1232eecb681301a3d7b10b
Author: Brice Goglin <brice@myri.com>
Date:   Tue Jun 13 14:35:42 2006 -0400

    [PATCH] PCI: nVidia quirk to make AER PCI-E extended capability visible
    
    The nVidia CK804 PCI-E chipset supports the AER extended capability
    but sometimes fails to link it (with some BIOS or after a warm reboot).
    It makes the AER cap invisible to pci_find_ext_capability().
    
    The patch adds a quirk to set the missing bit that controls the
    linking of the capability.
    By the way, it removes the corresponding code in the myri10ge driver.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Loic Prylli <loic@myri.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ead2bfeb7f739d2ad6e09dc1343f0da51feb7f51
Author: Chuck Ebbert <76306.1226@compuserve.com>
Date:   Thu Jun 15 04:41:52 2006 -0400

    [PATCH] PCI: fix issues with extended conf space when MMCONFIG disabled because of e820
    
    On 15 Jun 2006 03:45:10 +0200, Andi Kleen wrote:
    
    > Anyways I would say that if the BIOS can't get MCFG right then
    > it's likely not been validated on that board and shouldn't be used.
    
    According to Petr Vandrovec:
    
     ... "What is important (and checked) is address of MMCONFIG reported by MCFG
     table...  Unfortunately code does not bother with printing that address :-(
    
     "Another problem is that code has hardcoded that MMCONFIG area is 256MB large.
     Unfortunately for the code PCI specification allows any power of two between 2MB
     and 256MB if vendor knows that such amount of busses (from 2 to 128) will be
     sufficient for system.  With notebook it is quite possible that not full 8 bits
     are implemented for MMCONFIG bus number."
    
    So here is a patch.  Unfortunately my system still fails the test because
    it doesn't reserve any part of the MMCONFIG area, but this may fix others.
    
    Booted on x86_64, only compiled on i386.  x86_64 still remaps the max area
    (256MB) even though only 2MB is checked... but 2.6.16 had no check at all
    so it is still better.
    
    PCI: reduce size of x86 MMCONFIG reserved area check
    
    1.  Print the address of the MMCONFIG area when the test for that area
        being reserved fails.
    
    2.  Only check if the first 2MB is reserved, as that is the minimum.
    
    Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
    Acked-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bdee9d98d281d84718eaff6bf0dd2b6ad418b36f
Author: Doug Thompson <norsk5@yahoo.com>
Date:   Wed Jun 14 16:59:48 2006 -0700

    [PATCH] PCI: Bus Parity Status sysfs interface
    
    From: Doug Thompson <norsk5@yahoo.com>
    
    This patch adds the 'broken_parity_status' sysfs attribute file to a PCI device.
    Reading this attribute a userland program can determine if PCI device provides false
    positives (value of 1) in its generation of PCI Parity status, or not (value of 0).
    As PCI devices are found to be 'bad' in this regard, userland programs can also set
    the appropriate value (root access only) of a faulty device. This per device
    information will be used in the EDAC PCI Parity scanner code in a future patch once
    this interface becomes available.
    
    Signed-off-by: Doug Thompson <norsk5@yahoo.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit acc7c2e0b73a46122ec370bf8a3aa9f19065d331
Author: Konrad Rzeszutek <konradr@redhat.com>
Date:   Thu Jun 15 12:08:30 2006 -0400

    [PATCH] PCI: fix memory leak in MMCONFIG error path
    
    This a bit late (yours patch was posted about a year ago), but
    a co-worker of spotted part of the code that looks like a memory
    leak. Looking at the code it seems that pci_mmcfg_config should
    be free-ed if MMCONFIG is above 4GB.
    
    From: Konrad Rzeszutek <konradr@redhat.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4d15a1779dfdf7e7a111022697d3a43da1745d31
Author: Greg Kroah-Hartman <gregkh@suse.de>
Date:   Tue Jun 6 16:58:25 2006 -0400

    [PATCH] PCI: fix error with pci_get_device() call in the mpc85xx driver
    
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bd91fde952b0aa80c820857241ff1923537d2bde
Author: Chris Wedgwood <cw@f00f.org>
Date:   Mon Jun 5 00:13:21 2006 -0700

    [PATCH] PCI: MSI-K8T-Neo2-Fir: run only where needed
    
    Be more selective when running the MSI-K8T-Neo2Fir soundcard PCI quirk so
    as not to run this on hardware where it's probably not needed.
    
    Signed-off-by: Chris Wedgwood <cw@f00f.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d71374dafbba7ec3f67371d3b7e9f6310a588808
Author: Yanmin Zhang <yanmin.zhang@intel.com>
Date:   Fri Jun 2 12:35:43 2006 +0800

    [PATCH] PCI: fix race with pci_walk_bus and pci_destroy_dev
    
    pci_walk_bus has a race with pci_destroy_dev. When cb is called
    in pci_walk_bus, pci_destroy_dev might unlink the dev pointed by next.
    Later on in the next loop, pointer next becomes NULL and cause
    kernel panic.
    
    Below patch against 2.6.17-rc4 fixes it by changing pci_bus_lock (spin_lock)
    to pci_bus_sem (rw_semaphore).
    
    Signed-off-by: Yanmin Zhang <yanmin.zhang@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 733a7fe12248072e1bca729c88a26298666f1956
Author: Grant Grundler <grundler@parisc-linux.org>
Date:   Thu Jun 1 11:15:59 2006 -0600

    [PATCH] PCI: clean up pci documentation to be more specific
    
    On Thu, Jun 01, 2006 at 02:46:11AM -0700, Rajesh Shah wrote:
    > This patch assumes that pci_request_region() will always be called
    > after pci_enable_device() and pci_release_region() will always
    > be called before pci_disable_device(). We cannot make this
    > assumption,since it's perfectly legal to disable a device
    > first and then release it's regions. So, I think that patch
    > needs to change.
    
    Patch below clarifies comments in Documentation/pci.txt.
    
    Signed-off-by: Grant Grundler <grundler@parisc-linux.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f7e6600d762bf7c04b48c8d9bd0ab26d04a8d11f
Author: Grant Grundler <iod00d@hp.com>
Date:   Wed May 31 23:35:47 2006 -0700

    [PATCH] PCI: remove unneeded msi code
    
    The code is really not needed.
    Roland Dreier/Greg Kroah-Hartman removed the release_mem_region() calls that
    were the only consumers of phys_addr:
    	http://www.ussg.iu.edu/hypermail/linux/kernel/0503.0/1540.html
    
    patch below deletes the "dead" code.
    
    Signed-off-by: Grant Grundler <iod00d@hp.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c0da3ba0a29d70c95ed39366a1c9b849f3439fbe
Author: Kimball Murray <kimball.murray@gmail.com>
Date:   Wed May 31 14:20:04 2006 -0400

    [PATCH] PCI: don't move ioapics below PCI bridge
    
    A recent Stratus x86_64 platform uses a system ioapic that is a PCI device
    located below a PCI bridge.  Other platforms like this may exist.
    
    This patch fixes a problem wherein the kernel's PCI setup code moves
    the ioapic to an address other than that assigned by the BIOS.  It simply
    adds another exclusion (which already includes classless devices and host
    bridges) to the function pbus_assign_resources_sorted so that it will not
    move the ioapic.
    
    If the ioapic is moved, the fixmap mapping to it is broken, so the OS should
    leave it alone.
    
    From: Kimball Murray <kimball.murray@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit b209a6ee49099b7500abf024f7b6b9648b5a3eac
Author: bibo,mao <bibo.mao@intel.com>
Date:   Wed May 31 18:17:33 2006 +0800

    [PATCH] PCI: cleanup unused variable about msi driver
    
    In IA64 platform, msi driver does not use irq_vector variable, and in
    x86 platform LAST_DEVICE_VECTOR should one before FIRST_SYSTEM_VECTOR,
    this patch modify this.
    
    Signed-off-by: bibo, mao <bibo.mao@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 99dc804d9bcc2c53f4c20c291bf4e185312a1a0c
Author: Shaohua Li <shaohua.li@intel.com>
Date:   Fri May 26 10:58:27 2006 +0800

    [PATCH] PCI: disable msi mode in pci_disable_device
    
    Brice said the pci_save_msi_state breaks his driver in his special usage
    (not in suspend/resume), as pci_save_msi_state will disable msi mode. In
    his usage, pci_save_state will be called at runtime, and later (after
    the device operates for some time and has an error) pci_restore_state
    will be called.
    In another hand, suspend/resume needs disable msi mode, as device should
    stop working completely. This patch try to workaround this issue.
    Drivers are expected call pci_disable_device in suspend time after
    pci_save_state.
    
    Signed-off-by: Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 020d502488bebdbc1b2c2828d996f04e563f082a
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Tue May 23 10:14:36 2006 -0700

    [PATCH] PCI: Allow MSI to work on kexec kernel
    
    We recently ran into a problem where the e1000 device failed to
    work properly on the kexec kernel. MSI was enabled for the
    device in the main kernel when it crashed. The e1000 driver
    tried to enable MSI on the kexec kernel, but the code bailed
    early when it found that MSI was already enabled in the hardware,
    even though the software state was not properly set up in the
    kexec'd kernel. This patch fixes the problem by moving the
    early return to after making sure that the software state
    is properly initialized.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 1edab4a164b229807853682f7ff7858c11dd3481
Author: Brice Goglin <brice@myri.com>
Date:   Tue May 23 03:05:27 2006 -0400

    [PATCH] PCI: AMD 8131 MSI quirk called too late, bus_flags not inherited ?
    
    The PCI_BUS_FLAGS_NO_MSI bus flags does not appear do be inherited
    correctly from the amd8131 MSI quirk to its parent busses. It makes
    devices behind a bridge behind amd8131 try to enable MSI while the
    amd8131 does not support it.
    We fix this by looking at flags of all parent busses in
    pci_enable_msi() and pci_enable_msix().
    
    By the way, also add the missing dev->no_msi check in pci_enable_msix()
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 74d0a988d3aa359b6b8a8536c8cb92cce02ca5d5
Author: Brent Casavant <bcasavan@sgi.com>
Date:   Wed May 10 01:49:14 2006 -0700

    [PATCH] PCI: Move various PCI IDs to header file
    
    Move various QLogic, Vitesse, and Intel storage controller PCI IDs to the
    main header file.
    
    Signed-off-by: Brent Casavant <bcasavan@sgi.com>
    Acked-by: Jes Sorensen <jes@sgi.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit bd8481e1646d7649fa101ee57a5139b9da3c2436
Author: Doug Thompson <norsk5@yahoo.com>
Date:   Mon May 8 17:06:09 2006 -0700

    [PATCH] PCI Bus Parity Status-broken hardware attribute, EDAC foundation
    
    Currently, the EDAC (error detection and correction) modules that are in
    the kernel contain some features that need to be moved. After some good
    feedback on the PCI Parity detection code and interface
    (http://www.ussg.iu.edu/hypermail/linux/kernel/0603.1/0897.html) this
    patch ADDs an new attribute to the pci_dev structure: Namely the
    'broken_parity_status' bit.
    
    When set this indicates that the respective hardware generates false
    positives of Parity errors.
    
    The EDAC "blacklist" solution was inferior and will be removed in a
    future patch.
    
    Also in this patch is a PCI quirk.c entry for an Infiniband PCI-X card
    which generates false positive parity errors.
    
    I am requesting comments on this AND on the possibility of a exposing
    this 'broken_parity_status' bit to userland via the PCI device sysfs
    directory for devices. This access would allow for enabling of this
    feature on new devices and for old devices that have their drivers
    updated. (SLES 9 SP3 did this on an ATI motherboard video device). There
    is a need to update such a PCI attribute between kernel releases.
    
    This patch just adds a storage place for the attribute and a quirk entry
    for a known bad PCI device. PCI Parity reaper/harvestor operations are
    in EDAC itself and will be refactored to use this PCI attribute instead
    of its own mechanisms (which are currently disabled) in the future.
    
    Signed-off-by: Doug Thompson <norsk5@xmission.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 53e4d30dd666d7f83598957ee4a415eefb47c9a6
Author: Rajesh Shah <rajesh.shah@intel.com>
Date:   Wed May 3 15:27:47 2006 -0700

    [PATCH] PCI: i386/x86_84: disable PCI resource decode on device disable
    
    When a PCI device is disabled via pci_disable_device(), it's still
    left decoding its BAR resource ranges even though its driver
    will have likely released those regions (and may even have
    unloaded). pci_enable_device() already explicitly enables
    BAR resource decode for the device being enabled. This patch
    disables resource decode for the PCI device being disabled,
    making it symmetric with the enable call.
    
    I saw this while doing something else, not because of a
    problem report. Still, seems to be the correct thing to do.
    
    Signed-off-by: Rajesh Shah <rajesh.shah@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9c273b95808c270149e9be9e172e4ef19f5d5c98
Author: Muthu Kumar <muthu.lkml@gmail.com>
Date:   Fri Apr 28 00:42:21 2006 -0700

    [PATCH] PCI ACPI: Rename the functions to avoid multiple instances.
    
    There were two instances of pci_acpi_init(), one in
    drivers/pci/pci-acpi.c and another in arch/i386/pci/acpi.c.
    Rename the one in pci-acpi.c and make it consistent with
    other names in the same file.
    
    Signed-off-by: Muthukumar R <muthur@gmail.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit a1e022b3aeacf633a6c8e8f0eb04d9c9e44b4fcd
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Fri Apr 28 11:37:38 2006 -0700

    [PATCH] PCI: don't enable device if already enabled
    
    If a device is already enabled, don't bother reenabling it.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Acked-By: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9f125d30487cea72542a84b4835c037163c7f3d5
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Sat Apr 29 10:59:08 2006 +0200

    [PATCH] PCI: Add a "enable" sysfs attribute to the pci devices to allow userspace (Xorg) to enable devices without doing foul direct access
    
    This patch adds an "enable" sysfs attribute to each PCI device. When read it
    shows the "enabled-ness" of the device, but you can write a "0" into it to
    disable a device, and a "1" to enable it.
    
    This later is needed for X and other cases where userspace wants to enable
    the BARs on a device (typical example: to run the video bios on a secundary
    head). Right now X does all this "by hand" via bitbanging, that's just evil.
    This allows X to no longer do that but to just let the kernel do this.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    CC: Peter Jones <pjones@redhat.com>
    Acked-by: Dave Airlie <airlied@linux.ie>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 75acfecaa031c0e1bc412cee4fe58ba49ff3406c
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Mon May 1 10:43:46 2006 -0500

    [PATCH] PCI: Add pci_assign_resource_fixed -- allow fixed address assignments
    
    PCI: Add pci_assign_resource_fixed -- allow fixed address assignments
    
    On some embedded systems the PCI address for hotplug devices are not only
    known a priori but are required to be at a given PCI address for other
    master in the system to be able to access.
    
    An example of such a system would be an FPGA which is setup from user space
    after the system has booted.  The FPGA may be access by DSPs in the system
    and those DSPs expect the FPGA at a fixed PCI address.
    
    Added pci_assign_resource_fixed() as a way to allow assignment of the PCI
    devices's BARs at fixed PCI addresses.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ea28502d5d0fc624777a8a6b4d6865d282055b05
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Fri Jun 9 11:28:29 2006 -0700

    [PATCH] PCI: fix to pci ignore pre-set 64-bit bars on 32-bit platforms
    
    When we detect a 64-bit pre-set address in a BAR on a 32-bit platform,
    we disable it and treat it as if it had been unset, thus allowing the
    general address assignment code to assign a new address to it when the
    device is enabled.  This can happen either if the firmware assigns
    64-bit addresses; additionally, some cards have been found "in the
    wild" which do not come out of reset with all the BAR registers set to
    zero.
    
    Unfortunately, the patch that implemented this tested the low part of
    the address instead of the high part of the address.  This patch fixes
    that.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 17d6dc8ff098cc8c57941c82f7702804302b1ea1
Author: H. Peter Anvin <hpa@c2micro.com>
Date:   Tue Apr 18 17:19:52 2006 -0700

    [PATCH] PCI: Ignore pre-set 64-bit BARs on 32-bit platforms
    
    [pci] Ignore pre-set 64-bit BARs on 32-bit platforms
    
    Currently, Linux always rejects a device which has a pre-set 64-bit
    address on a 32-bit platform.  On systems which do not do PCI
    initialization in firmware, this causes some devices which don't
    correctly power up with all BARs zero to fail.
    
    This patch makes the kernel automatically zero out such an address
    (thus treating it as if it had not been set at all, meaning it will
    assign an address if necessary).
    
    I have done this only for devices, not bridges.  It seems potentially
    hazardous to do for bridges.
    
    Signed-off-by: H. Peter Anvin <hpa@c2micro.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 83821d3f558dc651e555d62182ed0c95651f41a6
Author: Mark Maule <maule@sgi.com>
Date:   Fri Apr 14 16:03:54 2006 -0500

    [PATCH] PCI: altix: msi support
    
    MSI callouts for altix.  Involves a fair amount of code reorg in sn irq.c
    code as well as adding some extensions to the altix PCI provider abstaction.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 10083072bfabc40bc47306e512c158c57cf55c2e
Author: Mark Maule <maule@sgi.com>
Date:   Fri Apr 14 16:03:49 2006 -0500

    [PATCH] PCI: per-platform IA64_{FIRST,LAST}_DEVICE_VECTOR definitions
    
    Abstract IA64_FIRST_DEVICE_VECTOR/IA64_LAST_DEVICE_VECTOR since SN platforms
    use a subset of the IA64 range.  Implement this by making the above macros
    global variables which the platform can override in it setup code.
    
    Also add a reserve_irq_vector() routine used by SN to mark a vector's as
    in-use when that weren't allocated through assign_irq_vector().
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit fd58e55fcf5568e51da2ed54d7acd049c3fdb184
Author: Mark Maule <maule@sgi.com>
Date:   Mon Apr 10 21:17:48 2006 -0500

    [PATCH] PCI: msi abstractions and support for altix
    
    Abstract portions of the MSI core for platforms that do not use standard
    APIC interrupt controllers.  This is implemented through a new arch-specific
    msi setup routine, and a set of msi ops which can be set on a per platform
    basis.
    
    Signed-off-by: Mark Maule <maule@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c34b4c734482dda750deb6089521f7c891b48736
Author: Brice Goglin <brice@myri.com>
Date:   Tue May 9 10:52:09 2006 -0700

    [PATCH] PCI: Add PCI_CAP_ID_VNDR
    
    Add the vendor-specific extended capability PCI_CAP_ID_VNDR.  It will be
    used by the Myri-10G Ethernet driver (will be submitted soon).
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 789e7dc8ee6cfb7928208b077d0799d81196e9bb
Merge: 28e4b22... 9c64f97...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 21 11:23:13 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/gregkh/pci-2.6: (30 commits)
      [PATCH] PCI Hotplug: Fix recovery path from errors during pcie_init()
      [PATCH] PCI Hotplug: fake NULL pointer dereferences in IBM Hot Plug Controller Driver
      [PATCH] shpchp: Cleanup improper info messages
      [PATCH] shpchp: Remove Unused hpc_evelnt_lock
      [PATCH] shpchp: Cleanup interrupt polling timer
      [PATCH] shpchp: Cleanup SHPC commands
      [PATCH] shpchp: Cleanup interrupt handler
      [PATCH] shpchp: Remove unnecessary hpc_ctlr_handle check
      [PATCH] pciehp: Implement get_address callback
      [PATCH] pciehp: Add missing pci_dev_put
      [PATCH] pciehp: Replace pci_find_slot() with pci_get_slot()
      [PATCH] SGI Hotplug: Incorrect power status
      [PATCH] shpchp: Create shpchpd at controller probe time
      [PATCH] shpchp: Mask Global SERR and Intr at controller release time
      [PATCH] SHPC: Fix SHPC Contoller SERR-INT Register bits access
      [PATCH] SHPC: Fix SHPC Logical Slot Register bits access
      [PATCH] SHPC: Cleanup SHPC Logical Slot Register bits access
      [PATCH] SHPC: Cleanup SHPC Logical Slot Register access
      [PATCH] SHPC: Cleanup SHPC register access
      [PATCH] pciehp: Fix programming hotplug parameters
      ...

commit 28e4b224955cbe30275b2a7842e729023a4f4b03
Merge: 22ae813... 67d59df...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jun 21 11:18:25 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/jejb/scsi-misc-2.6: (85 commits)
      [SCSI] 53c700: remove reliance on deprecated cmnd fields
      [SCSI] hptiop: don't use cmnd->bufflen
      [SCSI] hptiop: HighPoint RocketRAID 3xxx controller driver
      [SCSI] aacraid: small misc. cleanups
      [SCSI] aacraid: Update supported product information
      [SCSI] aacraid: Fix return code interpretation
      [SCSI] scsi_transport_sas: fix panic in sas_free_rphy
      [SCSI] remove RQ_SCSI_* flags
      [SCSI] remove scsi_request infrastructure
      [SCSI] mptfusion: change driver revision to 3.03.10
      [SCSI] mptfc: abort of board reset leaves port dead requiring reboot
      [SCSI] mptfc: fix fibre channel infinite request/response loop
      [SCSI] mptfc: set fibre channel fw target missing timers to one second
      [SCSI] mptfusion: move fc event/reset handling to mptfc
      [SCSI] spi transport: don't allow dt to be set on SE or HVD buses
      [SCSI] aic7xxx: expose the bus setting to sysfs
      [SCSI] scsi: remove Documentation/scsi/cpqfc.txt
      [SCSI] drivers/scsi: Use ARRAY_SIZE macro
      [SCSI] Remove last page_address from dc395x.c
      [SCSI] hptiop: HighPoint RocketRAID 3xxx controller driver
      ...
    
    Fixed up conflicts in drivers/message/fusion/mptbase.c manually (due to
    the sparc interrupt cleanups)

commit b3818ed446fc41db41b5a38d934ac2b69fd2e0aa
Author: Dave Jones <davej@redhat.com>
Date:   Wed Jun 21 13:10:26 2006 -0400

    [AGPGART] Compile fix for ati-agp
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 99974c62b6acd4093b6f485132067089c39f967c
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Wed Jun 21 15:43:05 2006 +0100

    [MTD] NAND: S3C2410 convert prinks to dev_*()s
    
    Convert the use of printk() to the correct dev_info/dev_err
    functions
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0d420f9d6111b3a2fb7d5dd0180456eed469055d
Author: Savin Zlobec <tglx@cruncher.tec.linutronix.de>
Date:   Wed Jun 21 11:51:20 2006 +0200

    [MTD] NAND: Missing fixups
    
    The oob fixups broke a return value and missed one patch from
    the Mailing List.
    
    Signed-off-by: Savin Zlobec <savin@epico.si>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 2191fe3e39159e3375f4b7ec1420df149f154101
Author: Kelly Daly <kelly@au1.ibm.com>
Date:   Wed Jun 21 13:52:55 2006 +1000

    [POWERPC] re-enable OProfile for iSeries, using timer interrupt
    
    This patch removes the changes from an earlier patch that disables
    oProfile for iSeries within the oProfile KConfig (submitted Feb 23,
    2006).  Checks within the arch init for iSeries, still allowing profiling
    for timer interrupts (using firmware_has_feature).
    
    Signed-off-by: Kelly Daly <kelly@au.ibm.com>
    Acked-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0bb474a48e5d1ceb8e4005c7664b548c9834a784
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Jun 20 18:47:26 2006 +1000

    [POWERPC] support ibm,extended-*-frequency properties
    
    Support the ibm,extended-*-frequency properties found in recent POWER5
    firmware:
    
    cpus/PowerPC,POWER5@0/clock-frequency
                     59aa5880 (1504336000)
    cpus/PowerPC,POWER5@0/ibm,extended-clock-frequency
                     00000000 59aa5880
    cpus/PowerPC,POWER5@0/timebase-frequency
                     0b354b10 (188042000)
    cpus/PowerPC,POWER5@0/ibm,extended-timebase-frequency
                     00000000 0b354b10
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ccba051c373e342de240ba00d542dac67ae0eb7e
Author: Nathan Lynch <ntl@pobox.com>
Date:   Tue Jun 20 18:01:58 2006 +1000

    [POWERPC] Extra sanity check in EEH code
    
    Don't dereference a device node that isn't there.  A "shouldn't
    happen" case, but someone ran into it with a possibly misconfigured
    device tree.
    
    Signed-off-by: Nathan Lynch <ntl@pobox.com>
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d3c58fb177dc957af5cdac5ad1638d713fdb8765
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Jun 20 18:00:30 2006 +1000

    [POWERPC] Dont look for class-code in pci children
    
    Looking for class-code in PCI children breaks with direct slots. Lets
    just count all children.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1e92a550e80fef01ebcc0bcd0896109cdb986c72
Author: Anton Blanchard <anton@samba.org>
Date:   Thu Jun 15 14:11:22 2006 +1000

    [POWERPC] Fix mdelay badness on shared processor partitions
    
    On partitioned PPC64 systems where a partition is given 1/10 of a
    processor, we have seen mdelay() delaying for 10 times longer than it
    should.  The reason is that the generic mdelay(n) does n delays of 1
    millisecond each.  However, with 1/10 of a processor, we only get a
    one-millisecond timeslice every 10ms.  Thus each 1 millisecond delay
    loop ends up taking 10ms elapsed time.
    
    The solution is just to use the PPC64 udelay function, which uses the
    timebase to ensure that the delay is based on elapsed time rather than
    how much processing time the partition has been given.  (Yes, the
    generic mdelay uses the PPC64 udelay, but the problem is that the
    start time gets reset every millisecond, and each time it gets reset
    we lose another 9ms.)
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>
    Acked-by: Andrew Morton <akpm@osdl.org>

commit ddf5f75a16b3e7460ffee881795aa168dffcd0cf
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Tue Jun 20 02:30:33 2006 +0200

    [POWERPC] disable floating point exceptions for init
    
    Floating point exceptions should not be enabled by default,
    as this setting impacts the performance on some CPUs, in
    particular the Cell BE. Since the bits are inherited from
    parent processes, the place to change the default is the
    thread struct used for init.
    
    glibc sets this up correctly per thread in its fesetenv
    function, so user space should not be impacted by this
    setting. None of the other common libc implementations
    (uClibc, dietlibc, newlib, klibc) has support for fp
    exceptions, so they are unlikely to be hit by this either.
    
    There is a small risk that somebody wrote their own
    application that manually sets the fpscr bits instead
    of calling fesetenv, without changing the MSR bits as well.
    Those programs will break with this change.
    
    It probably makes sense to change glibc in the future
    to be more clever about FE bits, so that when running
    on a CPU where this is expensive, it disables exceptions
    ASAP, while it keeps them enabled on CPUs where running
    with exceptions on is cheaper than changing the state
    often.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 72abd54035a3d71fd8f02596e659257e8bba16ca
Author: Andreas Schwab <schwab@suse.de>
Date:   Mon Jun 19 22:45:04 2006 +0200

    [POWERPC] Unify ppc syscall tables
    
    Avoid duplication of the syscall table for the cell platform.  Based on an
    idea from David Woodhouse.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Acked-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 868ea0c9256b658b14603e1ad7361b81b92ccacd
Author: Mark A. Greer <mgreer@mvista.com>
Date:   Tue Jun 20 14:15:36 2006 -0700

    [POWERPC] mpic: add support for serial mode interrupts
    
    On Tue, Jun 20, 2006 at 02:01:26PM +1000, Benjamin Herrenschmidt wrote:
    > On Mon, 2006-06-19 at 13:08 -0700, Mark A. Greer wrote:
    > > MPC10x-style interrupt controllers have a serial mode that allows
    > > several interrupts to be clocked in through one INT signal.
    > >
    > > This patch adds the software support for that mode.
    >
    > You hard code the clock ratio... why not add a separate call to be
    > called after mpic_init,
    > something like mpic_set_serial_int(int mpic, int enable, int
    > clock_ratio) ?
    
    How's this?
    --
    
    MPC10x-style interrupt controllers have a serial mode that allows
    several interrupts to be clocked in through one INT signal.
    
    This patch adds the software support for that mode.
    
    Signed-off-by: Mark A. Greer <mgreer@mvista.com>
    --
    
     arch/powerpc/sysdev/mpic.c |   20 ++++++++++++++++++++
     include/asm-powerpc/mpic.h |   10 ++++++++++
     2 files changed, 30 insertions(+)
    --
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0aa8d15b01881ccaab5f2fb31eef33ced97ccb5f
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Mon Jun 19 15:07:40 2006 -0500

    [POWERPC] pseries: Print PCI slot location code on failure
    
    The PCI error recovery code will printk diagnostic info when
    a PCI error event occurs. Change the messages to include the slot
    location code, which is how most sysadmins will know the device.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 379507181a1e330d4f5b0fabe61cd43eccf09763
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:35 2006 +0200

    [POWERPC] spufs: one more fix for 64k pages
    
    The SPU context save/restore code is currently built
    for a 4k page size and we provide a _shipped version
    of it since most people don't have the spu toolchain
    that is needed to rebuild that code.
    
    This patch hardcodes the data structures to a 64k
    page alignment, which also guarantees 4k alignment
    but unfortunately wastes 60k of memory per SPU
    context that is created in the running system.
    
    We will follow up on this with another patch to
    reduce that overhead or maybe redo the context
    save/restore logic to do this part entirely different,
    but for now it should make experimental systems
    work with either page size.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c983294872ebccd4aacf1b8dd694ac2170feadc3
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:34 2006 +0200

    [POWERPC] spufs: fail spu_create with invalid flags
    
    At this time, all flags are invalid. Since we are
    planning to actually add valid flags in the future,
    we better check if any were passed by the user.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ba723fe2b2facc8d45b53701fec39aa429596759
Author: Masato Noguchi <Masato.Noguchi@jp.sony.com>
Date:   Mon Jun 19 20:33:33 2006 +0200

    [POWERPC] spufs: clear class2 interrupt status before wakeup
    
    SPU interrupt status must be cleared before handle it.
    Otherwise, kernel may drop some interrupt packet.
    
    Currently, class2 interrupt treated like:
     1) call callback to wake up waiting process
     2) mask raised mailbox interrupt
     3) clear interrupt status
    
    I changed like:
     1) mask raised mailbox interrupt
     2) clear interrupt status
     3) call callback to wake up waiting process
    
    Clearing status before masking will make spurious interrupt.
    Thus, it is necessary to hold by steps I described above, I think.
    
    Signed-off-by: Masato Noguchi <Masato.Noguchi@jp.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6e18b27bd0911d4d2495c6fdeeac0c047d915300
Author: Masato Noguchi <Masato.Noguchi@jp.sony.com>
Date:   Mon Jun 19 20:33:32 2006 +0200

    [POWERPC] spufs: fix Makefile for "make clean"
    
    added spu_{save,restore}_dump.h to target of 'make clean'
    
    Signed-off-by: Masato Noguchi <Masato.Noguchi@jp.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2eabbbd33ec39f690005aa186c57476598edc6b3
Author: Masato Noguchi <Masato.Noguchi@jp.sony.com>
Date:   Mon Jun 19 20:33:31 2006 +0200

    [POWERPC] spufs: remove stop_code from struct spu
    
    This patch remove 'stop_code' -- discarded member of struct spu.
    It is written at initialize and interrupt, but never read
    in current implementation.
    
    Signed-off-by: Masato Noguchi <Masato.Noguchi@jp.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a91942ae7ebd518006dcbeb2a1d7b147253c080e
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Jun 19 20:33:30 2006 +0200

    [POWERPC] spufs: fix spu irq affinity setting
    
    This changes the hypervisor abstraction of setting cpu affinity to a
    higher level to avoid platform dependent interrupt controller
    routines.  I replaced spu_priv1_ops:spu_int_route_set() with a
    new routine spu_priv1_ops:spu_cpu_affinity_set().
    
    As a by-product, this change eliminated what looked like an
    existing bug in the set affinity code where spu_int_route_set()
    mistakenly called int_stat_get().
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 540270d82db943855538cea5d0c790e7e669dda0
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Jun 19 20:33:29 2006 +0200

    [POWERPC] spufs: further abstract priv1 register access
    
    To support muti-platform binaries the spu hypervisor accessor
    routines must have runtime binding.
    
    I removed the existing statically linked routines in spu.h
    and spu_priv1_mmio.c and created new accessor routines in spu_priv1.h
    that operate indirectly through an ops struct spu_priv1_ops.
    spu_priv1_mmio.c contains the instance of the accessor routines
    for running on raw hardware.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c01ea72a3b8abb7baa4291a1876b82599867035a
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Mon Jun 19 20:33:28 2006 +0200

    [POWERPC] spufs: split the Cell BE support into generic and platform dependant parts
    
    Creates new config variables PPC_CELL_NATIVE and PPC_IBM_CELL_BLADE.
    The existing CONFIG_PPC_CELL is now used to denote the generic
    Cell processor support.
    
    PPC_CELL = make descends into platforms/cell
    PPC_CELL_NATIVE = add bare metal support
    PPC_IBM_CELL_BLADE = add blade device drivers, etc.
    
    Also renames spu_priv1.c to spu_priv1_mmio.c.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e46a0237fda640f02bc4cb3d9702b6ee91bfd6e4
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:27 2006 +0200

    [POWERPC] spufs: dont try to access SPE channel 1 count
    
    The save/restore sequence for SPE contexts currently attempts to save
    and restore the channel count for SPE channel 1 (the SPU_WriteEventMask
    channel.  But the CBE architecture (section 9.11.2) clearly states
    that this channel does not have an associated count.  Hardware simply
    ignores the attempt to write this count, but the simulator generates
    a warning message.
    
    WARNING: 279721590: SPE7: Attempt to write channel count for CH 1 with
    no associated count is ignored.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ecec21770d87a5035cfd210cfdb22e1935b0c4a6
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Mon Jun 19 20:33:26 2006 +0200

    [POWERPC] spufs: use kzalloc in create_spu
    
    Clean up create_spu() a little by using kzalloc instead of kmalloc +
    assignments.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 970f1baae78ff99b7536464214d4c78dde4551e2
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:25 2006 +0200

    [POWERPC] spufs: fix initial state of wbox file
    
    The wbox channel count of an spu is now initialized
    to four for the saved context. This makes it possible
    to write to the mailbox right away without waiting
    for the SPE to become scheduled first.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7b1a701480fb17b7f78b95b257bfc90a4f949d04
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:24 2006 +0200

    [POWERPC] spufs: add a phys-id attribute to each SPU context
    
    For performance analysis, it is often interesting to know
    which physical SPE a thread is currently running on, and,
    more importantly, if it is running at all.
    
    This patch adds a simple attribute to each SPU directory
    with that information.
    The attribute is read-only and called 'phys-id'. It contains
    an ascii string with the number of the physical SPU (e.g.
    "0x5"), or alternatively the string "0xffffffff" (32 bit -1)
    when it is not running at all at the time that the file
    is read.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 724bd80e8102ac137868b23fad2b06af65f8e168
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:23 2006 +0200

    [POWERPC] spufs: set up correct SLB entries for 64k pages
    
    spufs currently knows only 4k pages and 16M hugetlb
    pages. Make it use the regular methods for deciding on
    the SLB bits.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0309f02d8e1b68811e513bdd06015672d0696af5
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Mon Jun 19 20:33:22 2006 +0200

    [POWERPC] spufs: fix deadlock in spu_create error path
    
    spufs_rmdir tries to acquire the spufs root
    i_mutex, which is already held by spufs_create_thread.
    
    This was tracked as Bug #H9512.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d9379c4bcee7046182edf45eeab349334421416e
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:21 2006 +0200

    [POWERPC] spufs: restore mapping of mssync register
    
    A recent change to the way that the mfc file gets mapped made it
    impossible to map the SPE Multi-Source Synchronization register
    into user space, but that may be needed by some applications.
    
    This restores the missing functionality.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 91edfa49b97f0b0fafac5c8d5f171fc183782ce6
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:20 2006 +0200

    [POWERPC] cell: always build spu base into the kernel
    
    The spu_base module is rather deeply intermixed with the
    core kernel, so it makes sense to have that built-in.
    This will let us extend the base in the future without
    having to export more core symbols just for it.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1d64093f6627a7eef1ed0fe005463f0a5ea25a5f
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Mon Jun 19 20:33:19 2006 +0200

    [POWERPC] cell: register SPUs as sysdevs
    
    SPUs are registered as system devices, exposing attributes through
    sysfs. Since the sysdev includes a kref, we can remove the one in
    struct spu (it isn't used at the moment anyway).
    
    Currently only the interrupt source and numa node attributes are added.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0f0f90c304b42d8ce7fc5958de894bdcff3a0ca1
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:18 2006 +0200

    [POWERPC] cell: update defconfig
    
    Enable some of the most requested features in defconfig
    and refresh with the latest powerpc.git Kconfig files.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b40feec8efbe609a3a38bca1f18d3ba4d590563a
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Jun 19 20:33:17 2006 +0200

    [POWERPC] cell: fix interrupt priority handling
    
    Checking the priority field to test for irq validity is
    completely bogus and breaks with future external interrupt
    controllers.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit acf7d76827a577059636e949079021e6af6dd702
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Mon Jun 19 20:33:16 2006 +0200

    [POWERPC] cell: add RAS support
    
    This is a first version of support for the Cell BE "Reliability,
    Availability and Serviceability" features.
    
    It doesn't yet handle some of the RAS interrupts (the ones described in
    iic_is/iic_irr), I'm still working on a proper way to expose these. They
    are essentially a cascaded controller by themselves (sic !) though I may
    just handle them locally to the iic driver. I need also to sync with
    David Erb on the way he hooked in the performance monitor interrupt.
    
    So that's all for 2.6.17 and I'll do more work on that with my rework of
    the powerpc interrupt layer that I'm hacking on at the moment.
    
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ef82a306b46dbedaecbb154b24d05dfab937df35
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:55 2006 -0500

    [POWERPC] Add Vitesse 8244 PHY for MPC8641 HPCN platform.
    
    Signed-off-by: Kriston Carson <KristonCarson@freescale.com>
    Signed-off-by: Xianghua Xiao <x.xiao@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Acked-by: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2097c7f04af7fb962ab8676ed8083f350ed885f7
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:54 2006 -0500

    [POWERPC] Document I2C_MPC option for 86xx too.
    
    The same I2C driver found on 85xx, etc., can be used for 86xx too.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6b543404058a5ffdca8c48e95e0b8a69bb4bdba9
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:51 2006 -0500

    [POWERPC] Add 8641 Register space and IRQ definitions.
    
    Signed-off-by: Jeff Brown <Jeff.Brown@freescale.com>
    Signed-off-by: Xianghua Xiao <x.xiao@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b809b3e86f39651475b30ceb1caf535071534d4d
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:48 2006 -0500

    [POWERPC] Add mpc8641hpcn PCI/PCI-Express platform files.
    
    Signed-off-by: Xianghua Xiao <x.xiao@freescale.com>
    Signed-off-by: Wei Zhang <Wei.Zhang@freescale.com>
    Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4ca4b6274c30d53d22014fb6974efe2b3e52cfdc
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:45 2006 -0500

    [POWERPC] Add the MPC8641 HPCN platform files.
    
    Signed-off-by: Xianghua Xiao <x.xiao@freescale.com>
    Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
    Signed-off-by: Wei Zhang <Wei.Zhang@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ee0339f205d60375c5ce1653c0dc318c6ec72668
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:44 2006 -0500

    [POWERPC] Add starting of secondary 86xx CPUs.
    
    Clear the high BATS during load_up_mmu if FTR_HAS_HIGH_BATS.
    Allow just a bit more time for secondary CPUs to phone home.
    
    Signed-off-by: Wei Zhang <Wei.Zhang@freescale.com>
    Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9674ed38d8e4a9ce15c61b4306ef803cad0e1dc0
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:40 2006 -0500

    [POWERPC] Add 8641 CPU table entry.
    
    Signed-off-by: Wei Zhang <Wei.Zhang@freescale.com>
    Signed-off-by: Xianghua Xiao <x.xiao@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 96abe9358becb543c21121699c711897374bcbdf
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:37 2006 -0500

    [POWERPC] Add mpc8641_hpcn_defconfig config file.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c9b484b5c1201321f40b04870e8b417033b6fe76
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:52:35 2006 -0500

    [POWERPC] Add the mpc8641 hpcn Kconfig and Makefiles.
    
    Signed-off-by: Xianghua Xiao <x.xiao@freescale.com>
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8a30088794ff426cd3e21557db8f3d2687ac6695
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:51:09 2006 -0500

    [POWERPC] Prevent duplicate lmb reservations for Device Tree blob.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2198c070498850c16d65c09bc587e3f5042126ef
Author: Jon Loeliger <jdl@jdl.com>
Date:   Sat Jun 17 17:49:42 2006 -0500

    [POWERPC] Guard L3CR references with CPU_FTR_L3CR.
    
    Signed-off-by: Jon Loeliger <jdl@freescale.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7932f0b82ff1db35a5ed8d5825d51cafe15fa6db
Author: John Rose <johnrose@austin.ibm.com>
Date:   Thu Jun 15 17:32:15 2006 -0500

    [POWERPC] RTAS delay, fix module build breaks
    
    Export both news RTAS delay functions, and change the scanlog module to
    use the new delay functions.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 22ae813b85df7c0b0fc7c8d6f336d6a9f566ff97
Author: Brice Goglin <brice@myri.com>
Date:   Tue Jun 20 20:03:02 2006 -0700

    [PATCH] add __iowrite64_copy
    
    Introduce __iowrite64_copy.  It will be used by the Myri-10G Ethernet
    driver to post requests to the NIC.  This driver will be submitted soon.
    
    __iowrite64_copy copies to I/O memory in units of 64 bits when possible (on
    64 bit architectures).  It reverts to __iowrite32_copy on 32 bit
    architectures.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 34641a58a227e498adf471ab016bd054cc399d7e
Merge: 2eec0e0... 7136b80...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 20:01:16 2006 -0700

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/bcollins/linux1394-2.6
    
    * git://git.kernel.org/pub/scm/linux/kernel/git/bcollins/linux1394-2.6: (28 commits)
      eth1394: replace __constant_htons by htons
      ieee1394: adjust code formatting in highlevel.c
      ieee1394: hl_irqs_lock is taken in hardware interrupt context
      ieee1394_core: switch to kthread API
      ieee1394: sbp2: Kconfig fix
      ieee1394: add preprocessor constant for invalid csr address
      sbp2: fix deregistration of status fifo address space
      [PATCH] eth1394: endian fixes
      Fix broken suspend/resume in ohci1394
      sbp2: use __attribute__((packed)) for on-the-wire structures
      sbp2: provide helptext for CONFIG_IEEE1394_SBP2_PHYS_DMA and mark it experimental
      Update feature removal of obsolete raw1394 ISO requests.
      sbp2: fix S800 transfers if phys_dma is off
      sbp2: remove ohci1394 specific constant
      ohci1394: make phys_dma parameter read-only
      ohci1394: set address range properties
      ieee1394: extend lowlevel API for address range properties
      sbp2: log number of supported concurrent logins
      sbp2: remove manipulation of inquiry response
      ieee1394: save RAM by using a single tlabel for broadcast transactions
      ...

commit 2eec0e0842ef747027eb9181d5f50d7157184d57
Author: Cedric Le Goater <clg@fr.ibm.com>
Date:   Mon Jun 19 21:10:44 2006 -0700

    [PATCH] s390: add __raw_writeq required by __iowrite64_copy
    
    It also adds all the related quad routines.
    
    Signed-off-by: Cedric Le Goater <clg@fr.ibm.com>
    Acked-by: Heiko Carstens <heiko.carstens@de.ibm.com>
    Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 6b41fd1785f4effe2f3bd40da864415812f5b8c9
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 19:44:03 2006 -0700

    Fix up CFQ scheduler for recent rbtree node shrinkage
    
    The color is now in the low bits of the parent pointer, and initializing
    it to 0 happens as part of the whole memset above, so just remove the
    unnecessary RB_CLEAR_COLOR.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 58dfd9c16e88b9d790e7df8f2c5b03b7887db54c
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Wed Jun 21 10:53:54 2006 +1000

    [FORCEDETH] Fix xmit_lock/netif_tx_lock after merge
    
    There has been an update to the forcedeth driver that added a few new
    uses of xmit_lock which is no longer meant to be used directly.  This
    patch replaces them with netif_tx_lock_bh.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 050335db2a777ffaa859d77beb05fffe9e8c5ae9
Merge: a4cfae1... 905f146...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 17:52:36 2006 -0700

    Merge branch 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm
    
    * 'devel' of master.kernel.org:/home/rmk/linux-2.6-arm: (42 commits)
      [ARM] Fix tosa build error
      [ARM] 3610/1: Make reboot work on Versatile
      [ARM] 3609/1: S3C24XX: defconfig update for s3c2410_defconfig
      [ARM] 3591/1: Anubis: IDE device definitions
      [ARM] Include asm/hardware.h not asm/arch/hardware.h
      [ARM] 3594/1: Poodle: Add touchscreen support + other updates
      [ARM] 3564/1: sharpsl_pm: Abstract some machine specific parameters
      [ARM] 3561/1: Poodle: Correct the MMC/SD power control
      [ARM] 3593/1: Add reboot and shutdown handlers for Zaurus handhelds
      [ARM] 3599/1: AT91RM9200 remove global variables
      [ARM] 3607/1: AT91RM9200 misc fixes
      [ARM] 3605/1: AT91RM9200 Power Management
      [ARM] 3604/1: AT91RM9200 New boards
      [ARM] 3603/1: AT91RM9200 remove old files
      [ARM] 3592/1: AT91RM9200 Serial driver update
      [ARM] 3590/1: AT91RM9200 Platform devices support
      [ARM] 3589/1: AT91RM9200 DK/EK board update
      [ARM] 3588/1: AT91RM9200 CSB337/637 board update
      [ARM] 3587/1: AT91RM9200 hardware headers
      [ARM] 3586/1: AT91RM9200 header update
      ...

commit 70ac4385a13f78bc478f26d317511893741b05bd
Merge: d59bf96... 077e989...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Jun 20 20:46:21 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/
    
    Conflicts:
    
    	include/linux/nfs_fs.h
    
    Fixed up conflict with kernel header updates.

commit a4cfae13cef6a700a04b13ba1d819c0641b1b26f
Merge: be883da... ff7512e...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 17:39:53 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6:
      [ATM]: fix broken uses of NIPQUAD in net/atm
      [SCTP]: sctp_unpack_cookie() fix
      [SCTP]: Fix unintentional change to SCTP_ASSERT when !SCTP_DEBUG
      [NET]: Prevent multiple qdisc runs
      [CONNECTOR]: Initialize subsystem earlier.
      [NETFILTER]: xt_sctp: fix endless loop caused by 0 chunk length

commit be883da7594b0a2a02074e683673ae0e522566a4
Merge: 077e989... 4c5eb38...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 17:39:28 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/sparc-2.6:
      [SPARC64]: Update defconfig.
      [SPARC64]: Don't double-export synchronize_irq.
      [SPARC64]: Move over to GENERIC_HARDIRQS.
      [SPARC64]: Virtualize IRQ numbers.
      [SPARC64]: Kill ino_bucket->pil
      [SPARC]: Kill __irq_itoa().
      [SPARC64]: bp->pil can never be zero
      [SPARC64]: Send all device interrupts via one PIL.
      [SPARC]: Fix iommu_flush_iotlb end address
      [SPARC]: Mark smp init functions as cpuinit
      [SPARC]: Add missing rw can_lock macros
      [SPARC]: Setup cpu_possible_map
      [SPARC]: Add topology_init()

commit 077e98945db7e54a9865b5f29a1f02f531eca414
Merge: d9eaec9... 92af11c...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 15:38:12 2006 -0700

    Merge branch 'rio.b19' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/bird
    
    * 'rio.b19' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/bird:
      [PATCH] missing readb/readw in rio
      [PATCH] copy_to_user() from iomem is a bad thing
      [PATCH] forgotten swap of copyout() arguments
      [PATCH] handling rio MEMDUMP
      [PATCH] fix rio_copy_to_card() for OLDPCI case
      [PATCH] uses of ->Copy() in rioroute are bogus
      [PATCH] bogus order of copy_from_user() arguments
      [PATCH] rio ->Copy() expects the sourse as first argument
      [PATCH] trivial annotations in rio

commit d9eaec9e295a84a80b663996d0489fcff3a1dca9
Merge: cee4cca... 4175710...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 15:37:56 2006 -0700

    Merge branch 'audit.b21' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current
    
    * 'audit.b21' of git://git.kernel.org/pub/scm/linux/kernel/git/viro/audit-current: (25 commits)
      [PATCH] make set_loginuid obey audit_enabled
      [PATCH] log more info for directory entry change events
      [PATCH] fix AUDIT_FILTER_PREPEND handling
      [PATCH] validate rule fields' types
      [PATCH] audit: path-based rules
      [PATCH] Audit of POSIX Message Queue Syscalls v.2
      [PATCH] fix se_sen audit filter
      [PATCH] deprecate AUDIT_POSSBILE
      [PATCH] inline more audit helpers
      [PATCH] proc_loginuid_write() uses simple_strtoul() on non-terminated array
      [PATCH] update of IPC audit record cleanup
      [PATCH] minor audit updates
      [PATCH] fix audit_krule_to_{rule,data} return values
      [PATCH] add filtering by ppid
      [PATCH] log ppid
      [PATCH] collect sid of those who send signals to auditd
      [PATCH] execve argument logging
      [PATCH] fix deadlocks in AUDIT_LIST/AUDIT_LIST_RULES
      [PATCH] audit_panic() is audit-internal
      [PATCH] inotify (5/5): update kernel documentation
      ...
    
    Manual fixup of conflict in unclude/linux/inotify.h

commit 905f14672e6d0552bfde954d5f7adb5f2c7a7960
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 20 23:27:37 2006 +0100

    [ARM] Fix tosa build error
    
    tosa.c references mdelay(), but was missing linux/delay.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cee4cca740d209bcb4b9857baa2253d5ba4e3fbe
Merge: 2edc322... 9348f0d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 15:10:08 2006 -0700

    Merge git://git.infradead.org/hdrcleanup-2.6
    
    * git://git.infradead.org/hdrcleanup-2.6: (63 commits)
      [S390] __FD_foo definitions.
      Switch to __s32 types in joystick.h instead of C99 types for consistency.
      Add <sys/types.h> to headers included for userspace in <linux/input.h>
      Move inclusion of <linux/compat.h> out of user scope in asm-x86_64/mtrr.h
      Remove struct fddi_statistics from user view in <linux/if_fddi.h>
      Move user-visible parts of drivers/s390/crypto/z90crypt.h to include/asm-s390
      Revert include/media changes: Mauro says those ioctls are only used in-kernel(!)
      Include <linux/types.h> and use __uXX types in <linux/cramfs_fs.h>
      Use __uXX types in <linux/i2o_dev.h>, include <linux/ioctl.h> too
      Remove private struct dx_hash_info from public view in <linux/ext3_fs.h>
      Include <linux/types.h> and use __uXX types in <linux/affs_hardblocks.h>
      Use __uXX types in <linux/divert.h> for struct divert_blk et al.
      Use __u32 for elf_addr_t in <asm-powerpc/elf.h>, not u32. It's user-visible.
      Remove PPP_FCS from user view in <linux/ppp_defs.h>, remove __P mess entirely
      Use __uXX types in user-visible structures in <linux/nbd.h>
      Don't use 'u32' in user-visible struct ip_conntrack_old_tuple.
      Use __uXX types for S390 DASD volume label definitions which are user-visible
      S390 BIODASDREADCMB ioctl should use __u64 not u64 type.
      Remove unneeded inclusion of <linux/time.h> from <linux/ufs_fs.h>
      Fix private integer types used in V4L2 ioctls.
      ...
    
    Manually resolve conflict in include/linux/mtd/physmap.h

commit 2edc322d420a4cec8dbc184a1220ecd7fa9f8ae6
Merge: be967b7... 2f3243a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 14:51:22 2006 -0700

    Merge git://git.infradead.org/~dwmw2/rbtree-2.6
    
    * git://git.infradead.org/~dwmw2/rbtree-2.6:
      [RBTREE] Switch rb_colour() et al to en_US spelling of 'color' for consistency
      Update UML kernel/physmem.c to use rb_parent() accessor macro
      [RBTREE] Update hrtimers to use rb_parent() accessor macro.
      [RBTREE] Add explicit alignment to sizeof(long) for struct rb_node.
      [RBTREE] Merge colour and parent fields of struct rb_node.
      [RBTREE] Remove dead code in rb_erase()
      [RBTREE] Update JFFS2 to use rb_parent() accessor macro.
      [RBTREE] Update eventpoll.c to use rb_parent() accessor macro.
      [RBTREE] Update key.c to use rb_parent() accessor macro.
      [RBTREE] Update ext3 to use rb_parent() accessor macro.
      [RBTREE] Change rbtree off-tree marking in I/O schedulers.
      [RBTREE] Add accessor macros for colour and parent fields of rb_node

commit be967b7e2f7747a5ebf2a07ee627d9338491e784
Merge: eef1142... 7bc3312...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 14:50:31 2006 -0700

    Merge git://git.infradead.org/mtd-2.6
    
    * git://git.infradead.org/mtd-2.6: (199 commits)
      [MTD] NAND: Fix breakage all over the place
      [PATCH] NAND: fix remaining OOB length calculation
      [MTD] NAND Fixup NDFC merge brokeness
      [MTD NAND] S3C2410 driver cleanup
      [MTD NAND] s3c24x0 board: Fix clock handling, ensure proper initialisation.
      [JFFS2] Check CRC32 on dirent and data nodes each time they're read
      [JFFS2] When retiring nextblock, allocate a node_ref for the wasted space
      [JFFS2] Mark XATTR support as experimental, for now
      [JFFS2] Don't trust node headers before the CRC is checked.
      [MTD] Restore MTD_ROM and MTD_RAM types
      [MTD] assume mtd->writesize is 1 for NOR flashes
      [MTD NAND] Fix s3c2410 NAND driver so it at least _looks_ like it compiles
      [MTD] Prepare physmap for 64-bit-resources
      [JFFS2] Fix more breakage caused by janitorial meddling.
      [JFFS2] Remove stray __exit from jffs2_compressors_exit()
      [MTD] Allow alternate JFFS2 mount variant for root filesystem.
      [MTD] Disconnect struct mtd_info from ABI
      [MTD] replace MTD_RAM with MTD_GENERIC_TYPE
      [MTD] replace MTD_ROM with MTD_GENERIC_TYPE
      [MTD] remove a forgotten MTD_XIP
      ...

commit eef11427edcb821b63920219f89379fab84198b9
Merge: c9ab097... 14228a4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 14:49:45 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-serial
    
    * master.kernel.org:/home/rmk/linux-2.6-serial:
      [SERIAL] PARPORT_SERIAL should depend on SERIAL_8250_PCI

commit c9ab09710ecb071031b0a04f3f9d7e686c0a75e0
Merge: ff91445... 12223da...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 14:49:29 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-mmc
    
    * master.kernel.org:/home/rmk/linux-2.6-mmc:
      [MMC] Add (MMC) to entry in MAINTAINERS file
      [MMC] sdhci truncated pointer fix

commit ff9144530e9cfe8923e00172e3f8ff83c3b8ff8b
Merge: 25f42b6... 96ce238...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Tue Jun 20 14:49:00 2006 -0700

    Merge master.kernel.org:/home/rmk/linux-2.6-arm
    
    * master.kernel.org:/home/rmk/linux-2.6-arm: (22 commits)
      [ARM] 3559/1: S3C2442: core and serial port
      [ARM] 3557/1: S3C24XX: centralise and cleanup uart registration
      [ARM] 3558/1: SMDK24XX: LED platform devices
      [ARM] 3534/1: add spi support to lubbock platform
      [ARM] 3554/1: ARM: Fix dyntick locking
      [ARM] 3553/1: S3C24XX: earlier print of cpu idcode info
      [ARM] 3552/1: S3C24XX: Move VA of GPIO for low-level debug
      [ARM] 3551/1: S3C24XX: PM code failes to compile with CONFIG_DCACHE_WRITETHROUGH
      [ARM] 3550/1: OSIRIS: fix serial port map for 1:1
      [ARM] 3548/1: Fix the ARMv6 CPU id in compressed/head.S
      [ARM] 3335/1: Old-abi Thumb sys_syscall broken
      [ARM] 3467/1: [3/3] Support for Philips PNX4008 platform: defconfig
      [ARM] 3466/1: [2/3] Support for Philips PNX4008 platform: chip support
      [ARM] 3465/1: [1/3] Support for Philips PNX4008 platform: headers
      [ARM] 3407/1: lpd7x: documetation update
      [ARM] 3406/1: lpd7x: compilation fix for smc91x
      [ARM] 3405/1: lpd7a40x: CPLD ssp driver
      [ARM] 3404/1: lpd7a40x: AMBA CLCD support
      [ARM] 3403/1: lpd7a40x: updated default configurations
      [ARM] 3402/1: lpd7a40x: serial driver bug fix
      ...

commit 75ba632a01d4dc70d0a0f3a92b5ec9b4a3644b2d
Merge: 0fd1ffe... 25f42b6...
Author: Steve French <sfrench@us.ibm.com>
Date:   Tue Jun 20 20:36:38 2006 +0000

    Merge with /pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 4af6fee18822d012a15b4c9b8992e1f2793dfe0b
Author: Deepak Saxena <dsaxena@plexity.net>
Date:   Tue Jun 20 21:30:44 2006 +0100

    [ARM] 3610/1: Make reboot work on Versatile
    
    Patch from Deepak Saxena
    
    This patch makes soft reboot work on the Versatile board. Thanks to
    Catalin Marinas @ ARM for pointing out the proper way to do this.
    
    Signed-off-by: Deepak Saxena <dsaxena@plexity.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 098a4cb7c0c9bdd86e9d99f607e9f31206a914eb
Merge: ea75ee9... ec57b70...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 20 20:57:34 2006 +0100

    Merge S3Cxxxx branch

commit 7bc3312bef4d6f220812500c0de7868fb7625a41
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue Jun 20 20:05:05 2006 +0200

    [MTD] NAND: Fix breakage all over the place
    
    Following problems are addressed:
    
    - wrong status caused early break out of nand_wait()
    - removed the bogus status check in nand_wait() which
      is a relict of the abandoned support for interrupted
      erase.
    - status check moved to the correct place in read_oob
    - oob support for syndrom based ecc with strange layouts
    - use given offset in the AUTOOOB based oob operations
    
    Partially based on a patch from Vitaly Vool <vwool@ru.mvista.com>
    Thanks to Savin Zlobec <savin@epico.si> for tracking down the
    status problem.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7e4178f90eec862affc97469118d5008bd1b5bda
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Wed Jun 7 09:34:37 2006 +0400

    [PATCH] NAND: fix remaining OOB length calculation
    
    In nand_read_page_syndrome/nand_write_page_syndrome the calculation of
    the remaining oob length which is not used by the prepad/ecc/postpad
    areas is wrong.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit b6d5ee00e397b20dc88f7ffaa6f7651b71996a5c
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Fri Jun 16 18:10:09 2006 +0200

    [MTD] NAND Fixup NDFC merge brokeness
    
    Remove the remains of a broken merge.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ea75ee9ab8835ece099589c729574aa8aa94c0a6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 20 19:53:16 2006 +0100

    [ARM] Include asm/hardware.h not asm/arch/hardware.h
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3a8182bd886ab4197c9021645fac7a6f2bdc47ec
Merge: 695a9d2... faed568...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 20 19:49:07 2006 +0100

    Merge Zaurus branch

commit 695a9d236a6fd5a60557a02eff612880c37fe731
Merge: c322e24... 55c20c0...
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Tue Jun 20 19:48:18 2006 +0100

    Merge AT91 branch

commit 55c20c0af7fe7d5d09af4addfafcfe3bdc500f5d
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 19:31:39 2006 +0100

    [ARM] 3599/1: AT91RM9200 remove global variables
    
    Patch from Andrew Victor
    
    This patch removes some now unnecessary global variables -
    at91_master_clock, at91_serial_map, at91_console_port.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ec57b709c3dc2e8b7643c51fc4c3fdae42b29be2
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue Jun 20 19:31:06 2006 +0100

    [ARM] 3609/1: S3C24XX: defconfig update for s3c2410_defconfig
    
    Patch from Ben Dooks
    
    Update s3c2410_defconfig to latest kernel with the
    latest patches
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5c3fddced9f62f4b175ce400bb96b23f47626e50
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 19:30:20 2006 +0100

    [ARM] 3607/1: AT91RM9200 misc fixes
    
    Patch from Andrew Victor
    
    This final patch includes some general fixes.
    
    1. Link in pm.o if CONFIG_PM is enabled.  [Should have been included in
    patch 3605/1].
    2. Use __raw_readl()/__raw_writel() when accessing System Peripheral
    registers.
    3. Removed some unnecessary includes
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 907d6deb625cd7ff5fea3ef4b20dfb6c1c19c3ee
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 19:30:19 2006 +0100

    [ARM] 3605/1: AT91RM9200 Power Management
    
    Patch from Andrew Victor
    
    This patch adds the core Power Management support for the AT91RM9200
    processor.  It will support suspend-to-RAM and standby modes.
    
    The suspend-to-RAM functionality is not 100% complete.  The code that
    needs to be execute from the internal SRAM to restore the system is
    outstanding.  For now we just fall through to Standby mode.
    
    The AT91-specific at91_suspend_entering_slow_clock() function will
    eventually be replaced by clk_must_disable() once that functionality is
    added to mainline clock API.
    
    Patch from David Brownell.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 6902f523a328bba5af036699b1352389c0746526
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 19:30:18 2006 +0100

    [ARM] 3604/1: AT91RM9200 New boards
    
    Patch from Andrew Victor
    
    This patch adds support for an additional 4 AT91RM9200-based boards:
    
    1. Conitec ARM&EVA  [MACH_CARMEVA]
       (http://www.conitec.net/english/linuxboard.htm)
    
    2. KwikByte KB920x  [MACH_KB9200]
       (http://kwikbyte.com/KB9202_description_new.htm)
    
    3. Embest ATEB9200  [MACH_ATEB9200]
       (http://www.embedinfo.com/english/product/ATEB9200.asp)
    
    4. Sperry-Sun KAFA board  [MACH_KAFA]
       (unknown)
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d6bdbb8ef3e4a9cafc747e1444b4908f9f2f548d
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Tue Jun 20 19:27:34 2006 +0100

    [ARM] 3603/1: AT91RM9200 remove old files
    
    Patch from Andrew Victor
    
    This patch removes the now unnecessary
    include/asm-arm/arch-at91rm9200/pio.h file.  The pin configuration is
    now handled in the platform-device setup code
    (arch/arm/mach-at91rm9200/devices.c).
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c322e24b40b83bbdfa7c269bc0105e76a39e627f
Author: Liam Girdwood <Liam.Girdwood@wolfsonmicro.com>
Date:   Tue Jun 20 19:26:42 2006 +0100

    [ARM] 3606/1: PXA27x SSP Register definitions
    
    Patch from Liam Girdwood
    
    This patch adds some new PXA27x SSP port registers and also fixes the
    SSP slots per frame macro
    
    Changes:-
    
     o SSCR0_SlotPerFrm fixed
     o Added SSP port TSA, RSA, TSS and ACD registers
    
    Signed-off-by: Liam Girdwood <liam.girdwood@wolfsonmicro.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e6fea6a5e30efef56dee2b8455fde0811922055b
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 20 19:26:41 2006 +0100

    [ARM] 3602/1: ixp23xx: fix two typos
    
    Patch from Lennert Buytenhek
    
    Fix two typos in include/asm-arm/arch-ixp23xx.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4faf4e0e7d4e1935fbfc5043d3ebd8d51a3d898d
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Jun 20 19:24:07 2006 +0100

    [ARM] 3600/1: increase amba-pl010 UART_NR to 8
    
    Patch from Lennert Buytenhek
    
    The cirrus ep93xx has 3 pl010 UARTs, while amba-pl010.c only allows
    for 2 by default.  A while ago, I think we agreed on changing the 2
    to 8, but I don't see this in 2.6.17 yet.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit dfc7bd9c385a888851a2d009ba272099549f98cc
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Sun May 21 15:32:59 2006 +0200

    [WATCHDOG] convert AT91RM9200 watchdog to platform driver
    
    Converted to a platform driver.
    Added suspend/resume support - the watchdog is disabled during the
    sleep states.
    
    Original patch from David Brownell.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 58b519f3e5e491d5a3e320dc525f58ac439bdde4
Author: Wim Van Sebroeck <wim@iguana.be>
Date:   Sun May 21 12:48:44 2006 +0200

    [WATCHDOG] add WDIOC_GETTIMELEFT ioctl
    
    Some watchdog drivers have the ability to report the remaining time
    before the system will reboot. With the WDIOC_GETTIMELEFT ioctl
    you can now read the time left before the watchdog would reboot
    your system.
    
    The following drivers support this new IOCTL:
    i8xx_tco.c, pcwd_pci.c and pcwd_usb.c .
    
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit e05b59fe7927bc648ac3af3d59dc64a7ee6b22e2
Author: Corey Minyard <minyard@acm.org>
Date:   Wed Apr 19 22:40:53 2006 +0200

    [WATCHDOG] Pre-Timeout flags
    
    Some watchdog timers support the concept of a "pretimeout" which
    occurs some time before the real timeout.  The pretimeout can
    be delivered via an interrupt or NMI and can be used to panic
    the system when it occurs (so you get useful information instead
    of a blind reboot).
    
    Signed-off-by: Corey Minyard <minyard@acm.org>
    Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit d59bf96cdde5b874a57bfd1425faa45da915d0b7
Merge: 28df955... 25f42b6...
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Tue Jun 20 08:59:45 2006 -0400

    Merge branch 'master' of /home/trondmy/kernel/linux-2.6/

commit ff7512e1a2a3504649d3716a757f43807b6d26ef
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Jun 20 03:27:27 2006 -0700

    [ATM]: fix broken uses of NIPQUAD in net/atm
    
    NIPQUAD expects an l-value of type __be32, _NOT_ a pointer to __be32.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ca84481b69513f7bf341c7dd9897023a04d7d1d
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue Jun 20 03:26:14 2006 -0700

    [SCTP]: sctp_unpack_cookie() fix
    
    sizeof(pointer) != sizeof(array)...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 41757106b9ca7867dafb2404d618f947b4786fd7
Author: Steve Grubb <sgrubb@redhat.com>
Date:   Mon Jun 12 07:48:28 2006 -0400

    [PATCH] make set_loginuid obey audit_enabled
    
    Hi,
    
    I was doing some testing and noticed that when the audit system was disabled,
    I was still getting messages about the loginuid being set. The following patch
    makes audit_set_loginuid look at in_syscall to determine if it should create
    an audit event. The loginuid will continue to be set as long as there is a context.
    
    Signed-off-by: Steve Grubb <sgrubb@redhat.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 9c937dcc71021f2dbf78f904f03d962dd9bcc130
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jun 8 23:19:31 2006 -0400

    [PATCH] log more info for directory entry change events
    
    When an audit event involves changes to a directory entry, include
    a PATH record for the directory itself.  A few other notable changes:
    
        - fixed audit_inode_child() hooks in fsnotify_move()
        - removed unused flags arg from audit_inode()
        - added audit log routines for logging a portion of a string
    
    Here's some sample output.
    
    before patch:
    type=SYSCALL msg=audit(1149821605.320:26): arch=40000003 syscall=39 success=yes exit=0 a0=bf8d3c7c a1=1ff a2=804e1b8 a3=bf8d3c7c items=1 ppid=739 pid=800 auid=0 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=ttyS0 comm="mkdir" exe="/bin/mkdir" subj=root:system_r:unconfined_t:s0-s0:c0.c255
    type=CWD msg=audit(1149821605.320:26):  cwd="/root"
    type=PATH msg=audit(1149821605.320:26): item=0 name="foo" parent=164068 inode=164010 dev=03:00 mode=040755 ouid=0 ogid=0 rdev=00:00 obj=root:object_r:user_home_t:s0
    
    after patch:
    type=SYSCALL msg=audit(1149822032.332:24): arch=40000003 syscall=39 success=yes exit=0 a0=bfdd9c7c a1=1ff a2=804e1b8 a3=bfdd9c7c items=2 ppid=714 pid=777 auid=0 uid=0 gid=0 euid=0 suid=0 fsuid=0 egid=0 sgid=0 fsgid=0 tty=ttyS0 comm="mkdir" exe="/bin/mkdir" subj=root:system_r:unconfined_t:s0-s0:c0.c255
    type=CWD msg=audit(1149822032.332:24):  cwd="/root"
    type=PATH msg=audit(1149822032.332:24): item=0 name="/root" inode=164068 dev=03:00 mode=040750 ouid=0 ogid=0 rdev=00:00 obj=root:object_r:user_home_dir_t:s0
    type=PATH msg=audit(1149822032.332:24): item=1 name="foo" inode=164010 dev=03:00 mode=040755 ouid=0 ogid=0 rdev=00:00 obj=root:object_r:user_home_t:s0
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 6a2bceec0ea7fdc47aef9a3f2f771c201eaabe5d
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Fri Jun 2 13:16:01 2006 -0400

    [PATCH] fix AUDIT_FILTER_PREPEND handling
    
    Clear AUDIT_FILTER_PREPEND flag after adding rule to list.  This
    fixes three problems when a rule is added with the -A syntax:
    
        - auditctl displays filter list as "(null)"
        - the rule cannot be removed using -d
        - a duplicate rule can be added with -a
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 0a73dccc4fd472e65887eae6fbf4afc030541709
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 5 08:15:59 2006 -0400

    [PATCH] validate rule fields' types
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit f368c07d7214a7c41dfceb76c8db473b850f0229
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Fri Apr 7 16:55:56 2006 -0400

    [PATCH] audit: path-based rules
    
    In this implementation, audit registers inotify watches on the parent
    directories of paths specified in audit rules.  When audit's inotify
    event handler is called, it updates any affected rules based on the
    filesystem event.  If the parent directory is renamed, removed, or its
    filesystem is unmounted, audit removes all rules referencing that
    inotify watch.
    
    To keep things simple, this implementation limits location-based
    auditing to the directory entries in an existing directory.  Given
    a path-based rule for /foo/bar/passwd, the following table applies:
    
        passwd modified -- audit event logged
        passwd replaced -- audit event logged, rules list updated
        bar renamed     -- rule removed
        foo renamed     -- untracked, meaning that the rule now applies to
    		       the new location
    
    Audit users typically want to have many rules referencing filesystem
    objects, which can significantly impact filtering performance.  This
    patch also adds an inode-number-based rule hash to mitigate this
    situation.
    
    The patch is relative to the audit git tree:
    http://kernel.org/git/?p=linux/kernel/git/viro/audit-current.git;a=summary
    and uses the inotify kernel API:
    http://lkml.org/lkml/2006/6/1/145
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 20ca73bc792be9625af184cbec36e1372611d1c3
Author: George C. Wilson <ltcgcw@us.ibm.com>
Date:   Wed May 24 16:09:55 2006 -0500

    [PATCH] Audit of POSIX Message Queue Syscalls v.2
    
    This patch adds audit support to POSIX message queues.  It applies cleanly to
    the lspp.b15 branch of Al Viro's git tree.  There are new auxiliary data
    structures, and collection and emission routines in kernel/auditsc.c.  New hooks
    in ipc/mqueue.c collect arguments from the syscalls.
    
    I tested the patch by building the examples from the POSIX MQ library tarball.
    Build them -lrt, not against the old MQ library in the tarball.  Here's the URL:
    http://www.geocities.com/wronski12/posix_ipc/libmqueue-4.41.tar.gz
    Do auditctl -a exit,always -S for mq_open, mq_timedsend, mq_timedreceive,
    mq_notify, mq_getsetattr.  mq_unlink has no new hooks.  Please see the
    corresponding userspace patch to get correct output from auditd for the new
    record types.
    
    [fixes folded]
    
    Signed-off-by: George C. Wilson <ltcgcw@us.ibm.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 8ba8e0fbe6321961f6ba04e2fd7215b37d935c83
Author: Darrel Goeddel <dgoeddel@trustedcs.com>
Date:   Wed May 24 09:38:25 2006 -0500

    [PATCH] fix se_sen audit filter
    
    Fix a broken comparison that causes the process clearance to be checked for
    both se_clr and se_sen audit filters.
    
    Signed-off-by: Darrel Goeddel <dgoeddel@trustedcs.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 014149cce19c5acb19014e57a5b739b7f64e6fbf
Author: Al Viro <viro@www.linux.org.uk>
Date:   Tue May 23 01:36:13 2006 -0400

    [PATCH] deprecate AUDIT_POSSBILE
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit d8945bb51a2bb6623cfa36b9ff63594f46d513aa
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 18 16:01:30 2006 -0400

    [PATCH] inline more audit helpers
    
    pull checks for ->audit_context into inlined wrappers
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit e0182909297da8d38a5d473ae7bee3d0324632a1
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 18 08:28:02 2006 -0400

    [PATCH] proc_loginuid_write() uses simple_strtoul() on non-terminated array
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit ac03221a4fdda9bfdabf99bcd129847f20fc1d80
Author: Linda Knippers <linda.knippers@hp.com>
Date:   Tue May 16 22:03:48 2006 -0400

    [PATCH] update of IPC audit record cleanup
    
    The following patch addresses most of the issues with the IPC_SET_PERM
    records as described in:
    https://www.redhat.com/archives/linux-audit/2006-May/msg00010.html
    and addresses the comments I received on the record field names.
    
    To summarize, I made the following changes:
    
    1. Changed sys_msgctl() and semctl_down() so that an IPC_SET_PERM
       record is emitted in the failure case as well as the success case.
       This matches the behavior in sys_shmctl().  I could simplify the
       code in sys_msgctl() and semctl_down() slightly but it would mean
       that in some error cases we could get an IPC_SET_PERM record
       without an IPC record and that seemed odd.
    
    2. No change to the IPC record type, given no feedback on the backward
       compatibility question.
    
    3. Removed the qbytes field from the IPC record.  It wasn't being
       set and when audit_ipc_obj() is called from ipcperms(), the
       information isn't available.  If we want the information in the IPC
       record, more extensive changes will be necessary.  Since it only
       applies to message queues and it isn't really permission related, it
       doesn't seem worth it.
    
    4. Removed the obj field from the IPC_SET_PERM record.  This means that
       the kern_ipc_perm argument is no longer needed.
    
    5. Removed the spaces and renamed the IPC_SET_PERM field names.  Replaced iuid and
       igid fields with ouid and ogid in the IPC record.
    
    I tested this with the lspp.22 kernel on an x86_64 box.  I believe it
    applies cleanly on the latest kernel.
    
    -- ljk
    
    Signed-off-by: Linda Knippers <linda.knippers@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 5d136a010de3bc16fe595987feb9ef8868f064c2
Author: Serge E. Hallyn <serue@us.ibm.com>
Date:   Thu Apr 27 16:45:14 2006 -0500

    [PATCH] minor audit updates
    
    Just a few minor proposed updates.  Only the last one will
    actually affect behavior.  The rest are just misleading
    code.
    
    Several AUDIT_SET functions return 'old' value, but only
    return value <0 is checked for.  So just return 0.
    
    propagate audit_set_rate_limit and audit_set_backlog_limit
    error values
    
    In audit_buffer_free, the audit_freelist_count was being
    incremented even when we discard the return buffer, so
    audit_freelist_count can end up wrong.  This could cause
    the actual freelist to shrink over time, eventually
    threatening to degrate audit performance.
    
    Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 0a3b483e83edb6aa6d3c49db70eeb6f1cd9f6c6b
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Tue May 2 15:06:01 2006 -0400

    [PATCH] fix audit_krule_to_{rule,data} return values
    
    Don't return -ENOMEM when callers of these functions are checking for
    a NULL return.  Bug noticed by Serge Hallyn.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 3c66251e573219a0532a5a07381b2f60a412d9eb
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 6 08:26:27 2006 -0400

    [PATCH] add filtering by ppid
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit f46038ff7d23ae092d61b366332c05aab8227b48
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 6 08:22:52 2006 -0400

    [PATCH] log ppid
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit e1396065e0489f98b35021b97907ab4edbfb24e1
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu May 25 10:19:47 2006 -0400

    [PATCH] collect sid of those who send signals to auditd
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 473ae30bc7b1dda5c5791c773f95e9424ddfead9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Wed Apr 26 14:04:08 2006 -0400

    [PATCH] execve argument logging
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 9044e6bca5a4a575d3c068dfccb5651a2d6a13bc
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon May 22 01:09:24 2006 -0400

    [PATCH] fix deadlocks in AUDIT_LIST/AUDIT_LIST_RULES
    
    We should not send a pile of replies while holding audit_netlink_mutex
    since we hold the same mutex when we receive commands.  As the result,
    we can get blocked while sending and sit there holding the mutex while
    auditctl is unable to send the next command and get around to receiving
    what we'd sent.
    
    Solution: create skb and put them into a queue instead of sending;
    once we are done, send what we've got on the list.  The former can
    be done synchronously while we are handling AUDIT_LIST or AUDIT_LIST_RULES;
    we are holding audit_netlink_mutex at that point.  The latter is done
    asynchronously and without messing with audit_netlink_mutex.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit bc0f3b8ebba611291fdaa2864dbffd2d29336c64
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon May 22 01:36:34 2006 -0400

    [PATCH] audit_panic() is audit-internal
    
    ... no need to provide a stub; note that extern is already gone from
    include/linux/audit.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 0edce197db00094d04c7fb147903add814c9db67
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jun 1 13:11:07 2006 -0700

    [PATCH] inotify (5/5): update kernel documentation
    
    Update kernel documentation to include a description of the inotify
    kernel API.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Acked-by: Robert Love <rml@novell.com>
    Acked-by: John McCutchan <john@johnmccutchan.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 3ca10067f7f4bfa62a1b0edc84f590261fa02d75
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jun 1 13:11:05 2006 -0700

    [PATCH] inotify (4/5): allow watch removal from event handler
    
    Allow callers to remove watches from their event handler via
    inotify_remove_watch_locked().  This functionality can be used to
    achieve IN_ONESHOT-like functionality for a subset of events in the
    mask.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Acked-by: Robert Love <rml@novell.com>
    Acked-by: John McCutchan <john@johnmccutchan.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit a9dc971d3fdb857a2bcd6d53238125a2cd31d5f4
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jun 1 13:11:03 2006 -0700

    [PATCH] inotify (3/5): add interfaces to kernel API
    
    Add inotify_init_watch() so caller can use inotify_watch refcounts
    before calling inotify_add_watch().
    
    Add inotify_find_watch() to find an existing watch for an (ih,inode)
    pair.  This is similar to inotify_find_update_watch(), but does not
    update the watch's mask if one is found.
    
    Add inotify_rm_watch() to remove a watch via the watch pointer instead
    of the watch descriptor.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Acked-by: Robert Love <rml@novell.com>
    Acked-by: John McCutchan <john@johnmccutchan.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 7c29772288b7026504cfe75bfd90d40fbd1574bf
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jun 1 13:11:01 2006 -0700

    [PATCH] inotify (2/5): add name's inode to event handler
    
    When an inotify event includes a dentry name, also include the inode
    associated with that name.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Acked-by: Robert Love <rml@novell.com>
    Acked-by: John McCutchan <john@johnmccutchan.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 2d9048e201bfb67ba21f05e647b1286b8a4a5667
Author: Amy Griffis <amy.griffis@hp.com>
Date:   Thu Jun 1 13:10:59 2006 -0700

    [PATCH] inotify (1/5): split kernel API from userspace support
    
    The following series of patches introduces a kernel API for inotify,
    making it possible for kernel modules to benefit from inotify's
    mechanism for watching inodes.  With these patches, inotify will
    maintain for each caller a list of watches (via an embedded struct
    inotify_watch), where each inotify_watch is associated with a
    corresponding struct inode.  The caller registers an event handler and
    specifies for which filesystem events their event handler should be
    called per inotify_watch.
    
    Signed-off-by: Amy Griffis <amy.griffis@hp.com>
    Acked-by: Robert Love <rml@novell.com>
    Acked-by: John McCutchan <john@johnmccutchan.com>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 90204e0b7b51e9f2a6905adca12dc331128602c7
Author: Al Viro <viro@www.linux.org.uk>
Date:   Thu Jun 1 21:39:38 2006 -0400

    [PATCH] remove config.h from inotify.h
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit d7a80dad2fe19a2b8c119c8e9cba605474a75a2b
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Jun 16 15:00:18 2006 +0900

    [PATCH] libata: convert several bmdma-style controllers to new EH, take #3
    
    Convert sata_sis, svw, uli and vsc drivers to new EH.  All the drivers
    used to specify ATA_FLAG_SATA_RESET to tell libata to use SATA
    hardreset instead of SRST.  This patch makes all the converted drivers
    use the standard bmdma error handler which uses both SRST and SATA
    hardreset.
    
    All the controllers should be able to perform SRST but still needs
    verification.  If some of the controllers can't do SRST, it will be
    very easy to spot as it will show up during boot probing.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 40ef1d8d48e364dce689342adfdc475aa53f4808
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri Jun 16 15:13:53 2006 +0900

    [PATCH] sata_via: convert to new EH, take #3
    
    Convert sata_via to new EH.  vt6420 used ATA_FLAG_SRST while vt6421
    used ATA_FLAG_SATA_RESET.  This difference seems to be an accident
    rather than intended.  This patch makes both flavors use
    ata_bmdma_error_handler() which makes use of both SRST and SATA
    hardreset.  This behavior change is intended and if it breaks
    anything, it should be very easy to spot.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c5fa46e175ccd02803031ea071060cdb01521736
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 20 05:08:44 2006 -0400

    [libata] sata_nv: s/spin_lock_irqsave/spin_lock/ in irq handler
    
    We don't need to use the heavier spin lock in the irq handler.
    
    It's quite possible we can do this in nv_generic_interrupt() as well,
    but I didn't take the time to pursue that train of thought.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5a44efff4f8fe8139c0c4166ad5aae5f2fa5bced
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 17 15:49:56 2006 +0900

    [PATCH] sata_nv: add hotplug support
    
    Add hotplug support.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 39f8758259868a01ecad29b4379661dd3f21881f
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 17 15:49:56 2006 +0900

    [PATCH] sata_nv: convert to new EH
    
    Convert to new EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ada364e884eb7e60ee96e84cbce07b3c90234c9d
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 17 15:49:56 2006 +0900

    [PATCH] sata_nv: better irq handlers
    
    nf2/3 and ck804 have irq status register.  Implement better irq
    handler for those flavors of nv.  This patch makes different flavors
    of nv controllers use different irq handlers by using separate
    port_info for each flavor.
    
    This change also makes following EH and hotplug updates easier to
    integrate.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 27e4b2745443cef67220da9a4f5f71b1c5f72442
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 17 15:49:55 2006 +0900

    [PATCH] sata_nv: simplify constants
    
    Simplify interrupt constants and make NFORCE3 equal to NFORCE2.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e6faf082cd75d6dcdcf89258ddf40c6855df87a1
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 17 15:49:55 2006 +0900

    [PATCH] sata_nv: kill struct nv_host_desc and nv_host
    
    nv_host_desc and nv_host are used to discern different generations of
    nv controllers.  Kill those.  New EH/hotplug implementation will use
    standard port_info/ata_port_operations for that.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 638ebcc81f40b160f5e8b161e690e9b1b9503c1e
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Jun 17 15:49:55 2006 +0900

    [PATCH] sata_nv: kill not-working hotplug code
    
    sata_nv contained hotplug code which is mainly for demonstrating how
    hotplug event is handled.  This patch kills the demo code in
    prepration for real hotplug implementation.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 612eff0e3715a6faff5ba1b74873b99e036c59fe
Author: Brian Haley <brian.haley@hp.com>
Date:   Thu Jun 15 14:36:36 2006 -0400

    [PATCH] s2io: netpoll support
    
    This adds netpoll support for things like netconsole/kgdboe to the s2io
    10GbE driver.
    
    Signed-off-by: Brian Haley <brian.haley@hp.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4b2d9cf00962d0a0e697f887f3ecaa155cbde555
Merge: 4c1234f... 89c318e...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 20 04:46:02 2006 -0400

    Merge branch 'upstream' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream

commit 4c1234ff24dd8dc2d9020d6315d91a71339be114
Merge: 25f42b6... 1668b19...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 20 04:43:43 2006 -0400

    Merge branch 'upstream' of git://electric-eye.fr.zoreil.com/home/romieu/linux-2.6 into upstream

commit 4c5eb38af2131d867842cdd09fa83a3ed77bfd26
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Jun 20 01:27:08 2006 -0700

    [SPARC64]: Update defconfig.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8bfcd95def89cb69a04c58e1de7995d696c8760
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:23:56 2006 -0700

    [SPARC64]: Don't double-export synchronize_irq.
    
    It is done by the generic IRQ layer now.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e18e2a00efc8352c131eb8d5a460149fb5776f1c
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:23:32 2006 -0700

    [SPARC64]: Move over to GENERIC_HARDIRQS.
    
    This is the long overdue conversion of sparc64 over to
    the generic IRQ layer.
    
    The kernel image is slightly larger, but the BSS is ~60K
    smaller due to the reduced size of struct ino_bucket.
    
    A lot of IRQ implementation details, including ino_bucket,
    were moved out of asm-sparc64/irq.h and are now private to
    arch/sparc64/kernel/irq.c, and most of the code in irq.c
    totally disappeared.
    
    One thing that's different at the moment is IRQ distribution,
    we do it at enable_irq() time.  If the cpu mask is ALL then
    we round-robin using a global rotating cpu counter, else
    we pick the first cpu in the mask to support single cpu
    targetting.  This is similar to what powerpc's XICS IRQ
    support code does.
    
    This works fine on my UP SB1000, and the SMP build goes
    fine and runs on that machine, but lots of testing on
    different setups is needed.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8047e247c899f80c33a23ad7e9e250224f0d26a5
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:22:35 2006 -0700

    [SPARC64]: Virtualize IRQ numbers.
    
    Inspired by PowerPC XICS interrupt support code.
    
    All IRQs are virtualized in order to keep NR_IRQS from needing
    to be too large.  Interrupts on sparc64 are arbitrary 11-bit
    values, but we don't need to define NR_IRQS to 2048 if we
    virtualize the IRQs.
    
    As PCI and SBUS controller drivers build device IRQs, we divy
    out virtual IRQ numbers incrementally starting at 1.  Zero is
    a special virtual IRQ used for the timer interrupt.
    
    So device drivers all see virtual IRQs, and all the normal
    interfaces such as request_irq(), enable_irq(), etc. translate
    that into a real IRQ number in order to configure the IRQ.
    
    At this point knowledge of the struct ino_bucket is almost
    entirely contained within arch/sparc64/kernel/irq.c  There are
    a few small bits in the PCI controller drivers that need to
    be swept away before we can remove ino_bucket's definition
    out of asm-sparc64/irq.h and privately into kernel/irq.c
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 37cdcd9e82108f9b899f1631f66ade2e45738a6e
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:21:57 2006 -0700

    [SPARC64]: Kill ino_bucket->pil
    
    And reuse that struct member for virt_irq, which will
    be used in future changesets for the implementation of
    mapping between real and virtual IRQ numbers.
    
    This nicely kills off a ton of SBUS and PCI controller
    PIL assignment code which is no longer necessary.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6387a48cf5958e43c201fc27a158c328927531a
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:21:29 2006 -0700

    [SPARC]: Kill __irq_itoa().
    
    This ugly hack was long overdue to die.
    
    It was a way to print out Sparc interrupts in a more freindly format,
    since IRQ numbers were arbitrary opaque 32-bit integers which vectored
    into PIL levels.  These 32-bit integers were not necessarily in the
    0-->NR_IRQS range, but the PILs they vectored to were.
    
    The idea now is that we will increase NR_IRQS a little bit and use a
    virtual<-->real IRQ number mapping scheme similar to PowerPC.
    
    That makes this IRQ printing hack irrelevant, and furthermore only a
    handful of drivers actually used __irq_itoa() making it even less
    useful.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6a76267f0e52d920e6bb6da75541e6116d7304da
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:20:30 2006 -0700

    [SPARC64]: bp->pil can never be zero
    
    Only pil0_dummy_bucket had a pil of zero and we just killed that
    off, so we can delete all special case code that used bp->pil==0
    as a way to identify a dummy bucket.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fd0504c3217d6d1bc8f33f53fb536299cae8feda
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 01:20:00 2006 -0700

    [SPARC64]: Send all device interrupts via one PIL.
    
    This is the first in a series of cleanups that will hopefully
    allow a seamless attempt at using the generic IRQ handling
    infrastructure in the Linux kernel.
    
    Define PIL_DEVICE_IRQ and vector all device interrupts through
    there.
    
    Get rid of the ugly pil0_dummy_{bucket,desc}, instead vector
    the timer interrupt directly to a specific handler since the
    timer interrupt is the only event that will be signaled on
    PIL 14.
    
    The irq_worklist is now in the per-cpu trap_block[].
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3185d4d2873a46ca1620d784013f285522091aa0
Author: Bob Breuer <breuerr@mc.net>
Date:   Tue Jun 20 00:36:56 2006 -0700

    [SPARC]: Fix iommu_flush_iotlb end address
    
    Fix the calculation of the end address when flushing iotlb entries to
    ram.  This bug has been a cause of esp dma errors, and it affects
    HyperSPARC systems much worse than SuperSPARC systems.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 92d452f0eb10774fb7779abf876baf9dfb295e6f
Author: Bob Breuer <breuerr@mc.net>
Date:   Tue Jun 20 00:36:10 2006 -0700

    [SPARC]: Mark smp init functions as cpuinit
    
    Fix the smp related section mismatch warnings by marking the smp init
    functions as cpuinit.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 61fc12d8e5c94176e7c2e04a2eab4c6e36d8dd41
Author: Bob Breuer <breuerr@mc.net>
Date:   Tue Jun 20 00:35:13 2006 -0700

    [SPARC]: Add missing rw can_lock macros
    
    Fix a link failure by adding the missing can_lock macros for the rw
    locks.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4d1a099828fb3ed52ff666fceb6a7d562d9048b8
Author: David S. Miller <davem@davemloft.net>
Date:   Tue Jun 20 08:34:40 2006 +0100

    Restrict headers exported to userspace for SPARC and SPARC64
    
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7202fb496af235506a3c6fea836fe4c9957f730e
Author: Bob Breuer <breuerr@mc.net>
Date:   Tue Jun 20 00:30:31 2006 -0700

    [SPARC]: Setup cpu_possible_map
    
    Setup cpu_possible_map so the secondary cpus will get started.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a8cbdcea341ac2f404ee81aa1c19d54aaa0416b4
Author: Bob Breuer <breuerr@mc.net>
Date:   Tue Jun 20 00:28:33 2006 -0700

    [SPARC]: Add topology_init()
    
    Fix a crash in SMP mode by adding the missing topology_init.
    Also makes /proc/cpuinfo backwards compatible with 2.4.
    
    Signed-off-by: Bob Breuer <breuerr@mc.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 65fd28f743be6e3e3fd8eefa9a517656636fee42
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Jun 20 00:07:52 2006 -0700

    [SCTP]: Fix unintentional change to SCTP_ASSERT when !SCTP_DEBUG
    
    A local debugging change slipped into a previous changeset.
    
    When SCTP_DEBUG is off SCTP_ASSERT should do nothing.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 48d83325b61043e3bbd24dd37b9fe433744cf330
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Mon Jun 19 23:57:59 2006 -0700

    [NET]: Prevent multiple qdisc runs
    
    Having two or more qdisc_run's contend against each other is bad because
    it can induce packet reordering if the packets have to be requeued.  It
    appears that this is an unintended consequence of relinquinshing the queue
    lock while transmitting.  That in turn is needed for devices that spend a
    lot of time in their transmit routine.
    
    There are no advantages to be had as devices with queues are inherently
    single-threaded (the loopback device is not but then it doesn't have a
    queue).
    
    Even if you were to add a queue to a parallel virtual device (e.g., bolt
    a tbf filter in front of an ipip tunnel device), you would still want to
    process the queue in sequence to ensure that the packets are ordered
    correctly.
    
    The solution here is to steal a bit from net_device to prevent this.
    
    BTW, as qdisc_restart is no longer used by anyone as a module inside the
    kernel (IIRC it used to with netif_wake_queue), I have not exported the
    new __qdisc_run function.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d6cc7f1a3b33c89c91b3dfce1ff053178893470e
Author: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
Date:   Mon Jun 19 23:42:53 2006 -0700

    [CONNECTOR]: Initialize subsystem earlier.
    
    Attached patch declares connector init function as subsys_init()
    and returns -EAGAIN in case connector is not initialized yet.
    
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d3dcd4efe2ad1ad1865b2fe5c863c1ebd9482a84
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon Jun 19 23:39:45 2006 -0700

    [NETFILTER]: xt_sctp: fix endless loop caused by 0 chunk length
    
    Fix endless loop in the SCTP match similar to those already fixed in
    the SCTP conntrack helper (was CVE-2006-1527).
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6cad647da228486f36a9794137ad459e39b02590
Author: Langsdorf, Mark <mark.langsdorf@amd.com>
Date:   Thu Jun 8 10:33:19 2006 -0500

    [CPUFREQ] correct powernow-k8 fid/vid masks for extended parts
    
    The fid/vid masks for parts using the extended parts are slightly incorrect and can result in
    incorrect fid/vid codes being applied.  No instances of this problem have been reported in
    the field but it could be a problem with future parts.
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e7bdd7a531320eb4a4a8160afbe0c7cc98ac7187
Author: Langsdorf, Mark <mark.langsdorf@amd.com>
Date:   Thu Jun 8 10:30:17 2006 -0500

    [CPUFREQ] Clarify powernow-k8 cpu_family statements
    
    This patch clarifies the meaning of the cpu_family if
    statements in the hw pstate driver patch for powernow-k8
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 98174e46974323e4941c72e46345f7277755e146
Merge: d8ce753... 25f42b6...
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 20 14:56:23 2006 +1000

    Merge HEAD from ../linux-2.6

commit d8ce75324135ea7100124c1fff4ec5090a350607
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 20 14:53:51 2006 +1000

    [XFS] Remove files from the build that are now unused.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit c5f2f261e7a47e4c72723cdcbe99e1bd771a81ea
Author: Dave Jones <davej@redhat.com>
Date:   Tue Jun 20 00:44:38 2006 -0400

    [AGPGART] Suspend/Resume support for nVidia nForce AGP.
    
    Based on a patch from the Ubuntu kernel.
    
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit a4aec2622340e356e7dcd0e8fd05378dacb71c89
Author: Dave Jones <davej@redhat.com>
Date:   Tue Jun 20 00:42:04 2006 -0400

    [AGPGART] Suspend/Resume improvements for ATI AGP
    
    Based on patches in the Ubuntu kernel.
    
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 89d17b9604ae502392e119dbdbf43f6067745715
Author: Dave Jones <davej@redhat.com>
Date:   Tue Jun 20 00:39:19 2006 -0400

    [AGPGART] Whitespace cleanups for ati-agp
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit d7b849da47a59d2be6d6aea1effb0efa91c30424
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 20 14:01:29 2006 +1000

    [XFS] Fix a Makefile issue related to exports.o handling.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit f6c2d1fa6310a71b1c2e05fc6d9ff9b91489fa0e
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 20 13:04:51 2006 +1000

    [XFS] Remove version 1 directory code.	Never functioned on Linux, just
    pure bloat.
    
    SGI-PV: 952969
    SGI-Modid: xfs-linux-melb:xfs-kern:26251a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit da2f4d679c8070ba5b6a920281e495917b293aa0
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 20 13:01:38 2006 +1000

    [XFS] Map EFSCORRUPTED to an actual error code, not just a made up one
    (990).	Turns out some ye-olde unices used EUCLEAN as
    Filesystem-needs-cleaning, so now we use that too.
    
    SGI-PV: 953954
    SGI-Modid: xfs-linux-melb:xfs-kern:26286a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 25f42b6af09e34c3f92107b36b5aa6edc2fdba2f
Merge: 4c84a39... 1723b4a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 19:07:12 2006 -0700

    Merge branch 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus
    
    * 'upstream' of git://ftp.linux-mips.org/pub/scm/upstream-linus: (51 commits)
      [MIPS] Make timer interrupt frequency configurable from kconfig.
      [MIPS] Correct HAL2 Kconfig description
      [MIPS] Fix R4K cache macro names
      [MIPS] Add Missing R4K Cache Macros to IP27 & IP32
      [MIPS] Support for the RM9000-based Basler eXcite smart camera platform.
      [MIPS] Support for the R5500-based NEC EMMA2RH Mark-eins board
      [MIPS] Support SNI RM200C SNI in big endian mode and R5000 processors.
      [MIPS] SN: include asm/sn/types.h for nasid_t.
      [MIPS] Random fixes for sb1250
      [MIPS] Fix bcm1480 compile
      [MIPS] Remove support for NEC DDB5476.
      [MIPS] Remove support for NEC DDB5074.
      [MIPS] Cleanup memory managment initialization.
      [MIPS] SN: Declare bridge_pci_ops.
      [MIPS] Remove unused function alloc_pci_controller.
      [MIPS] IP27: Extract pci_ops into separate file.
      [MIPS] IP27: Use symbolic constants instead of magic numbers.
      [MIPS] vr41xx: remove unnecessay items from vr41xx/Kconfig.
      [MIPS] IP27: Cleanup N/M mode configuration.
      [MIPS] IP27: Throw away old unused hacks.
      ...

commit 4c84a39c8adba6bf2f829b217e78bfd61478191a
Merge: d0b952a... 9ead190...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 19:01:59 2006 -0700

    Merge branch 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband
    
    * 'for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/roland/infiniband: (46 commits)
      IB/uverbs: Don't serialize with ib_uverbs_idr_mutex
      IB/mthca: Make all device methods truly reentrant
      IB/mthca: Fix memory leak on modify_qp error paths
      IB/uverbs: Factor out common idr code
      IB/uverbs: Don't decrement usecnt on error paths
      IB/uverbs: Release lock on error path
      IB/cm: Use address handle helpers
      IB/sa: Add ib_init_ah_from_path()
      IB: Add ib_init_ah_from_wc()
      IB/ucm: Get rid of duplicate P_Key parameter
      IB/srp: Factor out common request reset code
      IB/srp: Support SRP rev. 10 targets
      [SCSI] srp.h: Add I/O Class values
      IB/fmr: Use device's max_map_map_per_fmr attribute in FMR pool.
      IB/mthca: Fill in max_map_per_fmr device attribute
      IB/ipath: Add client reregister event generation
      IB/mthca: Add client reregister event generation
      IB: Move struct port_info from ipath to <rdma/ib_smi.h>
      IPoIB: Handle client reregister events
      IB: Add client reregister event type
      ...

commit d0b952a9837f81cd89e756b1b34293fa6e1cb59d
Merge: d90125b... 47552c4...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:55:56 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davem/net-2.6: (109 commits)
      [ETHTOOL]: Fix UFO typo
      [SCTP]: Fix persistent slowdown in sctp when a gap ack consumes rx buffer.
      [SCTP]: Send only 1 window update SACK per message.
      [SCTP]: Don't do CRC32C checksum over loopback.
      [SCTP] Reset rtt_in_progress for the chunk when processing its sack.
      [SCTP]: Reject sctp packets with broadcast addresses.
      [SCTP]: Limit association max_retrans setting in setsockopt.
      [PFKEYV2]: Fix inconsistent typing in struct sadb_x_kmprivate.
      [IPV6]: Sum real space for RTAs.
      [IRDA]: Use put_unaligned() in irlmp_do_discovery().
      [BRIDGE]: Add support for NETIF_F_HW_CSUM devices
      [NET]: Add NETIF_F_GEN_CSUM and NETIF_F_ALL_CSUM
      [TG3]: Convert to non-LLTX
      [TG3]: Remove unnecessary tx_lock
      [TCP]: Add tcp_slow_start_after_idle sysctl.
      [BNX2]: Update version and reldate
      [BNX2]: Use CPU native page size
      [BNX2]: Use compressed firmware
      [BNX2]: Add firmware decompression
      [BNX2]: Allow WoL settings on new 5708 chips
      ...
    
    Manual fixup for conflict in drivers/net/tulip/winbond-840.c

commit d90125bfe958ed0451c6b98f831c86aba08b43d5
Merge: bfd189a... 2abac1d...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:53:20 2006 -0700

    Merge branch 'i915fb' of git://git.kernel.org/pub/scm/linux/kernel/git/airlied/intelfb-2.6
    
    * 'i915fb' of git://git.kernel.org/pub/scm/linux/kernel/git/airlied/intelfb-2.6: (25 commits)
      intelfb: fixup clock calculation debugging.
      Removed hard coded EDID buffer size.
      intelfb: use regular modedb table instead of VESA
      intelfb: use firmware EDID for mode database
      Revert "intelfb driver -- use the regular modedb table instead of the VESA"
      intelfb: int option fix
      sync modesetting code with X.org
      intelfb: align with changes from my X driver.
      intelfb driver -- use the regular modedb table instead of the VESA
      Adds support for 256MB aperture on 945 chipsets to the intelfb driver
      intelfb -- uses stride alignment of 64 on the 9xx chipsets.
      intelfb: some cleanups for intelfbhw
      intelfb: fixup pitch calculation like X does
      intelfb: fixup p calculation
      This patch makes a needlessly global struct static.
      intelfb: add i945GM support
      intelfb: fixup whitespace..
      intelfb: add hw cursor support for i9xx
      intelfb: make i915 modeset
      intelfb: add support for i945G
      ...

commit bfd189a8e944dd0b8135dea2c23ac399bbe34535
Merge: bbf7013... 81c2466...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:51:41 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/agpgart:
      [AGPGART] alpha-agp warning fix
      [AGPGART] uninorth-agp warning fixes
      [AGPGART] Remove pointless initialisation in intel-agp
      [AGPGART] Remove pointless code from agp_generic_create_gatt_table()

commit bbf70132db2767f66b411fa90488aacac72e06dd
Merge: 2090af7... 6ccf58a...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:51:21 2006 -0700

    Merge master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq
    
    * master.kernel.org:/pub/scm/linux/kernel/git/davej/cpufreq:
      [CPUFREQ] sets nforce2 minimum PLL divider to 2.
      [CPUFREQ] Make powernow-k7 work on SMP kernels.
      [CPUFREQ] cpufreq core {d,}printk adjustments
      [CPUFREQ] dprintk adjustments to cpufreq-speedstep-centrino
      [CPUFREQ] dprintk adjustments to cpufreq-nforce2
      [CPUFREQ] Prepare powernow-k8 for future CPUs.
      [CPUFREQ] Make acpi-cpufreq 'sticky'.
      [CPUFREQ] Remove strange No-op from longrun.c
      [CPUFREQ] Remove more freq_table reinitialisations.
      [CPUFREQ] Fix another redundant initialisation in freq_table
      [CPUFREQ] Remove duplicate assignment in freq_table
      [CPUFREQ] CodingStyle nits in cpufreq_stats.c
      [CPUFREQ] Remove duplicate assignment from cpufreq-nforce2
      [CPUFREQ] Remove pointless reinitialisations in acpi-cpufreq
      [CPUFREQ] Remove pointless reinitialisation from powernow-k8
      [CPUFREQ] Remove redundant initialisation from longhaul.
      [CPUFREQ] Clean up longhaul's speed pretty-printer
      [CPUFREQ] Disambiguate loop indexes in powernow-k7
      [CPUFREQ] Typo in powernow-k8

commit 2090af718014f3d434fb8b85b00eeea01ebcec19
Merge: 557240b... 4b6ace7...
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:50:43 2006 -0700

    Merge branch 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6
    
    * 'upstream-linus' of master.kernel.org:/pub/scm/linux/kernel/git/jgarzik/netdev-2.6: (166 commits)
      [PATCH] net: au1000_eth: PHY framework conversion
      [PATCH] 3c5zz ethernet: fix section warnings
      [PATCH] smc ethernet: fix section mismatch warnings
      [PATCH] hp ethernet: fix section mismatches
      [PATCH] Section mismatch in drivers/net/ne.o during modpost
      [PATCH] e1000: prevent statistics from getting garbled during reset
      [PATCH] smc911x Kconfig fix
      [PATCH] forcedeth: new device ids
      [PATCH] forcedeth config: version
      [PATCH] forcedeth config: module parameters
      [PATCH] forcedeth config: diagnostics
      [PATCH] forcedeth config: move functions
      [PATCH] forcedeth config: statistics
      [PATCH] forcedeth config: csum
      [PATCH] forcedeth config: wol
      [PATCH] forcedeth config: phy
      [PATCH] forcedeth config: flow control
      [PATCH] forcedeth config: ring sizes
      [PATCH] forcedeth config: tso cleanup
      [DOC] Update bonding documentation with sysfs info
      ...

commit 557240b48e2dc4f6fa878afc3fc767ad745ca7ed
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:16:01 2006 -0700

    Add support for suspending and resuming the whole console subsystem
    
    Trying to suspend/resume with console messages flying all around is
    doomed to failure, when the devices that the messages are trying to
    go to are being shut down.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 5603509137940f4cbc577281cee62110d4097b1b
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:05:09 2006 -0700

    Make sure to re-enable SCI after an ACPI suspend
    
    According to the ACPI spec, it should be enabled on return from suspend,
    but bugs happen.  Apparently especially on the Apple Intel Macs.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 1cca0ebbb74298958dae1d1d3e7e9287c98a720c
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Mon Jun 19 18:01:27 2006 -0700

    Improve SATA core suspend/resume
    
    Doing a full ata_busy_sleep() seems to get suspend and resume working
    fine on the Apple Mac Mini, at least.
    
    Signed-off-by: Linus Torvalds <torvalds@osdl.org>

commit 67d59dfdeb21df2c16dcd478b66177e91178ecd0
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Jun 13 21:31:19 2006 -0500

    [SCSI] 53c700: remove reliance on deprecated cmnd fields
    
    This one's quite tricky.  The 53c700 uses the now deprecated fields of
    the command structure for saving the prior command when it does
    autosense.  To fix this, we have to add extra fields to the LUN to
    accommodate a copy of the real command.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6db874fbdbedba5e15e76cc03b42f52ea70338c0
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Tue Jun 13 21:40:34 2006 -0500

    [SCSI] hptiop: don't use cmnd->bufflen
    
    use cmnd->request_bufflen instead.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4f2ddba39a550eba9233d9f0e8309092da0ba293
Author: HighPoint Linux Team <linux@highpoint-tech.com>
Date:   Wed Jun 14 16:50:57 2006 +0800

    [SCSI] hptiop: HighPoint RocketRAID 3xxx controller driver
    
    Updates:
    - don't bypass SYNCHRONIZE_CACHE command
    - return SCSI_MLQUEUE_HOST_BUSY when no free request slots
    - move scsi_remove_host() to the begin of hpt_remove(), or it will
      not work after resources being released.
    
    Signed-off-by: HighPoint Linux Team <linux@highpoint-tech.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a623e14dafe72329dd1defe36ee2cd4ff4b2e6f1
Author: Mark Haverkamp <markh@osdl.org>
Date:   Thu Jun 8 13:55:57 2006 -0700

    [SCSI] aacraid: small misc. cleanups
    
    Received from Mark Salyzyn
    
    Spelling correction, orphaned comment removal & update branch name.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 75c3628db75c573870379094a5f90f690ee99b76
Author: Mark Haverkamp <markh@osdl.org>
Date:   Thu Jun 8 13:55:42 2006 -0700

    [SCSI] aacraid: Update supported product information
    
    Received From Mark Salyzyn
    
    Some of the cards product names changed.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ae6c859b7dcd708efadf1c76279c33db213e3506
Merge: 5b4b7a2... 427abfa...
Author: Len Brown <len.brown@intel.com>
Date:   Mon Jun 19 18:01:24 2006 -0400

    merge linus into release branch

commit 9c64f9774805ba5d5ad4129899bdd822f61874e9
Author: Jan Beulich <jbeulich@novell.com>
Date:   Tue May 9 00:50:31 2006 -0700

    [PATCH] PCI Hotplug: Fix recovery path from errors during pcie_init()
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 9df7fde52c33075b9f9148ee31215c03824fcc38
Author: Eric Sesterhenn <snakebyte@gmx.de>
Date:   Thu Jun 1 11:41:44 2006 +0200

    [PATCH] PCI Hotplug: fake NULL pointer dereferences in IBM Hot Plug Controller Driver
    
    Remove checks for value, since the hotplug core always provides
    a valid value.
    
    Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 99ff124d1673a1e3f19061ebc82634608d1119ed
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:13:50 2006 +0900

    [PATCH] shpchp: Cleanup improper info messages
    
    Current SHPCHP driver shows device number of slots in info messages,
    but it is useless and should be replaced with slot name.
    
    This patch replaces the device number shown in the info messages with
    the slot name.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit ea83bc1dabdca9da643972b591259a7657459ff5
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:12:23 2006 +0900

    [PATCH] shpchp: Remove Unused hpc_evelnt_lock
    
    This patch removes unused hpc_event_lock. This patch has no functional
    change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit f42639572680f4d69d9522f91c65e793ebeca098
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:13:02 2006 +0900

    [PATCH] shpchp: Cleanup interrupt polling timer
    
    This patch cleans up the interrupt polling timer code in
    shpchp_hpc.c. This has no functional changes.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 4085399da3c2176ba8ed64e93a2722907d41df3f
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:11:48 2006 +0900

    [PATCH] shpchp: Cleanup SHPC commands
    
    This patch cleans up the code related to issuing SHPC commands. This
    patch has no functional changes.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c4cecc1937cafd8505151452a9f7eea876a5bd9c
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:10:56 2006 +0900

    [PATCH] shpchp: Cleanup interrupt handler
    
    This patch cleans up the interrupt handler of shpchp driver. This
    patch has no functional changes.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d4fbf600666569c3921d12bdcfcfdb2cdb4fd5fb
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:05:59 2006 +0900

    [PATCH] shpchp: Remove unnecessary hpc_ctlr_handle check
    
    This patch removes unnecessary error check for hpc_ctlr_handle.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 132066a9c84af6f5e8d893145a9c63f849143867
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 13:39:45 2006 +0900

    [PATCH] pciehp: Implement get_address callback
    
    This patch implements .get_address callback of hotplug_slot_ops for
    PCIEHP driver. With this patch, we can see bus address of hotplug
    slots as follows:
    
    	# cat /sys/bus/pci/slots/0010_0000/address
    	0000:0a:00
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 6e33706b191ff8687f103a86de842b690fd8fb9d
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:23:39 2006 +0900

    [PATCH] pciehp: Add missing pci_dev_put
    
    The PCIEHP driver leaks reference counter of pci_dev structures. This
    patch adds missing pci_dev_put() calls to PCIEHP driver.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 56bfada3e1a25c0da6f4590a4b04c67ec10910c2
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Fri May 12 11:22:24 2006 +0900

    [PATCH] pciehp: Replace pci_find_slot() with pci_get_slot()
    
    This patch replaces pci_find_slot() with pci_get_slot() in PCIEHP
    driver. This patch enables PCI Express Hotplug on the system which has
    multiple PCI domains.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 466ee36b62b4b294ecf68a2eee2e18c6ff8c9be4
Author: Mike Habeck <habeck@sgi.com>
Date:   Sat May 6 09:01:59 2006 -0500

    [PATCH] SGI Hotplug: Incorrect power status
    
    This is a repost of a patch submitted by Prarit Bhargava on 01-19-06 that
    never got integrated.
    
    The get_power_status function is currently reporting a bitwise mapping of
    the slot if the slot is powered on.  It should return 1 if powered on and
    0 if powered off.
    
    Signed-off-by: Mike Habeck <habeck@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 82d5f4aaf182c306d2c2ef4d3a89d0fb8e386aa8
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed May 3 23:42:04 2006 +0900

    [PATCH] shpchp: Create shpchpd at controller probe time
    
    The workqueue thread of shpchp driver should be created only when SHPC
    based hotplug slots are detected on the system.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit d49f2c49c39bbd0cb2069fe11c1630c709061037
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed May 3 23:34:17 2006 +0900

    [PATCH] shpchp: Mask Global SERR and Intr at controller release time
    
    Global SERR and Interrupt should be masked at shpchp driver unload time.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e7138723692e43b7d43578746ad21bf194847527
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 11:12:37 2006 +0900

    [PATCH] SHPC: Fix SHPC Contoller SERR-INT Register bits access
    
    Current SHPCHP driver doesn't take care of RsvdP/RsvdZ[*] bits in
    controller SERR-INT register. This might cause unpredicable
    results. This patch fixes this bug.
    
    [*] RsvdP and RsvdZ are defined in SHPC spec as follows:
    
        RsvdP - Reserved and Preserved. Register bits of this type are
        reserved for future use as R/W bits. The value read is
        undefined. Writes are ignored. Software must follow These rules
        when accessing RsvdP bits:
    
    	- Software must ignore RsvdP bits when testing values read
              from these registers.
    	- Software must not depend on RsvdP bit's ability to retain
              information when written
    	- Software must always write back the value read in the RsvdP
    	  bits when writing one of these registers.
    
        RsvdZ - Reserved and Zero. Register bits of this type are reserved
        for future use as R/WC bits. The value read is undefined. Writes
        are ignored. Software must follow these rules when accessing RsvdZ
        bits:
    
            - Software must ignore RsvdZ bits when testing values read
    	  from these registers.
    	- Software must not depends on a RsvdZ bit's ability to retain
    	  information when written.
    	- Software must always write 0 to RsvdZ bits when writing one
    	  of these register.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 795eb5c4a73bee30e8c2dbb29174b329da56051c
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 11:11:54 2006 +0900

    [PATCH] SHPC: Fix SHPC Logical Slot Register bits access
    
    Current SHPCHP driver doesn't take care of RsvdP/RsvdZ[*] bits
    in logical slot registers. This might cause unpredicable results. This
    patch fixes this bug.
    
    [*] RsvdP and RsvdZ are defined in SHPC spec as follows:
    
        RsvdP - Reserved and Preserved. Register bits of this type are
        reserved for future use as R/W bits. The value read is
        undefined. Writes are ignored. Software must follow These rules
        when accessing RsvdP bits:
    
    	- Software must ignore RsvdP bits when testing values read
              from these registers.
    	- Software must not depend on RsvdP bit's ability to retain
              information when written
    	- Software must always write back the value read in the RsvdP
    	  bits when writing one of these registers.
    
        RsvdZ - Reserved and Zero. Register bits of this type are reserved
        for future use as R/WC bits. The value read is undefined. Writes
        are ignored. Software must follow these rules when accessing RsvdZ
        bits:
    
            - Software must ignore RsvdZ bits when testing values read
    	  from these registers.
    	- Software must not depends on a RsvdZ bit's ability to retain
    	  information when written.
    	- Software must always write 0 to RsvdZ bits when writing one
    	  of these register.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 5858759c2098c6792af1afa6d5ded94044740f9c
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 11:10:37 2006 +0900

    [PATCH] SHPC: Cleanup SHPC Logical Slot Register bits access
    
    This patch cleans up the code to access bits in slot logical
    registers. This patch has no functional change.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2b34da7e61383b4b7773d2d4e776e58725794347
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 11:09:42 2006 +0900

    [PATCH] SHPC: Cleanup SHPC Logical Slot Register access
    
    This patch cleans up the code to access slot logical registers. This
    patch has no functional changes.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 75d97c59a192ca0fe2577974dac0c16a73a377eb
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 11:08:42 2006 +0900

    [PATCH] SHPC: Cleanup SHPC register access
    
    This patch cleans up the code to access SHPC working register
    sets. This patch has no functional changes.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 40abb96c51bbcb06785e233e96f40c35657ade83
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Mon May 8 18:34:09 2006 +0900

    [PATCH] pciehp: Fix programming hotplug parameters
    
    Current PCHEHP driver doesn't have any code to program hotplug
    parameters from firmware. So hotplug parameters are never programed at
    hot-add time. This patch add support for programming hotplug
    parameters to PCIEHP driver.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e22b73501608901bab7ee9b1f8cb67f15e8efb7a
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 10:57:14 2006 +0900

    [PATCH] acpi_pcihp: Add support for _HPX
    
    This patch adds support for _HPX (Hot Plug Parameter Extensions)
    defined in ACPI3.0a spec.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit aad20cabaa3d6dfa1e0ebc8fb0537a96d3518b8f
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Wed May 10 22:20:34 2006 +0900

    [PATCH] acpi_pcihp: Remove improper error message about OSHP
    
    This patch converts the improper error message about OSHP evaluation
    to debug message which is displayed only when pci_hotplug.ko is loaded
    with debugging mode enabled. To do this, this patch adds a new module
    parameter "debug_acpi" to pci_hotplug.ko for enabling/disabling debug
    messages in acpi_pcihp.c.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 7430e34c70106a9576fc61d77604d164b187a1b7
Author: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
Date:   Tue May 2 10:54:50 2006 +0900

    [PATCH] acpi_pcihp: Fix programming _HPP values
    
    This patch fixes the problem that hotplug parameters are not programed
    when PCI cards are hot-added by ACPIPHP, SHPCHP and PCIEHP driver. The
    pci_dev structure being hot-added is not bound to ACPI handle, so we
    need to trace PCI bus tree to find ACPI handle.
    
    Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
    Cc: Kristen Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 2433ee2654f0ac86f7886e5a8d01bee7f3c7c6db
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Mon Apr 24 15:50:59 2006 -0700

    [PATCH] pciehp: dont call pci_enable_dev
    
    Don't call pci_enable_device from pciehp because the pcie port service driver
    already does this.
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 81b26bcacd5df0f65344fb430b1bf7fe9cfbfe2a
Author: Kristen Accardi <kristen.c.accardi@intel.com>
Date:   Tue Apr 18 14:36:43 2006 -0700

    [PATCH] PCI Hotplug: don't use acpi_os_free
    
    acpi_os_free should not be used by drivers outside
    of acpi/*/*.c.  Replace with kfree().
    
    Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit cde0e5d722c77d1194f40de54a99c90afe365480
Author: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
Date:   Wed Mar 22 14:49:33 2006 +0900

    [PATCH] acpiphp: turn off slot power at error case
    
    When acpiphp_enable_slot() is failed, acpiphp does not change
    the slot->flags. Therefore, when user tries to read power
    status, acpiphp_get_power_status() returns the enable status
    whether the slot is not really enabled.
    
    This patch fixes this BUG.
    
    Signed-off-by: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit c14424736e76f3d8477a41de531e6b5dcce3d5b0
Author: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
Date:   Wed Mar 22 14:49:27 2006 +0900

    [PATCH] acpiphp: host and p2p hotplug
    
    I encountered the problem that when there are some hotplug
    slots are under the host bridge, the hotplug slots under the
    p2p bridge are not treated as hotpluggable.
    
    This patch fixes this BUG.
    
    Signed-off-by: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 551bcb75b3d9f23348a524210ccfff26d865e425
Author: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
Date:   Wed Mar 22 14:49:20 2006 +0900

    [PATCH] acpiphp: hotplug slot hotplug
    
    o hotplug slots add
      When the hot-added PCI device is p2p bridge, acpiphp calls
      find_p2p_bridge() to add hotplug slots.
    
    o hotplug slots remove
      When the hot-removing PCI device is p2p bridge, acpiphp
      calls cleanup_p2p_bridge() to remove hotplug slots.
    
    o notify handler exchange
      When the p2p bridge is added, acpiphp changes the notify
      hanlder.
      If no bridge device is inserted into the hotpluggable PCI
      slot, acpiphp installs the notify handler for function.
      After the p2p bridge hot-add, acpiphp has to install the
      notify handler for bridge. Because, the role of the
      handlers are not same. The hot-remove case is ditto.
    
    Signed-off-by: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit 92c9be95549632da09088320f202fa5c05b21ddf
Author: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
Date:   Wed Mar 22 14:49:09 2006 +0900

    [PATCH] acpiphp: configure _PRT - V3
    
    Current acpiphp does not free acpi_device structs when the
    PCI devices are removed. When the PCI device is added,
    acpi_bus_add() fails because acpi_device struct has already
    exists. So, _PRT method does not evaluate.
    
    This patch fixes this issue.
    
    Signed-off-by: MUNEDA Takahiro <muneda.takahiro@jp.fujitsu.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit e55dea58c5609aece6156a6cd2306b820a7794ef
Author: Prarit Bhargava <prarit@sgi.com>
Date:   Tue Apr 4 09:26:46 2006 -0400

    [PATCH] PCI Hotplug: Tollhouse HP: SGI hotplug driver changes
    
    SGI hotplug driver changes required to support Tollhouse system PCI
    hotplug, and implements the PRF_HOTPLUG_SUPPORT feature bit.
    
    Signed-off-by: Prarit Bhargava <prarit@sgi.com>
    Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>

commit faed568413e89f87cd60aa8b292cc4b9996bae42
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 19 20:46:05 2006 +0100

    [ARM] 3594/1: Poodle: Add touchscreen support + other updates
    
    Patch from Richard Purdie
    
    Poodle Updates:
    * Update corgi_ssp to make the GPIO chip selects optional
    * Enable corgi_ssp for use by poodle
    * Add corgi touchscreen platform device for poodle
    * Export locomo platform device.
    * Set framebuffer device parent correctly
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8703dc8cb10eca7f6fe6ef364d8e106fe07f034
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 19 19:58:52 2006 +0100

    [ARM] 3564/1: sharpsl_pm: Abstract some machine specific parameters
    
    Patch from Richard Purdie
    
    Abstract some machine specific parameters from the sharpsl_pm core
    into the machine specific drivers. This allows the core to support
    tosa/poodle.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 88660351cb6daa85baf9700f12dff3af564dc14a
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 19 19:58:51 2006 +0100

    [ARM] 3561/1: Poodle: Correct the MMC/SD power control
    
    Patch from Richard Purdie
    
    Correct the Poodle power control for the MMC/SD port. Also
    add write protection switch support.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 74617fb6b825ea370ae72565f7543306bc08ef6e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 19 19:57:12 2006 +0100

    [ARM] 3593/1: Add reboot and shutdown handlers for Zaurus handhelds
    
    Patch from Richard Purdie
    
    Add functionality to allow machine specific reboot handlers on ARM.
    Add machine specific reboot and poweroff handlers for all PXA Zaurus
    models.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit afefc4158f3c8529e4bb99c1dc119fd792bac220
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 19:53:19 2006 +0100

    [ARM] 3592/1: AT91RM9200 Serial driver update
    
    Patch from Andrew Victor
    
    This patch includes a number of updates to the AT91RM9200 serial driver.
    
    Changes include:
    1. Conversion to a platform_driver.  [Ivan Kokshaysky]
    2. Replaced all references to AT91RM9200 with AT91.  This driver can now
    also be used for the AT91SAM9216.
    3. Allow TIOCM_LOOP to configure local loopback mode.
    4. Cleaned up the 'read_status_mask' usage and interrupt handler code.
    [Chip Coldwell]
    5. Suspend/resume support.  [David Brownell]
    
    There are a few 'unused variable' warning when compiling this - I
    removed the new DMA support to keep this first patch simpler.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bf1c56a3aaa67ac74bc74e631ecc2a2673597cae
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 19 18:30:04 2006 +0100

    [ARM] 3591/1: Anubis: IDE device definitions
    
    Patch from Ben Dooks
    
    Platform device definitions for the two IDE ports
    on the Simtec Anubis board.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 82dc0772a892f8b430a2d567c981fe47a11489c3
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 18:16:46 2006 +0100

    [ARM] 3590/1: AT91RM9200 Platform devices support
    
    Patch from Andrew Victor
    
    This patch includes the structures and exported functions required for
    the platform-device support (added in patch 3585/1).
    
    Also adds the arch_identify() function for run-time detection of which
    AT91 processor the code is running on.  [Original patch from Ivan
    Kokshaysky]
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 067bbada4cc574eaa4fa577483ecae4012049477
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 18:16:45 2006 +0100

    [ARM] 3589/1: AT91RM9200 DK/EK board update
    
    Patch from Andrew Victor
    
    This patch updates the support for the Atmel DK and EK boards.
    
    The changes include:
    1. Use the new at91_uart_config structure and device registration
    functions for the UARTs.
    2. Registration of I2C and SPI platform devices.
    3. The USB Device pullup line is connected to reset, so multidrive needs
    to be enabled on the line.  [Patch from David Brownell].
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1723b4a34af85447684c9696af83929d2c1e8e6b
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue Jun 20 00:19:13 2006 +0900

    [MIPS] Make timer interrupt frequency configurable from kconfig.
    
    Make HZ configurable.  DECSTATION can select 128/256/1024 HZ, JAZZ can
    only select 100 HZ, others can select 100/128/250/256/1000/1024 HZ if
    not explicitly specified).  Also remove all mach-xxx/param.h files and
    update all defconfigs according to current HZ value.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b97b36bfd761d83f714eb1b5d6bce519794fa650
Author: Kumba <kumba@gentoo.org>
Date:   Sun Jun 18 02:17:08 2006 -0400

    [MIPS] Correct HAL2 Kconfig description
    
    The current HAL2 Kconfig description indicates it is only used on SGI
    Indy systems, however all members of the Indigo2 Family have this sound
    card as well.  Plus a minor grammatical fix is included.
    
    Signed-off-by: Joshua Kinard <kumba@gentoo.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c3b1c2de2254aa4721e7e3c8d418fa9302e6acb0
Author: Kumba <kumba@gentoo.org>
Date:   Sun Jun 18 02:17:01 2006 -0400

    [MIPS] Fix R4K cache macro names
    
    Several machines have the R4K cache macro name spelled incorrectly.  Namely,
    they have cpu_has_4kcache defined instead of cpu_has_4k_cache.
    
    Signed-off-by: Joshua Kinard <kumba@gentoo.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2493921c284813b9f512c95d972a302cf82296cb
Author: Kumba <kumba@gentoo.org>
Date:   Sun Jun 18 02:16:53 2006 -0400

    [MIPS] Add Missing R4K Cache Macros to IP27 & IP32
    
    Keeping in accordance with other machines, IP27 and IP32 lack a few
    macros.  IP27 lacks cpu_has_4kex & cpu_has_4k_cache macros while IP32
    lacks just the cpu_has_4k_cache macro.
    
    Signed-off-by: Joshua Kinard <kumba@gentoo.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 35189fad3cb5f6e3ab66c8321928a851de0cd2b1
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 18 16:39:46 2006 +0100

    [MIPS] Support for the RM9000-based Basler eXcite smart camera platform.
    
    Signed-off-by: Thomas Koeller <thomas.koeller@baslerweb.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 355c471f2ff324c21f8a1fb8e2e242a0f2a4aa68
Author: dmitry pervushin <dpervushin@ru.mvista.com>
Date:   Sun May 21 14:53:06 2006 +0400

    [MIPS] Support for the R5500-based NEC EMMA2RH Mark-eins board
    
    Signed-off-by: dmitry pervushin  <dpervushin@ru.mvista.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4a0312fca6599299bbed944ce09278d90388a3e5
Author: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
Date:   Tue Jun 13 13:59:01 2006 +0200

    [MIPS] Support SNI RM200C SNI in big endian mode and R5000 processors.
    
    Added support for RM200C machines with big endian firmware
    Added support for RM200-C40 (R5000 support)
    
    Signed-off-by: Florian Lohoff <flo@rfc822.org>
    Signed-off-by: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b00f473e1af9a11454e572de1ea446eb672e700d
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 17 10:56:26 2006 +0100

    [MIPS] SN: include asm/sn/types.h for nasid_t.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4fb60a4b80f9db94605c2a47807d34dfb9ae44c8
Author: Thiemo Seufer <ths@networkno.de>
Date:   Sun Jun 18 05:23:47 2006 +0100

    [MIPS] Random fixes for sb1250
    
    Random improvements for sb1250: Silence compiler warnings, a bugfix for
    the profiling code, and a comment typo.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b75d4c1d686aff4f8f9ea96b2e8908a3454a3ff3
Author: Thiemo Seufer <ths@networkno.de>
Date:   Sun Jun 18 05:17:54 2006 +0100

    [MIPS] Fix bcm1480 compile
    
    Fix compilation for bcm1480, a hpt is only available on sb1250/bcm112x.
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 470b160364db5b8096b8e557a23c97eb6612be67
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 18 05:28:38 2006 +0100

    [MIPS] Remove support for NEC DDB5476.
    
    As warned several times before.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit eaff3888742155bd397e45a1c3323c0173042e5b
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 18 04:58:57 2006 +0100

    [MIPS] Remove support for NEC DDB5074.
    
    As warned several times before.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 2925aba4223f4532e85f0c6f64584b3e0b2849c3
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 18 01:32:22 2006 +0100

    [MIPS] Cleanup memory managment initialization.
    
    Historically plat_mem_setup did the entire platform initialization.  This
    was rather impractical because it meant plat_mem_setup had to get away
    without any kind of memory allocator.  To keep old code from breaking
    plat_setup was just renamed to plat_setup and a second platform
    initialization hook for anything else was introduced.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 7ab2dc41d15f31e9d5472e46148337b4cf7c941c
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 17 14:55:40 2006 +0100

    [MIPS] SN: Declare bridge_pci_ops.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 610019baddcb4c4c323c12cd44ca7f73d7145d6f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 17 14:54:32 2006 +0100

    [MIPS] Remove unused function alloc_pci_controller.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 9e0c7afd0ec6e6d788df14270b2b1b8f21a384a8
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 17 00:55:45 2006 +0100

    [MIPS] IP27: Extract pci_ops into separate file.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3a11545615dedd8dd52ff110ddf6e970bfac963a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 17 00:46:27 2006 +0100

    [MIPS] IP27: Use symbolic constants instead of magic numbers.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c340cc504c91cf81561ecca10ec13396ae24dcc0
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu Jun 15 23:29:37 2006 +0900

    [MIPS] vr41xx: remove unnecessay items from vr41xx/Kconfig.
    
    Remove unnecessary items from vr41xx/Kconfig.  SYS_HA_CPU_VR41XX has
    already been selected by MACH_VR41XX.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit f456acae4fe9b4504db7d75c51fba6b8db787ee2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 14 08:10:35 2006 +0100

    [MIPS] IP27: Cleanup N/M mode configuration.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 09866258612bd9f389b0d86b3a63fe98e855d3f0
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 14 08:01:30 2006 +0100

    [MIPS] IP27: Throw away old unused hacks.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d9b8d0da404cf952a425d990c37c29c166eec954
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 12 12:20:09 2006 +0100

    [MIPS] Drop 0 definition for kern_addr_valid
    
    kern_addr_valid is currently only being used in kmem_ptr_validate which
    is making some vague attempt at verfying the validity of an address.
    Only IA-64, PARISC and x86-64 actually make some actual effort to verify
    the validity of the pointer.  Most architecture definitions of
    kern_addr_valid() just define it as 1; the Alpha and CONFIG_DISCONTIGMEM
    on i386 and MIPS even as 0; the 0-definition will result in
    kmem_ptr_validate always failing which in turn will cause d_validate to
    always fail.  d_validate's only two users are smbfs and ncpfs, so the
    0 definition ended breaking those ...
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e53639d8f313974a87540015cbb0832905be6056
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 12 09:13:56 2006 +0100

    [MIPS] Consolidate definitions of pfn_valid in one file.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 952fa954a61cee43de5afba91ae605e30ed2586c
Author: Rodolfo Giometti <giometti@linux.it>
Date:   Mon Jun 5 17:43:10 2006 +0200

    [MIPS] APM emu support
    
    Signed-off-by: Rodolfo Giometti <giometti@linux.it>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit aa9772e330d6c0a8a94316cb38ae8a7495885a60
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon Jun 12 00:55:14 2006 +0100

    [MIPS] SN: Rename SGI_SN0_N_MODE -> SGI_SN_N_MODE.
    
    It's not SN0-specific.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit bf5a312b26e9943613b765a29a8de5f4c762df11
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 10 00:37:20 2006 +0100

    [MIPS] SN: Move FRU header one level up; it is not SN0-specific.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit d8cb4e119f9a97f87f69a179d855f5dfc5d578c2
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 11 23:03:08 2006 +0100

    [MIPS] Cleanup ARCH_DISCONTIGMEM_ENABLE and NUMA configuration.
    
    IP27 configuration isn't the only NUMA system - it just happens to be
    the currently only supported MIPS NUMA system.  So move the necessary
    options back into the main MIPS Kconfig file.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3e0ba410a5d5595c2b79ecbfb85fb2466b998680
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 20:13:20 2006 +0100

    [MIPS] IP27: Remove #if 0'ed code.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 8f2f360da9262091153c97d756c40eabdde75f1a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 20:10:06 2006 +0100

    [MIPS] IP27: Nuke leftovers of _STANDALONE
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit edc123d18397008fcd4fdf04f60e033ba1042834
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 20:07:29 2006 +0100

    [MIPS] IP27: Remove leftovers of sable support.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 8dbd1d3e65f0281ddf9f7b8123ef81763bc2051f
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 20:04:23 2006 +0100

    [MIPS] IP27: Nuke last leftovers from FRUTEST
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b383f47ec71de66dbba5f7233479783041f5096a
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 20:02:21 2006 +0100

    [MIPS] IP27: Nuke last leftovers of CONFIG_SGI_IO.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5e46c3aefe60d1398488410a0c39b4cd87738614
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 4 15:14:05 2006 -0700

    [MIPS] C99-ify struct resource initialization.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit cbb306962ec4b30e03423137e22d605281a8f598
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sun Jun 4 00:55:21 2006 +0100

    [MIPS] Remove duplicate declarations from Alchemy code.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 1bd5e16168b58e73f7be432ba3558af9d38662cf
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Sat Jun 3 21:59:51 2006 +0100

    [MIPS] Cleanup __emt() a bit.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c0589f1ecea73e7bce09c569dca44b83e68a39b1
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Wed May 31 16:00:05 2006 +0900

    [MIPS] Remove unused definitions from addrspace.h.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit fbd7a38ffb127da53a4c9fd0ad09e6ed937e8e3f
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Sun May 28 00:04:01 2006 +0400

    [MIPS] arch/mips/au1000/time.c cleanup
    
    Mark au1xxx_timer_setup() __init, just because it is. Get rid of
    unneeded extern's (note that (*do_gettimeoffset)() is already declared by
    <asm/time.c>) and an unused variable. Kill some whitespace...
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit b0b0e13e7dd309be13ab9324e67893e62b136e44
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Thu May 18 12:38:47 2006 +0100

    [MIPS] Remove unused instances of prom_build_cpu_map.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c583122c26ad04bb2379933dc5acc8b9479d6c67
Author: Thiemo Seufer <ths@networkno.de>
Date:   Mon May 15 18:59:34 2006 +0100

    [MIPS] Qemu system shutdown support
    
    Signed-off-by: Thiemo Seufer <ths@networkno.de>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit eae89076e696f51762d81d6e2538c3beb59fa7bd
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue May 16 01:26:03 2006 +0900

    [MIPS] Unify mips_fpu_soft_struct and mips_fpu_hard_structs.
    
    The struct mips_fpu_soft_struct and mips_fpu_hard_struct are
    completely same now and the kernel fpu emulator assumes that.  This
    patch unifies them to mips_fpu_struct and get rid of mips_fpu_union.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 5deee2dbf495b2693629f7e8f846483432096278
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Mon May 15 15:08:22 2006 +0100

    [MIPS] Remove prototype for non-existing function.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a240a469649eaab03f0c4c7fbb21ea5041bf5572
Author: Mark.Zhan <rongkai.zhan@windriver.com>
Date:   Sat May 6 17:04:20 2006 +0800

    [MIPS] Wind River 4KC PPMC Eval Board Support
    
    Support for the GT-64120-based Wind River 4KC PPMC Evaluation board.
    
    Signed-off-by: Rongkai.Zhan <Rongkai.zhan@windriver.com>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit a643d2b57403dc943fd4d9a3c803addd1c6b0ddc
Author: Herbert Valerio Riedel <hvr@gnu.org>
Date:   Sun May 7 15:48:25 2006 +0200

    [MIPS] Au1xxx: board specific irq code cleanup
    
    Convert sizeof/sizeof use to use of ARRAY_SIZE macro, and annotate
    irqmap structures as __initdata.
    
    Signed-off-by: Herbert Valerio Riedel <hvr@gnu.org>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 3c0094426f3ff37697062b940211712746419688
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Fri Jun 16 17:10:49 2006 +0200

    [MIPS] IP27: Fix collision with hardcoded interrupt number.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 0307e8d024dffc00743fb54b9afa920a346f1adb
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Sun Jun 11 23:25:43 2006 +0900

    [MIPS] Fix futex_atomic_op_inuser.
    
    I found that NPTL's pthread_cond_signal() does not work properly on
    kernels compiled by gcc 4.1.x.  I suppose inline asm for
    __futex_atomic_op() was wrong.  I suppose:
    
    1. "=&r" constraint should be used for oldval.
    2. Instead of "r" (uaddr), "=R" (*uaddr) for output and "R" (*uaddr)
       for input should be used.
    3. "memory" should be added to the clobber list.
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit e1701fb2e2f3c02760684e26007e3379be23b690
Author: James E Wilson <wilson@specifix.com>
Date:   Mon Feb 27 15:04:38 2006 -0800

    [PATCH] Fix BCM1480 doubled process accounting times.
    
    Running a UP kernel on a bcm1480 board, I get nonsensical timing
    results, like this:
    release@unknown:~/tmp$ time ./a.out
    real    0m22.906s
    user    0m45.792s
    sys     0m0.010s
    According to my watch, this program took 23 seconds to run, so the real
    time clock is OK.  It is process accounting that is broken.
    
    I tracked this down to a problem with the function
    bcm1480_timer_interrupt in the file sibyte/bcm1480/time.c.  This
    function calls ll_timer_interrupt for cpu0, and ll_local_timer_interrupt
    for all cpus.  However, both of these functions do process accounting.
    Thus processes running on cpu0 end up with doubled times.  This is very
    obvious in a UP kernel where all processes run on cpu0.
    
    The correct way to do this is to only call ll_local_timer interrupt if
    this is not cpu0.  This can be seen in the mips-board/generic/time.c
    file, and also in the sibyte/sb1250/time.c file, both of which handle
    this correctly.  I fixed the bcm1480/time.c file by copying over the
    correct code from the sb1250/time.c file.
    
    With this fix, I now get sensible results.
    release@unknown:~/tmp$ time ./a.out
    real    0m22.903s
    user    0m22.894s
    sys     0m0.006s
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 4b29f6043dbb07823a0a618fb8b35ef3ac83e759
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 15:24:44 2006 +0100

    [MIPS] Mark PNX8550 support broken.
    
    Broken in too many way for me to fix it for 2.6.17.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 72fbfb260197a52c2bc2583f3e8f15d261d0f924
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 13:25:37 2006 +0100

    [MIPS] Fix optimization for size build.
    
    It took a while longer than on other architectures but gcc has finally
    started to strike us as well ...
    
    This also fixes the damage by 6edfba1b33c701108717f4e036320fc39abe1912.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit aac076f8805448a6331a526aa02cc438730ddd39
Author: Ralf Baechle <ralf@linux-mips.org>
Date:   Wed Jun 7 12:53:17 2006 +0100

    [MIPS] IP22: Fix ISA driver builds if CONFIG_EISA is selected.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 973c789742b4dc957cd7feb96cae98988dd0cf01
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Wed Jun 7 09:53:34 2006 +0900

    [MIPS] Cobalt: Fix undefined reference to disable_early_printk.
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit c138e12f3a2e0421a4c8edf02587d2d394418679
Author: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
Date:   Tue May 23 00:47:41 2006 +0900

    [MIPS] Fix fpu_save_double on 64-bit.
    
    > Without this fix, _save_fp() in 64-bit kernel is seriously broken.
    >
    > ffffffff8010bec0 <_save_fp>:
    > ffffffff8010bec0:       400d6000        mfc0    t1,c0_status
    > ffffffff8010bec4:       000c7140        sll     t2,t0,0x5
    > ffffffff8010bec8:       05c10011        bgez    t2,ffffffff8010bf10 <_save_fp+0x50>
    > ffffffff8010becc:       00000000        nop
    > ffffffff8010bed0:       f4810328        sdc1    $f1,808(a0)
    > ...
    
    Fix register usage in fpu_save_double() and make fpu_restore_double()
    more symmetric with fpu_save_double().
    
    Signed-off-by: Atsushi Nemoto <anemo@mba.ocn.ne.jp>
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 734996820fd02b52a3fa0fcc09bdb914934bea4c
Author: Elizabeth Oldham <beth@mips.com>
Date:   Tue Jun 6 10:57:09 2006 +0100

    [MIPS] Malta: Handle byteswapping hardare bug in big endian mode.
    
    The SOC-it system controller running in big endian mode might forget
    byteswapping when DMAing to the last word of physical memory.  Fixed by
    ignoring the last page of memory.
    
    Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

commit 466e6227e6a54d9b94b50972612fe8bf0450f786
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 17:26:23 2006 +0100

    [ARM] 3588/1: AT91RM9200 CSB337/637 board update
    
    Patch from Andrew Victor
    
    This patch updates the support for the Cogent CSB337 and CSB637 boards.
    
    The changes include:
    1. Use the new at91_uart_config structure and device registration
    functions for the UARTs.
    2. Registration of I2C and SPI platform devices.
    3. The CSB337 board uses PB0 & PB1 (and not PB2) for the LEDs.  [Patch
    from David Brownell]
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 82c583e3ae31ffa76d1280197274cc1e1cde3179
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 16:57:00 2006 +0100

    [ARM] 3587/1: AT91RM9200 hardware headers
    
    Patch from Andrew Victor
    
    These headers define the registers and bits for the SPI (Serial
    Peripheral Interface), SSC (Synchronous Serial), TC (Timer/Counter) and
    UDP (USB Device) peripherals integrated in the AT91RM9200 processor.
    
    (They will probably also be usable for the AT91SAM9 series of SoC
    processors)
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7238d7ee82d325212e83630047e9844943225118
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 16:57:00 2006 +0100

    [ARM] 3586/1: AT91RM9200 header update
    
    Patch from Andrew Victor
    
    Added definition for the bits in the Chip ID register.
    Corrected the capitalization of AT91_RTC_AMPM register name.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2e83640270b4a76a3855131953c82bbc1919e589
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 16:31:55 2006 +0100

    [ARM] 3585/1: AT91RM9200 Platform devices
    
    Patch from Andrew Victor
    
    This patch updates the platform device support for the AT91RM9200.
    
    The changes include:
    
    1. USB Host device renamed to "at91_ohci" since the driver is also
    usable on the AT91SAM9261 processor.
    2. Enabling multidrive on the USB Device's pullup pin should not be done
    for all boards.  Moved into board-specific files.  [Patch from David
    Brownell]
    3. Move enabling of PCMCIA/Compact Flash pins out of the driver.
    4. Added SPI device and resources.
    5. Added Watchdog device and resources.  [Patch from David Brownell]
    6. Added UART device and resources.
    7. The simple devices (watchdog, rtc, i2c) are now automatically
    registered and don't have to be registered separately in each
    board-specific file. [Patch from David Brownell]
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5af29e56c221d709bdbd5fccaf190e21f290a30e
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Mon Jun 19 15:37:31 2006 +0100

    [ARM] Fix badge4 build error
    
    The Badge4 PCMCIA driver was referencing structure elements which
    had been renamed.  Fix the missing renames.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 441ff855f3edf5d355bea30f557bbed6bcd42c6c
Author: H. Peter Anvin <hpa@zytor.com>
Date:   Mon Jun 19 15:35:36 2006 +0100

    [ARM] Fix byte order macros for Thumb
    
    The byte order functions are visible to userspace.  Unfortunately,
    __arch_swab32() contains an assembly instruction which is invalid when
    compiling for Thumb.  This reverts to the C version when compiling for
    Thumb.
    
    Signed-off-by: H. Peter Anvin <hpa@zytor.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5e6423871772b89120c9fb356d2eabb67fea60bd
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:30:21 2006 +0100

    [ARM] 3577/1: netX: Default config for netx based boards
    
    Patch from Sascha Hauer
    
    This patch adds the default config file for netx based boards.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2697c5e1f799f201366d5fd7d25e96a21587f1a9
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:29:45 2006 +0100

    [ARM] 3576/1: netX: board support for NXEB500HMI development board
    
    Patch from Sascha Hauer
    
    This patch adds the board specific code for the Hilscher NXEB500HMI
    development board.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit af614ba072dab2940471fec1f30bd59b8272fc6b
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:29:44 2006 +0100

    [ARM] 3575/1: netX: board support for NXDB500 development board
    
    Patch from Sascha Hauer
    
    This patch adds the board specific code for the Hilscher NXDB500
    development board.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 693532dcff871543639743e9c2e2b99c492f8f8d
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:29:43 2006 +0100

    [ARM] 3574/1: netX: board support for NXDKN development board
    
    Patch from Sascha Hauer
    
    This patch adds the board specific code for the Hilscher NXDKN
    development board.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 8e77da68a6107ee47323fec5dfb3a93ebbc809e2
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:28:20 2006 +0100

    [ARM] 3569/2: netX: driver for XMAC/XPEC engines
    
    Patch from Sascha Hauer
    
    The netX processors have generic network bitstream engines (XMAC/XPEC).
    This driver adds support for firmware loading and start, stop, reset
    commands.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ef70cd4d247defcd7c0f789a5a98deab0afadf53
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:28:19 2006 +0100

    [ARM] 3568/2: netX: pointer fifo driver
    
    Patch from Sascha Hauer
    
    This patch adds support for the pointer FIFOs on netX.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit bb6d8c8828123e01e2ae6c9d9c4870477889fd94
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 15:27:53 2006 +0100

    [ARM] 3567/2: arm: base support for Hilscher netX
    
    Patch from Sascha Hauer
    
    This patch adds the base support for Hilscher's netX network
    processors.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 814138ffa488824393d2f49f2720dcd197a7d4cf
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 15:26:54 2006 +0100

    [ARM] 3584/1: AT91RM9200 GPIO suspend/resume support
    
    Patch from Andrew Victor
    
    This patch adds suspend/resume/set_wake support for the AT91RM9200's
    GPIO interrupts.
    
    Original patch from David Brownell.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 683c66bf75ce277b90d658da0c1a0bf1a55cce4c
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 15:26:53 2006 +0100

    [ARM] 3583/1: AT91RM9200 IRQ suspend/resume support
    
    Patch from Andrew Victor
    
    Added suspend/resume/set_wake support for the AT91RM9200's AIC interrupt
    controller.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 37f2e4bc120bd784e7f69f961233e1c16b74d170
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 15:26:52 2006 +0100

    [ARM] 3582/1: AT91RM9200 IRQ trigger types
    
    Patch from Andrew Victor
    
    The AIC interrupt controller's set_irq_type() can also be used for
    internal interrupts.  IRQT_LOW and IRQT_FALLING are the only options not
    supported for the internal interrupts.
    
    [Original patch from Karl Olsen]
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 10e8e1fb758eed5cfb0cae1b770f842624851e7b
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 15:26:51 2006 +0100

    [ARM] 3581/1: AT91RM9200 Internal SRAM
    
    Patch from Andrew Victor
    
    This patch maps the AT91RM9200's internal SRAM into the virtual memory
    address space - just below the internal peripheral registers.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2a6f9902c6a799a9c0218b37e39b75690c3b9a70
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 15:26:50 2006 +0100

    [ARM] 3580/1: AT91RM9200 Timer suspend/resume support
    
    Patch from Andrew Victor
    
    Added suspend/resume support for the AT91RM9200 timer.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 963151f2471d0e6475d8b2d3a005417aec1766f7
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 15:23:41 2006 +0100

    [ARM] 3579/1: AT91RM9200 Timer simplification
    
    Patch from Andrew Victor
    
    Use a global variable 'last_crtr' to store the time of the last timer
    tick instead of the ST_RTAR register.
    It's faster, frees up the ST_RTAR register for other uses, and hopefully
    makes the code more understandable.  [Patch from Peter Menzebach]
    
    Also add the SA_TIMER flag to Timer IRQ.  (It seems to be required for
    the realtime preempt patch).
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 3095faf5295f2da9118469c925d2cfb7775ad287
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 13:30:58 2006 +0100

    [ARM] 3572/1: netX: framebuffer driver for Hilscher netX
    
    Patch from Sascha Hauer
    
    This patch adds framebuffer support for Hilscher's netX network
    processors.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit f8441e13449638e9fc3c160c35ada3b6f1f8d9c0
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 13:29:07 2006 +0100

    [ARM] 3571/1: netX: serial driver for Hilscher netX
    
    Patch from Sascha Hauer
    
    This patch adds the serial driver for Hilscher's netX network
    processors.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ab76fb13d73488ded53c87b77b1b5e38df2acf74
Author: Sascha Hauer <sascha@saschahauer.de>
Date:   Mon Jun 19 13:24:32 2006 +0100

    [ARM] 3566/1: netX: register definitions
    
    Patch from Sascha Hauer
    
    This patch adds the register definitions for Hilscher's netX network
    processors.
    
    Signed-off-by: Robert Schwebel <r.schwebel@pengutronix.de>
    Signed-off-by: Sascha Hauer <s.hauer@pengutronix.de>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 91f8ed835ffb34b4108cc16eefd3303e4068bee0
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 13:20:23 2006 +0100

    [ARM] 3578/1: AT91RM9200 Clock update
    
    Patch from Andrew Victor
    
    Some updates to the clock infrastructure for the AT91RM9200.
    
    1. Hard-coded values replaced with names defined in at91rm9200_sys.h.
    2. Added the four PIO clocks, which are enabled at startup.
    3. At startup, disable all unused clocks.
    4. Minor bugfix for usage counts associated with MCK. [Patch from David
    Brownell]
    5. Added at91_clock_associate() function to associate device & function
    with a particular clock.  [Patch from David Brownell]
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b7408aff2d325581dcafffa5dbcc09c42ae64b5d
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Mon Jun 19 13:08:39 2006 +0100

    [ARM] 3563/1: LED: Set the LOCOMO LED driver default triggers
    
    Patch from Richard Purdie
    
    Set the default triggers for the LOCOMO LED driver.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit b44fb7a09e6bb7d77c1b4b402591f6f953c1e51c
Author: Andrew Victor <andrew@sanpeople.com>
Date:   Mon Jun 19 13:06:05 2006 +0100

    [ARM] 3565/1: AT91RM9200 MMC update
    
    Patch from Andrew Victor
    
    This patch includes code cleanups and minor fixes to the AT91RM9200 MMC
    driver.
    
    1. Replace calls to DBG() with pr_debug().
    2. 'host' can never be null, so don't bother checking for that case.
    3. Remove SA_SAMPLE_RANDOM from request_irq().  [Patch from Matt
    Mackall]
    4. clk_get() doesn't return NULL on error - need to test returned value
    with IS_ERR().
    5. Free resources if clk_get() or request_irq() fails.
    
    Signed-off-by: Andrew Victor <andrew@sanpeople.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a3fd4a1b9ced850ac1a9d5bb9f8fab494d07f3fa
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 4 17:51:15 2006 +0100

    [MMC] Convert all hosts except mmci to use data->blksz
    
    The MMC specification allows non-power of two block sizes.  As such,
    we should not pass the log2 block size to host drivers, but instead
    pass the byte size.
    
    However, ARM MMCI can only work with log2 block size, so continue to
    pass both the log2 block size and byte block size.  This means that
    for the moment, the byte block size must remain a power of two, but
    this is the first stage of removing this restriction for other hosts.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ad3b5fb772e6a824f1ac341eb8e392eca6fc524f
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 19 09:43:23 2006 +0100

    [MTD NAND] S3C2410 driver cleanup
    
    Fix unused variables and commenting since tglx's
    new NAND updates
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d1fef3c5e16327661be6cb127d68f5be379697a5
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Mon Jun 19 09:29:38 2006 +0100

    [MTD NAND] s3c24x0 board: Fix clock handling, ensure proper initialisation.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0d8fee3270f8a5e4bf95fbed3e81e21b57f8a5a0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Mon Jun 19 08:41:30 2006 +1000

    [XFS] Kill direct access to ->count in valusema(); all we ever use it for
    is check if semaphore is actually locked, which can be trivially done in
    portable way. Code gets more reabable, while we are at it...
    
    SGI-PV: 953915
    SGI-Modid: xfs-linux-melb:xfs-kern:26274a
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit a805bad5daae8d4f92ce46f467484d4867e996d4
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Jun 19 08:40:27 2006 +1000

    [XFS] Remove unneeded conditional code on NFS export interface related
    code paths.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26250a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6fe90e6d1451a05db37b2a582410ddcb45af3606
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Jun 19 08:40:12 2006 +1000

    [XFS] Remove an incorrect use of unlikely() on a relatively likely code
    path.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26249a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1e69dd0eb354d6f1a77098a3946b5ba57d4e3109
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Jun 19 08:39:53 2006 +1000

    [XFS] Push some common code out of write path into core XFS code for
    sharing.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26248a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1d47bec290a6f1f366192946840efef5076d9fc7
Author: Nathan Scott <nathans@sgi.com>
Date:   Mon Jun 19 08:39:16 2006 +1000

    [XFS] Remove unnecessary local from open_exec dmapi path.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26247a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 96ce2385dd2817da549910001a69ac0a2762a1b9
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 23:06:41 2006 +0100

    [ARM] 3559/1: S3C2442: core and serial port
    
    Patch from Ben Dooks
    
    Core support for the Samsung S3C2442, and the
    serial port driver update to allow the serial
    port blocks to be used.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 66a9b49a370baac75d90b7da9a2445997a8a9438
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 23:04:05 2006 +0100

    [ARM] 3557/1: S3C24XX: centralise and cleanup uart registration
    
    Patch from Ben Dooks
    
    All the S3C24XX based devices currently have similar
    uart blocks, in the same location. Make the process
    of adding new uart blocks easier by commonising the
    device definitions and adding a new init function
    for the cpu code.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 810c894f2b27b634883723f9fee10a7cf1d0bcb4
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 22:56:37 2006 +0100

    [ARM] 3558/1: SMDK24XX: LED platform devices
    
    Patch from Ben Dooks
    
    Platform devices for the LEDs on all the SMDK24XX boards
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 1046d88001e7b8819f60dece2eaf1b44bf4b4460
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 22:44:21 2006 +0100

    [JFFS2] Check CRC32 on dirent and data nodes each time they're read
    
    Also, make sure dirents are marked REF_UNCHECKED when we 'discover' them
    through eraseblock summary.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit fc6612f627c697b348a4ef64f16fb373d86dbd76
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 18:35:10 2006 +0100

    [JFFS2] When retiring nextblock, allocate a node_ref for the wasted space
    
    Failing to do so makes the calculated length of the last node incorrect,
    when we're not using eraseblock summaries.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9df5db80a781c1a1c67388c82f64f835093c3cc3
Author: David Brownell <david-b@pacbell.net>
Date:   Sun Jun 18 16:39:33 2006 +0100

    [ARM] 3534/1: add spi support to lubbock platform
    
    Patch from David Brownell
    
    This adds the platform device for SSP/SPI controller, and declares
    the ads7846 device hooked up to it.  Not all Lubbock boards appear
    to populate the connector needed to use this instead of the ucb1400
    chip, but it can always be used as a temperature sensor.
    
    In short, this is probably most useful as an example of how to
    provide the configuration data used by the pxa2xx_spi driver.
    (Last tested against a slightly earlier version of that driver.)
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ebc67da65fda03cbe5b4019d91229287fddd5c6e
Author: Tony Lindgren <tony@atomide.com>
Date:   Sun Jun 18 16:26:58 2006 +0100

    [ARM] 3554/1: ARM: Fix dyntick locking
    
    Patch from Tony Lindgren
    
    This patch fixes some dyntick locking issues on ARM as pointed
    out by Russell King.
    
    Signed-off-by: Tony Lindgren <tony@atomide.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 36fe6a83b4a52276eebb929ff94896fa65d83401
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 16:21:53 2006 +0100

    [ARM] 3553/1: S3C24XX: earlier print of cpu idcode info
    
    Patch from Ben Dooks
    
    Move the printk of the CPU information and IDCODE
    before the checking of the table entry validity
    to aide in debugging new cpu entries.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 68d5969378fc21d9f70c0fdbc25176a68d873922
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 16:21:52 2006 +0100

    [ARM] 3552/1: S3C24XX: Move VA of GPIO for low-level debug
    
    Patch from Ben Dooks
    
    Using the low-level debug routines early in the
    kernel debug cause the 1:1 mapping to get into
    the TLB, which is not flushed until after the
    CPU detection process (which needs the GPIO VA).
    
    This patch moves the VA for the GPIO to the
    same offset as the physical offset of the UART
    to the GPIO.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 4833acb2e19f669ce87c439a7d91ead600d8a7c9
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 16:21:51 2006 +0100

    [ARM] 3551/1: S3C24XX: PM code failes to compile with CONFIG_DCACHE_WRITETHROUGH
    
    Patch from Ben Dooks
    
    If CONFIG_CPU_DCACHE_WRITETHOUGH is set, then the
    S3C24XX PM code fails to compile, as there is no
    need to flush the D-cache, the flush function
    arm920_flush_kern_cache_all() is not compiled.
    
    Fix the code to not use this if the config is set.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit e2e5810f41646a400a9c6f941000db88d2ca10eb
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Sun Jun 18 16:21:50 2006 +0100

    [ARM] 3550/1: OSIRIS: fix serial port map for 1:1
    
    Patch from Ben Dooks
    
    The default serial port-mapping for the Osiris has
    the port 2 mapped onto the first serial port, and
    no port1. Correct this so port 1 is port.
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 45a7b9cf8e0634fa546e9e7ad29af990ab4afcf2
Author: Catalin Marinas <catalin.marinas@arm.com>
Date:   Sun Jun 18 16:21:50 2006 +0100

    [ARM] 3548/1: Fix the ARMv6 CPU id in compressed/head.S
    
    Patch from Catalin Marinas
    
    This code was still using the old format for the ARMv6 CPU id and it wasn't
    flushing the caches on the MPCore CPU (and other ARM1176 cores). The patch
    changes the mask bits to cope with the new id format.
    
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit aca6ca10974aa78adfb47291722ce851160213e4
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 20:28:03 2006 +0100

    [ARM] Gather common sigframe saving code into setup_sigframe()
    
    Gather the common sigmask savbing code inside setup_sigcontext(), and
    rename the function setup_sigframe().  Pass it a sigframe structure.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 680714844fd1dcc6f03b22353103985be9d58db6
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 20:23:02 2006 +0100

    [ARM] Gather common sigframe restoration code into restore_sigframe()
    
    Gather the sigmask restoration code inside restore_sigcontext(), and
    rename the function restore_sigframe().  Pass it a sigframe structure.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cb3504e8fa84870aabcf51c67e29675817e30836
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 20:18:25 2006 +0100

    [ARM] Re-use sigframe within rt_sigframe
    
    sigframe is now a contained subset of rt_sigframe, so we can start
    to re-use code which accesses sigframe data for both rt and non-rt
    signals.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 7d4fdc19fc134f69f3711c14e63caef56aee0f2a
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 20:13:25 2006 +0100

    [ARM] Merge sigcontext and sigmask members of sigframe
    
    ucontext contains both the sigcontext and sigmask structures, and
    is also used for rt signal contexts.  Re-use this structure for
    non-rt signals.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit cc1a852137d6c12d50c372d61a1c5f763998536b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 18:02:25 2006 +0100

    [ARM] Replace extramask with a full copy of the sigmask
    
    There's not much point in splitting the sigmask between two different
    locations, so copy it entirely into a proper sigset_t.  This will
    eventually allow rt_sigframe and sigframe to share more code.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ce7a3fdc5c55fd01d8e2deda0daef84473644f8b
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 18:00:34 2006 +0100

    [ARM] Remove rt_sigframe puc and pinfo pointers
    
    These two members appear to be surplus to requirements.  Discussing
    this issue with glibc folk:
    
    | > Additionally, do you see any need for these weird "puc" and "pinfo"
    | > pointers in the kernels rt_sigframe structure?  Can we kill them?
    |
    | We can kill them.  I checked with Phil B. about them last week, and he
    | didn't remember any reason they still needed to be there.  And nothing
    | should know where they are on the stack.  Unfortunately, doing this
    | will upset GDB, which knows that the saved registers are 0x88 bytes
    | above the stack pointer on entrance to an rt signal trampoline; but,
    | since puc and pinfo are quite recognizable, I can adapt GDB to support
    | the new layout if you want to remove them.
    
    So remove them.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 5247593c9634309d1b9f7b549495b8e5ad521688
Author: Paul Brook <paul@codesourcery.com>
Date:   Tue May 16 14:25:55 2006 +0100

    [ARM] 3335/1: Old-abi Thumb sys_syscall broken
    
    Patch from Paul Brook
    
    The old-abi sys_syscall syscall is broken when called from Thumb mode. It
    assumes the syscall number is an Arm syscall number (ie. starts from
    __NR_OABI_SYSCALL_BASE).  In thumb mode syscall numbers start from zero.
    
    The patch below fixes this by clearing the nigh bits of the syscall number
    instead of inverting them. Technically this means we accept some invalid
    syscall numbers, but I can't see how that could be a problem. The two sets of
    numbers far apart that unimplemented syscalls should still be rejected.
    
    Signed-off-by: Paul Brook <paul@codesourcery.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 254a1564fb6f9242782f9a8e5d59a212424686e8
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Tue May 16 11:54:38 2006 +0100

    [ARM] 3467/1: [3/3] Support for Philips PNX4008 platform: defconfig
    
    Patch from Vitaly Wool
    
    This patch adds default configuration file PNX4008 ARM platform.
    It\'s basically the same as the previos one.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Dmitry Pervushin <dpervushin@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 78818e477bf785391b02672d053fdbb2e111fb50
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Tue May 16 11:54:37 2006 +0100

    [ARM] 3466/1: [2/3] Support for Philips PNX4008 platform: chip support
    
    Patch from Vitaly Wool
    
    This patch adds basic chip support for PNX4008 ARM platform.
    It's basically the same as the previous one, but with the rmk's
    comments taken into account.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Dmitry Pervushin <dpervushin@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit a5a503038e71a6b7d4bd9e596ac13087274e60c7
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Tue May 16 11:54:36 2006 +0100

    [ARM] 3465/1: [1/3] Support for Philips PNX4008 platform: headers
    
    Patch from Vitaly Wool
    
    This patch adds kernel headers for PNX4008 ARM platform.
    It's basically the same as the previos one, but with the rmk's comments taken into account.
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: Dmitry Pervushin <dpervushin@gmail.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 51cb21a9cd2e3bba8a69948794eb9480facdef45
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:43 2006 +0100

    [ARM] 3407/1: lpd7x: documetation update
    
    Patch from Marc Singer
    
    New documentation for the touchscreen controllers and LCD panels.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit d4adcffb6574d3414f2e39d6ca1be5eccf97ac52
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:40 2006 +0100

    [ARM] 3406/1: lpd7x: compilation fix for smc91x
    
    Patch from Marc Singer
    
    Reworking of the adaptation macros to allow driver to compile again
    for the lpd7x's.  Also, support added for the lh79520 so it may use
    the smc91x.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit c97898614bf0ac9605333a2c99bdbcf4276a22bd
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:32 2006 +0100

    [ARM] 3405/1: lpd7a40x: CPLD ssp driver
    
    Patch from Marc Singer
    
    Driver for operating SSP devices through LPD7A40X CPLD chip.  This
    driver is used by the audio codecs.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 903e2bbda92e5a14f8050154046a14230abb800b
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:30 2006 +0100

    [ARM] 3404/1: lpd7a40x: AMBA CLCD support
    
    Patch from Marc Singer
    
    Board support and LCD panel configurations to integrate lh7a40x's with
    the amba clcd driver.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2514581eb13f778d70bdc270b8dc36bd6eaac4f8
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:29 2006 +0100

    [ARM] 3403/1: lpd7a40x: updated default configurations
    
    Patch from Marc Singer
    
    Revised default configuration files.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit fb62c5a7043617dd9d678beafc368b217aa28da4
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:29 2006 +0100

    [ARM] 3402/1: lpd7a40x: serial driver bug fix
    
    Patch from Marc Singer
    
    The serial driver now sets up the third UART when it is to be used.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 638b266630db8d492255d340e18d46ba6ab1b057
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:28 2006 +0100

    [ARM] 3401/1: lpd7a40x: platform update
    
    Patch from Marc Singer
    
    Updates to the lpd7a40x_platform files.  Includes support for new
    architecture, lpd7a400.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2295196c30ea686389519f699f0ccbfbc5c3b94c
Author: Marc Singer <elf@buici.com>
Date:   Tue May 16 11:41:27 2006 +0100

    [ARM] 3400/1: lpd7a40x: platform headers update
    
    Patch from Marc Singer
    
    Updates to the lpd7a40x platform headers.  Includes support for new
    architecture, lpd7a400.
    
    Signed-off-by: Marc Singer <elf@buici.com>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 14228a49913850493c7f9eb4501438c32da353f7
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Sun Jun 18 13:00:48 2006 +0100

    [SERIAL] PARPORT_SERIAL should depend on SERIAL_8250_PCI
    
    Since parport_serial uses symbols from 8250_pci, there should
    be a dependency between the configuration symbols for these
    two modules.  Problem reported by Andrey Borzenkov
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit ef4d04b87d16839500a77aa1279f80be7ec4ef2e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:58:53 2006 +0100

    Add empty Kbuild files for 'make headers_install' in remaining arches.
    
    These include nothing more than the basic set of files listed in
    asm-generic/Kbuild.asm. Any extra arch-specific files will need to be
    added.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 57e580f885a62c21fe75e35e9e445fb6fb82509c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:45:15 2006 +0100

    Add Kbuild file for Alpha 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a29ee9f3bf49d9a19def177145dcb85fc021c096
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:22:49 2006 +0100

    Add Kbuild file for SPARC 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit dc901d6d2596d45f2c398e735125e5123b4e2774
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:22:20 2006 +0100

    Add Kbuild file for IA64 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1e7c34994d809820dbe31220397b62660d8d1514
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:22:02 2006 +0100

    Add Kbuild file for S390 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c509075e711305d591760e4f0e8f57ff178cd501
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:19:46 2006 +0100

    Add Kbuild file for i386 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 54863bb0d8782bbc81fe0275f1d20042fa14e32f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:19:11 2006 +0100

    Add Kbuild file for x86_64 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6a87a86d064cee49b3c298c558b990b65d736cf4
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:17:47 2006 +0100

    Add Kbuild file for PowerPC 'make headers_install'
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8555255f0b426858d8648c6206b70eb906cf4ec7
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:14:01 2006 +0100

    Add generic Kbuild files for 'make headers_install'
    
    This adds the Kbuild files listing the files which are to be installed by
    the 'headers_install' make target, in generic directories.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 684753599afc76aa8f66c731bafb7204b39265b8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 12:02:10 2006 +0100

    Basic implementation of 'make headers_check'
    
    Based on the 'headers_install' target, this performs a basic sanity check
    on the exported headers -- so far only checking that they do not include
    any other headers which aren't selected for import, but easily extendable.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8d730cfb50cc77da6d00f941daef440918a1922f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 11:58:39 2006 +0100

    Basic implementation of 'make headers_install'
    
    This adds a make target which exports a subset of headers which contain
    definitions which are useful for system libraries and tools. It uses the
    BSD 'unifdef' tool to remove instances of #ifdef __KERNEL__, and uses
    sed to remove markers like __user.
    
    Based on an original implementation by Arnd Bergmann <arnd@arndb.de>
    Hacked about by David Woodhouse <dwmw2@infradead.org>
    Reviewed and cleaned up by Sam Ravnborg <sam@ravnborg.org>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2ba72cb754bb091bb24a44e9682f7105110f7f38
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 10:22:40 2006 +0100

    [JFFS2] Mark XATTR support as experimental, for now
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2abac1db3522d9f56c695d1b42e77f3e52d4c51a
Author: Dave Airlie <airlied@linux.ie>
Date:   Sun Jun 18 16:12:27 2006 +1000

    intelfb: fixup clock calculation debugging.
    
    The debugging code for pll clocks was wrong and causing div by 0.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 47552c4e555eefe381f3d45140b59a2ea4b16486
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 17 23:00:20 2006 -0700

    [ETHTOOL]: Fix UFO typo
    
    The function ethtool_get_ufo was referring to ETHTOOL_GTSO instead of
    ETHTOOL_GUFO.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d5b9f4c083b0e3102f3101545279f623680cb3a0
Author: Neil Horman <nhorman@tuxdriver.com>
Date:   Sat Jun 17 22:59:03 2006 -0700

    [SCTP]: Fix persistent slowdown in sctp when a gap ack consumes rx buffer.
    
    In the event that our entire receive buffer is full with a series of
    chunks that represent a single gap-ack, and then we accept a chunk
    (or chunks) that fill in the gap between the ctsn and the first gap,
    we renege chunks from the end of the buffer, which effectively does
    nothing but move our gap to the end of our received tsn stream. This
    does little but move our missing tsns down stream a little, and, if the
    sender is sending sufficiently large retransmit frames, the result is a
    perpetual slowdown which can never be recovered from, since the only
    chunk that can be accepted to allow progress in the tsn stream necessitates
    that a new gap be created to make room for it. This leads to a constant
    need for retransmits, and subsequent receiver stalls. The fix I've come up
    with is to deliver the frame without reneging if we have a full receive
    buffer and the receiving sockets sk_receive_queue is empty(indicating that
    the receive buffer is being blocked by a missing tsn).
    
    Signed-off-by: Neil Horman <nhorman@tuxdriver.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d7c2c9e3977e4312d093ac092761798d4d47c9e0
Author: Tsutomu Fujii <t-fujii@nb.jp.nec.com>
Date:   Sat Jun 17 22:58:28 2006 -0700

    [SCTP]: Send only 1 window update SACK per message.
    
    Right now, every time we increase our rwnd by more then MTU bytes, we
    trigger a SACK.  When processing large messages, this will generate a
    SACK for almost every other SCTP fragment. However since we are freeing
    the entire message at the same time, we might as well collapse the SACK
    generation to 1.
    
    Signed-off-by: Tsutomu Fujii <t-fujii@nb.jp.nec.com>
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 503b55fd77d11381b1950d1651d3bc782c0cc2cd
Author: Sridhar Samudrala <sri@us.ibm.com>
Date:   Sat Jun 17 22:57:28 2006 -0700

    [SCTP]: Don't do CRC32C checksum over loopback.
    
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4c9f5d5305a23851e67471b147e0d459a7166717
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Sat Jun 17 22:56:08 2006 -0700

    [SCTP] Reset rtt_in_progress for the chunk when processing its sack.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5636bef7324f49e36f05ec8a5f6284e11b1bcca4
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Sat Jun 17 22:55:35 2006 -0700

    [SCTP]: Reject sctp packets with broadcast addresses.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 402d68c43326d2f0e7e2e9a9013cd4c098d9b87c
Author: Vlad Yasevich <vladislav.yasevich@hp.com>
Date:   Sat Jun 17 22:54:51 2006 -0700

    [SCTP]: Limit association max_retrans setting in setsockopt.
    
    When using ASSOCINFO socket option, we need to limit the number of
    maximum association retransmissions to be no greater than the sum
    of all the path retransmissions. This is specified in Section 7.1.2
    of the SCTP socket API draft.
    However, we only do this if the association has multiple paths. If
    there is only one path, the protocol stack will use the
    assoc_max_retrans setting when trying to retransmit packets.
    
    Signed-off-by: Vlad Yasevich <vladislav.yasevich@hp.com>
    Signed-off-by: Sridhar Samudrala <sri@us.ibm.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c7ce1ae21223fe1f905feba272bc14b87994a57d
Author: Tushar Gohad <tgohad@mvista.com>
Date:   Sat Jun 17 22:54:03 2006 -0700

    [PFKEYV2]: Fix inconsistent typing in struct sadb_x_kmprivate.
    
    Signed-off-by: Tushar Gohad <tgohad@mvista.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c5396a31b20991c856facbce18a2a56d1a14e8d0
Author: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
Date:   Sat Jun 17 22:48:48 2006 -0700

    [IPV6]: Sum real space for RTAs.
    
    This patch fixes RTNLGRP_IPV6_IFINFO netlink notifications.  Issue
    pointed out by Patrick McHardy <kaber@trash.net>.
    
    Signed-off-by: YOSHIFUJI Hideaki <yoshfuji@linux-ipv6.org>
    Acked-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4b6ace7f02cddb8c363ad27bb1e5014c6791e34a
Merge: b5ed763... 427abfa...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Jun 18 01:22:42 2006 -0400

    Merge branch 'master' into upstream

commit b293acfd3133393a81bcd382eb71a210c9cf9526
Author: David S. Miller <davem@davemloft.net>
Date:   Sat Jun 17 22:16:13 2006 -0700

    [IRDA]: Use put_unaligned() in irlmp_do_discovery().
    
    irda_device_info->hints[] is byte aligned but is being
    accessed as a u16
    
    Based upon a patch by Luke Yang <luke.adi@gmail.com>.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ea6e1e94f2cb9ae54bd1428e1ef3e84a749ceed8
Merge: db9ca58... 427abfa...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Jun 18 01:15:45 2006 -0400

    Merge branch 'master' into upstream

commit 2c6cc0d8539f121c3c75aa3641c19b67e8723379
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 17 22:06:45 2006 -0700

    [BRIDGE]: Add support for NETIF_F_HW_CSUM devices
    
    As it is the bridge will only ever declare NETIF_F_IP_CSUM even if all
    its constituent devices support NETIF_F_HW_CSUM.  This patch fixes
    this by supporting the first one out of NETIF_F_NO_CSUM,
    NETIF_F_HW_CSUM, and NETIF_F_IP_CSUM that is supported by all
    constituent devices.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8648b3053bff39a7ee4c711d74268079c928a657
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat Jun 17 22:06:05 2006 -0700

    [NET]: Add NETIF_F_GEN_CSUM and NETIF_F_ALL_CSUM
    
    The current stack treats NETIF_F_HW_CSUM and NETIF_F_NO_CSUM
    identically so we test for them in quite a few places.  For the sake
    of brevity, I'm adding the macro NETIF_F_GEN_CSUM for these two.  We
    also test the disjunct of NETIF_F_IP_CSUM and the other two in various
    places, for that purpose I've added NETIF_F_ALL_CSUM.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 00b7050426da8e7e58c889c5c80a19920d2d41b3
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Jun 17 21:58:45 2006 -0700

    [TG3]: Convert to non-LLTX
    
    Herbert Xu pointed out that it is unsafe to call netif_tx_disable()
    from LLTX drivers because it uses dev->xmit_lock to synchronize
    whereas LLTX drivers use private locks.
    
    Convert tg3 to non-LLTX to fix this issue. tg3 is a lockless driver
    where hard_start_xmit and tx completion handling can run concurrently
    under normal conditions. A tx_lock is only needed to prevent
    netif_stop_queue and netif_wake_queue race condtions when the queue
    is full.
    
    So whether we use LLTX or non-LLTX, it makes practically no
    difference.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c71302d61f844f766a44e1b04258086cc41f624e
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Jun 17 21:55:55 2006 -0700

    [TG3]: Remove unnecessary tx_lock
    
    Remove tx_lock where it is unnecessary. tg3 runs lockless and so it
    requires interrupts to be disabled and sync'ed, netif_queue and NAPI
    poll to be stopped before the device can be reconfigured. After
    stopping everything, it is no longer necessary to get the tx_lock.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 35089bb203f44e33b6bbb6c4de0b0708f9a48921
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Tue Jun 13 22:33:04 2006 -0700

    [TCP]: Add tcp_slow_start_after_idle sysctl.
    
    A lot of people have asked for a way to disable tcp_cwnd_restart(),
    and it seems reasonable to add a sysctl to do that.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9e1881dec9e3e8f8408551cddfda489857a7ec99
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Jun 13 15:04:12 2006 -0700

    [BNX2]: Update version and reldate
    
    Update driver version to 1.4.42.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c86a31f452f7dd132a1765d6d7160b0947f37b14
Author: Michael Chan <mchan@broadcom.com>
Date:   Tue Jun 13 15:03:47 2006 -0700

    [BNX2]: Use CPU native page size
    
    Use CPU native page size to determine various ring sizes. This allows
    order-0 memory allocations on all systems.
    
    Added check to limit the page size to 16K since that's the maximum rx
    ring size that will be used. This will prevent using unnecessarily
    large page sizes on some architectures with large page sizes.
    [Suggested by David Miller]
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7a6400cd3dbcfc3bbffcdb6dac4ffc957fb50e19
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 12 22:22:17 2006 -0700

    [BNX2]: Use compressed firmware
    
    Change bnx2_fw.h to use compressed text for all CPU images.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit fba9fe911bb4213c3de1d142fe0ee127cd361a78
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 12 22:21:25 2006 -0700

    [BNX2]: Add firmware decompression
    
    Add functions to decompress firmware before loading to the internal
    CPUs. Compressing the firmware reduces the driver size significantly.
    
    Added file name length sanity check in the gzip header to prevent
    going past the end of buffer [suggested by DaveM].
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 160882722cb21cbe5cead55cf38a5e70fc3af63e
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 12 22:16:43 2006 -0700

    [BNX2]: Allow WoL settings on new 5708 chips
    
    Allow WOL settings on 5708 B2 and newer chips that have the problem
    fixed.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cea94db9b496d7fe25bbd3ebd0f24afaac2069d5
Author: Michael Chan <mchan@broadcom.com>
Date:   Mon Jun 12 22:16:13 2006 -0700

    [BNX2]: Add an rx drop counter
    
    Add a counter for packets dropped by firmware.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc726a71d2799f0f8b68a17f49d86aa030f64abc
Author: Luca De Cicco <ldecicco@gmail.com>
Date:   Sun Jun 11 23:02:19 2006 -0700

    [TCP] Westwood: reset RTT min after FRTO
    
    RTT_min is updated each time a timeout event occurs
    in order to cope with hard handovers in wireless scenarios such as UMTS.
    
    Signed-off-by: Luca De Cicco <ldecicco@gmail.com>
    Signed-off-by: Stephen Hemminger <shemminger@dxpl.pdx.osdl.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b3a92eabe5b67bd207a38ae13dd51f4e08c1f6f7
Author: Luca De Cicco <ldecicco@gmail.com>
Date:   Sun Jun 11 23:01:59 2006 -0700

    [TCP] Westwood: bandwidth filter startup
    
    The bandwidth estimate filter is now initialized with the first
    sample in order to have better performances in the case of small
    file transfers.
    
    Signed-off-by: Luca De Cicco <ldecicco@gmail.com>
    Signed-off-by: Stephen Hemminger <shemminger@dxpl.pdx.osdl.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b7d7a9e3c900f0733bf2aabdd41e6dbc70eae94b
Author: Luca De Cicco <ldecicco@gmail.com>
Date:   Sun Jun 11 23:01:39 2006 -0700

    [TCP] Westwood: comment fixes
    
    Cleanup some comments and add more references
    
    Signed-off-by: Luca De Cicco <ldecicco@gmail.com>
    Signed-off-by: Stephen Hemminger <shemminger@dxpl.pdx.osdl.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f61e29018a30c738e1298e1b13be956aa17ee17b
Author: Stephen Hemminger <shemminger@dxpl.pdx.osdl.net>
Date:   Sun Jun 11 23:01:02 2006 -0700

    [TCP] Westwood: fix first sample
    
    Need to update send sequence number tracking after first ack.
    Rework of patch from Luca De Cicco.
    
    Signed-off-by: Stephen Hemminger <shemminger@dxpl.pdx.osdl.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bdeb04c6d9a957ae2a51c3033414467b82b2a736
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Sun Jun 11 21:20:38 2006 -0700

    [NET]: net.ipv4.ip_autoconfig sysctl removal
    
    The sysctl net.ipv4.ip_autoconfig is a legacy value that is not used.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit d1e100ba69131bb788e89a07b94b08f6e006725a
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sun Jun 11 20:57:17 2006 -0700

    [BNX2]: Endian fixes.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8ef80aef118e405f2b6505f623830e6e73224f85
Author: Nick Fedchik <nfedchik@atlantic-link.com.ua>
Date:   Sun Jun 11 20:56:02 2006 -0700

    [IRDA]: irda-usb.c: STIR421x cleanups
    
    This cleans the STIR421x part of the irda-usb code. We also no longer
    try to load all existing firmwares but only the matching one
    (according to the USB id we get from the dongle).
    
    Signed-off-by: Nick Fedchik <nfedchik@atlantic-link.com.ua>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f8d596211291a8d98efa47ae0261326218f310cf
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat Jun 10 18:05:35 2006 -0700

    [IPX]: Endian bug in ipxrtr_route_packet()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3cc0e873986fe594d0e96d07259b11f755325cb2
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 9 16:13:38 2006 -0700

    [NET]: Warn in __skb_trim if skb is paged
    
    It's better to warn and fail rather than rarely triggering BUG on paths
    that incorrectly call skb_trim/__skb_trim on a non-linear skb.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b38dfee3d616ffadb58d4215e3ff9d1d7921031e
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 9 16:13:01 2006 -0700

    [NET]: skb_trim audit
    
    I found a few more spots where pskb_trim_rcsum could be used but were not.
    This patch changes them to use it.
    
    Also, sk_filter can get paged skb data.  Therefore we must use pskb_trim
    instead of skb_trim.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8c9f9a3de2c50c876b1068dd41f9a06c5749f80
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 9 16:11:27 2006 -0700

    [NET] ppp: Remove unnecessary pskb_may_pull
    
    In ppp_receive_nonmp_frame, we call pskb_may_pull(skb, skb->len) if the
    tailroom is >= 124.  This is pointless because this pskb_may_pull is only
    needed if the skb is non-linear.  However, if it is non-linear then the
    tailroom would be zero.
    
    So it can be safely removed.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 364c6badde0dd62a0a38e5ed67f85d87d6665780
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 9 16:10:40 2006 -0700

    [NET]: Clean up skb_linearize
    
    The linearisation operation doesn't need to be super-optimised.  So we can
    replace __skb_linearize with __pskb_pull_tail which does the same thing but
    is more general.
    
    Also, most users of skb_linearize end up testing whether the skb is linear
    or not so it helps to make skb_linearize do just that.
    
    Some callers of skb_linearize also use it to copy cloned data, so it's
    useful to have a new function skb_linearize_cow to copy the data if it's
    either non-linear or cloned.
    
    Last but not least, I've removed the gfp argument since nobody uses it
    anymore.  If it's ever needed we can easily add it back.
    
    Misc bugs fixed by this patch:
    
    * via-velocity error handling (also, no SG => no frags)
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 932ff279a43ab7257942cddff2595acd541cc49b
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Fri Jun 9 12:20:56 2006 -0700

    [NET]: Add netif_tx_lock
    
    Various drivers use xmit_lock internally to synchronise with their
    transmission routines.  They do so without setting xmit_lock_owner.
    This is fine as long as netpoll is not in use.
    
    With netpoll it is possible for deadlocks to occur if xmit_lock_owner
    isn't set.  This is because if a printk occurs while xmit_lock is held
    and xmit_lock_owner is not set can cause netpoll to attempt to take
    xmit_lock recursively.
    
    While it is possible to resolve this by getting netpoll to use
    trylock, it is suboptimal because netpoll's sole objective is to
    maximise the chance of getting the printk out on the wire.  So
    delaying or dropping the message is to be avoided as much as possible.
    
    So the only alternative is to always set xmit_lock_owner.  The
    following patch does this by introducing the netif_tx_lock family of
    functions that take care of setting/unsetting xmit_lock_owner.
    
    I renamed xmit_lock to _xmit_lock to indicate that it should not be
    used directly.  I didn't provide irq versions of the netif_tx_lock
    functions since xmit_lock is meant to be a BH-disabling lock.
    
    This is pretty much a straight text substitution except for a small
    bug fix in winbond.  It currently uses
    netif_stop_queue/spin_unlock_wait to stop transmission.  This is
    unsafe as an IRQ can potentially wake up the queue.  So it is safer to
    use netif_tx_disable.
    
    The hamradio bits used spin_lock_irq but it is unnecessary as
    xmit_lock must never be taken in an IRQ handler.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bf0857ea32addb6bc8b46383604b218b8ec09f19
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jun 9 12:18:47 2006 -0700

    [NETFILTER]: hashlimit match: fix random initialization
    
    hashlimit does:
    
            if (!ht->rnd)
                    get_random_bytes(&ht->rnd, 4);
    
    ignoring that 0 is also a valid random number.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2b2283d0302d520f08ded41c2ca17886dfbb865a
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jun 9 12:18:17 2006 -0700

    [NETFILTER]: recent match: missing refcnt initialization
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a0e889bb1bdc083dbbdb02cce9698765847b841f
Author: Patrick McHardy <kaber@trash.net>
Date:   Fri Jun 9 12:17:41 2006 -0700

    [NETFILTER]: recent match: fix "sleeping function called from invalid context"
    
    create_proc_entry must not be called with locks held. Use a mutex
    instead to protect data only changed in user context.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 4e5ab4cb85683cf77b507ba0c4d48871e1562305
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:33:33 2006 -0700

    [SECMARK]: Add new packet controls to SELinux
    
    Add new per-packet access controls to SELinux, replacing the old
    packet controls.
    
    Packets are labeled with the iptables SECMARK and CONNSECMARK targets,
    then security policy for the packets is enforced with these controls.
    
    To allow for a smooth transition to the new controls, the old code is
    still present, but not active by default.  To restore previous
    behavior, the old controls may be activated at runtime by writing a
    '1' to /selinux/compat_net, and also via the kernel boot parameter
    selinux_compat_net.  Switching between the network control models
    requires the security load_policy permission.  The old controls will
    probably eventually be removed and any continued use is discouraged.
    
    With this patch, the new secmark controls for SElinux are disabled by
    default, so existing behavior is entirely preserved, and the user is
    not affected at all.
    
    It also provides a config option to enable the secmark controls by
    default (which can always be overridden at boot and runtime).  It is
    also noted in the kconfig help that the user will need updated
    userspace if enabling secmark controls for SELinux and that they'll
    probably need the SECMARK and CONNMARK targets, and conntrack protocol
    helpers, although such decisions are beyond the scope of kernel
    configuration.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 100468e9c05c10fb6872751c1af523b996d6afa9
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:32:39 2006 -0700

    [SECMARK]: Add CONNSECMARK xtables target
    
    Add a new xtables target, CONNSECMARK, which is used to specify rules
    for copying security marks from packets to connections, and for
    copyying security marks back from connections to packets.  This is
    similar to the CONNMARK target, but is more limited in scope in that
    it only allows copying of security marks to and from packets, as this
    is all it needs to do.
    
    A typical scenario would be to apply a security mark to a 'new' packet
    with SECMARK, then copy that to its conntrack via CONNMARK, and then
    restore the security mark from the connection to established and
    related packets on that connection.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c9728c393dceb724d66d696cfabce82151a78e5
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:31:46 2006 -0700

    [SECMARK]: Add secmark support to conntrack
    
    Add a secmark field to IP and NF conntracks, so that security markings
    on packets can be copied to their associated connections, and also
    copied back to packets as required.  This is similar to the network
    mark field currently used with conntrack, although it is intended for
    enforcement of security policy rather than network policy.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 5e6874cdb8de94cd3c15d853a8ef9c6f4c305055
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:30:57 2006 -0700

    [SECMARK]: Add xtables SECMARK target
    
    Add a SECMARK target to xtables, allowing the admin to apply security
    marks to packets via both iptables and ip6tables.
    
    The target currently handles SELinux security marking, but can be
    extended for other purposes as needed.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 984bc16cc92ea3c247bf34ad667cfb95331b9d3c
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:29:17 2006 -0700

    [SECMARK]: Add secmark support to core networking.
    
    Add a secmark field to the skbuff structure, to allow security subsystems to
    place security markings on network packets.  This is similar to the nfmark
    field, except is intended for implementing security policy, rather than than
    networking policy.
    
    This patch was already acked in principle by Dave Miller.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c749b29fae74ed59c507d84025b3298202b42609
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:28:25 2006 -0700

    [SECMARK]: Add SELinux exports
    
    Add and export new functions to the in-kernel SELinux API in support of the
    new secmark-based packet controls.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29a395eac4c320c570e73f0a90d8953d80da8359
Author: James Morris <jmorris@namei.org>
Date:   Fri Jun 9 00:27:28 2006 -0700

    [SECMARK]: Add new flask definitions to SELinux
    
    Secmark implements a new scheme for adding security markings to
    packets via iptables, as well as changes to SELinux to use these
    markings for security policy enforcement.  The rationale for this
    scheme is explained and discussed in detail in the original threads:
    
     http://thread.gmane.org/gmane.linux.network/34927/
     http://thread.gmane.org/gmane.linux.network/35244/
    
    Examples of policy and rulesets, as well as a full archive of patches
    for iptables and SELinux userland, may be found at:
    
    http://people.redhat.com/jmorris/selinux/secmark/
    
    The code has been tested with various compilation options and in
    several scenarios, including with 'complicated' protocols such as FTP
    and also with the new generic conntrack code with IPv6 connection
    tracking.
    
    This patch:
    
    Add support for a new object class ('packet'), and associated
    permissions ('send', 'recv', 'relabelto').  These are used to enforce
    security policy for network packets labeled with SECMARK, and for
    adding labeling rules.
    
    Signed-off-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e3ff15e6d8ba931fa9a6c7f9fe711edc77e96e5
Author: Christopher J. PeBenito <cpebenito@tresys.com>
Date:   Fri Jun 9 00:25:03 2006 -0700

    [SELINUX]: add security class for appletalk sockets
    
    Add a security class for appletalk sockets so that they can be
    distinguished in SELinux policy.  Please apply.
    
    Signed-off-by: Stephen Smalley <sds@tycho.nsa.gov>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6f68dc37759b1d6ff3b4d4a9d097605a09f8f043
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Thu Jun 8 23:58:52 2006 -0700

    [NET]: Fix warnings after LSM-IPSEC changes.
    
    Assignment used as truth value in xfrm_del_sa()
    and xfrm_get_policy().
    
    Wrong argument type declared for security_xfrm_state_delete()
    when SELINUX is disabled.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9dadaa19cb11a8db38072a92a3f95deab7a797fb
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 8 23:42:09 2006 -0700

    [NET]: NET_TCPPROBE Kconfig fix
    
    Just spotted this typo in a new option.
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c8c05a8eec6f1258f6d5cb71a44ee5dc1e989b63
Author: Catherine Zhang <cxzhang@watson.ibm.com>
Date:   Thu Jun 8 23:39:49 2006 -0700

    [LSM-IPsec]: SELinux Authorize
    
    This patch contains a fix for the previous patch that adds security
    contexts to IPsec policies and security associations.  In the previous
    patch, no authorization (besides the check for write permissions to
    SAD and SPD) is required to delete IPsec policies and security
    assocations with security contexts.  Thus a user authorized to change
    SAD and SPD can bypass the IPsec policy authorization by simply
    deleteing policies with security contexts.  To fix this security hole,
    an additional authorization check is added for removing security
    policies and security associations with security contexts.
    
    Note that if no security context is supplied on add or present on
    policy to be deleted, the SELinux module allows the change
    unconditionally.  The hook is called on deletion when no context is
    present, which we may want to change.  At present, I left it up to the
    module.
    
    LSM changes:
    
    The patch adds two new LSM hooks: xfrm_policy_delete and
    xfrm_state_delete.  The new hooks are necessary to authorize deletion
    of IPsec policies that have security contexts.  The existing hooks
    xfrm_policy_free and xfrm_state_free lack the context to do the
    authorization, so I decided to split authorization of deletion and
    memory management of security data, as is typical in the LSM
    interface.
    
    Use:
    
    The new delete hooks are checked when xfrm_policy or xfrm_state are
    deleted by either the xfrm_user interface (xfrm_get_policy,
    xfrm_del_sa) or the pfkey interface (pfkey_spddelete, pfkey_delete).
    
    SELinux changes:
    
    The new policy_delete and state_delete functions are added.
    
    Signed-off-by: Catherine Zhang <cxzhang@watson.ibm.com>
    Signed-off-by: Trent Jaeger <tjaeger@cse.psu.edu>
    Acked-by: James Morris <jmorris@namei.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit cec6f7f39c3db7d9f6091bf2f8fc8d520f372719
Author: Andreas Schwab <schwab@suse.de>
Date:   Mon Jun 5 21:21:57 2006 -0700

    [CONNECTOR]: Fix warning in cn_queue.c
    
    cn_queue.c:130: warning: value computed is not used
    
    There is no point in testing the atomic value if the result is thrown
    away.
    
    From Evgeniy:
    
    It was created to put implicit smp barrier, but it is not needed there.
    
    Signed-off-by: Andreas Schwab <schwab@suse.de>
    Signed-off-by: Evgeniy Polyakov <johnpol@2ka.mipt.ru>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f86502bfc177f69bbabbedb78ebf710579ae0e54
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jun 5 21:19:24 2006 -0700

    [IPV4] icmp: Kill local 'ip' arg in icmp_redirect().
    
    It is typed wrong, and it's only assigned and used once.
    So just pass in iph->daddr directly which fixes both problems.
    
    Based upon a patch by Alexey Dobriyan.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6d7416535097ed0943bdae8e69c14ba43061cab1
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 5 21:06:41 2006 -0700

    [IPV4]: Right prototype of __raw_v4_lookup()
    
    All users pass 32-bit values as addresses and internally they're
    compared with 32-bit entities. So, change "laddr" and "raddr" types to
    __be32.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 338fcf9886df9ad2873772197a73a57818973316
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon Jun 5 21:04:39 2006 -0700

    [IPV4] igmp: Fixup struct ip_mc_list::multiaddr type
    
    All users except two expect 32-bit big-endian value. One is of
    
    	->multiaddr = ->multiaddr
    
    variety. And last one is "%08lX".
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 70df2311ee3fc607e7511873d7dade5bd17d593d
Author: David S. Miller <davem@sunset.davemloft.net>
Date:   Mon Jun 5 17:59:20 2006 -0700

    [TCP]: Fix compile warning in tcp_probe.c
    
    The suseconds_t et al. are not necessarily any particular type on
    every platform, so cast to unsigned long so that we can use one printf
    format string and avoid warnings across the board
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 738980ffa658c86bd494ebb242ce8e44aff16a9e
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 5 17:30:56 2006 -0700

    [TCP]: Limited slow start for Highspeed TCP
    
    Implementation of RFC3742 limited slow start. Added as part
    of the TCP highspeed congestion control module.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a42e9d6ce89cfd19aee9f990b7231ce697f0d00f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 5 17:30:32 2006 -0700

    [TCP]: TCP Probe congestion window tracing
    
    This adds a new module for tracking TCP state variables non-intrusively
    using kprobes.  It has a simple /proc interface that outputs one line
    for each packet received. A sample usage is to collect congestion
    window and ssthresh over time graphs.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 72dc5b9225c53310c010b68a70ea97c8c8e24bdf
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 5 17:30:08 2006 -0700

    [TCP]: Minimum congestion window consolidation.
    
    Many of the TCP congestion methods all just use ssthresh
    as the minimum congestion window on decrease.  Rather than
    duplicating the code, just have that be the default if that
    handle in the ops structure is not set.
    
    Minor behaviour change to TCP compound.  It probably wants
    to use this (ssthresh) as lower bound, rather than ssthresh/2
    because the latter causes undershoot on loss.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit a4ed25849532728effaa0665c92e08e029e41407
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Mon Jun 5 17:29:39 2006 -0700

    [TCP]: TCP Compound quad root function
    
    The original code did a 64 bit divide directly, which won't work on
    32 bit platforms.  Rather than doing a 64 bit square root twice,
    just implement a 4th root function in one pass using Newton's method.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f890f921040fef6a35e39d15b729af1fd1a35f29
Author: Angelo P. Castellani <angelo.castellani@gmail.com>
Date:   Mon Jun 5 17:29:09 2006 -0700

    [TCP]: TCP Compound congestion control
    
    TCP Compound is a sender-side only change to TCP that uses
    a mixed Reno/Vegas approach to calculate the cwnd.
    
    For further details look here:
      ftp://ftp.research.microsoft.com/pub/tr/TR-2005-86.pdf
    
    Signed-off-by: Angelo P. Castellani <angelo.castellani@gmail.com>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 76f1017757aa0c308a0b83ca611c9a89ee9a79a4
Author: Bin Zhou <zhou0022@ntu.edu.sg>
Date:   Mon Jun 5 17:28:30 2006 -0700

    [TCP]: TCP Veno congestion control
    
    TCP Veno module is a new congestion control module to improve TCP
    performance over wireless networks. The key innovation in TCP Veno is
    the enhancement of TCP Reno/Sack congestion control algorithm by using
    the estimated state of a connection based on TCP Vegas. This scheme
    significantly reduces "blind" reduction of TCP window regardless of
    the cause of packet loss.
    
    This work is based on the research paper "TCP Veno: TCP Enhancement
    for Transmission over Wireless Access Networks." C. P. Fu, S. C. Liew,
    IEEE Journal on Selected Areas in Communication, Feb. 2003.
    
    Original paper and many latest research works on veno:
     http://www.ntu.edu.sg/home/ascpfu/veno/veno.html
    
    Signed-off-by: Bin Zhou <zhou0022@ntu.edu.sg>
    	       Cheng Peng Fu <ascpfu@ntu.edu.sg>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7c106d7e782bd4805f39da30e81018f861b4b8c5
Author: Wong Hoi Sing Edison <hswong3i@gmail.com>
Date:   Mon Jun 5 17:27:58 2006 -0700

    [TCP]: TCP Low Priority congestion control
    
     TCP Low Priority is a distributed algorithm whose goal is to utilize only
     the excess network bandwidth as compared to the ``fair share`` of
     bandwidth as targeted by TCP. Available from:
       http://www.ece.rice.edu/~akuzma/Doc/akuzma/TCP-LP.pdf
    
    Original Author:
     Aleksandar Kuzmanovic <akuzma@northwestern.edu>
    
    See http://www-ece.rice.edu/networks/TCP-LP/ for their implementation.
    As of 2.6.13, Linux supports pluggable congestion control algorithms.
    Due to the limitation of the API, we take the following changes from
    the original TCP-LP implementation:
     o We use newReno in most core CA handling. Only add some checking
       within cong_avoid.
     o Error correcting in remote HZ, therefore remote HZ will be keeped
       on checking and updating.
     o Handling calculation of One-Way-Delay (OWD) within rtt_sample, sicne
       OWD have a similar meaning as RTT. Also correct the buggy formular.
     o Handle reaction for Early Congestion Indication (ECI) within
       pkts_acked, as mentioned within pseudo code.
     o OWD is handled in relative format, where local time stamp will in
       tcp_time_stamp format.
    
    Port from 2.4.19 to 2.6.16 as module by:
     Wong Hoi Sing Edison <hswong3i@gmail.com>
     Hung Hing Lun <hlhung3i@gmail.com>
    
    Signed-off-by: Wong Hoi Sing Edison <hswong3i@gmail.com>
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 2f45c340e09242641d4f11498c3be48b35abb926
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 2 16:29:20 2006 -0700

    [LLC]: Fix double receive of SKB.
    
    Oops fix from Stephen: remove duplicate rcv() calls.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c45fb1089e714146206d7e295ff337893424c874
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Mon May 29 18:27:32 2006 -0700

    [NETFILTER]: PPTP helper: fixup gre_keymap_lookup() return type
    
    GRE keys are 16-bit wide.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit ae5b7d8ba2c28d7d9835856fe0ca5f6ec95ea768
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:27:09 2006 -0700

    [NETFILTER]: Add SIP connection tracking helper
    
    Add SIP connection tracking helper. Originally written by
    Christian Hentschel <chentschel@arnet.com.ar>, some cleanup, minor
    fixes and bidirectional SIP support added by myself.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit e44ab66a75e20c02193440a5e27c16c91630109b
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:26:47 2006 -0700

    [NETFILTER]: H.323 helper: replace internal_net_addr parameter by routing-based heuristic
    
    Call Forwarding doesn't need to create an expectation if both peers can
    reach each other without our help. The internal_net_addr parameter
    lets the user explicitly specify a single network where this is true,
    but is not very flexible and even fails in the common case that calls
    will both be forwarded to outside parties and inside parties. Use an
    optional heuristic based on routing instead, the assumption is that
    if bpth the outgoing device and the gateway are equal, both peers can
    reach each other directly.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c0d4cfd96dd0cc0dbf49435898808b5553af4822
Author: Jing Min Zhao <zhaojingmin@users.sourceforge.net>
Date:   Mon May 29 18:26:27 2006 -0700

    [NETFILTER]: H.323 helper: Add support for Call Forwarding
    
    Signed-off-by: Jing Min Zhao <zhaojingmin@users.sourceforge.net>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c95261693467f0aeac7fafa69860ddfb02bc12f8
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:25:58 2006 -0700

    [NETFILTER]: amanda helper: convert to textsearch infrastructure
    
    When a port number within a packet is replaced by a differently sized
    number only the packet is resized, but not the copy of the data.
    Following port numbers are rewritten based on their offsets within
    the copy, leading to packet corruption.
    
    Convert the amanda helper to the textsearch infrastructure to avoid
    the copy entirely.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 7d8c50181778b6ba10c2bba9a2f22db9493bb245
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:25:38 2006 -0700

    [NETFILTER]: FTP helper: search optimization
    
    Instead of skipping search entries for the wrong direction simply index
    them by direction.
    
    Based on patch by Pablo Neira <pablo@netfilter.org>
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 695ecea3299dba2239d1cb4fd4d4e4c95a5b9ce7
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:25:14 2006 -0700

    [NETFILTER]: SNMP helper: fix debug module param type
    
    debug is the debug level, not a bool.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 89f2e21883b59a6ff1e64d0b4924d06b1c6101ba
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:24:58 2006 -0700

    [NETFILTER]: ctnetlink: change table dumping not to require an unique ID
    
    Instead of using the ID to find out where to continue dumping, take a
    reference to the last entry dumped and try to continue there.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3726add76643c715d437aceda320d319153b6113
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:24:39 2006 -0700

    [NETFILTER]: ctnetlink: fix NAT configuration
    
    The current configuration only allows to configure one manip and overloads
    conntrack status flags with netlink semantic.
    
    Signed-off-by: Patrick Mchardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 997ae831ade74bdaed4172b1c02060b9efd6e206
Author: Eric Leblond <eric@inl.fr>
Date:   Mon May 29 18:24:20 2006 -0700

    [NETFILTER]: conntrack: add fixed timeout flag in connection tracking
    
    Add a flag in a connection status to have a non updated timeout.
    This permits to have connection that automatically die at a given
    time.
    
    Signed-off-by: Eric Leblond <eric@inl.fr>
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 39a27a35c5c1b5be499a0576a35c45a011788bf8
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:23:54 2006 -0700

    [NETFILTER]: conntrack: add sysctl to disable checksumming
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6442f1cf897643d4ca597f2f7d3464b765bae960
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:21:53 2006 -0700

    [NETFILTER]: conntrack: don't call helpers for related ICMP messages
    
    None of the existing helpers expects to get called for related ICMP
    packets and some even drop them if they can't parse them.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 404bdbfd242cb99ca0e9d3eb5fbb5bcd54123081
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:21:34 2006 -0700

    [NETFILTER]: recent match: replace by rewritten version
    
    Replace the unmaintainable ipt_recent match by a rewritten version that
    should be fully compatible.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit f3389805e53a13bd969ee1c8fc5a4137b7c6c167
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:21:00 2006 -0700

    [NETFILTER]: x_tables: add statistic match
    
    Add statistic match which is a combination of the nth and random matches.
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 62b7743483b402f8fb73545d5d487ca714e82766
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:20:32 2006 -0700

    [NETFILTER]: x_tables: add quota match
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 957dc80ac30f3c4d53259fa936df807663ba54fa
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:19:56 2006 -0700

    [NETFILTER]: x_tables: add SCTP/DCCP support where missing
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 3e72b2fe5b31791f976350b023b7a37ef59c02c1
Author: Patrick McHardy <kaber@trash.net>
Date:   Mon May 29 18:19:19 2006 -0700

    [NETFILTER]: x_tables: remove some unnecessary casts
    
    Signed-off-by: Patrick McHardy <kaber@trash.net>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 73654d61e556483ad324b90989eae26b22df6ef6
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat May 27 23:06:33 2006 -0700

    [IPSEC] xfrm: Use IPPROTO_MAX instead of 256
    
    The size of the type_map array (256) comes from the number of IP protocols,
    i.e., IPPROTO_MAX.  This patch is based on a suggestion from Ingo Oeser.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 31a4ab93025719e62e7cf7ce899f71c34ecde5a0
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat May 27 23:06:13 2006 -0700

    [IPSEC] proto: Move transport mode input path into xfrm_mode_transport
    
    Now that we have xfrm_mode objects we can move the transport mode specific
    input decapsulation code into xfrm_mode_transport.  This removes duplicate
    code as well as unnecessary header movement in case of tunnel mode SAs
    since we will discard the original IP header immediately.
    
    This also fixes a minor bug for transport-mode ESP where the IP payload
    length is set to the correct value minus the header length (with extension
    headers for IPv6).
    
    Of course the other neat thing is that we no longer have to allocate
    temporary buffers to hold the IP headers for ESP and IPComp.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit b59f45d0b2878ab76f8053b0973654e6621828ee
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat May 27 23:05:54 2006 -0700

    [IPSEC] xfrm: Abstract out encapsulation modes
    
    This patch adds the structure xfrm_mode.  It is meant to represent
    the operations carried out by transport/tunnel modes.
    
    By doing this we allow additional encapsulation modes to be added
    without clogging up the xfrm_input/xfrm_output paths.
    
    Candidate modes include 4-to-6 tunnel mode, 6-to-4 tunnel mode, and
    BEET modes.
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 546be2405be119ef55467aace45f337a16e5d424
Author: Herbert Xu <herbert@gondor.apana.org.au>
Date:   Sat May 27 23:03:58 2006 -0700

    [IPSEC] xfrm: Undo afinfo lock proliferation
    
    The number of locks used to manage afinfo structures can easily be reduced
    down to one each for policy and state respectively.  This is based on the
    observation that the write locks are only held by module insertion/removal
    which are very rare events so there is no need to further differentiate
    between the insertion of modules like ipv6 versus esp6.
    
    The removal of the read locks in xfrm4_policy.c/xfrm6_policy.c might look
    suspicious at first.  However, after you realise that nobody ever takes
    the corresponding write lock you'll feel better :)
    
    As far as I can gather it's an attempt to guard against the removal of
    the corresponding modules.  Since neither module can be unloaded at all
    we can leave it to whoever fixes up IPv6 unloading :)
    
    Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9cb3528cdbffc513eb9fb8faa45d41e397355830
Author: Michael Chan <mchan@broadcom.com>
Date:   Sat Jun 17 21:28:28 2006 -0700

    [TG3]: update version and reldate
    
    Update version to 3.60.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit df3e6548186f0baa727cd6d3a492891854bd31f2
Author: Michael Chan <mchan@broadcom.com>
Date:   Fri May 26 17:48:07 2006 -0700

    [TG3]: Add recovery logic when MMIOs are re-ordered
    
    Add recovery logic when we suspect that the system is re-ordering
    MMIOs. Re-ordered MMIOs to the send mailbox can cause bogus tx
    completions and hit BUG_ON() in the tx completion path.
    
    tg3 already has logic to handle re-ordered MMIOs by flushing the MMIOs
    that must be strictly ordered (such as the send mailbox).  Determining
    when to enable the flush is currently a manual process of adding known
    chipsets to a list.
    
    The new code replaces the BUG_ON() in the tx completion path with the
    call to tg3_tx_recover(). It will set the TG3_FLAG_MBOX_WRITE_REORDER
    flag and reset the chip later in the workqueue to recover and start
    flushing MMIOs to the mailbox.
    
    A message to report the problem will be printed. We will then decide
    whether or not to add the host bridge to the list of chipsets that do
    re-ordering.
    
    We may add some additional code later to print the host bridge's ID so
    that the user can report it more easily.
    
    The assumption that re-ordering can only happen on x86 systems is also
    removed.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 30b6c28d2aca4669f2e609ad5d77ea2a6cf0dd3a
Author: Michael Chan <mchan@broadcom.com>
Date:   Fri May 26 17:44:45 2006 -0700

    [TG3]: Add 5786 PCI ID
    
    Add PCI ID for BCM5786 which is a variant of 5787.
    
    Signed-off-by: Michael Chan <mchan@broadcom.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 898b1d16f8230fb912a0c2248df685735c6ceda3
Author: Samuel Ortiz <samuel@sortiz.org>
Date:   Thu May 25 16:21:10 2006 -0700

    [IRDA]: ali-ircc: using device model power management
    
    This patch gets rid of the old power management code and now uses the
    device model for the ali-ircc driver.
    
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc1d6937e6cf4e81a5afeae2c9cf35ffb0905ba5
Author: Christoph Hellwig <hch@lst.de>
Date:   Thu May 25 16:20:19 2006 -0700

    [IRDA]: stir4200, switching to the kthread API
    
    stir4200 uses a kernel thread for its TX/RX operations, and it is now
    converted to the kernel kthread API.
    Tested on an STIR4200 based dongle.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c6ae522e3a50fc1ec483d7f03ece9c7a25e6de95
Author: Samuel Ortiz <samuel@sortiz.org>
Date:   Thu May 25 16:19:22 2006 -0700

    [IRDA]: Initial support for MCS7780 based dongles
    
    The MosChip MCS7780 chipset is an IrDA USB bridge that
    doesn't conform with the IrDA-USB standard and thus needs
    its separate driver.
    Tested on an actual MCS7780 based dongle.
    
    Original implementation by Brian Pugh <bpugh@cs.pdx.edu>
    
    Signed-off-by: Samuel Ortiz <samuel@sortiz.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 15986e1aadbbf40a331cddd0470bb434d156431d
Author: David S. Miller <davem@sunset.sfo1.dsl.speakeasy.net>
Date:   Thu May 25 16:11:14 2006 -0700

    [TCP]: tcp_rcv_rtt_measure_ts() call in pure-ACK path is superfluous
    
    We only want to take receive RTT mesaurements for data
    bearing frames, here in the header prediction fast path
    for a pure-sender, we know that we have a pure-ACK and
    thus the checks in tcp_rcv_rtt_mesaure_ts() will not pass.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 11dc1f36a6701b502ecb695f308aae46ede8bac6
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 16:00:12 2006 -0700

    [BRIDGE]: netlink interface for link management
    
    Add basic netlink support to the Ethernet bridge. Including:
     * dump interfaces in bridges
     * monitor link status changes
     * change state of bridge port
    
    For some demo programs see:
    	http://developer.osdl.org/shemminger/prototypes/brnl.tar.gz
    
    These are to allow building a daemon that does alternative
    implementations of Spanning Tree Protocol.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c090971326db094ed702c1f8f2dbe04b7e3b8f27
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:59:33 2006 -0700

    [BRIDGE]: fix module startup error handling
    
    Return address in use, if some other kernel code has the SAP.
    Propogate out error codes from netfilter registration and unwind.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ef513bed68534110727381ab652f06756803f5a
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:58:54 2006 -0700

    [BRIDGE]: optimize conditional in forward path
    
    Small optimizations of bridge forwarding path.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit bc0e646796928918e45b6465e02616f2fe65c3c1
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:10:37 2006 -0700

    [LLC]: add multicast support for datagrams
    
    Allow mulitcast reception of datagrams (similar to UDP).
    All sockets bound to the same SAP receive a clone.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 8f182b494f87799d6ae20a1401825c516da46081
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:10:02 2006 -0700

    [LLC]: allow applications to get copy of kernel datagrams
    
    It is legal for an application to bind to a SAP that is also being
    used by the kernel. This happens if the bridge module binds to the
    STP SAP, and the user wants to have a daemon for STP as well.
    It is possible to have kernel doing STP on one bridge, but
    let application do RSTP on another bridge.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 23dbe7912dad6be71bb9e69cb819d05e2442d362
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:09:37 2006 -0700

    [LLC]: use rcu_dereference on receive handler
    
    The receive hander pointer might be modified during network changes
    of protocol. So use rcu_dereference (only matters on alpha).
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 29efcd2666b3a465b40aa07ef1f4d79847303e2f
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:08:59 2006 -0700

    [LLC]: allow datagram recvmsg
    
    LLC receive is broken for SOCK_DGRAM.
    If an application does recv() on a datagram socket and there
    is no data present, don't return "not connected". Instead, just
    do normal datagram semantics.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit aecbd4e45c2e469e0452ffb2c0b0d881e2815bb8
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Thu May 25 15:08:30 2006 -0700

    [LLC]: use more efficient ether address routines
    
    Use more cache efficient Ethernet address manipulation functions
    in etherdevice.h.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>

commit 17f3ae08b6e7fd778371f2cafbd1c988a67ee343
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu May 25 13:26:53 2006 -0700

    [I/OAT]: Do not use for_each_cpu().
    
    for_each_cpu() is going away (and is gone in -mm).
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 1a2449a87bb7606113b1aa1a9d3c3e78ef189a1c
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 18:05:53 2006 -0700

    [I/OAT]: TCP recv offload to I/OAT
    
    Locks down user pages and sets up for DMA in tcp_recvmsg, then calls
    dma_async_try_early_copy in tcp_v4_do_rcv
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9593782585e0cf70babe787a8463d492a68b1744
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 18:02:55 2006 -0700

    [I/OAT]: Add a sysctl for tuning the I/OAT offloaded I/O threshold
    
    Any socket recv of less than this ammount will not be offloaded
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 624d1164730d58a494cc5aa4afa37d02c41e83a7
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 18:01:28 2006 -0700

    [I/OAT]: Make sk_eat_skb I/OAT aware.
    
    Add an extra argument to sk_eat_skb, and make it move early copied
    packets to the async_wait_queue instead of freeing them.
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0e4b4992b8007c6b62ec143cbbb292f98813ca11
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 18:00:16 2006 -0700

    [I/OAT]: Rename cleanup_rbuf to tcp_cleanup_rbuf and make non-static
    
    Needed to be able to call tcp_cleanup_rbuf in tcp_input.c for I/OAT
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 97fc2f0848c928c63c2ae619deee61a0b1107b69
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 17:55:33 2006 -0700

    [I/OAT]: Structure changes for TCP recv offload to I/OAT
    
    Adds an async_wait_queue and some additional fields to tcp_sock, and a
    dma_cookie_t to sk_buff.
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit de5506e155276d385712c2aa1c2d9a27cd4ed947
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 17:50:37 2006 -0700

    [I/OAT]: Utility functions for offloading sk_buff to iovec copies
    
    Provides for pinning user space pages in memory, copying to iovecs,
    and copying from sk_buffs including fragmented and chained sk_buffs.
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit db21733488f84a596faaad0d05430b3f51804692
Author: Chris Leech <christopher.leech@intel.com>
Date:   Sat Jun 17 21:24:58 2006 -0700

    [I/OAT]: Setup the networking subsystem as a DMA client
    
    Attempts to allocate per-CPU DMA channels
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 57c651f74cd8383df10a648e677902849de1bc0b
Author: David S. Miller <davem@sunset.sfo1.dsl.speakeasy.net>
Date:   Tue May 23 17:39:49 2006 -0700

    [I/OAT]: Move PCI_DEVICE_ID_INTEL_IOAT to linux/pci_ids.h
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 6b00c92c4b26428cd80e966380c07103556f7b14
Author: David S. Miller <davem@sunset.sfo1.dsl.speakeasy.net>
Date:   Tue May 23 17:37:58 2006 -0700

    [I/OAT]: ioatdma.c needs linux/dma-mapping.h
    
    For DMA_*_MASK defines.
    
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 0bbd5f4e97ff9c057b385a1886b4aed1fb0300f1
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 17:35:34 2006 -0700

    [I/OAT]: Driver for the Intel(R) I/OAT DMA engine
    
    Adds a new ioatdma driver
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit c13c8260da3155f2cefb63b0d1b7dcdcb405c644
Author: Chris Leech <christopher.leech@intel.com>
Date:   Tue May 23 17:18:44 2006 -0700

    [I/OAT]: DMA memcpy subsystem
    
    Provides an API for offloading memory copies to DMA devices
    
    Signed-off-by: Chris Leech <christopher.leech@intel.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

commit 9ead190bfde2a434c74ea604382d08acb2eceef5
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:44:49 2006 -0700

    IB/uverbs: Don't serialize with ib_uverbs_idr_mutex
    
    Currently, all userspace verbs operations that call into the kernel
    are serialized by ib_uverbs_idr_mutex.  This can be a scalability
    issue for some workloads, especially for devices driven by the ipath
    driver, which needs to call into the kernel even for datapath
    operations.
    
    Fix this by adding reference counts to the userspace objects, and then
    converting ib_uverbs_idr_mutex into a spinlock that only protects the
    idrs long enough to take a reference on the object being looked up.
    Because remove operations may fail, we have to do a slightly funky
    two-step deletion, which is described in the comments at the top of
    uverbs_cmd.c.
    
    This also still leaves ib_uverbs_idr_lock as a single lock that is
    possibly subject to contention.  However, the lock hold time will only
    be a single idr operation, so multiple threads should still be able to
    make progress, even if ib_uverbs_idr_lock is being ping-ponged.
    
    Surprisingly, these changes even shrink the object code:
    
    add/remove: 23/5 grow/shrink: 4/21 up/down: 633/-693 (-60)
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c93b6fbaa99bb3a1552e14317296be14dde51dfb
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:41 2006 -0700

    IB/mthca: Make all device methods truly reentrant
    
    Documentation/infiniband/core_locking.txt says:
    
      All of the methods in struct ib_device exported by a low-level
      driver must be fully reentrant.  The low-level driver is required to
      perform all synchronization necessary to maintain consistency, even
      if multiple function calls using the same object are run
      simultaneously.
    
    However, mthca's modify_qp, modify_srq and resize_cq methods are
    currently not reentrant.  Add a mutex to the QP, SRQ and CQ structures
    so that these calls can be properly serialized.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit c9c5d9feef86debee4d8e77a738ad86877cf371a
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:41 2006 -0700

    IB/mthca: Fix memory leak on modify_qp error paths
    
    Some error paths after the mthca_alloc_mailbox() call in mthca_modify_qp()
    just do a "return -EINVAL" without freeing the mailbox.  Convert these
    returns to "goto out" to avoid leaking the mailbox storage.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 3463175d6ee55fdbd5cda2a03415e2068599b2b7
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:40 2006 -0700

    IB/uverbs: Factor out common idr code
    
    Factor out common code for adding a userspace object to an idr into a
    function idr_add_uobj().  This shrinks both the source and object code:
    
    add/remove: 1/0 grow/shrink: 0/6 up/down: 57/-220 (-163)
    function                                     old     new   delta
    idr_add_uobj                                   -      57     +57
    ib_uverbs_create_ah                          543     512     -31
    ib_uverbs_create_srq                         662     630     -32
    ib_uverbs_reg_mr                             737     699     -38
    ib_uverbs_create_cq                          639     600     -39
    ib_uverbs_alloc_pd                           485     446     -39
    ib_uverbs_create_qp                         1020     979     -41
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 92b1582268e269b3a9e54e186e740396f0f2012b
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:40 2006 -0700

    IB/uverbs: Don't decrement usecnt on error paths
    
    In error paths when destroying an object, uverbs should not decrement
    associated objects' usecnt, since ib_dereg_mr(), ib_destroy_qp(),
    etc. already do that.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 77f76013e3ffda605b20184db5862ce1efcb6f5a
Author: Ganapathi CH <cganapathi@novell.com>
Date:   Sat Jun 17 20:37:40 2006 -0700

    IB/uverbs: Release lock on error path
    
    If ibdev->alloc_ucontext() fails then ib_uverbs_get_context() does not
    unlock file->mutex before returning error.
    
    Signed-off by: Ganapathi CH <cganapathi@novell.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ca222c6b2c48e1e0be330a55611ba394251330cb
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:40 2006 -0700

    IB/cm: Use address handle helpers
    
    Use new ib_init_ah_from_wc() and ib_init_ah_from_path() helper
    functions to clean up the IB CM.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6d969a471ba107d94cf03dab3c69f45b9733f500
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:39 2006 -0700

    IB/sa: Add ib_init_ah_from_path()
    
    Add a call to initialize address handle attributes given a path record.
    This is used by the CM, and would be useful for users of UD QPs.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4e00d69454a8747798de11dc4eeef1edeee5ce98
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:39 2006 -0700

    IB: Add ib_init_ah_from_wc()
    
    Add a function to initialize address handle attributes from a work
    completion.  This functionality is duplicated by both verbs and the CM.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 75af9088514432ef0c1052ba3767ceb0beb6f101
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:39 2006 -0700

    IB/ucm: Get rid of duplicate P_Key parameter
    
    The P_Key is provided into a SIDR REQ in two places, once as a
    parameter, and again in the path record.  Remove the P_Key as a
    parameter and always use the one given in the path record.
    
    This change has no practical effect on ABI functionality.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 526b4caa0a48382115fa9d8f7d8caf68dbcaa2bf
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Sat Jun 17 20:37:38 2006 -0700

    IB/srp: Factor out common request reset code
    
    Misc cleanups in ib_srp:
    1) I think that it is more efficient to move the req entries from req_list
       to free_list in srp_reconnect_target (rather than rebuild the free_list).
       (In any case this code is shorter).
    2) This allows us to reuse code in srp_reset_device and srp_reconnect_target
       and call a new function srp_reset_req.
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 0c0450db31481aa01a04e7faecc93ee6841972d6
Author: Ramachandra K <rkuchimanchi@silverstorm.com>
Date:   Sat Jun 17 20:37:38 2006 -0700

    IB/srp: Support SRP rev. 10 targets
    
    There has been a change in the format of port identifiers between
    revision 10 of the SRP specification and the current revision 16A.
    
    Revision 10 specifies port identifier format as
    
      lower 8 bytes :  GUID   upper 8 bytes :  Extension
    
    Whereas revision 16A specifies it as
    
     lower 8 bytes :  Extension  upper 8 bytes :  GUID
    
    There are older targets (e.g. SilverStorm Virtual Fibre Channel
    Bridge) which conform to revision 10 of the SRP specification.
    
    The I/O class of revision 10 is 0xFF00 and the I/O class of revision
    16A is 0x0100.
    
    For supporting older targets, this patch:
    
    1) Adds a new optional target creation parameter "io_class". Default
       value of io_class is 0x0100 (i.e. revision 16A)
    2) Uses the correct port identifier format for targets with IO class
       of 0xFF00 (i.e. conforming to revision 10)
    
    Signed-off-by: Ramachandra K <rkuchimanchi@silverstorm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 73c0996b1ca60338fa50e42acfcebd32b7636a8b
Author: Ramachandra K <rkuchimanchi@silverstorm.com>
Date:   Sat Jun 17 20:37:38 2006 -0700

    [SCSI] srp.h: Add I/O Class values
    
    Add enum values for I/O Class values from rev. 10 and rev. 16a SRP
    drafts.  The values are used to detect targets that implement obsolete
    revisions of SRP, so that the initiator can use the old format for
    port identifier when connecting to them.
    
    Signed-off-by: Ramachandra K <rkuchimanchi@silverstorm.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6c8c1aa25d213a288df381f431ce5b6a155146ec
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Sat Jun 17 20:37:37 2006 -0700

    IB/fmr: Use device's max_map_map_per_fmr attribute in FMR pool.
    
    When creating a FMR pool, query the IB device and use the returned
    max_map_map_per_fmr attribute as for the max number of FMR remaps. If
    the device does not suport querying this attribute, use the original
    IB_FMR_MAX_REMAPS (32) default.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit d4cb0784fd1ea99ef3d20526811bd5608146fe60
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Sat Jun 17 20:37:37 2006 -0700

    IB/mthca: Fill in max_map_per_fmr device attribute
    
    Report the true max_map_per_fmr value from mthca_query_device(),
    taking into account the change in FMR remapping introduced by the
    Sinai performance optimization.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6eddb5cb906ac5c9a17a1b76464eadacd88b6c92
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:37 2006 -0700

    IB/ipath: Add client reregister event generation
    
    Generate a client reregister event instead of a LID change event when
    client reregister bit is set.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 12bbb2b7be7f5564952ebe0196623e97464b8ac5
Author: Leonid Arsh <leonida@voltaire.com>
Date:   Sat Jun 17 20:37:36 2006 -0700

    IB/mthca: Add client reregister event generation
    
    Change the mthca snoop of MADs that set PortInfo to check if the SM
    has set the client reregister bit, and if it has, generate a client
    reregister event.  If the bit is not set, just generate a LID change
    event as usual.
    
    Signed-off-by: Leonid Arsh <leonida@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit da2ab62ab5e430e6ffafc2d0e6046dcd2780f570
Author: Leonid Arsh <leonida@voltaire.com>
Date:   Sat Jun 17 20:37:36 2006 -0700

    IB: Move struct port_info from ipath to <rdma/ib_smi.h>
    
    Move ipath's struct port_info into <rdma/ib_smi.h>, so that it can be
    used by mthca to implement client reregister support.
    
    Remove the __attribute__((packed)) because all the members of the struct
    are naturally aligned anyway.
    
    Signed-off-by: Leonid Arsh <leonida@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 508e434123b136c96d1bf989e8d4ab0c8d7498b1
Author: Leonid Arsh <leonida@voltaire.com>
Date:   Sat Jun 17 20:37:36 2006 -0700

    IPoIB: Handle client reregister events
    
    Handle client reregister events by treating them just like LID or
    SM changes -- flush all cached paths and rejoin multicast groups.
    
    Signed-off-by: Leonid Arsh <leonida@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 63942c9a981ecfa2aabfb27ff1a87b88f2ee9f5b
Author: Leonid Arsh <leonida@voltaire.com>
Date:   Sat Jun 17 20:37:35 2006 -0700

    IB: Add client reregister event type
    
    Add IB_EVENT_CLIENT_REREGISTER to enum so low-level drivers can
    generate "client reregister" events.
    
    Signed-off-by: Leonid Arsh <leonida@voltaire.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 37c22a77212c13201497378cc8becc5c95d0f3f5
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Mon May 29 19:14:05 2006 +0300

    IPoIB: Fix kernel unaligned access on ia64
    
    Fix misaligned access faults on ia64: never cast a misaligned
    neighbour->ha + 4 pointer to union ib_gid type; pass a void * pointer
    instead.  The memcpy was being optimized to use full word accesses
    because the compiler thought that union ib_gid is always aligned.
    
    The cast in IPOIB_GID_ARG is safe, since it is fixed to access each
    byte separately.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 31c02e215700c2b704d9441f629ae87bb9aeb561
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:34 2006 -0700

    IPoIB: Avoid using stale last_send counter when reaping AHs
    
    The comparisons of priv->tx_tail to ah->last_send in ipoib_free_ah()
    and ipoib_post_receive() are slightly unsafe, because priv->tx_lock is
    not held and hence a stale value of ah->last_send might be used, which
    would lead to freeing an AH before the driver was really done with it.
    The simple way to fix this is to the optimization of early free from
    ipoib_free_ah() and unconditionally queue AHs for reaping, and then
    take priv->tx_lock in __ipoib_reap_ah().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 9874e746550fbd366484621b8838b98589bb2a15
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Sat Jun 17 20:37:34 2006 -0700

    IB/mad: Check GID/LID when matching requests
    
    Check GID/LID for requester side when searching for request which
    matches received response.  This is in order to guarantee uniqueness
    if the same TID is used when requesting via multiple source LIDs (when
    LMC is not zero).  Use ports' cached LMC to perform the check.
    
    Further, do not perform LID check for direct-routed packets, since
    the permissive LID makes a proper check impossible.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6fb9cdbf2cdb2ea187e57ec2e16cc59df2adf86a
Author: Jack Morgenstein <jackm@mellanox.co.il>
Date:   Sat Jun 17 20:37:34 2006 -0700

    IB: Add caching of ports' LMC
    
    Add an LMC cache to struct ib_device, and add a function
    ib_get_cached_lmc() to query the cache.
    
    Signed-off-by: Jack Morgenstein <jackm@mellanox.co.il>
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 856c256f883f027a14b546164294b4a86fea81a4
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Thu May 25 14:51:33 2006 -0700

    IB/cm: remove unneeded flush_workqueue
    
    destroy_workqueue() already does flush_workqueue().
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>

commit 4be10c1e6dcafec993ac4f9abfa5fdcd83728302
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Thu May 25 10:03:23 2006 -0700

    IB/ucm: convert semaphore to mutex
    
    Convert semaphore in ib_ucm_file to a real mutex.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6bfa24fa3e189269e113197a80e12862c211b3d3
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:33 2006 -0700

    IB/srp: Get rid of "Target has req_lim 0" messages
    
    It's perfectly valid for a connection to an SRP target to have a
    request limit of 0, so get rid of the message about it, which can spam
    kernel logs even with printk_ratelimit().  Keep a count of such events
    in a "zero_req_lim" SCSI host attribute instead, so someone who cares
    can look at the statistics.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit b7ac4ab497e44cba75fb0e9e5afca06776518934
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Sat Jun 17 20:37:32 2006 -0700

    IB/srp: Handle DREQ events from CM
    
    Handle IB_CM_DREQ_ERROR and IB_CM_DREQ_RECEIVED events from the CM,
    instead of just printing "Unhandled CM event".  In the case of
    DREQ_ERROR, just ignore the event -- a TIMEWAIT_EXIT will be generated
    also.  For DREQ_RECEIVED, send a DREP in response to shut the
    connection down cleanly.
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit ac83cbaa9a41344c3adf329ede607e58d887f354
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:32 2006 -0700

    IPoIB: Mention RFC numbers in documentation
    
    Now that the IETF has released RFCs covering IPoIB, give the numbers in
    the documentation for IPoIB.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 74b0a15b5e18e44206c98419745a472c3d28e561
Author: Vu Pham <vu@mellanox.com>
Date:   Sat Jun 17 20:37:32 2006 -0700

    IB/srp: Allow sg_tablesize to be adjusted
    
    Make the sg_tablesize used by SRP adjustable at module load time via a
    module parameter.  Calculate the corresponding IU length required to
    support this.
    
    Signed-off-by: Vu Pham <vu@mellanox.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 52fb2b50c4baa1430064c1e6c1c7df473d469df1
Author: Vu Pham <vu@mellanox.com>
Date:   Sat Jun 17 20:37:31 2006 -0700

    IB/srp: Allow cmd_per_lun to be set per target port
    
    Allow userspace to throttle traffic on a given connection to a target
    port by adding "max_cmd_per_lun=xyz" to lower the cmd_per_lun value
    set for that scsi_host.
    
    Signed-off-by: Vu Pham <vu@mellanox.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 0c5b395239cdea4db3d9c23a5738fdaf3b9ada4c
Author: Ishai Rabinovitz <ishai@mellanox.co.il>
Date:   Sat Jun 17 20:37:31 2006 -0700

    IB/srp: Clean up loop in srp_remove_one()
    
    Interrupts will always be enabled in srp_remove_one(), so
    spin_lock_irq() can be used instead of spin_lock_irqsave().
    Also, the loop takes target->scsi_host->host_lock, so target->state
    can just be set to SRP_TARGET_REMOVED witout testing the old value.
    
    Signed-off-by: Ishai Rabinovitz <ishai@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 403a496fd4af3036c12e1f9c90a89cf846fadd35
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:31 2006 -0700

    IB: Make needlessly global ib_mad_cache static
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit b3589fd49067bab9fe0c60430860e6befbd5ba37
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Jun 17 20:37:30 2006 -0700

    IB/srp: Change target_mutex to a spinlock
    
    The SRP driver never sleeps while holding target_mutex, and it's just
    used to protect some simple list operations, so hold times will be
    short.  So just convert it to a spinlock, which is smaller and faster.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 549c5fc2c8149498118f2494a1b6a4938ca05985
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Jun 17 20:37:30 2006 -0700

    IB/srp: Get rid of unneeded use of list_for_each_entry_safe()
    
    list_for_each_entry_safe() is used in one place where the list isn't
    modified.  So just change it to list_for_each_entry().
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 1962a4a1e4b3716aa836ebeb5b80c804a7f7c5ba
Author: Matthew Wilcox <matthew@wil.cx>
Date:   Sat Jun 17 20:37:30 2006 -0700

    IB/srp: Use SCAN_WILD_CARD from SCSI headers
    
    SCAN_WILD_CARD is indeed available from <scsi/scsi.h>, which is
    already included.  So get rid of private hack.
    
    Signed-off-by: Matthew Wilcox <matthew@wil.cx>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e9cd59418f049966a690372c4919e98c88bb119b
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:30 2006 -0700

    IB/mthca: Convert FW commands to use wait_for_completion_timeout()
    
    The kernel has had wait_for_completion_timeout() for a long time now.
    mthca should use it to handle FW commands timing out, instead of
    implementing the same thing in a much more complicated way by using
    wait_for_completion() along with a timer that does complete().
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit f5358a172f79e3f995919224401b25637f4324f6
Author: Roland Dreier <rolandd@cisco.com>
Date:   Sat Jun 17 20:37:29 2006 -0700

    IB/srp: Use FMRs to map gather/scatter lists
    
    Create an SRP FMR pool on HCAs that support FMRs, and use FMRs to map
    gather/scatter lists that have more than one entry into a single
    memory region that appears virtually contiguous to the SRP target
    (which is the RDMA initiator).
    
    This patch bails out on FMR mapping for SCSI commands where the
    gather/scatter list cannot be mapped into a single FMR because there
    are sub-page-sized entries in middle of the list.  An unaligned
    start or end of the list is OK.
    
    Based on a patch by Vu Pham <vuhuong@mellanox.com>.
    
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit a26026c1221c3e78e6e9f156994c41fb74e99022
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Sat Jun 17 20:37:29 2006 -0700

    IB/mthca: Remove dead code
    
    Kill some dead code in mthca_eq.c
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit e51060f08a61965c4dd91516d82fe90617152590
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:29 2006 -0700

    IB: IP address based RDMA connection manager
    
    Kernel connection management agent over InfiniBand that connects based
    on IP addresses.  The agent defines a generic RDMA connection
    abstraction to support clients wanting to connect over different RDMA
    devices.
    
    The agent also handles RDMA device hotplug events on behalf of clients.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 7025fcd36bd62af2c6ca0ea3490c00b216c4d168
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:28 2006 -0700

    IB: address translation to map IP toIB addresses (GIDs)
    
    Add an address translation service that maps IP addresses to
    InfiniBand GID addresses using IPoIB.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit a1e8733e557bb390e13aa00ef044a6022c8d0bb2
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:28 2006 -0700

    [NET]: Export ip_dev_find()
    
    Export ip_dev_find() to allow locating a net_device given an IP address.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6e61d04f2d8c7ac4f67e1f498ed2a2a3ad8edaa3
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:28 2006 -0700

    IB/cm: Match connection requests based on private data
    
    Extend matching connection requests to listens in the InfiniBand CM to
    include private data checks.
    
    This allows applications to listen on the same service identifier,
    with private data directing the request to the appropriate application.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 6a9af2e18a5c6ebcf8283309d20ac0e9fa35e346
Author: Sean Hefty <sean.hefty@intel.com>
Date:   Sat Jun 17 20:37:27 2006 -0700

    IB: common handling for marshalling parameters to/from userspace
    
    Provide common handling for marshalling data between userspace clients
    and kernel InfiniBand drivers.
    
    Signed-off-by: Sean Hefty <sean.hefty@intel.com>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 4e56ea794ec8636991e21942fc2e0d071ea8ee1d
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Tue Jun 13 17:19:42 2006 +0300

    IB/mthca: memfree completion with error FW bug workaround
    
    Memfree firmware is in rare cases reporting WQE index == base - 1 in
    receive completion with error, instead of (rq size - 1); base is 0 in
    mthca.  Here is a patch to avoid kernel crash and report a correct WR
    id in this case.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 13aa6ecb47990cfc78e20e347fdd3f1df6189426
Author: Michael S. Tsirkin <mst@mellanox.co.il>
Date:   Mon Jun 12 16:57:51 2006 +0300

    IB/mthca: restore missing PCI registers after reset
    
    mthca does not restore the following PCI-X/PCI Express registers after reset:
      PCI-X device: PCI-X command register
      PCI-X bridge: upstream and downstream split transaction registers
      PCI Express : PCI Express device control and link control registers
    
    This causes instability and/or bad performance on systems where one of
    these registers is set to a non-default value by BIOS.
    
    Signed-off-by: Michael S. Tsirkin <mst@mellanox.co.il>
    Signed-off-by: Roland Dreier <rolandd@cisco.com>

commit 3877f0b6c9f54d43e55e532404a935b90393b635
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun Jun 18 00:05:26 2006 +0100

    [JFFS2] Don't trust node headers before the CRC is checked.
    
    Especially when summary code is used, we can have in-memory data
    structures referencing certain nodes without them actually being readable
    on the flash. Discard the nodes gracefully in that case, rather than
    triggering a BUG().
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 216b2f1f718d653795024a085636d063693dd9a9
Author: Uwe Zeisberger <zeisberg@informatik.uni-freiburg.de>
Date:   Fri Jun 16 08:48:48 2006 +0200

    kbuild: append -dirty for updated but uncommited changes
    
    Compare the working copy with the last commit, instead of the index.
    
    Signed-off-by: Uwe Zeisberger <zeisberg@informatik.uni-freiburg.de>
    Acked-by: Ryan Anderson <ryan@michonline.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 29b0c89953fee8597b4a9cbdd763c294ae0eb4c7
Author: Uwe Zeisberger <zeisberg@informatik.uni-freiburg.de>
Date:   Fri Jun 16 08:47:57 2006 +0200

    kbuild: append git revision for all untagged commits
    
    adds revision suffix for untagged commits that are reachable from a tag
    
    I'm bisecting and don't get the -g...... suffix.  The reason is, that
    
    	git name-rev --tags HEAD
    
    returns e.g.
    
    	HEAD tags/v2.6.17-rc1^0~1067
    
    which is currently good enough for setlocalversion to skip the suffix.
    This introduces a dependecy to grep -E, which should be fine.
    
    Signed-off-by: Uwe Zeisberger <zeisberg@informatik.uni-freiburg.de>
    Acked-By: Ryan Anderson <ryan@michonline.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 9ac545b0f7161eaf2e180acc406c1dd6fdd77686
Author: Laurent Riffard <laurent.riffard@free.fr>
Date:   Sun Jun 11 08:02:06 2006 +0200

    kbuild: fix module.symvers parsing in modpost
    
    read_dump didn't split lines between module name and export type.
    
    Signed-off-by: Laurent Riffard <laurent.riffard@free.fr>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 5b4b7a236e7787f16af4e15a6253d46d8e794be6
Merge: 785fccc... 872d83d...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 23:17:14 2006 -0400

    Pull button into release branch

commit 872d83d00f67021e036d75aab3b7c6e3fc7e29ee
Author: Arnaud Patard <apatard@mandriva.com>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: suppress power button event on S3 resume
    
    http://bugzilla.kernel.org/show_bug.cgi?id=6612
    
    Note that this fix depends on a fix in ACPICA 20060608
    to replace a semaphore with a spin-lock.
    
    Signed-off-by: Arnaud Patard <apatard@mandriva.com>
    Acked-by: "Yu, Luming" <luming.yu@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 785fcccd68bd4dc436f75fd4cd40e8557966c86d
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 22:19:31 2006 -0400

    ACPI: resolve merge conflict between sem2mutex and processor_perflib.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit d42510a0f58c2583c37c8e9b7548e3a68545863a
Merge: 8f2ddb3... 193de0c...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:39:25 2006 -0400

    Pull bugzilla-5737 into release branch
    
    Conflicts:
    
    	arch/x86_64/kernel/acpi/processor.c

commit 8f2ddb37e564a9616c05fa0d5652e0049072a730
Merge: 5b542e4... 74ce146...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:36:11 2006 -0400

    Pull bugzilla-5000 into release branch

commit 5b542e4422766d644ca303b8a47b27ec9eeeef3a
Merge: e4151ea... f9a6ee1...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:34:21 2006 -0400

    Pull bugzilla-5764 into release branch

commit e4151eaa7f231296d027b8fb34e2b855a3480836
Merge: c080a3e... 42adb53...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:33:36 2006 -0400

    Pull ibm_acpi into release branch

commit c080a3e69dfb58ae9b8c7e70a1e33f4f4e493ea7
Merge: bf891bd... 36e4309...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:31:47 2006 -0400

    Pull sem2mutex into release branch

commit bf891bd65de65284f3964216fcde493dba5149db
Merge: de59e3a... 9c576ff...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:31:17 2006 -0400

    Pull trivial2 into release branch

commit de59e3aa6eda7fc7cd6c717f084930f6a841b602
Merge: 69cd291... 973bf49...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:30:59 2006 -0400

    Pull video into release branch

commit 69cd291c6bbc6647fe3783257c5a2e076e808f71
Merge: 35a5d9e... 06ea8e0...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 21:28:57 2006 -0400

    Pull acpi_bus_register_driver into release branch
    
    Conflicts:
    
    	drivers/acpi/asus_acpi.c
    	drivers/acpi/scan.c

commit 1668b19f75cb949f930814a23b74201ad6f76a53
Author: Pedro Alejandro Lalpez-Valencia <palopezv@gmail.com>
Date:   Thu Jun 15 22:46:44 2006 +0200

    sundance: PCI ID for ip100a
    
    Patch provided by Pedro Alejandro Lalpez-Valencia in
    http://bugzilla.kernel.org/show_bug.cgi?id=6691
    
    The patch is derived from IC+ GPL'ed rework of sundance driver
    available at http://www.icplus.com.tw/pp-IP100A.html
    
    Patch closes http://bugzilla.kernel.org/show_bug.cgi?id=5858 as well.
    
    Signed-off-by: Francois Romieu <romieu@fr.zoreil.com>
    Cc: Pedro Alejandro Lalpez-Valencia <palopezv@gmail.com>

commit 89c318ed3985da1271e00ad586f2dce8a6e75656
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Jun 8 22:19:49 2006 -0700

    [PATCH] ipw2200 locking fix
    
    Well, this is not 100% if when the card fires two consecutive
    interrupts. Though unlikely, it's better to protect early than seeing
    some "weird" bugs one day. I proposed attached patch. If you can help to
    test, that will be appreciated (I cannot see the lockdep warning on my
    box somehow).
    
    Cc: Frederik Deweerdt <deweerdt@free.fr>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Cc: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 7bd6b91800c996da328bd57e40e62b3f73760fbe
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Thu Jun 8 09:47:42 2006 -0500

    [PATCH] wireless: correct dump of WPA IE
    
    In net/ieee80211/softmac/ieee80211softmac_wx.c, there is a bug that
    prints extended sign information whenever the byte value exceeds
    0x7f. The following patch changes the printk to use a u8 cast to limit
    the output to 2 digits. This bug was first noticed by Dan Williams
    <dcbw@redhat.com>. This patch applies to the current master branch
    of the Linville tree.
    
    Signed-Off-By: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 12a3768792dc27f11a5edb96e38db32bcdc5fd27
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Mon Jun 5 22:20:07 2006 +0200

    [PATCH] pci: bcm43xx avoid pci_find_device
    
    bcm43xx avoid pci_find_device
    
    Change pci_find_device to safer pci_get_device with support for more
    devices.
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 91769e7dd9cef7988dc4280f74ed168351beb5b8
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 5 20:24:21 2006 +0200

    [PATCH] bcm43xx: preemptible periodic work
    
    Make the heavy periodic work preemptible to avoid disabling
    local IRQs for several msecs.
    
    Signed-off-by: Michael Buesch <mb@buesch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 78ff56a06edc3407996173daf63e48f6b90c7062
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Jun 5 20:24:10 2006 +0200

    [PATCH] bcm43xx: redesign locking
    
    Redesign the bcm43xx locking.
    This is pre-work to get a preemptible periodic work handler.
    
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 74f4903363579d3336c294ebb11f02c8f35845ca
Author: Larry Finger <Larry.Finger@lwfinger.net>
Date:   Tue May 30 11:55:42 2006 -0500

    [PATCH] wireless: Changes to ieee80211.h for user space regulatory daemon
    
    Attached are two small patches for include/net/ieee80211.h to prepare
    for later submission of code to implement a user-space daemon that
    supplies 802.11 regulatory information.
    
    The first change adds a bit indicating that 802.11h rules are to be
    applied to a channel. As discussed earlier in this list, a single bit
    is unlikely to be sufficient; however, at this time I have been unable
    to find any regulations implementing differences between 802.11a and
    802.11h other than DFS, radar detection and passive scanning. A single
    bit is thus sufficient to convey to the driver that these rules should
    be obeyed.
    
    The second change adds comments to the freq and max_power fields of
    struct ieee80211_channel to indicate the units that are used.
    
    Signed-Off-By: Larry Finger <Larry.Finger@lwfinger.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 35a5d9ed9fedb74c22cb19ff7d749289473144e0
Merge: 3e8e7c9... 0eacee5...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:42:14 2006 -0400

    Pull bugzilla-5452 into release branch

commit 3e8e7c93d7eb091463839b5212789c4aae09459e
Merge: 36a557d... ffd642e...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:41:53 2006 -0400

    Pull bugzilla-5653 into release branch

commit 36a557d1f48669c57f59e37d9334400a29e4e53c
Merge: 4e8f10b... 6665bda...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:40:39 2006 -0400

    Pull trivial into release branch

commit 4e8f10b7ccf1c3c53a818a157962074a7340732e
Merge: 6351847... 9cfda2c...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:38:30 2006 -0400

    Pull novell-bugzilla-156426 into release branch
    
    Conflicts:
    
    	arch/i386/kernel/acpi/boot.c

commit 63518472c05a351d779f35803e6ccfb361ae630a
Merge: e44e20f... e6f1f3c...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:37:09 2006 -0400

    Pull trivial1 into release branch

commit e44e20ff1273cf96c7f195297208f654c49295cf
Merge: 3145012... 1c6e7d0...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:36:43 2006 -0400

    Pull pnpacpi into release branch

commit 3145012c1c34a3504a2234bd2034ca6ea4767bc5
Merge: 1465887... cd090ee...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:36:16 2006 -0400

    Pull motherboard into release branch

commit 1465887cfe79889273e3fd3aaf862e7ec3ee244f
Merge: 60e04a5... 1300124...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:35:57 2006 -0400

    Pull Kconfig into release branch

commit 60e04a5c533785c23ce6b76a6e5058328fe68edb
Merge: 61fb46c... ff2fc3e...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:35:37 2006 -0400

    Pull ec into release branch

commit 61fb46c5b3578fda7cc780e8bc53b3e8f8c1a143
Merge: 59f720e... eefa27a...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:35:15 2006 -0400

    Pull cpu-hotplug into release branch

commit 59f720eb5a4337b2c4fc0b4c6cfd9c144e492aa8
Merge: b3899c6... 9224a86...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:34:42 2006 -0400

    Pull address_range into release branch

commit b3899c6613160b18f79e4356184de55311302fe4
Merge: 553698f... 4c90ece...
Author: Len Brown <len.brown@intel.com>
Date:   Thu Jun 15 15:19:48 2006 -0400

    Pull acpica into release branch

commit 12223dabc617a4babfba4e17feb1ed88e8cfeb8f
Author: Russell King <rmk@dyn-67.arm.linux.org.uk>
Date:   Thu Jun 15 13:28:52 2006 +0100

    [MMC] Add (MMC) to entry in MAINTAINERS file
    
    Juha Yrjola suggests that adding the string "MMC" to the
    maintainers file entry will make it easier to find.  Add
    it to the file.
    
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 2ba73b1d6fa62ddaa235c3c5fdf6095cae6ba748
Author: Matthias Fuchs <matthias.fuchs@esd-electronics.com>
Date:   Wed Jun 14 15:35:05 2006 +0200

    [POWERPC] ppc32: fix CPCI405 board support
    
    Hi,
    
    this patch brings the CPCI405 board support up to date and fixes several
    outstanding issues:
    
           -add bios_fixup()
           -enable RTC only when CONFIG_GEN_RTC defined
           -corrected CompactPCI interrupt map
           -added cpci405_early_serial_map for correct UART clocking
           -removed unused code
    
    Matthias
    
    Signed-off-by: Matthias Fuchs <matthias.fuchs@esd-electronics.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4312dc76a88146c4f1d693fc4643d1df12aaf755
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Tue Jun 13 17:43:42 2006 +0200

    [POWERPC] make pmf irq_client functions safe against pmf interrupts coming in
    
    This fixes the pmf irq_client functions to be safe against pmf interrupts coming
    in while a client is registered/unregistered.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 368a6ba5d188552aea2a668301a259164c9f355e
Author: Dave Boutcher <boutcher@cs.umn.edu>
Date:   Mon Jun 12 19:49:20 2006 -0500

    [POWERPC] check firmware state before suspending
    
    Currently the kernel blindly halts all the processors and calls the
    ibm,suspend-me rtas call.  If the firmware is not in the correct
    state, we then re-start all the processors and return.  It is much
    smarter to first check the firmware state, and only if it is waiting,
    call the ibm,suspend-me call.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0e4aa9c2009187fff1c999fe0aaa134c1a84f48a
Author: Amos Waterland <apw@us.ibm.com>
Date:   Mon Jun 12 23:45:02 2006 -0400

    [POWERPC] Fix builtin command line interaction with firmware
    
    It seems that prom_init's early_cmdline_parse is broken on at least
    Apple 970 xserves and IBM JS20 blades with SLOF.  The firmware of these
    machines returns -1 and 1 respectively when getprop is called for the
    bootargs property of /chosen, causing Linux to ignore its builtin
    command line in favor of a null string.  This patch makes Linux use its
    builtin command line if getprop returns an error or a null string.
    
    Signed-off-by: Amos Waterland <apw@us.ibm.com>
    Acked-by: Segher Boessenkool <segher@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 6fe87675314b4b1ac7ba339e2a4ab8d739b600d6
Author: Anton Blanchard <anton@samba.org>
Date:   Sun Jun 11 11:40:43 2006 +1000

    [POWERPC] update pmac32_defconfig
    
    Some updates to the pmac32_defconfig to make it more useful:
    
    - Enable LSF (large single files) since we enable LBD (large block devices)
    - Enable IPSEC related options
    - Enable remaining raid/dm options as modules
    - Disable eth1394, I doubt any has that hardware and it has a nasty habit of
      auto loading first and skewing network device numbering
    - Enable dummy and tun as modules, always useful to have them around
    - Enable EHCI, no wonder my usb2 disk was so slow
    - Enable USB storage
    - Enable ext3 acls
    - Disable autofs and enable autofsv4 instead
    - Enable nfs v3/v4 client and server. Dont want to be left in the dark ages
      of pre v3
    - Enable all crypto as modules, things like cryptsetup want some of them
    
    I havent enabled the BCM43xx, perhaps we should now?
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bd19c8994a828e70b5472f0ce9df5831c6c3db84
Author: Anton Blanchard <anton@samba.org>
Date:   Sun Jun 11 01:15:55 2006 +1000

    [POWERPC] system call micro optimisation
    
    In the syscall path we currently have:
    
           crclr   so
           mfcr    r9
    
    If we shift the crclr up we can avoid a stall on some CPUs.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9e6e3c2c796f1e0ef335804d5c87073e365dea50
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 23:14:51 2006 +1000

    [POWERPC] Fix HV bit handling on non partitioned machines
    
    On non partitioned machines we currently set the HV bit in kernel space
    only. It turns out we are supposed to maintain the HV bit in both user
    and kernel space.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit df310656c7552ae7b8252e4b3d8e300cff164b16
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 23:04:39 2006 +1000

    [POWERPC] cleanup dma_mapping_ops
    
    For pseries IOMMU bypass I want to be able to fall back to the regular
    IOMMU ops. Do this by creating a dma_mapping_ops struct, and convert
    the others while at it.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ca1588e71b70534e18368a46a3aad9b25dff941d
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 20:58:08 2006 +1000

    [POWERPC] node local IOMMU tables
    
    Allocate IOMMU tables local to the relevant node.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 357518fa34d9dceda42bfc09642356a58370050d
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 20:53:06 2006 +1000

    [POWERPC] pcibus_to_node fixes
    
    of_node_to_nid returns -1 if the associativity cannot be found. This
    means pcibus_to_cpumask has to be careful not to pass a negative index into
    node_to_cpumask.
    
    Since pcibus_to_node could be used a lot, and of_node_to_nid is slow (it
    walks a list doing strcmps), lets also cache the node in the
    pci_controller struct.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f2b09c8189bc7b64a42753e98f7006b11bae1bdc
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 20:37:24 2006 +1000

    [POWERPC] Update pseries defconfig
    
    pseries defconfig updates:
    
    - Enable jsm and re-enable qlogic FC drivers as modules.
    - Enable ocfs2, autofs4 and fuse filesystems as modules.
    - Enable Kprobes.
    - Enable ebus, binfmt_misc, sas attrs, md5 reshape, hvc rtas backend and
      some infiniband options.
    - Finally disable debug options: DEBUG_MUTEXES and DEBUG_STACK_USAGE.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 227318bbde6c8309b1d20ab46532ec2b737e1fee
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 20:32:01 2006 +1000

    [POWERPC] Remove stale 64bit on 32bit kernel code
    
    Remove some stale POWER3/POWER4/970 on 32bit kernel support.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8555a0029b1b0840237b750e55d4835a52cc719b
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 20:23:54 2006 +1000

    [POWERPC] Optimise some TOC usage
    
    Micro-optimisation - add no-minimal-toc to some more arch/powerpc Makefiles.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3a2c48cfc97f9046abbd810f1efb1aa824bcfaf1
Author: Anton Blanchard <anton@samba.org>
Date:   Sat Jun 10 20:18:39 2006 +1000

    [POWERPC] 64bit FPSCR support
    
    Forthcoming machines will extend the FPSCR to 64 bits.  We already
    had a 64-bit save area for the FPSCR, but we need to use a new form
    of the mtfsf instruction.  Fortunately this new form is decoded as
    an ordinary mtfsf by existing 64-bit processors.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 30d8caf7c625203b295a78f143820cdc3124830b
Author: Michal Ostrowski <mostrows@watson.ibm.com>
Date:   Fri Jun 9 09:06:12 2006 -0400

    [POWERPC] Editable kernel command-line in zImage binary.
    
    zImage will set /chosen/bootargs (if it is otherwise empty) with the
    contents of a buffer in the section "__builtin_cmdline".  This permits
    tools to edit zImage binaries to set the command-line eventually
    processed by vmlinux.
    
    --
    Signed-off-by: Michal Ostrowski <mostrows@watson.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 204face4fb3ba2ca09a4073e7debc595e14c2388
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Wed Jun 7 16:15:10 2006 -0500

    [POWERPC] MSI abstraction
    
    Instead of trying to make PPC64 MSI fit in a Intel-centric MSI layer, a
    simple short-term solution is to hook the pci_{en/dis}able_msi() calls
    and make a machdep call.
    
    The rest of the MSI functions are superfluous for what is needed at this
    time.  Many of which can have machdep calls added as needed.
    
    Ben and Michael Ellerman are looking into rewrite the MSI layer to be
    more generic.  However, in the meantime this works as a interim
    solution.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bb53bb3dcb12d79efdee3d82bff46a204af377f3
Author: Jake Moilanen <moilanen@austin.ibm.com>
Date:   Wed Jun 7 16:05:46 2006 -0500

    [POWERPC] Add support for PCI-Express nodes in the device tree
    
    This adds support to recognize the PCIe device_type "pciex" and made
    the portdrv buildable.
    
    Signed-off-by: Jake Moilanen <moilanen@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0f582bc1f2cccacd613c411fbea55873d17c3429
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Jun 15 18:03:32 2006 +1000

    powerpc: Simplify push_end definition in pci_32.c
    
    The push_end macro in arch/powerpc/kernel/pci_32.c uses integer
    division and multiplication to achieve the effect of rounding a
    resource end address up and then advancing it to the end of a
    power-of-2 sized region.  This changes it to an equivalent computation
    that only needs an integer add and OR.  This is partly based on an
    earlier patch by Mel Gorman.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bf72aeba2ffef599d1d386425c9e46b82be657cd
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Jun 15 10:45:18 2006 +1000

    powerpc: Use 64k pages without needing cache-inhibited large pages
    
    Some POWER5+ machines can do 64k hardware pages for normal memory but
    not for cache-inhibited pages.  This patch lets us use 64k hardware
    pages for most user processes on such machines (assuming the kernel
    has been configured with CONFIG_PPC_64K_PAGES=y).  User processes
    start out using 64k pages and get switched to 4k pages if they use any
    non-cacheable mappings.
    
    With this, we use 64k pages for the vmalloc region and 4k pages for
    the imalloc region.  If anything creates a non-cacheable mapping in
    the vmalloc region, the vmalloc region will get switched to 4k pages.
    I don't know of any driver other than the DRM that would do this,
    though, and these machines don't have AGP.
    
    When a region gets switched from 64k pages to 4k pages, we do not have
    to clear out all the 64k HPTEs from the hash table immediately.  We
    use the _PAGE_COMBO bit in the Linux PTE to indicate whether the page
    was hashed in as a 64k page or a set of 4k pages.  If hash_page is
    trying to insert a 4k page for a Linux PTE and it sees that it has
    already been inserted as a 64k page, it first invalidates the 64k HPTE
    before inserting the 4k HPTE.  The hash invalidation routines also use
    the _PAGE_COMBO bit, to determine whether to look for a 64k HPTE or a
    set of 4k HPTEs to remove.  With those two changes, we can tolerate a
    mix of 4k and 64k HPTEs in the hash table, and they will all get
    removed when the address space is torn down.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 21c8db9eff95260e543535dfc6f27164c4c0c0ff
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Jun 14 21:39:48 2006 +0100

    [MTD] Restore MTD_ROM and MTD_RAM types
    
    Let's not attempt the abolition of mtd->type until/unless it's properly
    thought through. And certainly, let's not do it by halves.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 783ed81ff39d3f938a6b2efd09fbad96e41e5c1f
Author: Artem Bityutskiy <dedekind@sauron.oktetlabs.ru>
Date:   Wed Jun 14 19:53:44 2006 +0400

    [MTD] assume mtd->writesize is 1 for NOR flashes
    
    Signed-off-by: Artem Bityutskiy <dedekind@infradead.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9348f0de2d2b541b4ba64fb1f4efee9710a3d731
Author: Martin Schwidefsky <schwidefsky@de.ibm.com>
Date:   Wed Jun 14 14:10:51 2006 +0100

    [S390] __FD_foo definitions.
    
    Make the definitions of __FD_SET, __FD_CLR and __FD_ISSET independent
    from asm/bitops.h and remove the macro magic that tests for __GLIBC__.
    Use simple C inline functions instead of set_bit, clear_bit and test_bit.
    
    Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4c90ece249992c7a2e3fc921e5cdb8eb92193067
Author: Bob Moore <robert.moore@intel.com>
Date:   Thu Jun 8 16:29:00 2006 -0400

    ACPI: ACPICA 20060608
    
    Converted the locking mutex used for the ACPI hardware
    to a spinlock. This change should eliminate all problems
    caused by attempting to acquire a semaphore at interrupt
    level, and it means that all ACPICA external interfaces
    that directly access the ACPI hardware can be safely
    called from interrupt level.
    
    Fixed a regression introduced in 20060526 where the ACPI
    device initialization could be prematurely aborted with
    an AE_NOT_FOUND if a device did not have an optional
    _INI method.
    
    Fixed an IndexField issue where a write to the Data
    Register should be limited in size to the AccessSize
    (width) of the IndexField itself. (BZ 433, Fiodor Suietov)
    
    Fixed problem reports (Valery Podrezov) integrated: - Allow
    store of ThermalZone objects to Debug object.
    http://bugzilla.kernel.org/show_bug.cgi?id=5369
    http://bugzilla.kernel.org/show_bug.cgi?id=5370
    
    Fixed problem reports (Fiodor Suietov) integrated: -
    acpi_get_table_header() doesn't handle multiple instances
    correctly (BZ 364)
    
    Removed four global mutexes that were obsolete and were
    no longer being used.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4119532c95547821dbe72d6916dfa1b2148475b3
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri May 26 16:36:00 2006 -0400

    ACPI: ACPICA 20060526
    
    Restructured, flattened, and simplified the internal
    interfaces for namespace object evaluation - resulting
    in smaller code, less CPU stack use, and fewer
    interfaces. (With assistance from Mikhail Kouzmich)
    
    Fixed a problem with the CopyObject operator where the
    first parameter was not typed correctly for the parser,
    interpreter, compiler, and disassembler. Caused various
    errors and unexpected behavior.
    
    Fixed a problem where a ShiftLeft or ShiftRight of
    more than 64 bits produced incorrect results with some
    C compilers. Since the behavior of C compilers when
    the shift value is larger than the datatype width is
    apparently not well defined, the interpreter now detects
    this condition and simply returns zero as expected in all
    such cases. (BZ 395)
    
    Fixed problem reports (Valery Podrezov) integrated: -
    Update String-to-Integer conversion to match ACPI 3.0A spec
    http://bugzilla.kernel.org/show_bug.cgi?id=5329
    Allow interpreter to handle nested method declarations
    http://bugzilla.kernel.org/show_bug.cgi?id=5361
    
    Fixed problem reports (Fiodor Suietov) integrated: -
    acpi_terminate() doesn't free debug memory allocation
    list objects (BZ 355) - After Core Subsystem
    shutdown, acpi_subsystem_status() returns AE_OK (BZ 356) -
    acpi_os_unmap_memory() for RSDP can be invoked inconsistently
    (BZ 357) - Resource Manager should return AE_TYPE for
    non-device objects (BZ 358) - Incomplete cleanup branch
    in AcpiNsEvaluateRelative (BZ 359) - Use acpi_os_free()
    instead of ACPI_FREE in acpi_rs_set_srs_method_data (BZ 360)
    - Incomplete cleanup branch in acpi_ps_parse_aml (BZ 361) -
    Incomplete cleanup branch in acpi_ds_delete_walk_state (BZ 362)
    - acpi_get_table_header returns AE_NO_ACPI_TABLES until DSDT
    is loaded (BZ 365) - Status of the Global Initialization
    Handler call not used (BZ 366) - Incorrect object parameter
    to Global Initialization Handler (BZ 367)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b8d35192c55fb055792ff0641408eaaec7c88988
Author: Alexey Starikovskiy <alexey.y.starikovskiy@intel.com>
Date:   Fri May 5 03:23:00 2006 -0400

    ACPI: execute Notify() handlers on new thread
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5534
    
    Thanks to Peter Wainwright for isolating the issue.
    Thanks to Andi Kleen and Bob Moore for feedback.
    Thanks to Richard Mace and others for testing.
    Updates by Konstantin Karasyov.
    
    Signed-off-by: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 958dd242b691f64ab4632b4903dbb1e16fee8269
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri May 12 17:12:00 2006 -0400

    ACPI: ACPICA 20060512
    
    Replaced the acpi_os_queue_for_execution() with a new
    interface named acpi_os_execute(). The major difference is
    that the new interface does not have a Priority parameter,
    this appeared to be useless and has been replaced by
    a Type parameter. The Type tells the OS what type of
    execution is being requested, such as global lock handler,
    notify handler, GPE handler, etc. This allows the host
    to queue and execute the request as appropriate for the
    request type, possibly using different work queues and
    different priorities for the various request types. This
    enables fixes for multithreading deadlock problems such as
    http://bugzilla.kernel.org/show_bug.cgi?id=5534
    (Alexey Starikovskiy and Bob Moore)
    
    Fixed a possible memory leak associated with the
    support for the so-called "implicit return" ACPI
    extension. Reported by FreeBSD  (Fiodor Suietov)
    http://bugzilla.kernel.org/show_bug.cgi?id=6514
    
    Fixed a problem with the Load() operator where a table
    load from an operation region could overwrite an internal
    table buffer by up to 7 bytes and cause alignment faults
    on IPF systems. (With assistance from Luming Yu)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b229cf92eee616c7cb5ad8cdb35a19b119f00bc8
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Apr 21 17:15:00 2006 -0400

    ACPI: ACPICA 20060421
    
    Removed a device initialization optimization introduced in
    20051216 where the _STA method was not run unless an _INI
    was also present for the same device. This optimization
    could cause problems because it could allow _INI methods
    to be run within a not-present device subtree (If a
    not-present device had no _INI, _STA would not be run,
    the not-present status would not be discovered, and the
    children of the device would be incorrectly traversed.)
    
    Implemented a new _STA optimization where namespace
    subtrees that do not contain _INI are identified and
    ignored during device initialization. Selectively running
    _STA can significantly improve boot time on large machines
    (with assistance from Len Brown.)
    
    Implemented support for the device initialization case
    where the returned _STA flags indicate a device not-present
    but functioning. In this case, _INI is not run, but the
    device children are examined for presence, as per the
    ACPI specification.
    
    Implemented an additional change to the IndexField support
    in order to conform to MS behavior. The value written to
    the Index Register is not simply a byte offset, it is a
    byte offset in units of the access width of the parent
    Index Field. (Fiodor Suietov)
    
    Defined and deployed a new OSL interface,
    acpi_os_validate_address().  This interface is called during
    the creation of all AML operation regions, and allows
    the host OS to exert control over what addresses it will
    allow the AML code to access. Operation Regions whose
    addresses are disallowed will cause a runtime exception
    when they are actually accessed (will not affect or abort
    table loading.)
    
    Defined and deployed a new OSL interface,
    acpi_os_validate_interface().  This interface allows the host OS
    to match the various "optional" interface/behavior strings
    for the _OSI predefined control method as appropriate
    (with assistance from Bjorn Helgaas.)
    
    Restructured and corrected various problems in the
    exception handling code paths within DsCallControlMethod
    and DsTerminateControlMethod in dsmethod (with assistance
    from Takayoshi Kochi.)
    
    Modified the Linux source converter to ignore quoted string
    literals while converting identifiers from mixed to lower
    case. This will correct problems with the disassembler
    and other areas where such strings must not be modified.
    
    The ACPI_FUNCTION_* macros no longer require quotes around
    the function name. This allows the Linux source converter
    to convert the names, now that the converter ignores
    quoted strings.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 793c2388cae3fd023b3b5166354931752d42353c
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Mar 31 00:00:00 2006 -0500

    ACPI: ACPICA 20060331
    
    Implemented header file support for the following
    additional ACPI tables: ASF!, BOOT, CPEP, DBGP, MCFG, SPCR,
    SPMI, TCPA, and WDRT. With this support, all current and
    known ACPI tables are now defined in the ACPICA headers and
    are available for use by device drivers and other software.
    
    Implemented support to allow tables that contain ACPI
    names with invalid characters to be loaded. Previously,
    this would cause the table load to fail, but since
    there are several known cases of such tables on
    existing machines, this change was made to enable
    ACPI support for them. Also, this matches the
    behavior of the Microsoft ACPI implementation.
    https://bugzilla.novell.com/show_bug.cgi?id=147621
    
    Fixed a couple regressions introduced during the memory
    optimization in the 20060317 release. The namespace
    node definition required additional reorganization and
    an internal datatype that had been changed to 8-bit was
    restored to 32-bit. (Valery Podrezov)
    
    Fixed a problem where a null pointer passed to
    acpi_ut_delete_generic_state() could be passed through
    to acpi_os_release_object which is unexpected. Such
    null pointers are now trapped and ignored, matching
    the behavior of the previous implementation before the
    deployment of acpi_os_release_object().  (Valery Podrezov,
    Fiodor Suietov)
    
    Fixed a memory mapping leak during the deletion of
    a SystemMemory operation region where a cached memory
    mapping was not deleted. This became a noticeable problem
    for operation regions that are defined within frequently
    used control methods. (Dana Meyers)
    
    Reorganized the ACPI table header files into two main
    files: one for the ACPI tables consumed by the ACPICA core,
    and another for the miscellaneous ACPI tables that are
    consumed by the drivers and other software. The various
    FADT definitions were merged into one common section and
    three different tables (ACPI 1.0, 1.0+, and 2.0)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 61686124f47d7c4b78610346c5f8f9d8a6d46bb5
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Mar 17 16:44:00 2006 -0500

    [ACPI] ACPICA 20060317
    
    Implemented the use of a cache object for all internal
    namespace nodes. Since there are about 1000 static nodes
    in a typical system, this will decrease memory use for
    cache implementations that minimize per-allocation overhead
    (such as a slab allocator.)
    
    Removed the reference count mechanism for internal
    namespace nodes, since it was deemed unnecessary. This
    reduces the size of each namespace node by about 5%-10%
    on all platforms. Nodes are now 20 bytes for the 32-bit
    case, and 32 bytes for the 64-bit case.
    
    Optimized several internal data structures to reduce
    object size on 64-bit platforms by packing data within
    the 64-bit alignment. This includes the frequently used
    ACPI_OPERAND_OBJECT, of which there can be ~1000 static
    instances corresponding to the namespace objects.
    
    Added two new strings for the predefined _OSI method:
    "Windows 2001.1 SP1" and "Windows 2006".
    
    Split the allocation tracking mechanism out to a separate
    file, from utalloc.c to uttrack.c. This mechanism appears
    to be only useful for application-level code. Kernels may
    wish to not include uttrack.c in distributions.
    
    Removed all remnants of the obsolete ACPI_REPORT_* macros
    and the associated code. (These macros have been replaced
    by the ACPI_ERROR and ACPI_WARNING macros.)
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b5ed7639c9f502898af4109e778f5613dacbfd9c
Merge: 0638dec... eb35cf6...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 13 20:29:04 2006 -0400

    Merge branch 'master' into upstream

commit db9ca5803566078aafe63cf364ef98b5097e4194
Merge: bf717b1... eb35cf6...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 13 20:28:05 2006 -0400

    Merge branch 'master' into upstream

commit bf717b11aec20965d48dea36dea3eea18a75d18c
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Jun 13 20:27:03 2006 -0400

    [libata] Update docs to reflect current driver API

commit 0fd1ffe0633b4b039b343b753598e6df435e034d
Author: Pavel Machek <pavel@suse.de>
Date:   Tue Jun 13 21:31:39 2006 +0000

    [CIFS] Fix suspend/resume problem which causes EIO on subsequent access to
    the mount.
    
    Signed-off-by: Pavel Machek <pavel@suse.de>
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 76df73ff90e99681a99e457aec4cfe0a240b7982
Merge: 5c601d0... 86bc843...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Tue Jun 13 15:38:11 2006 -0400

    Merge branch 'from-linus' into upstream

commit d7ede1aa5dfff53e76dbabac5b8087341686f662
Author: Nathan Scott <nathans@sgi.com>
Date:   Tue Jun 13 16:28:11 2006 +1000

    [XFS] Minor XFS documentation updates.
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 31925323b1b51bb65db729e029472a8b1f635b7d
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Jun 13 13:43:00 2006 +1000

    powerpc: Fix some missed ppc32 mm->context.id conversions
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7136b8073f0123918e3e50269ae021bbb09e1a81
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:16:25 2006 -0400

    eth1394: replace __constant_htons by htons
    
    ...and __constant_ntohs, __constant_ntohl, __constant_cpu_to_be32 too
    where possible.  Htons and friends are resolved to constants in these
    places anyway.  Also fix an endianess glitch in a log message, spotted
    by Alexey Dobriyan.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 2c4b69bd7bff85ae9e8b2032179aee9c04da70ba
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:16:16 2006 -0400

    ieee1394: adjust code formatting in highlevel.c
    
    Replace spaces by tabulators, wrap lines at 80 columns, delete some
    blank lines and superfluous braces.  Collapse some if()-within-if()
    constructs.  Replace a literal CSR address by its preprocessor constant.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 445151932e869fd76b23bccff75ae2a600ccf3c9
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:16:01 2006 -0400

    ieee1394: hl_irqs_lock is taken in hardware interrupt context
    
    ohci1394 and pcilynx call highlevel_host_reset from their hardware
    interrupt handler (via hpsb_selfid_complete).  Therefore all readers and
    writers of hl_irqs_lock have to disable interrupts.  Reported by Jiri
    Slaby and J. A. Magallon.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit f654240f330d77eb198af4abde89131e2a0e4f90
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:15:50 2006 -0400

    ieee1394_core: switch to kthread API
    
    This gets also rid of the MODPOST warning "drivers/ieee1394/ieee1394.o -
    Section mismatch: reference to .exit.text: from .smp_locks after '' (at
    offset 0x18)".
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit dd082c670523231dc9a26dafee1dc22b57df2921
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:15:40 2006 -0400

    ieee1394: sbp2: Kconfig fix
    
    We only support x86 and ppc, due to the use of bus_to_virt() and friends.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 6737231ead125c7cee7ce4d3a74179bdac085529
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:15:31 2006 -0400

    ieee1394: add preprocessor constant for invalid csr address
    
    Replace occurrences of the magic value ~(u64)0 for invalid
    CSR address spaces by a named constant for better readability.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit e269d276792684a13ab0d9acd8c024ec7d6c5f4d
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:15:20 2006 -0400

    sbp2: fix deregistration of status fifo address space
    
    The proper designator of an invalid CSR address is ~(u64)0, not (u64)0.
    Use the correct value in initialization and deregistration.
    Also, scsi_id->sbp2_lun does not need to be initialized twice.
    (scsi_id was kzalloc'd.)
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 02f4213fc43dbddc3a3ab9fa4d2dc2501a2d30dc
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:15:11 2006 -0400

    [PATCH] eth1394: endian fixes
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit b21efb59c5d317a2a972b9d66939cbfeababd982
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:15:03 2006 -0400

    Fix broken suspend/resume in ohci1394
    
    I've been experimenting to track down the cause of suspend/resume problems
    on my Compaq Presario X1050 laptop:
    
    http://bugzilla.kernel.org/show_bug.cgi?id=6075
    
    Essentially the ACPI Embedded Controller and keyboard controller would
    get into a bizarre, confused state after resume.
    
    I found that unloading the ohci1394 module before suspend and reloading it
    after resume made the problem go away.  Diffing the dmesg output from
    resume, with and without the module loaded, I found that with the module
    loaded I was missing these:
    
    PM: Writing back config space on device 0000:02:00.0 at offset 1. (Was 2100080, writing 2100007)
    PM: Writing back config space on device 0000:02:00.0 at offset 3. (Was 0, writing 8008)
    PM: Writing back config space on device 0000:02:00.0 at offset 4. (Was 0, writing 90200000)
    PM: Writing back config space on device 0000:02:00.0 at offset 5. (Was 1, writing 2401)
    PM: Writing back config space on device 0000:02:00.0 at offset f. (Was 20000100, writing 2000010a)
    
    The default PCI driver performs the pci_restore_state when no driver is
    loaded for the device.  When the ohci1394 driver is loaded, it is supposed
    to do this, however it appears not to do so.
    
    I created the patch below and tested it, and it appears to resolve the
    suspend problems I was having with the module loaded.  I only added in the
    pci_save_state and pci_restore_state - however, though I know little of
    this hardware, surely the driver should really be doing more than this when
    suspending and resuming?  Currently it does almost nothing, what if there
    are commands in progress, etc?
    
    Signed-off-by: Robert Hancock <hancockr@shaw.ca>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Cc: Ben Collins <bcollins@debian.org>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 05db5055b1844bf39d1429a0c43078959198cd1d
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:14:47 2006 -0400

    sbp2: use __attribute__((packed)) for on-the-wire structures
    
    It seems to have worked without the attribute during all the years
    just because sizes of all struct members are multiples of 32 bits.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit bccbccdbf8f866a8e01967a48241db548e12adf2
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:14:36 2006 -0400

    sbp2: provide helptext for CONFIG_IEEE1394_SBP2_PHYS_DMA and mark it experimental
    
    It appears I will not get it fixed overnight.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit d0aef39f9b5941beb322924986ddee8c4903cd72
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:14:27 2006 -0400

    Update feature removal of obsolete raw1394 ISO requests.
    
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit fd23ade80e2bef156aa096459c31c010dacbea1e
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:14:14 2006 -0400

    sbp2: fix S800 transfers if phys_dma is off
    
    If sbp2 is forced to move data via ARM handler, the maximum packet size
    allowed for S800 transfers exceeds ohci1394's buffer size on platforms
    where PAGE_SIZE is 4096.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 40ae6c5e88790c2558013640ca4e0a5017c54162
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:13:49 2006 -0400

    sbp2: remove ohci1394 specific constant
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit fa9b73997cc621b9a15c96f07dda26775e61ac6a
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:13:42 2006 -0400

    ohci1394: make phys_dma parameter read-only
    
    Being able to switch physical DMA on and off at run time would be a nice
    feature but a PITA to support by highlevel drivers and userspace apps.
    Therefore allow it only to be set when the driver is being loaded.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 4611ed38030a2ce3661de999c3487e5a1eed0dc0
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:13:32 2006 -0400

    ohci1394: set address range properties
    
    This patch supplies the API extension introduced by patch
    "ieee1394: extend lowlevel API for address range properties"
    with proper addresses.
    
    Like in patch ''ohci1394, sbp2: fix "scsi_add_device failed"
    with PL-3507 based devices'', 1 TeraByte is chosen as physical
    upper bound.  This leaves a window for the middle address range.
    This choice is only relevant for adapters which actually have a
    programmable pysical upper bound register.  (Only ALi and
    Fujitsu adapters are known for this.  Most adapters have a fixed
    bound at 4 GB.)  The middle address range is suitable for posted
    writes.
    
    AFAIK, PCILynx does not support physical DMA nor posted writes,
    therefore no equivalent change in the pcilynx driver is necessary.
    There is also a driver for GP2Lynx, although not in mainline Linux.
    I assume this hardware does not support these OHCI features either.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 8aef63ff033fb0e7ba02d8e760d268eb0aafc58c
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:13:21 2006 -0400

    ieee1394: extend lowlevel API for address range properties
    
    Host adapter hardware imposes certain restrictions and features on
    address ranges.  Instead of hard-wire such ranges into the ieee1394
    core or even into protocol drivers, let lowlevel drivers specify
    these ranges via struct hpsb_host.
    
    Patch "ohci1394: set address range properties" must be applied too,
    else hpsb_allocate_and_register_addrspace() won't work properly.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 20f4578156995e95613497baf16d5b2d54921e5d
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:13:11 2006 -0400

    sbp2: log number of supported concurrent logins
    
    Since this is useful information, promote it from a debug macro to
    a regular log message.  The message appears only if the user set
    exclusive_login=0, therefore won't clutter the logs in normal use.
    Also update the comment on exclusive_login.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit fe42b05a9929e159355bde6025ae46db2ac88658
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:12:59 2006 -0400

    sbp2: remove manipulation of inquiry response
    
    This code became ineffective a few Linux releases ago and is not
    required anyway.
    
    Note from Christoph Hellwig: scsi_cmnd.request_buffer is always a
    scatterlist these days.  Checking random bites into it and then
    mangling the data in sbp2_check_sbp2_response will cause really bad
    memory corruption when you're not lucky enough to have the check not
    trigger by luck.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit eaf88450d21fc839c3e77fa6942b8d4192bdfe53
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:12:49 2006 -0400

    ieee1394: save RAM by using a single tlabel for broadcast transactions
    
    Since broadcast transactions are already complete when the request has
    been sent, the same transaction label can be reused all over again, see
    IEEE 1394 7.3.2.5 and 6.2.4.3.  Therefore we can reduce the footprint
    of struct hpsb_host by the size of one struct hpsb_tlabel_pool.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 647dcb5fae0ebb5da1272ed2773df0d3f152c303
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:12:37 2006 -0400

    ieee1394: support for slow links or slow 1394b phy ports
    
    Add support for the following types of hardware:
     + nodes that have a link speed < PHY speed
     + 1394b PHYs that are less than S800 capable
     + 1394b/1394a adapter cable between two 1394b PHYs
    Also, S1600 and S3200 are now supported if IEEE1394_SPEED_MAX is raised.
    
    A probing function is added to nodemgr's config ROM fetching routine
    which adjusts the allowable speed if an access problem was encountered.
    Pros and Cons of the approach:
     + minimum code footprint to support this less widely used hardware
     + nearly no overhead for unaffected hardware
     - ineffective before nodemgr began to read the ROM of affected nodes
     - ineffective if ieee1394 is loaded with disable_nodemgr=1
    The speed map CSRs which are published to the bus are not touched by the
    patch.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Cc: Hakan Ardo <hakan@debian.org>
    Cc: Calculex <linux@calculex.com>
    Cc: Robert J. Kosinski <robk@cmcherald.com>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 57fdb58fa5a140bdd52cf4c4ffc30df73676f0a5
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:12:21 2006 -0400

    ieee1394/ohci1394: CycleTooLong interrupt management
    
    This patch modifies the ohci1394.c file to enable and manage the "cycle too
    long" interrupt.
    If this interrupt occurs, the "LinkControl.CycleMaster" bit of the host
    controller is reseted. This implies, that the host controller does not send
    "cycle start" packet anymore freezing then the isochronous communication.
    The management of the interrupt added by the patch is that when the interrupt
    occurs, the OHCI irq handler prints a kernel log warning and then sets the
    "LinkControl.CycleMaster" bit again resuming the isochronous communication.
    
    Signed-off-by: Jean-Baptiste Mur <jeanbaptiste@maunakeatech.com>
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 7597028a833b6bfafae0a8fbc18992a278467adf
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:12:10 2006 -0400

    raw1394: fix whitespace after x86_64 compat patch
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit fa7614de60d10460a607c3ca22ea080d021c3fef
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:11:07 2006 -0400

    From: Arjan van de Ven <arjan@infradead.org>
    
    Semaphore to mutex conversion.
    
    The conversion was generated via scripts, and the result was validated
    automatically via a script as well.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: Ben Collins <bcollins@debian.org>
    Cc: Jody McIntyre <scjody@modernduck.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 4b9a334703cf99a1a5b9f64cf9f028e3e1ae91ff
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 18:10:18 2006 -0400

    sbp2: make TSB42AA9 workaround specific to Momobay CX-1
    
    The workarounds are not required for DViCO Momobay FX-3A and AFAIR not
    for Momobay CX-2. These contain an TSB42AA9A but feature the same
    firmware_revision value as the older DViCO Momobay CX-1.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit ff34d3bddf2a1d7ae1e96a25e73e16042778c4c4
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 17:53:31 2006 -0400

    ohci1394: Remove superfluous call to free_dma_rcv_ctx,
    spotted by Adrian Bunk. Also remove some superfluous comments.
    
    Signed-off-by: Stefan Richter <stefanr@s5r6.in-berlin.de>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit 9bb2bcdb4b6f9a04363c8ea4cf72c592d6c7af71
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 17:52:59 2006 -0400

    ieee1394: speed up of dma_region_sync_for_cpu
    
    when attempting to find the 'last' part of the dma region continue the
    search from where we left off, instead of starting the search over.
    
    Signed-off-by: Jim Westfall <jwestfall@surrealistic.net>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit f54b1bdff1b470ff4461de3a73a7ceaf3a52e10a
Author: Ben Collins <bcollins@ubuntu.com>
Date:   Mon Jun 12 17:52:16 2006 -0400

    video1394: be quiet
    
    When working with multiple cameras and intensive applications, our logs
    get flooded with video1394 information which isn't of much interest.
    
    Any objections to demoting these messages to debug messages?
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Ben Collins <bcollins@ubuntu.com>

commit e474c66b1c76f9755f5d6dd5bfe88ce5e0435184
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon Jun 12 22:10:22 2006 +0100

    [MMC] sdhci truncated pointer fix
    
    On 64-bit machines, we just lost the uppermost 32 bits.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Russell King <rmk+kernel@arm.linux.org.uk>

commit 821499a8241019be5591fad5ab925759fbcd9f32
Author: Mark Haverkamp <markh@osdl.org>
Date:   Mon Jun 12 10:53:58 2006 -0700

    [SCSI] aacraid: Fix return code interpretation
    
    Received from Mark Salyzyn
    
    clear_user return is 0 for success, the code fragment is written to
    assume that it is the count of the number of bytes zero'd.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit c5943d36aebb79589ac3983eec418bbeca897573
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Mon Jun 12 09:09:18 2006 -0500

    [SCSI] scsi_transport_sas: fix panic in sas_free_rphy
    
    This is a hold over from the end device/expander conversion.  Apparently
    the rphy list pointer is never initialised, so list_del() on the
    uninitialised pointer can panic the system
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f0eb62b81dd16bfc4034916418c3406ba20011e1
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 23:05:38 2006 +0900

    [PATCH] libata: add host_set->next for legacy two host_sets case, take #3
    
    For a legacy ATA controller, libata registers two separate host sets.
    There was no connection between the two hosts making it impossible to
    traverse all ports related to the controller.  This patch adds
    host_set->next which points to the second host_set and makes
    ata_pci_remove_one() remove all associated host_sets.
    
    * On device removal, all ports hanging off the device are properly
      detached.  Prior to this patch, ports on the first host_set weren't
      detached casuing oops on driver unloading.
    
    * On device removal, both host_sets are properly freed
    
    This will also be used by new power management code to suspend and
    resume all ports of a controller.  host_set/port representation will
    be improved to handle legacy controllers better and this host_set
    linking will go away with it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d01712698c7c52bc71f41192e864dccc90a1217d
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 22:51:14 2006 +0900

    [PATCH] libata: fix oops caused rescanning NULL sdev
    
    Depending on timing, ata_scsi_dev_rescan() might encounter a device
    which is enabled but not yet attached to sdev.  On such cases, the
    original code caused oops.  This patch makes ata_scsi_dev_rescan()
    rescan only device which are attached to sdevs.
    
    While at it, properly indent leading comment and add description about
    how it's synchronized with sdev attach/detach.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d4c85325a817d3351e61c4be64b437116e8483b4
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 18:45:55 2006 +0900

    [PATCH] sata_sil: update device hotplug handling, take #2
    
    SIEN on some 3112 controllers doesn't mask SATA IRQ properly.  IRQ
    stays asserted even after SIEN is masked and IRQ is acked.  Also, even
    while frozen, any SATA PHY event including hardreset raises SATA IRQ.
    Clearing SError seems to be the only way to deassert SATA IRQ.
    
    This patch makes sil_host_intr() clear SError on SATA IRQs and ignore
    SATA IRQs reported while frozen so that hardreset doesn't trigger
    hotplug event (which ends up hardresetting again).
    
    In such cases, the port still gets re-frozen to minimize the danger of
    screaming interrupts.  This results in one nil EH repeat on
    controllers with broken SIEN but other than that does no harm.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 430644312810645a6e05855db50a978df9ba3ad3
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Jun 12 18:38:21 2006 +1000

    powerpc: Remove unused paca->pgdir field
    
    The pgdir field in the paca was a leftover from the dynamic VSIDs
    patch, and is not used in the current kernel code.  This removes it.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7a0c58d0513c246ac5438ef4a55ce8b93395ae0e
Merge: 6218a76... 289a1e9...
Author: Paul Mackerras <paulus@samba.org>
Date:   Mon Jun 12 17:53:34 2006 +1000

    Merge branch 'merge'

commit aeb2ecd6096182cc080d37679080c0f088dcd4a4
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 14:11:43 2006 +0900

    [PATCH] libata: fast exit from EH while unloading
    
    Make EH exit fast if the port is being unloaded.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f9be7113b56eb5d013a611d9c65e8d1d2d3f7c94
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 14:11:01 2006 +0900

    [PATCH] libata: fix ATA_EH_REVALIDATE clearing
    
    ATA_EH_REVALIDATE should be cleared after all devices on the target
    port have been revalidated.  Fix ata_eh_revalidate_and_attach()
    accordingly.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 551e8889509c30cda31e464e5cbe7572c4e1febd
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 14:09:49 2006 +0900

    [PATCH] libata: fix comment above ata_exec_internal()
    
    Add RETURNS comment above ata_exec_internal() and kill extra blank
    line.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 23fa9618094975f803ed0c6a44604b16747b9637
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Jun 12 14:18:51 2006 +0900

    [PATCH] sata_sil: add controller unplug detection in sil_interrupt()
    
    Short-circuit interrupt handling if BMDMA2 is reported as 0xffffffff
    indicating device removal.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3b01b8af2414b6684051da4a1507dfacdbf24f86
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Jun 12 00:22:04 2006 -0400

    libata: fix build, by adding required workqueue member to port struct

commit 6344a423e5806d138923caa1d7699f3b7809fe43
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Jun 12 04:18:35 2006 +0000

    [CIFS] fix minor compile warning when config_cifs_weak_security is off
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 3057ac3c1a992ee135cbb7b7d1a12e58d81f0739
Author: zhao, forrest <forrest.zhao@intel.com>
Date:   Mon Jun 12 12:01:34 2006 +0800

    [PATCH] Snoop SET FEATURES - WRITE CACHE ENABLE/DISABLE command(v5)
    
    This patch makes libata snoop 'SET FEATURES - WRITE CACHE
    ENABLE/DISABLE' command, executing requisite revalidation processes
    to update cached data.
    
    Signed-off-by: Forrest Zhao <forrest.zhao@intel.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 39b07ce6d9f7cd4da8567baed844801e0aaa7b1a
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Jun 11 23:59:44 2006 -0400

    libata: more verbose request_irq() failure
    
    Suggested by Jarek P.

commit 233277cad6dacca6a8e53743641cf43ef7f37c4a
Author: Brian King <brking@us.ibm.com>
Date:   Wed Jun 7 11:25:31 2006 -0500

    [PATCH] libata: Setup nbytes in ata_sg_init_one
    
    Setup nbytes in ata_sg_init_one to the total transfer length
    of the command. This is needed by some HBAs that need to know
    the total transfer length of each command.
    
    Signed-off-by: Brian King <brking@us.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0638dec01e89059c853515ab71c55fd13ba5a8ea
Author: Herbert Valerio Riedel <hvr@gnu.org>
Date:   Thu Jun 1 09:41:04 2006 +0200

    [PATCH] net: au1000_eth: PHY framework conversion
    
    convert au1000_eth driver to use PHY framework and garbage collected
    functions and identifiers that became unused/obsolete in the process
    
    Signed-off-by: Herbert Valerio Riedel <hvr@gnu.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bd5d825c9434b83925a88bd30eb9eef51908a3c9
Author: Borislav Petkov <petkov@uni-muenster.de>
Date:   Sun Jun 11 23:17:01 2006 -0400

    libata: Adjust initial debugging levels through preprocessor defines.
    
    Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b47725743cc53203d275ede5c54985ad92c15f42
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue Jun 6 07:31:14 2006 +0400

    [PATCH] sata_sil24: endian anotations
    
    With help from Tejun Heo.
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit fec69a97489f961026e24536dbb7b86ac663948c
Merge: 1049cb4... 2f9719b...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Jun 11 23:04:37 2006 -0400

    Merge branch 'upstream-fixes' into upstream
    
    Conflicts:
    
    	drivers/scsi/sata_sil24.c

commit 96e672c79fb114ec38a868dc864e743205c24332
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jun 10 13:33:48 2006 -0700

    [PATCH] 3c5zz ethernet: fix section warnings
    
    Priority: not critical; makes init code discardable.
    
    Fix section mismatch warnings:
    WARNING: drivers/net/3c501.o - Section mismatch: reference to .init.text:el1_probe from .text between 'init_module' (at offset 0x812) and 'cleanup_module'
    WARNING: drivers/net/3c503.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x661) and 'cleanup_card'
    WARNING: drivers/net/3c505.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x228d) and 'cleanup_module'
    WARNING: drivers/net/3c507.o - Section mismatch: reference to .init.text:el16_probe from .text between 'init_module' (at offset 0xa99) and 'cleanup_module'
    WARNING: drivers/net/3c523.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x12e7) and 'cleanup_module'
    WARNING: drivers/net/3c527.o - Section mismatch: reference to .init.text:mc32_probe from .text between 'init_module' (at offset 0xd8d) and 'cleanup_module'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a2bd2ec8d1bef7479d26d375162963106757e8e9
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jun 10 13:30:10 2006 -0700

    [PATCH] smc ethernet: fix section mismatch warnings
    
    Priority: not critical; makes init code discardable.
    Removes one duplicate assignment.
    
    Fix section mismatch warnings:
    WARNING: drivers/net/smc-ultra.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x369) and 'cleanup_card'
    WARNING: drivers/net/smc-ultra32.o - Section mismatch: reference to .init.text:ultra32_probe from .text between 'init_module' (at offset 0x254) and 'cleanup_module'
    WARNING: drivers/net/smc9194.o - Section mismatch: reference to .init.text:smc_init from .text between 'init_module' (at offset 0x997) and 'cleanup_module'
    WARNING: drivers/net/smc9194.o - Section mismatch: reference to .init.data: from .data between 'smcdev.0' (at offset 0x44) and '__param_str_io'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 29f9f6d234753da97b74402f746981c63ec0b2f0
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jun 10 13:32:12 2006 -0700

    [PATCH] hp ethernet: fix section mismatches
    
    Priority: not critical; makes init code discardable.
    
    Fix section mismatch warnings:
    WARNING: drivers/net/hp-plus.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x387) and 'cleanup_card'
    WARNING: drivers/net/hp.o - Section mismatch: reference to .init.data: from .text between 'hp_init_card' (at offset 0x310) and 'init_module'
    WARNING: drivers/net/hp.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x367) and 'cleanup_card'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5d1f16c6c4d64d1e4f53e277e39c0ada89f00a48
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Sat Jun 10 12:13:35 2006 -0700

    [PATCH] Section mismatch in drivers/net/ne.o during modpost
    
    On Sat, 10 Jun 2006 14:11:42 +0200 (MEST) Mikael Pettersson wrote:
    
    > While compiling 2.6.17-rc6 for a 486 with an NE2000 ISA ethernet card, I got:
    >
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.data:isapnp_clone_list from .text between 'init_module' (at offset 0x158) and 'ne_block_input'
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.data:isapnp_clone_list from .text between 'init_module' (at offset 0x176) and 'ne_block_input'
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.data:isapnp_clone_list from .text between 'init_module' (at offset 0x183) and 'ne_block_input'
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.data:isapnp_clone_list from .text between 'init_module' (at offset 0x1ea) and 'ne_block_input'
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.data:isapnp_clone_list from .text between 'init_module' (at offset 0x251) and 'ne_block_input'
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x266) and 'ne_block_input'
    > WARNING: drivers/net/ne.o - Section mismatch: reference to .init.text: from .text between 'init_module' (at offset 0x29b) and 'ne_block_input'
    >
    > Not sure how serious this is; the driver seems to work fine later on.
    
    Doesn't look serious.  init_module() is not __init, but it calls
    some __init functions and touches some __initdata.
    
    BTW, I would be happy to see some consistent results from modpost
    section checking.  I don't see all of these warnings (I see only 1)
    when using gcc 3.3.6.  What gcc version are you using?
    Does that matter?  (not directed at anyone in particular)
    
    Patch below fixes it for me.  Please test/report.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 282f33c98618a3877043ec9dd5ac777c5e7c117d
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Thu Jun 8 22:19:44 2006 -0700

    [PATCH] e1000: prevent statistics from getting garbled during reset
    
    If a PCI bus error/fault triggers a PCI bus reset, attempts to get the
    ethernet packet count statistics from the hardware will fail, returning
    garbage data upstream.  This patch skips statistics data collection if the
    PCI device is not on the bus.
    
    This patch presumes that an earlier patch,
    [PATCH] PCI Error Recovery: e1000 network device driver
    has already been applied.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: John Ronciak <john.ronciak@intel.com>
    Cc: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Cc: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b89fa8b6d738d71c3a9eff584177bb7de13f33b9
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 8 22:19:41 2006 -0700

    [PATCH] smc911x Kconfig fix
    
    In file included from drivers/net/smc911x.c:84:
    drivers/net/smc911x.h:46:9: warning: "SMC_USE_16BIT" is not defined
    drivers/net/smc911x.h:60:9: warning: "SMC_USE_32BIT" is not defined
    drivers/net/smc911x.h:73:10: warning: "SMC_USE_PXA_DMA" is not defined
    drivers/net/smc911x.c: In function `smc911x_reset':
    drivers/net/smc911x.c:247: warning: implicit declaration of function `SMC_inl'
    drivers/net/smc911x.c:249: warning: implicit declaration of function `SMC_outl'
    
    Cc: Dustin McIntire <dustin@sensoria.com>
    Cc: Jeff Garzik <jeff@garzik.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1049cb478783c74ca8c99ef70e7d2bf920b9335b
Author: Tejun Heo <htejun@gmail.com>
Date:   Thu Jun 8 22:15:42 2006 -0700

    [PATCH] libata: add missing ->data_xfer for pdc_adma
    
    pdc_adma use libata-core PIO path but were left out
    during ->data_xfer conversion.  Initialize with proper callbacks.
    
    This patch is against the current libata-dev#ALL.  Controllers which
    implement their own PIO HSM (ahci and sil24) don't need ->data_xfer, so the
    above two are the only drivers which were left out during conversion.
    
    From: "Barry K. Nathan" <barryn@pobox.com>
    
    Signed-off-by: Barry K. Nathan <barryn@pobox.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c99ce7ee75db7836e2faba932affd2aadd1e942f
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:48:28 2006 -0400

    [PATCH] forcedeth: new device ids
    
    This patch contains new device ids for forcedeth ethernet.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ebe611a48378f8f5c347d86dc403a2d56c320f1c
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:48:24 2006 -0400

    [PATCH] forcedeth config: version
    
    This patch bumps up the version number for config support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 69fe3fd7b1adac55f794cb2b34cb1c13a0b19f05
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:48:18 2006 -0400

    [PATCH] forcedeth config: module parameters
    
    This patch adds (and modifies) module parameter support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9589c77a0de19c0c95370d5212eb1f9006d8abcb
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:48:13 2006 -0400

    [PATCH] forcedeth config: diagnostics
    
    This patch adds support for diagnostic tests through ethtool support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7a1854b7977d36360fde4e06c2d9cedcc3dd0933
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:48:08 2006 -0400

    [PATCH] forcedeth config: move functions
    
    This patch moves a few functions (no logic change) so that the next
    patch has these functions defined.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 52da35789c305f6f44d0e85b294a9845c1271898
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:48:04 2006 -0400

    [PATCH] forcedeth config: statistics
    
    This patch exposes hardware statistic counters through ethtool support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ed2616f621b41d3477d4f4ae2ba0e0a0e80bdce
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:47:59 2006 -0400

    [PATCH] forcedeth config: csum
    
    This patch allows for configurable rx and tx checksum offloads through
    ethtool support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c42d9df932ce3732044dc1394114380140ccffe0
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:47:52 2006 -0400

    [PATCH] forcedeth config: wol
    
    This patch fixes configuration bugs when modifying wol settings.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f9430a015a4331ba950eba1d7661dcd876c29f3c
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:47:47 2006 -0400

    [PATCH] forcedeth config: phy
    
    This patch fixes configuration bugs when modifying phy settings.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b6d0773fa7943fd93d564056395a7ff29b81213b
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:47:42 2006 -0400

    [PATCH] forcedeth config: flow control
    
    This patch allows for configurable flow control through ethtool support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit eafa59f6bcc6e46b756198a5388d195c4f0e671a
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:47:34 2006 -0400

    [PATCH] forcedeth config: ring sizes
    
    This patch allows for configurable ring size through ethtool support.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6a78814f6c9e35e9b4815c1973c988555212d6ef
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Sat Jun 10 22:47:26 2006 -0400

    [PATCH] forcedeth config: tso cleanup
    
    There are a series of patches for configuration support in forcedeth and
    one patch for device ids.
    
    This patch is a cleanup of the a previous TSO patch.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6218a761bbc27acc65248c80024875bcc06d52b1
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Jun 11 14:15:17 2006 +1000

    powerpc: add context.vdso_base for 32-bit too
    
    This adds a vdso_base element to the mm_context_t for 32-bit compiles
    (both for ARCH=powerpc and ARCH=ppc).  This fixes the compile errors
    that have been reported in arch/powerpc/kernel/signal_32.c.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9a9c77dc4c4eed9dfb74080e768c0b3c9d905496
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Jun 11 11:19:00 2006 +0900

    [PATCH] libata: cosmetic change in struct ata_port
    
    Cosmetic change in struct ata_port.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 0a1b622ef495d8ebba9ad8982414c6661c16b604
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Jun 11 11:01:38 2006 +0900

    [PATCH] libata: add missing finish_wait() call in ata_port_wait_eh()
    
    Add missing finish_wait() call after wait loop in ata_port_wait_eh().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 8d7feac3c7504425aaf61dc7d804685a6b89ee43
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 10 18:37:19 2006 +0200

    [SCSI] remove RQ_SCSI_* flags
    
    The RQ_SCSI_* flags are a vestiage of a long past history.  The EH code
    still sets them but we never make use of that information.  The other
    users is pluto.c which never had a chance to work but needs to be kept
    compiling to keep Davem happy, so copy over the definition there.
    
    We could probably get rid of RQ_ACTIVE/RQ_INACTIVE aswell with some
    work, there's only two more or less bogus looking uses in ubd and scsi.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit beb40487508290f5d6565598c60a3f44261beef2
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 10 18:01:03 2006 +0200

    [SCSI] remove scsi_request infrastructure
    
    With Achim patch the last user (gdth) is switched away from scsi_request
    so we an kill it now.  Also disables some code in i2o_scsi that was
    broken since the sg driver stopped using scsi_requests.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 1951d099dfd8fa529e86f4ac81d1a34554fbe302
Author: Michael Reed <mdr@sgi.com>
Date:   Wed May 24 15:08:10 2006 -0500

    [SCSI] mptfusion: change driver revision to 3.03.10
    
    Bump driver version number to reflect addition of various
    fibre channel patches.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d6be06c84da9626b10443c664ee55bda96fb3514
Author: Michael Reed <mdr@sgi.com>
Date:   Wed May 24 15:07:57 2006 -0500

    [SCSI] mptfc: abort of board reset leaves port dead requiring reboot
    
    The driver uses msleep_interruptible() in the code path responsible
    for resetting the card's ports via the lsiutil command.  If a
    <ctrl-c> is received during the reset it can leave a port in such
    a state that the only way to regain its use is to reboot the system.
    Changing from msleep_interruptible() to msleep() corrects the problem.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 419835e285c3e39cd62c8c8426da0aebea9cd89f
Author: Michael Reed <mdr@sgi.com>
Date:   Wed May 24 15:07:40 2006 -0500

    [SCSI] mptfc: fix fibre channel infinite request/response loop
    
    While doing board reset testing I was able to put the system in
    an infinite request/response loop between the scsi layer and
    mptscsih_qcmd() by aborting the reset.  This patch installs
    a "SETUP RESET" handler which calls fc_remote_port_delete()
    for all registered rports.  This blocks the target which
    prevents the loop.  Additionally, should the reset fail to
    complete, the transport will now terminate i/o to the target.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ca2f938efe71ca48cbc689db4df8d4f04b5d8f07
Author: Michael Reed <mdr@sgi.com>
Date:   Wed May 24 15:07:24 2006 -0500

    [SCSI] mptfc: set fibre channel fw target missing timers to one second
    
    The fibre channel firmware provides a timer which is similar in purpose
    to the fibre channel transport's device loss timer.  The effect of this
    timer is to extend the total time that a target will be missing beyond
    the value associated with the transport's timer.  This patch changes
    the firmware timer to a default of one second which significantly reduces
    the lag between when a target goes missing and the notification of the
    fibre channel transport.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 80d3ac77a84987d5132726f3d7cef342a280f7d9
Author: Michael Reed <mdr@sgi.com>
Date:   Wed May 24 15:07:09 2006 -0500

    [SCSI] mptfusion: move fc event/reset handling to mptfc
    
    Move fibre channel event and reset handling to mptfc.  This will
    result in fewer changes over time that need to be applied to
    either mptbase.c or mptscsih.c.
    
    Signed-off-by: Michael Reed <mdr@sgi.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit f0cd91a68acdc9b49d7f6738b514a426da627649
Merge: 60eef25... 128e6ce...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Sat Jun 10 13:47:26 2006 -0500

    Merge ../linux-2.6

commit 60eef25701d25e99c991dd0f4a9f3832a0c3ad3e
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Sat Jun 10 10:51:23 2006 -0500

    [SCSI] spi transport: don't allow dt to be set on SE or HVD buses
    
    This is really just a belt and braces test.  The standards require
    disks to respond DT not capable on a non-LVD bus ... however, not all
    disks follow the standards ...
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b2d8bfe18578c4e50e8ba52011c9b260a1b51dac
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Sat Jun 10 10:49:07 2006 -0500

    [SCSI] aic7xxx: expose the bus setting to sysfs
    
    Read the transciever register and display in the host transport
    properties.  I'm still not entirely sure what this does for multiple
    transciever adapters (like some 160 ones) however, I suspect it
    displays the transciever state of the switchable bus segment.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b9f051eb6cc013b90cb6062a1e2502e9c0adf0f4
Author: Arthur Othieno <apgo@patchbomb.org>
Date:   Thu Jun 8 22:23:45 2006 -0700

    [SCSI] scsi: remove Documentation/scsi/cpqfc.txt
    
    cpqfc driver flushed out with: [SCSI] remove broken driver cpqfc (commit
    ca61f10ab2b874b889e89d14ea09fae2dcccdca6) but somehow
    Documentation/scsi/cpqfc.txt managed to survive the blast.
    
    Signed-off-by: Arthur Othieno <apgo@patchbomb.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6391a11375de5e2bb1eb8481e54619761dc65d9f
Author: Tobias Klauser <tklauser@nuerscht.ch>
Date:   Thu Jun 8 22:23:48 2006 -0700

    [SCSI] drivers/scsi: Use ARRAY_SIZE macro
    
    Use ARRAY_SIZE macro instead of sizeof(x)/sizeof(x[0]) and remove
    duplicates of the macro.
    
    Signed-off-by: Tobias Klauser <tklauser@nuerscht.ch>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 9dc399de0840a478adb71278becf598d3ab3aacc
Author: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Date:   Fri Jun 9 22:25:23 2006 +0200

    [SCSI] Remove last page_address from dc395x.c
    
    Dynamically map scattergather buffer instead of using page_address().
    
    Signed-off-by: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ede1e6f8b43246a9796583346839669b1f4b77d4
Author: HighPoint Linux Team <linux@highpoint-tech.com>
Date:   Tue May 16 14:38:09 2006 +0800

    [SCSI] hptiop: HighPoint RocketRAID 3xxx controller driver
    
    HighPoint RocketRAID 3220/3320 series 8 channel PCI-X SATA RAID Host
    Adapters.
    
    Fixes from original submission:
    
    Merge Andrew Morton's patches:
    - Provide locking for global list
    - Fix debug printks
    - uninline function with multiple callsites
    - coding style fixups
    - remove unneeded casts of void*
    - kfree(NULL) is legal
    - Don't "succeed" if register_chrdev() failed - otherwise we'll later
      unregister a not-registered chrdev.
    - Don't return from hptiop_do_ioctl() with the spinlock held.
    - uninline __hpt_do_ioctl()
    
    Update for Arjan van de Ven's comments:
    - put all asm/ includes after the linux/ ones
    - replace mdelay with msleep
    - add pci posting flush
    - do not set pci command reqister in map_pci_bar
    - do not try merging sg elements in hptiop_buildsgl()
    - remove unused outstandingcommands member from hba structure
    - remove unimplemented hptiop_abort() handler
    - remove typedef u32 hpt_id_t
    
    Other updates:
    - fix endianess
    
    Signed-off-by: HighPoint Linux Team <linux@highpoint-tech.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cbd5f69b98bb5d7a0d207230bcf8fa51fca3f3cf
Author: Leubner, Achim <Achim_Leubner@adaptec.com>
Date:   Fri Jun 9 11:34:29 2006 -0700

    [SCSI] remove the scsi_request interface from the gdth driver
    
    Initial pass at converting the gdth driver away from the scsi_request
    interface so that the request interface can be removed post 2.6.18
    without breaking gdth.  Based on changes from Christoph Hellwig
    <hch@lst.de>
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 050613545b389825c1f5beb67fa2667b727f866d
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Jun 10 18:17:35 2006 +1000

    powerpc: Fix bug in iommu_alloc_coherent causing hang during boot
    
    In commit 8eb6c6e3b9c8bfed3d75536ab142d7694627c2e5, Christoph Hellwig
    made iommu_alloc_coherent able to do node-local allocations, but
    unfortunately got the order of the arguments to alloc_pages_node
    wrong.  This fixes it.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 566f81ca598f80de03e80a9a743e94b65b4e017e
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Sat Jun 10 09:15:27 2006 +0200

    kbuild: ignore make's built-in rules & variables
    
    kbuild does explicitly specify what to do in all cases, and each
    time make's built-in rules & variables has been used it has been a bug.
    So to speed up things and to avoid the hard-to-debug error situations
    ignore the built-in definitions.
    If any part of the kernel uses the built-in definitions the build will
    just stop there and it should be trivial to fix.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit ff5417107b7615fcef772cabcb717f4a715ffadc
Author: Nickolay <nickolay@protei.ru>
Date:   Fri Jun 9 21:24:14 2006 +0400

    kbuild: bugfix with initramfs
    
    This patch fix double inclusion of ramfs-input.
    
    Signed-off-by: Nickolay Vinogradov <nickolay@protei.ru>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 6449bd621ba51ef652ac5bda632eeabbc18dd296
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 9 20:45:06 2006 -0700

    kbuild: modpost build fix
    
    scripts/mod/modpost.c: In function `check_license':
    scripts/mod/modpost.c:1094: parse error before `const'
    scripts/mod/modpost.c:1095: `basename' undeclared (first use in this function)
    scripts/mod/modpost.c:1095: (Each undeclared identifier is reported only once
    scripts/mod/modpost.c:1095: for each function it appears in.)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f9068876f5ef583f8e9ebf4acd2ef5b35b113db9
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Jun 10 00:53:16 2006 +0100

    [MTD NAND] Fix s3c2410 NAND driver so it at least _looks_ like it compiles
    
    Fix the control bit handling so it even looks like it might work, too.
    Bad tglx. No biscuit.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b817f6feff4a565b08f0e699a5790b4008b8f494
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Fri Jun 9 21:53:55 2006 +0200

    kbuild: check license compatibility when building modules
    
    Modules that uses GPL symbols can no longer be build with kbuild,
    the build will fail during the modpost step.
    When a GPL-incompatible module uses a EXPORT_SYMBOL_GPL_FUTURE symbol
    then warn during modpost so author are actually notified.
    
    The actual license compatibility check is shared with the kernel
    to make sure it is in sync.
    
    Patch originally from: Andreas Gruenbacher <agruen@suse.de> and
    Ram Pai <linuxram@us.ibm.com>
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit bd5cbcedf446e2f37cf2a37f533a7e1d7dff9312
Author: Ram Pai <linuxram@us.ibm.com>
Date:   Thu Jun 8 22:12:53 2006 -0700

    kbuild: export-type enhancement to modpost.c
    
    This patch provides the ability to identify the export-type of each
    exported symbols in Module.symvers.
    
    NOTE: It updates the Module.symvers file with the additional
    information as shown below.
    
    0x0f8b92af      platform_device_add_resources   vmlinux EXPORT_SYMBOL_GPL
    0xcf7efb2a      ethtool_op_set_tx_csum          vmlinux EXPORT_SYMBOL
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Ram Pai <linuxram@us.ibm.com>
    Signed-off-by: Avantika Mathur <mathur@us.ibm.com>
    Signed-off-by: Valdis Kletnieks <valdis.kletnieks@vt.edu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit a487a8f7b6947f6445e5a1aa876522916785d5ec
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Jun 9 11:29:03 2006 -0700

    e1000: prevent statistics from garbling during bus resets
    
    If a PCI bus error/fault triggers a PCI bus reset, attempts to get
    the ethernet packet count statistics from the hardware will fail,
    returning garbage data upstream.  This patch skips statistics data
    collection if the PCI device is not on the bus.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Cc: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Acked-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 031ecc6de7d17752c57720a118a37e97a8454872
Author: Zach Brown <zach.brown@oracle.com>
Date:   Thu Jun 8 22:12:37 2006 -0700

    kbuild: add dependency on kernel.release to the package targets
    
    The binrpm-pkg target uses KERNELRELEASE when generated its .spec file.
    When binrpm-pkg was the first build target run in a tree it generated the
    .spec before kernel.release so the Version: tag in the .spec was empty.
    
    I don't know if this is the best fix, but binrpm-pkg works when we
    explicitly build kernel.release before descending into package-dir.
    
    Signed-off-by: Zach Brown <zach.brown@oracle.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c30a02e022576c1b49a6c9b39ad83559167399c6
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:50 2006 -0700

    kbuild: `make kernelrelease' speedup
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 14cdd3c402bf7c66f0bcd76e290f0770a54a4b21
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:51 2006 -0700

    kconfig: KCONFIG_OVERWRITECONFIG
    
    If you set KCONFIG_OVERWRITECONFIG in environment, Kconfig will not break
    symlinks when .config is a symlink to somewhere else.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 250725aa13f5c9595e5bc265ebed8471e816d8b4
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Thu Jun 8 22:12:50 2006 -0700

    kconfig: exit if no beginning filename
    
    If the beginning Kconfig file is missing, config segfaults so it might as
    well exit after the error message.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Cc: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit e55a3e8aed99626dd9a9a6732fc0eb5b75ef29bd
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:49 2006 -0700

    kconfig: remove leading whitespace in menu prompts
    
    This removes all the leading whitespace kconfig now warns about.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f001f7f89689d3226678ab3986f3a486f54aa069
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:48 2006 -0700

    kconfig: warn about leading whitespace for menu prompts
    
    Kconfig does its own indentation of menu prompts, so warn about and ignore
    leading whitespace.  Remove also a few unnecessary newlines after other
    warning prints.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit b65a47e1ac494777d853d7952cef611eedc22037
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:47 2006 -0700

    kconfig: jump to linked menu prompt
    
    If clicking on of the links, which leads to a visible prompt, jump to it in
    the symbol list.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit ab45d190fd4acf0b0e5d307294ce24a90a69cc23
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:47 2006 -0700

    kconfig: create links in info window
    
    Extend the expression print helper function to allow customization of the
    symbol output and use it to add links to the info window.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f24ff6bf8c903bc0c645bf87fbe87f9a6d9f634f
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri Jun 9 15:12:34 2006 +0100

    [MTD] Prepare physmap for 64-bit-resources
    
    Fallout from the incoming 64-bit-resource stuff:
    
    drivers/mtd/maps/physmap.c: In function 'physmap_flash_probe':
    drivers/mtd/maps/physmap.c:94: warning: format '%.8lx' expects type 'long
    unsigned int', but argument 2 has type 'resource_size_t'
    drivers/mtd/maps/physmap.c:94: warning: format '%.8lx' expects type 'long
    unsigned int', but argument 3 has type 'resource_size_t'
    
    Cc: Vivek Goyal <vgoyal@in.ibm.com>
    Cc: Greg Kroah-Hartman <gregkh@suse.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4ed0156f774cf50252e7f51032d1cc857fe86879
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Jun 9 15:06:42 2006 +0100

    [JFFS2] Fix more breakage caused by janitorial meddling.
    
    jffs2_zlib_exit() and free_workspaces() shouldn't be marked __exit because
    they get called in the error case from the init functions.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 28df955a2ad484d602314b30183ea8496a9aa34a
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:40:27 2006 -0400

    NLM: Fix reclaim races
    
    Currently it is possible for a task to remove its locks at the same time as
    the NLM recovery thread is trying to recover them. This quickly leads to an
    Oops.
    Protect the locks using an rw semaphore while they are being recovered.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5046791417dcac1ba126b77b8062af15a2f0b8e1
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:40:24 2006 -0400

    NLM: sem to mutex conversion
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 3134cbec5e172c3a86e2c3ef4af34b6cfd380bfa
Author: Marc Eshel <eshel@almaden.ibm.com>
Date:   Fri Jun 9 09:40:20 2006 -0400

    locks.c: add the fl_owner to nlm_compare_locks
    
    Add the fl_owner to NLM compare locks. Since two different client can
    present the same pid to the server it is not enough to distinguish locks
    from different clients. The fl_owner field is a pointer to the struct
    nlm_host which is unique for each client.
    
    Signed-off-by: Marc Eshel <eshel@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 81039f1f204a0fd2952112a240284e114f1a25e6
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:34 2006 -0400

    NFS: Display the chosen RPCSEC_GSS security flavour in /proc/mounts
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f7b422b17ee5ee4920e8ae24a6ad04bf3481ce72
Author: David Howells <dhowells@redhat.com>
Date:   Fri Jun 9 09:34:33 2006 -0400

    NFS: Split fs/nfs/inode.c
    
    As fs/nfs/inode.c is rather large, heterogenous and unwieldy, the attached
    patch splits it up into a number of files:
    
     (*) fs/nfs/inode.c
    
         Strictly inode specific functions.
    
     (*) fs/nfs/super.c
    
         Superblock management functions for NFS and NFS4, normal access, clones
         and referrals.  The NFS4 superblock functions _could_ move out into a
         separate conditionally compiled file, but it's probably not worth it as
         there're so many common bits.
    
     (*) fs/nfs/namespace.c
    
         Some namespace-specific functions have been moved here.
    
     (*) fs/nfs/nfs4namespace.c
    
         NFS4-specific namespace functions (this could be merged into the previous
         file).  This file is conditionally compiled.
    
     (*) fs/nfs/internal.h
    
         Inter-file declarations, plus a few simple utility functions moved from
         fs/nfs/inode.c.
    
         Additionally, all the in-.c-file externs have been moved here, and those
         files they were moved from now includes this file.
    
    For the most part, the functions have not been changed, only some multiplexor
    functions have changed significantly.
    
    I've also:
    
     (*) Added some extra banner comments above some functions.
    
     (*) Rearranged the function order within the files to be more logical and
         better grouped (IMO), though someone may prefer a different order.
    
     (*) Reduced the number of #ifdefs in .c files.
    
     (*) Added missing __init and __exit directives.
    
    Signed-Off-By: David Howells <dhowells@redhat.com>

commit 4e5ccf60c5aa79d325c123f47d288a068166f389
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:32 2006 -0400

    NFS: Fix typo in nfs_do_clone_mount()
    
    Doh!
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 860de07139980afe9856cc31eb5efbf321bbcea4
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:31 2006 -0400

    NFS: Fix compile errors introduced by referrals patches
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 87e4ba1a62af8e05ee3e8f8aaca622714386ffb0
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:30 2006 -0400

    NFSv4: Ensure that referral mounts bind to a reserved port
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 33a43f2802d8d7be3a9b541785c4ca9ad79e4310
Author: Andy Adamson <andros@citi.umich.edu>
Date:   Fri Jun 9 09:34:30 2006 -0400

    NFSv4: A root pathname is sent as a zero component4
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6b97fd3da1eab2cc490cfe884c7d4956522eaf8b
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:29 2006 -0400

    NFSv4: Follow a referral
    
    Respond to a moved error on NFS lookup by setting up the referral.
    Note: We don't actually follow the referral during lookup/getattr, but
    later when we detect fsid mismatch in inode revalidation (similar to the
    processing done for cloning submounts). Referrals will have fake attributes
    until they are actually followed or traversed.
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9cdb3883c38f883436a84c2353a4cf964ff890a2
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:28 2006 -0400

    NFSv4: Ensure client submounts when following a referral
    
    Set up mountpoint when hitting a referral on moved error by getting
    fs_locations.
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 61f5164cab1f6fdf06871ea9d60fe2f912184078
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:27 2006 -0400

    NFS: Expand clone mounts to include other servers
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c818ba43f9ca2e8214412ab5f126b1f436c35098
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:26 2006 -0400

    NFSv4: Create NFSv4 transport and client
    
    Move existing code into a separate function so that it can be also used by
    referral code.
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 830b8e33fe1900b87c8eb7ec5c646117a9f298d6
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:25 2006 -0400

    NFSv4: Define an fs_locations bitmap
    
    This is (similar to getattr bitmap) but includes fs_locations and
    mounted_on_fileid attributes. Use this bitmap for encoding in fs_locations
    requests.
    Note: We can probably do better by requesting locations as part of fsinfo
    itself.
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 361e624f6d8bfbeac53769603d995d47535cfd46
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:24 2006 -0400

    NFSv4: GETATTR attributes on referral
    
    Per referral draft, only fs_locations, fsid, and mounted_on_fileid can be
    requested in a GETATTR on referrals.
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 99baf625d3b9b8944920acc7c2d06079a37458c5
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:24 2006 -0400

    NFSv4: Decode mounted_on_fileid attribute in getattr.
    
    It is ignored if fileid is also requested. This will be used on referrals
    (fs_locations).
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 7aaa0b3bd4d215d9ce4d62b6c2043a63ba650f93
Author: Manoj Naik <manoj@almaden.ibm.com>
Date:   Fri Jun 9 09:34:23 2006 -0400

    NFSv4: convert fs-locations-components to conform to RFC3530
    
    Use component4-style formats for decoding list of servers and pathnames in
    fs_locations.
    
    Signed-off-by: Manoj Naik <manoj@almaden.ibm.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 683b57b435326eb512c7305892683b6205669448
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:22 2006 -0400

    NFSv4: Implement the fs_locations function call
    
    NFSv4 allows for the fact that filesystems may be replicated across
    several servers or that they may be migrated to a backup server in case of
    failure of the primary server.
    fs_locations is an NFSv4 operation for retrieving information about the
    location of migrated and/or replicated filesystems.
    
    Based on an initial implementation by Jiaying Zhang <jiayingz@citi.umich.edu>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8b23ea7bedb8b45a5bb56745fa3ff11018acf04e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:21 2006 -0400

    RPC: Allow struc xdr_stream to read the page section of an xdr_buf
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 51d8fa6a109589d522c18a8e9bf3fb167a91b1bc
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:20 2006 -0400

    NFS: Add timeout to submounts
    
    Make automounted partitions expire using the mark_mounts_for_expiry()
    function. The timeout is controlled via a sysctl.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 55a975937d40cac582e981ddc8ed783b3dcc043c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:19 2006 -0400

    NFS: Ensure the client submounts, when it crosses a server mountpoint.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8b4bdcf8995dd92b23d2ec22b32aee8fbbb50e1c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:19 2006 -0400

    NFS: Store the file system "fsid" value in the NFS super block.
    
    This should enable us to detect if we are crossing a mountpoint in the
    case where the server is exporting "nohide" mounts.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 8b512d9a88875affe584bb3d2a7a235f84343b9e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:18 2006 -0400

    VFS: Remove dependency of ->umount_begin() call on MNT_FORCE
    
    Allow filesystems to decide to perform pre-umount processing whether or not
    MNT_FORCE is set.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 5528f911b4c43a5de5da34bcbd7e3f2a62503617
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:17 2006 -0400

    VFS: Add shrink_submounts()
    
    Allow a submount to be marked as being 'shrinkable' by means of the
    vfsmount->mnt_flags, and then add a function 'shrink_submounts()' which
    attempts to recursively unmount these submounts.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 1f5ce9e93aa96a867f195ed45f6f77935175f12e
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:16 2006 -0400

    VFS: Unexport do_kern_mount() and clean up simple_pin_fs()
    
    Replace all module uses with the new vfs_kern_mount() interface, and fix up
    simple_pin_fs().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit bb4a58bf46473e3e83d84054bbc110db3a0f85e4
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Fri Jun 9 09:34:15 2006 -0400

    VFS: Add GPL_EXPORTED function vfs_kern_mount()
    
    do_kern_mount() does not allow the kernel to use private mount interfaces
    without exposing the same interfaces to userland. The problem is that the
    filesystem is referenced by name, thus meaning that it and its mount
    interface must be registered in the global filesystem list.
    
    vfs_kern_mount() passes the struct file_system_type as an explicit
    parameter in order to overcome this limitation.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit da6d503aa0a75ec44f17d985a2b500077e7f6a74
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu Jun 1 17:26:35 2006 -0400

    NFS: Remove nfs_delete_inode()
    
    Now that we have a real nfs_invalidate_page() to ensure that
    truncate_inode_pages() does the right thing when there are pending dirty
    pages, we can get rid of nfs_delete_inode().
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit d2ccddf042c403b146159beea438c6bfc4a445e2
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Wed May 31 01:13:38 2006 -0400

    NFS: Flesh out nfs_invalidate_page()
    
    In the case of a call to truncate_inode_pages(), we should really try to
    cancel any pending writes on the page.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit c04871e6345e4c6dfda564e302d7fd8c66420fd5
Author: J. Bruce Fields <bfields@fieldses.org>
Date:   Tue May 30 16:28:58 2006 -0400

    NFSv4: remove obviously bogus comparison from decode_getacl
    
    We just set *acl_len to zero, and attrlen is unsigned, so this comparison
    is clearly bogus.  I have no idea what I was thinking.
    
    Fixes a bug that caused getacl to fail over krb5p.
    
    Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 3873bc50e2271504da45799257f69222774d9550
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Sat May 27 03:31:12 2006 +0400

    NFSv4: really return status from decode_recall_args()
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 4814f56d19137b3b9fa8e00e1d332b3683b950de
Author: Andreas Gruenbacher <agruen@suse.de>
Date:   Thu May 25 01:41:03 2006 -0400

    NFSv3: Client-side nfsacl caching fix
    
    Fix two errors in the client-side acl cache: First, when nfs3_proc_getacl
    requests only the default acl of a file and the access acl is not cached
    already, a NULL access acl entry is cached instead of ERR_PTR(-EAGAIN)
    ("not cached").
    
    Second, update the cached acls in nfs3_proc_setacls: nfs_refresh_inode does
    not always invalidate the cached acls, and when it does not, the cached acls
    get out of sync.
    
    Signed-off-by: Andreas Gruenbacher <agruen@suse.de>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 1842bfb447cea8b344fd91af97fb6d604ecb11fa
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:41:01 2006 -0400

    NFS: Fix up inode revalidation accounting
    
    Currently, we are accounting for all calls to nfs_revalidate_inode(), but not
    to nfs_revalidate_mapping(), or nfs_lookup_verify_inode(), etc...
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 44b11874ff583b6e766a05856b04f3c492c32b84
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:40:59 2006 -0400

    NFS: Separate metadata and page cache revalidation mechanisms
    
    Separate out the function of revalidating the inode metadata, and
    revalidating the mapping. The former may be called by lookup(),
    and only really needs to check that permissions, ctime, etc haven't changed
    whereas the latter needs only done when we want to read data from the page
    cache, and may need to sync and then invalidate the mapping.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 38478b24e37587f1c4fedf8ac070ca54f052ed28
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:40:57 2006 -0400

    NFS: More page cache revalidation fixups
    
    Whenever the directory changes, we want to make sure that we always
    invalidate its page cache. Fix up update_changeattr() and
    nfs_mark_for_revalidate() so that they do so.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit f1bb0b92ba2cdfffe6e437f7a7da53138cf08d52
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:40:55 2006 -0400

    NFS: Fix page cache revalidation
    
    Fix up a bug in the handling of NFS_INO_REVAL_PAGECACHE: make sure that
    nfs_update_inode() clears it when we're sure we're not racing with other
    updates.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 0d0b5cb36faf7002a11736032313f06d6f3d881c
Author: Chuck Lever <cel@netapp.com>
Date:   Thu May 25 01:40:53 2006 -0400

    NFS: Optimize allocation of nfs_read/write_data structures
    
    Clean up use of page_array, and fix an off-by-one error noticed by Tom
    Talpey which causes kmalloc calls in cases where using the page_array
    is sufficient.
    
    Test plan:
    Normal client functional testing with r/wsize=32768.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit bf3fcf89552f24657bcfb6a9d73cd167ebb496c6
Author: Chuck Lever <cel@netapp.com>
Date:   Thu May 25 01:40:51 2006 -0400

    SUNRPC: NFS_ROOT always uses the same XIDs
    
    The XID generator uses get_random_bytes to generate an initial XID.
    NFS_ROOT starts up before the random driver, though, so get_random_bytes
    doesn't set a random XID for NFS_ROOT.  This causes NFS_ROOT mount points
    to reuse XIDs every time the client is booted.  If the client boots often
    enough, the server will start serving old replies out of its DRC.
    
    Use net_random() instead.
    
    Test plan:
    I/O intensive workloads should perform well and generate no errors.  Traces
    taken during client reboots should show that NFS_ROOT mounts use unique
    XIDs after every reboot.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit b85d88068444ae5dcb1639bcef770ccbf085dd4e
Author: Chuck Lever <cel@netapp.com>
Date:   Thu May 25 01:40:49 2006 -0400

    SUNRPC: select privileged port numbers at random
    
    Make the RPC client select privileged ephemeral source ports at
    random.  This improves DRC behavior on the server by using the
    same port when reconnecting for the same mount point, but using
    a different port for fresh mounts.
    
    The Linux TCP implementation already does this for nonprivileged
    ports.  Note that TCP sockets in TIME_WAIT will prevent quick reuse
    of a random ephemeral port number by leaving the port INUSE until
    the connection transitions out of TIME_WAIT.
    
    Test plan:
    Connectathon against every known server implementation using multiple
    mount points.  Locking especially.
    
    Signed-off-by: Chuck Lever <cel@netapp.com>
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 73a3d07c1082145a3b78407bb5252df290470c4c
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:40:47 2006 -0400

    NFS: Clean up inode metadata updates
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 9d1e9232223a7f065be7f956a7b749a4cbbbe16d
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:40:46 2006 -0400

    NFSv4: Some NFSv4 servers have broken behaviour for the change attribute
    
    The Linux NFSv4 server violates RFC3530 in that the change attribute is not
    guaranteed to be updated for every change to the inode. Our optimisation
    for checking whether or not the inode metadata has changed or not is broken
    too. Grr....
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 1de3fc12ea085690547a54b6efa01c7348f1cebd
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Date:   Thu May 25 01:40:44 2006 -0400

    NFS: Clean up and fix page zeroing when we have short reads
    
    The code that is supposed to zero the uninitialised partial pages when the
    server returns a short read is currently broken: it looks at the nfs_page
    wb_pgbase and wb_bytes fields instead of the equivalent nfs_read_data
    values when deciding where to start truncating the page.
    
    Also ensure that we are more careful about setting PG_uptodate
    before retrying a short read: the retry will change the nfs_read_data
    args.pgbase and args.count.
    
    Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

commit 6b81e80049a8815dc457fec4dadb6ae535c3b988
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Jun 7 17:10:09 2006 +1000

    [PATCH] powerpc: Cleanup hvc_rtas.c a little
    
    A few cleanups in hvc_rtas.c:
     1. Remove unused RTASCONS_PUT_ATTEMPTS
     2. Remove unused rtascons_put_delay.
     3. Use i as a loop counter like everyone else on earth.
     4. Remove pointless variables, eg. x = foo; if (x) return something_else;
     5. Whitespace cleanups and formatting.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b53744612f276ad20c5d7ef33ac991ec13101417
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed Jun 7 17:10:03 2006 +1000

    [PATCH] powerpc: Make rtas console _much_ faster
    
    Currently the hvc_rtas driver is painfully slow to use. Our "benchmark" is
    ls -R /etc, which spits out about 27866 characters. The theoretical maximum
    speed would be about 2.2 seconds, the current code takes ~50 seconds.
    
    The core of the problem is that sometimes when the tty layer asks us to push
    characters the firmware isn't able to handle some or all of them, and so
    returns an error. The current code sees this and just returns to the tty code
    with the buffer half sent.
    
    The khvcd thread will eventually wake up and try to push more characters, which
    will usually work because by then the firmware's had time to make room. But
    the khvcd thread only wakes up every 10 milliseconds, which isn't fast enough.
    
    So change the khvcd thread logic so that if there's an incomplete write we
    yield() and then immediately try writing again. Doing so makes POLL_QUICK and
    POLL_WRITE synonymous, so remove POLL_QUICK.
    
    With this patch our "benchmark" takes ~2.8 seconds.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e9370ae15dc2f8ba1e1889ce26f13cda565b6ecb
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 7 16:15:39 2006 +1000

    [PATCH] powerpc: Implement PR_[GS]ET_UNALIGN prctls for powerpc
    
    This gives the ability to control whether alignment exceptions get
    fixed up or reported to the process as a SIGBUS, using the existing
    PR_SET_UNALIGN and PR_GET_UNALIGN prctls.  We do not implement the
    option of logging a message on alignment exceptions.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fab5db97e44f76461f76b24adfa8ccb14d4df498
Author: Paul Mackerras <paulus@samba.org>
Date:   Wed Jun 7 16:14:40 2006 +1000

    [PATCH] powerpc: Implement support for setting little-endian mode via prctl
    
    This adds the PowerPC part of the code to allow processes to change
    their endian mode via prctl.
    
    This also extends the alignment exception handler to be able to fix up
    alignment exceptions that occur in little-endian mode, both for
    "PowerPC" little-endian and true little-endian.
    
    We always enter signal handlers in big-endian mode -- the support for
    little-endian mode does not amount to the creation of a little-endian
    user/kernel ABI.  If the signal handler returns, the endian mode is
    restored to what it was when the signal was delivered.
    
    We have two new kernel CPU feature bits, one for PPC little-endian and
    one for true little-endian.  Most of the classic 32-bit processors
    support PPC little-endian, and this is reflected in the CPU feature
    table.  There are two corresponding feature bits reported to userland
    in the AT_HWCAP aux vector entry.
    
    This is based on an earlier patch by Anton Blanchard.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 651d765d0b2c72d33430487c8b6ef64c60cd2134
Author: Anton Blanchard <anton@samba.org>
Date:   Wed Jun 7 16:10:19 2006 +1000

    [PATCH] Add a prctl to change the endianness of a process.
    
    This new prctl is intended for changing the execution mode of the
    processor, on processors that support both a little-endian mode and a
    big-endian mode.  It is intended for use by programs such as
    instruction set emulators (for example an x86 emulator on PowerPC),
    which may find it convenient to use the processor in an alternate
    endianness mode when executing translated instructions.
    
    Note that this does not imply the existence of a fully-fledged ABI for
    both endiannesses, or of compatibility code for converting system
    calls done in the non-native endianness mode.  The program is expected
    to arrange for all of its system call arguments to be presented in the
    native endianness.
    
    Switching between big and little-endian mode will require some care in
    constructing the instruction sequence for the switch.  Generally the
    instructions up to the instruction that invokes the prctl system call
    will have to be in the old endianness, and subsequent instructions
    will have to be in the new endianness.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 3b5e905ee3bd23e9311951890aba57a0dbc81ca4
Author: Benjamin Herrenschmidt <benh@au1.ibm.com>
Date:   Wed Jun 7 12:06:20 2006 +1000

    [PATCH] powerpc: Add udbg-immortal kernel option
    
    When debugging early kernel crashes that happen after console_init() and
    before a proper console driver takes over, we often have to go hack into
    udbg.c to prevent it from unregistering so we can "see" what is
    happening. This patch adds a kernel command line option "udbg-immortal"
    instead to avoid having to modify the kernel.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e78dbc800c37f035d476c4fdebdf43cdecfcb731
Author: Michael Neuling <mikey@neuling.org>
Date:   Thu Jun 8 14:42:34 2006 +1000

    [PATCH] powerpc: oprofile support for POWER6
    
    POWER6 moves some of the MMCRA bits and also requires some bits to be
    cleared each PMU interrupt.
    
    Signed-off-by: Michael Neuling <mikey@neuling.org>
    Acked-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8eb6c6e3b9c8bfed3d75536ab142d7694627c2e5
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jun 6 16:11:35 2006 +0200

    [PATCH] powerpc: node-aware dma allocations
    
    Make sure dma_alloc_coherent allocates memory from the local node.  This
    is important on Cell where we avoid going through the slow cpu
    interconnect.
    
    Note:  I could only test this patch on Cell, it should be verified on
    some pseries machine by those that have the hardware.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 318facbee05417fb432603a8309a10cdb942a87b
Author: Christoph Hellwig <hch@lst.de>
Date:   Tue Jun 6 16:09:39 2006 +0200

    [PATCH] powerpc: implement pcibus_to_node and pcibus_to_cpumask
    
    On 64bit powerpc we can find out what node a pci bus hangs off, so
    implement the topology.h macros that export this information.
    
    For 32bit this seems a little more difficult, but I don't know of 32bit
    powerpc NUMA machines either, so let's leave it out for now.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 507279db1819aacf4022e790b3fc8bc8cf56debf
Author: John Rose <johnrose@austin.ibm.com>
Date:   Mon Jun 5 16:31:48 2006 -0500

    [PATCH] powerpc: reorg RTAS delay code
    
    This patch attempts to handle RTAS "busy" return codes in a more simple
    and consistent manner.  Typical callers of RTAS shouldn't have to
    manage wait times and delay calls.
    
    This patch also changes the kernel to use msleep() rather than udelay()
    when a runtime delay is necessary.  This will avoid CPU soft lockups
    for extended delay conditions.
    
    Signed-off-by: John Rose <johnrose@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4a3ecc622465dbff7404139a8ad18bf4cb99f836
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 1 20:36:04 2006 -0700

    [PATCH] powerpc kbuild warning fix
    
    From: Andrew Morton <akpm@osdl.org>
    
    arch/powerpc/Kconfig:339:warning: leading whitespace ignored
    arch/powerpc/Kconfig:347:warning: leading whitespace ignored
    arch/powerpc/Kconfig:357:warning: leading whitespace ignored
    arch/powerpc/Kconfig:373:warning: leading whitespace ignored
    arch/powerpc/Kconfig:382:warning: leading whitespace ignored
    arch/powerpc/Kconfig:394:warning: leading whitespace ignored
    arch/powerpc/Kconfig:842:warning: leading whitespace ignored
    arch/powerpc/Kconfig:847:warning: leading whitespace ignored
    
    Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 87af41beb9b70f06f760fc973b793488f2825853
Author: Anton Blanchard <anton@samba.org>
Date:   Fri May 5 05:44:26 2006 +1000

    [PATCH] powerpc: add num_pmcs to 970MP cputable entry
    
    The 970MP cputable entry needs a num_pmcs entry for oprofile to work.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 03ac829b0046d5769eef3dd841cec33a211db96e
Author: Will Schmidt <will_schmidt@vnet.ibm.com>
Date:   Tue May 30 13:38:40 2006 -0500

    [PATCH] powerpc: fix of_parse_dma_window
    
    My js20 appears to lack the ibm,#dma- properties, and boot fails with a
    "Kernel panic - not syncing: iommu_init_table: Can't allocate 0 bytes"
    message.
    
    This adds a fallback to the "#address-cells" property in case the
    "#ibm,dma-address-cells" property is missing.   Tested on js20 and
    power5 lpar.
    
    Unless there is a more elegant solution... :-)
    
    Signed-off-by: Will Schmidt <willschm@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c5cf0e30bf3d8cb56758abb612827647c0a821cf
Author: Benjamin Herrenschmidt <benh@au1.ibm.com>
Date:   Tue May 30 14:14:19 2006 +1000

    [PATCH] powerpc: Fix buglet with MMU hash management
    
    Our MMU hash management code would not set the "C" bit (changed bit) in
    the hardware PTE when updating a RO PTE into a RW PTE. That would cause
    the hardware to possibly to a write back to the hash table to set it on
    the first store access, which in addition to being a performance issue,
    might also hit a bug when running with native hash management (non-HV)
    as our code is specifically optimized for the case where no write back
    happens.
    
    Thus there is a very small therocial window were a hash PTE can become
    corrupted if that HPTE has just been upgraded to read write, a store
    access happens on it, and that races with another processor evicting
    that same slot. Since eviction (caused by an almost full hash) is
    extremely rare, the bug is very unlikely to happen fortunately.
    
    This fixes by allowing the updating of the protection bits in the native
    hash handling to also set (but not clear) the "C" bit, and, in order to
    also improve performances in the general case, by always setting that
    bit on newly inserted hash PTE so that writeback really never happens.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a5bba930d802009c259e56c8d53086d96f63813b
Author: Benjamin Herrenschmidt <benh@kernel.crashing.org>
Date:   Tue May 30 13:51:37 2006 +1000

    [PATCH] powerpc vdso updates
    
    This patch cleans up some locking & error handling in the ppc vdso and
    moves the vdso base pointer from the thread struct to the mm context
    where it more logically belongs. It brings the powerpc implementation
    closer to Ingo's new x86 one and also adds an arch_vma_name() function
    allowing to print [vsdo] in /proc/<pid>/maps if Ingo's x86 vdso patch is
    also applied.
    
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 98a90c02792f22afd8161f96fc9b9f0f0eb0880e
Author: Renzo Davoli <renzo@cs.unibo.it>
Date:   Sun May 21 20:06:58 2006 +0200

    [PATCH] powerpc: enable PPC_PTRACE_[GS]ETREGS on ppc32
    
    I have tested PPC_PTRACE_GETREGS and PPC_PTRACE_SETREGS on umview.
    
    I do not understand why historically these tags has been defined as
    PPC_PTRACE_GETREGS and PPC_PTRACE_SETREGS instead of simply
    PTRACE_[GS]ETREGS. The other "originality" is that the address must be
    put into the "addr" field instead of the "data" field as stated in the
    manual.
    
    Signed-off-by: renzo davoli <renzo@cs.unibo.it>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b190f1138b0f30fbe837b3f09fb6ffdb2fc4da24
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:13:15 2006 +1000

    [XFS] Fix broken const use inside local suffix_strtoul routine.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26201a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 477829ef2e9e831c56c98948cfef6dfcec305c3a
Author: Mandy Kirkconnell <alkirkco@sgi.com>
Date:   Fri Jun 9 17:13:04 2006 +1000

    [XFS] Fix nused counter.  It's currently getting set to -1 rather than
    getting decremented by 1.  Since nused never reaches 0, the "if
    (!free->hdr.nused)" check in xfs_dir2_leafn_remove() fails every time and
    xfs_dir2_shrink_inode() doesn't get called when it should.  This causes
    extra blocks to be left on an empty directory and the directory in unable
    to be converted back to inline extent mode.
    
    SGI-PV: 951958
    SGI-Modid: xfs-linux-melb:xfs-kern:211382a
    
    Signed-off-by: Mandy Kirkconnell <alkirkco@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 421ad134583bff86c0ae068e2ddcb17f530957ab
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:12:46 2006 +1000

    [XFS] Fix mismerge of the fs_writable cleanup patch causing a freeze/thaw
    test hang.
    
    SGI-PV: 953563
    SGI-Modid: xfs-linux-melb:xfs-kern:26182a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 4d1a2ed3d8d6e306d20f5d99a5ae12ac4c8b787b
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:12:28 2006 +1000

    [XFS] Fix up debug code so that bulkstat wont generate thousands of
    fsstress warnings.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26111a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit a916e2bd15b7572d9e791ae2a9333f74175470cd
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:12:17 2006 +1000

    [XFS] Remove unused parameter from di2xflags routine.
    
    SGI-PV: 904192
    SGI-Modid: xfs-linux-melb:xfs-kern:26110a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 34327e138481137a81a2e33060b8eb0944013801
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:11:55 2006 +1000

    [XFS] Cleanup a missed porting conversion, and freezing.
    
    SGI-PV: 953338
    SGI-Modid: xfs-linux-melb:xfs-kern:26109a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 8285fb58e75bfdb447c7a2c533ec9efdb238f966
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:07:12 2006 +1000

    [XFS] Resolve a namespace collision on remaining vtypes for FreeBSD
    porters.
    
    SGI-PV: 953338
    SGI-Modid: xfs-linux-melb:xfs-kern:26108a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 67fcaa73adafb19139a7cd8ab133592b6a0a0901
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 17:00:52 2006 +1000

    [XFS] Resolve a namespace collision on vnode/vnodeops for FreeBSD porters.
    
    SGI-PV: 953338
    SGI-Modid: xfs-linux-melb:xfs-kern:26107a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b83bd1388133e914c38bd31d69bc90143e6ab10c
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 16:48:30 2006 +1000

    [XFS] Resolve a namespace collision on vfs/vfsops for FreeBSD porters.
    
    SGI-PV: 9533338
    SGI-Modid: xfs-linux-melb:xfs-kern:26106a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 7fc925fd6a4c24e1db879d227fc0a0f65a335aa1
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:46 2006 -0700

    kconfig: finer customization via popup menus
    
    This allows to configure every symbol list and info window separately via a
    popup menu, these settings are also separately saved and restored.  Cleanup
    the ConfigSettings class a bit to reduce the number of #ifdef.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 43bf612af2d4f2615dcbf86af8206e2f40231237
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:45 2006 -0700

    kconfig: Add search option for xconfig
    
    Implement a simple search request for xconfig.  Currently the capabilities are
    rather simple (the same as menuconfig).
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit face4374e288372fba67c865eb0c92337f50d5a4
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:45 2006 -0700

    kconfig: add defconfig_list/module option
    
    This makes it possible to change two options which were hardcoded sofar.
    1. Any symbol can now take the role of CONFIG_MODULES
    2. The more useful option is to change the list of default file names,
       which kconfig uses to load the base configuration if .config isn't
       available.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f6a88aa86027bdecfc74ef7c6bf6c68233e86bb3
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:44 2006 -0700

    kconfig: add symbol option config syntax
    
    This adds the general framework to the parser to define options for config
    symbols with a syntax like:
    
    config FOO
    	option bar[="arg"]
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit f1d28fb043b325dad8944647a52b20287e59d8a1
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:43 2006 -0700

    kconfig: move .kernelrelease
    
    This moves the .kernelrelease file into include/config directory.  Remove its
    generation from the config step, if the config step doesn't leave a proper
    .config behind, it triggers a call to silentoldconfig.  Instead its generation
    can be done via proper dependencies.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 2e3646e51b2d6415549b310655df63e7e0d7a080
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:42 2006 -0700

    kconfig: integrate split config into silentoldconfig
    
    Now that kconfig can load multiple configurations, it becomes simple to
    integrate the split config step, by simply comparing the new .config file with
    the old auto.conf (and then saving the new auto.conf).  A nice side effect is
    that this saves a bit of disk space and cache, as no data needs to be read
    from or saved into the splitted config files anymore (e.g.  include/config is
    now 648KB instead of 5.2MB).
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 669bfad906522e74ee8d962801552a8c224c0d63
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:42 2006 -0700

    kconfig: allow loading multiple configurations
    
    Extend conf_read_simple() so it can load multiple configurations.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 0c1822e6991a10da6dc391f0a2e2cf5fb2e31238
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:41 2006 -0700

    kconfig: allow multiple default values per symbol
    
    Extend struct symbol to allow storing multiple default values, which can be
    used to hold multiple configurations.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c0e150acde52e4661675539bf5323309270f2e83
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:40 2006 -0700

    kconfig: remove SYMBOL_{YES,MOD,NO}
    
    The SYMBOL_{YES,MOD,NO} are not really used anymore (they were more used be
    the cml1 converter), so just remove them.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit c955ccafc38e77312b4c65e5a70960080fb8a3f2
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:39 2006 -0700

    kconfig: fix .config dependencies
    
    This fixes one of the worst kbuild warts left - the broken dependencies used
    to check and regenerate the .config file.  This was done via an indirect
    dependency and the .config itself had an empty command, which can cause make
    not to reread the changed .config file.
    
    Instead of this we generate now a new file include/config/auto.conf from
    .config, which is used for kbuild and has the proper dependencies.  It's also
    the main make target now for all files generated during this step (and thus
    replaces include/linux/autoconf.h).
    
    This also means we can now relax the syntax requirements for the .config file
    and we don't have to rewrite it all the time, i.e.  silentoldconfig only
    writes .config now when it's necessary to keep it in sync with the Kconfig
    files and even this can be suppressed by setting the environment variable
    KCONFIG_NOSILENTUPDATE, so the update can (and must) be done manually.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit ddc97cacb310ad68483952e67764c4153c138ed2
Author: Roman Zippel <zippel@linux-m68k.org>
Date:   Thu Jun 8 22:12:38 2006 -0700

    kconfig: improve config load/save output
    
    During loading special case the first common case (.config), be silent about
    it and otherwise mark it as a change that requires saving.  Instead output
    that the file has been changed.  IOW if conf does nothing (special), it's
    silent.
    
    Signed-off-by: Roman Zippel <zippel@linux-m68k.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 932f2c323196c214e645d5a572a1d7b562c0f93f
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 15:29:58 2006 +1000

    [XFS] statvfs component of directory/project quota support, code
    originally by Glen.
    
    SGI-PV: 932952
    SGI-Modid: xfs-linux-melb:xfs-kern:26105a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b65745205fc00d8c7722ec74e9bd955f3861c7e2
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 15:29:40 2006 +1000

    [XFS] Portability changes: remove prdev, stick to one diagnostic
    interface.
    
    SGI-PV: 953338
    SGI-Modid: xfs-linux-melb:xfs-kern:26103a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 9c48876a05b6fbe41f1933fae3529c268d78cad0
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 15:29:22 2006 +1000

    [XFS] Remove dead code from come bulkstat paths.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26102a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ad723875ac238137207754d2633dd9c261c71558
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 15:29:12 2006 +1000

    [XFS] Fix a typo in a header file comment.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26101a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 7d4fb40ad7efe4586d1341d4731377fb4530836f
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 15:27:16 2006 +1000

    [XFS] Start writeout earlier (on last close) in the case where we have a
    truncate down followed by delayed allocation (buffered writes) - worst
    case scenario for the notorious NULL files problem.  This reduces the
    window where we are exposed to that problem significantly.
    
    SGI-PV: 917976
    SGI-Modid: xfs-linux-melb:xfs-kern:26100a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 59c1b082f5fff8269565039600a2ef18d48649b5
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:59:13 2006 +1000

    [XFS] Make the pflags test/set wrappers more legible for us mere humans.
    
    SGI-PV: 953338
    SGI-Modid: xfs-linux-melb:xfs-kern:26099a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit e109007461cddfc80a908f0b015f4eeb485e1d85
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:58:48 2006 +1000

    [XFS] Fix a buffer refcount leak in dir2 code on a forced shutdown.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26097a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 7d04a335b6b2d79e3742ffd28bd651204574e794
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:58:38 2006 +1000

    [XFS] Shutdown the filesystem if all device paths have gone.  Made
    shutdown vop flags consistent with sync vop flags declarations too.
    
    SGI-PV: 939911
    SGI-Modid: xfs-linux-melb:xfs-kern:26096a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit b76963fac4a17b661bad46e5a57b0f918c6f0cd1
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:58:20 2006 +1000

    [XFS] getattr can return an error code, so propogate any from lower
    layers.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26095a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 3d80ede4799889ede2aa785c2511aef3e78d5bb1
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:57:30 2006 +1000

    [XFS] Drop use of m_writeio_blocks when zeroing, its not meaningful
    anymore here.
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26094a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 72c93bcc6348a385416603459c2fdb4cf6c43687
Author: Ingo Molnar <mingo@elte.hu>
Date:   Fri Jun 9 14:57:01 2006 +1000

    [XFS] lock validator: lockdep: small xfs init_rwsem() cleanup
    init_rwsem() has no return value.  This is not a problem if init_rwsem()
    is a function, but it's a problem if it's a do { ...  } while (0) macro.
    (which lockdep introduces)
    
    SGI-PV: 904196
    SGI-Modid: xfs-linux-melb:xfs-kern:26082a
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 87c199c2a79220ac9e216e72d18a15148f84d9e0
Author: Tim Shimmin <tes@sgi.com>
Date:   Fri Jun 9 14:56:16 2006 +1000

    [XFS] Over zealous with doing endian conversions. We endian converted the
    logged version of di_next_unlinked which is actually always stored in the
    correct ondisk format. This was pointed out to us by Shailendra Tripathi.
    And is evident in the xfs qa test of 121.
    
    SGI-PV: 953263
    SGI-Modid: xfs-linux-melb:xfs-kern:26044a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 714250879ea61cdb1a39bb96fe9d934ee0c669a2
Author: David Chinner <dgc@sgi.com>
Date:   Fri Jun 9 14:55:52 2006 +1000

    [XFS] Stop a BUG from occurring in generic_delete_inode by preventing
    transaction completion from marking the inode dirty while it is being
    cleaned up on it's way out of the system.
    
    SGI-PV: 952967
    SGI-Modid: xfs-linux-melb:xfs-kern:26040a
    
    Signed-off-by: David Chinner <dgc@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 6d192a9b82212abf1e0e89da6e3a952afba7e4d6
Author: Tim Shimmin <tes@sgi.com>
Date:   Fri Jun 9 14:55:38 2006 +1000

    [XFS] inode items and EFI/EFDs have different ondisk format for 32bit and
    64bit kernels allow recovery to handle both versions and do the necessary
    decoding
    
    SGI-PV: 952214
    SGI-Modid: xfs-linux-melb:xfs-kern:26011a
    
    Signed-off-by: Tim Shimmin <tes@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d210a28cd851082cec9b282443f8cc0e6fc09830
Author: Yingping Lu <yingping@sgi.com>
Date:   Fri Jun 9 14:55:18 2006 +1000

    [XFS] In actual allocation of file system blocks and freeing extents, the
    transaction within each such operation may involve multiple locking of AGF
    buffer. While the freeing extent function has sorted the extents based on
    AGF number before entering into transaction, however, when the file system
    space is very limited, the allocation of space would try every AGF to get
    space allocated, this could potentially cause out-of-order locking, thus
    deadlock could happen. This fix mitigates the scarce space for allocation
    by setting aside a few blocks without reservation, and avoid deadlock by
    maintaining ascending order of AGF locking.
    
    SGI-PV: 947395
    SGI-Modid: xfs-linux-melb:xfs-kern:210801a
    
    Signed-off-by: Yingping Lu <yingping@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit d3446eac3f50dade2f09ed212b112609ee78fb33
Author: Barry Naujok <bnaujok@sgi.com>
Date:   Fri Jun 9 14:54:19 2006 +1000

    [XFS] Add degframentation exclusion support
    
    SGI-PV: 953061
    SGI-Modid: xfs-linux-melb:xfs-kern:25986a
    
    Signed-off-by: Barry Naujok <bnaujok@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit fbc1462bcb421620a04eb390fc79a2615c9d01d0
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:52:13 2006 +1000

    [XFS] Fix a noatime regression related to updating inode atime field on
    mmap only.
    
    SGI-PV: 952736
    SGI-Modid: xfs-linux-melb:xfs-kern:25922a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ba0b92d671c36cbebd66a306790c9b66a3224d83
Author: Nathan Scott <nathans@sgi.com>
Date:   Fri Jun 9 14:52:00 2006 +1000

    [XFS] Fix a comment typo, originally noticed by Ming Zhang.
    
    SGI-PV: 907752
    SGI-Modid: xfs-linux-melb:xfs-kern:25921a
    
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit fe6c1e7240e3a7cb600030f9c909273365d52a9d
Author: Mandy Kirkconnell <alkirkco@sgi.com>
Date:   Fri Jun 9 14:51:25 2006 +1000

    [XFS] Fix size argument in kmem_free().
    
    SGI-PV: 952291
    SGI-Modid: xfs-linux-melb:xfs-kern:209807a
    
    Signed-off-by: Mandy Kirkconnell <alkirkco@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 3f368a0d58cb8cadab298546286f94ca14220f65
Author: Olaf Weber <olaf@sgi.com>
Date:   Fri Jun 9 14:51:11 2006 +1000

    [XFS] Originally the ATTR_DMI flag also had the functionality of the
    ATTR_NOLOCK flag, but this was split off some time ago, as ATTR_DMI needed
    to be used separately.	Two asserts were added to guard correctness of the
    code during the transition.  These are no longer required.
    
    SGI-PV: 952145
    SGI-Modid: xfs-linux-melb:xfs-kern:209633a
    
    Signed-off-by: Olaf Weber <olaf@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 1d8daf06f67c8920a640eb61b30c3176ecc52405
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 9 14:50:37 2006 +1000

    [XFS] endianess annotations for xfs_dir_leaf_entry_t
    
    SGI-PV: 943272
    SGI-Modid: xfs-linux-melb:xfs-kern:25808a
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 8034fff39bb9430d807375ec7a04097efba42cd2
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 9 14:50:24 2006 +1000

    [XFS] endianess annotations for xfs_dir_leaf_hdr_t
    
    SGI-PV: 943272
    SGI-Modid: xfs-linux-melb:xfs-kern:25807a
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit ff9901c1e7c7be06a99c59cfc3133d2316cbc957
Author: Christoph Hellwig <hch@lst.de>
Date:   Fri Jun 9 14:48:37 2006 +1000

    [XFS] endianess annotations for xfs_dir2_data_entry_t
    
    SGI-PV: 943272
    SGI-Modid: xfs-linux-melb:xfs-kern:25806a
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: Al Viro <viro@www.linux.org.uk>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 3e57ecf640428c01ba1ed8c8fc538447ada1715b
Author: Olaf Weber <olaf@sgi.com>
Date:   Fri Jun 9 14:48:12 2006 +1000

    [XFS] Add parameters to xfs_bmapi() and xfs_bunmapi() to have them report
    the range spanned by modifications to the in-core extent map.  Add
    XFS_BUNMAPI() and XFS_SWAP_EXTENTS() macros that call xfs_bunmapi() and
    xfs_swap_extents() via the ioops vector. Change all calls that may modify
    the in-core extent map for the data fork to go through the ioops vector.
    This allows a cache of extent map data to be kept in sync.
    
    SGI-PV: 947615
    SGI-Modid: xfs-linux-melb:xfs-kern:209226a
    
    Signed-off-by: Olaf Weber <olaf@sgi.com>
    Signed-off-by: Nathan Scott <nathans@sgi.com>

commit 81c246691535ee3f865fbe6804b3be1b2c159e95
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 1 20:19:36 2006 -0700

    [AGPGART] alpha-agp warning fix
    
    drivers/char/agp/alpha-agp.c:138: warning: initialization from incompatible pointer type
    drivers/char/agp/alpha-agp.c:139: warning: initialization from incompatible pointer type
    
    Cc: Ivan Kokshaysky <ink@jurassic.park.msu.ru>
    Cc: Richard Henderson <rth@twiddle.net>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b07cd5181f3c8de8c28fdac7dbeec9e4220b8037
Author: Andrew Morton <akpm@osdl.org>
Date:   Thu Jun 1 20:19:35 2006 -0700

    [AGPGART] uninorth-agp warning fixes
    
    drivers/char/agp/uninorth-agp.c: In function `agp_uninorth_suspend':
    drivers/char/agp/uninorth-agp.c:332: warning: cast to pointer from integer of different size
    drivers/char/agp/uninorth-agp.c: In function `agp_uninorth_resume':
    drivers/char/agp/uninorth-agp.c:354: warning: cast from pointer to integer of different size
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit cac925a4aab1b7233d3beb591f53498816058a08
Merge: bcd618e... 6224e01...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 8 15:56:17 2006 -0400

    Merge branch 'upstream' of git://lost.foo-projects.org/~ahkok/git/netdev-2.6 into tmp

commit bcd618e4eac6fbf82de05d23c15ecb694c62b8af
Merge: ba9b28d... cb15f81...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 8 15:55:45 2006 -0400

    Merge branch 'upstream-fixes' into upstream
    
    Conflicts:
    
    	drivers/net/e1000/e1000_ethtool.c

commit ba9b28d19a3251bb1dfe6a6f8cc89b96fb85f683
Merge: 862fc81... 5c601d0...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 8 15:48:25 2006 -0400

    Merge branch 'upstream' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream

commit 862fc81b62c2d41a7e0b97b90844c80e59c7b0f1
Merge: 987024c... 2e84abe...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 8 15:46:38 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 987024ca9e11b5ea348e4014ac0e41fdee4f50f1
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Jun 6 10:11:15 2006 -0700

    [PATCH] skge: version 1.6
    
    Update version string.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 631ae320a4123898927ab1eb32ad81274a713488
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Jun 6 10:11:14 2006 -0700

    [PATCH] skge: dont allow bad hardware address from ROM
    
    Sometimes boards don't reset properly, and the address read out of the
    EEPROM is zero. Stop the insanity before the device gets registered.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7c442fa17eabd34301598acbca8ecb99daad6027
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Jun 6 10:11:13 2006 -0700

    [PATCH] skge: transmit complete via IRQ not NAPI
    
    The transmit side code has a number of ring problems that caused some
    of the Bugzilla reports. Rather than trying to fix the details, it is safer
    to rewrite the code that handles transmit completion and freeing.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9db96479b4e682b1bc3796873589db1f8d38a9d5
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Jun 6 10:11:12 2006 -0700

    [PATCH] skge: TX low water mark definition
    
    Consolidate all usage of ring low water mark to one value.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d85b514fd9aa95d2089fa16dccc25863fb2a766c
Author: Stephen Hemminger <shemminger@osdl.org>
Date:   Tue Jun 6 10:11:11 2006 -0700

    [PATCH] skge: use workq for PHY handling
    
    Since accessing the PHY can take 100's of usecs, use a work queue to
    allow spinning in outside of soft/hard irq.
    
    Signed-off-by: Stephen Hemminger <shemminger@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b10c066823c97c0e40989b2048540e85f5190501
Author: Brice Goglin <brice@myri.com>
Date:   Thu Jun 8 10:25:00 2006 -0400

    [PATCH] myri10ge update
    
    The following patch updates the myri10ge to 1.0.0, with the following changes:
    * Switch to dma_alloc_coherent API.
    * Avoid PCI burst when writing the firmware on chipset with unaligned completions.
    * Use ethtool_op_set_tx_hw_csum instead of ethtool_op_set_tx_csum.
    * Include linux/dma-mapping.h to bring DMA_32/64BIT_MASK on all architectures
      (was missing at least on alpha).
    * Some typo and warning fixes.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Andrew J. Gallatin <gallatin@myri.com>
    
     drivers/net/myri10ge/myri10ge.c |   57 +++++++++++++++++++-----------
     1 file changed, 37 insertions(+), 20 deletions(-)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d15a88fc21ef225768ce31be16edfc9c6e2e02e3
Merge: b534717... 1def630...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Jun 8 15:24:46 2006 -0400

    Merge branch 'master' into upstream

commit 909252d279dd5d47e44c125558e87bb44097289f
Author: Sam Ravnborg <sam@mars.ravnborg.org>
Date:   Thu Jun 8 20:37:30 2006 +0200

    kbuild: fix false section mismatch with ARCH=um build
    
    Ignoring references to .init.text, .exit.text from the .plt section brought
    the false positives down to two warnings for a defconfig build of ARCH=um
    on x86_64.
    
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 35899c57516be6eaa42cc27151767c52d75b2979
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Wed Jun 7 16:23:26 2006 -0700

    kbuild: ignore smp_locks section warnings from init/exit code
    
    Add ".smp_locks" section to whitelist as being safe from
    init and exit sections.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 1a0f3d422bb9ac959383a5ed1a4127f5900f56a8
Author: Mike Wolf <mjw@us.ibm.com>
Date:   Fri Jun 2 09:53:42 2006 -0500

    kbuild: fix make rpm for powerpc
    
    The default target for most powerpc platforms is zImage.  The
    zImage however is in arch/powerpc/boot and the mkspec script
    was set up to get the kernel from the top level of the kernel
    tree.  This patch copies vmlinux to arch/powerpc/boot and then
    copies the kernel to the tmp directory so the rpm can be made.
    
    Signed-off-by: Mike Wolf <mjw@us.ibm.com>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 9870a93d3118239fd7732a0f908e05f67b39a294
Author: Pavel Roskin <proski@gnu.org>
Date:   Thu Jun 1 21:28:50 2006 -0400

    kbuild: obj-dirs is calculated incorrectly if hostprogs-y is defined
    
    When Makefile.host is included, $(obj-dirs) is subjected to the
    addprefix operation for the second time.  Prefix only needs to be added
    to the newly added directories, but not to those that came from
    Makefile.lib.
    
    This causes the build system to create unneeded empty directories in the
    build tree when building in a separate directory.  For instance,
    lib/lib/zlib_inflate is created in the build tree.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: Sam Ravnborg <sam@ravnborg.org>

commit 6224e01dccf2543a8f8b4d825baf1510c79c2878
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Thu Jun 8 11:15:35 2006 -0700

    [DOC] Update bonding documentation with sysfs info
    
    Bonding documentation needed an update to include sysfs specific
    information. This patch adds information on how to change bonding
    parameters at runtime using the sysfs interface.
    
    Signed-off-by: Mitch Williams <mitch.a.williams@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 9026729bfeb4329a4edc01f427f01af7ee0a5273
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Thu Jun 8 09:30:24 2006 -0700

    e1000: add PCI Error Recovery
    
    Various PCI bus errors can be signaled by newer PCI controllers.
    This patch adds the PCI error recovery callbacks to the intel gigabit
    ethernet e1000 device driver. The patch has been tested, and appears
    to work well.
    
    Signed-off-by: Linas Vepstas <linas@linas.org>
    Acked-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 2cc304923d87403abc103a741382b9af08b6decc
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Thu Jun 8 09:30:18 2006 -0700

    e100: add PCI Error Recovery
    
    Various PCI bus errors can be signaled by newer PCI controllers.  This
    patch adds the PCI error recovery callbacks to the intel ethernet e100
    device driver. The patch has been tested, and appears to work well.
    
    Signed-off-by: Linas Vepstas <linas@linas.org>
    Acked-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 1717ffc58850dfa9e08b4977f8d0323cb3336863
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Jun 8 05:41:32 2006 +0000

    [CIFS] NTLMv2 support part 5
    
    NTLMv2 authentication (stronger authentication than default NTLM) which
    many servers support now works.  There was a problem with the construction
    of the security blob in the older code.  Currently requires
    	/proc/fs/cifs/Experimental to be set to 2
    and
    	/proc/fs/cifs/SecurityFlags to be set to 0x4004 (to require using
    	NTLMv2 instead of default of NTLM)
    
    Next we will check signing to make sure optional NTLMv2 packet signing also
    works.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 72109368de7aaa5d489d9ca4641f4a11a6fc7653
Author: Dennis Munsie <dmunsie@cecropia.com>
Date:   Wed Jun 7 18:53:38 2006 +1000

    Removed hard coded EDID buffer size.
    
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Acked-by: Antonino Daplas <adaplas@pol.net>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit f3ffb6814408f29817fc84d40ecc9c796acaa3ab
Merge: 5bafd76... 1def630...
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Jun 7 02:40:03 2006 +0000

    Merge with /pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit 5bafd76593f060540acbea3b61e3087e009aa269
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed Jun 7 00:18:43 2006 +0000

    [CIFS] Add support for readdir to legacy servers
    
    Fixes oops to OS/2 on ls and removes redundant NTCreateX calls to servers
    which do not support NT SMBs.  Key operations to OS/2 work.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 5d5ff44fe6775ccb922fd1f7d478b2ba9ca95068
Author: Christoph Hellwig <hch@lst.de>
Date:   Sat Jun 3 13:21:13 2006 +0200

    [SCSI] fix up request buffer reference in various scsi drivers
    
    Various scsi drivers use scsi_cmnd.buffer and scsi_cmnd.bufflen in their
    queuecommand functions.  Those fields are internal storage for the
    midlayer only and are used to restore the original payload after
    request_buffer and request_bufflen have been overwritten for EH.  Using
    the buffer and bufflen fields means they do very broken things in error
    handling.
    
    Signed-off-by: Christoph Hellwig <hch@lst.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e4a082c7c1f9a7b11fece6918e7ee5519b39ac46
Author: Sumant Patro <sumantp@lsil.com>
Date:   Tue May 30 12:03:37 2006 -0700

    [SCSI] megaraid_sas: switch fw_outstanding to an atomic_t
    
    This patch( originally submitted by Christoph Hellwig) removes
    instance_lock and changes fw_outstanding variable data type to
    atomic_t.
    
    Signed-off-by: Sumant Patro <Sumant.Patro@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit a8ee03441f66e0674e641c0cbe1a9534cdee968f
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Jun 5 23:34:19 2006 +0000

    [CIFS] NTLMv2 support part 4
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit f70e9c5f91f1d2d9ce79dc45221540e25b4e4ac0
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 30 01:04:51 2006 -0500

    [SCSI] iscsi: update version to 1.0-595
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3219e5294150aee7d389e19029f49b44fb6b5c9f
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 30 00:37:28 2006 -0500

    [SCSI] iscsi: fix writepsace race
    
    We can race and misset the suspend bit if iscsi_write_space is
    called then iscsi_send returns with a failure indicating
    there is no space.
    
    To handle this this patch returns a error upwards allowing xmitworker
    to decide if we need to try and transmit again. For the no
    write space case xmitworker will not retry, and instead
    let iscsi_write_space queue it back up if needed (this relies
    on the work queue code to properly requeue us if needed).
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 040515f53c09047c76ad074dc6a280984dc84b04
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 30 00:37:25 2006 -0500

    [SCSI] iscsi: return task found during search
    
    from davidw@netapp.com:
    
    remove task type should return a task on success.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 994442e807782d68bb1d3ae34044f95990411a22
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 30 00:37:22 2006 -0500

    [SCSI] iscsi: fix run list corruption
    
    from davidw@netapp.com:
    
    We must grab the session lock when modifying the running lists.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 67a611149b2ac5f4af1e36bfffbfe3198cd3712c
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 30 00:37:20 2006 -0500

    [SCSI] iscsi: don't switch states when just cleaning up
    
    If recovery failed or we are in recovery only overwrite the state
    if we are going to terminate the session or if we logged back in.
    
    STOP_CONN_SUSPEND and conn_cnt are not used. We only support
    a single connection session ATM, so cleanup that code while
    we are working around it.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5c601d0c942f5aaf7f3cff7e08f61047d70a964e
Author: Pavel Machek <pavel@suse.cz>
Date:   Mon Jun 5 16:13:30 2006 -0400

    [PATCH] wireless: move zd1201 where it belongs
    
    zd1201 is wifi adapter, yet it is hiding in drivers/usb/net where
    noone can find it. This moves Kconfig/Makefile zd1201 to the right
    place.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ff7562aaec1e68448888572033f072fc21ef2ac8
Author: Jason Lunz <lunz@falooley.org>
Date:   Sun Jun 4 23:05:49 2006 +0200

    [PATCH] bcm43xx: quiet down log spam from set_security
    
    The debug logging in bcm43xx_ieee80211_set_security() is pretty noisy.
    Make it more silent.
    
    Signed-off-by: Jason Lunz <lunz@falooley.org>
    Signed-off-by: Michael Buesch <mb@bu3sch.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit c4b3d1bb3206513d7f10cd60bbac97c82624c2d3
Author: Joseph Jezak <josejx@gentoo.org>
Date:   Thu Jun 1 17:12:49 2006 +0100

    [PATCH] softmac: unified capabilities computation
    
    This patch moves the capabilities field computation to a function for clarity
    and adds some previously unimplemented bits.
    
    Signed off by Joseph Jezak <josejx@gentoo.org>
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-By: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6ae15df16ef3dc3f5f043e94bb2cd4aa6c7f2aa8
Author: Daniel Drake <dsd@gentoo.org>
Date:   Thu Jun 1 15:37:22 2006 +0100

    [PATCH] softmac: Fix handling of authentication failure
    
    My router blew up earlier, but exhibited some interesting behaviour during
    its dying moments. It was broadcasting beacons but wouldn't respond to
    any authentication requests.
    
    I noticed that softmac wasn't playing nice with this, as I couldn't make it try
    to connect to other networks after it had timed out authenticating to my ill
    router.
    
    To resolve this, I modified the softmac event/notify API to pass the event
    code to the callback, so that callbacks being notified from
    IEEE80211SOFTMAC_EVENT_ANY masks can make some judgement. In this case, the
    ieee80211softmac_assoc callback needs to make a decision based upon whether
    the association passed or failed.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 76ea4c7f4cd319dee35934ecab57745feae58fa5
Author: Daniel Drake <dsd@gentoo.org>
Date:   Thu Jun 1 15:34:26 2006 +0100

    [PATCH] softmac: complete shared key authentication
    
    This patch finishes of the partially-complete shared key authentication
    implementation in softmac.
    
    The complication here is that we need to encrypt a management frame during
    the authentication process. I don't think there are any other scenarios where
    this would have to happen.
    
    To get around this without causing too many headaches, we decided to just use
    software encryption for this frame. The softmac config option now selects
    IEEE80211_CRYPT_WEP so that we can ensure this available. This also involved
    a modification to some otherwise unused ieee80211 API.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 47fbe1bf3980b41d2e18e3774e8e1094f716d2d1
Author: Toralf Foerster <toralf.foerster@gmx.de>
Date:   Mon Jun 5 15:48:31 2006 -0400

    [PATCH] ieee80211softmac_io.c: fix warning "defined but not used"
    
    Got this compiler warning and Johannes Berg <johannes@sipsolutions.net>
    wrote:
    
    Yeah, known 'bug', we have that code there but never use it. Feel free
    to submit a patch (to John Linville, CC netdev and softmac-dev) to
    remove it.
    
    Signed-off-by: Toralf Foerster <toralf.foerster@gmx.de>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 2a8063403112030f1748e207d97d4f8654754dff
Author: Pavel Machek <pavel@ucw.cz>
Date:   Fri May 26 22:07:48 2006 +0200

    [PATCH] usb wifi: zd1201 cleanups
    
    Cleanup coding style and other small stuff in zd1201. No real code
    changes.
    
    Signed-off-by: Pavel Machek <pavel@suse.cz>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit f6882a0688ea83db5fc2f3491ac9fcdce0834cc7
Merge: dea58b8... ea9a771...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Jun 5 15:31:57 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 6ccf58ab22499139bacc683493c9fd70af55adbb
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jun 5 15:25:20 2006 -0400

    [CPUFREQ] sets nforce2 minimum PLL divider to 2.
    
    Sets minimum PLL divider to 2.
    No negative impact when tested with two nForce2 based boards.
    
    Alexander Choporov reported (06/01/06) that xdiv = 1 does not work on his
    Abit NF7S2. Although there shouldn't be much cases that lead to xdiv = 1.
    
    (Updates also the (C) year)
    
    Signed-off-by: Sebastian Witt <se.witt@gmx.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2f3243aebd8df4d9eecaeca04bbff6c7dbfb2142
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Jun 5 20:19:05 2006 +0100

    [RBTREE] Switch rb_colour() et al to en_US spelling of 'color' for consistency
    
    Since rb_insert_color() is part of the _public_ API, while the others are
    purely internal, switch to be consistent with that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit dea58b80f2625d3712645fb6ff0af45866cedaae
Merge: b1141f6... 672c610...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon Jun 5 14:42:27 2006 -0400

    Merge branch 'from-linus' into upstream

commit 436fe7b8b4a5016ef1fcb32bff77bde84003e15d
Author: Dave Jones <davej@redhat.com>
Date:   Mon Jun 5 14:03:50 2006 -0400

    [CPUFREQ] Make powernow-k7 work on SMP kernels.
    Even though powernow-k7 doesn't work in SMP environments,
    it can work on an SMP configured kernel if there's only
    one CPU present, however recalibrate_cpu_khz was returning
    -EINVAL on such kernels, so we failed to init the cpufreq driver.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 6d027cfdb19c26df3151a519ed55acfe2c4cb7c3
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Jun 5 16:26:05 2006 +0000

    [CIFS] NTLMv2 support part 3
    
    Response struct filled in exacty for 16 byte hash which we need to check
    more to make sure it works.
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 48ce8b056c88920c8ac187781048f5dae33c81b9
Author: Evgeniy Dushistov <dushistov@mail.ru>
Date:   Mon Jun 5 08:21:03 2006 -0500

    JFS: commit_mutex cleanups
    
    I look at code, and see that
    1)locks wasn't release in the opposite order in which they were taken
    2)in jfs_rename we lock new_ip, and in "error path" we didn't unlock it
    3)I see strange expression: "! !"
    
    May be this worth to fix?
    
    Signed-off-by: Evgeniy Dushistov <dushistov@mail.ru>
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>

commit f64b23ae4aef9f69d71ea41529a188acd5ab4930
Author: Steve French <sfrench@us.ibm.com>
Date:   Mon Jun 5 05:27:37 2006 +0000

    [CIFS] NTLMv2 support part 2
    
    Still need to fill in response structure and check that hash works
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 3cbd5b32cb625f5c0f1b1476d154fac873dd49ce
Author: Anssi Hannula <anssi.hannula@gmail.com>
Date:   Mon Jun 5 00:18:43 2006 -0400

    Input: fix accuracy of fixp-arith.h
    
    Add the value of cos(90) = 0 to the table.  This also moves the results so
    that sin(x) == sin(180-x) is true as expected.
    
    Signed-off-by: Anssi Hannula <anssi.hannula@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit fe65b97a5885a84baa103d7213754ff29e8f872f
Author: Anssi Hannula <anssi.hannula@gmail.com>
Date:   Mon Jun 5 00:18:21 2006 -0400

    Input: iforce - use ENOSPC instead of ENOMEM
    
    Use -ENOSPC instead of -ENOMEM when the iforce device doesn't have
    enough free memory for the new effect.  All other drivers are using
    -ENOSPC, so this makes the behaviour coherent.
    
    Signed-off-by: Anssi Hannula <anssi.hannula@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit 0f5e560e4523e15f33922de5becd024ccaaff76c
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Mon Jun 5 00:18:00 2006 -0400

    Input: constify drivers/char/keyboard.c
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dmitry Torokhov <dtor@mail.ru>

commit b10eec2246690f069febd3aa9578decd5ffb3f5b
Author: Jan Beulich <jbeulich@novell.com>
Date:   Fri Apr 28 13:47:13 2006 +0200

    [CPUFREQ] cpufreq core {d,}printk adjustments
    
    Remove KERN_* suffixes from some cpufreq driver's dprintk-s.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8c362a5d62c98ee117b229c3555f402e72f5c21e
Author: Jan Beulich <jbeulich@novell.com>
Date:   Wed Apr 26 15:41:22 2006 +0200

    [CPUFREQ] dprintk adjustments to cpufreq-speedstep-centrino
    
    Remove KERN_* suffixes from some Centrino cpufreq driver's dprintk-s.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 0fc25dd17eaea64b21612f8e2816a4695b418100
Author: Jan Beulich <jbeulich@novell.com>
Date:   Wed Apr 26 15:40:02 2006 +0200

    [CPUFREQ] dprintk adjustments to cpufreq-nforce2
    
    Remove KERN_* suffixes from some NForce2 cpufreq driver's dprintk-s.
    
    Signed-off-by: Jan Beulich <jbeulich@novell.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 1f729e0660f974cec1f0f7f4fba03ea4c2c4b9a9
Author: Dave Jones <davej@redhat.com>
Date:   Sun Jun 4 19:37:58 2006 -0400

    [CPUFREQ] Prepare powernow-k8 for future CPUs.
    
    Forthcoming AMD products will use a different algorithm for transitioning
    pstates than the current generation Opteron products do.  The attached
    patch allows the powernow-k8 driver to work with those products.
    
    Signed-off-by: Mark Langsdorf <mark.langsdorf@amd.com>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 9312f6754d4b2d3ce27c21b16fb92923ce92a411
Author: Steve French <sfrench@us.ibm.com>
Date:   Sun Jun 4 22:21:07 2006 +0000

    [CIFS] Fix mask so can set new cifs security flags properly
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 254e55ed03e2e8d23089b4a468eec2fd2e1ead9b
Author: Steve French <sfrench@us.ibm.com>
Date:   Sun Jun 4 05:53:15 2006 +0000

    CIFS] Support for older servers which require plaintext passwords - part 2
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit d27317657ae18cfbc45def8f566e4c3ed1f51d74
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Jun 3 00:27:53 2006 +0100

    Switch to __s32 types in joystick.h instead of C99 types for consistency.
    
    The rest of the file uses these types instead of C99 types.
    
    Acked-by: Dmitry Torokhov <dtor@mail.ru>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3bcc86f507f5a0b6f5bfa312f37ec33711558acb
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Jun 3 00:25:50 2006 +0100

    [JFFS2] Remove stray __exit from jffs2_compressors_exit()
    
    It's used from the initfunc in case of failure too. We could actually do
    with an '__initexit' for this kind of thing -- when built in to the
    kernel, it could do with being dropped with the init text. We _could_
    actually just use __init for it, but that would break if/when we start
    dropping init text from modules. So let's just leave it as it was for now,
    and mutter a little more about random 'janitorial' fixes from people who
    aren't paying attention to what they're doing.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit bdc4bf6e8ac8cc29c61c2f0dc61d9776ef9a8ed4
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Jun 2 22:57:13 2006 +0000

    [CIFS] Support for older servers which require plaintext passwords
    
    disabled by default, but can be enabled via proc for servers which
    require such support.  Also includes support for setting security
    flags for cifs.  See fs/cifs/README
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 43411d699e8cf3293674da558d31a02e0012aa9d
Author: Steve French <sfrench@us.ibm.com>
Date:   Fri Jun 2 18:17:11 2006 +0000

    [CIFS] Fix mapping of old SMB return code Invalid Net Name so it is
    recognized on mount
    
    the old mapping of this was to ENODEV (instead of ENXIO) - but
    ENODEV is what mount returns when the cifs driver will not load
    so change this to map to ENXIO (which was what the equivalent
    condition returned for mapping errors from more modern servers)
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 42adb53cb36d19862a02d3087e2e3d9dab39e5fa
Author: Jeremy Fitzhardinge <jeremy@goop.org>
Date:   Thu Jun 1 17:41:00 2006 -0400

    ACPI: Allow a WAN module enable/disable on a Thinkpad X60.
    
    The WAN (Sierra Wireless EV-DO) module is very similar to the
    Bluetooth module.  It appears on the USB bus when enabled.  It can be
    controlled via hot key, or directly via ACPI.  This change enables
    direct control via ACPI.
    
    I have tested it on my Lenovo Thinkpad X60; I guess it will probably
    work on other Thinkpad models which come with this module installed.
    
    Signed-off-by: Jeremy Fitzhardinge <jeremy@goop.org>
    Ack'd by: Borislav Deianov <borislav@users.sf.net>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7a0d22317614ee8e2598feafd4812e33be17f421
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Jun 1 19:44:37 2006 +0000

    [CIFS] Missing brace

commit 273d81d6ada951ba99f10b755d6f849dbb352730
Author: Dave Kleikamp <shaggy@austin.ibm.com>
Date:   Thu Jun 1 19:41:23 2006 +0000

    [CIFS] Do not overwrite aops
    
    cifs should not be overwriting an element of the aops structure, since the
    structure is shared by all cifs inodes.  Instead define a separate aops
    structure to suit each purpose.
    
    I also took the liberty of replacing a hard-coded 4096 with PAGE_CACHE_SIZE
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
    Signed-off-by: Steven French <sfrench@us.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 3856a9d443ee24248683c415e535f7a2b0fed0f3
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Jun 1 19:38:46 2006 +0000

    [CIFS] Fix minor build breaks due to cifs kconfig issues
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 7c7b25bc8e392aea781324efa771bc191377b876
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Jun 1 19:20:10 2006 +0000

    [CIFS] Support for setting up SMB sessions to legacy lanman servers part 2

commit 911cb74bb9e77e40749abc2fca6fe74d87d940f3
Author: Dave Jones <davej@redhat.com>
Date:   Thu Jun 1 11:38:28 2006 -0400

    [CPUFREQ] Make acpi-cpufreq 'sticky'.
    
    This prevents annoying messages being printed when it gets
    loaded on a machine that doesn't have support scaling via ACPI.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 7b1c6ca73aa102e9dde5098f58c523bca0f8e2c3
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Jun 1 12:49:30 2006 +0100

    Add <sys/types.h> to headers included for userspace in <linux/input.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>

commit c029cc66cb3d83f70c02e0c182f0eed1419f8020
Merge: 0a9cb46... ba8f5ba...
Author: Paul Mackerras <paulus@samba.org>
Date:   Thu Jun 1 19:05:23 2006 +1000

    Merge branch 'merge'

commit 9c53588ec96d85f82e9bf3fb1af7cca31056e940
Author: Steve French <sfrench@us.ibm.com>
Date:   Thu Jun 1 05:09:10 2006 +0000

    [CIFS] Missing include shows up on some architectures
    
    Signed-off-by: Steve French <sfrench@us.ibm.com>

commit 3979877e5606ecc58c5a31bd0078c6d80ba9cbe7
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed May 31 22:40:51 2006 +0000

    [CIFS] Support for setting up SMB sessions to legacy lanman servers

commit 75de7d55f8e148848cadefc92140d8f083d13924
Author: Dave Jones <davej@redhat.com>
Date:   Wed May 31 16:13:14 2006 -0400

    [CPUFREQ] Remove strange No-op from longrun.c
    
    ORing something with zero is meaningless.
    
    ACKed-by: Dominik Brodowski <linux@dominikbrodowski.net>
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 26a21b980b1897b11fd7f9ba4bf6060c9e15df10
Author: Steve French <sfrench@us.ibm.com>
Date:   Wed May 31 18:05:34 2006 +0000

    [CIFS] Cleanup extra whitespace in dmesg logging. Update cifs change log

commit 9bf0a28c9a24e2cee5deecf89d118254374c75ba
Author: Vivek Goyal <vgoyal@in.ibm.com>
Date:   Thu Apr 27 02:33:13 2006 -0700

    [SCSI] kdump: mpt fusion driver initialization failure fix
    
    MPT fusion driver initialization fails while second kernel is booting,
    after a system crash (if kdump kernel is configured).  Oops message is
    pasted below.
    
    *****************************************************************************
    Fusion MPT base driver 3.03.08
    Copyright (c) 1999-2005 LSI Logic Corporation
    Fusion MPT SAS Host driver 3.03.08 ACPI: PCI Interrupt 0000:01:00.0[A] -> Link [LNKA] -> GSI 5 (level, low) -> IRQ 5
    mptbase: Initiating ioc0 bringup
    BUG: unable to handle kernel paging request at virtual address 00002608
     printing eip:
    c11782fd
    *pde = 00000000
    Oops: 0000 [#1]
    Modules linked in:
    CPU:    0
    EIP:    0060:[<c11782fd>]    Not tainted VLI
    EFLAGS: 00010046   (2.6.17-rc1-16M #2)
    EIP is at mptscsih_io_done+0x27/0x3a3
    eax: c4fed000   ebx: c4fed000   ecx: 00002600   edx: 00000298
    esi: c11782d6   edi: 00002600   ebp: 00000000   esp: c1332f74
    ds: 007b   es: 007b   ss: 0068
    Process swapper (pid: 0, threadinfo=c1332000 task=c128f9c0) Stack: <0>0000006c 00000020 00000298 00002600 c4fed000 c4fed000 c11782d6 0000260 0
           00000000 c1172c49 c4fed000 c1305b40 00000005 00000000 c1172d75 c48877e0
           c1029687 00000000 c1307fb8 00000000 c1305a00 00000001 00000000 c1307fb8
    Call Trace:
     <c11782d6> mptscsih_io_done+0x0/0x3a3   <c1172c49> mpt_turbo_reply+0xbb/0xd3
     <c1172d75> mpt_interrupt+0x22/0x2b   <c1029687> misrouted_irq+0x63/0xcb
     <c10297b3> note_interrupt+0x43/0x98   <c10292f9> __do_IRQ+0x68/0x8f
     <c1003fac> do_IRQ+0x36/0x4e
     =======================
     <c1002aa6> common_interrupt+0x1a/0x20   <c1001150> mwait_idle+0x1a/0x2a
     <c10010bf> cpu_idle+0x40/0x5c   <c1308610> start_kernel+0x17a/0x17c Code: 5e 5f 5d c3 55 89 cd 57 56 53 83 ec 14 89 54 24 0c 89 44 24 10 8b 90 cc 00  00 00 8b 4c 24 0c 81 c2 98 02 00 00 85 ed 89 54 24 08 <0f> b7 79 08 89 fe 74 04  0f b7 75 08 66 39 f7 75 0d 8b 44 24 0c
    *******************************************************************************
    
    o Kdump capture kernel boot fails during initialization of MPT fusion driver.
      (LSI Logic / Symbios Logic SAS1064E PCI-Express Fusion-MPT SAS (rev 01))
    
    o Problem is easily reproducible, if system crashed while some disk activity
      like cp operation was going on.
    
    o After a system crash, devices are not shutdown and capture kernel starts
      booting while skipping BIOS. Hence underlying device is left in operational
      state. In this case scsi contoller was left with interrupt line asserted
      reply FIFO was not empty. When driver starts initializing in the second
      kernel, it receives the interrupt the moment request_irq() is called.
      Interrupt handler, reads the message from reply FIFO and tries to access
      the associated message frame and panics, as in the new kernel's context
      that message frame is not valid at all.
    
    o In this scenario, probably we should delay the request_irq() call. First
      bring up the IOC, reset it if needed and then should register for irq.
    
    o I have tested the patch with SAS1064E and 53c1030 controllers.
    
    Signed-off-by: Vivek Goyal <vgoyal@in.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Acked-by: "Moore, Eric Dean" <Eric.Moore@lsil.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d87fa38e70853a9607dc34a02d15cf5f149f49f2
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:24 2006 +0900

    [PATCH] libata-hp: move ata_do_reset() to libata-eh.c
    
    With ops->probe_init() gone, no user is left in libata-core.c.  Move
    ata_do_reset() to libata-eh.c and make it static.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 52783c5dcc8d317bc8c3e2692d366e8a305abada
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:22 2006 +0900

    [PATCH] libata-hp: killl ops->probe_reset
    
    Now that all drivers implementing new EH are converted to new probing
    mechanism, ops->probe_reset doesn't have any user.  Kill it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 0542925b25676543e8384edf454668f89227e905
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:20 2006 +0900

    [PATCH] sata_sil24: convert to new probing mechanism and add hotplug support
    
    Convert to new probing mechanism and add hotplug support by enabling
    PORT_IRQ_PHYRDY_CHG, marking ehi for hotplug and scheduling EH on
    PORT_IRQ_PHYRDY_CHG or PORT_IRQ_DEV_XCHG.
    
    Sil3124/32 family of controllers don't have any mechanism to wait for
    the first D2H FIS after hotplug, so ATA_FLAG_SKIP_D2H_BSY is used.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 4296971dd36e2c2deae0826305f591480223af88
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:18 2006 +0900

    [PATCH] ahci: convert to new probing mechanism and add hotplug support
    
    Convert to new probing mechanism and add hotplug support by enabling
    PORT_IRQ_PHYRDY, marking ehi for hotplug and scheduling EH on
    CONNECT/PHYRDY interrupts.
    
    Unfortunately, ahci cannot reliably wait for the first D2H FIS after
    hotplug.  It sometimes succeeds but times out more often than not, so
    ATA_FLAG_SKIP_D2H_BSY is used.
    
    This patch also fixes ahci_hardreset() such that D2H Register FIS RX
    area is cleared before issuing COMRESET.  Without this,
    ata_busy_sleep() after COMRESET might prematually finish if the
    previous TF contains DRDY && !BSY.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e573890b00426189e1e223967a2c46fb758bf06e
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:16 2006 +0900

    [PATCH] sata_sil: convert to new probing mechanism and add hotplug support
    
    Convert to new probing mechanism and add hotplug support by enabling
    SATA IRQ for SError.N, marking ehi for hotplug and scheduling EH on
    SATA IRQs.
    
    Sil3112/3512/3114 family of controllers use COMRESET as TF clearing
    point and can reliably wait for D2H FIS after COMRESET whether the FIS
    is the first D2H FIS after POR or in response to the COMRESET.  Thus,
    setting ATA_FLAG_HRST_TO_RESUME is enough for device detection after
    hotplug.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit ccc4672aff1861a9c80ed9e8ec11dc304b31d307
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:14 2006 +0900

    [PATCH] ata_piix: convert ata_piix to new probing mechanism
    
    Convert ata_piix to new probing mechanism.  Automatic hotplug is not
    supported due to hardware limitation (no PHY event interrupt), but
    warm plugging works.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 720ba12620ee09dce269adf4ad50958adac7bb54
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:13 2006 +0900

    [PATCH] libata-hp: update unload-unplug
    
    Update unload unplug - driver unloading / PCI removal.  This is done
    by ata_port_detach() which short-circuits EH, disables all devices and
    freezes the port.  With this patch, EH and unloading/unplugging are
    properly synchronized.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3e706399b03bd237d087d731d4b1b029e546b33d
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:11 2006 +0900

    [PATCH] libata-hp: implement bootplug
    
    Implement bootplug - boot probing via hotplug path.  While loading,
    ata_host_add() simply schedules probing and invokes EH.  After EH
    completes, ata_host_add() scans and assicates them with SCSI devices.
    EH path is slightly modified to handle this (e.g. no autopsy during
    bootplug).  The SCSI part is left in ata_host_add() because it's
    shared with legacy path and to keep probing order as before (ATA scan
    all ports in host_set then attach all).
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit ccf68c3405fca11386004674377d951b9b18e756
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:09 2006 +0900

    [PATCH] libata-hp: hook warmplug
    
    Hook transportt->user_scan() and hostt->slave_destroy().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 83c47bcb3c533180a6dda78152334de50065358a
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:07 2006 +0900

    [PATCH] libata-hp: implement warmplug
    
    Implement warmplug.  User-initiated unplug can be detected by
    hostt->slave_destroy() and plug by transportt->user_scan().  This
    patch only implements the two callbacks.  The next function will hook
    them.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 580b2102327ab8444af5bde4e70b50d268a1d558
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:05 2006 +0900

    [PATCH] libata-hp: implement SCSI part of hotplug
    
    Implement SCSI part of hotplug.
    
    This must be done in a separate context as SCSI makes use of EH during
    probing.  SCSI scan fails silently if EH is in progress.  In such
    cases, libata pauses briefly and retries until every device is
    attached.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 084fe639b81c4d418a2cf714acb0475e3713cb73
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:03 2006 +0900

    [PATCH] libata-hp: implement hotplug
    
    Implement ATA part of hotplug.  To avoid probing broken devices over
    and over again, disabled devices are not automatically detached.  They
    are detached only if probing is requested for the device or the
    associated port is offline.  Also, to avoid infinite probing loop,
    Each device is probed only once per EH run.
    
    As SATA PHY status is fragile, devices are detached only after it has
    used up its recovery chances unless explicitly requested by LLDD or
    user (LLDD may request direct detach if, for example, it supports cold
    presence detection).
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 0ea035a3d1ad948096e205f08f350c03d5cea453
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:28:01 2006 +0900

    [PATCH] libata-hp: implement ata_eh_detach_dev()
    
    Implement ata_eh_detach_dev().  This function is responsible for
    detaching an ATA device and offlining the associated SCSI device
    atomically so that the detached device is not accessed after ATA
    detach is complete.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e8e008e7b5ed8c65675cc9b3e778b8bb909f65ab
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:59 2006 +0900

    [PATCH] sata_sil24: update sil24_hardreset()
    
    Use phy debouncing instead of unconditional wait after DEV_RST and
    make sil24_hardreset() to request followup SRST as that's the only way
    to wait for !BSY.  Note that the original implementation never worked
    - if the cached status was !BSY, ata_busy_sleep() finished
    immediately; otherwise, it timed out regardless of the actual device
    status.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 135da34573f6d3bab2976a75063f7232a4311a74
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:57 2006 +0900

    [PATCH] sata_sil24: rename PORT_PRB to PORT_LRAM and add PORT_LRAM_SLOT_SZ
    
    PORT_PRB is a misnomer as the area also contains other stuff.  Rename
    it to PORT_LRAM and add PORT_LRAM_SLOT_SZ.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit cbe88fbc72d9e1aa4a6f994cb6e19fa08ae5a0ba
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:55 2006 +0900

    [PATCH] sata_sil: new interrupt handler
    
    The DMA complete bit of these controllers reflects ATA IRQ status
    while no DMA command is in progress.  So, we can tell whether the
    controller is raising an interrupt or not in deterministic manner.
    This patch gives sata_sil its own interrupt handler which behaves much
    better than the original one in terms of error detection and handling.
    This change is also necessary for later hotplug support.
    
    Further improvements are possible, in both 2 and 4 ports versions, we
    can get all status with only one readl and using custom bmdma
    operations can further cut down register accesses.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 20888d83687d5cb374cdb5b0afa746ab79666f4e
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:53 2006 +0900

    [PATCH] sata_sil: add new constants in preparation for new interrupt handler
    
    sata_sil is about to get a brand new interrupt handler.  Add relevant
    constants.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 9a1004d0c11be41c83d06a67dfe74567a41ae582
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:52 2006 +0900

    [PATCH] libata: export ata_hsm_move()
    
    ata_hsm_move() will be used by LLDDs which depend on standard PIO HSM
    but implement their own interrupt handlers.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 664faf09a05d74085c0b31e2c621d7647322325b
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:50 2006 +0900

    [PATCH] libata-hp-prep: implement followup softreset handling
    
    In some cases, hardreset must be followed by SRST.
    
    * some controllers can't classify with hardreset
    * some controllers can't wait for !BSY after hardreset (LLDD should
      explicitly request followup softreset by returning -EAGAIN)
    * (later) PM needs SRST w/ PMP==15 to operate after hardreset
    
    To handle above cases, this patch implements follow-up softreset.
    After a hardreset, ata_eh_reset() checks whether any of above
    conditions are met and do a follow-up softreset if necessary.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f5914a461eb9703773226a0813f6ffcae10c0861
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:48 2006 +0900

    [PATCH] libata-hp-prep: add prereset() method and implement ata_std_prereset()
    
    With hotplug, every reset might be a probing reset and thus something
    similar to probe_init() is needed.  prereset() method is called before
    a series of resets to a port and is the counterpart of postreset().
    prereset() can tell EH to use different type of reset or skip reset by
    modifying ehc->i.action.
    
    This patch also implements ata_std_prereset().  Most controllers
    should be able to use this function directly or with some wrapping.
    After hotplug, different controllers need different actions to resume
    the PHY and detect the newly attached device.  Controllers can be
    categorized as follows.
    
    * Controllers which can wait for the first D2H FIS after hotplug.
      Note that if the waiting is implemented by polling TF status, there
      needs to be a way to set BSY on PHY status change.  It can be
      implemented by hardware or with the help of the driver.
    
    * Controllers which can wait for the first D2H FIS after sending
      COMRESET.  These controllers need to issue COMRESET to wait for the
      first FIS.  Note that the received D2H FIS could be the first D2H
      FIS after POR (power-on-reset) or D2H FIS in response to the
      COMRESET.  Some controllers use COMRESET as TF status
      synchronization point and clear TF automatically (sata_sil).
    
    * Controllers which cannot wait for the first D2H FIS reliably.
      Blindly issuing SRST to spinning-up device often results in command
      issue failure or timeout, causing extended delay.  For these
      controllers, ata_std_prereset() explicitly waits ATA_SPINUP_WAIT
      (currently 8s) to give newly attached device time to spin up, then
      issues reset.  Note that failing to getting ready in ATA_SPINUP_WAIT
      is not critical.  libata will retry.  So, the timeout needs to be
      long enough to spin up most devices.
    
    LLDDs can tell ata_std_prereset() which of above action is needed with
    ATA_FLAG_HRST_TO_RESUME and ATA_FLAG_SKIP_D2H_BSY flags.  These flags
    are PHY-specific property and will be moved to ata_link later.
    
    While at it, this patch unifies function typedef's such that they all
    have named arguments.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit d7bb4cc7575929a60b0a718daa1bce87bea9a9cc
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:46 2006 +0900

    [PATCH] libata-hp-prep: implement sata_phy_debounce()
    
    With hotplug, PHY always needs to be debounced before a reset as any
    reset might find new devices.  Extract PHY waiting code from
    sata_phy_resume() and extend it to include SStatus debouncing.  Note
    that sata_phy_debounce() is superset of what used to be done inside
    sata_phy_resume().
    
    Three default debounce timing parameters are defined to be used by
    hot/boot plug.  As resume failure during probing will be properly
    handled as errors, timeout doesn't have to be long as before.
    probeinit() uses the same timeout to retain the original behavior.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit a9beec95352ff675f27d74c3cb97dc258d022497
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:44 2006 +0900

    [PATCH] libata-hp-prep: make probing related functions global
    
    Hotplug will be implemented in libata-eh.c.  Make ata_dev_read_id()
    and ata_dev_configure() global.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 453b07accb47c5b54aa2f156ebffac63c543027b
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:42 2006 +0900

    [PATCH] libata-hp-prep: add ata_aux_wq
    
    It's best to run ATA hotplug from EH but attaching SCSI devices needs
    working EH.  ata_aux_wq is used to give SCSI hotplug operations a
    separate context.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3edebac41bab7e146578ad9e723ee7fff71c99c0
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:40 2006 +0900

    [PATCH] libata-hp-prep: store attached SCSI device
    
    Add device persistent field dev->sdev and store the attached SCSI
    device.  With hotplug, libata needs to know the attached SCSI device
    to offline and detach it, but scsi_device_lookup() cannot be used
    because libata will reuse SCSI ID numbers - dead but not gone devices
    (due to zombie opens, etc...) interfere with the lookup.
    
    dev->sdev doesn't hold reference to the SCSI device.  It's cleared
    when the SCSI device goes away.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 5a04bf4befa8bffa012eedc3a0903c158b9131a9
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:38 2006 +0900

    [PATCH] libata-hp-prep: implement ap->hw_sata_spd_limit
    
    Add ap->hw_sata_spd_limit and initialize it once during the boot
    initialization (or driver load initialization).  ap->sata_spd_limit is
    reset to ap->hw_sata_spd_limit on hotplug.  This prevents spd limits
    introduced by earlier devices from affecting new devices.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 315343637b988ac32d730a6a9f7bf5866838bcb0
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:36 2006 +0900

    [PATCH] libata-hp-prep: use __ata_scsi_find_dev()
    
    Convert direct sdev -> dev lookup to __ata_scsi_find_dev().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit ab5b3a5b2d887ce63f8c6a7fcb9f5c07ca4b4d43
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:34 2006 +0900

    [PATCH] libata-hp-prep: update ata_scsi_find_dev() and friends
    
    Separate out ata_find_dev() and __ata_scsi_find_dev() from
    ata_scsi_find_dev().  These will be used by later hotplug
    implementation.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 72fa4b742b327bd1b07985d79a61c61dbd9fd4e6
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:32 2006 +0900

    [PATCH] libata-hp-prep: make some ata_device fields persistent
    
    Lifetimes of some fields span over device plugging/unplugging.  This
    patch moves such persistent fields to the top of ata_device and
    separate them with ATA_DEVICE_CLEAR_OFFSET.  Fields above the offset
    are initialized once during host initializatino while all other fields
    are cleared before hotplugging.  Currently ->ap, devno and part of
    flags are persistent.
    
    Note that flags is partially cleared while holding host_set lock.
    This is to synchronize with later warm plug implementation which will
    record hotplug request in dev->flags.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3ef3b43d5633d30fa3f033f62094ec2e9c5b8376
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:30 2006 +0900

    [PATCH] libata-hp-prep: implement ata_dev_init()
    
    Move initialization of struct ata_device into ata_dev_init() in
    preparation for hotplug.  This patch calls ata_dev_init() from
    ata_host_init() and thus makes no functional difference.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit abdda7331d469fa965167365f011d05e226008fb
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:29 2006 +0900

    [PATCH] libata-hp-prep: add flags and eh_info/context fields for hotplug
    
    Add hotplug related flags and eh_info/context fields.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit c6cf9e99d1de5ca6a08fb639bb73031ffe50d802
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:27 2006 +0900

    [PATCH] libata: implement ata_eh_wait()
    
    Implement ata_eh_wait().  On return from this function, it's
    guaranteed that the EH which was pending or in progress when the
    function was called is complete - including the tailing part of SCSI
    EH.  This will be used by hotplug and others to synchronize with EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 7395acb2c840fd4d0cacc91d6fb71440057141ab
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:25 2006 +0900

    [PATCH] libata: shift host flag constants
    
    Nudge host flag constants to make a room after ATA_FLAG_EH_PENDING.
    New EH flag will be added.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 20952b699035448d2277c64efc5910a31be66ed1
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed May 31 18:27:23 2006 +0900

    [PATCH] libata: set PIO-0 after successful EH reset
    
    Set ata_device->pio_mode to XFER_PIO_0 after a successful reset.  This
    is to keep EH resets consistent with probe resets as updated by the
    commit b6079ca409bf88c248992e96510dd6f610f7ed89.  Note that, with
    soon-to-follow hotplug update, EH resets will include probe resets.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 01af2fac9ea76513e2fba689ad580f985f32a8c3
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 18:22:07 2006 -0400

    [AGPGART] Remove pointless initialisation in intel-agp
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 89197e34ea63d7f619dade525de8e69a15f40405
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 18:19:39 2006 -0400

    [AGPGART] Remove pointless code from agp_generic_create_gatt_table()
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 484944a5b002cf87b38a8f073d37afcfb8afff28
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 18:09:31 2006 -0400

    [CPUFREQ] Remove more freq_table reinitialisations.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 5557976ca97c3a3002805f575a45ad354e1050ff
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:59:48 2006 -0400

    [CPUFREQ] Fix another redundant initialisation in freq_table
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 355eb318018c6f44a335b0e5efb1f3bf2f1685d0
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:58:41 2006 -0400

    [CPUFREQ] Remove duplicate assignment in freq_table
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 511e9ee17099c6ebe315c0524b8b482d4767ab3d
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:57:14 2006 -0400

    [CPUFREQ] CodingStyle nits in cpufreq_stats.c
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 851777b7b686c80e417fd811cdea3e5aa5305745
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:55:01 2006 -0400

    [CPUFREQ] Remove duplicate assignment from cpufreq-nforce2
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit b6571da9f328999a6bce429b5f614a3d64b926ee
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:50:22 2006 -0400

    [CPUFREQ] Remove pointless reinitialisations in acpi-cpufreq
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 83844510ec9dc89a676e71d3cc28289905c2caec
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:43:54 2006 -0400

    [CPUFREQ] Remove pointless reinitialisation from powernow-k8
    
    This var is already set at entry to the function.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8eebf1a4c3682f71dbda3348abfcdd4d2a751fd3
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:40:16 2006 -0400

    [CPUFREQ] Remove redundant initialisation from longhaul.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e2aa8732ac11570acddf326874a34ab684752e34
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:37:15 2006 -0400

    [CPUFREQ] Clean up longhaul's speed pretty-printer
    
    Getting ready to move to core cpufreq.
    - Use snprintf
    - Remove unnecessary nesting improving readability.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 8cbe0169053ffa185ad349088eb0901946c14a09
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:26:08 2006 -0400

    [CPUFREQ] Disambiguate loop indexes in powernow-k7
    
    This shouldn't have actually caused any problems
    (as we return if we 'corrupt' 'i', but it's still not
    very pretty.  For the sake of adding another local variable,
    this got cleaner.
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit 2e3f8faaa73f5065ae653a84997b5cd4d5876e1a
Author: Dave Jones <davej@redhat.com>
Date:   Tue May 30 17:25:14 2006 -0400

    [CPUFREQ] Typo in powernow-k8
    
    (Also fix some horked indentation)
    
    Signed-off-by: Dave Jones <davej@redhat.com>

commit e9482b4374e2596e6f3f1ab30c4ea469f4ac6311
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Tue May 30 14:25:46 2006 +0200

    [MTD] Allow alternate JFFS2 mount variant for root filesystem.
    
    With this patch, "root=mtd3" and "root=mtd:foo" work for a JFFS2 rootfs.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit 73c619ea0e49c9306afa7ea53c3362fbc56ffd70
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Tue May 30 14:25:35 2006 +0200

    [MTD] Disconnect struct mtd_info from ABI
    
    mtdchar.c direcly copied part of struct mtd_info to userspace, thereby
    implicitly making it part of the ABI.  With this patch, struct
    mtd_info is independent of the ABI and can have its fields removed,
    reordered, etc.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit 92cbfdcc3661d7670b01b92b89811cd3a2412297
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Tue May 30 14:25:24 2006 +0200

    [MTD] replace MTD_RAM with MTD_GENERIC_TYPE
    
    Ram devices get the extra capability of MTD_NO_ERASE - not requiring
    an explicit erase before writing to it.  Currently only mtdblock uses
    this capability.  Rest of the patch is a simple text replacement.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit e369d62e92d526a7ed641e2f0b2978fb0ce366c5
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Tue May 30 14:25:17 2006 +0200

    [MTD] replace MTD_ROM with MTD_GENERIC_TYPE
    
    No mtd user should ever check for the device type.  Instead, device features
    should be checked by the flags - if at all.
    As a first step towards type removal, change MTD_ROM into MTD_GENERIC_TYPE.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit e1219724be193519f20743f5500bd1eff11890d0
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Tue May 30 14:25:05 2006 +0200

    [MTD] remove a forgotten MTD_XIP
    
    MTD_XIP definition was removed in an earlier patch.  This invocation
    was left by mistake.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit 7e9a0bb00c4ccb7a05c41b2728758d5bb3dd54fc
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue May 30 09:06:41 2006 +0100

    [MTD] Fix build warnings (and debug build error) in nand_base.c
    
    drivers/mtd/nand/nand_base.c: In function 'nand_transfer_oob':
    drivers/mtd/nand/nand_base.c:909: warning: comparison of distinct pointer types lacks a cast
    drivers/mtd/nand/nand_base.c: In function 'nand_do_read_oob':
    drivers/mtd/nand/nand_base.c:1097: error: 'len' undeclared (first use in this function)
    drivers/mtd/nand/nand_base.c:1097: error: (Each undeclared identifier is reported only once
    drivers/mtd/nand/nand_base.c:1097: error: for each function it appears in.)
    drivers/mtd/nand/nand_base.c: In function 'nand_fill_oob':
    drivers/mtd/nand/nand_base.c:1411: warning: comparison of distinct pointer types lacks a cast
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 098a19811b483f8e047d8292641c88e776452de0
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 30 09:00:14 2006 +0100

    [JFFS2] Preallocate node refs for cleanmarker in summary scan
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 13ba42df4a385d7b77d7aac32b93bdcd73e6d6e1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 30 08:59:34 2006 +0100

    [JFFS2] Fix calculation of potential summary marker offset on NOR flash.
    
    Helps if we look _inside_ the buffer, rather than adding jeb->offset to
    it. Doh.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f1a28c02843efcfcc41982149880bac3ac180234
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 30 00:37:34 2006 +0200

    [MTD] NAND Expose the new raw mode function and status info to userspace
    
    The raw read/write access to NAND (without ECC) has been changed in the
    NAND rework. Expose the new way - setting the file mode via ioctl - to
    userspace. Also allow to read out the ecc statistics information so userspace
    tools can see that bitflips happened and whether errors where correctable
    or not. Also expose the number of bad blocks for the partition, so nandwrite
    can check if the data fits into the parition before writing to it.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9a1fcdfd4bee27c418424cac47abf7c049541297
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Mon May 29 14:56:39 2006 +0200

    [MTD] NAND Signal that a bitflip was corrected by ECC
    
    Return -EUCLEAN on read when a bitflip was detected and corrected, so the
    clients can react and eventually copy the affected block to a spare one.
    Make all in kernel users aware of the change.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8593fbc68b0df1168995de76d1af38eb62fd6b62
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Mon May 29 03:26:58 2006 +0200

    [MTD] Rework the out of band handling completely
    
    Hopefully the last iteration on this!
    
    The handling of out of band data on NAND was accompanied by tons of fruitless
    discussions and halfarsed patches to make it work for a particular
    problem. Sufficiently annoyed by I all those "I know it better" mails and the
    resonable amount of discarded "it solves my problem" patches, I finally decided
    to go for the big rework. After removing the _ecc variants of mtd read/write
    functions the solution to satisfy the various requirements was to refactor the
    read/write _oob functions in mtd.
    
    The major change is that read/write_oob now takes a pointer to an operation
    descriptor structure "struct mtd_oob_ops".instead of having a function with at
    least seven arguments.
    
    read/write_oob which should probably renamed to a more descriptive name, can do
    the following tasks:
    
    - read/write out of band data
    - read/write data content and out of band data
    - read/write raw data content and out of band data (ecc disabled)
    
    struct mtd_oob_ops has a mode field, which determines the oob handling mode.
    
    Aside of the MTD_OOB_RAW mode, which is intended to be especially for
    diagnostic purposes and some internal functions e.g. bad block table creation,
    the other two modes are for mtd clients:
    
    MTD_OOB_PLACE puts/gets the given oob data exactly to/from the place which is
    described by the ooboffs and ooblen fields of the mtd_oob_ops strcuture. It's
    up to the caller to make sure that the byte positions are not used by the ECC
    placement algorithms.
    
    MTD_OOB_AUTO puts/gets the given oob data automaticaly to/from the places in
    the out of band area which are described by the oobfree tuples in the ecclayout
    data structre which is associated to the devicee.
    
    The decision whether data plus oob or oob only handling is done depends on the
    setting of the datbuf member of the data structure. When datbuf == NULL then
    the internal read/write_oob functions are selected, otherwise the read/write
    data routines are invoked.
    
    Tested on a few platforms with all variants. Please be aware of possible
    regressions for your particular device / application scenario
    
    Disclaimer: Any whining will be ignored from those who just contributed "hot
    air blurb" and never sat down to tackle the underlying problem of the mess in
    the NAND driver grown over time and the big chunk of work to fix up the
    existing users. The problem was not the holiness of the existing MTD
    interfaces. The problems was the lack of time to go for the big overhaul. It's
    easy to add more mess to the existing one, but it takes alot of effort to go
    for a real solution.
    
    Improvements and bugfixes are welcome!
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit f4a43cfcecfcaeeaa40a9dbc1d1378298c22446e
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Sun May 28 11:01:53 2006 +0200

    [MTD] Remove silly MTD_WRITE/READ macros
    
    Most of those macros are unused and the used ones just obfuscate
    the code. Remove them and fixup all users.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 5bd34c091a044d130601370c370f84b1c59f1627
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Sat May 27 22:16:10 2006 +0200

    [MTD] NAND Replace oobinfo by ecclayout
    
    The nand_oobinfo structure is not fitting the newer error correction
    demands anymore. Replace it by struct nand_ecclayout and fixup the users
    all over the place. Keep the nand_oobinfo based ioctl for user space
    compability reasons.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ff268fb8791cf18df536113355d7184007c269d9
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Sat May 27 20:36:12 2006 +0200

    [MTD] NAND Consolidate oobinfo handling
    
    The info structure for out of band data was copied into
    the mtd structure. Make it a pointer and remove the ability
    to set it from userspace. The position of ecc bytes is
    defined by the hardware and should not be changed by software.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8be834f76291fdcc0614cb84926c6910b9f2ecbc
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Sat May 27 20:05:26 2006 +0200

    [MTD] NAND Fix platform structure and NDFC driver
    
    The platform structure was lacking an oobinfo field.
    The NDFC driver had some remains from another tree.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 19676ff0a64af9d75d48f17cb67bee8110f6ffbf
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 29 11:33:33 2006 +0100

    [MTD] Fix debug printk format warning in m25p80 SPI chip driver, again.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 33280eac704e3e156eef2fa9ed9ddf427a1c223c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 29 11:24:29 2006 +0100

    [MTD] AMD Geode NAND support can depend on X86_32; we won't see it on x86_64
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7a532c69c37dbb46bfd0276160e624f06552adfc
Author: Dennis Munsie <dmunsie@cecropia.com>
Date:   Mon May 29 18:58:09 2006 +1000

    intelfb: use regular modedb table instead of VESA
    
    intelfb driver -- use the regular modedb table instead of the VESA modedb
    table.  Ideally, the 9xx stride patch should be applied first, since there
    are modes in the VESA table that won't work without that patch.
    
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 56e004e5435c008728b1444b51d757da2e098976
Author: Antonino A. Daplas <adaplas@gmail.com>
Date:   Mon May 29 18:49:08 2006 +1000

    intelfb: use firmware EDID for mode database
    
    Use firmware EDID for the driver's private mode database.
    
    Signed-off-by: Antonino Daplas <adaplas@pol.net>
    Cc: Sylvain Meyer <sylvain.meyer@worldonline.fr>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 080a416802153dbbb20ab4f4fa1225867096d071
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon May 29 18:45:19 2006 +1000

    Revert "intelfb driver -- use the regular modedb table instead of the VESA"
    
    This reverts 2c47430a03bbcc3c9a623a07eca5baf92c7d20c8 commit.
    This conflicts with a patch in -mm from Antonino reapply later.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 65eb2f97db17f6f6a92cad3aad93b531f991ebf1
Author: Eric Hustvedt <ehustvedt@cecropia.com>
Date:   Mon May 29 18:38:55 2006 +1000

    intelfb: int option fix
    
    Fix integer option parsing in the intelfb driver. The macro wasn't
    accounting for the equal sign past the option name. As a result,
    the vram option always returned 0.
    
    Signed-off-by: Eric Hustvedt <ehustvedt@cecropia.com>
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit ef2824073fba9def3cf122e89cc485f66dd71f70
Author: Borislav Petkov <bbpetkov@yahoo.de>
Date:   Mon May 29 01:06:23 2006 -0400

    libata debugging: set initial dbg value
    
    This patch sets the prerequisites for the new debugging scheme that more or
    less resembles Donald Becker's net driver example. This one liner doesn't
    change any functionality beside setting the appropriate debug level for the
    msg_enable control in the ata_port struct, which will be later used by the
    ata_msg_* macros to control the amount of debug information sent to printk.
    
    Signed-off-by: Borislav Petkov <petkov@uni-muenster.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 89f8185e9b62f6478c2a39e117606eec70387d1d
Merge: e42d7be... d9ec5ad...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon May 29 01:03:37 2006 -0400

    Merge branch 'master' into upstream

commit a6a8bef722875a95bb73e6de7da924a8d417b52c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 29 00:41:11 2006 +0100

    [JFFS2] Preallocate raw_node_refs in a couple of missing places in scan
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2ebf09c2491433a499e0ae7723d04e9e810afa84
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 28 22:13:25 2006 +0100

    [JFFS2] Fix oops when marking space dirty in scan, but no previous node exists.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b53471711f21ba0e151075f0e1d6d531eb50f1b1
Merge: 983f27d... 83055d4...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun May 28 16:35:13 2006 -0400

    Merge branch 'velocity' of git://electric-eye.fr.zoreil.com/home/romieu/linux-2.6 into upstream

commit e42d7be25cf53548347bff8b8f43410704ea7bb0
Merge: 75e9958... 0737ac8...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun May 28 16:32:59 2006 -0400

    Merge branch 'upstream-fixes' into upstream
    
    Conflicts:
    
    	drivers/scsi/libata-core.c

commit 2b89dad0c7e3b03d45d9674ee9a7b49670df098e
Author: Hannes Reinecke <hare@suse.de>
Date:   Tue May 23 10:29:28 2006 +0200

    [SCSI] audit drivers for incorrect max_id use
    
    max_id now means the maximum number of ids on the bus, which means it
    is one greater than the largest possible id number.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 091686d3b5569d2ec76b9e6dab7f3608b6f64497
Author: Amit Arora <aarora@in.ibm.com>
Date:   Fri May 19 16:14:50 2006 -0700

    [SCSI] Return -EINVAL when "id == max_id" in scsi_scan_host_selected()
    
    The scsi_scan_host_selected() should return -EINVAL when the id is equal
    to the max_id. Currently it uses ">" when comparing with max_id, and
    hence leaves the border case when "id==max_id".
    The channel and lun have values valid from 0 up to,
    and including, max_channel or max_lun. But, the valid values for id
    range from 0 to max_id-1. This patch fixes the problem.
    
    Signed-off-by: Amit Arora <aarora@in.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 93ef588735973e4c35ff3707685678cdebd694a4
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon May 22 18:27:30 2006 +0200

    [SCSI] zfcp: bump up version number
    
    Bump up version number, skip "4.6.0" because this might
    clash with zfcp version in certain distros.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 338151e066084d92d89f44311e5521ef847a50b9
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon May 22 18:25:56 2006 +0200

    [SCSI] zfcp: make use of fc_remote_port_delete when target port is unavailable
    
    If zfcp's port erp fails we now call fc_remote_port_delete. This helps
    to avoid offlined scsi devices if scsi commands time out due to path
    failures. When an adapter erp fails we call fc_remote_port_delete for
    all ports on that adapter.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 75bfc2837bbcc329193d51e8b7115184b78beae0
Author: Ralph Wuerthner <rwuerthn@de.ibm.com>
Date:   Mon May 22 18:24:33 2006 +0200

    [SCSI] zfcp: evaluate plogi payload to set maxframe_size, supported_classes of rports
    
    Signed-off-by: Ralph Wuerthner <rwuerthn@de.ibm.com>
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b7a52fa7fff2309031a2f849bc489206afd2fa4a
Author: Ralph Wuerthner <rwuerthn@de.ibm.com>
Date:   Mon May 22 18:21:28 2006 +0200

    [SCSI] zfcp: print bit error threshold data human readable
    
    Replace hex dump of bit error threshold data by log message showing
    bit error threshold data human readable.
    
    Signed-off-by: Ralph Wuerthner <rwuerthn@de.ibm.com>
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 06506d00ec1a0d7d3b1dff59185af355ce29ac0a
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon May 22 18:18:19 2006 +0200

    [SCSI] zfcp: (cleanup) removed superfluous macros, struct members, typedefs
    
    Removed some macros, struct members and typedefs which were
    unused or not necessary.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ec4081c6ba4fba6a8bc12a0e93db8817ba63ce47
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon May 22 18:17:30 2006 +0200

    [SCSI] zfcp: (cleanup) kmalloc/kzalloc replacement
    
    Replace kmalloc/memset by kzalloc or kcalloc.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ca3271b40225a1049334766f6fb35b57a0162bd2
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon May 22 18:15:49 2006 +0200

    [SCSI] zfcp: (cleanup) remove useless comments
    
    Removed some useless comments.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4a9d2d8bf989c77b54add430932fa5ed8a80dba9
Author: Andreas Herrmann <aherrman@de.ibm.com>
Date:   Mon May 22 18:14:08 2006 +0200

    [SCSI] zfcp: (cleanup) shortened copyright and author information
    
    Copyright update, shortened file headers, shortened author information.
    
    Signed-off-by: Andreas Herrmann <aherrman@de.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 83055d46e5eddbb3574ef5e9c0d9c021bcb75c0b
Author: Jay Cliburn <jacliburn@bellsouth.net>
Date:   Wed May 24 00:02:51 2006 +0200

    via-velocity: allow MTU size less than 1500 bytes
    
    Change the minimum allowable MTU size from 1500 bytes to 64 bytes.
    
    Signed-off-by: Jay Cliburn <jacliburn@bellsouth.net>

commit ddc58bd65ebe58c243e9f609384825df9ffd04ad
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 27 13:15:16 2006 +0100

    [JFFS2] Fix wbuf recovery of f->metadata->raw node.
    
    A data node might not be in the fraglist; it could be f->metadata.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f728377f6786bcdf1dbf33394360164e86f40094
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat May 27 18:56:02 2006 +1000

    sync modesetting code with X.org
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit c9daa873c3a7c769821ec6c8258adf098bb0435c
Author: Dave Airlie <airlied@linux.ie>
Date:   Sat May 27 18:44:02 2006 +1000

    intelfb: align with changes from my X driver.
    
    This just realigns the PLL calculation routines with the ones from my X.org
    driver.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 2c47430a03bbcc3c9a623a07eca5baf92c7d20c8
Author: Dennis Munsie <dmunsie@cecropia.com>
Date:   Sat May 27 18:33:35 2006 +1000

    intelfb driver -- use the regular modedb table instead of the VESA
    modedb table.  Ideally, the 9xx stride patch should be applied first, since
    there are modes in the VESA table that won't work without that patch.
    
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 1aecb393091d3c0787f92445420d96ef58c9782a
Author: Eric Hustvedt <ehustvedt@cecropia.com>
Date:   Sat May 27 18:30:00 2006 +1000

    Adds support for 256MB aperture on 945 chipsets to the intelfb driver
    and corrects calculation of stolen memory overhead.
    
    Signed-off-by: Eric Hustvedt <ehustvedt@cecropia.com>
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit df7df8ab7b38ca80bbaf5ffafd401d6c739fd45f
Author: Dennis Munsie <dmunsie@cecropia.com>
Date:   Sat May 27 18:17:52 2006 +1000

    intelfb -- uses stride alignment of 64 on the 9xx chipsets.
    
    Signed-off-by: Dennis Munsie <dmunsie@cecropia.com>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 92af11cdec410f5de4e8d702d24e1672ce26a1f6
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 02:24:14 2006 -0400

    [PATCH] missing readb/readw in rio
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 0645819196b5029936cf07a8ba27860e0d45c8d9
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 02:11:12 2006 -0400

    [PATCH] copy_to_user() from iomem is a bad thing
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 6bc540e69a6376b9d58d8490f4998da9e45e2746
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 02:00:00 2006 -0400

    [PATCH] forgotten swap of copyout() arguments
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 1bf087194f01bce5b2d7b39f27d71d5f346fbf08
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 01:55:52 2006 -0400

    [PATCH] handling rio MEMDUMP
    
    it copies data _from_ iomem, so it should be rio_memcpy_fromio(), not
    ->Copy().
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit ae5b28a5bb1b5f5d53085a044aec69db41fd0336
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 01:48:08 2006 -0400

    [PATCH] fix rio_copy_to_card() for OLDPCI case
    
    It replaced old rio_pcicopy().  That puppy did _not_ do readb() (unlike
    rio_memcpy_toio()) and current implementation is simply broken - readb(NULL)
    is never a valid thing to do.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit bfa6b7bb35a9c8c8acae3056f2cb3364c52693d4
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 00:36:10 2006 -0400

    [PATCH] uses of ->Copy() in rioroute are bogus
    
    ... there we are building a command in normal memory; it will be
    copied to iomem (by ->Copy()) later.  Use memcpy()...
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit c7c0d0a10f6e4cea95ed84adcdd37948cac09b85
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 00:19:54 2006 -0400

    [PATCH] bogus order of copy_from_user() arguments
    
    ... aka "somebody forgot to swap arguments when converting from copyin()"
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 38d0d001b973d8c72c18524cc25ef39db85c66cd
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 00:15:09 2006 -0400

    [PATCH] rio ->Copy() expects the sourse as first argument
    
    ... so conversion from rio_pcicopy() to rio_copy_to_card() had broken the
    damn thing.
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit d886cb586f60a5ccf156392f96a39bc52db925d0
Author: Al Viro <viro@www.linux.org.uk>
Date:   Sat May 27 00:08:25 2006 -0400

    [PATCH] trivial annotations in rio
    
    Signed-off-by: Al Viro <viro@www.linux.org.uk>

commit 75e995855f45a83afdae34d50c0b3ee14fb23b7a
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed May 24 14:14:41 2006 +0100

    [PATCH] libata: add pio_data_xfer_noirq
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 622b20fcb8b42aa4c3c87c0a036f2ad0927b64bc
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Wed May 24 14:06:11 2006 +0100

    [PATCH] PCI identifiers for the pata_via update
    
    These IDs are also used by the drivers/ide/pci changes submitted by
    VIA.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 983f27d37d4fc72c252835cb2ee3103b360735a6
Merge: de1e938... e82b0f2...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri May 26 22:01:26 2006 -0400

    Merge branch 'upstream-fixes' into upstream
    
    Conflicts:
    
    	drivers/s390/net/ctctty.c

commit de1e938e54deba5b093a3074dfafd0d11afacbe1
Author: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
Date:   Thu May 25 10:24:46 2006 +0900

    [PATCH] r8169: add new PCI ID
    
    Hi,
    
    This patch add new PCI ID for r8169 driver.
    RTL8110SBL has this PCI ID.
    
    Please aply.
    
    Yoichi
    
    Signed-off-by: Yoichi Yuasa <yoichi_yuasa@tripeaks.co.jp>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f3b197ac26ed0e57989856494c495818dcc7f9ac
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri May 26 21:39:03 2006 -0400

    [netdrvr] trim trailing whitespace: 8139*.c, epic100, forcedeth, tulip/*

commit 4c0c2fd486b6598e37c77b5d81a08bc2d948aa7b
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Thu May 25 13:10:38 2006 -0400

    [PATCH] pci_ids: add new device ids
    
    This patch adds new device ids for MCP61 and MCP65 chips.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit eb91f61b2294ccdb914df255164ada70dbbf2d58
Author: Ayaz Abdulla <aabdulla@nvidia.com>
Date:   Wed May 24 18:13:19 2006 -0400

    [PATCH] forcedeth: add support for flow control
    
    This patch adds flow control support for tx and rx pause frames in
    forcedeth.
    
    Signed-Off-By: Ayaz Abdulla <aabdulla@nvidia.com>
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 48cf270e45ff6ff076dd6557b38ec1068dd71809
Author: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
Date:   Wed May 24 23:33:11 2006 +0200

    [PATCH] spidernet: replace whitespaces by tabs
    
    The original patch was using whitespaces instead of tabs.
    
    Signed-off-by: Jens Osterkamp <Jens.Osterkamp@de.ibm.com>
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f29cb26c43d7c064421e76540b7654fbba9efc78
Merge: 6d0c07c... a24b163...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri May 26 21:33:55 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 6d0c07cc6eec4636d83dd75c85b3205229f1960a
Merge: 6082823... 80871e6...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri May 26 21:32:31 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 835d39fcb56cba00b78c60634d6bb0f046ef601c
Merge: 89bad58... ecd6885...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri May 26 21:30:38 2006 -0400

    Merge branch 'master' into upstream

commit 89bad5892abca55f56d0ea713c7306d1f845ac8e
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri May 26 13:49:18 2006 +0800

    [PATCH] libata: add back ->data_xfer to ata_piix.c
    
    Add back ->data_xfer and ->mode_filter to ata_piix.c.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6082823632e40737515d03381e1ba59cfb4d4909
Author: Alexey Dobriyan <adobriyan@gmail.com>
Date:   Tue May 23 14:52:21 2006 -0700

    [PATCH] e1000: endian fixes
    
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Cc: "Ronciak, John" <john.ronciak@intel.com>
    Cc: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Acked-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cbc696a5fa3942aa2e6ad52a71d5126ffa84d031
Merge: d3f464b... 8fc29ba...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri May 26 21:26:34 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit ba0251fe87ea560eb377917e06ba0b5b9ab89094
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Sat May 27 01:02:13 2006 +0200

    [MTD] NAND Consolidate references and add back default name setting
    
    We have a type pointer. Make use of it instead of the error prone nand_ids[i]
    reference.
    
    The NAND driver used to set default name settings from the chip ID
    string for the device. The feature got lost during the rework. Add it back.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit cca3b837bbb4c984165f9f9c7c06846bc0425791
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Sat May 27 00:47:18 2006 +0200

    [MTD] NAND simplify nand_chip_select
    
    nCE setting can be done when the first command is issued to the device.
    We keep the deselect functionality as it makes sense to deassert nCE
    when the device becomes idle.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 29da9cea46f65cb9488641354fe554e9ef8a3a85
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri May 26 23:05:44 2006 +0100

    [MTD] Fix thinko in nand_write_page_hwecc()
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9bfeb691e75b21fdaa80ffae719083200b190381
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri May 26 21:19:05 2006 +0100

    [JFFS2] Switch to using an array of jffs2_raw_node_refs instead of a list.
    
    This allows us to drop another pointer from the struct jffs2_raw_node_ref,
    shrinking it to 8 bytes on 32-bit machines (if the TEST_TOTLEN) paranoia
    check is turned off, which will be committed soon).
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b1141f6d5dead296adcabd4a1e8ea2b994e287cb
Merge: f587fb7... 4541a5d...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Fri May 26 16:12:24 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit f587fb74b26a10354f1eb73e8d054cd15e5a2fe2
Merge: df8ccb9b... 705af30...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Fri May 26 16:06:58 2006 -0400

    Merge branch 'from-linus' into upstream

commit f75e5097ef298c5a0aa106faa211d1afdc92dc3d
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Fri May 26 18:52:08 2006 +0200

    [MTD] NAND modularize write function
    
    Modularize the write function and reorganaize the internal buffer
    management. Remove obsolete chip options and fixup all affected
    users.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit d3f464b5385531c4250a8b1dbd2f9ba6bbfcebb9
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:38:10 2006 -0700

    ixgb: update version, dates
    
    increase the year dates to 2006 and bump the version to 1.0.109-k2
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 25a9f2f154feaf1c86e46a8fe7b9940d0b0a96f6
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:36:03 2006 -0700

    ixgb: remove changelog
    
    same as e1000 - remove the changelog from the driver code itself.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 25943071b40580ba24e0a111e86b4869b9f5c07c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:57 2006 -0700

    ixgb: replace netdev->priv with netdev_priv()
    
    fix netdev->priv ==> netdev_priv(netdev)
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 235949d162076832b8b9a6e30ca51876c3fa11e8
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:52 2006 -0700

    ixgb: remove inlines, allow compiler to choose
    
    deinline a few large functions as to allow the compiler to pick.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 3352a3b20ce880b17f185ad55bf27751f1c8edb9
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:47 2006 -0700

    ixgb: remove lock access in the fast path
    
    This mimics a change made in the e1000 driver that imitates a slick
    tg3 way of avoiding grabbing the lock around restarting the tx queue.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 3f3dc0dd2086402b684545d66bb5ece93c76330b
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:43 2006 -0700

    ixgb: allocate only buffersize needed
    
    In order to help correct window size growth, use the MFS register
    to limit the packet sizes received and allocate only the buffer
    size necessary
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>
    
    index 0905a82..84a8064 100644
    --- a/drivers/net/ixgb/ixgb_main.c
    +++ b/drivers/net/ixgb/ixgb_main.c
    @@ -574,9 +574,8 @@ ixgb_sw_init(struct ixgb_adapter *adapte
     	hw->subsystem_vendor_id = pdev->subsystem_vendor;
     	hw->subsystem_id = pdev->subsystem_device;
    
    -	adapter->rx_buffer_len = IXGB_RXBUFFER_2048;
    -
     	hw->max_frame_size = netdev->mtu + ENET_HEADER_SIZE + ENET_FCS_LENGTH;
    +	adapter->rx_buffer_len = hw->max_frame_size;
    
     	if((hw->device_id == IXGB_DEVICE_ID_82597EX)
     	   || (hw->device_id == IXGB_DEVICE_ID_82597EX_CX4)
    @@ -820,21 +819,14 @@ ixgb_setup_rctl(struct ixgb_adapter *ada
    
     	rctl |= IXGB_RCTL_SECRC;
    
    -	switch (adapter->rx_buffer_len) {
    -	case IXGB_RXBUFFER_2048:
    -	default:
    +	if (adapter->rx_buffer_len <= IXGB_RXBUFFER_2048)
     		rctl |= IXGB_RCTL_BSIZE_2048;
    -		break;
    -	case IXGB_RXBUFFER_4096:
    +	else if (adapter->rx_buffer_len <= IXGB_RXBUFFER_4096)
     		rctl |= IXGB_RCTL_BSIZE_4096;
    -		break;
    -	case IXGB_RXBUFFER_8192:
    +	else if (adapter->rx_buffer_len <= IXGB_RXBUFFER_8192)
     		rctl |= IXGB_RCTL_BSIZE_8192;
    -		break;
    -	case IXGB_RXBUFFER_16384:
    +	else if (adapter->rx_buffer_len <= IXGB_RXBUFFER_16384)
     		rctl |= IXGB_RCTL_BSIZE_16384;
    -		break;
    -	}
    
     	IXGB_WRITE_REG(&adapter->hw, RCTL, rctl);
     }
    @@ -1551,25 +1543,12 @@ ixgb_change_mtu(struct net_device *netde
     		DPRINTK(PROBE, ERR, "Invalid MTU setting %d\n", new_mtu);
     		return -EINVAL;
     	}
    -
    -	if((max_frame <= IXGB_MAX_ENET_FRAME_SIZE_WITHOUT_FCS + ENET_FCS_LENGTH)
    -	   || (max_frame <= IXGB_RXBUFFER_2048)) {
    -		adapter->rx_buffer_len = IXGB_RXBUFFER_2048;
    -
    -	} else if(max_frame <= IXGB_RXBUFFER_4096) {
    -		adapter->rx_buffer_len = IXGB_RXBUFFER_4096;
    
    -	} else if(max_frame <= IXGB_RXBUFFER_8192) {
    -		adapter->rx_buffer_len = IXGB_RXBUFFER_8192;
    +	adapter->rx_buffer_len = max_frame;
    
    -	} else {
    -		adapter->rx_buffer_len = IXGB_RXBUFFER_16384;
    -	}
    -
     	netdev->mtu = new_mtu;
    -
    -	if(old_max_frame != max_frame && netif_running(netdev)) {
    
    +	if ((old_max_frame != max_frame) && netif_running(netdev)) {
     		ixgb_down(adapter, TRUE);
     		ixgb_up(adapter);
     	}

commit 989316ddfeafd0e8fb51a4d811383769ad62637a
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:38 2006 -0700

    ixgb: revert an unwanted fix regarding tso/descriptors
    
    There seemed to be another bug introduced as well as a performance hit
    with the addtion of the sentinel descriptor workaround.  Removal of
    this workaround appears to prevent the hang.  We'll take a risk
    and remove it, as we had never seen the originally reported bug
    under linux.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 8556f0d18923495ffd15ce87089312b3d8f2414c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:32 2006 -0700

    ixgb: fix interface losing macaddr on ifdn/up
    
    user contributed fix for LAA across down/up, from tonychung00@users.sf.net.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit e59d16965ca38df91c4d9390d8eb5a62d7739589
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri May 26 09:35:28 2006 -0700

    ixgb: fix smp polling race condition
    
    Moved interrupt masking to before requesting the interrupt from the OS.
    Moved interrupt enable to after netif_poll_enable.  This fixes a racy
    BUG() where polling would be running on another CPU at the same time
    that netif_poll_enable would run.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit e4d222ff18bca6322f032088a21e9c4a4c038b85
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri May 26 02:06:27 2006 +0100

    [MTD] Remove PCI dependency for Geode CS553[56] NAND controller.
    
    PCI is faked on these devices by SMM traps. Don't depend on that --
    check for the chipset directly instead.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a24e2513c2d03c9a92739ec6fa7e7208f792881e
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Thu May 25 13:24:27 2006 -0700

    ixgb: increment version to 1.0.104-k4
    
    Increment the driver version to 1.0.104-k4
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 6b900bb4bcb6095339f8d404babd9d779bfa1ea4
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Thu May 25 13:24:21 2006 -0700

    ixgb: use rx copybreak/skb recycle
    
    o use rx copybreak/skb recycle
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 1dfdd7df21309e57867962020a5ccb83d00e5432
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Thu May 25 13:24:17 2006 -0700

    ixgb: add performance enhancements to the buffer_info struct
    
    o modify the rx refill logic and tail bump
    o add counter for failures
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 89291a9d5b70778e49e2563247c6c7e3efac9b14
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 13:30:24 2006 +0100

    [JFFS2] Fix 64-bit size_t problems in XATTR code.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c5b553cc2c36f770086a37764f7a06dd615eda8f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 13:25:17 2006 +0100

    [MTD] Fix NAND_VERIFY_WRITE case to build with tglx's recent changes
    
    Bad tglx. No biscuit.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8546ac4f84b252fff078fab1a992c70504147914
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 13:38:45 2006 +0200

    [MTD] Remove the only useless readv implementation
    
    Removing readv from struct mtd_info broke block2mtd. Remove the
    reference and the useless default implementation.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit f5bbdacc41939f89d8ccb18dd79cd9b21c0cb75d
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 10:07:16 2006 +0200

    [MTD] NAND Modularize read function
    
    Split the core of the read function out and implement
    seperate handling functions for software and hardware
    ECC.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9577f44a899cf4acb9e381c8946307b72153cd15
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 10:04:31 2006 +0200

    [MTD] NAND Add read/write function pointers to struct nand_ecc_ctrl
    
    Add read/write function pointers to struct nand_ecc_ctrl to
    prepare the modulaization of nand_read/write functions. The
    current implementation handles every type of ecc mode
    software/hardware and all kinds of strange ecc placement
    schemes in one switch/if construct. Thats too complex to
    maintain and too inflexible to expand. Modularization will
    also shorten the code pathes of the read/write functions.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7fac464868ec5d80019fa549b8b4516dd1dc9d5c
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 09:57:31 2006 +0200

    [MTD] Add ECC statistics to struct mtd_info
    
    FLASH - especially NAND FLASH - will become less reliable
    and bit flips more likely. Add an ECC statistics struct
    to struct mtd_info to keep track of this.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7314e9e7d57293c58b3e10a25a8a1d9328444187
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 09:51:54 2006 +0200

    [MTD] NAND Cleanup oob functions
    
    Cleanup the code in the oob related functions and
    make use of the new NO_READRDY flag.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7a30601b3ac7b02440ffa629fd3d2cca71c1bcd8
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 09:50:16 2006 +0200

    [MTD] NAND Introduce NAND_NO_READRDY option
    
    The nand driver has a superflous read ready / command
    delay in the read functions. This was added to handle
    chips which have an automatic read forward. Newer
    chips do not have this functionality anymore. Add this
    option to avoid the delay / I/O operation. Mark all
    large page chips with the new option flag.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 04bbd0eafb0c733c6c7f5d63c5098c615fe0685a
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Thu May 25 09:45:29 2006 +0200

    [MTD] NAND Initialize controller lock and wq only once
    
    The lock simplifying patch did not move the lock and waitqueue
    initialization into the controller allocation patch.
    This reinitializes waitqueue and spinlocks also for driver
    supplied controller stuctures. Move it into the allocation path.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 8b9e9fe8c6ee354aa75dc5a33e1575b21aa52084
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 01:53:09 2006 +0100

    [JFFS2] Fix and improve debugging output during scan.
    
    Print wasted_size in scanned eraseblocks, print range correctly for
    summary dirent and inode entries.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 046b8b9808127d63326a33bc6298c90eaee90eeb
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 01:50:35 2006 +0100

    [JFFS2] Add 'jeb' argument to jffs2_prealloc_raw_node_refs()
    
    Preallocation of refs is shortly going to be a per-eraseblock thing,
    rather than per-filesystem. Add the required argument to the function.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f61579c33736476e41e296a16c0d4ead4b953187
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 01:42:40 2006 +0100

    [JFFS2] Correctly handle wasted space before summary node.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c38c1b613d742b5fa075071568f44dc8ec9f1cb8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 01:38:27 2006 +0100

    [JFFS2] jffs2_free_all_node_refs() doesn't free them all. Rename it.
    
    ... to jffs2_free_jeb_node_refs() since that's what it does.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f560928baa605e8faaa3de6cc1b11ebb645e97db
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 25 01:37:28 2006 +0100

    [JFFS2] Allocate node_ref for wasted space when skipping to page boundary
    
    One more place where we were changing the accounting info without
    actually allocating a ref for the lost space...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 12efdde3139c568a59561b69865fd14f37c75603
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Wed May 24 22:57:09 2006 +0200

    [MTD] NAND fix cmd_ctrl breakage
    
    The cmd_ctrl rework lacks some state transition flags.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ace4dfee56fff184e07d7248a759b574321afa8b
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Wed May 24 12:07:37 2006 +0200

    [MTD] NAND coding style and namespace cleanup
    
    Cleanup the functions which are not going to change in the
    next steps.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit c7c16c8e7604a8974d48562fecf8d9c7e221fced
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 24 14:24:02 2006 +0100

    [JFFS2] Revert Artem's Bunkage in debug messages.
    
    Random unthinking 'cleanup' caused debug messages like this:
       Obsoleting node at 0x0006daf4 of len 0x3a4: <7>Dirtying
    
    If messages are continuation of an existing line, they don't need
    to be prefixed with KERN_DEBUG.
    
    THINK. Or you will be replaced by a small shell script.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0305c8659ff9cebabf469d5cd0ab8dc384857e10
Merge: 99988f7... d470a97...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 24 10:01:43 2006 +0100

    Merge branch 'master' of git://git.infradead.org/~gleixner/mtd-nand-2.6.git

commit 66643de455c27973ac31ad6de9f859d399916842
Merge: 2c23d62... 387e2b0...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 24 09:22:21 2006 +0100

    Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6
    
    Conflicts:
    
    	include/asm-powerpc/unistd.h
    	include/asm-sparc/unistd.h
    	include/asm-sparc64/unistd.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 99988f7bbd16b861590dda4631c4db6cb17b5091
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 24 09:04:17 2006 +0100

    [JFFS2] Introduce ref_next() macro for finding next physical node
    
    Another part of the preparation for switching to an array...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c9e055ac4fdbb52622437e0dbfdbc1d4897d2775
Author: Herbert Valerio Riedel <hvr@gnu.org>
Date:   Sun May 7 23:22:53 2006 +0200

    [PATCH] phy: new SMSC LAN83C185 PHY driver
    
    new SMSC LAN83C185 10BaseT/100BaseTX PHY driver for the PHY subsystem
    
    Signed-off-by: Herbert Valerio Riedel <hvr@gnu.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 957d2df1801865eb1e63864bc63b970aa9c460ba
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Tue May 23 13:18:57 2006 +0100

    [PATCH] libata: Remove obsolete flag
    
    ATA_FLAG_IRQ_MASK was added when I did the original data transfer with
    IRQ masked bits for PIO. It has since been replaced by ->pio_data_xfer
    methods so should be removed so nobody uses it by mistake thinking it
    still works.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 31a34fe75906ba5f61606eaed01da313f29ca4b1
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon May 22 22:58:14 2006 +0100

    [PATCH] ata_piix formatting
    
    if( spacing fix for Garzik compliant formatting
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0a9cb46a73abd6c45e7c986bec984eed60c417b6
Author: Jon Mason <jdmason@us.ibm.com>
Date:   Fri May 19 15:35:32 2006 -0500

    [PATCH] remove powerpc bitops in favor of existing generic bitops
    
    There already exists a big endian safe bitops implementation in
    lib/find_next_bit.c.  The code in it is 90%+ common with the powerpc
    specific version, so the powerpc version is redundant.  This patch
    makes the necessary changes to use the generic bitops in powerpc, and
    removes the powerpc specific version.
    
    Signed-off-by: Jon Mason <jdmason@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 7499bf1a4cabde789e7694b33d01a1913ae1dddf
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 17:06:38 2006 +1000

    [PATCH] powerpc: cleanup of iSeries flat device tree
    
    Consolidate the vio device node creation.  Make some parameters const.
    Make a few more things __initdata. Get the device_type strings out of
    the device tree blob.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 72a14eafb243b1f31118ea55a7e8c2588b5ad468
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 17:04:12 2006 +1000

    [PATCH] powerpc: make iSeries flattened device tree dynamic - part 2
    
    This actually simplies things as we just figure out how much space we
    used at the end and adjust klimit then.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c4e3ea2553308ba65fea582dc9a42221ef8b49e5
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 17:04:48 2006 +1000

    [PATCH] powerpc: make iSeries flattened device tree dynamic
    
    First we capture all the strings from dt.c statically by noting that gcc
    puts them in a special section of their own.  Idea from Michael Ellerman.
    
    Then we move the flattened device tree to klimit.
    
    Still to come, making the values blob grow as needed.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c81014f603db26e1ed818decebd3b594606e20a6
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 17:00:04 2006 +1000

    [PATCH] powerpc: split device tree stuff out of iseries/setup.c
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 9ceb19093b5e5f037c6b47df0607dd567283287d
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:58:13 2006 +1000

    [PATCH] powerpc: give iSeries device tree nodes better names
    
    Use the PCI class code to choose a name for the PCI device nodes and
    to guess a device_type.  Failing that, base the name on the vendor and
    device ids as specified in the spec.
    
    Mark just about everything __init{data}.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 29629b2972467f6cc00427a89008c09d010074c8
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:55:53 2006 +1000

    [PATCH] powerpc: make iSeries flat device tree stuff static
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 095eed4f8d0be13a7934031434b6e9ceddb87ff6
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:54:42 2006 +1000

    [PATCH] powerpc: clean up iSeries PCI probe
    
    Only scan the host bridges and then use the existing pci_devs_phb_init()
    routine.
    
    Also fix typo in setup of reg property.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit efbd386967aaa7fcf7ffbb13e4975df1cdf04cb8
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:53:11 2006 +1000

    [PATCH] powerpc: iSeries PCI devices can now have a devpsec attribute
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 403fac4f83bd8e089a192c542511fbeb2729a6c5
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:51:57 2006 +1000

    [PATCH] powerpc: remove LogicalSlot from pci_dn
    
    As we now store enough information in the device_node.
    
    Also the Flags field was not used either, do remove that.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b02527931672749d404b5f640b7e086afc37f4e0
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:50:39 2006 +1000

    [PATCH] powerpc: remove Irq from pci_dn
    
    As we now store enough information in the device_node to allocate the
    irq number in pcibios_final_fixup.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 96ff6afaf1c2fdd118139095dea66c0910379780
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:48:47 2006 +1000

    [PATCH] powerpc: remove iSeries_Global_Device_List
    
    We can now scan the list of device nodes instead.  This also allows us
    to remove the Device_list member of struct pci_dn.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 0d177df15d12926dc2ef7c814f317f02de52ce17
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:46:28 2006 +1000

    [PATCH] powerpc: move iSeries PCI devices to the device tree
    
    Move the probing of PCI devices to setup.c and put them all into the
    flattened device tree.  The later probing is now done by traversing the
    device tree.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 66b3851a6947482987b4c05aa781a33696287648
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:43:58 2006 +1000

    [PATCH] powerpc: reintroduce HvCallPci_configLoad32
    
    This function was removed during iSeries cleanup but will prove useful
    in the following patches.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b58b7f98670ab6dd7774b67ff1655a787321209f
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Fri May 19 16:42:49 2006 +1000

    [PATCH] powerpc: tidy up iseries/pci.c
    
    Remove some unused counters.
    
    No need to allocate iomm_table and iobar_table, which means that
    iomm_table_initialize is not longer needed.
    
    Use kzalloc where sensible.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e14698745dd0de1ddbf5cd0cca4313a90f8c1cc1
Author: Mark Lord <liml@rtr.ca>
Date:   Mon May 22 19:02:03 2006 -0400

    [PATCH] sata_mv: endian annotations
    
    Signed-off-by: Mark Lord <liml@rtr.ca>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a6b2c5d4754dc539a560fdf0d3fb78a14174394a
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon May 22 16:59:59 2006 +0100

    [PATCH] PATCH: libata. Add ->data_xfer method
    
    We need to pass the device in order to do per device checks such as
    32bit I/O enables. With the changes to include dev->ap we now don't have
    to add parameters however just clean them up. Also add data_xfer methods
    to the existing drivers except ata_piix (which is in the other block of
    patches). If you reject the piix one just add a data_xfer to it...
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 8190bdb9291758f3b8c436ec1154c9923ddb57ea
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 01:53:39 2006 -0400

    [libata] libata-scsi, sata_mv: trim trailing whitespace

commit f79d409fae879d135d1aaca6d83451f2787aec07
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon May 22 16:55:11 2006 +0100

    [PATCH] libata - fix bracketing and DMA oops
    
    The upstream tree has the ATA_DFLAG_PIO bug fixed but does not have the
    pass throuugh bug fix
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b6079ca409bf88c248992e96510dd6f610f7ed89
Author: Alan Cox <alan@lxorguk.ukuu.org.uk>
Date:   Mon May 22 16:52:06 2006 +0100

    [PATCH] libata: PIO 0
    
    Ensure the pio_mode is always setup. Don't do any setup on the controller b
    just ensure the mode reporting is valid to avoid tons of special cases
    in PATA driver code when mode switching on the fly.
    
    Signed-off-by: Alan Cox <alan@redhat.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1f3461a72619fcd70a0fcb563306c91f753b4620
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue May 23 18:12:30 2006 +0800

    [PATCH] libata: minor fix for irq-pio merge
    
    Minor fix to put the ATA_FLAG_NO_ATAPI flag back.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c81e29b4aca2b2503238276219d97faaac994b4f
Merge: d3fb4e8... bb31a8f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 01:49:12 2006 -0400

    Merge branch 'upstream-fixes' into upstream
    
    Conflicts:
    
    	drivers/scsi/libata-core.c

commit d3fb4e8dddebbf7d6c0b02842c619bfd4fa199f5
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 01:43:25 2006 -0400

    [libata sata_promise] Add PATA cable detection.
    
    Original patch from Phillip Jordan <phillip.m.jordan@gmail.com>
    Cleanups and fixes by me.

commit 4c5c81613b0eb0dba97a8f312a2f1162f39fd47b
Author: Andrew Chew <achew@nvidia.com>
Date:   Thu Apr 20 15:54:26 2006 -0700

    [PATCH] sata_nv: Add MCP61 support
    
    Added MCP61 SATA support to sata_nv.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 26e27cd424554202d36f38ee35421143788da127
Merge: b74ba22... 387e2b0...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 01:32:42 2006 -0400

    Merge branch 'master' into upstream

commit d7fbeba60b4021dfaf5d315884fbf7672b4ae87b
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 01:31:14 2006 -0400

    [netdrvr ibmlana, ibmveth] trim trailing whitespace

commit 860f242eb5340d0b0cfe243cb86b2a98f92e8b91
Author: Santiago Leon <santil@us.ibm.com>
Date:   Tue Apr 25 11:19:59 2006 -0500

    [PATCH] ibmveth change buffer pools dynamically
    
    This patch provides a sysfs interface to change some properties of the
    ibmveth buffer pools (size of the buffers, number of buffers per pool,
    and whether a pool is active).  Ethernet drivers use ethtool to provide
    this type of functionality.  However, the buffers in the ibmveth driver
    can have an arbitrary size (not only regular, mini, and jumbo which are
    the only sizes that ethtool can change), and also ibmveth can have an
    arbitrary number of buffer pools
    
    Under heavy load we have seen dropped packets which obviously kills TCP
    performance.  We have created several fixes that mitigate this issue,
    but we definitely need a way of changing the number of buffers for an
    adapter dynamically.  Also, changing the size of the buffers allows
    users to change the MTU to something big (bigger than a jumbo frame)
    greatly improving performance on partition to partition transfers.
    
    The patch creates directories pool1...pool4 in the device directory in
    sysfs, each with files: num, size, and active (which default to the
    values in the mainline version).
    
    Comments and suggestions are welcome...
    --
    Santiago A. Leon
    Power Linux Development
    IBM Linux Technology Center
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7b32a312895c00ff03178e49db8b651ee1e48178
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue May 16 17:30:50 2006 +0200

    [PATCH] drivers/net/s2io.c: make bus_speed[] static
    
    On Mon, May 15, 2006 at 12:56:37AM -0700, Andrew Morton wrote:
    >...
    > Changes since 2.6.17-rc3-mm1:
    >...
    >  git-netdev-all.patch
    >...
    >  git trees
    >...
    
    This patch makes the needlessly global bus_speed[] static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 75ac6ae8187d1c2205eb9f55c4a154cb7f4a2f45
Merge: db21e57... a1433ac...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 01:28:05 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit db21e578e551421d76641d72cb3f8296ed3f9e61
Merge: 6ed1425... df8ccb9b...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 00:29:57 2006 -0400

    Merge branch 'upstream' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream

commit 6ed14254cb6e269030ff09bed8673473b7be0283
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 00:28:37 2006 -0400

    [netdrvr pcnet_cs, myri] trim trailing whitespace

commit cf393ebed0abb1186c34b21f3d1d939ac2b5568a
Author: Marcin Juszkiewicz <openembedded@hrw.one.pl>
Date:   Tue May 23 11:15:57 2006 +0200

    [PATCH] pcnet_cs: Add TRENDnet TE-CF100 ethernet adapter ID
    
    Add TRENDnet TE-CF100 ethernet adapter to pcnet_cs list.
    
    product info: "Fast Ethernet", "CF Size PC Card", "1.0", ""
     manfid: 0x0149, 0xc1ab
    
    Signed-off-by: Marcin Juszkiewicz <openembedded@hrw.one.pl>
    
     drivers/net/pcmcia/pcnet_cs.c |    2 ++
     1 file changed, 2 insertions(+)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0da34b6dfe55810ae60db57e08e2af8a808c0a55
Author: Brice Goglin <brice@myri.com>
Date:   Tue May 23 06:10:15 2006 -0400

    [PATCH] Add Myri-10G Ethernet driver
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Andrew J. Gallatin <gallatin@myri.com>
    
     drivers/net/Kconfig                            |   17
     drivers/net/Makefile                           |    1
     drivers/net/myri10ge/Makefile                  |    5
     drivers/net/myri10ge/myri10ge.c                | 2851 +++++++++++++++
     drivers/net/myri10ge/myri10ge_mcp.h            |  205 +
     drivers/net/myri10ge/myri10ge_mcp_gen_header.h |   58
     include/linux/pci_ids.h                        |    1
     7 files changed, 3138 insertions(+)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3a720d726a6aa0a7cd9190f694587adf7bafdf4f
Author: Brice Goglin <brice@myri.com>
Date:   Tue May 23 06:10:01 2006 -0400

    [PATCH] Revive pci_find_ext_capability
    
    This patch revives pci_find_ext_capability (has been disabled a couple month
    ago since it was not used anywhere. See http://lkml.org/lkml/2006/1/20/247).
    It will now be used by the myri10ge driver.
    
    Signed-off-by: Brice Goglin <brice@myri.com>
    Signed-off-by: Andrew J. Gallatin <gallatin@myri.com>
    
     drivers/pci/pci.c   |    3 +--
     include/linux/pci.h |    2 ++
     2 files changed, 3 insertions(+), 2 deletions(-)
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d99ef36ed7e56f816a235f1af115420a81853fb9
Merge: bdad69b... 387e2b0...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed May 24 00:27:05 2006 -0400

    Merge branch 'master' into upstream

commit 2f785402f39b96a077b6e62bf26164bfb8e0c980
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 24 02:04:45 2006 +0100

    [JFFS2] Reduce visibility of raw_node_ref to upper layers of JFFS2 code.
    
    As the first step towards eliminating the ref->next_phys member and saving
    memory by using an _array_ of struct jffs2_raw_node_ref per eraseblock,
    stop the write functions from allocating their own refs; have them just
    _reserve_ the appropriate number instead. Then jffs2_link_node_ref() can
    just fill them in.
    
    Use a linked list of pre-allocated refs in the superblock, for now. Once
    we switch to an array, it'll just be a case of extending that array.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d470a97c70a43ffafd6e728c913254b6d6fd1219
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 23:48:57 2006 +0200

    [MTD] NAND LED support cleanup
    
    Move the define out of the middle of the code and add an
    appropriate comment.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit cad74f2c380411ae7bee997f3ba18834cfe313a2
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 23:28:48 2006 +0200

    [MTD] NAND remove write_byte/word function from nand_chip
    
    The previous change of the command / hardware control allows to
    remove the write_byte/word functions completely, as their only
    user were nand_command and nand_command_lp.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7abd3ef9875eb2afcdcd4f450680298a2983a55e
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 23:25:53 2006 +0200

    [MTD] Refactor NAND hwcontrol to cmd_ctrl
    
    The hwcontrol function enforced a step by step state machine
    for any kind of hardware chip access. Let the hardware driver
    know which control bits are set and inform it about a change
    of the control lines. Let the hardware driver write out the
    command and address bytes directly. This gives a peformance
    advantage for address bus controlled chips and simplifies the
    quirks in the hardware drivers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit bdad69b23c86e41262b85d8affc9a3b34ee2ee74
Merge: 9528454... 440c052...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue May 23 17:21:33 2006 -0400

    Merge branch 'e1000-7.0.38-k4' of git://lost.foo-projects.org/~ahkok/git/netdev-2.6 into upstream

commit 9528454f9c02fb9c359c4c42c69eed4d47407e39
Merge: 777e1d4... 1faadfa...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue May 23 17:20:58 2006 -0400

    Merge branch 'master' into upstream

commit 440c052d6f717495806fe2c65f3f5677c92397c7
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 13:36:19 2006 -0700

    e1000: bump version to 7.0.38-k4
    
    Signed-off-by: Auke Kok <auke.jan.h.kok@intel.com>

commit fdf35d3c49be0ad99e2fd5f5f27c6c0c336a3f11
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 13:36:14 2006 -0700

    e1000: remove changelog in driver
    
    This honours the request to remove the changelog in the driver code.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit a1943b5a796a11ee516f5c085453d653a87ee8fe
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 13:36:10 2006 -0700

    e1000: Fix date string in Makefile
    
    I forgot to update the date string in the Makefile last time.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 76c224bc9fdf108ae6e97553322122f53bdbe75c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 13:36:06 2006 -0700

    e1000: remove leading and trailing whitespace.
    
    Some leading and trailing whitespace made it into the driver code here.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit a42a507cd3af14a2696b7c020996e48c10bf7742
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 13:36:01 2006 -0700

    e1000: remove backslash r debug printfs
    
    This removes unwanted characters in the debug output that should have
    never been there.
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit c653e6351e371b33b29871e5eedf610ffb3be037
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 13:35:57 2006 -0700

    e1000: add shutdown handler back to fix WOL
    
    Someone was waaay too aggressive and removed e1000's reboot notifier
    instead of porting it to the new way of the shutdown handler.  This change
    broke wake on lan.  Add the shutdown handler back in using the same method
    as e100 uses.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 3821720d51b5f304d2c33021a82c8da70f6d6ac9
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 22:33:52 2006 +0200

    [MTD] Export nand_write_raw
    
    The previous _ecc removal / cleanup broke (i)nftl module usage.
    Export the missing symbol.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 85b85fee0cbb9d22b619a4981f046ca49adbc5cd
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 22:03:39 2006 +0200

    [MTD] Mark NAND drivers TOTO and PPChameleon broken
    
    Both drivers can not be fixed and compiled due to missing header files.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 777e1d4a0f3387933f668e7adc81384827975189
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:35:08 2006 -0700

    ixgb: increment version to 1.0.104-k2
    
    Increment the driver version to 1.0.104-k2
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 9b8118df486ffec2f42d43dadaceebd0561dd564
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:35:04 2006 -0700

    ixgb: add tx timeout counter
    
    This adds a TX timeout counter to the ethtool stats, a tx timeout
    debug message, and sets the timer to 5 seconds.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit ec9c3f5d3b8c4dd7340800f02eed87bdf0233e3b
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:34:59 2006 -0700

    ixgb: use DPRINTK and msglvl, and ethtool to control it
    
    Use DPRINTK and msglvl, and ethtool to control it. Add proper names
    to netdev structs and mappings.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit c85fd6f0dedcec411438768bb5ebd133b1ae3347
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:30:02 2006 -0700

    ixgb: remove hardcoded number
    
    This adds a define for an awkward and uncommented value.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 940829e2f9d89d3caddc852bca9018cf503ea719
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:29:58 2006 -0700

    ixgb: add copper 10gig driver id
    
    Add support for Copper 10GbE device ID 109E
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit f017f14b3f18b38f2388e7d6e83a7f6997ee9dd6
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:29:53 2006 -0700

    ixgb: add NETIF_F_LLTX analogous to e1000
    
    add NETIF_F_LLTX code like e1000 has
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 953784d66d8f621a8684d007e526ca26b12d54a1
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:29:50 2006 -0700

    ixgb: fix flow control
    
    Make default flow control only have *sending* of flow control packets
    enabled, and fix to disable / enable flow control correctly. Set flow
    control defaults to disable receiving flow control from the link
    partner, to fix the transmit fifo overlow errata
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 4de17c8c7295d32d4e112e214aa90d8f7006972f
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:29:46 2006 -0700

    ixgb: remove duplicate code setting duplex and speed
    
    Removed duplicate code.  Create ixgb_set_speed_duplex function to contain
    duplicate code.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 96f9c2e277768099479fbed7c3b69c294b1fadef
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue May 23 10:29:41 2006 -0700

    ixgb: fix rare early tso completion
    
    Fix rare early completion when using TSO.  This essentially is the
    e1000 fix, with code that was mostly already written. Another skb frag
    was also needed.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 9223a456da8ed357bf7e0b128c853e2c8bd54614
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 17:21:03 2006 +0200

    [MTD] Remove read/write _ecc variants
    
    MTD clients are agnostic of FLASH which needs ECC suppport.
    Remove the functions and fixup the callers.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 2528e8cdf376d7da24647c442ec1e88c360d76ca
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 16:10:00 2006 +0200

    [MTD] Remove readv/readv_ecc
    
    These functions were never implemented and added only bloat to
    partition and concat code.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9d8522df37f91621a70c5c0dbbf5bf2220b16798
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 16:06:03 2006 +0200

    [MTD] Remove nand writev support
    
    NAND writev(_ecc) support is not longer necessary. Remove it.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 0cddd6c258b2ed3798d12619c28ed0d2b5a669bc
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 15:59:58 2006 +0200

    [MTD] ECC rework broke diskonchip
    
    Fix the diskonchip ecc setup.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9a57d470fd4a77b9732fee97bed29c565c730af0
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 15:58:23 2006 +0200

    [MTD] NAND ECC hwctl function has no return value
    
    Fix the broken prototype
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 4cbb9b80e171107c6c34116283fe38e5a396c68b
Merge: 6dfc6d2... 9fe4854...
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 12:37:31 2006 +0200

    Merge branch 'master' of /home/tglx/work/kernel/git/mtd-2.6/
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 6dfc6d250d0b7ebaa6423c44dcd09fcfe68deabd
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 12:00:46 2006 +0200

    [MTD] NAND modularize ECC
    
    First step of modularizing ECC support.
    - Move ECC related functionality into a seperate embedded data structure
    - Get rid of the hardware dependend constants to simplify new ECC models
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 7aa65bfd6793a56cc3bbce8436abbfea3a7bdd1f
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:54:38 2006 +0200

    [MTD] NAND cleanup nand_scan
    
    Seperate functionality out of nand_scan so the code is more
    readable. No functional change. First step of simplifying
    the nand driver.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 58dd8f2bfdcad1b219a4a92a2aadd8ea8c819f79
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:52:35 2006 +0200

    [MTD] NAND consolidate data types
    
    The NAND driver used a mix of unsigned char, u_char amd uint8_t
    data types. Consolidate to uint8_t usage
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 2c0a2bed9276ebbec5794edc07f66e21e9a1735c
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:50:56 2006 +0200

    [MTD] NAND whitespace and formatting cleanup
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit dcb0932884b801290efd80fbc37630297b98181f
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:49:14 2006 +0200

    [JFFS2] Simplify writebuffer handling
    
    The writev based write buffer implementation was far to complex as
    in most use cases the write buffer had to be handled anyway.
    Simplify the write buffer handling and use mtd->write instead.
    
    From extensive testing no performance impact has been noted.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit ce4c61f184864991881ec789f7524f4b332eaafc
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:43:28 2006 +0200

    [MTD] Add support for NDFC NAND controller
    
    NDFC NAND Flash controller is embedded in PPC EP44x SoCs.
    Add platform driver based support.
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 41796c2ea9b74cdf3bc2c368193d15b8ae8950ca
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:38:59 2006 +0200

    [MTD] Add platform support for NAND
    
    Add the data structures necessary to provide platform device support
    for NAND
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit a36ed2995c56d4f858ecb524a78837473e7115ae
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:37:03 2006 +0200

    [MTD] Simplify NAND locking
    
    Replace the chip lock by a the controller lock. For simple drivers a
    dummy controller structure is created by the scan code.
    This simplifies the locking algorithm in nand_get/release_chip().
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 819d6a32c397534c819d3c72a3947b7e7e4bec4b
Author: Thomas Gleixner <tglx@cruncher.tec.linutronix.de>
Date:   Tue May 23 11:32:45 2006 +0200

    [MTD] Improve software ECC calculation
    
    Unrolling the loops produces denser and much faster code.
    Add a config switch which allows to select the byte order of the
    resulting ecc code. The current Linux implementation has a byte
    swap versus the SmartMedia specification
    
    Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

commit 9fe4854cd1f60273f9a3ece053f4789605f58a5e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 23 00:38:06 2006 +0100

    [JFFS2] Remove flash offset argument from various functions.
    
    We don't need the upper layers to deal with the physical offset. It's
    _always_ c->nextblock->offset + c->sector_size - c->nextblock->free_size
    so we might as well just let the actual write functions deal with that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5fa433942ba4e399f7e28764c9db4ade89e91d40
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Mon May 22 23:18:29 2006 +0200

    [MTD] Introduce MTD_BIT_WRITEABLE
    
    o Add a flag MTD_BIT_WRITEABLE for devices that allow single bits to be
      cleared.
    o Replace MTD_PROGRAM_REGIONS with a cleared MTD_BIT_WRITEABLE flag for
      STMicro and Intel Sibley flashes with internal ECC.  Those flashes
      disallow clearing of single bits, unlike regular NOR flashes, so the
      new flag models their behaviour better.
    o Remove MTD_ECC.  After the STMicro/Sibley merge, this flag is only set
      and never checked.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit c8b229de2b05c2b3e8d282ce260935a88ac030ca
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Mon May 22 23:18:12 2006 +0200

    [MTD] Merge STMicro NOR_ECC code with Intel Sibley code
    
    In 2002, STMicro started producing NOR flashes with internal ECC protection
    for small blocks (8 or 16 bytes).  Support for those flashes was added by me.
    In 2005, Intel Sibley flashes copied this strategy and Nico added support for
    those.  Merge the code for both.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit 28318776a80bc3261f9af91ef79e6e38bb9f5bec
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Mon May 22 23:18:05 2006 +0200

    [MTD] Introduce writesize
    
    At least two flashes exists that have the concept of a minimum write unit,
    similar to NAND pages, but no other NAND characteristics.  Therefore, rename
    the minimum write unit to "writesize" for all flashes, including NAND.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit 8ca9ed5db3aea8d27989c239e8a2f79b839f1e99
Author: Joern Engel <joern@wh.fh-wedel.de>
Date:   Mon May 22 23:17:23 2006 +0200

    [MTD] Use single flag to mark writeable devices.
    
    Two flags exist to decide whether a device is writeable or not.  None of
    those two flags is checked for independently, so they are clearly redundant,
    if not an invitation to bugs.  This patch removed both of them, replacing
    them with a single new flag.
    
    Signed-off-by: Joern Engel <joern@wh.fh-wedel.de>

commit df8ccb9bf1ca360581a94c2245efb9fa613fbb29
Author: Marcin Juszkiewicz <openembedded@hrw.one.pl>
Date:   Mon May 22 10:56:55 2006 +0200

    [PATCH] hostap: new pcmcia IDs
    
    Add two Prism cards to hostap_cs driver.
    
      product info: "Pretec", "CompactWLAN Card 802.11b", "2.5"
      manfid: 0x0156, 0x0002
    
      product info: "U.S. Robotics", "IEEE 802.11b PC-CARD", "Version 01.02", ""
      manfid: 0x0156, 0x0002
    
    Signed-off-by: Marcin Juszkiewicz <openembedded@hrw.one.pl>
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 01d654d25d23fb73deb7904ce1c0b3a0f5fc2908
Merge: 3b38f31... 82464e6...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon May 22 14:45:29 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 82464e63a0653a4d8e5c684fcb41b163e6357c6d
Author: Florin Malita <fmalita@gmail.com>
Date:   Sun May 21 14:04:44 2006 -0700

    [PATCH] orinoco: possible null pointer dereference in orinoco_rx_monitor()
    
    If the skb allocation fails, the current error path calls
    dev_kfree_skb_irq() with a NULL argument.  Also, 'err' is not being used.
    
    Coverity CID: 275.
    
    Signed-off-by: Florin Malita <fmalita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 3b38f317e529d8396377dafc7d95a1451a151df5
Merge: 5d25ea7... 353b28b...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Mon May 22 14:26:25 2006 -0400

    Merge branch 'from-linus' into upstream

commit 987d47b71a85bd83dc40c870abee3b64f2002163
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 22 16:32:05 2006 +0100

    [JFFS2] Put list of nodes in common part of ic/x_ref/x_datum structure
    
    We'll be using a proper list of nodes in the jffs2_xattr_datum and
    jffs2_xattr_ref structures, because the existing code to overwrite
    them is just broken. Put it in the common part at the front of the
    structure which is shared with the jffs2_inode_cache, so that the
    jffs2_link_node_ref() function can do the right thing.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0eac940b8a087576c66ecf8e0f294f2ceb3b607b
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 22 16:29:23 2006 +0100

    [JFFS2] Add some preemptive BUG checks for XATTR code
    
    In a couple of places, we assume that what's at the end of the
    ->next_in_ino list is a struct jffs2_inode_cache. Let's check
    for that, since we expect it to change soon.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit fcb7578719529898aef9edce8e409e457a1c2d15
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 22 15:23:10 2006 +0100

    [JFFS2] Extend jffs2_link_node_ref() to link into per-inode list too.
    
    Let's avoid the potential for forgetting to set ref->next_in_ino, by doing
    it within jffs2_link_node_ref() instead.
    
    This highlights the ugliness of what we're currently doing with
    xattr_datum and xattr_ref structures -- we should find a nicer way of
    dealing with that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a1b563d652b54647ffacb2d6edf7859d3e97a723
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 22 13:55:46 2006 +0100

    [JFFS2] Initialise ref->next_in_ino when marking dirty space in wbuf flush
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3b79673cfae93d0ed63eceb058bb26aba602a278
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 22 12:15:47 2006 +0100

    [JFFS2] Fix accounting error in jffs2_link_node_ref()
    
    When filing REF_OBSOLETE nodes, we'd add their size to the global
    'dirty_size' count, but then to the eraseblock's 'used_size' count.
    That's not clever.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 06c6764b5830798c39617b24497cade90451592f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 22 11:27:14 2006 +0100

    [JFFS2] Fix dummy jffs2_sum_scan_sumnode() macro for !SUMMARY case.
    
    I added an argument to the real function...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2c23d62abb820e19c54012520f08a198c2233a85
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 22:51:13 2006 +0100

    Move inclusion of <linux/compat.h> out of user scope in asm-x86_64/mtrr.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0d25971d7c969debf76f9fab6d6b37cb62408f55
Merge: 615191b... ca89a51...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 19:05:55 2006 +0100

    Merge git://git.infradead.org/jffs2-devel-2.6

commit 615191bb1dfc6980e7c7a85225444d860d74b343
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 19:03:21 2006 +0100

    [MTD] Account for MODULE_SYMBOL_PREFIX when requesting NOR chip driver
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ecde26313076e5055dcd54d6537632275346203f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 18:38:51 2006 +0100

    [MTD] Use symbol_request() in old DiskOnChip probe code to find actual driver
    
    The previous code wouldn't work correctly on architectures which have a
    non-empty MODULE_SYMBOL_PREFIX, and this version is neater if slightly
    less optimal in the built-in case.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3d12c0c75db0cd85beb11c4e2d86a49cabe3cfff
Author: Jonathan McDowell <noodles@earth.li>
Date:   Sun May 21 18:11:55 2006 +0100

    [MTD] Add Amstrad Delta NAND support
    
    The patch below adds support for the NAND device on the Amstrad Delta.
    This is a 32MiB 8bit Toshiba device, with the data bus connected to the
    OMAP MPUIO pins and ALE, CLE, NCE, NRE, NWE and NWP all connected to the
    Delta's latch2 16bit latch.
    
    Signed-Off-By: Jonathan McDowell <noodles@earth.li>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ca89a517fa577e6f26621463d3aa4f3c3d530b1e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 13:29:11 2006 +0100

    [JFFS2] Finally eliminate __totlen field from struct jffs2_raw_node_ref
    
    Well, almost. We'll actually keep a 'TEST_TOTLEN' macro set for now, and keep
    doing some paranoia checks to make sure it's all working correctly. But if
    TEST_TOTLEN is unset, the size of struct jffs2_raw_node_ref drops from 16
    bytes to 12 on 32-bit machines. That's a saving of about half a megabyte of
    memory on the OLPC prototype board, with 125K or so nodes in its 512MiB of
    flash.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 010b06d6d07d9fa5ea6070aa72bb3e0de1761ab7
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 13:15:59 2006 +0100

    [JFFS2] Locking issues in summary write code.
    
    We can't use jffs2_scan_dirty_space() because it doesn't do any locking; it's
    only for use at scan time -- hence the 'scan' in the name.
    
    Also, don't allocate refs while we have c->erase_completion_lock held.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9167e0f811cbe28564c44a99c2f07b0ce5b368cf
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 13:13:45 2006 +0100

    [JFFS2] Remove stray kfree of summary info in XATTR code.
    
    We don't allocate this locally any more -- it's given to us and owner by
    our caller. Also improve the debug messages a little.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0bcc099d6d1a7b9fa2adf7c19812e4e816915e10
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 13:00:54 2006 +0100

    [JFFS2] File node reference for wasted space when flushing wbuf
    
    Next step in ongoing campaign to file a struct jffs2_raw_node_ref for every
    piece of dirty space in the system, so that __totlen can be killed off....
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b64335f2b740d6f5dbf5d3b04af30d407bf599f5
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 04:36:45 2006 +0100

    [JFFS2] Add length argument to jffs2_add_physical_node_ref()
    
    If __totlen is going away, we need to pass the length in separately.
    Also stop callers from needlessly setting ref->next_phys to NULL,
    since that's done for them... and since that'll also be going away soon.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 49f11d40751b974f3b829f208eefa6f97a10cac8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 04:00:01 2006 +0100

    [JFFS2] Mark gaps in summary list as dirty space
    
    Make sure we allocate a ref for any dirty space which exists between nodes
    which we find in an eraseblock summary.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 25090a6b23906552cf3d204aa421f811327e1b15
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 03:57:56 2006 +0100

    [JFFS2] Discard remaining free space when filing a dirty block in scan.
    
    The incoming ref_totlen() calculation is going to rely on the existence
    of nodes which cover all dirty space. We can't just tweak the accounting
    data any more; we have to call jffs2_scan_dirty_space() to do it.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 68270995f29f1a82b3eaab01df63ea7e721e2fa6
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 03:46:05 2006 +0100

    [JFFS2] Introduce jffs2_scan_dirty_space() function.
    
    To eliminate the __totlen field from struct jffs2_raw_node_ref, we need
    to allocate nodes for dirty space instead of just tweaking the accounting
    data. Introduce jffs2_scan_dirty_space() in preparation for that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7807ef7ba2a41c05f6197381f572dd38baa6c1ce
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 03:45:27 2006 +0100

    [JFFS2] Fix summary handling of unknown but compatible nodes.
    
    For RWCOMPAT and ROCOMPAT nodes, we should still allow the mount to
    succeed. Just abandon the summary and fall through to the full scan.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3560160aa26ebced1944aaa2e7e436d2a1b1bf70
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 01:28:05 2006 +0100

    [JFFS2] Fix memory leak in scan code; improve comments.
    
    If we had to allocate extra space for the summary node, we weren't
    correctly freeing it when jffs2_sum_scan_sumnode() returned nonzero --
    which is both the success and the failure case. Only when it returned
    zero, which means fall through to the full scan, were we correctly freeing
    the buffer.
    
    Document the meaning of those return codes while we're at it.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6171586a7ae5198988774e8480631e8d15f65dfe
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 21 00:02:06 2006 +0100

    [JFFS2] Correct handling of JFFS2_FEATURE_RWCOMPAT_COPY nodes.
    
    We should preserve these when we come to garbage collect them, not let
    them get erased. Use jffs2_garbage_collect_pristine() for this, and make
    sure the summary code copes -- just refrain from writing a summary for any
    block which contains a node we don't understand.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit fb9fbbcc9389edabb172ac1b6419c01e32046787
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 20 20:08:42 2006 +0100

    [JFFS2] Correct accounting of erroneous cleanmarkers and failed summaries.
    
    It should all be counted as dirty space, not wasted and _definitely_ not
    unchecked.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f1f9671bd8f7d2ac6a918bad806ab5bdc0daaf4e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 20 19:45:26 2006 +0100

    [JFFS2] Introduce jffs2_link_node_ref() function to reduce code duplication
    
    The same sequence of code was repeated in many places, to add a new
    struct jffs2_raw_node_ref to an eraseblock and adjust the space accounting
    accordingly. Move it out-of-line.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0cfc7da3ff4b39a3aac261ab3f6b1329e2485653
Merge: 1417fc4... 20a92fc...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 20 17:27:32 2006 +0100

    Merge git://git.infradead.org/jffs2-xattr-2.6
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1417fc44ee923418df3adadeb4846c891bba1ba5
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 20 16:20:19 2006 +0100

    [JFFS2] Reduce calls to ref_totlen() in jffs2_mark_node_obsolete()
    
    We were calling ref_totlen() 18 times. Even before that becomes a real
    function rather than just a dereference, apparently some compilers still
    suck anyway. It'll _certainly_ suck after ref_totlen() becomes more
    complicated, so calculate it once and don't rely on CSE.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9641b784ff82cf0a48a6c70ef9867f5fd728de67
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 20 16:13:34 2006 +0100

    [JFFS2] Optimise reading of eraseblock summary nodes
    
    This improves the time to mount 512MiB of NAND flash on my OLPC prototype
    by about 4%. We used to read the last page of the eraseblock twice -- once
    to find the offset of the summary node, and again to actually _read_ the
    summary node. Now we read the last page only once, and read more only if
    we need to.
    
    We also don't allocate a new buffer just for the summary code -- we use
    the buffer which was already allocated for the scan. Better still, if the
    'buffer' for the scan is actually just a pointer directly into NOR flash,
    we use that too, avoiding the memcpy() which we used to do.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 979dca3826841e5dc9170c28f20bd75ece266a9a
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Fri May 19 11:55:58 2006 -0700

    [SCSI] imm: no need for unchecked_isa_dma
    
    Relax the lowmem bounce buffer requirement for imm so that any
    low memory page will do -- they don't need to be below the
    ISA 16 MB limit, just need to be mapped in low memory.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 818bf493525d2a0ce3ddaefb2b78db1635596666
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:10:01 2006 -0700

    [SCSI] qla2xxx: Update version number to 8.01.05-k2.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 21333b481159a78b5379b8ddb400efafd5857d55
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:56 2006 -0700

    [SCSI] qla2xxx: Correct issue where driver improperly issued SNS commands in N2N topologies.
    
    Semantic changes in ISP24xx firmware behaviour inadvertently
    caused the driver to believe an F-port topology was present in an
    N_port-to-N_port configuration.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d4e3e04d789ba23027c66e176b10ac7477906948
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:50 2006 -0700

    [SCSI] qla2xxx: Consolidate firmware-dump handling across ISPs.
    
    Simplify and centralise buffer allocation/deallocation, as
    there's no point in having two memory request methods.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit cb63067a772c0149184309a1f232d62c81a93673
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:45 2006 -0700

    [SCSI] qla2xxx: Consolidate "qla2xxx" string usage to a #define.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 47f5e069e4d03dda36e3a13f3e20147efd710340
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:39 2006 -0700

    [SCSI] qla2xxx: Use PCI_DEVICE() for pci_device_id definition.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 441d1072040823feb4950a21094860bfddd310c0
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:34 2006 -0700

    [SCSI] qla2xxx: Remove obsolete firmware-loader-module support.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4971cd221ad3f1266b87aa0e996d082d91bac2a6
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:27 2006 -0700

    [SCSI] qla2xxx: Remove unused port-type RSCN handling code.
    
    Expandind on the previous commit:
    
    	commit 79f89a4296ff22f09baf538d4ff2a6d0c3097a73
    	Author: andrew.vasquez@qlogic.com <andrew.vasquez@qlogic.com>
    	Date:   Fri Jan 13 17:05:58 2006 -0800
    
    	[SCSI] qla2xxx: Disable port-type RSCN handling via driver state-machine.
    
    and given:
    
    - the process-context requirements of the FC transport
      rport-APIs.
    - lack of port-type RSCN processing logic for ISP24xx and newer
      chips.
    
    it's time now to remove the state-machine logic from mainline.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 75bc4190701d3c6bdffdc21c8a9e17751de9f77a
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:22 2006 -0700

    [SCSI] qla2xxx: Drop unused driver cruft.
    
    - structure definitions.
    - structure members.
    - #define's.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5341e868fb2e98090a68860a35bf4c11d7f8e5da
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:16 2006 -0700

    [SCSI] qla2xxx: Add support for alternate WWN NVRAM setting.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fd0e7e4dd507cd21d714d34a1cc1a620d01e9772
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:11 2006 -0700

    [SCSI] qla2xxx: Correct endianess comparisons during ISP24xx NVRAM configuration.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ffb39f0324b56bacaabac26133143cf861d0e9f9
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:06 2006 -0700

    [SCSI] qla2xxx: ABBA lock ordering fix.
    
    In qla2x00_reset_chip the driver first takes the hardware lock,
    and then later on takes the mbx lock.
    
    In the mailbox_command code.. it goes the other way around.
    
    Discovered with the lock validator.
    
    Cc: Ingo Molnar <mingo@elte.hu>
    Cc: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d1c61909c05ead100f855e640fba53925d0665ac
Author: Andrew Vasquez <andrew.vasquez@qlogic.com>
Date:   Wed May 17 15:09:00 2006 -0700

    [SCSI] qla2xxx: Update ISP24xx firwmare loading heuristics.
    
    If firmware image is unavailable via request_firwmare(), then
    attempt to load the image (likely out-of-date) stored in flash
    memory.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ed17c71b5d11327efd40666fd621486f964fae4f
Author: Ravi Anand <ravi.anand@qlogic.com>
Date:   Wed May 17 15:08:55 2006 -0700

    [SCSI] qla2xxx: Use FW calculated residual count for underrun handling.
    
    With ISP24XX and ISP54XX parts.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 45aeaf1e8e4552ef82d3ff7a06e526e6d635f767
Author: Ravi Anand <ravi.anand@qlogic.com>
Date:   Wed May 17 15:08:49 2006 -0700

    [SCSI] qla2xxx: Add support for new flash part.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 57680080baf3a8e289fad7f9e3c43ed58309e1eb
Author: Ravi Anand <ravi.anand@qlogic.com>
Date:   Wed May 17 15:08:44 2006 -0700

    [SCSI] qla2xxx: Don't wait for loop transition to complete if LOOP_DEAD state is attained.
    
    Signed-off-by: Andrew Vasquez <andrew.vasquez@qlogic.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit e0ecae8da26d94dd878ff1d939c5aa4224df18a4
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu May 18 20:31:43 2006 -0500

    [SCSI] iscsi: update version
    
    update version
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 656cffc95f0cb8211aa75eaca249e6ff4f59ec83
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu May 18 20:31:42 2006 -0500

    [SCSI] iscsi: fix command requeues during iscsi recovery
    
    Do not flush queues then block session. This will cause commands
    to needlessly swing around on us and remove goofy
    recovery_failed field and replace with state value.
    
    And do not start recovery from within the host reset function.
    This causeis too many problems becuase open-iscsi was desinged to
    call out to userspace then have userpscae decide if we should
    go into recovery or kill the session.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 790f39a2d5f03623b027f340b945f135d006ceba
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu May 18 20:31:39 2006 -0500

    [SCSI] iscsi: support mutiple daemons
    
    Patch from david.somayajulu@qlogic.com and cleaned up by Tomo.
    
    qla4xxx is going to have a different daemon so this patch
    just routes the events to the right daemon.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ffbfe92533810bf1bb76fd275400825ef8898ed9
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu May 18 20:31:36 2006 -0500

    [SCSI] iscsi: kill dtask mempools
    
    Discovered by steven@hayter.me.uk and patch by michaelc@cs.wisc.edu
    
    The dtask mempool is reserving 261120 items per session! Since we are now
    sending headers with sendmsg there is no reason for the mempool and that
    was causing us to us carzy amounts of mem. We can preallicate a header in
    the r2t and task struct and reuse them
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit d36ab6f3212053b260214bc915687765e2fd1178
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu May 18 20:31:34 2006 -0500

    [SCSI] iscsi: only preallocate login buffer
    
    We only use the mtask data buffer for login tasks so we do not
    need to preallocate a buffer for every mtask. This saves
    8 * 31 KB.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6e458cc943dd494ac68b570418f187883e555362
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu May 18 20:31:31 2006 -0500

    [SCSI] iscsi: dont use sendpage for iscsi headers
    
    From Zhen and ported by Mike:
    
    Don't use sendpage for the headers. sendpage for the pdu headers
    does not seem to have a performance impact, makes life harder
    for mutiple data pdus to be in flight and still trips up some
    network cards when it is from slab mem.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 07fb75a50600c0c480b40c6d11dbc993f21bc2bc
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun May 14 00:39:38 2006 +0200

    [SCSI] fix (unlikely) memory leak in DAC960 driver
    
    The Coverity checker found a memory leak (bug nr. 1245) in
     drivers/block/DAC960.c::DAC960_V2_ProcessCompletedCommand()
    
    The leak is pretty unlikely since it requires that the first of two
    successive kmalloc() calls fail while the second one succeeds. But it can
    still happen even if it's unlikely.
    
    If the first call that allocates 'PhysicalDeviceInfo' fails but the one
    that allocates 'InquiryUnitSerialNumber' succeeds, then we will leak the
    memory allocated to 'InquiryUnitSerialNumber' when the variable goes out
    of scope.
    
    A simple fix for this is to change the existing code that frees
    'PhysicalDeviceInfo' if that one was allocated but
    'InquiryUnitSerialNumber' was not, into a check for either pointer
    being NULL and if so just free both. This is safe since kfree() can
    deal with being passed a NULL pointer and it avoids the leak.
    
    While I was there I also removed the casts of the kmalloc() return
    value since it's pointless.
    I also updated the driver version since this patch changes the workings of
    the code (however slightly).
    
    This issue could probably be fixed a lot more elegantly, but the code
    is a big mess IMHO and I just took the least intrusive route to a fix
    that I could find instead of starting on a cleanup as well (that can
    come later).
    
    Please consider for inclusion.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5b9851b5511833a96fea2196971b5709ef019136
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed May 10 09:13:37 2006 -0700

    [SCSI] aacraid: remove unneeded list
    
    Received From Mark Salyzyn
    
    The queue tracking is just not being used, not even for debugging. Information
    about outstanding commands can be acquired from the scsi structures.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit df3b7668715f9acfe6ff37dd886f68e46ccd677e
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed May 10 09:13:11 2006 -0700

    [SCSI] aacraid: sa race condition fix
    
    Received From Mark Salyzyn
    
    A race condition existed that could result in a lost completion of a
    command to the ppc based cards.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 404d9a900b5bc83a3780ec337ca6fdcb04b766c0
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed May 10 09:12:48 2006 -0700

    [SCSI] aacraid: adjustable timeouts
    
    Received From Mark Salyzyn
    
    Add the ability to adjust for unusual corner case failures. Both of
    these additional module parameters deal with embedded, non-intel or
    complicated system scenarios.
    
    Aif_timeout can be increased past the default 2 minute timeout to drop
    application registrations when a system has an unusually high event load
    resulting from continuing management requests, or simultaneous builds,
    or sluggish user space as a result of system load.
    
    Startup_timeout can be increased past the default 3 minute timeout to
    drop an adapter initialization for systems that have a very large number
    of targets, or slow to spin-up targets, or a complicated set of array
    configurations that extend the time for the firmware to declare that it
    is operational. This timeout would only have an affect on non-intel
    based systems, as the (more patient) BIOS would generally be where the
    startup delay would be dealt with.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 3c1e0cca9469bd19590ade25f6d9f94da2710d5b
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed May 10 09:12:05 2006 -0700

    [SCSI] aacraid: optimize sg alloc
    
    Received From Mark Salyzyn
    
    Slight space and speed efficiency improvement.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit edb527ce35b0c86e72ed518af255f02e1cecb3b7
Author: Mark Haverkamp <markh@osdl.org>
Date:   Wed May 10 09:11:38 2006 -0700

    [SCSI] aacraid: remove unneeded locking
    
    Received From Mark Salyzyn
    
    Since new commands to the card are quiesced, respect the changes in
    the SCSI error path which dropped locking around the hba reset handler
    and similarly drop the lock requirement in the driver's path.
    
    Signed-off-by: Mark Haverkamp <markh@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6c8b44abc86a3e23dd1a22c0ee187f06bd7c7f5d
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat May 20 10:17:21 2006 +0100

    [MTD] Avoid 64-bit division in mtdconcat
    
    WARNING: "__moddi3" [drivers/mtd/mtdconcat.ko] undefined!
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b74ba22f030eb7ab88f7d8954ad18ecc0ac5ce3c
Author: Thomas Glanzmann <sithglan@stud.uni-erlangen.de>
Date:   Fri May 12 10:00:41 2006 +0200

    [PATCH] Add PCI ID for the Intel IDE Controller which is in the Intel Mac Minis shipped in first quarter 2006
    
    Signed-off-by: Thomas Glanzmann <sithglan@stud.uni-erlangen.de>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit f8bbfc247efb0e5fa69094614380768ce79afe17
Author: Tejun Heo <htejun@gmail.com>
Date:   Fri May 19 21:07:05 2006 +0900

    [PATCH] SCSI: make scsi_implement_eh() generic API for SCSI transports
    
    libata implemented a feature to schedule EH without an associated EH
    by manipulating shost->host_eh_scheduled in ata_scsi_schedule_eh()
    directly.  Move this function to scsi_error.c and rename it to
    scsi_schedule_eh().  It is now an exported API for SCSI transports and
    exported via new header file drivers/scsi/scsi_transport_api.h
    
    This patch also de-export scsi_eh_wakeup() which was exported
    specifically for ata_scsi_schedule_eh().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a20f33ffde8ba5fb27666aa1e228a45b7e3b8dcb
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue May 16 12:58:24 2006 +0900

    [PATCH] libata: enforce default EH actions
    
    LLDDs rely on libata that certain EH actions are automatically taken
    on some errors.  If the port is frozen or one or more qc's have failed
    with HSM violation or timeout, softreset is enforced (LLDD can ask for
    storonger EH action at will).  If any other error condition exists,
    libata EH always revalidates.
    
    This behavior existed in earlier revisions of new EH but lost during
    development process.  This patch restores it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit eec4c3f317991dc85c786ffccd9c1a8620c41b18
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Thu May 18 17:51:10 2006 +0800

    [PATCH] libata: use qc->result_tf for temp taskfile storage
    
    Use qc->result_tf for temp taskfile storage.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3655d1d323386e001c786af10f0a3f39f438f03b
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri May 19 11:43:04 2006 +0800

    [PATCH] libata: Fix the HSM error_mask mapping (was: Re: libata-tj and SMART)
    
    Fix the HSM error_mask mapping.
    
    Changes:
    - Better mapping in ac_err_mask()
    - In HSM_ST_FIRST ans HSM_ST state, check ATA_ERR|ATA_DF and map it to AC_ERR_DEV instead of AC_ERR_HSM.
    - In HSM_ST_FIRST and HSM_ST state, map DRQ=1 ERR=1 to AC_ERR_HSM.
    - For PIO data in and DRQ=1 ERR=1, add check after the junk data block is read.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3d71b3b0b634b1a5ba8632fd9ec998e0e4aedfdb
Merge: 8d4ee71... e2a7f77...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat May 20 00:36:08 2006 -0400

    Merge branch 'upstream-fixes' into upstream
    
    Conflicts:
    
    	drivers/scsi/libata-core.c

commit 4e3ceac609cce39cb96e0eb8604934592371ed8c
Merge: badc48e... bb02aac...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat May 20 00:26:26 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit badc48e6605ddeeb2484afae5993c859494decaa
Merge: 753a6c4... 2f880b6...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat May 20 00:03:38 2006 -0400

    Merge branch 'master' into upstream

commit 5fc3dbc418e01345e25e96b3192a1c46051c3fdc
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 20 02:41:34 2006 +0100

    [MTD] Use __symbol_get() instead of symbol_get() in NOR chip probe
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit dcb6592d72923123e3e479134f9381e0133d7d9d
Author: Andrew Morton <akpm@osdl.org>
Date:   Fri May 19 18:06:34 2006 -0700

    git-mtd: symbol_get() fix
    
    drivers/mtd/devices/docprobe.c: In function `DoC_Probe':
    drivers/mtd/devices/docprobe.c:338: warning: assignment from incompatible pointer type
    drivers/mtd/devices/docprobe.c:341: warning: assignment from incompatible pointer type
    
    Cc: David Woodhouse <dwmw2@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8e4482fba21d15da99f39a13396d3361e810d199
Author: Ferenc Havasi <havasi@inf.u-szeged.hu>
Date:   Fri May 19 21:00:36 2006 +0100

    [JFFS2] Remove forgotten summary code
    
    Remove forgotten lines from jffs2_scan_eraseblock() which
    were unnecessary and may cause problem in some environments.
    
    Thanks to Alexander Belyakov <alexander.belyakov@intel.com>.
    
    Signed-off-by: Ferenc Havasi <havasi@inf.u-szeged.hu>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3c06da5ae5358e9d325d541a053e1059e9654bcc
Merge: 4d1f3f2... a54c9d3...
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 19 15:02:42 2006 +1000

    Merge ../linux-2.6

commit 4d1f3f25d9c303d1ce63b42cc94c54ac0ab2e950
Author: Jimi Xenidis <jimix@watson.ibm.com>
Date:   Thu May 18 17:03:05 2006 -0500

    [PATCH] powerpc: Auto reserve of device tree blob
    
    A devtree compiler (dtc) generated devtree blob is "relocatable" and so
    does not contain a reserved_map entry for the blob itself.  This means
    that if passed to Linux, Linux will not get lmb_reserve() the blob and
    it could be over.  The following patch will explicitly reserve the
    "blob" as it was given to us and stops prom_init.c from creating a
    reserved mapping for the blob.
    
    NOTE: that the dtc/kexec should not generate the blob reservation entry.
    Although if they do, LMB reserver handles overlaps.
    
    Signed-off-by: Jimi Xenidis <jimix@watson.ibm.com>
    Acked-by: Michael Neuling <mikey@neuling.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 1dc461f0b03fab309eb9214df1c9b586aeaf3b22
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu May 18 17:21:26 2006 +1000

    [PATCH] powerpc: the iSeries vio lan driver changed device type
    
    So the IOMMU table building code needs to match.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4c76e0bcdeac27b45d55955f073a97ff8452a42f
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Thu May 18 18:06:37 2006 +1000

    [PATCH] powerpc: pseries: Use generic dma-window parsing function
    
    Change the pseries iommu init code to use the new of_parse_dma_window()
    to parse the ibm,dma-window and ibm,my-dma-window properties of pci and
    virtual device nodes.
    
    Also, clean up vio_build_iommu_table() a little.
    
    Tested on pseries, with both vio and pci devices.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d4ad66faecc4dd9f3db14e0b013741a6f867b089
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Thu May 18 18:05:15 2006 +1000

    [PATCH] powerpc: Add of_parse_dma_window()
    
    Add a function for generic parsing of dma-window properties (ie,
    ibm,dma-window and ibm,my-dma-window) of pci and virtual device nodes.
    
    This function will also be used by cell.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    Acked-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8ae5b2801a0beb10a55a7ebd5140482e2f84c3fa
Author: Jimi Xenidis <jimix@watson.ibm.com>
Date:   Wed May 17 12:00:35 2006 -0400

    [PATCH] powerpc: udbg_printf() formatting attribute
    
    This patch allows the compiler to catch any printf-like mismatches for
    udbg_printf().  After some brute force building I've only found issues
    with my own code and lparcfg.c It could break some developers, but
    IMHO that would be goodness.
    
    Signed-off-by: Jimi Xenidis <jimix@watson.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 35dd54326e857f1648c7cc1028e8d5e1dbe04992
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Thu May 18 11:16:11 2006 +1000

    [PATCH] powerpc: Move crashkernel= handling into the kernel.
    
    This was missing a quilt ref.
    
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 473104134b35ce1c3ca77b738c561d6c215adc1b
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed May 17 18:00:49 2006 +1000

    [PATCH] powerpc: Kdump header cleanup
    
    We need to know the base address of the kdump kernel even when we're not a
    kdump kernel, so add a #define for it. Move the logic that sets the kdump
    kernelbase into kdump.h instead of page.h.
    
    Rename kdump_setup() to setup_kdump_trampoline() to make it clearer what it's
    doing, and add an empty definition for the !CRASH_DUMP case to avoid a
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 2babf5c2ec2f2d5de3e38d20f7df7fd815fd10c9
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed May 17 18:00:46 2006 +1000

    [PATCH] powerpc: Unify mem= handling
    
    We currently do mem= handling in three seperate places. And as benh pointed out
    I wrote two of them. Now that we parse command line parameters earlier we can
    clean this mess up.
    
    Moving the parsing out of prom_init means the device tree might be allocated
    above the memory limit. If that happens we'd have to move it. As it happens
    we already have logic to do that for kdump, so just genericise it.
    
    This also means we might have reserved regions above the memory limit, if we
    do the bootmem allocator will blow up, so we have to modify
    lmb_enforce_memory_limit() to truncate the reserves as well.
    
    Tested on P5 LPAR, iSeries, F50, 44p. Tested moving device tree on P5 and
    44p and F50.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 846f77b08c8301682ded5ce127c56397327a60d0
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed May 17 18:00:45 2006 +1000

    [PATCH] powerpc: Parse early parameters earlier
    
    Currently we have call parse_early_param() earliyish, but not really very
    early. In particular, it's not early enough to do things like mem=x or
    crashkernel=blah, which is annoying.
    
    So do it earlier. I've checked all the early param handlers, and none of them
    look like they should have any trouble with this. I haven't tested the
    booke_wdt ones though.
    
    On 32-bit we were doing the CONFIG_CMDLINE logic twice, so don't.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 480f6f35a149802a94ad5c1a2673ed6ec8d2c158
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Wed May 17 18:00:41 2006 +1000

    [PATCH] powerpc: Make early xmon logic immune to location of early parsing
    
    Currently early_xmon() calls directly into debugger() if xmon=early is passed.
    This ties the invocation of early xmon to the location of parse_early_param(),
    which might change.
    
    Tested on P5 LPAR and F50.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f9a6ee1afb84fd767508428ec5d1df4fb60a03ad
Author: Rich Townsend <rhdt@bartol.udel.edu>
Date:   Mon Dec 19 23:07:00 2005 -0500

    ACPI: replace spin_lock_irq with mutex for ec poll mode
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5764
    
    Signed-off-by: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9dabbfbab312909782b26580d71e3977622fab6e
Author: Michal Ostrowski <mostrows@watson.ibm.com>
Date:   Mon May 15 08:51:07 2006 -0400

    [PATCH] powerpc: Create /proc/rtas, /proc/ppc64/rtas if RTAS exists.
    
    Use the existence of RTAS device tree node to determine if
    /proc/rtas. /proc/ppc64/rtas are to be created.  Using machine type
    is not reliable (i.e. Maple-like machines may have RTAS).
    
    Signed-off-by: Michal Ostrowski <mostrows@watson.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit de0fe3b83f4bb47a0a6b47897bb3800862194016
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon May 15 13:44:01 2006 +1000

    [PATCH] powerpc: update iSeries viocd and viotape device-tree
    
    Make their device_type entries more generic and their compatible entries
    more specific.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dc3c9b8ca2ec15cf56d071b85f3734a07bf5f808
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon May 15 13:42:29 2006 +1000

    [PATCH] powerpc: update iSeries vdevice
    
    Make it look more like the pSeries vdevice tree.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit fbabeb60ba783bf7a43858ecefc5066ac1f07162
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon May 15 13:41:22 2006 +1000

    [PATCH] powerpc: update iSeries viodasd device-tree entries
    
    These devices should have device_type block and a unique compatible entry.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 07fb3f454cc9e0f656e378a6feb5bdd6cac4bd41
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Mon May 15 13:39:47 2006 +1000

    [PATCH] powerpc: update iseries_veth device-tree information
    
    Make the device-tree information more generic and more
    like the pSeries virtual lan device. Also use the MAC
    address from the device tree.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d6b89a196dfb03fdfbe3d574ab6773fe14a1d2c6
Author: Michael Neuling <mikey@neuling.org>
Date:   Tue May 9 11:33:38 2006 -0500

    [PATCH] powerpc: whitespace cleanup in reg.h
    
    In reg.h we mostly have #define<space> but there are a few #define<tab>
    around.  Clean these up so we use space exclusively.
    
    Signed-off-by: Michael Neuling <mikey@neuling.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 485a2d54dbc7cf939bd0c22daad74e2cf6f001d7
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue May 9 16:03:51 2006 +1000

    [PATCH] powerpc: Make early debugging options behave with oldconfig
    
    If you undefine all the early debugging options and then run make oldconfig,
    you don't get prompted to see if you want to enable any of them. This is
    annoying.
    
    AFAICT we can't do this just with a choice, because the choice is either
    optional, in which case we don't get prompted, or not in which case we _must_
    select early debugging.
    
    So add a bool which controls whether we have early debugging at all, and then
    if that's enabled provide the choice. The extra bool will actually be useful
    in another patch I have lying around, so this is a win-win.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit b26f100d89c87060b561c3108582b7cb81521df8
Author: Geoff Levand <geoffrey.levand@am.sony.com>
Date:   Fri May 19 14:24:18 2006 +1000

    [PATCH] powerpc: remove do-nothing cpu setup routines
    
    Removed the do-nothing routines __setup_cpu_power3 and
    __setup_cpu_power4 and replaced them with a null pointer check
    in the caller.  Also removed the Cell processor specific
    routine __setup_cpu_be which improperly accessed the
    hypervisor page size configuration at SPR HID6.
    
    Signed-off-by: Geoff Levand <geoffrey.levand@am.sony.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4240545661fc0ac25122f166e96633527150300c
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Fri Apr 28 17:39:38 2006 -0500

    [PATCH] powerpc/pseries: Increment fail counter in PCI recovery
    
    When a PCI device driver does not support PCI error recovery,
    the powerpc/pseries code takes a walk through a branch of code
    that resets the failure counter. Because of this, if a broken
    PCI card is present, the kernel will attempt to reset it an
    infinite number of times. (This is annoying but mostly harmless:
    each reset takes about 10-20 seconds, and uses almost no CPU time).
    
    This patch preserves the failure count across resets.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit aef9ab47841af45888d950baa6448072cc70bdd5
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri May 19 00:28:49 2006 +0100

    [JFFS2] Support new device nodes
    
    Device node major/minor numbers are just stored in the payload of a single
    data node. Just extend that to 4 bytes and use new_encode_dev() for it.
    
    We only use the 4-byte format if we _need_ to, if !old_valid_dev(foo).
    This preserves backwards compatibility with older code as much as
    possible. If we do make devices with major or minor numbers above 255, and
    then mount the file system with the old code, it'll just read the first
    two bytes and get the numbers wrong. If it comes to garbage-collect it,
    it'll then write back those wrong numbers. But that's about the best we
    can expect.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 877fbae3d51ba792639535bfc0f428154b8da605
Merge: f18fc72... 7e99026...
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 19 09:23:47 2006 +1000

    Merge branch 'for_paulus' of git://git.kernel.org/pub/scm/linux/kernel/git/galak/powerpc

commit 20a92fc74c5c91c7bc5693d51acc2b99aceb0465
Merge: 21b9879... f6a673b...
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Fri May 19 00:43:53 2006 +0900

    Merge git://git.infradead.org/mtd-2.6

commit f6a673b3f4f93c1c50e1b18f29254b0531b722a8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 17 22:03:10 2006 +0100

    [MTD] Fix printk format error in gen_probe.c
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit fd0e5187458041c82fea616575104698397d68d3
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 17 21:53:58 2006 +0100

    [MTD] Fix mtdconcat build. We didn't introduce mtd->writesize yet.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5d25ea7c0c77cbdba1b5f092d60d624e24dfa938
Author: Arjan van de Ven <arjan@linux.intel.com>
Date:   Tue May 2 18:01:41 2006 +0200

    [PATCH] unused exports in wireless drivers
    
    There's a bunch of unused exports in the wireless drivers; that's
    bad since unused exports take up quite a bit of space in total;
    the patch below removes them.
    
    Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 59d4b684fbe74b25ac8593f39d2aaa86aa485b1f
Merge: 5dd8816... bc519f3...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed May 17 14:54:09 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 5dd8816aeb1f068ade0349a22009ff7a66f25413
Merge: f03cc4f... 0c056c5...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Wed May 17 14:51:24 2006 -0400

    Merge branch 'from-linus' into upstream

commit e8d32937d9f2022c31871ef357a4883f78da1b7f
Author: Alexander Belyakov <abelyako@googlemail.com>
Date:   Wed May 17 19:11:16 2006 +0400

    MTD: mtdconcat NAND/Sibley support (rev.2)
    
    There is a second revision of "mtdconcat NAND/Sibley" patch. I hope
    the patch will not get damaged as I'm posting it from gmail account,
    thanks to Jorn.
    
    The patch adds previously missing concat_writev(),
    concat_writev_ecc(), concat_block_isbad(), concat_block_markbad()
    functions to make concatenation layer compatible with Sibley and NAND
    chips.
    
    Patch has been cleared from whitespaces, fixed some lines of code as
    requested. Also I have added code for alignment check that should
    support Jorn's "writesize" patch.
    
    Signed-off-by: Alexander Belyakov <alexander.belyakov@intel.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ceb31db11f78935c666c50fe9c99d4560d592fde
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Mon Mar 20 04:40:46 2006 +0000

    LASAT depends on MTD_CFI
    
    The following difference was found between the mainline and linux-mips
    kernel.  LASAT depends on MTD_CFI.
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit be21ce119716f821c595552917ce7c05a3997b6b
Author: Martin Michlmayr <tbm@cyrius.com>
Date:   Mon Mar 20 04:40:26 2006 +0000

    Re-add module description for ms02-nv to Kconfig
    
    In an unrelated MTD commit, a description about the ms02-nv module
    got removed from Kconfig.  While I personally agree with this
    removal, the module maintainer (Maciej W. Rozycki) would like to
    see it added back.  In the absense of any consistency regarding
    Kconfig descriptions his wish should be followed.
    
    Signed-off-by: Martin Michlmayr <tbm@cyrius.com>
    Acked-by: Maciej W. Rozycki <macro@linux-mips.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 683b30c8e78ab363dc8d8c94bdb61b64d1f6f5e2
Author: Sean Young <sean@mess.org>
Date:   Wed May 17 12:45:34 2006 +0100

    [MTD] RFD FTL: Be noisier, and don't assume block without RFD magic are erased
    
    Signed-off-by: Sean Young <sean@mess.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ae282d497d5631ce31539717131c760e3872c539
Author: Vitaly Wool <vwool@ru.mvista.com>
Date:   Wed May 17 12:34:27 2006 +0100

    [MTD] generic: propagate oobavail to MTD partitions
    
    'oobavail' parameter of mtd_info structure is now propagated to the MTD
    partitions
    
    Signed-off-by: Vitaly Wool <vwool@ru.mvista.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 599fb3298b70d75c12dbdc4dd30f52c5cf04ea2f
Author: Sean Young <sean@mess.org>
Date:   Wed May 17 11:47:48 2006 +0100

    [PCMCIA MTD] Fix leak and crash on reboot
    
    Signed-off-by: Sean Young <sean@mess.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c172471b78255a5cf6d05383d9ebbf0c6683167a
Author: Nicolas Pitre <nico@cam.org>
Date:   Thu Mar 30 15:52:41 2006 +0100

    cfi_cmdset_0001: factorize code to wait for flash status
    
    This allows for much better abstraction and separation of the XIP and
    non-XIP cases with their own specific implementations.  This fixes the
    case where a timeout was tripped on in the XIP case by the code that
    was meant for the non-XIP case only.
    
    This also makes for a nice code reduction.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    CC: "Alexey, Korolev" <alexey.korolev@intel.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6e7a6809c555aeb7cb98544df4d446fbd6f123ec
Author: Nicolas Pitre <nico@cam.org>
Date:   Wed Mar 29 23:31:42 2006 +0100

    cfi-cmdset-0001: always update the chip status
    
    ... otherwise xip_enable() won't do the right thing.
    
    Signed-off-by: Nicolas Pitre <nico@cam.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit df54b52c411befdcf1d0989f939a49163570ad29
Author: Josh Boyer <jdub@us.ibm.com>
Date:   Tue Dec 6 17:28:19 2005 +0000

    CHIPS: Fix potential starvation in cfi_cmdset_0001
    
    The patch below fixes a potential starvation issue that can arise when
    there is contention on a chip during a period when a process is
    currently writing to it.  The starvation is avoided by conditionally
    rescheduling when the chip is left in a state usable by other processes.
    
    Signed-off-by: Josh Boyer <jdub@us.ibm.com>
    Signed-off-by: Tom Gall <tom_gall@vnet.ibm.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3ac6c7b44560fdf2ea8865536bd52d4ff038107e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 16 23:25:37 2006 +0100

    Remove struct fddi_statistics from user view in <linux/if_fddi.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ba9627b85fcb5ed67285ca0711f0f4d1e965746e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 16 23:03:08 2006 +0100

    [JFFS2] Repack some on-medium structures. ARM is weirder than I thought.
    
    We have to pack at least the jint16_t structure, because otherwise it'll
    be four bytes in size. Thankfully, we can do that and _not_ pack the
    actual node structures, and the compiler still doesn't emit stupid code.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 35af68b53a62c98bf551aaae7be179bde248eb34
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Tue May 16 20:52:06 2006 +0400

    NAND: Fix NAND ECC errors on AMD Au1550
    
        On AMD Au1550 the static bus controller fails to keep -CE asserted during
    chip ready delay on read commands and the NAND chip being used requires this.
    So, the current driver allows nand_base.c to drive -CE manually during the
    entire sector read. When the PCMCIA driver is enabled however, occasionally
    the ECC errors occur on NAND reads. This happens because the PCMCIA driver
    polls sockets periodically and reads one of the board's control/status regs
    (BCSRs) which are on the same static bus as the NAND flash, and just use
    another chip select (and the NOR flash also resides on that bus), so as the
    NAND driver forces NAND chip select asserted and the -RE signal is shared, a
    contention occurs on the static bus when BCSR or NOR flash is read while we're
    reading from NAND.
        So, we either can't keep interrupts enabled during the whole NAND sector
    read (which is hardly acceptable), or have to implement some interlocking
    scheme between multiple drivers (which is painful, and makes me shudder :-).
        There's a third way which has proven to work: to force -CE asserted only
    while we're waiting for a NAND chip to become ready after a read command,
    disabling interrupts for a maximum of 25 microseconds (according to Toshiba
    TC58DVM92A1FT00 datasheet -- this chip is mentioned in the board schematics);
    for Samsung NAND chip which seems to be actually used this delay is even less,
    12 us.
    
    Signed-off-by: Konstantin Baydarov <kbaidarov@ru.mvista.com>
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b020bb7d3b3a8e3568a16eaf98c033bb9ee474eb
Author: Ben Dooks <ben-linux@fluff.org>
Date:   Tue May 16 17:31:15 2006 +0100

    [MTD] Fix build warnings in RedBoot MTD partition parser.
    
    Fix build warnings from drivers/mtd/redboot.c due to
    use of `unsigned long` in `struct fis_image_desc` for
    fields being passed to swab32s() which expects __u32 *
    
    Change the entries to uint32_t to make them compatible
    with the swab32s() function
    
    Signed-off-by: Ben Dooks <ben-linux@fluff.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 155285c4775b7027b01a5b744c721ae43cced798
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Tue May 16 20:16:41 2006 +0400

    NAND: AMD Au1550 driver reads write-only register
    
         During the last cleanup of the AMD Au1550 NAND driver the old buglet was
    reintroduced: as the MEM_STNDCTL register is write-only and seem to always
    read as 0x31, read-modify-write to it done in au1xxx_nand_init() will have the
    side effect of enabling -RCS0/1 pin override (via bits 4/5 of this reg.), thus
    possibly causing a contention on the static bus when the NOR flash (using
    -RCS0) or board control status registers (using -RCS2) are read. Luckily, this
    goes away with a first NAND access, since au1550_hwcontrol() doesn't try to
    read this register before writing anymore.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c41ff6e5f38b02ff927d0d510e28dc1392bb4690
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 16 17:05:33 2006 +0100

    [JFFS2] Fix printk format in jffs2_sum_write_data() error message.
    
    fs/jffs2/summary.c: In function โjffs2_sum_write_dataโ:
    fs/jffs2/summary.c:658: warning: format โ%zdโ expects type โsigned size_tโ, but argument 4 has type โuint32_tโ
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7d2beb135986477f53da77303356bd04329f8d0e
Author: David Brownell <dbrownell@users.sourceforge.net>
Date:   Tue May 16 16:08:10 2006 +0100

    [JFFS2] Fix section mismatch warnings in JFFS2.
    
    Mark certain functions with __init and __exit appropriately.
    
    Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cead4dbc03ba6eb2e35bac04439b76a0cc2286ce
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 16 13:54:50 2006 +0100

    [MTD NAND] Make various initfuncs static, remove #ifdef MODULE from exitfuncs
    
    We all inherited the same error from the original NAND board driver which
    got copied and changed. Fix them all at once...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ce589a0328866228412ea0df2c834688da8f4700
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue May 16 13:46:44 2006 +0200

    drivers/mtd/devices/docprobe.c: correct #if's
    
    On Mon, May 15, 2006 at 12:56:37AM -0700, Andrew Morton wrote:
    >...
    > Changes since 2.6.17-rc3-mm1:
    >...
    >  git-mtd.patch
    >...
    >  git trees
    >...
    
    If we correct the names of the config options, the code might actually
    work as intended...
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f41a5f804a5862e9b87cf2d4cca1d6a7db7a9e82
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 16 13:11:47 2006 +0100

    [MTD] Add help text for MTD_NAND_CS553X option.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 18594822fcb01d4b35e05b9018f770a0b4156d1a
Merge: 5b5ffbc... c4694c7...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 16 01:19:52 2006 +0100

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5b5ffbc1e6d62d89747f3f59c09b2e488a7d7fce
Author: Florin Malita <fmalita@gmail.com>
Date:   Mon May 15 23:42:31 2006 +0100

    [PATCH] jffs2: memory leak in jffs2_scan_medium()
    
    If jffs2_scan_eraseblock() fails and the exit path is taken, 's' is not
    being deallocated.
    
    Reported by Coverity, CID: 1258.
    
    Signed-off-by: Florin Malita <fmalita@gmail.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8d4ee71ff6de5255ebfdf44fb83419d27bd06368
Merge: efa6e7e... 9a375e93...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon May 15 11:27:47 2006 -0400

    Merge branch 'max-sect' into upstream

commit efa6e7e9d40fe01406d889a5bed62f2e0da49bff
Merge: 5006ecc... aee10a0...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon May 15 11:26:53 2006 -0400

    Merge branch 'for-jeff' of git://htj.dyndns.org/libata-tj into tejun-merge

commit 5006ecc2d5073d4e52f54381fd0fee1575d4ce22
Merge: acc696d... 9be2f7c...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon May 15 11:26:03 2006 -0400

    Merge branch 'master' into upstream

commit 184f565210c6c8a852c53ffc070f9add61e0f331
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 15 13:45:58 2006 +0100

    [JFFS2] Fix printk format in some error messages.
    
    fs/jffs2/nodelist.c: In function `check_node_data':
    fs/jffs2/nodelist.c:441: warning: unsigned int format, different type arg (arg 4)
    fs/jffs2/nodelist.c:464: warning: int format, different type arg (arg 5)
    
    Modified from Andrew's original fix because while his terminal may indeed
    only have eighty columns, mine only has _TWENTYFOUR_ lines. So the
    cosmetic fluff is perfectly OK out past column 80 where it was -- the
    casual reader doesn't _care_ about anything more than the fact that it
    goes 'if (foo) JFFS2_WARNING...', and there's no point wasting a whole
    line to display the tail end of the printk which nobody actually cares
    about.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit aee10a03eb3e240bfd1a6f91e06ce82df47c5c58
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:56 2006 +0900

    [PATCH] sata_sil24: implement NCQ support
    
    Implement NCQ support.  Sil24 has 31 command slots and all of them are
    used for NCQ command queueing.  libata guarantees that no other
    command is in progress when it issues an internal command, so always
    use tag 0 for internal commands.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 12fad3f965830d71f6454f02b2af002a64cec4d3
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:55 2006 +0900

    [PATCH] ahci: implement NCQ suppport
    
    Implement NCQ support.
    
    Original implementation is from Jens Axboe.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit a9764c2bb5b6d3c9df91f2977a2a640f55de0dc2
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:53 2006 +0900

    [PATCH] ahci: kill pp->cmd_tbl_sg
    
    With NCQ, there are multiple sg tables, so pp->cmd_tbl_sg doesn't cut
    it.  Directly calculate sg table address from pp->cmd_tbl.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 979db803b8fd120d4ed5216520e9d1815e18bc38
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:52 2006 +0900

    [PATCH] ahci: add HOST_CAP_NCQ constant
    
    Add HOST_CAP_NCQ.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit dd410ff12925fc49df3174b18e43598b2b2b621f
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:50 2006 +0900

    [PATCH] ahci: clean up AHCI constants in preparation for NCQ
    
    * Rename CMD_TBL_HDR to CMD_TBL_HDR_SZ as it's size not offset.
    
    * Define MAX_CMDS and CMD_SZ and use them in calculation of other
      constants.
    
    * Define CMD_TBL_AR_SZ as product of CMD_TBL_SZ and MAX_CMDS, and use
      it when calculating PRIV_DMA_SZ.
    
    * CMD_SLOT_SZ is also dependent on MAX_CMDS but hasn't been changed
      because I didn't want to change the value used by the original code
      (32 commands).  Later NCQ change will bump MAX_CMDS to 32 anyway and
      the hard coded 32 can be changed to MAX_CMDS then.
    
    * Reorder HOST_CAP_* flags.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit a6e6ce8e8dc907a2cf2b994b0ea4099423f046bf
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:48 2006 +0900

    [PATCH] libata-ncq: implement NCQ device configuration
    
    Now that all NCQ related stuff are in place, implement NCQ device
    configuration and bump ATA_MAX_QUEUE to 32 thus activating NCQ
    support.
    
    Original implementation is from Jens Axboe.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e8ee84518c159a663c07bf691ace187527380f61
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:46 2006 +0900

    [PATCH] libata-ncq: update EH to handle NCQ
    
    Update EH to handle NCQ.  ata_eh_autopsy() is updated to call
    ata_eh_analyze_ncq_error() which reads log page 10h on NCQ device
    error and updates eh_context accordingly.  ata_eh_report() is updated
    to report SActive.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3dc1d88193b9c65b01b64fb2dc730e486306649f
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:45 2006 +0900

    [PATCH] libata-ncq: implement NCQ command translation and exclusion
    
    This patch implements NCQ command translation and exclusion.  Note
    that NCQ commands don't use ata_rwcmd_protocol() to choose ATA
    command.  This is because, unlike non-NCQ RW commands, NCQ commands
    can only be used for NCQ protocol and FUA handling is done with a flag
    rather than separate command.
    
    NCQ enabled device will have queue depth larger than one but no two
    non-NCQ commands can be issued simultaneously, neither can a non-NCQ
    command and NCQ commands.  This patch makes ata_scsi_translate()
    return SCSI_MLQUEUE_DEVICE_BUSY if such exclusion is necessary.  SCSI
    midlayer will retry the command later.
    
    As SCSI midlayer always retries once a command completes, this doesn't
    incur unnecessary delays and as most commands will be NCQ ones for NCQ
    device, so the overhead should be negligible.
    
    Initial implementation is from Jens Axboe and using
    SCSI_MLQUEUE_DEVICE_BUSY for exclusion is suggested by Jeff Garzik.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit dedaf2b0365ccec50714fbde0b3215e7e94fa47c
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:43 2006 +0900

    [PATCH] libata-ncq: implement ap->qc_active, ap->sactive and complete helper
    
    Add ap->qc_active and ap->sactive, mask of all active qcs and libata's
    view of the SActive register, respectively.  Also, implement
    ata_qc_complete_multiple() which takes new qc_active mask and complete
    multiple qcs according to the mask.
    
    These will be used to track NCQ commands and complete them.  The
    distinction between ap->qc_active and ap->sactive is also useful for
    later PM implementation.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 6cec4a3943bdfe46e2952bc246f17670f747be8d
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:41 2006 +0900

    [PATCH] libata-ncq: rename ap->qactive to ap->qc_allocated
    
    Rename ap->qactive to ap->qc_allocated.  This is to accomodate
    addition of ap->qc_active, mask of active qcs.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 2115ea94a2d11fbd228b049e667ec2d3e91ca371
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:39 2006 +0900

    [PATCH] libata-ncq: pass ata_scsi_translate() return value to SCSI midlayer
    
    ata_scsi_translate() will need to return SCSI_ML_QUEUE_DEVICE_BUSY to
    achieve exlusion between NCQ and non-NCQ commands or among non-NCQ
    commands.  Pass its return value upward to SCSI midlayer.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 88e490340ea4c3a2ebc0187a4339912e2fc1a081
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 21:03:38 2006 +0900

    [PATCH] libata-ncq: add NCQ related ATA/libata constants and macros
    
    Add NCQ related ATA/libata constants and macros.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit c17ea20d9a689d7335e97e09354865cdd9f873e1
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:59:29 2006 +0900

    [PATCH] libata: fix irq-pio merge
    
    * kill ata_poll_qc_complete() and implement/use ata_hsm_qc_complete()
      which completes qcs in new EH compliant manner from HSM
    
    * don't print error message from ata_hsm_move().  it's responsibility
      of EH.
    
    * kill ATA_FLAG_NOINTR usage in bmdma EH
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 12436c30f4808e00fa008c6787c609bc6ae216ba
Merge: 88ce755... 7894eaf...
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:59:15 2006 +0900

    Merge branch 'irq-pio'
    
    Conflicts:
    
    	drivers/scsi/libata-core.c
    	include/linux/libata.h

commit 88ce7550c38f46c8697f53727a571bf838bee398
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:32 2006 +0900

    [PATCH] sata_sil24: convert to new EH
    
    Convert sata_sil24 to new EH.
    
    * When port is frozen, IRQ for the port is masked.
    
    * sil24_softreset() doesn't need to mangle with IRQ mask anymore.
      libata ensures that the port is frozen during reset.
    
    * Only turn on interrupts which are handled by interrupt handler and
      EH.  As we don't handle SDB notify yet, turn it off. DEV_XCHG and
      UNK_FIS are handled by EH and thus turned on.
    
    * sil24_softreset() usually fails to recover the port after DEV_XCHG.
      ATA_PORT_HARDRESET is used as recovery action for DEV_XCHG.
    
    * sil24 may be invoked without any active command.  e.g. DEV_XCHG irq
      occuring while no qc in progress still triggers EH and will reset
      the port and revalidate attached device.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 2a3917a8bb40a2cb75b458da9c356e8557e8fbed
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:30 2006 +0900

    [PATCH] ahci: add PIOS interim interrupt handling
    
    During multiblock PIO, multiple PIOS interrupts are generated before
    qc compltion.  Current code prints unnecessary message for such cases.
    This is exposed when new EH slows down attached device into PIO mode.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 78cd52d02fa0735949a9fa30a6b79bf02c94c250
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:29 2006 +0900

    [PATCH] ahci: convert to new EH
    
    Convert AHCI to new EH.  Unfortunately, ICH7 AHCI reacts badly if IRQ
    mask is diddled during operation.  So, freezing is implemented by
    unconditionally clearing interrupt conditions while frozen.
    
    * Interrupts are categorized according to required action.
      e.g. Connection status or unknown FIS error requires freezing the
      port while TF or HBUS_DATA don't.
    
    * Only CONNECT (reflects SErr.X) interrupt is taken into account not
      PHYRDY (SErr.N), as CONNECT is better cue for starting EH.
    
    * AHCI may be invoked without any active command.  e.g. CONNECT irq
      occuring while no qc in progress still triggers EH and will reset
      the port and revalidate attached device.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f6aae27ed002ba9c0a98aff811dbde32ce749d28
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:27 2006 +0900

    [PATCH] sata_sil: convert to new EH
    
    Convert sata_sil to new EH.  As these controllers have hardware
    interrupt mask and are known to have screaming interrupts issues, use
    hardware IRQ masking for freezing.  sil_freeze() masks interrupts for
    the port and sil_thaw() unmasks them.  As ports are automatically
    frozen before probing reset, there is no need to initialize interrupt
    masks sil_init_onde().  Remove related code.
    
    Other than freezing, sata_sil uses stock BMDMA EH routines.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3f037db0ba043022e43e8e7266e698d4af264851
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:25 2006 +0900

    [PATCH] ata_piix: convert to new EH
    
    ata_piix can use stock BMDMA EH routines.  Convert to new EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 6d97dbd72da31a0e334f251fa9df4be9fab6fde2
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:24 2006 +0900

    [PATCH] libata-eh: implement BMDMA EH
    
    Implement stock BMDMA error handling methods.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 022bdb075b9e1f224088a0b268de56268d7bc5b6
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:22 2006 +0900

    [PATCH] libata-eh: implement new EH
    
    Implement new EH.  The exported interface is ata_do_eh() which is to
    be called from ->error_handler and performs the following steps to
    recover the failed port.
    
    ata_eh_autopsy() : analyze SError/TF, determine the cause of failure
    		   and required recovery actions and record it in
    		   ap->eh_context
    ata_eh_report()	 : report the failure to user
    ata_eh_recover() : perform recovery actions described in ap->eh_context
    ata_eh_finish()	 : finish failed qcs
    
    LLDDs can customize error handling by modifying eh_context before
    calling ata_do_eh() or, if necessary, doing so inbetween each major
    steps by calling each step explicitly.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f3e81b19aac23c0e8c55d5961324ef7de44c23bb
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:21 2006 +0900

    [PATCH] libata-eh: implement ata_eh_info and ata_eh_context
    
    struct ata_eh_info serves as the communication channel between
    execution path and EH.  Execution path describes detected error
    condition in ap->eh_info and EH recovers the port using it.  To avoid
    missing error conditions detected during EH, EH makes its own copy of
    eh_info and clears it on entry allowing error info to accumulate
    during EH.
    
    Most EH states including EH's copy of eh_info are stored in
    ap->eh_context (struct ata_eh_context) which is owned by EH and thus
    doesn't require any synchronization to access and alter.  This
    standardized context makes it easy to integrate various parts of EH
    and extend EH to handle multiple links (for PM).
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 0c247c559cd70f85ba9f0764ce13ae00e20fcad8
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:19 2006 +0900

    [PATCH] libata-eh: implement dev->ering
    
    This patch implements ata_ering and uses it to define dev->ering.
    
    ata_ering is a ring buffer which records libata errors - whether a
    command was for normar IO request, err_mask and timestamp.  Errors are
    recorded per-device in dev->ering.  This will be used by EH to
    determine recovery actions.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 9be1e979f2e1e57a091a658fa88dac266f9fd6fe
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:17 2006 +0900

    [PATCH] libata-eh: add ATA and libata flags for new EH
    
    Add ATA and libata flags to be used by new EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 246619da308c6910a3ae30e7e5fbf46139619efe
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:16 2006 +0900

    [PATCH] libata-eh-fw: update SCSI command completion path for new EH
    
    SCSI command completion path used to do some part of EH including
    printing messages and obtaining sense data.  With new EH, all these
    are responsibilities of the EH, update SCSI command completion path to
    reflect this.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit d95a717f579e81061830a308125c89f5858f740a
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:14 2006 +0900

    [PATCH] libata-eh-fw: update ata_exec_internal() for new EH
    
    Update ata_exec_internal() such that it uses new EH framework.
    ->post_internal_cmd() is always invoked regardless of completion
    status.  Also, when ata_exec_internal() detects a timeout condition
    and new EH is in place, it freezes the port as timeout for normal
    commands would do.
    
    Note that ata_port_flush_task() is called regardless of
    wait_for_completion status.  This is necessary as exceptions unrelated
    to the qc can abort the qc, in which case PIO task could still be
    running after the wait for completion returns.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit ad9e27624479bd167dd7eac0cea4bb3ad13bc926
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:12 2006 +0900

    [PATCH] libata-eh-fw: update ata_scsi_error() for new EH
    
    Update ata_scsi_error() for new EH.  ata_scsi_error() is responsible
    for claiming timed out qcs and invoking ->error_handler in safe and
    synchronized manner.  As the state of the controller is unknown if a
    qc has timed out, the port is frozen in such cases.
    
    Note that ata_scsi_timed_out() isn't used for new EH.  This is because
    a timed out qc cannot be claimed by EH without freezing the port and
    freezing the port in ata_scsi_timed_out() results in unnecessary
    abortion of other active qcs.  ata_scsi_timed_out() can be removed
    once all drivers are converted to new EH.
    
    While at it, add 'TODO: kill' comments to old EH functions.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit dafadcde8d4dc5ea8c742faa7ff4403336b542b8
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:11 2006 +0900

    [PATCH] libata-eh-fw: implement new EH scheduling from PIO
    
    PIO executes without holding host_set lock, so it cannot be
    synchronized using the same mechanism as interrupt driven execution.
    port_task framework makes sure that EH is not entered until PIO task
    is flushed, so PIO task can be sure the qc in progress won't go away
    underneath it.  One thing it cannot be sure of is whether the qc has
    already been scheduled for EH by another exception condition while
    host_set lock was released.
    
    This patch makes ata_poll_qc-complete() handle such conditions
    properly and make it freeze the port if HSM violation is detected
    during PIO execution.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e318049949b07152d851dbfebbd93e560af45ebe
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:09 2006 +0900

    [PATCH] libata-eh-fw: implement freeze/thaw
    
    Freezing is performed atomic w.r.t. host_set->lock and once frozen
    LLDD is not allowed to access the port or any qc on it.  Also, libata
    makes sure that no new qc gets issued to a frozen port.
    
    A frozen port is thawed after a reset operation completes
    successfully, so reset methods must do its job while the port is
    frozen.  During initialization all ports get frozen before requesting
    IRQ, so reset methods are always invoked on a frozen port.
    
    Optional ->freeze and ->thaw operations notify LLDD that the port is
    being frozen and thawed, respectively.  LLDD can disable/enable
    hardware interrupt in these callbacks if the controller's IRQ mask can
    be changed dynamically.  If the controller doesn't allow such
    operation, LLDD can check for frozen state in the interrupt handler
    and ack/clear interrupts unconditionally while frozen.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 7b70fc039824bc7303e4007a5f758f832de56611
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:07 2006 +0900

    [PATCH] libata-eh-fw: implement ata_port_schedule_eh() and ata_port_abort()
    
    ata_port_schedule_eh() directly schedules EH for @ap without
    associated qc.  Once EH scheduled, no further qc is allowed and EH
    kicks in as soon as all currently active qc's are drained.
    
    ata_port_abort() schedules all currently active commands for EH by
    qc_completing them with ATA_QCFLAG_FAILED set.  If ata_port_abort()
    doesn't find any qc to abort, it directly schedule EH using
    ata_port_schedule_eh().
    
    These two functions provide ways to invoke EH for conditions which
    aren't directly related to any specfic qc.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f686bcb8078ac7505ec88818886c2c72639f4fc5
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:05 2006 +0900

    [PATCH] libata-eh-fw: implement new EH scheduling via error completion
    
    There are several ways a qc can get schedule for EH in new EH.  This
    patch implements one of them - completing a qc with ATA_QCFLAG_FAILED
    set or with non-zero qc->err_mask.  ALL such qc's are examined by EH.
    
    New EH schedules a qc for EH from completion iff ->error_handler is
    implemented, qc is marked as failed or qc->err_mask is non-zero and
    the command is not an internal command (internal cmd is handled via
    ->post_internal_cmd).  The EH scheduling itself is performed by asking
    SCSI midlayer to schedule EH for the specified scmd.
    
    For drivers implementing old-EH, nothing changes.  As this change
    makes ata_qc_complete() rather large, it's not inlined anymore and
    __ata_qc_complete() is exported to other parts of libata for later
    use.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f69499f42caf74194df678c9c293f2ee0fe90bc3
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:03 2006 +0900

    [PATCH] libata-eh-fw: update ata_qc_from_tag() to enforce normal/EH qc ownership
    
    New EH framework has clear distinction about who owns a qc.  Every qc
    starts owned by normal execution path - PIO, interrupt or whatever.
    When an exception condition occurs which affects the qc, the qc gets
    scheduled for EH.  Note that some events (say, link lost and regained,
    command timeout) may schedule qc's which are not directly related but
    could have been affected for EH too.  Scheduling for EH is atomic
    w.r.t. ap->host_set->lock and once schedule for EH, normal execution
    path is not allowed to access the qc in whatever way.  (PIO
    synchronization acts a bit different and will be dealt with later)
    
    This patch make ata_qc_from_tag() check whether a qc is active and
    owned by normal path before returning it.  If conditions don't match,
    NULL is returned and thus access to the qc is denied.
    __ata_qc_from_tag() is the original ata_qc_from_tag() and is used by
    libata core/EH layers to access inactive/failed qc's.
    
    This change is applied only if the associated LLDD implements new EH
    as indicated by non-NULL ->error_handler
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 2ab7db1ff1d64a2ba389d0692d532f42a15f1f72
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:02 2006 +0900

    [PATCH] libata-eh-fw: use special reserved tag and qc for internal commands
    
    New EH may issue internal commands to recover from error while failed
    qc's are still hanging around.  To allow such usage, reserve tag
    ATA_MAX_QUEUE-1 for internal command.  This also makes it easy to tell
    whether a qc is for internal command or not.  ata_tag_internal() test
    implements this test.
    
    To avoid breaking existing drivers, ata_exec_internal() uses
    ATA_TAG_INTERNAL only for drivers which implement ->error_handler.
    For drivers using old EH, tag 0 is used.  Note that this makes
    ata_tag_internal() test valid only when ->error_handler is
    implemented.  This is okay as drivers on old EH should not and does
    not have any reason to use ata_tag_internal().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit dc2b3515868a254b3d653d77844bff93c5d4c095
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:58:00 2006 +0900

    [PATCH] libata-eh-fw: clear SError in ata_std_postreset()
    
    Clear SError in ata_std_postreset().  This is to clear SError bits
    which get set during reset.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 9ec957f2002bd2994be659bbc0ec28397fa251ee
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:58 2006 +0900

    [PATCH] libata-eh-fw: add flags and operations for new EH
    
    Add ATA_FLAG_EH_{PENDING|FROZEN}, ATA_ATA_QCFLAG_{FAILED|SENSE_VALID}
    and ops->freeze, thaw, error_handler, post_internal_cmd() for new EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f15a1dafed22d5037e0feea7528e1eeb28a1a7a3
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:56 2006 +0900

    [PATCH] libata: use ATA printk helpers
    
    Use ATA printk helpers.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 61440db61fe4945ad9f7b32b4d6a22b17174aa1f
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:55 2006 +0900

    [PATCH] libata: implement ATA printk helpers
    
    Implement ata_{port|dev}_printk() which prefixes the message with
    proper identification string.  This change is necessary for later PM
    support because devices and links should be identified differently
    depending on how they are attached.
    
    This also helps unifying device id strings.  Currently, there are two
    forms in use (P is the port number D device number) - 'ataP(D):', and
    'ataP: dev D '.  These macros also make it harder to forget proper ID
    string (e.g. printing only port number when a device is in question).
    
    Debug message handling can be integrated into these printk macros by
    passing debug type and level via @lv.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3373efd89dead4ce7818d685729e0431448357c9
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:53 2006 +0900

    [PATCH] libata: use dev->ap
    
    Use dev->ap where possible and eliminate superflous @ap from functions
    and structures.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 38d87234d6c47ca487fc6344100323d5adc6f32c
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:51 2006 +0900

    [PATCH] libata: add dev->ap
    
    Add dev->ap which points back to the port the device belongs to.  This
    makes it unnecessary to pass @ap for silly reasons (e.g. printks).
    Also, this change is necessary to accomodate later PM support which
    will introduce ATA link inbetween port and device.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit a0ab51cefc95cb7756c4914603fea2b1a0f813c5
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:49 2006 +0900

    [PATCH] libata: kill old SCR functions and sata_dev_present()
    
    Kill now unused scr_{read|write|write_flush}() and sata_dev_present().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 81952c5497b40ae56835bd0d6537f8c6bdea07e7
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:47 2006 +0900

    [PATCH] libata: use new SCR and on/offline functions
    
    Use new SCR and on/offline functions.  Note that for LLDD which know
    it implements SCR callbacks, SCR functions are guaranteed to succeed
    and ata_port_online() == !ata_port_offline().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 34bf21704c848fe00c516d1c8f163db08b70b137
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:46 2006 +0900

    [PATCH] libata: implement new SCR handling and port on/offline functions
    
    Implement ata_scr_{valid|read|write|write_flush}() and
    ata_port_{online|offline}().  These functions replace
    scr_{read|write}() and sata_dev_present().
    
    Major difference between between the new SCR functions and the old
    ones is that the new ones have a way to signal error to the caller.
    This makes handling SCR-available and SCR-unavailable cases in the
    same path easier.  Also, it eases later PM implementation where SCR
    access can fail due to various reasons.
    
    ata_port_{online|offline}() functions return 1 only when they are
    affirmitive of the condition.  e.g.  if SCR is unaccessible or
    presence cannot be determined for other reasons, these functions
    return 0.  So, ata_port_online() != !ata_port_offline().  This
    distinction is useful in many exception handling cases.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 838df6284c54447efae956fb9c243d8ba4ab0f47
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:44 2006 +0900

    [PATCH] libata: init ap->cbl to ATA_CBL_SATA early
    
    Init ap->cbl to ATA_CBL_SATA in ata_host_init().  This is necessary
    for soon-to-follow SCR handling function changes.  LLDDs are free to
    change ap->cbl during probing.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit ce5f7f3d0cab82d6c16fcb64def8bfc0a3a85dd6
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:42 2006 +0900

    [PATCH] sata_sil24: update TF image only when necessary
    
    Update TF image (pp->tf) only when necessary.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e61e067227bc76b4d9411a50d735c9d87f27b0e2
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:40 2006 +0900

    [PATCH] libata: implement qc->result_tf
    
    Add qc->result_tf and ATA_QCFLAG_RESULT_TF.  This moves the
    responsibility of loading result TF from post-compltion path to qc
    execution path.  qc->result_tf is loaded if explicitly requested or
    the qc failsa.  This allows more efficient completion implementation
    and correct handling of result TF for controllers which don't have
    global TF representation such as sil3124/32.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 96bd39ec295e49443c8b0c25a6b69fdace18780f
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:38 2006 +0900

    [PATCH] libata: remove postreset handling from ata_do_reset()
    
    Make ata_do_reset() deal only with reset.  postreset is now the
    responsibility of the caller.  This is simpler and eases later
    prereset addition.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3adcebb2b59d590d572844815c906ca30477b14a
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:37 2006 +0900

    [PATCH] libata: move ->set_mode() handling into ata_set_mode()
    
    Move ->set_mode() handlng into ata_set_mode().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit fe635c7e91036282e4fd0cc5b4eebc712e43270d
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:35 2006 +0900

    [PATCH] libata: use preallocated buffers
    
    It's not a very good idea to allocate memory during EH.  Use
    statically allocated buffer for dev->id[] and add 512byte buffer
    ap->sector_buf.  This buffer is owned by EH (or probing) and to be
    used as temporary buffer for various purposes (IDENTIFY, NCQ log page
    10h, PM GSCR block).
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 158693031d7c58a355ec1852052a4fca75fd3bda
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:33 2006 +0900

    [PATCH] libata: hold host_set lock while finishing internal qc
    
    Hold host_set lock while finishing internal qc.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 7401abf2f44695ef44eef47d5deba1c20214a063
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:32 2006 +0900

    [PATCH] libata: clear ap->active_tag atomically w.r.t. command completion
    
    ap->active_tag was cleared in ata_qc_free().  This left ap->active_tag
    dangling after ata_qc_complete().  Spurious interrupts inbetween could
    incorrectly access the qc.  Clear active_tag in ata_qc_complete().
    This change is necessary for later EH changes.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit f8c2c4202d86e14ca03b7adc7ebcb30fc74b24e1
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:30 2006 +0900

    [PATCH] libata: fix ->phy_reset class code handling in ata_bus_probe()
    
    ata_bus_probe() doesn't clear dev->class after ->phy_reset().  This
    can result in falsely enabled devices if probing fails.  Clear
    dev->class to ATA_DEV_UNKNOWN after fetching it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 6cd727b14f1a6cdcb088d1067c1ba0ba124806a7
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:28 2006 +0900

    [PATCH] libata: kill duplicate prototypes
    
    Kill duplicate prototypes for ata_eh_qc_complete/retry() in libata.h.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e23befe9018319dc218e2e51c20ce480e6b45eeb
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:27 2006 +0900

    [PATCH] libata: unexport ata_scsi_error()
    
    While moving ata_scsi_error() from LLDD sht to libata transportt,
    EXPORT_SYMBOL_GPL() entry was left out.  Kill it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit e4fac92ae744cd5d5c3c1774825788e6b91a5965
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:25 2006 +0900

    [PATCH] ahci: hardreset classification fix
    
    AHCI calls ata_dev_classify() even when no device is attached which
    results in false class code.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 3c567b7d1137633f3ff67cd1df94abc5fd497a85
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:23 2006 +0900

    [PATCH] libata: rename ata_down_sata_spd_limit() and friends
    
    Rename ata_down_sata_spd_limit() and friends to sata_down_spd_limit()
    and likewise for simplicity & consistency.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit c44078c03f018c8cc9d7463b0db4c6c7fb316792
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:21 2006 +0900

    [PATCH] libata: silly fix in ata_scsi_start_stop_xlat()
    
    Don't directly access &qc->tf when tf == &qc->tf.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit ee7863bc68fa6ad6fe7cfcc0e5ebe9efe0c0664e
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon May 15 20:57:20 2006 +0900

    [PATCH] SCSI: implement shost->host_eh_scheduled
    
    libata needs to invoke EH without scmd.  This patch adds
    shost->host_eh_scheduled to implement such behavior.
    
    Currently the only user of this feature is libata and no general
    interface is defined.  This patch simply adds handling for
    host_eh_scheduled where needed and exports scsi_eh_wakeup() to
    modules.  The rest is upto libata.  This is the result of the
    following discussion.
    
    http://thread.gmane.org/gmane.linux.scsi/23853/focus=9760
    
    In short, SCSI host is not supposed to know about exceptions unrelated
    to specific device or command.  Such exceptions should be handled by
    transport layer proper.  However, the distinction is not essential to
    ATA and libata is planning to depart from SCSI, so, for the time
    being, libata will be using SCSI EH to handle such exceptions.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 89f48c4d67dd875cf2216d4402bf77eda41fbdd9
Author: Luben Tuikov <ltuikov@yahoo.com>
Date:   Mon May 15 20:57:18 2006 +0900

    [PATCH] SCSI: Introduce scsi_req_abort_cmd (REPOST)
    
    Introduce scsi_req_abort_cmd(struct scsi_cmnd *).
    This function requests that SCSI Core start recovery for the
    command by deleting the timer and adding the command to the eh
    queue.  It can be called by either LLDDs or SCSI Core.  LLDDs who
    implement their own error recovery MAY ignore the timeout event if
    they generated scsi_req_abort_cmd.
    
    First post:
    http://marc.theaimsgroup.com/?l=linux-scsi&m=113833937421677&w=2
    
    Signed-off-by: Luben Tuikov <ltuikov@yahoo.com>
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>

commit 74ce1468128e299fe6a85e7e78e528e45e72d6d9
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Mon May 8 08:32:00 2006 -0400

    ACPI: create acpi_thermal_resume()
    
    http://bugzilla.kernel.org/show_bug.cgi?id=4364
    
    Signed-off-by: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0feabb01d93e5801d1127416a66cfc3963280bca
Author: Konstantin Karasyov <konstantin.a.karasyov@intel.com>
Date:   Mon May 8 00:00:00 2006 -0400

    ACPI: create acpi_fan_suspend()/acpi_fan_resume()
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5000
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 531881d665ca011326bb466b97b07c95dee8d0a1
Author: Len Brown <len.brown@intel.com>
Date:   Mon May 15 03:06:41 2006 -0400

    ACPI: pass pm_message_t from acpi_device_suspend() to root_suspend()
    in case we want to decode it for future use in acpi_op_suspend(..., state)
    
    also, inline new 1-liner static function
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5000
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 5b3272655a8e8a9a6e2503bc5a88fc9d9c8292a4
Author: Patrick Mochel <patrick.mochel@intel.com>
Date:   Wed May 10 10:33:00 2006 -0400

    ACPI: create acpi_device_suspend()/acpi_device_resume()
    
    updated and tested by Konstantin Karasyov
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5000
    
    Signed-off-by: Patrick Mochel <patrick.mochel@intel.com>
    Signed-off-by: Konstantin Karasyov <konstantin.karasyov @intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9c576ff1bc9ab42d06457e68e39c121481138562
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI add ia64 exports to build acpi_memhotplug as a module
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 973bf491a55b825740f0d8d300b50bcd3d6fb8de
Author: Yu, Luming <luming.yu@intel.com>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: fix potential memory leaks in driver/acpi/video.c
    
    acpi_video_bus_get_one_device() and other functions in driver/acpi/video.c do
    not release allocated memory on remove and on the error path.
    
    Signed-off-by: "Yu, Luming" <luming.yu@intel.com>
    Signed-off-by: Vasily Averin <vvs@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ebd5f2ca811b75f7145fa487748f26430c584a72
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat May 13 22:56:00 2006 -0400

    ACPI: asus_acpi_init(): propagate correct return value
    
    Cc: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Acked-by: Francois Romieu <romieu@fr.zoreil.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3e68fbb59b3d4e6b47b65e9928b5929e02179759
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 15 00:49:43 2006 +0100

    [JFFS2] Don't pack on-medium structures, because GCC emits crappy code
    
    If we use __attribute__((packed)), GCC will _also_ assume that the
    structures aren't sensibly aligned, and it'll emit code to cope with
    that instead of straight word load/save. This can be _very_ suboptimal
    on architectures like ARM.
    
    Ideally, we want an attribute which just tells GCC not to do any
    padding, without the alignment side-effects. In the absense of that,
    we'll just drop the 'packed' attribute and hope that everything stays as
    it was (which to be fair is fairly much what we expect). And add some
    paranoia checks in the initialisation code, which should be optimised
    away completely in the normal case.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 52239da1b06ff445bf71d35e04d8ce74e4c6fe7b
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 16:54:39 2006 +0100

    [MTD NAND] Modify check for modules registering NAND devices without ->owner
    
    Make it work even with compilers which lack the wit to notice that
    THIS_MODULE is always non-NULL. Use #ifdef MODULE instead. It's only
    a temporary debugging check anyway.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0d4e30d26a279f1b6a008a233a6835ad2af571e4
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 12:25:19 2006 +0100

    [MTD] Clean up <linux/mtd/physmap.h> to fix modular build
    
    ... and also fix the multiple inclusion guard so it actually _works_
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2f206701ae9b5c13719c2be26121b9461f05f87c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 11:59:20 2006 +0100

    [MTD] Remove gratuitous inclusion of ARM-only header from physmap.c
    
    The physmap platform driver conversion added to physmap.c an include
    of asm/mach/flash.h which is 1) ARM-specific; and 2) isn't actually
    necessary.  Remove it.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b6835052a6aa00536343b6d2127fc65cd814a040
Author: Andreas Mohr <andi@rhlx01.fht-esslingen.de>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: apply "__read_mostly" to processor_idle.c loop module parameters and friends
    
    make pm_idle_save, nocst and bm_history __read_mostly
    remove initializer from static 'first_run'.
    
    Signed-off-by: Andreas Mohr <andi@lisas.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 09047e75f69428dcfa977b326256085154068b65
Author: Vasily Averin <vvs@sw.ru>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: fix memory leak in acpi_thermal_add() error path
    
    Signed-off-by: Vasily Averin <vvs@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 64385f2fd8bc9d8803c8d10dcd391871cb126b77
Author: Vasily Averin <vvs@sw.ru>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: fix potential memory leak in acpi_evaluate_integer() error path
    
    Signed-off-by: Vasily Averin <vvs@sw.ru>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 06ea8e08ae7e7e450b6a78e7ce5e10b3c5f954ea
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: acpi_bus_unregister_driver() returns void
    
    Nobody looks at the return value, and this brings it into line with
    pci_unregister_driver(), etc.  Also removed validation of the driver
    pointer passed in to register and unregister.  More consistent, and we'll
    find bugs faster if we fault rather than returning an error that's ignored.
    
    Also makes internal functions acpi_device_unregister() and
    acpi_driver_detach() void, since nobody uses their returns either.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 193de0c79da580eb33a66113b62e2378fc1fb629
Author: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Date:   Thu Apr 27 05:25:00 2006 -0400

    ACPI: use for_each_possible_cpu() instead of for_each_cpu()
    
    for_each_cpu() actually iterates across all possible CPUs.  We've had mistakes
    in the past where people were using for_each_cpu() where they should have been
    iterating across only online or present CPUs.  This is inefficient and
    possibly buggy.
    
    We're renaming for_each_cpu() to for_each_possible_cpu() to avoid this in the
    future.
    
    Signed-off-by: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cf5eba53346fbfdf1b80e05ca3fd7fe2ec841077
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 04:06:24 2006 +0100

    [JFFS2] Reduce excessive node count for syslog files.
    
    We currently get fairly poor behaviour with files which get many short
    writes, such as system logs. This is because we end up with many tiny
    data nodes, and the rbtree gets massive. None of these nodes are
    actually obsolete, so they are counted as 'clean' space. Eraseblocks can
    be entirely full of these nodes (which are REF_NORMAL instead of
    REF_PRISTINE), and still they count entirely towards 'used_size' and the
    eraseblocks can sit on the clean_list for a long time without being
    picked for GC.
    
    One way to alleviate this in the long term is to account REF_NORMAL
    space separately from REF_PRISTINE space, rather than counting them both
    towards used_size. Then these eraseblocks can be picked for GC and the
    offending nodes will be garbage collected.
    
    The short-term fix, though -- which probably makes sense even if we do
    eventually implement the above -- is to merge these nodes as they're
    written. When we write the last byte in a page, write the _whole_ page.
    This obsoletes the earlier nodes in the page _immediately_ and we don't
    even need to wait for the garbage collection to do it.
    
    Original implementation from Ferenc Havasi <havasi@inf.u-szeged.hu>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 36e430951af0b0d1bdfd50ce22e70079d02646df
Author: Ingo Molnar <mingo@elte.hu>
Date:   Thu Apr 27 05:25:00 2006 -0400

    sem2mutex: acpi, acpi_link_lock
    
    Semaphore to mutex conversion.
    
    The conversion was generated via scripts, and the result was validated
    automatically via a script as well.
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 415d320a2384bb80d2be98b1dfa41594e085012d
Author: Len Brown <len.brown@intel.com>
Date:   Sat May 13 21:35:56 2006 -0400

    ACPI: delete unused acpi_bus_drivers_lock
    
    acpi_bus_drivers is protected by acpi_device_lock
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 65c19bbd28cba587d9bd24feccf7272da18481a7
Author: Arjan van de Ven <arjan@infradead.org>
Date:   Thu Apr 27 05:25:00 2006 -0400

    sem2mutex: drivers/acpi/processor_perflib.c
    
    Semaphore to mutex conversion.
    
    The conversion was generated via scripts, and the result was validated
    automatically via a script as well.
    
    Signed-off-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 151e76590f66f5406eb2e1f4270c5323f385d2e8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 01:51:54 2006 +0100

    [MTD] Fix legacy character sets throughout drivers/mtd, include/linux/mtd
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0f5ae3d2e9f49af55eb2a9b7cb54b4c0c2373017
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 01:40:50 2006 +0100

    [MTD] Deal correctly with NOR chips which are smaller than the map window
    
    We used to calculate the number of chips to be zero, allocate an array
    of that size, then nasty things would happen when we attempt to access
    the first object in that zero-sized array.
    
    Now, if the number of _full_ chips that would fit into the map is zero,
    we allocate an array of one anyway, and then artificially reduce the
    total size of the resulting MTD device to fit in the map.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a6550e57f9d074511cf420bdb802ab5e56edc3bb
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun May 14 01:42:25 2006 +0200

    mtd: fix memory leak in block2mtd_setup()
    
    There's a mem leak in drivers/mtd/devices/block2mtd.c::block2mtd_setup()
    
    We can leak 'name' allocated with kmalloc in 'parse_name' if leave via
    the 'parse_err' macro since it contains a return but doesn't do any
    freeing.
    
    Spotted by coverity checker as bug 615.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 552d9205186428a1e2a49ed577bcbba9f777af37
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sun May 14 01:20:46 2006 +0100

    [MTD] Fix module refcounting in NAND board drivers.
    
    The _board_ driver needs to be mtd->owner, and it in turn pins the
    nand.ko module. Fix them all to actually do that, and fix nand.ko not to
    overwrite it -- and also to check that the caller sets it, if the caller
    is a module.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4f678a58d335291ce9213c049bbe16e6d24487ed
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Sun May 14 01:07:18 2006 +0200

    mtd: fix memory leaks in phram_setup
    
    There are two code paths in drivers/mtd/devices/phram.c::phram_setup() that
    will leak memory.
    Memory is allocated to the variable 'name' with kmalloc() by the
    parse_name() function, but if we leave by way of the parse_err() macro,
    then that memory is never kfree()'d, nor is it ever used with
    register_device() so it won't be freed later either - leak.
    
    Found by the Coverity checker as #593 - simple fix below.
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e0c7d7675331140e5186d2d1a0efce1d3877d379
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 13 18:07:53 2006 +0100

    [MTD NAND] Indent all of drivers/mtd/nand/*.c.
    
    It was just too painful to deal with.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6943f8af7d6583be57d67bba8b2644371f6a10ca
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 13 16:14:26 2006 +0100

    [MTD NAND] Reduce paranoia level when scanning for bad blocks on virgin chips
    
    We were scanning for 0xFF through the entire chip -- which takes a while
    when it's a 512MiB device as I have on my current toy. The specs only say
    we need to check certain bytes -- so do only that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 21b9879bf2817aca343cdda11ade6a87f5373e74
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:22:29 2006 +0900

    [JFFS2][XATTR] Fix obvious typo
    
    [2/2] jffs2-xattr-v5.2-02-fix_obvious_typo.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit c8708a9275928cc8e77bd443cd12565dda0a3ded
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:21:38 2006 +0900

    [JFFS2][XATTR] Handling the duplicate JFFS2_NODETYPE_XATTR node cases.
    
    When jffs2_sum_process_sum_data() found a JFFS2_NODETYPE_XATTR
    which has duplicate xid and older version, an error was returned
    without appropriate process.
    In the result, mounting filesystem is failed.
    
    This patch fix this problem. If jffs2_setup_xattr_datum() returned
    -EEXIST, the caller marks this node as DIRTY_SPACE().
    
    [1/2] jffs2-xattr-v5.2-01-fix-duplicate-xdatum.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit dea80134dc4d54df52c0c59b0ba2bb5aa999bf30
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:20:24 2006 +0900

    [JFFS2][XATTR] remove redundant pointer cast in acl.c
    
    remove redundant pointer cast in acl.c.
    
    [10/10] jffs2-xattr-v5.1-10-remove_pointer_cast.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit 5a14959c0700cd389d9e7ba312e15c8e85255e1f
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:19:36 2006 +0900

    [JFFS2][XATTR] remove '__KERNEL__' from acl.h
    
    [9/10] jffs2-xattr-v5.1-09-remove__KERNEL__.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit ee886b5df17f9791a72cf0afe7f6c0c079231ef8
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:19:03 2006 +0900

    [JFFS2][XATTR] remove senseless comment
    
    remove senseless comment.
    
    [8/10] jffs2-xattr-v5.1-08-remove_senseless_comment.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit 652ecc20d1f5b4fd745c185c940e5b3afb2a0711
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:18:27 2006 +0900

    [JFFS2][XATTR] Unify each file header part with any jffs2 file.
    
    Unify each file header part with any jffs2 file.
    
    [7/10] jffs2-xattr-v5.1-07-unify_file_header.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit 4470d0409bfe093abbf965dcc97e5c1450c80afb
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:17:11 2006 +0900

    [JFFS2][XATTR] '#include <linux/list.h>' was added into xattr.h.
    
    '#include <linux/list.h>' was added into xattr.h.
    because 'struct list_head' is used in this header file.
    
    [6/10] jffs2-xattr-v5.1-06-add_list.h.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit 084702e00111eb9ffb6d8a5c1938b8e5423e40a8
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:16:13 2006 +0900

    [JFFS2][XATTR] Remove jffs2_garbage_collect_xattr(c, ic)
    
    Remove jffs2_garbage_collect_xattr(c, ic).
    jffs2_garbage_collect_xattr_datum/ref() are called from gc.c directly.
    
    In original implementation, jffs2_garbage_collect_xattr(c, ic) returns
    with holding a spinlock if 'ic' is inode_cache. But it returns after
    releasing a spinlock if 'ic' is xattr_datum/ref.
    It looks so confusable behavior. Thus, this patch makes caller manage
    locking/unlocking.
    
    [5/10] jffs2-xattr-v5.1-05-update_xattr_gc.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit 8f2b6f49c656dd4597904f8c20661d6b73cdbbeb
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:15:07 2006 +0900

    [JFFS2][XATTR] Remove 'struct list_head ilist' from jffs2_inode_cache.
    
    This patch can reduce 4-byte of memory usage per inode_cache.
    
    [4/10] jffs2-xattr-v5.1-04-remove_ilist_from_ic.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit 8b0b339d46ca0105a9936e3caa3bac80b72de7a3
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:14:14 2006 +0900

    [JFFS2][XATTR] Add a description about c->xattr_sem
    
    Add a description about the c->xattr_sem read/write semaphore
    into README.Locking.
    
    [3/10] jffs2-xattr-v5.1-03-append_README.Locking.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit de1f72fab35d2b6215017690c6dc27b8f4aa14bc
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:13:27 2006 +0900

    [JFFS2][XATTR] remove typedef from posix_acl related definition.
    
    jffs2_acl_header, jffs2_acl_entry and jffs2_acl_entry_short were redefined
    with using 'struct' instead of 'typedef' in kernel implementation.
    
    [1/10] jffs2-xattr-v5.1-01-remove_typedef_kernel.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>

commit aa98d7cf59b5b0764d3502662053489585faf2fe
Author: KaiGai Kohei <kaigai@ak.jp.nec.com>
Date:   Sat May 13 15:09:47 2006 +0900

    [JFFS2][XATTR] XATTR support on JFFS2 (version. 5)
    
    This attached patches provide xattr support including POSIX-ACL and
    SELinux support on JFFS2 (version.5).
    
    There are some significant differences from previous version posted
    at last December.
    The biggest change is addition of EBS(Erase Block Summary) support.
    Currently, both kernel and usermode utility (sumtool) can recognize
    xattr nodes which have JFFS2_NODETYPE_XATTR/_XREF nodetype.
    
    In addition, some bugs are fixed.
    - A potential race condition was fixed.
    - Unexpected fail when updating a xattr by same name/value pair was fixed.
    - A bug when removing xattr name/value pair was fixed.
    
    The fundamental structures (such as using two new nodetypes and exclusion
    mechanism by rwsem) are unchanged. But most of implementation were reviewed
    and updated if necessary.
    Espacially, we had to change several internal implementations related to
    load_xattr_datum() to avoid a potential race condition.
    
    [1/2] xattr_on_jffs2.kernel.version-5.patch
    [2/2] xattr_on_jffs2.utils.version-5.patch
    
    Signed-off-by: KaiGai Kohei <kaigai@ak.jp.nec.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5810452d00ae5fed7f720185d02d79ec9d15b91e
Author: Len Brown <len.brown@intel.com>
Date:   Sat May 13 01:12:15 2006 -0400

    ACPI: silence ia64 build warning
    
    When building sim_defconfig, which does not define CONFIG_ACPI
    arch/ia64/kernel/acpi.c:71: warning: 'acpi_madt_rev' defined but not used
    
    really acpi.c should not be built when CONFIG_ACPI=n...
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9d75414b4fa7390975ef0e2b56ff40425657fe52
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 13 04:12:40 2006 +0100

    [MTD NAND] Update CS553x NAND driver: Hardware ECC support, optimisations.
    
    - Implement HW ECC support,
    - Provide read_buf() and write_buf() routines using memcpy
    - Use on-flash bad block table
    - Fix module refcounting
    - Avoid read/modify/write in hwcontrol()
    - Minor cosmetic fixes
    
    Partly based on code and ideas from Tom Sylla <tom.sylla@amd.com>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c3f8abf481c2d2b221b028f7369bc6dd39a9590e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 13 04:03:42 2006 +0100

    [MTD NAND] Use vmalloc for buffer when scanning for bad blocks.
    
    These new chips have 128KiB blocks. Don't try to kmalloc that.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 4992a9e88886b0c5ebc3d27eb74d0344c873eeea
Author: Egry Gabor <gaboregry@t-online.hu>
Date:   Fri May 12 17:35:02 2006 +0100

    Trivial typo fixes in Kconfig files (MTD).
    
    Signed-off-by: Egry Gabor <gaboregry@t-online.hu>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 752870707f2818b5f0d94ca05e46cb0ffee6cbf9
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:03:23 2006 +0300

    OneNAND: fix block command typo
    
    We need to check block cmd only instead with comparing with cmd
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 493c646077ef0b8668ed71b8057f81cb7454af87
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:03:07 2006 +0300

    OneNAND: One-Time Programmable (OTP) support
    
    One Block of the NAND Flash Array memory is reserved as
    a One-Time Programmable Block memory area.
    Also, 1st Block of NAND Flash Array can be used as OTP.
    
    The OTP block can be read, programmed and locked using the same
    operations as any other NAND Flash Array memory block.
    OTP block cannot be erased.
    
    OTP block is fully-guaranteed to be a valid block.
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 3cecf69ecde22199699c4f0e609dfed2a487b674
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:02:51 2006 +0300

    OneNAND: Handle erase correctly in Double Density Package (DDP)
    
    There's erase bug in DDP.
    We need to add DDP select in erase
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 34c1060959b61a5bb2e97a88411446028cebfa7c
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:02:46 2006 +0300

    OneNAND: Write oob area with aligned size, mtd->oobsize
    
    There's some problem with write oob in serveral platform.
    So we write oob with oobsize aligned (16bytes) instead of 3 bytes (from {2,
    3})
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 8e6ec69059ba0eecbb2226d3d9e45c6efe6fb82b
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:02:41 2006 +0300

    OneNAND: Add write_oob verify function
    
    Signed-off-by: Jarkko Lavinen <jarkko.lavinen@nokia.com>

commit d9777f1c42bffff0d21cd029a2415776aa874e96
Author: Jarkko Lavinen <jarkko.lavinen@nokia.com>
Date:   Fri May 12 17:02:35 2006 +0300

    OneNand: Fix free byte positions.
    
    Some free byte positions at onenand_oob_64 were wrong. This was also
    reported by Christian Lehne. 3 byte slots are at 2+16*i and 2 byte
    slots at 14+16*i.
    
    Signed-off-by: Jarkko Lavinen <jarkko.lavinen@nokia.com>

commit 9c01f87db183403a4f603fe5180c57b82b54b4a1
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:02:31 2006 +0300

    OneNAND: handle byte access on BufferRAM
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 628bee6593107c466e28462f58c5fd5cd4163c7c
Author: Kyungmin Park <kyungmin.park@samsung.com>
Date:   Fri May 12 17:02:24 2006 +0300

    OneNAND: Add touch_softlock_watchdog()
    
    Signed-off-by: Kyungmin Park <kyungmin.park@samsung.com>

commit 20ffdcb00a792073f6e620dc2c644b3c8fbab528
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Fri May 12 11:55:51 2006 +0100

    [JFFS2] Remove number of pointer dereferences in fs/jffs2/summary.c
    
    Reduce the nr.  of pointer dereferences in fs/jffs2/summary.c
    
    Benefits:
     - micro speed optimization due to fewer pointer derefs
     - generated code is slightly smaller
     - better readability
    
    (The first two sound like a compiler problem but I'll go with the third. dwmw2).
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1867b7e3f85dc69695735ea4a4cd12027c565d89
Author: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
Date:   Fri May 12 11:53:40 2006 +0100

    [MTD] Fix invalid default value of CONFIG_MTD_PCMCIA_ANONYMOUS in Kconfig
    
    Default values for boolean and tristate options can only be 'y', 'm' or 'n'.
    This patch removes wrong default for MTD_PCMCIA_ANONYMOUS.
    
    Signed-off-by: Jean-Luc Leger <jean-luc.leger@dspnet.fr.eu.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7e59f2ccd7fc2424b2e70132ac613d16acae37da
Author: Domen Puncer <domen@coderock.org>
Date:   Fri May 12 11:51:46 2006 +0100

    [JFFS2] Remove obsolete histo.h
    
    This file hasn't actually been used since the very early days of JFFS2
    when Arjan was playing with compression methods. It can go now.
    
    Signed-off-by: Domen Puncer <domen@coderock.org>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Acked-by: Arjan van de Ven <arjan@infradead.org>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f0ad11d060c7acf727ead8339432bdd2bfd7f868
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri May 12 11:40:13 2006 +0100

    [MTD] Fix capitalisation in export of old doc2001.c initfunc
    
    Oops. Stupid StudlyCaps. Again.
    
    This driver is doubly-deprecated because is was subsumed into doc2000.c
    and _also_ we want people to start using the new NAND wrapper for these
    devices anyway. But ISTR there was still one person using it because
    something didn't work for them. Must chase that up and then I can kill
    this.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 179fdc3f8dec5757ddbebd95a1b493d65fa08671
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 11 22:35:28 2006 +0100

    [MTD] Basic NAND driver for AMD/NatSemi CS5535/CS5536 Geode companion chip
    
    This lacks hardware ECC support and a few optimisations we're going to
    want fairly soon, but it works well enough to mount and use JFFS2.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9011bff4bdc0fef1f9a782d7415c306ee61826c9
Author: Len Brown <len.brown@intel.com>
Date:   Thu May 11 00:28:12 2006 -0400

    ACPI: delete newly added debugging macros in processor_perflib.c
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 2ca48a132167f9f12efba179382979aafde0ab36
Author: James Bottomley <James.Bottomley@SteelEye.com>
Date:   Thu Apr 27 14:07:49 2006 -0500

    [SCSI] fix proc_scsi_write to return "length" on success with remove-single-device case
    
    Problem spotted by: Suzuki K P <suzuki@in.ibm.com>
    
    A zero return on success isn't correct for filesystem write functions.
    They should either return negative error or the length of bytes
    consumed.  Add code to convert our zero on success error return to
    return the length of bytes passed in.
    
    This fixes the following:
    
    $ echo "scsi remove-single-device 0 0 3 0" > /proc/scsi/scsi
    bash: echo: write error: No such device or address"
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b04ecae3d62edea2af49fd40ab12435b5ad8a492
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 10 16:16:13 2006 +0100

    [MTD] Fix capitalisation in export of DiskOnChip Millennium initfunc
    
    Stupid StudlyCaps. Who did that?
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 665b44aee34e9f2c64558df4ec01d40576e45651
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 2 19:46:49 2006 -0500

    [SCSI] iscsi: dequeue all buffers from queue
    
    debugged by wrwhitehead@novell.com
    patch and analysis by fujita.tomonori@lab.ntt.co.jp
    
    Only tcp_read_sock and recv_actor (iscsi_tcp_data_recv for us) see
    desc.count. It is is used just for permitting tcp_read_sock to read
    the portion of data in the socket.
    
    When iscsi_tcp_data_recv sees a partial header, it sets
    desc.count. However, it is possible that the next skb (containing the
    rest of the header) still does not come. So I'm not sure that this
    scheme is completely correct.
    
    Ideally, we should use the exact length of the data in the socket for
    desc.count. However, it is not so simple (see SIOCINQ in
    tcp_ioctl). So I think that iscsi_tcp_data_recv can just stop playing
    with desc.count and tell tcp_read_sock to read the all skbs. As
    proposed already, if iscsi_tcp_data_ready sets desc.count to
    non-zero, tcp_read_sock does that.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8d2860b3c3e933304f49171770658c00ed26fd79
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 2 19:46:47 2006 -0500

    [SCSI] iscsi: increment expstatsn during login
    
    debugged by Ming and Rohan:
    
    The problem Ming and Rohan debugged was that during a normal session
    login, open-iscsi is not incrementing the exp_statsn counter. It was
    stuck at zero. From the RFC, it looks like if the login response PDU has
    a successful status then we should be incrementing that value. Also from
    the RFC, it looks like if when we drop a connection then reconnect, we
    should be using the exp_statsn from the old connection in the next
    relogin attempt.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit be2df72e7ec5fa5e6e1ccccab6cef97ecbb9c191
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Tue May 2 19:46:43 2006 -0500

    [SCSI] iscsi: align printks
    
    align printk output
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit ed2abc7ff19dc99c6242a70f8578a17b2ff0d0ce
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Tue May 2 19:46:40 2006 -0500

    [SCSI] iscsi: fix manamgement task oops
    
    from patmans@us.ibm.com and michaelc@cs.wisc.edu
    
    Fix bugs when forcing a mgmt task to fail and allow
    session recovery to cleanup the session/connection
    of any running mgmt tasks. When called during
    the in login state.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 264faaaa12544e7914928ad57ccba21907cad56b
Author: Or Gerlitz <ogerlitz@voltaire.com>
Date:   Tue May 2 19:46:36 2006 -0500

    [SCSI] iscsi: add transport end point callbacks
    
    add transport end point callbacks so iscsi drivers that cannot connect
    from userspace, like iscsi tcp, using sockets do not have to
    implement their own socket infrastructure.
    
    Signed-off-by: Or Gerlitz <ogerlitz@voltaire.com>
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 32e62c636a728cb39c0b3bd191286f2ca65d4028
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Fri May 5 17:19:50 2006 -0600

    [IA64] rework memory attribute aliasing
    
    This closes a couple holes in our attribute aliasing avoidance scheme:
    
      - The current kernel fails mmaps of some /dev/mem MMIO regions because
        they don't appear in the EFI memory map.  This keeps X from working
        on the Intel Tiger box.
    
      - The current kernel allows UC mmap of the 0-1MB region of
        /sys/.../legacy_mem even when the chipset doesn't support UC
        access.  This causes an MCA when starting X on HP rx7620 and rx8620
        boxes in the default configuration.
    
    There's more detail in the Documentation/ia64/aliasing.txt file this
    adds, but the general idea is that if a region might be covered by
    a granule-sized kernel identity mapping, any access via /dev/mem or
    mmap must use the same attribute as the identity mapping.
    
    Otherwise, we fall back to using an attribute that is supported
    according to the EFI memory map, or to using UC if the EFI memory
    map doesn't mention the region.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Tony Luck <tony.luck@intel.com>

commit 83ea4ef213628683e5a63f2987a91044ab868051
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 8 22:58:25 2006 +0100

    Export cfi_cmdset_0020 and cfi_cmdset_0002 with EXPORT_SYMBOL_GPL
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6f18a022fb311f07f3b32f2c0e1b5c9477dc4439
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 8 22:40:05 2006 +0100

    Finally remove the obnoxious inter_module_xxx()
    
    This was already a bad plan when I argued against adding it in the first
    place. Good riddance.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a15bdeef108d282e540e202fc3c3e4bdf9692074
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 8 22:35:05 2006 +0100

    Remove use of inter_module_crap in NOR flash chip drivers.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 396674e58fb9d01b7768ccb8db181aea8ebead0e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 8 17:10:11 2006 +0100

    Fix non-modular case for DiskOnChip probe
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 80b9192ee032f919da1b6e8b305c7cc9881b0907
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 8 15:51:57 2006 +0100

    Move user-visible parts of drivers/s390/crypto/z90crypt.h to include/asm-s390
    
    Also remove Bob Burroughs' email address, since it's no longer valid.
    
    Acked-by: Eric D Rossman <edrossma@us.ibm.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5e535429a9117b8b6219da0e0cb087f52c0c9597
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 8 14:05:05 2006 +0100

    Remove inter_module_xxx() from DiskOnChip drivers.
    
    Finally putting it back how it was before Keith got at it -- yay :)
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 73566edf9b91dd085ddb12033d0ea7288979dd10
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun May 7 17:16:36 2006 +0100

    [MTD] Convert physmap to platform driver
    
    After dwmw2 let me know it ought to be done, I rewrote the physmap map
    driver to be a platform driver.  I know zilch about the driver model,
    so I probably botched it in some way, but I've done some tests on an
    ixp23xx board which uses physmap, and it all seems to work.
    
    In order to not break existing physmap users, I've added some compat
    code that will instantiate a platform device iff CONFIG_MTD_PHYSMAP_LEN
    is defined and != 0.  Also, I've changed the default value for
    CONFIG_MTD_PHYSMAP_LEN to zero, so that people who inadvertently
    compile in physmap (or new, platform-style, users of physmap) don't get
    burned.
    
    This works pretty well -- the new physmap driver is a drop-in replacement
    for the old one, and works on said ixp23xx board without any code changes
    needed.  (This should hold as long as users don't touch 'physmap_map'
    directly.)
    
    Once all physmap users have been converted to instantiate their own
    platform devices, the compat code can go.  (Or we decide that we can
    change all the in-tree users at the same time, and never merge the
    compat code.)
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5047f09b56d0bc3c21aec9cb16de60283da645c6
Merge: c0f1fe0... 5528e56...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 6 19:59:18 2006 +0100

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c0f1fe00c3923135b2c2f443448585482da8a53e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat May 6 19:47:57 2006 +0100

    Revert include/media changes: Mauro says those ioctls are only used in-kernel(!)
    
    Reverts commit eba7f3bdb6344adee8a3d044f405ed38f5c66c6b
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 422138dd68202fbd8ca9fb0df65e92d733249374
Author: Dmitry Bazhenov <atrey@emcraft.com>
Date:   Fri May 5 22:46:49 2006 +0100

    [JFFS2] Fix race in setting file attributes
    
    It seems like there is a potential race in the function jffs2_do_setattr()
    in the case when attributes of a symlink are updated. The symlink metadata
    is read without having f->sem locked.
    
    The following patch should fix the race.
    
    Signed-off-by: Dmitry Bazhenov <atrey@emcraft.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f03cc4fd927357bd4b3cea1a053b9f9d8f1731cc
Author: Stefano Brivio <stefano.brivio@polimi.it>
Date:   Fri May 5 03:02:25 2006 +0200

    [PATCH] bcm43xx: add PCI ID for bcm4319
    
    Add PCI ID for bcm4319.
    
    Signed-off-by: Stefano Brivio <stefano.brivio@polimi.it>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ec000ca9d4b23dfb67b70bdf72950e76728c74d9
Author: Stefano Brivio <stefano.brivio@polimi.it>
Date:   Fri May 5 02:58:29 2006 +0200

    [PATCH] bcm43xx: fix whitespace
    
    Fix whitespace.
    
    Signed-off-by: Stefano Brivio <stefano.brivio@polimi.it>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 8462fe3cd9ec8951871a20a4dfe36321ab075964
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon May 1 22:45:50 2006 +0100

    [PATCH] softmac: suggest per-frame-type TX rate
    
    This patch is the first step towards rate control inside softmac.
    
    The txrates substructure has been extended to provide
    different fields for different types of packets (management/data,
    unicast/multicast). These fields are updated on association to values
    compatible with the access point we are associating to.
    
    Drivers can then use the new ieee80211softmac_suggest_txrate() function
    call when deciding which rate to transmit each frame at. This is
    immensely useful for ZD1211, and bcm can use it too.
    
    The user can still specify a rate through iwconfig, which is matched
    for all transmissions (assuming the rate they have specified is in
    the rate set required by the AP).
    
    At a later date, we can incorporate automatic rate management into
    the ieee80211softmac_recalc_txrates() function.
    
    This patch also removes the mcast_fallback field. Sam Leffler pointed
    out that this field is meaningless, because no driver will ever be
    retransmitting mcast frames (they are not acked).
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 461c078c9cdfc1d24a436a87daed90f18c3b0d0d
Author: Pavel Roskin <proski@gnu.org>
Date:   Mon May 1 02:13:33 2006 -0400

    [PATCH] orinoco: don't put PCI resource data to the network device
    
    The resource data in the network device is intended for ISA and other
    older busses, but not for PCI.  Don't put PCI data there.  Don't (ab)use
    the network device for keeping the IRQ number.
    
    Retire orinoco_pci_setup_netdev(), and print some minimal information to
    the kernel log instead, identifying the network device and the driver
    mostly to identify problems at startup.  Scripts should rely on sysfs.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 95047dd6d00ad00e7f1f632db6b8ecaa704cfc7e
Author: Pavel Roskin <proski@gnu.org>
Date:   Mon May 1 02:13:30 2006 -0400

    [PATCH] orinoco: eliminate the suspend/resume functions if CONFIG_PM is unset
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6cbaa330f1022abfc7419aaa11ee1a9291f0beb0
Author: Pavel Roskin <proski@gnu.org>
Date:   Mon May 1 02:13:28 2006 -0400

    [PATCH] orinoco: simplify locking, fix error handling in PCMCIA resume
    
    Don't use flags in the spinlocks - the PCMCIA resume functions may not
    be called under lock.  Don't ignore any errors.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 9a568da2097ad3701ca575cb6d360d56ffeee446
Author: Pavel Roskin <proski@gnu.org>
Date:   Mon May 1 02:13:26 2006 -0400

    [PATCH] orinoco: report more relevant data on startup
    
    Report only the first I/O window and IRQ, and also add the driver name.
    The second I/O window, Vpp and configuration index are not interesting
    to most users.  They can be found by PCMCIA debug tools if needed.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit e4f4f98efdb4619ab95eb724fd5e0c4675307cc1
Author: Pavel Roskin <proski@gnu.org>
Date:   Mon May 1 02:13:24 2006 -0400

    [PATCH] orinoco: unregister network device before releasing PCMCIA resources
    
    Hardware resources should not be made available to other devices while
    the network device is still registered.  Also remove the related debug
    statements.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6274115ce9f0c87068761b2ba5b0b2f7d13c17cf
Author: Adrian Bunk <bunk@stusta.de>
Date:   Thu Apr 27 02:33:42 2006 -0700

    [PATCH] ieee80211_wx.c: remove dead code
    
    Since sec->key_sizes[] is an u8, len can't be < 0.
    
    Spotted by the Coverity checker.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Cc: "John W. Linville" <linville@tuxdriver.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6d92f83ffafe8e2ce105c3ec5696c62d6fcebcee
Author: Daniel Drake <dsd@gentoo.org>
Date:   Mon May 1 22:23:27 2006 +0100

    [PATCH] softmac: deauthentication implies deassociation
    
    The 802.11 specs state that deauthenticating also implies
    disassociating. This patch implements that, which improve the behaviour
    of SIOCSIWMLME.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Acked-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 0c6157a371f72b91bd9d2f72c2e65e2bde4cdf39
Author: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
Date:   Tue May 2 23:29:55 2006 +0200

    [PATCH] wireless/airo: minimal WPA awareness
    
    Running Linux 2.6.17-rc3-mm1 which has this patch included I get this
    interesting message:
    airo(eth0): WPA unsupported (only firmware versions 5.30.17 and greater
    support WPA.  Detected 5.30.17)
    
    airo_test_wpa_capable assumes that the softSubVer part of the firmware
    version number is coded in BCD. Apparently, that's not true.
    I have firmware version 5.30.17 and cap_rid.softSubVer is 0x11==17.
    
    Signed-off-by: Michal Schmidt <xschmi00@stud.feec.vutbr.cz>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit fd5226a72694d1c0abe1cc39711a86f1754e637d
Merge: aad6143... 178e0cc...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Fri May 5 16:56:24 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit aad61439e6a00bdb72cb649e11f6e166590c5f66
Merge: 3c30495... d98550e...
Author: John W. Linville <linville@tuxdriver.com>
Date:   Fri May 5 16:50:23 2006 -0400

    Merge branch 'from-linus' into upstream

commit f18fc729cd2d67b76e24206ee3567c1f6983c358
Merge: 5a43ee6... d98550e...
Author: Paul Mackerras <paulus@samba.org>
Date:   Fri May 5 15:45:48 2006 +1000

    Merge ../linux-2.6

commit 7e990266c845d7f712c96013891aaf74baef198f
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri May 5 00:02:08 2006 -0500

    powerpc: provide ppc_md.panic() for both ppc32 & ppc64
    
    Allow boards to provide a panic callback on ppc32.  Moved the code to sets
    this up into setup-common.c so its shared between ppc32 & ppc64.  Also moved
    do_init_bootmem prototype into setup.h.
    
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 05f75fd3bb92d9f5eaa8620195ff77a89431f2d2
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 17:50:04 2006 +0100

    Include <linux/types.h> and use __uXX types in <linux/cramfs_fs.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cb8c1fdc0cf703e3297499dcd1a4b20b27570a7a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 17:32:44 2006 +0100

    Use __uXX types in <linux/i2o_dev.h>, include <linux/ioctl.h> too
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit de654c97861c314fd0fc0b6a6dd1bc4202e00e42
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 17:28:26 2006 +0100

    Remove private struct dx_hash_info from public view in <linux/ext3_fs.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7ee7d0e3186e2ad2a872436b5a272a814ea5cb0f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 15:49:24 2006 +0100

    Include <linux/types.h> and use __uXX types in <linux/affs_hardblocks.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5da0458900bb5f56eb5e7a7c5ed275b5eaf51762
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 15:07:59 2006 +0100

    Use __uXX types in <linux/divert.h> for struct divert_blk et al.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5ee882f153a49098a12f6b26f153ba12a33d767a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 12:39:12 2006 +0100

    Use __u32 for elf_addr_t in <asm-powerpc/elf.h>, not u32. It's user-visible.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2c88f4a8bc4276013f7eee7824056d9cecccadb1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 12:07:37 2006 +0100

    Remove PPP_FCS from user view in <linux/ppp_defs.h>, remove __P mess entirely
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 90abbae2d35b3dc55fd39f8ab04acaf3da5cdc0a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 02:55:50 2006 +0100

    Use __uXX types in user-visible structures in <linux/nbd.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8e1515df578e4665b77d1e0eec3c8b041d159b23
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 01:42:36 2006 +0100

    Don't use 'u32' in user-visible struct ip_conntrack_old_tuple.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 56b192c337ddad05dee83c9bea079f41df775990
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 01:18:33 2006 +0100

    Use __uXX types for S390 DASD volume label definitions which are user-visible
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9a798c076fcc26f29bf9e9d350a17cdeff0a314f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 01:17:41 2006 +0100

    S390 BIODASDREADCMB ioctl should use __u64 not u64 type.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit ac12c0fc8c08a14bfa263c3a478ee82ad3e346d2
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 00:59:14 2006 +0100

    Remove unneeded inclusion of <linux/time.h> from <linux/ufs_fs.h>
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit eba7f3bdb6344adee8a3d044f405ed38f5c66c6b
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 00:44:14 2006 +0100

    Fix private integer types used in V4L2 ioctls.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 888855dc00c302c88663ec256bb422f4b27046f2
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 00:42:42 2006 +0100

    Fix integer types in <sound/hdsp.h> SNDRV_HDSP_IOCTL_GET_PEAK_RMS ioctl
    
    We should be using __u32 et al, not the kernel-private types.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 423bc7b22bdeb73efeabfcf91d8a459ac33088f1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu May 4 00:41:02 2006 +0100

    Restore __attribute_const__ to user-visibility in linux/compiler.h...for now
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit edc4ff7c08e9885c40e60c4fb39fa42cc91a0602
Merge: cbb9a56... e17df68...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 3 13:30:35 2006 +0100

    Merge branch 'master' of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit cbb9a56177b16294ed347ba7fcb1c66c8adb5dc4
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed May 3 13:07:27 2006 +0100

    Move jffs2_fs_i.h and jffs2_fs_sb.h from include/linux/ to fs/jffs2/
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 753a6c4ff4c371a3e4e3408aaba4d03f3cfde73a
Merge: 5d3213c... ebf34c9...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue May 2 15:26:21 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 5d3213cc8f4d6244b76ee0c4ab73a97d5d2ee956
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Fri Apr 21 19:23:26 2006 -0400

    [PATCH] s2io: init/shutdown fixes
    
    Hi,
    	The following patch contains fix related to init and shutdown of adapter
    	as per user guide.  The list of changes include
    
    	1. shutdown gracefully.
    	2. Need to mask/unmask interrupts in ISR required fro Xframe-E
    	3. Tx FIFO should be enabled after WRR calender programming
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bd1034f035f3679fbc753a1368559c0b4b89f8f6
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Fri Apr 21 19:20:22 2006 -0400

    [PATCH] s2io: additional stats
    
    Hi,
    	This patch contains additional statistics counters added to s2io driver
    	these statistics are very much usefull in debugging the driver.
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c92ca04b2a21852fbc6842e8a7c6fff3ae255b30
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Fri Apr 21 19:18:03 2006 -0400

    [PATCH] s2io: fixes
    
    Hi,
    	This patch contains some of the bug fixes done for S2io driver.
    	Following are the brief description of changes
    
    	1. Continuing with initialization if we get minimum required MSI-X vectors
    	2. fix for ethtool online link test fails
    	3. make wait_for_cmd_complete generic for all command status registers
    	4. Print "Device is on PCI-E bus" for Xframe-E card
    	5. CX4 requires additional delay after sw_reset, and requires higher value for igp
    	6. Fixed panic due to non-TCP and/or LLC/SNAP traffic in case of lro
    	7. remove legacy code for old transponder
    	8. SPECIAL_REG_WRITE made to use 32-bit writes irrespective of system type
    	9. handle link interrupt as per user guide for Xframe II
    	10. Wait till all interrupts hndled
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9dc737a77353920a67337aa627f7d9dae8dade05
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Fri Apr 21 19:05:41 2006 -0400

    [PATCH] s2io: input parms, output messages update
    
    hi,
    	This patch contains the modification and bug fixes with respect to
    	input parameters and outupt dmesages. following is brief description
    	of the changes.
    
    	1. Set default values for rx_ring_sz[0..7] and tx_fifo_len[0..7]
    	2. verify few basic load parameters
    	3. read product description from VPD
    	4. clean up of dmesg  when driver is loaded
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 863c11a91e4507c3ff44783a75a5433c8cf7700e
Author: Ananda Raju <Ananda.Raju@neterion.com>
Date:   Fri Apr 21 19:03:13 2006 -0400

    [PATCH] s2io: performance improvements
    
    hi,
    	This patch contains all the changes that were done to improve
    	performance of s2io driver. one line  description of the changes
    	are
    
    	1. For Non NAPI case the rx interrupt handler is being called
    	   unconditionally
    	2. code optimization and adding prefetch skb->data
    	3. Remove modulo operations in fast path
    	4. Enable Group Reads and set backoff interval to 0x1000
    	5. correct PIC_CNTL_SHARED_SPLITS  macro definition, and reduce
    	   pause parameter
    	6. Corrected logic of identifying rx buffer level in rx_buffer_level()
    	7. fix DMA map and unmap done with different sizes in 1-buf mode
    	8. Removed forcible disabling of ERO
    	9. Send up the packets with transfer code = 0x5
    
    Signed-off-by: Ananda Raju <ananda.raju@neterion.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1fb5fef9b80d9a3b5368e22031627afd1585487b
Merge: 1a2e8a6... 330ab71...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue May 2 14:33:57 2006 -0400

    Merge branch 'master' into upstream

commit 4f79c3ffc6e04623711e86cf9a0e09e4aad8cb36
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue May 2 10:41:25 2006 +0100

    Guard some of linux/compiler.h with #ifdef __KERNEL__
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2683e88413977a7f382106f8e8b3b684a597c761
Merge: b07019f... 9f29333...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon May 1 16:24:37 2006 +0100

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6
    
    Reverting c7afb48eb5147be9eb9789b4161462d246451ac2 since a better (but
    more intrusive) fix is now merged upstream.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit aa783a8f31c79f493bd49ba926b171b79b9839fb
Author: Andrew Morton <akpm@osdl.org>
Date:   Mon May 1 09:41:47 2006 +0100

    Update UML kernel/physmem.c to use rb_parent() accessor macro
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7d532dd50de1c0cd7d15ba06ad7261e13474fef2
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Sun Apr 30 10:36:38 2006 +0200

    ts72xx NAND driver
    
    The TS-72xx is a series of embedded single board computers from
    Technologic Systems based on the Cirrus ep93xx (arm920t based) CPU.
    
    The TS-7200 uses NOR flash, while all the other models in the series
    (TS-7250, TS-7260) use NAND flash -- included is a driver for the NAND
    flash on those boards.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b07019f29328ebb1b48d3faf952b84f07ec9b973
Merge: c3ce7e2... e0a515b...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sun Apr 30 20:34:39 2006 +0100

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit fbbc21c6a491503e55e08e3f7c4629c1337ea1cc
Author: Daniel Drake <dsd@gentoo.org>
Date:   Sat Apr 29 11:41:44 2006 +0100

    mtd: SC520CDP should depend on MTD_CONCAT
    
    Toralf Fรถrster found a compile error when CONFIG_MTD_SC520CDP=y and
    CONFIG_MTD_CONCAT=n:
    
    drivers/built-in.o: In function `init_sc520cdp':
    sc520cdp.c:(.init.text+0xb4de): undefined reference to `mtd_concat_create'
    drivers/built-in.o: In function `cleanup_sc520cdp':
    sc520cdp.c:(.exit.text+0x14bc): undefined reference to `mtd_concat_destroy'
    
    This patch fixes it.
    
    Signed-off-by: Daniel Drake <dsd@gentoo.org>
    Signed-off-by: Josh Boyer <jwboyer@gmail.com>

commit 5a43ee65620d628ba04deecf241b63b2410b97f2
Author: Will Schmidt <will_schmidt@vnet.ibm.com>
Date:   Wed Apr 26 11:09:46 2006 -0500

    [PATCH] nvram_print_partitions cosmetic fixup
    
    This is a cosmetic fixup.   When printing the nvram partition table, the
    first couple entries have a shorter 'index' value than the others, so
    table is a bit askew.   This change makes the table look pretty.
    Tested on pseries and g5.   Footnote: yes, this table is normally hidden
    behind a DEBUG_NVRAM #define.
    
    Signed-off-by: Will Schmidt <willschm@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c5c4591375a10f6bc1bc55d86af7764033b10367
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Fri Apr 28 16:37:47 2006 +0800

    [PATCH] powerpc: cell: use kzalloc in alloc_spu_context()
    
    Use kzalloc when allocating a new spu context, rather than kmalloc +
    zeroing.
    
    Booted & tested on cell.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit a74e5e5facb854ab4be9e0320e0f65074012df9b
Author: Olof Johansson <olof@lixom.net>
Date:   Fri Apr 28 08:57:09 2006 -0500

    [PATCH] powerpc iommu: minor cleanup
    
    A couple of minor renames:
    
    * The iommu_table is no longer a part of the device node structure,
      so devnode_table is misleading
    * Rename struct device *-variables to hwdev
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit bc97ce951cfb697eaac9d5b6a2fbe4544fdf1a7c
Author: Olof Johansson <olof@lixom.net>
Date:   Fri Apr 28 22:51:59 2006 -0500

    [PATCH] powerpc: kill union tce_entry
    
    It's been long overdue to kill the union tce_entry in the pSeries/iSeries
    TCE code, especially since I asked the Summit guys to do it on the code
    they copied from us.
    
    Also, while I was at it, I cleaned up some whitespace.
    
    Built and booted on pSeries, built on iSeries.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c7f0e8cb5654a50986c6097b3c0cca972e406899
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Apr 27 17:23:32 2006 +1000

    [PATCH] powerpc: merge the rest of the vio code
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit dd721ffd95d5e1516380da0b254ef737582a258f
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Apr 27 17:21:46 2006 +1000

    [PATCH] powerpc: use a common vio_match_device routine
    
    This requires the compatible properties having vaules that are empty
    strings instead of just being empty properties.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e10fa77368dff31140451fac04d78d9f51f0f3ac
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Apr 27 17:18:21 2006 +1000

    [PATCH] powerpc: use the device tree for the iSeries vio bus probe
    
    As an added bonus, since every vio_dev now has a device_node
    associated with it, hotplug now works.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 95a1ca6cd8e702a19ee56efae522a5816a56a205
Author: Stephen Rothwell <sfr@canb.auug.org.au>
Date:   Thu Apr 27 17:09:02 2006 +1000

    [PATCH] powerpc: add all the iSeries virtual devices to the device tree
    
    We do this by putting them in the flattened device tree at setup time.
    This required the flattened device tree blob to be made bigger.
    
    Currenly we don't do anything with these.
    
    Also make a function static.
    
    Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 29f147d746326e4db5fe350c70373081d61a2965
Merge: 916a3d5... 6fb8f3a...
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 29 16:15:57 2006 +1000

    Merge branch 'merge'

commit c3ce7e203af5d8eab7c3390fc991a1fcb152f741
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Apr 29 01:53:47 2006 +0100

    Sanitise ethtool.h and mii.h for userspace.
    
    They shouldn't be using 'u32' et al in structures which are used for
    communication with userspace. Switch to the proper types (__u32 etc).
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 56142536868a2be34f261ed8fdca1610f8a73fbd
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Apr 29 01:51:47 2006 +0100

    Remove unneeded _syscallX macros from user view in asm-*/unistd.h
    
    These aren't needed by glibc or klibc, and they're broken in some cases
    anyway. The uClibc folks are apparently switching over to stop using
    them too (now that we agreed that they should be dropped, at least).
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 34c278d3913a15b64943e8c40a16b4f732cc7c59
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Apr 29 01:49:06 2006 +0100

    Remove 'extern int errno;' from public view in linux/unistd.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c7afb48eb5147be9eb9789b4161462d246451ac2
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Apr 29 01:48:16 2006 +0100

    Remove struct input_device_id from public view in linux/input.h
    
    It uses kernel_ulong_t but can't be wrapped in __KERNEL__ because it's
    used from scripts/mod/file2alias.c -- but we _can_ hide it inside
    header manually too (and it doesn't generally exist for userspace).
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 778382e08cce51b6268ca49449e5bd70c8413799
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Apr 29 01:46:02 2006 +0100

    Don't include <linux/mod_devicetable.h> in public part of linux/pci.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d6754b401a15eaa16492ea5dbaa4826361d3f411
Merge: acc429a... 693f7d3...
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Sat Apr 29 01:42:26 2006 +0100

    Merge git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6

commit acc429a517bd11fdcac9bea97d082d26231beb92
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Apr 27 16:46:56 2006 +0100

    linux/blkpg.h needs <linux/compiler.h> for __user
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cd469e0cc67b74ba41daec335ea72baedb750b80
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Apr 27 15:48:08 2006 +0100

    Exclude asm-generic/{page,memory_model}.h from user bits of i386/x86_64 page.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7894eaf291238a62a565e9e9777483beeb00eeae
Merge: 9e73972... acc696d...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 27 04:55:53 2006 -0400

    Merge branch 'upstream' into irq-pio

commit 9a375e93f88269bb770fb2eaa57554c975449c88
Merge: b2b4b9a... acc696d...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 27 04:55:26 2006 -0400

    Merge branch 'upstream' into max-sect

commit acc696d93dcf993dec123d69d599979e1456ffec
Merge: bf2af2a... 2be4d50...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 27 04:53:34 2006 -0400

    Merge branch 'master' into upstream

commit 1a2e8a6f8ec0a068911a882a19e0912a0c89be6e
Merge: 9f1da23... 2be4d50...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 27 04:52:44 2006 -0400

    Merge branch 'master' into upstream

commit ad1588798620901c12ba86c71865150a4eb727bf
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Apr 27 06:57:23 2006 +0100

    Add standard include guard to asm-generic/signal and use compiler.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 274f5946dcb7c970455067be9e13a22174787592
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Apr 27 04:47:10 2006 +0100

    Don't include implementation details from asm-s390/ptrace.h and page.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b7b3c76a0a21c5a98124e90c47c488f7e4166f87
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Apr 27 00:12:56 2006 +0100

    Sanitise linux/sched.h for userspace consumption
    
    There was a whole load of crap exposed which should have been inside the
    existing #ifdef __KERNEL__ part. Also hide struct sched_param for now,
    since glibc has its own and doesn't like being given ours (yet).
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f001e47f83db18a9f202f25c0255b4d11ebe468b
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Thu Apr 27 00:11:01 2006 +0100

    Sanitise linux/audit.h for userspace consumption, split elf-em.h from elf.h
    
    Don't include <linux/sched.h> outside __KERNEL__, and split the EM_xxx
    definitions out of elf.h into elf-em.h so that audit.h can include just
    that and not pollute the namespace any further than it needs to.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 62c4f0a2d5a188f73a94f2cb8ea0dba3e7cf0a7f
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Wed Apr 26 12:56:16 2006 +0100

    Don't include linux/config.h from anywhere else in include/
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9f1da23b631f92393f58f664348ffc5faeaddeb3
Merge: 00355cd... 86a0f04...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 26 06:21:31 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 00355cd938bac2a6006efa140352958784431f1f
Merge: 45de6fd... 3c30495...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 26 06:18:15 2006 -0400

    Merge branch 'upstream' of git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-2.6 into upstream

commit 45de6fd958d7f407bdb5fdc6914b3262519d891c
Merge: 1f5d5db... 3b90887...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 26 06:18:00 2006 -0400

    Merge branch 'upstream-fixes' into upstream

commit 089f26d5e31b7bf42a9a8fefec08b30cd27f4b0e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:29:01 2006 +0100

    Don't include <linux/config.h> and <linux/linkage.h> from linux/socket.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit d85004eb15a635b3937e91d1dbadb1d37541983c
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:18:46 2006 +0100

    Don't include private headers from user-visible part of linux/ext3_fs.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 52a78c1cae382ff5684f3970848676de12449745
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:18:31 2006 +0100

    Don't include private headers from user-visible part of linux/ext2_fs.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 19b3bd667b6a4fc4c164c743492cec08d91d74a5
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:18:05 2006 +0100

    Don't include private headers from user-visible part of linux/smb_fs.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1af042271f9bf7601f7ecf4d328ccde3a44d2c72
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:16:44 2006 +0100

    Sanitise linux/sunrpc/debug.h for userspace consumption
    
    Move some inclusion of private header files and the definition of
    RPC_DEBUG inside the existing #ifdef __KERNEL__
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit eae19a762de975e109394b1edcba6587323c7d1a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:14:50 2006 +0100

    Don't export CONFIG_COMPAT stuff in linux/usbdevice_fs.h to userspace
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 468db83658f776ec87a953778f18611301668148
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:00:56 2006 +0100

    Don't include <linux/spinlock.h> from user-visible part of linux/wanrouter.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c6e82e72361db12759fdcdbfd3b598acb6b34b07
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 15:00:06 2006 +0100

    Move comment in mtd-abi.h to stop confusing unifdef
    
    Currently, unifdef removes the comment which starts on the same line as
    the #ifdef __KERNEL__, but leaves the second line of the comment in place.
    
    Move the comment onto a separate line.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7ab2febd4d3c6f50545cee11a116536a09748d59
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:55:46 2006 +0100

    Don't include private headers from user-visible part of linux/signal.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8ffbc759a5b655feb69435c4dfa857c391f9dcc8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:55:13 2006 +0100

    Don't include <asm/atomic.h> from user-visible part of linux/sem.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a3b6714e1744a5e841753d74aca1de5972f24e6d
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:54:40 2006 +0100

    Partially sanitise linux/sched.h for userspace consumption
    
    For now, just make sure all inclusion of private header files is done
    within #ifdef __KERNEL__. There'll be more to clean up later.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 98ca79d52bc34b8dfff729bc8559dbb918c9d02a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:52:51 2006 +0100

    Don't include <linux/list.h> from user-visible part of reiserfs_xattr.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 0409d3a332fc4347efba535a5003943f2a4aa1ca
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:52:13 2006 +0100

    Don't include private headers from user-visible parts of linux/quota.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 997b7af2fe0810ca82a2f801a295218b51426e5a
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:51:45 2006 +0100

    Don't include private headers from user-visible parts of include/linux/nfs*.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit eacf17bdbc8e6f24fe46cd7e10fb9a657f060d08
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:46:09 2006 +0100

    Don't include <linux/stringify> from user-visible part of linux/net.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 77597ad663f9e2d40a89c6e27824701bb5fabb83
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:26:46 2006 +0100

    Don't include <linux/list.h> from user-visible part of linux/msg.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 58908d093e77224973b3f7bf54470d51949ff110
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:26:26 2006 +0100

    Don't include private files from user-visible part of linux/ncp_fs.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 9cdcb56636717ccb935dc66c5d56681eaa5941c1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:18:07 2006 +0100

    Sanitise linux/mman.h for userspace consumption
    
    It only really needs to define a few constants and include <asm/mman.h>
    when it's used by userspace. Move the rest within #ifdef __KERNEL__
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 8e442735ae6e2e1c857fb0c746027da8d8e40a81
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:16:14 2006 +0100

    Remove gratuitous inclusion of <linux/pci.h> from linux/isdn/tpam.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 2e0e1f9f1c478ee14fb60524024f7b730df76912
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:15:44 2006 +0100

    Don't include <linux/device.h> from user-visible part of linux/ipmi.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a1b9298e55d2395be4ac25de3340b6eee01c6f67
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:14:52 2006 +0100

    Sanitise linux/i2c.h for userspace consumption
    
    It was unconditionally including a whole bunch of headers which aren't
    user-visible, and also exposing a lot of private internal stuff of its
    own. Also fix some legacy character set to UTF-8 while we're at it.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 5a570cc0a41bd316afc91ba2c7151fed70d10b31
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:10:40 2006 +0100

    Sanitise linux/i2c-algo-ite.h for userspace consumption
    
    It doesn't need to include i2c.h, because a forward declaration of
    struct i2c_adapter is perfectly sufficient. And it can be inside
    #ifdef __KERNEL__ along with the kernel-internal structure definition.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 34186efc17025520a53a48468338003d238a77d7
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:07:57 2006 +0100

    Include various private files only from within __KERNEL__ in genhd.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f2999e4ea41d6ec6252d3b6d275b40d468a3c07e
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 14:07:02 2006 +0100

    Export only the appropriate GS_xxx flags to userspace from generic_serial.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 25478bb26f2be1504112b764047105811a52c3cb
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 13:59:30 2006 +0100

    Use __KERNEL__ to hide kernel-private bits of linux/gameport.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 72b9760b65cbe0d24e668c34c8fefb2ba417f14b
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 13:58:23 2006 +0100

    Don't include agp_backend.h in user-visible part of agpgart.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a1ff0eafce81a58861534926722a70f211b04faa
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 13:57:44 2006 +0100

    Include <linux/jiffies.h> from linux/acct.h only in kernel-private part.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit dd02ec3ac25828d0918f5b389defe2238d015fe6
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Tue Apr 25 13:51:52 2006 +0100

    Remove user-visible references to PAGE_SIZE in include/asm-powerpc/elf.h
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3c304956755fa63ee80ca51ce38078fe1c4e8818
Author: Dan Williams <dcbw@redhat.com>
Date:   Sat Apr 15 12:26:18 2006 -0400

    [PATCH] wireless/airo: minimal WPA awareness
    
    airo cards with firmware versions of 5.30.17 and higher support WPA.
    This patch recognizes WPA-capable firmware versions and adds support for
    retrieving the WPA and RSN information elements from the card's scan
    results.  The JOB and FLAG fields are now independent, since there was
    no space left in the FLAG field for FLAG_WPA_CAPABLE.
    
    Signed-off-by: matthieu castet <castet.matthieu@free.fr>
    Signed-off-by: Dan Williams <dcbw@redhat.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 921a91ef6adffe066ce80823350b982c647033e7
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Apr 20 20:02:04 2006 +0200

    [PATCH] softmac: clean up event handling code
    
    This patch cleans up the event handling code in ieee80211softmac_event.c and
    makes the module slightly smaller by removing some strings that are not used
    any more and consolidating some code.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 9a1771e86756212041b32d80b850cc4c8063360a
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Thu Apr 20 20:02:02 2006 +0200

    [PATCH] softmac: add SIOCSIWMLME
    
    This patch adds the SIOCSIWMLME wext to softmac, this functionality
    appears to be used by wpa_supplicant and is softmac-specific.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Cc: Jouni Malinen <jkm@devicescape.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit e3c5a64e7075dd066316f1685caadabcbc649427
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:21:13 2006 +0800

    [PATCH] ipw2200: Fix wpa_supplicant association problem
    
    The new ipw2200 scan completion event feature will cause a potential event
    race condition in wpa_supplicant. The patch fixes this problem by move the
    ipw_disassociate() to the IW_AUTH_WPA_ENABLED event handling code.
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 127119d50ff6e226c602ae920722897f8a0c81e2
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:21:06 2006 +0800

    [PATCH] ipw2200: remove priv->last_noise reference
    
    priv->last_noise is not used with the exponential averaging algorithm
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 459d408768fecfd1c2d170ab073e8cfd48326b1f
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:21:00 2006 +0800

    [PATCH] ipw2200: rename CONFIG_IEEE80211_RADIOTAP to CONFIG_IPW2200_RADIOTAP
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 34f8ae467b066ab4cf90bdf85efd10e7d43f2ff0
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:54 2006 +0800

    [PATCH] wireless Kconfig add IPW2200_RADIOTAP
    
    Makefile both IPW2200_RADIOTAP and IPW2200_PROMISCUOUS depend on
    IPW2200_MONITOR. Let IPW2200_PROMISCUOUS select IPW2200_RADIOTAP.
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit e43e3c1e900ec5b6662cf1901b27975c111289bf
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:45 2006 +0800

    [PATCH] ipw2200: rename CONFIG_IPW_QOS to CONFIG_IPW2200_QOS
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 555fd91852880f927f131520889e1fe674ed7e7a
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:40 2006 +0800

    [PATCH] ipw2200: update version stamp to 1.1.2
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ae4af61f6d9909f3c3ab74694c06865f27c9b054
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:34 2006 +0800

    [PATCH] ipw2200: version string rework
    
    Added version string fields so the version string indicates what is
    configured (ie, you'll see 1.1.1kpmd if you are using a GIT snapshot
    (Kernel.. previously -git), promiscuous (p), monitor (m), debug (d) build.
    
    Signed-off-by: James Ketrenos <jketreno@linux.intel.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d685b8c226727bf5db907c7241f55461e7f1f008
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:27 2006 +0800

    [PATCH] ipw2200: Enable rtap interface for RF promiscuous mode while associated
    
    With this patch, a new promiscuous mode is enabled. If the module is loaded
    with the rtap_iface=1 module parameter, two interfaces will be created
    (instead of just one).
    
    The second interface is prefixed 'rtap' and provides received 802.11 frames
    on the current channel to user space in a radiotap header format.
    
    Example usage:
    
            % modprobe ipw2200 rtap_iface=1
            % iwconfig eth1 essid MyNetwork
            % dhcpcd eth1
            % tcpdump -i rtap0
    
    If you do not specify 'rtap_iface=1' then the rtap interface will
    not be created and you will need to turn it on via:
    
            % echo 1 > /sys/bus/pci/drivers/ipw2200/*/rtap_iface
    
    You can filter out what type of information is passed to user space via
    the rtap_filter sysfs entry.  Currently you can tell the driver to
    transmit just the headers (which will provide the RADIOTAP and IEEE
    802.11 header but not the payload), to filter based on frame control
    type (Management, Control, or Data), and whether to report transmitted
    frames, received frames, or both.
    
    The transmit frame reporting is based on a patch by Stefan Rompf.
    
    Filters can be get and set via a sysfs interface. For example, set the
    filter to only send headers (0x7), don't report Tx'd frames (0x10), and
    don't report data frames (0x100):
    
            % echo 0x117 > /sys/bus/pci/drivers/ipw2200/*/rtap_filter
    
    All your packets are belong to us:
    
            % tethereal -n -i rtap0
    
    Signed-off-by: James Ketrenos <jketreno@linux.intel.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit c6c33a779dfe7aa8254be4da08c217914f1390a0
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:21 2006 +0800

    [PATCH] README.ipw2200: rename CONFIG_IPW_DEBUG to CONFIG_IPW2200_DEBUG
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 0070f8c738f757c2dda521d6bc310dc2dfdbf643
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:12 2006 +0800

    [PATCH] ipw2200: Fix endian issues with v3.0 fw image format
    
    This patch corrects endian issues with the v3.0 fw image format.
    
    Signed-off-by: James Ketrenos <jketreno@linux.intel.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 455936c73337c1c9abeac8c4da1c109a0250ab68
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:20:05 2006 +0800

    [PATCH] ipw2200: Set the 'fixed' flags in wext get_rate
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 61fb9ed99dc8876cb118bd9ab46b535ca8c820e8
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:55 2006 +0800

    [PATCH] ipw2200: turn off signal debug log
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d0b526b71569446aaa848cdf4cf3dd8948f0931a
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:50 2006 +0800

    [PATCH] ipw2200: Do not continue loading the firmware if kmalloc fails
    
    Signed-off-by: Ingo Molnar <mingo@elte.hu>
    Cc: "Zhu, Yi" <yi.zhu@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 5dc81c3071d015a6afb4a04c1bcb6a35ec29df37
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:44 2006 +0800

    [PATCH] ipw2200: fix compile warning when !CONFIG_IPW2200_DEBUG
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d2b83e1214a8395ee18e028d4526cffe9d2eb4ad
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:36 2006 +0800

    [PATCH] ipw2200: add module_param support for antenna selection
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 07f02e4625e6d7ca5d4f3835aea9807fe1e0f9c5
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:25 2006 +0800

    [PATCH] ipw2200: generates a scan event after a scan has completed
    
    The patch make ipw2200 generate the scan event every time a scan has
    completed, so that user space know when to get fresh results.
    Dan Williams would like to go towards this model in Network Manager
    rather than having to poll.
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a5cf4fe65144ff2f35de37c7b58e7ab8ffd84d19
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:11 2006 +0800

    [PATCH] ipw2200: Fix TX QoS enabled frames problem
    
    This patch works with the ieee80211 stack to set the correct QoS bit to the
    ipw2200 card. It fixed the TX failure problem for using WPA with QoS.
    
    Signed-off-by: Hong Liu <hong.liu@intel.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 00d21de5c685ab450ef376acdd1b733badb6b50d
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:19:02 2006 +0800

    [PATCH] ipw2200: Exponential averaging for signal and noise Level
    
    This patch replaces sliding averaging by exponential averaging for
    reporting the wireless statistics for signal and noise level for ipw2200.
    See details from: http://www.ces.clemson.edu/linux/ipw2200_averages.shtml
    
    Signed-off-by: Bill Moss <bmoss@clemson.edu>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 45a62ab3d6f9d5963cb7c01fa76c950e42d037c2
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:17:54 2006 +0800

    [PATCH] ieee80211: update version stamp to 1.1.13
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 7736b5bd93765fc1db5b3b6e25200d7c4292d14b
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:17:47 2006 +0800

    [PATCH] ieee80211: replace debug IEEE80211_WARNING with each own debug macro
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 35c14b855f52c49e4f3d078b9532b056005ed321
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:17:35 2006 +0800

    [PATCH] ieee80211: remove unnecessary CONFIG_WIRELESS_EXT checking
    
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 09593047d8210ca017a0b4aa0a7fb10abf12615f
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:17:26 2006 +0800

    [PATCH] ieee80211: export list of bit rates with standard WEXT procddures
    
    The patch replace the way to export the list of bit rates in scan results
    from IWEVCUSTOM to SIOCGIWRATE. It also removes the max_rate item exported
    with SIOCGIWRATE since this should be done by userspace.
    
    Signed-off-by: Jean Tourrilhes <jt@hpl.hp.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 73858062b66c07d71bce47a0e4798dd3ce604590
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:17:17 2006 +0800

    [PATCH] ieee80211: Fix TX code doesn't enable QoS when using WPA + QoS
    
    Fix ieee80211 TX code when using WPA+QOS. TKIP/CCMP will use
    the TID field of qos_ctl in 802.11 frame header to do encryption. We
    cannot ignore this field when doing host encryption and add the qos_ctl
    field later.
    
    Signed-off-by: Hong Liu <hong.liu@intel.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit ea2841521a7e061b772d6cee03f5b23c58a58284
Author: Zhu Yi <yi.zhu@intel.com>
Date:   Thu Apr 13 17:17:06 2006 +0800

    [PATCH] ieee80211: Fix TKIP MIC calculation for QoS frames
    
    Fix TKIP MIC verification failure when receiving QoS frames from AP.
    
    Signed-off-by: Hong Liu <hong.liu@intel.com>
    Signed-off-by: Zhu Yi <yi.zhu@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit cc9357104b19b2b0377713c33d87d78518912c3d
Author: Michael Buesch <mb@bu3sch.de>
Date:   Mon Apr 10 02:08:33 2006 +0200

    [PATCH] bcm43xx: use pci_iomap() for convenience.
    
    This reduces codesize.
    
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit f298a2ec62e51cc81b85a120d8fa5b9f8f5a94b1
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:11:02 2006 -0400

    [PATCH] orinoco: bump version to 0.15
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit dc3437d205dcd1a195ebf795f1c54ceb638337fb
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:11:00 2006 -0400

    [PATCH] orinoco: further comment cleanup in the PCI drivers
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit b884c872fa1917614b42a39020ffcca7fa9302b1
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:57 2006 -0400

    [PATCH] orinoco: reduce differences between PCI drivers, create orinoco_pci.h
    
    Make all Orinoco PCI drivers (orinoco_pci, orinoco_plx, orinoco_tmd and
    orinoco_nortel) as similar as possible.  Use the best implementation of
    error handling, the best error messages, the best comments.
    
    Put common code to orinoco_pci.h.  For now, it's suspend and resume
    functions and function for registering the network device.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit c6fb2e9abef894efc4870e4c1e3aa4365b830a11
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:55 2006 -0400

    [PATCH] orinoco: support PCI suspend/resume for Nortel, PLX and TMD adaptors
    
    Copy PCI suspend/resume functions from orinoco_pci.c.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 3d529962217c3fec36f53f270a37e132b9763c65
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:53 2006 -0400

    [PATCH] orinoco_pci: use pci_iomap() for resources
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit d62274b374ce41dd3a90820b124d28fec292a5b7
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:51 2006 -0400

    [PATCH] orinoco_pci: disable device and free IRQ when suspending
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 37a6c6117db3f10e1923c14dffa089b10600c4b8
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:49 2006 -0400

    [PATCH] orinoco: delay FID allocation after firmware initialization
    
    This is needed to identify the card before possible allocation problems,
    so that the user at least can report the firmware version that fails.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 2c1bd26035491cd0ba7e49be6ed610fc4912fef9
Author: Jiri Benc <jbenc@suse.cz>
Date:   Fri Apr 7 04:10:47 2006 -0400

    [PATCH] orinoco: fix BAP0 offset error after several days of operation
    
    After several days of operation of Netgear MA311 card, the card becomes
    to seek improperly and needs reset. This patch tries to reset the card
    when this situation occurs.
    
    Mar  9 06:45:16 berkeley kernel: wlan0: Error -5 writing packet to BAP
    Mar  9 06:45:16 berkeley kernel: hermes @ f992a000: BAP0 offset error: reg=0x4044 id=0x128 offset=0x44
    Mar  9 06:45:16 berkeley kernel: wlan0: Error -5 writing packet to BAP
    Mar  9 06:45:16 berkeley kernel: hermes @ f992a000: BAP0 offset error: reg=0x4044 id=0x128 offset=0x44
    (etc.)
    
    A more detailed description of the problem can be found at
    https://bugzilla.novell.com/show_bug.cgi?id=154773
    The same problem with different card is reported at
    http://sourceforge.net/mailarchive/message.php?msg_id=14597046
    
    Signed-off-by: Jiri Benc <jbenc@suse.cz>
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a28dc81dcd9ca9a451bfcab0a2351b0b07146759
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:45 2006 -0400

    [PATCH] orinoco: simplify 802.3 encapsulation code
    
    Use skb_pull() to strip the addresses from the original packet.  Don't
    strip protocol bytes.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 470e2aa6dbdd2c7eb6562ae365a17a627f7070e8
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:43 2006 -0400

    [PATCH] orinoco: refactor and clean up Tx error handling
    
    The result of orinoco_xmit() can be OK, dropped packet and busy
    transmitter.  Rename labels accordingly.  Increment stats->tx_errors in
    one place.  Increment stats->tx_dropped - nobody is doing it for us.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 8d5be088263b0d3dbb7e7959b7c403b3d026a5d3
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:41 2006 -0400

    [PATCH] orinoco: don't use any padding for Tx frames
    
    hermes_bap_pwrite() supports odd-sized packets now.   There is no
    minimal packet size for 802.11.  Also, hermes_bap_pwrite() supports
    odd-sized packets now.  This removes all reasons to pad the Tx data.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 6b61626290900f12b7f3978f57f329da6811fb59
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:39 2006 -0400

    [PATCH] orinoco replace hermes_write_words() with hermes_write_bytes()
    
    The new function can write an odd number of bytes, thus making padding
    unnecessary.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit b34b867e944628418d587367276c9a82e03aba8c
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:36 2006 -0400

    [PATCH] orinoco: orinoco_xmit() should only return valid symbolic constants
    
    Don't ever return -errno from orinoco_xmit() - the network layer doesn't
    expect it.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 30c2d3b48176279b1381b00ae86f3d01147d0915
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:34 2006 -0400

    [PATCH] orinoco: optimize Tx exception handling in orinoco
    
    When processing Tx exception, only read data until addr1.  Rename
    hermes_tx_descriptor_802_11 to hermes_txexc_data since it's only used to
    Tx exceptions.  Reuse existing hermes_tx_descriptor structure.  Remove
    fields after addr1 - they are not read from the card.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 4ebe2eb0b388445d18dae34849cc6a9e7c55315f
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:32 2006 -0400

    [PATCH] orinoco: Symbol card supported by spectrum_cs is LA4137, not LA4100
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 754b1364e78db796bb3a541f6ea8dec2821c745a
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:30 2006 -0400

    [PATCH] orinoco: remove debug buffer code and userspace include support
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 65b1fe7df71e7ad09e9203b6c3875781c30557e0
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:28 2006 -0400

    [PATCH] orinoco: remove tracing code, it's unused
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 7eeae2ffadf170f954205733f511ca40df91f0b7
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:24 2006 -0400

    [PATCH] orinoco: remove underscores from little-endian field names
    
    Sparse is much better at finding endianess issues than such visual cues.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit b018779cbda646c37346433167145b4624c8979b
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:21 2006 -0400

    [PATCH] orinoco: remove PCMCIA audio support, it's useless for wireless cards
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit a6e26e8ddbe8717103556ecd8ecd383de32671e4
Author: Pavel Roskin <proski@gnu.org>
Date:   Fri Apr 7 04:10:19 2006 -0400

    [PATCH] orinoco: Remove useless CIS validation
    
    The PCMCIA drivers would never be loaded if the CIS were wrong.
    No other PCMCIA drivers validate CIS.
    
    Signed-off-by: Pavel Roskin <proski@gnu.org>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

commit 916a3d5729c8b710d56acf579f3fdb4de7c03e77
Merge: 55308c3... d0e15be...
Author: Paul Mackerras <paulus@samba.org>
Date:   Sun Apr 23 10:55:56 2006 +1000

    Merge branch 'merge'

commit 55308c3712f56279d5547ef6e97d365ac3ab9e6d
Merge: 8833843... c18bcf4...
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 22 19:47:47 2006 +1000

    Merge branch 'for_paulus' of master.kernel.org:/pub/scm/linux/kernel/git/galak/powerpc

commit 8833843c877cca459ab7b9fee661523bf25b98d1
Merge: ac325ac... 7c8ce71...
Author: Paul Mackerras <paulus@samba.org>
Date:   Sat Apr 22 19:47:24 2006 +1000

    Merge branch 'merge'

commit ac325acd50013fa8f4953208cbb96504dec9b12a
Author: Linas Vepstas <linas@austin.ibm.com>
Date:   Tue Apr 18 21:05:21 2006 -0700

    [PATCH] powerpc/pseries: clear PCI failure counter if no new failures
    
    The current PCI error recovery system keeps track of the number of PCI card
    resets, and refuses to bring a card back up if this number is too large.
    The goal of doing this was to avoid an infinite loop of resets if a card is
    obviously dead.  However, if the failures are rare, but the machine has a
    high uptime, this mechanism might still be triggered; this is too harsh.
    
    This patch will avoids this problem by decrementing the fail count after an
    hour.  Thus, as long as a pci card BSOD's less than 6 times an hour, it
    will continue to be reset indefinitely.  If it's failure rate is greater
    than that, it will be taken off-line permanently.
    
    This patch is larger than it might otherwise be because it changes
    indentation by removing a pointless while-loop.  The while loop is not
    needed, as the handler is invoked once fo each event (by schedule_work());
    the loop is leftover cruft from an earlier implementation.
    
    Signed-off-by: Linas Vepstas <linas@austin.ibm.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4bd174fe1cca738f53cf8bb9ac3cb327b1f516ed
Author: Olof Johansson <olof@lixom.net>
Date:   Tue Apr 18 11:25:53 2006 -0500

    [PATCH] powerpc: Remove stale iseries global
    
    Not even the iSeries maintainer seems to have access to this legendary
    piranha simulator. It adds a bit of ugliness in the common time init
    code, and if it's no longer used we might as well be done with it and
    remove the bloat.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 5e1415c3f7d3ad133edb7ce9ca90641cf0f5fe79
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:29:00 2006 -0500

    [PATCH] powerpc: Quiet oprofile output at boot
    
    No need to always print out which performance monitoring type is used
    on the console at every boot.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 90ddfebec1b450258f85d42f043cfbae450fe47e
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:28:13 2006 -0500

    [PATCH] powerpc: Quiet rtasd output at boot
    
    Most users won't really know the difference between a started RTAS
    daemon and a missing event-scan. Move it to debug levels.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e884e9c5f28c747ac2c3e1056e1fd655a79e950d
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:26:59 2006 -0500

    [PATCH] powerpc: Quiet PCI init printouts
    
    Quiet some of the more debug related output from the pci probe routines.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit cc98f70557bd08f2eea7b955dd918692a655d72e
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:26:00 2006 -0500

    [PATCH] powerpc: Lack of ISA interrupts on XICS isn't dangerous
    
    This isn't really a dangerous thing any more; most systems lack
    ISA interrupt controllers.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit e110b281dc93e3b4587a3d0440bb7ae38daddfde
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:25:01 2006 -0500

    [PATCH] powerpc: Less verbose mem configuration output
    
    Quieten some of the debug ram config output. we already print out available
    memory at KERN_INFO level.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 4baaf0cfda7279e1adaedc203d7a09e8e44597ab
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:23:22 2006 -0500

    [PATCH] powerpc: Don't print chosen idle loop at every boot
    
    No need to write out what idle loop is used on every boot.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f98baffb82710803005c19897f1a55af91da5685
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:22:29 2006 -0500

    [PATCH] powerpc: Quiet VETH version printk
    
    ibmveth_printk() is only used to print the driver version when the module
    initializes, which means on all machines as long as it's compiled in.
    
    If it's really only needed for debugging, boot with loglevel=8, or get
    it from dmesg instead.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit f430c02b13f00146106fedcace810e61b4493d8c
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:21:06 2006 -0500

    [PATCH] powerpc: Quiet page order output
    
    No need to always print page orders.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 224ad80ac0de102d7bede8d36afbd5ef0a64019f
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:20:27 2006 -0500

    [PATCH] powerpc: Quiet time init output
    
    Move time_init console output to KERN_DEBUG prink level. No need to
    print it at every boot.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 8b6a7b2ea2ab18d46bc9e0e76b614d8c155291ad
Author: Olof Johansson <olof@lixom.net>
Date:   Wed Apr 12 15:19:50 2006 -0500

    [PATCH] powerpc: Quiet HVSI boot output
    
    There's no real need to print the number of found HVSI devices on the
    console at every boot.
    
    Signed-off-by: Olof Johansson <olof@lixom.net>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit c256f4b9598c71afd8eb0b7d3d3790a38734cf43
Author: Anton Blanchard <anton@samba.org>
Date:   Fri Apr 7 15:23:03 2006 +1000

    [PATCH] powerpc: remove io_page_mask
    
    Cleanup patch which removes the io_page_mask.  It fixes the reset on
    some e1000 devices which is needed for clean kexec reboots.  The legacy
    devices which broke with this patch (parallel port and PC speaker) have
    now been fixed in Linus' tree.
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Acked-by: Michael Neuling <mikey@neuling.org>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit 81bbbe92949b069c101e13d3acbd4bc7d088cb79
Author: Haren Myneni <hbabu@us.ibm.com>
Date:   Wed Apr 5 21:10:18 2006 -0600

    [PATCH] powerpc: clear IPIs on kdump
    
    In some crash scenarios, the kexec CPU is not responding to an IPI sent by
    secondary CPU after init thread is forked, causing the system to drop into
    xmon during kdump boot.  This problem can be reproduced each time when the
    debugger is enabled and soft-reset is used to invoke kdump boot. The first
    CPU sends an IPI - setting the IPI priority for all secondary cpus
    (xics_cause_ipi()). But some CPUs will enter into the xmon via soft-reset,
    i.e, not executing xics_ipi_action(). Hence, IPI is not cleared. When
    exited from the debugger, one of these CPUs could become the primary kexec
    CPU. Since the IPI is not cleared, causing this issue in kdump boot. This
    patch clears and EOI IPI for kexec CPU as well before the kdump boot
    started.
    
    Signed-off-by: Haren Myneni <haren@us.ibm.com>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit d6c1a9081080c6c4658acf2a06d851feb2855933
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Tue Apr 4 13:43:01 2006 +0200

    [PATCH] powerpc: Disable and EOI interrupts in machine_crash_shutdown()
    
    We've seen several bugs caused by interrupt weirdness in the kdump kernel.
    Panicking from an interrupt handler means we fail to EOI the interrupt, and
    so the second kernel never gets that interrupt ever again. We also see hangs
    on JS20 where we take interrupts in the second kernel early during boot.
    
    This patch fixes both those problems, and although it adds more code to the
    crash path I think it is the best solution.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Paul Mackerras <paulus@samba.org>

commit ed198cb49750fd9ec564e9f1df66c10efea605f1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Sat Apr 22 02:38:50 2006 +0100

    [RBTREE] Update hrtimers to use rb_parent() accessor macro.
    
    Also switch it to use the same method of using off-tree nodes as
    everyone else now does -- set them to point to themselves.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit e977145aeaad23d443686f2a2d5b32800d1607c5
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 23:15:39 2006 +0100

    [RBTREE] Add explicit alignment to sizeof(long) for struct rb_node.
    
    Seems like a strange requirement, but allegedly it was necessary for
    struct address_space on CRIS, because it otherwise ended up being only
    byte-aligned. It's harmless enough, and easier to just do it than to
    prove it isn't necessary... although I really ought to dig out my etrax
    board and test it some time.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 55a981027fc393c86de2c4e7836c9515088a9a58
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:35:51 2006 +0100

    [RBTREE] Merge colour and parent fields of struct rb_node.
    
    We only used a single bit for colour information, so having a whole
    machine word of space allocated for it was a bit wasteful. Instead,
    store it in the lowest bit of the 'parent' pointer, since that was
    always going to be aligned anyway.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 1975e59375756da4ff4e6e7d12f67485e813ace0
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:30:36 2006 +0100

    [RBTREE] Remove dead code in rb_erase()
    
    Observe rb_erase(), when the victim node 'old' has two children so
    neither of the simple cases at the beginning are taken.
    
    Observe that it effectively does an 'rb_next()' operation to find the
    next (by value) node in the tree. That is; we go to the victim's
    right-hand child and then follow left-hand pointers all the way
    down the tree as far as we can until we find the next node 'node'. We
    end up with 'node' being either the same immediate right-hand child of
    'old', or one of its descendants on the far left-hand side.
    
    For a start, we _know_ that 'node' has a parent. We can drop that check.
    
    We also know that if 'node's parent is 'old', then 'node' is the
    right-hand child of its parent. And that if 'node's parent is _not_
    'old', then 'node' is the left-hand child of its parent.
    
    So instead of checking for 'node->rb_parent == old' in one place and
    also checking 'node's heritage separately when we're trying to change
    its link from its parent, we can shuffle things around a bit and do
    it like this...
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 21f1d5fc592e145574dede8debe9603334d08fde
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:17:57 2006 +0100

    [RBTREE] Update JFFS2 to use rb_parent() accessor macro.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c569882b2e70a0c4eac99acdb39b493549041ba1
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:17:24 2006 +0100

    [RBTREE] Update eventpoll.c to use rb_parent() accessor macro.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit fed306f2baa170220b0299198a39c6be2a91bf19
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:16:49 2006 +0100

    [RBTREE] Update key.c to use rb_parent() accessor macro.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 52b5108ca7490c0609e4dbddd8439bc03d702c99
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:15:57 2006 +0100

    [RBTREE] Update ext3 to use rb_parent() accessor macro.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 3db3a445308b3cee9bbbd8baa6d05081c9532da0
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:15:17 2006 +0100

    [RBTREE] Change rbtree off-tree marking in I/O schedulers.
    
    They were abusing the rb_color field to mark nodes which weren't currently
    on the tree. Fix that to use the same method as eventpoll did -- setting
    the parent pointer to point back to itself. And use the appropriate
    accessor macros for setting and reading the parent.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7fe1e133bf45b0fe70491ed3d4c5b491feff7aa8
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Fri Apr 21 13:12:44 2006 +0100

    [RBTREE] Add accessor macros for colour and parent fields of rb_node
    
    This is in preparation for merging those fields into a single
    'unsigned long', because using a whole machine-word for a single bit
    of colour information is wasteful.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit bf2af2a2027e52b653882fbca840620e896ae081
Author: Bastiaan Jacques <b.jacques@planet.nl>
Date:   Mon Apr 17 14:17:59 2006 +0200

    [PATCH] ahci: add support for VIA VT8251
    
    Adds AHCI support for the VIA VT8251.
    
    Includes a workaround for a hardware bug which requires a Command List
    Override before softreset.
    
    Signed-off-by: Bastiaan Jacques <b.jacques@planet.nl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 857c68f733eea07f11a061caea43a38fed61adb7
Merge: 4741c33... 402a26f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 20 18:36:05 2006 -0400

    Merge branch 'master'

commit 1f5d5dbf0372dd933d8325054889ba09d996e50b
Merge: a7bb131... fef6108...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 20 17:55:24 2006 -0400

    Merge branch 'upstream-fixes'

commit a7bb131899814fc2bb7a3226fa8384685fe34f7d
Merge: 18e37f2... f18b95c...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 20 17:42:15 2006 -0400

    Merge branch 'upstream-fixes'

commit 18e37f2a979dd696e6b4495b6f2470c01ffeab6c
Author: Marc Zyngier <maz@misterjones.org>
Date:   Thu Apr 13 11:38:20 2006 +0200

    [PATCH] netdrvr: Convert cassini to pci_iomap
    
    Folks,
    
    This patch (against 2.6.17-rc1) converts the cassini driver to the
    pci_iomap API that will do the right thing, so architectures like
    PARISC can stop screaming about illegal usage of ioremap() on
    non-cacheable regions.
    
    Tested on 64bit PARISC kernel.
    
    Signed-off-by: Marc Zyngier <maz@misterjones.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d5498bef6fcd8ca0e4579eeb0b0d724f20221bb1
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 20 17:39:14 2006 -0400

    [netdrvr smc911x] trim trailing whitespace

commit 0a0c72c9118c4e63080eb409f0cfdf15808d23a4
Author: Dustin McIntire <dustin@sensoria.com>
Date:   Wed Apr 19 20:24:51 2006 -0700

    [PATCH] RE: [PATCH 1/1] net driver: Add support for SMSC LAN911x line of ethernet chips
    
    >
    > The patch was badly wordwrapped.  Please fix and resend.
    >
    
    OK, I've fixed the wrapping and removed the CONFIG_ARM restriction.  I've also did my
    best to modify the C style to conform to the comments.
    
    I noticed that the patch is getting ignored by majordomo due to its size >100K.
    Should it be broken up somehow to allow posting to the lists?
    
    Signed-off-by: Dustin McIntire <dustin@sensoria.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 89be0501a013737d562f56ce1c5a2ff075995b11
Author: Sergei Shtylyov <sshtylyov@ru.mvista.com>
Date:   Wed Apr 19 22:46:21 2006 +0400

    [PATCH] au1000_eth.c probe code straightened up
    
          Straighten up the AMD Au1xx0 Ethernet probing code, make it print out (and
    store in the 'net_device' structure) the physical address of the controller,
    not the KSEG1-based virtual. Make the driver also claim/release the 4-byte MAC
    enable registers and assign to the Ethernet ports two consecutive MAC
    addresses to match those that are printed on their stickers.
    
    Signed-off-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e2fd956c670928e93208dc5d27dfdc7b51163900
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Wed Apr 19 15:39:09 2006 +1000

    [PATCH] sungem: Marvell PHY suspend
    
    In a short discussion with Benjamin Herrenschmidt he mentioned
    that Marvell PHYs are powered down the same way as the other
    ones we currently handle. Thus actually do that, hopefully
    saving some power during suspend.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d1a667892658259aab52d9968571abd9efbc59a1
Merge: d269a69... 1cb5821...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 20 17:30:41 2006 -0400

    Merge branch 'e1000-7.0.38-k2-fixes' of git://63.64.152.142/~ahkok/git/netdev-2.6

commit d269a69fbbbb7ddd2081af7a768feac754b8357a
Author: Daniele Venzano <venza@brownhat.org>
Date:   Mon Apr 17 10:28:06 2006 +0200

    [PATCH] Add VLAN (802.1q) support to sis900 driver
    
    The attached patch adds support for VLANs to the sis900 driver and bumps
    the version number. It is based on an old (2003) patch for the 2.4
    series by Hamid Hashemi Golpayegani. It applies on top of 2.6.16(.5).
    I have one report that it works and behaves as intended.
    Please review and consider for inclusion.
    
    Signed-off-by: Daniele Venzano <venza@brownhat.org>
    
    --
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5ad05b990062c1b7a797f0ca293f6bdde62a50d9
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Thu Apr 13 20:19:23 2006 +0200

    [PATCH] s390: remove tty support from ctc network device driver [2/2]
    
    Hi,
    here comes the second of the two patches ...
    
    Frank
    
    From: Peter Tiedemann <ptiedem@de.ibm.com>
            [2/2]: remove ctctty.c and ctctty.h files .
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 56347a2e7287377c35c2bac2e8643bf88690425f
Author: Frank Pavlic <fpavlic@de.ibm.com>
Date:   Thu Apr 13 20:19:12 2006 +0200

    [PATCH] s390: remove tty support from ctc network device driver [1/2]
    
    Hi jeff,
    after the first shot I sent to you did not apply I
    resend  two new patches I've made today to remove tty from ctc network driver.
    Please apply ....
    
    Thank you ...
    
    Frank
    
    From: Peter Tiedemann <ptiedem@de.ibm.com>
            [1/2]:
            tty support code will be removed from the ctc network device driver.
            Today we have a couple of alternatives which are performing much
            better. The second thing is that ctc should be a network
            device driver only.
            We should not mix tty and networking here.
            This first patch will remove the tty code from ctcmain.c .
            It also removes the build entry from the Makefile as well as TTY
            definitions from ctcmain.h.
            The second patch will remove two files, ctctty.c and ctctty.h.
    
    Signed-off-by: Frank Pavlic <fpavlic@de.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9707b27100a48950f1e15e08a7c5028786e47f55
Merge: 8fc6516... 402a26f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Thu Apr 20 17:27:45 2006 -0400

    Merge branch 'master'

commit 169e1a2a8a789fa84254695ec6a56fc410bb19a9
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Apr 18 21:09:08 2006 -0700

    [SCSI] scsi_lib.c: fix warning in scsi_kmap_atomic_sg
    
    drivers/scsi/scsi_lib.c: In function `scsi_kmap_atomic_sg':
    drivers/scsi/scsi_lib.c:2394: warning: unsigned int format, different type arg (arg 3)
    drivers/scsi/scsi_lib.c:2394: warning: unsigned int format, different type arg (arg 4)
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 954c24227318c166ec1925e1229db442e1f56f51
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Tue Apr 18 21:03:08 2006 -0700

    mtd: improve parameter parsing for block2mtd
    
    Expand the parameter parsing for block2mtd.  It now accepts:
    Ki, Mi, Gi	- the official prefixes for binary multiples,
    		  see http://physics.nist.gov/cuu/Units/binary.html,
    ki		- mistake on my side and analog to "k" for decimal multiples,
    KiB, MiB, GiB	- for people that prefer to add a "B" for byte,
    kiB		- combination of the above.
    
    There were complaints about not accepting "k" for 1024.  This has long
    been common practice, but is known to lead to confusion.  Hence the new
    SI units and hence block2mtd only accepts units that cannot be confused
    with decimal units.  Diverging from common practice doesn't always please
    people, even if the change is for the better.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Cc: David Woodhouse <dwmw2@infradead.org>
    Cc: Thomas Gleixner <tglx@linutronix.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>

commit 1cb5821f444cadbe94453282f9f4767cf8744a8e
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Apr 18 12:31:04 2006 -0700

    e1000: fix mismerge skb_put.
    
    Seems there was a bit of a fix needed to due a bad merge in the legacy
    receive path.  Fixes a panic due to skb_over_panic.
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit dc86d32ab51c4ad3086472457fb90b61249d91f5
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Tue Apr 18 12:30:51 2006 -0700

    e1000: fix mispatch for media type detect.
    
    Recent patch was mismerged in the miitool path. e1000_media_type_copper
    was being compared with the phy type instead of the media type.
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>

commit 9e73972cef1c0961c78b0e0b61c4ecc275b29f04
Merge: a890b15... 4741c33...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 18 05:39:23 2006 -0400

    Merge branch 'upstream'

commit b2b4b9a7c09ad66e095b13c97946a96f2dc8284e
Merge: 875999c... 4741c33...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 18 05:39:10 2006 -0400

    Merge branch 'upstream'

commit 4741c336d27dec3ea68a35659abb8dc82b142388
Merge: 26ec634... a9a5cd5...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 18 04:54:00 2006 -0400

    Merge branch 'master'

commit 373d5e71833978fe3d91264d86857762bb92cfe2
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Apr 18 02:05:46 2006 +0100

    JFFS2: Return an error for long filenames
    
    Return an error if a name is too long for JFFS2 rather than
    corrupting data.
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit 6e62e8c2c7b1e3387d73ecb3f7539314b7a9931e
Author: Richard Purdie <rpurdie@rpsys.net>
Date:   Tue Apr 18 02:04:18 2006 +0100

    MTD: Correct Poodle partition size
    
    Correct the MTD NAND partition size for Poodle (Sharp Zaurus SL-5600)
    
    Signed-off-by: Richard Purdie <rpurdie@rpsys.net>

commit b802c0741103aa92251d536c115874d51f802ec8
Author: Thago Galesi <thiagogalesi@gmail.com>
Date:   Mon Apr 17 17:38:15 2006 +0100

    [PATCH] Remove unnecessary kmalloc/kfree calls in mtdchar
    
    This patch removes repeated calls to kmalloc / kfree in mtd_write /
    mtd_read functions, replacing them by a single kmalloc / kfree pair.
    
    Signed-off-by: Thiago Galesi <thiagogalesi@gmail.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit cd2866faaa0efd9af18fe4a86d129cbd99240796
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Thu Apr 13 18:55:09 2006 +0200

    Remove unused MTD types
    
    Three types are never set or checked for.  Remove.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit a6c591eda3078f92e7a3ff3db55f6841e4819fb5
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Thu Apr 13 18:54:34 2006 +0200

    Remove unchecked MTD flags
    
    Several flags are set by some devices, but never checked.  Remove them.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit af63a3bcac77d8c01f3d963bac11a6f3f9b7c473
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Thu Apr 13 18:53:55 2006 +0200

    Make mtdblock_ro unconditionally readonly
    
    mtdblock_ro is by definition readonly.  Remove the silly checks.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 7f7c08dfdf5bc0a7c906285d9d97b932f83e8979
Author: Joern Engel <joern@wohnheim.fh-wedel.de>
Date:   Thu Apr 13 18:53:14 2006 +0200

    Simplify test for RAM devices
    
    mtdblock is the only user of aggregate capabilities in mtd.  This is clearly
    bogus and should be changed.  In particular, it tries to determine whether
    the device in question is a piece of RAM.  For every single driver that fits
    the current criteria, an easier test would be to check for the type being
    MTD_RAM.
    
    Signed-off-by: Joern Engel <joern@wohnheim.fh-wedel.de>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 94171db1d2f23c22b6050d210b72db3bb2f0b81e
Merge: d96fb99... c19f7a9...
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Apr 17 15:35:18 2006 +0100

    Merge with git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git

commit d96fb997c6174f98a2a0a98200f99ac13b053bd6
Author: David Woodhouse <dwmw2@infradead.org>
Date:   Mon Apr 17 00:19:48 2006 +0100

    [JFFS2] Fix race in post-mount node checking
    
    For a while now, we've postponed CRC-checking of data nodes to be done
    by the GC thread, instead of being done while the user is waiting for
    mount to finish. The GC thread would iterate through all the inodes on
    the system and check each of their data nodes. It would skip over inodes
    which had already been used or were already being read in by
    read_inode(), because their data nodes would have been examined anyway.
    
    However, we could sometimes reach the end of the for-each-inode loop and
    still have some unchecked space left, if an inode we'd skipped was
    _still_ in the process of being read. This fixes that race by actually
    waiting for read_inode() to finish rather than just moving on.
    
    Thanks to Ladislav Michl for coming up with a reproducible test case and
    helping to track it down.
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit c5f2e6404c65e8380c9ba80a7d58a27d2642743b
Author: Andrew Morton <akpm@osdl.org>
Date:   Sat Apr 15 00:30:24 2006 -0700

    [SCSI] scsi_scan.c: fix compile warnings
    
    drivers/scsi/scsi_scan.c: In function `scsi_probe_and_add_lun':
    drivers/scsi/scsi_scan.c:926: warning: unused variable `vend'
    drivers/scsi/scsi_scan.c:926: warning: unused variable `mod'
    drivers/scsi/scsi_scan.c: At top level:
    drivers/scsi/scsi_scan.c:829: warning: `scsi_inq_str' defined but not used
    
    Fix those, tighten up the (somewhat poorly-designed) logging macro and fix
    some coding-style warts.
    
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 8fc65162a8f25929be80c8d6321a3479e92b5aae
Merge: 2acab77... 99a1f9e...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Apr 14 23:19:41 2006 -0400

    Merge branch '7.0.38-k2' of git://66.93.40.222/srv/git/netdev-2.6

commit 99a1f9e88694b406b7c334153bacb56adfcf8388
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:05:38 2006 -0700

    {e100{,0},ixgb}: Add Auke Kok as new patch maintainer for e{100,1000} and ixgb
    
    This adds Auke Kok to the list of maintainers for the Intel NICs.
    
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 3d41e30aa3dde76c81ecbbf0e3a25392fcd90469
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:05:31 2006 -0700

    e1000: Version bump, contact fix, year string change
    
    Add the sourceforge project mailinglist to the contact information.
    
    Bump version to 7.0.38-k2
    
    Update copyright string with the new year.
    
    
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 77b2aad5b4fcb6e050b64bbda158ce528f933023
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:05:25 2006 -0700

    e1000: implement more efficient tx queue locking
    
    Implement more efficient locking (avoid the lock) when checking for
    a stopped queue.  Also don't wake the queue unless the threshold is
    reached to avoid queue on/off thrash.
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 9e2feace1acd38d7a3b1275f7f9f8a397d09040e
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:05:18 2006 -0700

    e1000: Buffer optimizations for small MTU
    
    Remove multi-descriptor support from legacy recieve path
    
    Add memory usage efficiency by using more correct size descriptors for
    small MTU sizes and optimize using LPE for <= 1522 byte frame sizes
    
    An extra performance fix that effected our TCP window size growth
    as a receiver.  Set our initial buffer to be 128 bytes instead of 256
    to prevent over-socket charge when truesize is computed in the stack.
    old way: truesize = 256 + l1 = 256 + 1460 = 1716
    new way: truesize = 128 + l1 = 128 + 1460 = 1588
    The magic value that we can't cross is 1648.
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 6fc7a7eca70780dc1539ce68a6513f9b11891f3c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:05:12 2006 -0700

    e1000: Dead variable cleanup
    
    Removal of unused rx_dropped counter.
    
    Removed reference to E1000_CTRL_EXT_CANC which is no longer valid,
    replaced with E1000_CTRL_EXT_INT_TIMER_CLR
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 5d51b80f9224ca5b0ba1efc5a6348cd29b5c16b7
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:05:06 2006 -0700

    e1000: Update truesize with the length of the packet for packet split
    
    Update skb with the real packet size.
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit fe7fe28ea581e090d2908a0d78a2611ae6d43e2c
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:04:59 2006 -0700

    e1000: Made an adapter struct variable into a local (txb2b)
    
    Made an adapter struct variable into a local (txb2b)
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit e619d52349ab8c0044859c28ab05e4c7a410fe14
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:04:52 2006 -0700

    e1000: De-inline functions to benefit from compiler smartness
    
    De-inline functions to benefit from compiler smartness
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 4cc15f54991caf1572e03ffc65d9986e433007e2
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:04:46 2006 -0700

    e1000: Esb2 wol link cycle bug and uninitialized registers
    
    Esb2 link didn't return after wol disable. The code previously assumed
    that writing reset to PHY_CTRL phy register turned the phy back on.
    In the ESB2 phy case that didn't occur.
    
    Add ESB2 to acquire/release_hw functions upon review it was
    discovered that esb2 was skipped on these functions
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit d0e027db7861ef03de0ac08494a9a61984d8f8b0
Author: Auke Kok <auke-jan.h.kok@intel.com>
Date:   Fri Apr 14 19:04:40 2006 -0700

    e1000: Remove PM warning DPRINTKs breaking 2.4.x kernels
    
    remove DPRINTKs that were printing warnings about power management on
    2.4 kernels.  Since we really don't react differently these printk
    statements are not needed.  This code was originally added to fix
    some compile time warnings that got fixed by newer kernels.
    
    
    Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
    Signed-off-by: Auke Kok <auke-jan.h.kok@intel.com>
    Signed-off-by: John Ronciak <john.ronciak@intel.com>

commit 2acab771b7e676125cb8c96b61dcdefe9ba67e57
Merge: 201e062... 64541d1...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Apr 14 20:48:55 2006 -0400

    Merge branch 'master'

commit cdb8c2a6d848deb9eeefffff42974478fbb51b8c
Author: Guennadi Liakhovetski <g.liakhovetski@gmx.de>
Date:   Sun Apr 2 21:57:43 2006 +0200

    [SCSI] dc395x: dynamically map scatter-gather for PIO
    
    The current dc395x driver uses PIO to transfer up to 4 bytes which do not
    get transferred by DMA (under unclear circumstances). For this the driver
    uses page_address() which is broken on highmem. Apart from this the
    actual calculation of the virtual address is wrong (even without highmem).
    So, e.g., for reading it reads bytes from the driver to a wrong address
    and returns wrong data, I guess, for writing it would just output random
    data to the device.
    
    The proper fix, as suggested by many, is to dynamically map data using
    kmap_atomic(page, KM_BIO_SRC_IRQ) / kunmap_atomic(virt). The reason why it
    has not been done until now, although I've done some preliminary patches
    more than a year ago was that nobody interested in fixing this problem was
    able to reliably reproduce it. Now it changed - with the help from
    Sebastian Frei (CC'ed) I was able to trigger the PIO path. Thus, I was
    also able to test and debug it.
    
    There are 4 cases when PIO is used in dc395x - data-in / -out with and
    without scatter-gather. I was able to reproduce and test only data-in with
    and without SG. So, the data-out path is still untested, but it is also
    somewhat simpler than the data-in. Fredrik Roubert (also CC'ed) also had
    PIO triggering on his system, and in his case it was data-out without SG.
    It would be great if he could test the attached patch on his system, but
    even if he cannot, I would still request to apply the patch and just wait
    if anybody cries...
    
    Implementation: I put 2 new functions in scsi_lib.c and their declarations
    in scsi_cmnd.h. I exported them without _GPL, although, I don't feel
    strongly about that - not many drivers are likely to use them. But there
    is at least one more - I want to use them in tmscsim.c. Whether these are
    the right files for the functions and their declarations - not sure
    either. Actually, they are not scsi-specific, so, might go somewhere
    around other scattergather magic? They are not platform specific either,
    and most SG functions are defined under arch/*/... As these issues were
    discussed previously there were some more routines suggested to manipulate
    scattergather buffers, I think, some of them were needed around
    crypto code... So, might be a common place reasonable, like
    lib/scattergather.c? I am open here.
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4c021dd136c0ad524e6d117296beafad2bf570c0
Author: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp>
Date:   Fri Apr 7 19:10:03 2006 +0900

    [SCSI] ibmvscsi: convert kmalloc + memset to kcalloc
    
    Convert kmalloc + memset to kcalloc in ibmvscsi
    
    Signed-off-by: FUJITA Tomonori <fujita.tomonori@lab.ntt.co.jp>
    Acked-by: Dave Boutcher <sleddog@us.ibm.com>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 84d891d6727c17832c79ec96d3d107a87d857978
Merge: 5bb0b55... 7676f83...
Author: James Bottomley <jejb@mulgrave.il.SteelEye.com>
Date:   Fri Apr 14 15:47:45 2006 -0500

    Merge ../scsi-rc-fixes-2.6
    
    Conflicts:
    
    	include/scsi/scsi_devinfo.h
    
    Same number for two BLIST flags:  BLIST_MAX_512 and BLIST_ATTACH_PQ3
    
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 5bb0b55a3283369f1cd8ac76a6d8bda8e7a77055
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu Apr 6 21:26:46 2006 -0500

    [SCSI] iscsi: convert iscsi tcp to libiscsi
    
    This just converts iscsi_tcp to the lib
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 7996a778ff8c717cb1a7a294475c59cc8f1e9fb8
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu Apr 6 21:13:41 2006 -0500

    [SCSI] iscsi: add libiscsi
    
    There is a lot of code duplcited between iscsi_tcp
    and the upcoming iscsi_iser driver. This patch puts
    the duplicated code in a lib. There is more code
    to move around but this takes care of the
    basics. For iscsi_offload if they use the lib we will
    probably move some things around. For example in the
    queuecommand we will not assume that the LLD wants
    to do queue_work, but it is better to handle that
    later when we know for sure what iscsi_offload looks
    like (we could probably do this for iscsi_iser though to).
    
    Ideally I would like to get the iscsi_transports modules
    to a place where all they really have to do is put data
    on the wire, but how to do that will hopefully be more clear
    when we see other modules like iscsi_offload. Or maybe
    iscsi_offload will not use the lib and it will just be
    iscsi_iser and iscsi_tcp and maybe the iscsi_tcp_tgt if that
    is allowed in mainline.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 30a6c65236f9d26e3325cae468f330b833a3878c
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu Apr 6 21:13:39 2006 -0500

    [SCSI] iscsi: fix up iscsi eh
    
    The current iscsi_tcp eh is not nicely setup for dm-multipath
    and performs some extra task management functions when they
    are not needed.
    
    The attached patch:
    
    - Fixes the TMF issues. If a session is rebuilt
    then we do not send aborts.
    
    - Fixes the problem where if the host reset fired, we would
    return SUCCESS even though we had not really done anything
    yet. This ends up causing problem with scsi_error.c's TUR.
    
    - If someone has turned on the userspace nop daemon code to try
    and detect network problems before the scsi command timeout
    we can now drop and clean up the session before the scsi command
    timesout and fires the eh speeding up the time it takes for a
    command to go from one patch to another. For network problems
    we fail the command with DID_BUS_BUSY so if failfast is set
    scsi_decide_disposition fails the command up to dm for it to
    try on another path.
    
    - And we had to add some basic iscsi session block code. Previously
    if we were trying to repair a session we would retrun a MLQUEUE code
    in the queuecommand. This worked but it was not the most efficient
    or pretty thing to do since it would take a while to relogin
    to the target. For iscsi_tcp/open-iscsi a lot of the iscsi error handler
    is in userspace the block code is pretty bare. We will be
    adding to that for qla4xxx.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit fd7255f51a13ea915099c7e488001dfbbeb05104
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu Apr 6 21:13:36 2006 -0500

    [SCSI] iscsi: add sysfs attrs for uspace sync up
    
    For iscsi boot when going from initramfs to the real root we
    need to stop the userpsace iscsi daemon. To later restart it
    iscsid needs to be able to rebuild itself and part of that
    process is matching a session running the kernel with the
    iscsid representation. To do this the attached patch
    adds several required iscsi values. If the LLD does not provide
    them becuase, login is done in userspace, then the transport
    class and userspace set ths up for the LLD.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit b5c7a12dc29ae0990d9e867749bdd717a3160325
Author: Mike Christie <michaelc@cs.wisc.edu>
Date:   Thu Apr 6 21:13:33 2006 -0500

    [SCSI] iscsi: rm kernel iscsi handles usage for session and connection
    
    from hare@suse.de and michaelc@cs.wisc.edu
    
    hw iscsi like qla4xxx does not allocate a host per session and
    for userspace it is difficult to restart iscsid using the
    "iscsi handles" for the session and connection, so this
    patch just has the class or userspace allocate the id for
    the session and connection.
    
    Note: this breaks userspace and requires users to upgrade to the newest
    open-iscsi tools. Sorry about his but open-iscsi is still too new to
    say we have a stable user-kernel api and we were not good nough
    designers to know that other hw iscsi drivers and iscsid itself would
    need such changes. Actually we sorta did but at the time we did not
    have the HW available to us so we could only guess.
    
    Luckily, the only tools hooking into the class are the open-iscsi ones
    or other tools like iscsitart hook into the open-iscsi engine from
    userspace or prgroams like anaconda call our tools so they are not affected.
    
    Signed-off-by: Mike Christie <michaelc@cs.wisc.edu>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 13f7e5acc8b329080672c13f05f252ace5b79825
Author: Kurt Garloff <garloff@suse.de>
Date:   Mon Apr 3 15:20:08 2006 +0200

    [SCSI] BLIST_ATTACH_PQ3 flags
    
    Some devices report a peripheral qualifier of 3 for LUN 0; with the original
    code, we would still try a REPORT_LUNS scan (if SCSI level is >= 3 or if we
    have the BLIST_REPORTLUNS2 passed in), but NOT any sequential scan.
    Also, the device at LUN 0 (which is not connected according to the PQ) is not
    registered with the OS.
    
    Unfortunately, SANs exist that are SCSI-2 and do NOT support REPORT_LUNS, but
    report a unknown device with PQ 3 on LUN 0. We still need to scan them, and
    most probably we even need BLIST_SPARSELUN (and BLIST_LARGELUN). See the bug
    reference for an infamous example.
    
    This is patch 3/3:
    3. Implement the blacklist flag BLIST_ATTACH_PQ3 that makes the scsi
       scanning code register PQ3 devices and continues scanning; only sg
       will attach thanks to scsi_bus_match().
    
    Signed-off-by: Kurt Garloff <garloff@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 6c7154c97e20c0ea28547240dc86731c0cee1b2f
Author: Kurt Garloff <garloff@suse.de>
Date:   Mon Apr 3 15:18:35 2006 +0200

    [SCSI] Better log messages for PQ3 devs
    
    Some devices report a peripheral qualifier of 3 for LUN 0; with the original
    code, we would still try a REPORT_LUNS scan (if SCSI level is >= 3 or if we
    have the BLIST_REPORTLUNS2 passed in), but NOT any sequential scan.
    Also, the device at LUN 0 (which is not connected according to the PQ) is not
    registered with the OS.
    
    Unfortunately, SANs exist that are SCSI-2 and do NOT support REPORT_LUNS, but
    report a unknown device with PQ 3 on LUN 0. We still need to scan them, and
    most probably we even need BLIST_SPARSELUN (and BLIST_LARGELUN). See the bug
    reference for an infamous example.
    
    This patch 2/3:
    If a PQ3 device is found, log a message that describes the device
    (INQUIRY DATA and C:B:T:U tuple) and make a suggestion for blacklisting
    it.
    
    Signed-off-by: Kurt Garloff <garloff@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 4186ab1973758190916703eb8889ebe8002c5c8f
Author: Kurt Garloff <garloff@suse.de>
Date:   Mon Apr 3 15:16:48 2006 +0200

    [SCSI] Try LUN 1 and use bflags
    
    Some devices report a peripheral qualifier of 3 for LUN 0; with the original
    code, we would still try a REPORT_LUNS scan (if SCSI level is >= 3 or if we
    have the BLIST_REPORTLUNS2 passed in), but NOT any sequential scan.
    Also, the device at LUN 0 (which is not connected according to the PQ) is not
    registered with the OS.
    
    Unfortunately, SANs exist that are SCSI-2 and do NOT support REPORT_LUNS, but
    report a unknown device with PQ 3 on LUN 0. We still need to scan them, and
    most probably we even need BLIST_SPARSELUN (and BLIST_LARGELUN). See the bug
    reference for an infamous example.
    
    This is patch 1/3:
    If we end up in sequential scan, at least try LUN 1 for devices
    that reported a PQ of 3 for LUN 0.
    Also return blacklist flags, even for PQ3 devices.
    
    Signed-off-by: Kurt Garloff <garloff@suse.de>
    Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

commit 201e06279823c73242de987f192f43d2b30e5331
Merge: 32ea89e... c91e468...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 12 18:11:33 2006 -0400

    Merge branch 'upstream-fixes'

commit 32ea89ecb25789b1b7db28146558587a42f3b372
Merge: 58a7ce6... a145410...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 12 17:52:52 2006 -0400

    Merge branch 'master'

commit a890b15c0990cc8d686edcc85f5fccde71ad5ce9
Merge: 79fa1b6... 26ec634...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 12 16:54:43 2006 -0400

    Merge branch 'upstream'

commit 875999c5539999f61a45620aae0c3e5fb1d2b035
Merge: 79072f3... 26ec634...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Apr 12 16:54:16 2006 -0400

    Merge branch 'upstream'

commit fb6a82c94a9c69adfb6b9f6ce9f84be36884e471
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Apr 11 20:12:10 2006 -0400

    [PATCH] jffs2: fix printk warnings
    
    Fix printk format warnings in jffs2.
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit b104513c74d972f09737017394c5abc7e0a6835d
Author: Randy Dunlap <rdunlap@xenotime.net>
Date:   Tue Apr 11 20:05:20 2006 -0400

    [PATCH] MTD: m25p80: fix printk format warning
    
    Fix printk format warning:
    drivers/mtd/devices/m25p80.c:189: warning: format '%zd' expects type
    'signed size_t', but argument 6 has type 'u_int32_t'
    
    Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 6cc449c7d0292cb9b993f0df84fd3225e3099492
Author: Jesper Juhl <jesper.juhl@gmail.com>
Date:   Tue Apr 11 19:42:44 2006 -0400

    [PATCH] mtd, nettel: fix build error and implicit declaration
    
    I just hit the following error and warning :
      drivers/mtd/maps/nettel.c: In function `nettel_init':
      drivers/mtd/maps/nettel.c:418: error: `ROOT_DEV' undeclared (first use in this function)
      drivers/mtd/maps/nettel.c:418: error: (Each undeclared identifier is reported only once
      drivers/mtd/maps/nettel.c:418: error: for each function it appears in.)
      drivers/mtd/maps/nettel.c:418: warning: implicit declaration of function `MKDEV'
      make[3]: *** [drivers/mtd/maps/nettel.o] Error 1
      make[2]: *** [drivers/mtd/maps] Error 2
      make[1]: *** [drivers/mtd] Error 2
    The patch fixes the missing ROOT_DEV declaration by including linux/root_dev.h
    and fixes the implicit declaration of MKDEV by including linux/kdev_t.h .
    
    Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit f4e9ce66c70c5d08b8a4d2c676924748c8b7550b
Author: David Woodhouse <dwmw2@shinybook.infradead.org>
Date:   Tue Apr 11 19:29:07 2006 -0400

    New MTD git tree in MAINTAINERS
    
    Signed-off-by: David Woodhouse <dwmw2@infradead.org>

commit 26ec634c31a11a003040e10b4d650495158632fd
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: enable 64bit
    
    Enable 64bit.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bad28a37f5e4ab1db5c5f01b77664597b02b257f
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: fix on-memory structure byteorder
    
    Data structures residing on memory and fetched by the controller
    should have LE ordering.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a5b4c47a2731f1dd685f28b79464e4442f3682ec
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: don't do hardreset during driver initialization
    
    There's no need to perform hardreset during driver initialization.
    It's already done during host reset and even if the controller is in
    some wacky state, we now have proper hardreset to back us up.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ecc2e2b9c97719592b3078d5a5a8666551c91115
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: reimplement hardreset
    
    Reimplement hardreset according to the datasheet.  The old hardreset
    didn't reset controller status and the controller might not be ready
    after reset.  Also, as SStatus is a bit flakey after hardreset,
    sata_std_hardrset() didn't use to wait long enough before proceeding.
    
    Note that as we're not depending on SStatus, DET==1 condition cannot
    be used to wait for link, so use shorter timeout for no device case.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 0eaa6058a6a664ce692e3dc38c6891a74ca47f59
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: kill 10ms sleep in softreset
    
    Nothing, not the datasheet nor the errats, says this delay is
    necessary and with the previous PORT_CS_INIT change, we know the
    controller is in good state.  Kill 10ms sleep.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2555d6c268240fb3f5f335bd62d0518025343c0f
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: put port into known state before softresetting
    
    Make sure the controller has no pending commands and ready for command
    before issuing SRST.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b5bc421c96ca56a9abaad4619da01fe0071904a2
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: implement sil24_init_port()
    
    Implement sil24_init_port which performs port initialization via
    PORT_CS_INIT.  To be used later by softreset and EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 37024e8ee0d8dbcd0c2634192cb3836549db054e
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:19 2006 +0900

    [PATCH] sata_sil24: implement loss of completion interrupt on PCI-X errta fix
    
    SiI3124 might lose completion interrupt if completion interrupt occurs
    shortly after SLOT_STAT register is read for the previous completion
    interrupt if it is operating in PCI-X mode.
    
    This currently doesn't trigger as libata never queues more than one
    command, but it will with NCQ changes.  This patch implements the
    workaround - turning on WoC and explicitly clearing interrupt.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9466d85bb2c80b1aa169dda638b535f2f19714e4
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:18 2006 +0900

    [PATCH] sata_sil24: consolidate host flags into SIL24_COMMON_FLAGS
    
    All sil24 controllers share the same host flags except for NPORTS.
    Consolidate them into SIL24_COMMON_FLAGS.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7dafc3fd9a9e34e4a02ee6d141fd391ad5bdcd90
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:18 2006 +0900

    [PATCH] sata_sil24: add more constants
    
    Add HOST_CTRL_* and more PORT_IRQ_* bits.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 3b9f1d0fb3fd68419ee3fa3e0833c6a05462150d
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:18 2006 +0900

    [PATCH] sata_sil24: rename PORT_IRQ_SDB_FIS to PORT_IRQ_SDB_NOTIFY
    
    Rename PORT_IRQ_SDB_FIS to more proper PORT_IRQ_SDB_NOTIFY.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 640088024dbf19553bb4b53d81e919cdf570f3b0
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:18 2006 +0900

    [PATCH] sata_sil24: typo fix
    
    Type fix.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 499a86af41cf5a4bf811726841bbc49c0e96fd35
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:32:18 2006 +0900

    [PATCH] libata: export ata_set_sata_spd()
    
    This will be used by LLDD hardreset implementation.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 51713d359ae274fa4dd4b199ba3a6b0c21ef99e0
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:26:29 2006 +0900

    [PATCH] libata: cosmetic update to ata_bus_probe()
    
    Move ata_set_mode() failure handling outside of ap->ops->set_mode if
    clause such that it can handle ap->ops->set_mode failures after it's
    updated.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ec573755fcd7975aae6b0d536dbcd74a6eed029c
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:26:29 2006 +0900

    [PATCH] libata: disable failed devices only once in ata_bus_probe()
    
    Devices which consumed all their changes used to be disabled every
    iteration.  This causes unnecessary noise in the console output.
    Disable once and leave alone.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 7dd29dd629bd5a4e6d8a164a9886da01f291ecf2
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:22:30 2006 +0900

    [PATCH] sata_sil24: use ata_wait_register()
    
    Replace hard-coded waiting loops in sata_sil24 to ata_wait_register().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 75fe18069a55c78f553643b4e3a24c6864d71d87
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:22:29 2006 +0900

    [PATCH] ahci: use ata_wait_register()
    
    Replace ahci_poll_register() with ata_wait_register().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c22daff41001e9ccead87179ac0547f85447139e
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:22:29 2006 +0900

    [PATCH] libata: implement ata_wait_register()
    
    As waiting for some register bits to change seems to be a common
    operation shared by some controllers, implement helper function
    ata_wait_register().  This function also takes care of register write
    flushing.
    
    Note that the condition is inverted, the wait is over when the masked
    value does NOT match @val.  As we're waiting for bits to change, this
    test is more powerful and allows the function to be used in more
    places.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 643be977f9feba8c3c1e768fc06cac84596ec6f8
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:22:29 2006 +0900

    [PATCH] sata_sil24: better error message from softreset
    
    Improve softreset error message.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1c1d832cea1ab851a3f9b9d83245f5bc8b5b04b6
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:22:29 2006 +0900

    [PATCH] sata_sil24: fix timeout calculation in sil24_softreset
    
    sil24_softreset calculated timeout by adding ATA_TMOUT_BOOT * HZ to
    jiffies; however, as ATA_TMOUT_BOOT is already in jiffies, multiplying
    by HZ makes the value way off.  Fix it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 987d2f05b396760517eef7cba66b2f415ac484f5
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:16:45 2006 +0900

    [PATCH] libata: make reset methods complain when they fail
    
    Make reset methods complain loud when they fail.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2bf2cb26b2512c6a609bb152982c388329bedff6
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:16:45 2006 +0900

    [PATCH] libata: kill @verbose from ata_reset_fn_t
    
    @verbose was added to ata_reset_fn_t because AHCI complained during
    probing if no device was attached to the port.  However, muting
    failure message isn't the correct approach.  Reset methods are
    responsible for detecting no device condition and finishing
    successfully.  Now that AHCI softreset is fixed, kill @verbose.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit db70fef0750e5f8dbb64f9fadb333d2c7caf26a1
Author: Tejun Heo <htejun@gmail.com>
Date:   Tue Apr 11 22:16:44 2006 +0900

    [PATCH] libata: set default cbl in probeinit
    
    Make setting CBL type responsibility of probeinit.  This allows using
    only ap->cbl == ATA_CBL_SATA test in all other parts.  Without this,
    ata_down_sata_spd_limit() doesn't work during probe reset.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 35bb94b116e1fd4959ef0d3187458b5820eac8c4
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 11 13:12:34 2006 -0400

    libata: Add helper ata_shost_to_port()

commit 381544bba3ae6f2f1004b267da34f840b469033c
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 11 13:04:39 2006 -0400

    libata: Fix EH merge difference between this branch and upstream.

commit 10a5fd5e6b7e2d464c9f95f67cade4ddbd63f4e1
Merge: c2a6585... a145410...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 11 12:51:40 2006 -0400

    Merge branch 'master'
    
    Conflicts:
    
    	drivers/scsi/libata-scsi.c
    	include/linux/libata.h

commit c18bcf45c46f72f630cbbddc79a765336b79ab4f
Merge: 12df755... 591f0a4...
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Tue Apr 4 16:11:29 2006 -0500

    Merge branch '85xx'

commit 591f0a4287d0de243493fd0c133c862e1d1f1c97
Author: Andy Fleming <afleming@freescale.com>
Date:   Sun Apr 2 17:42:40 2006 -0500

    Add 85xx CDS to arch/powerpc
    
    This patch adds support for 85xx CDS support to arch/powerpc
    
    Signed-off-by: Andy Fleming <afleming@freescale.com>
    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

commit 79fa1b677be3a985cc66b9218a4dd09818f1051b
Merge: 31ce6da... c2a6585...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 4 08:45:13 2006 -0400

    Merge branch 'upstream'

commit c2a6585296009379e0f4eff39cdcb108b457ebf2
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Apr 3 01:58:06 2006 +0900

    [PATCH] ahci: do not fail softreset if PHY reports no device
    
    All softreset methods are responsible for detecting device presence
    and succeed softreset in such cases.  AHCI didn't use to check for
    device presence before proceeding with softreset and this caused
    unnecessary reset retrials during probing.  This patch adds presence
    detection to AHCI softreset.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 95de719adc94392a95c3c4d0a2d6b8b1ea39d236
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Apr 4 10:57:18 2006 +0800

    [PATCH] libata: convert ATAPI_ENABLE_DMADIR to module parameter
    
    Convert the ATAPI_ENABLE_DMADIR compile time option needed
    by some SATA-PATA bridge to runtime module parameter.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 31ce6daefe2d312e31ee06b0b3301b1cb7878c04
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Apr 3 18:31:44 2006 +0800

    [PATCH] libata-dev: irq-pio minor fix 2
    
    irq-pio minor fix 2:
    - Use qc as data for ata_pio_task().
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4332a771f4d2f23a6d3beff3dd5405e79775a211
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Apr 3 17:43:24 2006 +0800

    [PATCH] libata-dev: irq-pio minor fix
    
    irq-pio minor fix:
    - remove the redundant hsm_task_state = HSM_ST_IDLE
    - add devno to printk() as done in upstream
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 862cff63781e3a9de85d8947c82d55f4cc95572b
Merge: 7819d64... c16226a...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 4 08:42:17 2006 -0400

    Merge branch 'upstream'

commit c16226a1c75042bfdc50bd2921d5919f6267ba51
Merge: af64371... 6246b61...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Tue Apr 4 08:41:29 2006 -0400

    Merge branch 'master'

commit e6f1f3c54974a30c65ea0b699809d12f0aa04272
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Mon Apr 3 13:14:00 2006 -0400

    ACPI: Don't print internal BIOS names of wakeup devices
    
    Internal BIOS names like these should be exposed
    to the user as little as possible:
    
    ACPI wakeup devices: C069 C0CE C1D1 C0DE C1D4
    
    Eventually, the "wakeup" property of a device should be exported via the
    device tree, not by a printk of an internal BIOS name.  For the hard-core,
    these are still available in /proc/acpi/wakeup_devices, just not
    printed to dmesg.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 51d797474f87b375819d084f7583a2864c5656c4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 3 16:19:26 2006 +1000

    intelfb: some cleanups for intelfbhw
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 3587c50991b96fee2d26942f380e36e4f40fad71
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Apr 3 14:46:55 2006 +1000

    intelfb: fixup pitch calculation like X does
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 3aff13cfb8810cc228e8fdcb92103ed0b11ee38e
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 31 17:08:52 2006 +1000

    intelfb: fixup p calculation
    
    This fixes up the p calculation of p1 and p2 for the i9xx chipsets.
    This seems to work a lot better for lower pixel clocks..
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 46f60b8e67e6fceede851dc69cdee2d7c0de27b9
Author: Dave Airlie <airlied@linux.ie>
Date:   Fri Mar 24 12:31:14 2006 +1100

    This patch makes a needlessly global struct static.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9a90603f65dd5046ddcd586158abcad7784892b6
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Mar 23 21:53:05 2006 +1100

    intelfb: add i945GM support
    
    Untested i945GM support just add the framework.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 8b91b0b4f2d731b92f59bc82492769a09b4955a6
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Mar 23 19:23:48 2006 +1100

    intelfb: fixup whitespace..
    
    repeat after me, I must not take code from X without reformatting...
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 8bb91f6a2d1db8031bfbb367df075f041d0cdfe2
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Mar 23 13:06:32 2006 +1100

    intelfb: add hw cursor support for i9xx
    
    This adds hw cursor support for the i9xx chipsets.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 7679f4d69296de97a7f62458cc4d1c6c884dfcfb
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Mar 23 12:30:05 2006 +1100

    intelfb: make i915 modeset
    
    This takes the modeset and pll code from my X driver.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 9639d5ec07a490134f05ac890506a367aaf8663b
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Mar 23 11:23:55 2006 +1100

    intelfb: add support for i945G
    
    This just adds the defines and structure for i945G
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 0c187addabbaf93512902442b4a90140a21b0ddc
Author: Dave Airlie <airlied@linux.ie>
Date:   Thu Mar 23 11:20:08 2006 +1100

    intelfb: enable on x86_64
    
    i945G chipsets supports 64-bit.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 16109b3f4c1f2635afd32eb6d49348590de2cb25
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Mar 20 21:22:09 2006 +1100

    intelfb: add p divisor increments for i9xx.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 8492f081e5552ff388068f612eae6f55f7210ed4
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Mar 20 20:54:12 2006 +1100

    intelfb: change splitm to be brute force
    
    The old splitm didn't always work use a brute force.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit d024960cff5173bef6e83c01cf9cd2763c2c0ab0
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Mar 20 20:26:45 2006 +1100

    intelfb: add pll index to the intelfb structure
    
    Add the pll index into the information structure, change get_chipset to
    take only the info structure, use plls in correct places

commit 7258b11d2e9a47d2b01620622579f22906960e1a
Author: Dave Airlie <airlied@linux.ie>
Date:   Mon Mar 20 20:02:24 2006 +1100

    intelfb: prepare for i9xx support.
    
    This code just moves the PLL min/max calculations variables into
    a structure, it doesn't change or add any new functionality.
    
    Signed-off-by: Dave Airlie <airlied@linux.ie>

commit 7819d64e31a685e35e4819515c84168d0879816e
Merge: a808be8... af64371...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Apr 2 20:41:48 2006 -0400

    Merge branch 'upstream'

commit af64371ada9452632c349563d688d30d94e918ba
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Apr 2 20:41:36 2006 -0400

    [libata] bump versions

commit 4bced2d40555eebf8d685f174aa6d58ace353655
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Apr 2 20:17:48 2006 -0400

    [libata] kill bogus cut-n-pasted comments in three drivers

commit a808be8a12d61cdacba350fdce2e448045be8202
Merge: c13b56a... 6d5f973...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Apr 2 11:38:12 2006 -0400

    Merge branch 'upstream'

commit 6d5f9732a16a74d75f8cdba5b00557662e83f466
Author: Tejun Heo <htejun@gmail.com>
Date:   Mon Apr 3 00:09:41 2006 +0900

    [PATCH] libata: print SControl in SATA link status info message
    
    Now that libata mangles with SControl, it's helpful to print out
    SControl in link status message.  Add it.
    
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c13b56a1130bbfacfb588de100e5a248383805a6
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Apr 2 10:34:24 2006 -0400

    [libata] irq-pio: Fix merge mistake

commit 029f5468b5b5f93a09bf90326fdcb9124079658d
Merge: 8e181c1... 1ad8e7f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sun Apr 2 10:30:40 2006 -0400

    Merge branch 'upstream'
    
    Conflicts:
    
    	drivers/scsi/libata-core.c
    	drivers/scsi/pdc_adma.c
    	drivers/scsi/sata_mv.c
    	drivers/scsi/sata_nv.c
    	drivers/scsi/sata_promise.c
    	drivers/scsi/sata_qstor.c
    	drivers/scsi/sata_sx4.c
    	drivers/scsi/sata_vsc.c
    	include/linux/libata.h

commit 1ad8e7f9eb051b040880e45337ed74bfd916ef7f
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: make some libata-core routines extern
    
    Make libata-core routines which will be used by EH implementation
    extern.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ece1d63619df010b8c4f08e43755e2a03f3b6eed
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: separate out libata-eh.c
    
    A lot of EH codes are about to be added to libata.  Separate out
    libata-eh.c.  ata_scsi_timed_out(), ata_scsi_error(),
    ata_qc_timeout(), ata_eng_timeout(), ata_eh_qc_complete() and
    ata_eh_qc_retry() are moved.  No code is changed by this patch.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 35e86b53b1a38e78ff0d70dae4aeb25f4572e433
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: dec scmd->retries for qcs with zero err_mask
    
    qcs might get retried because of unrelated failure.  e.g. NCQ command
    failure causes the whole command set to be aborted.  Decrement
    scmd->retries for such retrials to avoid unnecessarily failing
    commands.  Note that scmd->retries will be incremented the first time.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d69cf37d5387801914bbf5297f070c7d2ee0206f
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: add @cdb to ata_exec_internal()
    
    Add @cdb to ata_exec_internal().  It will be used by new EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 74e6c8c394ca2126a60e97bc1142ec2d91761e9a
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: don't read TF directly from sense generation functions
    
    TF register might not be directly accessible depending on errors.
    e.g. TF of failed NCQ command is in log page 10h.  Make reading TF
    responsibility of error handlers.  For the current EH, simply push TF
    reading into qc completion functions as they are practically part of
    EH.  New EH will fill qc->tf with status registers before complting
    qcs.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 058e55e120ca59d37392f9aa753da2d9ead24505
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: always generate sense if qc->err_mask is non-zero
    
    Current sense generation code does not generate sense error if status
    register value doesn't indicate error condition.  However, LLDD's may
    indicate errors which 't show up in status register.  Completing such
    qc's without generating sense results in successful completion of
    failed commands.
    
    Invoke ata_to_sense_error() regardless of status register if
    qc->err_mask is not zero such that ata_to_sense_error() generates
    default sense error.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c91af2c87e4048cdefcfc9f16fed8d728243c92d
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: pass qc around intead of ap during PIO
    
    The current code passes pointer to ap around and repeatedly performs
    ata_qc_from_tag() to access the ongoing qc.  This is unnatural and
    makes EH synchronization cumbersome.  Make PIO codes deal with qc
    instead of ap.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 2719736779da2c7fbb17d3de16c817b429bfeb9c
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: add ATA_QCFLAG_IO
    
    Add a new qc flag ATA_QCFLAG_IO.  This flag gets set for normal IO
    commands originating from SCSI midlayer.  This information will be
    used by EH to determine transfer speed reconfiguration.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e8384607d4f395985e3cc5f82d75fc73efc2ecf0
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: clear ATA_DFLAG_PIO before setting it
    
    ata_dev_set_mode() is now responsible for managing ATA_DFLAG_PIO.
    Clear it before setting it.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ea1dd4e13010eb9dd5ffb4bfabbb472bc238bebb
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:53 2006 +0900

    [PATCH] libata: clear only affected flags during ata_dev_configure()
    
    ata_dev_configure() should not clear dynamic device flags determined
    elsewhere.  Lower eight bits are reserved for feature flags, define
    ATA_DFLAG_CFG_MASK and clear only those bits before configuring
    device.  Without this patch, ATA_DFLAG_PIO gets turned off during
    revalidation making PIO mode unuseable.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 198e0fed9e59461fc1890dd8b75ec72d14638873
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:52 2006 +0900

    [PATCH] libata: rename ATA_FLAG_PORT_DISABLED to ATA_FLAG_DISABLED
    
    Rename ATA_FLAG_PORT_DISABLED to ATA_FLAG_DISABLED for consistency.
    (ATA_FLAG_* are always about ports).
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 949b38af40a0b88b7267908b1554a45b97b5b737
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:52 2006 +0900

    [PATCH] libata: clean up constants
    
    * Reorder ATA_DFLAG_* such that feature flags determined by
      ata_dev_configure() are on lower bits.  Reserve lower eight bits
      for this purpose and allocate dynamic flags from bit 8.
    
    * Reorder ATA_FLAG_* such that feature flags determined during driver
      initiailization are on bits 0:15, dynamic flags on 16:23 and LLDD
      specific flags on 24:31.
    
    * Kill trailing white space and lower-case an one line comment for
      consistency.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c43c555c3a6db7f0b55fd9b66d7ecff16e827d4e
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:52 2006 +0900

    [PATCH] libata: ATA_FLAG_IN_EH is not used, kill it
    
    Kill unused flag ATA_FLAG_IN_EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5eb45c02a9944e813a0b82457607557a1f2c64b5
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:52 2006 +0900

    [PATCH] libata: ata_dev_revalidate() printk update
    
    Make sure ata_dev_revalidate() complains on failures and kill
    revalidation failure message printed from ata_dev_set_mode().
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit d63cb4a6365aa161341fc365df1edc87cd00c9c0
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 18:51:52 2006 +0900

    [PATCH] libata: report device number when PIO fails
    
    Report device number on PIO failure.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 565083e1f14e7771aa6bac2d3d4aae0b08d48d78
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 17:54:47 2006 +0900

    [PATCH] libata: consider disabled devices in ata_dev_xfermask()
    
    ata_bus_probe() now marks failed devices properly and leaves
    meaningful transfer mode masks.  This patch makes ata_dev_xfermask()
    consider disable devices when determining PIO mode to avoid violating
    device selection timing.
    
    While at it, move port-wide resttriction out of device iteration loop
    and try to make the function look a bit prettier.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 14d2bac1877ed4e2cc940d1680db1a4f29225811
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 17:54:46 2006 +0900

    [PATCH] libata: improve ata_bus_probe()
    
    Improve ata_bus_probe() such that configuration failures are handled
    better.  Each device is given ATA_PROBE_MAX_TRIES chances, but any
    non-transient error (revalidation failure with -ENODEV, configuration
    failure with -EINVAL...) disables the device directly.  Any IO error
    results in SATA PHY speed down and ata_set_mode() failure lowers
    transfer mode.  The last try always puts a device into PIO-0.
    
    After each failure, the whole port is reset to make sure that the
    controller and all the devices are in a known and stable state.  The
    reset also applies SATA SPD configuration if necessary.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cf176e1aa92eb2a3faea8409e841396a66413937
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 17:54:46 2006 +0900

    [PATCH] libata: implement ata_down_xfermask_limit()
    
    Implement ata_down_xfermask_limit().  This function manipulates
    @dev->pio/mwdma/udma_mask such that the next lower transfer mode is
    selected.  This will be used to improve ata_bus_probe() failure
    handling and later by EH.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit edbabd8679a39faef67def4438c9cbccb5c05c5d
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 20:55:02 2006 +0900

    [PATCH] libata: add 5s sleep between resets
    
    Some devices react badly if resets are performed back-to-back.  Give
    devices some time to breath and tell user that we're taking a nap.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 90dac02c08dabd471927f151b8393eb51e3e020e
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 17:54:46 2006 +0900

    [PATCH] libata: use SATA speed down in ata_drive_probe_reset()
    
    Make ata_drive_probe_reset() use SATA SPD configuration.  Hardreset
    will be force if speed renegotiation is necessary.  Also, if a
    hardreset fails, PHY speed is stepped down and hardreset is retried
    until the lowest speed is reached.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 1c3fae4d7eb121933341443c37d3bbee43c0fb68
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 20:53:28 2006 +0900

    [PATCH] libata: implement ap->sata_spd_limit and helpers
    
    ap->sata_spd_limit contrains SATA PHY speed of the port.  It is
    initialized to the configured value prior to probing thus preserving
    BIOS configured value.  hardreset is responsible for applying SPD
    limit and sata_std_hardreset() is updated to do that.  SATA SPD limit
    will be used to enhance failure handling during probing and later by
    EH.
    
    This patch also normalizes some comments around affected code.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 002c8054fa8d0f1afce2b0c728be32d338b9293a
Author: Tejun Heo <htejun@gmail.com>
Date:   Sun Apr 2 17:54:46 2006 +0900

    [PATCH] libata: implement ata_dev_absent()
    
    For the time being we cannot use ata_dev_present() as it was renamed
    to ata_dev_enabled() but we still need presence test.  Implement
    negation of the test.  Conveniently, the negated result is needed in
    more places.  This is suggested by Jeff Garzik.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 144c87b4e03759214c362d267e01c2905f1ab095
Author: Len Brown <len.brown@intel.com>
Date:   Sun Apr 2 00:15:39 2006 -0500

    ACPI: ia64 buildfix
    
    arch/ia64/hp/common/sba_iommu.c used ACPI_MEM_FREE instead of kfree()
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7f048801f4a6767433d1aeefd9c24372515265f8
Author: Len Brown <len.brown@intel.com>
Date:   Sat Apr 1 23:45:39 2006 -0500

    ACPI: ia64 buildfix
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c12ea918ee175ceb3a258cd81f1c43e897d0c0bc
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    x86_64: Remove stale lapic definition from apicdef.h
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit eefa27a93a0490902f33837ac86dbcf344b3aa29
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: Allow hot-add of ejected processor
    
    acpi_eject_store() didn't trim processors, causing subsequent
    hot-add to fail.
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Cc: Andi Kleen <ak@muc.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ff2fc3e9e3edb918b6c6b288485c6cb267bc865e
Author: Jiri Slaby <jirislaby@gmail.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: EC acpi-ecdt-uid-hack
    
    On some boxes ecdt uid may be equal to 0, so do not test for uids equality,
    so that fake handler will be unconditionally removed to allow loading the
    real one.
    
    See http://bugzilla.kernel.org/show_bug.cgi?id=6111
    
    Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
    Cc: Luming Yu <luming.yu@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit df42baa0d8e54df18dd9366dd7c93d6be7d5d063
Author: Ashok Raj <ashok.raj@intel.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: build fix for u8 cpu_index
    
    Local apic entries are only 8 bits, but it seemed to not be caught with u8
    return value result in the check
    
    cpu_index >= NR_CPUS becomming always false.
    
    drivers/acpi/processor_core.c: In function `acpi_processor_get_info':
    drivers/acpi/processor_core.c:483: warning: comparison is always false due to limited range of data type
    
    Signed-off-by: Ashok Raj <ashok.raj@intel.com>
    Cc: Dave Jones <davej@codemonkey.org.uk>
    Cc: Kenji Kaneshige <kaneshige.kenji@soft.fujitsu.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 200739c179c63d21804e9e8e2ced265243831579
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: remove __init/__exit from Asus .add()/.remove() methods
    
    Even though the devices claimed by asus_acpi.c can not be hot-plugged, the
    driver registration infrastructure allows the .add() and .remove() methods to
    be called at any time while the driver is registered.  So remove __init and
    __exit from them.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9224a867c497053842dc595e594ca6d32112221f
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    HPET: fix ACPI memory range length handling
    
    ACPI address space descriptors contain _MIN, _MAX, and _LEN.  _MIN and _MAX
    are the bounds within which the region can be moved (this is clarified in
    Table 6-38 of the ACPI 3.0 spec).  We should use _LEN to determine the size
    of the region, not _MAX - _MIN + 1.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 459c7266d7a5c1730169258217e25fdd1b7ca854
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: fix memory hotplug range length handling
    
    Address space descriptors contain _MIN, _MAX, and _LEN.  _MIN and _MAX are
    the bounds within which the region can be moved (this is clarified in Table
    6-38 of the ACPI 3.0 spec).  We should use _LEN to determine the size of
    the region, not _MAX - _MIN + 1.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1a36561607abf1405b56a41aac2fd163429cd1f8
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: simplify scan.c coding
    
    No functional changes; just remove leftover, unused "buffer" and simplify
    control flow (no need to remember error values and goto the end, when we can
    simply return the value directly).
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit e4513a57ef719d3d6d1cee0ca4d9f4016aa452bb
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: fix sonypi ACPI driver registration to unregister on failure
    
    Remove the assumption that acpi_bus_register_driver() returns the number of
    devices claimed.  Returning the count is unreliable because devices may be
    hot-plugged in the future (admittedly not applicable for this driver).
    
    This also fixes a bug: if sonypi_acpi_driver was registered but found no
    devices, sonypi_exit() did not unregister it.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 578b333bfe8eb1360207a08a53c321822a8f40f3
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: update asus_acpi driver registration to unload on failure
    
    Remove the assumption that acpi_bus_register_driver() returns the number of
    devices claimed.  Returning the count is unreliable because devices may be
    hot-plugged in the future (admittedly not applicable for this driver).
    
    Since the hardware for this driver is not hot-pluggable, determine whether the
    hardware is present by noticing calls to the .add() method.  It would be
    better to probe the ACPI namespace for the ASUS HIDs, and load the driver only
    when we find one, but ACPI doesn't support that yet.
    
    I don't have an ASUS laptop to test on, but on my HP dl360, it does report the
    appropriate error when attempting to load the module:
    
        $ sudo insmod drivers/acpi/asus_acpi.ko
        insmod: error inserting 'drivers/acpi/asus_acpi.ko': -1 No such device
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 9d9f749b316ac21cb59ad3e595cbce469b409e1a
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: make acpi_bus_register_driver() return success/failure, not device count
    
    acpi_bus_register_driver() should not return the number of devices claimed.
    We're not asking to find devices, we're making a driver available to devices,
    including hot-pluggable devices that may appear in the future.
    
    I audited all callers of acpi_bus_register_driver(), and except asus_acpi.c
    and sonypi.c (fixed in previous patches), all either ignore the return value
    or test only for failure (<0).
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit cd090eedd85256829f762677d0752a846c1b88b9
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: Display "ACPI" to motherboard resources in /proc/io{mem,port}
    
    Add "ACPI" to motherboard resource allocation names, so people have a clue
    about where to look.  And remove some trailing spaces.
    
    Changes these /proc/iomem entries from this:
    
        ff5c1004-ff5c1007 : PM_TMR
        ff5c1008-ff5c100b : PM1a_EVT_BLK
        ff5c100c-ff5c100d : PM1a_CNT_BLK
        ff5c1010-ff5c1013 : GPE0_BLK
        ff5c1014-ff5c1017 : GPE1_BLK
    
    to this:
    
        ff5c1004-ff5c1007 : ACPI PM_TMR
        ff5c1008-ff5c100b : ACPI PM1a_EVT_BLK
        ff5c100c-ff5c100d : ACPI PM1a_CNT_BLK
        ff5c1010-ff5c1013 : ACPI GPE0_BLK
        ff5c1014-ff5c1017 : ACPI GPE1_BLK
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 81507ea9cfa64e9851b53e0fefebfa776eda9ecb
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: request correct fixed hardware resource type (MMIO vs I/O port)
    
    ACPI supports fixed hardware (PM_TMR, GPE blocks, etc) in either I/O port
    or MMIO space, but used to always request the regions from I/O space
    because it didn't check the address_space_id.
    
    Sample ACPI fixed hardware in MMIO space (HP rx2600), was incorrectly
    reported in /proc/ioports, now reported in /proc/iomem:
    
        ff5c1004-ff5c1007 : PM_TMR
        ff5c1008-ff5c100b : PM1a_EVT_BLK
        ff5c100c-ff5c100d : PM1a_CNT_BLK
        ff5c1010-ff5c1013 : GPE0_BLK
        ff5c1014-ff5c1017 : GPE1_BLK
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1c6e7d0aeecac38e66b1bb63e3eff07b2a1c2f2c
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    PNPACPI: whitespace cleanup
    
    Tidy up whitespace.  No functional change.
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit b5f2490b6e3317059e87ba40d4f659d1c30afc1f
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:04:00 2006 -0500

    PNPACPI: remove some code duplication
    
    Factor out the duplicated switch from pnpacpi_count_resources() and
    pnpacpi_type_resources().  Remove the unnecessary re-initialization of
    resource->type and length from all the encode functions (id and length are
    originally set in the pnpacpi_build_resource_template() ->
    pnpacpi_type_resources() path).
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1acfb7f2b0d460ee86bdb25ad0679070ec8a5f0d
Author: Bjorn Helgaas <bjorn.helgaas@hp.com>
Date:   Tue Mar 28 17:03:00 2006 -0500

    PNPACPI: fix non-memory address space descriptor handling
    
    Fix resource_type handling for QWORD, DWORD, and WORD Address Space
    Descriptors.  Previously we ignored the resource_type, so I/O ports and bus
    number ranges were incorrectly parsed as memory ranges.
    
    Sample PCI root bridge resources from HP rx2600 before this patch:
    
        # cat /sys/bus/pnp/devices/00:02/resources
        state = active
        mem 0x0-0x1f
        mem 0x0-0x3af
        mem 0x3e0-0x1fff
        mem 0x80000000-0x8fffffff
    
    With this patch:
    
        # cat /sys/bus/pnp/devices/00:02/resources
        state = active
        io 0x0-0x3af
        io 0x3e0-0x1fff
        mem 0x80000000-0x8fffffff
        mem 0x80004000000-0x80103fffffe
    
    Changes:
        0x0-0x1f PCI bus number range was incorrectly reported as memory, now
    	not reported at all
        0x0-0x3af I/O port range was incorrectly reported as memory
        0x3e0-0x1fff I/O port range was incorrectly reported as memory
        0x80004000000-0x80103fffffe memory range wasn't reported at all because
    	we only support PNP_MAX_MEM (4) memory resources
    
    Signed-off-by: Bjorn Helgaas <bjorn.helgaas@hp.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 7e1f19e50371e1d148226b64c8edc77fec47fa5b
Author: Andrew Morton <akpm@osdl.org>
Date:   Tue Mar 28 17:03:00 2006 -0500

    ACPI: UP build fix for bugzilla-5737
    
    cpu_online_map doesn't exist if !CONFIG_SMP.
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1300124f69cafc54331bc06e968a8dd67863f989
Author: Adrian Bunk <bunk@stusta.de>
Date:   Tue Mar 28 17:04:00 2006 -0500

    ACPI: Kconfig: ACPI should depend on, not select PCI
    
    Otherwise, illegal configurations like X86_VOYAGER=y, PCI=y are
    possible.
    
    This patch also fixes the options select'ing ACPI to also select PCI.
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Andrew Morton <akpm@osdl.org>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8e181c14f2baa5be9b7f7c3917b7d4ecf7529110
Merge: eee6c32... 852ee16...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Apr 1 15:17:56 2006 -0500

    Merge branch 'upstream'

commit 852ee16a914fb3ada2f81e222677c04defc2f15f
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:18 2006 +0900

    [PATCH] libata: preserve SATA SPD setting over hard resets
    
    Don't overwrite SPD setting during hard reset.  This change has the
    (intended) side effect of honoring the BIOS configuration.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e82cbdb9a3791f781462c9d00e3486e8fb7e58a8
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:18 2006 +0900

    [PATCH] libata: don't disable devices from ata_set_mode()
    
    When ata_set_mode() fails on a device, make ata_set_mode() return
    error code and pointer to the device instead of disabling it directly.
    This gives more control to higher level driving logic.
    
    This patch does not change the end result (configured transfer mode)
    although it may make libata repeat mode configuration to the peer of a
    failing device.  Later ata_bus_probe() rewrite will make full use of
    this change.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 58a7ce64426394a46e80cdc9440cc1e7c195e85d
Author: Krzysztof Halasa <khc@pm.waw.pl>
Date:   Thu Mar 30 17:01:53 2006 +0200

    [PATCH] Goramo PCI200SYN WAN driver subsystem ID patch
    
    Goramo finally got PCI subsystem ID for their PCI200SYN card. The
    attached patch adds support for it - cards with old EEPROM data
    will emit a warning with URL for update tool.
    
    Signed-off-by: Krzysztof Halasa <khc@pm.waw.pl>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit b0348b90a4a8149e5a0df312ab7810793ba7b3a4
Author: Lennert Buytenhek <buytenh@wantstofly.org>
Date:   Tue Mar 28 17:19:50 2006 +0200

    [PATCH] smc91x: add support for LogicPD PXA270 platform
    
    This patch adds support for the smc91x on the LogicPD PXA270 to
    the smc91x driver.
    
    Signed-off-by: Lennert Buytenhek <buytenh@wantstofly.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit eee6c32f5f114f9b9f2d94862f0dc0d3ff523864
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Apr 1 17:38:43 2006 +0800

    [PATCH] libata-dev: handle DRQ=1 ERR=1 (revised)
    
    Handle DRQ=1 ERR=1 situation. Revised according to what IDE try_to_flush_leftover_data() does.
    
    Changes:
     - For ATA PIO writes and ATAPI devices, just stop the HSM and let EH handle it.
     - For ATA PIO reads, read only one block of junk data and then let EH handle it.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6e07e16404deafadf45895a7d2aeb5feba53b479
Merge: 08a556d... e8e0619...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Apr 1 14:29:12 2006 -0500

    Merge branch 'upstream'

commit e8e0619f68bff8f39d98c46aac85ed1d4557ccfd
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:18 2006 +0900

    [PATCH] libata: reorganize ata_set_mode()
    
    Merge ata_host_set_pio() and ata_host_set_dma() into ata_set_mode()
    and use function-level *dev to iterate over devices.  This eases
    soon-to-follow ata_set_mode() interface change.
    
    While at it, kill an unnecessary comment and normalize others.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4f65977df0b9a667fdcd85b95d457a220c94113f
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:18 2006 +0900

    [PATCH] libata: make ata_set_mode() handle no-device case properly
    
    Make ata_set_mode() return without doing anything if there is no
    device on the port.  This is in preparation for ata_bus_probe()
    changes.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e1211e3fa7fd05ff0d4f597fd37e40de8acc6784
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:18 2006 +0900

    [PATCH] libata: implement ata_dev_enabled and disabled()
    
    This patch renames ata_dev_present() to ata_dev_enabled() and adds
    ata_dev_disabled().  This is to discern the state where a device is
    present but disabled from not-present state.  This disctinction is
    necessary when configuring transfer mode because device selection
    timing must not be violated even if a device fails to configure.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9974e7cc6c8b8ea796c92cdf28db93e4579a4000
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:17 2006 +0900

    [PATCH] libata: convert do_probe_reset() to ata_do_reset()
    
    Make do_probe_reset() generic by pushing classification check into
    ata_drive_probe_reset() and rename it to ata_do_reset().  This will be
    used by EH reset.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 4c360c81a6f8d4253f7fc2e69852305676fdfa72
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:17 2006 +0900

    [PATCH] libata: separate out ata_spd_string()
    
    Separate out ata_spd_string() from sata_print_link_status().  This
    will be used by SATA spd configuration routines.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 96072e699be08af8e7c33c56759582ea89088a02
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:17 2006 +0900

    [PATCH] libata: make ata_bus_probe() return negative errno on failure
    
    ata_bus_probe() uses unsigned int rc to receive negative errno and
    returns the converted unsigned int value.  Convert temporary variables
    to int and make ata_bus_probe() return negative errno on failure.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 5bbc53f4cfd28bf1d0e476ed23bc3a094eff718a
Author: Tejun Heo <htejun@gmail.com>
Date:   Sat Apr 1 01:38:17 2006 +0900

    [PATCH] libata: fix ata_set_mode() return value
    
    Make ata_set_mode() return correct error value when ata_dev_set_mode()
    fails.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit ec7381d6bfd3e7b8d2880dd5e9d03b131b0603f6
Author: Len Brown <lenb@toshiba.site>
Date:   Sat Apr 1 05:12:23 2006 -0500

    ACPI: inline trivial acpi_os_get_thread_id()
    
    acpi_os_get_thread_id() is used only for debugging
    code that is not enabled on Linux, so stub it out.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 8313524a0d466f451a62709aaedf988d8257b21c
Author: Bob Moore <robert.moore@intel.com>
Date:   Tue Oct 3 00:00:00 2006 -0400

    ACPI: ACPICA 20060310
    
    Tagged all external interfaces to the subsystem with the
    new ACPI_EXPORT_SYMBOL macro. This macro can be defined
    as necessary to assist kernel integration. For Linux,
    the macro resolves to the EXPORT_SYMBOL macro. The default
    definition is NULL.
    
    Added the ACPI_THREAD_ID type for the return value from
    acpi_os_get_thread_id(). This allows the host to define this
    as necessary to simplify kernel integration. The default
    definition is ACPI_NATIVE_UINT.
    
    Valery Podrezov fixed two interpreter problems related
    to error processing, the deletion of objects, and placing
    invalid pointers onto the internal operator result stack.
    http://bugzilla.kernel.org/show_bug.cgi?id=6028
    http://bugzilla.kernel.org/show_bug.cgi?id=6151
    
    Increased the reference count threshold where a warning is
    emitted for large reference counts in order to eliminate
    unnecessary warnings on systems with large namespaces
    (especially 64-bit.) Increased the value from 0x400
    to 0x800.
    
    Due to universal disagreement as to the meaning of the
    'c' in the calloc() function, the ACPI_MEM_CALLOCATE
    macro has been renamed to ACPI_ALLOCATE_ZEROED so that the
    purpose of the interface is 'clear'. ACPI_MEM_ALLOCATE and
    ACPI_MEM_FREE are renamed to ACPI_ALLOCATE and ACPI_FREE.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ea936b78f46cbe089a4ac363e1682dee7d427096
Author: Bob Moore <robert.moore@intel.com>
Date:   Fri Feb 17 00:00:00 2006 -0500

    ACPI: ACPICA 20060217
    
    Implemented a change to the IndexField support to match
    the behavior of the Microsoft AML interpreter. The value
    written to the Index register is now a byte offset,
    no longer an index based upon the width of the Data
    register. This should fix IndexField problems seen on
    some machines where the Data register is not exactly one
    byte wide. The ACPI specification will be clarified on
    this point.
    
    Fixed a problem where several resource descriptor
    types could overrun the internal descriptor buffer due
    to size miscalculation: VendorShort, VendorLong, and
    Interrupt. This was noticed on IA64 machines, but could
    affect all platforms.
    
    Fixed a problem where individual resource descriptors were
    misaligned within the internal buffer, causing alignment
    faults on IA64 platforms.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 08a556db919f67e1e4d33ae8d40f7222da34d994
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Mar 31 13:29:04 2006 +0800

    [PATCH] libata-dev: print out information for ATAPI devices with CDB interrupts
    
    print out information for ATAPI devices with CDB interrupts
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 52fc0b026e99b5d5d585095148d997d5634bbc25
Author: Bob Moore <robert.moore@intel.com>
Date:   Mon Oct 2 00:00:00 2006 -0400

    [ACPI] ACPICA 20060210
    
    Removed a couple of extraneous ACPI_ERROR messages that
    appeared during normal execution. These became apparent
    after the conversion from ACPI_DEBUG_PRINT.
    
    Fixed a problem where the CreateField operator could hang
    if the BitIndex or NumBits parameter referred to a named
    object. From Valery Podrezov.
    http://bugzilla.kernel.org/show_bug.cgi?id=5359
    
    Fixed a problem where a DeRefOf operation on a buffer
    object incorrectly failed with an exception. This also
    fixes a couple of related RefOf and DeRefOf issues.
    From Valery Podrezov.
    http://bugzilla.kernel.org/show_bug.cgi?id=5360
    http://bugzilla.kernel.org/show_bug.cgi?id=5387
    http://bugzilla.kernel.org/show_bug.cgi?id=5392
    
    Fixed a problem where the AE_BUFFER_LIMIT exception was
    returned instead of AE_STRING_LIMIT on an out-of-bounds
    Index() operation. From Valery Podrezov.
    http://bugzilla.kernel.org/show_bug.cgi?id=5480
    
    Implemented a memory cleanup at the end of the execution
    of each iteration of an AML While() loop, preventing the
    accumulation of outstanding objects. From Valery Podrezov.
    http://bugzilla.kernel.org/show_bug.cgi?id=5427
    
    Eliminated a chunk of duplicate code in the object
    resolution code. From Valery Podrezov.
    http://bugzilla.kernel.org/show_bug.cgi?id=5336
    
    Fixed several warnings during the 64-bit code generation.
    
    Signed-off-by: Bob Moore <robert.moore@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 46358614ed5b031797522f1020e989c959a8d8a6
Author: Len Brown <lenb@toshiba.site>
Date:   Fri Mar 31 02:16:19 2006 -0500

    Revert "[PATCH] ACPI: fix vendor resource length computation"
    
    fixed in a different way by a subsequent ACPICA patch
    
    This reverts 35b73ceb9a7d10c81bd9e79e8485f7079ef2b40e commit.

commit 6665bda76461308868bd1e52caf627f4cb29ed32
Author: Adrian Bunk <bunk@stusta.de>
Date:   Sat Mar 11 10:12:00 2006 -0500

    [ACPI] drivers/acpi/video.c: fix error path NULL pointer dereference
    
    The Coverity checker spotted this bug in
    acpi_video_device_lcd_query_levels().
    
    Signed-off-by: Adrian Bunk <bunk@stusta.de>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit fdc136ccd3332938e989439c025c363f8479f3e6
Author: Dave Jones <davej@redhat.com>
Date:   Wed Mar 8 22:12:00 2006 -0500

    [ACPI] fix possible acpi thermal leak in failure path
    
    Coverity: #601
    
    Signed-off-by: Dave Jones <davej@redhat.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit a1f9e65e2085e0a87f28a4d5a8ae43b32c087f24
Author: Len Brown <len.brown@intel.com>
Date:   Wed Jan 25 23:47:36 2006 -0500

    [ACPI] document cmdline acpi_os_name=
    
    This can sometimes be used to work around broken BIOS.
    Use "Microsoft Windows" to take the same path
    through the BIOS as Windows98 would.
    
    The default is "Microsoft Windows NT", which
    is what NT and later versions of Windows use,
    and is the most tested path through most BIOS.
    
    Set it to anything else, including "Linux", at your
    own risk, as it seems that virtually no BIOS
    has been tested with anything but the two options above.
    
    Note that this uses the legacy _OS interface, so
    we don't expect this to ever change.
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 1fee94034917aa711fcbd4ebf4c36f7ebd9fa7d6
Author: Irwan Djajadi <irwan.djajadi@iname.com>
Date:   Fri Jan 20 15:28:00 2006 -0500

    [ACPI] drivers/acpi/hotkey.c: check kmalloc return value
    
    Signed-off-by: Irwan Djajadi <irwan.djajadi@iname.com>
    Signed-off-by: Alexey Dobriyan <adobriyan@gmail.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 0eacee585a89ce5827b572a73a024931506bef48
Author: Len Brown <lenb@toshiba.site>
Date:   Fri Mar 31 00:37:23 2006 -0500

    ACPI: enable BIOS warning
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5452
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4f0e7c51ae392d841be395a9c6b8d26a9fbf33d2
Merge: 74d89c1... 55d8ca4...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Mar 29 19:59:39 2006 -0500

    Merge branch 'upstream'
    
    Conflicts:
    
    	drivers/scsi/sata_mv.c

commit 79072f38909e3d9883317238887460c39ddcc4cb
Merge: 200d5a7... 55d8ca4...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Mar 29 19:58:22 2006 -0500

    Merge branch 'upstream'

commit 74d89c16735d83349ea74232031819e989a49156
Merge: 52a3220... 05c8e0a...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Wed Mar 29 17:24:55 2006 -0500

    Merge branch 'upstream'

commit 52a3220599647ba429fcbca2388ec35b850fa72f
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 18:18:15 2006 +0800

    [PATCH] libata-dev: wait idle after reading the last data block
    
    Some CD-ROM drives are slow to clear DRQ, after the last data block
    is read by PIO. Use ata_wait_idle() after reading the last data block.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 71601958f73b952281f2b02e16d1f11c99ee0a8b
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 18:11:12 2006 +0800

    [PATCH] libata-dev: fix the device err check sequence (respin)
    
    Current irq-pio checks ERR bit and stops on ERR before it does anything else.
    This behavior doesn't look right.
    The DRQ bit should take higher precedence than the ERR bit.
    
    Changes:
    - Let the HSM do the data transfer whenever the
      device asks for DRQ bit, even if the ERR bit is set.
    - For DRQ=1 ERR=1, don't trust the data
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 999bb6f4260f9499fdeab3f8fdcd8b9013eca39e
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 18:07:48 2006 +0800

    [PATCH] libata-dev: irq-pio minor fixes (respin)
    
    irq-pio minor fixes for printk() and comments.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c234fb00ea8999076728137d96603b713ad8b53f
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:58:38 2006 +0800

    [PATCH] libata-dev: Make the the in_wq check as an inline function
    
    Make the the in_wq check easier to read as an inline function.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit c2bbc551615c21a4c280c797987dbb50f2701594
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:56:55 2006 +0800

    [PATCH] libata-dev: ata_check_atapi_dma() fix for ATA_FLAG_PIO_POLLING LLDDs
    
    ata_check_atapi_dma() fix for LLDDs with the ATA_FLAG_PIO_POLLING flag.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 27cdadef6dfe0d0614653919a110fc75ab1650ce
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:53:57 2006 +0800

    [PATCH] libata-dev: Cleanup unused enums/functions
    
    Cleanup the following unused functions:
    - ata_pio_poll()
    - ata_pio_complete()
    - ata_pio_first_block()
    - ata_pio_block()
    - ata_pio_error()
    ap->pio_task_timeout and other enums.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit a1af37344f669d0fefa8c8a9e37eb6a7c086a2c2
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:50:15 2006 +0800

    [PATCH] libata-dev: Convert ata_pio_task() to use the new ata_hsm_move()
    
    Convert ata_pio_task() to use the new ata_hsm_move().
    
    Changes:
    - refactor ata_pio_task() to poll device status register and
    - call the new ata_hsm_move() when device indicates it is not BSY.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit bb5cb290f095f17f88c912e3da35adf5b2d9500b
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:48:02 2006 +0800

    [PATCH] libata-dev: Let ata_hsm_move() work with both irq-pio and polling pio
    
    Let ata_hsm_move() work with both irq-pio and polling pio codepath.
    
    Changes:
    - add a new parameter "in_wq" for polling pio
    - add return value "poll_next" to tell polling pio task whether the HSM is finished
    - merge code from ata_pio_first_block() to the HSM_ST_FIRST state.
    - call ata_poll_qc_complete() if called from the workqueue
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 6912ccd5a4a095d71fd7215ef2abea877c8fed6f
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:45:49 2006 +0800

    [PATCH] libata-dev: Minor fix for ata_hsm_move() to work with ata_host_intr()
    
    Minor fix for ata_hsm_move() to work with ata_host_intr().
    Changes:
    - WARN_ON() and comment fix
    - Make the HSM_ST_LAST device status checking more rigid.
    - Treat unknown HSM state as BUG().
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit e2cec77117a6e4fcbac2601e2f7b0b3f4f5a4c84
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:43:49 2006 +0800

    [PATCH] libata-dev: Move out the HSM code from ata_host_intr()
    
    Move out the irq-pio HSM code from ata_host_intr() to the new ata_hsm_move() function verbatim.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 19d5d7309a928eb86f58b37165a2d501621ae3c0
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:41:43 2006 +0800

    [PATCH] libata-dev: Remove atapi_packet_task()
    
    atapi_packet_task() was replaced by ata_pio_task().
    Remove the unused atapi_packet_task().
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 13ee4628ce68d1e54df01cc31239c8887c59e65d
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:39:34 2006 +0800

    [PATCH] libata-dev: Fix merge problem with upstream
    
    Fix merge problem with upstream.
    Changes:
    1. add missing dev->cdb_len = 16 for ATA devices
    2. use ata_pio_task instead of atapi_packet_task
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit cf2f7689f94ee02e52d5331bc1a87421a67a882c
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sat Mar 25 17:37:53 2006 +0800

    [PATCH] libata-dev: Remove trailing whitespaces
    
    Remove trailing whitespaces.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 9cfda2c94df61c9f859b474abe774c65a4464d0a
Author: Andi Kleen <ak@suse.de>
Date:   Mon Mar 27 02:24:32 2006 -0500

    [ACPI] fix "nolapic" flag in ACPI mode
    
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 4bbf7bc4c7bf1c80ec3c942fa5f1b6e6fa67dd99
Merge: 84ac69e... aec5c3c...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 24 12:29:39 2006 -0500

    Merge branch 'upstream'
    
    Conflicts:
    
    	drivers/scsi/libata-core.c

commit 84ac69e8bf9f36eb0166817373336d14fa58f5cc
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 24 09:27:49 2006 -0500

    [libata] irq-pio: fix build breakage

commit 11ed56fb7899f9eb9eaef8e5919db1bf08f1b07e
Merge: 54da9a3... 2cc432e...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 24 09:24:04 2006 -0500

    Merge branch 'upstream'
    
    Conflicts:
    
    	drivers/scsi/sata_vsc.c

commit 200d5a7684cc49ef4be40e832daf3f217e70dfbb
Author: Tejun Heo <htejun@gmail.com>
Date:   Wed Feb 15 16:24:49 2006 +0900

    [PATCH] libata: increase LBA48 max sectors to 65535
    
    max_hw_sectors/max_sectors separation patch made into the tree,
    increase max_sectors to its hardware limit.
    
    Signed-off-by: Tejun Heo <htejun@gmail.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 54da9a3968448681d0ddf193ec90f2480c5cba1c
Merge: 46e202e... 2f7ccc5...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Mar 11 20:07:36 2006 -0500

    Merge branch 'upstream'

commit 46e202ec1feeac3cb722cd3410d62a9a00891388
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Mar 11 19:25:47 2006 -0500

    libata: irq-pio build fixes

commit ce1e7a2ac721eb9d825b63f74752d0c9e0c635c2
Merge: c2956a3... 75deb6f...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Sat Mar 11 19:21:17 2006 -0500

    Merge branch 'upstream'

commit c2956a3b0d1c17b38da369811a6ce93eb7a01a04
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Mar 3 10:34:05 2006 +0800

    [PATCH] libata-dev: recognize WRITE_MULTI_FUA_EXT for r/w multiple
    
    Recognize ATA_CMD_WRITE_MULTI_FUA_EXT as r/w multiple commands.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>

commit 801c63c38ae52e8bfb3f6518de00a0be22c55f9a
Merge: 1ed82ae... 348edc5...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Fri Mar 3 12:16:03 2006 -0500

    Merge branch 'upstream'

commit 1ed82ae3df3882bfcb5bfe5e9f97e4e8e23af299
Merge: 11fff82... cccc65a...
Author: Jeff Garzik <jeff@garzik.org>
Date:   Mon Feb 27 11:51:52 2006 -0500

    Merge branch 'upstream'

commit 11fff8287fdaeb700df79aa8253650b60c7b21e2
Merge: a5fd79c... f131883...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Feb 20 16:56:08 2006 -0500

    Merge branch 'upstream'

commit a5fd79ccd60b7c9cc0221dfaaa950933eff6af99
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Feb 20 05:21:14 2006 -0500

    sata_vsc build fix

commit ff607748590fba14aecedb0d50edc4ada98d4302
Merge: db024d5... 6aff8f1...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Feb 20 05:13:31 2006 -0500

    Merge branch 'upstream'

commit db024d5398cd332023896caf70530564b15ec88e
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Feb 13 00:23:57 2006 -0500

    [libata] build fix after cdb_len move

commit 3875e1945b55f0eb83fe7359614a801eeb716761
Merge: 587005d... f1b3187...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Feb 13 00:13:48 2006 -0500

    Merge branch 'upstream'

commit 587005de144acd3007b8e7f2a2a7c6add157c155
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Feb 11 18:17:32 2006 -0500

    [libata irq-pio] s/assert/WARN_ON/

commit 1cb9d721d9df9182a42d1ff59427a100c6522efc
Merge: ca7d5e4... bef4a45...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Feb 11 18:02:04 2006 -0500

    Merge branch 'upstream'

commit ca7d5e42d783e54f0057317c9226262d68ab7717
Merge: a081975... cc9278e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Feb 10 07:09:37 2006 -0500

    Merge branch 'upstream'

commit a0819750024a0056d760a936d72f76882a7e393f
Merge: 41232d3... 1fdffbc...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Feb 9 05:15:47 2006 -0500

    Merge branch 'upstream'

commit 41232d3ecac9df8eb94ff27330eb84b8baccc6b7
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Feb 9 04:52:55 2006 -0500

    [libata] build fix after merging some pre-packet_task-removal code

commit 2ddd1023d2ccde0b330338c48ab898b153f37712
Merge: 99b3738... 389984c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Feb 9 04:31:08 2006 -0500

    Merge branch 'upstream'

commit 99b3738fbf17208ac474420fa6b7e4b0c0c2b9ed
Merge: 332b5a5... 8a19ac8...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Feb 9 04:28:13 2006 -0500

    Merge branch 'upstream'

commit 332b5a52f2f96bc2d13bbe594a430318c0ee4425
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Wed Feb 8 16:51:34 2006 +0800

    [PATCH] libata-dev: Minor comment fix
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ===
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 555a8965069b8e34292cbccc3ad8f619b96815fe
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Wed Feb 8 16:50:29 2006 +0800

    [PATCH] libata-dev: Use new AC_ERR_* flags
    
      - Use new AC_ERR_* flags as done in Tejun's patches
      - In ata_qc_timeout(), replace ac_err_mask(drv_stat) with AC_ERR_TIMEOUT.
        This makes time out handler always report error to upper layer.
        Otherwise if the drv_stat looks good, libata might falsely report OK to the upper layer.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ===
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 20ea079e5883ab2b82fa5e576957f52e4e5c252c
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Wed Feb 8 16:48:49 2006 +0800

    [PATCH] libata-dev: Use new ata_queue_pio_task() for PIO polling task
    
      - Use new ata_queue_pio_task() for PIO polling task.
      - Remove the unused ata_queue_packet_task() function.
        (irq-pio had merged the 2 queues into one.)
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ===
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit aef9d533da2eb7a5700a8c8700f2597c35cc50d1
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Wed Feb 8 16:37:43 2006 +0800

    [PATCH] libata-dev: Fix array index value in ata_rwcmd_protocol()
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ===
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit d52bb94d56676acd9bdac8e097257a87b4b1b2e1
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Dec 14 15:05:00 2005 -0500

    Enable P-state software coordination via _PDC
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5737
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit c52851b60cc0aaaf974ff0e49989fb698220447d
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Dec 14 15:05:00 2005 -0500

    P-state software coordination for speedstep-centrino
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5737
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 09b4d1ee881c8593bfad2a42f838d85070365c3e
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Dec 14 15:05:00 2005 -0500

    P-state software coordination for acpi-cpufreq
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5737
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit 3b2d99429e3386b6e2ac949fc72486509c8bbe36
Author: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
Date:   Wed Dec 14 15:05:00 2005 -0500

    P-state software coordination for ACPI core
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5737
    
    Signed-off-by: Venkatesh Pallipadi <venkatesh.pallipadi@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit ffd642e748c867a7339b57225b8bf8b9a0dcd9c5
Author: David Shaohua Li <shaohua.li@intel.com>
Date:   Wed Feb 8 17:35:00 2006 -0500

    [ACPI] enable SMP C-states on x86_64
    
    http://bugzilla.kernel.org/show_bug.cgi?id=5653
    
    Signed-off-by: David Shaohua Li <shaohua.li@intel.com>
    Signed-off-by: Len Brown <len.brown@intel.com>

commit f6ef65e6d004b77d516037424c7ccc209d0d3509
Merge: 7103c7b... c19ba8a...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:45:00 2006 -0500

    Merge branch 'upstream-2.6.17'

commit 7103c7bc863c10dd2a26c19c8cf4d7d2846da947
Merge: b4d2888... a72ec4c...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:39:25 2006 -0500

    Merge branch 'tmp'

commit b4d28889f7ebfe498dedaceb773b4c785b97d195
Merge: 7dfb869... 041c5fc...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:37:46 2006 -0500

    Merge branch 'tmp'

commit 7dfb869c8e45e5863534f38fdac990829b22964a
Merge: 628e386... 11a56d2...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:36:14 2006 -0500

    Merge branch 'tmp'

commit 628e386e27674906326455f01d87878a5f0cbce7
Merge: 8dd2e3b... 77853bf...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:29:20 2006 -0500

    Merge branch 'tmp'

commit 8dd2e3bd57c3b389febba1de6b10372ef507f985
Merge: 2af5920... 71e834f...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:26:46 2006 -0500

    Merge branch 'tmp'

commit 2af5920b81a4cd0a22d40b6b2c38356d3df03e13
Merge: 000080c... 3ee68c4...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Jan 27 02:20:42 2006 -0500

    Merge branch 'master'

commit 000080c3499cd5037e60c08a8053efb9e48aa9c0
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Dec 26 16:48:00 2005 +0800

    [PATCH] libata-dev: filter out noisy ATAPI error messages
    
    Changes:
     - Filter out ATAPI packet command error messages in ata_pio_error()
     - Filter out ATAPI packet command error messages in ata_host_intr()
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ======
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit a4f16610081001640ffe0314024bc31c10f69757
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Mon Dec 26 16:40:53 2005 +0800

    [PATCH] libata-dev: determine err_mask when error is found
    
    Changes:
    - Determine err_mask directly when an error is found.
    - Remove "qc->err_mask |= __ac_err_mask(status);" in ata_host_intr()
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ============
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit ea9b395fe20ac74be788f415af2622ac8f0c35c7
Merge: 61420e1... 1bc4ccf...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jan 17 10:29:06 2006 -0500

    Merge branch 'upstream'

commit 61420e147a706ee7c7a902008045547fb2a2a330
Merge: 3d0a59c... a18ceba...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Jan 3 11:00:06 2006 -0500

    Merge branch 'upstream'

commit 3d0a59c02303df01848537b3bf938dc11e9a0ded
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 13 22:28:19 2005 -0500

    [libata sata_promise] irq_pio: fix merge bug

commit 36dfc3f67b3054e6bbc5344256461802aa5d6257
Merge: e8b0942... c6329f4...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 13 22:22:50 2005 -0500

    Merge branch 'upstream'

commit e8b09428482deff1a9d7a36d371acee364182ec3
Merge: d1397f8... e508a39...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 13 02:32:01 2005 -0500

    Merge branch 'upstream'

commit d1397f837647d8b6b3c9253a7e713d203f3cbb26
Merge: 278efe9... d00d598...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 13 01:47:05 2005 -0500

    Merge branch 'upstream'

commit 278efe950988e72e2d0cea35059438fc27035d13
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 6 05:01:27 2005 -0500

    [libata] irq-pio: fix breakage related to err_mask merge

commit 701db69d6647f61e4660c9102d7f2fd5dffc203d
Merge: 6cf5bca... fe79e68...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 6 04:52:48 2005 -0500

    Merge branch 'upstream'

commit 6cf5bcaaf9a92225017f7a3f1a630f6b5147ad4a
Merge: 6fc8819... 436b0f7...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Dec 6 04:14:25 2005 -0500

    Merge branch 'master'

commit 6fc88198961141c2d9d34cde0855fb2e85ea3382
Merge: 5f3fdeb... 5666c09...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Thu Dec 1 01:59:38 2005 -0500

    Merge branch 'master'

commit 5f3fdeb6242d84126e4bd45ac9e2246833fe8352
Merge: 98a5d02... b71d4da...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Nov 29 03:57:29 2005 -0500

    Merge branch 'upstream'

commit 98a5d024eb589a863c1c79f3c3f8ecb666c0eec9
Merge: d67e7eb... 1b15688...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Nov 20 00:41:18 2005 -0500

    Merge branch 'upstream'

commit d67e7ebb2a15bf0429c55f2fc1c4b02808367874
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Nov 18 11:55:00 2005 -0500

    [libata sata_mv] IRQ PIO build fix

commit f333b3f111e9db76109e304df8ee777ace7fbf86
Merge: f4256e3... 79bfb0a...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Nov 18 11:44:17 2005 -0500

    Merge branch 'upstream'

commit f4256e301d9800b1e0276404cb01b3ac85b51067
Merge: fb2a26b... cd52d1e...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Nov 11 23:39:35 2005 -0500

    Merge branch 'master'

commit fb2a26b9f8f5eda6b96ba9753edf105e5999d6d9
Merge: 07f6f7d... 7c39833...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Nov 9 01:35:03 2005 -0500

    Merge branch 'upstream'

commit 07f6f7d074e68d56d82e7cc5c65096033ac8dc56
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Nov 1 19:33:20 2005 +0800

    [PATCH] libata irq-pio: add read/write multiple support
    
       - add is_multi_taskfile() to ata.h
       - initialize ata_device->multi_count with device identify data
       - use ata_pio_sectors() to support r/w multiple commands
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ========
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit fbcdd80b0d5bde06f3483b9a13f9599a0452431c
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Nov 1 19:30:05 2005 +0800

    [PATCH] libata irq-pio: eliminate unnecessary queuing in ata_pio_first_block()
    
       - change the return value of ata_pio_complete() 0 <-> 1
       - add return value for ata_pio_first_block()
       - rename variable "qc_completed" to "has_next" in ata_pio_task()
       - use has_next to eliminate unnecessary queuing in ata_pio_first_block()
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ==========
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e27486db89ef04d5df1727c52362fa3d50cff241
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Nov 1 19:24:49 2005 +0800

    [PATCH] libata irq-pio: merge the ata_dataout_task workqueue with ata_pio_task workqueue
    
       - remove ap->dataout_task from struct ata_port
       - let ata_pio_task() handle the HSM_ST_FIRST state.
       - rename ata_dataout_task() to ata_pio_first_block()
       - replace the ata_dataout_task workqueue with ata_pio_task workqueue
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ========
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 467b16d4bebe8d251ca974eaa5da50b315206e9d
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Nov 1 19:19:01 2005 +0800

    [PATCH] libata irq-pio: misc fixes
    
       - ata_pio_block(): add ata_altstatus(ap) to prevent reading device status before it is valid
       - remove the unnecessary HSM_ST_IDLE state from ata_pio_task()
       - raise BUG() when unknown state is found in ata_pio_task()
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    
    ============
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c7c6e9494cc9a4a5b1a2ca870ed4531ad2b98a83
Merge: 8cedcfd... 8e8b77d...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Wed Nov 9 01:20:26 2005 -0500

    Merge branch 'upstream'

commit 8cedcfd43a0b00741fff43d6a4c1a8b7748db3b0
Merge: cd8200e... 70d9d82...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sat Nov 5 15:44:02 2005 -0500

    Merge branch 'master'

commit cd8200e6d4f9f05e6ea48f7c000be890337396ac
Merge: 122401c... 005a5a0...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Oct 30 23:35:23 2005 -0500

    Merge branch 'upstream'

commit 122401ce39faab22b29eb11b20e4342f7f566b1b
Merge: 94ec1ef... 6e9d6b8...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Oct 30 20:25:28 2005 -0500

    Merge branch 'master'

commit 94ec1ef1cf29e137e5c79372e432b040c6604be6
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Oct 30 02:15:08 2005 -0500

    [libata pdc_adma] fix for new irq-driven PIO code

commit fce45c1c8a6b5334fa88bbb9b1496b0699d3fef0
Merge: 15dbb5a... 81cfb88...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Oct 30 01:58:41 2005 -0500

    Merge branch 'upstream'

commit 15dbb5a3f971a28040ae6cbcd8bbdf19b629fa83
Merge: be697c3... 5fadd05...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Fri Oct 28 12:30:16 2005 -0400

    Merge branch 'master'

commit be697c3f137c9ed808753bbbc5d7751c6e5303fc
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Oct 18 21:27:34 2005 -0400

    [libata pdc_adma] update for removal of ATA_FLAG_NOINTR

commit 4e0e329d9a2011f9f7a7c0a378dc3bff7b0a0283
Merge: e33b9df... 59a10b1...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Tue Oct 18 21:23:11 2005 -0400

    Merge branch 'upstream'

commit e33b9dfa3008fcaa908dc0c8c472a812c400f839
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Oct 9 09:51:46 2005 -0400

    [libata irq-pio] build fix

commit 91b8b3132e1870bfe3c4d3a999f13f20fc4e9726
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sun Oct 9 09:48:44 2005 -0400

    [libata irq-pio] use PageHighMem() to optimize the kmap_atomic() usage
    as done in ide-scsi.c
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit 083958d313f886dc7d00522f2972f90f55c40041
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sun Oct 9 09:47:31 2005 -0400

    [libata irq-pio] reorganize "buf + offset" in ata_pio_sector()
    and __atapi_pio_bytes()
    
       - relocate DPRINTK("data %s\n", qc->tf.flags & ATA_TFLAG_WRITE ?
    			"write" : "read");
       - buf + offset, buf - offset tidy up
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit 7282aa4b49d08254ff1dcefdf3a2fb01b02ebbe2
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Sun Oct 9 09:46:07 2005 -0400

    [libata irq-pio] reorganize ata_pio_sector() and __atapi_pio_bytes()
    
       - move some code out of the kmap_atomic() / kunmap_atomic() zone
       - remove the redundant "do_write = (qc->tf.flags & ATA_TFLAG_WRITE);"
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>

commit f58f8be7f65312f602f7970e7da47a6413e692b0
Merge: c71c185... e710245...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Sun Oct 9 09:44:07 2005 -0400

    Merge branch 'upstream'

commit c71c18576d0d8aa4db876c737c3c597c724cf02f
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Oct 4 06:03:45 2005 -0400

    libata: move atapi_send_cdb() and ata_dataout_task()
    to be near ata_pio_*() functions

commit 0fbbbf2bde4da5cb01a949c3d7b21c0627f520a8
Merge: 54f0038... 2b23582...
Author: Jeff Garzik <jgarzik@pobox.com>
Date:   Mon Oct 3 19:48:49 2005 -0400

    Merge libata upstream (which includes C/H/S support) include irq-pio branch.
    Merge branch 'upstream'

commit 54f00389563c80fa1de250a21256313ba01ca07d
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Sep 30 19:14:19 2005 +0800

    [PATCH] libata irq-pio: cleanup ata_qc_issue_prot()
    
    ata_qc_issue_prot():
        - cleanup and let the PIO data out case always go through the
    ata_dataout_task() codepath.
          (Previously for PIO data out case, 2 code pathes were used
            - irq case goes through ata_data_out_task() codepath.
            - polling case jumps over the HSM_ST_FIRST state and goes to
    HSM_ST and ata_pio_task() directly.)
    
      ata_dataout_task():
        - rearrange the queue_work() code to handle the PIO data out +
    polling case.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 86a7397cda08a65bc4f306e812c846e2437b5347
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Sep 30 19:11:35 2005 +0800

    [PATCH] libata irq-pio: simplify if condition in ata_dataout_task()
    
    - Use if (qc->tf.protocol == ATA_PROT_PIO) instead of
    if(is_atapi_taskfile()) in ata_dataout_task()
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit f9997be974be40e884e9e8157ded2f2f9aed454c
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Sep 30 19:09:31 2005 +0800

    [PATCH] libata irq-pio: rename atapi_packet_task() and comments
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit c56b14d2a3e32695e13cd49b417da889da744d1c
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Fri Sep 30 19:07:39 2005 +0800

    [PATCH] libata irq-pio: add comments and cleanup
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit e50362eccd8809a224cda5f71714a088ba37b2ab
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Sep 27 17:39:50 2005 +0800

    [PATCH] libata: interrupt driven pio for LLD
    
    libata.h:
    libata-core:
      Add ATA_FLAG_PIO_POLLING flag for LLDs that expect interrupt for
    command completion only.
    
    sata_nv.c:
    sata_vsc.c:
      irq handler is wrapper around ata_host_intr(), can handle PIO interrupts.
    
    sata_promise.c:
    sata_sx4.c:
    sata_qstor.c:
    sata_mv.c:
      Private irq handler.
      Polling mode ATA_FLAG_PIO_POLLING used for compatibility.
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>

commit 312f7da2824c82800ee78d6190f12854456957af
Author: Albert Lee <albertcc@tw.ibm.com>
Date:   Tue Sep 27 17:38:03 2005 +0800

    [PATCH] libata: interrupt driven pio for libata-core
    
    - add PIO_ST_FIRST for the state before sending ATAPI CDB or sending
    "ATA PIO data out" first data block.
    - add ATA_TFLAG_POLLING and ATA_DFLAG_CDB_INTR flags
    - remove the ATA_FLAG_NOINTR flag since the interrupt handler is now
    aware of the states
    - modify ata_pio_sector() and atapi_pio_bytes() to work in the interrupt
    context
    - modify the ata_host_intr() to handle PIO interrupts
    - modify ata_qc_issue_prot() to initialize states
    - atapi_packet_task() changed to handle "ATA PIO data out" first data block
    - support the pre-ATA4 ATAPI device which raise interrupt when ready to
    receive CDB
    
    Signed-off-by: Albert Lee <albertcc@tw.ibm.com>
    Signed-off-by: Jeff Garzik <jgarzik@pobox.com>
